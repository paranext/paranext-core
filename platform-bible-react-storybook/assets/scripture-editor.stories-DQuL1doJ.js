var Jy=Object.defineProperty;var Gy=(r,e,t)=>e in r?Jy(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var It=(r,e,t)=>Gy(r,typeof e!="symbol"?e+"":e,t);import{j as Yy}from"./jsx-runtime-CoJcBlqr.js";import{r as w,e as Xy}from"./iframe-ChjBVkNN.js";import{r as Rt}from"./index-BfzcDxxY.js";import"./index-BWcRxFB8.js";var he={},Ue={},Rc;function Ai(){if(Rc)return Ue;Rc=1;function r(v,b,C){if(C===void 0&&(C=Array.prototype),v&&typeof C.find=="function")return C.find.call(v,b);for(var T=0;T<v.length;T++)if(t(v,T)){var R=v[T];if(b.call(void 0,R,T,v))return R}}function e(v,b){return b===void 0&&(b=Object),b&&typeof b.getOwnPropertyDescriptors=="function"&&(v=b.create(null,b.getOwnPropertyDescriptors(v))),b&&typeof b.freeze=="function"?b.freeze(v):v}function t(v,b){return Object.prototype.hasOwnProperty.call(v,b)}function n(v,b){if(v===null||typeof v!="object")throw new TypeError("target is not an object");for(var C in b)t(b,C)&&(v[C]=b[C]);return v}var i=e({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function s(v){return t(i,v.toLowerCase())}var o=e({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(v){return t(o,v.toLowerCase())}var l=e({script:!1,style:!1,textarea:!0,title:!0});function u(v){var b=v.toLowerCase();return t(l,b)&&!l[b]}function c(v){var b=v.toLowerCase();return t(l,b)&&l[b]}function d(v){return v===h.HTML}function f(v){return d(v)||v===h.XML_XHTML_APPLICATION}var h=e({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),g=Object.keys(h).map(function(v){return h[v]});function m(v){return g.indexOf(v)>-1}var y=e({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Ue.assign=n,Ue.find=r,Ue.freeze=e,Ue.HTML_BOOLEAN_ATTRIBUTES=i,Ue.HTML_RAW_TEXT_ELEMENTS=l,Ue.HTML_VOID_ELEMENTS=o,Ue.hasDefaultHTMLNamespace=f,Ue.hasOwn=t,Ue.isHTMLBooleanAttribute=s,Ue.isHTMLRawTextElement=u,Ue.isHTMLEscapableRawTextElement=c,Ue.isHTMLMimeType=d,Ue.isHTMLVoidElement=a,Ue.isValidMimeType=m,Ue.MIME_TYPE=h,Ue.NAMESPACE=y,Ue}var Qn={},Lc;function aa(){if(Lc)return Qn;Lc=1;var r=Ai();function e(f,h){f.prototype=Object.create(Error.prototype,{constructor:{value:f},name:{value:f.name,enumerable:!0,writable:h}})}var t=r.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(t);function i(f){return typeof f=="number"&&f>=1&&f<=25}function s(f){return typeof f=="string"&&f.substring(f.length-t.Error.length)===t.Error}function o(f,h){i(f)?(this.name=n[f],this.message=h||""):(this.message=f,this.name=s(h)?h:t.Error),Error.captureStackTrace&&Error.captureStackTrace(this,o)}e(o,!0),Object.defineProperties(o.prototype,{code:{enumerable:!0,get:function(){var f=n.indexOf(this.name);return i(f)?f:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},l=Object.entries(a),u=0;u<l.length;u++){var c=l[u][0];o[c]=l[u][1]}function d(f,h){this.message=f,this.locator=h,Error.captureStackTrace&&Error.captureStackTrace(this,d)}return e(d),Qn.DOMException=o,Qn.DOMExceptionName=t,Qn.ExceptionCode=a,Qn.ParseError=d,Qn}var Me={},de={},Pc;function Ih(){if(Pc)return de;Pc=1;function r(Ie){try{typeof Ie!="function"&&(Ie=RegExp);var Ge=new Ie("𝌆","u").exec("𝌆");return!!Ge&&Ge[0].length===2}catch{}return!1}var e=r();function t(Ie){if(Ie.source[0]!=="[")throw new Error(Ie+" can not be used with chars");return Ie.source.slice(1,Ie.source.lastIndexOf("]"))}function n(Ie,Ge){if(Ie.source[0]!=="[")throw new Error("/"+Ie.source+"/ can not be used with chars_without");if(!Ge||typeof Ge!="string")throw new Error(JSON.stringify(Ge)+" is not a valid search");if(Ie.source.indexOf(Ge)===-1)throw new Error('"'+Ge+'" is not is /'+Ie.source+"/");if(Ge==="-"&&Ie.source.indexOf(Ge)!==1)throw new Error('"'+Ge+'" is not at the first postion of /'+Ie.source+"/");return new RegExp(Ie.source.replace(Ge,""),e?"u":"")}function i(Ie){var Ge=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(fr){var hr=typeof fr=="string";if(hr&&Ge===void 0&&fr==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return hr?fr:fr.source}).join(""),e?"mu":"m")}function s(Ie){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(s,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var o="�",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;e&&(a=i("[",t(a),"\\u{10000}-\\u{10FFFF}","]"));var l=/[\x20\x09\x0D\x0A]/,u=t(l),c=i(l,"+"),d=i(l,"*"),f=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;e&&(f=i("[",t(f),"\\u{10000}-\\u{10FFFF}","]"));var h=t(f),g=i("[",h,t(/[-.0-9\xB7]/),t(/[\u0300-\u036F\u203F-\u2040]/),"]"),m=i(f,g,"*"),y=i(g,"+"),v=i("&",m,";"),b=s(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),C=s(v,"|",b),T=i("%",m,";"),R=s(i('"',s(/[^%&"]/,"|",T,"|",C),"*",'"'),"|",i("'",s(/[^%&']/,"|",T,"|",C),"*","'")),E=s('"',s(/[^<&"]/,"|",C),"*",'"',"|","'",s(/[^<&']/,"|",C),"*","'"),A=n(f,":"),k=n(g,":"),S=i(A,k,"*"),L=i(S,s(":",S),"?"),q=i("^",L,"$"),X=i("(",L,")"),j=s(/"[^"]*"|'[^']*'/),G=i(/^<\?/,"(",m,")",s(c,"(",a,"*?)"),"?",/\?>/),O=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,B=s('"',O,'*"',"|","'",n(O,"'"),"*'"),z="<!--",$="-->",V=i(z,s(n(a,"-"),"|",i("-",n(a,"-"))),"*",$),W="#PCDATA",Y=s(i(/\(/,d,W,s(d,/\|/,d,L),"*",d,/\)\*/),"|",i(/\(/,d,W,d,/\)/)),se=/[?*+]?/,te=i(/\([^>]+\)/,se),Q=s("EMPTY","|","ANY","|",Y,"|",te),Z="<!ELEMENT",ne=i(Z,c,s(L,"|",T),c,s(Q,"|",T),d,">"),ue=i("NOTATION",c,/\(/,d,m,s(d,/\|/,d,m),"*",d,/\)/),Ee=i(/\(/,d,y,s(d,/\|/,d,y),"*",d,/\)/),De=s(ue,"|",Ee),Ne=s(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",De),qe=s(/#REQUIRED|#IMPLIED/,"|",s(s("#FIXED",c),"?",E)),ae=s(c,m,c,Ne,c,qe),Or="<!ATTLIST",Vt=i(Or,c,m,ae,"*",d,">"),Je="about:legacy-compat",Ir=s('"'+Je+'"',"|","'"+Je+"'"),Kt="SYSTEM",Mt="PUBLIC",dr=s(s(Kt,c,j),"|",s(Mt,c,B,c,j)),on=i("^",s(s(Kt,c,"(?<SystemLiteralOnly>",j,")"),"|",s(Mt,c,"(?<PubidLiteral>",B,")",c,"(?<SystemLiteral>",j,")"))),an=s(c,"NDATA",c,m),wt=s(R,"|",s(dr,an,"?")),Ce="<!ENTITY",Rr=i(Ce,c,m,c,wt,d,">"),je=s(R,"|",dr),ln=i(Ce,c,"%",c,m,c,je,d,">"),Vi=s(Rr,"|",ln),un=i(Mt,c,B),cn=i("<!NOTATION",c,m,c,s(dr,"|",un),d,">"),ce=i(d,"=",d),Te=/1[.]\d+/,_t=i(c,"version",ce,s("'",Te,"'","|",'"',Te,'"')),bt=/[A-Za-z][-A-Za-z0-9._]*/,dn=s(c,"encoding",ce,s('"',bt,'"',"|","'",bt,"'")),Vn=s(c,"standalone",ce,s("'",s("yes","|","no"),"'","|",'"',s("yes","|","no"),'"')),Kn=i(/^<\?xml/,_t,dn,"?",Vn,"?",d,/\?>/),Jn="<!DOCTYPE",Ki="<![CDATA[",Ji="]]>",Gn=/<!\[CDATA\[/,fn=/\]\]>/,Yn=i(a,"*?",fn),zs=i(Gn,Yn);return de.chars=t,de.chars_without=n,de.detectUnicodeSupport=r,de.reg=i,de.regg=s,de.ABOUT_LEGACY_COMPAT=Je,de.ABOUT_LEGACY_COMPAT_SystemLiteral=Ir,de.AttlistDecl=Vt,de.CDATA_START=Ki,de.CDATA_END=Ji,de.CDSect=zs,de.Char=a,de.Comment=V,de.COMMENT_START=z,de.COMMENT_END=$,de.DOCTYPE_DECL_START=Jn,de.elementdecl=ne,de.EntityDecl=Vi,de.EntityValue=R,de.ExternalID=dr,de.ExternalID_match=on,de.Name=m,de.NotationDecl=cn,de.Reference=C,de.PEReference=T,de.PI=G,de.PUBLIC=Mt,de.PubidLiteral=B,de.QName=L,de.QName_exact=q,de.QName_group=X,de.S=c,de.SChar_s=u,de.S_OPT=d,de.SYSTEM=Kt,de.SystemLiteral=j,de.UNICODE_REPLACEMENT_CHARACTER=o,de.UNICODE_SUPPORT=e,de.XMLDecl=Kn,de}var Fc;function Rh(){if(Fc)return Me;Fc=1;var r=Ai(),e=r.find,t=r.hasDefaultHTMLNamespace,n=r.hasOwn,i=r.isHTMLMimeType,s=r.isHTMLRawTextElement,o=r.isHTMLVoidElement,a=r.MIME_TYPE,l=r.NAMESPACE,u=Symbol(),c=aa(),d=c.DOMException,f=c.DOMExceptionName,h=Ih();function g(p){if(p!==u)throw new TypeError("Illegal constructor")}function m(p){return p!==""}function y(p){return p?p.split(/[\t\n\f\r ]+/).filter(m):[]}function v(p,_){return n(p,_)||(p[_]=!0),p}function b(p){if(!p)return[];var _=y(p);return Object.keys(_.reduce(v,{}))}function C(p){return function(_){return p&&p.indexOf(_)!==-1}}function T(p){if(!h.QName_exact.test(p))throw new d(d.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+p+'"')}function R(p,_){T(_),p=p||null;var x=null,I=_;if(_.indexOf(":")>=0){var J=_.split(":");x=J[0],I=J[1]}if(x!==null&&p===null)throw new d(d.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(x==="xml"&&p!==r.NAMESPACE.XML)throw new d(d.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((x==="xmlns"||_==="xmlns")&&p!==r.NAMESPACE.XMLNS)throw new d(d.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(p===r.NAMESPACE.XMLNS&&x!=="xmlns"&&_!=="xmlns")throw new d(d.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[p,x,I]}function E(p,_){for(var x in p)n(p,x)&&(_[x]=p[x])}function A(p,_){var x=p.prototype;if(!(x instanceof _)){let I=function(){};I.prototype=_.prototype,I=new I,E(x,I),p.prototype=x=I}x.constructor!=p&&(typeof p!="function"&&console.error("unknown Class:"+p),x.constructor=p)}var k={},S=k.ELEMENT_NODE=1,L=k.ATTRIBUTE_NODE=2,q=k.TEXT_NODE=3,X=k.CDATA_SECTION_NODE=4,j=k.ENTITY_REFERENCE_NODE=5,G=k.ENTITY_NODE=6,O=k.PROCESSING_INSTRUCTION_NODE=7,B=k.COMMENT_NODE=8,z=k.DOCUMENT_NODE=9,$=k.DOCUMENT_TYPE_NODE=10,V=k.DOCUMENT_FRAGMENT_NODE=11,W=k.NOTATION_NODE=12,Y=r.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function se(p,_){if(_.length<p.length)return se(_,p);var x=null;for(var I in p){if(p[I]!==_[I])return x;x=p[I]}return x}function te(p){return p.guid||(p.guid=Math.random()),p.guid}function Q(){}Q.prototype={length:0,item:function(p){return p>=0&&p<this.length?this[p]:null},toString:function(p){for(var _=[],x=0;x<this.length;x++)hr(this[x],_,p);return _.join("")},filter:function(p){return Array.prototype.filter.call(this,p)},indexOf:function(p){return Array.prototype.indexOf.call(this,p)}},Q.prototype[Symbol.iterator]=function(){var p=this,_=0;return{next:function(){return _<p.length?{value:p[_++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Z(p,_){this._node=p,this._refresh=_,ne(this)}function ne(p){var _=p._node._inc||p._node.ownerDocument._inc;if(p._inc!==_){var x=p._refresh(p._node);if(Oc(p,"length",x.length),!p.$$length||x.length<p.$$length)for(var I=x.length;I in p;I++)n(p,I)&&delete p[I];E(x,p),p._inc=_}}Z.prototype.item=function(p){return ne(this),this[p]||null},A(Z,Q);function ue(){}function Ee(p,_){for(var x=0;x<p.length;){if(p[x]===_)return x;x++}}function De(p,_,x,I){if(I?_[Ee(_,I)]=x:(_[_.length]=x,_.length++),p){x.ownerElement=p;var J=p.ownerDocument;J&&(I&&Kt(J,p,I),Ir(J,p,x))}}function Ne(p,_,x){var I=Ee(_,x);if(I>=0){for(var J=_.length-1;I<=J;)_[I]=_[++I];if(_.length=J,p){var re=p.ownerDocument;re&&Kt(re,p,x),x.ownerElement=null}}}ue.prototype={length:0,item:Q.prototype.item,getNamedItem:function(p){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(p=p.toLowerCase());for(var _=0;_<this.length;){var x=this[_];if(x.nodeName===p)return x;_++}return null},setNamedItem:function(p){var _=p.ownerElement;if(_&&_!==this._ownerElement)throw new d(d.INUSE_ATTRIBUTE_ERR);var x=this.getNamedItemNS(p.namespaceURI,p.localName);return x===p?p:(De(this._ownerElement,this,p,x),x)},setNamedItemNS:function(p){return this.setNamedItem(p)},removeNamedItem:function(p){var _=this.getNamedItem(p);if(!_)throw new d(d.NOT_FOUND_ERR,p);return Ne(this._ownerElement,this,_),_},removeNamedItemNS:function(p,_){var x=this.getNamedItemNS(p,_);if(!x)throw new d(d.NOT_FOUND_ERR,p?p+" : "+_:_);return Ne(this._ownerElement,this,x),x},getNamedItemNS:function(p,_){p||(p=null);for(var x=0;x<this.length;){var I=this[x];if(I.localName===_&&I.namespaceURI===p)return I;x++}return null}},ue.prototype[Symbol.iterator]=function(){var p=this,_=0;return{next:function(){return _<p.length?{value:p[_++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function qe(){}qe.prototype={hasFeature:function(p,_){return!0},createDocument:function(p,_,x){var I=a.XML_APPLICATION;p===l.HTML?I=a.XML_XHTML_APPLICATION:p===l.SVG&&(I=a.XML_SVG_IMAGE);var J=new Je(u,{contentType:I});if(J.implementation=this,J.childNodes=new Q,J.doctype=x||null,x&&J.appendChild(x),_){var re=J.createElementNS(p,_);J.appendChild(re)}return J},createDocumentType:function(p,_,x,I){T(p);var J=new Jn(u);return J.name=p,J.nodeName=p,J.publicId=_||"",J.systemId=x||"",J.internalSubset=I||"",J.childNodes=new Q,J},createHTMLDocument:function(p){var _=new Je(u,{contentType:a.HTML});if(_.implementation=this,_.childNodes=new Q,p!==!1){_.doctype=this.createDocumentType("html"),_.doctype.ownerDocument=_,_.appendChild(_.doctype);var x=_.createElement("html");_.appendChild(x);var I=_.createElement("head");if(x.appendChild(I),typeof p=="string"){var J=_.createElement("title");J.appendChild(_.createTextNode(p)),I.appendChild(J)}x.appendChild(_.createElement("body"))}return _}};function ae(p){g(p)}ae.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var p=this.getRootNode();return p&&p.nodeType===p.DOCUMENT_NODE},contains:function(p){if(!p)return!1;var _=p;do{if(this===_)return!0;_=p.parentNode}while(_);return!1},getRootNode:function(p){var _=this;do{if(!_.parentNode)return _;_=_.parentNode}while(_)},isEqualNode:function(p){if(!p||this.nodeType!==p.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==p.name||this.publicId!==p.publicId||this.systemId!==p.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==p.namespaceURI||this.prefix!==p.prefix||this.localName!==p.localName||this.attributes.length!==p.attributes.length)return!1;for(var _=0;_<this.attributes.length;_++){var x=this.attributes.item(_);if(!x.isEqualNode(p.getAttributeNodeNS(x.namespaceURI,x.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==p.namespaceURI||this.localName!==p.localName||this.value!==p.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==p.target||this.data!==p.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==p.data)return!1;break}if(this.childNodes.length!==p.childNodes.length)return!1;for(var _=0;_<this.childNodes.length;_++)if(!this.childNodes[_].isEqualNode(p.childNodes[_]))return!1;return!0},isSameNode:function(p){return this===p},insertBefore:function(p,_){return ce(this,p,_)},replaceChild:function(p,_){ce(this,p,_,cn),_&&this.removeChild(_)},removeChild:function(p){return dr(this,p)},appendChild:function(p){return this.insertBefore(p,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(p){return Fa(this.ownerDocument||this,this,p)},normalize:function(){for(var p=this.firstChild;p;){var _=p.nextSibling;_&&_.nodeType==q&&p.nodeType==q?(this.removeChild(_),p.appendData(_.data)):(p.normalize(),p=_)}},isSupported:function(p,_){return this.ownerDocument.implementation.hasFeature(p,_)},lookupPrefix:function(p){for(var _=this;_;){var x=_._nsMap;if(x){for(var I in x)if(n(x,I)&&x[I]===p)return I}_=_.nodeType==L?_.ownerDocument:_.parentNode}return null},lookupNamespaceURI:function(p){for(var _=this;_;){var x=_._nsMap;if(x&&n(x,p))return x[p];_=_.nodeType==L?_.ownerDocument:_.parentNode}return null},isDefaultNamespace:function(p){var _=this.lookupPrefix(p);return _==null},compareDocumentPosition:function(p){if(this===p)return 0;var _=p,x=this,I=null,J=null;if(_ instanceof _t&&(I=_,_=I.ownerElement),x instanceof _t&&(J=x,x=J.ownerElement,I&&_&&x===_))for(var re=0,ge;ge=x.attributes[re];re++){if(ge===I)return Y.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Y.DOCUMENT_POSITION_PRECEDING;if(ge===J)return Y.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Y.DOCUMENT_POSITION_FOLLOWING}if(!_||!x||x.ownerDocument!==_.ownerDocument)return Y.DOCUMENT_POSITION_DISCONNECTED+Y.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(te(x.ownerDocument)>te(_.ownerDocument)?Y.DOCUMENT_POSITION_FOLLOWING:Y.DOCUMENT_POSITION_PRECEDING);if(J&&_===x)return Y.DOCUMENT_POSITION_CONTAINS+Y.DOCUMENT_POSITION_PRECEDING;if(I&&_===x)return Y.DOCUMENT_POSITION_CONTAINED_BY+Y.DOCUMENT_POSITION_FOLLOWING;for(var $e=[],rt=_.parentNode;rt;){if(!J&&rt===x)return Y.DOCUMENT_POSITION_CONTAINED_BY+Y.DOCUMENT_POSITION_FOLLOWING;$e.push(rt),rt=rt.parentNode}$e.reverse();for(var xt=[],ct=x.parentNode;ct;){if(!I&&ct===_)return Y.DOCUMENT_POSITION_CONTAINS+Y.DOCUMENT_POSITION_PRECEDING;xt.push(ct),ct=ct.parentNode}xt.reverse();var hn=se($e,xt);for(var pr in hn.childNodes){var Ot=hn.childNodes[pr];if(Ot===x)return Y.DOCUMENT_POSITION_FOLLOWING;if(Ot===_)return Y.DOCUMENT_POSITION_PRECEDING;if(xt.indexOf(Ot)>=0)return Y.DOCUMENT_POSITION_FOLLOWING;if($e.indexOf(Ot)>=0)return Y.DOCUMENT_POSITION_PRECEDING}return 0}};function Or(p){return p=="<"&&"&lt;"||p==">"&&"&gt;"||p=="&"&&"&amp;"||p=='"'&&"&quot;"||"&#"+p.charCodeAt()+";"}E(k,ae),E(k,ae.prototype),E(Y,ae),E(Y,ae.prototype);function Vt(p,_){if(_(p))return!0;if(p=p.firstChild)do if(Vt(p,_))return!0;while(p=p.nextSibling)}function Je(p,_){g(p);var x=_||{};this.ownerDocument=this,this.contentType=x.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function Ir(p,_,x){p&&p._inc++;var I=x.namespaceURI;I===l.XMLNS&&(_._nsMap[x.prefix?x.localName:""]=x.value)}function Kt(p,_,x,I){p&&p._inc++;var J=x.namespaceURI;J===l.XMLNS&&delete _._nsMap[x.prefix?x.localName:""]}function Mt(p,_,x){if(p&&p._inc){p._inc++;var I=_.childNodes;if(x&&!x.nextSibling)I[I.length++]=x;else{for(var J=_.firstChild,re=0;J;)I[re++]=J,J=J.nextSibling;I.length=re,delete I[I.length]}}}function dr(p,_){if(p!==_.parentNode)throw new d(d.NOT_FOUND_ERR,"child's parent is not parent");var x=_.previousSibling,I=_.nextSibling;return x?x.nextSibling=I:p.firstChild=I,I?I.previousSibling=x:p.lastChild=x,Mt(p.ownerDocument,p),_.parentNode=null,_.previousSibling=null,_.nextSibling=null,_}function on(p){return p&&(p.nodeType===ae.DOCUMENT_NODE||p.nodeType===ae.DOCUMENT_FRAGMENT_NODE||p.nodeType===ae.ELEMENT_NODE)}function an(p){return p&&(p.nodeType===ae.CDATA_SECTION_NODE||p.nodeType===ae.COMMENT_NODE||p.nodeType===ae.DOCUMENT_FRAGMENT_NODE||p.nodeType===ae.DOCUMENT_TYPE_NODE||p.nodeType===ae.ELEMENT_NODE||p.nodeType===ae.PROCESSING_INSTRUCTION_NODE||p.nodeType===ae.TEXT_NODE)}function wt(p){return p&&p.nodeType===ae.DOCUMENT_TYPE_NODE}function Ce(p){return p&&p.nodeType===ae.ELEMENT_NODE}function Rr(p){return p&&p.nodeType===ae.TEXT_NODE}function je(p,_){var x=p.childNodes||[];if(e(x,Ce)||wt(_))return!1;var I=e(x,wt);return!(_&&I&&x.indexOf(I)>x.indexOf(_))}function ln(p,_){var x=p.childNodes||[];function I(re){return Ce(re)&&re!==_}if(e(x,I))return!1;var J=e(x,wt);return!(_&&J&&x.indexOf(J)>x.indexOf(_))}function Vi(p,_,x){if(!on(p))throw new d(d.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+p.nodeType);if(x&&x.parentNode!==p)throw new d(d.NOT_FOUND_ERR,"child not in parent");if(!an(_)||wt(_)&&p.nodeType!==ae.DOCUMENT_NODE)throw new d(d.HIERARCHY_REQUEST_ERR,"Unexpected node type "+_.nodeType+" for parent node type "+p.nodeType)}function un(p,_,x){var I=p.childNodes||[],J=_.childNodes||[];if(_.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var re=J.filter(Ce);if(re.length>1||e(J,Rr))throw new d(d.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(re.length===1&&!je(p,x))throw new d(d.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Ce(_)&&!je(p,x))throw new d(d.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(wt(_)){if(e(I,wt))throw new d(d.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var ge=e(I,Ce);if(x&&I.indexOf(ge)<I.indexOf(x))throw new d(d.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!x&&ge)throw new d(d.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function cn(p,_,x){var I=p.childNodes||[],J=_.childNodes||[];if(_.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var re=J.filter(Ce);if(re.length>1||e(J,Rr))throw new d(d.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(re.length===1&&!ln(p,x))throw new d(d.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Ce(_)&&!ln(p,x))throw new d(d.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(wt(_)){if(e(I,function(rt){return wt(rt)&&rt!==x}))throw new d(d.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var ge=e(I,Ce);if(x&&I.indexOf(ge)<I.indexOf(x))throw new d(d.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function ce(p,_,x,I){Vi(p,_,x),p.nodeType===ae.DOCUMENT_NODE&&(I||un)(p,_,x);var J=_.parentNode;if(J&&J.removeChild(_),_.nodeType===V){var re=_.firstChild;if(re==null)return _;var ge=_.lastChild}else re=ge=_;var $e=x?x.previousSibling:p.lastChild;re.previousSibling=$e,ge.nextSibling=x,$e?$e.nextSibling=re:p.firstChild=re,x==null?p.lastChild=ge:x.previousSibling=ge;do re.parentNode=p;while(re!==ge&&(re=re.nextSibling));return Mt(p.ownerDocument||p,p,_),_.nodeType==V&&(_.firstChild=_.lastChild=null),_}Je.prototype={implementation:null,nodeName:"#document",nodeType:z,doctype:null,documentElement:null,_inc:1,insertBefore:function(p,_){if(p.nodeType===V){for(var x=p.firstChild;x;){var I=x.nextSibling;this.insertBefore(x,_),x=I}return p}return ce(this,p,_),p.ownerDocument=this,this.documentElement===null&&p.nodeType===S&&(this.documentElement=p),p},removeChild:function(p){var _=dr(this,p);return _===this.documentElement&&(this.documentElement=null),_},replaceChild:function(p,_){ce(this,p,_,cn),p.ownerDocument=this,_&&this.removeChild(_),Ce(p)&&(this.documentElement=p)},importNode:function(p,_){return Mc(this,p,_)},getElementById:function(p){var _=null;return Vt(this.documentElement,function(x){if(x.nodeType==S&&x.getAttribute("id")==p)return _=x,!0}),_},createElement:function(p){var _=new Te(u);_.ownerDocument=this,this.type==="html"&&(p=p.toLowerCase()),t(this.contentType)&&(_.namespaceURI=l.HTML),_.nodeName=p,_.tagName=p,_.localName=p,_.childNodes=new Q;var x=_.attributes=new ue;return x._ownerElement=_,_},createDocumentFragment:function(){var p=new fn(u);return p.ownerDocument=this,p.childNodes=new Q,p},createTextNode:function(p){var _=new dn(u);return _.ownerDocument=this,_.childNodes=new Q,_.appendData(p),_},createComment:function(p){var _=new Vn(u);return _.ownerDocument=this,_.childNodes=new Q,_.appendData(p),_},createCDATASection:function(p){var _=new Kn(u);return _.ownerDocument=this,_.childNodes=new Q,_.appendData(p),_},createProcessingInstruction:function(p,_){var x=new Yn(u);return x.ownerDocument=this,x.childNodes=new Q,x.nodeName=x.target=p,x.nodeValue=x.data=_,x},createAttribute:function(p){if(!h.QName_exact.test(p))throw new d(d.INVALID_CHARACTER_ERR,'invalid character in name "'+p+'"');return this.type==="html"&&(p=p.toLowerCase()),this._createAttribute(p)},_createAttribute:function(p){var _=new _t(u);return _.ownerDocument=this,_.childNodes=new Q,_.name=p,_.nodeName=p,_.localName=p,_.specified=!0,_},createEntityReference:function(p){if(!h.Name.test(p))throw new d(d.INVALID_CHARACTER_ERR,'not a valid xml name "'+p+'"');if(this.type==="html")throw new d("document is an html document",f.NotSupportedError);var _=new Gn(u);return _.ownerDocument=this,_.childNodes=new Q,_.nodeName=p,_},createElementNS:function(p,_){var x=R(p,_),I=new Te(u),J=I.attributes=new ue;return I.childNodes=new Q,I.ownerDocument=this,I.nodeName=_,I.tagName=_,I.namespaceURI=x[0],I.prefix=x[1],I.localName=x[2],J._ownerElement=I,I},createAttributeNS:function(p,_){var x=R(p,_),I=new _t(u);return I.ownerDocument=this,I.childNodes=new Q,I.nodeName=_,I.name=_,I.specified=!0,I.namespaceURI=x[0],I.prefix=x[1],I.localName=x[2],I}},A(Je,ae);function Te(p){g(p),this._nsMap=Object.create(null)}Te.prototype={nodeType:S,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===l.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(p){return!!this.getAttributeNode(p)},getAttribute:function(p){var _=this.getAttributeNode(p);return _?_.value:null},getAttributeNode:function(p){return this._isInHTMLDocumentAndNamespace()&&(p=p.toLowerCase()),this.attributes.getNamedItem(p)},setAttribute:function(p,_){this._isInHTMLDocumentAndNamespace()&&(p=p.toLowerCase());var x=this.getAttributeNode(p);x?x.value=x.nodeValue=""+_:(x=this.ownerDocument._createAttribute(p),x.value=x.nodeValue=""+_,this.setAttributeNode(x))},removeAttribute:function(p){var _=this.getAttributeNode(p);_&&this.removeAttributeNode(_)},setAttributeNode:function(p){return this.attributes.setNamedItem(p)},setAttributeNodeNS:function(p){return this.attributes.setNamedItemNS(p)},removeAttributeNode:function(p){return this.attributes.removeNamedItem(p.nodeName)},removeAttributeNS:function(p,_){var x=this.getAttributeNodeNS(p,_);x&&this.removeAttributeNode(x)},hasAttributeNS:function(p,_){return this.getAttributeNodeNS(p,_)!=null},getAttributeNS:function(p,_){var x=this.getAttributeNodeNS(p,_);return x?x.value:null},setAttributeNS:function(p,_,x){var I=R(p,_),J=I[2],re=this.getAttributeNodeNS(p,J);re?re.value=re.nodeValue=""+x:(re=this.ownerDocument.createAttributeNS(p,_),re.value=re.nodeValue=""+x,this.setAttributeNode(re))},getAttributeNodeNS:function(p,_){return this.attributes.getNamedItemNS(p,_)},getElementsByClassName:function(p){var _=b(p);return new Z(this,function(x){var I=[];return _.length>0&&Vt(x,function(J){if(J!==x&&J.nodeType===S){var re=J.getAttribute("class");if(re){var ge=p===re;if(!ge){var $e=b(re);ge=_.every(C($e))}ge&&I.push(J)}}}),I})},getElementsByTagName:function(p){var _=(this.nodeType===z?this:this.ownerDocument).type==="html",x=p.toLowerCase();return new Z(this,function(I){var J=[];return Vt(I,function(re){if(!(re===I||re.nodeType!==S))if(p==="*")J.push(re);else{var ge=re.getQualifiedName(),$e=_&&re.namespaceURI===l.HTML?x:p;ge===$e&&J.push(re)}}),J})},getElementsByTagNameNS:function(p,_){return new Z(this,function(x){var I=[];return Vt(x,function(J){J!==x&&J.nodeType===S&&(p==="*"||J.namespaceURI===p)&&(_==="*"||J.localName==_)&&I.push(J)}),I})}},Je.prototype.getElementsByClassName=Te.prototype.getElementsByClassName,Je.prototype.getElementsByTagName=Te.prototype.getElementsByTagName,Je.prototype.getElementsByTagNameNS=Te.prototype.getElementsByTagNameNS,A(Te,ae);function _t(p){g(p),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}_t.prototype.nodeType=L,A(_t,ae);function bt(p){g(p)}bt.prototype={data:"",substringData:function(p,_){return this.data.substring(p,p+_)},appendData:function(p){p=this.data+p,this.nodeValue=this.data=p,this.length=p.length},insertData:function(p,_){this.replaceData(p,0,_)},deleteData:function(p,_){this.replaceData(p,_,"")},replaceData:function(p,_,x){var I=this.data.substring(0,p),J=this.data.substring(p+_);x=I+x+J,this.nodeValue=this.data=x,this.length=x.length}},A(bt,ae);function dn(p){g(p)}dn.prototype={nodeName:"#text",nodeType:q,splitText:function(p){var _=this.data,x=_.substring(p);_=_.substring(0,p),this.data=this.nodeValue=_,this.length=_.length;var I=this.ownerDocument.createTextNode(x);return this.parentNode&&this.parentNode.insertBefore(I,this.nextSibling),I}},A(dn,bt);function Vn(p){g(p)}Vn.prototype={nodeName:"#comment",nodeType:B},A(Vn,bt);function Kn(p){g(p)}Kn.prototype={nodeName:"#cdata-section",nodeType:X},A(Kn,dn);function Jn(p){g(p)}Jn.prototype.nodeType=$,A(Jn,ae);function Ki(p){g(p)}Ki.prototype.nodeType=W,A(Ki,ae);function Ji(p){g(p)}Ji.prototype.nodeType=G,A(Ji,ae);function Gn(p){g(p)}Gn.prototype.nodeType=j,A(Gn,ae);function fn(p){g(p)}fn.prototype.nodeName="#document-fragment",fn.prototype.nodeType=V,A(fn,ae);function Yn(p){g(p)}Yn.prototype.nodeType=O,A(Yn,bt);function zs(){}zs.prototype.serializeToString=function(p,_){return Ie.call(p,_)},ae.prototype.toString=Ie;function Ie(p){var _=[],x=this.nodeType===z&&this.documentElement||this,I=x.prefix,J=x.namespaceURI;if(J&&I==null){var I=x.lookupPrefix(J);if(I==null)var re=[{namespace:J,prefix:null}]}return hr(this,_,p,re),_.join("")}function Ge(p,_,x){var I=p.prefix||"",J=p.namespaceURI;if(!J||I==="xml"&&J===l.XML||J===l.XMLNS)return!1;for(var re=x.length;re--;){var ge=x[re];if(ge.prefix===I)return ge.namespace!==J}return!0}function fr(p,_,x){p.push(" ",_,'="',x.replace(/[<>&"\t\n\r]/g,Or),'"')}function hr(p,_,x,I){I||(I=[]);var J=p.nodeType===z?p:p.ownerDocument,re=J.type==="html";if(x)if(p=x(p),p){if(typeof p=="string"){_.push(p);return}}else return;switch(p.nodeType){case S:var ge=p.attributes,$e=ge.length,nt=p.firstChild,rt=p.tagName,xt=rt;if(!re&&!p.prefix&&p.namespaceURI){for(var ct,hn=0;hn<ge.length;hn++)if(ge.item(hn).name==="xmlns"){ct=ge.item(hn).value;break}if(!ct)for(var pr=I.length-1;pr>=0;pr--){var Ot=I[pr];if(Ot.prefix===""&&Ot.namespace===p.namespaceURI){ct=Ot.namespace;break}}if(ct!==p.namespaceURI)for(var pr=I.length-1;pr>=0;pr--){var Ot=I[pr];if(Ot.namespace===p.namespaceURI){Ot.prefix&&(xt=Ot.prefix+":"+rt);break}}}_.push("<",xt);for(var pn=0;pn<$e;pn++){var Jt=ge.item(pn);Jt.prefix=="xmlns"?I.push({prefix:Jt.localName,namespace:Jt.value}):Jt.nodeName=="xmlns"&&I.push({prefix:"",namespace:Jt.value})}for(var pn=0;pn<$e;pn++){var Jt=ge.item(pn);if(Ge(Jt,re,I)){var gn=Jt.prefix||"",Gi=Jt.namespaceURI;fr(_,gn?"xmlns:"+gn:"xmlns",Gi),I.push({prefix:gn,namespace:Gi})}hr(Jt,_,x,I)}if(rt===xt&&Ge(p,re,I)){var gn=p.prefix||"",Gi=p.namespaceURI;fr(_,gn?"xmlns:"+gn:"xmlns",Gi),I.push({prefix:gn,namespace:Gi})}var Ba=!nt;if(Ba&&(re||p.namespaceURI===l.HTML)&&(Ba=o(rt)),Ba)_.push("/>");else{if(_.push(">"),re&&s(rt))for(;nt;)nt.data?_.push(nt.data):hr(nt,_,x,I.slice()),nt=nt.nextSibling;else for(;nt;)hr(nt,_,x,I.slice()),nt=nt.nextSibling;_.push("</",xt,">")}return;case z:case V:for(var nt=p.firstChild;nt;)hr(nt,_,x,I.slice()),nt=nt.nextSibling;return;case L:return fr(_,p.name,p.value);case q:return _.push(p.data.replace(/[<&>]/g,Or));case X:return _.push(h.CDATA_START,p.data,h.CDATA_END);case B:return _.push(h.COMMENT_START,p.data,h.COMMENT_END);case $:var Ic=p.publicId,Xn=p.systemId;_.push(h.DOCTYPE_DECL_START," ",p.name),Ic?(_.push(" ",h.PUBLIC," ",Ic),Xn&&Xn!=="."&&_.push(" ",Xn)):Xn&&Xn!=="."&&_.push(" ",h.SYSTEM," ",Xn),p.internalSubset&&_.push(" [",p.internalSubset,"]"),_.push(">");return;case O:return _.push("<?",p.target," ",p.data,"?>");case j:return _.push("&",p.nodeName,";");default:_.push("??",p.nodeName)}}function Mc(p,_,x){var I;switch(_.nodeType){case S:I=_.cloneNode(!1),I.ownerDocument=p;case V:break;case L:x=!0;break}if(I||(I=_.cloneNode(!1)),I.ownerDocument=p,I.parentNode=null,x)for(var J=_.firstChild;J;)I.appendChild(Mc(p,J,x)),J=J.nextSibling;return I}function Fa(p,_,x){var I=new _.constructor(u);for(var J in _)if(n(_,J)){var re=_[J];typeof re!="object"&&re!=I[J]&&(I[J]=re)}switch(_.childNodes&&(I.childNodes=new Q),I.ownerDocument=p,I.nodeType){case S:var ge=_.attributes,$e=I.attributes=new ue,rt=ge.length;$e._ownerElement=I;for(var xt=0;xt<rt;xt++)I.setAttributeNode(Fa(p,ge.item(xt),!0));break;case L:x=!0}if(x)for(var ct=_.firstChild;ct;)I.appendChild(Fa(p,ct,x)),ct=ct.nextSibling;return I}function Oc(p,_,x){p[_]=x}try{if(Object.defineProperty){let p=function(_){switch(_.nodeType){case S:case V:var x=[];for(_=_.firstChild;_;)_.nodeType!==7&&_.nodeType!==8&&x.push(p(_)),_=_.nextSibling;return x.join("");default:return _.nodeValue}};Object.defineProperty(Z.prototype,"length",{get:function(){return ne(this),this.$$length}}),Object.defineProperty(ae.prototype,"textContent",{get:function(){return p(this)},set:function(_){switch(this.nodeType){case S:case V:for(;this.firstChild;)this.removeChild(this.firstChild);(_||String(_))&&this.appendChild(this.ownerDocument.createTextNode(_));break;default:this.data=_,this.value=_,this.nodeValue=_}}}),Oc=function(_,x,I){_["$$"+x]=I}}}catch{}return Me._updateLiveList=ne,Me.Attr=_t,Me.CDATASection=Kn,Me.CharacterData=bt,Me.Comment=Vn,Me.Document=Je,Me.DocumentFragment=fn,Me.DocumentType=Jn,Me.DOMImplementation=qe,Me.Element=Te,Me.Entity=Ji,Me.EntityReference=Gn,Me.LiveNodeList=Z,Me.NamedNodeMap=ue,Me.Node=ae,Me.NodeList=Q,Me.Notation=Ki,Me.Text=dn,Me.ProcessingInstruction=Yn,Me.XMLSerializer=zs,Me}var mn={},qa={},Bc;function Qy(){return Bc||(Bc=1,function(r){var e=Ai().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),r.entityMap=r.HTML_ENTITIES}(qa)),qa}var Yi={},qc;function Zy(){if(qc)return Yi;qc=1;var r=Ai(),e=Ih(),t=aa(),n=r.isHTMLEscapableRawTextElement,i=r.isHTMLMimeType,s=r.isHTMLRawTextElement,o=r.hasOwn,a=r.NAMESPACE,l=t.ParseError,u=t.DOMException,c=0,d=1,f=2,h=3,g=4,m=5,y=6,v=7;function b(){}b.prototype={parse:function(O,B,z){var $=this.domBuilder;$.startDocument(),S(B,B=Object.create(null)),T(O,B,z,$,this.errorHandler),$.endDocument()}};var C=/&#?\w+;?/g;function T(O,B,z,$,V){var W=i($.mimeType);O.indexOf(e.UNICODE_REPLACEMENT_CHARACTER)>=0&&V.warning("Unicode replacement character detected, source encoding issues?");function Y(ce){if(ce>65535){ce-=65536;var Te=55296+(ce>>10),_t=56320+(ce&1023);return String.fromCharCode(Te,_t)}else return String.fromCharCode(ce)}function se(ce){var Te=ce[ce.length-1]===";"?ce:ce+";";if(!W&&Te!==ce)return V.error("EntityRef: expecting ;"),ce;var _t=e.Reference.exec(Te);if(!_t||_t[0].length!==Te.length)return V.error("entity not matching Reference production: "+ce),ce;var bt=Te.slice(1,-1);return o(z,bt)?z[bt]:bt.charAt(0)==="#"?Y(parseInt(bt.substring(1).replace("x","0x"))):(V.error("entity not found:"+ce),ce)}function te(ce){if(ce>qe){var Te=O.substring(qe,ce).replace(C,se);ue&&Ee(qe),$.characters(Te,0,ce-qe),qe=ce}}var Q=0,Z=0,ne=/\r\n?|\n|$/g,ue=$.locator;function Ee(ce,Te){for(;ce>=Z&&(Te=ne.exec(O));)Q=Z,Z=Te.index+Te[0].length,ue.lineNumber++;ue.columnNumber=ce-Q+1}for(var De=[{currentNSMap:B}],Ne=[],qe=0;;){try{var ae=O.indexOf("<",qe);if(ae<0){if(!W&&Ne.length>0)return V.fatalError("unclosed xml tag(s): "+Ne.join(", "));if(!O.substring(qe).match(/^\s*$/)){var Or=$.doc,Vt=Or.createTextNode(O.substring(qe));if(Or.documentElement)return V.error("Extra content at the end of the document");Or.appendChild(Vt),$.currentElement=Vt}return}if(ae>qe){var Je=O.substring(qe,ae);!W&&Ne.length===0&&(Je=Je.replace(new RegExp(e.S_OPT.source,"g"),""),Je&&V.error("Unexpected content outside root element: '"+Je+"'")),te(ae)}switch(O.charAt(ae+1)){case"/":var je=O.indexOf(">",ae+2),Ir=O.substring(ae+2,je>0?je:void 0);if(!Ir)return V.fatalError("end tag name missing");var Kt=je>0&&e.reg("^",e.QName_group,e.S_OPT,"$").exec(Ir);if(!Kt)return V.fatalError('end tag name contains invalid characters: "'+Ir+'"');if(!$.currentElement&&!$.doc.documentElement)return;var Mt=Ne[Ne.length-1]||$.currentElement.tagName||$.doc.documentElement.tagName||"";if(Mt!==Kt[1]){var dr=Kt[1].toLowerCase();if(!W||Mt.toLowerCase()!==dr)return V.fatalError('Opening and ending tag mismatch: "'+Mt+'" != "'+Ir+'"')}var on=De.pop();Ne.pop();var an=on.localNSMap;if($.endElement(on.uri,on.localName,Mt),an)for(var wt in an)o(an,wt)&&$.endPrefixMapping(wt);je++;break;case"?":ue&&Ee(ae),je=j(O,ae,$,V);break;case"!":ue&&Ee(ae),je=X(O,ae,$,V,W);break;default:ue&&Ee(ae);var Ce=new G,Rr=De[De.length-1].currentNSMap,je=E(O,ae,Ce,Rr,se,V,W),ln=Ce.length;if(Ce.closed||(W&&r.isHTMLVoidElement(Ce.tagName)?Ce.closed=!0:Ne.push(Ce.tagName)),ue&&ln){for(var Vi=R(ue,{}),un=0;un<ln;un++){var cn=Ce[un];Ee(cn.offset),cn.locator=R(ue,{})}$.locator=Vi,A(Ce,$,Rr)&&De.push(Ce),$.locator=ue}else A(Ce,$,Rr)&&De.push(Ce);W&&!Ce.closed?je=k(O,je,Ce.tagName,se,$):je++}}catch(ce){if(ce instanceof l)throw ce;if(ce instanceof u)throw new l(ce.name+": "+ce.message,$.locator,ce);V.error("element parse error: "+ce),je=-1}je>qe?qe=je:te(Math.max(ae,qe)+1)}}function R(O,B){return B.lineNumber=O.lineNumber,B.columnNumber=O.columnNumber,B}function E(O,B,z,$,V,W,Y){function se(Ee,De,Ne){if(o(z.attributeNames,Ee))return W.fatalError("Attribute "+Ee+" redefined");if(!Y&&De.indexOf("<")>=0)return W.fatalError("Unescaped '<' not allowed in attributes values");z.addValue(Ee,De.replace(/[\t\n\r]/g," ").replace(C,V),Ne)}for(var te,Q,Z=++B,ne=c;;){var ue=O.charAt(Z);switch(ue){case"=":if(ne===d)te=O.slice(B,Z),ne=h;else if(ne===f)ne=h;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ne===h||ne===d)if(ne===d&&(W.warning('attribute value must after "="'),te=O.slice(B,Z)),B=Z+1,Z=O.indexOf(ue,B),Z>0)Q=O.slice(B,Z),se(te,Q,B-1),ne=m;else throw new Error("attribute value no end '"+ue+"' match");else if(ne==g)Q=O.slice(B,Z),se(te,Q,B),W.warning('attribute "'+te+'" missed start quot('+ue+")!!"),B=Z+1,ne=m;else throw new Error('attribute value must after "="');break;case"/":switch(ne){case c:z.setTagName(O.slice(B,Z));case m:case y:case v:ne=v,z.closed=!0;case g:case d:break;case f:z.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return W.error("unexpected end of input"),ne==c&&z.setTagName(O.slice(B,Z)),Z;case">":switch(ne){case c:z.setTagName(O.slice(B,Z));case m:case y:case v:break;case g:case d:Q=O.slice(B,Z),Q.slice(-1)==="/"&&(z.closed=!0,Q=Q.slice(0,-1));case f:ne===f&&(Q=te),ne==g?(W.warning('attribute "'+Q+'" missed quot(")!'),se(te,Q,B)):(Y||W.warning('attribute "'+Q+'" missed value!! "'+Q+'" instead!!'),se(Q,Q,B));break;case h:if(!Y)return W.fatalError(`AttValue: ' or " expected`)}return Z;case"":ue=" ";default:if(ue<=" ")switch(ne){case c:z.setTagName(O.slice(B,Z)),ne=y;break;case d:te=O.slice(B,Z),ne=f;break;case g:var Q=O.slice(B,Z);W.warning('attribute "'+Q+'" missed quot(")!!'),se(te,Q,B);case m:ne=y;break}else switch(ne){case f:Y||W.warning('attribute "'+te+'" missed value!! "'+te+'" instead2!!'),se(te,te,B),B=Z,ne=d;break;case m:W.warning('attribute space is required"'+te+'"!!');case y:ne=d,B=Z;break;case h:ne=g,B=Z;break;case v:throw new Error("elements closed character '/' and '>' must be connected to")}}Z++}}function A(O,B,z){for(var $=O.tagName,V=null,ne=O.length;ne--;){var W=O[ne],Y=W.qName,se=W.value,ue=Y.indexOf(":");if(ue>0)var te=W.prefix=Y.slice(0,ue),Q=Y.slice(ue+1),Z=te==="xmlns"&&Q;else Q=Y,te=null,Z=Y==="xmlns"&&"";W.localName=Q,Z!==!1&&(V==null&&(V=Object.create(null),S(z,z=Object.create(null))),z[Z]=V[Z]=se,W.uri=a.XMLNS,B.startPrefixMapping(Z,se))}for(var ne=O.length;ne--;)W=O[ne],W.prefix&&(W.prefix==="xml"&&(W.uri=a.XML),W.prefix!=="xmlns"&&(W.uri=z[W.prefix]));var ue=$.indexOf(":");ue>0?(te=O.prefix=$.slice(0,ue),Q=O.localName=$.slice(ue+1)):(te=null,Q=O.localName=$);var Ee=O.uri=z[te||""];if(B.startElement(Ee,Q,$,O),O.closed){if(B.endElement(Ee,Q,$),V)for(te in V)o(V,te)&&B.endPrefixMapping(te)}else return O.currentNSMap=z,O.localNSMap=V,!0}function k(O,B,z,$,V){var W=n(z);if(W||s(z)){var Y=O.indexOf("</"+z+">",B),se=O.substring(B+1,Y);return W&&(se=se.replace(C,$)),V.characters(se,0,se.length),Y}return B+1}function S(O,B){for(var z in O)o(O,z)&&(B[z]=O[z])}function L(O,B){var z=B;function $(Z){return Z=Z||0,O.charAt(z+Z)}function V(Z){Z=Z||1,z+=Z}function W(){for(var Z=0;z<O.length;){var ne=$();if(ne!==" "&&ne!==`
`&&ne!=="	"&&ne!=="\r")return Z;Z++,V()}return-1}function Y(){return O.substring(z)}function se(Z){return O.substring(z,z+Z.length)===Z}function te(Z){return O.substring(z,z+Z.length).toUpperCase()===Z.toUpperCase()}function Q(Z){var ne=e.reg("^",Z),ue=ne.exec(Y());return ue?(V(ue[0].length),ue[0]):null}return{char:$,getIndex:function(){return z},getMatch:Q,getSource:function(){return O},skip:V,skipBlanks:W,substringFromIndex:Y,substringStartsWith:se,substringStartsWithCaseInsensitive:te}}function q(O,B){function z(se,te){var Q=e.PI.exec(se.substringFromIndex());return Q?Q[1].toLowerCase()==="xml"?te.fatalError("xml declaration is only allowed at the start of the document, but found at position "+se.getIndex()):(se.skip(Q[0].length),Q[0]):te.fatalError("processing instruction is not well-formed at position "+se.getIndex())}var $=O.getSource();if(O.char()==="["){O.skip(1);for(var V=O.getIndex();O.getIndex()<$.length;){if(O.skipBlanks(),O.char()==="]"){var W=$.substring(V,O.getIndex());return O.skip(1),W}var Y=null;if(O.char()==="<"&&O.char(1)==="!")switch(O.char(2)){case"E":O.char(3)==="L"?Y=O.getMatch(e.elementdecl):O.char(3)==="N"&&(Y=O.getMatch(e.EntityDecl));break;case"A":Y=O.getMatch(e.AttlistDecl);break;case"N":Y=O.getMatch(e.NotationDecl);break;case"-":Y=O.getMatch(e.Comment);break}else if(O.char()==="<"&&O.char(1)==="?")Y=z(O,B);else if(O.char()==="%")Y=O.getMatch(e.PEReference);else return B.fatalError("Error detected in Markup declaration");if(!Y)return B.fatalError("Error in internal subset at position "+O.getIndex())}return B.fatalError("doctype internal subset is not well-formed, missing ]")}}function X(O,B,z,$,V){var W=L(O,B);switch(V?W.char(2).toUpperCase():W.char(2)){case"-":var Y=W.getMatch(e.Comment);return Y?(z.comment(Y,e.COMMENT_START.length,Y.length-e.COMMENT_START.length-e.COMMENT_END.length),W.getIndex()):$.fatalError("comment is not well-formed at position "+W.getIndex());case"[":var se=W.getMatch(e.CDSect);return se?!V&&!z.currentElement?$.fatalError("CDATA outside of element"):(z.startCDATA(),z.characters(se,e.CDATA_START.length,se.length-e.CDATA_START.length-e.CDATA_END.length),z.endCDATA(),W.getIndex()):$.fatalError("Invalid CDATA starting at position "+B);case"D":{if(z.doc&&z.doc.documentElement)return $.fatalError("Doctype not allowed inside or after documentElement at position "+W.getIndex());if(V?!W.substringStartsWithCaseInsensitive(e.DOCTYPE_DECL_START):!W.substringStartsWith(e.DOCTYPE_DECL_START))return $.fatalError("Expected "+e.DOCTYPE_DECL_START+" at position "+W.getIndex());if(W.skip(e.DOCTYPE_DECL_START.length),W.skipBlanks()<1)return $.fatalError("Expected whitespace after "+e.DOCTYPE_DECL_START+" at position "+W.getIndex());var te={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(te.name=W.getMatch(e.Name),!te.name)return $.fatalError("doctype name missing or contains unexpected characters at position "+W.getIndex());if(V&&te.name.toLowerCase()!=="html"&&$.warning("Unexpected DOCTYPE in HTML document at position "+W.getIndex()),W.skipBlanks(),W.substringStartsWith(e.PUBLIC)||W.substringStartsWith(e.SYSTEM)){var Q=e.ExternalID_match.exec(W.substringFromIndex());if(!Q)return $.fatalError("doctype external id is not well-formed at position "+W.getIndex());Q.groups.SystemLiteralOnly!==void 0?te.systemId=Q.groups.SystemLiteralOnly:(te.systemId=Q.groups.SystemLiteral,te.publicId=Q.groups.PubidLiteral),W.skip(Q[0].length)}else if(V&&W.substringStartsWithCaseInsensitive(e.SYSTEM)){if(W.skip(e.SYSTEM.length),W.skipBlanks()<1)return $.fatalError("Expected whitespace after "+e.SYSTEM+" at position "+W.getIndex());if(te.systemId=W.getMatch(e.ABOUT_LEGACY_COMPAT_SystemLiteral),!te.systemId)return $.fatalError("Expected "+e.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+e.SYSTEM+" at position "+W.getIndex())}return V&&te.systemId&&!e.ABOUT_LEGACY_COMPAT_SystemLiteral.test(te.systemId)&&$.warning("Unexpected doctype.systemId in HTML document at position "+W.getIndex()),V||(W.skipBlanks(),te.internalSubset=q(W,$)),W.skipBlanks(),W.char()!==">"?$.fatalError("doctype not terminated with > at position "+W.getIndex()):(W.skip(1),z.startDTD(te.name,te.publicId,te.systemId,te.internalSubset),z.endDTD(),W.getIndex())}default:return $.fatalError('Not well-formed XML starting with "<!" at position '+B)}}function j(O,B,z,$){var V=O.substring(B).match(e.PI);if(!V)return $.fatalError("Invalid processing instruction starting at position "+B);if(V[1].toLowerCase()==="xml"){if(B>0)return $.fatalError("processing instruction at position "+B+" is an xml declaration which is only at the start of the document");if(!e.XMLDecl.test(O.substring(B)))return $.fatalError("xml declaration is not well-formed")}return z.processingInstruction(V[1],V[2]),B+V[0].length}function G(){this.attributeNames=Object.create(null)}return G.prototype={setTagName:function(O){if(!e.QName_exact.test(O))throw new Error("invalid tagName:"+O);this.tagName=O},addValue:function(O,B,z){if(!e.QName_exact.test(O))throw new Error("invalid attribute:"+O);this.attributeNames[O]=this.length,this[this.length++]={qName:O,value:B,offset:z}},length:0,getLocalName:function(O){return this[O].localName},getLocator:function(O){return this[O].locator},getQName:function(O){return this[O].qName},getURI:function(O){return this[O].uri},getValue:function(O){return this[O].value}},Yi.XMLReader=b,Yi.parseUtils=L,Yi.parseDoctypeCommentOrCData=X,Yi}var jc;function e_(){if(jc)return mn;jc=1;var r=Ai(),e=Rh(),t=aa(),n=Qy(),i=Zy(),s=e.DOMImplementation,o=r.hasDefaultHTMLNamespace,a=r.isHTMLMimeType,l=r.isValidMimeType,u=r.MIME_TYPE,c=r.NAMESPACE,d=t.ParseError,f=i.XMLReader;function h(E){return E.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function g(E){if(E=E||{},E.locator===void 0&&(E.locator=!0),this.assign=E.assign||r.assign,this.domHandler=E.domHandler||m,this.onError=E.onError||E.errorHandler,E.errorHandler&&typeof E.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");E.errorHandler&&E.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=E.normalizeLineEndings||h,this.locator=!!E.locator,this.xmlns=this.assign(Object.create(null),E.xmlns)}g.prototype.parseFromString=function(E,A){if(!l(A))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+A+'" is not valid.');var k=this.assign(Object.create(null),this.xmlns),S=n.XML_ENTITIES,L=k[""]||null;o(A)?(S=n.HTML_ENTITIES,L=c.HTML):A===u.XML_SVG_IMAGE&&(L=c.SVG),k[""]=L,k.xml=k.xml||c.XML;var q=new this.domHandler({mimeType:A,defaultNamespace:L,onError:this.onError}),X=this.locator?{}:void 0;this.locator&&q.setDocumentLocator(X);var j=new f;j.errorHandler=q,j.domBuilder=q;var G=!r.isHTMLMimeType(A);return G&&typeof E!="string"&&j.errorHandler.fatalError("source is not a string"),j.parse(this.normalizeLineEndings(String(E)),k,S),q.doc.documentElement||j.errorHandler.fatalError("missing root element"),q.doc};function m(E){var A=E||{};this.mimeType=A.mimeType||u.XML_APPLICATION,this.defaultNamespace=A.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=A.onError}function y(E,A){A.lineNumber=E.lineNumber,A.columnNumber=E.columnNumber}m.prototype={startDocument:function(){var E=new s;this.doc=a(this.mimeType)?E.createHTMLDocument(!1):E.createDocument(this.defaultNamespace,"")},startElement:function(E,A,k,S){var L=this.doc,q=L.createElementNS(E,k||A),X=S.length;C(this,q),this.currentElement=q,this.locator&&y(this.locator,q);for(var j=0;j<X;j++){var E=S.getURI(j),G=S.getValue(j),k=S.getQName(j),O=L.createAttributeNS(E,k);this.locator&&y(S.getLocator(j),O),O.value=O.nodeValue=G,q.setAttributeNode(O)}},endElement:function(E,A,k){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(E,A){},endPrefixMapping:function(E){},processingInstruction:function(E,A){var k=this.doc.createProcessingInstruction(E,A);this.locator&&y(this.locator,k),C(this,k)},ignorableWhitespace:function(E,A,k){},characters:function(E,A,k){if(E=b.apply(this,arguments),E){if(this.cdata)var S=this.doc.createCDATASection(E);else var S=this.doc.createTextNode(E);this.currentElement?this.currentElement.appendChild(S):/^\s*$/.test(E)&&this.doc.appendChild(S),this.locator&&y(this.locator,S)}},skippedEntity:function(E){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(E){E&&(E.lineNumber=0),this.locator=E},comment:function(E,A,k){E=b.apply(this,arguments);var S=this.doc.createComment(E);this.locator&&y(this.locator,S),C(this,S)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(E,A,k,S){var L=this.doc.implementation;if(L&&L.createDocumentType){var q=L.createDocumentType(E,A,k,S);this.locator&&y(this.locator,q),C(this,q),this.doc.doctype=q}},reportError:function(E,A){if(typeof this.onError=="function")try{this.onError(E,A,this)}catch(k){throw new d("Reporting "+E+' "'+A+'" caused '+k,this.locator)}else console.error("[xmldom "+E+"]	"+A,v(this.locator))},warning:function(E){this.reportError("warning",E)},error:function(E){this.reportError("error",E)},fatalError:function(E){throw this.reportError("fatalError",E),new d(E,this.locator)}};function v(E){if(E)return`
@#[line:`+E.lineNumber+",col:"+E.columnNumber+"]"}function b(E,A,k){return typeof E=="string"?E.substr(A,k):E.length>=A+k||A?new java.lang.String(E,A,k)+"":E}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(E){m.prototype[E]=function(){return null}});function C(E,A){E.currentElement?E.currentElement.appendChild(A):E.doc.appendChild(A)}function T(E){if(E==="error")throw"onErrorStopParsing"}function R(){throw"onWarningStopParsing"}return mn.__DOMHandler=m,mn.DOMParser=g,mn.normalizeLineEndings=h,mn.onErrorStopParsing=T,mn.onWarningStopParsing=R,mn}var $c;function t_(){if($c)return he;$c=1;var r=Ai();he.assign=r.assign,he.hasDefaultHTMLNamespace=r.hasDefaultHTMLNamespace,he.isHTMLMimeType=r.isHTMLMimeType,he.isValidMimeType=r.isValidMimeType,he.MIME_TYPE=r.MIME_TYPE,he.NAMESPACE=r.NAMESPACE;var e=aa();he.DOMException=e.DOMException,he.DOMExceptionName=e.DOMExceptionName,he.ExceptionCode=e.ExceptionCode,he.ParseError=e.ParseError;var t=Rh();he.Attr=t.Attr,he.CDATASection=t.CDATASection,he.CharacterData=t.CharacterData,he.Comment=t.Comment,he.Document=t.Document,he.DocumentFragment=t.DocumentFragment,he.DocumentType=t.DocumentType,he.DOMImplementation=t.DOMImplementation,he.Element=t.Element,he.Entity=t.Entity,he.EntityReference=t.EntityReference,he.LiveNodeList=t.LiveNodeList,he.NamedNodeMap=t.NamedNodeMap,he.Node=t.Node,he.NodeList=t.NodeList,he.Notation=t.Notation,he.ProcessingInstruction=t.ProcessingInstruction,he.Text=t.Text,he.XMLSerializer=t.XMLSerializer;var n=e_();return he.DOMParser=n.DOMParser,he.normalizeLineEndings=n.normalizeLineEndings,he.onErrorStopParsing=n.onErrorStopParsing,he.onWarningStopParsing=n.onWarningStopParsing,he}var r_=t_();const $r="USJ",Ur="3.1",n_=["type","marker","content","sid","eid","number","code","altnumber","pubnumber","caller","align","category"];function i_(r){return s_.includes(r)}const s_=["GEN","EXO","LEV","NUM","DEU","JOS","JDG","RUT","1SA","2SA","1KI","2KI","1CH","2CH","EZR","NEH","EST","JOB","PSA","PRO","ECC","SNG","ISA","JER","LAM","EZK","DAN","HOS","JOL","AMO","OBA","JON","MIC","NAM","HAB","ZEP","HAG","ZEC","MAL","MAT","MRK","LUK","JHN","ACT","ROM","1CO","2CO","GAL","EPH","PHP","COL","1TH","2TH","1TI","2TI","TIT","PHM","HEB","JAS","1PE","2PE","1JN","2JN","3JN","JUD","REV","TOB","JDT","ESG","WIS","SIR","BAR","LJE","S3Y","SUS","BEL","1MA","2MA","3MA","4MA","1ES","2ES","MAN","PS2","ODA","PSS","EZA","5EZ","6EZ","DAG","PS3","2BA","LBA","JUB","ENO","1MQ","2MQ","3MQ","REP","4BA","LAO","FRT","BAK","OTH","INT","CNC","GLO","TDX","NDX","XXA","XXB","XXC","XXD","XXE","XXF","XXG"],o_="usx";function gu(r){const e=new r_.DOMParser().parseFromString(r,"text/xml");return a_(e.documentElement)}function a_(r){const[e]=r?Lh(r):[{content:[]}];return e.type=$r,e.version=Ur,e}function Lh(r){const e={};let t=r.tagName,n,i,s="append";if(["row","cell"].includes(t)&&(t="table:"+t),r.attributes)for(const l of Array.from(r.attributes))e[l.name]=l.value;e.style&&(n=e.style,delete e.style),e.vid&&delete e.vid,e.status&&delete e.status;let o={type:t};n&&(o.marker=n),o={...o,...e},r.firstChild&&r.firstChild.nodeType===r.firstChild.TEXT_NODE&&r.firstChild.nodeValue&&Uc(r.firstChild.nodeValue)!==""&&(i=r.firstChild.nodeValue);const a=Array.from(r.childNodes);o.content=[],i&&o.content.push(i);for(const l of a){if(l.tagName===void 0)continue;const[u,c]=Lh(l);switch(c){case"append":o.content.push(u);break;case"merge":o.content=o.content.concat(u);break}l.nextSibling&&l.nextSibling.nodeType===l.nextSibling.TEXT_NODE&&l.nextSibling.nodeValue&&(Uc(l.nextSibling.nodeValue)!==""||l.nextSibling.nodeValue===" ")&&o.content.push(l.nextSibling.nodeValue)}return o.content.length===0&&o.type!==o_&&delete o.content,"eid"in o&&["verse","chapter"].includes(t)&&(s="ignore"),[o,s]}function Uc(r){return r.replace(/(^[ \t\n\r\f\v]+)|([ \t\n\r\f\v]+$)/g,"")}const pl="$",Ph=".content[";function l_(r){const e=r.split(Ph);if(e.shift()!==pl)throw new Error(`indexesFromJsonPath: jsonPath didn't start with '${pl}'`);return e.map(t=>parseInt(t,10))}function u_(r){return r.reduce((e,t)=>`${e}${Ph}${t}]`,pl)}var c_=Object.getOwnPropertyNames,d_=Object.getOwnPropertySymbols,f_=Object.prototype.hasOwnProperty;function Wc(r,e){return function(n,i,s){return r(n,i,s)&&e(n,i,s)}}function Hs(r){return function(t,n,i){if(!t||!n||typeof t!="object"||typeof n!="object")return r(t,n,i);var s=i.cache,o=s.get(t),a=s.get(n);if(o&&a)return o===n&&a===t;s.set(t,n),s.set(n,t);var l=r(t,n,i);return s.delete(t),s.delete(n),l}}function zc(r){return c_(r).concat(d_(r))}var h_=Object.hasOwn||function(r,e){return f_.call(r,e)};function Fn(r,e){return r===e||!r&&!e&&r!==r&&e!==e}var p_="__v",g_="__o",m_="_owner",Hc=Object.getOwnPropertyDescriptor,Vc=Object.keys;function y_(r,e,t){var n=r.length;if(e.length!==n)return!1;for(;n-- >0;)if(!t.equals(r[n],e[n],n,n,r,e,t))return!1;return!0}function __(r,e){return Fn(r.getTime(),e.getTime())}function b_(r,e){return r.name===e.name&&r.message===e.message&&r.cause===e.cause&&r.stack===e.stack}function v_(r,e){return r===e}function Kc(r,e,t){var n=r.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=r.entries(),o,a,l=0;(o=s.next())&&!o.done;){for(var u=e.entries(),c=!1,d=0;(a=u.next())&&!a.done;){if(i[d]){d++;continue}var f=o.value,h=a.value;if(t.equals(f[0],h[0],l,d,r,e,t)&&t.equals(f[1],h[1],f[0],h[0],r,e,t)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}var C_=Fn;function E_(r,e,t){var n=Vc(r),i=n.length;if(Vc(e).length!==i)return!1;for(;i-- >0;)if(!Fh(r,e,t,n[i]))return!1;return!0}function Xi(r,e,t){var n=zc(r),i=n.length;if(zc(e).length!==i)return!1;for(var s,o,a;i-- >0;)if(s=n[i],!Fh(r,e,t,s)||(o=Hc(r,s),a=Hc(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function w_(r,e){return Fn(r.valueOf(),e.valueOf())}function x_(r,e){return r.source===e.source&&r.flags===e.flags}function Jc(r,e,t){var n=r.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=r.values(),o,a;(o=s.next())&&!o.done;){for(var l=e.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&t.equals(o.value,a.value,o.value,a.value,r,e,t)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function k_(r,e){var t=r.length;if(e.length!==t)return!1;for(;t-- >0;)if(r[t]!==e[t])return!1;return!0}function S_(r,e){return r.hostname===e.hostname&&r.pathname===e.pathname&&r.protocol===e.protocol&&r.port===e.port&&r.hash===e.hash&&r.username===e.username&&r.password===e.password}function Fh(r,e,t,n){return(n===m_||n===g_||n===p_)&&(r.$$typeof||e.$$typeof)?!0:h_(e,n)&&t.equals(r[n],e[n],n,n,r,e,t)}var T_="[object Arguments]",A_="[object Boolean]",D_="[object Date]",N_="[object Error]",M_="[object Map]",O_="[object Number]",I_="[object Object]",R_="[object RegExp]",L_="[object Set]",P_="[object String]",F_="[object URL]",B_=Array.isArray,Gc=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Yc=Object.assign,q_=Object.prototype.toString.call.bind(Object.prototype.toString);function j_(r){var e=r.areArraysEqual,t=r.areDatesEqual,n=r.areErrorsEqual,i=r.areFunctionsEqual,s=r.areMapsEqual,o=r.areNumbersEqual,a=r.areObjectsEqual,l=r.arePrimitiveWrappersEqual,u=r.areRegExpsEqual,c=r.areSetsEqual,d=r.areTypedArraysEqual,f=r.areUrlsEqual;return function(g,m,y){if(g===m)return!0;if(g==null||m==null)return!1;var v=typeof g;if(v!==typeof m)return!1;if(v!=="object")return v==="number"?o(g,m,y):v==="function"?i(g,m,y):!1;var b=g.constructor;if(b!==m.constructor)return!1;if(b===Object)return a(g,m,y);if(B_(g))return e(g,m,y);if(Gc!=null&&Gc(g))return d(g,m,y);if(b===Date)return t(g,m,y);if(b===RegExp)return u(g,m,y);if(b===Map)return s(g,m,y);if(b===Set)return c(g,m,y);var C=q_(g);return C===D_?t(g,m,y):C===R_?u(g,m,y):C===M_?s(g,m,y):C===L_?c(g,m,y):C===I_?typeof g.then!="function"&&typeof m.then!="function"&&a(g,m,y):C===F_?f(g,m,y):C===N_?n(g,m,y):C===T_?a(g,m,y):C===A_||C===O_||C===P_?l(g,m,y):!1}}function $_(r){var e=r.circular,t=r.createCustomConfig,n=r.strict,i={areArraysEqual:n?Xi:y_,areDatesEqual:__,areErrorsEqual:b_,areFunctionsEqual:v_,areMapsEqual:n?Wc(Kc,Xi):Kc,areNumbersEqual:C_,areObjectsEqual:n?Xi:E_,arePrimitiveWrappersEqual:w_,areRegExpsEqual:x_,areSetsEqual:n?Wc(Jc,Xi):Jc,areTypedArraysEqual:n?Xi:k_,areUrlsEqual:S_};if(t&&(i=Yc({},i,t(i))),e){var s=Hs(i.areArraysEqual),o=Hs(i.areMapsEqual),a=Hs(i.areObjectsEqual),l=Hs(i.areSetsEqual);i=Yc({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return i}function U_(r){return function(e,t,n,i,s,o,a){return r(e,t,a)}}function W_(r){var e=r.circular,t=r.comparator,n=r.createState,i=r.equals,s=r.strict;if(n)return function(l,u){var c=n(),d=c.cache,f=d===void 0?e?new WeakMap:void 0:d,h=c.meta;return t(l,u,{cache:f,equals:i,meta:h,strict:s})};if(e)return function(l,u){return t(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,u){return t(l,u,o)}}var uo=en();en({strict:!0});en({circular:!0});en({circular:!0,strict:!0});en({createInternalComparator:function(){return Fn}});en({strict:!0,createInternalComparator:function(){return Fn}});en({circular:!0,createInternalComparator:function(){return Fn}});en({circular:!0,createInternalComparator:function(){return Fn},strict:!0});function en(r){r===void 0&&(r={});var e=r.circular,t=e===void 0?!1:e,n=r.createInternalComparator,i=r.createState,s=r.strict,o=s===void 0?!1:s,a=$_(r),l=j_(a),u=n?n(l):U_(l);return W_({circular:t,comparator:l,createState:i,equals:u,strict:o})}function K(r,...e){const t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",r);for(const i of e)n.append("v",i);throw t.search=n.toString(),Error(`Minified Lexical error #${r}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const zt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,z_=zt&&"documentMode"in document?document.documentMode:null,Qt=zt&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Wr=zt&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),xo=!(!zt||!("InputEvent"in window)||z_)&&"getTargetRanges"in new window.InputEvent("input"),fs=zt&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),fi=zt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,H_=zt&&/Android/.test(navigator.userAgent),Bh=zt&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Xc=zt&&H_&&Bh,ko=zt&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Bh;function So(...r){const e=[];for(const t of r)if(t&&typeof t=="string")for(const[n]of t.matchAll(/\S+/g))e.push(n);return e}const V_=1,K_=3,J_=9,G_=11,Tn=0,qh=1,hi=2,Y_=0,X_=1,Q_=2,To=4,Ao=8,mu=128,Z_=1792|(112|(3|To|Ao)|mu),yu=1,_u=2,bu=3,vu=4,Cu=5,Eu=6,la=fs||fi||ko?" ":"​",kr=`

`,e2=Wr?" ":la,jh="֑-߿יִ-﷽ﹰ-ﻼ",$h="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",t2=new RegExp("^[^"+$h+"]*["+jh+"]"),r2=new RegExp("^[^"+jh+"]*["+$h+"]"),Hr={bold:1,capitalize:1024,code:16,highlight:mu,italic:2,lowercase:256,strikethrough:To,subscript:32,superscript:64,underline:Ao,uppercase:512},n2={directionless:1,unmergeable:2},Qc={center:_u,end:Eu,justify:vu,left:yu,right:bu,start:Cu},i2={[_u]:"center",[Eu]:"end",[vu]:"justify",[yu]:"left",[bu]:"right",[Cu]:"start"},s2={normal:0,segmented:2,token:1},o2={[Y_]:"normal",[Q_]:"segmented",[X_]:"token"},a2="$";function Uh(r,e,t,n,i,s){let o=r.getFirstChild();for(;o!==null;){const a=o.__key;o.__parent===e&&(P(o)&&Uh(o,a,t,n,i,s),t.has(a)||s.delete(a),i.push(a)),o=o.getNextSibling()}}const l2=100;let gl=!1,wu=0;function u2(r){wu=r.timeStamp}function ja(r,e,t){const n=r.nodeName==="BR",i=e.__lexicalLineBreak;return i&&(r===i||n&&r.previousSibling===i)||n&&ba(r,t)!==void 0}function c2(r,e,t){const n=jt(Lt(t));let i=null,s=null;n!==null&&n.anchorNode===r&&(i=n.anchorOffset,s=n.focusOffset);const o=r.nodeValue;o!==null&&Vu(e,o,i,s,!1)}function d2(r,e,t){if(F(r)){const n=r.anchor.getNode();if(n.is(t)&&r.format!==n.getFormat())return!1}return Dr(e)&&t.isAttached()}function f2(r,e,t,n){for(let i=r;i&&!c0(i);i=Is(i)){const s=ba(i,e);if(s!==void 0){const o=me(s,t);if(o)return ye(o)||!ve(i)?void 0:[i,o]}else if(i===n)return[n,Lp(t)]}}function Wh(r,e,t){gl=!0;const n=performance.now()-wu>l2;try{St(r,()=>{const i=U()||function(f){return f.getEditorState().read(()=>{const h=U();return h!==null?h.clone():null})}(r),s=new Map,o=r.getRootElement(),a=r._editorState,l=r._blockCursorElement;let u=!1,c="";for(let f=0;f<e.length;f++){const h=e[f],g=h.type,m=h.target,y=f2(m,r,a,o);if(!y)continue;const[v,b]=y;if(g==="characterData")n&&H(b)&&Dr(m)&&d2(i,m,b)&&c2(m,b,r);else if(g==="childList"){u=!0;const C=h.addedNodes;for(let E=0;E<C.length;E++){const A=C[E],k=Ip(A),S=A.parentNode;if(S!=null&&A!==l&&k===null&&!ja(A,S,r)){if(Wr){const L=(ve(A)?A.innerText:null)||A.nodeValue;L&&(c+=L)}S.removeChild(A)}}const T=h.removedNodes,R=T.length;if(R>0){let E=0;for(let A=0;A<R;A++){const k=T[A];(ja(k,m,r)||l===k)&&(m.appendChild(k),E++)}R!==E&&s.set(v,b)}}}if(s.size>0)for(const[f,h]of s)h.reconcileObservedMutation(f,r);const d=t.takeRecords();if(d.length>0){for(let f=0;f<d.length;f++){const h=d[f],g=h.addedNodes,m=h.target;for(let y=0;y<g.length;y++){const v=g[y],b=v.parentNode;b==null||v.nodeName!=="BR"||ja(v,m,r)||b.removeChild(v)}}t.takeRecords()}i!==null&&(u&&tt(i),Wr&&jp(r)&&i.insertRawText(c))})}finally{gl=!1}}function zh(r){const e=r._observer;e!==null&&Wh(r,e.takeRecords(),e)}function Hh(r){(function(e){wu===0&&Lt(e).addEventListener("textInput",u2,!0)})(r),r._observer=new MutationObserver((e,t)=>{Wh(r,e,t)})}let h2=class Vh{constructor(e,t=new Map,n=void 0,i=new Map,s=void 0){this.node=e,this.sharedConfigMap=t,this.unknownState=n,this.knownState=i;const o=s!==void 0?s:function(a,l,u){let c=u.size;if(l)for(const d in l){const f=a.get(d);f&&u.has(f)||c++}return c}(t,n,i);this.size=o}getValue(e){const t=this.knownState.get(e);if(t!==void 0)return t;this.sharedConfigMap.set(e.key,e);let n=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const i=this.unknownState[e.key];i!==void 0&&(n=e.parse(i)),this.updateFromKnown(e,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState};for(const[t,n]of this.knownState)t.isEqual(n,t.defaultValue)?delete e[t.key]:e[t.key]=t.unparse(n);return Vs(e)?{[a2]:e}:{}}getWritable(e){if(this.node===e)return this;const t=new Map(this.knownState),n=Vs(i=this.unknownState)&&{...i};var i;if(n)for(const s of t.keys())delete n[s.key];return new Vh(e,this.sharedConfigMap,Vs(n),t,this.size)}updateFromKnown(e,t){const n=e.key;this.sharedConfigMap.set(n,e);const{knownState:i,unknownState:s}=this;i.has(e)||s&&n in s||this.size++,i.set(e,t)}updateFromUnknown(e,t){const n=this.sharedConfigMap.get(e);n?this.updateFromKnown(n,n.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){const{knownState:t}=this;for(const n of t.keys())t.set(n,n.defaultValue);if(this.size=t.size,this.unknownState={},e)for(const[n,i]of Object.entries(e))this.updateFromUnknown(n,i);this.unknownState=Vs(this.unknownState)}};function Vs(r){if(r)for(const e in r)return r}function p2(r){const e=r.getWritable(),t=e.__state?e.__state.getWritable(e):new h2(e);return e.__state=t,t}function Zc(r,e){const t=r.__mode,n=r.__format,i=r.__style,s=e.__mode,o=e.__format,a=e.__style,l=r.__state,u=e.__state;return(t===null||t===s)&&(n===null||n===o)&&(i===null||i===a)&&(r.__state===null||l===u||function(c,d){if(c===d)return!0;if(c&&d&&c.size!==d.size)return!1;const f=new Set,h=(m,y)=>{for(const[v,b]of m.knownState){if(f.has(v.key))continue;f.add(v.key);const C=y?y.getValue(v):v.defaultValue;if(C!==b&&!v.isEqual(C,b))return!0}return!1},g=(m,y)=>{const{unknownState:v}=m,b=y?y.unknownState:void 0;if(v){for(const[C,T]of Object.entries(v))if(!f.has(C)&&(f.add(C),T!==(b?b[C]:void 0)))return!0}return!1};return!(c&&h(c,d)||d&&h(d,c)||c&&g(c,d)||d&&g(d,c))}(l,u))}function ed(r,e){const t=r.mergeWithSibling(e),n=Ae()._normalizedNodes;return n.add(r.__key),n.add(e.__key),t}function td(r){let e,t,n=r;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(e=n.getPreviousSibling())!==null&&H(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(Zc(e,n)){n=ed(e,n);break}break}e.remove()}for(;(t=n.getNextSibling())!==null&&H(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(Zc(n,t)){n=ed(n,t);break}break}t.remove()}}else n.remove()}function hs(r){return rd(r.anchor),rd(r.focus),r}function rd(r){for(;r.type==="element";){const e=r.getNode(),t=r.offset;let n,i;if(t===e.getChildrenSize()?(n=e.getChildAtIndex(t-1),i=!0):(n=e.getChildAtIndex(t),i=!1),H(n)){r.set(n.__key,i?n.getTextContentSize():0,"text",!0);break}if(!P(n))break;r.set(n.__key,i?n.getChildrenSize():0,"element",!0)}}let Vr,ht,ps,ua,ml,yl,An,qt,_l,gs,Le="",ft="",Yt=null,Xt="",br="",Kh=!1,ms=!1,co=null;function Do(r,e){const t=An.get(r);if(e!==null){const n=Cl(r);n.parentNode===e&&e.removeChild(n)}if(qt.has(r)||ht._keyToDOMMap.delete(r),P(t)){const n=Mo(t,An);bl(n,0,n.length-1,null)}t!==void 0&&Ku(gs,ps,ua,t,"destroyed")}function bl(r,e,t,n){let i=e;for(;i<=t;++i){const s=r[i];s!==void 0&&Do(s,n)}}function yn(r,e){r.setProperty("text-align",e)}const g2="40px";function Jh(r,e){const t=Vr.theme.indent;if(typeof t=="string"){const i=r.classList.contains(t);e>0&&!i?r.classList.add(t):e<1&&i&&r.classList.remove(t)}const n=getComputedStyle(r).getPropertyValue("--lexical-indent-base-value")||g2;r.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${n})`)}function Gh(r,e){const t=r.style;e===0?yn(t,""):e===yu?yn(t,"left"):e===_u?yn(t,"center"):e===bu?yn(t,"right"):e===vu?yn(t,"justify"):e===Cu?yn(t,"start"):e===Eu&&yn(t,"end")}function No(r,e){const t=qt.get(r);t===void 0&&K(60);const n=t.createDOM(Vr,ht);if(function(i,s,o){const a=o._keyToDOMMap;(function(l,u,c){const d=`__lexicalKey_${u._key}`;l[d]=c})(s,o,i),a.set(i,s)}(r,n,ht),H(t)?n.setAttribute("data-lexical-text","true"):ye(t)&&n.setAttribute("data-lexical-decorator","true"),P(t)){const i=t.__indent,s=t.__size;if(i!==0&&Jh(n,i),s!==0){const a=s-1;(function(l,u,c,d){const f=ft;ft="",vl(l,c,0,u,c.getDOMSlot(d)),Xh(c,d),ft=f})(Mo(t,qt),a,t,n)}const o=t.__format;o!==0&&Gh(n,o),t.isInline()||Yh(null,t,n),va(t)&&(Le+=kr,br+=kr)}else{const i=t.getTextContent();if(ye(t)){const s=t.decorate(ht,Vr);s!==null&&Qh(r,s),n.contentEditable="false"}else H(t)&&(t.isDirectionless()||(ft+=i));Le+=i,br+=i}return e!==null&&e.insertChild(n),Ku(gs,ps,ua,t,"created"),n}function vl(r,e,t,n,i){const s=Le;Le="";let o=t;for(;o<=n;++o){No(r[o],i);const a=qt.get(r[o]);a!==null&&H(a)&&(Yt===null&&(Yt=a.getFormat()),Xt===""&&(Xt=a.getStyle()))}va(e)&&(Le+=kr),i.element.__lexicalTextContent=Le,Le=s+Le}function nd(r,e){if(r){const t=r.__last;if(t){const n=e.get(t);if(n)return Cn(n)?"line-break":ye(n)&&n.isInline()?"decorator":null}return"empty"}return null}function Yh(r,e,t){const n=nd(r,An),i=nd(e,qt);n!==i&&e.getDOMSlot(t).setManagedLineBreak(i)}function Xh(r,e){const t=e.__lexicalDirTextContent||"",n=e.__lexicalDir||"";if(t!==ft||n!==co){const i=ft==="",s=i?co:function(o){return t2.test(o)?"rtl":r2.test(o)?"ltr":null}(ft);if(s!==n){const o=e.classList,a=Vr.theme;let l=n!==null?a[n]:void 0,u=s!==null?a[s]:void 0;if(l!==void 0){if(typeof l=="string"){const c=So(l);l=a[n]=c}o.remove(...l)}if(s===null||i&&s==="ltr")e.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const c=So(u);u=a[s]=c}u!==void 0&&o.add(...u)}e.dir=s}ms||(r.getWritable().__dir=s)}co=s,e.__lexicalDirTextContent=ft,e.__lexicalDir=s}}function m2(r,e,t){const n=ft;var i;ft="",Yt=null,Xt="",function(s,o,a){const l=Le,u=s.__size,c=o.__size;Le="";const d=a.element;if(u===1&&c===1){const f=s.__first,h=o.__first;if(f===h)ts(f,d);else{const m=Cl(f),y=No(h,null);try{d.replaceChild(y,m)}catch(v){if(typeof v=="object"&&v!=null){const b=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${h}}, old child: {tag: ${m.tagName}, key: ${f}}.`;throw new Error(b)}throw v}Do(f,null)}const g=qt.get(h);H(g)&&(Yt===null&&(Yt=g.getFormat()),Xt===""&&(Xt=g.getStyle()))}else{const f=Mo(s,An),h=Mo(o,qt);if(f.length!==u&&K(227),h.length!==c&&K(228),u===0)c!==0&&vl(h,o,0,c-1,a);else if(c===0){if(u!==0){const g=a.after==null&&a.before==null&&a.element.__lexicalLineBreak==null;bl(f,0,u-1,g?null:d),g&&(d.textContent="")}}else(function(g,m,y,v,b,C){const T=v-1,R=b-1;let E,A,k=C.getFirstChild(),S=0,L=0;for(;S<=T&&L<=R;){const j=m[S],G=y[L];if(j===G)k=$a(ts(G,C.element)),S++,L++;else{E===void 0&&(E=new Set(m)),A===void 0&&(A=new Set(y));const B=A.has(j),z=E.has(G);if(B)if(z){const $=_i(ht,G);$===k?k=$a(ts(G,C.element)):(C.withBefore(k).insertChild($),ts(G,C.element)),S++,L++}else No(G,C.withBefore(k)),L++;else k=$a(Cl(j)),Do(j,C.element),S++}const O=qt.get(G);O!==null&&H(O)&&(Yt===null&&(Yt=O.getFormat()),Xt===""&&(Xt=O.getStyle()))}const q=S>T,X=L>R;if(q&&!X){const j=y[R+1],G=j===void 0?null:ht.getElementByKey(j);vl(y,g,L,R,C.withBefore(G))}else X&&!q&&bl(m,S,T,C.element)})(o,f,h,u,c,a)}va(o)&&(Le+=kr),d.__lexicalTextContent=Le,Le=l+Le}(r,e,e.getDOMSlot(t)),Xh(e,t),i=e,Yt==null||Yt===i.__textFormat||ms||i.setTextFormat(Yt),function(s){Xt===""||Xt===s.__textStyle||ms||s.setTextStyle(Xt)}(e),ft=n}function Mo(r,e){const t=[];let n=r.__first;for(;n!==null;){const i=e.get(n);i===void 0&&K(101),t.push(n),n=i.__next}return t}function ts(r,e){const t=An.get(r);let n=qt.get(r);t!==void 0&&n!==void 0||K(61);const i=Kh||yl.has(r)||ml.has(r),s=_i(ht,r);if(t===n&&!i){if(P(t)){const o=s.__lexicalTextContent;o!==void 0&&(Le+=o,br+=o);const a=s.__lexicalDirTextContent;a!==void 0&&(ft+=a)}else{const o=t.getTextContent();H(t)&&!t.isDirectionless()&&(ft+=o),br+=o,Le+=o}return s}if(t!==n&&i&&Ku(gs,ps,ua,n,"updated"),n.updateDOM(t,s,Vr)){const o=No(r,null);return e===null&&K(62),e.replaceChild(o,s),Do(r,null),o}if(P(t)&&P(n)){const o=n.__indent;o!==t.__indent&&Jh(s,o);const a=n.__format;a!==t.__format&&Gh(s,a),i&&(m2(t,n,s),Xe(n)||n.isInline()||Yh(t,n,s)),va(n)&&(Le+=kr,br+=kr)}else{const o=n.getTextContent();if(ye(n)){const a=n.decorate(ht,Vr);a!==null&&Qh(r,a)}else H(n)&&!n.isDirectionless()&&(ft+=o);Le+=o,br+=o}if(!ms&&Xe(n)&&n.__cachedText!==br){const o=n.getWritable();o.__cachedText=br,n=o}return s}function Qh(r,e){let t=ht._pendingDecorators;const n=ht._decorators;if(t===null){if(n[r]===e)return;t=Rp(ht)}t[r]=e}function $a(r){let e=r.nextSibling;return e!==null&&e===ht._blockCursorElement&&(e=e.nextSibling),e}function y2(r,e,t,n,i,s){Le="",br="",ft="",Kh=n===hi,co=null,ht=t,Vr=t._config,ps=t._nodes,ua=ht._listeners.mutation,ml=i,yl=s,An=r._nodeMap,qt=e._nodeMap,ms=e._readOnly,_l=new Map(t._keyToDOMMap);const o=new Map;return gs=o,ts("root",null),ht=void 0,ps=void 0,ml=void 0,yl=void 0,An=void 0,qt=void 0,Vr=void 0,_l=void 0,gs=void 0,o}function Cl(r){const e=_l.get(r);return e===void 0&&K(75,r),e}function le(r){return{type:r}}const Di=le("SELECTION_CHANGE_COMMAND"),_2=le("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),Zh=le("CLICK_COMMAND"),tr=le("DELETE_CHARACTER_COMMAND"),zr=le("INSERT_LINE_BREAK_COMMAND"),ys=le("INSERT_PARAGRAPH_COMMAND"),vn=le("CONTROLLED_TEXT_INSERTION_COMMAND"),Bn=le("PASTE_COMMAND"),Oo=le("REMOVE_TEXT_COMMAND"),pi=le("DELETE_WORD_COMMAND"),gi=le("DELETE_LINE_COMMAND"),Fr=le("FORMAT_TEXT_COMMAND"),ca=le("UNDO_COMMAND"),da=le("REDO_COMMAND"),Ni=le("KEYDOWN_COMMAND"),xu=le("KEY_ARROW_RIGHT_COMMAND"),b2=le("MOVE_TO_END"),ku=le("KEY_ARROW_LEFT_COMMAND"),v2=le("MOVE_TO_START"),Su=le("KEY_ARROW_UP_COMMAND"),Tu=le("KEY_ARROW_DOWN_COMMAND"),mi=le("KEY_ENTER_COMMAND"),ep=le("KEY_SPACE_COMMAND"),Au=le("KEY_BACKSPACE_COMMAND"),fa=le("KEY_ESCAPE_COMMAND"),Du=le("KEY_DELETE_COMMAND"),Nu=le("KEY_TAB_COMMAND"),C2=le("INSERT_TAB_COMMAND"),E2=le("INDENT_CONTENT_COMMAND"),id=le("OUTDENT_CONTENT_COMMAND"),ha=le("DROP_COMMAND"),w2=le("FORMAT_ELEMENT_COMMAND"),Mu=le("DRAGSTART_COMMAND"),tp=le("DRAGOVER_COMMAND"),x2=le("DRAGEND_COMMAND"),qn=le("COPY_COMMAND"),Mi=le("CUT_COMMAND"),Io=le("SELECT_ALL_COMMAND"),Ou=le("CLEAR_EDITOR_COMMAND"),rp=le("CLEAR_HISTORY_COMMAND"),rs=le("CAN_REDO_COMMAND"),ns=le("CAN_UNDO_COMMAND"),k2=le("FOCUS_COMMAND"),S2=le("BLUR_COMMAND"),T2=le("KEY_MODIFIER_COMMAND"),gr=Object.freeze({}),El=30,wl=[["keydown",function(r,e){if(ss=r.timeStamp,np=r.key,!e.isComposing()&&!ee(e,Ni,r)&&r.key!=null){if(Ua&&Od(r))return St(e,()=>{Ks(e,Wa)}),Ua=!1,void(Wa="");if(function(t){return _e(t,"ArrowRight",{shiftKey:"any"})}(r))ee(e,xu,r);else if(function(t){return _e(t,"ArrowRight",_r)}(r))ee(e,b2,r);else if(function(t){return _e(t,"ArrowLeft",{shiftKey:"any"})}(r))ee(e,ku,r);else if(function(t){return _e(t,"ArrowLeft",_r)}(r))ee(e,v2,r);else if(function(t){return _e(t,"ArrowUp",{altKey:"any",shiftKey:"any"})}(r))ee(e,Su,r);else if(function(t){return _e(t,"ArrowDown",{altKey:"any",shiftKey:"any"})}(r))ee(e,Tu,r);else if(function(t){return _e(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(r))os=!0,ee(e,mi,r);else if(function(t){return t.key===" "}(r))ee(e,ep,r);else if(function(t){return Qt&&_e(t,"o",{ctrlKey:!0})}(r))r.preventDefault(),os=!0,ee(e,zr,!0);else if(function(t){return _e(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(r))os=!1,ee(e,mi,r);else if(function(t){return _e(t,"Backspace",{shiftKey:"any"})||Qt&&_e(t,"h",{ctrlKey:!0})}(r))Od(r)?ee(e,Au,r):(r.preventDefault(),ee(e,tr,!0));else if(function(t){return t.key==="Escape"}(r))ee(e,fa,r);else if(function(t){return _e(t,"Delete",{})||Qt&&_e(t,"d",{ctrlKey:!0})}(r))(function(t){return t.key==="Delete"})(r)?ee(e,Du,r):(r.preventDefault(),ee(e,tr,!1));else if(function(t){return _e(t,"Backspace",Md)}(r))r.preventDefault(),ee(e,pi,!0);else if(function(t){return _e(t,"Delete",Md)}(r))r.preventDefault(),ee(e,pi,!1);else if(function(t){return Qt&&_e(t,"Backspace",{metaKey:!0})}(r))r.preventDefault(),ee(e,gi,!0);else if(function(t){return Qt&&(_e(t,"Delete",{metaKey:!0})||_e(t,"k",{ctrlKey:!0}))}(r))r.preventDefault(),ee(e,gi,!1);else if(function(t){return _e(t,"b",_r)}(r))r.preventDefault(),ee(e,Fr,"bold");else if(function(t){return _e(t,"u",_r)}(r))r.preventDefault(),ee(e,Fr,"underline");else if(function(t){return _e(t,"i",_r)}(r))r.preventDefault(),ee(e,Fr,"italic");else if(function(t){return _e(t,"Tab",{shiftKey:"any"})}(r))ee(e,Nu,r);else if(function(t){return _e(t,"z",_r)}(r))r.preventDefault(),ee(e,ca,void 0);else if(function(t){return Qt?_e(t,"z",{metaKey:!0,shiftKey:!0}):_e(t,"y",{ctrlKey:!0})||_e(t,"z",{ctrlKey:!0,shiftKey:!0})}(r))r.preventDefault(),ee(e,da,void 0);else{const t=e._editorState._selection;t===null||F(t)?!Wr&&Id(r)&&(r.preventDefault(),ee(e,Io,r)):function(n){return _e(n,"c",_r)}(r)?(r.preventDefault(),ee(e,qn,r)):function(n){return _e(n,"x",_r)}(r)?(r.preventDefault(),ee(e,Mi,r)):Id(r)&&(r.preventDefault(),ee(e,Io,r))}(function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey})(r)&&ee(e,T2,r)}}],["pointerdown",function(r,e){const t=r.target,n=r.pointerType;$n(t)&&n!=="touch"&&r.button===0&&St(e,()=>{Ad(t)||(kl=!0)})}],["compositionstart",function(r,e){St(e,()=>{const t=U();if(F(t)&&!e.isComposing()){const n=t.anchor,i=t.anchor.getNode();Ye(n.key),(r.timeStamp<ss+El||n.type==="element"||!t.isCollapsed()||i.getFormat()!==t.format||H(i)&&i.getStyle()!==t.style)&&ee(e,vn,e2)}})}],["compositionend",function(r,e){Wr?Qi=!0:fi||!fs&&!ko?St(e,()=>{Ks(e,r.data)}):(Ua=!0,Wa=r.data)}],["input",function(r,e){r.stopPropagation(),St(e,()=>{if(ve(r.target)&&Ad(r.target))return;const t=U(),n=r.data,i=lp(r);if(n!=null&&F(t)&&op(t,i,n,r.timeStamp,!1)){Qi&&(Ks(e,n),Qi=!1);const s=t.anchor.getNode(),o=jt(Lt(e));if(o===null)return;const a=t.isBackward(),l=a?t.anchor.offset:t.focus.offset,u=a?t.focus.offset:t.anchor.offset;xo&&!t.isCollapsed()&&H(s)&&o.anchorNode!==null&&s.getTextContent().slice(0,l)+n+s.getTextContent().slice(l+u)===Bp(o.anchorNode)||ee(e,vn,n);const c=n.length;Wr&&c>1&&r.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=c),fs||fi||ko||!e.isComposing()||(ss=0,Ye(null))}else Hu(!1,e,n!==null?n:void 0),Qi&&(Ks(e,n||void 0),Qi=!1);(function(){it();const s=Ae();zh(s)})()},{event:r}),ei=null}],["click",function(r,e){St(e,()=>{const t=U(),n=jt(Lt(e)),i=Oi();if(n){if(F(t)){const s=t.anchor,o=s.getNode();if(s.type==="element"&&s.offset===0&&t.isCollapsed()&&!Xe(o)&&ke().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&i!==null&&t.is(i))n.removeAllRanges(),t.dirty=!0;else if(r.detail===3&&!t.isCollapsed()&&o!==t.focus.getNode()){const a=function(l,u){let c=l;for(;c!==ke()&&c!=null;){if(u(c))return c;c=c.getParent()}return null}(o,l=>P(l)&&!l.isInline());P(a)&&a.select(0)}}else if(r.pointerType==="touch"){const s=n.anchorNode;(ve(s)||Dr(s))&&tt(Lu(i,n,e,r))}}ee(e,Zh,r)})}],["cut",gr],["copy",gr],["dragstart",gr],["dragover",gr],["dragend",gr],["paste",gr],["focus",gr],["blur",gr],["drop",gr]];xo&&wl.push(["beforeinput",(r,e)=>function(t,n){const i=t.inputType,s=lp(t);i==="deleteCompositionText"||Wr&&jp(n)||i!=="insertCompositionText"&&St(n,()=>{const o=U();if(i==="deleteContentBackward"){if(o===null){const h=Oi();if(!F(h))return;tt(h.clone())}if(F(o)){const h=o.anchor.key===o.focus.key;if(a=t.timeStamp,np==="MediaLast"&&a<ss+El&&n.isComposing()&&h){if(Ye(null),ss=0,setTimeout(()=>{St(n,()=>{Ye(null)})},El),F(o)){const g=o.anchor.getNode();g.markDirty(),H(g)||K(142),ap(o,g)}}else{Ye(null),t.preventDefault();const g=o.anchor.getNode(),m=g.getTextContent(),y=g.canInsertTextAfter(),v=o.anchor.offset===0&&o.focus.offset===m.length;let b=Xc&&h&&!v&&y;if(b&&o.isCollapsed()&&(b=!ye(Nl(o.anchor,!0))),!b){ee(n,tr,!0);const C=U();Xc&&F(C)&&C.isCollapsed()&&(bn=C,setTimeout(()=>bn=null))}}return}}var a;if(!F(o))return;const l=t.data;ei!==null&&Hu(!1,n,ei),o.dirty&&ei===null||!o.isCollapsed()||Xe(o.anchor.getNode())||s===null||o.applyDOMRange(s),ei=null;const u=o.anchor,c=o.focus,d=u.getNode(),f=c.getNode();if(i!=="insertText"&&i!=="insertTranspose")switch(t.preventDefault(),i){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ee(n,vn,t);break;case"insertFromComposition":Ye(null),ee(n,vn,t);break;case"insertLineBreak":Ye(null),ee(n,zr,!1);break;case"insertParagraph":Ye(null),os&&!fi?(os=!1,ee(n,zr,!1)):ee(n,ys,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ee(n,Bn,t);break;case"deleteByComposition":(function(h,g){return h!==g||P(h)||P(g)||!h.isToken()||!g.isToken()})(d,f)&&ee(n,Oo,t);break;case"deleteByDrag":case"deleteByCut":ee(n,Oo,t);break;case"deleteContent":ee(n,tr,!1);break;case"deleteWordBackward":ee(n,pi,!0);break;case"deleteWordForward":ee(n,pi,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ee(n,gi,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ee(n,gi,!1);break;case"formatStrikeThrough":ee(n,Fr,"strikethrough");break;case"formatBold":ee(n,Fr,"bold");break;case"formatItalic":ee(n,Fr,"italic");break;case"formatUnderline":ee(n,Fr,"underline");break;case"historyUndo":ee(n,ca,void 0);break;case"historyRedo":ee(n,da,void 0)}else{if(l===`
`)t.preventDefault(),ee(n,zr,!1);else if(l===kr)t.preventDefault(),ee(n,ys,void 0);else if(l==null&&t.dataTransfer){const h=t.dataTransfer.getData("text/plain");t.preventDefault(),o.insertRawText(h)}else l!=null&&op(o,s,l,t.timeStamp,!0)?(t.preventDefault(),ee(n,vn,l)):ei=l;ip=t.timeStamp}})}(r,e)]);let ss=0,np=null,ip=0,ei=null;const Ro=new WeakMap;let xl=!1,kl=!1,os=!1,Qi=!1,Ua=!1,Wa="",bn=null,sp=[0,"",0,"root",0];function op(r,e,t,n,i){const s=r.anchor,o=r.focus,a=s.getNode(),l=Ae(),u=jt(Lt(l)),c=u!==null?u.anchorNode:null,d=s.key,f=l.getElementByKey(d),h=t.length;return d!==o.key||!H(a)||(!i&&(!xo||ip<n+50)||a.isDirty()&&h<2||Pp(t))&&s.offset!==o.offset&&!a.isComposing()||ti(a)||a.isDirty()&&h>1||(i||!xo)&&f!==null&&!a.isComposing()&&c!==yi(f)||u!==null&&e!==null&&(!e.collapsed||e.startContainer!==u.anchorNode||e.startOffset!==u.anchorOffset)||a.getFormat()!==r.format||a.getStyle()!==r.style||function(g,m){if(m.isSegmented())return!0;if(!g.isCollapsed())return!1;const y=g.anchor.offset,v=m.getParentOrThrow(),b=m.isToken();return y===0?!m.canInsertTextBefore()||!v.canInsertTextBefore()&&!m.isComposing()||b||function(C){const T=C.getPreviousSibling();return(H(T)||P(T)&&T.isInline())&&!T.canInsertTextAfter()}(m):y===m.getTextContentSize()&&(!m.canInsertTextAfter()||!v.canInsertTextAfter()&&!m.isComposing()||b)}(r,a)}function sd(r,e){return Dr(r)&&r.nodeValue!==null&&e!==0&&e!==r.nodeValue.length}function od(r,e,t){const{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}=r;xl&&(xl=!1,sd(n,i)&&sd(s,o)&&!bn)||St(e,()=>{if(!t)return void tt(null);if(!Os(e,n,s))return;let a=U();if(bn&&F(a)&&a.isCollapsed()){const l=a.anchor,u=bn.anchor;(l.key===u.key&&l.offset===u.offset+1||l.offset===1&&u.getNode().is(l.getNode().getPreviousSibling()))&&(a=bn.clone(),tt(a))}if(bn=null,F(a)){const l=a.anchor,u=l.getNode();if(a.isCollapsed()){r.type==="Range"&&r.anchorNode===r.focusNode&&(a.dirty=!0);const c=Lt(e).event,d=c?c.timeStamp:performance.now(),[f,h,g,m,y]=sp,v=ke(),b=e.isComposing()===!1&&v.getTextContent()==="";if(d<y+200&&l.offset===g&&l.key===m)fo(a,f,h);else if(l.type==="text")H(u)||K(141),ap(a,u);else if(l.type==="element"&&!b){P(u)||K(259);const C=l.getNode();C.isEmpty()?function(T,R){const E=R.getTextFormat(),A=R.getTextStyle();fo(T,E,A)}(a,C):fo(a,0,"")}}else{const c=l.key,d=a.focus.key,f=a.getNodes(),h=f.length,g=a.isBackward(),m=g?o:i,y=g?i:o,v=g?d:c,b=g?c:d;let C=Z_,T=!1;for(let R=0;R<h;R++){const E=f[R],A=E.getTextContentSize();if(H(E)&&A!==0&&!(R===0&&E.__key===v&&m===A||R===h-1&&E.__key===b&&y===0)&&(T=!0,C&=E.getFormat(),C===0))break}a.format=T?C:0}}ee(e,Di,void 0)})}function fo(r,e,t){r.format===e&&r.style===t||(r.format=e,r.style=t,r.dirty=!0)}function ap(r,e){fo(r,e.getFormat(),e.getStyle())}function lp(r){if(!r.getTargetRanges)return null;const e=r.getTargetRanges();return e.length===0?null:e[0]}function Ks(r,e){const t=r._compositionKey;if(Ye(null),t!==null&&e!=null){if(e===""){const n=me(t),i=yi(r.getElementByKey(t));return void(i!==null&&i.nodeValue!==null&&H(n)&&Vu(n,i.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const n=U();if(F(n)){const i=n.focus;return n.anchor.set(i.key,i.offset,i.type),void ee(r,mi,null)}}}Hu(!0,r,e)}function up(r){let e=r.__lexicalEventHandles;return e===void 0&&(e=[],r.__lexicalEventHandles=e),e}const si=new Map;function cp(r){const e=o0(r.target);if(e===null)return;const t=Op(e.anchorNode);if(t===null)return;kl&&(kl=!1,St(t,()=>{const l=Oi(),u=e.anchorNode;(ve(u)||Dr(u))&&tt(Lu(l,e,t,r))}));const n=zu(t),i=n[n.length-1],s=i._key,o=si.get(s),a=o||i;a!==t&&od(e,a,!1),od(e,t,!0),t!==i?si.set(s,t):o&&si.delete(s)}function ad(r){r._lexicalHandled=!0}function ld(r){return r._lexicalHandled===!0}function A2(r){const e=r.ownerDocument,t=Ro.get(e);if(t===void 0)return;const n=t-1;n>=0||K(164),Ro.set(e,n),n===0&&e.removeEventListener("selectionchange",cp);const i=_a(r);Wu(i)?(function(o){if(o._parentEditor!==null){const a=zu(o),l=a[a.length-1]._key;si.get(l)===o&&si.delete(l)}else si.delete(o._key)}(i),r.__lexicalEditor=null):i&&K(198);const s=up(r);for(let o=0;o<s.length;o++)s[o]();r.__lexicalEventHandles=[]}function Sl(r,e,t){it();const n=r.__key,i=r.getParent();if(i===null)return;const s=function(a){const l=U();if(!F(l)||!P(a))return l;const{anchor:u,focus:c}=l,d=u.getNode(),f=c.getNode();return Ml(d,a)&&u.set(a.__key,0,"element"),Ml(f,a)&&c.set(a.__key,0,"element"),l}(r);let o=!1;if(F(s)&&e){const a=s.anchor,l=s.focus;a.key===n&&(Po(a,r,i,r.getPreviousSibling(),r.getNextSibling()),o=!0),l.key===n&&(Po(l,r,i,r.getPreviousSibling(),r.getNextSibling()),o=!0)}else dt(s)&&e&&r.isSelected()&&r.selectPrevious();if(F(s)&&e&&!o){const a=r.getIndexWithinParent();En(r),Lo(s,i,a,-1)}else En(r);t||ur(i)||i.canBeEmpty()||!i.isEmpty()||Sl(i,e),e&&s&&Xe(i)&&i.isEmpty()&&i.selectEnd()}class pa{static getType(){K(64,this.name)}static clone(e){K(65,this.name)}afterCloneFrom(e){this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Q2(this,e)}getType(){return this.__type}isInline(){K(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=me(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||U();if(t==null)return!1;const n=t.getNodes().some(i=>i.__key===this.__key);if(H(this))return n;if(F(t)&&t.anchor.type==="element"&&t.focus.type==="element"){if(t.isCollapsed())return!1;const i=this.getParent();if(ye(this)&&this.isInline()&&i){const s=t.isBackward()?t.focus:t.anchor;if(i.is(s.getNode())&&s.offset===i.getChildrenSize()&&this.is(i.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),n=0;for(;t!==null;){if(this.is(t))return n;n++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:me(e)}getParentOrThrow(){const e=this.getParent();return e===null&&K(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(ur(t))return P(e)||e===this&&ye(e)||K(194),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&K(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:me(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let n=t.getFirstChild();for(;n!==null&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:me(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=P(this)?this:this.getParent(),n=P(e)?e:e.getParent(),i=t&&n?us(t,n):null;return i?i.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const t=us(this,e);return t!==null&&(t.type==="descendant"||(t.type==="branch"?Vp(t)===-1:(t.type!=="same"&&t.type!=="ancestor"&&K(279),!1)))}isParentOf(e){const t=us(this,e);return t!==null&&t.type==="ancestor"}getNodesBetween(e){const t=this.isBefore(e),n=[],i=new Set;let s=this;for(;s!==null;){const o=s.__key;if(i.has(o)||(i.add(o),n.push(s)),s===e)break;const a=P(s)?t?s.getFirstChild():s.getLastChild():null;if(a!==null){s=a;continue}const l=t?s.getNextSibling():s.getPreviousSibling();if(l!==null){s=l;continue}const u=s.getParentOrThrow();if(i.has(u.__key)||n.push(u),u===e)break;let c=null,d=u;do{if(d===null&&K(68),c=t?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),d===null)break;c!==null||i.has(d.__key)||n.push(d)}while(c===null);s=c}return t||n.reverse(),n}isDirty(){const e=Ae()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=me(this.__key);return e===null&&K(113),e}getWritable(){it();const e=tn(),t=Ae(),n=e._nodeMap,i=this.__key,s=this.getLatest(),o=t._cloneNotNeeded,a=U();if(a!==null&&a.setCachedNodes(null),o.has(i))return Bo(s),s;const l=Yu(s);return o.add(i),Bo(l),n.set(i,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){K(70)}updateDOM(e,t,n){K(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){K(18,this.name)}updateFromJSON(e){return function(t,n){const i=t.getWritable();return(n||i.__state)&&p2(t).updateFromJSON(n),i}(this,e.$)}static transform(){return null}remove(e){Sl(this,!0,e)}replace(e,t){it();let n=U();n!==null&&(n=n.clone()),Ga(this,e);const i=this.getLatest(),s=this.__key,o=e.__key,a=e.getWritable(),l=this.getParentOrThrow().getWritable(),u=l.__size;En(a);const c=i.getPreviousSibling(),d=i.getNextSibling(),f=i.__prev,h=i.__next,g=i.__parent;if(Sl(i,!1,!0),c===null?l.__first=o:c.getWritable().__next=o,a.__prev=f,d===null?l.__last=o:d.getWritable().__prev=o,a.__next=h,a.__parent=g,l.__size=u,t&&(P(this)&&P(a)||K(139),this.getChildren().forEach(m=>{a.append(m)})),F(n)){tt(n);const m=n.anchor,y=n.focus;m.key===s&&fd(m,a),y.key===s&&fd(y,a)}return Br()===s&&Ye(o),a}insertAfter(e,t=!0){it(),Ga(this,e);const n=this.getWritable(),i=e.getWritable(),s=i.getParent(),o=U();let a=!1,l=!1;if(s!==null){const h=e.getIndexWithinParent();if(En(i),F(o)){const g=s.__key,m=o.anchor,y=o.focus;a=m.type==="element"&&m.key===g&&m.offset===h+1,l=y.type==="element"&&y.key===g&&y.offset===h+1}}const u=this.getNextSibling(),c=this.getParentOrThrow().getWritable(),d=i.__key,f=n.__next;if(u===null?c.__last=d:u.getWritable().__prev=d,c.__size++,n.__next=d,i.__next=f,i.__prev=n.__key,i.__parent=n.__parent,t&&F(o)){const h=this.getIndexWithinParent();Lo(o,c,h+1);const g=c.__key;a&&o.anchor.set(g,h+2,"element"),l&&o.focus.set(g,h+2,"element")}return e}insertBefore(e,t=!0){it(),Ga(this,e);const n=this.getWritable(),i=e.getWritable(),s=i.__key;En(i);const o=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=n.__prev,u=this.getIndexWithinParent();o===null?a.__first=s:o.getWritable().__next=s,a.__size++,n.__prev=s,i.__prev=l,i.__next=n.__key,i.__parent=n.__parent;const c=U();return t&&F(c)&&Lo(c,this.getParentOrThrow(),u),e}isParentRequired(){return!1}createParentElementNode(){return Dt()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){it();const n=this.getPreviousSibling(),i=this.getParentOrThrow();if(n===null)return i.select(0,0);if(P(n))return n.select();if(!H(n)){const s=n.getIndexWithinParent()+1;return i.select(s,s)}return n.select(e,t)}selectNext(e,t){it();const n=this.getNextSibling(),i=this.getParentOrThrow();if(n===null)return i.select();if(P(n))return n.select(0,0);if(!H(n)){const s=n.getIndexWithinParent();return i.select(s,s)}return n.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}class jn extends pa{static getType(){return"linebreak"}static clone(e){return new jn(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>function(t){const n=t.parentElement;if(n!==null&&qo(n)){const i=n.firstChild;if(i===t||i.nextSibling===t&&Js(i)){const s=n.lastChild;if(s===t||s.previousSibling===t&&Js(s))return!0}}return!1}(e)||function(t){const n=t.parentElement;if(n!==null&&qo(n)){const i=n.firstChild;if(i===t||i.nextSibling===t&&Js(i))return!1;const s=n.lastChild;if(s===t||s.previousSibling===t&&Js(s))return!0}return!1}(e)?null:{conversion:D2,priority:0}}}static importJSON(e){return Dn().updateFromJSON(e)}}function D2(r){return{node:Dn()}}function Dn(){return Se(new jn)}function Cn(r){return r instanceof jn}function Js(r){return Dr(r)&&/^( |\t|\r?\n)+$/.test(r.textContent||"")}function za(r,e){return 16&e?"code":e&mu?"mark":32&e?"sub":64&e?"sup":null}function Ha(r,e){return 1&e?"strong":2&e?"em":"span"}function dp(r,e,t,n,i){const s=n.classList;let o=ai(i,"base");o!==void 0&&s.add(...o),o=ai(i,"underlineStrikethrough");let a=!1;const l=e&Ao&&e&To;o!==void 0&&(t&Ao&&t&To?(a=!0,l||s.add(...o)):l&&s.remove(...o));for(const u in Hr){const c=Hr[u];if(o=ai(i,u),o!==void 0)if(t&c){if(a&&(u==="underline"||u==="strikethrough")){e&c&&s.remove(...o);continue}e&c&&(!l||u!=="underline")&&u!=="strikethrough"||s.add(...o)}else e&c&&s.remove(...o)}}function fp(r,e,t){const n=e.firstChild,i=t.isComposing(),s=r+(i?la:"");if(n==null)e.textContent=s;else{const o=n.nodeValue;if(o!==s)if(i||Wr){const[a,l,u]=function(c,d){const f=c.length,h=d.length;let g=0,m=0;for(;g<f&&g<h&&c[g]===d[g];)g++;for(;m+g<f&&m+g<h&&c[f-m-1]===d[h-m-1];)m++;return[g,f-g-m,d.slice(g,h-m)]}(o,s);l!==0&&n.deleteData(a,l),n.insertData(a,u)}else n.nodeValue=s}}function ud(r,e,t,n,i,s){fp(i,r,e);const o=s.theme.text;o!==void 0&&dp(0,0,n,r,o)}function Gs(r,e){const t=document.createElement(e);return t.appendChild(r),t}let At=class hp extends pa{static getType(){return"text"}static clone(e){return new hp(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return o2[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Br()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const t=Hr[e];return!!(this.getFormat()&t)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return Fo(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){const n=this.__format,i=za(0,n),s=Ha(0,n),o=i===null?s:i,a=document.createElement(o);let l=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),i!==null&&(l=document.createElement(s),a.appendChild(l)),ud(l,this,0,n,this.__text,e);const u=this.__style;return u!==""&&(a.style.cssText=u),a}updateDOM(e,t,n){const i=this.__text,s=e.__format,o=this.__format,a=za(0,s),l=za(0,o),u=Ha(0,s),c=Ha(0,o);if((a===null?u:a)!==(l===null?c:l))return!0;if(a===l&&u!==c){const m=t.firstChild;m==null&&K(48);const y=document.createElement(c);return ud(y,this,0,o,i,n),t.replaceChild(y,m),!1}let d=t;l!==null&&a!==null&&(d=t.firstChild,d==null&&K(49)),fp(i,d,this);const f=n.theme.text;f!==void 0&&s!==o&&dp(0,s,o,d,f);const h=e.__style,g=this.__style;return h!==g&&(t.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:I2,priority:0}),b:()=>({conversion:M2,priority:0}),code:()=>({conversion:mr,priority:0}),em:()=>({conversion:mr,priority:0}),i:()=>({conversion:mr,priority:0}),mark:()=>({conversion:mr,priority:0}),s:()=>({conversion:mr,priority:0}),span:()=>({conversion:N2,priority:0}),strong:()=>({conversion:mr,priority:0}),sub:()=>({conversion:mr,priority:0}),sup:()=>({conversion:mr,priority:0}),u:()=>({conversion:mr,priority:0})}}static importJSON(e){return Re().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return ve(t)||K(132),t.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?t.style.textTransform="lowercase":this.hasFormat("uppercase")?t.style.textTransform="uppercase":this.hasFormat("capitalize")&&(t.style.textTransform="capitalize"),this.hasFormat("bold")&&(t=Gs(t,"b")),this.hasFormat("italic")&&(t=Gs(t,"i")),this.hasFormat("strikethrough")&&(t=Gs(t,"s")),this.hasFormat("underline")&&(t=Gs(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format=typeof e=="string"?Hr[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail=typeof e=="string"?n2[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=Fo(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=s2[e];if(this.__mode===t)return this;const n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){it();let n=e,i=t;const s=U(),o=this.getTextContent(),a=this.__key;if(typeof o=="string"){const l=o.length;n===void 0&&(n=l),i===void 0&&(i=l)}else n=0,i=0;if(!F(s))return vp(a,n,a,i,"text","text");{const l=Br();l!==s.anchor.key&&l!==s.focus.key||Ye(a),s.setTextNodeRange(this,n,this,i)}return s}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,i){const s=this.getWritable(),o=s.__text,a=n.length;let l=e;l<0&&(l=a+l,l<0&&(l=0));const u=U();if(i&&F(u)){const d=e+a;u.setTextNodeRange(s,d,s,d)}const c=o.slice(0,l)+n+o.slice(l+t);return s.__text=c,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){it();const t=this.getLatest(),n=t.getTextContent();if(n==="")return[];const i=t.__key,s=Br(),o=n.length;e.sort((k,S)=>k-S),e.push(o);const a=[],l=e.length;for(let k=0,S=0;k<o&&S<=l;S++){const L=e[S];L>k&&(a.push(n.slice(k,L)),k=L)}const u=a.length;if(u===1)return[t];const c=a[0],d=t.getParent();let f;const h=t.getFormat(),g=t.getStyle(),m=t.__detail;let y=!1,v=null,b=null;const C=U();if(F(C)){const[k,S]=C.isBackward()?[C.focus,C.anchor]:[C.anchor,C.focus];k.type==="text"&&k.key===i&&(v=k),S.type==="text"&&S.key===i&&(b=S)}t.isSegmented()?(f=Re(c),f.__format=h,f.__style=g,f.__detail=m,y=!0):(f=t.getWritable(),f.__text=c);const T=[f];for(let k=1;k<u;k++){const S=Re(a[k]);S.__format=h,S.__style=g,S.__detail=m;const L=S.__key;s===i&&Ye(L),T.push(S)}const R=v?v.offset:null,E=b?b.offset:null;let A=0;for(const k of T){if(!v&&!b)break;const S=A+k.getTextContentSize();if(v!==null&&R!==null&&R<=S&&R>=A&&(v.set(k.getKey(),R-A,"text"),R<S&&(v=null)),b!==null&&E!==null&&E<=S&&E>=A){b.set(k.getKey(),E-A,"text");break}A=S}if(d!==null){(function(L){const q=L.getPreviousSibling(),X=L.getNextSibling();q!==null&&Bo(q),X!==null&&Bo(X)})(this);const k=d.getWritable(),S=this.getIndexWithinParent();y?(k.splice(S,0,T),this.remove()):k.splice(S,1,T),F(C)&&Lo(C,d,S,u-1)}return T}mergeWithSibling(e){const t=e===this.getPreviousSibling();t||e===this.getNextSibling()||K(50);const n=this.__key,i=e.__key,s=this.__text,o=s.length;Br()===i&&Ye(n);const a=U();if(F(a)){const d=a.anchor,f=a.focus;d!==null&&d.key===i&&bd(d,t,n,e,o),f!==null&&f.key===i&&bd(f,t,n,e,o)}const l=e.__text,u=t?l+s:s+l;this.setTextContent(u);const c=this.getWritable();return e.remove(),c}isTextEntity(){return!1}};function N2(r){return{forChild:Iu(r.style),node:null}}function M2(r){const e=r,t=e.style.fontWeight==="normal";return{forChild:Iu(e.style,t?void 0:"bold"),node:null}}const cd=new WeakMap;function O2(r){if(!ve(r))return!1;if(r.nodeName==="PRE")return!0;const e=r.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function I2(r){const e=r;r.parentElement===null&&K(129);let t=e.textContent||"";if(function(n){let i,s=n.parentNode;const o=[n];for(;s!==null&&(i=cd.get(s))===void 0&&!O2(s);)o.push(s),s=s.parentNode;const a=i===void 0?s:i;for(let l=0;l<o.length;l++)cd.set(o[l],a);return a}(e)!==null){const n=t.split(/(\r?\n|\t)/),i=[],s=n.length;for(let o=0;o<s;o++){const a=n[o];a===`
`||a===`\r
`?i.push(Dn()):a==="	"?i.push(Ds()):a!==""&&i.push(Re(a))}return{node:i}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let n=e,i=!0;for(;n!==null&&(n=dd(n,!1))!==null;){const s=n.textContent||"";if(s.length>0){/[ \t\n]$/.test(s)&&(t=t.slice(1)),i=!1;break}}i&&(t=t.slice(1))}if(t[t.length-1]===" "){let n=e,i=!0;for(;n!==null&&(n=dd(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:Re(t)}}function dd(r,e){let t=r;for(;;){let n;for(;(n=e?t.nextSibling:t.previousSibling)===null;){const s=t.parentElement;if(s===null)return null;t=s}if(t=n,ve(t)){const s=t.style.display;if(s===""&&!Rl(t)||s!==""&&!s.startsWith("inline"))return null}let i=t;for(;(i=e?t.firstChild:t.lastChild)!==null;)t=i;if(Dr(t))return t;if(t.nodeName==="BR")return null}}const R2={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function mr(r){const e=R2[r.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:Iu(r.style,e),node:null}}function Re(r=""){return Se(new At(r))}function H(r){return r instanceof At}function Iu(r,e){const t=r.fontWeight,n=r.textDecoration.split(" "),i=t==="700"||t==="bold",s=n.includes("line-through"),o=r.fontStyle==="italic",a=n.includes("underline"),l=r.verticalAlign;return u=>(H(u)&&(i&&!u.hasFormat("bold")&&u.toggleFormat("bold"),s&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),o&&!u.hasFormat("italic")&&u.toggleFormat("italic"),a&&!u.hasFormat("underline")&&u.toggleFormat("underline"),l!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),l!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),e&&!u.hasFormat(e)&&u.toggleFormat(e)),u)}let Ru=class pp extends At{static getType(){return"tab"}static clone(e){return new pp(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const t=super.createDOM(e),n=ai(e.theme,"tab");return n!==void 0&&t.classList.add(...n),t}static importJSON(e){return Ds().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&K(126),super.setTextContent(e)}setDetail(e){return e!==2&&K(127),this}setMode(e){return e!=="normal"&&K(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}};function Ds(){return Se(new Ru)}function L2(r){return r instanceof Ru}let P2=class{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:Hp(er(Jr(this,"next")),er(Jr(e,"next")))<0}getNode(){const e=me(this.key);return e===null&&K(20),e}set(e,t,n,i){const s=this._selection,o=this.key;i&&this.key===e&&this.offset===t&&this.type===n||(this.key=e,this.offset=t,this.type=n,Ii()||(Br()===o&&Ye(e),s!==null&&(s.setCachedNodes(null),s.dirty=!0)))}};function Et(r,e,t){return new P2(r,e,t)}function Va(r,e){let t=e.__key,n=r.offset,i="element";if(H(e)){i="text";const s=e.getTextContentSize();n>s&&(n=s)}else if(!P(e)){const s=e.getNextSibling();if(H(s))t=s.__key,n=0,i="text";else{const o=e.getParent();o&&(t=o.__key,n=e.getIndexWithinParent()+1)}}r.set(t,n,i)}function fd(r,e){if(P(e)){const t=e.getLastDescendant();P(t)||H(t)?Va(r,t):Va(r,e)}else Va(r,e)}let gp=class mp{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!dt(e))return!1;const t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every(i=>n.has(i))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new mp(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),n=t.length,i=t[n-1];let s;if(H(i))s=i.select();else{const o=i.getIndexWithinParent()+1;s=i.getParentOrThrow().select(o,o)}s.insertNodes(e);for(let o=0;o<n;o++)t[o].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,n=[];for(const i of t){const s=me(i);s!==null&&n.push(s)}return Ii()||(this._cachedNodes=n),n}getTextContent(){const e=this.getNodes();let t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}deleteNodes(){const e=this.getNodes();if((U()||Oi())===this&&e[0]){const t=at(e[0],"next");v0(On(t,t))}for(const t of e)t.remove()}};function F(r){return r instanceof Ns}let Ns=class yp{constructor(e,t,n,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!F(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=function(n){const i=[],[s,o]=n.getTextSlices();s&&i.push(s.caret.origin);const a=new Set,l=new Set;for(const u of n)if(rr(u)){const{origin:c}=u;i.length===0?a.add(c):(l.add(c),i.push(c))}else{const{origin:c}=u;P(c)&&l.has(c)||i.push(c)}if(o&&i.push(o.caret.origin),Nn(n.focus)&&P(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=Sr(n.focus.origin,"previous");rr(u)&&a.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(i[i.length-1]);u=Zu(u))a.delete(u.origin),i.pop();for(;i.length>1;){const u=i[i.length-1];if(!P(u)||l.has(u)||u.isEmpty()||a.has(u))break;i.pop()}if(i.length===0&&n.isCollapsed()){const u=er(n.anchor),c=er(n.anchor.getFlipped()),d=h=>wn(h)?h.origin:h.getNodeAtCaret(),f=d(u)||d(c)||(n.anchor.getNodeAtCaret()?u.origin:c.origin);i.push(f)}return i}(Jp(qd(this),"next"));return Ii()||(this._cachedNodes=t),t}setTextNodeRange(e,t,n,i){this.anchor.set(e.__key,t,"text"),this.focus.set(n.__key,i,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],n=e[e.length-1],i=this.anchor,s=this.focus,o=i.isBefore(s),[a,l]=Tl(this);let u="",c=!0;for(let d=0;d<e.length;d++){const f=e[d];if(P(f)&&!f.isInline())c||(u+=`
`),c=!f.isEmpty();else if(c=!1,H(f)){let h=f.getTextContent();f===t?f===n?i.type==="element"&&s.type==="element"&&s.offset!==i.offset||(h=a<l?h.slice(a,l):h.slice(l,a)):h=o?h.slice(a):h.slice(l):f===n&&(h=o?h.slice(0,l):h.slice(0,a)),u+=h}else!ye(f)&&!Cn(f)||f===n&&this.isCollapsed()||(u+=f.getTextContent())}return u}applyDOMRange(e){const t=Ae(),n=t.getEditorState()._selection,i=bp(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(i===null)return;const[s,o]=i;this.anchor.set(s.key,s.offset,s.type,!0),this.focus.set(o.key,o.offset,o.type,!0),hs(this)}clone(){const e=this.anchor,t=this.focus;return new yp(Et(e.key,e.offset,e.type),Et(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=Fo(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=Hr[e];return!!(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),n=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];o===`
`||o===`\r
`?n.push(Dn()):o==="	"?n.push(Ds()):n.push(Re(o))}this.insertNodes(n)}insertText(e){const t=this.anchor,n=this.focus,i=this.format,s=this.style;let o=t,a=n;!this.isCollapsed()&&n.isBefore(t)&&(o=n,a=t),o.type==="element"&&function(y,v,b,C){const T=y.getNode(),R=T.getChildAtIndex(y.offset),E=Re(),A=Xe(T)?Dt().append(E):E;E.setFormat(b),E.setStyle(C),R===null?T.append(A):R.insertBefore(A),y.is(v)&&v.set(E.__key,0,"text"),y.set(E.__key,0,"text")}(o,a,i,s),a.type==="element"&&_s(a,er(Jr(a,"next")));const l=o.offset;let u=a.offset;const c=this.getNodes(),d=c.length;let f=c[0];H(f)||K(26);const h=f.getTextContent().length,g=f.getParentOrThrow();let m=c[d-1];if(d===1&&a.type==="element"&&(u=h,a.set(o.key,u,"text")),this.isCollapsed()&&l===h&&(f.isSegmented()||f.isToken()||!f.canInsertTextAfter()||!g.canInsertTextAfter()&&f.getNextSibling()===null)){let y=f.getNextSibling();if(H(y)&&y.canInsertTextBefore()&&!ti(y)||(y=Re(),y.setFormat(i),y.setStyle(s),g.canInsertTextAfter()?f.insertAfter(y):g.insertAfter(y)),y.select(0,0),f=y,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&l===0&&(f.isSegmented()||f.isToken()||!f.canInsertTextBefore()||!g.canInsertTextBefore()&&f.getPreviousSibling()===null)){let y=f.getPreviousSibling();if(H(y)&&!ti(y)||(y=Re(),y.setFormat(i),g.canInsertTextBefore()?f.insertBefore(y):g.insertBefore(y)),y.select(),f=y,e!=="")return void this.insertText(e)}else if(f.isSegmented()&&l!==h){const y=Re(f.getTextContent());y.setFormat(i),f.replace(y),f=y}else if(!this.isCollapsed()&&e!==""){const y=m.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||P(y)&&(!y.canInsertTextBefore()||!y.canInsertTextAfter()))return this.insertText(""),_p(this.anchor,this.focus,null),void this.insertText(e)}if(d===1){if(f.isToken()){const C=Re(e);return C.select(),void f.replace(C)}const y=f.getFormat(),v=f.getStyle();if(l!==u||y===i&&v===s){if(L2(f)){const C=Re(e);return C.setFormat(i),C.setStyle(s),C.select(),void f.replace(C)}}else{if(f.getTextContent()!==""){const C=Re(e);if(C.setFormat(i),C.setStyle(s),C.select(),l===0)f.insertBefore(C,!1);else{const[T]=f.splitText(l);T.insertAfter(C,!1)}return void(C.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}f.setFormat(i),f.setStyle(s)}const b=u-l;f=f.spliceText(l,b,e,!0),f.getTextContent()===""?f.remove():this.anchor.type==="text"&&(f.isComposing()?this.anchor.offset-=e.length:(this.format=y,this.style=v))}else{const y=new Set([...f.getParentKeys(),...m.getParentKeys()]),v=P(f)?f:f.getParentOrThrow();let b=P(m)?m:m.getParentOrThrow(),C=m;if(!v.is(b)&&b.isInline())do C=b,b=b.getParentOrThrow();while(b.isInline());if(a.type==="text"&&(u!==0||m.getTextContent()==="")||a.type==="element"&&m.getIndexWithinParent()<u)if(H(m)&&!m.isToken()&&u!==m.getTextContentSize()){if(m.isSegmented()){const k=Re(m.getTextContent());m.replace(k),m=k}Xe(a.getNode())||a.type!=="text"||(m=m.spliceText(0,u,"")),y.add(m.__key)}else{const k=m.getParentOrThrow();k.canBeEmpty()||k.getChildrenSize()!==1?m.remove():k.remove()}else y.add(m.__key);const T=b.getChildren(),R=new Set(c),E=v.is(b),A=v.isInline()&&f.getNextSibling()===null?v:f;for(let k=T.length-1;k>=0;k--){const S=T[k];if(S.is(f)||P(S)&&S.isParentOf(f))break;S.isAttached()&&(!R.has(S)||S.is(C)?E||A.insertAfter(S,!1):S.remove())}if(!E){let k=b,S=null;for(;k!==null;){const L=k.getChildren(),q=L.length;(q===0||L[q-1].is(S))&&(y.delete(k.__key),S=k),k=k.getParent()}}if(f.isToken())if(l===h)f.select();else{const k=Re(e);k.select(),f.replace(k)}else f=f.spliceText(l,h-l,e,!0),f.getTextContent()===""?f.remove():f.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let k=1;k<d;k++){const S=c[k],L=S.__key;y.has(L)||S.remove()}}}removeText(){const e=U()===this;mo(this,C0(qd(this))),e&&U()!==this&&tt(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void Ye(null);const n=this.getNodes(),i=[];for(const T of n)H(T)&&i.push(T);const s=T=>{n.forEach(R=>{if(P(R)){const E=R.getFormatFlags(e,T);R.setTextFormat(E)}})},o=i.length;if(o===0)return this.toggleFormat(e),Ye(null),void s(t);const a=this.anchor,l=this.focus,u=this.isBackward(),c=u?l:a,d=u?a:l;let f=0,h=i[0],g=c.type==="element"?0:c.offset;if(c.type==="text"&&g===h.getTextContentSize()&&(f=1,h=i[1],g=0),h==null)return;const m=h.getFormatFlags(e,t);s(m);const y=o-1;let v=i[y];const b=d.type==="text"?d.offset:v.getTextContentSize();if(h.is(v)){if(g===b)return;if(ti(h)||g===0&&b===h.getTextContentSize())h.setFormat(m);else{const T=h.splitText(g,b),R=g===0?T[0]:T[1];R.setFormat(m),c.type==="text"&&c.set(R.__key,0,"text"),d.type==="text"&&d.set(R.__key,b-g,"text")}return void(this.format=m)}g===0||ti(h)||([,h]=h.splitText(g),g=0),h.setFormat(m);const C=v.getFormatFlags(e,m);b>0&&(b===v.getTextContentSize()||ti(v)||([v]=v.splitText(b)),v.setFormat(C));for(let T=f+1;T<y;T++){const R=i[T],E=R.getFormatFlags(e,C);R.setFormat(E)}c.type==="text"&&c.set(h.__key,g,"text"),d.type==="text"&&d.set(v.__key,b,"text"),this.format=m|C}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const g=U();return F(g)||K(134),g.insertNodes(e)}const t=(this.isBackward()?this.focus:this.anchor).getNode(),n=Xa(t,Bt),i=e[e.length-1];if(P(n)&&"__language"in n){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const g=Ka(this);n.splice(g,0,e),i.selectEnd()}return}if(!e.some(g=>(P(g)||ye(g))&&!g.isInline())){P(n)||K(211,t.constructor.name,t.getType());const g=Ka(this);return n.splice(g,0,e),void i.selectEnd()}const s=function(g){const m=Dt();let y=null;for(let v=0;v<g.length;v++){const b=g[v],C=Cn(b);if(C||ye(b)&&b.isInline()||P(b)&&b.isInline()||H(b)||b.isParentRequired()){if(y===null&&(y=b.createParentElementNode(),m.append(y),C))continue;y!==null&&y.append(b)}else m.append(b),y=null}return m}(e),o=s.getLastDescendant(),a=s.getChildren(),l=!P(n)||!n.isEmpty()?this.insertParagraph():null,u=a[a.length-1];let c=a[0];var d;P(d=c)&&Bt(d)&&!d.isEmpty()&&P(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(P(n)||K(211,t.constructor.name,t.getType()),n.append(...c.getChildren()),c=a[1]),c&&(n===null&&K(212,t.constructor.name,t.getType()),function(g,m,y){const v=m.getParentOrThrow().getLastChild();let b=m;const C=[m];for(;b!==v;)b.getNextSibling()||K(140),b=b.getNextSibling(),C.push(b);let T=g;for(const R of C)T=T.insertAfter(R)}(n,c));const f=Xa(o,Bt);l&&P(f)&&(l.canMergeWhenEmpty()||Bt(u))&&(f.append(...l.getChildren()),l.remove()),P(n)&&n.isEmpty()&&n.remove(),o.selectEnd();const h=P(n)?n.getLastChild():null;Cn(h)&&f!==n&&h.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=Dt();return ke().splice(this.anchor.offset,0,[o]),o.select(),o}const e=Ka(this),t=Xa(this.anchor.getNode(),Bt);P(t)||K(213);const n=t.getChildAtIndex(e),i=n?[n,...n.getNextSiblings()]:[],s=t.insertNewAfter(this,!1);return s?(s.append(...i),s.selectStart(),s):null}insertLineBreak(e){const t=Dn();if(this.insertNodes([t]),e){const n=t.getParentOrThrow(),i=t.getIndexWithinParent();n.select(i,i)}}extract(){const e=this.getNodes(),t=e.length,n=t-1,i=this.anchor,s=this.focus;let o=e[0],a=e[n];const[l,u]=Tl(this);if(t===0)return[];if(t===1){if(H(o)&&!this.isCollapsed()){const d=l>u?u:l,f=l>u?l:u,h=o.splitText(d,f),g=d===0?h[0]:h[1];return g!=null?[g]:[]}return[o]}const c=i.isBefore(s);if(H(o)){const d=c?l:u;d===o.getTextContentSize()?e.shift():d!==0&&([,o]=o.splitText(d),e[0]=o)}if(H(a)){const d=a.getTextContent().length,f=c?u:l;f===0?e.pop():f!==d&&([a]=a.splitText(f),e[n]=a)}return e}modify(e,t,n){if(vd(this,e,t,n))return;const i=e==="move",s=Ae(),o=jt(Lt(s));if(!o)return;const a=s._blockCursorElement,l=s._rootElement,u=this.focus.getNode();if(l===null||a===null||!P(u)||u.isInline()||u.canBeEmpty()||Ol(a,s,l),this.dirty){let c=_i(s,this.anchor.key),d=_i(s,this.focus.key);this.anchor.type==="text"&&(c=yi(c)),this.focus.type==="text"&&(d=yi(d)),c&&d&&Ep(o,c,this.anchor.offset,d,this.focus.offset)}if(function(c,d,f,h){c.modify(d,f,h)}(o,e,t?"backward":"forward",n),o.rangeCount>0){const c=o.getRangeAt(0),d=this.anchor.getNode(),f=Xe(d)?d:i0(d);if(this.applyDOMRange(c),this.dirty=!0,!i){const h=this.getNodes(),g=[];let m=!1;for(let y=0;y<h.length;y++){const v=h[y];Ml(v,f)?g.push(v):m=!0}if(m&&g.length>0)if(t){const y=g[0];P(y)?y.selectStart():y.getParentOrThrow().selectStart()}else{const y=g[g.length-1];P(y)?y.selectEnd():y.getParentOrThrow().selectEnd()}o.anchorNode===c.startContainer&&o.anchorOffset===c.startOffset||function(y){const v=y.focus,b=y.anchor,C=b.key,T=b.offset,R=b.type;b.set(v.key,v.offset,v.type,!0),v.set(C,T,R,!0)}(this)}}n==="lineboundary"&&vd(this,e,t,n,"decorators")}forwardDeletion(e,t,n){if(!n&&(e.type==="element"&&P(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const i=t.getParent(),s=t.getNextSibling()||(i===null?null:i.getNextSibling());if(P(s)&&s.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let i=n.getNode();if(this.forwardDeletion(n,i,e))return;const s=ec(Jr(n,e?"previous":"next"));if(s.getTextSlices().every(a=>a===null||a.distance===0)){let a={type:"initial"};for(const l of s.iterNodeCarets("shadowRoot"))if(rr(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(a.type==="merge-block")break;if(P(s.anchor.origin)&&s.anchor.origin.isEmpty()){const u=er(l);mo(this,On(u,u)),s.anchor.origin.remove()}return}a.type!=="merge-next-block"&&a.type!=="merge-block"||(a={block:a.block,caret:l,type:"merge-block"})}}else{if(a.type==="merge-block")break;if(Nn(l)){if(P(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(s.anchor.origin))break}else a={block:l.origin,type:"merge-next-block"};continue}if(ye(l.origin)){if(!l.origin.isIsolated())if(a.type==="merge-next-block"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&P(s.anchor.origin)&&s.anchor.origin.isEmpty()){s.anchor.origin.remove();const u=Cp();u.add(l.origin.getKey()),tt(u)}else l.origin.remove();return}break}}if(a.type==="merge-block"){const{caret:l,block:u}=a;return mo(this,On(!l.origin.isEmpty()&&u.isEmpty()?rc(at(u,l.direction)):s.anchor,l)),this.removeText()}}const o=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&n.offset===0&&pd(this,n.getNode()))return}else{const a=o.type==="text"?o.getNode():null;if(i=n.type==="text"?n.getNode():null,a!==null&&a.isSegmented()){const l=o.offset,u=a.getTextContentSize();if(a.is(i)||e&&l!==u||!e&&l!==0)return void gd(a,e,l)}else if(i!==null&&i.isSegmented()){const l=n.offset,u=i.getTextContentSize();if(i.is(a)||e&&l!==0||!e&&l!==u)return void gd(i,e,l)}(function(l,u){const c=l.anchor,d=l.focus,f=c.getNode(),h=d.getNode();if(f===h&&c.type==="text"&&d.type==="text"){const g=c.offset,m=d.offset,y=g<m,v=y?g:m,b=y?m:g,C=b-1;v!==C&&function(T){return!(Pp(T)||F2(T))}(f.getTextContent().slice(v,b))&&(u?d.set(d.key,C,d.type):c.set(c.key,C,c.type))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&Xe(n.getParent())&&n.getPreviousSibling()===null&&pd(this,n)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}};function dt(r){return r instanceof gp}function hd(r){const e=r.offset;if(r.type==="text")return e;const t=r.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function Tl(r){const e=r.getStartEndPoints();if(e===null)return[0,0];const[t,n]=e;return t.type==="element"&&n.type==="element"&&t.key===n.key&&t.offset===n.offset?[0,0]:[hd(t),hd(n)]}function pd(r,e){for(let t=e;t;t=t.getParent()){if(P(t)){if(t.collapseAtStart(r))return!0;if(ur(t))break}if(t.getPreviousSibling())break}return!1}const F2=(()=>{try{const r=new RegExp("\\p{Emoji}","u"),e=r.test.bind(r);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch{}return()=>!1})();function gd(r,e,t){const n=r,i=n.getTextContent().split(/(?=\s)/g),s=i.length;let o=0,a=0;for(let u=0;u<s;u++){const c=u===s-1;if(a=o,o+=i[u].length,e&&o===t||o>t||c){i.splice(u,1),c&&(a=void 0);break}}const l=i.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(a,a))}function md(r,e,t,n){let i,s=e;if(ve(r)){let o=!1;const a=r.childNodes,l=a.length,u=n._blockCursorElement;s===l&&(o=!0,s=l-1);let c=a[s],d=!1;if(c===u)c=a[s+1],d=!0;else if(u!==null){const f=u.parentNode;r===f&&e>Array.prototype.indexOf.call(f.children,u)&&s--}if(i=ii(c),H(i))s=Nd(i,o);else{let f=ii(r);if(f===null)return null;if(P(f)){const h=n.getElementByKey(f.getKey());h===null&&K(214),[f,s]=f.getDOMSlot(h).resolveChildIndex(f,h,r,e),P(f)||K(215),o&&s>=f.getChildrenSize()&&(s=Math.max(0,f.getChildrenSize()-1));let m=f.getChildAtIndex(s);if(P(m)&&function(y,v,b){const C=y.getParent();return b===null||C===null||!C.canBeEmpty()||C!==b.getNode()}(m,0,t)){const y=o?m.getLastDescendant():m.getFirstDescendant();y===null?f=m:(m=y,f=P(m)?m:m.getParentOrThrow()),s=0}H(m)?(i=m,f=null,s=Nd(m,o)):m!==f&&o&&!d&&(P(f)||K(216),s=Math.min(f.getChildrenSize(),s+1))}else{const h=f.getIndexWithinParent();s=e===0&&ye(f)&&ii(r)===f?h:h+1,f=f.getParentOrThrow()}if(P(f))return Et(f.__key,s,"element")}}else i=ii(r);return H(i)?Et(i.__key,s,"text"):null}function yd(r,e,t){const n=r.offset,i=r.getNode();if(n===0){const s=i.getPreviousSibling(),o=i.getParent();if(e){if((t||!e)&&s===null&&P(o)&&o.isInline()){const a=o.getPreviousSibling();H(a)&&r.set(a.__key,a.getTextContent().length,"text")}}else P(s)&&!t&&s.isInline()?r.set(s.__key,s.getChildrenSize(),"element"):H(s)&&r.set(s.__key,s.getTextContent().length,"text")}else if(n===i.getTextContent().length){const s=i.getNextSibling(),o=i.getParent();if(e&&P(s)&&s.isInline())r.set(s.__key,0,"element");else if((t||e)&&s===null&&P(o)&&o.isInline()&&!o.canInsertTextAfter()){const a=o.getNextSibling();H(a)&&r.set(a.__key,0,"text")}}}function _p(r,e,t){if(r.type==="text"&&e.type==="text"){const n=r.isBefore(e),i=r.is(e);yd(r,n,i),yd(e,!n,i),i&&e.set(r.key,r.offset,r.type);const s=Ae();if(s.isComposing()&&s._compositionKey!==r.key&&F(t)){const o=t.anchor,a=t.focus;r.set(o.key,o.offset,o.type,!0),e.set(a.key,a.offset,a.type,!0)}}}function bp(r,e,t,n,i,s){if(r===null||t===null||!Os(i,r,t))return null;const o=md(r,e,F(s)?s.anchor:null,i);if(o===null)return null;const a=md(t,n,F(s)?s.focus:null,i);if(a===null)return null;if(o.type==="element"&&a.type==="element"){const l=ii(r),u=ii(t);if(ye(l)&&ye(u))return null}return _p(o,a,s),[o,a]}function Al(r){return P(r)&&!r.isInline()}function vp(r,e,t,n,i,s){const o=tn(),a=new Ns(Et(r,e,i),Et(t,n,s),0,"");return a.dirty=!0,o._selection=a,a}function Ms(){const r=Et("root",0,"element"),e=Et("root",0,"element");return new Ns(r,e,0,"")}function Cp(){return new gp(new Set)}function Lu(r,e,t,n){const i=t._window;if(i===null)return null;const s=n||i.event,o=s?s.type:void 0,a=o==="selectionchange",l=!gl&&(a||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&s&&s.detail===3||o==="drop"||o===void 0);let u,c,d,f;if(F(r)&&!l)return r.clone();if(e===null)return null;if(u=e.anchorNode,c=e.focusNode,d=e.anchorOffset,f=e.focusOffset,a&&F(r)&&!Os(t,u,c))return r.clone();const h=bp(u,d,c,f,t,r);if(h===null)return null;const[g,m]=h;return new Ns(g,m,F(r)?r.format:0,F(r)?r.style:"")}function U(){return tn()._selection}function Oi(){return Ae()._editorState._selection}function Lo(r,e,t,n=1){const i=r.anchor,s=r.focus,o=i.getNode(),a=s.getNode();if(!e.is(o)&&!e.is(a))return;const l=e.__key;if(r.isCollapsed()){const u=i.offset;if(t<=u&&n>0||t<u&&n<0){const c=Math.max(0,u+n);i.set(l,c,"element"),s.set(l,c,"element"),_d(r)}}else{const u=r.isBackward(),c=u?s:i,d=c.getNode(),f=u?i:s,h=f.getNode();if(e.is(d)){const g=c.offset;(t<=g&&n>0||t<g&&n<0)&&c.set(l,Math.max(0,g+n),"element")}if(e.is(h)){const g=f.offset;(t<=g&&n>0||t<g&&n<0)&&f.set(l,Math.max(0,g+n),"element")}}_d(r)}function _d(r){const e=r.anchor,t=e.offset,n=r.focus,i=n.offset,s=e.getNode(),o=n.getNode();if(r.isCollapsed()){if(!P(s))return;const a=s.getChildrenSize(),l=t>=a,u=l?s.getChildAtIndex(a-1):s.getChildAtIndex(t);if(H(u)){let c=0;l&&(c=u.getTextContentSize()),e.set(u.__key,c,"text"),n.set(u.__key,c,"text")}}else{if(P(s)){const a=s.getChildrenSize(),l=t>=a,u=l?s.getChildAtIndex(a-1):s.getChildAtIndex(t);if(H(u)){let c=0;l&&(c=u.getTextContentSize()),e.set(u.__key,c,"text")}}if(P(o)){const a=o.getChildrenSize(),l=i>=a,u=l?o.getChildAtIndex(a-1):o.getChildAtIndex(i);if(H(u)){let c=0;l&&(c=u.getTextContentSize()),n.set(u.__key,c,"text")}}}}function Po(r,e,t,n,i){let s=null,o=0,a=null;n!==null?(s=n.__key,H(n)?(o=n.getTextContentSize(),a="text"):P(n)&&(o=n.getChildrenSize(),a="element")):i!==null&&(s=i.__key,H(i)?a="text":P(i)&&(a="element")),s!==null&&a!==null?r.set(s,o,a):(o=e.getIndexWithinParent(),o===-1&&(o=t.getChildrenSize()),r.set(t.__key,o,"element"))}function bd(r,e,t,n,i){r.type==="text"?r.set(t,r.offset+(e?0:i),"text"):r.offset>n.getIndexWithinParent()&&r.set(r.key,r.offset-1,"element")}function Ep(r,e,t,n,i){try{r.setBaseAndExtent(e,t,n,i)}catch{}}function B2(r,e,t,n,i,s,o){const a=n.anchorNode,l=n.focusNode,u=n.anchorOffset,c=n.focusOffset,d=document.activeElement;if(i.has(z2)&&d!==s||d!==null&&Uu(d))return;if(!F(e))return void(r!==null&&Os(t,a,l)&&n.removeAllRanges());const f=e.anchor,h=e.focus,g=f.key,m=h.key,y=_i(t,g),v=_i(t,m),b=f.offset,C=h.offset,T=e.format,R=e.style,E=e.isCollapsed();let A=y,k=v,S=!1;if(f.type==="text"){A=yi(y);const O=f.getNode();S=O.getFormat()!==T||O.getStyle()!==R}else F(r)&&r.anchor.type==="text"&&(S=!0);var L,q,X,j,G;if(h.type==="text"&&(k=yi(v)),A!==null&&k!==null&&(E&&(r===null||S||F(r)&&(r.format!==T||r.style!==R))&&(L=T,q=R,X=b,j=g,G=performance.now(),sp=[L,q,X,j,G]),u!==b||c!==C||a!==A||l!==k||n.type==="Range"&&E||(d!==null&&s.contains(d)||s.focus({preventScroll:!0}),f.type==="element"))){if(Ep(n,A,b,k,C),!i.has(H2)&&e.isCollapsed()&&s!==null&&s===document.activeElement){const O=F(e)&&e.anchor.type==="element"?A.childNodes[b]||null:n.rangeCount>0?n.getRangeAt(0):null;if(O!==null){let B;if(O instanceof Text){const z=document.createRange();z.selectNode(O),B=z.getBoundingClientRect()}else B=O.getBoundingClientRect();(function(z,$,V){const W=$p(V),Y=Ju(W);if(W===null||Y===null)return;let{top:se,bottom:te}=$,Q=0,Z=0,ne=V;for(;ne!==null;){const ue=ne===W.body;if(ue)Q=0,Z=Lt(z).innerHeight;else{const De=ne.getBoundingClientRect();Q=De.top,Z=De.bottom}let Ee=0;if(se<Q?Ee=-(Q-se):te>Z&&(Ee=te-Z),Ee!==0)if(ue)Y.scrollBy(0,Ee);else{const De=ne.scrollTop;ne.scrollTop+=Ee;const Ne=ne.scrollTop-De;se-=Ne,te-=Ne}if(ue)break;ne=Is(ne)}})(t,B,s)}}xl=!0}}function q2(r){let e=U()||Oi();e===null&&(e=ke().selectEnd()),e.insertNodes(r)}function Ka(r){let e=r;r.isCollapsed()||e.removeText();const t=U();F(t)&&(e=t),F(e)||K(161);const n=e.anchor;let i=n.getNode(),s=n.offset;for(;!Bt(i);){const o=i;if([i,s]=j2(i,s),o.is(i))break}return s}function j2(r,e){const t=r.getParent();if(!t){const i=Dt();return ke().append(i),i.select(),[ke(),0]}if(H(r)){const i=r.splitText(e);if(i.length===0)return[t,r.getIndexWithinParent()];const s=e===0?0:1;return[t,i[0].getIndexWithinParent()+s]}if(!P(r)||e===0)return[t,r.getIndexWithinParent()];const n=r.getChildAtIndex(e);if(n){const i=new Ns(Et(r.__key,e,"element"),Et(r.__key,e,"element"),0,""),s=r.insertNewAfter(i);s&&s.append(n,...n.getNextSiblings())}return[t,r.getIndexWithinParent()+1]}function vd(r,e,t,n,i="decorators-and-blocks"){if(e==="move"&&n==="character"&&!r.isCollapsed()){const[c,d]=t===r.isBackward()?[r.focus,r.anchor]:[r.anchor,r.focus];return d.set(c.key,c.offset,c.type),!0}const s=Jr(r.focus,t?"previous":"next"),o=n==="lineboundary",a=e==="move";let l=s,u=i==="decorators-and-blocks";if(!Kp(l)){for(const c of l){u=!1;const{origin:d}=c;if(!ye(d)||d.isIsolated()||(l=c,!o||!d.isInline()))break}if(u)for(const c of ec(s).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(rr(c))c.origin.isInline()||(l=c);else{if(P(c.origin))continue;ye(c.origin)&&!c.origin.isInline()&&(l=c)}break}}if(l===s)return!1;if(a&&!o&&ye(l.origin)&&l.origin.isKeyboardSelectable()){const c=Cp();return c.add(l.origin.getKey()),tt(c),!0}return l=er(l),a&&_s(r.anchor,l),_s(r.focus,l),u||!o}let ze=null,He=null,Ct=!1,Ja=!1,ho=0;const Cd={characterData:!0,childList:!0,subtree:!0};function Ii(){return Ct||ze!==null&&ze._readOnly}function it(){Ct&&K(13)}function wp(){ho>99&&K(14)}function tn(){return ze===null&&K(195,xp()),ze}function Ae(){return He===null&&K(196,xp()),He}function xp(){let r=0;const e=new Set,t=ya.version;if(typeof window<"u")for(const i of document.querySelectorAll("[contenteditable]")){const s=_a(i);if(Wu(s))r++;else if(s){let o=String(s.constructor.version||"<0.17.1");o===t&&(o+=" (separately built, likely a bundler configuration issue)"),e.add(o)}}let n=` Detected on the page: ${r} compatible editor(s) with version ${t}`;return e.size&&(n+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),n}function $2(){return He}function Ed(r,e,t){const n=e.__type,i=function(a,l){const u=a._nodes.get(l);return u===void 0&&K(30,l),u}(r,n);let s=t.get(n);s===void 0&&(s=Array.from(i.transforms),t.set(n,s));const o=s.length;for(let a=0;a<o&&(s[a](e),e.isAttached());a++);}function wd(r,e){return r!==void 0&&r.__key!==e&&r.isAttached()}function kp(r,e){if(!e)return;const t=r._updateTags;let n=e;Array.isArray(e)||(n=[e]);for(const i of n)t.add(i)}function Sp(r){return Pu(r,Ae()._nodes)}function Pu(r,e){const t=r.type,n=e.get(t);n===void 0&&K(17,t);const i=n.klass;r.type!==i.getType()&&K(18,i.name);const s=i.importJSON(r),o=r.children;if(P(s)&&Array.isArray(o))for(let a=0;a<o.length;a++){const l=Pu(o[a],e);s.append(l)}return s}function xd(r,e,t){const n=ze,i=Ct,s=He;ze=e,Ct=!0,He=r;try{return t()}finally{ze=n,Ct=i,He=s}}function vr(r,e){const t=r._pendingEditorState,n=r._rootElement,i=r._headless||n===null;if(t===null)return;const s=r._editorState,o=s._selection,a=t._selection,l=r._dirtyType!==Tn,u=ze,c=Ct,d=He,f=r._updating,h=r._observer;let g=null;if(r._pendingEditorState=null,r._editorState=t,!i&&l&&h!==null){He=r,ze=t,Ct=!1,r._updating=!0;try{const E=r._dirtyType,A=r._dirtyElements,k=r._dirtyLeaves;h.disconnect(),g=y2(s,t,r,E,A,k)}catch(E){if(E instanceof Error&&r._onError(E),Ja)throw E;return Mp(r,null,n,t),Hh(r),r._dirtyType=hi,Ja=!0,vr(r,s),void(Ja=!1)}finally{h.observe(n,Cd),r._updating=f,ze=u,Ct=c,He=d}}t._readOnly||(t._readOnly=!0);const m=r._dirtyLeaves,y=r._dirtyElements,v=r._normalizedNodes,b=r._updateTags,C=r._deferred;l&&(r._dirtyType=Tn,r._cloneNotNeeded.clear(),r._dirtyLeaves=new Set,r._dirtyElements=new Map,r._normalizedNodes=new Set,r._updateTags=new Set),function(E,A){const k=E._decorators;let S=E._pendingDecorators||k;const L=A._nodeMap;let q;for(q in S)L.has(q)||(S===k&&(S=Rp(E)),delete S[q])}(r,t);const T=i?null:jt(Lt(r));if(r._editable&&T!==null&&(l||a===null||a.dirty)&&n!==null&&!b.has(V2)){He=r,ze=t;try{if(h!==null&&h.disconnect(),l||a===null||a.dirty){const E=r._blockCursorElement;E!==null&&Ol(E,r,n),B2(o,a,r,T,b,n)}(function(E,A,k){let S=E._blockCursorElement;if(F(k)&&k.isCollapsed()&&k.anchor.type==="element"&&A.contains(document.activeElement)){const L=k.anchor,q=L.getNode(),X=L.offset;let j=!1,G=null;if(X===q.getChildrenSize())Ya(q.getChildAtIndex(X-1))&&(j=!0);else{const O=q.getChildAtIndex(X);if(O!==null&&Ya(O)){const B=O.getPreviousSibling();(B===null||Ya(B))&&(j=!0,G=E.getElementByKey(O.__key))}}if(j){const O=E.getElementByKey(q.__key);return S===null&&(E._blockCursorElement=S=function(B){const z=B.theme,$=document.createElement("div");$.contentEditable="false",$.setAttribute("data-lexical-cursor","true");let V=z.blockCursor;if(V!==void 0){if(typeof V=="string"){const W=So(V);V=z.blockCursor=W}V!==void 0&&$.classList.add(...V)}return $}(E._config)),A.style.caretColor="transparent",void(G===null?O.appendChild(S):O.insertBefore(S,G))}}S!==null&&Ol(S,E,A)})(r,n,a)}finally{h!==null&&h.observe(n,Cd),He=d,ze=u}}g!==null&&function(E,A,k,S,L){const q=Array.from(E._listeners.mutation),X=q.length;for(let j=0;j<X;j++){const[G,O]=q[j],B=A.get(O);B!==void 0&&G(B,{dirtyLeaves:S,prevEditorState:L,updateTags:k})}}(r,g,b,m,s),F(a)||a===null||o!==null&&o.is(a)||r.dispatchCommand(Di,void 0);const R=r._pendingDecorators;R!==null&&(r._decorators=R,r._pendingDecorators=null,as("decorator",r,!0,R)),function(E,A,k){const S=Dd(A),L=Dd(k);S!==L&&as("textcontent",E,!0,L)}(r,e||s,t),as("update",r,!0,{dirtyElements:y,dirtyLeaves:m,editorState:t,mutatedNodes:g,normalizedNodes:v,prevEditorState:e||s,tags:b}),function(E,A){if(E._deferred=[],A.length!==0){const k=E._updating;E._updating=!0;try{for(let S=0;S<A.length;S++)A[S]()}finally{E._updating=k}}}(r,C),function(E){const A=E._updates;if(A.length!==0){const k=A.shift();if(k){const[S,L]=k;Fu(E,S,L)}}}(r)}function as(r,e,t,...n){const i=e._updating;e._updating=t;try{const s=Array.from(e._listeners[r]);for(let o=0;o<s.length;o++)s[o].apply(null,n)}finally{e._updating=i}}function kd(r,e){const t=r._updates;let n=e||!1;for(;t.length!==0;){const i=t.shift();if(i){const[s,o]=i;let a;if(o!==void 0){if(a=o.onUpdate,o.skipTransforms&&(n=!0),o.discrete){const l=r._pendingEditorState;l===null&&K(191),l._flushSync=!0}a&&r._deferred.push(a),kp(r,o.tag)}s()}}return n}function Fu(r,e,t){const n=r._updateTags;let i,s=!1,o=!1;t!==void 0&&(i=t.onUpdate,kp(r,t.tag),s=t.skipTransforms||!1,o=t.discrete||!1),i&&r._deferred.push(i);const a=r._editorState;let l=r._pendingEditorState,u=!1;(l===null||l._readOnly)&&(l=r._pendingEditorState=Ap(l||a),u=!0),l._flushSync=o;const c=ze,d=Ct,f=He,h=r._updating;ze=l,Ct=!1,r._updating=!0,He=r;const g=r._headless||r.getRootElement()===null;try{u&&(g?a._selection!==null&&(l._selection=a._selection.clone()):l._selection=function(b,C){const T=b.getEditorState()._selection,R=jt(Lt(b));return F(T)||T==null?Lu(T,R,b,C):T.clone()}(r,t&&t.event||null));const y=r._compositionKey;e(),s=kd(r,s),function(b,C){const T=C.getEditorState()._selection,R=b._selection;if(F(R)){const E=R.anchor,A=R.focus;let k;if(E.type==="text"&&(k=E.getNode(),k.selectionTransform(T,R)),A.type==="text"){const S=A.getNode();k!==S&&S.selectionTransform(T,R)}}}(l,r),r._dirtyType!==Tn&&(s?function(b,C){const T=C._dirtyLeaves,R=b._nodeMap;for(const E of T){const A=R.get(E);H(A)&&A.isAttached()&&A.isSimpleText()&&!A.isUnmergeable()&&td(A)}}(l,r):function(b,C){const T=C._dirtyLeaves,R=C._dirtyElements,E=b._nodeMap,A=Br(),k=new Map;let S=T,L=S.size,q=R,X=q.size;for(;L>0||X>0;){if(L>0){C._dirtyLeaves=new Set;for(const j of S){const G=E.get(j);H(G)&&G.isAttached()&&G.isSimpleText()&&!G.isUnmergeable()&&td(G),G!==void 0&&wd(G,A)&&Ed(C,G,k),T.add(j)}if(S=C._dirtyLeaves,L=S.size,L>0){ho++;continue}}C._dirtyLeaves=new Set,C._dirtyElements=new Map,q.delete("root")&&q.set("root",!0);for(const j of q){const G=j[0],O=j[1];if(R.set(G,O),!O)continue;const B=E.get(G);B!==void 0&&wd(B,A)&&Ed(C,B,k)}S=C._dirtyLeaves,L=S.size,q=C._dirtyElements,X=q.size,ho++}C._dirtyLeaves=T,C._dirtyElements=R}(l,r),kd(r),function(b,C,T,R){const E=b._nodeMap,A=C._nodeMap,k=[];for(const[S]of R){const L=A.get(S);L!==void 0&&(L.isAttached()||(P(L)&&Uh(L,S,E,A,k,R),E.has(S)||R.delete(S),k.push(S)))}for(const S of k)A.delete(S);for(const S of T){const L=A.get(S);L===void 0||L.isAttached()||(E.has(S)||T.delete(S),A.delete(S))}}(a,l,r._dirtyLeaves,r._dirtyElements)),y!==r._compositionKey&&(l._flushSync=!0);const v=l._selection;if(F(v)){const b=l._nodeMap,C=v.anchor.key,T=v.focus.key;b.get(C)!==void 0&&b.get(T)!==void 0||K(19)}else dt(v)&&v._nodes.size===0&&(l._selection=null)}catch(y){return y instanceof Error&&r._onError(y),r._pendingEditorState=a,r._dirtyType=hi,r._cloneNotNeeded.clear(),r._dirtyLeaves=new Set,r._dirtyElements.clear(),void vr(r)}finally{ze=c,Ct=d,He=f,r._updating=h,ho=0}r._dirtyType!==Tn||r._deferred.length>0||function(y,v){const b=v.getEditorState()._selection,C=y._selection;if(C!==null){if(C.dirty||!C.is(b))return!0}else if(b!==null)return!0;return!1}(l,r)?l._flushSync?(l._flushSync=!1,vr(r)):u&&Y2(()=>{vr(r)}):(l._flushSync=!1,u&&(n.clear(),r._deferred=[],r._pendingEditorState=null))}function St(r,e,t){He===r&&t===void 0?e():Fu(r,e,t)}let U2=class po{constructor(e,t,n){this.element=e,this.before=t||null,this.after=n||null}withBefore(e){return new po(this.element,e,this.after)}withAfter(e){return new po(this.element,this.before,e)}withElement(e){return this.element===e?this:new po(e,this.before,this.after)}insertChild(e){const t=this.before||this.getManagedLineBreak();return t!==null&&t.parentElement!==this.element&&K(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&K(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&K(224),this.element.replaceChild(e,t),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const t=e==="decorator"&&(fi||fs);this.insertManagedLineBreak(t)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const t=this.element,n=e.nodeName==="IMG"?e.nextSibling:null;n&&t.removeChild(n),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const t=this.getManagedLineBreak();if(t){if(e===(t.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,i=this.before,s=document.createElement("br");if(n.insertBefore(s,i),e){const o=document.createElement("img");o.setAttribute("data-lexical-linebreak","true"),o.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",o.alt="",n.insertBefore(o,s),n.__lexicalLineBreak=o}else n.__lexicalLineBreak=s}getFirstChildOffset(){let e=0;for(let t=this.after;t!==null;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,n,i){if(n===this.element){const l=this.getFirstChildOffset();return[e,Math.min(l+e.getChildrenSize(),Math.max(l,i))]}const s=Sd(t,n);s.push(i);const o=Sd(t,this.element);let a=e.getIndexWithinParent();for(let l=0;l<o.length;l++){const u=s[l],c=o[l];if(u===void 0||u<c)break;if(u>c){a+=1;break}}return[e.getParentOrThrow(),a]}};function Sd(r,e){const t=[];let n=e;for(;n!==r&&n!==null;n=e.parentNode){let i=0;for(let s=n.previousSibling;s!==null;s=s.previousSibling)i++;t.push(i)}return n!==r&&K(225),t.reverse()}let yt=class extends pa{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__first=e.__first,this.__last=e.__last,this.__size=e.__size,this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return i2[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=Ae()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return t!==null&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;t!==null;){if(H(t)&&e.push(t),P(t)){const n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;P(e);){const t=e.getFirstChild();if(t===null)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;P(e);){const t=e.getLastChild();if(t===null)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),n=t.length;if(e>=n){const s=t[n-1];return P(s)&&s.getLastDescendant()||s||null}const i=t[e];return P(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:me(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&K(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:me(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&K(96,this.__key),e}getChildAtIndex(e){const t=this.getChildrenSize();let n,i;if(e<t/2){for(n=this.getFirstChild(),i=0;n!==null&&i<=e;){if(i===e)return n;n=n.getNextSibling(),i++}return null}for(n=this.getLastChild(),i=t-1;n!==null&&i>=e;){if(i===e)return n;n=n.getPreviousSibling(),i--}return null}getTextContent(){let e="";const t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){const s=t[i];e+=s.getTextContent(),P(s)&&i!==n-1&&!s.isInline()&&(e+=kr)}return e}getTextContentSize(){let e=0;const t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){const s=t[i];e+=s.getTextContentSize(),P(s)&&i!==n-1&&!s.isInline()&&(e+=kr.length)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==""){const t=Qc[e];return!!(this.getFormat()&t)}return!1}hasTextFormat(e){const t=Hr[e];return!!(this.getTextFormat()&t)}getFormatFlags(e,t){return Fo(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){it();const n=U();let i=e,s=t;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&t===0){const l=this.getFirstChild();if(H(l)||P(l))return l.select(0,0)}else if(!(e!==void 0&&e!==o||t!==void 0&&t!==o)){const l=this.getLastChild();if(H(l)||P(l))return l.select()}}i===void 0&&(i=o),s===void 0&&(s=o);const a=this.__key;return F(n)?(n.anchor.set(a,i,"element"),n.focus.set(a,s,"element"),n.dirty=!0,n):vp(a,i,a,s,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(t=>t.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=e!==""?Qc[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){const t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){const i=n.length,s=this.getChildrenSize(),o=this.getWritable();e+t<=s||K(226,String(e),String(t),String(s));const a=o.__key,l=[],u=[],c=this.getChildAtIndex(e+t);let d=null,f=s-t+i;if(e!==0)if(e===s)d=this.getLastChild();else{const g=this.getChildAtIndex(e);g!==null&&(d=g.getPreviousSibling())}if(t>0){let g=d===null?this.getFirstChild():d.getNextSibling();for(let m=0;m<t;m++){g===null&&K(100);const y=g.getNextSibling(),v=g.__key;En(g.getWritable()),u.push(v),g=y}}let h=d;for(let g=0;g<i;g++){const m=n[g];h!==null&&m.is(h)&&(d=h=h.getPreviousSibling());const y=m.getWritable();y.__parent===a&&f--,En(y);const v=m.__key;if(h===null)o.__first=v,y.__prev=null;else{const b=h.getWritable();b.__next=v,y.__prev=b.__key}m.__key===a&&K(76),y.__parent=a,l.push(v),h=m}if(e+t===s)h!==null&&(h.getWritable().__next=null,o.__last=h.__key);else if(c!==null){const g=c.getWritable();if(h!==null){const m=h.getWritable();g.__prev=h.__key,m.__next=c.__key}else g.__prev=null}if(o.__size=f,u.length){const g=U();if(F(g)){const m=new Set(u),y=new Set(l),{anchor:v,focus:b}=g;Td(v,m,y)&&Po(v,v.getNode(),this,d,c),Td(b,m,y)&&Po(b,b.getNode(),this,d,c),f!==0||this.canBeEmpty()||ur(this)||this.remove()}}return o}getDOMSlot(e){return new U2(e)}exportDOM(e){const{element:t}=super.exportDOM(e);if(ve(t)){const n=this.getIndent();n>0&&(t.style.paddingInlineStart=40*n+"px");const i=this.getDirection();i&&(t.dir=i)}return{element:t}}exportJSON(){const e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),n=this.getTextStyle();return t!==0&&(e.textFormat=t),n!==""&&(e.textStyle=n),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){const n=this.getDOMSlot(e);let i=n.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){const o=t.getElementByKey(s.getKey());o!==null&&(i==null?(n.insertChild(o),i=o):i!==o&&n.replaceChild(o,i),i=i.nextSibling)}}};function P(r){return r instanceof yt}function Td(r,e,t){let n=r.getNode();for(;n;){const i=n.__key;if(e.has(i)&&!t.has(i))return!0;n=n.getParent()}return!1}let Ri=class extends pa{decorate(e,t){K(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function ye(r){return r instanceof Ri}let Bu=class Tp extends yt{static getType(){return"root"}static clone(){return new Tp}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){K(51)}getTextContent(){const e=this.__cachedText;return!Ii()&&Ae()._dirtyType!==Tn||e===null?super.getTextContent():e}remove(){K(52)}replace(e){K(53)}insertBefore(e){K(54)}insertAfter(e){K(55)}updateDOM(e,t){return!1}splice(e,t,n){for(const i of n)P(i)||ye(i)||K(282);return super.splice(e,t,n)}static importJSON(e){return ke().updateFromJSON(e)}collapseAtStart(){return!0}};function Xe(r){return r instanceof Bu}function Ap(r){return new ga(new Map(r._nodeMap))}function qu(){return new ga(new Map([["root",new Bu]]))}function Dp(r){const e=r.exportJSON(),t=r.constructor;if(e.type!==t.getType()&&K(130,t.name),P(r)){const n=e.children;Array.isArray(n)||K(59,t.name);const i=r.getChildren();for(let s=0;s<i.length;s++){const o=Dp(i[s]);n.push(o)}}return e}class ga{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,t){return xd(t&&t.editor||null,this,e)}clone(e){const t=new ga(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return xd(null,this,()=>({root:Dp(ke())}))}}const Dl="historic",W2="history-push",oi="history-merge",Np="paste",z2="collaboration",H2="skip-scroll-into-view",V2="skip-dom-selection";class ju extends yt{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class rn extends yt{static getType(){return"paragraph"}static clone(e){return new rn(e.__key)}createDOM(e){const t=document.createElement("p"),n=ai(e.theme,"paragraph");return n!==void 0&&t.classList.add(...n),t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:K2,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(ve(t)){this.isEmpty()&&t.append(document.createElement("br"));const n=this.getFormatType();t.style.textAlign=n}return{element:t}}static importJSON(e){return Dt().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,t){const n=Dt();n.setTextFormat(e.format),n.setTextStyle(e.style);const i=this.getDirection();return n.setDirection(i),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,t),n}collapseAtStart(){const e=this.getChildren();if(e.length===0||H(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function K2(r){const e=Dt();return r.style&&(e.setFormat(r.style.textAlign),l0(r,e)),{node:e}}function Dt(){return Se(new rn)}function $u(r){return r instanceof rn}const oe=0,Li=1,go=2,ma=3,ls=4;function Mp(r,e,t,n){const i=r._keyToDOMMap;i.clear(),r._editorState=qu(),r._pendingEditorState=n,r._compositionKey=null,r._dirtyType=Tn,r._cloneNotNeeded.clear(),r._dirtyLeaves=new Set,r._dirtyElements.clear(),r._normalizedNodes=new Set,r._updateTags=new Set,r._updates=[],r._blockCursorElement=null;const s=r._observer;s!==null&&(s.disconnect(),r._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",i.set("root",t))}function J2(r){const e=r||{},t=$2(),n=e.theme||{},i=r===void 0?t:e.parentEditor||null,s=e.disableEvents||!1,o=qu(),a=e.namespace||(i!==null?i._config.namespace:Fp()),l=e.editorState,u=[Bu,At,jn,Ru,rn,ju,...e.nodes||[]],{onError:c,html:d}=e,f=e.editable===void 0||e.editable;let h;if(r===void 0&&t!==null)h=t._nodes;else{h=new Map;for(let m=0;m<u.length;m++){let y=u[m],v=null,b=null;if(typeof y!="function"){const E=y;y=E.replace,v=E.with,b=E.withKlass||null}const C=y.getType(),T=y.transform(),R=new Set;T!==null&&R.add(T),h.set(C,{exportDOM:d&&d.export?d.export.get(y):void 0,klass:y,replace:v,replaceWithKlass:b,transforms:R})}}const g=new ya(o,i,h,{disableEvents:s,namespace:a,theme:n},c||console.error,function(m,y){const v=new Map,b=new Set,C=T=>{Object.keys(T).forEach(R=>{let E=v.get(R);E===void 0&&(E=[],v.set(R,E)),E.push(T[R])})};return m.forEach(T=>{const R=T.klass.importDOM;if(R==null||b.has(R))return;b.add(R);const E=R.call(T.klass);E!==null&&C(E)}),y&&C(y),v}(h,d?d.import:void 0),f,r);return l!==void 0&&(g._pendingEditorState=l,g._dirtyType=hi),g}let ya=class{constructor(e,t,n,i,s,o,a,l){this._createEditorArgs=l,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Tn,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Fp(),this._onError=s,this._htmlConversions=o,this._editable=a,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){n===void 0&&K(35);const i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);const s=i.get(e);s===void 0&&K(36,String(e));const o=s[n];return o.add(t),()=>{o.delete(t),s.every(a=>a.size===0)&&i.delete(e)}}registerMutationListener(e,t,n){const i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,s=this._listeners.mutation;s.set(t,i);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(t,i),()=>{s.delete(t)}}getRegisteredNode(e){const t=this._nodes.get(e.getType());return t===void 0&&K(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){const n=this._editorState,i=Pd(n).get(t.getType());if(!i)return;const s=new Map;for(const o of i.keys())s.set(o,"created");s.size>0&&e(s,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){const n=this.getRegisteredNode(e);return n.transforms.add(t),n}registerNodeTransform(e,t){const n=this.registerNodeTransformToKlass(e,t),i=[n],s=n.replaceWithKlass;if(s!=null){const o=this.registerNodeTransformToKlass(s,t);i.push(o)}return function(o,a){const l=Pd(o.getEditorState()),u=[];for(const c of a){const d=l.get(c);d&&u.push(d)}u.length!==0&&o.update(()=>{for(const c of u)for(const d of c.keys()){const f=me(d);f&&f.markDirty()}},o._pendingEditorState===null?{tag:oi}:void 0)}(this,i.map(o=>o.klass.getType())),()=>{i.forEach(o=>o.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return ee(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const n=ai(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,Mp(this,t,e,i),t!==null&&(this._config.disableEvents||A2(t),n!=null&&t.classList.remove(...n)),e!==null){const s=Ju(e),o=e.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=s,this._dirtyType=hi,Hh(this),this._updateTags.add(oi),vr(this),this._config.disableEvents||function(a,l){const u=a.ownerDocument,c=Ro.get(u);(c===void 0||c<1)&&u.addEventListener("selectionchange",cp),Ro.set(u,(c||0)+1),a.__lexicalEditor=l;const d=up(a);for(let f=0;f<wl.length;f++){const[h,g]=wl[f],m=typeof g=="function"?y=>{ld(y)||(ad(y),(l.isEditable()||h==="click")&&g(y,l))}:y=>{if(ld(y))return;ad(y);const v=l.isEditable();switch(h){case"cut":return v&&ee(l,Mi,y);case"copy":return ee(l,qn,y);case"paste":return v&&ee(l,Bn,y);case"dragstart":return v&&ee(l,Mu,y);case"dragover":return v&&ee(l,tp,y);case"dragend":return v&&ee(l,x2,y);case"focus":return v&&ee(l,k2,y);case"blur":return v&&ee(l,S2,y);case"drop":return v&&ee(l,ha,y)}};a.addEventListener(h,m),d.push(()=>{a.removeEventListener(h,m)})}}(e,this),n!=null&&e.classList.add(...n)}else this._window=null,this._updateTags.add(oi),vr(this);as("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&K(38);let n=e;n._readOnly&&(n=Ap(e),n._selection=e._selection?e._selection.clone():null),zh(this);const i=this._pendingEditorState,s=this._updateTags,o=t!==void 0?t.tag:null;i===null||i.isEmpty()||(o!=null&&s.add(o),vr(this)),this._pendingEditorState=n,this._dirtyType=hi,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&s.add(o),this._updating||vr(this)}parseEditorState(e,t){return function(n,i,s){const o=qu(),a=ze,l=Ct,u=He,c=i._dirtyElements,d=i._dirtyLeaves,f=i._cloneNotNeeded,h=i._dirtyType;i._dirtyElements=new Map,i._dirtyLeaves=new Set,i._cloneNotNeeded=new Set,i._dirtyType=0,ze=o,Ct=!1,He=i;try{const g=i._nodes;Pu(n.root,g),s&&s(),o._readOnly=!0}catch(g){g instanceof Error&&i._onError(g)}finally{i._dirtyElements=c,i._dirtyLeaves=d,i._cloneNotNeeded=f,i._dirtyType=h,ze=a,Ct=l,He=u}return o}(typeof e=="string"?JSON.parse(e):e,this,t)}read(e){return vr(this),this.getEditorState().read(e,{editor:this})}update(e,t){(function(n,i,s){n._updating?n._updates.push([i,s]):Fu(n,i,s)})(this,e,t)}focus(e,t={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),St(this,()=>{const i=U(),s=ke();i!==null?i.dirty||tt(i.clone()):s.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?s.selectStart():s.selectEnd()),t0("focus"),r0(()=>{n.removeAttribute("autocapitalize"),e&&e()})}),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=jt(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,as("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}};ya.version="0.31.1+prod.esm";let G2=1;const Y2=typeof queueMicrotask=="function"?queueMicrotask:r=>{Promise.resolve().then(r)};function Ad(r){return ye(Kr(r))}function Uu(r){const e=document.activeElement;if(!ve(e))return!1;const t=e.nodeName;return ye(Kr(r))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&_a(e)==null)}function Os(r,e,t){const n=r.getRootElement();try{return n!==null&&n.contains(e)&&n.contains(t)&&e!==null&&!Uu(e)&&Op(e)===r}catch{return!1}}function Wu(r){return r instanceof ya}function Op(r){let e=r;for(;e!=null;){const t=_a(e);if(Wu(t))return t;e=Is(e)}return null}function _a(r){return r?r.__lexicalEditor:null}function ti(r){return r.isToken()||r.isSegmented()}function Dr(r){return $n(r)&&r.nodeType===K_}function X2(r){return $n(r)&&r.nodeType===J_}function yi(r){let e=r;for(;e!=null;){if(Dr(e))return e;e=e.firstChild}return null}function Fo(r,e,t){const n=Hr[e];if(t!==null&&(r&n)==(t&n))return r;let i=r^n;return e==="subscript"?i&=-65:e==="superscript"?i&=-33:e==="lowercase"?(i&=-513,i&=-1025):e==="uppercase"?(i&=-257,i&=-1025):e==="capitalize"&&(i&=-257,i&=-513),i}function Q2(r,e){if(e!=null)return void(r.__key=e);it(),wp();const t=Ae(),n=tn(),i=""+G2++;n._nodeMap.set(i,r),P(r)?t._dirtyElements.set(i,!0):t._dirtyLeaves.add(i),t._cloneNotNeeded.add(i),t._dirtyType=qh,r.__key=i}function En(r){const e=r.getParent();if(e!==null){const t=r.getWritable(),n=e.getWritable(),i=r.getPreviousSibling(),s=r.getNextSibling(),o=s!==null?s.__key:null,a=i!==null?i.__key:null,l=i!==null?i.getWritable():null,u=s!==null?s.getWritable():null;i===null&&(n.__first=o),s===null&&(n.__last=a),l!==null&&(l.__next=o),u!==null&&(u.__prev=a),t.__prev=null,t.__next=null,t.__parent=null,n.__size--}}function Bo(r){wp();const e=r.getLatest(),t=e.__parent,n=tn(),i=Ae(),s=n._nodeMap,o=i._dirtyElements;t!==null&&function(l,u,c){let d=l;for(;d!==null;){if(c.has(d))return;const f=u.get(d);if(f===void 0)break;c.set(d,!1),d=f.__parent}}(t,s,o);const a=e.__key;i._dirtyType=qh,P(r)?o.set(a,!0):i._dirtyLeaves.add(a)}function Ye(r){it();const e=Ae(),t=e._compositionKey;if(r!==t){if(e._compositionKey=r,t!==null){const n=me(t);n!==null&&n.getWritable()}if(r!==null){const n=me(r);n!==null&&n.getWritable()}}}function Br(){return Ii()?null:Ae()._compositionKey}function me(r,e){const t=(e||tn())._nodeMap.get(r);return t===void 0?null:t}function Ip(r,e){const t=ba(r,Ae());return t!==void 0?me(t,e):null}function ba(r,e){return r[`__lexicalKey_${e._key}`]}function Kr(r,e){let t=r;for(;t!=null;){const n=Ip(t,e);if(n!==null)return n;t=Is(t)}return null}function Rp(r){const e=r._decorators,t=Object.assign({},e);return r._pendingDecorators=t,t}function Dd(r){return r.read(()=>ke().getTextContent())}function ke(){return Lp(tn())}function Lp(r){return r._nodeMap.get("root")}function tt(r){it();const e=tn();r!==null&&(r.dirty=!0,r.setCachedNodes(null)),e._selection=r}function ii(r){const e=Ae(),t=function(n,i){let s=n;for(;s!=null;){const o=ba(s,i);if(o!==void 0)return o;s=Is(s)}return null}(r,e);return t===null?r===e.getRootElement()?me("root"):null:me(t)}function Nd(r,e){return e?r.getTextContentSize():0}function Pp(r){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(r)}function zu(r){const e=[];let t=r;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function Fp(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function Bp(r){return Dr(r)?r.nodeValue:null}function Hu(r,e,t){const n=jt(Lt(e));if(n===null)return;const i=n.anchorNode;let{anchorOffset:s,focusOffset:o}=n;if(i!==null){let a=Bp(i);const l=Kr(i);if(a!==null&&H(l)){if(a===la&&t){const u=t.length;a=t,s=u,o=u}a!==null&&Vu(l,a,s,o,r)}}}function Vu(r,e,t,n,i){let s=r;if(s.isAttached()&&(i||!s.isDirty())){const o=s.isComposing();let a=e;(o||i)&&e[e.length-1]===la&&(a=e.slice(0,-1));const l=s.getTextContent();if(i||a!==l){if(a===""){if(Ye(null),fs||fi||ko)s.remove();else{const m=Ae();setTimeout(()=>{m.update(()=>{s.isAttached()&&s.remove()})},20)}return}const u=s.getParent(),c=Oi(),d=s.getTextContentSize(),f=Br(),h=s.getKey();if(s.isToken()||f!==null&&h===f&&!o||F(c)&&(u!==null&&!u.canInsertTextBefore()&&c.anchor.offset===0||c.anchor.key===r.__key&&c.anchor.offset===0&&!s.canInsertTextBefore()&&!o||c.focus.key===r.__key&&c.focus.offset===d&&!s.canInsertTextAfter()&&!o))return void s.markDirty();const g=U();if(!F(g)||t===null||n===null)return void s.setTextContent(a);if(g.setTextNodeRange(s,t,s,n),s.isSegmented()){const m=Re(s.getTextContent());s.replace(m),s=m}s.setTextContent(a)}}}function Ys(r,e,t){const n=e[t]||!1;return n==="any"||n===r[t]}function Z2(r,e){return Ys(r,e,"altKey")&&Ys(r,e,"ctrlKey")&&Ys(r,e,"shiftKey")&&Ys(r,e,"metaKey")}function _e(r,e,t){return Z2(r,t)&&r.key.toLowerCase()===e.toLowerCase()}const _r={ctrlKey:!Qt,metaKey:Qt},Md={altKey:Qt,ctrlKey:!Qt};function Od(r){return r.key==="Backspace"}function Id(r){return _e(r,"a",_r)}function qp(r){const e=ke();if(F(r)){const t=r.anchor,n=r.focus,i=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(i.getKey(),0,"element"),n.set(i.getKey(),i.getChildrenSize(),"element"),hs(r),r}{const t=e.select(0,e.getChildrenSize());return tt(hs(t)),t}}function ai(r,e){r.__lexicalClassNameCache===void 0&&(r.__lexicalClassNameCache={});const t=r.__lexicalClassNameCache,n=t[e];if(n!==void 0)return n;const i=r[e];if(typeof i=="string"){const s=So(i);return t[e]=s,s}return i}function Ku(r,e,t,n,i){if(t.size===0)return;const s=n.__type,o=n.__key,a=e.get(s);a===void 0&&K(33,s);const l=a.klass;let u=r.get(l);u===void 0&&(u=new Map,r.set(l,u));const c=u.get(o),d=c==="destroyed"&&i==="created";(c===void 0||d)&&u.set(o,d?"updated":i)}function Rd(r,e,t){const n=r.getParent();let i=t,s=r;return n!==null&&(e&&t===0?(i=s.getIndexWithinParent(),s=n):e||t!==s.getChildrenSize()||(i=s.getIndexWithinParent()+1,s=n)),s.getChildAtIndex(e?i-1:i)}function Nl(r,e){const t=r.offset;if(r.type==="element")return Rd(r.getNode(),e,t);{const n=r.getNode();if(e&&t===0||!e&&t===n.getTextContentSize()){const i=e?n.getPreviousSibling():n.getNextSibling();return i===null?Rd(n.getParentOrThrow(),e,n.getIndexWithinParent()+(e?0:1)):i}}return null}function jp(r){const e=Lt(r).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function ee(r,e,t){return function(n,i,s){const o=zu(n);for(let a=4;a>=0;a--)for(let l=0;l<o.length;l++){const u=o[l],c=u._commands.get(i);if(c!==void 0){const d=c[a];if(d!==void 0){const f=Array.from(d),h=f.length;let g=!1;if(St(u,()=>{for(let m=0;m<h;m++)if(f[m](s,n))return void(g=!0)}),g)return g}}}return!1}(r,e,t)}function va(r){return!Xe(r)&&!r.isLastChild()&&!r.isInline()}function _i(r,e){const t=r._keyToDOMMap.get(e);return t===void 0&&K(75,e),t}function Is(r){const e=r.assignedSlot||r.parentElement;return Il(e)?e.host:e}function $p(r){return X2(r)?r:ve(r)?r.ownerDocument:null}function e0(r){return Ae()._updateTags.has(r)}function t0(r){it(),Ae()._updateTags.add(r)}function r0(r){it(),Ae()._deferred.push(r)}function Ml(r,e){let t=r.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function Ju(r){const e=$p(r);return e?e.defaultView:null}function Lt(r){const e=r._window;return e===null&&K(78),e}function n0(r){return P(r)&&r.isInline()||ye(r)&&r.isInline()}function i0(r){let e=r.getParentOrThrow();for(;e!==null;){if(ur(e))return e;e=e.getParentOrThrow()}return e}function ur(r){return Xe(r)||P(r)&&r.isShadowRoot()}function Se(r){const e=Ae(),t=r.constructor.getType(),n=e._nodes.get(t);n===void 0&&K(200,r.constructor.name,t);const{replace:i,replaceWithKlass:s}=n;if(i!==null){const o=i(r),a=o.constructor;return s!==null?o instanceof s||K(201,s.name,s.getType(),a.name,a.getType(),r.constructor.name,t):o instanceof r.constructor&&a!==r.constructor||K(202,a.name,a.getType(),r.constructor.name,t),o.__key===r.__key&&K(203,r.constructor.name,t,a.name,a.getType()),o}return r}function Ga(r,e){!Xe(r.getParent())||P(e)||ye(e)||K(99)}function s0(r){const e=me(r);return e===null&&K(63,r),e}function Ya(r){return(ye(r)||P(r)&&!r.canBeEmpty())&&!r.isInline()}function Ol(r,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const n=r.parentElement;n!==null&&n.removeChild(r)}function jt(r){return zt?(r||window).getSelection():null}function o0(r){const e=Ju(r);return e?e.getSelection():null}function Up(r){return ve(r)&&r.tagName==="A"}function ve(r){return $n(r)&&r.nodeType===V_}function $n(r){return typeof r=="object"&&r!==null&&"nodeType"in r&&typeof r.nodeType=="number"}function Il(r){return $n(r)&&r.nodeType===G_}function Rl(r){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return r.nodeName.match(e)!==null}function qo(r){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return r.nodeName.match(e)!==null}function Bt(r){if(ye(r)&&!r.isInline())return!0;if(!P(r)||ur(r))return!1;const e=r.getFirstChild(),t=e===null||Cn(e)||H(e)||e.isInline();return!r.isInline()&&r.canBeEmpty()!==!1&&t}function Xa(r,e){let t=r;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function Gu(){return Ae()}const Ld=new WeakMap,a0=new Map;function Pd(r){if(!r._readOnly&&r.isEmpty())return a0;r._readOnly||K(192);let e=Ld.get(r);return e||(e=function(t){const n=new Map;for(const[i,s]of t._nodeMap){const o=s.__type;let a=n.get(o);a||(a=new Map,n.set(o,a)),a.set(i,s)}return n}(r),Ld.set(r,e)),e}function Yu(r){const e=r.constructor.clone(r);return e.afterCloneFrom(r),e}function l0(r,e){const t=parseInt(r.style.paddingInlineStart,10)||0,n=Math.round(t/40);e.setIndent(n)}function u0(r){r.__lexicalUnmanaged=!0}function c0(r){return r.__lexicalUnmanaged===!0}const d0={next:"previous",previous:"next"};let Xu=class{constructor(e){this.origin=e}[Symbol.iterator](){return tc({hasNext:Nn,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return at(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return at(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){const n=this.getNodeAtCaret();return e.is(this.origin)||e.is(n)||(n===null?this.insert(e):n.replace(e,t)),this}splice(e,t,n="next"){const i=n===this.direction?t:Array.from(t).reverse();let s=this;const o=this.getParentAtCaret(),a=new Map;for(let l=s.getAdjacentCaret();l!==null&&a.size<e;l=l.getAdjacentCaret()){const u=l.origin.getWritable();a.set(u.getKey(),u)}for(const l of i){if(a.size>0){const u=s.getNodeAtCaret();if(u){if(a.delete(u.getKey()),a.delete(l.getKey()),!(u.is(l)||s.origin.is(l))){const c=l.getParent();c&&c.is(o)&&l.remove(),u.replace(l)}}else u===null&&K(263,Array.from(a).join(" "))}else s.insert(l);s=at(l,this.direction)}for(const l of a.values())l.remove();return this}},Ll=class Wp extends Xu{constructor(){super(...arguments);It(this,"type","child")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Sr(t,this.direction)}getParentCaret(t="root"){return at(Qu(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Pi(this.direction);return at(this.getNodeAtCaret(),t)||Sr(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof Wp&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}};const f0={root:Xe,shadowRoot:ur};function Pi(r){return d0[r]}function Qu(r,e="root"){return f0[e](r)?null:r}let jo=class Pl extends Xu{constructor(){super(...arguments);It(this,"type","sibling")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:at(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return P(this.origin)?Sr(this.origin,this.direction):null}getParentCaret(t="root"){return at(Qu(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Pi(this.direction);return at(this.getNodeAtCaret(),t)||Sr(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof Pl&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof Pl||t instanceof $o)&&this.direction===t.direction&&this.origin.is(t.origin)}},$o=class Fl extends Xu{constructor(t,n){super(t);It(this,"type","text");this.offset=n}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Mn(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return at(Qu(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Mn(this.origin,Pi(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Fl&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof jo||t instanceof Fl)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return at(this.origin,this.direction)}};function wn(r){return r instanceof $o}function Nn(r){return r instanceof jo}function rr(r){return r instanceof Ll}const h0={next:class extends $o{constructor(){super(...arguments);It(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends $o{constructor(){super(...arguments);It(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},p0={next:class extends jo{constructor(){super(...arguments);It(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends jo{constructor(){super(...arguments);It(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},g0={next:class extends Ll{constructor(){super(...arguments);It(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends Ll{constructor(){super(...arguments);It(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function at(r,e){return r?new p0[e](r):null}function Mn(r,e,t){return r?new h0[e](r,Ca(r,t)):null}function Ca(r,e){const t=r.getTextContentSize();let n=e==="next"?t:e==="previous"?0:e;return(n<0||n>t)&&(function(i,...s){const o=new URL("https://lexical.dev/docs/error"),a=new URLSearchParams;a.append("code",i);for(const l of s)a.append("v",l);o.search=a.toString(),console.warn(`Minified Lexical warning #${i}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(284,String(e),String(t),r.getKey()),n=n<0?0:t),n}function Fd(r,e){return new _0(r,e)}function Sr(r,e){return P(r)?new g0[e](r):null}function m0(r){return r&&r.getChildCaret()||r}function Zu(r){return r&&m0(r.getAdjacentCaret())}let y0=class zp{constructor(e,t,n){It(this,"type","node-caret-range");this.anchor=e,this.focus=t,this.direction=n}getLatest(){const e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new zp(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=i=>{const s=this[i].getLatest();return wn(s)?function(o,a){const{direction:l,origin:u}=o,c=Ca(u,a==="focus"?Pi(l):l);return Fd(o,c-o.offset)}(s,i):null},t=e("anchor"),n=e("focus");if(t&&n){const{caret:i}=t,{caret:s}=n;if(i.isSameNodeCaret(s))return[Fd(i,s.offset-i.offset),null]}return[t,n]}iterNodeCarets(e="root"){const t=wn(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),i=wn(n),s=o=>o.isSameNodeCaret(n)?null:Zu(o)||o.getParentCaret(e);return tc({hasNext:o=>o!==null&&!(i&&n.isSameNodeCaret(o)),initial:t.isSameNodeCaret(n)?null:s(t),map:o=>o,step:s})}[Symbol.iterator](){return this.iterNodeCarets("root")}},_0=class{constructor(e,t){It(this,"type","slice");this.caret=e,this.distance=t}getSliceIndices(){const{distance:e,caret:{offset:t}}=this,n=t+e;return n<t?[n,t]:[t,n]}getTextContent(){const[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:t}}=this,[n,i]=this.getSliceIndices(),s=e.getTextContent();return Mn(e.setTextContent(s.slice(0,n)+s.slice(i)),t,n)}};function ec(r){return On(r,at(ke(),r.direction))}function b0(r){return On(r,r)}function On(r,e){return r.direction!==e.direction&&K(265),new y0(r,e,r.direction)}function tc(r){const{initial:e,hasNext:t,step:n,map:i}=r;let s=e;return{[Symbol.iterator](){return this},next(){if(!t(s))return{done:!0,value:void 0};const o={done:!1,value:i(s)};return s=n(s),o}}}function Hp(r,e){const t=us(r.origin,e.origin);switch(t===null&&K(275,r.origin.getKey(),e.origin.getKey()),t.type){case"same":{const n=r.type==="text",i=e.type==="text";return n&&i?function(s,o){return Math.sign(s-o)}(r.offset,e.offset):r.type===e.type?0:n?-1:i?1:r.type==="child"?-1:1}case"ancestor":return r.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return Vp(t)}}function Vp(r){const{a:e,b:t}=r,n=e.__key,i=t.__key;let s=e,o=t;for(;s&&o;s=s.getNextSibling(),o=o.getNextSibling()){if(s.__key===i)return-1;if(o.__key===n)return 1}return s===null?1:-1}function Xs(r,e){return e.is(r)}function Bd(r){return P(r)?[r.getLatest(),null]:[r.getParent(),r.getLatest()]}function us(r,e){if(r.is(e))return{commonAncestor:r,type:"same"};const t=new Map;for(let[n,i]=Bd(r);n;i=n,n=n.getParent())t.set(n,i);for(let[n,i]=Bd(e);n;i=n,n=n.getParent()){const s=t.get(n);if(s!==void 0)return s===null?(Xs(r,n)||K(276),{commonAncestor:n,type:"ancestor"}):i===null?(Xs(e,n)||K(277),{commonAncestor:n,type:"descendant"}):((P(s)||Xs(r,s))&&(P(i)||Xs(e,i))&&n.is(s.getParent())&&n.is(i.getParent())||K(278),{a:s,b:i,commonAncestor:n,type:"branch"})}return null}function Jr(r,e){const{type:t,key:n,offset:i}=r,s=s0(r.key);return t==="text"?(H(s)||K(266,s.getType(),n),Mn(s,e,i)):(P(s)||K(267,s.getType(),n),E0(s,r.offset,e))}function _s(r,e){const{origin:t,direction:n}=e,i=n==="next";wn(e)?r.set(t.getKey(),e.offset,"text"):Nn(e)?H(t)?r.set(t.getKey(),Ca(t,n),"text"):r.set(t.getParentOrThrow().getKey(),t.getIndexWithinParent()+(i?1:0),"element"):(rr(e)&&P(t)||K(268),r.set(t.getKey(),i?0:t.getChildrenSize(),"element"))}function v0(r){const e=U(),t=F(e)?e:Ms();return mo(t,r),tt(t),t}function mo(r,e){_s(r.anchor,e.anchor),_s(r.focus,e.focus)}function qd(r){const{anchor:e,focus:t}=r,n=Jr(e,"next"),i=Jr(t,"next"),s=Hp(n,i)<=0?"next":"previous";return On(bi(n,s),bi(i,s))}function rc(r){const{direction:e,origin:t}=r,n=at(t,Pi(e)).getNodeAtCaret();return n?at(n,e):Sr(t.getParentOrThrow(),e)}function jd(r,e="root"){const t=[r];for(let n=rr(r)?r.getParentCaret(e):r.getSiblingCaret();n!==null;n=n.getParentCaret(e))t.push(rc(n));return t}function Qa(r){return!!r&&r.origin.isAttached()}function C0(r,e="removeEmptySlices"){if(r.isCollapsed())return r;const t="root",n="next";let i=e;const s=Jp(r,n),o=jd(s.anchor,t),a=jd(s.focus.getFlipped(),t),l=new Set,u=[];for(const g of s.iterNodeCarets(t))if(rr(g))l.add(g.origin.getKey());else if(Nn(g)){const{origin:m}=g;P(m)&&!l.has(m.getKey())||u.push(m)}for(const g of u)g.remove();for(const g of s.getTextSlices()){if(!g)continue;const{origin:m}=g.caret,y=m.getTextContentSize(),v=rc(at(m,n)),b=m.getMode();if(Math.abs(g.distance)===y&&i==="removeEmptySlices"||b==="token"&&g.distance!==0)v.remove();else if(g.distance!==0){i="removeEmptySlices";let C=g.removeTextSlice();const T=g.caret.origin;if(b==="segmented"){const R=C.origin,E=Re(R.getTextContent()).setStyle(R.getStyle()).setFormat(R.getFormat());v.replaceOrInsert(E),C=Mn(E,n,C.offset)}T.is(o[0].origin)&&(o[0]=C),T.is(a[0].origin)&&(a[0]=C.getFlipped())}}let c,d;for(const g of o)if(Qa(g)){c=er(g);break}for(const g of a)if(Qa(g)){d=er(g);break}const f=function(g,m,y){if(!g||!m)return null;const v=g.getParentAtCaret(),b=m.getParentAtCaret();if(!v||!b)return null;const C=v.getParents().reverse();C.push(v);const T=b.getParents().reverse();T.push(b);const R=Math.min(C.length,T.length);let E;for(E=0;E<R&&C[E]===T[E];E++);const A=(L,q)=>{let X;for(let j=E;j<L.length;j++){const G=L[j];if(ur(G))return;!X&&q(G)&&(X=G)}return X},k=A(C,Bt),S=k&&A(T,L=>y.has(L.getKey())&&Bt(L));return k&&S?[k,S]:null}(c,d,l);if(f){const[g,m]=f;Sr(g,"previous").splice(0,m.getChildren()),m.remove()}const h=[c,d,...o,...a].find(Qa);if(h)return b0(bi(er(h),r.direction));K(269,JSON.stringify(o.map(g=>g.origin.__key)))}function er(r){const e=function(i){let s=i;for(;rr(s);){const o=Zu(s);if(!rr(o))break;s=o}return s}(r.getLatest()),{direction:t}=e;if(H(e.origin))return wn(e)?e:Mn(e.origin,t,t);const n=e.getAdjacentCaret();return Nn(n)&&H(n.origin)?Mn(n.origin,t,Pi(t)):e}function Kp(r){return wn(r)&&r.offset!==Ca(r.origin,r.direction)}function bi(r,e){return r.direction===e?r:r.getFlipped()}function Jp(r,e){return r.direction===e?r:On(bi(r.focus,e),bi(r.anchor,e))}function E0(r,e,t){let n=Sr(r,"next");for(let i=0;i<e;i++){const s=n.getAdjacentCaret();if(s===null)break;n=s}return bi(n,t)}const w0=new Map;function $d(r){let e=r;for(;e!=null;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function Ud(r){const e=r.parentNode;if(e==null)throw new Error("Should never happen");return[e,Array.from(e.childNodes).indexOf(r)]}function x0(r,e,t,n,i){const s=e.getKey(),o=n.getKey(),a=document.createRange();let l=r.getElementByKey(s),u=r.getElementByKey(o),c=t,d=i;if(H(e)&&(l=$d(l)),H(n)&&(u=$d(u)),e===void 0||n===void 0||l===null||u===null)return null;l.nodeName==="BR"&&([l,c]=Ud(l)),u.nodeName==="BR"&&([u,d]=Ud(u));const f=l.firstChild;l===u&&f!=null&&f.nodeName==="BR"&&c===0&&d===0&&(d=1);try{a.setStart(l,c),a.setEnd(u,d)}catch{return null}return!a.collapsed||c===d&&s===o||(a.setStart(u,d),a.setEnd(l,c)),a}function k0(r,e){const t=r.getRootElement();if(t===null)return[];const n=t.getBoundingClientRect(),i=getComputedStyle(t),s=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),o=Array.from(e.getClientRects());let a,l=o.length;o.sort((u,c)=>{const d=u.top-c.top;return Math.abs(d)<=3?u.left-c.left:d});for(let u=0;u<l;u++){const c=o[u],d=a&&a.top<=c.top&&a.top+a.height>c.top&&a.left+a.width>c.left,f=c.width+s===n.width;d||f?(o.splice(u--,1),l--):a=c}return o}function S0(r){const e={};if(!r)return e;const t=r.split(";");for(const n of t)if(n!==""){const[i,s]=n.split(/:([^]+)/);i&&s&&(e[i.trim()]=s.trim())}return e}function Gp(r,e){const t=r.getStartEndPoints();if(e.isSelected(r)&&!e.isSegmented()&&!e.isToken()&&t!==null){const[n,i]=t,s=r.isBackward(),o=n.getNode(),a=i.getNode(),l=e.is(o),u=e.is(a);if(l||u){const[c,d]=Tl(r),f=o.is(a),h=e.is(s?a:o),g=e.is(s?o:a);let m,y=0;return f?(y=c>d?d:c,m=c>d?c:d):h?(y=s?d:c,m=void 0):g&&(y=0,m=s?c:d),e.__text=e.__text.slice(y,m),e}}return e}function T0(r){const e=r.getStyle(),t=S0(e);w0.set(e,t)}function A0(r,e){const t=r.getFormatType(),n=r.getIndent();t!==e.getFormatType()&&e.setFormat(t),n!==e.getIndent()&&e.setIndent(n)}function D0(r,e,t=A0){if(r===null)return;const n=r.getStartEndPoints(),i=new Map;let s=null;if(n){const[o,a]=n;s=Ms(),s.anchor.set(o.key,o.offset,o.type),s.focus.set(a.key,a.offset,a.type);const l=Wd(o.getNode(),Bt),u=Wd(a.getNode(),Bt);P(l)&&i.set(l.getKey(),l),P(u)&&i.set(u.getKey(),u)}for(const o of r.getNodes())P(o)&&Bt(o)&&i.set(o.getKey(),o);for(const[o,a]of i){const l=e();t(a,l),a.replace(l,!0),s&&(o===s.anchor.key&&s.anchor.set(l.getKey(),s.anchor.offset,s.anchor.type),o===s.focus.key&&s.focus.set(l.getKey(),s.focus.offset,s.focus.type))}s&&r.is(U())&&tt(s)}function Yp(r){const e=r.anchor.getNode(),t=Xe(e)?e:e.getParentOrThrow(),n=Gu().getElementByKey(t.getKey());if(n===null)return!1;const i=n.ownerDocument.defaultView;return i===null?!1:i.getComputedStyle(n).writingMode==="vertical-rl"}function Uo(r,e){const t=Yp(r)?!e:e,n=Jr(r.focus,t?"previous":"next");if(Kp(n))return!1;for(const i of ec(n)){if(rr(i))return!i.origin.isInline();if(!P(i.origin)){if(ye(i.origin))return!0;break}}return!1}function N0(r,e,t,n){r.modify(e?"extend":"move",t,n)}function M0(r){const e=r.anchor.getNode();return(Xe(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}function Wo(r,e,t){const n=M0(r);let i;i=Yp(r)||n?!t:t,N0(r,e,i,"character")}function Wd(r,e){let t=r;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function O0(r,...e){const t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",r);for(const i of e)n.append("v",i);throw t.search=n.toString(),Error(`Minified Lexical error #${r}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Rs=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,I0=Rs&&"documentMode"in document?document.documentMode:null,R0=Rs&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),L0=Rs&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!Rs||!("InputEvent"in window)||I0)&&"getTargetRanges"in new window.InputEvent("input");function Xp(...r){const e=[];for(const t of r)if(t&&typeof t=="string")for(const[n]of t.matchAll(/\S+/g))e.push(n);return e}function Ve(...r){return()=>{for(let e=r.length-1;e>=0;e--)r[e]();r.length=0}}const P0=Rs,Bl=R0,F0=L0;function st(r,...e){const t=Xp(...e);t.length>0&&r.classList.add(...t)}function xn(r,...e){const t=Xp(...e);t.length>0&&r.classList.remove(...t)}function B0(r){const e=Gr(r,t=>P(t)&&!t.isInline());return P(e)||O0(4,r.__key),e}const Gr=(r,e)=>{let t=r;for(;t!==ke()&&t!=null;){if(e(t))return t;t=t.getParent()}return null};function Qp(r,e,t,n){const i=s=>s instanceof e;return r.registerNodeTransform(e,s=>{const o=(a=>{const l=a.getChildren();for(let d=0;d<l.length;d++){const f=l[d];if(i(f))return null}let u=a,c=a;for(;u!==null;)if(c=u,u=u.getParent(),i(u))return{child:c,parent:u};return null})(s);if(o!==null){const{child:a,parent:l}=o;if(a.is(s)){n(l,s);const u=a.getNextSiblings(),c=u.length;if(l.insertAfter(a),c!==0){const d=t(l);a.insertAfter(d);for(let f=0;f<c;f++)d.append(u[f])}l.canBeEmpty()||l.getChildrenSize()!==0||l.remove()}}})}function Cr(r,e){return r!==null&&Object.getPrototypeOf(r).constructor.name===e.name}let Za=!(F0||!P0)&&void 0;function q0(r){let e=1;if(function(){if(Za===void 0){const t=document.createElement("div");t.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(t);const n=t.getBoundingClientRect();t.style.setProperty("zoom","2"),Za=t.getBoundingClientRect().width===n.width,document.body.removeChild(t)}return Za}())for(;r;)e*=Number(window.getComputedStyle(r).getPropertyValue("zoom")),r=r.parentElement;return e}function Zp(r,e){const t=[],n=Array.from(r).reverse();for(let i=n.pop();i!==void 0;i=n.pop())if(e(i))t.push(i);else if(P(i))for(const s of j0(i))n.push(s);return t}function j0(r){return $0(Sr(r,"previous"))}function $0(r){return tc({hasNext:Nn,initial:r.getAdjacentCaret(),map:e=>e.origin.getLatest(),step:e=>e.getAdjacentCaret()})}function eg(){return ke().getTextContent()}function tg(r,e=!0){if(r)return!1;let t=eg();return e&&(t=t.trim()),t===""}function U0(r){if(!tg(r,!1))return!1;const e=ke().getChildren(),t=e.length;if(t>1)return!1;for(let n=0;n<t;n++){const i=e[n];if(ye(i))return!1;if(P(i)){if(!$u(i)||i.__indent!==0)return!1;const s=i.getChildren(),o=s.length;for(let a=0;a<o;a++){const l=s[n];if(!H(l))return!1}}}return!0}function nc(r){return()=>U0(r)}const nr=()=>new Map,ql=r=>{const e=nr();return r.forEach((t,n)=>{e.set(n,t)}),e},Fi=(r,e,t)=>{let n=r.get(e);return n===void 0&&r.set(e,n=t()),n},W0=(r,e)=>{const t=[];for(const[n,i]of r)t.push(e(i,n));return t},z0=(r,e)=>{for(const[t,n]of r)if(e(n,t))return!0;return!1},vi=()=>new Set,el=r=>r[r.length-1],Ci=Array.from,H0=Array.isArray;class V0{constructor(){this._observers=nr()}on(e,t){return Fi(this._observers,e,vi).add(t),t}once(e,t){const n=(...i)=>{this.off(e,n),t(...i)};this.on(e,n)}off(e,t){const n=this._observers.get(e);n!==void 0&&(n.delete(t),n.size===0&&this._observers.delete(e))}emit(e,t){return Ci((this._observers.get(e)||nr()).values()).forEach(n=>n(...t))}destroy(){this._observers=nr()}}const In=Math.floor,yo=Math.abs,rg=(r,e)=>r<e?r:e,Bi=(r,e)=>r>e?r:e,K0=r=>r!==0?r<0:1/r<0,zd=1,Hd=2,tl=4,rl=8,J0=32,ng=64,zo=128,G0=31,Vd=63,cs=127,Y0=2147483647,X0=Number.isInteger||(r=>typeof r=="number"&&isFinite(r)&&In(r)===r),Q0=r=>r.toLowerCase(),Z0=/^\s*/g,eb=r=>r.replace(Z0,""),tb=/([A-Z])/g,Kd=(r,e)=>eb(r.replace(tb,t=>`${e}${Q0(t)}`)),rb=r=>{const e=unescape(encodeURIComponent(r)),t=e.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=e.codePointAt(i);return n},bs=typeof TextEncoder<"u"?new TextEncoder:null,nb=r=>bs.encode(r),ib=bs?nb:rb;let nl=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});nl&&nl.decode(new Uint8Array).length===1&&(nl=null);class Ls{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const ic=()=>new Ls,sb=r=>{let e=r.cpos;for(let t=0;t<r.bufs.length;t++)e+=r.bufs[t].length;return e},Er=r=>{const e=new Uint8Array(sb(r));let t=0;for(let n=0;n<r.bufs.length;n++){const i=r.bufs[n];e.set(i,t),t+=i.length}return e.set(new Uint8Array(r.cbuf.buffer,0,r.cpos),t),e},ob=(r,e)=>{const t=r.cbuf.length;t-r.cpos<e&&(r.bufs.push(new Uint8Array(r.cbuf.buffer,0,r.cpos)),r.cbuf=new Uint8Array(Bi(t,e)*2),r.cpos=0)},We=(r,e)=>{const t=r.cbuf.length;r.cpos===t&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(t*2),r.cpos=0),r.cbuf[r.cpos++]=e},jl=We,be=(r,e)=>{for(;e>cs;)We(r,zo|cs&e),e=In(e/128);We(r,cs&e)},sc=(r,e)=>{const t=K0(e);for(t&&(e=-e),We(r,(e>Vd?zo:0)|(t?ng:0)|Vd&e),e=In(e/64);e>0;)We(r,(e>cs?zo:0)|cs&e),e=In(e/128)},$l=new Uint8Array(3e4),ab=$l.length/3,lb=(r,e)=>{if(e.length<ab){const t=bs.encodeInto(e,$l).written||0;be(r,t);for(let n=0;n<t;n++)We(r,$l[n])}else kt(r,ib(e))},ub=(r,e)=>{const t=unescape(encodeURIComponent(e)),n=t.length;be(r,n);for(let i=0;i<n;i++)We(r,t.codePointAt(i))},li=bs&&bs.encodeInto?lb:ub,oc=(r,e)=>{const t=r.cbuf.length,n=r.cpos,i=rg(t-n,e.length),s=e.length-i;r.cbuf.set(e.subarray(0,i),n),r.cpos+=i,s>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(Bi(t*2,s)),r.cbuf.set(e.subarray(i)),r.cpos=s)},kt=(r,e)=>{be(r,e.byteLength),oc(r,e)},ac=(r,e)=>{ob(r,e);const t=new DataView(r.cbuf.buffer,r.cpos,e);return r.cpos+=e,t},cb=(r,e)=>ac(r,4).setFloat32(0,e,!1),db=(r,e)=>ac(r,8).setFloat64(0,e,!1),fb=(r,e)=>ac(r,8).setBigInt64(0,e,!1),Jd=new DataView(new ArrayBuffer(4)),hb=r=>(Jd.setFloat32(0,r),Jd.getFloat32(0)===r),vs=(r,e)=>{switch(typeof e){case"string":We(r,119),li(r,e);break;case"number":X0(e)&&yo(e)<=Y0?(We(r,125),sc(r,e)):hb(e)?(We(r,124),cb(r,e)):(We(r,123),db(r,e));break;case"bigint":We(r,122),fb(r,e);break;case"object":if(e===null)We(r,126);else if(H0(e)){We(r,117),be(r,e.length);for(let t=0;t<e.length;t++)vs(r,e[t])}else if(e instanceof Uint8Array)We(r,116),kt(r,e);else{We(r,118);const t=Object.keys(e);be(r,t.length);for(let n=0;n<t.length;n++){const i=t[n];li(r,i),vs(r,e[i])}}break;case"boolean":We(r,e?120:121);break;default:We(r,127)}};class Gd extends Ls{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&be(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Yd=r=>{r.count>0&&(sc(r.encoder,r.count===1?r.s:-r.s),r.count>1&&be(r.encoder,r.count-2))};class _o{constructor(){this.encoder=new Ls,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Yd(this),this.count=1,this.s=e)}toUint8Array(){return Yd(this),Er(this.encoder)}}const Xd=r=>{if(r.count>0){const e=r.diff*2+(r.count===1?0:1);sc(r.encoder,e),r.count>1&&be(r.encoder,r.count-2)}};class il{constructor(){this.encoder=new Ls,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Xd(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Xd(this),Er(this.encoder)}}class pb{constructor(){this.sarr=[],this.s="",this.lensE=new _o}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Ls;return this.sarr.push(this.s),this.s="",li(e,this.sarr.join("")),oc(e,this.lensE.toUint8Array()),Er(e)}}const Ei=r=>new Error(r),ir=()=>{throw Ei("Method unimplemented")},Rn=()=>{throw Ei("Unexpected case")},gb=crypto.getRandomValues.bind(crypto),ig=()=>gb(new Uint32Array(1))[0],mb="10000000-1000-4000-8000"+-1e11,yb=()=>mb.replace(/[018]/g,r=>(r^ig()&15>>r/4).toString(16)),Qd=r=>new Promise(r);Promise.all.bind(Promise);const Zd=r=>r===void 0?null:r;class _b{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let sg=new _b,bb=!0;try{typeof localStorage<"u"&&localStorage&&(sg=localStorage,bb=!1)}catch{}const vb=sg,Cb=Object.assign,Eb=Object.keys,wb=(r,e)=>{for(const t in r)e(r[t],t)},ef=r=>Eb(r).length,xb=r=>{for(const e in r)return!1;return!0},kb=(r,e)=>{for(const t in r)if(!e(r[t],t))return!1;return!0},Sb=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),Tb=(r,e)=>r===e||ef(r)===ef(e)&&kb(r,(t,n)=>(t!==void 0||Sb(e,n))&&e[n]===t),Ab=Object.freeze,og=r=>{for(const e in r){const t=r[e];(typeof t=="object"||typeof t=="function")&&og(r[e])}return Ab(r)},lc=(r,e,t=0)=>{try{for(;t<r.length;t++)r[t](...e)}finally{t<r.length&&lc(r,e,t+1)}},Db=(r,e)=>e.includes(r);var ag={};const Cs=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Gt;const Nb=()=>{if(Gt===void 0)if(Cs){Gt=nr();const r=process.argv;let e=null;for(let t=0;t<r.length;t++){const n=r[t];n[0]==="-"?(e!==null&&Gt.set(e,""),e=n):e!==null&&(Gt.set(e,n),e=null)}e!==null&&Gt.set(e,"")}else typeof location=="object"?(Gt=nr(),(location.search||"?").slice(1).split("&").forEach(r=>{if(r.length!==0){const[e,t]=r.split("=");Gt.set(`--${Kd(e,"-")}`,t),Gt.set(`-${Kd(e,"-")}`,t)}})):Gt=nr();return Gt},Ul=r=>Nb().has(r),Ho=r=>Zd(Cs?ag[r.toUpperCase().replaceAll("-","_")]:vb.getItem(r)),lg=r=>Ul("--"+r)||Ho(r)!==null;lg("production");const Mb=Cs&&Db(ag.FORCE_COLOR,["true","1","2"]),Ob=Mb||!Ul("--no-colors")&&!lg("no-color")&&(!Cs||process.stdout.isTTY)&&(!Cs||Ul("--color")||Ho("COLORTERM")!==null||(Ho("TERM")||"").includes("color"));class Ib{constructor(e,t){this.left=e,this.right=t}}const yr=(r,e)=>new Ib(r,e);typeof DOMParser<"u"&&new DOMParser;const Rb=r=>W0(r,(e,t)=>`${t}:${e};`).join(""),Nr=Symbol,ug=Nr(),cg=Nr(),Lb=Nr(),Pb=Nr(),Fb=Nr(),dg=Nr(),Bb=Nr(),uc=Nr(),qb=Nr(),jb=r=>{var i;r.length===1&&((i=r[0])==null?void 0:i.constructor)===Function&&(r=r[0]());const e=[],t=[];let n=0;for(;n<r.length;n++){const s=r[n];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(n>0&&t.push(e.join(""));n<r.length;n++){const s=r[n];s instanceof Symbol||t.push(s)}return t},$b={[ug]:yr("font-weight","bold"),[cg]:yr("font-weight","normal"),[Lb]:yr("color","blue"),[Fb]:yr("color","green"),[Pb]:yr("color","grey"),[dg]:yr("color","red"),[Bb]:yr("color","purple"),[uc]:yr("color","orange"),[qb]:yr("color","black")},Ub=r=>{var o;r.length===1&&((o=r[0])==null?void 0:o.constructor)===Function&&(r=r[0]());const e=[],t=[],n=nr();let i=[],s=0;for(;s<r.length;s++){const a=r[s],l=$b[a];if(l!==void 0)n.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const u=Rb(n);s>0||u.length>0?(e.push("%c"+a),t.push(u)):e.push(a)}else break}}for(s>0&&(i=t,i.unshift(e.join("")));s<r.length;s++){const a=r[s];a instanceof Symbol||i.push(a)}return i},fg=Ob?Ub:jb,Wb=(...r)=>{console.log(...fg(r)),hg.forEach(e=>e.print(r))},zb=(...r)=>{console.warn(...fg(r)),r.unshift(uc),hg.forEach(e=>e.print(r))},hg=vi(),pg=r=>({[Symbol.iterator](){return this},next:r}),Hb=(r,e)=>pg(()=>{let t;do t=r.next();while(!t.done&&!e(t.value));return t}),sl=(r,e)=>pg(()=>{const{done:t,value:n}=r.next();return{done:t,value:t?void 0:e(n)}});class Vb{constructor(e,t){this.clock=e,this.len=t}}class Kb{constructor(){this.clients=new Map}}const gg=(r,e,t)=>e.clients.forEach((n,i)=>{const s=r.doc.store.clients.get(i);if(s!=null){const o=s[s.length-1],a=o.id.clock+o.length;for(let l=0,u=n[l];l<n.length&&u.clock<a;u=n[++l])Eg(r,s,u.clock,u.len,t)}}),Jb=(r,e)=>{let t=0,n=r.length-1;for(;t<=n;){const i=In((t+n)/2),s=r[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;t=i+1}else n=i-1}return null},mg=(r,e)=>{const t=r.clients.get(e.client);return t!==void 0&&Jb(t,e.clock)!==null},yg=r=>{r.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let t,n;for(t=1,n=1;t<e.length;t++){const i=e[n-1],s=e[t];i.clock+i.len>=s.clock?i.len=Bi(i.len,s.clock+s.len-i.clock):(n<t&&(e[n]=s),n++)}e.length=n})},_g=(r,e,t,n)=>{Fi(r.clients,e,()=>[]).push(new Vb(t,n))},Gb=(r,e)=>{be(r.restEncoder,e.clients.size),Ci(e.clients.entries()).sort((t,n)=>n[0]-t[0]).forEach(([t,n])=>{r.resetDsCurVal(),be(r.restEncoder,t);const i=n.length;be(r.restEncoder,i);for(let s=0;s<i;s++){const o=n[s];r.writeDsClock(o.clock),r.writeDsLen(o.len)}})},bg=ig;class Ps extends V0{constructor({guid:e=yb(),collectionid:t=null,gc:n=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=i,this.clientID=bg(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new sv,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Qd(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const l=()=>Qd(u=>{const c=d=>{(d===void 0||d===!0)&&(this.off("sync",c),u())};this.on("sync",c)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&we(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ci(this.subdocs).map(e=>e.guid))}transact(e,t=null){return we(this,e,t)}get(e,t=Ze){const n=Fi(this.share,e,()=>{const s=new t;return s._integrate(this,null),s}),i=n.constructor;if(t!==Ze&&i!==t)if(i===Ze){const s=new t;s._map=n._map,n._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=n._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=n._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return n}getArray(e=""){return this.get(e,kn)}getText(e=""){return this.get(e,Jo)}getMap(e=""){return this.get(e,wi)}getXmlElement(e=""){return this.get(e,xs)}getXmlFragment(e=""){return this.get(e,xi)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,Ci(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;t.doc=new Ps({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,we(e.parent.doc,n=>{const i=t.doc;e.deleted||n.subdocsAdded.add(i),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Yb{constructor(){this.restEncoder=ic()}toUint8Array(){return Er(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){be(this.restEncoder,e)}writeDsLen(e){be(this.restEncoder,e)}}class Xb extends Yb{writeLeftID(e){be(this.restEncoder,e.client),be(this.restEncoder,e.clock)}writeRightID(e){be(this.restEncoder,e.client),be(this.restEncoder,e.clock)}writeClient(e){be(this.restEncoder,e)}writeInfo(e){jl(this.restEncoder,e)}writeString(e){li(this.restEncoder,e)}writeParentInfo(e){be(this.restEncoder,e?1:0)}writeTypeRef(e){be(this.restEncoder,e)}writeLen(e){be(this.restEncoder,e)}writeAny(e){vs(this.restEncoder,e)}writeBuf(e){kt(this.restEncoder,e)}writeJSON(e){li(this.restEncoder,JSON.stringify(e))}writeKey(e){li(this.restEncoder,e)}}class Qb{constructor(){this.restEncoder=ic(),this.dsCurrVal=0}toUint8Array(){return Er(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,be(this.restEncoder,t)}writeDsLen(e){e===0&&Rn(),be(this.restEncoder,e-1),this.dsCurrVal+=e}}class Zb extends Qb{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new il,this.clientEncoder=new _o,this.leftClockEncoder=new il,this.rightClockEncoder=new il,this.infoEncoder=new Gd(jl),this.stringEncoder=new pb,this.parentInfoEncoder=new Gd(jl),this.typeRefEncoder=new _o,this.lenEncoder=new _o}toUint8Array(){const e=ic();return be(e,0),kt(e,this.keyClockEncoder.toUint8Array()),kt(e,this.clientEncoder.toUint8Array()),kt(e,this.leftClockEncoder.toUint8Array()),kt(e,this.rightClockEncoder.toUint8Array()),kt(e,Er(this.infoEncoder)),kt(e,this.stringEncoder.toUint8Array()),kt(e,Er(this.parentInfoEncoder)),kt(e,this.typeRefEncoder.toUint8Array()),kt(e,this.lenEncoder.toUint8Array()),oc(e,Er(this.restEncoder)),Er(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){vs(this.restEncoder,e)}writeBuf(e){kt(this.restEncoder,e)}writeJSON(e){vs(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const ev=(r,e,t,n)=>{n=Bi(n,e[0].id.clock);const i=Tr(e,n);be(r.restEncoder,e.length-i),r.writeClient(t),be(r.restEncoder,n);const s=e[i];s.write(r,n-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(r,0)},tv=(r,e,t)=>{const n=new Map;t.forEach((i,s)=>{vt(e,s)>i&&n.set(s,i)}),cc(e).forEach((i,s)=>{t.has(s)||n.set(s,0)}),be(r.restEncoder,n.size),Ci(n.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{ev(r,e.clients.get(i),i,s)})},rv=(r,e)=>tv(r,e.doc.store,e.beforeState);class nv{constructor(){this.l=[]}}const tf=()=>new nv,rf=(r,e)=>r.l.push(e),nf=(r,e)=>{const t=r.l,n=t.length;r.l=t.filter(i=>e!==i),n===r.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},vg=(r,e,t)=>lc(r.l,[e,t]);class bo{constructor(e,t){this.client=e,this.clock=t}}const Qs=(r,e)=>r===e||r!==null&&e!==null&&r.client===e.client&&r.clock===e.clock,Oe=(r,e)=>new bo(r,e),iv=r=>{for(const[e,t]of r.doc.share.entries())if(t===r)return e;throw Rn()},ri=(r,e)=>e===void 0?!r.deleted:e.sv.has(r.id.client)&&(e.sv.get(r.id.client)||0)>r.id.clock&&!mg(e.ds,r.id),Wl=(r,e)=>{const t=Fi(r.meta,Wl,vi),n=r.doc.store;t.has(e)||(e.sv.forEach((i,s)=>{i<vt(n,s)&&Yr(r,Oe(s,i))}),gg(r,e.ds,i=>{}),t.add(e))};class sv{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const cc=r=>{const e=new Map;return r.clients.forEach((t,n)=>{const i=t[t.length-1];e.set(n,i.id.clock+i.length)}),e},vt=(r,e)=>{const t=r.clients.get(e);if(t===void 0)return 0;const n=t[t.length-1];return n.id.clock+n.length},Cg=(r,e)=>{let t=r.clients.get(e.id.client);if(t===void 0)t=[],r.clients.set(e.id.client,t);else{const n=t[t.length-1];if(n.id.clock+n.length!==e.id.clock)throw Rn()}t.push(e)},Tr=(r,e)=>{let t=0,n=r.length-1,i=r[n],s=i.id.clock;if(s===e)return n;let o=In(e/(s+i.length-1)*n);for(;t<=n;){if(i=r[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;t=o+1}else n=o-1;o=In((t+n)/2)}throw Rn()},ov=(r,e)=>{const t=r.clients.get(e.client);return t[Tr(t,e.clock)]},ol=ov,zl=(r,e,t)=>{const n=Tr(e,t),i=e[n];return i.id.clock<t&&i instanceof ot?(e.splice(n+1,0,$g(r,i,t-i.id.clock)),n+1):n},Yr=(r,e)=>{const t=r.doc.store.clients.get(e.client);return t[zl(r,t,e.clock)]},sf=(r,e,t)=>{const n=e.clients.get(t.client),i=Tr(n,t.clock),s=n[i];return t.clock!==s.id.clock+s.length-1&&s.constructor!==Pr&&n.splice(i+1,0,$g(r,s,t.clock-s.id.clock+1)),s},av=(r,e,t)=>{const n=r.clients.get(e.id.client);n[Tr(n,e.id.clock)]=t},Eg=(r,e,t,n,i)=>{if(n===0)return;const s=t+n;let o=zl(r,e,t),a;do a=e[o++],s<a.id.clock+a.length&&zl(r,e,s),i(a);while(o<e.length&&e[o].id.clock<s)};class lv{constructor(e,t,n){this.doc=e,this.deleteSet=new Kb,this.beforeState=cc(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const of=(r,e)=>e.deleteSet.clients.size===0&&!z0(e.afterState,(t,n)=>e.beforeState.get(n)!==t)?!1:(yg(e.deleteSet),rv(r,e),Gb(r,e.deleteSet),!0),af=(r,e,t)=>{const n=e._item;(n===null||n.id.clock<(r.beforeState.get(n.id.client)||0)&&!n.deleted)&&Fi(r.changed,e,vi).add(t)},vo=(r,e)=>{let t=r[e],n=r[e-1],i=e;for(;i>0;t=n,n=r[--i-1]){if(n.deleted===t.deleted&&n.constructor===t.constructor&&n.mergeWith(t)){t instanceof ot&&t.parentSub!==null&&t.parent._map.get(t.parentSub)===t&&t.parent._map.set(t.parentSub,n);continue}break}const s=e-i;return s&&r.splice(e+1-s,s),s},uv=(r,e,t)=>{for(const[n,i]of r.clients.entries()){const s=e.clients.get(n);for(let o=i.length-1;o>=0;o--){const a=i[o],l=a.clock+a.len;for(let u=Tr(s,a.clock),c=s[u];u<s.length&&c.id.clock<l;c=s[++u]){const d=s[u];if(a.clock+a.len<=d.id.clock)break;d instanceof ot&&d.deleted&&!d.keep&&t(d)&&d.gc(e,!1)}}}},cv=(r,e)=>{r.clients.forEach((t,n)=>{const i=e.clients.get(n);for(let s=t.length-1;s>=0;s--){const o=t[s],a=rg(i.length-1,1+Tr(i,o.clock+o.len-1));for(let l=a,u=i[l];l>0&&u.id.clock>=o.clock;u=i[l])l-=1+vo(i,l)}})},wg=(r,e)=>{if(e<r.length){const t=r[e],n=t.doc,i=n.store,s=t.deleteSet,o=t._mergeStructs;try{yg(s),t.afterState=cc(t.doc.store),n.emit("beforeObserverCalls",[t,n]);const a=[];t.changed.forEach((l,u)=>a.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(t,l)})),a.push(()=>{t.changedParentTypes.forEach((l,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(l=l.filter(c=>c.target._item===null||!c.target._item.deleted),l.forEach(c=>{c.currentTarget=u,c._path=null}),l.sort((c,d)=>c.path.length-d.path.length),vg(u._dEH,l,t))})}),a.push(()=>n.emit("afterTransaction",[t,n])),lc(a,[]),t._needFormattingCleanup&&Cv(t)}finally{n.gc&&uv(s,i,n.gcFilter),cv(s,i),t.afterState.forEach((c,d)=>{const f=t.beforeState.get(d)||0;if(f!==c){const h=i.clients.get(d),g=Bi(Tr(h,f),1);for(let m=h.length-1;m>=g;)m-=1+vo(h,m)}});for(let c=o.length-1;c>=0;c--){const{client:d,clock:f}=o[c].id,h=i.clients.get(d),g=Tr(h,f);g+1<h.length&&vo(h,g+1)>1||g>0&&vo(h,g)}if(!t.local&&t.afterState.get(n.clientID)!==t.beforeState.get(n.clientID)&&(Wb(uc,ug,"[yjs] ",cg,dg,"Changed the client-id because another client seems to be using it."),n.clientID=bg()),n.emit("afterTransactionCleanup",[t,n]),n._observers.has("update")){const c=new Xb;of(c,t)&&n.emit("update",[c.toUint8Array(),t.origin,n,t])}if(n._observers.has("updateV2")){const c=new Zb;of(c,t)&&n.emit("updateV2",[c.toUint8Array(),t.origin,n,t])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:u}=t;(a.size>0||u.size>0||l.size>0)&&(a.forEach(c=>{c.clientID=n.clientID,c.collectionid==null&&(c.collectionid=n.collectionid),n.subdocs.add(c)}),u.forEach(c=>n.subdocs.delete(c)),n.emit("subdocs",[{loaded:l,added:a,removed:u},n,t]),u.forEach(c=>c.destroy())),r.length<=e+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,r])):wg(r,e+1)}}},we=(r,e,t=null,n=!0)=>{const i=r._transactionCleanups;let s=!1,o=null;r._transaction===null&&(s=!0,r._transaction=new lv(r,t,n),i.push(r._transaction),i.length===1&&r.emit("beforeAllTransactions",[r]),r.emit("beforeTransaction",[r._transaction,r]));try{o=e(r._transaction)}finally{if(s){const a=r._transaction===i[0];r._transaction=null,a&&wg(i,0)}}return o},lf="You must not compute changes after the event-handler fired.";class Ea{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=dv(this.currentTarget,this.target))}deletes(e){return mg(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ei(lf);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(i=>{if(i!==null){const s=t._map.get(i);let o,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))o="delete",a=el(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=el(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(s))o="delete",a=el(s.content.getContent());else return;e.set(i,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ei(lf);const t=this.target,n=vi(),i=vi(),s=[];if(e={added:n,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(t).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let u=t._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=u.length,i.add(u)):this.adds(u)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(u.content.getContent()),n.add(u)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=u.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const dv=(r,e)=>{const t=[];for(;e._item!==null&&e!==r;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let n=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(n+=i.length),i=i.right;t.unshift(n)}e=e._item.parent}return t},lt=()=>{zb("Invalid access: Add Yjs type to a document before reading data.")},xg=80;let dc=0;class fv{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=dc++}}const hv=r=>{r.timestamp=dc++},kg=(r,e,t)=>{r.p.marker=!1,r.p=e,e.marker=!0,r.index=t,r.timestamp=dc++},pv=(r,e,t)=>{if(r.length>=xg){const n=r.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return kg(n,e,t),n}else{const n=new fv(e,t);return r.push(n),n}},wa=(r,e)=>{if(r._start===null||e===0||r._searchMarker===null)return null;const t=r._searchMarker.length===0?null:r._searchMarker.reduce((s,o)=>yo(e-s.index)<yo(e-o.index)?s:o);let n=r._start,i=0;for(t!==null&&(n=t.p,i=t.index,hv(t));n.right!==null&&i<e;){if(!n.deleted&&n.countable){if(e<i+n.length)break;i+=n.length}n=n.right}for(;n.left!==null&&i>e;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);return t!==null&&yo(t.index-i)<n.parent.length/xg?(kg(t,n,i),t):pv(r._searchMarker,n,i)},Es=(r,e,t)=>{for(let n=r.length-1;n>=0;n--){const i=r[n];if(t>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){r.splice(n,1);continue}i.p=s,s.marker=!0}(e<i.index||t>0&&e===i.index)&&(i.index=Bi(e,i.index+t))}},xa=(r,e,t)=>{const n=r,i=e.changedParentTypes;for(;Fi(i,r,()=>[]).push(t),r._item!==null;)r=r._item.parent;vg(n._eH,t,e)};class Ze{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=tf(),this._dEH=tf(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw ir()}clone(){throw ir()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){rf(this._eH,e)}observeDeep(e){rf(this._dEH,e)}unobserve(e){nf(this._eH,e)}unobserveDeep(e){nf(this._dEH,e)}toJSON(){}}const Sg=(r,e,t)=>{r.doc??lt(),e<0&&(e=r._length+e),t<0&&(t=r._length+t);let n=t-e;const i=[];let s=r._start;for(;s!==null&&n>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&n>0;a++)i.push(o[a]),n--;e=0}}s=s.right}return i},Tg=r=>{r.doc??lt();const e=[];let t=r._start;for(;t!==null;){if(t.countable&&!t.deleted){const n=t.content.getContent();for(let i=0;i<n.length;i++)e.push(n[i])}t=t.right}return e},ws=(r,e)=>{let t=0,n=r._start;for(r.doc??lt();n!==null;){if(n.countable&&!n.deleted){const i=n.content.getContent();for(let s=0;s<i.length;s++)e(i[s],t++,r)}n=n.right}},Ag=(r,e)=>{const t=[];return ws(r,(n,i)=>{t.push(e(n,i,r))}),t},gv=r=>{let e=r._start,t=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),n=0,e=e.right}const i=t[n++];return t.length<=n&&(t=null),{done:!1,value:i}}}},Dg=(r,e)=>{r.doc??lt();const t=wa(r,e);let n=r._start;for(t!==null&&(n=t.p,e-=t.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(e<n.length)return n.content.getContent()[e];e-=n.length}},Vo=(r,e,t,n)=>{let i=t;const s=r.doc,o=s.clientID,a=s.store,l=t===null?e._start:t.right;let u=[];const c=()=>{u.length>0&&(i=new ot(Oe(o,vt(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new ki(u)),i.integrate(r,0),u=[])};n.forEach(d=>{if(d===null)u.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(d);break;default:switch(c(),d.constructor){case Uint8Array:case ArrayBuffer:i=new ot(Oe(o,vt(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new ka(new Uint8Array(d))),i.integrate(r,0);break;case Ps:i=new ot(Oe(o,vt(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new Sa(d)),i.integrate(r,0);break;default:if(d instanceof Ze)i=new ot(Oe(o,vt(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new nn(d)),i.integrate(r,0);else throw new Error("Unexpected content type in insert operation")}}}),c()},Ng=()=>Ei("Length exceeded!"),Mg=(r,e,t,n)=>{if(t>e._length)throw Ng();if(t===0)return e._searchMarker&&Es(e._searchMarker,t,n.length),Vo(r,e,null,n);const i=t,s=wa(e,t);let o=e._start;for(s!==null&&(o=s.p,t-=s.index,t===0&&(o=o.prev,t+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(t<=o.length){t<o.length&&Yr(r,Oe(o.id.client,o.id.clock+t));break}t-=o.length}return e._searchMarker&&Es(e._searchMarker,i,n.length),Vo(r,e,o,n)},mv=(r,e,t)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return Vo(r,e,i,t)},Og=(r,e,t,n)=>{if(n===0)return;const i=t,s=n,o=wa(e,t);let a=e._start;for(o!==null&&(a=o.p,t-=o.index);a!==null&&t>0;a=a.right)!a.deleted&&a.countable&&(t<a.length&&Yr(r,Oe(a.id.client,a.id.clock+t)),t-=a.length);for(;n>0&&a!==null;)a.deleted||(n<a.length&&Yr(r,Oe(a.id.client,a.id.clock+n)),a.delete(r),n-=a.length),a=a.right;if(n>0)throw Ng();e._searchMarker&&Es(e._searchMarker,i,-s+n)},Ko=(r,e,t)=>{const n=e._map.get(t);n!==void 0&&n.delete(r)},fc=(r,e,t,n)=>{const i=e._map.get(t)||null,s=r.doc,o=s.clientID;let a;if(n==null)a=new ki([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new ki([n]);break;case Uint8Array:a=new ka(n);break;case Ps:a=new Sa(n);break;default:if(n instanceof Ze)a=new nn(n);else throw new Error("Unexpected content type")}new ot(Oe(o,vt(s.store,o)),i,i&&i.lastId,null,null,e,t,a).integrate(r,0)},hc=(r,e)=>{r.doc??lt();const t=r._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},Ig=r=>{const e={};return r.doc??lt(),r._map.forEach((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])}),e},Rg=(r,e)=>{r.doc??lt();const t=r._map.get(e);return t!==void 0&&!t.deleted},yv=(r,e)=>{const t={};return r._map.forEach((n,i)=>{let s=n;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&ri(s,e)&&(t[i]=s.content.getContent()[s.length-1])}),t},Zs=r=>(r.doc??lt(),Hb(r._map.entries(),e=>!e[1].deleted));class Lg extends Ea{}class kn extends Ze{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new kn;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new kn}clone(){const e=new kn;return e.insert(0,this.toArray().map(t=>t instanceof Ze?t.clone():t)),e}get length(){return this.doc??lt(),this._length}_callObserver(e,t){super._callObserver(e,t),xa(this,e,new Lg(this,e))}insert(e,t){this.doc!==null?we(this.doc,n=>{Mg(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?we(this.doc,t=>{mv(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?we(this.doc,n=>{Og(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return Dg(this,e)}toArray(){return Tg(this)}slice(e=0,t=this.length){return Sg(this,e,t)}toJSON(){return this.map(e=>e instanceof Ze?e.toJSON():e)}map(e){return Ag(this,e)}forEach(e){ws(this,e)}[Symbol.iterator](){return gv(this)}_write(e){e.writeTypeRef(Tv)}}class _v extends Ea{constructor(e,t,n){super(e,t),this.keysChanged=n}}class wi extends Ze{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((n,i)=>{this.set(i,n)}),this._prelimContent=null}_copy(){return new wi}clone(){const e=new wi;return this.forEach((t,n)=>{e.set(n,t instanceof Ze?t.clone():t)}),e}_callObserver(e,t){xa(this,e,new _v(this,e,t))}toJSON(){this.doc??lt();const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const i=t.content.getContent()[t.length-1];e[n]=i instanceof Ze?i.toJSON():i}}),e}get size(){return[...Zs(this)].length}keys(){return sl(Zs(this),e=>e[0])}values(){return sl(Zs(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return sl(Zs(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??lt(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?we(this.doc,t=>{Ko(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?we(this.doc,n=>{fc(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return hc(this,e)}has(e){return Rg(this,e)}clear(){this.doc!==null?we(this.doc,e=>{this.forEach(function(t,n,i){Ko(e,i,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Av)}}const qr=(r,e)=>r===e||typeof r=="object"&&typeof e=="object"&&r&&e&&Tb(r,e);class Hl{constructor(e,t,n,i){this.left=e,this.right=t,this.index=n,this.currentAttributes=i}forward(){switch(this.right===null&&Rn(),this.right.content.constructor){case Ke:this.right.deleted||qi(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const uf=(r,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case Ke:e.right.deleted||qi(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&Yr(r,Oe(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},eo=(r,e,t,n)=>{const i=new Map,s=n?wa(e,t):null;if(s){const o=new Hl(s.p.left,s.p,s.index,i);return uf(r,o,t-s.index)}else{const o=new Hl(null,e._start,0,i);return uf(r,o,t)}},Pg=(r,e,t,n)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===Ke&&qr(n.get(t.right.content.key),t.right.content.value));)t.right.deleted||n.delete(t.right.content.key),t.forward();const i=r.doc,s=i.clientID;n.forEach((o,a)=>{const l=t.left,u=t.right,c=new ot(Oe(s,vt(i.store,s)),l,l&&l.lastId,u,u&&u.id,e,null,new Ke(a,o));c.integrate(r,0),t.right=c,t.forward()})},qi=(r,e)=>{const{key:t,value:n}=e;n===null?r.delete(t):r.set(t,n)},Fg=(r,e)=>{for(;r.right!==null;){if(!(r.right.deleted||r.right.content.constructor===Ke&&qr(e[r.right.content.key]??null,r.right.content.value)))break;r.forward()}},Bg=(r,e,t,n)=>{const i=r.doc,s=i.clientID,o=new Map;for(const a in n){const l=n[a],u=t.currentAttributes.get(a)??null;if(!qr(u,l)){o.set(a,u);const{left:c,right:d}=t;t.right=new ot(Oe(s,vt(i.store,s)),c,c&&c.lastId,d,d&&d.id,e,null,new Ke(a,l)),t.right.integrate(r,0),t.forward()}}return o},al=(r,e,t,n,i)=>{t.currentAttributes.forEach((f,h)=>{i[h]===void 0&&(i[h]=null)});const s=r.doc,o=s.clientID;Fg(t,i);const a=Bg(r,e,t,i),l=n.constructor===String?new Ar(n):n instanceof Ze?new nn(n):new ji(n);let{left:u,right:c,index:d}=t;e._searchMarker&&Es(e._searchMarker,t.index,l.getLength()),c=new ot(Oe(o,vt(s.store,o)),u,u&&u.lastId,c,c&&c.id,e,null,l),c.integrate(r,0),t.right=c,t.index=d,t.forward(),Pg(r,e,t,a)},cf=(r,e,t,n,i)=>{const s=r.doc,o=s.clientID;Fg(t,i);const a=Bg(r,e,t,i);e:for(;t.right!==null&&(n>0||a.size>0&&(t.right.deleted||t.right.content.constructor===Ke));){if(!t.right.deleted)switch(t.right.content.constructor){case Ke:{const{key:l,value:u}=t.right.content,c=i[l];if(c!==void 0){if(qr(c,u))a.delete(l);else{if(n===0)break e;a.set(l,u)}t.right.delete(r)}else t.currentAttributes.set(l,u);break}default:n<t.right.length&&Yr(r,Oe(t.right.id.client,t.right.id.clock+n)),n-=t.right.length;break}t.forward()}if(n>0){let l="";for(;n>0;n--)l+=`
`;t.right=new ot(Oe(o,vt(s.store,o)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new Ar(l)),t.right.integrate(r,0),t.forward()}Pg(r,e,t,a)},qg=(r,e,t,n,i)=>{let s=e;const o=nr();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===Ke){const u=s.content;o.set(u.key,u)}s=s.right}let a=0,l=!1;for(;e!==s;){if(t===e&&(l=!0),!e.deleted){const u=e.content;switch(u.constructor){case Ke:{const{key:c,value:d}=u,f=n.get(c)??null;(o.get(c)!==u||f===d)&&(e.delete(r),a++,!l&&(i.get(c)??null)===d&&f!==d&&(f===null?i.delete(c):i.set(c,f))),!l&&!e.deleted&&qi(i,u);break}}}e=e.right}return a},bv=(r,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Ke){const n=e.content.key;t.has(n)?e.delete(r):t.add(n)}e=e.left}},vv=r=>{let e=0;return we(r.doc,t=>{let n=r._start,i=r._start,s=nr();const o=ql(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case Ke:qi(o,i.content);break;default:e+=qg(t,n,i,s,o),s=ql(o),n=i;break}i=i.right}}),e},Cv=r=>{const e=new Set,t=r.doc;for(const[n,i]of r.afterState.entries()){const s=r.beforeState.get(n)||0;i!==s&&Eg(r,t.store.clients.get(n),s,i,o=>{!o.deleted&&o.content.constructor===Ke&&o.constructor!==Pr&&e.add(o.parent)})}we(t,n=>{gg(r,r.deleteSet,i=>{if(i instanceof Pr||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===Ke?e.add(s):bv(n,i)});for(const i of e)vv(i)})},df=(r,e,t)=>{const n=t,i=ql(e.currentAttributes),s=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case nn:case ji:case Ar:t<e.right.length&&Yr(r,Oe(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(r);break}e.forward()}s&&qg(r,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&Es(o._searchMarker,e.index,-n+t),e};class Ev extends Ea{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];we(e,n=>{const i=new Map,s=new Map;let o=this.target._start,a=null;const l={};let u="",c=0,d=0;const f=()=>{if(a!==null){let h=null;switch(a){case"delete":d>0&&(h={delete:d}),d=0;break;case"insert":(typeof u=="object"||u.length>0)&&(h={insert:u},i.size>0&&(h.attributes={},i.forEach((g,m)=>{g!==null&&(h.attributes[m]=g)}))),u="";break;case"retain":c>0&&(h={retain:c},xb(l)||(h.attributes=Cb({},l))),c=0;break}h&&t.push(h),a=null}};for(;o!==null;){switch(o.content.constructor){case nn:case ji:this.adds(o)?this.deletes(o)||(f(),a="insert",u=o.content.getContent()[0],f()):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),d+=1):o.deleted||(a!=="retain"&&(f(),a="retain"),c+=1);break;case Ar:this.adds(o)?this.deletes(o)||(a!=="insert"&&(f(),a="insert"),u+=o.content.str):this.deletes(o)?(a!=="delete"&&(f(),a="delete"),d+=o.length):o.deleted||(a!=="retain"&&(f(),a="retain"),c+=o.length);break;case Ke:{const{key:h,value:g}=o.content;if(this.adds(o)){if(!this.deletes(o)){const m=i.get(h)??null;qr(m,g)?g!==null&&o.delete(n):(a==="retain"&&f(),qr(g,s.get(h)??null)?delete l[h]:l[h]=g)}}else if(this.deletes(o)){s.set(h,g);const m=i.get(h)??null;qr(m,g)||(a==="retain"&&f(),l[h]=m)}else if(!o.deleted){s.set(h,g);const m=l[h];m!==void 0&&(qr(m,g)?m!==null&&o.delete(n):(a==="retain"&&f(),g===null?delete l[h]:l[h]=g))}o.deleted||(a==="insert"&&f(),qi(i,o.content));break}}o=o.right}for(f();t.length>0;){const h=t[t.length-1];if(h.retain!==void 0&&h.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class Jo extends Ze{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??lt(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Jo}clone(){const e=new Jo;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new Ev(this,e,t);xa(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??lt();let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===Ar&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?we(this.doc,n=>{const i=new Hl(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const a=!t&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&al(n,this,i,a,o.attributes||{})}else o.retain!==void 0?cf(n,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&df(n,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){this.doc??lt();const i=[],s=new Map,o=this.doc;let a="",l=this._start;function u(){if(a.length>0){const d={};let f=!1;s.forEach((g,m)=>{f=!0,d[m]=g});const h={insert:a};f&&(h.attributes=d),i.push(h),a=""}}const c=()=>{for(;l!==null;){if(ri(l,e)||t!==void 0&&ri(l,t))switch(l.content.constructor){case Ar:{const d=s.get("ychange");e!==void 0&&!ri(l,e)?(d===void 0||d.user!==l.id.client||d.type!=="removed")&&(u(),s.set("ychange",n?n("removed",l.id):{type:"removed"})):t!==void 0&&!ri(l,t)?(d===void 0||d.user!==l.id.client||d.type!=="added")&&(u(),s.set("ychange",n?n("added",l.id):{type:"added"})):d!==void 0&&(u(),s.delete("ychange")),a+=l.content.str;break}case nn:case ji:{u();const d={insert:l.content.getContent()[0]};if(s.size>0){const f={};d.attributes=f,s.forEach((h,g)=>{f[g]=h})}i.push(d);break}case Ke:ri(l,e)&&(u(),qi(s,l.content));break}l=l.right}u()};return e||t?we(o,d=>{e&&Wl(d,e),t&&Wl(d,t),c()},"cleanup"):c(),i}insert(e,t,n){if(t.length<=0)return;const i=this.doc;i!==null?we(i,s=>{const o=eo(s,this,e,!n);n||(n={},o.currentAttributes.forEach((a,l)=>{n[l]=a})),al(s,this,o,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){const i=this.doc;i!==null?we(i,s=>{const o=eo(s,this,e,!n);al(s,this,o,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(t===0)return;const n=this.doc;n!==null?we(n,i=>{df(i,eo(i,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(t===0)return;const i=this.doc;i!==null?we(i,s=>{const o=eo(s,this,e,!1);o.right!==null&&cf(s,this,o,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){this.doc!==null?we(this.doc,t=>{Ko(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?we(this.doc,n=>{fc(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return hc(this,e)}getAttributes(){return Ig(this)}_write(e){e.writeTypeRef(Dv)}}class ll{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??lt()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===xs||t.constructor===xi)&&t._start!==null)e=t._start;else for(;e!==null;){const n=e.next;if(n!==null){e=n;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class xi extends Ze{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new xi}clone(){const e=new xi;return e.insert(0,this.toArray().map(t=>t instanceof Ze?t.clone():t)),e}get length(){return this.doc??lt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new ll(this,e)}querySelector(e){e=e.toUpperCase();const n=new ll(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),Ci(new ll(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){xa(this,e,new wv(this,t,e))}toString(){return Ag(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const i=e.createDocumentFragment();return n!==void 0&&n._createAssociation(i,this),ws(this,s=>{i.insertBefore(s.toDOM(e,t,n),null)}),i}insert(e,t){this.doc!==null?we(this.doc,n=>{Mg(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)we(this.doc,n=>{const i=e&&e instanceof Ze?e._item:e;Vo(n,this,i,t)});else{const n=this._prelimContent,i=e===null?0:n.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Ei("Reference item not found");n.splice(i,0,...t)}}delete(e,t=1){this.doc!==null?we(this.doc,n=>{Og(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return Tg(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Dg(this,e)}slice(e=0,t=this.length){return Sg(this,e,t)}forEach(e){ws(this,e)}_write(e){e.writeTypeRef(Mv)}}class xs extends xi{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((n,i)=>{this.setAttribute(i,n)}),this._prelimAttrs=null}_copy(){return new xs(this.nodeName)}clone(){const e=new xs(this.nodeName),t=this.getAttributes();return wb(t,(n,i)=>{typeof n=="string"&&e.setAttribute(i,n)}),e.insert(0,this.toArray().map(n=>n instanceof Ze?n.clone():n)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const a in e)n.push(a);n.sort();const i=n.length;for(let a=0;a<i;a++){const l=n[a];t.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?we(this.doc,t=>{Ko(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?we(this.doc,n=>{fc(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return hc(this,e)}hasAttribute(e){return Rg(this,e)}getAttributes(e){return e?yv(this,e):Ig(this)}toDOM(e=document,t={},n){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const a=s[o];typeof a=="string"&&i.setAttribute(o,a)}return ws(this,o=>{i.appendChild(o.toDOM(e,t,n))}),n!==void 0&&n._createAssociation(i,this),i}_write(e){e.writeTypeRef(Nv),e.writeKey(this.nodeName)}}class wv extends Ea{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class jg{constructor(e,t){this.id=e,this.length=t}get deleted(){throw ir()}mergeWith(e){return!1}write(e,t,n){throw ir()}integrate(e,t){throw ir()}}const xv=0;class Pr extends jg{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Cg(e.doc.store,this)}write(e,t){e.writeInfo(xv),e.writeLen(this.length-t)}getMissing(e,t){return null}}class ka{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ka(this.content)}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class Go{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Go(this.len)}splice(e){const t=new Go(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){_g(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const kv=(r,e)=>new Ps({guid:r,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Sa{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Sa(kv(this.doc.guid,this.opts))}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class ji{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ji(this.embed)}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class Ke{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Ke(this.key,this.value)}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Sv=Ho("node_env")==="development";class ki{constructor(e){this.arr=e,Sv&&og(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ki(this.arr)}splice(e){const t=new ki(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let i=t;i<n;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}class Ar{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ar(this.str)}splice(e){const t=new Ar(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const Tv=0,Av=1,Dv=2,Nv=3,Mv=4;class nn{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new nn(this.type._copy())}splice(e){throw ir()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(e,!0),n=n.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const $g=(r,e,t)=>{const{client:n,clock:i}=e.id,s=new ot(Oe(n,i+t),e,Oe(n,i+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=Oe(e.redone.client,e.redone.clock+t)),e.right=s,s.right!==null&&(s.right.left=s),r._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=t,s};class ot extends jg{constructor(e,t,n,i,s,o,a,l){super(e,l.getLength()),this.origin=n,this.left=t,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?Hd:0}set marker(e){(this.info&rl)>0!==e&&(this.info^=rl)}get marker(){return(this.info&rl)>0}get keep(){return(this.info&zd)>0}set keep(e){this.keep!==e&&(this.info^=zd)}get countable(){return(this.info&Hd)>0}get deleted(){return(this.info&tl)>0}set deleted(e){this.deleted!==e&&(this.info^=tl)}markDeleted(){this.info|=tl}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=vt(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=vt(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===bo&&this.id.client!==this.parent.client&&this.parent.clock>=vt(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=sf(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Yr(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Pr||this.right&&this.right.constructor===Pr)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===ot?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===ot&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===bo){const n=ol(t,this.parent);n.constructor===Pr?this.parent=null:this.parent=n.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=sf(e,e.doc.store,Oe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,i;if(n!==null)i=n.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),Qs(this.origin,i.origin)){if(i.id.client<this.id.client)n=i,s.clear();else if(Qs(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(ol(e.doc.store,i.origin)))s.has(ol(e.doc.store,i.origin))||(n=i,s.clear());else break;i=i.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Cg(e.doc.store,this),this.content.integrate(e,this),af(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Pr(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Oe(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Qs(e.origin,this.lastId)&&this.right===e&&Qs(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(n=>{n.p===e&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),_g(e.deleteSet,this.id.client,this.id.clock,this.length),af(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Rn();this.content.gc(e),t?av(e,this,new Pr(this.id,this.length)):this.content=new Go(this.length)}write(e,t){const n=t>0?Oe(this.id.client,this.id.clock+t-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&G0|(n===null?0:zo)|(i===null?0:ng)|(s===null?0:J0);if(e.writeInfo(o),n!==null&&e.writeLeftID(n),i!==null&&e.writeRightID(i),n===null&&i===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const u=iv(a);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===bo?(e.writeParentInfo(!1),e.writeLeftID(a)):Rn();s!==null&&e.writeString(s)}this.content.write(e,t)}}const Ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Wg="__ $YJS$ __";Ug[Wg]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Ug[Wg]=!0;const Ov=le("TOGGLE_CONNECT_COMMAND");var Iv=Object.defineProperty,Rv=(r,e,t)=>e in r?Iv(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ie=(r,e,t)=>Rv(r,typeof e!="symbol"?e+"":e,t),zg={exports:{}},Zi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff;function Lv(){if(ff)return Zi;ff=1;var r=Xy,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,d={},f=null,h=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(h=l.ref);for(c in l)n.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:e,type:a,key:f,ref:h,props:d,_owner:i.current}}return Zi.Fragment=t,Zi.jsx=o,Zi.jsxs=o,Zi}zg.exports=Lv();var D=zg.exports;function Pv({options:r,editedUsjRef:e,usj:t,setUsj:n}){const{view:i,nodes:s}=r||{},{hasSpacing:o,isFormattedFont:a,markerMode:l}=i||{};return w.useEffect(()=>{e.current&&!uo(e.current,t)&&n(e.current)},[e,o,a,l,s,n,t]),null}const Hg=w.createContext(null);function Fv(r,e){return{getTheme:function(){return e??null}}}function fe(){const r=w.useContext(Hg);return r==null&&function(e,...t){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",e);for(const s of t)i.append("v",s);throw n.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),r}const Vg="id",Kg=1;class $t extends yt{constructor(e,t,n){super(n),ie(this,"__marker"),ie(this,"__code"),ie(this,"__unknownAttributes"),this.__marker=Vg,this.__code=e,this.__unknownAttributes=t}static getType(){return"book"}static clone(e){const{__code:t,__unknownAttributes:n,__key:i}=e;return new $t(t,n,i)}static importJSON(e){const{code:t,unknownAttributes:n}=e;return Bv(t,n).updateFromJSON(e)}static isValidBookCode(e){return i_(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setCode(e){if(this.__code===e)return this;const t=this.getWritable();return t.__code=e,t}getCode(){return this.getLatest().__code}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e.setAttribute("data-code",this.__code),e}updateDOM(){return!1}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),code:this.getCode(),unknownAttributes:this.getUnknownAttributes(),version:Kg}}}function Bv(r,e){return Se(new $t(r,e))}function Ta(r){return r instanceof $t}function qv(r){return(r==null?void 0:r.type)===$t.getType()}const Aa="p",Un=" ",Vl="​",Yo="chapter",Kl="verse",hf="invalid",jv="text-spacing",$v="formatted-font",Uv="marker-",pc="external-usj-mutation",Jg="selection-change",Jl="cursor-change",Gl="annotation-change",Wv=[pc,Jg,Jl,Gl],Gg=1;class Wn extends yt{constructor(e,t,n,i){super(i),ie(this,"__tag"),ie(this,"__marker"),ie(this,"__unknownAttributes"),this.__tag=e,this.__marker=t,this.__unknownAttributes=n}static getType(){return"unknown"}static clone(e){const{__tag:t,__marker:n,__unknownAttributes:i,__key:s}=e;return new Wn(t,n,i,s)}static importJSON(e){const{tag:t,marker:n,unknownAttributes:i}=e;return zv(t,n,i).updateFromJSON(e)}setTag(e){if(this.__tag===e)return this;const t=this.getWritable();return t.__tag=e,t}getTag(){return this.getLatest().__tag}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("unknown");return e.style.display="none",e}updateDOM(){return!1}exportDOM(){return{element:null}}exportJSON(){return{...super.exportJSON(),type:this.getType(),tag:this.getTag(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:Gg}}canBeEmpty(){return!0}isInline(){return!0}extractWithChild(){return!1}excludeFromCopy(e){return e!=="clone"}}function zv(r,e,t){return Se(new Wn(r,e,t))}function Da(r){return r instanceof Wn}const Yg="c",Xg=1;class Ht extends yt{constructor(e,t,n,i,s,o){super(o),ie(this,"__marker"),ie(this,"__number"),ie(this,"__sid"),ie(this,"__altnumber"),ie(this,"__pubnumber"),ie(this,"__unknownAttributes"),this.__marker=Yg,this.__number=e,this.__sid=t,this.__altnumber=n,this.__pubnumber=i,this.__unknownAttributes=s}static getType(){return"chapter"}static clone(e){const{__number:t,__sid:n,__altnumber:i,__pubnumber:s,__unknownAttributes:o,__key:a}=e;return new Ht(t,n,i,s,o,a)}static importJSON(e){const{number:t,sid:n,altnumber:i,pubnumber:s,unknownAttributes:o}=e;return Hv(t,n,i,s,o).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(Yo,`usfm_${this.__marker}`),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),number:this.getNumber(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:Xg}}}function Hv(r,e,t,n,i){return Se(new Ht(r,e,t,n,i))}function gc(r){return r instanceof Ht}function Vv(r){return(r==null?void 0:r.type)===Ht.getType()}const Qg=["fr","fq","fqa","fk","ft","fl","fw","fp","fv","fdc","fm"],Zg=["xo","xop","xk","xq","xt","xta","xot","xnt","xdc"],Kv=["ca","cp","va","vp","add","bk","dc","em","jmp","k","nd","ord","pn","png","qt","rb","rq","sig","sls","tl","w","wa","wg","wh","wj","bd","it","bdit","no","sc","sup","ior","iqt","qac","qs","litl","lik","liv","liv1","liv2","liv3","liv4","liv5",...Qg,...Zg],em=1;class Fe extends yt{constructor(e,t,n){super(n),ie(this,"__marker"),ie(this,"__unknownAttributes"),this.__marker=e,this.__unknownAttributes=t}static getType(){return"char"}static clone(e){const{__marker:t,__unknownAttributes:n,__key:i}=e;return new Fe(t,n,i)}static importJSON(e){const{marker:t,unknownAttributes:n}=e;return tm(t,n).updateFromJSON(e)}static importDOM(){return{span:e=>Gv(e)?{conversion:Jv,priority:1}:null}}static isValidMarker(e){return e!==void 0&&Kv.includes(e)}static isValidFootnoteMarker(e){return e!==void 0&&Qg.includes(e)}static isValidCrossReferenceMarker(e){return e!==void 0&&Zg.includes(e)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&ve(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`)),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:em}}canBeEmpty(){return!1}isInline(){return!0}}function Jv(r){const e=r.getAttribute("data-marker")??"f";return{node:tm(e)}}function tm(r,e){return Se(new Fe(r,e))}function Gv(r){if(!r)return!1;const e=r.getAttribute("data-marker")??"";return Fe.isValidMarker(e)&&r.classList.contains(Fe.getType())}function Fs(r){return r instanceof Fe}function Yv(r){return(r==null?void 0:r.type)===Fe.getType()}const Xv="c",rm=1,nm="span";class Mr extends Ri{constructor(e,t=!1,n,i,s,o,a){super(a),ie(this,"__marker"),ie(this,"__number"),ie(this,"__showMarker"),ie(this,"__sid"),ie(this,"__altnumber"),ie(this,"__pubnumber"),ie(this,"__unknownAttributes"),this.__marker=Xv,this.__number=e,this.__showMarker=t,this.__sid=n,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"immutable-chapter"}static clone(e){const{__number:t,__showMarker:n,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new Mr(t,n,i,s,o,a,l)}static importJSON(e){const{number:t,showMarker:n,sid:i,altnumber:s,pubnumber:o,unknownAttributes:a}=e;return im(t,n,i,s,o,a).updateFromJSON(e)}static importDOM(){return{span:e=>sm(e)?{conversion:Qv,priority:1}:null}}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setShowMarker(e=!1){if(this.__showMarker===e)return this;const t=this.getWritable();return t.__showMarker=e,t}getShowMarker(){return this.getLatest().__showMarker}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement(nm);return e.setAttribute("data-marker",this.__marker),e.classList.add(Yo,`usfm_${this.__marker}`),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&ve(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(Yo,`usfm_${this.getMarker()}`),t.setAttribute("data-number",this.getNumber())),{element:t}}decorate(){return this.getShowMarker()?Na(this.getMarker(),this.getNumber()):this.getNumber()}exportJSON(){return{type:this.getType(),marker:this.getMarker(),number:this.getNumber(),showMarker:this.getShowMarker(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:rm}}isInline(){return!1}isKeyboardSelectable(){return!1}}function Qv(r){const e=r.getAttribute("data-number")??"0";return{node:im(e)}}function im(r,e,t,n,i,s){return Se(new Mr(r,e,t,n,i,s))}function sm(r){return r?r.classList.contains(Yo)&&r.tagName.toLowerCase()===nm:!1}function $i(r){return r instanceof Mr}function Zv(r){return(r==null?void 0:r.type)===Mr.getType()}const om=1;class zn extends rn{static getType(){return"implied-para"}static clone(e){return new zn(e.__key)}static importJSON(e){return pf().updateFromJSON(e)}getMarker(){return Aa}createDOM(){return document.createElement("p")}exportJSON(){return{...super.exportJSON(),type:this.getType(),version:om}}insertNewAfter(e,t){const n=pf();return n.setTextFormat(e.format),n.setTextStyle(e.style),n.setDirection(this.getDirection()),n.setFormat(this.getFormatType()),n.setStyle(this.getTextStyle()),n.setIndent(this.getIndent()),this.insertAfter(n,t),n}}function pf(){return Se(new zn)}function am(r){return r instanceof zn}function lm(r){return(r==null?void 0:r.type)===zn.getType()}const Ln="zmsc-s",ui="zmsc-e",eC=[Ln,ui],tC=["ts-s","ts-e","t-s","t-e","ts","qt1-s","qt1-e","qt2-s","qt2-e","qt3-s","qt3-e","qt4-s","qt4-e","qt5-s","qt5-e","qt-s","qt-e",Ln,ui],um=1;class or extends Ri{constructor(e,t,n,i,s){super(s),ie(this,"__marker"),ie(this,"__sid"),ie(this,"__eid"),ie(this,"__unknownAttributes"),this.__marker=e,this.__sid=t,this.__eid=n,this.__unknownAttributes=i}static getType(){return"ms"}static clone(e){const{__marker:t,__sid:n,__eid:i,__unknownAttributes:s,__key:o}=e;return new or(t,n,i,s,o)}static importJSON(e){const{marker:t,sid:n,eid:i,unknownAttributes:s}=e;return nC(t,n,i,s)}static isValidMarker(e){return e!==void 0&&(tC.includes(e)||e.startsWith("z"))}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setEid(e){if(this.__eid===e)return this;const t=this.getWritable();return t.__eid=e,t}getEid(){return this.getLatest().__eid}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}updateDOM(){return!1}decorate(){return""}exportJSON(){return{type:this.getType(),marker:this.getMarker(),sid:this.getSid(),eid:this.getEid(),unknownAttributes:this.getUnknownAttributes(),version:um}}isKeyboardSelectable(){return!1}}function rC(r){return eC.includes(r)}function nC(r,e,t,n){return Se(new or(r,e,t,n))}function iC(r){return r instanceof or}const sC=["f","fe","ef","x","ex"],cm=1;class mt extends yt{constructor(e,t,n,i,s){super(s),ie(this,"__marker"),ie(this,"__caller"),ie(this,"__category"),ie(this,"__unknownAttributes"),this.__marker=e,this.__caller=t,this.__category=n,this.__unknownAttributes=i}static getType(){return"note"}static clone(e){const{__marker:t,__caller:n,__category:i,__unknownAttributes:s,__key:o}=e;return new mt(t,n,i,s,o)}static importJSON(e){const{marker:t,caller:n,category:i,unknownAttributes:s}=e;return dm(t,n,i,s).updateFromJSON(e)}static importDOM(){return{span:e=>aC(e)?{conversion:oC,priority:1}:null}}static isValidMarker(e){return e!==void 0&&sC.includes(e)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setCaller(e){if(this.__caller===e)return this;const t=this.getWritable();return t.__caller=e,t}getCaller(){return this.getLatest().__caller}setCategory(e){if(this.__category===e)return this;const t=this.getWritable();return t.__category=e,t}getCategory(){return this.getLatest().__category}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e.setAttribute("data-caller",this.__caller),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&ve(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`),t.setAttribute("data-caller",this.getCaller())),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),caller:this.getCaller(),category:this.getCategory(),unknownAttributes:this.getUnknownAttributes(),version:cm}}canBeEmpty(){return!1}isInline(){return!0}}function oC(r){const e=r.getAttribute("data-marker")??"f",t=r.getAttribute("data-caller")??"";return{node:dm(e,t)}}function dm(r,e,t,n){return Se(new mt(r,e,t,n))}function aC(r){if(!r)return!1;const e=r.getAttribute("data-marker")??"";return mt.isValidMarker(e)&&r.classList.contains(mt.getType())}function Pt(r){return r instanceof mt}const lC=["ide","sts","rem","h","toc1","toc2","toc3","toca1","toca2","toca3","imt","imt1","imt2","imt3","imt4","is","is1","is2","ip","ipi","im","imi","ipq","imq","ipr","iq","iq1","iq2","iq3","ili","ili1","ili2","ib","iot","io","io1","io2","io3","io4","iex","imte","imte1","imte2","ie","mt","mt1","mt2","mt3","mt4","mte","mte1","mte2","cl","cd","ms","ms1","ms2","ms3","mr","s","s1","s2","s3","s4","sr","r","d","sp","sd","sd1","sd2","sd3","sd4",Aa,"m","po","cls","pr","pc","pm","pmo","pmc","pmr","pi","pi1","pi2","pi3","mi","lit","nb","q","q1","q2","q3","q4","qr","qc","qa","qm","qm1","qm2","qm3","qd","b","lh","li","li1","li2","li3","li4","lf","lim","lim1","lim2","lim3","lim4","pb"],fm=1;class et extends rn{constructor(e=Aa,t,n){super(n),ie(this,"__marker"),ie(this,"__unknownAttributes"),this.__marker=e,this.__unknownAttributes=t}static getType(){return"para"}static clone(e){const{__marker:t,__unknownAttributes:n,__key:i}=e;return new et(t,n,i)}static importJSON(e){const{marker:t,unknownAttributes:n}=e;return Xo(t,n).updateFromJSON(e)}static importDOM(){return{p:()=>({conversion:uC,priority:1})}}static isValidMarker(e){return e!==void 0&&lC.includes(e)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&ve(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`)),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:fm}}insertNewAfter(e,t){const n=Xo(this.getMarker());return n.setTextFormat(e.format),n.setTextStyle(e.style),n.setDirection(this.getDirection()),n.setFormat(this.getFormatType()),n.setStyle(this.getTextStyle()),n.setIndent(this.getIndent()),this.insertAfter(n,t),n}}function uC(r){const e=r.getAttribute("data-marker")??void 0,t=Xo(e);if(r.style){t.setFormat(r.style.textAlign);const n=parseInt(r.style.textIndent,10)/20;n>0&&t.setIndent(n)}return{node:t}}function Xo(r,e){return Se(new et(r,e))}function Xr(r){return r instanceof et}function cC(r){return(r==null?void 0:r.type)===et.getType()}const hm="v",pm=1;class pt extends At{constructor(e,t,n,i,s,o,a){super(t??e,a),ie(this,"__marker"),ie(this,"__number"),ie(this,"__sid"),ie(this,"__altnumber"),ie(this,"__pubnumber"),ie(this,"__unknownAttributes"),this.__marker=hm,this.__number=e,this.__sid=n,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"verse"}static clone(e){const{__number:t,__text:n,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new pt(t,n,i,s,o,a,l)}static importJSON(e){const{number:t,text:n,sid:i,altnumber:s,pubnumber:o,unknownAttributes:a}=e;return dC(t,n,i,s,o,a).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(e){const t=super.createDOM(e);return t.setAttribute("data-marker",this.__marker),t.classList.add(Kl,`usfm_${this.__marker}`),t.setAttribute("data-number",this.__number),t}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),number:this.getNumber(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:pm}}}function dC(r,e,t,n,i,s){return Se(new pt(r,e,t,n,i,s))}function mc(r){return r instanceof pt}function fC(r){return(r==null?void 0:r.type)===pt.getType()}function hC(r){return Vv(r)||Zv(r)}function wr(r){return gc(r)||$i(r)}function pC(r,e){return r.find(t=>wr(t)&&t.getNumber()===e.toString())}function gC(r,e=!1){return r.find((t,n)=>(!e||n>0)&&wr(t))}function yc(r){var e;if(!r)return;if(wr(r))return r;let t=(e=r.getTopLevelElement())==null?void 0:e.getPreviousSibling();for(;t&&!wr(t);)t=t.getPreviousSibling();if(t&&wr(t))return t}function mC(r){let e=r;for(;e!==null;){if(Pt(e))return e;e=e.getParent()}}function yC(r){return Ta(r)||gc(r)||Fs(r)||$i(r)||am(r)||iC(r)||Xr(r)||Pt(r)||mc(r)||Da(r)}function _C(r){var e;if(r.anchor.type==="element"){const n=r.anchor.getNode(),i=r.anchor.offset;if(i<n.getChildrenSize())return n.getChildAtIndex(i)}const t=r.anchor.getNode();return t.getNextSibling()??((e=t.getParent())==null?void 0:e.getNextSibling())??null}function bC(r){var e;const t=r.anchor.offset;if(r.anchor.type==="element"&&t>0)return r.anchor.getNode().getChildAtIndex(t-1);const n=r.anchor.getNode();return n.getPreviousSibling()??((e=n.getParent())==null?void 0:e.getPreviousSibling())??null}function vC(r,e){const t=P(r)?r:r.getParent(),n=P(e)?e:e.getParent(),i=t&&n?us(t,n):void 0;return i?i.commonAncestor:void 0}function _c(r){return(r==null?void 0:r.type)===At.getType()}function CC(r,e){if(!e)return;const t=r.findIndex(n=>n===e);t&&(r.length=t)}function EC(r,e){if(!e)return r;const t=e.getIndexWithinParent();return r.splice(t+1,r.length-t-1)}function bc(r){return`\\${r}`}function wC(r){return`\\${r}*`}function gm(r,e,t){const n=bc(r);if(e!=null&&e.startsWith(n)){const i=parseInt(e.slice(n.length),10);isNaN(i)||(t=i.toString())}return t}function Na(r,e){let t=bc(r);return e&&(t+=`${Un}${e}`),t+=" ",t}function mm(r){return _c(r)?r.text:Yv(r)?r.children.map(e=>mm(e)).join(""):""}function xC(r){return r.map(e=>mm(e)).join(" ").trim()}function ym(r){return Un+r+" "}function _m(r){return r.reduce((e,t)=>e+(Fs(t)?` ${t.getTextContent()}`:""),"").trim()}function sn(r){const e={...r};return n_.forEach(t=>delete e[t]),Object.keys(e).length===0?void 0:e}function kC(r,e){const t=e.getElementByKey(r.getKey());return t?t.tagName.toLowerCase():void 0}function Be(r){return Object.fromEntries(Object.entries(r).filter(([,e])=>e!==void 0))}function bm(r){if(!r)return;const e=r.getNodes();if(e.length>0)return r.isBackward()?e[e.length-1]:e[0]}function Yl(r,e){if(!e)return(r+1).toString();const t=e.split("-");if(t.length===2)return parseInt(t[1])?`${parseInt(t[1])+1}`:`${parseInt(t[0])+1}`;const n=RegExp(/(\d+)([a-yA-Y]+)/).exec(e);if(!n)return(parseInt(e)+1).toString();const i=String.fromCharCode(n[2].charCodeAt(0)+1);return`${n[1]}${i}`}function vm(r,e){if(!e)return!1;const t=e.split("-").map(n=>parseInt(n));if(t.length<1||t.length>2||t[0]>t[1])throw new Error("isVerseInRange: invalid range");return t.length===1?r===t[0]:t.length===2&&isNaN(t[1])?r>=t[0]:(t.length===2&&isNaN(t[0])||r>=t[0])&&r<=t[1]}function SC(r){return!!r&&r.includes("-")}const Qo="+",Cm=1,Xl="ImmutableNoteCallerNode";class ar extends Ri{constructor(e,t,n,i){super(i),ie(this,"__caller"),ie(this,"__previewText"),ie(this,"__onClick"),this.__caller=e,this.__previewText=t,this.__onClick=n??(()=>{})}static getType(){return"immutable-note-caller"}static clone(e){const{__caller:t,__previewText:n,__onClick:i,__key:s}=e;return new ar(t,n,i,s)}static importJSON(e){const{caller:t,previewText:n,onClick:i}=e;return Em(t,n,i)}static importDOM(){return{span:e=>AC(e)?{conversion:TC,priority:1}:null}}setCaller(e){const t=this.getWritable();t.__caller=e}getCaller(){return this.getLatest().__caller}setPreviewText(e){const t=this.getWritable();t.__previewText=e}getPreviewText(){return this.getLatest().__previewText}setOnClick(e){const t=this.getWritable();t.__onClick=e}getOnClick(){return this.getLatest().__onClick}createDOM(){const e=document.createElement("span");return e.classList.add(this.__type),e.setAttribute("data-caller",this.__caller),e.setAttribute("data-preview-text",this.__previewText),e}updateDOM(e){return e.__caller!==this.__caller}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&ve(t)&&(t.classList.add(this.getType()),t.setAttribute("data-caller",this.getCaller()),t.setAttribute("data-preview-text",this.getPreviewText())),{element:t}}decorate(){const e=`${this.__caller}_${this.__previewText}}`.replace(/\s+/g,"").substring(0,25);return D.jsx("button",{onClick:this.__onClick,title:this.__previewText,"data-caller-id":e,children:this.__caller===Qo?"":this.__caller})}exportJSON(){return{type:this.getType(),caller:this.getCaller(),previewText:this.getPreviewText(),onClick:this.getOnClick(),version:Cm}}isKeyboardSelectable(){return!1}}function TC(r){const e=r.getAttribute("data-caller")??"",t=r.getAttribute("data-preview-text")??"";return{node:Em(e,t)}}function Em(r,e,t){return Se(new ar(r,e,t))}function AC(r){return r?r.classList.contains(ar.getType()):!1}function Bs(r){return r instanceof ar}const DC=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],wm="v",xm=1;class gt extends Ri{constructor(e,t=!1,n,i,s,o,a){super(a),ie(this,"__marker"),ie(this,"__number"),ie(this,"__showMarker"),ie(this,"__sid"),ie(this,"__altnumber"),ie(this,"__pubnumber"),ie(this,"__unknownAttributes"),this.__marker=wm,this.__number=e,this.__showMarker=t,this.__sid=n,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"immutable-verse"}static clone(e){const{__number:t,__showMarker:n,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new gt(t,n,i,s,o,a,l)}static importJSON(e){const{marker:t,number:n,showMarker:i,sid:s,altnumber:o,pubnumber:a,unknownAttributes:l}=e,u=km(n,i,s,o,a,l);return u.setMarker(t),u}static importDOM(){return{span:e=>MC(e)?{conversion:NC,priority:1}:null}}setMarker(e){const t=this.getWritable();t.__marker=e}getMarker(){return this.getLatest().__marker}setNumber(e){const t=this.getWritable();t.__number=e}getNumber(){return this.getLatest().__number}setShowMarker(e=!1){const t=this.getWritable();t.__showMarker=e}getShowMarker(){return this.getLatest().__showMarker}setSid(e){const t=this.getWritable();t.__sid=e}getSid(){return this.getLatest().__sid}setAltnumber(e){const t=this.getWritable();t.__altnumber=e}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){const t=this.getWritable();t.__pubnumber=e}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();t.__unknownAttributes=e}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(Kl,`usfm_${this.__marker}`),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&ve(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(Kl,`usfm_${this.getMarker()}`),t.setAttribute("data-number",this.getNumber())),{element:t}}decorate(){return D.jsx("span",{children:this.getShowMarker()?Na(this.getMarker(),this.getNumber()):Vl+this.getNumber()+Vl})}exportJSON(){return{type:this.getType(),marker:this.getMarker(),number:this.getNumber(),showMarker:this.getShowMarker(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:xm}}isKeyboardSelectable(){return!1}}function NC(r){const e=r.getAttribute("data-number")??"0";return{node:km(e)}}function km(r,e,t,n,i,s){return Se(new gt(r,e,t,n,i,s))}function MC(r){return((r==null?void 0:r.getAttribute("data-marker"))??void 0)===wm}function qs(r){return r instanceof gt}function OC(r){return(r==null?void 0:r.type)===gt.getType()}const jr="comment",ds="TypedMarkNode",IC=[jr],RC=1;class Qe extends yt{constructor(e,t){super(t),ie(this,"__typedIDs"),this.__typedIDs=e||{}}static getType(){return"typed-mark"}static clone(e){const t=JSON.parse(JSON.stringify(e.__typedIDs));return new Qe(t,e.__key)}static isReservedType(e){return IC.includes(e)}static importJSON(e){const{typedIDs:t}=e;return ks(t).updateFromJSON(e)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:this.getType(),typedIDs:this.getTypedIDs(),version:RC}}createDOM(e){const t=document.createElement("mark");for(const[n,i]of Object.entries(this.__typedIDs))st(t,to(e.theme.typedMark,n)),i.length>1&&st(t,to(e.theme.typedMarkOverlap,n));return t}updateDOM(e,t,n){for(const[i,s]of Object.entries(this.__typedIDs)){const o=e.__typedIDs[i].length,a=s.length,l=to(n.theme.typedMark,i),u=to(n.theme.typedMarkOverlap,i);o!==a&&(o===0?a===1&&st(t,l):a===0&&xn(t,l),o===1?a===2&&st(t,u):a===1&&xn(t,u))}return!1}hasID(e,t){const n=this.getTypedIDs()[e];if(!n)return!1;for(let i=0;i<n.length;i++)if(t===n[i])return!0;return!1}getTypedIDs(){const e=this.getLatest();return ut(e)?e.__typedIDs:{}}addID(e,t){const n=this.getWritable();if(!ut(n))return;const i=n.__typedIDs[e]??[];n.__typedIDs[e]=i;for(let s=0;s<i.length;s++)if(t===i[s])return;i.push(t)}deleteID(e,t){const n=this.getWritable();if(!ut(n))return;const i=n.__typedIDs[e];for(let s=0;s<i.length;s++)if(t===i[s]){i.splice(s,1);return}}hasNoIDsForEveryType(){return Object.values(this.getTypedIDs()).every(e=>e===void 0||e.length===0)}insertNewAfter(e,t=!0){const n=ks(this.__typedIDs);return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!F(t)||n==="html")return!1;const i=t.anchor,s=t.focus,o=i.getNode(),a=s.getNode(),l=t.isBackward()?i.offset-s.offset:s.offset-i.offset;return this.isParentOf(o)&&this.isParentOf(a)&&this.getTextContent().length===l}excludeFromCopy(e){return e!=="clone"}}function to(r,e){return`${r}-${e}`}function ks(r){return Se(new Qe(r))}function ut(r){return r instanceof Qe}function LC(r){return(r==null?void 0:r.type)===Qe.getType()}function Sm(r){const e=r.getChildren();let t=null;for(let n=0;n<e.length;n++){const i=e[n];t===null?r.insertBefore(i):t.insertAfter(i),t=i}r.remove()}function Tm(r,e,t,n){const i=r.getNodes(),s=r.anchor.offset,o=r.focus.offset,a=i.length,l=r.isBackward(),u=l?o:s,c=l?s:o;let d,f;for(let h=0;h<a;h++){const g=i[h];if(P(f)&&f.isParentOf(g))continue;const m=h===0,y=h===a-1;let v=null;if(H(g)){const b=g.getTextContentSize(),C=m?u:0,T=y?c:b;if(C===0&&T===0)continue;const R=g.splitText(C,T);v=R.length>1&&(R.length===3||m&&!y||T===b)?R[1]:R[0]}else{if(ut(g))continue;P(g)&&g.isInline()&&(v=g)}if(v!==null){if(v&&v.is(d))continue;const b=v.getParent();(b==null||!b.is(d))&&(f=void 0),d=b,f===void 0&&(f=ks({[e]:[t]}),v.insertBefore(f)),f.append(v)}else d=void 0,f=void 0}e===jr&&P(f)&&(l?f.selectStart():f.selectEnd())}function PC(r,e,t){let n=r;for(;n!==null;){if(ut(n))return n.getTypedIDs()[e];if(H(n)&&t===n.getTextContentSize()){const i=n.getNextSibling();if(ut(i))return i.getTypedIDs()[e]}n=n.getParent()}}function xr(r){return mc(r)||qs(r)}function FC(r){return fC(r)||OC(r)}function BC(r){return r.find(e=>Xr(e))}function qC(r,e){return P(r)?r.getChildren().find(t=>xr(t)&&vm(e,t.getNumber())):void 0}function jC(r,e){return e===0?BC(r):r.map(t=>qC(t,e)).filter(t=>t)[0]}function gf(r){return!r||!P(r)?void 0:r.getChildren().findLast(e=>xr(e))}function Am(r){var e,t;if(!r||wr(r))return;if(xr(r))return r;let n=ut(r.getParent())?(e=r.getParent())==null?void 0:e.getPreviousSibling():r.getPreviousSibling();for(;n&&!xr(n)&&!wr(n);)n=n.getPreviousSibling();if(n&&xr(n))return n;let i=(t=r.getTopLevelElement())==null?void 0:t.getPreviousSibling(),s=gf(i),o=s;for(;i&&!s&&!wr(i);)s=o,i=i.getPreviousSibling(),o=gf(i);if(!(!s&&wr(i)))return s}function $C(r){return yC(r)||qs(r)}function vc(r){if(H(r)){const e=r.getTextContent();!e.endsWith(" ")&&!e.endsWith(Un)&&r.setTextContent(`${e} `)}}function Dm(r){if(H(r)){const e=r.getTextContent();e.startsWith(" ")&&r.setTextContent(e.trimStart())}}function Cc(r,e){return r.getEditorState().read(()=>!me(e))}function UC({scrRef:r,onScrRefChange:e}){const[t]=fe(),n=w.useRef(!1),i=w.useRef(!1),{book:s,chapterNum:o,verseNum:a}=r;return w.useEffect(()=>t.registerMutationListener($t,l=>{t.update(()=>{for(const[u,c]of l){const d=me(u);d&&Ta(d)&&c==="created"&&mf(o,a,i)}},{tag:Jl})},{skipInitialization:!0}),[t,o,a]),w.useEffect(()=>{n.current?n.current=!1:t.update(()=>mf(o,a,i),{tag:Jl})},[t,o,a]),w.useEffect(()=>t.registerCommand(Di,()=>(i.current?i.current=!1:WC(s,o,a,e,n),!1),Li),[t,s,o,a,e]),null}function mf(r,e,t){var n;const i=bm(U()),s=(n=Am(i))==null?void 0:n.getNumber();if(SC(s)&&vm(e,s))return;const o=ke().getChildren(),a=pC(o,r),l=EC(o,a),u=gC(l,!!a);if(u&&!a||!a)return;CC(l,u);const c=jC(l,e);if(c){if(Xr(c)){const d=c.getFirstChild();H(d)?d.select(0,0):c.select(0,0)}else c.selectNext(0,0);t.current=!0}}function WC(r,e,t,n,i){const s=bm(U());if(!s)return;const o=yc(s),a=parseInt((o==null?void 0:o.getNumber())??"1",10),l=Am(s),u=l==null?void 0:l.getNumber(),c=parseInt(u??"0",10);if(i.current=!!(o&&a!==e||c!==t),i.current){const d={book:r,chapterNum:a,verseNum:c};u!=null&&c.toString()!==u&&(d.verse=u),n(d)}}function zC(r,e){const t=e.body?e.body.childNodes:[];let n=[];const i=[];for(let s=0;s<t.length;s++){const o=t[s];if(!Om.has(o.nodeName)){const a=Im(o,r,i,!1);a!==null&&(n=n.concat(a))}}return function(s){for(const o of s)o.getNextSibling()instanceof ju&&o.insertAfter(Dn());for(const o of s){const a=o.getChildren();for(const l of a)o.insertBefore(l);o.remove()}}(i),n}function Nm(r,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const t=document.createElement("div"),n=ke().getChildren();for(let i=0;i<n.length;i++)Mm(r,n[i],t,e);return t.innerHTML}function Mm(r,e,t,n=null){let i=n===null||e.isSelected(n);const s=P(e)&&e.excludeFromCopy("html");let o=e;if(n!==null){let h=Yu(e);h=H(h)&&n!==null?Gp(n,h):h,o=h}const a=P(o)?o.getChildren():[],l=r._nodes.get(o.getType());let u;u=l&&l.exportDOM!==void 0?l.exportDOM(r,o):o.exportDOM(r);const{element:c,after:d}=u;if(!c)return!1;const f=document.createDocumentFragment();for(let h=0;h<a.length;h++){const g=a[h],m=Mm(r,g,f,n);!i&&P(e)&&m&&e.extractWithChild(g,n,"html")&&(i=!0)}if(i&&!s){if((ve(c)||Il(c))&&c.append(f),t.append(c),d){const h=d.call(o,c);h&&(Il(c)?c.replaceChildren(h):c.replaceWith(h))}}else t.append(f);return i}const Om=new Set(["STYLE","SCRIPT"]);function Im(r,e,t,n,i=new Map,s){let o=[];if(Om.has(r.nodeName))return o;let a=null;const l=function(g,m){const{nodeName:y}=g,v=m._htmlConversions.get(y.toLowerCase());let b=null;if(v!==void 0)for(const C of v){const T=C(g);T!==null&&(b===null||(b.priority||0)<=(T.priority||0))&&(b=T)}return b!==null?b.conversion:null}(r,e),u=l?l(r):null;let c=null;if(u!==null){c=u.after;const g=u.node;if(a=Array.isArray(g)?g[g.length-1]:g,a!==null){for(const[,m]of i)if(a=m(a,s),!a)break;a&&o.push(...Array.isArray(g)?g:[a])}u.forChild!=null&&i.set(r.nodeName,u.forChild)}const d=r.childNodes;let f=[];const h=(a==null||!ur(a))&&(a!=null&&Al(a)||n);for(let g=0;g<d.length;g++)f.push(...Im(d[g],e,t,h,new Map(i),a));return c!=null&&(f=c(f)),qo(r)&&(f=HC(r,f,h?()=>{const g=new ju;return t.push(g),g}:Dt)),a==null?f.length>0?o=o.concat(f):qo(r)&&function(g){return g.nextSibling==null||g.previousSibling==null?!1:Rl(g.nextSibling)&&Rl(g.previousSibling)}(r)&&(o=o.concat(Dn())):P(a)&&a.append(...f),o}function HC(r,e,t){const n=r.style.textAlign,i=[];let s=[];for(let o=0;o<e.length;o++){const a=e[o];if(Al(a))n&&!a.getFormat()&&a.setFormat(n),i.push(a);else if(s.push(a),o===e.length-1||o<e.length-1&&Al(e[o+1])){const l=t();l.setFormat(n),l.append(...s),i.push(l),s=[]}}return i}const VC=new Set(["http:","https:","mailto:","sms:","tel:"]);let Rm=class Lm extends yt{static getType(){return"link"}static clone(e){return new Lm(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",t={},n){super(n);const{target:i=null,rel:s=null,title:o=null}=t;this.__url=e,this.__target=i,this.__rel=s,this.__title=o}createDOM(e){const t=document.createElement("a");return t.href=this.sanitizeUrl(this.__url),this.__target!==null&&(t.target=this.__target),this.__rel!==null&&(t.rel=this.__rel),this.__title!==null&&(t.title=this.__title),st(t,e.theme.link),t}updateDOM(e,t,n){if(Up(t)){const i=this.__url,s=this.__target,o=this.__rel,a=this.__title;i!==e.__url&&(t.href=i),s!==e.__target&&(s?t.target=s:t.removeAttribute("target")),o!==e.__rel&&(o?t.rel=o:t.removeAttribute("rel")),a!==e.__title&&(a?t.title=a:t.removeAttribute("title"))}return!1}static importDOM(){return{a:e=>({conversion:KC,priority:1})}}static importJSON(e){return Ql().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){try{const t=new URL(e);if(!VC.has(t.protocol))return"about:blank"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){const t=this.getWritable();return t.__url=e,t}getTarget(){return this.getLatest().__target}setTarget(e){const t=this.getWritable();return t.__target=e,t}getRel(){return this.getLatest().__rel}setRel(e){const t=this.getWritable();return t.__rel=e,t}getTitle(){return this.getLatest().__title}setTitle(e){const t=this.getWritable();return t.__title=e,t}insertNewAfter(e,t=!0){const n=Ql(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!F(t))return!1;const i=t.anchor.getNode(),s=t.focus.getNode();return this.isParentOf(i)&&this.isParentOf(s)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function KC(r){let e=null;if(Up(r)){const t=r.textContent;(t!==null&&t!==""||r.children.length>0)&&(e=Ql(r.getAttribute("href")||"",{rel:r.getAttribute("rel"),target:r.getAttribute("target"),title:r.getAttribute("title")}))}return{node:e}}function Ql(r="",e){return Se(new Rm(r,e))}function JC(r){return r instanceof Rm}const Pm=[];let Fm=class Bm extends yt{static getType(){return"mark"}static clone(e){return new Bm(e.__ids,e.__key)}static importDOM(){return null}static importJSON(e){return yf().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIDs(e.ids)}exportJSON(){return{...super.exportJSON(),ids:this.getIDs()}}constructor(e=Pm,t){super(t),this.__ids=e}createDOM(e){const t=document.createElement("mark");return st(t,e.theme.mark),this.__ids.length>1&&st(t,e.theme.markOverlap),t}updateDOM(e,t,n){const i=e.__ids,s=this.__ids,o=i.length,a=s.length,l=n.theme.markOverlap;return o!==a&&(o===1?a===2&&st(t,l):a===1&&xn(t,l)),!1}hasID(e){return this.getIDs().includes(e)}getIDs(){return Array.from(this.getLatest().__ids)}setIDs(e){const t=this.getWritable();return t.__ids=e,t}addID(e){const t=this.getWritable();return t.__ids.includes(e)?t:t.setIDs([...t.__ids,e])}deleteID(e){const t=this.getWritable(),n=t.__ids.indexOf(e);if(n===-1)return t;const i=Array.from(t.__ids);return i.splice(n,1),t.setIDs(i)}insertNewAfter(e,t=!0){const n=yf(this.__ids);return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!F(t)||n==="html")return!1;const i=t.anchor,s=t.focus,o=i.getNode(),a=s.getNode(),l=t.isBackward()?i.offset-s.offset:s.offset-i.offset;return this.isParentOf(o)&&this.isParentOf(a)&&this.getTextContent().length===l}excludeFromCopy(e){return e!=="clone"}};function yf(r=Pm){return Se(new Fm(r))}function GC(r){return r instanceof Fm}function Zo(r,...e){const t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",r);for(const i of e)n.append("v",i);throw t.search=n.toString(),Error(`Minified Lexical error #${r}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function qm(r,e=U()){return e==null&&Zo(166),F(e)&&e.isCollapsed()||e.getNodes().length===0?"":Nm(r,e)}function YC(r,e=U()){return e==null&&Zo(166),F(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(XC(r,e))}function _f(r,e){const t=r.getData("text/plain")||r.getData("text/uri-list");t!=null&&e.insertRawText(t)}function bf(r,e,t){const n=r.getData("application/x-lexical-editor");if(n)try{const a=JSON.parse(n);if(a.namespace===t._config.namespace&&Array.isArray(a.nodes))return vf(t,QC(a.nodes),e)}catch{}const i=r.getData("text/html"),s=r.getData("text/plain");if(i&&s!==i)try{const a=new DOMParser().parseFromString(function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(l):l}(i),"text/html");return vf(t,zC(t,a),e)}catch{}const o=s||r.getData("text/uri-list");if(o!=null)if(F(e)){const a=o.split(/(\r?\n|\t)/);a[a.length-1]===""&&a.pop();for(let l=0;l<a.length;l++){const u=U();if(F(u)){const c=a[l];c===`
`||c===`\r
`?u.insertParagraph():c==="	"?u.insertNodes([Ds()]):u.insertText(c)}}}else e.insertRawText(o)}function vf(r,e,t){r.dispatchCommand(_2,{nodes:e,selection:t})||t.insertNodes(e)}function jm(r,e,t,n=[]){let i=e===null||t.isSelected(e);const s=P(t)&&t.excludeFromCopy("html");let o=t;if(e!==null){let u=Yu(t);u=H(u)&&e!==null?Gp(e,u):u,o=u}const a=P(o)?o.getChildren():[],l=function(u){const c=u.exportJSON(),d=u.constructor;if(c.type!==d.getType()&&Zo(58,d.name),P(u)){const f=c.children;Array.isArray(f)||Zo(59,d.name)}return c}(o);if(H(o)){const u=o.__text;u.length>0?l.text=u:i=!1}for(let u=0;u<a.length;u++){const c=a[u],d=jm(r,e,c,l.children);!i&&P(t)&&d&&t.extractWithChild(c,e,"clone")&&(i=!0)}if(i&&!s)n.push(l);else if(Array.isArray(l.children))for(let u=0;u<l.children.length;u++){const c=l.children[u];n.push(c)}return i}function XC(r,e){const t=[],n=ke().getChildren();for(let i=0;i<n.length;i++)jm(r,e,n[i],t);return{namespace:r._config.namespace,nodes:t}}function QC(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t],i=Sp(n);H(i)&&T0(i),e.push(i)}return e}let Zn=null;async function Cf(r,e,t){if(Zn!==null)return!1;if(e!==null)return new Promise((u,c)=>{r.update(()=>{u(Ef(r,e,t))})});const n=r.getRootElement(),i=r._window||window,s=window.document,o=jt(i);if(n===null||o===null)return!1;const a=s.createElement("span");a.style.cssText="position: fixed; top: -1000px;",a.append(s.createTextNode("#")),n.append(a);const l=new Range;return l.setStart(a,0),l.setEnd(a,1),o.removeAllRanges(),o.addRange(l),new Promise((u,c)=>{const d=r.registerCommand(qn,f=>(Cr(f,ClipboardEvent)&&(d(),Zn!==null&&(window.clearTimeout(Zn),Zn=null),u(Ef(r,f,t))),!0),ls);Zn=window.setTimeout(()=>{d(),Zn=null,u(!1)},50),s.execCommand("copy"),a.remove()})}function Ef(r,e,t){if(t===void 0){const i=jt(r._window);if(!i)return!1;const s=i.anchorNode,o=i.focusNode;if(s!==null&&o!==null&&!Os(r,s,o))return!1;const a=U();if(a===null)return!1;t=eE(a)}e.preventDefault();const n=e.clipboardData;return n!==null&&(tE(n,t),!0)}const ZC=[["text/html",qm],["application/x-lexical-editor",YC]];function eE(r=U()){const e={"text/plain":r?r.getTextContent():""};if(r){const t=Gu();for(const[n,i]of ZC){const s=i(t,r);s!==null&&(e[n]=s)}}return e}function tE(r,e){for(const t in e){const n=e[t];n!==void 0&&r.setData(t,n)}}const Ec=/^(\d+(?:\.\d+)?)px$/,ci={BOTH:3,NO_STATUS:0,ROW:1};class js extends yt{static getType(){return"tablecell"}static clone(e){return new js(e.__headerState,e.__colSpan,e.__width,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__rowSpan=e.__rowSpan,this.__backgroundColor=e.__backgroundColor,this.__verticalAlign=e.__verticalAlign}static importDOM(){return{td:e=>({conversion:wf,priority:0}),th:e=>({conversion:wf,priority:0})}}static importJSON(e){return $m().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHeaderStyles(e.headerState).setColSpan(e.colSpan||1).setRowSpan(e.rowSpan||1).setWidth(e.width||void 0).setBackgroundColor(e.backgroundColor||null).setVerticalAlign(e.verticalAlign||void 0)}constructor(e=ci.NO_STATUS,t=1,n,i){super(i),this.__colSpan=t,this.__rowSpan=1,this.__headerState=e,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(e){const t=document.createElement(this.getTag());return this.__width&&(t.style.width=`${this.__width}px`),this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(t.style.backgroundColor=this.__backgroundColor),Zl(this.__verticalAlign)&&(t.style.verticalAlign=this.__verticalAlign),st(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){const t=super.exportDOM(e);if(ve(t.element)){const n=t.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return t}exportJSON(){return{...super.exportJSON(),...Zl(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(e){const t=this.getWritable();return t.__colSpan=e,t}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(e){const t=this.getWritable();return t.__rowSpan=e,t}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e,t=ci.BOTH){const n=this.getWritable();return n.__headerState=e&t|n.__headerState&~t,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){const t=this.getWritable();return t.__width=e,t}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){const t=this.getWritable();return t.__backgroundColor=e,t}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(e){const t=this.getWritable();return t.__verticalAlign=e||void 0,t}toggleHeaderStyle(e){const t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==ci.NO_STATUS}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor||e.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function Zl(r){return r==="middle"||r==="bottom"}function wf(r){const e=r,t=r.nodeName.toLowerCase();let n;Ec.test(e.style.width)&&(n=parseFloat(e.style.width));const i=$m(t==="th"?ci.ROW:ci.NO_STATUS,e.colSpan,n);i.__rowSpan=e.rowSpan;const s=e.style.backgroundColor;s!==""&&(i.__backgroundColor=s);const o=e.style.verticalAlign;Zl(o)&&(i.__verticalAlign=o);const a=e.style,l=(a&&a.textDecoration||"").split(" "),u=a.fontWeight==="700"||a.fontWeight==="bold",c=l.includes("line-through"),d=a.fontStyle==="italic",f=l.includes("underline");return{after:h=>{const g=[];let m=null;const y=()=>{if(m){const v=m.getFirstChild();Cn(v)&&m.getChildrenSize()===1&&v.remove()}};for(const v of h)n0(v)||H(v)||Cn(v)?(H(v)&&(u&&v.toggleFormat("bold"),c&&v.toggleFormat("strikethrough"),d&&v.toggleFormat("italic"),f&&v.toggleFormat("underline")),m?m.append(v):(m=Dt().append(v),g.push(m))):(g.push(v),y(),m=null);return y(),g.length===0&&g.push(Dt()),g},node:i}}function $m(r=ci.NO_STATUS,e=1,t){return Se(new js(r,e,t))}function Tt(r){return r instanceof js}function Pe(r,...e){const t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",r);for(const i of e)n.append("v",i);throw t.search=n.toString(),Error(`Minified Lexical error #${r}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class Ma extends yt{static getType(){return"tablerow"}static clone(e){return new Ma(e.__height,e.__key)}static importDOM(){return{tr:e=>({conversion:rE,priority:0})}}static importJSON(e){return Um().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHeight(e.height)}constructor(e,t){super(t),this.__height=e}exportJSON(){const e=this.getHeight();return{...super.exportJSON(),...e===void 0?void 0:{height:e}}}createDOM(e){const t=document.createElement("tr");return this.__height&&(t.style.height=`${this.__height}px`),st(t,e.theme.tableRow),t}extractWithChild(e,t,n){return n==="html"}isShadowRoot(){return!0}setHeight(e){const t=this.getWritable();return t.__height=e,t}getHeight(){return this.getLatest().__height}updateDOM(e){return e.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function rE(r){const e=r;let t;return Ec.test(e.style.height)&&(t=parseFloat(e.style.height)),{after:n=>Zp(n,Tt),node:Um(t)}}function Um(r){return Se(new Ma(r))}function $s(r){return r instanceof Ma}const Wm=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,nE=Wm&&"documentMode"in document?document.documentMode:null;Wm&&"InputEvent"in window&&!nE&&new window.InputEvent("input");function iE(r,e,t){const[n,i,s]=zm(r,e,t);return i===null&&Pe(207),s===null&&Pe(208),[n,i,s]}function zm(r,e,t){const n=[];let i=null,s=null;function o(l){let u=n[l];return u===void 0&&(n[l]=u=[]),u}const a=r.getChildren();for(let l=0;l<a.length;l++){const u=a[l];$s(u)||Pe(209);const c=o(l);for(let d=u.getFirstChild(),f=0;d!=null;d=d.getNextSibling()){for(Tt(d)||Pe(147);c[f]!==void 0;)f++;const h={cell:d,startColumn:f,startRow:l},{__rowSpan:g,__colSpan:m}=d;for(let y=0;y<g&&!(l+y>=a.length);y++){const v=o(l+y);for(let b=0;b<m;b++)v[f+b]=h}e!==null&&i===null&&e.is(d)&&(i=h),t!==null&&s===null&&t.is(d)&&(s=h)}}return[n,i,s]}function sE(r){let e;if(r instanceof js)e=r;else if("__type"in r){const i=Gr(r,Tt);Tt(i)||Pe(148),e=i}else{const i=Gr(r.getNode(),Tt);Tt(i)||Pe(148),e=i}const t=e.getParent();$s(t)||Pe(149);const n=t.getParent();return Jm(n)||Pe(210),[e,t,n]}function oE(r,e,t){let n,i=Math.min(e.startColumn,t.startColumn),s=Math.min(e.startRow,t.startRow),o=Math.max(e.startColumn+e.cell.__colSpan-1,t.startColumn+t.cell.__colSpan-1),a=Math.max(e.startRow+e.cell.__rowSpan-1,t.startRow+t.cell.__rowSpan-1);do{n=!1;for(let l=0;l<r.length;l++)for(let u=0;u<r[0].length;u++){const c=r[l][u];if(!c)continue;const d=c.startColumn+c.cell.__colSpan-1,f=c.startRow+c.cell.__rowSpan-1,h=c.startColumn<=o&&d>=i,g=c.startRow<=a&&f>=s;if(h&&g){const m=Math.min(i,c.startColumn),y=Math.max(o,d),v=Math.min(s,c.startRow),b=Math.max(a,f);m===i&&y===o&&v===s&&b===a||(i=m,o=y,s=v,a=b,n=!0)}}}while(n);return{maxColumn:o,maxRow:a,minColumn:i,minRow:s}}function xf(r){const[e,,t]=sE(r),n=t.getChildren(),i=n.length,s=n[0].getChildren().length,o=new Array(i);for(let a=0;a<i;a++)o[a]=new Array(s);for(let a=0;a<i;a++){const l=n[a].getChildren();let u=0;for(let c=0;c<l.length;c++){for(;o[a][u];)u++;const d=l[c],f=d.__rowSpan||1,h=d.__colSpan||1;for(let g=0;g<f;g++)for(let m=0;m<h;m++)o[a+g][u+m]=d;if(e===d)return{colSpan:h,columnIndex:u,rowIndex:a,rowSpan:f};u+=h}}return null}function kf(r){const[[e,t,n,i],[s,o,a,l]]=["anchor","focus"].map(u=>{const c=r[u].getNode(),d=Gr(c,Tt);Tt(d)||Pe(238,u,c.getKey(),c.getType());const f=d.getParent();$s(f)||Pe(239,u);const h=f.getParent();return Jm(h)||Pe(240,u),[c,d,f,h]});return i.is(l)||Pe(241),{anchorCell:t,anchorNode:e,anchorRow:n,anchorTable:i,focusCell:o,focusNode:s,focusRow:a,focusTable:l}}let aE=class Hm{constructor(e,t,n){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e}getStartEndPoints(){return[this.anchor,this.focus]}isValid(){return this.tableKey!=="root"&&this.anchor.key!=="root"&&this.anchor.type==="element"&&this.focus.key!=="root"&&this.focus.type==="element"}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return Vm(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)}set(e,t,n){this.dirty=this.dirty||e!==this.tableKey||t!==this.anchor.key||n!==this.focus.key,this.tableKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null}clone(){return new Hm(this.tableKey,Et(this.anchor.key,this.anchor.offset,this.anchor.type),Et(this.focus.key,this.focus.offset,this.focus.type))}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(e){}insertText(){}hasFormat(e){let t=0;this.getNodes().filter(Tt).forEach(i=>{const s=i.getFirstChild();$u(s)&&(t|=s.getTextFormat())});const n=Hr[e];return!!(t&n)}insertNodes(e){const t=this.focus.getNode();P(t)||Pe(151),hs(t.select(0,t.getChildrenSize())).insertNodes(e)}getShape(){const{anchorCell:e,focusCell:t}=kf(this),n=xf(e);n===null&&Pe(153);const i=xf(t);i===null&&Pe(155);const s=Math.min(n.columnIndex,i.columnIndex),o=Math.max(n.columnIndex+n.colSpan-1,i.columnIndex+i.colSpan-1),a=Math.min(n.rowIndex,i.rowIndex),l=Math.max(n.rowIndex+n.rowSpan-1,i.rowIndex+i.rowSpan-1);return{fromX:Math.min(s,o),fromY:Math.min(a,l),toX:Math.max(s,o),toY:Math.max(a,l)}}getNodes(){if(!this.isValid())return[];const e=this._cachedNodes;if(e!==null)return e;const{anchorTable:t,anchorCell:n,focusCell:i}=kf(this),s=i.getParents()[1];if(s!==t){if(t.isParentOf(i)){const y=s.getParent();y==null&&Pe(159),this.set(this.tableKey,i.getKey(),y.getKey())}else{const y=t.getParent();y==null&&Pe(158),this.set(this.tableKey,y.getKey(),i.getKey())}return this.getNodes()}const[o,a,l]=iE(t,n,i),{minColumn:u,maxColumn:c,minRow:d,maxRow:f}=oE(o,a,l),h=new Map([[t.getKey(),t]]);let g=null;for(let y=d;y<=f;y++)for(let v=u;v<=c;v++){const{cell:b}=o[y][v],C=b.getParent();$s(C)||Pe(160),C!==g&&(h.set(C.getKey(),C),g=C),h.has(b.getKey())||lE(b,T=>{h.set(T.getKey(),T)})}const m=Array.from(h.values());return Ii()||(this._cachedNodes=m),m}getTextContent(){const e=this.getNodes().filter(n=>Tt(n));let t="";for(let n=0;n<e.length;n++){const i=e[n],s=i.__parent,o=(e[n+1]||{}).__parent;t+=i.getTextContent()+(o!==s?`
`:"	")}return t}};function Vm(r){return r instanceof aE}function lE(r,e){const t=[[r]];for(let n=t.at(-1);n!==void 0&&t.length>0;n=t.at(-1)){const i=n.pop();i===void 0?t.pop():e(i)!==!1&&P(i)&&t.push(i.getChildren())}}function es(r){return ve(r)&&r.nodeName==="TABLE"}function uE(r,e){for(let t=e,n=null;t!==null;t=t.getParent()){if(r.is(t))return n;Tt(t)&&(n=t)}return null}function cE(r,e,t){return uE(r,Kr(e,t))}function Sf(r,e,t){if(!e.theme.tableAlignment)return;const n=[],i=[];for(const s of["center","right"]){const o=e.theme.tableAlignment[s];o&&(s===t?i:n).push(o)}xn(r,...n),st(r,...i)}const dE=new WeakSet;function Tf(r=Gu()){return dE.has(r)}class Oa extends yt{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(e){const t=this.getWritable();return t.__colWidths=e,t}static clone(e){return new Oa(e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__colWidths=e.__colWidths,this.__rowStriping=e.__rowStriping,this.__frozenColumnCount=e.__frozenColumnCount,this.__frozenRowCount=e.__frozenRowCount}static importDOM(){return{table:e=>({conversion:fE,priority:1})}}static importJSON(e){return Km().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setRowStriping(e.rowStriping||!1).setFrozenColumns(e.frozenColumnCount||0).setFrozenRows(e.frozenRowCount||0).setColWidths(e.colWidths)}constructor(e){super(e),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(e,t,n){return n==="html"}getDOMSlot(e){const t=es(e)?e:e.querySelector("table");return es(t)||Pe(229),super.getDOMSlot(e).withElement(t).withAfter(t.querySelector("colgroup"))}createDOM(e,t){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const i=document.createElement("colgroup");if(n.appendChild(i),u0(i),st(n,e.theme.table),this.updateTableElement(null,n,e),Tf(t)){const s=document.createElement("div"),o=e.theme.tableScrollableWrapper;return o?st(s,o):s.style.cssText="overflow-x: auto;",s.appendChild(n),this.updateTableWrapper(null,s,n,e),s}return n}updateTableWrapper(e,t,n,i){this.__frozenColumnCount!==(e?e.__frozenColumnCount:0)&&function(s,o,a,l){l>0?(st(s,a.theme.tableFrozenColumn),o.setAttribute("data-lexical-frozen-column","true")):(xn(s,a.theme.tableFrozenColumn),o.removeAttribute("data-lexical-frozen-column"))}(t,n,i,this.__frozenColumnCount),this.__frozenRowCount!==(e?e.__frozenRowCount:0)&&function(s,o,a,l){l>0?(st(s,a.theme.tableFrozenRow),o.setAttribute("data-lexical-frozen-row","true")):(xn(s,a.theme.tableFrozenRow),o.removeAttribute("data-lexical-frozen-row"))}(t,n,i,this.__frozenRowCount)}updateTableElement(e,t,n){this.__style!==(e?e.__style:"")&&(t.style.cssText=this.__style),this.__rowStriping!==(!!e&&e.__rowStriping)&&function(i,s,o){o?(st(i,s.theme.tableRowStriping),i.setAttribute("data-lexical-row-striping","true")):(xn(i,s.theme.tableRowStriping),i.removeAttribute("data-lexical-row-striping"))}(t,n,this.__rowStriping),function(i,s,o,a){const l=i.querySelector("colgroup");if(!l)return;const u=[];for(let c=0;c<o;c++){const d=document.createElement("col"),f=a&&a[c];f&&(d.style.width=`${f}px`),u.push(d)}l.replaceChildren(...u)}(t,0,this.getColumnCount(),this.getColWidths()),Sf(t,n,this.getFormatType())}updateDOM(e,t,n){const i=this.getDOMSlot(t).element;return t===i===Tf()||(ve(s=t)&&s.nodeName==="DIV"&&this.updateTableWrapper(e,t,i,n),this.updateTableElement(e,i,n),!1);var s}exportDOM(e){const t=super.exportDOM(e),{element:n}=t;return{after:i=>{if(t.after&&(i=t.after(i)),!es(i)&&ve(i)&&(i=i.querySelector("table")),!es(i))return null;Sf(i,e._config,this.getFormatType());const[s]=zm(this,null,null),o=new Map;for(const c of s)for(const d of c){const f=d.cell.getKey();o.has(f)||o.set(f,{colSpan:d.cell.getColSpan(),startColumn:d.startColumn})}const a=new Set;for(const c of i.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const d=c.getAttribute("data-temporary-table-cell-lexical-key");if(d){const f=o.get(d);if(c.removeAttribute("data-temporary-table-cell-lexical-key"),f){o.delete(d);for(let h=0;h<f.colSpan;h++)a.add(h+f.startColumn)}}}const l=i.querySelector(":scope > colgroup");if(l){const c=Array.from(i.querySelectorAll(":scope > colgroup > col")).filter((d,f)=>a.has(f));l.replaceChildren(...c)}const u=i.querySelectorAll(":scope > tr");if(u.length>0){const c=document.createElement("tbody");for(const d of u)c.appendChild(d);i.append(c)}return i},element:!es(n)&&ve(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(e,t){const{rows:n,domRows:i}=t;for(let s=0;s<n;s++){const o=i[s];if(o!=null)for(let a=0;a<o.length;a++){const l=o[a];if(l==null)continue;const{elem:u}=l,c=cE(this,u);if(c!==null&&e.is(c))return{x:a,y:s}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(e,t,n){const{domRows:i}=n,s=i[t];return s==null?null:s[e<s.length?e:s.length-1]??null}getDOMCellFromCordsOrThrow(e,t,n){const i=this.getDOMCellFromCords(e,t,n);if(!i)throw new Error("Cell not found at cords.");return i}getCellNodeFromCords(e,t,n){const i=this.getDOMCellFromCords(e,t,n);if(i==null)return null;const s=Kr(i.elem);return Tt(s)?s:null}getCellNodeFromCordsOrThrow(e,t,n){const i=this.getCellNodeFromCords(e,t,n);if(!i)throw new Error("Node at cords not TableCellNode.");return i}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(e){const t=this.getWritable();return t.__rowStriping=e,t}setFrozenColumns(e){const t=this.getWritable();return t.__frozenColumnCount=e,t}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(e){const t=this.getWritable();return t.__frozenRowCount=e,t}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const e=this.getFirstChild();if(!e)return 0;let t=0;return e.getChildren().forEach(n=>{Tt(n)&&(t+=n.getColSpan())}),t}}function fE(r){const e=Km();r.hasAttribute("data-lexical-row-striping")&&e.setRowStriping(!0),r.hasAttribute("data-lexical-frozen-column")&&e.setFrozenColumns(1),r.hasAttribute("data-lexical-frozen-row")&&e.setFrozenRows(1);const t=r.querySelector(":scope > colgroup");if(t){let n=[];for(const i of t.querySelectorAll(":scope > col")){let s=i.style.width||"";if(!Ec.test(s)&&(s=i.getAttribute("width")||"",!/^\d+$/.test(s))){n=void 0;break}n.push(parseFloat(s))}n&&e.setColWidths(n)}return{after:n=>Zp(n,$s),node:e}}function Km(){return Se(new Oa)}function Jm(r){return r instanceof Oa}const Gm=Object.freeze({"	":"\\t","\n":"\\n"}),Af=new RegExp(Object.keys(Gm).join("|"),"g"),Zt=Object.freeze({ancestorHasNextSibling:"|",ancestorIsLastChild:" ",hasNextSibling:"├",isLastChild:"└",selectedChar:"^",selectedLine:">"}),hE=[r=>r.hasFormat("bold")&&"Bold",r=>r.hasFormat("code")&&"Code",r=>r.hasFormat("italic")&&"Italic",r=>r.hasFormat("strikethrough")&&"Strikethrough",r=>r.hasFormat("subscript")&&"Subscript",r=>r.hasFormat("superscript")&&"Superscript",r=>r.hasFormat("underline")&&"Underline",r=>r.hasFormat("highlight")&&"Highlight"],pE=[r=>r.hasTextFormat("bold")&&"Bold",r=>r.hasTextFormat("code")&&"Code",r=>r.hasTextFormat("italic")&&"Italic",r=>r.hasTextFormat("strikethrough")&&"Strikethrough",r=>r.hasTextFormat("subscript")&&"Subscript",r=>r.hasTextFormat("superscript")&&"Superscript",r=>r.hasTextFormat("underline")&&"Underline",r=>r.hasTextFormat("highlight")&&"Highlight"],gE=[r=>r.isDirectionless()&&"Directionless",r=>r.isUnmergeable()&&"Unmergeable"],mE=[r=>r.isToken()&&"Token",r=>r.isSegmented()&&"Segmented"];function yE(r,e,t,n,i=!1){const s=r.getEditorState(),o=r._config,a=r._compositionKey,l=r._editable;if(t){let f="";return s.read(()=>{f=function(h){const g=document.createElement("div");return g.innerHTML=h.trim(),Xm(g,0).innerHTML}(Nm(r))}),f}let u=` root
`;const c=s.read(()=>{const f=U();return Ym(ke(),(h,g)=>{const m=`(${h.getKey()})`,y=h.getType()||"",v=h.isSelected();u+=`${v?Zt.selectedLine:" "} ${g.join(" ")} ${m} ${y} ${function(b,C,T=!1){const R=C?C(b,T):void 0;if(R!==void 0&&R.length>0)return R;if(H(b)){const E=b.getTextContent(),A=E.length===0?"(empty)":`"${Df(E,T)}"`,k=function(S){return[Nf(S),_E(S),bE(S)].filter(Boolean).join(", ")}(b);return[A,k.length!==0?`{ ${k} }`:null].filter(Boolean).join(" ").trim()}if(JC(b)){const E=b.getURL(),A=E.length===0?"(empty)":`"${Df(E,T)}"`,k=function(S){return[vE(S),CE(S),EE(S)].filter(Boolean).join(", ")}(b);return[A,k.length!==0?`{ ${k} }`:null].filter(Boolean).join(" ").trim()}if(GC(b))return`ids: [ ${b.getIDs().join(", ")} ]`;if($u(b)){const E=function(k){let S=pE.map(L=>L(k)).filter(Boolean).join(", ").toLocaleLowerCase();return S!==""&&(S="format: "+S),S}(b);let A=E!==""?`{ ${E} }`:"";return A+=b.__style?`(${b.__style})`:"",A}return""}(h,n,i)}
`,u+=function({indent:b,isSelected:C,node:T,nodeKeyDisplay:R,selection:E,typeDisplay:A}){if(!H(T)||!F(E)||!C||P(T))return"";const k=E.anchor,S=E.focus;if(T.getTextContent()===""||k.getNode()===E.focus.getNode()&&k.offset===S.offset)return"";const[L,q]=function($,V){const W=V.getStartEndPoints();if(dt(V)||W===null)return[-1,-1];const[Y,se]=W,te=$.getTextContent(),Q=te.length;let Z=-1,ne=-1;if(Y.type==="text"&&se.type==="text"){const De=Y.getNode(),Ne=se.getNode();De===Ne&&$===De&&Y.offset!==se.offset?[Z,ne]=Y.offset<se.offset?[Y.offset,se.offset]:[se.offset,Y.offset]:[Z,ne]=$===De?De.isBefore(Ne)?[Y.offset,Q]:[0,Y.offset]:$===Ne?Ne.isBefore(De)?[se.offset,Q]:[0,se.offset]:[0,Q]}const ue=(te.slice(0,Z).match(Af)||[]).length,Ee=(te.slice(Z,ne).match(Af)||[]).length;return[Z+ue,ne+ue+Ee]}(T,E);if(L===q)return"";const X=b[b.length-1]===Zt.hasNextSibling?Zt.ancestorHasNextSibling:Zt.ancestorIsLastChild,j=[...b.slice(0,b.length-1),X],G=Array(L+1).fill(" "),O=Array(q-L).fill(Zt.selectedChar),B=A.length+2,z=Array(R.length+B).fill(" ");return[Zt.selectedLine,j.join(" "),[...z,...G,...O].join("")].join(" ")+`
`}({indent:g,isSelected:v,node:h,nodeKeyDisplay:m,selection:f,typeDisplay:y})}),f===null?": null":F(f)?function(h){let g="";const m=Nf(h);g+=`: range ${m!==""?`{ ${m} }`:""} ${h.style!==""?`{ style: ${h.style} } `:""}`;const y=h.anchor,v=h.focus,b=y.offset,C=v.offset;return g+=`
  ├ anchor { key: ${y.key}, offset: ${b===null?"null":b}, type: ${y.type} }`,g+=`
  └ focus { key: ${v.key}, offset: ${C===null?"null":C}, type: ${v.type} }`,g}(f):Vm(f)?function(h){return`: table
  └ { table: ${h.tableKey}, anchorCell: ${h.anchor.key}, focusCell: ${h.focus.key} }`}(f):function(h){return dt(h)?`: node
  └ [${Array.from(h._nodes).join(", ")}]`:""}(f)});if(u+=`
 selection`+c,u+=`

 commands:`,e.length)for(const{index:f,type:h,payload:g}of e)u+=`
  └ ${f}. { type: ${h}, payload: ${g instanceof Event?g.constructor.name:g} }`;else u+=`
  └ None dispatched.`;const{version:d}=r.constructor;return u+=`

 editor${d?` (v${d})`:""}:`,u+=`
  └ namespace ${o.namespace}`,a!==null&&(u+=`
  └ compositionKey ${a}`),u+=`
  └ editable ${String(l)}`,u}function Ym(r,e,t=[]){const n=r.getChildren(),i=n.length;n.forEach((s,o)=>{e(s,t.concat(o===i-1?Zt.isLastChild:Zt.hasNextSibling)),P(s)&&Ym(s,e,t.concat(o===i-1?Zt.ancestorIsLastChild:Zt.ancestorHasNextSibling))})}function Df(r,e=!1){const t=Object.entries(Gm).reduce((n,[i,s])=>n.replace(new RegExp(i,"g"),String(s)),r);return e?t.replace(/[^\s]/g,"*"):t}function _E(r){let e=gE.map(t=>t(r)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="detail: "+e),e}function bE(r){let e=mE.map(t=>t(r)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="mode: "+e),e}function Nf(r){let e=hE.map(t=>t(r)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="format: "+e),e}function vE(r){let e=r.getTarget();return e!=null&&(e="target: "+e),e}function CE(r){let e=r.getRel();return e!=null&&(e="rel: "+e),e}function EE(r){let e=r.getTitle();return e!=null&&(e="title: "+e),e}function Xm(r,e){const t=new Array(1+e++).join("  "),n=new Array(e-1).join("  ");let i;for(let s=0;s<r.children.length;s++)i=document.createTextNode(`
`+t),r.insertBefore(i,r.children[s]),Xm(r.children[s],e),r.lastElementChild===r.children[s]&&(i=document.createTextNode(`
`+n),r.appendChild(i));return r}const wE=w.forwardRef(function({treeTypeButtonClassName:r,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:n,viewClassName:i,timeTravelPanelClassName:s,editorState:o,setEditorState:a,setEditorReadOnly:l,generateContent:u,commandsLog:c=[]},d){const[f,h]=w.useState([]),[g,m]=w.useState(""),[y,v]=w.useState(!1),[b,C]=w.useState(!1),T=w.useRef(0),R=w.useRef(null),[E,A]=w.useState(!1),[k,S]=w.useState(!1),[L,q]=w.useState(!1),X=w.useRef(),j=w.useRef([]),G=w.useRef(0),O=w.useCallback(z=>{const $=++G.current;u(z).then(V=>{$===G.current&&m(V)}).catch(V=>{$===G.current&&m(`Error rendering tree: ${V.message}

Stack:
${V.stack}`)})},[u]);w.useEffect(()=>{if(!(!L&&o._nodeMap.size>1e3&&(S(!0),!L))&&(X.current!==o||j.current!==c)){const z=X.current!==o;X.current=o,j.current=c,O(b),!y&&z&&h($=>[...$,[Date.now(),o]])}},[o,O,b,L,y,c]);const B=f.length;return w.useEffect(()=>{if(E){let z;const $=()=>{const V=T.current;if(V===B-1)return void A(!1);const W=f[V][0],Y=f[V+1][0];z=setTimeout(()=>{T.current++;const se=T.current,te=R.current;te!==null&&(te.value=String(se)),a(f[se][1]),$()},Y-W)};return $(),()=>{clearTimeout(z)}}},[f,E,B,a]),D.jsxs("div",{className:i,children:[!L&&k?D.jsxs("div",{style:{padding:20},children:[D.jsx("span",{style:{marginRight:20},children:"Detected large EditorState, this can impact debugging performance."}),D.jsx("button",{onClick:()=>{q(!0)},style:{background:"transparent",border:"1px solid white",color:"white",cursor:"pointer",padding:5},children:"Show full tree"})]}):null,L?null:D.jsx("button",{onClick:()=>(O(!b),void C(!b)),className:r,type:"button",children:b?"Tree":"Export DOM"}),!y&&(L||!k)&&B>2&&D.jsx("button",{onClick:()=>{l(!0),T.current=B-1,v(!0)},className:e,type:"button",children:"Time Travel"}),(L||!k)&&D.jsx("pre",{ref:d,children:g}),y&&(L||!k)&&D.jsxs("div",{className:s,children:[D.jsx("button",{className:n,onClick:()=>{T.current===B-1&&(T.current=1),A(!E)},type:"button",children:E?"Pause":"Play"}),D.jsx("input",{className:t,ref:R,onChange:z=>{const $=Number(z.target.value),V=f[$];V&&(T.current=$,a(V[1]))},type:"range",min:"1",max:B-1}),D.jsx("button",{className:n,onClick:()=>{l(!1);const z=f.length-1,$=f[z];a($[1]);const V=R.current;V!==null&&(V.value=String(z)),v(!1),A(!1)},type:"button",children:"Exit"})]})]})});function xE(r,e){const t=new Set;let n=0;for(const[i]of r._commands)t.add(r.registerCommand(i,s=>(e(o=>{n+=1;const a=[...o];return a.push({index:n,payload:s,type:i.type?i.type:"UNKNOWN"}),a.length>10&&a.shift(),a}),!1),ls));return()=>t.forEach(i=>i())}function kE(r){const[e,t]=w.useState([]);return w.useEffect(()=>xE(r,t),[r]),w.useMemo(()=>e,[e])}function SE({treeTypeButtonClassName:r,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:n,timeTravelPanelClassName:i,viewClassName:s,editor:o,customPrintNode:a}){const l=w.createRef(),[u,c]=w.useState(o.getEditorState()),d=kE(o);return w.useEffect(()=>Ve(o.registerUpdateListener(({editorState:f})=>{c(f)}),o.registerEditableListener(()=>{c(o.getEditorState())})),[o]),w.useEffect(()=>{const f=l.current;if(f!==null)return f.__lexicalEditor=o,()=>{f.__lexicalEditor=null}},[o,l]),D.jsx(wE,{treeTypeButtonClassName:r,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:n,viewClassName:s,timeTravelPanelClassName:i,setEditorReadOnly:f=>{const h=o.getRootElement();h!=null&&(h.contentEditable=f?"false":"true")},editorState:u,setEditorState:f=>o.setEditorState(f),generateContent:async function(f){return yE(o,d,f,a)},ref:l,commandsLog:d})}function TE(r){return Ta(r)?`${r.__code}`:gc(r)?`${r.__marker} "${r.__number}"`:Fs(r)?`${r.__marker}`:$i(r)?`${r.__marker} "${r.__number}"`:Bs(r)?`${r.__caller}`:qs(r)?`${r.__marker} "${r.__number}"`:Pt(r)?`${r.__marker}`:Xr(r)?`${r.__marker}`:ut(r)?`ids: [ ${JSON.stringify(r.getTypedIDs())} ]`:mc(r)?`${r.__marker} "${r.__number}"`:""}function AE(){const[r]=fe();return D.jsx(SE,{viewClassName:"tree-view-output",treeTypeButtonClassName:"debug-treetype-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",customPrintNode:TE,editor:r})}const ea="unmatched",Qm=1;class Hn extends Ri{constructor(e,t){super(t),ie(this,"__marker"),this.__marker=e}static getType(){return"unmatched"}static clone(e){const{__marker:t,__key:n}=e;return new Hn(t,n)}static importJSON(e){const{marker:t}=e;return Zm(t)}static importDOM(){return{[ea]:e=>NE(e)?{conversion:DE,priority:1}:null}}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}createDOM(){const e=document.createElement(ea);e.setAttribute("data-marker",this.__marker),e.classList.add(hf);const t=this.__marker.endsWith("*");return e.title=t?"This closing marker has no matching opening marker!":"This opening marker has no matching closing marker!",e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&ve(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(hf)),{element:t}}decorate(){return`\\${this.getMarker()}${Vl}`}exportJSON(){return{type:this.getType(),marker:this.getMarker(),version:Qm}}isKeyboardSelectable(){return!1}}function DE(r){const e=r.getAttribute("data-marker")??"";return{node:Zm(e)}}function Zm(r){return Se(new Hn(r))}function NE(r){return(r==null?void 0:r.tagName)===ea}const ME=1;class Ui extends At{constructor(e,t=!0,n){const i=t?bc(e):wC(e);super(i,n),ie(this,"__marker"),ie(this,"__isOpening"),this.__marker=e,this.__isOpening=t}static getType(){return"marker"}static clone(e){return new Ui(e.__marker,e.__isOpening,e.__key)}static importJSON(e){const{marker:t,isOpening:n}=e;return OE(t,n).updateFromJSON(e)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setIsOpening(e){if(this.__isOpening===e)return this;const t=this.getWritable();return t.__isOpening=e,t}getIsOpening(){return this.getLatest().__isOpening}createDOM(e){const t=super.createDOM(e);return t.setAttribute("data-marker",this.__marker),t.classList.add(this.__type,this.__isOpening?"opening":"closing"),t}exportJSON(){return{...super.exportJSON(),type:this.getType(),text:this.getTextContent(),marker:this.getMarker(),isOpening:this.getIsOpening(),version:ME}}}function OE(r,e){return Se(new Ui(r,e))}let eu;function IE(r){r&&(eu=r)}function RE(r){if(r.isEmpty())return{type:$r,version:Ur,content:[]};const e=r.toJSON();if(!e.root||!e.root.children)return;const t=e.root.children;if(t.length===1&&t[0].type==="para"&&t[0].marker==="p"&&(!t[0].children||t[0].children.length===0))return{type:$r,version:Ur,content:[]};const n=ey(t),i=Lr(n);return i?{type:$r,version:Ur,content:i}:void 0}function LE(r,e){const{type:t,marker:n,code:i,unknownAttributes:s}=r;return Be({type:t,marker:n,code:i,...s,content:e})}function PE(r){const{marker:e,number:t,sid:n,altnumber:i,pubnumber:s,unknownAttributes:o}=r;return Be({type:Ht.getType(),marker:e,number:t,sid:n,altnumber:i,pubnumber:s,...o})}function FE(r,e){const{marker:t,sid:n,altnumber:i,pubnumber:s,unknownAttributes:o}=r,a=e&&typeof e[0]=="string"?e[0]:void 0;let{number:l}=r;return l=gm(t,a,l),Be({type:Ht.getType(),marker:t,number:l,sid:n,altnumber:i,pubnumber:s,...o})}function BE(r){const{marker:e,sid:t,altnumber:n,pubnumber:i,unknownAttributes:s}=r,{text:o}=r;let{number:a}=r;return a=gm(e,o,a),Be({type:pt.getType(),marker:e,number:a,sid:t,altnumber:n,pubnumber:i,...s})}function qE(r,e){const{type:t,marker:n,unknownAttributes:i}=r;return e==null||e.forEach((s,o)=>{typeof s=="string"&&s.startsWith(Un)&&(e[o]=s.slice(1))}),Be({type:t,marker:n,...i,content:e})}function jE(r,e){const{type:t,marker:n,unknownAttributes:i}=r;return Be({type:t,marker:n,...i,content:e})}function $E(r,e){const{type:t,marker:n,caller:i,category:s,unknownAttributes:o}=r;return Be({type:t,marker:n,caller:i,category:s,...o,content:e})}function ni(r){const{type:e,marker:t,sid:n,eid:i,unknownAttributes:s}=r;return Be({type:e,marker:t,sid:n,eid:i,...s})}function UE(r){return r.text}function WE(r,e){const{tag:t,marker:n,unknownAttributes:i}=r;return Be({type:t,marker:n,...i,content:e})}function zE(r){const{marker:e}=r;return{type:ea,marker:e}}function Mf(r,e){const t=r[r.length-1];t&&typeof t=="string"?r[r.length-1]=t+e:r.push(e)}function HE(r,e,t,n,i){const s=or.getType(),o=e.filter(a=>!t.includes(a));if(t.filter(a=>!e.includes(a)).forEach(a=>{const l=ni({type:s,marker:ui,eid:a});i.push(l)}),o.forEach(a=>{const l=ni({type:s,marker:Ln,sid:a});i.push(l)}),e.length===0){const a=ni({type:s,marker:Ln});i.push(a)}if(i.push(...r),e.length===0){const a=ni({type:s,marker:ui});i.push(a)}(!n||!LC(n))&&e.forEach(a=>{const l=ni({type:s,marker:ui,eid:a});i.push(l)})}function Lr(r,e){const t=[];let n,i=[];return r.forEach((s,o)=>{const a=s,l=s,u=s,c=s,d=s,f=s,h=s,g=s;switch(s.type){case $t.getType():t.push(LE(a,Lr(a.children)));break;case Mr.getType():t.push(PE(s));break;case Ht.getType():t.push(FE(l,Lr(l.children)));break;case gt.getType():case pt.getType():t.push(BE(s));break;case Fe.getType():t.push(qE(u,Lr(u.children)));break;case et.getType():t.push(jE(c,Lr(c.children)));break;case mt.getType():t.push($E(d,Lr(d.children,d.caller)));break;case ar.getType():case jn.getType():case Ui.getType():break;case Qe.getType():if(n=Lr(h.children),n){const m=h.typedIDs[jr];if(m)HE(n,m,i,r[o+1],t),i=m;else{const y=n.shift();y&&(typeof y=="string"?Mf(t,y):t.push(y)),n.length>0&&t.push(...n)}}break;case or.getType():t.push(ni(s));break;case At.getType():f.text&&f.text!==Un&&(!e||f.text!==ym(e))&&Mf(t,UE(f));break;case Wn.getType():t.push(WE(g,Lr(g.children)));break;case Hn.getType():t.push(zE(s));break;default:eu==null||eu.error(`Unexpected node type '${s.type}'!`)}}),t&&t.length>0?t:void 0}function ey(r){const e=r.findIndex(t=>lm(t));if(e>=0){const t=r.slice(0,e),n=r[e].children,i=ey(r.slice(e+1));r=[...t,...n,...i]}return r}const Of={initialize:IE,deserializeEditorState:RE},ty="formatted",VE="unformatted";let ry,ny;function KE(r){ry=r,ny=wc(r)}KE(ty);function wc(r){let e;switch(r??ry){case ty:e={markerMode:"hidden",hasSpacing:!0,isFormattedFont:!0};break;case VE:e={markerMode:"editable",hasSpacing:!1,isFormattedFont:!1};break}return e}function JE(r){if(r)return r.markerMode==="editable"?pt:gt}function GE(r){const e=[],t=r??ny;return t&&(e.push(`${Uv}${t.markerMode}`),t.hasSpacing&&e.push(jv),t.isFormattedFont&&e.push($v)),e}const YE={type:jn.getType(),version:1};let ta=[],pe,Co,tu,xe;function XE(r,e){ta=[],ew(r),tw(e)}function QE(r=0){}function ZE(r,e){e?pe=e:pe=wc();const t=iy({type:et.getType(),marker:Aa});let n;return r?(r.type!==$r&&(xe==null||xe.warn(`This USJ type '${r.type}' didn't match the expected type '${$r}'.`)),r.version!==Ur&&(xe==null||xe.warn(`This USJ version '${r.version}' didn't match the expected version '${Ur}'.`)),r.content.length>0?n=nu(is(r.content)):n=[t]):n=[t],tu==null||tu(ta),{root:{children:n,direction:null,format:"",indent:0,type:"root",version:1}}}function ew(r){var e;r&&(Co=r),(e=r==null?void 0:r[ds])!=null&&e.addMissingComments&&(tu=r[ds].addMissingComments)}function tw(r){r&&(xe=r)}function rw(r){return!r||r.length!==1||typeof r[0]!="string"?"":r[0]}function nw(r){const{marker:e,code:t}=r;e!==Vg&&(xe==null||xe.warn(`Unexpected book marker '${e}'!`)),(!t||!$t.isValidBookCode(t))&&(xe==null||xe.warn(`Unexpected book code '${t}'!`));const n=sn(r);return Be({type:$t.getType(),marker:e,code:t??"",unknownAttributes:n,children:[Us(rw(r.content))],direction:null,format:"",indent:0,version:Kg})}function iw(r){const{marker:e,number:t,sid:n,altnumber:i,pubnumber:s}=r;e!==Yg&&(xe==null||xe.warn(`Unexpected chapter marker '${e}'!`));const o=sn(r);let a;return(pe==null?void 0:pe.markerMode)==="visible"&&(a=!0),(pe==null?void 0:pe.markerMode)==="editable"?Be({type:Ht.getType(),marker:e,number:t??"",sid:n,altnumber:i,pubnumber:s,unknownAttributes:o,children:[Us(Na(e,t)??"")],direction:null,format:"",indent:0,version:Xg}):Be({type:Mr.getType(),marker:e,number:t??"",showMarker:a,sid:n,altnumber:i,pubnumber:s,unknownAttributes:o,version:rm})}function sw(r){const{marker:e,number:t,sid:n,altnumber:i,pubnumber:s}=r;e!==hm&&(xe==null||xe.warn(`Unexpected verse marker '${e}'!`));const o=(JE(pe)??gt).getType(),a=(pe==null?void 0:pe.markerMode)==="editable"?pm:xm;let l,u;(pe==null?void 0:pe.markerMode)==="editable"?l=Na(e,t):(pe==null?void 0:pe.markerMode)==="visible"&&(u=!0);const c=sn(r);return Be({type:o,text:l,marker:e,number:t??"",sid:n,altnumber:i,pubnumber:s,showMarker:u,unknownAttributes:c,version:a})}function ow(r,e=[]){const{marker:t}=r;Fe.isValidMarker(t)||xe==null||xe.warn(`Unexpected char marker '${t}'!`),((pe==null?void 0:pe.markerMode)==="visible"||(pe==null?void 0:pe.markerMode)==="editable")&&e.forEach(i=>{_c(i)&&(i.text=Un+i.text)});const n=sn(r);return Be({type:Fe.getType(),marker:t,unknownAttributes:n,children:[...e],direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:em})}function aw(r){return{type:zn.getType(),children:r,direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:om}}function iy(r,e=[]){const{marker:t}=r;et.isValidMarker(t)||xe==null||xe.warn(`Unexpected para marker '${t}'!`);const n=[];(pe==null?void 0:pe.markerMode)==="editable"&&n.push(Ss(t),Us(Un)),n.push(...e);const i=sn(r);return Be({type:et.getType(),marker:t,unknownAttributes:i,children:n,direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:fm})}function lw(r,e){var t;const n=xC(e);let i=()=>{};return(t=Co==null?void 0:Co[Xl])!=null&&t.onClick&&(i=Co[Xl].onClick),Be({type:ar.getType(),caller:r,previewText:n,onClick:i,version:Cm})}function uw(r,e){const{marker:t,category:n}=r;mt.isValidMarker(t)||xe==null||xe.warn(`Unexpected note marker '${t}'!`);const i=r.caller??"*";let s;(pe==null?void 0:pe.markerMode)==="editable"?s=Us(ym(i)):s=lw(i,e);const o=sn(r);let a,l;((pe==null?void 0:pe.markerMode)==="visible"||(pe==null?void 0:pe.markerMode)==="editable")&&(a=Ss(t),l=Ss(t,!1));const u=[];return a&&u.push(a),u.push(s,...e),l&&u.push(l),Be({type:mt.getType(),marker:t,caller:i,category:n,unknownAttributes:o,children:u,direction:null,format:"",indent:0,version:cm})}function cw(r){const{marker:e,sid:t,eid:n}=r;(!e||!or.isValidMarker(e))&&(xe==null||xe.warn(`Unexpected milestone marker '${e}'!`));const i=sn(r);return Be({type:or.getType(),marker:e,sid:t,eid:n,unknownAttributes:i,version:um})}function If(r,e=[]){return{type:Qe.getType(),typedIDs:{[jr]:e},children:r,direction:null,format:"",indent:0,version:1}}function dw(r,e){const{marker:t}=r,n=r.type,i=sn(r),s=[...e];return s.forEach(o=>{_c(o)&&(o.mode="token")}),Be({type:Wn.getType(),tag:n,marker:t,unknownAttributes:i,children:s,direction:null,format:"",indent:0,version:Gg})}function fw(r){return{type:Hn.getType(),marker:r,version:Qm}}function Ss(r,e=!0){return{type:Ui.getType(),marker:r,isOpening:e,text:"",detail:0,format:0,mode:"normal",style:"",version:1}}function Us(r,e="normal"){return{type:At.getType(),text:r,detail:0,format:0,mode:e,style:"",version:1}}function hw(r,e){((pe==null?void 0:pe.markerMode)==="visible"||(pe==null?void 0:pe.markerMode)==="editable")&&e.push(Ss(r))}function pw(r,e){((pe==null?void 0:pe.markerMode)==="visible"||(pe==null?void 0:pe.markerMode)==="editable")&&!(Fe.isValidFootnoteMarker(r)||Fe.isValidCrossReferenceMarker(r))&&e.push(Ss(r,!1))}function Rf(r,e){return r.length<=0||e===0?r:r.map(t=>t-e)}function gw(r,e){const t=r.indexOf(e,0);t>-1&&r.splice(t,1)}function Lf(r,e){e.marker===Ln&&e.sid!==void 0&&r.push(e.sid),e.marker===ui&&e.eid!==void 0&&gw(r,e.eid)}function ru(r,e,t=!1,n=[]){if(e.length<=0||e[0]>=r.length)return r;const i=e.shift(),s=e.length>0?e.shift():r.length-1;if(i===void 0||s===void 0||s>=r.length||r.length<=0)return r;const o=r.slice(0,i),a=t?[If(o,[...n])]:o,l=r[i];Lf(n,l);const u=ru(r.slice(i+1,s),Rf(e,i+1),l.marker===Ln,n),c=If(u,[...n]),d=r[s];Lf(n,d);const f=ru(r.slice(s+1),Rf(e,s+1),d.marker===Ln,n);return[...a,c,...f]}function is(r){const e=[],t=[];return r==null||r.forEach(n=>{if(typeof n=="string")t.push(Us(n));else if(!n.type)xe==null||xe.error("Marker type is missing!");else switch(n.type){case $t.getType():t.push(nw(n));break;case Ht.getType():t.push(iw(n));break;case pt.getType():pe!=null&&pe.hasSpacing||t.push(YE),t.push(sw(n));break;case Fe.getType():hw(n.marker,t),t.push(ow(n,is(n.content))),pw(n.marker,t);break;case et.getType():t.push(iy(n,is(n.content)));break;case mt.getType():t.push(uw(n,is(n.content)));break;case or.getType():rC(n.marker)&&(e.push(t.length),n.sid!==void 0&&(ta==null||ta.push(n.sid))),t.push(cw(n));break;case Hn.getType():t.push(fw(n.marker));break;default:xe==null||xe.warn(`Unknown type-marker '${n.type}-${n.marker}'!`),t.push(dw(n,is(n.content)))}}),ru(t,e)}function nu(r){const e=r.findIndex(t=>qv(t)||hC(t)||cC(t));if(e>=0){const t=nu(r.slice(0,e)),n=r[e],i=nu(r.slice(e+1));return[...t,n,...i]}else if(r.some(t=>"text"in t&&"mode"in t||FC(t)))return[aw(r)];return r}const sy={initialize:XE,reset:QE,serializeEditorState:ZE},Pf=r=>Se(Sp(r));function mw(r,e,t){const n={type:$r,version:Ur,content:r},i=e.serializeEditorState(n,t);return lm(i.root.children[0])?i.root.children[0].children[0]:i.root.children[0]}const yw={c:{action:r=>{const{chapterNum:e}=r.reference;return[{type:"chapter",marker:"c",number:`${e+1}`}]}},v:{action:r=>{const{verseNum:e,verse:t}=r.reference;return[{type:"verse",marker:"v",number:`${Yl(e,t)}`}]}},f:{action:r=>{const{chapterNum:e,verseNum:t}=r.reference;return[{type:"note",marker:"f",caller:Qo,content:[{type:"char",marker:"fr",content:[`${e}:${t}`]},{type:"char",marker:"ft",content:["-"]}]}]}},x:{action:r=>{const{chapterNum:e,verseNum:t}=r.reference;return[{type:"note",marker:"x",caller:Qo,content:[{type:"char",marker:"xo",content:[`${e}:${t}`]},{type:"char",marker:"xt",content:["-"]}]}]}}};function _w(r,e,t,n){const i=bw(r);return{action:s=>{s.editor.update(()=>{var o;const a=(o=i==null?void 0:i.action)==null?void 0:o.call(i,s);if(!a)return;const l=mw(a,sy,t),u=Pf(l),c=U();if(F(c))if(c.getTextContent().length>0)vw(c,()=>Pf(l));else if(P(u)&&!u.isInline()){const d=c.insertParagraph();if(d){const f=d.getChildren();u.append(...f),d.replace(u),u.selectStart()}}else{c.insertNodes([u]),kw(u);const d=u.getNextSibling();d?d.selectStart():u.selectStart()}else c==null||c.insertNodes([u])},n)},label:i==null?void 0:i.label}}function bw(r){let e=yw[r];return e||(et.isValidMarker(r)?e={action:()=>[{type:et.getType(),marker:r,content:[]}]}:Fe.isValidMarker(r)&&(e={action:()=>[{type:Fe.getType(),marker:r,content:["-"]}]})),e}function vw(r,e){const t=r.getNodes(),[n,i]=Cw(r);let s;t.forEach((o,a)=>{if(P(s)&&s.isParentOf(o))return;const l=Ew(o,a===0,a===t.length-1,n,i);if(!l){s=void 0;return}s||(s=e(),l.insertBefore(s)),xw(l,s)}),(H(s)||P(s))&&s.selectEnd()}function Cw(r){const e=r.anchor.offset,t=r.focus.offset;return r.isBackward()?[t,e]:[e,t]}function Ew(r,e,t,n,i){if(!(ut(r)||Pt(r)||Pt(r.getParent()))){if(H(r))return ww(r,e,t,n,i);if(P(r)&&r.isInline())return r}}function ww(r,e,t,n,i){const s=r.getTextContentSize(),o=e?n:0,a=t?i:s;if(o===0&&a===0)return;const l=r.splitText(o,a);return l.length===1?l[0]:l.length===3||a===s?l[1]:l[0]}function xw(r,e){var t;if(H(e)){const n=Ff(r,e);e.setTextContent(n),r.remove()}else if(P(e)){const n=e.getChildrenSize();e.append(r);for(let i=0;i<n;i++)(t=e.getFirstChild())==null||t.remove();Ff(r,e)}}function Ff(r,e){let t=r.getTextContent();if(H(r)&&e.isInline()&&t.startsWith(" ")){t=t.trimStart(),r.setTextContent(t);const n=e.getPreviousSibling();vc(n),H(n)||e.insertBefore(Re(" "))}return t}function kw(r){xr(r)&&(vc(r.getPreviousSibling()),Dm(r.getNextSibling()))}const oy={chapter:"chapter",verse:"verse",char:"char",para:"para",typedMark:"editor-typed-mark",typedMarkOverlap:"editor-typed-markOverlap",mark:"editor-mark",markOverlap:"editor-markOverlap",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough"}},ay=w.createContext(null),Bf=4;function Sw({children:r,className:e,onClick:t,title:n}){const i=w.useRef(null),s=w.useContext(ay);if(s===null)throw new Error("DropDownItem must be used within a DropDown");const{registerItem:o}=s;return w.useEffect(()=>{i&&i.current&&o(i)},[i,o]),D.jsx("button",{className:e,onClick:t,ref:i,title:n,type:"button",children:r})}function Tw({children:r,dropDownRef:e,onClose:t}){const[n,i]=w.useState(),[s,o]=w.useState(),a=w.useCallback(c=>{i(d=>d?[...d,c]:[c])},[i]),l=c=>{if(!n)return;const d=c.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(d)&&c.preventDefault(),d==="Escape"||d==="Tab"?t():d==="ArrowUp"?o(f=>{if(!f)return n[0];const h=n.indexOf(f)-1;return n[h===-1?n.length-1:h]}):d==="ArrowDown"&&o(f=>f?n[n.indexOf(f)+1]:n[0])},u=w.useMemo(()=>({registerItem:a}),[a]);return w.useEffect(()=>{n&&!s&&o(n[0]),s&&s.current&&s.current.focus()},[n,s]),D.jsx(ay.Provider,{value:u,children:D.jsx("div",{className:"dropdown",ref:e,onKeyDown:l,children:r})})}function Aw({disabled:r=!1,buttonLabel:e,buttonAriaLabel:t,buttonClassName:n,buttonIconClassName:i,children:s,stopCloseOnClickSelf:o}){const a=w.useRef(null),l=w.useRef(null),[u,c]=w.useState(!1),d=()=>{c(!1),l&&l.current&&l.current.focus()};return w.useEffect(()=>{const f=l.current,h=a.current;if(u&&f!==null&&h!==null){const{top:g,left:m}=f.getBoundingClientRect();h.style.top=`${g+f.offsetHeight+Bf}px`,h.style.left=`${Math.min(m,window.innerWidth-h.offsetWidth-20)}px`}},[a,l,u]),w.useEffect(()=>{const f=l.current;if(f!==null&&u){const h=g=>{const m=g.target;o&&a.current&&a.current.contains(m)||f.contains(m)||c(!1)};return document.addEventListener("click",h),()=>{document.removeEventListener("click",h)}}},[a,l,u,o]),w.useEffect(()=>{const f=()=>{if(u){const h=l.current,g=a.current;if(h!==null&&g!==null){const{top:m}=h.getBoundingClientRect(),y=m+h.offsetHeight+Bf;y!==g.getBoundingClientRect().top&&(g.style.top=`${y}px`)}}};return document.addEventListener("scroll",f),()=>{document.removeEventListener("scroll",f)}},[l,a,u]),D.jsxs(D.Fragment,{children:[D.jsxs("button",{type:"button",disabled:r,"aria-label":t||e,className:n,onClick:()=>c(!u),ref:l,children:[i&&D.jsx("span",{className:i}),e&&D.jsx("span",{className:"text dropdown-button-text",children:e}),D.jsx("i",{className:"chevron-down"})]}),u&&Rt.createPortal(D.jsx(Tw,{dropDownRef:a,onClose:d,children:s}),document.body)]})}const iu={m:"m - Paragraph - Margin - No First Line Indent",ms:"ms - Heading - Major Section Level 1",nb:"nb - Paragraph - No Break with Previous Paragraph",p:"p - Paragraph - Normal - First Line Indent",pi:"pi - Paragraph - Indented - Level 1 - First Line Indent",q1:"q1 - Poetry - Indent Level 1",q2:"q2 - Poetry - Indent Level 2",r:"r - Heading - Parallel References",s:"s - Heading - Section Level 1"},su={...iu,ide:"ide - File - Encoding",h:"h - File - Header",h1:"h1 - File - Header",h2:"h2 - File - Left Header",h3:"h3 - File - Right Header",toc1:"toc1 - File - Long Table of Contents Text",toc2:"toc2 - File - Short Table of Contents Text",toc3:"toc3 - File - Book Abbreviation",cl:"cl - Chapter - Publishing Label",mt:"mt - Title - Major Title Level 1",mt1:"mt1 - Title - Major Title Level 1",mt2:"mt2 - Title - Major Title Level 2",mt3:"mt3 - Title - Major Title Level 3",mt4:"mt4 - Title - Major Title Level 4",ms1:"ms1 - Heading - Major Section Level 1",ms2:"ms2 - Heading - Major Section Level 2",ms3:"ms3 - Heading - Major Section Level 3",b:"b - Poetry - Stanza Break (Blank Line)"};function Dw(r){return r in su?r:"ban"}function Nw(r){return r in su?su[r]:"No Style"}function Mw(r){return r?"active dropdown-item-active":""}function Ow({editor:r,blockMarker:e,disabled:t=!1}){const n=i=>{r.update(()=>{const s=U();F(s)&&D0(s,()=>Xo(i))})};return D.jsx(Aw,{disabled:t,buttonClassName:"toolbar-item block-controls",buttonIconClassName:"icon block-marker "+Dw(e),buttonLabel:Nw(e),buttonAriaLabel:"Formatting options for block type",children:Object.keys(iu).map(i=>D.jsxs(Sw,{className:"item block-marker "+Mw(e===i),onClick:()=>n(i),children:[D.jsx("i",{className:"icon block-marker "+i}),D.jsx("span",{className:"text usfm_"+i,children:iu[i]})]},i))})}function qf(){return D.jsx("div",{className:"divider"})}const Iw=w.forwardRef(function(r,e){const[t]=fe(),[n,i]=w.useState(t),[s,o]=w.useState(""),[a,l]=w.useState(!1),[u,c]=w.useState(!1),[d,f]=w.useState(()=>t.isEditable()),h=w.useCallback(()=>{const g=U();if(F(g)){const m=g.anchor.getNode();let y=m.getKey()==="root"?m:Gr(m,b=>{const C=b.getParent();return C!==null&&ur(C)});y===null&&(y=m.getTopLevelElementOrThrow());const v=y.getKey();n.getElementByKey(v)!==null&&(Xr(y)||Ta(y)||$i(y))&&o(y.getMarker())}},[n]);return w.useEffect(()=>t.registerCommand(Di,(g,m)=>(h(),i(m),!1),ls),[t,h]),w.useEffect(()=>Ve(t.registerEditableListener(g=>{f(g)}),n.registerUpdateListener(({editorState:g})=>{g.read(()=>{h()})}),n.registerCommand(ns,g=>(l(g),!1),ls),n.registerCommand(rs,g=>(c(g),!1),ls)),[h,n,t]),D.jsxs("div",{className:"toolbar",children:[D.jsx("button",{disabled:!a||!d,onClick:()=>{n.dispatchCommand(ca,void 0)},title:Bl?"Undo (⌘Z)":"Undo (Ctrl+Z)",type:"button",className:"toolbar-item spaced","aria-label":"Undo",children:D.jsx("i",{className:"format undo"})}),D.jsx("button",{disabled:!u||!d,onClick:()=>{n.dispatchCommand(da,void 0)},title:Bl?"Redo (⌘Y)":"Redo (Ctrl+Y)",type:"button",className:"toolbar-item","aria-label":"Redo",children:D.jsx("i",{className:"format redo"})}),D.jsx(qf,{}),n===t&&D.jsxs(D.Fragment,{children:[D.jsx(Ow,{disabled:!d,blockMarker:s,editor:t}),D.jsx(qf,{})]}),D.jsx("div",{ref:e,className:"end-container"})]})}),ly=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Rw=ly?w.useLayoutEffect:w.useEffect,ro={tag:oi};function uy({initialConfig:r,children:e}){const t=w.useMemo(()=>{const{theme:n,namespace:i,nodes:s,onError:o,editorState:a,html:l}=r,u=Fv(null,n),c=J2({editable:r.editable,html:l,namespace:i,nodes:s,onError:d=>o(d,c),theme:n});return function(d,f){if(f!==null){if(f===void 0)d.update(()=>{const h=ke();if(h.isEmpty()){const g=Dt();h.append(g);const m=ly?document.activeElement:null;(U()!==null||m!==null&&m===d.getRootElement())&&g.select()}},ro);else if(f!==null)switch(typeof f){case"string":{const h=d.parseEditorState(f);d.setEditorState(h,ro);break}case"object":d.setEditorState(f,ro);break;case"function":d.update(()=>{ke().isEmpty()&&f(d)},ro)}}}(c,a),[c,u]},[]);return Rw(()=>{const n=r.editable,[i]=t;i.setEditable(n===void 0||n)},[]),D.jsx(Hg.Provider,{value:t,children:e})}const cy=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?w.useLayoutEffect:w.useEffect;function Lw({editor:r,ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:n,ariaDescribedBy:i,ariaErrorMessage:s,ariaExpanded:o,ariaInvalid:a,ariaLabel:l,ariaLabelledBy:u,ariaMultiline:c,ariaOwns:d,ariaRequired:f,autoCapitalize:h,className:g,id:m,role:y="textbox",spellCheck:v=!0,style:b,tabIndex:C,"data-testid":T,...R},E){const[A,k]=w.useState(r.isEditable()),S=w.useCallback(q=>{q&&q.ownerDocument&&q.ownerDocument.defaultView?r.setRootElement(q):r.setRootElement(null)},[r]),L=w.useMemo(()=>function(...q){return X=>{q.forEach(j=>{typeof j=="function"?j(X):j!=null&&(j.current=X)})}}(E,S),[S,E]);return cy(()=>(k(r.isEditable()),r.registerEditableListener(q=>{k(q)})),[r]),D.jsx("div",{"aria-activedescendant":A?e:void 0,"aria-autocomplete":A?t:"none","aria-controls":A?n:void 0,"aria-describedby":i,...s!=null?{"aria-errormessage":s}:{},"aria-expanded":A&&y==="combobox"?!!o:void 0,...a!=null?{"aria-invalid":a}:{},"aria-label":l,"aria-labelledby":u,"aria-multiline":c,"aria-owns":A?d:void 0,"aria-readonly":!A||void 0,"aria-required":f,autoCapitalize:h,className:g,contentEditable:A,"data-testid":T,id:m,ref:L,role:A?y:void 0,spellCheck:v,style:b,tabIndex:C,...R})}const Pw=w.forwardRef(Lw);function jf(r){return r.getEditorState().read(nc(r.isComposing()))}const dy=w.forwardRef(Fw);function Fw(r,e){const{placeholder:t,...n}=r,[i]=fe();return D.jsxs(D.Fragment,{children:[D.jsx(Pw,{editor:i,...n,ref:e}),t!=null&&D.jsx(Bw,{editor:i,content:t})]})}function Bw({content:r,editor:e}){const t=function(o){const[a,l]=w.useState(()=>jf(o));return cy(()=>{function u(){const c=jf(o);l(c)}return u(),Ve(o.registerUpdateListener(()=>{u()}),o.registerEditableListener(()=>{u()}))},[o]),a}(e),[n,i]=w.useState(e.isEditable());if(w.useLayoutEffect(()=>(i(e.isEditable()),e.registerEditableListener(o=>{i(o)})),[e]),!t)return null;let s=null;return typeof r=="function"?s=r(n):r!==null&&(s=r),s===null?null:D.jsx("div",{"aria-hidden":!0,children:s})}function fy({editorRef:r}){const[e]=fe();return w.useEffect(()=>{typeof r=="function"?r(e):typeof r=="object"&&(r.current=e)},[e]),null}function ou(r,e){return ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},ou(r,e)}var $f={error:null},qw=function(r){var e,t;function n(){for(var s,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(s=r.call.apply(r,[this].concat(a))||this).state=$f,s.resetErrorBoundary=function(){for(var u,c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];s.props.onReset==null||(u=s.props).onReset.apply(u,d),s.reset()},s}t=r,(e=n).prototype=Object.create(t.prototype),e.prototype.constructor=e,ou(e,t),n.getDerivedStateFromError=function(s){return{error:s}};var i=n.prototype;return i.reset=function(){this.setState($f)},i.componentDidCatch=function(s,o){var a,l;(a=(l=this.props).onError)==null||a.call(l,s,o)},i.componentDidUpdate=function(s,o){var a,l,u,c,d=this.state.error,f=this.props.resetKeys;d!==null&&o.error!==null&&((u=s.resetKeys)===void 0&&(u=[]),(c=f)===void 0&&(c=[]),u.length!==c.length||u.some(function(h,g){return!Object.is(h,c[g])}))&&((a=(l=this.props).onResetKeysChange)==null||a.call(l,s.resetKeys,f),this.reset())},i.render=function(){var s=this.state.error,o=this.props,a=o.fallbackRender,l=o.FallbackComponent,u=o.fallback;if(s!==null){var c={error:s,resetErrorBoundary:this.resetErrorBoundary};if(w.isValidElement(u))return u;if(typeof a=="function")return a(c);if(l)return w.createElement(l,c);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(w.Component);function hy({children:r,onError:e}){return D.jsx(qw,{fallback:D.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:r})}const ul=0,au=1,lu=2,Ft=0,jw=1,Uf=2,$w=3,Uw=4;function Ww(r,e,t,n,i){if(r===null||t.size===0&&n.size===0&&!i)return Ft;const s=e._selection,o=r._selection;if(i)return jw;if(!(F(s)&&F(o)&&o.isCollapsed()&&s.isCollapsed()))return Ft;const a=function(v,b,C){const T=v._nodeMap,R=[];for(const E of b){const A=T.get(E);A!==void 0&&R.push(A)}for(const[E,A]of C){if(!A)continue;const k=T.get(E);k===void 0||Xe(k)||R.push(k)}return R}(e,t,n);if(a.length===0)return Ft;if(a.length>1){const v=e._nodeMap,b=v.get(s.anchor.key),C=v.get(o.anchor.key);return b&&C&&!r._nodeMap.has(b.__key)&&H(b)&&b.__text.length===1&&s.anchor.offset===1?Uf:Ft}const l=a[0],u=r._nodeMap.get(l.__key);if(!H(u)||!H(l)||u.__mode!==l.__mode)return Ft;const c=u.__text,d=l.__text;if(c===d)return Ft;const f=s.anchor,h=o.anchor;if(f.key!==h.key||f.type!=="text")return Ft;const g=f.offset,m=h.offset,y=d.length-c.length;return y===1&&m===g-1?Uf:y===-1&&m===g+1?$w:y===-1&&m===g?Uw:Ft}function zw(r,e){let t=Date.now(),n=Ft;return(i,s,o,a,l,u)=>{const c=Date.now();if(u.has(Dl))return n=Ft,t=c,lu;const d=Ww(i,s,a,l,r.isComposing()),f=(()=>{const h=o===null||o.editor===r,g=u.has(W2);if(!g&&h&&u.has(oi))return ul;if(i===null)return au;const m=s._selection;return a.size>0||l.size>0?g===!1&&d!==Ft&&d===n&&c<t+e&&h||a.size===1&&function(y,v,b){const C=v._nodeMap.get(y),T=b._nodeMap.get(y),R=v._selection,E=b._selection;return!(F(R)&&F(E)&&R.anchor.type==="element"&&R.focus.type==="element"&&E.anchor.type==="text"&&E.focus.type==="text"||!H(C)||!H(T)||C.__parent!==T.__parent)&&JSON.stringify(v.read(()=>C.exportJSON()))===JSON.stringify(b.read(()=>T.exportJSON()))}(Array.from(a)[0],i,s)?ul:au:m!==null?ul:lu})();return t=c,n=d,f}}function Wf(r){r.undoStack=[],r.redoStack=[],r.current=null}function Hw(r,e,t){const n=zw(r,t);return Ve(r.registerCommand(ca,()=>(function(i,s){const o=s.redoStack,a=s.undoStack;if(a.length!==0){const l=s.current,u=a.pop();l!==null&&(o.push(l),i.dispatchCommand(rs,!0)),a.length===0&&i.dispatchCommand(ns,!1),s.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:Dl})}}(r,e),!0),oe),r.registerCommand(da,()=>(function(i,s){const o=s.redoStack,a=s.undoStack;if(o.length!==0){const l=s.current;l!==null&&(a.push(l),i.dispatchCommand(ns,!0));const u=o.pop();o.length===0&&i.dispatchCommand(rs,!1),s.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:Dl})}}(r,e),!0),oe),r.registerCommand(Ou,()=>(Wf(e),!1),oe),r.registerCommand(rp,()=>(Wf(e),r.dispatchCommand(rs,!1),r.dispatchCommand(ns,!1),!0),oe),r.registerUpdateListener(({editorState:i,prevEditorState:s,dirtyLeaves:o,dirtyElements:a,tags:l})=>{const u=e.current,c=e.redoStack,d=e.undoStack,f=u===null?null:u.editorState;if(u!==null&&i===f)return;const h=n(s,i,u,o,a,l);if(h===au)c.length!==0&&(e.redoStack=[],r.dispatchCommand(rs,!1)),u!==null&&(d.push({...u}),r.dispatchCommand(ns,!0));else if(h===lu)return;e.current={editor:r,editorState:i}}))}function Vw(){return{current:null,redoStack:[],undoStack:[]}}function py({delay:r,externalHistoryState:e}){const[t]=fe();return function(n,i,s=1e3){const o=w.useMemo(()=>i||Vw(),[i]);w.useEffect(()=>Hw(n,o,s),[s,n,o])}(t,e,r),null}const Kw=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?w.useLayoutEffect:w.useEffect;function gy({ignoreHistoryMergeTagChange:r=!0,ignoreSelectionChange:e=!1,onChange:t}){const[n]=fe();return Kw(()=>{if(t)return n.registerUpdateListener(({editorState:i,dirtyElements:s,dirtyLeaves:o,prevEditorState:a,tags:l})=>{e&&s.size===0&&o.size===0||r&&l.has(oi)||a.isEmpty()||t(i,n,l)})},[n,r,e,t]),null}const Jw=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?w.useLayoutEffect:w.useEffect;function Gw(r){return{initialValueFn:()=>r.isEditable(),subscribe:e=>r.registerEditableListener(e)}}function my(){return function(r){const[e]=fe(),t=w.useMemo(()=>r(e),[e,r]),[n,i]=w.useState(()=>t.initialValueFn()),s=w.useRef(n);return Jw(()=>{const{initialValueFn:o,subscribe:a}=t,l=o();return s.current!==l&&(s.current=l,i(l)),a(u=>{s.current=u,i(u)})},[t,r]),n}(Gw)}function yy(r){const e=window.location.origin,t=n=>{if(n.origin!==e)return;const i=r.getRootElement();if(document.activeElement!==i)return;const s=n.data;if(typeof s=="string"){let o;try{o=JSON.parse(s)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const a=o.payload;if(a&&a.functionId==="makeChanges"){const l=a.args;if(l){const[u,c,d,f,h,g]=l;r.update(()=>{const m=U();if(F(m)){const y=m.anchor;let v=y.getNode(),b=0,C=0;if(H(v)&&u>=0&&c>=0&&(b=u,C=u+c,m.setTextNodeRange(v,b,v,C)),b===C&&d===""||(m.insertRawText(d),v=y.getNode()),H(v)){b=f,C=f+h;const T=v.getTextContentSize();b=b>T?T:b,C=C>T?T:C,m.setTextNodeRange(v,b,v,C)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}function zf(r,e){if(document.caretRangeFromPoint!==void 0){const t=document.caretRangeFromPoint(r,e);return t===null?null:{node:t.startContainer,offset:t.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const t=document.caretPositionFromPoint(r,e);return t===null?null:{node:t.offsetNode,offset:t.offset}}return null}const Wi=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Yw=Wi&&"documentMode"in document?document.documentMode:null,Xw=!(!Wi||!("InputEvent"in window)||Yw)&&"getTargetRanges"in new window.InputEvent("input"),Qw=Wi&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Hf=Wi&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Zw=Wi&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ex=Wi&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Zw,Vf=le("DRAG_DROP_PASTE_FILE");function no(r){let e=null;if(Cr(r,DragEvent)?e=r.dataTransfer:Cr(r,ClipboardEvent)&&(e=r.clipboardData),e===null)return[!1,[],!1];const t=e.types,n=t.includes("Files"),i=t.includes("text/html")||t.includes("text/plain");return[n,Array.from(e.files),i]}function Kf(r){const e=U();if(!F(e))return!1;const t=new Set,n=e.getNodes();for(let i=0;i<n.length;i++){const s=n[i],o=s.getKey();if(t.has(o))continue;const a=Gr(s,u=>P(u)&&!u.isInline());if(a===null)continue;const l=a.getKey();a.canIndent()&&!t.has(l)&&(t.add(l),r(a))}return t.size>0}function Jf(r){const e=Kr(r);return ye(e)}function cl(r){for(const e of["lowercase","uppercase","capitalize"])r.hasFormat(e)&&r.toggleFormat(e)}function tx(r){return Ve(r.registerCommand(Zh,e=>{const t=U();return!!dt(t)&&(t.clear(),!0)},0),r.registerCommand(tr,e=>{const t=U();return F(t)?(t.deleteCharacter(e),!0):!!dt(t)&&(t.deleteNodes(),!0)},oe),r.registerCommand(pi,e=>{const t=U();return!!F(t)&&(t.deleteWord(e),!0)},oe),r.registerCommand(gi,e=>{const t=U();return!!F(t)&&(t.deleteLine(e),!0)},oe),r.registerCommand(vn,e=>{const t=U();if(typeof e=="string")t!==null&&t.insertText(e);else{if(t===null)return!1;const n=e.dataTransfer;if(n!=null)bf(n,t,r);else if(F(t)){const i=e.data;return i&&t.insertText(i),!0}}return!0},oe),r.registerCommand(Oo,()=>{const e=U();return!!F(e)&&(e.removeText(),!0)},oe),r.registerCommand(Fr,e=>{const t=U();return!!F(t)&&(t.formatText(e),!0)},oe),r.registerCommand(w2,e=>{const t=U();if(!F(t)&&!dt(t))return!1;const n=t.getNodes();for(const i of n){const s=Gr(i,o=>P(o)&&!o.isInline());s!==null&&s.setFormat(e)}return!0},oe),r.registerCommand(zr,e=>{const t=U();return!!F(t)&&(t.insertLineBreak(e),!0)},oe),r.registerCommand(ys,()=>{const e=U();return!!F(e)&&(e.insertParagraph(),!0)},oe),r.registerCommand(C2,()=>(q2([Ds()]),!0),oe),r.registerCommand(E2,()=>Kf(e=>{const t=e.getIndent();e.setIndent(t+1)}),oe),r.registerCommand(id,()=>Kf(e=>{const t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),oe),r.registerCommand(Su,e=>{const t=U();if(dt(t)){const n=t.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(F(t)){const n=Nl(t.focus,!0);if(!e.shiftKey&&ye(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),e.preventDefault(),!0}return!1},oe),r.registerCommand(Tu,e=>{const t=U();if(dt(t)){const n=t.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(F(t)){if(function(i){const s=i.focus;return s.key==="root"&&s.offset===ke().getChildrenSize()}(t))return e.preventDefault(),!0;const n=Nl(t.focus,!1);if(!e.shiftKey&&ye(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),e.preventDefault(),!0}return!1},oe),r.registerCommand(ku,e=>{const t=U();if(dt(t)){const n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectPrevious(),!0}if(!F(t))return!1;if(Uo(t,!0)){const n=e.shiftKey;return e.preventDefault(),Wo(t,n,!0),!0}return!1},oe),r.registerCommand(xu,e=>{const t=U();if(dt(t)){const i=t.getNodes();if(i.length>0)return e.preventDefault(),i[0].selectNext(0,0),!0}if(!F(t))return!1;const n=e.shiftKey;return!!Uo(t,!1)&&(e.preventDefault(),Wo(t,n,!1),!0)},oe),r.registerCommand(Au,e=>{if(Jf(e.target))return!1;const t=U();if(F(t)){if(function(n){if(!n.isCollapsed())return!1;const{anchor:i}=n;if(i.offset!==0)return!1;const s=i.getNode();if(Xe(s))return!1;const o=B0(s);return o.getIndent()>0&&(o.is(s)||s.is(o.getFirstDescendant()))}(t))return e.preventDefault(),r.dispatchCommand(id,void 0);if(Hf&&navigator.language==="ko-KR")return!1}else if(!dt(t))return!1;return e.preventDefault(),r.dispatchCommand(tr,!0)},oe),r.registerCommand(Du,e=>{if(Jf(e.target))return!1;const t=U();return!(!F(t)&&!dt(t))&&(e.preventDefault(),r.dispatchCommand(tr,!1))},oe),r.registerCommand(mi,e=>{const t=U();if(!F(t))return!1;if(cl(t),e!==null){if((Hf||Qw||ex)&&Xw)return!1;if(e.preventDefault(),e.shiftKey)return r.dispatchCommand(zr,!1)}return r.dispatchCommand(ys,void 0)},oe),r.registerCommand(fa,()=>{const e=U();return!!F(e)&&(r.blur(),!0)},oe),r.registerCommand(ha,e=>{const[,t]=no(e);if(t.length>0){const i=zf(e.clientX,e.clientY);if(i!==null){const{offset:s,node:o}=i,a=Kr(o);if(a!==null){const l=Ms();if(H(a))l.anchor.set(a.getKey(),s,"text"),l.focus.set(a.getKey(),s,"text");else{const c=a.getParentOrThrow().getKey(),d=a.getIndexWithinParent()+1;l.anchor.set(c,d,"element"),l.focus.set(c,d,"element")}const u=hs(l);tt(u)}r.dispatchCommand(Vf,t)}return e.preventDefault(),!0}const n=U();return!!F(n)},oe),r.registerCommand(Mu,e=>{const[t]=no(e),n=U();return!(t&&!F(n))},oe),r.registerCommand(tp,e=>{const[t]=no(e),n=U();if(t&&!F(n))return!1;const i=zf(e.clientX,e.clientY);if(i!==null){const s=Kr(i.node);ye(s)&&e.preventDefault()}return!0},oe),r.registerCommand(Io,()=>(qp(),!0),oe),r.registerCommand(qn,e=>(Cf(r,Cr(e,ClipboardEvent)?e:null),!0),oe),r.registerCommand(Mi,e=>(async function(t,n){await Cf(n,Cr(t,ClipboardEvent)?t:null),n.update(()=>{const i=U();F(i)?i.removeText():dt(i)&&i.getNodes().forEach(s=>s.remove())})}(e,r),!0),oe),r.registerCommand(Bn,e=>{const[,t,n]=no(e);return t.length>0&&!n?(r.dispatchCommand(Vf,t),!0):$n(e.target)&&Uu(e.target)?!1:U()!==null&&(function(i,s){i.preventDefault(),s.update(()=>{const o=U(),a=Cr(i,InputEvent)||Cr(i,KeyboardEvent)?null:i.clipboardData;a!=null&&o!==null&&bf(a,o,s)},{tag:Np})}(e,r),!0)},oe),r.registerCommand(ep,e=>{const t=U();return F(t)&&cl(t),!1},oe),r.registerCommand(Nu,e=>{const t=U();return F(t)&&cl(t),!1},oe))}const uu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?w.useLayoutEffect:w.useEffect;function Gf(r){return r.getEditorState().read(nc(r.isComposing()))}function rx({contentEditable:r,placeholder:e=null,ErrorBoundary:t}){const[n]=fe(),i=function(s,o){const[a,l]=w.useState(()=>s.getDecorators());return uu(()=>s.registerDecoratorListener(u=>{Rt.flushSync(()=>{l(u)})}),[s]),w.useEffect(()=>{l(s.getDecorators())},[s]),w.useMemo(()=>{const u=[],c=Object.keys(a);for(let d=0;d<c.length;d++){const f=c[d],h=D.jsx(o,{onError:m=>s._onError(m),children:D.jsx(w.Suspense,{fallback:null,children:a[f]})}),g=s.getElementByKey(f);g!==null&&u.push(Rt.createPortal(h,g,f))}return u},[o,a,s])}(n,t);return function(s){uu(()=>Ve(tx(s),yy(s)),[s])}(n),D.jsxs(D.Fragment,{children:[r,D.jsx(nx,{content:e}),i]})}function nx({content:r}){const[e]=fe(),t=function(i){const[s,o]=w.useState(()=>Gf(i));return uu(()=>{function a(){const l=Gf(i);o(l)}return a(),Ve(i.registerUpdateListener(()=>{a()}),i.registerEditableListener(()=>{a()}))},[i]),s}(e),n=my();return t?typeof r=="function"?r(n):r:null}function cu(r,e){if(!r||!H(r))return[void 0,void 0];const t=r.getTextContent();if(e>=0&&e<t.length)return[r,e];let n=r.getNextSibling();if(!n){const s=r.getParent();ut(s)&&(n=s.getNextSibling())}if(!n||!ut(n)&&!H(n))return[void 0,void 0];const i=e-t.length;return n&&H(n)?cu(n,i):cu(n.getFirstChild()??void 0,i)}function Yf(r){const e=l_(r.jsonPath);let t=ke();for(const n of e){if(!t||!P(t))return[void 0,void 0];t=t.getChildAtIndex(n)??void 0}return cu(t,r.offset)}function Xf(r){return P(r)?"element":"text"}function _y(r){const{start:e}=r;let{end:t}=r;t===void 0&&(t=e);const[n,i]=Yf(e),[s,o]=Yf(t);if(!n||!s||i===void 0||o===void 0)return;const a=Ms();return a.anchor=Et(n.getKey(),i,Xf(n)),a.focus=Et(s.getKey(),o,Xf(s)),a}function Qf(r,e){const t=[];let n=r;for(;n!=null&&n.getParent();){const i=n.getParent();if(i){const s=i==null?void 0:i.getChildren().indexOf(n);s>=0&&t.unshift(s)}n=i}return{jsonPath:u_(t),offset:e}}function by(){const r=U();if(!r||!F(r))return;const e=r.isBackward()?r.focus.getNode():r.anchor.getNode(),t=r.isBackward()?r.focus.offset:r.anchor.offset,n=Qf(e,t);if(r.isCollapsed())return{start:n};const i=r.isBackward()?r.anchor.getNode():r.focus.getNode(),s=r.isBackward()?r.anchor.offset:r.focus.offset,o=Qf(i,s);return{start:n,end:o}}function Eo(r,e){return`${r}:${e}`}function ix(r,e){w.useEffect(()=>{if(!r.hasNodes([Qe]))throw new Error("AnnotationPlugin: TypedMarkNode not registered on editor!");const t=new Map;return Ve(Qp(r,Qe,n=>ks(n.getTypedIDs()),(n,i)=>{for(const[s,o]of Object.entries(n.getTypedIDs()))o.forEach(a=>{i.addID(s,a)})}),r.registerMutationListener(Qe,n=>{r.getEditorState().read(()=>{for(const[i,s]of n){const o=me(i);let a={};s==="destroyed"?a=t.get(i)??{}:ut(o)&&(a=o.getTypedIDs());for(const[l,u]of Object.entries(a))if(!Qe.isReservedType(l))for(const c of u){let d=e.get(Eo(l,c));a[l]=u,t.set(i,a),s==="destroyed"?d!==void 0&&(d.delete(i),d.size===0&&e.delete(Eo(l,c))):(d===void 0&&(d=new Set,e.set(Eo(l,c),d)),d.has(i)||d.add(i))}}})},{skipInitialization:!0}))},[r,e])}const sx=w.forwardRef(function({logger:r},e){const[t]=fe(),n=w.useMemo(()=>new Map,[]);return ix(t,n),w.useImperativeHandle(e,()=>({addAnnotation(i,s,o){if(Qe.isReservedType(s))throw new Error(`addAnnotation: Can't directly add this reserved annotation type '${s}'. Use the appropriate plugin instead.`);t.update(()=>{const a=_y(i);if(a===void 0){r==null||r.error("Failed to find start or end node of the annotation.");return}Tm(a,s,o)},{tag:Gl})},removeAnnotation(i,s){if(Qe.isReservedType(i))throw new Error(`removeAnnotation: Can't directly remove this reserved annotation type '${i}'. Use the appropriate plugin instead.`);const o=n.get(Eo(i,s));o!==void 0&&setTimeout(()=>{t.update(()=>{for(const a of o){const l=me(a);ut(l)&&(l.deleteID(i,s),l.hasNoIDsForEveryType()&&Sm(l))}},{tag:Gl})})}})),null});function ox(){const[r]=fe();return ax(r),null}function ax(r){w.useEffect(()=>{if(!r.hasNodes([Mr,gt,mt]))throw new Error("ArrowNavigationPlugin: ImmutableChapterNode, ImmutableVerseNode or NoteNode not registered on editor!");const e=t=>{if(t.key!=="ArrowLeft"&&t.key!=="ArrowRight")return!1;const n=U();if(!F(n)||!n.isCollapsed())return!1;const i=r.getRootElement();if(!i)return!1;const s=i.dir||"ltr";let o=!1;return lx(s,t.key)?o=cx(n):ux(s,t.key)&&(o=dx(n)),o&&t.preventDefault(),o};return r.registerCommand(Ni,e,ma)},[r])}function lx(r,e){return r==="ltr"&&e==="ArrowRight"||r==="rtl"&&e==="ArrowLeft"}function ux(r,e){return r==="ltr"&&e==="ArrowLeft"||r==="rtl"&&e==="ArrowRight"}function cx(r){const e=_C(r);if(!$i(e)&&!qs(e))return!1;const t=r.anchor.getNode();if(Xr(t)||am(t)){if(r.anchor.offset===t.getChildrenSize())return!1}else if(r.anchor.offset!==t.getTextContentSize())return!1;const n=e.getNextSibling();if(!Pt(n))return!1;const i=n.getNextSibling();return i?i.selectStart():n.selectEnd(),!0}function dx(r){const e=bC(r);if($i(e)&&!e.getPreviousSibling())return!0;if(!Pt(e))return!1;const t=r.anchor.offset===0,n=e.getPreviousSibling();return!qs(n)||!t?!1:(n.selectStart(),!0)}function vy(r){return r.replaceAll("	"," ")}const Cy=r=>{navigator.clipboard.read().then(async e=>{if((await navigator.permissions.query({name:"clipboard-read"})).state==="denied"){alert("Not allowed to paste from clipboard.");return}const t=new DataTransfer,n=e[0];for(const s of n.types){const o=await(await n.getType(s)).text();t.setData(s,vy(o))}const i=new ClipboardEvent("paste",{clipboardData:t});r.dispatchCommand(Bn,i)})},Ey=r=>{navigator.clipboard.read().then(async()=>{if((await navigator.permissions.query({name:"clipboard-read"})).state==="denied"){alert("Not allowed to paste from clipboard.");return}const e=new DataTransfer,t=await navigator.clipboard.readText();e.setData("text/plain",vy(t));const n=new ClipboardEvent("paste",{clipboardData:e});r.dispatchCommand(Bn,n)})};function fx(){const[r]=fe();return w.useEffect(()=>{const e=t=>{const{key:n,shiftKey:i,metaKey:s,ctrlKey:o,altKey:a}=t;!(Bl?s:o)||a||(!i&&n.toLowerCase()==="c"?(t.preventDefault(),r.dispatchCommand(qn,null)):!i&&n.toLowerCase()==="x"?(t.preventDefault(),r.dispatchCommand(Mi,null)):n.toLowerCase()==="v"&&(t.preventDefault(),i?Ey(r):Cy(r)))};return r.registerRootListener((t,n)=>{n!==null&&n.removeEventListener("keydown",e),t!==null&&t.addEventListener("keydown",e)})},[r]),null}function hx({logger:r}){const[e]=fe();return w.useEffect(()=>Ve(e.registerCommand(Ni,t=>t.key!=="\\"&&t.key!=="/"?!1:(t.preventDefault(),!0),go),e.registerCommand(Bn,t=>{var n;const i=(n=t.clipboardData)==null?void 0:n.getData("text/plain");return!i||!i.includes("\\")&&!i.includes("/")?!1:(r==null||r.info("CommandMenuPlugin: paste containing backslash or forward slash ignored."),t.preventDefault(),!0)},go),e.registerCommand(ha,t=>{var n;const i=(n=t.dataTransfer)==null?void 0:n.getData("text/plain");return!i||!i.includes("\\")&&!i.includes("/")?!1:(r==null||r.info("CommandMenuPlugin: drag containing backslash or forward slash ignored."),t.preventDefault(),!0)},go)),[e,r]),null}const du=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,px=du?w.useLayoutEffect:w.useEffect;let gx=class{constructor(r){this.key=r,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(r){this.ref={current:r}}};const Zf=r=>{const e=document.getElementById("typeahead-menu");if(!e)return;const t=e.getBoundingClientRect();t.top+t.height>window.innerHeight&&e.scrollIntoView({block:"center"}),t.top<0&&e.scrollIntoView({block:"center"}),r.scrollIntoView({block:"nearest"})};function eh(r,e){const t=r.getBoundingClientRect(),n=e.getBoundingClientRect();return t.top>n.top&&t.top<n.bottom}function mx(r,e,t,n){const[i]=fe();w.useEffect(()=>{if(e!=null&&r!=null){const s=i.getRootElement(),o=s!=null?function(d,f){let h=getComputedStyle(d);const g=h.position==="absolute",m=/(auto|scroll)/;if(h.position==="fixed")return document.body;for(let y=d;y=y.parentElement;)if(h=getComputedStyle(y),(!g||h.position!=="static")&&m.test(h.overflow+h.overflowY+h.overflowX))return y;return document.body}(s):document.body;let a=!1,l=eh(e,o);const u=function(){a||(window.requestAnimationFrame(function(){t(),a=!1}),a=!0);const d=eh(e,o);d!==l&&(l=d,n!=null&&n(d))},c=new ResizeObserver(t);return window.addEventListener("resize",t),document.addEventListener("scroll",u,{capture:!0,passive:!0}),c.observe(e),()=>{c.unobserve(e),window.removeEventListener("resize",t),document.removeEventListener("scroll",u,!0)}}},[e,i,n,t,r])}const th=le("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function yx({close:r,editor:e,anchorElementRef:t,resolution:n,options:i,menuRenderFn:s,onSelectOption:o,shouldSplitNodeWithQuery:a=!1,commandPriority:l=Li,preselectFirstItem:u=!0}){const[c,d]=w.useState(null),f=n.match&&n.match.matchingString;w.useEffect(()=>{u&&d(0)},[f,u]);const h=w.useCallback(m=>{e.update(()=>{const y=n.match!=null&&a?function(v){const b=U();if(!F(b)||!b.isCollapsed())return null;const C=b.anchor;if(C.type!=="text")return null;const T=C.getNode();if(!T.isSimpleText())return null;const R=C.offset,E=T.getTextContent().slice(0,R),A=v.replaceableString.length,k=R-function(L,q,X){let j=X;for(let G=j;G<=q.length;G++)L.slice(-G)===q.substring(0,G)&&(j=G);return j}(E,v.matchingString,A);if(k<0)return null;let S;return k===0?[S]=T.splitText(R):[,S]=T.splitText(k,R),S}(n.match):null;o(m,y,r,n.match?n.match.matchingString:"")})},[e,a,n.match,o,r]),g=w.useCallback(m=>{const y=e.getRootElement();y!==null&&(y.setAttribute("aria-activedescendant","typeahead-item-"+m),d(m))},[e]);return w.useEffect(()=>()=>{const m=e.getRootElement();m!==null&&m.removeAttribute("aria-activedescendant")},[e]),px(()=>{i===null?d(null):c===null&&u&&g(0)},[i,c,g,u]),w.useEffect(()=>Ve(e.registerCommand(th,({option:m})=>!(!m.ref||m.ref.current==null)&&(Zf(m.ref.current),!0),l)),[e,g,l]),w.useEffect(()=>Ve(e.registerCommand(Tu,m=>{const y=m;if(i!==null&&i.length){const v=c===null?0:c!==i.length-1?c+1:0;g(v);const b=i[v];b.ref!=null&&b.ref.current&&e.dispatchCommand(th,{index:v,option:b}),y.preventDefault(),y.stopImmediatePropagation()}return!0},l),e.registerCommand(Su,m=>{const y=m;if(i!==null&&i.length){const v=c===null?i.length-1:c!==0?c-1:i.length-1;g(v);const b=i[v];b.ref!=null&&b.ref.current&&Zf(b.ref.current),y.preventDefault(),y.stopImmediatePropagation()}return!0},l),e.registerCommand(fa,m=>{const y=m;return y.preventDefault(),y.stopImmediatePropagation(),r(),!0},l),e.registerCommand(Nu,m=>{const y=m;return i!==null&&c!==null&&i[c]!=null&&(y.preventDefault(),y.stopImmediatePropagation(),h(i[c]),!0)},l),e.registerCommand(mi,m=>i!==null&&c!==null&&i[c]!=null&&(m!==null&&(m.preventDefault(),m.stopImmediatePropagation()),h(i[c]),!0),l)),[h,r,e,i,c,g,l]),s(t,w.useMemo(()=>({options:i,selectOptionAndCleanUp:h,selectedIndex:c,setHighlightedIndex:d}),[h,c,i]),n.match?n.match.matchingString:"")}function rh(r,e){e!=null&&(r.className=e),r.setAttribute("aria-label","Typeahead menu"),r.setAttribute("role","listbox"),r.style.display="block",r.style.position="absolute"}function _x({options:r,onWillOpen:e,onClose:t,onOpen:n,onSelectOption:i,menuRenderFn:s,anchorClassName:o,commandPriority:a=Li,parent:l}){const[u]=fe(),[c,d]=w.useState(null),f=w.useRef(null),h=function(b,C,T,R=du?document.body:void 0,E=!0){const[A]=fe(),k=w.useRef(du?document.createElement("div"):null),S=w.useCallback(()=>{if(k.current===null||R===void 0)return;k.current.style.top=k.current.style.bottom;const X=A.getRootElement(),j=k.current,G=j.firstChild;if(X!==null&&b!==null){const{left:O,top:B,width:z,height:$}=b.getRect(),V=k.current.offsetHeight;if(j.style.top=`${B+V+3+(E?window.pageYOffset:0)}px`,j.style.left=`${O+window.pageXOffset}px`,j.style.height=`${$}px`,j.style.width=`${z}px`,G!==null){G.style.top=`${B}`;const W=G.getBoundingClientRect(),Y=W.height,se=W.width,te=X.getBoundingClientRect();O+se>te.right&&(j.style.left=`${te.right-se+window.pageXOffset}px`),(B+Y>window.innerHeight||B+Y>te.bottom)&&B-te.top>Y+$&&(j.style.top=`${B-Y-$+(E?window.pageYOffset:0)}px`)}j.isConnected||(rh(j,T),R.append(j)),j.setAttribute("id","typeahead-menu"),k.current=j,X.setAttribute("aria-controls","typeahead-menu")}},[A,b,E,T,R]);w.useEffect(()=>{const X=A.getRootElement();return b!==null&&S(),()=>{X!==null&&X.removeAttribute("aria-controls");const j=k.current;j!==null&&j.isConnected&&(j.remove(),j.removeAttribute("id"))}},[A,S,b]);const L=w.useCallback(X=>{b!==null&&(X||C(null))},[b,C]);mx(b,k.current,S,L);const q=k.current;return q!=null&&(rh(q,T),R!=null&&R.append(q)),k}(c,d,o,l),g=w.useCallback(()=>{d(null),t!=null&&c!==null&&t()},[t,c]),m=w.useCallback(b=>{d(b),n!=null&&c===null&&n(b)},[n,c]),y=w.useCallback(b=>{b.preventDefault(),e!=null&&e(b);const C=q0(b.target);m({getRect:()=>new DOMRect(b.clientX/C,b.clientY/C,1,1)})},[m,e]),v=w.useCallback(b=>{c!==null&&f.current!=null&&b.target!=null&&$n(b.target)&&!f.current.contains(b.target)&&g()},[g,c]);return w.useEffect(()=>{const b=u.getRootElement();if(b)return b.addEventListener("contextmenu",y),()=>b.removeEventListener("contextmenu",y)},[u,y]),w.useEffect(()=>(document.addEventListener("click",v),()=>document.removeEventListener("click",v)),[u,v]),h.current===null||c===null||u===null?null:D.jsx(yx,{close:g,resolution:c,editor:u,anchorElementRef:h,options:r,menuRenderFn:(b,C)=>s(b,C,{setMenuRef:T=>{f.current=T}}),onSelectOption:i,commandPriority:a})}function bx({index:r,isSelected:e,onClick:t,onMouseEnter:n,option:i}){let s="item";return e&&(s+=" selected"),i.isDisabled&&(s+=" disabled"),D.jsx("li",{tabIndex:-1,className:s,ref:i.setRefElement,role:"option","aria-selected":e,"aria-disabled":i.isDisabled,id:"typeahead-item-"+r,onMouseEnter:n,onClick:i.isDisabled?void 0:t,children:D.jsx("span",{className:"text",children:i.title})},i.key)}function vx({options:r,selectedItemIndex:e,onOptionClick:t,onOptionMouseEnter:n}){return D.jsx("div",{className:"typeahead-popover",children:D.jsx("ul",{children:r.map((i,s)=>D.jsx(bx,{index:s,isSelected:e===s,onClick:()=>t(i,s),onMouseEnter:()=>n(s),option:i},i.key))})})}class io extends gx{constructor(e,t){super(e),ie(this,"title"),ie(this,"onSelect"),ie(this,"isDisabled"),this.title=e,this.onSelect=t.onSelect.bind(this),this.isDisabled=t.isDisabled||!1}}function Cx(r,e="editor-input"){return r?r.classList.contains(e):!1}function Ex(){const[r]=fe(),[e,t]=w.useState(()=>!r.isEditable()),n=w.useRef(),i=w.useRef(),s=w.useRef(),o=w.useMemo(()=>[new io("Cut",{onSelect:()=>{r.dispatchCommand(Mi,null)},isDisabled:e}),new io("Copy",{onSelect:()=>{r.dispatchCommand(qn,null)}}),new io("Paste",{onSelect:()=>{Cy(r)},isDisabled:e}),new io("Paste as Plain Text",{onSelect:()=>{Ey(r)},isDisabled:e})],[r,e]),a=w.useCallback((l,u,c)=>{r.update(()=>{l==null||l.onSelect(u),c()})},[r]);return w.useEffect(()=>{var l;i.current=((l=r.getRootElement())==null?void 0:l.className)??""},[r]),w.useEffect(()=>{const l=()=>{var u;(u=s.current)==null||u.call(s)};return window.addEventListener("scroll",l,!0),()=>{window.removeEventListener("scroll",l,!0)}},[]),w.useEffect(()=>r.registerEditableListener(l=>{t(!l)}),[r]),D.jsx(_x,{options:o,onSelectOption:a,onWillOpen:l=>{n.current=l.target},menuRenderFn:(l,{selectedIndex:u,options:c,selectOptionAndCleanUp:d,setHighlightedIndex:f},{setMenuRef:h})=>(s.current=()=>d(void 0),l.current&&!Cx(n.current,i.current)&&!sm(n.current)?Rt.createPortal(D.jsx("div",{className:"typeahead-popover auto-embed-menu",style:{marginLeft:l.current.style.width,userSelect:"none",width:200},ref:h,children:D.jsx(vx,{options:o,selectedItemIndex:u,onOptionClick:(g,m)=>{g.isDisabled||(f(m),d(g))},onOptionMouseEnter:g=>{f(g)}})}),l.current):null)})}function wx({isEditable:r}){const[e]=fe();return w.useLayoutEffect(()=>{e.setEditable(r)},[e,r]),null}function xx({scripture:r,nodeOptions:e,editorAdaptor:t,viewOptions:n,logger:i}){const[s]=fe();return w.useEffect(()=>{var o;(o=t.initialize)==null||o.call(t,e,i)},[t,i,e]),w.useEffect(()=>{var o;(o=t.reset)==null||o.call(t);const a=t.serializeEditorState(r,n);if(a==null){i==null||i.warn("LoadStatePlugin: serializedEditorState was null or undefined. Skipping editor update.");return}try{const l=s.parseEditorState(a);s.update(()=>{s.setEditorState(l),s.dispatchCommand(rp,void 0)},{tag:pc})}catch{i==null||i.error("LoadStatePlugin: error parsing or setting editor state.")}},[s,r,n,t]),null}function kx({nodeOptions:r,viewOptions:e,logger:t}){const[n]=fe();return Sx(r,t),Tx(n,e),null}function Sx(r,e){var t;const n=w.useRef(),i=(t=r[Xl])==null?void 0:t.noteCallers;w.useEffect(()=>{let s=i;(!s||s.length<=0)&&(s=DC),n.current!==s&&(n.current=s,Ix("note-callers",s,e))},[e,i])}function Tx(r,e){w.useEffect(()=>{if(!r.hasNodes([Fe,mt,ar]))throw new Error("NoteNodePlugin: CharNode, NoteNode or ImmutableNoteCallerNode not registered on editor!");const t=n=>r.update(()=>Ox(n));return Ve(r.registerNodeTransform(mt,n=>Ax(n,e)),r.registerNodeTransform(Fe,Dx),r.registerNodeTransform(At,Nx),r.registerMutationListener(ar,(n,{prevEditorState:i})=>Mx(n,i)),r.registerRootListener((n,i)=>{i!==null&&i.removeEventListener("dblclick",t),n!==null&&n.addEventListener("dblclick",t)}))},[r,e])}function Ax(r,e){!r.getChildren().some(t=>Bs(t))&&(e==null?void 0:e.markerMode)!=="editable"&&r.remove()}function Dx(r){const e=r.getParentOrThrow(),t=e.getChildren(),n=t.find(s=>Bs(s));if(!Fs(r)||!Pt(e)||!n)return;const i=_m(t);n.getPreviewText()!==i&&n.setPreviewText(i)}function Nx(r){const e=mC(r),t=e==null?void 0:e.getChildren(),n=t==null?void 0:t.find(s=>Bs(s));if(!H(r)||!Pt(e)||!n||!t)return;const i=_m(t);n.getPreviewText()!==i&&n.setPreviewText(i)}function Mx(r,e){for(const[t,n]of r){if(n!=="destroyed")continue;const i=e.read(()=>{const o=me(t),a=o==null?void 0:o.getParent();return Bs(o)&&Pt(a)&&a.getCaller()===Qo}),s=document.querySelector(".editor-input");!i||!s||(s.classList.add("reset-counters"),s.offsetHeight,s.classList.remove("reset-counters"))}}function Ox(r){const e=U();if(!F(e))return;const t=e.anchor,n=e.focus,i=t.getNode(),s=n.getNode();if(Pt(i)&&H(s)){r.preventDefault();const o=Ms();o.anchor.set(s.getKey(),0,"text"),o.focus.set(s.getKey(),n.offset,"text"),tt(o)}}function Ix(r,e,t){for(const n of document.styleSheets)try{const i=n.cssRules||n.rules;for(const s of i)if(s instanceof CSSCounterStyleRule&&s.name===r){const o=e.map(a=>`"${a}"`).join(" ");s.symbols=o;return}}catch{continue}t==null||t.warn(`Editor: counter style "${r}" not found.`)}function Rx({onChange:r}){const[e]=fe();return w.useEffect(()=>e.registerCommand(Di,()=>{const t=e.read(()=>by());return r==null||r(t),!1},Li),[e,r]),null}function Lx(){const[r]=fe();return Px(r),null}function Px(r){w.useEffect(()=>{if(!r.hasNodes([et]))throw new Error("ParaNodePlugin: ParaNode not registered on editor!");return r.registerNodeTransform(et,e=>Fx(e,r))},[r])}function Fx(r,e){Cc(e,r.getKey())&&Dm(r.getFirstChild()),!(!Xr(r)||r.getMarker()!=="b"||r.isEmpty()||!e.getEditorState().read(()=>{const t=me(r.getKey());return Xr(t)&&((t==null?void 0:t.isEmpty())??!1)}))&&r.clear()}function Bx({textDirection:r}){const[e]=fe();return qx(e,r),jx(e),null}function qx(r,e){w.useEffect(()=>{function t(){const n=r.getRootElement();if(!n||e==="auto")return;n.dir=e;const i=r._config.theme.placeholder,s=document.getElementsByClassName(i)[0];s&&(s.dir=e)}return t(),r.registerUpdateListener(({dirtyElements:n})=>{n.size>0&&t()})},[r,e])}function jx(r){w.useEffect(()=>{const e=t=>{if(t.key!=="ArrowLeft"&&t.key!=="ArrowRight")return!1;const n=U();if(!F(n))return!1;const i=n.anchor.getNode(),s=Gr(i,d=>kC(d,r)==="p");if(!s)return!1;const o=r.getElementByKey(s.getKey());if(!o)return!1;const a=o.parentElement,l=o.dir||"ltr",u=((a==null?void 0:a.dir)??"")||"ltr";if(!a||l===u)return!1;const c=a.dir==="rtl"&&t.key==="ArrowLeft"||a.dir==="ltr"&&t.key==="ArrowRight";return n.modify("move",c,"character"),t.preventDefault(),!0};return r.registerCommand(Ni,e,ma)},[r])}function $x(){const[r]=fe();return Ux(r),null}function Ux(r){w.useEffect(()=>{if(!r.hasNodes([Fe,gt,mt,At,pt]))throw new Error("TextSpacingPlugin: CharNode, ImmutableVerseNode, NoteNode, TextNode or VerseNode not registered on editor!");return Ve(r.registerNodeTransform(At,Wx),r.registerNodeTransform(At,e=>zx(e,r)),r.registerNodeTransform(pt,nh),r.registerNodeTransform(gt,nh))},[r])}function Wx(r){if(!r.isAttached())return;const e=r.getTextContent(),t=r.getNextSibling(),n=r.getParent();r.getMode()!=="normal"||e.endsWith(" ")&&e.length>1||Pt(t)||Fs(n)||Da(n)||(e===" "&&!xr(t)?r.setTextContent(""):vc(r))}function zx(r,e){const t=r.getParent();!Da(t)||!r.isAttached()||Cc(e,r.getKey())&&t.insertAfter(r)}function nh(r){if(!r.isAttached())return;const e=r.getPreviousSibling();e&&!xr(e)&&!H(e)&&!Da(e)&&r.insertBefore(Re(" "))}var M=(r=>(r.FileIdentification="FileIdentification",r.Headers="Headers",r.Remarks="Remarks",r.Introduction="Introduction",r.DivisionMarks="DivisionMarks",r.Paragraphs="Paragraphs",r.Poetry="Poetry",r.TitlesHeadings="TitlesHeadings",r.Tables="Tables",r.CenterTables="CenterTables",r.RightTables="RightTables",r.Lists="Lists",r.Footnotes="Footnotes",r.CrossReferences="CrossReferences",r.SpecialText="SpecialText",r.CharacterStyling="CharacterStyling",r.Breaks="Breaks",r.SpecialFeatures="SpecialFeatures",r.PeripheralReferences="PeripheralReferences",r.PeripheralMaterials="PeripheralMaterials",r.Uncategorized="Uncategorized",r))(M||{}),N=(r=>(r.Paragraph="Paragraph",r.Character="Character",r.Note="Note",r.Unknown="Unknown",r))(N||{});const Hx={id:{category:M.FileIdentification,type:N.Paragraph,description:"File identification information (BOOKID, FILENAME, EDITOR, MODIFICATION DATE)",hasEndMarker:!1,children:{FileIdentification:["usfm","ide"],Headers:["h","h1","h2","h3","toc1","toc2","toc3"],Remarks:["rem","sts","restore"],Introduction:["imt","imt1","imt2","imt3","imt4","imte","imte1","imte2","is","is1","is2","iot","io","io1","io2","io3","io4","ior","ip","im","ipi","imi","ili","ili1","ili2","ipq","imq","ipr","ib","iq","iq1","iq2","iq3","iex","ie"],DivisionMarks:["c","cl"],TitlesHeadings:["mt","mt1","mt2","mt3","mt4"]}},usfm:{category:M.FileIdentification,type:N.Paragraph,description:"File markup version information",hasEndMarker:!1,children:void 0},ide:{category:M.FileIdentification,type:N.Paragraph,description:"File encoding information",hasEndMarker:!1,children:{Remarks:["rem","sts"]}},h:{category:M.Headers,type:N.Paragraph,description:"Running header text for a book (basic)",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h1:{category:M.Headers,type:N.Paragraph,description:"Running header text",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h2:{category:M.Headers,type:N.Paragraph,description:"Running header text, left side of page",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h3:{category:M.Headers,type:N.Paragraph,description:"Running header text, right side of page",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},toc1:{category:M.Headers,type:N.Paragraph,description:"Long table of contents text",hasEndMarker:!1,children:void 0},toc2:{category:M.Headers,type:N.Paragraph,description:"Short table of contents text",hasEndMarker:!1,children:void 0},toc3:{category:M.Headers,type:N.Paragraph,description:"Book Abbreviation",hasEndMarker:!1,children:void 0},toca1:{category:M.Headers,type:N.Paragraph,description:"Alternative language long table of contents text",hasEndMarker:!1,children:void 0},toca2:{category:M.Headers,type:N.Paragraph,description:"Alternative language short table of contents text",hasEndMarker:!1,children:void 0},toca3:{category:M.Headers,type:N.Paragraph,description:"Alternative language book Abbreviation",hasEndMarker:!1,children:void 0},rem:{category:M.Remarks,type:N.Paragraph,description:"Comments and remarks",hasEndMarker:!1,children:void 0},sts:{category:M.Remarks,type:N.Paragraph,description:"Status of this file",hasEndMarker:!1,children:void 0},restore:{category:M.Remarks,type:N.Paragraph,description:"Project restore information",hasEndMarker:!1,children:void 0},imt:{category:M.Introduction,type:N.Paragraph,description:"Introduction major title, level 1 (if single level) (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt1:{category:M.Introduction,type:N.Paragraph,description:"Introduction major title, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt2:{category:M.Introduction,type:N.Paragraph,description:"Introduction major title, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt3:{category:M.Introduction,type:N.Paragraph,description:"Introduction major title, level 3",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt4:{category:M.Introduction,type:N.Paragraph,description:"Introduction major title, level 4 (usually within parenthesis)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte:{category:M.Introduction,type:N.Paragraph,description:"Introduction major title at introduction end, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte1:{category:M.Introduction,type:N.Paragraph,description:"Introduction major title at introduction end, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte2:{category:M.Introduction,type:N.Paragraph,description:"Introduction major title at introduction end, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},is:{category:M.Introduction,type:N.Paragraph,description:"Introduction section heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"],CharacterStyling:["no"]}},is1:{category:M.Introduction,type:N.Paragraph,description:"Introduction section heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},is2:{category:M.Introduction,type:N.Paragraph,description:"Introduction section heading, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},iot:{category:M.Introduction,type:N.Paragraph,description:"Introduction outline title (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],CharacterStyling:["no"]}},io:{category:M.Introduction,type:N.Paragraph,description:"Introduction outline text, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},io1:{category:M.Introduction,type:N.Paragraph,description:"Introduction outline text, level 1 (if multiple levels) (basic)",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io2:{category:M.Introduction,type:N.Paragraph,description:"Introduction outline text, level 2",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io3:{category:M.Introduction,type:N.Paragraph,description:"Introduction outline text, level 3",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io4:{category:M.Introduction,type:N.Paragraph,description:"Introduction outline text, level 4",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ior:{category:M.Introduction,type:N.Character,description:"Introduction references range for outline entry; for marking references separately",hasEndMarker:!0,children:void 0},ip:{category:M.Introduction,type:N.Paragraph,description:"Introduction prose paragraph (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],Footnotes:["f","fe","fm"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},im:{category:M.Introduction,type:N.Paragraph,description:"Introduction prose paragraph, with no first line indent (may occur after poetry)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipi:{category:M.Introduction,type:N.Paragraph,description:"Introduction prose paragraph, indented, with first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},imi:{category:M.Introduction,type:N.Paragraph,description:"Introduction prose paragraph text, indented, with no first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili:{category:M.Introduction,type:N.Paragraph,description:"A list entry, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili1:{category:M.Introduction,type:N.Paragraph,description:"A list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili2:{category:M.Introduction,type:N.Paragraph,description:"A list entry, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipq:{category:M.Introduction,type:N.Paragraph,description:"Introduction prose paragraph, quote from the body text",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},imq:{category:M.Introduction,type:N.Paragraph,description:"Introduction prose paragraph, quote from the body text, with no first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipr:{category:M.Introduction,type:N.Paragraph,description:"Introduction prose paragraph, right aligned",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ib:{category:M.Introduction,type:N.Paragraph,description:"Introduction blank line",hasEndMarker:!1,children:{Introduction:["iqt"]}},iq:{category:M.Introduction,type:N.Paragraph,description:"Introduction poetry text, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},iq1:{category:M.Introduction,type:N.Paragraph,description:"Introduction poetry text, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iq2:{category:M.Introduction,type:N.Paragraph,description:"Introduction poetry text, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iq3:{category:M.Introduction,type:N.Paragraph,description:"Introduction poetry text, level 3",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iex:{category:M.Introduction,type:N.Paragraph,description:"Introduction explanatory or bridge text (e.g. explanation of missing book in Short Old Testament)",hasEndMarker:!1,children:{Introduction:["iqt"],CharacterStyling:["no"]}},iqt:{category:M.Introduction,type:N.Character,description:"For quoted scripture text appearing in the introduction",hasEndMarker:!0,children:void 0},ie:{category:M.Introduction,type:N.Paragraph,description:"Introduction ending marker",hasEndMarker:!1,children:void 0},c:{category:M.DivisionMarks,type:N.Paragraph,description:"Chapter number",hasEndMarker:!1,children:{DivisionMarks:["ca","cp","cl","cd"],Paragraphs:["p","m","po","pr","cls","pi","pi1","pi2","pi3","pc","mi","nb"],Poetry:["q","q1","q2","q3","q4","qc","qr","qa","qd","b"],TitlesHeadings:["mte","ms","ms1","ms2","ms3","s","s1","s2","s3","s4","r","sp","d","sd","sd1","sd2","sd3","sd4"],Lists:["lh","li","li1","li2","li3","li4","lf","lim","lim1","lim2","lim3","lim4"],Footnotes:["f","fe"],SpecialText:["lit"],Breaks:["pb"]}},ca:{category:M.DivisionMarks,type:N.Character,description:"Second (alternate) chapter number (for coding dual versification; useful for places where different traditions of chapter breaks need to be supported in the same translation)",hasEndMarker:!0,children:void 0},cp:{category:M.DivisionMarks,type:N.Paragraph,description:"Published chapter number (chapter string that should appear in the published text)",hasEndMarker:!1,children:{Footnotes:["f"]}},cl:{category:M.DivisionMarks,type:N.Paragraph,description:"Chapter label used for translations that add a word such as 'Chapter' before chapter numbers (e.g. Psalms). The subsequent text is the chapter label.",hasEndMarker:!1,children:void 0},cd:{category:M.DivisionMarks,type:N.Paragraph,description:"Chapter Description (Publishing option D, e.g. in Russian Bibles)",hasEndMarker:!1,children:{DivisionMarks:["vp"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},v:{category:M.DivisionMarks,type:N.Character,description:"A verse number",hasEndMarker:!1,children:void 0},va:{category:M.DivisionMarks,type:N.Character,description:"Second (alternate) verse number (for coding dual numeration in Psalms; see also NRSV Exo 22.1-4)",hasEndMarker:!0,children:void 0},vp:{category:M.DivisionMarks,type:N.Character,description:"Published verse marker (verse string that should appear in the published text)",hasEndMarker:!0,children:void 0},p:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, with first line indent (basic)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},m:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, with no first line indent (may occur after poetry) (basic)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},po:{category:M.Paragraphs,type:N.Paragraph,description:"Letter opening",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pr:{category:M.Paragraphs,type:N.Paragraph,description:"Text refrain (paragraph text, right aligned)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},cls:{category:M.Paragraphs,type:N.Paragraph,description:"Letter Closing",hasEndMarker:!1,children:{SpecialText:["tl","sig","pn","png","addpn","add"]}},pmo:{category:M.Paragraphs,type:N.Paragraph,description:"Embedded text opening",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pm:{category:M.Paragraphs,type:N.Paragraph,description:"Embedded text paragraph",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pmc:{category:M.Paragraphs,type:N.Paragraph,description:"Embedded text closing",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pmr:{category:M.Paragraphs,type:N.Paragraph,description:"Embedded text refrain (e.g. Then all the people shall say, 'Amen!')",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, level 1 indent (if single level), with first line indent; often used for discourse (basic)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi1:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, level 1 indent (if multiple levels), with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi2:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, level 2 indent, with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi3:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, level 3 indent, with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pc:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, centered (for Inscription)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},mi:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, indented, with no first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},nb:{category:M.Paragraphs,type:N.Paragraph,description:"Paragraph text, with no break from previous paragraph text (at chapter boundary) (basic)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, level 1 indent (if single level)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q1:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, level 1 indent (if multiple levels) (basic)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q2:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, level 2 indent (basic)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q3:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, level 3 indent",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q4:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, level 4 indent",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qc:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, centered",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qr:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, Right Aligned",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qs:{category:M.Poetry,type:N.Character,description:"Poetry text, Selah",hasEndMarker:!0,children:{Footnotes:["f"],CrossReferences:["x"]}},qa:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, Acrostic marker/heading",hasEndMarker:!1,children:void 0},qac:{category:M.Poetry,type:N.Character,description:"Poetry text, Acrostic markup of the first character of a line of acrostic poetry",hasEndMarker:!0,children:void 0},qm:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, embedded, level 1 indent (if single level)",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm1:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, embedded, level 1 indent (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm2:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, embedded, level 2 indent",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm3:{category:M.Poetry,type:N.Paragraph,description:"Poetry text, embedded, level 3 indent",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qd:{category:M.Poetry,type:N.Paragraph,description:"A Hebrew musical performance annotation, similar in content to Hebrew descriptive title.",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},b:{category:M.Poetry,type:N.Paragraph,description:"Poetry text stanza break (e.g. stanza break) (basic)",hasEndMarker:!1,children:void 0},mt:{category:M.TitlesHeadings,type:N.Paragraph,description:"The main title of the book (if single level)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt1:{category:M.TitlesHeadings,type:N.Paragraph,description:"The main title of the book (if multiple levels) (basic)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt2:{category:M.TitlesHeadings,type:N.Paragraph,description:"A secondary title usually occurring before the main title (basic)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt3:{category:M.TitlesHeadings,type:N.Paragraph,description:"A secondary title occurring after the main title",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt4:{category:M.TitlesHeadings,type:N.Paragraph,description:"A small secondary title sometimes occurring within parentheses",hasEndMarker:!1,children:void 0},mte:{category:M.TitlesHeadings,type:N.Paragraph,description:"The main title of the book repeated at the end of the book, level 1 (if single level)",hasEndMarker:!1,children:void 0},mte1:{category:M.TitlesHeadings,type:N.Paragraph,description:"The main title of the book repeated at the end of the book, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mte2"]}},mte2:{category:M.TitlesHeadings,type:N.Paragraph,description:"A secondary title occurring before or after the 'ending' main title",hasEndMarker:!1,children:void 0},ms:{category:M.TitlesHeadings,type:N.Paragraph,description:"A major section division heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms1:{category:M.TitlesHeadings,type:N.Paragraph,description:"A major section division heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms2:{category:M.TitlesHeadings,type:N.Paragraph,description:"A major section division heading, level 2",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms3:{category:M.TitlesHeadings,type:N.Paragraph,description:"A major section division heading, level 3",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe"]}},mr:{category:M.TitlesHeadings,type:N.Paragraph,description:"A major section division references range heading (basic)",hasEndMarker:!1,children:void 0},s:{category:M.TitlesHeadings,type:N.Paragraph,description:"A section heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s1:{category:M.TitlesHeadings,type:N.Paragraph,description:"A section heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s2:{category:M.TitlesHeadings,type:N.Paragraph,description:"A section heading, level 2 (e.g. Proverbs 22-24)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s3:{category:M.TitlesHeadings,type:N.Paragraph,description:"A section heading, level 3 (e.g. Genesis 'The First Day')",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s4:{category:M.TitlesHeadings,type:N.Paragraph,description:"A section heading, level 4",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},sr:{category:M.TitlesHeadings,type:N.Paragraph,description:"A section division references range heading",hasEndMarker:!1,children:void 0},r:{category:M.TitlesHeadings,type:N.Paragraph,description:"Parallel reference(s) (basic)",hasEndMarker:!1,children:void 0},sp:{category:M.TitlesHeadings,type:N.Paragraph,description:"A heading, to identify the speaker (e.g. Job)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},d:{category:M.TitlesHeadings,type:N.Paragraph,description:"A Hebrew text heading, to provide description (e.g. Psalms)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},sd:{category:M.TitlesHeadings,type:N.Paragraph,description:"Vertical space used to divide the text into sections, level 1 (if single level)",hasEndMarker:!1,children:void 0},sd1:{category:M.TitlesHeadings,type:N.Paragraph,description:"Vertical space used to divide the text into sections, level 1 (if multiple levels)",hasEndMarker:!1,children:void 0},sd2:{category:M.TitlesHeadings,type:N.Paragraph,description:"Vertical space used to divide the text into sections, level 2",hasEndMarker:!1,children:void 0},sd3:{category:M.TitlesHeadings,type:N.Paragraph,description:"Vertical space used to divide the text into sections, level 3",hasEndMarker:!1,children:void 0},sd4:{category:M.TitlesHeadings,type:N.Paragraph,description:"Vertical space used to divide the text into sections, level 4",hasEndMarker:!1,children:void 0},lh:{category:M.Lists,type:N.Paragraph,description:"List header (introductory remark)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li:{category:M.Lists,type:N.Paragraph,description:"A list entry, level 1 (if single level)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li1:{category:M.Lists,type:N.Paragraph,description:"A list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li2:{category:M.Lists,type:N.Paragraph,description:"A list entry, level 2",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li3:{category:M.Lists,type:N.Paragraph,description:"A list entry, level 3",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li4:{category:M.Lists,type:N.Paragraph,description:"A list entry, level 4",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lf:{category:M.Lists,type:N.Paragraph,description:"List footer (concluding remark)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim:{category:M.Lists,type:N.Paragraph,description:"An embedded list entry, level 1 (if single level)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim1:{category:M.Lists,type:N.Paragraph,description:"An embedded list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim2:{category:M.Lists,type:N.Paragraph,description:"An embedded list entry, level 2",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim3:{category:M.Lists,type:N.Paragraph,description:"An embedded list item, level 3",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim4:{category:M.Lists,type:N.Paragraph,description:"An embedded list entry, level 4",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},litl:{category:M.Lists,type:N.Character,description:"List entry total text",hasEndMarker:!0,children:void 0},lik:{category:M.Lists,type:N.Character,description:"Structured list entry key text",hasEndMarker:!0,children:void 0},liv:{category:M.Lists,type:N.Character,description:"Structured list entry value 1 content (if single value)",hasEndMarker:!0,children:void 0},liv1:{category:M.Lists,type:N.Character,description:"Structured list entry value 1 content (if multiple values)",hasEndMarker:!0,children:void 0},liv2:{category:M.Lists,type:N.Character,description:"Structured list entry value 2 content",hasEndMarker:!0,children:void 0},liv3:{category:M.Lists,type:N.Character,description:"Structured list entry value 3 content",hasEndMarker:!0,children:void 0},liv4:{category:M.Lists,type:N.Character,description:"Structured list entry value 4 content",hasEndMarker:!0,children:void 0},liv5:{category:M.Lists,type:N.Character,description:"Structured list entry value 5 content",hasEndMarker:!0,children:void 0},f:{category:M.Footnotes,type:N.Note,description:"A Footnote text item (basic)",hasEndMarker:!0,children:{Footnotes:["fr","ft","fk","fq","fqa","fl","fw","fp","fv","fdc"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},fe:{category:M.Footnotes,type:N.Note,description:"An Endnote text item",hasEndMarker:!0,children:{Footnotes:["fr","ft","fk","fq","fqa","fl","fw","fp","fv","fdc"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},fr:{category:M.Footnotes,type:N.Character,description:"The origin reference for the footnote (basic)",hasEndMarker:!0,children:void 0},ft:{category:M.Footnotes,type:N.Character,description:"Footnote text, Protocanon (basic)",hasEndMarker:!0,children:void 0},fk:{category:M.Footnotes,type:N.Character,description:"A footnote keyword (basic)",hasEndMarker:!0,children:void 0},fq:{category:M.Footnotes,type:N.Character,description:"A footnote scripture quote or alternate rendering (basic)",hasEndMarker:!0,children:void 0},fqa:{category:M.Footnotes,type:N.Character,description:"A footnote alternate rendering for a portion of scripture text",hasEndMarker:!0,children:void 0},fl:{category:M.Footnotes,type:N.Character,description:"A footnote label text item, for marking or 'labelling' the type or alternate translation being provided in the note.",hasEndMarker:!0,children:void 0},fw:{category:M.Footnotes,type:N.Character,description:"A footnote witness list, for distinguishing a list of sigla representing witnesses in critical editions.",hasEndMarker:!0,children:void 0},fp:{category:M.Footnotes,type:N.Character,description:"A Footnote additional paragraph marker",hasEndMarker:!0,children:void 0},fv:{category:M.Footnotes,type:N.Character,description:"A verse number within the footnote text",hasEndMarker:!0,children:void 0},fdc:{category:M.Footnotes,type:N.Character,description:"Footnote text, applies to Deuterocanon only",hasEndMarker:!0,children:void 0},fm:{category:M.Footnotes,type:N.Character,description:"An additional footnote marker location for a previous footnote",hasEndMarker:!0,children:void 0},x:{category:M.CrossReferences,type:N.Note,description:"A list of cross references (basic)",hasEndMarker:!0,children:{CrossReferences:["xo","xop","xt","xta","xk","xq","xot","xnt","xdc"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},xo:{category:M.CrossReferences,type:N.Character,description:"The cross reference origin reference (basic)",hasEndMarker:!0,children:void 0},xop:{category:M.CrossReferences,type:N.Character,description:"Published cross reference origin reference (origin reference that should appear in the published text)",hasEndMarker:!0,children:void 0},xt:{category:M.CrossReferences,type:N.Character,description:"The cross reference target reference(s), protocanon only (basic)",hasEndMarker:!0,children:void 0},xta:{category:M.CrossReferences,type:N.Character,description:"Cross reference target references added text",hasEndMarker:!0,children:void 0},xk:{category:M.CrossReferences,type:N.Character,description:"A cross reference keyword",hasEndMarker:!0,children:void 0},xq:{category:M.CrossReferences,type:N.Character,description:"A cross-reference quotation from the scripture text",hasEndMarker:!0,children:void 0},xot:{category:M.CrossReferences,type:N.Character,description:"Cross-reference target reference(s), Old Testament only",hasEndMarker:!0,children:void 0},xnt:{category:M.CrossReferences,type:N.Character,description:"Cross-reference target reference(s), New Testament only",hasEndMarker:!0,children:void 0},xdc:{category:M.CrossReferences,type:N.Character,description:"Cross-reference target reference(s), Deuterocanon only",hasEndMarker:!0,children:void 0},rq:{category:M.CrossReferences,type:N.Character,description:"A cross-reference indicating the source text for the preceding quotation.",hasEndMarker:!0,children:void 0},qt:{category:M.SpecialText,type:N.Character,description:"For Old Testament quoted text appearing in the New Testament (basic)",hasEndMarker:!0,children:void 0},nd:{category:M.SpecialText,type:N.Character,description:"For name of deity (basic)",hasEndMarker:!0,children:void 0},tl:{category:M.SpecialText,type:N.Character,description:"For transliterated words",hasEndMarker:!0,children:void 0},dc:{category:M.SpecialText,type:N.Character,description:"Deuterocanonical/LXX additions or insertions in the Protocanonical text",hasEndMarker:!0,children:void 0},bk:{category:M.SpecialText,type:N.Character,description:"For the quoted name of a book",hasEndMarker:!0,children:void 0},sig:{category:M.SpecialText,type:N.Character,description:"For the signature of the author of an Epistle",hasEndMarker:!0,children:void 0},pn:{category:M.SpecialText,type:N.Character,description:"For a proper name",hasEndMarker:!0,children:void 0},png:{category:M.SpecialText,type:N.Character,description:"For a geographic proper name",hasEndMarker:!0,children:void 0},addpn:{category:M.SpecialText,type:N.Character,description:"For chinese words to be dot underline & underline",hasEndMarker:!0,children:void 0},wj:{category:M.SpecialText,type:N.Character,description:"For marking the words of Jesus",hasEndMarker:!0,children:void 0},k:{category:M.SpecialText,type:N.Character,description:"For a keyword",hasEndMarker:!0,children:void 0},sls:{category:M.SpecialText,type:N.Character,description:"To represent where the original text is in a secondary language or from an alternate text source",hasEndMarker:!0,children:void 0},ord:{category:M.SpecialText,type:N.Character,description:"For the text portion of an ordinal number",hasEndMarker:!0,children:void 0},add:{category:M.SpecialText,type:N.Character,description:"For a translational addition to the text",hasEndMarker:!0,children:void 0},lit:{category:M.SpecialText,type:N.Paragraph,description:"For a comment or note inserted for liturgical use",hasEndMarker:!1,children:void 0},no:{category:M.CharacterStyling,type:N.Character,description:"A character style, use normal text",hasEndMarker:!0,children:void 0},it:{category:M.CharacterStyling,type:N.Character,description:"A character style, use italic text",hasEndMarker:!0,children:void 0},bd:{category:M.CharacterStyling,type:N.Character,description:"A character style, use bold text",hasEndMarker:!0,children:void 0},bdit:{category:M.CharacterStyling,type:N.Character,description:"A character style, use bold + italic text",hasEndMarker:!0,children:void 0},em:{category:M.CharacterStyling,type:N.Character,description:"A character style, use emphasized text style",hasEndMarker:!0,children:void 0},sc:{category:M.CharacterStyling,type:N.Character,description:"A character style, for small capitalization text",hasEndMarker:!0,children:void 0},sup:{category:M.CharacterStyling,type:N.Character,description:"A character style, for superscript text. Typically for use in critical edition footnotes.",hasEndMarker:!0,children:void 0},pb:{category:M.Breaks,type:N.Paragraph,description:"Page Break used for new reader portions and children's bibles where content is controlled by the page",hasEndMarker:!1,children:void 0}},_n={DivisionMarks:{add:["v","c"],remove:[]},Paragraphs:{add:["p"],remove:[]},Poetry:{add:["q","q1","q2","q3","q4","b"],remove:[]},TitlesHeadings:{add:["mte","ms","ms1","ms2","ms3","s","s1","s2","s3","s4","r","sp","d","sd","sd1","sd2","sd3","sd4"],remove:[]}},Vx={p:{children:_n},q:{children:_n},q1:{children:_n},q2:{children:_n},q3:{children:_n},q4:{children:_n},b:{children:_n},qm:{children:{Paragraphs:{add:["p"],remove:[]}}},c:{type:N.Paragraph,children:null},v:{children:null}};function ih(r){const e=Hx[r],t=Vx[r];if(!e)return;if(!t)return e;let n=e.children?{...e.children}:void 0;if(t.children===null&&(n=void 0),t.children){n=n||{};for(const[i,s]of Object.entries(t.children)){const o=i;if(s===null)delete n[o];else{let a=n[o]||[];s.remove&&(a=a.filter(l=>!s.remove.includes(l))),s.add&&(a=[...new Set([...a,...s.add])]),a.length>0?n[o]=a:delete n[o]}}Object.keys(n).length===0&&(n=void 0)}return{...e,...t,children:n}}function Kx({scriptureReference:r,contextMarker:e,getMarkerAction:t}){return{markersMenuItems:w.useMemo(()=>{if(!e||!r)return;const n=ih(e);if(n!=null&&n.children)return Object.values(n.children).flatMap(i=>i.map(s=>{const o=ih(s),{action:a}=t(s,o);return{name:s,label:s,description:(o==null?void 0:o.description)??"",action:l=>{a({editor:l,reference:r})}}}))},[e,t,r])}}const Jx=w.forwardRef((r,e)=>{const{coords:t,children:n,style:i,...s}=r,o=t!==void 0;return D.jsx("div",{ref:e,className:"floating-box","aria-hidden":!o,style:{...i,position:"absolute",zIndex:1e3,top:t==null?void 0:t.y,left:t==null?void 0:t.x,visibility:o?"visible":"hidden",opacity:o?1:0},...s,children:n})}),ra=Math.min,Sn=Math.max,na=Math.round,so=Math.floor,sr=r=>({x:r,y:r}),Gx={left:"right",right:"left",bottom:"top",top:"bottom"},Yx={start:"end",end:"start"};function sh(r,e,t){return Sn(r,ra(e,t))}function xc(r,e){return typeof r=="function"?r(e):r}function Si(r){return r.split("-")[0]}function kc(r){return r.split("-")[1]}function wy(r){return r==="x"?"y":"x"}function xy(r){return r==="y"?"height":"width"}function Ts(r){return["top","bottom"].includes(Si(r))?"y":"x"}function ky(r){return wy(Ts(r))}function Xx(r,e,t){t===void 0&&(t=!1);const n=kc(r),i=ky(r),s=xy(i);let o=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ia(o)),[o,ia(o)]}function Qx(r){const e=ia(r);return[fu(r),e,fu(e)]}function fu(r){return r.replace(/start|end/g,e=>Yx[e])}function Zx(r,e,t){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:n:e?n:i;case"left":case"right":return e?s:o;default:return[]}}function ek(r,e,t,n){const i=kc(r);let s=Zx(Si(r),t==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(fu)))),s}function ia(r){return r.replace(/left|right|bottom|top/g,e=>Gx[e])}function tk(r){return{top:0,right:0,bottom:0,left:0,...r}}function rk(r){return typeof r!="number"?tk(r):{top:r,right:r,bottom:r,left:r}}function sa(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function oh(r,e,t){let{reference:n,floating:i}=r;const s=Ts(e),o=ky(e),a=xy(o),l=Si(e),u=s==="y",c=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,f=n[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:n.y-i.height};break;case"bottom":h={x:c,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:d};break;case"left":h={x:n.x-i.width,y:d};break;default:h={x:n.x,y:n.y}}switch(kc(e)){case"start":h[o]-=f*(t&&u?-1:1);break;case"end":h[o]+=f*(t&&u?-1:1);break}return h}const nk=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:r,floating:e,strategy:i}),{x:c,y:d}=oh(u,n,l),f=n,h={},g=0;for(let m=0;m<a.length;m++){const{name:y,fn:v}=a[m],{x:b,y:C,data:T,reset:R}=await v({x:c,y:d,initialPlacement:n,placement:f,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:r,floating:e}});c=b??c,d=C??d,h={...h,[y]:{...h[y],...T}},R&&g<=50&&(g++,typeof R=="object"&&(R.placement&&(f=R.placement),R.rects&&(u=R.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:i}):R.rects),{x:c,y:d}=oh(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function Sy(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=r,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=xc(e,r),g=rk(h),m=a[f?d==="floating"?"reference":"floating":d],y=sa(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(m)))==null||t?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},T=sa(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:l}):v);return{top:(y.top-T.top+g.top)/C.y,bottom:(T.bottom-y.bottom+g.bottom)/C.y,left:(y.left-T.left+g.left)/C.x,right:(T.right-y.right+g.right)/C.x}}const ik=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...y}=xc(r,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const v=Si(i),b=Ts(a),C=Si(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(u.floating)),R=f||(C||!m?[ia(a)]:Qx(a)),E=g!=="none";!f&&E&&R.push(...ek(a,m,g,T));const A=[a,...R],k=await Sy(e,y),S=[];let L=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&S.push(k[v]),d){const G=Xx(i,o,T);S.push(k[G[0]],k[G[1]])}if(L=[...L,{placement:i,overflows:S}],!S.every(G=>G<=0)){var q,X;const G=(((q=s.flip)==null?void 0:q.index)||0)+1,O=A[G];if(O)return{data:{index:G,overflows:L},reset:{placement:O}};let B=(X=L.filter(z=>z.overflows[0]<=0).sort((z,$)=>z.overflows[1]-$.overflows[1])[0])==null?void 0:X.placement;if(!B)switch(h){case"bestFit":{var j;const z=(j=L.filter($=>{if(E){const V=Ts($.placement);return V===b||V==="y"}return!0}).map($=>[$.placement,$.overflows.filter(V=>V>0).reduce((V,W)=>V+W,0)]).sort(($,V)=>$[1]-V[1])[0])==null?void 0:j[0];z&&(B=z);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}},sk=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:b}=y;return{x:v,y:b}}},...l}=xc(r,e),u={x:t,y:n},c=await Sy(e,l),d=Ts(Si(i)),f=wy(d);let h=u[f],g=u[d];if(s){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=h+c[y],C=h-c[v];h=sh(b,h,C)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=g+c[y],C=g-c[v];g=sh(b,g,C)}const m=a.fn({...e,[f]:h,[d]:g});return{...m,data:{x:m.x-t,y:m.y-n}}}}};function Ia(){return typeof window<"u"}function zi(r){return Ty(r)?(r.nodeName||"").toLowerCase():"#document"}function Nt(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function cr(r){var e;return(e=(Ty(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Ty(r){return Ia()?r instanceof Node||r instanceof Nt(r).Node:!1}function Ut(r){return Ia()?r instanceof Element||r instanceof Nt(r).Element:!1}function lr(r){return Ia()?r instanceof HTMLElement||r instanceof Nt(r).HTMLElement:!1}function ah(r){return!Ia()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Nt(r).ShadowRoot}function Ws(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=Wt(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function ok(r){return["table","td","th"].includes(zi(r))}function Ra(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function Sc(r){const e=Tc(),t=Ut(r)?Wt(r):r;return["transform","translate","scale","rotate","perspective"].some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function ak(r){let e=Qr(r);for(;lr(e)&&!Ti(e);){if(Sc(e))return e;if(Ra(e))return null;e=Qr(e)}return null}function Tc(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ti(r){return["html","body","#document"].includes(zi(r))}function Wt(r){return Nt(r).getComputedStyle(r)}function La(r){return Ut(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Qr(r){if(zi(r)==="html")return r;const e=r.assignedSlot||r.parentNode||ah(r)&&r.host||cr(r);return ah(e)?e.host:e}function Ay(r){const e=Qr(r);return Ti(e)?r.ownerDocument?r.ownerDocument.body:r.body:lr(e)&&Ws(e)?e:Ay(e)}function As(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Ay(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),o=Nt(i);if(s){const a=hu(o);return e.concat(o,o.visualViewport||[],Ws(i)?i:[],a&&t?As(a):[])}return e.concat(i,As(i,[],t))}function hu(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Dy(r){const e=Wt(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=lr(r),s=i?r.offsetWidth:t,o=i?r.offsetHeight:n,a=na(t)!==s||na(n)!==o;return a&&(t=s,n=o),{width:t,height:n,$:a}}function Ac(r){return Ut(r)?r:r.contextElement}function di(r){const e=Ac(r);if(!lr(e))return sr(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:s}=Dy(e);let o=(s?na(t.width):t.width)/n,a=(s?na(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const lk=sr(0);function Ny(r){const e=Nt(r);return!Tc()||!e.visualViewport?lk:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uk(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Nt(r)?!1:e}function Pn(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),s=Ac(r);let o=sr(1);e&&(n?Ut(n)&&(o=di(n)):o=di(r));const a=uk(s,t,n)?Ny(s):sr(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=Nt(s),h=n&&Ut(n)?Nt(n):n;let g=f,m=hu(g);for(;m&&n&&h!==g;){const y=di(m),v=m.getBoundingClientRect(),b=Wt(m),C=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*y.x,T=v.top+(m.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,d*=y.y,l+=C,u+=T,g=Nt(m),m=hu(g)}}return sa({width:c,height:d,x:l,y:u})}function Dc(r,e){const t=La(r).scrollLeft;return e?e.left+t:Pn(cr(r)).left+t}function My(r,e,t){t===void 0&&(t=!1);const n=r.getBoundingClientRect(),i=n.left+e.scrollLeft-(t?0:Dc(r,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function ck(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const s=i==="fixed",o=cr(n),a=e?Ra(e.floating):!1;if(n===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=sr(1);const c=sr(0),d=lr(n);if((d||!d&&!s)&&((zi(n)!=="body"||Ws(o))&&(l=La(n)),lr(n))){const h=Pn(n);u=di(n),c.x=h.x+n.clientLeft,c.y=h.y+n.clientTop}const f=o&&!d&&!s?My(o,l,!0):sr(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:t.y*u.y-l.scrollTop*u.y+c.y+f.y}}function dk(r){return Array.from(r.getClientRects())}function fk(r){const e=cr(r),t=La(r),n=r.ownerDocument.body,i=Sn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Sn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+Dc(r);const a=-t.scrollTop;return Wt(n).direction==="rtl"&&(o+=Sn(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function hk(r,e){const t=Nt(r),n=cr(r),i=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=Tc();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function pk(r,e){const t=Pn(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=lr(r)?di(r):sr(1),o=r.clientWidth*s.x,a=r.clientHeight*s.y,l=i*s.x,u=n*s.y;return{width:o,height:a,x:l,y:u}}function lh(r,e,t){let n;if(e==="viewport")n=hk(r,t);else if(e==="document")n=fk(cr(r));else if(Ut(e))n=pk(e,t);else{const i=Ny(r);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return sa(n)}function Oy(r,e){const t=Qr(r);return t===e||!Ut(t)||Ti(t)?!1:Wt(t).position==="fixed"||Oy(t,e)}function gk(r,e){const t=e.get(r);if(t)return t;let n=As(r,[],!1).filter(a=>Ut(a)&&zi(a)!=="body"),i=null;const s=Wt(r).position==="fixed";let o=s?Qr(r):r;for(;Ut(o)&&!Ti(o);){const a=Wt(o),l=Sc(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&i&&["absolute","fixed"].includes(i.position)||Ws(o)&&!l&&Oy(r,o))?n=n.filter(u=>u!==o):i=a,o=Qr(o)}return e.set(r,n),n}function mk(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const s=[...t==="clippingAncestors"?Ra(e)?[]:gk(e,this._c):[].concat(t),n],o=s[0],a=s.reduce((l,u)=>{const c=lh(e,u,i);return l.top=Sn(c.top,l.top),l.right=ra(c.right,l.right),l.bottom=ra(c.bottom,l.bottom),l.left=Sn(c.left,l.left),l},lh(e,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function yk(r){const{width:e,height:t}=Dy(r);return{width:e,height:t}}function _k(r,e,t){const n=lr(e),i=cr(e),s=t==="fixed",o=Pn(r,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=sr(0);if(n||!n&&!s)if((zi(e)!=="body"||Ws(i))&&(a=La(e)),n){const f=Pn(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=Dc(i));const u=i&&!n&&!s?My(i,a):sr(0),c=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:c,y:d,width:o.width,height:o.height}}function dl(r){return Wt(r).position==="static"}function uh(r,e){if(!lr(r)||Wt(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return cr(r)===t&&(t=t.ownerDocument.body),t}function Iy(r,e){const t=Nt(r);if(Ra(r))return t;if(!lr(r)){let i=Qr(r);for(;i&&!Ti(i);){if(Ut(i)&&!dl(i))return i;i=Qr(i)}return t}let n=uh(r,e);for(;n&&ok(n)&&dl(n);)n=uh(n,e);return n&&Ti(n)&&dl(n)&&!Sc(n)?t:n||ak(r)||t}const bk=async function(r){const e=this.getOffsetParent||Iy,t=this.getDimensions,n=await t(r.floating);return{reference:_k(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function vk(r){return Wt(r).direction==="rtl"}const Ck={convertOffsetParentRelativeRectToViewportRelativeRect:ck,getDocumentElement:cr,getClippingRect:mk,getOffsetParent:Iy,getElementRects:bk,getClientRects:dk,getDimensions:yk,getScale:di,isElement:Ut,isRTL:vk};function Ry(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function Ek(r,e){let t=null,n;const i=cr(r);function s(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=r.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||e(),!f||!h)return;const g=so(d),m=so(i.clientWidth-(c+f)),y=so(i.clientHeight-(d+h)),v=so(c),b={rootMargin:-g+"px "+-m+"px "+-y+"px "+-v+"px",threshold:Sn(0,ra(1,l))||1};let C=!0;function T(R){const E=R[0].intersectionRatio;if(E!==l){if(!C)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!Ry(u,r.getBoundingClientRect())&&o(),C=!1}try{t=new IntersectionObserver(T,{...b,root:i.ownerDocument})}catch{t=new IntersectionObserver(T,b)}t.observe(r)}return o(!0),s}function wk(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=Ac(r),c=i||s?[...u?As(u):[],...As(e)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const d=u&&a?Ek(u,t):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var C;(C=h)==null||C.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let g,m=l?Pn(r):null;l&&y();function y(){const v=Pn(r);m&&!Ry(m,v)&&t(),m=v,g=requestAnimationFrame(y)}return t(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",t),s&&b.removeEventListener("resize",t)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,l&&cancelAnimationFrame(g)}}const xk=sk,kk=ik,Sk=(r,e,t)=>{const n=new Map,i={platform:Ck,...t},s={...i.platform,_c:n};return nk(r,e,{...i,platform:s})};function Tk(){const[r,e]=w.useState(void 0),[t,n]=w.useState(),i=w.useRef(null),s=w.useCallback((a,l)=>{i.current&&i.current();const u=a.commonAncestorContainer.nodeType===a.commonAncestorContainer.TEXT_NODE?a:a.commonAncestorContainer;i.current=wk(u,l,()=>{Sk(u,l,{placement:"bottom-start",middleware:[xk(),kk()]}).then(c=>{n(c.placement),e(d=>(d==null?void 0:d.x)===c.x&&(d==null?void 0:d.y)===c.y?d:{x:c.x,y:c.y})}).catch(()=>{e(void 0)})})},[]),o=w.useCallback(()=>{i.current&&(e(void 0),i.current(),i.current=null)},[]);return w.useEffect(()=>o,[o]),{coords:r,placement:t,updatePosition:s,cleanup:o}}function Ak({isOpen:r,floatingBoxRef:e}){const{coords:t,updatePosition:n,cleanup:i,placement:s}=Tk();return w.useEffect(()=>{var o;if(!r||!e.current){i();return}const a=(o=window.getSelection())==null?void 0:o.getRangeAt(0);if(a)return n(a,e.current),i},[i,r,e,n]),{coords:t,placement:s}}const Dk=document.body,Nk=w.memo(Jx);function Mk({isOpen:r=!1,children:e}){const t=w.useRef(null),{coords:n,placement:i}=Ak({isOpen:r,floatingBoxRef:t}),s=w.useMemo(()=>n?typeof e=="function"?e:()=>e:()=>null,[e,n]);return Rt.createPortal(D.jsx(Nk,{ref:t,coords:n,style:n?void 0:{display:"none"},children:s({isOpen:r,placement:i})}),Dk)}const Ly=w.createContext(void 0);function Nc(){const r=w.useContext(Ly);if(!r)throw new Error("useMenuContext must be used within a MenuProvider");return r}function Ok(r,e){const[t,n]=w.useState(0),[i,s]=w.useState(-1),o=w.useMemo(()=>r??[],[r]),a={menuItems:o,activeIndex:t,selectedIndex:i,onSelectOption:e??(()=>{})},l=w.useCallback(()=>{n(d=>{const f=o.length;return f?(d-1+f)%f:0})},[o.length]),u=w.useCallback(()=>{n(d=>{const f=o.length;return f?(d+1)%f:0})},[o.length]),c=w.useCallback(()=>{const d=o.length;if(t>=0&&t<d){const f=o[t];e==null||e(f),s(t)}},[t,o,e]);return{state:a,moveUp:l,moveDown:u,select:c,setActiveIndex:n,setSelectedIndex:s}}function Ik({children:r,menuItems:e,onSelectOption:t,...n}){const i=Ok(e,t);return D.jsx(Ly.Provider,{value:i,children:D.jsx("div",{...n,children:r})})}const Py=w.forwardRef(({index:r,children:e,onMouseEnter:t,onClick:n,...i},s)=>{const{state:{activeIndex:o},setActiveIndex:a,setSelectedIndex:l,select:u}=Nc(),c=w.useCallback(f=>{u(),l(-1),n==null||n(f)},[n,u,l]),d=w.useCallback(f=>{a(r),t==null||t(f)},[r,a,t]);return D.jsx("button",{ref:s,role:"menuitem",...i,onClick:c,onMouseEnter:d,"aria-selected":r!==void 0&&o===r?"true":void 0,tabIndex:-1,children:e})});function Rk({children:r,autoIndex:e=!0,...t}){const n=w.useRef(null),{state:{activeIndex:i,menuItems:s}}=Nc(),o=w.useMemo(()=>s?typeof r=="function"?r:()=>r:()=>null,[r,s]),a=w.useMemo(()=>{const l=o(s);return e?w.Children.map(l,(u,c)=>w.isValidElement(u)&&u.type===Py&&u.props.index===void 0?w.cloneElement(u,{index:c}):u):l},[o,e,s]);return w.useEffect(()=>{if(n.current){const l=n.current,u=l.children[i];if(u){const c=l.getBoundingClientRect(),d=u.getBoundingClientRect();d.bottom>c.bottom?l.scrollTop+=d.bottom-c.bottom:d.top<c.top&&(l.scrollTop-=c.top-d.top)}}},[i]),D.jsx("div",{ref:n,role:"menu",...t,children:a})}const fl={Root:Ik,Options:Rk,Option:Py},Lk=(r,e,t)=>wo(r,t).toLowerCase().includes(e.toLowerCase()),Pk=r=>Object.keys(r).find(e=>typeof r[e]=="string")||"",wo=(r,e)=>{const t=r[e];return typeof t=="string"?t:String(t)};function Fk({query:r,items:e,filterBy:t,filter:n,sortBy:i,sortingOptions:s}){const{caseSensitive:o=!1,priorityOrder:a=["exact","startsWith","contains"]}=s||{},l=o?r:r.toLowerCase();let u,c;n?(c=n,u=e.length>0?Pk(e[0]):""):(u=t,c=(h,g)=>Lk(h,g,u));const d=i||u,f=new Map;return e.filter(h=>{try{return c(h,r)}catch(g){return console.warn("Error filtering item:",h,g),!1}}).sort((h,g)=>{const m=b=>(f.has(b)||f.set(b,wo(b,d).toLowerCase()),f.get(b)??""),y=o?wo(h,d):m(h),v=o?wo(g,d):m(g);for(const b of a)switch(b){case"exact":if(y===l&&v!==l)return-1;if(v===l&&y!==l)return 1;break;case"startsWith":if(y.startsWith(l)&&!v.startsWith(l))return-1;if(v.startsWith(l)&&!y.startsWith(l))return 1;break;case"contains":{const C=y.indexOf(l),T=v.indexOf(l);if(C!==-1&&T===-1)return-1;if(T!==-1&&C===-1)return 1;if(C!==-1&&T!==-1)return C-T;break}}return y.localeCompare(v)})}function Bk({query:r,items:e,filterBy:t,filter:n,sortBy:i,sortingOptions:s}){return w.useMemo(()=>Fk({query:r,items:e,filterBy:t,filter:n,sortBy:i,sortingOptions:s}),[r,e,t,n,i,s])}function qk(){const{moveUp:r,moveDown:e,select:t}=Nc();return w.useMemo(()=>({moveUp:r,moveDown:e,select:t}),[r,e,t])}const jk=()=>{const r=qk(),[e]=fe();w.useEffect(()=>{const t=n=>{const i={ArrowDown:()=>r==null?void 0:r.moveDown(),ArrowUp:()=>r==null?void 0:r.moveUp(),Enter:()=>r==null?void 0:r.select(),Tab:()=>r==null?void 0:r.select()}[n.key];return i?(i(),n.preventDefault(),n.stopPropagation(),!0):!1};return e.registerCommand(Ni,t,ma)},[e,r])};function $k(){return jk(),null}function Uk({options:r,onSelectOption:e,onClose:t,inverse:n,query:i}){const[s]=fe(),o=i!==void 0,[a,l]=w.useState(""),u=o?i:a,c=Bk({query:u,items:r,filterBy:"name"}),d=f=>{t==null||t(),e?e(f):f.action(s)};return w.useEffect(()=>s.registerCommand(Ni,f=>{if(o)return!1;const h={Escape:()=>t==null?void 0:t(),Backspace:()=>{u.length===0?t==null||t():l(g=>g.slice(0,-1))}}[f.key];return h?(f.stopPropagation(),f.preventDefault(),h(),!0):f.key.length===1?(f.stopPropagation(),f.preventDefault(),l(g=>g+f.key),!0):!1},ma),[s,o,u,t]),D.jsxs(fl.Root,{className:`autocomplete-menu-container ${n?"inverse":""}`,menuItems:c,onSelectOption:f=>d(f),children:[!o&&D.jsx("input",{value:u,type:"text",disabled:!0}),D.jsx($k,{}),D.jsx(fl.Options,{className:"autocomplete-menu-options",autoIndex:!1,children:f=>f.map((h,g)=>D.jsxs(fl.Option,{index:g,children:[D.jsx("span",{className:"label",children:h.label??h.name}),D.jsx("span",{className:"description",children:h.description})]},h.name))})]})}function Wk({trigger:r,items:e}){const[t]=fe(),[n,i]=w.useState(!1),s=w.useCallback(o=>{o.key==="Escape"&&n?(i(!1),t.focus()):o.key===r&&!n&&(o.preventDefault(),i(!0))},[t,r,n]);return w.useEffect(()=>t.registerRootListener(o=>{if(o)return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}}),[t,s]),w.useEffect(()=>t.registerUpdateListener(({prevEditorState:o,editorState:a})=>{const l=o.read(()=>{const u=U();if(F(u))return u});a.read(()=>{const u=U();!F(u)||l!=null&&l.is(u)||i(!1)})}),[t]),e&&D.jsx(Mk,{isOpen:n,children:({placement:o})=>D.jsx(Uk,{options:e,onClose:()=>i(!1),inverse:o==="top-start"})})}function zk({trigger:r,scriptureReference:e,contextMarker:t,getMarkerAction:n}){const{markersMenuItems:i}=Kx({scriptureReference:e,contextMarker:t,getMarkerAction:n});return D.jsx(Wk,{trigger:r,items:i})}function Hk({trigger:r,scrRef:e,getMarkerAction:t}){const{book:n,chapterNum:i,verseNum:s,verse:o}=e,a=w.useMemo(()=>e,[n,i,s,o]),[l]=fe(),[u]=Vk(l);return Kk(l),D.jsx(zk,{trigger:r,scriptureReference:a,contextMarker:u,getMarkerAction:t})}function Vk(r){const[e,t]=w.useState();return w.useEffect(()=>r.registerCommand(Di,()=>(r.read(()=>{const n=U();if(!F(n)){e&&t(void 0);return}const i=me(n.anchor.key),s=me(n.focus.key);if(!i||!s){e&&t(void 0);return}const o=vC(i,s);if(!o||!$C(o)){e&&t(void 0);return}const a=o.getMarker();e!==a&&t(a)}),!1),Li),[e,r]),[e]}function Kk(r){w.useEffect(()=>{if(!r.hasNodes([pt,gt]))throw new Error("UsjNodesMenuPlugin: VerseNode or ImmutableVerseNode not registered on editor!");const e={},t={};return Ve(r.registerNodeTransform(gt,n=>ch(n,r,e)),r.registerNodeTransform(pt,n=>ch(n,r,e)),r.registerMutationListener(gt,n=>ph(n,r,e,t)),r.registerMutationListener(pt,n=>ph(n,r,e,t)))},[r])}function ch(r,e,t){e0(pc)||Cc(e,r.getKey())&&Yk(r,t)}function dh(r){return RegExp(/(\d+)([a-zA-Z]+)?(-(\d+)([a-zA-Z]+)?)?/).exec(r)}const fh=2,Jk=3,hh=4,Gk=5;function Yk(r,e){var t;const n=yc(r),i=n==null?void 0:n.getNumber();if(!i)return;const s=e[i];if(!s)return;let o=parseInt(r.getNumber()),a=((t=dh(r.getNumber()))==null?void 0:t[fh])??"";s.forEach(l=>{const u=me(l);if(!u)return;const c=u.getNumber(),d=parseInt(c),f=dh(c),h=!!(f!=null&&f[Jk]),g=h?parseInt(f[hh]):d;if(g<o||d>o||g===o&&a)return;const m=(f==null?void 0:f[fh])??"",y=(f==null?void 0:f[Gk])??"",v=h?Yl(parseInt(f[hh]),void 0):"";let b=`${m}`;b+=h?`-${v}${y}`:"";const C=Yl(d,void 0);u.setNumber(`${C}${b}`),o=parseInt(h?v:C),a=h?y:m})}function ph(r,e,t,n){e.getEditorState().read(()=>{for(const[i,s]of r){const o=me(i);if(xr(o)){if(s==="created"){const a=yc(o);if(!a)continue;const l=a.getNumber();t[l]||(t[l]=[]),t[l].push(i),n[i]=l}else if(s==="destroyed"){const a=n[i],l=t[a];if(!l)continue;const u=l.findIndex(c=>c===i);if(u===-1)continue;l.splice(u,1),delete n[i]}}}})}const Xk=[$t,Mr,Ht,pt,Fe,mt,or,Ui,Wn,Hn,zn,et,{replace:rn,withKlass:et,with:r=>new et(r.__marker,r.__unknownAttributes)}],gh={namespace:"platformEditor",theme:oy,editable:!0,editorState:void 0,onError(r){throw r},nodes:[Qe,ar,gt,...Xk]},Qk=wc(),Zk={},eS={};function tS(){return D.jsx("div",{className:"editor-placeholder",children:"Enter some Scripture..."})}const Fy=w.forwardRef(function({defaultUsj:r,scrRef:e,onScrRefChange:t,onSelectionChange:n,onUsjChange:i,options:s,logger:o,children:a},l){const u=w.useRef(null),c=w.useRef(null),d=w.useRef(null),f=w.useRef(r),[h,g]=w.useState(r),{isReadonly:m=!1,hasSpellCheck:y=!1,textDirection:v="ltr",markerMenuTrigger:b="\\",view:C=Qk,nodes:T=Zk,debug:R=!1}=s??eS;gh.editable=!m,Of.initialize(o),w.useImperativeHandle(l,()=>({focus(){var A;(A=u.current)==null||A.focus()},getUsj(){return f.current},setUsj(A){uo(f.current,A)||(f.current=A,g(A))},getSelection(){var A;return(A=u.current)==null?void 0:A.read(()=>by())},setSelection(A){var k;(k=u.current)==null||k.update(()=>{const S=_y(A);S!==void 0&&tt(S)},{tag:Jg})},addAnnotation(A,k,S){var L;(L=c.current)==null||L.addAnnotation(A,k,S)},removeAnnotation(A,k){var S;(S=c.current)==null||S.removeAnnotation(A,k)},get toolbarEndRef(){return d}}));const E=w.useCallback((A,k,S)=>{if(Wv.some(q=>S.has(q)))return;const L=Of.deserializeEditorState(A);if(L){const q=!uo(f.current,L);q&&(f.current=L),(q||!uo(h,L))&&(i==null||i(L))}},[h,i]);return D.jsxs(uy,{initialConfig:gh,children:[D.jsx(wx,{isEditable:!m}),D.jsxs("div",{className:"editor-container",children:[D.jsx("div",{className:"editor-toolbar-container"+(m?"-readonly":"-editable"),children:D.jsx(Iw,{ref:d})}),D.jsxs("div",{className:"editor-inner",children:[D.jsx(fy,{editorRef:u}),D.jsx(rx,{contentEditable:D.jsx(dy,{className:`editor-input ${GE(C).join(" ")}`,spellCheck:y}),placeholder:D.jsx(tS,{}),ErrorBoundary:hy}),D.jsx(py,{}),e&&t&&D.jsx(UC,{scrRef:e,onScrRefChange:t}),e&&D.jsx(Hk,{trigger:b,scrRef:e,getMarkerAction:(A,k)=>_w(A,k,C)}),D.jsx(Pv,{options:{view:C,nodes:T},editedUsjRef:f,usj:h,setUsj:g}),D.jsx(xx,{scripture:h,nodeOptions:T,editorAdaptor:sy,viewOptions:C,logger:o}),D.jsx(Rx,{onChange:n}),D.jsx(gy,{onChange:E,ignoreSelectionChange:!0,ignoreHistoryMergeTagChange:!0}),D.jsx(sx,{ref:c,logger:o}),D.jsx(ox,{}),D.jsx(fx,{}),D.jsx(hx,{logger:o}),D.jsx(Ex,{}),D.jsx(kx,{nodeOptions:T,viewOptions:C,logger:o}),D.jsx(Lx,{}),D.jsx(Bx,{textDirection:v}),D.jsx($x,{}),a]}),R&&D.jsx(AE,{})]})]})}),By=w.forwardRef(function(r,e){const{children:t,...n}=r;return D.jsx(Fy,{ref:e,...n})});function rS({defaultSelection:r}){const[e]=fe();return w.useEffect(()=>{e.focus(()=>{const t=document.activeElement,n=e.getRootElement();n===null||t!==null&&n.contains(t)||n.focus({preventScroll:!0})},{defaultSelection:r})},[r,e]),null}const nS=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?w.useLayoutEffect:w.useEffect;function iS({onClear:r}){const[e]=fe();return nS(()=>e.registerCommand(Ou,t=>(e.update(()=>{if(r==null){const n=ke(),i=U(),s=Dt();n.clear(),n.append(s),i!==null&&s.select(),F(i)&&(i.format=0)}else r()}),!0),oe),[e,r]),null}const mh=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],yh=mh[Math.floor(Math.random()*mh.length)],sS=w.createContext({clientID:0,color:yh[1],isCollabActive:!1,name:yh[0],yjsDocMap:new Map});function qy(r,e){return w.useContext(sS)}const Hi=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,oS=Hi&&"documentMode"in document?document.documentMode:null,aS=!(!Hi||!("InputEvent"in window)||oS)&&"getTargetRanges"in new window.InputEvent("input"),lS=Hi&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),_h=Hi&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,uS=Hi&&/^(?=.*Chrome).*/i.test(navigator.userAgent),cS=Hi&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!uS;function bh(r,e){e.update(()=>{if(r!==null){const t=Cr(r,KeyboardEvent)?null:r.clipboardData,n=U();if(n!==null&&t!=null){r.preventDefault();const i=qm(e);i!==null&&t.setData("text/html",i),t.setData("text/plain",n.getTextContent())}}})}function dS(r){return Ve(r.registerCommand(tr,e=>{const t=U();return!!F(t)&&(t.deleteCharacter(e),!0)},oe),r.registerCommand(pi,e=>{const t=U();return!!F(t)&&(t.deleteWord(e),!0)},oe),r.registerCommand(gi,e=>{const t=U();return!!F(t)&&(t.deleteLine(e),!0)},oe),r.registerCommand(vn,e=>{const t=U();if(!F(t))return!1;if(typeof e=="string")t.insertText(e);else{const n=e.dataTransfer;if(n!=null)_f(n,t);else{const i=e.data;i&&t.insertText(i)}}return!0},oe),r.registerCommand(Oo,()=>{const e=U();return!!F(e)&&(e.removeText(),!0)},oe),r.registerCommand(zr,e=>{const t=U();return!!F(t)&&(t.insertLineBreak(e),!0)},oe),r.registerCommand(ys,()=>{const e=U();return!!F(e)&&(e.insertLineBreak(),!0)},oe),r.registerCommand(ku,e=>{const t=U();if(!F(t))return!1;const n=e,i=n.shiftKey;return!!Uo(t,!0)&&(n.preventDefault(),Wo(t,i,!0),!0)},oe),r.registerCommand(xu,e=>{const t=U();if(!F(t))return!1;const n=e,i=n.shiftKey;return!!Uo(t,!1)&&(n.preventDefault(),Wo(t,i,!1),!0)},oe),r.registerCommand(Au,e=>{const t=U();return!!F(t)&&(!_h||navigator.language!=="ko-KR")&&(e.preventDefault(),r.dispatchCommand(tr,!0))},oe),r.registerCommand(Du,e=>{const t=U();return!!F(t)&&(e.preventDefault(),r.dispatchCommand(tr,!1))},oe),r.registerCommand(mi,e=>{const t=U();if(!F(t))return!1;if(e!==null){if((_h||lS||cS)&&aS)return!1;e.preventDefault()}return r.dispatchCommand(zr,!1)},oe),r.registerCommand(Io,()=>(qp(),!0),oe),r.registerCommand(qn,e=>{const t=U();return!!F(t)&&(bh(e,r),!0)},oe),r.registerCommand(Mi,e=>{const t=U();return!!F(t)&&(function(n,i){bh(n,i),i.update(()=>{const s=U();F(s)&&s.removeText()})}(e,r),!0)},oe),r.registerCommand(Bn,e=>{const t=U();return!!F(t)&&(function(n,i){n.preventDefault(),i.update(()=>{const s=U(),o=Cr(n,ClipboardEvent)?n.clipboardData:null;o!=null&&F(s)&&_f(o,s)},{tag:Np})}(e,r),!0)},oe),r.registerCommand(ha,e=>{const t=U();return!!F(t)&&(e.preventDefault(),!0)},oe),r.registerCommand(Mu,e=>{const t=U();return!!F(t)&&(e.preventDefault(),!0)},oe))}const pu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?w.useLayoutEffect:w.useEffect;function vh(r){return r.getEditorState().read(nc(r.isComposing()))}function fS({contentEditable:r,placeholder:e=null,ErrorBoundary:t}){const[n]=fe(),i=function(s,o){const[a,l]=w.useState(()=>s.getDecorators());return pu(()=>s.registerDecoratorListener(u=>{Rt.flushSync(()=>{l(u)})}),[s]),w.useEffect(()=>{l(s.getDecorators())},[s]),w.useMemo(()=>{const u=[],c=Object.keys(a);for(let d=0;d<c.length;d++){const f=c[d],h=D.jsx(o,{onError:m=>s._onError(m),children:D.jsx(w.Suspense,{fallback:null,children:a[f]})}),g=s.getElementByKey(f);g!==null&&u.push(Rt.createPortal(h,g,f))}return u},[o,a,s])}(n,t);return function(s){pu(()=>Ve(dS(s),yy(s)),[s])}(n),D.jsxs(D.Fragment,{children:[r,D.jsx(hS,{content:e}),i]})}function hS({content:r}){const[e]=fe(),t=function(i){const[s,o]=w.useState(()=>vh(i));return pu(()=>{function a(){const l=vh(i);o(l)}return a(),Ve(i.registerUpdateListener(()=>{a()}),i.registerEditableListener(()=>{a()}))},[i]),s}(e),n=my();return t?typeof r=="function"?r(n):r:null}function jy(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function oa(r,e,t,n,i){return{author:e,content:r,deleted:i===void 0?!1:i,id:t===void 0?jy():t,timeStamp:n===void 0?performance.timeOrigin+performance.now():n,type:"comment"}}function $y(r,e,t){return{comments:e,id:t===void 0?jy():t,quote:r,type:"thread"}}function Ch(r){return{comments:Array.from(r.comments),id:r.id,quote:r.quote,type:"thread"}}function pS(r){return{author:r.author,content:"[Deleted Comment]",deleted:!0,id:r.id,timeStamp:r.timeStamp,type:"comment"}}function hl(r){const e=r._changeListeners;for(const t of e)t()}class gS{constructor(e,t){ie(this,"_editor"),ie(this,"_comments"),ie(this,"_changeListeners"),ie(this,"_collabProvider"),ie(this,"logger"),this._comments=[],this._editor=e,this.logger=t,this._collabProvider=null,this._changeListeners=new Set}isCollaborative(){return this._collabProvider!==null}getComments(){return this._comments}setComments(e){this._comments=e,hl(this)}addComment(e,t,n){const i=Array.from(this._comments),s=this._getCollabComments();if(t!==void 0&&e.type==="comment")for(let o=0;o<i.length;o++){const a=i[o];if(a.type==="thread"&&a.id===t.id){const l=Ch(a);i.splice(o,1,l);const u=n!==void 0?n:l.comments.length;if(this.isCollaborative()&&s!==null){const c=s.get(o).get("comments");this._withRemoteTransaction(()=>{const d=this._createCollabSharedMap(e);c.insert(u,[d])})}l.comments.splice(u,0,e);break}}else{const o=n!==void 0?n:i.length;this.isCollaborative()&&s!==null&&this._withRemoteTransaction(()=>{const a=this._createCollabSharedMap(e);s.insert(o,[a])}),i.splice(o,0,e)}this._comments=i,hl(this)}deleteCommentOrThread(e,t){const n=Array.from(this._comments),i=this._getCollabComments();let s=null;if(t!==void 0)for(let o=0;o<n.length;o++){const a=n[o];if(a.type==="thread"&&a.id===t.id){const l=Ch(a);n.splice(o,1,l);const u=l.comments;if(s=u.indexOf(e),this.isCollaborative()&&i!==null){const c=i.get(o).get("comments"),d=s;this._withRemoteTransaction(()=>{c.delete(d)})}u.splice(s,1);break}}else s=n.indexOf(e),this.isCollaborative()&&i!==null&&this._withRemoteTransaction(()=>{i.delete(s)}),n.splice(s,1);return this._comments=n,hl(this),e.type==="comment"?{index:s,markedComment:pS(e)}:null}registerOnChange(e){const t=this._changeListeners;return t.add(e),()=>{t.delete(e)}}_withRemoteTransaction(e){const t=this._collabProvider;t!==null&&t.doc.transact(e,this)}_withLocalTransaction(e){const t=this._collabProvider;try{this._collabProvider=null,e()}finally{this._collabProvider=t}}_getCollabComments(){const e=this._collabProvider;return e!==null?e.doc.get("comments",kn):null}_createCollabSharedMap(e){const t=new wi,n=e.type,i=e.id;if(t.set("type",n),t.set("id",i),n==="comment")t.set("author",e.author),t.set("content",e.content),t.set("deleted",e.deleted),t.set("timeStamp",e.timeStamp);else{t.set("quote",e.quote);const s=new kn;e.comments.forEach((o,a)=>{const l=this._createCollabSharedMap(o);s.insert(a,[l])}),t.set("comments",s)}return t}registerCollaboration(e){this._collabProvider=e;const t=this._getCollabComments(),n=()=>{e.connect()},i=()=>{try{e.disconnect()}catch{}},s=this._editor.registerCommand(Ov,a=>{var l,u;return n!==void 0&&i!==void 0&&(a?((l=this.logger)==null||l.info("Comments connected!"),n()):((u=this.logger)==null||u.info("Comments disconnected!"),i())),!1},Li),o=(a,l)=>{if(l.origin!==this)for(let u=0;u<a.length;u++){const c=a[u];if(c instanceof Lg){const d=c.target,f=c.delta;let h=0;for(let g=0;g<f.length;g++){const m=f[g],y=m.insert,v=m.retain,b=m.delete,C=d.parent,T=d===t?void 0:C instanceof wi&&this._comments.find(R=>R.id===C.get("id"));if(Array.isArray(y)){const R=h;y.slice().reverse().forEach(E=>{const A=E.get("id"),k=E.get("type")==="thread"?$y(E.get("quote"),E.get("comments").toArray().map(S=>oa(S.get("content"),S.get("author"),S.get("id"),S.get("timeStamp"),S.get("deleted"))),A):oa(E.get("content"),E.get("author"),A,E.get("timeStamp"),E.get("deleted"));this._withLocalTransaction(()=>{this.addComment(k,T,R)})})}else if(typeof v=="number")h+=v;else if(typeof b=="number")for(let R=0;R<b;R++){const E=T===void 0||T===!1?this._comments[h]:T.comments[h];this._withLocalTransaction(()=>{this.deleteCommentOrThread(E,T)}),h++}}}}};return t===null?()=>null:(t.observeDeep(o),n(),()=>{t.unobserveDeep(o),s(),this._collabProvider=null})}}function mS(r){const[e,t]=w.useState(r.getComments());return w.useEffect(()=>r.registerOnChange(()=>{t(r.getComments())}),[r]),e}function yS({onClose:r,children:e,title:t,closeOnClickOutside:n}){const i=w.useRef(null);return w.useEffect(()=>{i.current!==null&&i.current.focus()},[]),w.useEffect(()=>{let s=null;const o=u=>{u.key==="Escape"&&r()},a=u=>{const c=u.target;i.current!==null&&!i.current.contains(c)&&n&&r()},l=i.current;return l!==null&&(s=l.parentElement,s!==null&&s.addEventListener("click",a)),window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o),s!==null&&(s==null||s.removeEventListener("click",a))}},[n,r]),D.jsx("div",{className:"Modal__overlay",role:"dialog",children:D.jsxs("div",{className:"Modal__modal",tabIndex:-1,ref:i,children:[D.jsx("h2",{className:"Modal__title",children:t}),D.jsx("button",{className:"Modal__closeButton","aria-label":"Close modal",type:"button",onClick:r,children:"X"}),D.jsx("div",{className:"Modal__content",children:e})]})})}function _S({onClose:r,children:e,title:t,closeOnClickOutside:n=!1}){return Rt.createPortal(D.jsx(yS,{onClose:r,title:t,closeOnClickOutside:n,children:e}),document.body)}function Uy(){const[r,e]=w.useState(null),t=w.useCallback(()=>{e(null)},[]),n=w.useMemo(()=>{if(r===null)return null;const{title:s,content:o,closeOnClickOutside:a}=r;return D.jsx(_S,{onClose:t,title:s,closeOnClickOutside:a,children:o})},[r,t]),i=w.useCallback((s,o,a=!1)=>{e({closeOnClickOutside:a,content:o(t),title:s})},[t]);return[n,i]}const bS={...oy,paragraph:"CommentEditorTheme__paragraph"};function vS(...r){return r.filter(Boolean).join(" ")}function Zr({"data-test-id":r,children:e,className:t,onClick:n,disabled:i,small:s,title:o}){return D.jsx("button",{disabled:i,className:vS("Button__root",i&&"Button__disabled",s&&"Button__small",t),onClick:n,title:o,"aria-label":o,...r&&{"data-test-id":r},children:e})}function CS({className:r}){return D.jsx(dy,{className:r||"ContentEditable__root"})}function ES({children:r,className:e}){return D.jsx("div",{className:e||"Placeholder__root",children:r})}const Eh=le("INSERT_INLINE_COMMAND");function wS({anchorKey:r,editor:e,showComments:t,onAddComment:n}){const i=w.useRef(null),s=w.useCallback(()=>{const o=i.current,a=e.getRootElement(),l=e.getElementByKey(r);if(o!==null&&a!==null&&l!==null){const{right:u}=a.getBoundingClientRect(),{top:c}=l.getBoundingClientRect();o.style.left=`${u-20}px`,o.style.top=`${c-30}px`}},[r,e]);return w.useEffect(()=>(window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}),[e,s]),w.useLayoutEffect(()=>{s()},[r,e,t,s]),D.jsx("div",{className:"CommentPlugin_AddCommentBox",ref:i,children:D.jsx("button",{className:"CommentPlugin_AddCommentBox_button",onClick:n,children:D.jsx("i",{className:"icon add-comment"})})})}function xS({onEscape:r}){const[e]=fe();return w.useEffect(()=>e.registerCommand(fa,t=>r(t),go),[e,r]),null}function Wy({className:r,autoFocus:e,onEscape:t,onChange:n,editorRef:i,placeholder:s="Type a comment..."}){const o={namespace:"Commenting",nodes:[],onError:a=>{throw a},theme:bS};return D.jsx(uy,{initialConfig:o,children:D.jsxs("div",{className:"CommentPlugin_CommentInputBox_EditorContainer",children:[D.jsx(fS,{contentEditable:D.jsx(CS,{className:r}),placeholder:D.jsx(ES,{children:s}),ErrorBoundary:hy}),D.jsx(gy,{onChange:n}),D.jsx(py,{}),e!==!1&&D.jsx(rS,{}),D.jsx(xS,{onEscape:t}),D.jsx(iS,{}),i!==void 0&&D.jsx(fy,{editorRef:i})]})})}function zy(r,e){return w.useCallback((t,n)=>{t.read(()=>{r(eg()),e(!tg(n.isComposing(),!0))})},[e,r])}function kS({editor:r,cancelAddComment:e,submitAddComment:t}){const[n,i]=w.useState(""),[s,o]=w.useState(!1),a=w.useRef(null),l=w.useMemo(()=>({container:document.createElement("div"),elements:[]}),[]),u=w.useRef(null),c=Vy(),d=w.useCallback(()=>{r.getEditorState().read(()=>{const m=U();if(F(m)){u.current=m.clone();const y=m.anchor,v=m.focus,b=x0(r,y.getNode(),y.offset,v.getNode(),v.offset),C=a.current;if(b!==null&&C!==null){const{left:T,bottom:R,width:E}=b.getBoundingClientRect(),A=k0(r,b);let k=A.length===1?T+E/2-125:T-125;k<10&&(k=10),C.style.left=`${k}px`,C.style.top=`${R+20+(window.pageYOffset||document.documentElement.scrollTop)}px`;const S=A.length,{container:L}=l,q=l.elements,X=q.length;for(let j=0;j<S;j++){const G=A[j];let O=q[j];O===void 0&&(O=document.createElement("span"),q[j]=O,L.appendChild(O));const B=`position:absolute;top:${G.top+(window.pageYOffset||document.documentElement.scrollTop)}px;left:${G.left}px;height:${G.height}px;width:${G.width}px;background-color:rgba(255, 212, 0, 0.3);pointer-events:none;z-index:5;`;O.style.cssText=B}for(let j=X-1;j>=S;j--){const G=q[j];L.removeChild(G),q.pop()}}}})},[r,l]);w.useLayoutEffect(()=>{d();const m=l.container,y=document.body;if(y!==null)return y.appendChild(m),()=>{y.removeChild(m)}},[l.container,d]),w.useEffect(()=>(window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}),[d]);const f=m=>(m.preventDefault(),e(),!0),h=()=>{if(s){let m=r.getEditorState().read(()=>{const y=u.current;return y?y.getTextContent():""});m.length>100&&(m=m.slice(0,99)+"…"),t($y(m,[oa(n,c)]),!0,void 0,u.current),u.current=null}},g=zy(i,o);return D.jsxs("div",{className:"CommentPlugin_CommentInputBox",ref:a,children:[D.jsx(Wy,{className:"CommentPlugin_CommentInputBox_Editor",onEscape:f,onChange:g}),D.jsxs("div",{className:"CommentPlugin_CommentInputBox_Buttons",children:[D.jsx(Zr,{onClick:e,className:"CommentPlugin_CommentInputBox_Button",children:"Cancel"}),D.jsx(Zr,{onClick:h,disabled:!s,className:"CommentPlugin_CommentInputBox_Button primary",children:"Comment"})]})]})}function SS({submitAddComment:r,thread:e,placeholder:t}){const[n,i]=w.useState(""),[s,o]=w.useState(!1),a=w.useRef(null),l=Vy(),u=zy(i,o),c=()=>{if(s){r(oa(n,l),!1,e);const d=a.current;d!==null&&d.dispatchCommand(Ou,void 0)}};return D.jsxs(D.Fragment,{children:[D.jsx(Wy,{className:"CommentPlugin_CommentsPanel_Editor",autoFocus:!1,onEscape:()=>!0,onChange:u,editorRef:a,placeholder:t}),D.jsx(Zr,{className:"CommentPlugin_CommentsPanel_SendButton",onClick:c,disabled:!s,children:D.jsx("i",{className:"send"})})]})}function Hy({commentOrThread:r,deleteCommentOrThread:e,onClose:t,thread:n=void 0}){return D.jsxs(D.Fragment,{children:["Are you sure you want to delete this ",r.type,"?",D.jsxs("div",{className:"Modal__content",children:[D.jsx(Zr,{onClick:()=>{e(r,n),t()},children:"Delete"})," ",D.jsx(Zr,{onClick:()=>{t()},children:"Cancel"})]})]})}function wh({comment:r,deleteComment:e,thread:t,rtf:n}){const i=Math.round((r.timeStamp-(performance.timeOrigin+performance.now()))/1e3),s=Math.round(i/60),[o,a]=Uy();return D.jsxs("li",{className:"CommentPlugin_CommentsPanel_List_Comment",children:[D.jsxs("div",{className:"CommentPlugin_CommentsPanel_List_Details",children:[D.jsx("span",{className:"CommentPlugin_CommentsPanel_List_Comment_Author",children:r.author}),D.jsxs("span",{className:"CommentPlugin_CommentsPanel_List_Comment_Time",children:["· ",i>-10?"Just now":n.format(s,"minute")]})]}),D.jsx("p",{className:r.deleted?"CommentPlugin_CommentsPanel_DeletedComment":"",children:r.content}),!r.deleted&&D.jsxs(D.Fragment,{children:[D.jsx(Zr,{onClick:()=>{a("Delete Comment",l=>D.jsx(Hy,{commentOrThread:r,deleteCommentOrThread:e,thread:t,onClose:l}))},className:"CommentPlugin_CommentsPanel_List_DeleteButton",children:D.jsx("i",{className:"delete"})}),o]})]})}function TS({activeIDs:r,comments:e,deleteCommentOrThread:t,listRef:n,submitAddComment:i,markNodeMap:s}){const[o]=fe(),[a,l]=w.useState(0),[u,c]=Uy(),d=w.useMemo(()=>new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",numeric:"auto",style:"short"}),[]);return w.useEffect(()=>{const f=setTimeout(()=>{l(a+1)},1e4);return()=>{clearTimeout(f)}},[a]),D.jsx("ul",{className:"CommentPlugin_CommentsPanel_List",ref:n,children:e.map(f=>{const h=f.id;if(f.type==="thread"){const g=()=>{const m=s.get(h);if(m!==void 0&&(r===null||r.indexOf(h)===-1)){const y=document.activeElement;o.update(()=>{const v=Array.from(m)[0],b=me(v);ut(b)&&b.selectStart()},{onUpdate(){y!==null&&y.focus()}})}};return D.jsxs("li",{onClick:g,className:`CommentPlugin_CommentsPanel_List_Thread ${s.has(h)?"interactive":""} ${r.indexOf(h)===-1?"":"active"}`,children:[D.jsxs("div",{className:"CommentPlugin_CommentsPanel_List_Thread_QuoteBox",children:[D.jsxs("blockquote",{className:"CommentPlugin_CommentsPanel_List_Thread_Quote",children:["> ",D.jsx("span",{children:f.quote})]}),D.jsx(Zr,{onClick:()=>{c("Delete Thread",m=>D.jsx(Hy,{commentOrThread:f,deleteCommentOrThread:t,onClose:m}))},className:"CommentPlugin_CommentsPanel_List_DeleteButton",children:D.jsx("i",{className:"delete"})}),u]}),D.jsx("ul",{className:"CommentPlugin_CommentsPanel_List_Thread_Comments",children:f.comments.map(m=>D.jsx(wh,{comment:m,deleteComment:t,thread:f,rtf:d},m.id))}),D.jsx("div",{className:"CommentPlugin_CommentsPanel_List_Thread_Editor",children:D.jsx(SS,{submitAddComment:i,thread:f,placeholder:"Reply to comment..."})})]},h)}return D.jsx(wh,{comment:f,deleteComment:t,rtf:d},h)})})}function AS({activeIDs:r,deleteCommentOrThread:e,comments:t,submitAddComment:n,markNodeMap:i}){const s=w.useRef(null),o=t.length===0;return D.jsxs("div",{className:"CommentPlugin_CommentsPanel",children:[D.jsx("h2",{className:"CommentPlugin_CommentsPanel_Heading",children:"Comments"}),o?D.jsx("div",{className:"CommentPlugin_CommentsPanel_Empty",children:"No Comments"}):D.jsx(TS,{activeIDs:r,comments:t,deleteCommentOrThread:e,listRef:s,submitAddComment:n,markNodeMap:i})]})}function Vy(){const r=qy(),{yjsDocMap:e,name:t}=r;return e.has("comments")?t:"Scripture User"}function DS({providerFactory:r,setCommentStore:e,onChange:t,showCommentsContainerRef:n,commentContainerRef:i,logger:s}){const o=qy(),[a]=fe(),l=w.useMemo(()=>{const k=new gS(a,s);return t&&k.registerOnChange(t),e==null||e(k),k},[a,s,t,e]),u=mS(l),c=w.useMemo(()=>new Map,[]),[d,f]=w.useState(),[h,g]=w.useState([]),[m,y]=w.useState(!1),[v,b]=w.useState(!1),{yjsDocMap:C}=o;w.useEffect(()=>{if(r){const k=r("comments",C);return l.registerCollaboration(k)}},[l,r,C]);const T=w.useCallback(()=>{a.update(()=>{const k=U();k!==null&&(k.dirty=!0)}),y(!1)},[a]),R=w.useCallback((k,S)=>{if(k.type==="comment"){const L=l.deleteCommentOrThread(k,S);if(!L)return;const{markedComment:q,index:X}=L;l.addComment(q,S,X)}else{l.deleteCommentOrThread(k);const L=S!==void 0?S.id:k.id,q=c.get(L);q!==void 0&&setTimeout(()=>{a.update(()=>{for(const X of q){const j=me(X);ut(j)&&(j.deleteID(jr,L),j.hasNoIDsForEveryType()&&Sm(j))}})})}},[l,a,c]),E=w.useCallback((k,S,L,q)=>{l.addComment(k,L),S&&(a.update(()=>{F(q)&&Tm(q,jr,k.id)}),y(!1))},[l,a]);w.useEffect(()=>{const k=[];for(const S of h){const L=c.get(S);if(L!==void 0)for(const q of L){const X=a.getElementByKey(q);X!==null&&(X.classList.add("selected"),k.push(X),b(!0))}}return()=>{for(const S of k)S.classList.remove("selected")}},[h,a,c]),w.useEffect(()=>{if(!a.hasNodes([Qe]))throw new Error("CommentPlugin: TypedMarkNode not registered on editor!");const k=new Map;return Ve(Qp(a,Qe,S=>ks(S.getTypedIDs()),(S,L)=>{for(const[q,X]of Object.entries(S.getTypedIDs()))X.forEach(j=>{L.addID(q,j)})}),a.registerMutationListener(Qe,S=>{a.getEditorState().read(()=>{for(const[L,q]of S){const X=me(L);let j=[];q==="destroyed"?j=k.get(L)??[]:ut(X)&&(j=X.getTypedIDs()[jr]??[]);for(const G of j){let O=c.get(G);k.set(L,j),q==="destroyed"?O!==void 0&&(O.delete(L),O.size===0&&c.delete(G)):(O===void 0&&(O=new Set,c.set(G,O)),O.has(L)||O.add(L))}}})},{skipInitialization:!1}),a.registerUpdateListener(({editorState:S,tags:L})=>{S.read(()=>{const q=U();let X=!1,j=!1;if(F(q)){const G=q.anchor.getNode();if(H(G)){const O=PC(G,jr,q.anchor.offset)??[];O!==null&&(g(O),X=!0),q.isCollapsed()||(f(G.getKey()),j=!0)}}X||g(G=>G.length===0?G:[]),j||f(null),!L.has("collaboration")&&F(q)&&y(!1)})}),a.registerCommand(Eh,()=>{const S=window.getSelection();return S!==null&&S.removeAllRanges(),y(!0),!0},oe))},[a,c]);const A=()=>{a.dispatchCommand(Eh,void 0)};return D.jsxs(D.Fragment,{children:[m&&Rt.createPortal(D.jsx(kS,{editor:a,cancelAddComment:T,submitAddComment:E}),document.body),d!=null&&!m&&Rt.createPortal(D.jsx(wS,{anchorKey:d,editor:a,showComments:v,onAddComment:A}),document.body),n!==null&&Rt.createPortal(D.jsx(Zr,{className:`CommentPlugin_ShowCommentsButton ${v?"active":""}`,onClick:()=>b(!v),title:v?"Hide Comments":"Show Comments",children:D.jsx("i",{className:"comments"})}),(n==null?void 0:n.current)??document.body),v&&Rt.createPortal(D.jsx(AS,{comments:u,submitAddComment:E,deleteCommentOrThread:R,activeIDs:h,markNodeMap:c}),(i==null?void 0:i.current)??document.body)]})}function NS(){const r=w.useRef(),e=w.useCallback(t=>{r.current=t},[]);return[r,e]}function MS(r,e){var t,n;const i=((t=e.current)==null?void 0:t.getComments())??[],s=i==null?void 0:i.map(a=>a.id),o=r.map(a=>{const l=s.findIndex(u=>u===a);return l!==void 0&&l>=0?i[l]:{comments:[{author:"unknown",content:"Comment not found",deleted:!1,id:"",timeStamp:0,type:"comment"}],id:a,quote:"",type:"thread"}});i.forEach(a=>{r.includes(a.id)||o.push(a)}),o&&((n=e.current)==null||n.setComments(o))}function OS(r,e){w.useEffect(()=>{var t,n;r.options??(r.options={}),(t=r.options).nodes??(t.nodes={}),(n=r.options.nodes)[ds]??(n[ds]={}),r.options.nodes[ds].addMissingComments=i=>{MS(i,e)}},[e,r])}w.forwardRef(function(r,e){const t=w.useRef(null),n=w.useRef(!0),i=w.useRef(null),[s,o]=w.useState(null),{children:a,onCommentChange:l,onUsjChange:u,...c}=r,{options:d}=r,[f,h]=NS();OS(c,f),w.useImperativeHandle(e,()=>({focus(){var y;(y=t.current)==null||y.focus()},getUsj(){var y;return(y=t.current)==null?void 0:y.getUsj()},setUsj(y){var v;(v=t.current)==null||v.setUsj(y)},getSelection(){var y;return(y=t.current)==null?void 0:y.getSelection()},setSelection(y){var v;(v=t.current)==null||v.setSelection(y)},addAnnotation(y,v,b){var C;(C=t.current)==null||C.addAnnotation(y,v,b)},removeAnnotation(y,v){var b;(b=t.current)==null||b.removeAnnotation(y,v)},setComments(y){var v;(v=f.current)==null||v.setComments(y),n.current=!0},get toolbarEndRef(){return s}}));const g=w.useCallback(y=>{var v;if(!u)return;const b=(v=f.current)==null?void 0:v.getComments();u(y,b)},[f,u]),m=w.useCallback(()=>{var y;if(!l||n.current){n.current=!1;return}const v=(y=f.current)==null?void 0:y.getComments();l(v)},[f,n,l]);return w.useEffect(()=>{var y;return o(((y=t.current)==null?void 0:y.toolbarEndRef)??null),()=>o(null)},[]),D.jsxs(Fy,{ref:t,onUsjChange:g,...c,children:[D.jsx(DS,{setCommentStore:h,onChange:m,showCommentsContainerRef:d?null:s,commentContainerRef:i,logger:c.logger}),D.jsx("div",{ref:i,className:"comment-container"})]})});const IS='<usx version="3.1" />',Ky=`<?xml version="1.0" encoding="utf-8"?>}
<usx version="3.1">
  <book code="PSA" style="id">World English Bible (WEB)</book>
  <para style="mt1">The Psalms</para>
  <chapter number="1" style="c" sid="PSA 1" />
  <para style="q1">
    <verse number="1" style="v" sid="PSA 1:1" />Blessed is the man who doesn’t walk in the counsel of the wicked,</para>
  <para style="q2" vid="PSA 1:1">nor stand on the path of sinners,</para>
  <para style="q2" vid="PSA 1:1">nor sit in the seat of scoffers;<verse eid="PSA 1:1" /></para>
</usx>
`,RS={start:{jsonPath:"$.content[3].content[1]",offset:15},end:{jsonPath:"$.content[3].content[1]",offset:18}},LS={start:{jsonPath:"$.content[3].content[1]",offset:15},end:{jsonPath:"$.content[3].content[1]",offset:22}},Pa={book:"PSA",chapterNum:1,verseNum:1},KS={title:"Demo/Editorial",component:By,tags:["autodocs"],parameters:{docs:{description:{component:`
**Demo Only:** This component is provided for demonstration purposes only. For production applications, developers should import the Scripture Editor component directly from:
- [@biblionexus-foundation/platform-editor](https://www.npmjs.com/package/@biblionexus-foundation/platform-editor)
- [@eten-foundation/platform-editor](https://github.com/eten-tech-foundation/scripture-editors/tree/main/packages/platform)

This demo version is included in Storybook to showcase the component's functionality and usage patterns.
        `}}},argTypes:{ref:{control:"object",description:"Reference to the editor instance",defaultValue:null},defaultUsj:{control:"object",description:"Default USJ object to initialize the editor with",defaultValue:{type:$r,version:Ur,content:[""]}},scrRef:{control:"object",description:"Scripture reference",defaultValue:Pa}}},oo={args:{defaultUsj:gu(Ky),scrRef:Pa}},ao={args:{defaultUsj:gu(IS),scrRef:Pa}},lo={render:r=>{const e=w.useRef(null);return w.useEffect(()=>{e.current&&(e.current.addAnnotation(RS,"spelling","annotationId"),e.current.addAnnotation(LS,"grammar","abc123"))},[]),Yy.jsx(By,{...r,ref:e})},args:{defaultUsj:gu(Ky),scrRef:Pa}};var xh,kh,Sh;oo.parameters={...oo.parameters,docs:{...(xh=oo.parameters)==null?void 0:xh.docs,source:{originalSource:`{
  args: {
    defaultUsj: usxStringToUsj(usx),
    scrRef: defaultScrRef
  }
}`,...(Sh=(kh=oo.parameters)==null?void 0:kh.docs)==null?void 0:Sh.source}}};var Th,Ah,Dh;ao.parameters={...ao.parameters,docs:{...(Th=ao.parameters)==null?void 0:Th.docs,source:{originalSource:`{
  args: {
    defaultUsj: usxStringToUsj(emptyUsx),
    scrRef: defaultScrRef
  }
}`,...(Dh=(Ah=ao.parameters)==null?void 0:Ah.docs)==null?void 0:Dh.source}}};var Nh,Mh,Oh;lo.parameters={...lo.parameters,docs:{...(Nh=lo.parameters)==null?void 0:Nh.docs,source:{originalSource:`{
  render: args => {
    // eslint-disable-next-line no-null/no-null
    const editorRef = useRef<EditorRef | null>(null);
    useEffect(() => {
      if (editorRef.current) {
        editorRef.current.addAnnotation(annotationRange1, 'spelling', 'annotationId');
        editorRef.current.addAnnotation(annotationRange2, 'grammar', 'abc123');
      }
    }, []);
    return <Editorial {...args} ref={editorRef} />;
  },
  args: {
    defaultUsj: usxStringToUsj(usx),
    scrRef: defaultScrRef
  }
}`,...(Oh=(Mh=lo.parameters)==null?void 0:Mh.docs)==null?void 0:Oh.source}}};const JS=["Default","Empty","Annotated"];export{lo as Annotated,oo as Default,ao as Empty,JS as __namedExportsOrder,KS as default};
