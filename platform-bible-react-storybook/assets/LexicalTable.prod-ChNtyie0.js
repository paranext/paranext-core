var ha=Object.defineProperty;var ga=(n,e,t)=>e in n?ha(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var x=(n,e,t)=>ga(n,typeof e!="symbol"?e+"":e,t);import{r as $}from"./iframe-D8E0DHM7.js";import{j as lt}from"./jsx-runtime-D2yWc6If.js";import{r as qo}from"./index-DTwt9jhc.js";const xs=$.createContext(null);function pa(n,e){return{getTheme:function(){return e??null}}}function me(){const n=$.useContext(xs);return n==null&&function(e,...t){const r=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",e);for(const i of t)o.append("v",i);throw r.search=o.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),n}function N(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Ss(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);t.search=r.toString(),console.warn(`Minified Lexical warning #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Et=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,_a=Et&&"documentMode"in document?document.documentMode:null,St=Et&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),le=Et&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),jn=!(!Et||!("InputEvent"in window)||_a)&&"getTargetRanges"in new window.InputEvent("input"),cn=Et&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),$e=Et&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ma=Et&&/Android/.test(navigator.userAgent),Cs=Et&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Yo=Et&&ma&&Cs,un=Et&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&St&&!Cs;function vs(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}const ya=0,xa=1,Sa=2,ws=128,Ca=1,va=2,wa=3,ba=4,Na=5,Ea=6,ir=cn||$e||un?" ":"​",Yt=`

`,Ta=le?" ":ir,Gt={bold:1,capitalize:1024,code:16,highlight:ws,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},ka={directionless:1,unmergeable:2},Go={center:2,end:6,justify:4,left:1,right:3,start:5},Oa={[va]:"center",[Ea]:"end",[ba]:"justify",[Ca]:"left",[wa]:"right",[Na]:"start"},Ma={normal:0,segmented:2,token:1},Aa={[ya]:"normal",[Sa]:"segmented",[xa]:"token"},Xo="$config";function bs(n,e,t,r,o,i){let s=n.getFirstChild();for(;s!==null;){const l=s.__key;s.__parent===e&&(C(s)&&bs(s,l,t,r,o,i),t.has(l)||i.delete(l),o.push(l)),s=s.getNextSibling()}}let Br=!1,po=0;function Da(n){po=n.timeStamp}function wr(n,e,t){const r=n.nodeName==="BR",o=e.__lexicalLineBreak;return o&&(n===o||r&&n.previousSibling===o)||r&&fr(n,t)!==void 0}function Fa(n,e,t){const r=bt(xt(t));let o=null,i=null;r!==null&&r.anchorNode===n&&(o=r.anchorOffset,i=r.focusOffset);const s=n.nodeValue;s!==null&&Ao(e,s,o,i,!1)}function Pa(n,e,t){if(O(n)){const r=n.anchor.getNode();if(r.is(t)&&n.format!==r.getFormat())return!1}return Kt(e)&&t.isAttached()}function La(n,e,t,r){for(let o=n;o&&!zc(o);o=vn(o)){const i=fr(o,e);if(i!==void 0){const s=Y(i,t);if(s)return z(s)||!q(o)?void 0:[o,s]}else if(o===r)return[r,Tl(t)]}}function Ns(n,e,t){Br=!0;const r=performance.now()-po>100;try{gt(n,()=>{const o=F()||function(d){return d.getEditorState().read(()=>{const g=F();return g!==null?g.clone():null})}(n),i=new Map,s=n.getRootElement(),l=n._editorState,a=n._blockCursorElement;let c=!1,u="";for(let d=0;d<e.length;d++){const g=e[d],h=g.type,p=g.target,_=La(p,n,l,s);if(!_)continue;const[y,m]=_;if(h==="characterData")r&&A(m)&&Kt(p)&&Pa(o,p,m)&&Fa(p,m,n);else if(h==="childList"){c=!0;const S=g.addedNodes;for(let v=0;v<S.length;v++){const T=S[v],k=Nl(T),b=T.parentNode;if(b!=null&&T!==a&&k===null&&!wr(T,b,n)){if(le){const M=(q(T)?T.innerText:null)||T.nodeValue;M&&(u+=M)}b.removeChild(T)}}const w=g.removedNodes,E=w.length;if(E>0){let v=0;for(let T=0;T<E;T++){const k=w[T];(wr(k,p,n)||a===k)&&(p.appendChild(k),v++)}E!==v&&i.set(y,m)}}}if(i.size>0)for(const[d,g]of i)g.reconcileObservedMutation(d,n);const f=t.takeRecords();if(f.length>0){for(let d=0;d<f.length;d++){const g=f[d],h=g.addedNodes,p=g.target;for(let _=0;_<h.length;_++){const y=h[_],m=y.parentNode;m==null||y.nodeName!=="BR"||wr(y,p,n)||m.removeChild(y)}}t.takeRecords()}o!==null&&(c&&ut(o),le&&Al(n)&&o.insertRawText(u))})}finally{Br=!1}}function Es(n){const e=n._observer;e!==null&&Ns(n,e.takeRecords(),e)}function Ts(n){(function(e){po===0&&xt(e).addEventListener("textInput",Da,!0)})(n),n._observer=new MutationObserver((e,t)=>{Ns(n,e,t)})}class Ra{constructor(e,t){x(this,"key");x(this,"parse");x(this,"unparse");x(this,"isEqual");x(this,"defaultValue");this.key=e,this.parse=t.parse.bind(t),this.unparse=(t.unparse||Ka).bind(t),this.isEqual=(t.isEqual||Object.is).bind(t),this.defaultValue=this.parse(void 0)}}function Of(n,e){return new Ra(n,e)}function $a(n,e,t="latest"){const r=(t==="latest"?n.getLatest():n).__state;return r?r.getValue(e):e.defaultValue}function Mf(n,e,t){let r;if(ot(),typeof t=="function"){const i=n.getLatest(),s=$a(i,e);if(r=t(s),e.isEqual(s,r))return i}else r=t;const o=n.getWritable();return Os(o).updateFromKnown(e,r),o}function Ia(n){const e=new Map,t=new Set;for(let r=typeof n=="function"?n:n.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:o}=gr(r);if(o&&o.stateConfigs)for(const i of o.stateConfigs){let s;"stateConfig"in i?(s=i.stateConfig,i.flat&&t.add(s.key)):s=i,e.set(s.key,s)}}return{flatKeys:t,sharedConfigMap:e}}let za=class ks{constructor(e,t,r=void 0,o=new Map,i=void 0){x(this,"node");x(this,"knownState");x(this,"unknownState");x(this,"sharedNodeState");x(this,"size");this.node=e,this.sharedNodeState=t,this.unknownState=r,this.knownState=o;const{sharedConfigMap:s}=this.sharedNodeState,l=i!==void 0?i:function(a,c,u){let f=u.size;if(c)for(const d in c){const g=a.get(d);g&&u.has(g)||f++}return f}(s,r,o);this.size=l}getValue(e){const t=this.knownState.get(e);if(t!==void 0)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const o=this.unknownState[e.key];o!==void 0&&(r=e.parse(o)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState},t={};for(const[r,o]of this.knownState)r.isEqual(o,r.defaultValue)?delete e[r.key]:e[r.key]=r.unparse(o);for(const r of this.sharedNodeState.flatKeys)r in e&&(t[r]=e[r],delete e[r]);return Zo(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;const{sharedNodeState:t,unknownState:r}=this,o=new Map(this.knownState);return new ks(e,t,function(i,s,l){let a;if(l)for(const[c,u]of Object.entries(l)){const f=i.get(c);f?s.has(f)||s.set(f,f.parse(u)):(a=a||{},a[c]=u)}return a}(t.sharedConfigMap,o,r),o,this.size)}updateFromKnown(e,t){const r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);const{knownState:o,unknownState:i}=this;o.has(e)||i&&r in i||(i&&(delete i[r],this.unknownState=Zo(i)),this.size++),o.set(e,t)}updateFromUnknown(e,t){const r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){const{knownState:t}=this;for(const r of t.keys())t.set(r,r.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(const[r,o]of Object.entries(e))this.updateFromUnknown(r,o)}};function Os(n){const e=n.getWritable(),t=e.__state?e.__state.getWritable(e):new za(e,Ms(e));return e.__state=t,t}function Ms(n){return n.__state?n.__state.sharedNodeState:vl(hr(),n.getType()).sharedNodeState}function Zo(n){if(n)for(const e in n)return n}function Ka(n){return n}function Qo(n,e,t){for(const[r,o]of e.knownState){if(n.has(r.key))continue;n.add(r.key);const i=t?t.getValue(r):r.defaultValue;if(i!==o&&!r.isEqual(i,o))return!0}return!1}function ti(n,e,t){const{unknownState:r}=e,o=t?t.unknownState:void 0;if(r){for(const[i,s]of Object.entries(r))if(!n.has(i)&&(n.add(i),s!==(o?o[i]:void 0)))return!0}return!1}function ei(n,e){const t=n.__state;return t&&t.node===n?t.getWritable(e):t}function ni(n,e){const t=n.__mode,r=n.__format,o=n.__style,i=e.__mode,s=e.__format,l=e.__style,a=n.__state,c=e.__state;return(t===null||t===i)&&(r===null||r===s)&&(o===null||o===l)&&(n.__state===null||a===c||function(u,f){if(u===f)return!0;if(u&&f&&u.size!==f.size)return!1;const d=new Set;return!(u&&Qo(d,u,f)||f&&Qo(d,f,u)||u&&ti(d,u,f)||f&&ti(d,f,u))}(a,c))}function ri(n,e){const t=n.mergeWithSibling(e),r=U()._normalizedNodes;return r.add(n.__key),r.add(e.__key),t}function oi(n){let e,t,r=n;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&A(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(ni(e,r)){r=ri(e,r);break}break}e.remove()}for(;(t=r.getNextSibling())!==null&&A(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(ni(r,t)){r=ri(r,t);break}break}t.remove()}}else r.remove()}function fn(n){return ii(n.anchor),ii(n.focus),n}function ii(n){for(;n.type==="element";){const e=n.getNode(),t=n.offset;let r,o;if(t===e.getChildrenSize()?(r=e.getChildAtIndex(t-1),o=!0):(r=e.getChildAtIndex(t),o=!1),A(r)){n.set(r.__key,o?r.getTextContentSize():0,"text",!0);break}if(!C(r))break;n.set(r.__key,o?r.getChildrenSize():0,"element",!0)}}let ae,at,dn,sr,Jr,jr,ce,Ct,Ur,hn,G="",Tt=null,kt="",$t="",Ee=!1,Un=!1;function Vn(n,e){const t=ce.get(n);if(e!==null){const r=Yr(n);r.parentNode===e&&e.removeChild(r)}if(Ct.has(n)||at._keyToDOMMap.delete(n),C(t)){const r=qn(t,ce);Vr(r,0,r.length-1,null)}t!==void 0&&Do(hn,dn,sr,t,"destroyed")}function Vr(n,e,t,r){let o=e;for(;o<=t;++o){const i=n[o];i!==void 0&&Vn(i,r)}}function te(n,e){n.setProperty("text-align",e)}const Wa="40px";function As(n,e){const t=ae.theme.indent;if(typeof t=="string"){const o=n.classList.contains(t);e>0&&!o?n.classList.add(t):e<1&&o&&n.classList.remove(t)}const r=getComputedStyle(n).getPropertyValue("--lexical-indent-base-value")||Wa;n.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function Ds(n,e){const t=n.style;e===0?te(t,""):e===1?te(t,"left"):e===2?te(t,"center"):e===3?te(t,"right"):e===4?te(t,"justify"):e===5?te(t,"start"):e===6&&te(t,"end")}function Hr(n,e){const t=function(r){const o=r.__dir;if(o!==null)return o;if(Z(r))return null;const i=r.getParentOrThrow();return Z(i)&&i.__dir===null?"auto":null}(e);t!==null?n.dir=t:n.removeAttribute("dir")}function Hn(n,e){const t=Ct.get(n);t===void 0&&N(60);const r=t.createDOM(ae,at);if(function(o,i,s){const l=s._keyToDOMMap;(function(a,c,u){const f=`__lexicalKey_${c._key}`;a[f]=u})(i,s,o),l.set(o,i)}(n,r,at),A(t)?r.setAttribute("data-lexical-text","true"):z(t)&&r.setAttribute("data-lexical-decorator","true"),C(t)){const o=t.__indent,i=t.__size;if(Hr(r,t),o!==0&&As(r,o),i!==0){const l=i-1;qr(qn(t,Ct),t,0,l,t.getDOMSlot(r))}const s=t.__format;s!==0&&Ds(r,s),t.isInline()||Fs(null,t,r),dr(t)&&(G+=Yt,$t+=Yt)}else{const o=t.getTextContent();if(z(t)){const i=t.decorate(at,ae);i!==null&&Ps(n,i),r.contentEditable="false"}G+=o,$t+=o}return e!==null&&e.insertChild(r),Do(hn,dn,sr,t,"created"),r}function qr(n,e,t,r,o){const i=G;G="";let s=t;for(;s<=r;++s){Hn(n[s],o);const l=Ct.get(n[s]);l!==null&&A(l)&&(Tt===null&&(Tt=l.getFormat()),kt===""&&(kt=l.getStyle()))}dr(e)&&(G+=Yt),o.element.__lexicalTextContent=G,G=i+G}function si(n,e){if(n){const t=n.__last;if(t){const r=e.get(t);if(r)return oe(r)?"line-break":z(r)&&r.isInline()?"decorator":null}return"empty"}return null}function Fs(n,e,t){const r=si(n,ce),o=si(e,Ct);r!==o&&e.getDOMSlot(t).setManagedLineBreak(o)}function Ba(n,e,t){var r;Tt=null,kt="",function(o,i,s){const l=G,a=o.__size,c=i.__size;G="";const u=s.element;if(a===1&&c===1){const f=o.__first,d=i.__first;if(f===d)en(f,u);else{const h=Yr(f),p=Hn(d,null);try{u.replaceChild(p,h)}catch(_){if(typeof _=="object"&&_!=null){const y=`${_.toString()} Parent: ${u.tagName}, new child: {tag: ${p.tagName} key: ${d}}, old child: {tag: ${h.tagName}, key: ${f}}.`;throw new Error(y)}throw _}Vn(f,null)}const g=Ct.get(d);A(g)&&(Tt===null&&(Tt=g.getFormat()),kt===""&&(kt=g.getStyle()))}else{const f=qn(o,ce),d=qn(i,Ct);if(f.length!==a&&N(227),d.length!==c&&N(228),a===0)c!==0&&qr(d,i,0,c-1,s);else if(c===0){if(a!==0){const g=s.after==null&&s.before==null&&s.element.__lexicalLineBreak==null;Vr(f,0,a-1,g?null:u),g&&(u.textContent="")}}else(function(g,h,p,_,y,m){const S=_-1,w=y-1;let E,v,T=m.getFirstChild(),k=0,b=0;for(;k<=S&&b<=w;){const W=h[k],R=p[b];if(W===R)T=br(en(R,m.element)),k++,b++;else{E===void 0&&(E=new Set(h)),v===void 0&&(v=new Set(p));const H=v.has(W),st=E.has(R);if(H)if(st){const dt=de(at,R);dt===T?T=br(en(R,m.element)):(m.withBefore(T).insertChild(dt),en(R,m.element)),k++,b++}else Hn(R,m.withBefore(T)),b++;else T=br(Yr(W)),Vn(W,m.element),k++}const B=Ct.get(R);B!==null&&A(B)&&(Tt===null&&(Tt=B.getFormat()),kt===""&&(kt=B.getStyle()))}const M=k>S,P=b>w;if(M&&!P){const W=p[w+1],R=W===void 0?null:at.getElementByKey(W);qr(p,g,b,w,m.withBefore(R))}else P&&!M&&Vr(h,k,S,m.element)})(i,f,d,a,c,s)}dr(i)&&(G+=Yt),u.__lexicalTextContent=G,G=l+G}(n,e,e.getDOMSlot(t)),r=e,Tt==null||Tt===r.__textFormat||Un||r.setTextFormat(Tt),function(o){kt===""||kt===o.__textStyle||Un||o.setTextStyle(kt)}(e)}function qn(n,e){const t=[];let r=n.__first;for(;r!==null;){const o=e.get(r);o===void 0&&N(101),t.push(r),r=o.__next}return t}function en(n,e){const t=ce.get(n);let r=Ct.get(n);t!==void 0&&r!==void 0||N(61);const o=Ee||jr.has(n)||Jr.has(n),i=de(at,n);if(t===r&&!o){if(C(t)){const s=i.__lexicalTextContent;s!==void 0&&(G+=s,$t+=s)}else{const s=t.getTextContent();$t+=s,G+=s}return i}if(t!==r&&o&&Do(hn,dn,sr,r,"updated"),r.updateDOM(t,i,ae)){const s=Hn(n,null);return e===null&&N(62),e.replaceChild(s,i),Vn(n,null),s}if(C(t)&&C(r)){const s=r.__indent;(Ee||s!==t.__indent)&&As(i,s);const l=r.__format;if((Ee||l!==t.__format)&&Ds(i,l),o&&(Ba(t,r,i),Z(r)||r.isInline()||Fs(t,r,i)),dr(r)&&(G+=Yt,$t+=Yt),(Ee||r.__dir!==t.__dir)&&(Hr(i,r),Z(r)&&!Ee))for(const a of r.getChildren())C(a)&&Hr(de(at,a.getKey()),a)}else{const s=r.getTextContent();if(z(r)){const l=r.decorate(at,ae);l!==null&&Ps(n,l)}G+=s,$t+=s}if(!Un&&Z(r)&&r.__cachedText!==$t){const s=r.getWritable();s.__cachedText=$t,r=s}return i}function Ps(n,e){let t=at._pendingDecorators;const r=at._decorators;if(t===null){if(r[n]===e)return;t=El(at)}t[n]=e}function br(n){let e=n.nextSibling;return e!==null&&e===at._blockCursorElement&&(e=e.nextSibling),e}function Ja(n,e,t,r,o,i){G="",$t="",Ee=r===2,at=t,ae=t._config,dn=t._nodes,sr=at._listeners.mutation,Jr=o,jr=i,ce=n._nodeMap,Ct=e._nodeMap,Un=e._readOnly,Ur=new Map(t._keyToDOMMap);const s=new Map;return hn=s,en("root",null),at=void 0,dn=void 0,Jr=void 0,jr=void 0,ce=void 0,Ct=void 0,ae=void 0,Ur=void 0,hn=void 0,s}function Yr(n){const e=Ur.get(n);return e===void 0&&N(75,n),e}function L(n){return{type:n}}const Ls=L("SELECTION_CHANGE_COMMAND"),ja=L("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),Rs=L("CLICK_COMMAND"),re=L("DELETE_CHARACTER_COMMAND"),Me=L("INSERT_LINE_BREAK_COMMAND"),Yn=L("INSERT_PARAGRAPH_COMMAND"),Ae=L("CONTROLLED_TEXT_INSERTION_COMMAND"),_o=L("PASTE_COMMAND"),Gr=L("REMOVE_TEXT_COMMAND"),gn=L("DELETE_WORD_COMMAND"),pn=L("DELETE_LINE_COMMAND"),jt=L("FORMAT_TEXT_COMMAND"),$s=L("UNDO_COMMAND"),Is=L("REDO_COMMAND"),Ua=L("KEYDOWN_COMMAND"),zs=L("KEY_ARROW_RIGHT_COMMAND"),Va=L("MOVE_TO_END"),Ks=L("KEY_ARROW_LEFT_COMMAND"),Ha=L("MOVE_TO_START"),Ws=L("KEY_ARROW_UP_COMMAND"),Bs=L("KEY_ARROW_DOWN_COMMAND"),Gn=L("KEY_ENTER_COMMAND"),Js=L("KEY_SPACE_COMMAND"),js=L("KEY_BACKSPACE_COMMAND"),Us=L("KEY_ESCAPE_COMMAND"),Vs=L("KEY_DELETE_COMMAND"),Hs=L("KEY_TAB_COMMAND"),qa=L("INSERT_TAB_COMMAND"),Ya=L("INDENT_CONTENT_COMMAND"),li=L("OUTDENT_CONTENT_COMMAND"),qs=L("DROP_COMMAND"),Ga=L("FORMAT_ELEMENT_COMMAND"),Ys=L("DRAGSTART_COMMAND"),Gs=L("DRAGOVER_COMMAND"),Xa=L("DRAGEND_COMMAND"),lr=L("COPY_COMMAND"),mo=L("CUT_COMMAND"),Xr=L("SELECT_ALL_COMMAND"),Za=L("CLEAR_EDITOR_COMMAND"),Af=L("CLEAR_HISTORY_COMMAND"),Df=L("CAN_REDO_COMMAND"),Ff=L("CAN_UNDO_COMMAND"),Qa=L("FOCUS_COMMAND"),tc=L("BLUR_COMMAND"),ec=L("KEY_MODIFIER_COMMAND"),Ft=Object.freeze({}),Zr=[["keydown",function(n,e){if(rn=n.timeStamp,Xs=n.key,!e.isComposing()&&!D(e,Ua,n)&&n.key!=null){if(Nr&&Li(n))return gt(e,()=>{On(e,Er)}),Nr=!1,void(Er="");if(function(t){return J(t,"ArrowRight",{shiftKey:"any"})}(n))D(e,zs,n);else if(function(t){return J(t,"ArrowRight",Lt)}(n))D(e,Va,n);else if(function(t){return J(t,"ArrowLeft",{shiftKey:"any"})}(n))D(e,Ks,n);else if(function(t){return J(t,"ArrowLeft",Lt)}(n))D(e,Ha,n);else if(function(t){return J(t,"ArrowUp",{altKey:"any",shiftKey:"any"})}(n))D(e,Ws,n);else if(function(t){return J(t,"ArrowDown",{altKey:"any",shiftKey:"any"})}(n))D(e,Bs,n);else if(function(t){return J(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(n))on=!0,D(e,Gn,n);else if(function(t){return t.key===" "}(n))D(e,Js,n);else if(function(t){return St&&J(t,"o",{ctrlKey:!0})}(n))n.preventDefault(),on=!0,D(e,Me,!0);else if(function(t){return J(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(n))on=!1,D(e,Gn,n);else if(function(t){return J(t,"Backspace",{shiftKey:"any"})||St&&J(t,"h",{ctrlKey:!0})}(n))Li(n)?D(e,js,n):(n.preventDefault(),D(e,re,!0));else if(function(t){return t.key==="Escape"}(n))D(e,Us,n);else if(function(t){return J(t,"Delete",{})||St&&J(t,"d",{ctrlKey:!0})}(n))(function(t){return t.key==="Delete"})(n)?D(e,Vs,n):(n.preventDefault(),D(e,re,!1));else if(function(t){return J(t,"Backspace",Pi)}(n))n.preventDefault(),D(e,gn,!0);else if(function(t){return J(t,"Delete",Pi)}(n))n.preventDefault(),D(e,gn,!1);else if(function(t){return St&&J(t,"Backspace",{metaKey:!0})}(n))n.preventDefault(),D(e,pn,!0);else if(function(t){return St&&(J(t,"Delete",{metaKey:!0})||J(t,"k",{ctrlKey:!0}))}(n))n.preventDefault(),D(e,pn,!1);else if(function(t){return J(t,"b",Lt)}(n))n.preventDefault(),D(e,jt,"bold");else if(function(t){return J(t,"u",Lt)}(n))n.preventDefault(),D(e,jt,"underline");else if(function(t){return J(t,"i",Lt)}(n))n.preventDefault(),D(e,jt,"italic");else if(function(t){return J(t,"Tab",{shiftKey:"any"})}(n))D(e,Hs,n);else if(function(t){return J(t,"z",Lt)}(n))n.preventDefault(),D(e,$s,void 0);else if(function(t){return St?J(t,"z",{metaKey:!0,shiftKey:!0}):J(t,"y",{ctrlKey:!0})||J(t,"z",{ctrlKey:!0,shiftKey:!0})}(n))n.preventDefault(),D(e,Is,void 0);else{const t=e._editorState._selection;t===null||O(t)?Ri(n)&&(n.preventDefault(),D(e,Xr,n)):function(r){return J(r,"c",Lt)}(n)?(n.preventDefault(),D(e,lr,n)):function(r){return J(r,"x",Lt)}(n)?(n.preventDefault(),D(e,mo,n)):Ri(n)&&(n.preventDefault(),D(e,Xr,n))}(function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey})(n)&&D(e,ec,n)}}],["pointerdown",function(n,e){const t=n.target,r=n.pointerType;He(t)&&r!=="touch"&&r!=="pen"&&n.button===0&&gt(e,()=>{Ai(t)||(eo=!0)})}],["compositionstart",function(n,e){gt(e,()=>{const t=F();if(O(t)&&!e.isComposing()){const r=t.anchor,o=t.anchor.getNode();it(r.key),(n.timeStamp<rn+30||r.type==="element"||!t.isCollapsed()||o.getFormat()!==t.format||A(o)&&o.getStyle()!==t.style)&&D(e,Ae,Ta)}})}],["compositionend",function(n,e){le?Xe=!0:$e||!cn&&!un?gt(e,()=>{On(e,n.data)}):(Nr=!0,Er=n.data)}],["input",function(n,e){n.stopPropagation(),gt(e,()=>{if(q(n.target)&&Ai(n.target))return;const t=F(),r=n.data,o=nl(n);if(r!=null&&O(t)&&tl(t,o,r,n.timeStamp,!1)){Xe&&(On(e,r),Xe=!1);const i=t.anchor.getNode(),s=bt(xt(e));if(s===null)return;const l=t.isBackward(),a=l?t.anchor.offset:t.focus.offset,c=l?t.focus.offset:t.anchor.offset;jn&&!t.isCollapsed()&&A(i)&&s.anchorNode!==null&&i.getTextContent().slice(0,a)+r+i.getTextContent().slice(a+c)===Ml(s.anchorNode)||D(e,Ae,r);const u=r.length;le&&u>1&&n.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=u),cn||$e||un||!e.isComposing()||(rn=0,it(null))}else Mo(!1,e,r!==null?r:void 0),Xe&&(On(e,r||void 0),Xe=!1);(function(){ot();const i=U();Es(i)})()},{event:n}),Te=null}],["click",function(n,e){gt(e,()=>{const t=F(),r=bt(xt(e)),o=Je();if(r){if(O(t)){const i=t.anchor,s=i.getNode();if(i.type==="element"&&i.offset===0&&t.isCollapsed()&&!Z(s)&&V().getChildrenSize()===1&&s.getTopLevelElementOrThrow().isEmpty()&&o!==null&&t.is(o))r.removeAllRanges(),t.dirty=!0;else if(n.detail===3&&!t.isCollapsed()&&s!==t.focus.getNode()){const l=_t(s,a=>C(a)&&!a.isInline());C(l)&&l.select(0)}}else if(n.pointerType==="touch"||n.pointerType==="pen"){const i=r.anchorNode;(q(i)||Kt(i))&&ut(So(o,r,e,n))}}D(e,Rs,n)})}],["cut",Ft],["copy",Ft],["dragstart",Ft],["dragover",Ft],["dragend",Ft],["paste",Ft],["focus",Ft],["blur",Ft],["drop",Ft]];jn&&Zr.push(["beforeinput",(n,e)=>function(t,r){const o=t.inputType,i=nl(t);o==="deleteCompositionText"||le&&Al(r)||o!=="insertCompositionText"&&gt(r,()=>{const s=F();if(o==="deleteContentBackward"){if(s===null){const g=Je();if(!O(g))return;ut(g.clone())}if(O(s)){const g=s.anchor.key===s.focus.key;if(l=t.timeStamp,Xs==="MediaLast"&&l<rn+30&&r.isComposing()&&g){if(it(null),rn=0,setTimeout(()=>{gt(r,()=>{it(null)})},30),O(s)){const h=s.anchor.getNode();h.markDirty(),A(h)||N(142),el(s,h)}}else{it(null),t.preventDefault();const h=s.anchor.getNode(),p=h.getTextContent(),_=h.canInsertTextAfter(),y=s.anchor.offset===0&&s.focus.offset===p.length;let m=Yo&&g&&!y&&_;if(m&&s.isCollapsed()&&(m=!z(so(s.anchor,!0))),!m){D(r,re,!0);const S=F();Yo&&O(S)&&S.isCollapsed()&&(ee=S,setTimeout(()=>ee=null))}}return}}var l;if(!O(s))return;const a=t.data;Te!==null&&Mo(!1,r,Te),s.dirty&&Te===null||!s.isCollapsed()||Z(s.anchor.getNode())||i===null||s.applyDOMRange(i),Te=null;const c=s.anchor,u=s.focus,f=c.getNode(),d=u.getNode();if(o!=="insertText"&&o!=="insertTranspose")switch(t.preventDefault(),o){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":D(r,Ae,t);break;case"insertFromComposition":it(null),D(r,Ae,t);break;case"insertLineBreak":it(null),D(r,Me,!1);break;case"insertParagraph":it(null),on&&!$e?(on=!1,D(r,Me,!1)):D(r,Yn,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":D(r,_o,t);break;case"deleteByComposition":(function(g,h){return g!==h||C(g)||C(h)||!ie(g)||!ie(h)})(f,d)&&D(r,Gr,t);break;case"deleteByDrag":case"deleteByCut":D(r,Gr,t);break;case"deleteContent":D(r,re,!1);break;case"deleteWordBackward":D(r,gn,!0);break;case"deleteWordForward":D(r,gn,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":D(r,pn,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":D(r,pn,!1);break;case"formatStrikeThrough":D(r,jt,"strikethrough");break;case"formatBold":D(r,jt,"bold");break;case"formatItalic":D(r,jt,"italic");break;case"formatUnderline":D(r,jt,"underline");break;case"historyUndo":D(r,$s,void 0);break;case"historyRedo":D(r,Is,void 0)}else{if(a===`
`)t.preventDefault(),D(r,Me,!1);else if(a===Yt)t.preventDefault(),D(r,Yn,void 0);else if(a==null&&t.dataTransfer){const g=t.dataTransfer.getData("text/plain");t.preventDefault(),s.insertRawText(g)}else a!=null&&tl(s,i,a,t.timeStamp,!0)?(t.preventDefault(),D(r,Ae,a)):Te=a;Zs=t.timeStamp}})}(n,e)]);let rn=0,Xs=null,Zs=0,Te=null;const Qr=new WeakMap,Xn=new WeakMap;let to=!1,eo=!1,on=!1,Xe=!1,Nr=!1,Er="",ee=null,Qs=[0,"",0,"root",0];function tl(n,e,t,r,o){const i=n.anchor,s=n.focus,l=i.getNode(),a=U(),c=bt(xt(a)),u=c!==null?c.anchorNode:null,f=i.key,d=a.getElementByKey(f),g=t.length;return f!==s.key||!A(l)||(!o&&(!jn||Zs<r+50)||l.isDirty()&&g<2||kl(t))&&i.offset!==s.offset&&!l.isComposing()||Rt(l)||l.isDirty()&&g>1||(o||!jn)&&d!==null&&!l.isComposing()&&u!==Ie(d)||c!==null&&e!==null&&(!e.collapsed||e.startContainer!==c.anchorNode||e.startOffset!==c.anchorOffset)||l.getFormat()!==n.format||l.getStyle()!==n.style||function(h,p){if(p.isSegmented())return!0;if(!h.isCollapsed())return!1;const _=h.anchor.offset,y=p.getParentOrThrow(),m=ie(p);return _===0?!p.canInsertTextBefore()||!y.canInsertTextBefore()&&!p.isComposing()||m||function(S){const w=S.getPreviousSibling();return(A(w)||C(w)&&w.isInline())&&!w.canInsertTextAfter()}(p):_===p.getTextContentSize()&&(!p.canInsertTextAfter()||!y.canInsertTextAfter()&&!p.isComposing()||m)}(n,l)}function ai(n,e){return Kt(n)&&n.nodeValue!==null&&e!==0&&e!==n.nodeValue.length}function ci(n,e,t){const{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}=n;to&&(to=!1,ai(r,o)&&ai(i,s)&&!ee)||gt(e,()=>{if(!t)return void ut(null);if(!Cn(e,r,i))return;let l=F();if(ee&&O(l)&&l.isCollapsed()){const a=l.anchor,c=ee.anchor;(a.key===c.key&&a.offset===c.offset+1||a.offset===1&&c.getNode().is(a.getNode().getPreviousSibling()))&&(l=ee.clone(),ut(l))}if(ee=null,O(l)){const a=l.anchor,c=a.getNode();if(l.isCollapsed()){n.type==="Range"&&n.anchorNode===n.focusNode&&(l.dirty=!0);const u=xt(e).event,f=u?u.timeStamp:performance.now(),[d,g,h,p,_]=Qs,y=V(),m=e.isComposing()===!1&&y.getTextContent()==="";if(f<_+200&&a.offset===h&&a.key===p)In(l,d,g);else if(a.type==="text")A(c)||N(141),el(l,c);else if(a.type==="element"&&!m){C(c)||N(259);const S=a.getNode();S.isEmpty()?function(w,E){const v=E.getTextFormat(),T=E.getTextStyle();In(w,v,T)}(l,S):In(l,0,"")}}else{const u=a.key,f=l.focus.key,d=l.getNodes(),g=d.length,h=l.isBackward(),p=h?s:o,_=h?o:s,y=h?f:u,m=h?u:f;let S=2047,w=!1;for(let E=0;E<g;E++){const v=d[E],T=v.getTextContentSize();if(A(v)&&T!==0&&!(E===0&&v.__key===y&&p===T||E===g-1&&v.__key===m&&_===0)&&(w=!0,S&=v.getFormat(),S===0))break}l.format=w?S:0}}D(e,Ls,void 0)})}function In(n,e,t){n.format===e&&n.style===t||(n.format=e,n.style=t,n.dirty=!0)}function el(n,e){In(n,e.getFormat(),e.getStyle())}function nl(n){if(!n.getTargetRanges)return null;const e=n.getTargetRanges();return e.length===0?null:e[0]}function On(n,e){const t=n._compositionKey;if(it(null),t!==null&&e!=null){if(e===""){const r=Y(t),o=Ie(n.getElementByKey(t));return void(o!==null&&o.nodeValue!==null&&A(r)&&Ao(r,o.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=F();if(O(r)){const o=r.focus;return r.anchor.set(o.key,o.offset,o.type),void D(n,Gn,null)}}}Mo(!0,n,e)}function rl(n){let e=n.__lexicalEventHandles;return e===void 0&&(e=[],n.__lexicalEventHandles=e),e}const De=new Map;function ol(n){const e=Lc(n.target);if(e===null)return;const t=wl(e.anchorNode);if(t===null)return;eo&&(eo=!1,gt(t,()=>{const a=Je(),c=e.anchorNode;(q(c)||Kt(c))&&ut(So(a,e,t,n))}));const r=Oo(t),o=r[r.length-1],i=o._key,s=De.get(i),l=s||o;l!==t&&ci(e,l,!1),ci(e,t,!0),t!==o?De.set(i,t):s&&De.delete(i)}function ui(n){n._lexicalHandled=!0}function fi(n){return n._lexicalHandled===!0}function nc(n){const e=Qr.get(n);if(e===void 0)return;const t=Xn.get(e);if(t===void 0)return;const r=t-1;r>=0||N(164),Qr.delete(n),Xn.set(e,r),r===0&&e.removeEventListener("selectionchange",ol);const o=ur(n);ko(o)?(function(s){if(s._parentEditor!==null){const l=Oo(s),a=l[l.length-1]._key;De.get(a)===s&&De.delete(a)}else De.delete(s._key)}(o),n.__lexicalEditor=null):o&&N(198);const i=rl(n);for(let s=0;s<i.length;s++)i[s]();n.__lexicalEventHandles=[]}function no(n,e,t){ot();const r=n.__key,o=n.getParent();if(o===null)return;const i=function(l){const a=F();if(!O(a)||!C(l))return a;const{anchor:c,focus:u}=a,f=c.getNode(),d=u.getNode();return lo(f,l)&&c.set(l.__key,0,"element"),lo(d,l)&&u.set(l.__key,0,"element"),a}(n);let s=!1;if(O(i)&&e){const l=i.anchor,a=i.focus;l.key===r&&(tr(l,n,o,n.getPreviousSibling(),n.getNextSibling()),s=!0),a.key===r&&(tr(a,n,o,n.getPreviousSibling(),n.getNextSibling()),s=!0)}else ht(i)&&e&&n.isSelected()&&n.selectPrevious();if(O(i)&&e&&!s){const l=n.getIndexWithinParent();se(n),Qn(i,o,l,-1)}else se(n);t||Wt(o)||o.canBeEmpty()||!o.isEmpty()||no(o,e),e&&i&&Z(o)&&o.isEmpty()&&o.selectEnd()}const il=Symbol.for("ephemeral");function Zn(n){return n[il]||!1}class vt{constructor(e){x(this,"__type");x(this,"__key");x(this,"__parent");x(this,"__prev");x(this,"__next");x(this,"__state");this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Tc(this,e)}static getType(){const{ownNodeType:e}=gr(this);return e===void 0&&N(64,this.name),e}static clone(e){N(65,this.name)}$config(){return{}}config(e,t){const r=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:r,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}getType(){return this.__type}isInline(){N(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=Y(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||F();if(t==null)return!1;const r=t.getNodes().some(o=>o.__key===this.__key);if(A(this))return r;if(O(t)&&t.anchor.type==="element"&&t.focus.type==="element"){if(t.isCollapsed())return!1;const o=this.getParent();if(z(this)&&this.isInline()&&o){const i=t.isBackward()?t.focus:t.anchor;if(o.is(i.getNode())&&i.offset===o.getChildrenSize()&&this.is(o.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),r=0;for(;t!==null;){if(this.is(t))return r;r++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:Y(e)}getParentOrThrow(){const e=this.getParent();return e===null&&N(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(Wt(t))return C(e)||e===this&&z(e)||N(194),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&N(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:Y(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let r=t.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:Y(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=C(this)?this:this.getParent(),r=C(e)?e:e.getParent(),o=t&&r?Kn(t,r):null;return o?o.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const t=Kn(this,e);return t!==null&&(t.type==="descendant"||(t.type==="branch"?Ll(t)===-1:(t.type!=="same"&&t.type!=="ancestor"&&N(279),!1)))}isParentOf(e){const t=Kn(this,e);return t!==null&&t.type==="ancestor"}getNodesBetween(e){const t=this.isBefore(e),r=[],o=new Set;let i=this;for(;i!==null;){const s=i.__key;if(o.has(s)||(o.add(s),r.push(i)),i===e)break;const l=C(i)?t?i.getFirstChild():i.getLastChild():null;if(l!==null){i=l;continue}const a=t?i.getNextSibling():i.getPreviousSibling();if(a!==null){i=a;continue}const c=i.getParentOrThrow();if(o.has(c.__key)||r.push(c),c===e)break;let u=null,f=c;do{if(f===null&&N(68),u=t?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;u!==null||o.has(f.__key)||r.push(f)}while(u===null);i=u}return t||r.reverse(),r}isDirty(){const e=U()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){if(Zn(this))return this;const e=Y(this.__key);return e===null&&N(113),e}getWritable(){if(Zn(this))return this;ot();const e=Qt(),t=U(),r=e._nodeMap,o=this.__key,i=this.getLatest(),s=t._cloneNotNeeded,l=F();if(l!==null&&l.setCachedNodes(null),s.has(o))return nr(i),i;const a=Fl(i);return s.add(o),nr(a),r.set(o,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){N(70)}updateDOM(e,t,r){N(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){N(18,this.name)}updateFromJSON(e){return function(t,r){const o=t.getWritable(),i=r.$;let s=i;for(const l of Ms(o).flatKeys)l in r&&(s!==void 0&&s!==i||(s={...i}),s[l]=r[l]);return(o.__state||s)&&Os(t).updateFromJSON(s),o}(this,e)}static transform(){return null}remove(e){no(this,!0,e)}replace(e,t){ot();let r=F();r!==null&&(r=r.clone()),Dr(this,e);const o=this.getLatest(),i=this.__key,s=e.__key,l=e.getWritable(),a=this.getParentOrThrow().getWritable(),c=a.__size;se(l);const u=o.getPreviousSibling(),f=o.getNextSibling(),d=o.__prev,g=o.__next,h=o.__parent;if(no(o,!1,!0),u===null?a.__first=s:u.getWritable().__next=s,l.__prev=d,f===null?a.__last=s:f.getWritable().__prev=s,l.__next=g,l.__parent=h,a.__size=c,t&&(C(this)&&C(l)||N(139),this.getChildren().forEach(p=>{l.append(p)})),O(r)){ut(r);const p=r.anchor,_=r.focus;p.key===i&&pi(p,l),_.key===i&&pi(_,l)}return Ut()===i&&it(s),l}insertAfter(e,t=!0){ot(),Dr(this,e);const r=this.getWritable(),o=e.getWritable(),i=o.getParent(),s=F();let l=!1,a=!1;if(i!==null){const g=e.getIndexWithinParent();if(se(o),O(s)){const h=i.__key,p=s.anchor,_=s.focus;l=p.type==="element"&&p.key===h&&p.offset===g+1,a=_.type==="element"&&_.key===h&&_.offset===g+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),f=o.__key,d=r.__next;if(c===null?u.__last=f:c.getWritable().__prev=f,u.__size++,r.__next=f,o.__next=d,o.__prev=r.__key,o.__parent=r.__parent,t&&O(s)){const g=this.getIndexWithinParent();Qn(s,u,g+1);const h=u.__key;l&&s.anchor.set(h,g+2,"element"),a&&s.focus.set(h,g+2,"element")}return e}insertBefore(e,t=!0){ot(),Dr(this,e);const r=this.getWritable(),o=e.getWritable(),i=o.__key;se(o);const s=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),a=r.__prev,c=this.getIndexWithinParent();s===null?l.__first=i:s.getWritable().__next=i,l.__size++,r.__prev=i,o.__prev=a,o.__next=r.__key,o.__parent=r.__parent;const u=F();return t&&O(u)&&Qn(u,this.getParentOrThrow(),c),e}isParentRequired(){return!1}createParentElementNode(){return Q()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){ot();const r=this.getPreviousSibling(),o=this.getParentOrThrow();if(r===null)return o.select(0,0);if(C(r))return r.select();if(!A(r)){const i=r.getIndexWithinParent()+1;return o.select(i,i)}return r.select(e,t)}selectNext(e,t){ot();const r=this.getNextSibling(),o=this.getParentOrThrow();if(r===null)return o.select();if(C(r))return r.select(0,0);if(!A(r)){const i=r.getIndexWithinParent();return o.select(i,i)}return r.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}x(vt,"importDOM");const Pf="historic",Lf="history-push",Fe="history-merge",rc="paste",oc="collaboration",ic="skip-scroll-into-view",sc="skip-dom-selection",lc="skip-selection-focus";class We extends vt{static getType(){return"linebreak"}static clone(e){return new We(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>function(t){const r=t.parentElement;if(r!==null&&rr(r)){const o=r.firstChild;if(o===t||o.nextSibling===t&&Mn(o)){const i=r.lastChild;if(i===t||i.previousSibling===t&&Mn(i))return!0}}return!1}(e)||function(t){const r=t.parentElement;if(r!==null&&rr(r)){const o=r.firstChild;if(o===t||o.nextSibling===t&&Mn(o))return!1;const i=r.lastChild;if(i===t||i.previousSibling===t&&Mn(i))return!0}return!1}(e)?null:{conversion:ac,priority:0}}}static importJSON(e){return ue().updateFromJSON(e)}}function ac(n){return{node:ue()}}function ue(){return Bt(new We)}function oe(n){return n instanceof We}function Mn(n){return Kt(n)&&/^( |\t|\r?\n)+$/.test(n.textContent||"")}function Tr(n,e){return 16&e?"code":e&ws?"mark":32&e?"sub":64&e?"sup":null}function kr(n,e){return 1&e?"strong":2&e?"em":"span"}function sl(n,e,t,r,o){const i=r.classList;let s=Pe(o,"base");s!==void 0&&i.add(...s),s=Pe(o,"underlineStrikethrough");let l=!1;const a=8&e&&4&e;s!==void 0&&(8&t&&4&t?(l=!0,a||i.add(...s)):a&&i.remove(...s));for(const c in Gt){const u=Gt[c];if(s=Pe(o,c),s!==void 0)if(t&u){if(l&&(c==="underline"||c==="strikethrough")){e&u&&i.remove(...s);continue}((e&u)===0||a&&c==="underline"||c==="strikethrough")&&i.add(...s)}else e&u&&i.remove(...s)}}function ll(n,e,t){const r=e.firstChild,o=t.isComposing(),i=n+(o?ir:"");if(r==null)e.textContent=i;else{const s=r.nodeValue;if(s!==i)if(o||le){const[l,a,c]=function(u,f){const d=u.length,g=f.length;let h=0,p=0;for(;h<d&&h<g&&u[h]===f[h];)h++;for(;p+h<d&&p+h<g&&u[d-p-1]===f[g-p-1];)p++;return[h,d-h-p,f.slice(h,g-p)]}(s,i);a!==0&&r.deleteData(l,a),r.insertData(l,c)}else r.nodeValue=i}}function di(n,e,t,r,o,i){ll(o,n,e);const s=i.theme.text;s!==void 0&&sl(0,0,r,n,s)}function An(n,e){const t=document.createElement(e);return t.appendChild(n),t}class ye extends vt{constructor(t="",r){super(r);x(this,"__text");x(this,"__format");x(this,"__style");x(this,"__mode");x(this,"__detail");this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}static getType(){return"text"}static clone(t){return new ye(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return Aa[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Ut()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=Gt[t];return(this.getFormat()&r)!==0}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return er(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const o=this.__format,i=Tr(0,o),s=kr(0,o),l=i===null?s:i,a=document.createElement(l);let c=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),i!==null&&(c=document.createElement(s),a.appendChild(c)),di(c,this,0,o,this.__text,t);const u=this.__style;return u!==""&&(a.style.cssText=u),a}updateDOM(t,r,o){const i=this.__text,s=t.__format,l=this.__format,a=Tr(0,s),c=Tr(0,l),u=kr(0,s),f=kr(0,l);if((a===null?u:a)!==(c===null?f:c))return!0;if(a===c&&u!==f){const _=r.firstChild;_==null&&N(48);const y=document.createElement(f);return di(y,this,0,l,i,o),r.replaceChild(y,_),!1}let d=r;c!==null&&a!==null&&(d=r.firstChild,d==null&&N(49)),ll(i,d,this);const g=o.theme.text;g!==void 0&&s!==l&&sl(0,s,l,d,g);const h=t.__style,p=this.__style;return h!==p&&(r.style.cssText=p),!1}static importDOM(){return{"#text":()=>({conversion:dc,priority:0}),b:()=>({conversion:uc,priority:0}),code:()=>({conversion:Pt,priority:0}),em:()=>({conversion:Pt,priority:0}),i:()=>({conversion:Pt,priority:0}),mark:()=>({conversion:Pt,priority:0}),s:()=>({conversion:Pt,priority:0}),span:()=>({conversion:cc,priority:0}),strong:()=>({conversion:Pt,priority:0}),sub:()=>({conversion:Pt,priority:0}),sup:()=>({conversion:Pt,priority:0}),u:()=>({conversion:Pt,priority:0})}}static importJSON(t){return rt().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return q(r)||N(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=An(r,"b")),this.hasFormat("italic")&&(r=An(r,"i")),this.hasFormat("strikethrough")&&(r=An(r,"s")),this.hasFormat("underline")&&(r=An(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?Gt[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?ka[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=er(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=Ma[t];if(this.__mode===r)return this;const o=this.getWritable();return o.__mode=r,o}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){ot();let o=t,i=r;const s=F(),l=this.getTextContent(),a=this.__key;if(typeof l=="string"){const c=l.length;o===void 0&&(o=c),i===void 0&&(i=c)}else o=0,i=0;if(!O(s))return fl(a,o,a,i,"text","text");{const c=Ut();c!==s.anchor.key&&c!==s.focus.key||it(a),s.setTextNodeRange(this,o,this,i)}return s}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,o,i){const s=this.getWritable(),l=s.__text,a=o.length;let c=t;c<0&&(c=a+c,c<0&&(c=0));const u=F();if(i&&O(u)){const d=t+a;u.setTextNodeRange(s,d,s,d)}const f=l.slice(0,c)+o+l.slice(c+r);return s.__text=f,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){ot();const r=this.getLatest(),o=r.getTextContent();if(o==="")return[];const i=r.__key,s=Ut(),l=o.length;t.sort((b,M)=>b-M),t.push(l);const a=[],c=t.length;for(let b=0,M=0;b<l&&M<=c;M++){const P=t[M];P>b&&(a.push(o.slice(b,P)),b=P)}const u=a.length;if(u===1)return[r];const f=a[0],d=r.getParent();let g;const h=r.getFormat(),p=r.getStyle(),_=r.__detail;let y=!1,m=null,S=null;const w=F();if(O(w)){const[b,M]=w.isBackward()?[w.focus,w.anchor]:[w.anchor,w.focus];b.type==="text"&&b.key===i&&(m=b),M.type==="text"&&M.key===i&&(S=M)}r.isSegmented()?(g=rt(f),g.__format=h,g.__style=p,g.__detail=_,g.__state=ei(r,g),y=!0):g=r.setTextContent(f);const E=[g];for(let b=1;b<u;b++){const M=rt(a[b]);M.__format=h,M.__style=p,M.__detail=_,M.__state=ei(r,M);const P=M.__key;s===i&&it(P),E.push(M)}const v=m?m.offset:null,T=S?S.offset:null;let k=0;for(const b of E){if(!m&&!S)break;const M=k+b.getTextContentSize();if(m!==null&&v!==null&&v<=M&&v>=k&&(m.set(b.getKey(),v-k,"text"),v<M&&(m=null)),S!==null&&T!==null&&T<=M&&T>=k){S.set(b.getKey(),T-k,"text");break}k=M}if(d!==null){(function(P){const W=P.getPreviousSibling(),R=P.getNextSibling();W!==null&&nr(W),R!==null&&nr(R)})(this);const b=d.getWritable(),M=this.getIndexWithinParent();y?(b.splice(M,0,E),this.remove()):b.splice(M,1,E),O(w)&&Qn(w,d,M,u-1)}return E}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||N(50);const o=this.__key,i=t.__key,s=this.__text,l=s.length;Ut()===i&&it(o);const a=F();if(O(a)){const d=a.anchor,g=a.focus;d!==null&&d.key===i&&vi(d,r,o,t,l),g!==null&&g.key===i&&vi(g,r,o,t,l)}const c=t.__text,u=r?c+s:s+c;this.setTextContent(u);const f=this.getWritable();return t.remove(),f}isTextEntity(){return!1}}function cc(n){return{forChild:yo(n.style),node:null}}function uc(n){const e=n,t=e.style.fontWeight==="normal";return{forChild:yo(e.style,t?void 0:"bold"),node:null}}const hi=new WeakMap;function fc(n){if(!q(n))return!1;if(n.nodeName==="PRE")return!0;const e=n.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function dc(n){const e=n;n.parentElement===null&&N(129);let t=e.textContent||"";if(function(r){let o,i=r.parentNode;const s=[r];for(;i!==null&&(o=hi.get(i))===void 0&&!fc(i);)s.push(i),i=i.parentNode;const l=o===void 0?i:o;for(let a=0;a<s.length;a++)hi.set(s[a],l);return l}(e)!==null){const r=t.split(/(\r?\n|\t)/),o=[],i=r.length;for(let s=0;s<i;s++){const l=r[s];l===`
`||l===`\r
`?o.push(ue()):l==="	"?o.push(xn()):l!==""&&o.push(rt(l))}return{node:o}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let r=e,o=!0;for(;r!==null&&(r=gi(r,!1))!==null;){const i=r.textContent||"";if(i.length>0){/[ \t\n]$/.test(i)&&(t=t.slice(1)),o=!1;break}}o&&(t=t.slice(1))}if(t[t.length-1]===" "){let r=e,o=!0;for(;r!==null&&(r=gi(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){o=!1;break}o&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:rt(t)}}function gi(n,e){let t=n;for(;;){let r;for(;(r=e?t.nextSibling:t.previousSibling)===null;){const i=t.parentElement;if(i===null)return null;t=i}if(t=r,q(t)){const i=t.style.display;if(i===""&&!uo(t)||i!==""&&!i.startsWith("inline"))return null}let o=t;for(;(o=e?t.firstChild:t.lastChild)!==null;)t=o;if(Kt(t))return t;if(t.nodeName==="BR")return null}}const hc={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Pt(n){const e=hc[n.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:yo(n.style,e),node:null}}function rt(n=""){return Bt(new ye(n))}function A(n){return n instanceof ye}function yo(n,e){const t=n.fontWeight,r=n.textDecoration.split(" "),o=t==="700"||t==="bold",i=r.includes("line-through"),s=n.fontStyle==="italic",l=r.includes("underline"),a=n.verticalAlign;return c=>(A(c)&&(o&&!c.hasFormat("bold")&&c.toggleFormat("bold"),i&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),s&&!c.hasFormat("italic")&&c.toggleFormat("italic"),l&&!c.hasFormat("underline")&&c.toggleFormat("underline"),a!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),a!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),e&&!c.hasFormat(e)&&c.toggleFormat(e)),c)}class Be extends ye{static getType(){return"tab"}static clone(e){return new Be(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const t=super.createDOM(e),r=Pe(e.theme,"tab");return r!==void 0&&t.classList.add(...r),t}static importJSON(e){return xn().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&Ss(126),super.setTextContent("	")}spliceText(e,t,r,o){return r===""&&t===0||r==="	"&&t===1||N(286),this}setDetail(e){return e!==2&&N(127),this}setMode(e){return e!=="normal"&&N(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function xn(){return Bt(new Be)}function al(n){return n instanceof Be}class gc{constructor(e,t,r){x(this,"key");x(this,"offset");x(this,"type");x(this,"_selection");this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:Pl(Mt(zt(this,"next")),Mt(zt(e,"next")))<0}getNode(){const e=Y(this.key);return e===null&&N(20),e}set(e,t,r,o){const i=this._selection,s=this.key;o&&this.key===e&&this.offset===t&&this.type===r||(this.key=e,this.offset=t,this.type=r,je()||(Ut()===s&&it(e),i!==null&&(i.setCachedNodes(null),i.dirty=!0)))}}function yt(n,e,t){return new gc(n,e,t)}function Or(n,e){let t=e.__key,r=n.offset,o="element";if(A(e)){o="text";const i=e.getTextContentSize();r>i&&(r=i)}else if(!C(e)){const i=e.getNextSibling();if(A(i))t=i.__key,r=0,o="text";else{const s=e.getParent();s&&(t=s.__key,r=e.getIndexWithinParent()+1)}}n.set(t,r,o)}function pi(n,e){if(C(e)){const t=e.getLastDescendant();C(t)||A(t)?Or(n,t):Or(n,e)}else Or(n,e)}class ar{constructor(e){x(this,"_nodes");x(this,"_cachedNodes");x(this,"dirty");this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!ht(e))return!1;const t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(o=>r.has(o))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new ar(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),r=t.length,o=t[r-1];let i;if(A(o))i=o.select();else{const s=o.getIndexWithinParent()+1;i=o.getParentOrThrow().select(s,s)}i.insertNodes(e);for(let s=0;s<r;s++)t[s].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,r=[];for(const o of t){const i=Y(o);i!==null&&r.push(i)}return je()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}deleteNodes(){const e=this.getNodes();if((F()||Je())===this&&e[0]){const t=tt(e[0],"next");qc(Zt(t,t))}for(const t of e)t.remove()}}function O(n){return n instanceof xe}class xe{constructor(e,t,r,o){x(this,"format");x(this,"style");x(this,"anchor");x(this,"focus");x(this,"_cachedNodes");x(this,"dirty");this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=o,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!O(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=function(r){const o=[],[i,s]=r.getTextSlices();i&&o.push(i.caret.origin);const l=new Set,a=new Set;for(const c of r)if(wt(c)){const{origin:u}=c;o.length===0?l.add(u):(a.add(u),o.push(u))}else{const{origin:u}=c;C(u)&&a.has(u)||o.push(u)}if(s&&o.push(s.caret.origin),pe(r.focus)&&C(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let c=Nt(r.focus.origin,"previous");wt(c)&&l.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(o[o.length-1]);c=mn(c))l.delete(c.origin),o.pop();for(;o.length>1;){const c=o[o.length-1];if(!C(c)||a.has(c)||c.isEmpty()||l.has(c))break;o.pop()}if(o.length===0&&r.isCollapsed()){const c=Mt(r.anchor),u=Mt(r.anchor.getFlipped()),f=g=>Vt(g)?g.origin:g.getNodeAtCaret(),d=f(c)||f(u)||(r.anchor.getNodeAtCaret()?c.origin:u.origin);o.push(d)}return o}($l(Bi(this),"next"));return je()||(this._cachedNodes=t),t}setTextNodeRange(e,t,r,o){this.anchor.set(e.__key,t,"text"),this.focus.set(r.__key,o,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],r=e[e.length-1],o=this.anchor,i=this.focus,s=o.isBefore(i),[l,a]=ro(this);let c="",u=!0;for(let f=0;f<e.length;f++){const d=e[f];if(C(d)&&!d.isInline())u||(c+=`
`),u=!d.isEmpty();else if(u=!1,A(d)){let g=d.getTextContent();d===t?d===r?o.type==="element"&&i.type==="element"&&i.offset!==o.offset||(g=l<a?g.slice(l,a):g.slice(a,l)):g=s?g.slice(l):g.slice(a):d===r&&(g=s?g.slice(0,a):g.slice(0,l)),c+=g}else!z(d)&&!oe(d)||d===r&&this.isCollapsed()||(c+=d.getTextContent())}return c}applyDOMRange(e){const t=U(),r=t.getEditorState()._selection,o=ul(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(o===null)return;const[i,s]=o;this.anchor.set(i.key,i.offset,i.type,!0),this.focus.set(s.key,s.offset,s.type,!0),fn(this)}clone(){const e=this.anchor,t=this.focus;return new xe(yt(e.key,e.offset,e.type),yt(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=er(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=Gt[e];return(this.format&t)!==0}insertRawText(e){const t=e.split(/(\r?\n|\t)/),r=[],o=t.length;for(let i=0;i<o;i++){const s=t[i];s===`
`||s===`\r
`?r.push(ue()):s==="	"?r.push(xn()):r.push(rt(s))}this.insertNodes(r)}insertText(e){const t=this.anchor,r=this.focus,o=this.format,i=this.style;let s=t,l=r;!this.isCollapsed()&&r.isBefore(t)&&(s=r,l=t),s.type==="element"&&function(_,y,m,S){const w=_.getNode(),E=w.getChildAtIndex(_.offset),v=rt();if(v.setFormat(m),v.setStyle(S),bo(E))E.splice(0,0,[v]);else{const T=Z(w)?Q().append(v):v;E===null?w.append(T):E.insertBefore(T)}_.is(y)&&y.set(v.__key,0,"text"),_.set(v.__key,0,"text")}(s,l,o,i),l.type==="element"&&yn(l,Mt(zt(l,"next")));const a=s.offset;let c=l.offset;const u=this.getNodes(),f=u.length;let d=u[0];A(d)||N(26);const g=d.getTextContent().length,h=d.getParentOrThrow();let p=u[f-1];if(f===1&&l.type==="element"&&(c=g,l.set(s.key,c,"text")),this.isCollapsed()&&a===g&&(Rt(d)||!d.canInsertTextAfter()||!h.canInsertTextAfter()&&d.getNextSibling()===null)){let _=d.getNextSibling();if(A(_)&&_.canInsertTextBefore()&&!Rt(_)||(_=rt(),_.setFormat(o),_.setStyle(i),h.canInsertTextAfter()?d.insertAfter(_):h.insertAfter(_)),_.select(0,0),d=_,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&a===0&&(Rt(d)||!d.canInsertTextBefore()||!h.canInsertTextBefore()&&d.getPreviousSibling()===null)){let _=d.getPreviousSibling();if(A(_)&&!Rt(_)||(_=rt(),_.setFormat(o),h.canInsertTextBefore()?d.insertBefore(_):h.insertBefore(_)),_.select(),d=_,e!=="")return void this.insertText(e)}else if(d.isSegmented()&&a!==g){const _=rt(d.getTextContent());_.setFormat(o),d.replace(_),d=_}else if(!this.isCollapsed()&&e!==""){const _=p.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||C(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(""),cl(this.anchor,this.focus,null),void this.insertText(e)}if(f===1){if(ie(d)){const S=rt(e);return S.select(),void d.replace(S)}const _=d.getFormat(),y=d.getStyle();if(a!==c||_===o&&y===i){if(al(d)){const S=rt(e);return S.setFormat(o),S.setStyle(i),S.select(),void d.replace(S)}}else{if(d.getTextContent()!==""){const S=rt(e);if(S.setFormat(o),S.setStyle(i),S.select(),a===0)d.insertBefore(S,!1);else{const[w]=d.splitText(a);w.insertAfter(S,!1)}return void(S.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}d.setFormat(o),d.setStyle(i)}const m=c-a;d=d.spliceText(a,m,e,!0),d.getTextContent()===""?d.remove():this.anchor.type==="text"&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=_,this.style=y))}else{const _=new Set([...d.getParentKeys(),...p.getParentKeys()]),y=C(d)?d:d.getParentOrThrow();let m=C(p)?p:p.getParentOrThrow(),S=p;if(!y.is(m)&&m.isInline())do S=m,m=m.getParentOrThrow();while(m.isInline());if(l.type==="text"&&(c!==0||p.getTextContent()==="")||l.type==="element"&&p.getIndexWithinParent()<c)if(A(p)&&!ie(p)&&c!==p.getTextContentSize()){if(p.isSegmented()){const k=rt(p.getTextContent());p.replace(k),p=k}Z(l.getNode())||l.type!=="text"||(p=p.spliceText(0,c,"")),_.add(p.__key)}else{const k=p.getParentOrThrow();k.canBeEmpty()||k.getChildrenSize()!==1?p.remove():k.remove()}else _.add(p.__key);const w=m.getChildren(),E=new Set(u),v=y.is(m),T=y.isInline()&&d.getNextSibling()===null?y:d;for(let k=w.length-1;k>=0;k--){const b=w[k];if(b.is(d)||C(b)&&b.isParentOf(d))break;b.isAttached()&&(!E.has(b)||b.is(S)?v||T.insertAfter(b,!1):b.remove())}if(!v){let k=m,b=null;for(;k!==null;){const M=k.getChildren(),P=M.length;(P===0||M[P-1].is(b))&&(_.delete(k.__key),b=k),k=k.getParent()}}if(ie(d))if(a===g)d.select();else{const k=rt(e);k.select(),d.replace(k)}else d=d.spliceText(a,g-a,e,!0),d.getTextContent()===""?d.remove():d.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let k=1;k<f;k++){const b=u[k],M=b.__key;_.has(M)||b.remove()}}}removeText(){const e=F()===this;Wn(this,Yc(Bi(this))),e&&F()!==this&&ut(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void it(null);const r=this.getNodes(),o=[];for(const w of r)A(w)&&o.push(w);const i=w=>{r.forEach(E=>{if(C(E)){const v=E.getFormatFlags(e,w);E.setTextFormat(v)}})},s=o.length;if(s===0)return this.toggleFormat(e),it(null),void i(t);const l=this.anchor,a=this.focus,c=this.isBackward(),u=c?a:l,f=c?l:a;let d=0,g=o[0],h=u.type==="element"?0:u.offset;if(u.type==="text"&&h===g.getTextContentSize()&&(d=1,g=o[1],h=0),g==null)return;const p=g.getFormatFlags(e,t);i(p);const _=s-1;let y=o[_];const m=f.type==="text"?f.offset:y.getTextContentSize();if(g.is(y)){if(h===m)return;if(Rt(g)||h===0&&m===g.getTextContentSize())g.setFormat(p);else{const w=g.splitText(h,m),E=h===0?w[0]:w[1];E.setFormat(p),u.type==="text"&&u.set(E.__key,0,"text"),f.type==="text"&&f.set(E.__key,m-h,"text")}return void(this.format=p)}h===0||Rt(g)||([,g]=g.splitText(h),h=0),g.setFormat(p);const S=y.getFormatFlags(e,p);m>0&&(m===y.getTextContentSize()||Rt(y)||([y]=y.splitText(m)),y.setFormat(S));for(let w=d+1;w<_;w++){const E=o[w],v=E.getFormatFlags(e,S);E.setFormat(v)}u.type==="text"&&u.set(g.__key,h,"text"),f.type==="text"&&f.set(y.__key,m,"text"),this.format=p|S}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const h=F();return O(h)||N(134),h.insertNodes(e)}const t=(this.isBackward()?this.focus:this.anchor).getNode(),r=_t(t,mt),o=e[e.length-1];if(C(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const h=Mr(this);r.splice(h,0,e),o.selectEnd()}return}if(!e.some(h=>(C(h)||z(h))&&!h.isInline())){C(r)||N(211,t.constructor.name,t.getType());const h=Mr(this);return r.splice(h,0,e),void o.selectEnd()}const i=function(h){const p=Q();let _=null;for(let y=0;y<h.length;y++){const m=h[y],S=oe(m);if(S||z(m)&&m.isInline()||C(m)&&m.isInline()||A(m)||m.isParentRequired()){if(_===null&&(_=m.createParentElementNode(),p.append(_),S))continue;_!==null&&_.append(m)}else p.append(m),_=null}return p}(e),s=i.getLastDescendant(),l=i.getChildren(),a=!C(r)||!r.isEmpty()?this.insertParagraph():null,c=l[l.length-1];let u=l[0];var f;C(f=u)&&mt(f)&&!f.isEmpty()&&C(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(C(r)||N(211,t.constructor.name,t.getType()),r.append(...u.getChildren()),u=l[1]),u&&(r===null&&N(212,t.constructor.name,t.getType()),function(h,p){const _=p.getParentOrThrow().getLastChild();let y=p;const m=[p];for(;y!==_;)y.getNextSibling()||N(140),y=y.getNextSibling(),m.push(y);let S=h;for(const w of m)S=S.insertAfter(w)}(r,u));const d=_t(s,mt);a&&C(d)&&(a.canMergeWhenEmpty()||mt(c))&&(d.append(...a.getChildren()),a.remove()),C(r)&&r.isEmpty()&&r.remove(),s.selectEnd();const g=C(r)?r.getLastChild():null;oe(g)&&d!==r&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const s=Q();return V().splice(this.anchor.offset,0,[s]),s.select(),s}const e=Mr(this),t=_t(this.anchor.getNode(),mt);C(t)||N(213);const r=t.getChildAtIndex(e),o=r?[r,...r.getNextSiblings()]:[],i=t.insertNewAfter(this,!1);return i?(i.append(...o),i.selectStart(),i):null}insertLineBreak(e){const t=ue();if(this.insertNodes([t]),e){const r=t.getParentOrThrow(),o=t.getIndexWithinParent();r.select(o,o)}}extract(){const e=[...this.getNodes()],t=e.length;let r=e[0],o=e[t-1];const[i,s]=ro(this),l=this.isBackward(),[a,c]=l?[this.focus,this.anchor]:[this.anchor,this.focus],[u,f]=l?[s,i]:[i,s];if(t===0)return[];if(t===1){if(A(r)&&!this.isCollapsed()){const d=r.splitText(u,f),g=u===0?d[0]:d[1];return g?(a.set(g.getKey(),0,"text"),c.set(g.getKey(),g.getTextContentSize(),"text"),[g]):[]}return[r]}if(A(r)&&(u===r.getTextContentSize()?e.shift():u!==0&&([,r]=r.splitText(u),e[0]=r,a.set(r.getKey(),0,"text"))),A(o)){const d=o.getTextContent().length;f===0?e.pop():f!==d&&([o]=o.splitText(f),e[e.length-1]=o,c.set(o.getKey(),o.getTextContentSize(),"text"))}return e}modify(e,t,r){if(wi(this,e,t,r))return;const o=e==="move",i=U(),s=bt(xt(i));if(!s)return;const l=i._blockCursorElement,a=i._rootElement,c=this.focus.getNode();if(a===null||l===null||!C(c)||c.isInline()||c.canBeEmpty()||ao(l,i,a),this.dirty){let u=de(i,this.anchor.key),f=de(i,this.focus.key);this.anchor.type==="text"&&(u=Ie(u)),this.focus.type==="text"&&(f=Ie(f)),u&&f&&hl(s,u,this.anchor.offset,f,this.focus.offset)}if(function(u,f,d,g){u.modify(f,d,g)}(s,e,t?"backward":"forward",r),s.rangeCount>0){const u=s.getRangeAt(0),f=this.anchor.getNode(),d=Z(f)?f:Fc(f);if(this.applyDOMRange(u),this.dirty=!0,!o){const g=this.getNodes(),h=[];let p=!1;for(let _=0;_<g.length;_++){const y=g[_];lo(y,d)?h.push(y):p=!0}if(p&&h.length>0)if(t){const _=h[0];C(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{const _=h[h.length-1];C(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}s.anchorNode===u.startContainer&&s.anchorOffset===u.startOffset||function(_){const y=_.focus,m=_.anchor,S=m.key,w=m.offset,E=m.type;m.set(y.key,y.offset,y.type,!0),y.set(S,w,E,!0)}(this)}}r==="lineboundary"&&wi(this,e,t,r,"decorators")}forwardDeletion(e,t,r){if(!r&&(e.type==="element"&&C(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const o=t.getParent(),i=t.getNextSibling()||(o===null?null:o.getNextSibling());if(C(i)&&i.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let o=r.getNode();if(this.forwardDeletion(r,o,e))return;const i=Io(zt(r,e?"previous":"next"));if(i.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const a of i.iterNodeCarets("shadowRoot"))if(wt(a)){if(!a.origin.isInline()){if(a.origin.isShadowRoot()){if(l.type==="merge-block")break;if(C(i.anchor.origin)&&i.anchor.origin.isEmpty()){const c=Mt(a);Wn(this,Zt(c,c)),i.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:a,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(pe(a)){if(C(a.origin)){if(a.origin.isInline()){if(!a.origin.isParentOf(i.anchor.origin))break}else l={block:a.origin,type:"merge-next-block"};continue}if(z(a.origin)){if(!a.origin.isIsolated())if(l.type==="merge-next-block"&&(a.origin.isKeyboardSelectable()||!a.origin.isInline())&&C(i.anchor.origin)&&i.anchor.origin.isEmpty()){i.anchor.origin.remove();const c=dl();c.add(a.origin.getKey()),ut(c)}else a.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:a,block:c}=l;return Wn(this,Zt(!a.origin.isEmpty()&&c.isEmpty()?_r(tt(c,a.direction)):i.anchor,a)),this.removeText()}}const s=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&mi(this,r.getNode()))return}else{const l=s.type==="text"?s.getNode():null;if(o=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const a=s.offset,c=l.getTextContentSize();if(l.is(o)||e&&a!==c||!e&&a!==0)return void yi(l,e,a)}else if(o!==null&&o.isSegmented()){const a=r.offset,c=o.getTextContentSize();if(o.is(l)||e&&a!==0||!e&&a!==c)return void yi(o,e,a)}(function(a,c){const u=a.anchor,f=a.focus,d=u.getNode(),g=f.getNode();if(d===g&&u.type==="text"&&f.type==="text"){const h=u.offset,p=f.offset,_=h<p,y=_?h:p,m=_?p:h,S=m-1;y!==S&&function(w){return!(kl(w)||pc(w))}(d.getTextContent().slice(y,m))&&(c?f.set(f.key,S,f.type):u.set(u.key,S,u.type))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&Z(r.getParent())&&r.getPreviousSibling()===null&&mi(this,r)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ht(n){return n instanceof ar}function _i(n){const e=n.offset;if(n.type==="text")return e;const t=n.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function ro(n){const e=n.getStartEndPoints();if(e===null)return[0,0];const[t,r]=e;return t.type==="element"&&r.type==="element"&&t.key===r.key&&t.offset===r.offset?[0,0]:[_i(t),_i(r)]}function mi(n,e){for(let t=e;t;t=t.getParent()){if(C(t)){if(t.collapseAtStart(n))return!0;if(Wt(t))break}if(t.getPreviousSibling())break}return!1}const pc=(()=>{try{const n=new RegExp("\\p{Emoji}","u"),e=n.test.bind(n);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch{}return()=>!1})();function yi(n,e,t){const r=n,o=r.getTextContent().split(/(?=\s)/g),i=o.length;let s=0,l=0;for(let c=0;c<i;c++){const u=c===i-1;if(l=s,s+=o[c].length,e&&s===t||s>t||u){o.splice(c,1),u&&(l=void 0);break}}const a=o.join("").trim();a===""?r.remove():(r.setTextContent(a),r.select(l,l))}function xi(n,e,t,r){let o,i=e;if(q(n)){let s=!1;const l=n.childNodes,a=l.length,c=r._blockCursorElement;i===a&&(s=!0,i=a-1);let u=l[i],f=!1;if(u===c)u=l[i+1],f=!0;else if(c!==null){const d=c.parentNode;n===d&&e>Array.prototype.indexOf.call(d.children,c)&&i--}if(o=Oe(u),A(o))i=Ht(o,s?"next":"previous");else{let d=Oe(n);if(d===null)return null;if(C(d)){const g=r.getElementByKey(d.getKey());g===null&&N(214),[d,i]=d.getDOMSlot(g).resolveChildIndex(d,g,n,e),C(d)||N(215),s&&i>=d.getChildrenSize()&&(i=Math.max(0,d.getChildrenSize()-1));let p=d.getChildAtIndex(i);if(C(p)&&function(_,y,m){const S=_.getParent();return m===null||S===null||!S.canBeEmpty()||S!==m.getNode()}(p,0,t)){const _=s?p.getLastDescendant():p.getFirstDescendant();_===null?d=p:(p=_,d=C(p)?p:p.getParentOrThrow()),i=0}A(p)?(o=p,d=null,i=Ht(p,s?"next":"previous")):p!==d&&s&&!f&&(C(d)||N(216),i=Math.min(d.getChildrenSize(),i+1))}else{const g=d.getIndexWithinParent();i=e===0&&z(d)&&Oe(n)===d?g:g+1,d=d.getParentOrThrow()}if(C(d))return yt(d.__key,i,"element")}}else o=Oe(n);return A(o)?yt(o.__key,Ht(o,i,"clamp"),"text"):null}function Si(n,e,t){const r=n.offset,o=n.getNode();if(r===0){const i=o.getPreviousSibling(),s=o.getParent();if(e){if((t||!e)&&i===null&&C(s)&&s.isInline()){const l=s.getPreviousSibling();A(l)&&n.set(l.__key,l.getTextContent().length,"text")}}else C(i)&&!t&&i.isInline()?n.set(i.__key,i.getChildrenSize(),"element"):A(i)&&n.set(i.__key,i.getTextContent().length,"text")}else if(r===o.getTextContent().length){const i=o.getNextSibling(),s=o.getParent();if(e&&C(i)&&i.isInline())n.set(i.__key,0,"element");else if((t||e)&&i===null&&C(s)&&s.isInline()&&!s.canInsertTextAfter()){const l=s.getNextSibling();A(l)&&n.set(l.__key,0,"text")}}}function cl(n,e,t){if(n.type==="text"&&e.type==="text"){const r=n.isBefore(e),o=n.is(e);Si(n,r,o),Si(e,!r,o),o&&e.set(n.key,n.offset,n.type);const i=U();if(i.isComposing()&&i._compositionKey!==n.key&&O(t)){const s=t.anchor,l=t.focus;n.set(s.key,s.offset,s.type,!0),e.set(l.key,l.offset,l.type,!0)}}}function ul(n,e,t,r,o,i){if(n===null||t===null||!Cn(o,n,t))return null;const s=xi(n,e,O(i)?i.anchor:null,o);if(s===null)return null;const l=xi(t,r,O(i)?i.focus:null,o);if(l===null)return null;if(s.type==="element"&&l.type==="element"){const a=Oe(n),c=Oe(t);if(z(a)&&z(c))return null}return cl(s,l,i),[s,l]}function oo(n){return C(n)&&!n.isInline()}function fl(n,e,t,r,o,i){const s=Qt(),l=new xe(yt(n,e,o),yt(t,r,i),0,"");return l.dirty=!0,s._selection=l,l}function xo(){const n=yt("root",0,"element"),e=yt("root",0,"element");return new xe(n,e,0,"")}function dl(){return new ar(new Set)}function So(n,e,t,r){const o=t._window;if(o===null)return null;const i=r||o.event,s=i?i.type:void 0,l=s==="selectionchange",a=!Br&&(l||s==="beforeinput"||s==="compositionstart"||s==="compositionend"||s==="click"&&i&&i.detail===3||s==="drop"||s===void 0);let c,u,f,d;if(O(n)&&!a)return n.clone();if(e===null)return null;if(c=e.anchorNode,u=e.focusNode,f=e.anchorOffset,d=e.focusOffset,(l||s===void 0)&&O(n)&&!Cn(t,c,u))return n.clone();const g=ul(c,f,u,d,t,n);if(g===null)return null;const[h,p]=g;return new xe(h,p,O(n)?n.format:0,O(n)?n.style:"")}function F(){return Qt()._selection}function Je(){return U()._editorState._selection}function Qn(n,e,t,r=1){const o=n.anchor,i=n.focus,s=o.getNode(),l=i.getNode();if(!e.is(s)&&!e.is(l))return;const a=e.__key;if(n.isCollapsed()){const c=o.offset;if(t<=c&&r>0||t<c&&r<0){const u=Math.max(0,c+r);o.set(a,u,"element"),i.set(a,u,"element"),Ci(n)}}else{const c=n.isBackward(),u=c?i:o,f=u.getNode(),d=c?o:i,g=d.getNode();if(e.is(f)){const h=u.offset;(t<=h&&r>0||t<h&&r<0)&&u.set(a,Math.max(0,h+r),"element")}if(e.is(g)){const h=d.offset;(t<=h&&r>0||t<h&&r<0)&&d.set(a,Math.max(0,h+r),"element")}}Ci(n)}function Ci(n){const e=n.anchor,t=e.offset,r=n.focus,o=r.offset,i=e.getNode(),s=r.getNode();if(n.isCollapsed()){if(!C(i))return;const l=i.getChildrenSize(),a=t>=l,c=a?i.getChildAtIndex(l-1):i.getChildAtIndex(t);if(A(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text"),r.set(c.__key,u,"text")}return}if(C(i)){const l=i.getChildrenSize(),a=t>=l,c=a?i.getChildAtIndex(l-1):i.getChildAtIndex(t);if(A(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text")}}if(C(s)){const l=s.getChildrenSize(),a=o>=l,c=a?s.getChildAtIndex(l-1):s.getChildAtIndex(o);if(A(c)){let u=0;a&&(u=c.getTextContentSize()),r.set(c.__key,u,"text")}}}function tr(n,e,t,r,o){let i=null,s=0,l=null;r!==null?(i=r.__key,A(r)?(s=r.getTextContentSize(),l="text"):C(r)&&(s=r.getChildrenSize(),l="element")):o!==null&&(i=o.__key,A(o)?l="text":C(o)&&(l="element")),i!==null&&l!==null?n.set(i,s,l):(s=e.getIndexWithinParent(),s===-1&&(s=t.getChildrenSize()),n.set(t.__key,s,"element"))}function vi(n,e,t,r,o){n.type==="text"?n.set(t,n.offset+(e?0:o),"text"):n.offset>r.getIndexWithinParent()&&n.set(n.key,n.offset-1,"element")}function hl(n,e,t,r,o){try{n.setBaseAndExtent(e,t,r,o)}catch{}}function _c(n,e,t,r,o,i,s){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,u=r.focusOffset,f=document.activeElement;if(o.has(oc)&&f!==i||f!==null&&To(f))return;if(!O(e))return void(n!==null&&Cn(t,l,a)&&r.removeAllRanges());const d=e.anchor,g=e.focus,h=d.key,p=g.key,_=de(t,h),y=de(t,p),m=d.offset,S=g.offset,w=e.format,E=e.style,v=e.isCollapsed();let T=_,k=y,b=!1;if(d.type==="text"){T=Ie(_);const H=d.getNode();b=H.getFormat()!==w||H.getStyle()!==E}else O(n)&&n.anchor.type==="text"&&(b=!0);var M,P,W,R,B;if(g.type==="text"&&(k=Ie(y)),T!==null&&k!==null&&(v&&(n===null||b||O(n)&&(n.format!==w||n.style!==E))&&(M=w,P=E,W=m,R=h,B=performance.now(),Qs=[M,P,W,R,B]),c!==m||u!==S||l!==T||a!==k||r.type==="Range"&&v||(f!==null&&i.contains(f)||o.has(lc)||i.focus({preventScroll:!0}),d.type==="element"))){if(hl(r,T,m,k,S),!o.has(ic)&&e.isCollapsed()&&i!==null&&i===document.activeElement){const H=O(e)&&e.anchor.type==="element"?T.childNodes[m]||null:r.rangeCount>0?r.getRangeAt(0):null;if(H!==null){let st;if(H instanceof Text){const dt=document.createRange();dt.selectNode(H),st=dt.getBoundingClientRect()}else st=H.getBoundingClientRect();(function(dt,Ce,Dt){const Ye=Dl(Dt),Vo=Fo(Ye);if(Ye===null||Vo===null)return;let{top:Sr,bottom:Cr}=Ce,En=0,Tn=0,Jt=Dt;for(;Jt!==null;){const vr=Jt===Ye.body;if(vr)En=0,Tn=xt(dt).innerHeight;else{const kn=Jt.getBoundingClientRect();En=kn.top,Tn=kn.bottom}let Ge=0;if(Sr<En?Ge=-(En-Sr):Cr>Tn&&(Ge=Cr-Tn),Ge!==0)if(vr)Vo.scrollBy(0,Ge);else{const kn=Jt.scrollTop;Jt.scrollTop+=Ge;const Ho=Jt.scrollTop-kn;Sr-=Ho,Cr-=Ho}if(vr)break;Jt=vn(Jt)}})(t,st,i)}}to=!0}}function mc(n){let e=F()||Je();e===null&&(e=V().selectEnd()),e.insertNodes(n)}function Mr(n){let e=n;n.isCollapsed()||e.removeText();const t=F();O(t)&&(e=t),O(e)||N(161);const r=e.anchor;let o=r.getNode(),i=r.offset;for(;!mt(o);){const s=o;if([o,i]=yc(o,i),s.is(o))break}return i}function yc(n,e){const t=n.getParent();if(!t){const o=Q();return V().append(o),o.select(),[V(),0]}if(A(n)){const o=n.splitText(e);if(o.length===0)return[t,n.getIndexWithinParent()];const i=e===0?0:1;return[t,o[0].getIndexWithinParent()+i]}if(!C(n)||e===0)return[t,n.getIndexWithinParent()];const r=n.getChildAtIndex(e);if(r){const o=new xe(yt(n.__key,e,"element"),yt(n.__key,e,"element"),0,""),i=n.insertNewAfter(o);i&&i.append(r,...r.getNextSiblings())}return[t,n.getIndexWithinParent()+1]}function wi(n,e,t,r,o="decorators-and-blocks"){if(e==="move"&&r==="character"&&!n.isCollapsed()){const[u,f]=t===n.isBackward()?[n.focus,n.anchor]:[n.anchor,n.focus];return f.set(u.key,u.offset,u.type),!0}const i=zt(n.focus,t?"previous":"next"),s=r==="lineboundary",l=e==="move";let a=i,c=o==="decorators-and-blocks";if(!Rl(a)){for(const u of a){c=!1;const{origin:f}=u;if(!z(f)||f.isIsolated()||(a=u,!s||!f.isInline()))break}if(c)for(const u of Io(i).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(wt(u))u.origin.isInline()||(a=u);else{if(C(u.origin))continue;z(u.origin)&&!u.origin.isInline()&&(a=u)}break}}if(a===i)return!1;if(l&&!s&&z(a.origin)&&a.origin.isKeyboardSelectable()){const u=dl();return u.add(a.origin.getKey()),ut(u),!0}return a=Mt(a),l&&yn(n.anchor,a),yn(n.focus,a),c||!s}let et=null,nt=null,ft=!1,Ar=!1,zn=0;const bi={characterData:!0,childList:!0,subtree:!0};function je(){return ft||et!==null&&et._readOnly}function ot(){ft&&N(13)}function gl(){zn>99&&N(14)}function Qt(){return et===null&&N(195,pl()),et}function U(){return nt===null&&N(196,pl()),nt}function pl(){let n=0;const e=new Set,t=fe.version;if(typeof window<"u")for(const o of document.querySelectorAll("[contenteditable]")){const i=ur(o);if(ko(i))n++;else if(i){let s=String(i.constructor.version||"<0.17.1");s===t&&(s+=" (separately built, likely a bundler configuration issue)"),e.add(s)}}let r=` Detected on the page: ${n} compatible editor(s) with version ${t}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function xc(){return nt}function Ni(n,e,t){const r=e.__type,o=vl(n,r);let i=t.get(r);i===void 0&&(i=Array.from(o.transforms),t.set(r,i));const s=i.length;for(let l=0;l<s&&(i[l](e),e.isAttached());l++);}function Ei(n,e){return n!==void 0&&n.__key!==e&&n.isAttached()}function _l(n,e){if(!e)return;const t=n._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const o of r)t.add(o)}function Sc(n){return Co(n,U()._nodes)}function Co(n,e){const t=n.type,r=e.get(t);r===void 0&&N(17,t);const o=r.klass;n.type!==o.getType()&&N(18,o.name);const i=o.importJSON(n),s=n.children;if(C(i)&&Array.isArray(s))for(let l=0;l<s.length;l++){const a=Co(s[l],e);i.append(a)}return i}function Ti(n,e,t){const r=et,o=ft,i=nt;et=e,ft=!0,nt=n;try{return t()}finally{et=r,ft=o,nt=i}}function It(n,e){const t=n._pendingEditorState,r=n._rootElement,o=n._headless||r===null;if(t===null)return;const i=n._editorState,s=i._selection,l=t._selection,a=n._dirtyType!==0,c=et,u=ft,f=nt,d=n._updating,g=n._observer;let h=null;if(n._pendingEditorState=null,n._editorState=t,!o&&a&&g!==null){nt=n,et=t,ft=!1,n._updating=!0;try{const v=n._dirtyType,T=n._dirtyElements,k=n._dirtyLeaves;g.disconnect(),h=Ja(i,t,n,v,T,k)}catch(v){if(v instanceof Error&&n._onError(v),Ar)throw v;return Sl(n,null,r,t),Ts(n),n._dirtyType=2,Ar=!0,It(n,i),void(Ar=!1)}finally{g.observe(r,bi),n._updating=d,et=c,ft=u,nt=f}}t._readOnly||(t._readOnly=!0);const p=n._dirtyLeaves,_=n._dirtyElements,y=n._normalizedNodes,m=n._updateTags,S=n._deferred;a&&(n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),function(v,T){const k=v._decorators;let b=v._pendingDecorators||k;const M=T._nodeMap;let P;for(P in b)M.has(P)||(b===k&&(b=El(v)),delete b[P])}(n,t);const w=o?null:bt(xt(n));if(n._editable&&w!==null&&(a||l===null||l.dirty||!l.is(s))&&r!==null&&!m.has(sc)){nt=n,et=t;try{if(g!==null&&g.disconnect(),a||l===null||l.dirty){const v=n._blockCursorElement;v!==null&&ao(v,n,r),_c(s,l,n,w,m,r)}(function(v,T,k){let b=v._blockCursorElement;if(O(k)&&k.isCollapsed()&&k.anchor.type==="element"&&T.contains(document.activeElement)){const M=k.anchor,P=M.getNode(),W=M.offset;let R=!1,B=null;if(W===P.getChildrenSize())Fr(P.getChildAtIndex(W-1))&&(R=!0);else{const H=P.getChildAtIndex(W);if(H!==null&&Fr(H)){const st=H.getPreviousSibling();(st===null||Fr(st))&&(R=!0,B=v.getElementByKey(H.__key))}}if(R){const H=v.getElementByKey(P.__key);return b===null&&(v._blockCursorElement=b=function(st){const dt=st.theme,Ce=document.createElement("div");Ce.contentEditable="false",Ce.setAttribute("data-lexical-cursor","true");let Dt=dt.blockCursor;if(Dt!==void 0){if(typeof Dt=="string"){const Ye=vs(Dt);Dt=dt.blockCursor=Ye}Dt!==void 0&&Ce.classList.add(...Dt)}return Ce}(v._config)),T.style.caretColor="transparent",void(B===null?H.appendChild(b):H.insertBefore(b,B))}}b!==null&&ao(b,v,T)})(n,r,l)}finally{g!==null&&g.observe(r,bi),nt=f,et=c}}h!==null&&function(v,T,k,b,M){const P=Array.from(v._listeners.mutation),W=P.length;for(let R=0;R<W;R++){const[B,H]=P[R];for(const st of H){const dt=T.get(st);dt!==void 0&&B(dt,{dirtyLeaves:b,prevEditorState:M,updateTags:k})}}}(n,h,m,p,i),O(l)||l===null||s!==null&&s.is(l)||n.dispatchCommand(Ls,void 0);const E=n._pendingDecorators;E!==null&&(n._decorators=E,n._pendingDecorators=null,sn("decorator",n,!0,E)),function(v,T,k){const b=Di(T),M=Di(k);b!==M&&sn("textcontent",v,!0,M)}(n,e||i,t),sn("update",n,!0,{dirtyElements:_,dirtyLeaves:p,editorState:t,mutatedNodes:h,normalizedNodes:y,prevEditorState:e||i,tags:m}),function(v,T){if(v._deferred=[],T.length!==0){const k=v._updating;v._updating=!0;try{for(let b=0;b<T.length;b++)T[b]()}finally{v._updating=k}}}(n,S),function(v){const T=v._updates;if(T.length!==0){const k=T.shift();if(k){const[b,M]=k;cr(v,b,M)}}}(n)}function sn(n,e,t,...r){const o=e._updating;e._updating=t;try{const i=Array.from(e._listeners[n]);for(let s=0;s<i.length;s++)i[s].apply(null,r)}finally{e._updating=o}}function ki(n,e){const t=n._updates;let r=e||!1;for(;t.length!==0;){const o=t.shift();if(o){const[i,s]=o,l=n._pendingEditorState;let a;s!==void 0&&(a=s.onUpdate,s.skipTransforms&&(r=!0),s.discrete&&(l===null&&N(191),l._flushSync=!0),a&&n._deferred.push(a),_l(n,s.tag)),l==null?cr(n,i,s):i()}}return r}function cr(n,e,t){const r=n._updateTags;let o,i=!1,s=!1;t!==void 0&&(o=t.onUpdate,_l(n,t.tag),i=t.skipTransforms||!1,s=t.discrete||!1),o&&n._deferred.push(o);const l=n._editorState;let a=n._pendingEditorState,c=!1;(a===null||a._readOnly)&&(a=n._pendingEditorState=yl(a||l),c=!0),a._flushSync=s;const u=et,f=ft,d=nt,g=n._updating;et=a,ft=!1,n._updating=!0,nt=n;const h=n._headless||n.getRootElement()===null;No(null);try{c&&(h?l._selection!==null&&(a._selection=l._selection.clone()):a._selection=function(m,S){const w=m.getEditorState()._selection,E=bt(xt(m));return O(w)||w==null?So(w,E,m,S):w.clone()}(n,t&&t.event||null));const _=n._compositionKey;e(),i=ki(n,i),function(m,S){const w=S.getEditorState()._selection,E=m._selection;if(O(E)){const v=E.anchor,T=E.focus;let k;if(v.type==="text"&&(k=v.getNode(),k.selectionTransform(w,E)),T.type==="text"){const b=T.getNode();k!==b&&b.selectionTransform(w,E)}}}(a,n),n._dirtyType!==0&&(i?function(m,S){const w=S._dirtyLeaves,E=m._nodeMap;for(const v of w){const T=E.get(v);A(T)&&T.isAttached()&&T.isSimpleText()&&!T.isUnmergeable()&&oi(T)}}(a,n):function(m,S){const w=S._dirtyLeaves,E=S._dirtyElements,v=m._nodeMap,T=Ut(),k=new Map;let b=w,M=b.size,P=E,W=P.size;for(;M>0||W>0;){if(M>0){S._dirtyLeaves=new Set;for(const R of b){const B=v.get(R);A(B)&&B.isAttached()&&B.isSimpleText()&&!B.isUnmergeable()&&oi(B),B!==void 0&&Ei(B,T)&&Ni(S,B,k),w.add(R)}if(b=S._dirtyLeaves,M=b.size,M>0){zn++;continue}}S._dirtyLeaves=new Set,S._dirtyElements=new Map,P.delete("root")&&P.set("root",!0);for(const R of P){const B=R[0],H=R[1];if(E.set(B,H),!H)continue;const st=v.get(B);st!==void 0&&Ei(st,T)&&Ni(S,st,k)}b=S._dirtyLeaves,M=b.size,P=S._dirtyElements,W=P.size,zn++}S._dirtyLeaves=w,S._dirtyElements=E}(a,n),ki(n),function(m,S,w,E){const v=m._nodeMap,T=S._nodeMap,k=[];for(const[b]of E){const M=T.get(b);M!==void 0&&(M.isAttached()||(C(M)&&bs(M,b,v,T,k,E),v.has(b)||E.delete(b),k.push(b)))}for(const b of k)T.delete(b);for(const b of w){const M=T.get(b);M===void 0||M.isAttached()||(v.has(b)||w.delete(b),T.delete(b))}}(l,a,n._dirtyLeaves,n._dirtyElements)),_!==n._compositionKey&&(a._flushSync=!0);const y=a._selection;if(O(y)){const m=a._nodeMap,S=y.anchor.key,w=y.focus.key;m.get(S)!==void 0&&m.get(w)!==void 0||N(19)}else ht(y)&&y._nodes.size===0&&(a._selection=null)}catch(_){return _ instanceof Error&&n._onError(_),n._pendingEditorState=l,n._dirtyType=2,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void It(n)}finally{et=u,ft=f,nt=d,n._updating=g,zn=0}n._dirtyType!==0||n._deferred.length>0||function(_,y){const m=y.getEditorState()._selection,S=_._selection;if(S!==null){if(S.dirty||!S.is(m))return!0}else if(m!==null)return!0;return!1}(a,n)?a._flushSync?(a._flushSync=!1,It(n)):c&&Ec(()=>{It(n)}):(a._flushSync=!1,c&&(r.clear(),n._deferred=[],n._pendingEditorState=null))}function gt(n,e,t){nt===n&&t===void 0?e():cr(n,e,t)}class ln{constructor(e,t,r){x(this,"element");x(this,"before");x(this,"after");this.element=e,this.before=t||null,this.after=r||null}withBefore(e){return new ln(this.element,e,this.after)}withAfter(e){return new ln(this.element,this.before,e)}withElement(e){return this.element===e?this:new ln(e,this.before,this.after)}insertChild(e){const t=this.before||this.getManagedLineBreak();return t!==null&&t.parentElement!==this.element&&N(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&N(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&N(224),this.element.replaceChild(e,t),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const t=e==="decorator"&&(un||$e||cn);this.insertManagedLineBreak(t)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const t=this.element,r=e.nodeName==="IMG"?e.nextSibling:null;r&&t.removeChild(r),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const t=this.getManagedLineBreak();if(t){if(e===(t.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,o=this.before,i=document.createElement("br");if(r.insertBefore(i,o),e){const s=document.createElement("img");s.setAttribute("data-lexical-linebreak","true"),s.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",s.alt="",r.insertBefore(s,i),r.__lexicalLineBreak=s}else r.__lexicalLineBreak=i}getFirstChildOffset(){let e=0;for(let t=this.after;t!==null;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,r,o){if(r===this.element){const a=this.getFirstChildOffset();return[e,Math.min(a+e.getChildrenSize(),Math.max(a,o))]}const i=Oi(t,r);i.push(o);const s=Oi(t,this.element);let l=e.getIndexWithinParent();for(let a=0;a<s.length;a++){const c=i[a],u=s[a];if(c===void 0||c<u)break;if(c>u){l+=1;break}}return[e.getParentOrThrow(),l]}}function Oi(n,e){const t=[];let r=e;for(;r!==n&&r!==null;r=r.parentNode){let o=0;for(let i=r.previousSibling;i!==null;i=i.previousSibling)o++;t.push(o)}return r!==n&&N(225),t.reverse()}class At extends vt{constructor(t){super(t);x(this,"__first");x(this,"__last");x(this,"__size");x(this,"__format");x(this,"__style");x(this,"__indent");x(this,"__dir");x(this,"__textFormat");x(this,"__textStyle");this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return Oa[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=U()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(A(r)&&t.push(r),C(r)){const o=r.getAllTextNodes();t.push(...o)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;C(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;C(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),o=r.length;if(t>=o){const s=r[o-1];return C(s)&&s.getLastDescendant()||s||null}const i=r[t];return C(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Y(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&N(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Y(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&N(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let o,i;if(t<r/2){for(o=this.getFirstChild(),i=0;o!==null&&i<=t;){if(i===t)return o;o=o.getNextSibling(),i++}return null}for(o=this.getLastChild(),i=r-1;o!==null&&i>=t;){if(i===t)return o;o=o.getPreviousSibling(),i--}return null}getTextContent(){let t="";const r=this.getChildren(),o=r.length;for(let i=0;i<o;i++){const s=r[i];t+=s.getTextContent(),C(s)&&i!==o-1&&!s.isInline()&&(t+=Yt)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),o=r.length;for(let i=0;i<o;i++){const s=r[i];t+=s.getTextContentSize(),C(s)&&i!==o-1&&!s.isInline()&&(t+=2)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=Go[t];return(this.getFormat()&r)!==0}return!1}hasTextFormat(t){const r=Gt[t];return(this.getTextFormat()&r)!==0}getFormatFlags(t,r){return er(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){ot();const o=F();let i=t,s=r;const l=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const c=this.getFirstChild();if(A(c)||C(c))return c.select(0,0)}else if(!(t!==void 0&&t!==l||r!==void 0&&r!==l)){const c=this.getLastChild();if(A(c)||C(c))return c.select()}}i===void 0&&(i=l),s===void 0&&(s=l);const a=this.__key;return O(o)?(o.anchor.set(a,i,"element"),o.focus.set(a,s,"element"),o.dirty=!0,o):fl(a,i,a,s,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(r=>r.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?Go[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,o){Zn(this)&&N(324,this.__key,this.__type);const i=this.getChildrenSize(),s=this.getWritable();t+r<=i||N(226,String(t),String(r),String(i));const l=s.__key,a=[],c=[],u=this.getChildAtIndex(t+r);let f=null,d=i-r+o.length;if(t!==0)if(t===i)f=this.getLastChild();else{const h=this.getChildAtIndex(t);h!==null&&(f=h.getPreviousSibling())}if(r>0){let h=f===null?this.getFirstChild():f.getNextSibling();for(let p=0;p<r;p++){h===null&&N(100);const _=h.getNextSibling(),y=h.__key;se(h.getWritable()),c.push(y),h=_}}let g=f;for(const h of o){g!==null&&h.is(g)&&(f=g=g.getPreviousSibling());const p=h.getWritable();p.__parent===l&&d--,se(p);const _=h.__key;if(g===null)s.__first=_,p.__prev=null;else{const y=g.getWritable();y.__next=_,p.__prev=y.__key}h.__key===l&&N(76),p.__parent=l,a.push(_),g=h}if(t+r===i)g!==null&&(g.getWritable().__next=null,s.__last=g.__key);else if(u!==null){const h=u.getWritable();if(g!==null){const p=g.getWritable();h.__prev=g.__key,p.__next=u.__key}else h.__prev=null}if(s.__size=d,c.length){const h=F();if(O(h)){const p=new Set(c),_=new Set(a),{anchor:y,focus:m}=h;Mi(y,p,_)&&tr(y,y.getNode(),this,f,u),Mi(m,p,_)&&tr(m,m.getNode(),this,f,u),d!==0||this.canBeEmpty()||Wt(this)||this.remove()}}return s}getDOMSlot(t){return new ln(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(q(r)){const o=this.getIndent();o>0&&(r.style.paddingInlineStart=40*o+"px");const i=this.getDirection();i&&(r.dir=i)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),o=this.getTextStyle();return r!==0&&(t.textFormat=r),o!==""&&(t.textStyle=o),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,o){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const o=this.getDOMSlot(t);let i=o.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){const l=r.getElementByKey(s.getKey());l!==null&&(i==null?(o.insertChild(l),i=l):i!==l&&o.replaceChild(l,i),i=i.nextSibling)}}}function C(n){return n instanceof At}function Mi(n,e,t){let r=n.getNode();for(;r;){const o=r.__key;if(e.has(o)&&!t.has(o))return!0;r=r.getParent()}return!1}class ml extends vt{decorate(e,t){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function z(n){return n instanceof ml}class Ue extends At{constructor(){super("root");x(this,"__cachedText");this.__cachedText=null}static getType(){return"root"}static clone(){return new Ue}getTopLevelElementOrThrow(){N(51)}getTextContent(){const t=this.__cachedText;return!je()&&U()._dirtyType!==0||t===null?super.getTextContent():t}remove(){N(52)}replace(t){N(53)}insertBefore(t){N(54)}insertAfter(t){N(55)}updateDOM(t,r){return!1}splice(t,r,o){for(const i of o)C(i)||z(i)||N(282);return super.splice(t,r,o)}static importJSON(t){return V().updateFromJSON(t)}collapseAtStart(){return!0}}function Z(n){return n instanceof Ue}function yl(n){return new Sn(new Map(n._nodeMap))}function vo(){return new Sn(new Map([["root",new Ue]]))}function xl(n){const e=n.exportJSON(),t=n.constructor;if(e.type!==t.getType()&&N(130,t.name),C(n)){const r=e.children;Array.isArray(r)||N(59,t.name);const o=n.getChildren();for(let i=0;i<o.length;i++){const s=xl(o[i]);r.push(s)}}return e}function Cc(n){return n instanceof Sn}class Sn{constructor(e,t){x(this,"_nodeMap");x(this,"_selection");x(this,"_flushSync");x(this,"_readOnly");this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,t){return Ti(t&&t.editor||null,this,e)}clone(e){const t=new Sn(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return Ti(null,this,()=>({root:xl(V())}))}}class wo extends At{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class Ve extends At{static getType(){return"paragraph"}static clone(e){return new Ve(e.__key)}createDOM(e){const t=document.createElement("p"),r=Pe(e.theme,"paragraph");return r!==void 0&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:vc,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(q(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();r&&(t.style.textAlign=r)}return{element:t}}static importJSON(e){return Q().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,t){const r=Q();r.setTextFormat(e.format),r.setTextStyle(e.style);const o=this.getDirection();return r.setDirection(o),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,t),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||A(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function vc(n){const e=Q();return n.style&&(e.setFormat(n.style.textAlign),Po(n,e)),{node:e}}function Q(){return Bt(new Ve)}function bo(n){return n instanceof Ve}const I=0,Rf=1,$f=2,If=3,wc=4;function Sl(n,e,t,r){const o=n._keyToDOMMap;o.clear(),n._editorState=vo(),n._pendingEditorState=r,n._compositionKey=null,n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;const i=n._observer;i!==null&&(i.disconnect(),n._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",o.set("root",t))}function bc(n){const e=new Set,t=new Set;let r=n;for(;r;){const{ownNodeConfig:o}=gr(r),i=r.transform;if(!t.has(i)){t.add(i);const s=r.transform();s&&e.add(s)}if(o){const s=o.$transform;s&&e.add(s),r=o.extends}else{const s=Object.getPrototypeOf(r);r=s.prototype instanceof vt&&s!==vt?s:void 0}}return e}function Cl(n){const e=n||{},t=xc(),r=e.theme||{},o=n===void 0?t:e.parentEditor||null,i=e.disableEvents||!1,s=vo(),l=e.namespace||(o!==null?o._config.namespace:Ol()),a=e.editorState,c=[Ue,ye,We,Be,Ve,wo,...e.nodes||[]],{onError:u,html:f}=e,d=e.editable===void 0||e.editable;let g;if(n===void 0&&t!==null)g=t._nodes;else{g=new Map;for(let p=0;p<c.length;p++){let _=c[p],y=null,m=null;if(typeof _!="function"){const E=_;_=E.replace,y=E.with,m=E.withKlass||null}gr(_);const S=_.getType(),w=bc(_);g.set(S,{exportDOM:f&&f.export?f.export.get(_):void 0,klass:_,replace:y,replaceWithKlass:m,sharedNodeState:Ia(c[p]),transforms:w})}}const h=new fe(s,o,g,{disableEvents:i,namespace:l,theme:r},u||console.error,function(p,_){const y=new Map,m=new Set,S=w=>{Object.keys(w).forEach(E=>{let v=y.get(E);v===void 0&&(v=[],y.set(E,v)),v.push(w[E])})};return p.forEach(w=>{const E=w.klass.importDOM;if(E==null||m.has(E))return;m.add(E);const v=E.call(w.klass);v!==null&&S(v)}),_&&S(_),y}(g,f?f.import:void 0),d,n);return a!==void 0&&(h._pendingEditorState=a,h._dirtyType=2),h}class fe{constructor(e,t,r,o,i,s,l,a){x(this,"_headless");x(this,"_parentEditor");x(this,"_rootElement");x(this,"_editorState");x(this,"_pendingEditorState");x(this,"_compositionKey");x(this,"_deferred");x(this,"_keyToDOMMap");x(this,"_updates");x(this,"_updating");x(this,"_listeners");x(this,"_commands");x(this,"_nodes");x(this,"_decorators");x(this,"_pendingDecorators");x(this,"_config");x(this,"_dirtyType");x(this,"_cloneNotNeeded");x(this,"_dirtyLeaves");x(this,"_dirtyElements");x(this,"_normalizedNodes");x(this,"_updateTags");x(this,"_observer");x(this,"_key");x(this,"_onError");x(this,"_htmlConversions");x(this,"_window");x(this,"_editable");x(this,"_blockCursorElement");x(this,"_createEditorArgs");this._createEditorArgs=a,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=o,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Ol(),this._onError=i,this._htmlConversions=s,this._editable=l,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){r===void 0&&N(35);const o=this._commands;o.has(e)||o.set(e,[new Set,new Set,new Set,new Set,new Set]);const i=o.get(e);i===void 0&&N(36,String(e));const s=i[r];return s.add(t),()=>{s.delete(t),i.every(l=>l.size===0)&&o.delete(e)}}registerMutationListener(e,t,r){const o=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,i=this._listeners.mutation;let s=i.get(t);s===void 0&&(s=new Set,i.set(t,s)),s.add(o);const l=r&&r.skipInitialization;return l!==void 0&&l||this.initializeMutationListener(t,o),()=>{s.delete(o),s.size===0&&i.delete(t)}}getRegisteredNode(e){const t=this._nodes.get(e.getType());return t===void 0&&N(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){const r=this._editorState,o=zi(r).get(t.getType());if(!o)return;const i=new Map;for(const s of o.keys())i.set(s,"created");i.size>0&&e(i,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){const r=this.getRegisteredNode(e);return r.transforms.add(t),r}registerNodeTransform(e,t){const r=this.registerNodeTransformToKlass(e,t),o=[r],i=r.replaceWithKlass;if(i!=null){const s=this.registerNodeTransformToKlass(i,t);o.push(s)}return function(s,l){const a=zi(s.getEditorState()),c=[];for(const u of l){const f=a.get(u);f&&c.push(f)}c.length!==0&&s.update(()=>{for(const u of c)for(const f of u.keys()){const d=Y(f);d&&d.markDirty()}},s._pendingEditorState===null?{tag:Fe}:void 0)}(this,o.map(s=>s.klass.getType())),()=>{o.forEach(s=>s.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return D(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const r=Pe(this._config.theme,"root"),o=this._pendingEditorState||this._editorState;if(this._rootElement=e,Sl(this,t,e,o),t!==null&&(this._config.disableEvents||nc(t),r!=null&&t.classList.remove(...r)),e!==null){const i=Fo(e),s=e.style;s.userSelect="text",s.whiteSpace="pre-wrap",s.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=i,this._dirtyType=2,Ts(this),this._updateTags.add(Fe),It(this),this._config.disableEvents||function(l,a){const c=l.ownerDocument;Qr.set(l,c);const u=Xn.get(c)??0;u<1&&c.addEventListener("selectionchange",ol),Xn.set(c,u+1),l.__lexicalEditor=a;const f=rl(l);for(let d=0;d<Zr.length;d++){const[g,h]=Zr[d],p=typeof h=="function"?_=>{fi(_)||(ui(_),(a.isEditable()||g==="click")&&h(_,a))}:_=>{if(fi(_))return;ui(_);const y=a.isEditable();switch(g){case"cut":return y&&D(a,mo,_);case"copy":return D(a,lr,_);case"paste":return y&&D(a,_o,_);case"dragstart":return y&&D(a,Ys,_);case"dragover":return y&&D(a,Gs,_);case"dragend":return y&&D(a,Xa,_);case"focus":return y&&D(a,Qa,_);case"blur":return y&&D(a,tc,_);case"drop":return y&&D(a,qs,_)}};l.addEventListener(g,p),f.push(()=>{l.removeEventListener(g,p)})}}(e,this),r!=null&&e.classList.add(...r)}else this._window=null,this._updateTags.add(Fe),It(this);sn("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&N(38);let r=e;r._readOnly&&(r=yl(e),r._selection=e._selection?e._selection.clone():null),Es(this);const o=this._pendingEditorState,i=this._updateTags,s=t!==void 0?t.tag:null;o===null||o.isEmpty()||(s!=null&&i.add(s),It(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,s!=null&&i.add(s),this._updating||It(this)}parseEditorState(e,t){return function(r,o,i){const s=vo(),l=et,a=ft,c=nt,u=o._dirtyElements,f=o._dirtyLeaves,d=o._cloneNotNeeded,g=o._dirtyType;o._dirtyElements=new Map,o._dirtyLeaves=new Set,o._cloneNotNeeded=new Set,o._dirtyType=0,et=s,ft=!1,nt=o,No(null);try{const h=o._nodes;Co(r.root,h),i&&i(),s._readOnly=!0}catch(h){h instanceof Error&&o._onError(h)}finally{o._dirtyElements=u,o._dirtyLeaves=f,o._cloneNotNeeded=d,o._dirtyType=g,et=l,ft=a,nt=c}return s}(typeof e=="string"?JSON.parse(e):e,this,t)}read(e){return It(this),this.getEditorState().read(e,{editor:this})}update(e,t){(function(r,o,i){r._updating?r._updates.push([o,i]):cr(r,o,i)})(this,e,t)}focus(e,t={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),gt(this,()=>{const o=F(),i=V();o!==null?o.dirty||ut(o.clone()):i.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?i.selectStart():i.selectEnd()),Mc("focus"),Ac(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=bt(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,sn("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}x(fe,"version");fe.version="0.38.2+prod.esm";let io=null;function No(n){io=n}let Nc=1;function vl(n,e){const t=Eo(n,e);return t===void 0&&N(30,e),t}function Eo(n,e){return n._nodes.get(e)}const Ec=typeof queueMicrotask=="function"?queueMicrotask:n=>{Promise.resolve().then(n)};function Ai(n){return z(Xt(n))}function To(n){const e=document.activeElement;if(!q(e))return!1;const t=e.nodeName;return z(Xt(n))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&ur(e)==null)}function Cn(n,e,t){const r=n.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(t)&&e!==null&&!To(e)&&wl(e)===n}catch{return!1}}function ko(n){return n instanceof fe}function wl(n){let e=n;for(;e!=null;){const t=ur(e);if(ko(t))return t;e=vn(e)}return null}function ur(n){return n?n.__lexicalEditor:null}function ie(n){return al(n)||n.isToken()}function Rt(n){return ie(n)||n.isSegmented()}function Kt(n){return He(n)&&n.nodeType===3}function bl(n){return He(n)&&n.nodeType===9}function Ie(n){let e=n;for(;e!=null;){if(Kt(e))return e;e=e.firstChild}return null}function er(n,e,t){const r=Gt[e];if(t!==null&&(n&r)===(t&r))return n;let o=n^r;return e==="subscript"?o&=-65:e==="superscript"?o&=-33:e==="lowercase"?(o&=-513,o&=-1025):e==="uppercase"?(o&=-257,o&=-1025):e==="capitalize"&&(o&=-257,o&=-513),o}function Tc(n,e){const t=function(){const s=io;return io=null,s}();if((e=e||t&&t.__key)!=null)return void(n.__key=e);ot(),gl();const r=U(),o=Qt(),i=""+Nc++;o._nodeMap.set(i,n),C(n)?r._dirtyElements.set(i,!0):r._dirtyLeaves.add(i),r._cloneNotNeeded.add(i),r._dirtyType=1,n.__key=i}function se(n){const e=n.getParent();if(e!==null){const t=n.getWritable(),r=e.getWritable(),o=n.getPreviousSibling(),i=n.getNextSibling(),s=i!==null?i.__key:null,l=o!==null?o.__key:null,a=o!==null?o.getWritable():null,c=i!==null?i.getWritable():null;o===null&&(r.__first=s),i===null&&(r.__last=l),a!==null&&(a.__next=s),c!==null&&(c.__prev=l),t.__prev=null,t.__next=null,t.__parent=null,r.__size--}}function nr(n){gl(),Zn(n)&&N(323,n.__key,n.__type);const e=n.getLatest(),t=e.__parent,r=Qt(),o=U(),i=r._nodeMap,s=o._dirtyElements;t!==null&&function(a,c,u){let f=a;for(;f!==null;){if(u.has(f))return;const d=c.get(f);if(d===void 0)break;u.set(f,!1),f=d.__parent}}(t,i,s);const l=e.__key;o._dirtyType=1,C(n)?s.set(l,!0):o._dirtyLeaves.add(l)}function it(n){ot();const e=U(),t=e._compositionKey;if(n!==t){if(e._compositionKey=n,t!==null){const r=Y(t);r!==null&&r.getWritable()}if(n!==null){const r=Y(n);r!==null&&r.getWritable()}}}function Ut(){return je()?null:U()._compositionKey}function Y(n,e){const t=(e||Qt())._nodeMap.get(n);return t===void 0?null:t}function Nl(n,e){const t=fr(n,U());return t!==void 0?Y(t,e):null}function fr(n,e){return n[`__lexicalKey_${e._key}`]}function Xt(n,e){let t=n;for(;t!=null;){const r=Nl(t,e);if(r!==null)return r;t=vn(t)}return null}function El(n){const e=n._decorators,t=Object.assign({},e);return n._pendingDecorators=t,t}function Di(n){return n.read(()=>V().getTextContent())}function V(){return Tl(Qt())}function Tl(n){return n._nodeMap.get("root")}function ut(n){ot();const e=Qt();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),e._selection=n}function Oe(n){const e=U(),t=function(r,o){let i=r;for(;i!=null;){const s=fr(i,o);if(s!==void 0)return s;i=vn(i)}return null}(n,e);return t===null?n===e.getRootElement()?Y("root"):null:Y(t)}function kl(n){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)}function Oo(n){const e=[];let t=n;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function Ol(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function Ml(n){return Kt(n)?n.nodeValue:null}function Mo(n,e,t){const r=bt(xt(e));if(r===null)return;const o=r.anchorNode;let{anchorOffset:i,focusOffset:s}=r;if(o!==null){let l=Ml(o);const a=Xt(o);if(l!==null&&A(a)){if(l===ir&&t){const c=t.length;l=t,i=c,s=c}l!==null&&Ao(a,l,i,s,n)}}}function Ao(n,e,t,r,o){let i=n;if(i.isAttached()&&(o||!i.isDirty())){const s=i.isComposing();let l=e;(s||o)&&e[e.length-1]===ir&&(l=e.slice(0,-1));const a=i.getTextContent();if(o||l!==a){if(l===""){if(it(null),cn||$e||un)i.remove();else{const p=U();setTimeout(()=>{p.update(()=>{i.isAttached()&&i.remove()})},20)}return}const c=i.getParent(),u=Je(),f=i.getTextContentSize(),d=Ut(),g=i.getKey();if(i.isToken()||d!==null&&g===d&&!s||O(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===n.__key&&u.anchor.offset===0&&!i.canInsertTextBefore()&&!s||u.focus.key===n.__key&&u.focus.offset===f&&!i.canInsertTextAfter()&&!s))return void i.markDirty();const h=F();if(!O(h)||t===null||r===null)return void Fi(i,l,h);if(h.setTextNodeRange(i,t,i,r),i.isSegmented()){const p=rt(i.getTextContent());i.replace(p),i=p}Fi(i,l,h)}}}function Fi(n,e,t){if(n.setTextContent(e),O(t)){const r=n.getKey();for(const o of["anchor","focus"]){const i=t[o];i.type==="text"&&i.key===r&&(i.offset=Ht(n,i.offset,"clamp"))}}}function Dn(n,e,t){const r=e[t]||!1;return r==="any"||r===n[t]}function kc(n,e){return Dn(n,e,"altKey")&&Dn(n,e,"ctrlKey")&&Dn(n,e,"shiftKey")&&Dn(n,e,"metaKey")}function J(n,e,t){return kc(n,t)&&n.key.toLowerCase()===e.toLowerCase()}const Lt={ctrlKey:!St,metaKey:St},Pi={altKey:St,ctrlKey:!St};function Li(n){return n.key==="Backspace"}function Ri(n){return J(n,"a",Lt)}function Oc(n){const e=V();if(O(n)){const t=n.anchor,r=n.focus,o=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(o.getKey(),0,"element"),r.set(o.getKey(),o.getChildrenSize(),"element"),fn(n),n}{const t=e.select(0,e.getChildrenSize());return ut(fn(t)),t}}function Pe(n,e){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});const t=n.__lexicalClassNameCache,r=t[e];if(r!==void 0)return r;const o=n[e];if(typeof o=="string"){const i=vs(o);return t[e]=i,i}return o}function Do(n,e,t,r,o){if(t.size===0)return;const i=r.__type,s=r.__key,l=e.get(i);l===void 0&&N(33,i);const a=l.klass;let c=n.get(a);c===void 0&&(c=new Map,n.set(a,c));const u=c.get(s),f=u==="destroyed"&&o==="created";(u===void 0||f)&&c.set(s,f?"updated":o)}function $i(n,e,t){const r=n.getParent();let o=t,i=n;return r!==null&&(e&&t===0?(o=i.getIndexWithinParent(),i=r):e||t!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(e?o-1:o)}function so(n,e){const t=n.offset;if(n.type==="element")return $i(n.getNode(),e,t);{const r=n.getNode();if(e&&t===0||!e&&t===r.getTextContentSize()){const o=e?r.getPreviousSibling():r.getNextSibling();return o===null?$i(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):o}}return null}function Al(n){const e=xt(n).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function D(n,e,t){return function(r,o,i){const s=Oo(r);for(let l=4;l>=0;l--)for(let a=0;a<s.length;a++){const c=s[a],u=c._commands.get(o);if(u!==void 0){const f=u[l];if(f!==void 0){const d=Array.from(f),g=d.length;let h=!1;if(gt(c,()=>{for(let p=0;p<g;p++)if(d[p](i,r))return void(h=!0)}),h)return h}}}return!1}(n,e,t)}function dr(n){return!Z(n)&&!n.isLastChild()&&!n.isInline()}function de(n,e){const t=n._keyToDOMMap.get(e);return t===void 0&&N(75,e),t}function vn(n){const e=n.assignedSlot||n.parentElement;return co(e)?e.host:e}function Dl(n){return bl(n)?n:q(n)?n.ownerDocument:null}function zf(n){return U()._updateTags.has(n)}function Mc(n){ot(),U()._updateTags.add(n)}function Ac(n){ot(),U()._deferred.push(n)}function lo(n,e){let t=n.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function Fo(n){const e=Dl(n);return e?e.defaultView:null}function xt(n){const e=n._window;return e===null&&N(78),e}function Dc(n){return C(n)&&n.isInline()||z(n)&&n.isInline()}function Fc(n){let e=n.getParentOrThrow();for(;e!==null;){if(Wt(e))return e;e=e.getParentOrThrow()}return e}function Wt(n){return Z(n)||C(n)&&n.isShadowRoot()}function Bt(n){const e=U(),t=n.getType(),r=Eo(e,t);r===void 0&&N(200,n.constructor.name,t);const{replace:o,replaceWithKlass:i}=r;if(o!==null){const s=o(n),l=s.constructor;return i!==null?s instanceof i||N(201,i.name,i.getType(),l.name,l.getType(),n.constructor.name,t):s instanceof n.constructor&&l!==n.constructor||N(202,l.name,l.getType(),n.constructor.name,t),s.__key===n.__key&&N(203,n.constructor.name,t,l.name,l.getType()),s}return n}function Dr(n,e){!Z(n.getParent())||C(e)||z(e)||N(99)}function Pc(n){const e=Y(n);return e===null&&N(63,n),e}function Fr(n){return(z(n)||C(n)&&!n.canBeEmpty())&&!n.isInline()}function ao(n,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=n.parentElement;r!==null&&r.removeChild(n)}function bt(n){return Et?(n||window).getSelection():null}function Lc(n){const e=Fo(n);return e?e.getSelection():null}function Kf(n){return q(n)&&n.tagName==="A"}function q(n){return He(n)&&n.nodeType===1}function He(n){return typeof n=="object"&&n!==null&&"nodeType"in n&&typeof n.nodeType=="number"}function co(n){return He(n)&&n.nodeType===11}function uo(n){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return n.nodeName.match(e)!==null}function rr(n){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return n.nodeName.match(e)!==null}function mt(n){if(z(n)&&!n.isInline())return!0;if(!C(n)||Wt(n))return!1;const e=n.getFirstChild(),t=e===null||oe(e)||A(e)||e.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&t}function hr(){return U()}const Ii=new WeakMap,Rc=new Map;function zi(n){if(!n._readOnly&&n.isEmpty())return Rc;n._readOnly||N(192);let e=Ii.get(n);return e||(e=function(t){const r=new Map;for(const[o,i]of t._nodeMap){const s=i.__type;let l=r.get(s);l||(l=new Map,r.set(s,l)),l.set(o,i)}return r}(n),Ii.set(n,e)),e}function Fl(n){const e=n.constructor.clone(n);return e.afterCloneFrom(n),e}function $c(n){return(e=Fl(n))[il]=!0,e;var e}function Po(n,e){const t=parseInt(n.style.paddingInlineStart,10)||0,r=Math.round(t/40);e.setIndent(r)}function Ic(n){n.__lexicalUnmanaged=!0}function zc(n){return n.__lexicalUnmanaged===!0}function Ze(n,e){return function(t,r){return Object.prototype.hasOwnProperty.call(t,r)}(n,e)&&n[e]!==vt[e]}function gr(n){const e=Xo in n.prototype?n.prototype[Xo]():void 0,t=function(s){if(!(s===vt||s.prototype instanceof vt)){let l="<unknown>",a="<unknown>";try{l=s.getType()}catch{}try{fe.version&&(a=JSON.parse(fe.version))}catch{}N(290,s.name,l,a)}return s===ml||s===At||s===vt}(n),r=!t&&Ze(n,"getType")?n.getType():void 0;let o,i=r;if(e)if(r)o=e[r];else for(const[s,l]of Object.entries(e))i=s,o=l;if(!t&&i&&(Ze(n,"getType")||(n.getType=()=>i),Ze(n,"clone")||(n.clone=s=>(No(s),new n)),Ze(n,"importJSON")||(n.importJSON=o&&o.$importJSON||(s=>new n().updateFromJSON(s))),!Ze(n,"importDOM")&&o)){const{importDOM:s}=o;s&&(n.importDOM=()=>s)}return{ownNodeConfig:o,ownNodeType:i}}const _t=(n,e)=>{let t=n;for(;t!=null&&!Z(t);){if(e(t))return t;t=t.getParent()}return null},Kc={next:"previous",previous:"next"};class Lo{constructor(e){x(this,"origin");this.origin=e}[Symbol.iterator](){return pr({hasNext:pe,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return tt(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return tt(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){const r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(r===null?this.insert(e):r.replace(e,t)),this}splice(e,t,r="next"){const o=r===this.direction?t:Array.from(t).reverse();let i=this;const s=this.getParentAtCaret(),l=new Map;for(let a=i.getAdjacentCaret();a!==null&&l.size<e;a=a.getAdjacentCaret()){const c=a.origin.getWritable();l.set(c.getKey(),c)}for(const a of o){if(l.size>0){const c=i.getNodeAtCaret();if(c){if(l.delete(c.getKey()),l.delete(a.getKey()),!(c.is(a)||i.origin.is(a))){const u=a.getParent();u&&u.is(s)&&a.remove(),c.replace(a)}}else c===null&&N(263,Array.from(l).join(" "))}else i.insert(a);i=tt(a,this.direction)}for(const a of l.values())a.remove();return this}}class _n extends Lo{constructor(){super(...arguments);x(this,"type","child")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Nt(t,this.direction)}getParentCaret(t="root"){return tt(Ro(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=qe(this.direction);return tt(this.getNodeAtCaret(),t)||Nt(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof _n&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const Wc={root:Z,shadowRoot:Wt};function qe(n){return Kc[n]}function Ro(n,e="root"){return Wc[e](n)?null:n}class he extends Lo{constructor(){super(...arguments);x(this,"type","sibling")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:tt(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return C(this.origin)?Nt(this.origin,this.direction):null}getParentCaret(t="root"){return tt(Ro(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=qe(this.direction);return tt(this.getNodeAtCaret(),t)||Nt(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof he&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof he||t instanceof ge)&&this.direction===t.direction&&this.origin.is(t.origin)}}class ge extends Lo{constructor(t,r){super(t);x(this,"type","text");x(this,"offset");this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:_e(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return tt(Ro(this.getParentAtCaret(),t),this.direction)}getFlipped(){return _e(this.origin,qe(this.direction),this.offset)}isSamePointCaret(t){return t instanceof ge&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof he||t instanceof ge)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return tt(this.origin,this.direction)}}function Vt(n){return n instanceof ge}function pe(n){return n instanceof he}function wt(n){return n instanceof _n}const Bc={next:class extends ge{constructor(){super(...arguments);x(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends ge{constructor(){super(...arguments);x(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Jc={next:class extends he{constructor(){super(...arguments);x(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends he{constructor(){super(...arguments);x(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},jc={next:class extends _n{constructor(){super(...arguments);x(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends _n{constructor(){super(...arguments);x(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function tt(n,e){return n?new Jc[e](n):null}function _e(n,e,t){return n?new Bc[e](n,Ht(n,t)):null}function Ht(n,e,t="error"){const r=n.getTextContentSize();let o=e==="next"?r:e==="previous"?0:e;return(o<0||o>r)&&(t!=="clamp"&&Ss(284,String(e),String(r),n.getKey()),o=o<0?0:r),o}function Ki(n,e){return new Vc(n,e)}function Nt(n,e){return C(n)?new jc[e](n):null}function Uc(n){return n&&n.getChildCaret()||n}function mn(n){return n&&Uc(n.getAdjacentCaret())}class $o{constructor(e,t,r){x(this,"type","node-caret-range");x(this,"direction");x(this,"anchor");x(this,"focus");this.anchor=e,this.focus=t,this.direction=r}getLatest(){const e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new $o(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=o=>{const i=this[o].getLatest();return Vt(i)?function(s,l){const{direction:a,origin:c}=s,u=Ht(c,l==="focus"?qe(a):a);return Ki(s,u-s.offset)}(i,o):null},t=e("anchor"),r=e("focus");if(t&&r){const{caret:o}=t,{caret:i}=r;if(o.isSameNodeCaret(i))return[Ki(o,i.offset-o.offset),null]}return[t,r]}iterNodeCarets(e="root"){const t=Vt(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),o=Vt(r),i=s=>s.isSameNodeCaret(r)?null:mn(s)||s.getParentCaret(e);return pr({hasNext:s=>s!==null&&!(o&&r.isSameNodeCaret(s)),initial:t.isSameNodeCaret(r)?null:i(t),map:s=>s,step:i})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class Vc{constructor(e,t){x(this,"type","slice");x(this,"caret");x(this,"distance");this.caret=e,this.distance=t}getSliceIndices(){const{distance:e,caret:{offset:t}}=this,r=t+e;return r<t?[r,t]:[t,r]}getTextContent(){const[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:t}}=this,[r,o]=this.getSliceIndices(),i=e.getTextContent();return _e(e.setTextContent(i.slice(0,r)+i.slice(o)),t,r)}}function Io(n){return Zt(n,tt(V(),n.direction))}function Hc(n){return Zt(n,n)}function Zt(n,e){return n.direction!==e.direction&&N(265),new $o(n,e,n.direction)}function pr(n){const{initial:e,hasNext:t,step:r,map:o}=n;let i=e;return{[Symbol.iterator](){return this},next(){if(!t(i))return{done:!0,value:void 0};const s={done:!1,value:o(i)};return i=r(i),s}}}function Pl(n,e){const t=Kn(n.origin,e.origin);switch(t===null&&N(275,n.origin.getKey(),e.origin.getKey()),t.type){case"same":{const r=n.type==="text",o=e.type==="text";return r&&o?function(i,s){return Math.sign(i-s)}(n.offset,e.offset):n.type===e.type?0:r?-1:o?1:n.type==="child"?-1:1}case"ancestor":return n.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return Ll(t)}}function Ll(n){const{a:e,b:t}=n,r=e.__key,o=t.__key;let i=e,s=t;for(;i&&s;i=i.getNextSibling(),s=s.getNextSibling()){if(i.__key===o)return-1;if(s.__key===r)return 1}return i===null?1:-1}function Fn(n,e){return e.is(n)}function Wi(n){return C(n)?[n.getLatest(),null]:[n.getParent(),n.getLatest()]}function Kn(n,e){if(n.is(e))return{commonAncestor:n,type:"same"};const t=new Map;for(let[r,o]=Wi(n);r;o=r,r=r.getParent())t.set(r,o);for(let[r,o]=Wi(e);r;o=r,r=r.getParent()){const i=t.get(r);if(i!==void 0)return i===null?(Fn(n,r)||N(276),{commonAncestor:r,type:"ancestor"}):o===null?(Fn(e,r)||N(277),{commonAncestor:r,type:"descendant"}):((C(i)||Fn(n,i))&&(C(o)||Fn(e,o))&&r.is(i.getParent())&&r.is(o.getParent())||N(278),{a:i,b:o,commonAncestor:r,type:"branch"})}return null}function zt(n,e){const{type:t,key:r,offset:o}=n,i=Pc(n.key);return t==="text"?(A(i)||N(266,i.getType(),r),_e(i,e,o)):(C(i)||N(267,i.getType(),r),Gc(i,n.offset,e))}function yn(n,e){const{origin:t,direction:r}=e,o=r==="next";Vt(e)?n.set(t.getKey(),e.offset,"text"):pe(e)?A(t)?n.set(t.getKey(),Ht(t,r),"text"):n.set(t.getParentOrThrow().getKey(),t.getIndexWithinParent()+(o?1:0),"element"):(wt(e)&&C(t)||N(268),n.set(t.getKey(),o?0:t.getChildrenSize(),"element"))}function qc(n){const e=F(),t=O(e)?e:xo();return Wn(t,n),ut(t),t}function Wn(n,e){yn(n.anchor,e.anchor),yn(n.focus,e.focus)}function Bi(n){const{anchor:e,focus:t}=n,r=zt(e,"next"),o=zt(t,"next"),i=Pl(r,o)<=0?"next":"previous";return Zt(ze(r,i),ze(o,i))}function _r(n){const{direction:e,origin:t}=n,r=tt(t,qe(e)).getNodeAtCaret();return r?tt(r,e):Nt(t.getParentOrThrow(),e)}function Ji(n,e="root"){const t=[n];for(let r=wt(n)?n.getParentCaret(e):n.getSiblingCaret();r!==null;r=r.getParentCaret(e))t.push(_r(r));return t}function Pr(n){return!!n&&n.origin.isAttached()}function Yc(n,e="removeEmptySlices"){if(n.isCollapsed())return n;const t="root",r="next";let o=e;const i=$l(n,r),s=Ji(i.anchor,t),l=Ji(i.focus.getFlipped(),t),a=new Set,c=[];for(const h of i.iterNodeCarets(t))if(wt(h))a.add(h.origin.getKey());else if(pe(h)){const{origin:p}=h;C(p)&&!a.has(p.getKey())||c.push(p)}for(const h of c)h.remove();for(const h of i.getTextSlices()){if(!h)continue;const{origin:p}=h.caret,_=p.getTextContentSize(),y=_r(tt(p,r)),m=p.getMode();if(Math.abs(h.distance)===_&&o==="removeEmptySlices"||m==="token"&&h.distance!==0)y.remove();else if(h.distance!==0){o="removeEmptySlices";let S=h.removeTextSlice();const w=h.caret.origin;if(m==="segmented"){const E=S.origin,v=rt(E.getTextContent()).setStyle(E.getStyle()).setFormat(E.getFormat());y.replaceOrInsert(v),S=_e(v,r,S.offset)}w.is(s[0].origin)&&(s[0]=S),w.is(l[0].origin)&&(l[0]=S.getFlipped())}}let u,f;for(const h of s)if(Pr(h)){u=Mt(h);break}for(const h of l)if(Pr(h)){f=Mt(h);break}const d=function(h,p,_){if(!h||!p)return null;const y=h.getParentAtCaret(),m=p.getParentAtCaret();if(!y||!m)return null;const S=y.getParents().reverse();S.push(y);const w=m.getParents().reverse();w.push(m);const E=Math.min(S.length,w.length);let v;for(v=0;v<E&&S[v]===w[v];v++);const T=(M,P)=>{let W;for(let R=v;R<M.length;R++){const B=M[R];if(Wt(B))return;!W&&P(B)&&(W=B)}return W},k=T(S,mt),b=k&&T(w,M=>_.has(M.getKey())&&mt(M));return k&&b?[k,b]:null}(u,f,a);if(d){const[h,p]=d;Nt(h,"previous").splice(0,p.getChildren()),p.remove()}const g=[u,f,...s,...l].find(Pr);if(g)return Hc(ze(Mt(g),n.direction));N(269,JSON.stringify(s.map(h=>h.origin.__key)))}function Mt(n){const e=function(o){let i=o;for(;wt(i);){const s=mn(i);if(!wt(s))break;i=s}return i}(n.getLatest()),{direction:t}=e;if(A(e.origin))return Vt(e)?e:_e(e.origin,t,t);const r=e.getAdjacentCaret();return pe(r)&&A(r.origin)?_e(r.origin,t,qe(t)):e}function Rl(n){return Vt(n)&&n.offset!==Ht(n.origin,n.direction)}function ze(n,e){return n.direction===e?n:n.getFlipped()}function $l(n,e){return n.direction===e?n:Zt(ze(n.focus,e),ze(n.anchor,e))}function Gc(n,e,t){let r=Nt(n,"next");for(let o=0;o<e;o++){const i=r.getAdjacentCaret();if(i===null)break;r=i}return ze(r,t)}function ji(n,e="root"){let t=0,r=n,o=mn(r);for(;o===null;){if(t--,o=r.getParentCaret(e),!o)return null;r=o,o=mn(r)}return o&&[o,t]}function Wf(n){return n}function Bf(...n){return n}function Jf(n){return n}function Xc(n,e){if(!e||n===e)return n;for(const t in e)if(n[t]!==e[t])return{...n,...e};return n}const Il=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Zc=Il?$.useLayoutEffect:$.useEffect,Pn={tag:Fe};function jf({initialConfig:n,children:e}){const t=$.useMemo(()=>{const{theme:r,namespace:o,nodes:i,onError:s,editorState:l,html:a}=n,c=pa(null,r),u=Cl({editable:n.editable,html:a,namespace:o,nodes:i,onError:f=>s(f,u),theme:r});return function(f,d){if(d!==null){if(d===void 0)f.update(()=>{const g=V();if(g.isEmpty()){const h=Q();g.append(h);const p=Il?document.activeElement:null;(F()!==null||p!==null&&p===f.getRootElement())&&h.select()}},Pn);else if(d!==null)switch(typeof d){case"string":{const g=f.parseEditorState(d);f.setEditorState(g,Pn);break}case"object":f.setEditorState(d,Pn);break;case"function":f.update(()=>{V().isEmpty()&&d(f)},Pn)}}}(u,l),[u,c]},[]);return Zc(()=>{const r=n.editable,[o]=t;o.setEditable(r===void 0||r)},[]),lt.jsx(xs.Provider,{value:t,children:e})}const Qc=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?$.useLayoutEffect:$.useEffect;function Uf({ignoreHistoryMergeTagChange:n=!0,ignoreSelectionChange:e=!1,onChange:t}){const[r]=me();return Qc(()=>{if(t)return r.registerUpdateListener(({editorState:o,dirtyElements:i,dirtyLeaves:s,prevEditorState:l,tags:a})=>{e&&i.size===0&&s.size===0||n&&a.has(Fe)||l.isEmpty()||t(o,r,a)})},[r,n,e,t]),null}const tu=new Map;function Ui(n){let e=n;for(;e!=null;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function Vi(n){const e=n.parentNode;if(e==null)throw new Error("Should never happen");return[e,Array.from(e.childNodes).indexOf(n)]}function Vf(n,e,t,r,o){const i=e.getKey(),s=r.getKey(),l=document.createRange();let a=n.getElementByKey(i),c=n.getElementByKey(s),u=t,f=o;if(A(e)&&(a=Ui(a)),A(r)&&(c=Ui(c)),e===void 0||r===void 0||a===null||c===null)return null;a.nodeName==="BR"&&([a,u]=Vi(a)),c.nodeName==="BR"&&([c,f]=Vi(c));const d=a.firstChild;a===c&&d!=null&&d.nodeName==="BR"&&u===0&&f===0&&(f=1);try{l.setStart(a,u),l.setEnd(c,f)}catch{return null}return!l.collapsed||u===f&&i===s||(l.setStart(c,f),l.setEnd(a,u)),l}function Hf(n,e){const t=n.getRootElement();if(t===null)return[];const r=t.getBoundingClientRect(),o=getComputedStyle(t),i=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),s=Array.from(e.getClientRects());let l,a=s.length;s.sort((c,u)=>{const f=c.top-u.top;return Math.abs(f)<=3?c.left-u.left:f});for(let c=0;c<a;c++){const u=s[c],f=l&&l.top<=u.top&&l.top+l.height>u.top&&l.left+l.width>u.left,d=u.width+i===r.width;f||d?(s.splice(c--,1),a--):l=u}return s}function eu(n){const e={};if(!n)return e;const t=n.split(";");for(const r of t)if(r!==""){const[o,i]=r.split(/:([^]+)/);o&&i&&(e[o.trim()]=i.trim())}return e}function zl(n){const e=hr().getElementByKey(n.getKey());if(e===null)return null;const t=e.ownerDocument.defaultView;return t===null?null:t.getComputedStyle(e)}function Kl(n){return zl(Z(n)?n:n.getParentOrThrow())}function Hi(n){const e=Kl(n);return e!==null&&e.direction==="rtl"}function Wl(n,e,t="self"){const r=n.getStartEndPoints();if(e.isSelected(n)&&!Rt(e)&&r!==null){const[o,i]=r,s=n.isBackward(),l=o.getNode(),a=i.getNode(),c=e.is(l),u=e.is(a);if(c||u){const[f,d]=ro(n),g=l.is(a),h=e.is(s?a:l),p=e.is(s?l:a);let _,y=0;g?(y=f>d?d:f,_=f>d?f:d):h?(y=s?d:f,_=void 0):p&&(y=0,_=s?f:d);const m=e.__text.slice(y,_);m!==e.__text&&(t==="clone"&&(e=$c(e)),e.__text=m)}}return e}function nu(n){const e=n.getStyle(),t=eu(e);tu.set(e,t)}function ru(n,e){const t=n.getFormatType(),r=n.getIndent();t!==e.getFormatType()&&e.setFormat(t),r!==e.getIndent()&&e.setIndent(r)}function qf(n,e,t=ru){if(n===null)return;const r=n.getStartEndPoints(),o=new Map;let i=null;if(r){const[s,l]=r;i=xo(),i.anchor.set(s.key,s.offset,s.type),i.focus.set(l.key,l.offset,l.type);const a=_t(s.getNode(),mt),c=_t(l.getNode(),mt);C(a)&&o.set(a.getKey(),a),C(c)&&o.set(c.getKey(),c)}for(const s of n.getNodes())if(C(s)&&mt(s))o.set(s.getKey(),s);else if(r===null){const l=_t(s,mt);C(l)&&o.set(l.getKey(),l)}for(const[s,l]of o){const a=e();t(l,a),l.replace(a,!0),i&&(s===i.anchor.key&&i.anchor.set(a.getKey(),i.anchor.offset,i.anchor.type),s===i.focus.key&&i.focus.set(a.getKey(),i.focus.offset,i.focus.type))}i&&n.is(F())&&ut(i)}function Bl(n){const e=Jl(n);return e!==null&&e.writingMode==="vertical-rl"}function Jl(n){const e=n.anchor.getNode();return C(e)?zl(e):Kl(e)}function qi(n,e){let t=Bl(n)?!e:e;jl(n)&&(t=!t);const r=zt(n.focus,t?"previous":"next");if(Rl(r))return!1;for(const o of Io(r)){if(wt(o))return!o.origin.isInline();if(!C(o.origin)){if(z(o.origin))return!0;break}}return!1}function ou(n,e,t,r){n.modify(e?"extend":"move",t,r)}function jl(n){const e=Jl(n);return e!==null&&e.direction==="rtl"}function Yi(n,e,t){const r=jl(n);let o;o=Bl(n)||r?!t:t,ou(n,e,o,"character")}function iu(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const wn=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,su=wn&&"documentMode"in document?document.documentMode:null,lu=wn&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),au=wn&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!wn||!("InputEvent"in window)||su)&&"getTargetRanges"in new window.InputEvent("input");function Ul(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}function Ke(...n){return()=>{for(let e=n.length-1;e>=0;e--)n[e]();n.length=0}}const cu=wn,Yf=lu,uu=au;function Ot(n,...e){const t=Ul(...e);t.length>0&&n.classList.add(...t)}function Bn(n,...e){const t=Ul(...e);t.length>0&&n.classList.remove(...t)}function Gf(n,e){return Array.from(fu(n))}function fu(n,e){return du("next",n)}function du(n,e,t){const r=V(),o=e||r,i=C(o)?Nt(o,n):tt(o,n),s=hu(o),l=function(c,u){const f=ji(tt(c,u));return f&&f[0]}(o,n);let a=s;return pr({hasNext:c=>c!==null,initial:i,map:c=>({depth:a,node:c.origin}),step:c=>{if(c.isSameNodeCaret(l))return null;wt(c)&&a++;const u=ji(c);return!u||u[0].isSameNodeCaret(l)?null:(a+=u[1],u[0])}})}function hu(n){let e=-1;for(let t=n;t!==null;t=t.getParent())e++;return e}function gu(n){const e=_t(n,t=>C(t)&&!t.isInline());return C(e)||iu(4,n.__key),e}function Xf(n,e,t,r){const o=i=>i instanceof e;return n.registerNodeTransform(e,i=>{const s=(l=>{const a=l.getChildren();for(let f=0;f<a.length;f++){const d=a[f];if(o(d))return null}let c=l,u=l;for(;c!==null;)if(u=c,c=c.getParent(),o(c))return{child:u,parent:c};return null})(i);if(s!==null){const{child:l,parent:a}=s;if(l.is(i)){r(a,i);const c=l.getNextSiblings(),u=c.length;if(a.insertAfter(l),u!==0){const f=t(a);l.insertAfter(f);for(let d=0;d<u;d++)f.append(c[d])}a.canBeEmpty()||a.getChildrenSize()!==0||a.remove()}}})}function ne(n,e){return n!==null&&Object.getPrototypeOf(n).constructor.name===e.name}let Lr=!(uu||!cu)&&void 0;function Zf(n){let e=1;if(function(){if(Lr===void 0){const t=document.createElement("div");t.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(t);const r=t.getBoundingClientRect();t.style.setProperty("zoom","2"),Lr=t.getBoundingClientRect().width===r.width,document.body.removeChild(t)}return Lr}())for(;n;)e*=Number(window.getComputedStyle(n).getPropertyValue("zoom")),n=n.parentElement;return e}function Vl(n,e){const t=[],r=Array.from(n).reverse();for(let o=r.pop();o!==void 0;o=r.pop())if(e(o))t.push(o);else if(C(o))for(const i of pu(o))r.push(i);return t}function pu(n){return _u(Nt(n,"previous"))}function _u(n){return pr({hasNext:pe,initial:n.getAdjacentCaret(),map:e=>e.origin.getLatest(),step:e=>e.getAdjacentCaret()})}function Qf(n){_r(tt(n,"next")).splice(1,n.getChildren())}function mu(n,e){const t=bl(e)?e.body.childNodes:e.childNodes;let r=[];const o=[];for(const i of t)if(!ql.has(i.nodeName)){const s=Yl(i,n,o,!1);s!==null&&(r=r.concat(s))}return function(i){for(const s of i)s.getNextSibling()instanceof wo&&s.insertAfter(ue());for(const s of i){const l=s.getChildren();for(const a of l)s.insertBefore(a);s.remove()}}(o),r}function yu(n,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const t=document.createElement("div"),r=V().getChildren();for(let o=0;o<r.length;o++)Hl(n,r[o],t,e);return t.innerHTML}function Hl(n,e,t,r=null){let o=r===null||e.isSelected(r);const i=C(e)&&e.excludeFromCopy("html");let s=e;r!==null&&A(e)&&(s=Wl(r,e,"clone"));const l=C(s)?s.getChildren():[],a=Eo(n,s.getType());let c;c=a&&a.exportDOM!==void 0?a.exportDOM(n,s):s.exportDOM(n);const{element:u,after:f}=c;if(!u)return!1;const d=document.createDocumentFragment();for(let g=0;g<l.length;g++){const h=l[g],p=Hl(n,h,d,r);!o&&C(e)&&p&&e.extractWithChild(h,r,"html")&&(o=!0)}if(o&&!i){if((q(u)||co(u))&&u.append(d),t.append(u),f){const g=f.call(s,u);g&&(co(u)?u.replaceChildren(g):u.replaceWith(g))}}else t.append(d);return o}const ql=new Set(["STYLE","SCRIPT"]);function Yl(n,e,t,r,o=new Map,i){let s=[];if(ql.has(n.nodeName))return s;let l=null;const a=function(h,p){const{nodeName:_}=h,y=p._htmlConversions.get(_.toLowerCase());let m=null;if(y!==void 0)for(const S of y){const w=S(h);w!==null&&(m===null||(m.priority||0)<=(w.priority||0))&&(m=w)}return m!==null?m.conversion:null}(n,e),c=a?a(n):null;let u=null;if(c!==null){u=c.after;const h=c.node;if(l=Array.isArray(h)?h[h.length-1]:h,l!==null){for(const[,p]of o)if(l=p(l,i),!l)break;l&&s.push(...Array.isArray(h)?h:[l])}c.forChild!=null&&o.set(n.nodeName,c.forChild)}const f=n.childNodes;let d=[];const g=(l==null||!Wt(l))&&(l!=null&&oo(l)||r);for(let h=0;h<f.length;h++)d.push(...Yl(f[h],e,t,g,new Map(o),l));return u!=null&&(d=u(d)),rr(n)&&(d=xu(n,d,g?()=>{const h=new wo;return t.push(h),h}:Q)),l==null?d.length>0?s=s.concat(d):rr(n)&&function(h){return h.nextSibling==null||h.previousSibling==null?!1:uo(h.nextSibling)&&uo(h.previousSibling)}(n)&&(s=s.concat(ue())):C(l)&&l.append(...d),s}function xu(n,e,t){const r=n.style.textAlign,o=[];let i=[];for(let s=0;s<e.length;s++){const l=e[s];if(oo(l))r&&!l.getFormat()&&l.setFormat(r),o.push(l);else if(i.push(l),s===e.length-1||s<e.length-1&&oo(e[s+1])){const a=t();a.setFormat(r),a.append(...i),o.push(a),i=[]}}return o}function or(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Su(n,e=F()){return e==null&&or(166),O(e)&&e.isCollapsed()||e.getNodes().length===0?"":yu(n,e)}function Cu(n,e=F()){return e==null&&or(166),O(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(vu(n,e))}function td(n,e){const t=n.getData("text/plain")||n.getData("text/uri-list");t!=null&&e.insertRawText(t)}function Gi(n,e,t){const r=n.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===t._config.namespace&&Array.isArray(l.nodes))return Xi(t,wu(l.nodes),e)}catch(l){console.error(l)}const o=n.getData("text/html"),i=n.getData("text/plain");if(o&&i!==o)try{const l=new DOMParser().parseFromString(function(a){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:c=>c}).createHTML(a):a}(o),"text/html");return Xi(t,mu(t,l),e)}catch(l){console.error(l)}const s=i||n.getData("text/uri-list");if(s!=null)if(O(e)){const l=s.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let a=0;a<l.length;a++){const c=F();if(O(c)){const u=l[a];u===`
`||u===`\r
`?c.insertParagraph():u==="	"?c.insertNodes([xn()]):c.insertText(u)}}}else e.insertRawText(s)}function Xi(n,e,t){n.dispatchCommand(ja,{nodes:e,selection:t})||(t.insertNodes(e),function(r){if(O(r)&&r.isCollapsed()){const o=r.anchor;let i=null;const s=zt(o,"previous");if(s)if(Vt(s))i=s.origin;else{const l=Zt(s,Nt(V(),"next").getFlipped());for(const a of l){if(A(a.origin)){i=a.origin;break}if(C(a.origin)&&!a.origin.isInline())break}}if(i&&A(i)){const l=i.getFormat(),a=i.getStyle();r.format===l&&r.style===a||(r.format=l,r.style=a,r.dirty=!0)}}}(t))}function Gl(n,e,t,r=[]){let o=e===null||t.isSelected(e);const i=C(t)&&t.excludeFromCopy("html");let s=t;e!==null&&A(s)&&(s=Wl(e,s,"clone"));const l=C(s)?s.getChildren():[],a=function(c){const u=c.exportJSON(),f=c.constructor;if(u.type!==f.getType()&&or(58,f.name),C(c)){const d=u.children;Array.isArray(d)||or(59,f.name)}return u}(s);A(s)&&s.getTextContentSize()===0&&(o=!1);for(let c=0;c<l.length;c++){const u=l[c],f=Gl(n,e,u,a.children);!o&&C(t)&&f&&t.extractWithChild(u,e,"clone")&&(o=!0)}if(o&&!i)r.push(a);else if(Array.isArray(a.children))for(let c=0;c<a.children.length;c++){const u=a.children[c];r.push(u)}return o}function vu(n,e){const t=[],r=V().getChildren();for(let o=0;o<r.length;o++)Gl(n,e,r[o],t);return{namespace:n._config.namespace,nodes:t}}function wu(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t],o=Sc(r);A(o)&&nu(o),e.push(o)}return e}let ve=null;async function Zi(n,e,t){if(ve!==null)return!1;if(e!==null)return new Promise((c,u)=>{n.update(()=>{c(Qi(n,e,t))})});const r=n.getRootElement(),o=n._window||window,i=o.document,s=bt(o);if(r===null||s===null)return!1;const l=i.createElement("span");l.style.cssText="position: fixed; top: -1000px;",l.append(i.createTextNode("#")),r.append(l);const a=new Range;return a.setStart(l,0),a.setEnd(l,1),s.removeAllRanges(),s.addRange(a),new Promise((c,u)=>{const f=n.registerCommand(lr,d=>(ne(d,ClipboardEvent)&&(f(),ve!==null&&(o.clearTimeout(ve),ve=null),c(Qi(n,d,t))),!0),wc);ve=o.setTimeout(()=>{f(),ve=null,c(!1)},50),i.execCommand("copy"),l.remove()})}function Qi(n,e,t){if(t===void 0){const o=bt(n._window),i=F();if(!i||i.isCollapsed()||!o)return!1;const s=o.anchorNode,l=o.focusNode;if(s!==null&&l!==null&&!Cn(n,s,l))return!1;t=bu(i)}e.preventDefault();const r=e.clipboardData;return r!==null&&(Nu(r,t),!0)}const Xl=[["text/html",Su],["application/x-lexical-editor",Cu]];function bu(n=F()){const e={"text/plain":n?n.getTextContent():""};if(n){const t=hr();for(const[r,o]of Xl){const i=o(t,n);i!==null&&(e[r]=i)}}return e}function Nu(n,e){for(const[t]of Xl)e[t]===void 0&&n.setData(t,"");for(const t in e){const r=e[t];r!==void 0&&n.setData(t,r)}}const Eu=Symbol.for("preact-signals");function mr(){if(qt>1)return void qt--;let n,e=!1;for(;an!==void 0;){let t=an;for(an=void 0,fo++;t!==void 0;){const r=t.o;if(t.o=void 0,t.f&=-3,!(8&t.f)&&Zl(t))try{t.c()}catch(o){e||(n=o,e=!0)}t=r}}if(fo=0,qt--,e)throw n}function ed(n){if(qt>0)return n();qt++;try{return n()}finally{mr()}}let K,an;function ts(n){const e=K;K=void 0;try{return n()}finally{K=e}}let qt=0,fo=0,Jn=0;function es(n){if(K===void 0)return;let e=n.n;return e===void 0||e.t!==K?(e={i:0,S:n,p:K.s,n:void 0,t:K,e:void 0,x:void 0,r:e},K.s!==void 0&&(K.s.n=e),K.s=e,n.n=e,32&K.f&&n.S(e),e):e.i===-1?(e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=K.s,e.n=void 0,K.s.n=e,K.s=e),e):void 0}function ct(n,e){this.v=n,this.i=0,this.n=void 0,this.t=void 0,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}function Tu(n,e){return new ct(n,e)}function Zl(n){for(let e=n.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function ns(n){for(let e=n.s;e!==void 0;e=e.n){const t=e.S.n;if(t!==void 0&&(e.r=t),e.S.n=e,e.i=-1,e.n===void 0){n.s=e;break}}}function Ql(n){let e,t=n.s;for(;t!==void 0;){const r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):e=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}n.s=e}function we(n,e){ct.call(this,void 0),this.x=n,this.s=void 0,this.g=Jn-1,this.f=4,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}function ta(n){const e=n.u;if(n.u=void 0,typeof e=="function"){qt++;const t=K;K=void 0;try{e()}catch(r){throw n.f&=-2,n.f|=8,zo(n),r}finally{K=t,mr()}}}function zo(n){for(let e=n.s;e!==void 0;e=e.n)e.S.U(e);n.x=void 0,n.s=void 0,ta(n)}function ku(n){if(K!==this)throw new Error("Out-of-order effect");Ql(this),K=n,this.f&=-2,8&this.f&&zo(this),mr()}function ke(n,e){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e==null?void 0:e.name}function Ou(n,e){const t=new ke(n,e);try{t.c()}catch(o){throw t.d(),o}const r=t.d.bind(t);return r[Symbol.dispose]=r,r}function nd(n,e={}){const t={};for(const r in n){const o=e[r],i=Tu(o===void 0?n[r]:o);t[r]=i}return t}ct.prototype.brand=Eu,ct.prototype.h=function(){return!0},ct.prototype.S=function(n){const e=this.t;e!==n&&n.e===void 0&&(n.x=e,this.t=n,e!==void 0?e.e=n:ts(()=>{var t;(t=this.W)==null||t.call(this)}))},ct.prototype.U=function(n){if(this.t!==void 0){const e=n.e,t=n.x;e!==void 0&&(e.x=t,n.e=void 0),t!==void 0&&(t.e=e,n.x=void 0),n===this.t&&(this.t=t,t===void 0&&ts(()=>{var r;(r=this.Z)==null||r.call(this)}))}},ct.prototype.subscribe=function(n){return Ou(()=>{const e=this.value,t=K;K=void 0;try{n(e)}finally{K=t}},{name:"sub"})},ct.prototype.valueOf=function(){return this.value},ct.prototype.toString=function(){return this.value+""},ct.prototype.toJSON=function(){return this.value},ct.prototype.peek=function(){const n=K;K=void 0;try{return this.value}finally{K=n}},Object.defineProperty(ct.prototype,"value",{get(){const n=es(this);return n!==void 0&&(n.i=this.i),this.v},set(n){if(n!==this.v){if(fo>100)throw new Error("Cycle detected");this.v=n,this.i++,Jn++,qt++;try{for(let e=this.t;e!==void 0;e=e.x)e.t.N()}finally{mr()}}}}),we.prototype=new ct,we.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Jn))return!0;if(this.g=Jn,this.f|=1,this.i>0&&!Zl(this))return this.f&=-2,!0;const n=K;try{ns(this),K=this;const e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return K=n,Ql(this),this.f&=-2,!0},we.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(let e=this.s;e!==void 0;e=e.n)e.S.S(e)}ct.prototype.S.call(this,n)},we.prototype.U=function(n){if(this.t!==void 0&&(ct.prototype.U.call(this,n),this.t===void 0)){this.f&=-33;for(let e=this.s;e!==void 0;e=e.n)e.S.U(e)}},we.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let n=this.t;n!==void 0;n=n.x)n.t.N()}},Object.defineProperty(we.prototype,"value",{get(){if(1&this.f)throw new Error("Cycle detected");const n=es(this);if(this.h(),n!==void 0&&(n.i=this.i),16&this.f)throw this.v;return this.v}}),ke.prototype.c=function(){const n=this.S();try{if(8&this.f||this.x===void 0)return;const e=this.x();typeof e=="function"&&(this.u=e)}finally{n()}},ke.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,ta(this),ns(this),qt++;const n=K;return K=this,ku.bind(this,n)},ke.prototype.N=function(){2&this.f||(this.f|=2,this.o=an,an=this)},ke.prototype.d=function(){this.f|=8,1&this.f||zo(this)},ke.prototype.dispose=function(){this.d()};function Mu(){const n=V(),e=F(),t=Q();n.clear(),n.append(t),e!==null&&t.select(),O(e)&&(e.format=0)}function Au(n,e=Mu){return n.registerCommand(Za,t=>(n.update(e),!0),I)}function Du(n){return(typeof n.nodes=="function"?n.nodes():n.nodes)||[]}function j(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ea(n,e){if(n&&e&&!Array.isArray(e)&&typeof n=="object"&&typeof e=="object"){const t=n,r=e;for(const o in r)t[o]=ea(t[o],r[o]);return n}return e}const Ko=0,ho=1,na=2,Rr=3,Ln=4,be=5,$r=6,Qe=7;function Ir(n){return n.id===Ko}function ra(n){return n.id===na}function Fu(n){return function(e){return e.id===ho}(n)||j(305,String(n.id),String(ho)),Object.assign(n,{id:na})}const Pu=new Set;class Lu{constructor(e,t){x(this,"builder");x(this,"configs");x(this,"_dependency");x(this,"_peerNameSet");x(this,"extension");x(this,"state");x(this,"_signal");this.builder=e,this.extension=t,this.configs=new Set,this.state={id:Ko}}mergeConfigs(){let e=this.extension.config||{};const t=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):Xc;for(const r of this.configs)e=t(e,r);return e}init(e){const t=this.state;ra(t)||j(306,String(t.id));const r={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},o={...r,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},i=function(l,a,c){return Object.assign(l,{config:a,id:Rr,registerState:c})}(t,this.mergeConfigs(),r);let s;this.state=i,this.extension.init&&(s=this.extension.init(e,i.config,r)),this.state=function(l,a,c){return Object.assign(l,{id:Ln,initResult:a,registerState:c})}(i,s,o)}build(e){const t=this.state;let r;t.id!==Ln&&j(307,String(t.id),String(be)),this.extension.build&&(r=this.extension.build(e,t.config,t.registerState));const o={...t.registerState,getOutput:()=>r,getSignal:this.getSignal.bind(this)};this.state=function(i,s,l){return Object.assign(i,{id:be,output:s,registerState:l})}(t,r,o)}register(e,t){this._signal=t;const r=this.state;r.id!==be&&j(308,String(r.id),String(be));const o=this.extension.register&&this.extension.register(e,r.config,r.registerState);return this.state=function(i){return Object.assign(i,{id:$r})}(r),()=>{const i=this.state;i.id!==Qe&&j(309,String(r.id),String(Qe)),this.state=function(s){return Object.assign(s,{id:be})}(i),o&&o()}}afterRegistration(e){const t=this.state;let r;return t.id!==$r&&j(310,String(t.id),String($r)),this.extension.afterRegistration&&(r=this.extension.afterRegistration(e,t.config,t.registerState)),this.state=function(o){return Object.assign(o,{id:Qe})}(t),r}getSignal(){return this._signal===void 0&&j(311),this._signal}getInitResult(){this.extension.init===void 0&&j(312,this.extension.name);const e=this.state;return function(t){return t.id>=Ln}(e)||j(313,String(e.id),String(Ln)),e.initResult}getInitPeer(e){const t=this.builder.extensionNameMap.get(e);return t?t.getExtensionInitDependency():void 0}getExtensionInitDependency(){const e=this.state;return function(t){return t.id>=Rr}(e)||j(314,String(e.id),String(Rr)),{config:e.config}}getPeer(e){const t=this.builder.extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}getInitDependency(e){const t=this.builder.getExtensionRep(e);return t===void 0&&j(315,this.extension.name,e.name),t.getExtensionInitDependency()}getDependency(e){const t=this.builder.getExtensionRep(e);return t===void 0&&j(315,this.extension.name,e.name),t.getExtensionDependency()}getState(){const e=this.state;return function(t){return t.id>=Qe}(e)||j(316,String(e.id),String(Qe)),e}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||Pu}getPeerNameSet(){let e=this._peerNameSet;return e||(e=new Set((this.extension.peerDependencies||[]).map(([t])=>t)),this._peerNameSet=e),e}getExtensionDependency(){if(!this._dependency){const e=this.state;(function(t){return t.id>=be})(e)||j(317,this.extension.name),this._dependency={config:e.config,init:e.initResult,output:e.output}}return this._dependency}}const rs={tag:Fe};function Ru(){const n=V();n.isEmpty()&&n.append(Q())}const $u={config:{setOptions:rs,updateOptions:rs},init:({$initialEditorState:n=Ru})=>({$initialEditorState:n,initialized:!1}),afterRegistration(n,{updateOptions:e,setOptions:t},r){const o=r.getInitResult();if(!o.initialized){o.initialized=!0;const{$initialEditorState:i}=o;if(Cc(i))n.setEditorState(i,t);else if(typeof i=="function")n.update(()=>{i(n)},e);else if(i&&(typeof i=="string"||typeof i=="object")){const s=n.parseEditorState(i);n.setEditorState(s,t)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[Ue,ye,We,Be,Ve]},os=Symbol.for("@lexical/extension/LexicalBuilder");function is(){}function Iu(n){throw n}function Rn(n){return Array.isArray(n)?n:[n]}const zr="0.38.2+prod.esm";class Le{constructor(e){x(this,"roots");x(this,"extensionNameMap");x(this,"outgoingConfigEdges");x(this,"incomingEdges");x(this,"conflicts");x(this,"_sortedExtensionReps");x(this,"PACKAGE_VERSION");this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=zr,this.roots=e;for(const t of e)this.addExtension(t)}static fromExtensions(e){const t=[Rn($u)];for(const r of e)t.push(Rn(r));return new Le(t)}static maybeFromEditor(e){const t=e[os];return t&&(t.PACKAGE_VERSION!==zr&&j(292,t.PACKAGE_VERSION,zr),t instanceof Le||j(293)),t}static fromEditor(e){const t=Le.maybeFromEditor(e);return t===void 0&&j(294),t}constructEditor(){const{$initialEditorState:e,onError:t,...r}=this.buildCreateEditorArgs(),o=Object.assign(Cl({...r,...t?{onError:i=>{t(i,o)}}:{}}),{[os]:this});for(const i of this.sortedExtensionReps())i.build(o);return o}buildEditor(){let e=is;function t(){try{e()}finally{e=is}}const r=Object.assign(this.constructEditor(),{dispose:t,[Symbol.dispose]:t});return e=Ke(this.registerEditor(r),()=>r.setRootElement(null)),r}hasExtensionByName(e){return this.extensionNameMap.has(e)}getExtensionRep(e){const t=this.extensionNameMap.get(e.name);if(t)return t.extension!==e&&j(295,e.name),t}addEdge(e,t,r){const o=this.outgoingConfigEdges.get(e);o?o.set(t,r):this.outgoingConfigEdges.set(e,new Map([[t,r]]));const i=this.incomingEdges.get(t);i?i.add(e):this.incomingEdges.set(t,new Set([e]))}addExtension(e){this._sortedExtensionReps!==void 0&&j(296);const t=Rn(e),[r]=t;typeof r.name!="string"&&j(297,typeof r.name);let o=this.extensionNameMap.get(r.name);if(o!==void 0&&o.extension!==r&&j(298,r.name),!o){o=new Lu(this,r),this.extensionNameMap.set(r.name,o);const i=this.conflicts.get(r.name);typeof i=="string"&&j(299,r.name,i);for(const s of r.conflictsWith||[])this.extensionNameMap.has(s)&&j(299,r.name,s),this.conflicts.set(s,r.name);for(const s of r.dependencies||[]){const l=Rn(s);this.addEdge(r.name,l[0].name,l.slice(1)),this.addExtension(l)}for(const[s,l]of r.peerDependencies||[])this.addEdge(r.name,s,l?[l]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;const e=[],t=(r,o)=>{let i=r.state;if(ra(i))return;const s=r.extension.name;var l;Ir(i)||j(300,s,o||"[unknown]"),Ir(l=i)||j(304,String(l.id),String(Ko)),i=Object.assign(l,{id:ho}),r.state=i;const a=this.outgoingConfigEdges.get(s);if(a)for(const c of a.keys()){const u=this.extensionNameMap.get(c);u&&t(u,s)}i=Fu(i),r.state=i,e.push(r)};for(const r of this.extensionNameMap.values())Ir(r.state)&&t(r);for(const r of e)for(const[o,i]of this.outgoingConfigEdges.get(r.extension.name)||[])if(i.length>0){const s=this.extensionNameMap.get(o);if(s)for(const l of i)s.configs.add(l)}for(const[r,...o]of this.roots)if(o.length>0){const i=this.extensionNameMap.get(r.name);i===void 0&&j(301,r.name);for(const s of o)i.configs.add(s)}return this._sortedExtensionReps=e,this._sortedExtensionReps}registerEditor(e){const t=this.sortedExtensionReps(),r=new AbortController,o=[()=>r.abort()],i=r.signal;for(const s of t){const l=s.register(e,i);l&&o.push(l)}for(const s of t){const l=s.afterRegistration(e);l&&o.push(l)}return Ke(...o)}buildCreateEditorArgs(){const e={},t=new Set,r=new Map,o=new Map,i={},s={},l=this.sortedExtensionReps();for(const u of l){const{extension:f}=u;if(f.onError!==void 0&&(e.onError=f.onError),f.disableEvents!==void 0&&(e.disableEvents=f.disableEvents),f.parentEditor!==void 0&&(e.parentEditor=f.parentEditor),f.editable!==void 0&&(e.editable=f.editable),f.namespace!==void 0&&(e.namespace=f.namespace),f.$initialEditorState!==void 0&&(e.$initialEditorState=f.$initialEditorState),f.nodes)for(const d of Du(f)){if(typeof d!="function"){const g=r.get(d.replace);g&&j(302,f.name,d.replace.name,g.extension.name),r.set(d.replace,u)}t.add(d)}if(f.html){if(f.html.export)for(const[d,g]of f.html.export.entries())o.set(d,g);f.html.import&&Object.assign(i,f.html.import)}f.theme&&ea(s,f.theme)}Object.keys(s).length>0&&(e.theme=s),t.size&&(e.nodes=[...t]);const a=Object.keys(i).length>0,c=o.size>0;(a||c)&&(e.html={},a&&(e.html.import=i),c&&(e.html.export=o));for(const u of l)u.init(e);return e.onError||(e.onError=Iu),e}}function rd(n,e){const t=Le.fromEditor(n).extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}function zu(n){const e=window.location.origin,t=r=>{if(r.origin!==e)return;const o=n.getRootElement();if(document.activeElement!==o)return;const i=r.data;if(typeof i=="string"){let s;try{s=JSON.parse(i)}catch{return}if(s&&s.protocol==="nuanria_messaging"&&s.type==="request"){const l=s.payload;if(l&&l.functionId==="makeChanges"){const a=l.args;if(a){const[c,u,f,d,g]=a;n.update(()=>{const h=F();if(O(h)){const p=h.anchor;let _=p.getNode(),y=0,m=0;if(A(_)&&c>=0&&u>=0&&(y=c,m=c+u,h.setTextNodeRange(_,y,_,m)),y===m&&f===""||(h.insertRawText(f),_=p.getNode()),A(_)){y=d,m=d+g;const S=_.getTextContentSize();y=y>S?S:y,m=m>S?S:m,h.setTextNodeRange(_,y,_,m)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}function ss(n,e){if(document.caretRangeFromPoint!==void 0){const t=document.caretRangeFromPoint(n,e);return t===null?null:{node:t.startContainer,offset:t.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const t=document.caretPositionFromPoint(n,e);return t===null?null:{node:t.offsetNode,offset:t.offset}}return null}const Se=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ku=Se&&"documentMode"in document?document.documentMode:null,Wu=Se&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Bu=!(!Se||!("InputEvent"in window)||Ku)&&"getTargetRanges"in new window.InputEvent("input"),Ju=Se&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ls=Se&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ju=Se&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Uu=Se&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&Wu&&!ju,as=L("DRAG_DROP_PASTE_FILE");class Wo extends At{static getType(){return"quote"}static clone(e){return new Wo(e.__key)}createDOM(e){const t=document.createElement("blockquote");return Ot(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:Vu,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(q(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();r&&(t.style.textAlign=r);const o=this.getDirection();o&&(t.dir=o)}return{element:t}}static importJSON(e){return oa().updateFromJSON(e)}insertNewAfter(e,t){const r=Q(),o=this.getDirection();return r.setDirection(o),this.insertAfter(r,t),r}collapseAtStart(){const e=Q();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function oa(){return Bt(new Wo)}class Bo extends At{constructor(t,r){super(r);x(this,"__tag");this.__tag=t}static getType(){return"heading"}static clone(t){return new Bo(t.__tag,t.__key)}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,o=document.createElement(r),i=t.theme.heading;if(i!==void 0){const s=i[r];Ot(o,s)}return o}updateDOM(t,r,o){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:Ne,priority:0}),h2:t=>({conversion:Ne,priority:0}),h3:t=>({conversion:Ne,priority:0}),h4:t=>({conversion:Ne,priority:0}),h5:t=>({conversion:Ne,priority:0}),h6:t=>({conversion:Ne,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&cs(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>cs(t)?{conversion:r=>({node:nn("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(q(r)){this.isEmpty()&&r.append(document.createElement("br"));const o=this.getFormatType();o&&(r.style.textAlign=o);const i=this.getDirection();i&&(r.dir=i)}return{element:r}}static importJSON(t){return nn(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const o=t?t.anchor.offset:0,i=this.getLastDescendant(),s=!i||t&&t.anchor.key===i.getKey()&&o===i.getTextContentSize()||!t?Q():nn(this.getTag()),l=this.getDirection();if(s.setDirection(l),this.insertAfter(s,r),o===0&&!this.isEmpty()&&t){const a=Q();a.select(),this.replace(a,!0)}return s}collapseAtStart(){const t=this.isEmpty()?Q():nn(this.getTag());return this.getChildren().forEach(r=>t.append(r)),this.replace(t),!0}extractWithChild(){return!0}}function cs(n){return n.nodeName.toLowerCase()==="span"&&n.style.fontSize==="26pt"}function Ne(n){const e=n.nodeName.toLowerCase();let t=null;return e!=="h1"&&e!=="h2"&&e!=="h3"&&e!=="h4"&&e!=="h5"&&e!=="h6"||(t=nn(e),n.style!==null&&(Po(n,t),t.setFormat(n.style.textAlign))),{node:t}}function Vu(n){const e=oa();return n.style!==null&&(e.setFormat(n.style.textAlign),Po(n,e)),{node:e}}function nn(n="h1"){return Bt(new Bo(n))}function $n(n){let e=null;if(ne(n,DragEvent)?e=n.dataTransfer:ne(n,ClipboardEvent)&&(e=n.clipboardData),e===null)return[!1,[],!1];const t=e.types,r=t.includes("Files"),o=t.includes("text/html")||t.includes("text/plain");return[r,Array.from(e.files),o]}function us(n){const e=F();if(!O(e))return!1;const t=new Set,r=e.getNodes();for(let o=0;o<r.length;o++){const i=r[o],s=i.getKey();if(t.has(s))continue;const l=_t(i,c=>C(c)&&!c.isInline());if(l===null)continue;const a=l.getKey();l.canIndent()&&!t.has(a)&&(t.add(a),n(l))}return t.size>0}function fs(n){const e=Xt(n);return z(e)}function Kr(n){for(const e of["lowercase","uppercase","capitalize"])n.hasFormat(e)&&n.toggleFormat(e)}function Hu(n){return Ke(n.registerCommand(Rs,e=>{const t=F();return!!ht(t)&&(t.clear(),!0)},I),n.registerCommand(re,e=>{const t=F();return O(t)?(t.deleteCharacter(e),!0):!!ht(t)&&(t.deleteNodes(),!0)},I),n.registerCommand(gn,e=>{const t=F();return!!O(t)&&(t.deleteWord(e),!0)},I),n.registerCommand(pn,e=>{const t=F();return!!O(t)&&(t.deleteLine(e),!0)},I),n.registerCommand(Ae,e=>{const t=F();if(typeof e=="string")t!==null&&t.insertText(e);else{if(t===null)return!1;const r=e.dataTransfer;if(r!=null)Gi(r,t,n);else if(O(t)){const o=e.data;return o&&t.insertText(o),!0}}return!0},I),n.registerCommand(Gr,()=>{const e=F();return!!O(e)&&(e.removeText(),!0)},I),n.registerCommand(jt,e=>{const t=F();return!!O(t)&&(t.formatText(e),!0)},I),n.registerCommand(Ga,e=>{const t=F();if(!O(t)&&!ht(t))return!1;const r=t.getNodes();for(const o of r){const i=_t(o,s=>C(s)&&!s.isInline());i!==null&&i.setFormat(e)}return!0},I),n.registerCommand(Me,e=>{const t=F();return!!O(t)&&(t.insertLineBreak(e),!0)},I),n.registerCommand(Yn,()=>{const e=F();return!!O(e)&&(e.insertParagraph(),!0)},I),n.registerCommand(qa,()=>(mc([xn()]),!0),I),n.registerCommand(Ya,()=>us(e=>{const t=e.getIndent();e.setIndent(t+1)}),I),n.registerCommand(li,()=>us(e=>{const t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),I),n.registerCommand(Ws,e=>{const t=F();if(ht(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectPrevious(),!0}else if(O(t)){const r=so(t.focus,!0);if(!e.shiftKey&&z(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1},I),n.registerCommand(Bs,e=>{const t=F();if(ht(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectNext(0,0),!0}else if(O(t)){if(function(o){const i=o.focus;return i.key==="root"&&i.offset===V().getChildrenSize()}(t))return e.preventDefault(),!0;const r=so(t.focus,!1);if(!e.shiftKey&&z(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},I),n.registerCommand(Ks,e=>{const t=F();if(ht(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),Hi(r[0])?r[0].selectNext(0,0):r[0].selectPrevious(),!0}if(!O(t))return!1;if(qi(t,!0)){const r=e.shiftKey;return e.preventDefault(),Yi(t,r,!0),!0}return!1},I),n.registerCommand(zs,e=>{const t=F();if(ht(t)){const o=t.getNodes();if(o.length>0)return e.preventDefault(),Hi(o[0])?o[0].selectPrevious():o[0].selectNext(0,0),!0}if(!O(t))return!1;const r=e.shiftKey;return!!qi(t,!1)&&(e.preventDefault(),Yi(t,r,!1),!0)},I),n.registerCommand(js,e=>{if(fs(e.target))return!1;const t=F();if(O(t)){if(function(r){if(!r.isCollapsed())return!1;const{anchor:o}=r;if(o.offset!==0)return!1;const i=o.getNode();if(Z(i))return!1;const s=gu(i);return s.getIndent()>0&&(s.is(i)||i.is(s.getFirstDescendant()))}(t))return e.preventDefault(),n.dispatchCommand(li,void 0);if(ls&&navigator.language==="ko-KR")return!1}else if(!ht(t))return!1;return e.preventDefault(),n.dispatchCommand(re,!0)},I),n.registerCommand(Vs,e=>{if(fs(e.target))return!1;const t=F();return!(!O(t)&&!ht(t))&&(e.preventDefault(),n.dispatchCommand(re,!1))},I),n.registerCommand(Gn,e=>{const t=F();if(!O(t))return!1;if(Kr(t),e!==null){if((ls||Ju||Uu)&&Bu)return!1;if(e.preventDefault(),e.shiftKey)return n.dispatchCommand(Me,!1)}return n.dispatchCommand(Yn,void 0)},I),n.registerCommand(Us,()=>{const e=F();return!!O(e)&&(n.blur(),!0)},I),n.registerCommand(qs,e=>{const[,t]=$n(e);if(t.length>0){const o=ss(e.clientX,e.clientY);if(o!==null){const{offset:i,node:s}=o,l=Xt(s);if(l!==null){const a=xo();if(A(l))a.anchor.set(l.getKey(),i,"text"),a.focus.set(l.getKey(),i,"text");else{const u=l.getParentOrThrow().getKey(),f=l.getIndexWithinParent()+1;a.anchor.set(u,f,"element"),a.focus.set(u,f,"element")}const c=fn(a);ut(c)}n.dispatchCommand(as,t)}return e.preventDefault(),!0}const r=F();return!!O(r)},I),n.registerCommand(Ys,e=>{const[t]=$n(e),r=F();return!(t&&!O(r))},I),n.registerCommand(Gs,e=>{const[t]=$n(e),r=F();if(t&&!O(r))return!1;const o=ss(e.clientX,e.clientY);if(o!==null){const i=Xt(o.node);z(i)&&e.preventDefault()}return!0},I),n.registerCommand(Xr,()=>(Oc(),!0),I),n.registerCommand(lr,e=>(Zi(n,ne(e,ClipboardEvent)?e:null),!0),I),n.registerCommand(mo,e=>(async function(t,r){await Zi(r,ne(t,ClipboardEvent)?t:null),r.update(()=>{const o=F();O(o)?o.removeText():ht(o)&&o.getNodes().forEach(i=>i.remove())})}(e,n),!0),I),n.registerCommand(_o,e=>{const[,t,r]=$n(e);return t.length>0&&!r?(n.dispatchCommand(as,t),!0):He(e.target)&&To(e.target)?!1:F()!==null&&(function(o,i){o.preventDefault(),i.update(()=>{const s=F(),l=ne(o,InputEvent)||ne(o,KeyboardEvent)?null:o.clipboardData;l!=null&&s!==null&&Gi(l,s,i)},{tag:rc})}(e,n),!0)},I),n.registerCommand(Js,e=>{const t=F();return O(t)&&Kr(t),!1},I),n.registerCommand(Hs,e=>{const t=F();return O(t)&&Kr(t),!1},I))}const qu=$.createContext(null),Wr={didCatch:!1,error:null};class Yu extends $.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Wr}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];(t=(r=this.props).onReset)===null||t===void 0||t.call(r,{args:i,reason:"imperative-api"}),this.setState(Wr)}}componentDidCatch(e,t){var r,o;(r=(o=this.props).onError)===null||r===void 0||r.call(o,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:o}=this.props;if(r&&t.error!==null&&Gu(e.resetKeys,o)){var i,s;(i=(s=this.props).onReset)===null||i===void 0||i.call(s,{next:o,prev:e.resetKeys,reason:"keys"}),this.setState(Wr)}}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:o}=this.props,{didCatch:i,error:s}=this.state;let l=e;if(i){const a={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")l=t(a);else if(r)l=$.createElement(r,a);else if(o!==void 0)l=o;else throw s}return $.createElement(qu.Provider,{value:{didCatch:i,error:s,resetErrorBoundary:this.resetErrorBoundary}},l)}}function Gu(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==e.length||n.some((t,r)=>!Object.is(t,e[r]))}function od({children:n,onError:e}){return lt.jsx(Yu,{fallback:lt.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:n})}const Xu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?$.useLayoutEffect:$.useEffect;function Zu(n){return{initialValueFn:()=>n.isEditable(),subscribe:e=>n.registerEditableListener(e)}}function Qu(){return function(n){const[e]=me(),t=$.useMemo(()=>n(e),[e,n]),[r,o]=$.useState(()=>t.initialValueFn()),i=$.useRef(r);return Xu(()=>{const{initialValueFn:s,subscribe:l}=t,a=s();return i.current!==a&&(i.current=a,o(a)),l(c=>{i.current=c,o(c)})},[t,n]),r}(Zu)}const tf={name:"@lexical/react/ReactProvider"};function ef(){return V().getTextContent()}function nf(n,e=!0){if(n)return!1;let t=ef();return e&&(t=t.trim()),t===""}function rf(n){if(!nf(n,!1))return!1;const e=V().getChildren(),t=e.length;if(t>1)return!1;for(let r=0;r<t;r++){const o=e[r];if(z(o))return!1;if(C(o)){if(!bo(o)||o.__indent!==0)return!1;const i=o.getChildren(),s=i.length;for(let l=0;l<s;l++){const a=i[r];if(!A(a))return!1}}}return!0}function ia(n){return()=>rf(n)}function of(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Jo=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?$.useLayoutEffect:$.useEffect;function sf({editor:n,ErrorBoundary:e}){return function(t,r){const[o,i]=$.useState(()=>t.getDecorators());return Jo(()=>t.registerDecoratorListener(s=>{qo.flushSync(()=>{i(s)})}),[t]),$.useEffect(()=>{i(t.getDecorators())},[t]),$.useMemo(()=>{const s=[],l=Object.keys(o);for(let a=0;a<l.length;a++){const c=l[a],u=lt.jsx(r,{onError:d=>t._onError(d),children:lt.jsx($.Suspense,{fallback:null,children:o[c]})}),f=t.getElementByKey(c);f!==null&&s.push(qo.createPortal(u,f,c))}return s},[r,o,t])}(n,e)}function lf({editor:n,ErrorBoundary:e}){return function(t){const r=Le.maybeFromEditor(t);if(r&&r.hasExtensionByName(tf.name)){for(const o of["@lexical/plain-text","@lexical/rich-text"])r.hasExtensionByName(o)&&of(320,o);return!0}return!1}(n)?null:lt.jsx(sf,{editor:n,ErrorBoundary:e})}function ds(n){return n.getEditorState().read(ia(n.isComposing()))}function id({contentEditable:n,placeholder:e=null,ErrorBoundary:t}){const[r]=me();return function(o){Jo(()=>Ke(Hu(o),zu(o)),[o])}(r),lt.jsxs(lt.Fragment,{children:[n,lt.jsx(af,{content:e}),lt.jsx(lf,{editor:r,ErrorBoundary:t})]})}function af({content:n}){const[e]=me(),t=function(o){const[i,s]=$.useState(()=>ds(o));return Jo(()=>{function l(){const a=ds(o);s(a)}return l(),Ke(o.registerUpdateListener(()=>{l()}),o.registerEditableListener(()=>{l()}))},[o]),i}(e),r=Qu();return t?typeof n=="function"?n(r):n:null}function sd({defaultSelection:n}){const[e]=me();return $.useEffect(()=>{e.focus(()=>{const t=document.activeElement,r=e.getRootElement();r===null||t!==null&&r.contains(t)||r.focus({preventScroll:!0})},{defaultSelection:n})},[n,e]),null}const cf=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?$.useLayoutEffect:$.useEffect;function ld({onClear:n}){const[e]=me();return cf(()=>Au(e,n),[e,n]),null}const sa=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?$.useLayoutEffect:$.useEffect;function uf({editor:n,ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:o,ariaErrorMessage:i,ariaExpanded:s,ariaInvalid:l,ariaLabel:a,ariaLabelledBy:c,ariaMultiline:u,ariaOwns:f,ariaRequired:d,autoCapitalize:g,className:h,id:p,role:_="textbox",spellCheck:y=!0,style:m,tabIndex:S,"data-testid":w,...E},v){const[T,k]=$.useState(n.isEditable()),b=$.useCallback(P=>{P&&P.ownerDocument&&P.ownerDocument.defaultView?n.setRootElement(P):n.setRootElement(null)},[n]),M=$.useMemo(()=>function(...P){return W=>{for(const R of P)typeof R=="function"?R(W):R!=null&&(R.current=W)}}(v,b),[b,v]);return sa(()=>(k(n.isEditable()),n.registerEditableListener(P=>{k(P)})),[n]),lt.jsx("div",{"aria-activedescendant":T?e:void 0,"aria-autocomplete":T?t:"none","aria-controls":T?r:void 0,"aria-describedby":o,...i!=null?{"aria-errormessage":i}:{},"aria-expanded":T&&_==="combobox"?!!s:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":a,"aria-labelledby":c,"aria-multiline":u,"aria-owns":T?f:void 0,"aria-readonly":!T||void 0,"aria-required":d,autoCapitalize:g,className:h,contentEditable:T,"data-testid":w,id:p,ref:M,role:_,spellCheck:y,style:m,tabIndex:S,...E})}const ff=$.forwardRef(uf);function hs(n){return n.getEditorState().read(ia(n.isComposing()))}const ad=$.forwardRef(df);function df(n,e){const{placeholder:t,...r}=n,[o]=me();return lt.jsxs(lt.Fragment,{children:[lt.jsx(ff,{editor:o,...r,ref:e}),t!=null&&lt.jsx(hf,{editor:o,content:t})]})}function hf({content:n,editor:e}){const t=function(s){const[l,a]=$.useState(()=>hs(s));return sa(()=>{function c(){const u=hs(s);a(u)}return c(),Ke(s.registerUpdateListener(()=>{c()}),s.registerEditableListener(()=>{c()}))},[s]),l}(e),[r,o]=$.useState(e.isEditable());if($.useLayoutEffect(()=>(o(e.isEditable()),e.registerEditableListener(s=>{o(s)})),[e]),!t)return null;let i=null;return typeof n=="function"?i=n(r):n!==null&&(i=n),i===null?null:lt.jsx("div",{"aria-hidden":!0,children:i})}const jo=/^(\d+(?:\.\d+)?)px$/,Re={BOTH:3,NO_STATUS:0,ROW:1};class bn extends At{constructor(t=Re.NO_STATUS,r=1,o,i){super(i);x(this,"__colSpan");x(this,"__rowSpan");x(this,"__headerState");x(this,"__width");x(this,"__backgroundColor");x(this,"__verticalAlign");this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=o,this.__backgroundColor=null,this.__verticalAlign=void 0}static getType(){return"tablecell"}static clone(t){return new bn(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:gs,priority:0}),th:t=>({conversion:gs,priority:0})}}static importJSON(t){return la().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),go(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),Ot(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(q(r.element)){const o=r.element;o.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),o.style.border="1px solid black",this.__colSpan>1&&(o.colSpan=this.__colSpan),this.__rowSpan>1&&(o.rowSpan=this.__rowSpan),o.style.width=`${this.getWidth()||75}px`,o.style.verticalAlign=this.getVerticalAlign()||"top",o.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(o.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...go(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=Re.BOTH){const o=this.getWritable();return o.__headerState=t&r|o.__headerState&~r,o}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Re.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function go(n){return n==="middle"||n==="bottom"}function gs(n){const e=n,t=n.nodeName.toLowerCase();let r;jo.test(e.style.width)&&(r=parseFloat(e.style.width));const o=la(t==="th"?Re.ROW:Re.NO_STATUS,e.colSpan,r);o.__rowSpan=e.rowSpan;const i=e.style.backgroundColor;i!==""&&(o.__backgroundColor=i);const s=e.style.verticalAlign;go(s)&&(o.__verticalAlign=s);const l=e.style,a=(l&&l.textDecoration||"").split(" "),c=l.fontWeight==="700"||l.fontWeight==="bold",u=a.includes("line-through"),f=l.fontStyle==="italic",d=a.includes("underline");return{after:g=>{const h=[];let p=null;const _=()=>{if(p){const y=p.getFirstChild();oe(y)&&p.getChildrenSize()===1&&y.remove()}};for(const y of g)Dc(y)||A(y)||oe(y)?(A(y)&&(c&&y.toggleFormat("bold"),u&&y.toggleFormat("strikethrough"),f&&y.toggleFormat("italic"),d&&y.toggleFormat("underline")),p?p.append(y):(p=Q().append(y),h.push(p))):(h.push(y),_(),p=null);return _(),h.length===0&&h.push(Q()),h},node:o}}function la(n=Re.NO_STATUS,e=1,t){return Bt(new bn(n,e,t))}function pt(n){return n instanceof bn}function X(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class yr extends At{constructor(t,r){super(r);x(this,"__height");this.__height=t}static getType(){return"tablerow"}static clone(t){return new yr(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:gf,priority:0})}}static importJSON(t){return aa().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),Ot(r,t.theme.tableRow),r}extractWithChild(t,r,o){return o==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function gf(n){const e=n;let t;return jo.test(e.style.height)&&(t=parseFloat(e.style.height)),{after:r=>Vl(r,pt),node:aa(t)}}function aa(n){return Bt(new yr(n))}function Nn(n){return n instanceof yr}const ca=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,pf=ca&&"documentMode"in document?document.documentMode:null;ca&&"InputEvent"in window&&!pf&&new window.InputEvent("input");function _f(n,e,t){const[r,o,i]=ua(n,e,t);return o===null&&X(207),i===null&&X(208),[r,o,i]}function ua(n,e,t){const r=[];let o=null,i=null;function s(a){let c=r[a];return c===void 0&&(r[a]=c=[]),c}const l=n.getChildren();for(let a=0;a<l.length;a++){const c=l[a];Nn(c)||X(209);const u=s(a);for(let f=c.getFirstChild(),d=0;f!=null;f=f.getNextSibling()){for(pt(f)||X(147);u[d]!==void 0;)d++;const g={cell:f,startColumn:d,startRow:a},{__rowSpan:h,__colSpan:p}=f;for(let _=0;_<h&&!(a+_>=l.length);_++){const y=s(a+_);for(let m=0;m<p;m++)y[d+m]=g}e!==null&&o===null&&e.is(f)&&(o=g),t!==null&&i===null&&t.is(f)&&(i=g)}}return[r,o,i]}function mf(n){let e;if(n instanceof bn)e=n;else if("__type"in n){const o=_t(n,pt);pt(o)||X(148),e=o}else{const o=_t(n.getNode(),pt);pt(o)||X(148),e=o}const t=e.getParent();Nn(t)||X(149);const r=t.getParent();return da(r)||X(210),[e,t,r]}function yf(n,e,t){let r,o=Math.min(e.startColumn,t.startColumn),i=Math.min(e.startRow,t.startRow),s=Math.max(e.startColumn+e.cell.__colSpan-1,t.startColumn+t.cell.__colSpan-1),l=Math.max(e.startRow+e.cell.__rowSpan-1,t.startRow+t.cell.__rowSpan-1);do{r=!1;for(let a=0;a<n.length;a++)for(let c=0;c<n[0].length;c++){const u=n[a][c];if(!u)continue;const f=u.startColumn+u.cell.__colSpan-1,d=u.startRow+u.cell.__rowSpan-1,g=u.startColumn<=s&&f>=o,h=u.startRow<=l&&d>=i;if(g&&h){const p=Math.min(o,u.startColumn),_=Math.max(s,f),y=Math.min(i,u.startRow),m=Math.max(l,d);p===o&&_===s&&y===i&&m===l||(o=p,s=_,i=y,l=m,r=!0)}}}while(r);return{maxColumn:s,maxRow:l,minColumn:o,minRow:i}}function ps(n){const[e,,t]=mf(n),r=t.getChildren(),o=r.length,i=r[0].getChildren().length,s=new Array(o);for(let l=0;l<o;l++)s[l]=new Array(i);for(let l=0;l<o;l++){const a=r[l].getChildren();let c=0;for(let u=0;u<a.length;u++){for(;s[l][c];)c++;const f=a[u],d=f.__rowSpan||1,g=f.__colSpan||1;for(let h=0;h<d;h++)for(let p=0;p<g;p++)s[l+h][c+p]=f;if(e===f)return{colSpan:g,columnIndex:c,rowIndex:l,rowSpan:d};c+=g}}return null}function _s(n){const[[e,t,r,o],[i,s,l,a]]=["anchor","focus"].map(c=>{const u=n[c].getNode(),f=_t(u,pt);pt(f)||X(238,c,u.getKey(),u.getType());const d=f.getParent();Nn(d)||X(239,c);const g=d.getParent();return da(g)||X(240,c),[u,f,d,g]});return o.is(a)||X(241),{anchorCell:t,anchorNode:e,anchorRow:r,anchorTable:o,focusCell:s,focusNode:i,focusRow:l,focusTable:a}}class Uo{constructor(e,t,r){x(this,"tableKey");x(this,"anchor");x(this,"focus");x(this,"_cachedNodes");x(this,"dirty");this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e}getStartEndPoints(){return[this.anchor,this.focus]}isValid(){if(this.tableKey==="root"||this.anchor.key==="root"||this.anchor.type!=="element"||this.focus.key==="root"||this.focus.type!=="element")return!1;const e=Y(this.tableKey),t=Y(this.anchor.key),r=Y(this.focus.key);return e!==null&&t!==null&&r!==null}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return xf(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)}set(e,t,r){this.dirty=this.dirty||e!==this.tableKey||t!==this.anchor.key||r!==this.focus.key,this.tableKey=e,this.anchor.key=t,this.focus.key=r,this._cachedNodes=null}clone(){return new Uo(this.tableKey,yt(this.anchor.key,this.anchor.offset,this.anchor.type),yt(this.focus.key,this.focus.offset,this.focus.type))}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(e){}insertText(){}hasFormat(e){let t=0;this.getNodes().filter(pt).forEach(o=>{const i=o.getFirstChild();bo(i)&&(t|=i.getTextFormat())});const r=Gt[e];return(t&r)!==0}insertNodes(e){const t=this.focus.getNode();C(t)||X(151),fn(t.select(0,t.getChildrenSize())).insertNodes(e)}getShape(){const{anchorCell:e,focusCell:t}=_s(this),r=ps(e);r===null&&X(153);const o=ps(t);o===null&&X(155);const i=Math.min(r.columnIndex,o.columnIndex),s=Math.max(r.columnIndex+r.colSpan-1,o.columnIndex+o.colSpan-1),l=Math.min(r.rowIndex,o.rowIndex),a=Math.max(r.rowIndex+r.rowSpan-1,o.rowIndex+o.rowSpan-1);return{fromX:Math.min(i,s),fromY:Math.min(l,a),toX:Math.max(i,s),toY:Math.max(l,a)}}getNodes(){if(!this.isValid())return[];const e=this._cachedNodes;if(e!==null)return e;const{anchorTable:t,anchorCell:r,focusCell:o}=_s(this),i=o.getParents()[1];if(i!==t){if(t.isParentOf(o)){const _=i.getParent();_==null&&X(159),this.set(this.tableKey,o.getKey(),_.getKey())}else{const _=t.getParent();_==null&&X(158),this.set(this.tableKey,_.getKey(),o.getKey())}return this.getNodes()}const[s,l,a]=_f(t,r,o),{minColumn:c,maxColumn:u,minRow:f,maxRow:d}=yf(s,l,a),g=new Map([[t.getKey(),t]]);let h=null;for(let _=f;_<=d;_++)for(let y=c;y<=u;y++){const{cell:m}=s[_][y],S=m.getParent();Nn(S)||X(160),S!==h&&(g.set(S.getKey(),S),h=S),g.has(m.getKey())||Sf(m,w=>{g.set(w.getKey(),w)})}const p=Array.from(g.values());return je()||(this._cachedNodes=p),p}getTextContent(){const e=this.getNodes().filter(r=>pt(r));let t="";for(let r=0;r<e.length;r++){const o=e[r],i=o.__parent,s=(e[r+1]||{}).__parent;t+=o.getTextContent()+(s!==i?`
`:"	")}return t}}function xf(n){return n instanceof Uo}function Sf(n,e){const t=[[n]];for(let r=t.at(-1);r!==void 0&&t.length>0;r=t.at(-1)){const o=r.pop();o===void 0?t.pop():e(o)!==!1&&C(o)&&t.push(o.getChildren())}}function tn(n){return q(n)&&n.nodeName==="TABLE"}function Cf(n,e){for(let t=e,r=null;t!==null;t=t.getParent()){if(n.is(t))return r;pt(t)&&(r=t)}return null}function vf(n,e,t){return Cf(n,Xt(e,t))}function ms(n,e,t){if(!e.theme.tableAlignment)return;const r=[],o=[];for(const i of["center","right"]){const s=e.theme.tableAlignment[i];s&&(i===t?o:r).push(s)}Bn(n,...r),Ot(n,...o)}const wf=new WeakSet;function ys(n=hr()){return wf.has(n)}class xr extends At{constructor(t){super(t);x(this,"__rowStriping");x(this,"__frozenColumnCount");x(this,"__frozenRowCount");x(this,"__colWidths");this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0,this.__colWidths=void 0}static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new xr(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:bf,priority:1})}}static importJSON(t){return fa().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,o){return o==="html"}getDOMSlot(t){const r=tn(t)?t:t.querySelector("table");return tn(r)||X(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const o=document.createElement("table");this.__style&&(o.style.cssText=this.__style);const i=document.createElement("colgroup");if(o.appendChild(i),Ic(i),Ot(o,t.theme.table),this.updateTableElement(null,o,t),ys(r)){const s=document.createElement("div"),l=t.theme.tableScrollableWrapper;return l?Ot(s,l):s.style.cssText="overflow-x: auto;",s.appendChild(o),this.updateTableWrapper(null,s,o,t),s}return o}updateTableWrapper(t,r,o,i){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&function(s,l,a,c){c>0?(Ot(s,a.theme.tableFrozenColumn),l.setAttribute("data-lexical-frozen-column","true")):(Bn(s,a.theme.tableFrozenColumn),l.removeAttribute("data-lexical-frozen-column"))}(r,o,i,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&function(s,l,a,c){c>0?(Ot(s,a.theme.tableFrozenRow),l.setAttribute("data-lexical-frozen-row","true")):(Bn(s,a.theme.tableFrozenRow),l.removeAttribute("data-lexical-frozen-row"))}(r,o,i,this.__frozenRowCount)}updateTableElement(t,r,o){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&function(i,s,l){l?(Ot(i,s.theme.tableRowStriping),i.setAttribute("data-lexical-row-striping","true")):(Bn(i,s.theme.tableRowStriping),i.removeAttribute("data-lexical-row-striping"))}(r,o,this.__rowStriping),function(i,s,l,a){const c=i.querySelector("colgroup");if(!c)return;const u=[];for(let f=0;f<l;f++){const d=document.createElement("col"),g=a&&a[f];g&&(d.style.width=`${g}px`),u.push(d)}c.replaceChildren(...u)}(r,0,this.getColumnCount(),this.getColWidths()),ms(r,o,this.getFormatType())}updateDOM(t,r,o){const i=this.getDOMSlot(r).element;return r===i===ys()||(q(s=r)&&s.nodeName==="DIV"&&this.updateTableWrapper(t,r,i,o),this.updateTableElement(t,i,o),!1);var s}exportDOM(t){const r=super.exportDOM(t),{element:o}=r;return{after:i=>{if(r.after&&(i=r.after(i)),!tn(i)&&q(i)&&(i=i.querySelector("table")),!tn(i))return null;ms(i,t._config,this.getFormatType());const[s]=ua(this,null,null),l=new Map;for(const f of s)for(const d of f){const g=d.cell.getKey();l.has(g)||l.set(g,{colSpan:d.cell.getColSpan(),startColumn:d.startColumn})}const a=new Set;for(const f of i.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const d=f.getAttribute("data-temporary-table-cell-lexical-key");if(d){const g=l.get(d);if(f.removeAttribute("data-temporary-table-cell-lexical-key"),g){l.delete(d);for(let h=0;h<g.colSpan;h++)a.add(h+g.startColumn)}}}const c=i.querySelector(":scope > colgroup");if(c){const f=Array.from(i.querySelectorAll(":scope > colgroup > col")).filter((d,g)=>a.has(g));c.replaceChildren(...f)}const u=i.querySelectorAll(":scope > tr");if(u.length>0){const f=document.createElement("tbody");for(const d of u)f.appendChild(d);i.append(f)}return i},element:!tn(o)&&q(o)?o.querySelector("table"):o}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:o,domRows:i}=r;for(let s=0;s<o;s++){const l=i[s];if(l!=null)for(let a=0;a<l.length;a++){const c=l[a];if(c==null)continue;const{elem:u}=c,f=vf(this,u);if(f!==null&&t.is(f))return{x:a,y:s}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,o){const{domRows:i}=o,s=i[r];if(s==null)return null;const l=s[t<s.length?t:s.length-1];return l??null}getDOMCellFromCordsOrThrow(t,r,o){const i=this.getDOMCellFromCords(t,r,o);if(!i)throw new Error("Cell not found at cords.");return i}getCellNodeFromCords(t,r,o){const i=this.getDOMCellFromCords(t,r,o);if(i==null)return null;const s=Xt(i.elem);return pt(s)?s:null}getCellNodeFromCordsOrThrow(t,r,o){const i=this.getCellNodeFromCords(t,r,o);if(!i)throw new Error("Node at cords not TableCellNode.");return i}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach(o=>{pt(o)&&(r+=o.getColSpan())}),r}}function bf(n){const e=fa();n.hasAttribute("data-lexical-row-striping")&&e.setRowStriping(!0),n.hasAttribute("data-lexical-frozen-column")&&e.setFrozenColumns(1),n.hasAttribute("data-lexical-frozen-row")&&e.setFrozenRows(1);const t=n.querySelector(":scope > colgroup");if(t){let r=[];for(const o of t.querySelectorAll(":scope > col")){let i=o.style.width||"";if(!jo.test(i)&&(i=o.getAttribute("width")||"",!/^\d+$/.test(i))){r=void 0;break}r.push(parseFloat(i))}r&&e.setColWidths(r)}return{after:r=>Vl(r,Nn),node:e}}function fa(){return Bt(new xr)}function da(n){return n instanceof xr}export{Cl as $,Pf as A,Fe as B,At as C,Ve as D,Wo as E,Z as F,Wf as G,Bf as H,bo as I,Za as J,I as K,F as L,rd as M,V as N,Ou as O,Bo as P,Jf as Q,nd as R,C as S,ed as T,Ke as U,Zf as V,wc as W,ye as X,He as Y,Rf as Z,jt as _,id as a,nf as a$,L as a0,Gn as a1,Hs as a2,Us as a3,Ws as a4,Bs as a5,Ys as a6,qs as a7,_o as a8,ne as a9,qf as aA,ut as aB,Mc as aC,Y as aD,Gf as aE,xo as aF,yt as aG,ml as aH,q as aI,_t as aJ,Yf as aK,rt as aL,$f as aM,Ua as aN,Wt as aO,Kn as aP,Sc as aQ,We as aR,Xf as aS,If as aT,Mf as aU,zf as aV,$a as aW,Qf as aX,Vf as aY,Hf as aZ,ef as a_,td as aa,rc as ab,mo as ac,lr as ad,Xr as ae,Oc as af,Me as ag,Vs as ah,re as ai,js as aj,zs as ak,qi as al,Yi as am,Ks as an,Yn as ao,Gr as ap,Ae as aq,pn as ar,gn as as,Su as at,zu as au,Qu as av,Le as aw,tf as ax,ia as ay,Of as az,sd as b,Uf as c,Kf as d,Bt as e,jf as f,yu as g,ht as h,Ls as i,mc as j,A as k,Ot as l,mu as m,od as n,me as o,Df as p,Ff as q,ld as r,Af as s,Is as t,Bn as u,$s as v,xf as w,ad as x,O as y,Lf as z};
