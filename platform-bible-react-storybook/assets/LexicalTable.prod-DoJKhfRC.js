var ya=Object.defineProperty;var xa=(n,e,t)=>e in n?ya(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var x=(n,e,t)=>xa(n,typeof e!="symbol"?e+"":e,t);import{r as I}from"./iframe-CSLUaGEN.js";import{j as st}from"./jsx-runtime-cUWo5wG0.js";import{r as Ho}from"./index-Csv4m13P.js";const ys=I.createContext(null);function Sa(n,e){return{getTheme:function(){return e??null}}}function pe(){const n=I.useContext(ys);return n==null&&function(e,...t){const r=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",e);for(const i of t)o.append("v",i);throw r.search=o.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),n}function N(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function xs(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);t.search=r.toString(),console.warn(`Minified Lexical warning #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const wt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ca=wt&&"documentMode"in document?document.documentMode:null,yt=wt&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Ht=wt&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Bn=!(!wt||!("InputEvent"in window)||Ca)&&"getTargetRanges"in new window.InputEvent("input"),hn=wt&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),$e=wt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,va=wt&&/Android/.test(navigator.userAgent),Ss=wt&&/^(?=.*Chrome).*/i.test(navigator.userAgent),qo=wt&&va&&Ss,gn=wt&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&yt&&!Ss,wa=0,ba=1,Na=2,Cs=128,Ea=1,Ta=2,ka=3,Oa=4,Ma=5,Aa=6,rr=hn||$e||gn?" ":"​",or=`

`,Da=Ht?" ":rr,qt={bold:1,capitalize:1024,code:16,highlight:Cs,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},Fa={directionless:1,unmergeable:2},Yo={center:2,end:6,justify:4,left:1,right:3,start:5},Pa={[Ta]:"center",[Aa]:"end",[Oa]:"justify",[Ea]:"left",[ka]:"right",[Ma]:"start"},La={normal:0,segmented:2,token:1},Ra={[wa]:"normal",[Na]:"segmented",[ba]:"token"},If="$",Go="$config";function vs(n,e,t,r,o,i){let s=n.getFirstChild();for(;s!==null;){const l=s.__key;s.__parent===e&&(S(s)&&vs(s,l,t,r,o,i),t.has(l)||i.delete(l),o.push(l)),s=s.getNextSibling()}}let zr=!1,go=0;function $a(n){go=n.timeStamp}function vr(n,e,t){const r=n.nodeName==="BR",o=e.__lexicalLineBreak;return o&&(n===o||r&&n.previousSibling===o)||r&&ur(n,t)!==void 0}function Ia(n,e,t){const r=bt(mt(t));let o=null,i=null;r!==null&&r.anchorNode===n&&(o=r.anchorOffset,i=r.focusOffset);const s=n.nodeValue;s!==null&&Mo(e,s,o,i,!1)}function za(n,e,t){if(O(n)){const r=n.anchor.getNode();if(r.is(t)&&n.format!==r.getFormat())return!1}return zt(e)&&t.isAttached()}function Ka(n,e,t,r){for(let o=n;o&&!Hc(o);o=yn(o)){const i=ur(o,e);if(i!==void 0){const s=Y(i,t);if(s)return B(s)||!q(o)?void 0:[o,s]}else if(o===r)return[r,Al(t)]}}function ws(n,e,t){zr=!0;const r=performance.now()-go>100;try{Ot(n,()=>{const o=F()||function(d){return d.getEditorState().read(()=>{const g=F();return g!==null?g.clone():null})}(n),i=new Map,s=n.getRootElement(),l=n._editorState,a=n._blockCursorElement;let c=!1,u="";for(let d=0;d<e.length;d++){const g=e[d],h=g.type,p=g.target,_=Ka(p,n,l,s);if(!_)continue;const[m,y]=_;if(h==="characterData")r&&A(y)&&zt(p)&&za(o,p,y)&&Ia(p,y,n);else if(h==="childList"){c=!0;const C=g.addedNodes;for(let v=0;v<C.length;v++){const k=C[v],T=Ol(k),b=k.parentNode;if(b!=null&&k!==a&&T===null&&!vr(k,b,n)){if(Ht){const M=(q(k)?k.innerText:null)||k.nodeValue;M&&(u+=M)}b.removeChild(k)}}const w=g.removedNodes,E=w.length;if(E>0){let v=0;for(let k=0;k<E;k++){const T=w[k];(vr(T,p,n)||a===T)&&(p.appendChild(T),v++)}E!==v&&i.set(m,y)}}}if(i.size>0)for(const[d,g]of i)g.reconcileObservedMutation(d,n);const f=t.takeRecords();if(f.length>0){for(let d=0;d<f.length;d++){const g=f[d],h=g.addedNodes,p=g.target;for(let _=0;_<h.length;_++){const m=h[_],y=m.parentNode;y==null||m.nodeName!=="BR"||vr(m,p,n)||y.removeChild(m)}}t.takeRecords()}o!==null&&(c&&ct(o),Ht&&Ll(n)&&o.insertRawText(u))})}finally{zr=!1}}function bs(n){const e=n._observer;e!==null&&ws(n,e.takeRecords(),e)}function Ns(n){(function(e){go===0&&mt(e).addEventListener("textInput",$a,!0)})(n),n._observer=new MutationObserver((e,t)=>{ws(n,e,t)})}let Ba=class{constructor(e,t){x(this,"key");x(this,"parse");x(this,"unparse");x(this,"isEqual");x(this,"defaultValue");this.key=e,this.parse=t.parse.bind(t),this.unparse=(t.unparse||Ua).bind(t),this.isEqual=(t.isEqual||Object.is).bind(t),this.defaultValue=this.parse(void 0)}};function Kf(n,e){return new Ba(n,e)}function Wa(n,e,t="latest"){const r=(t==="latest"?n.getLatest():n).__state;return r?r.getValue(e):e.defaultValue}function Bf(n,e,t){let r;if(ot(),typeof t=="function"){const i=n.getLatest(),s=Wa(i,e);if(r=t(s),e.isEqual(s,r))return i}else r=t;const o=n.getWritable();return Ts(o).updateFromKnown(e,r),o}function Ja(n){const e=new Map,t=new Set;for(let r=typeof n=="function"?n:n.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:o}=dr(r);if(o&&o.stateConfigs)for(const i of o.stateConfigs){let s;"stateConfig"in i?(s=i.stateConfig,i.flat&&t.add(s.key)):s=i,e.set(s.key,s)}}return{flatKeys:t,sharedConfigMap:e}}let ja=class Es{constructor(e,t,r=void 0,o=new Map,i=void 0){x(this,"node");x(this,"knownState");x(this,"unknownState");x(this,"sharedNodeState");x(this,"size");this.node=e,this.sharedNodeState=t,this.unknownState=r,this.knownState=o;const{sharedConfigMap:s}=this.sharedNodeState,l=i!==void 0?i:function(a,c,u){let f=u.size;if(c)for(const d in c){const g=a.get(d);g&&u.has(g)||f++}return f}(s,r,o);this.size=l}getValue(e){const t=this.knownState.get(e);if(t!==void 0)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const o=this.unknownState[e.key];o!==void 0&&(r=e.parse(o)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState},t={};for(const[r,o]of this.knownState)r.isEqual(o,r.defaultValue)?delete e[r.key]:e[r.key]=r.unparse(o);for(const r of this.sharedNodeState.flatKeys)r in e&&(t[r]=e[r],delete e[r]);return Xo(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;const{sharedNodeState:t,unknownState:r}=this,o=new Map(this.knownState);return new Es(e,t,function(i,s,l){let a;if(l)for(const[c,u]of Object.entries(l)){const f=i.get(c);f?s.has(f)||s.set(f,f.parse(u)):(a=a||{},a[c]=u)}return a}(t.sharedConfigMap,o,r),o,this.size)}updateFromKnown(e,t){const r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);const{knownState:o,unknownState:i}=this;o.has(e)||i&&r in i||(i&&(delete i[r],this.unknownState=Xo(i)),this.size++),o.set(e,t)}updateFromUnknown(e,t){const r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){const{knownState:t}=this;for(const r of t.keys())t.set(r,r.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(const[r,o]of Object.entries(e))this.updateFromUnknown(r,o)}};function Ts(n){const e=n.getWritable(),t=e.__state?e.__state.getWritable(e):new ja(e,ks(e));return e.__state=t,t}function ks(n){return n.__state?n.__state.sharedNodeState:Nl(fr(),n.getType()).sharedNodeState}function Xo(n){if(n)for(const e in n)return n}function Ua(n){return n}function Qo(n,e,t){for(const[r,o]of e.knownState){if(n.has(r.key))continue;n.add(r.key);const i=t?t.getValue(r):r.defaultValue;if(i!==o&&!r.isEqual(i,o))return!0}return!1}function Zo(n,e,t){const{unknownState:r}=e,o=t?t.unknownState:void 0;if(r){for(const[i,s]of Object.entries(r))if(!n.has(i)&&(n.add(i),s!==(o?o[i]:void 0)))return!0}return!1}function ti(n,e){const t=n.__state;return t&&t.node===n?t.getWritable(e):t}function ei(n,e){const t=n.__mode,r=n.__format,o=n.__style,i=e.__mode,s=e.__format,l=e.__style,a=n.__state,c=e.__state;return(t===null||t===i)&&(r===null||r===s)&&(o===null||o===l)&&(n.__state===null||a===c||function(u,f){if(u===f)return!0;if(u&&f&&u.size!==f.size)return!1;const d=new Set;return!(u&&Qo(d,u,f)||f&&Qo(d,f,u)||u&&Zo(d,u,f)||f&&Zo(d,f,u))}(a,c))}function ni(n,e){const t=n.mergeWithSibling(e),r=j()._normalizedNodes;return r.add(n.__key),r.add(e.__key),t}function ri(n){let e,t,r=n;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&A(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(ei(e,r)){r=ni(e,r);break}break}e.remove()}for(;(t=r.getNextSibling())!==null&&A(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(ei(r,t)){r=ni(r,t);break}break}t.remove()}}else r.remove()}function rn(n){return oi(n.anchor),oi(n.focus),n}function oi(n){for(;n.type==="element";){const e=n.getNode(),t=n.offset;let r,o;if(t===e.getChildrenSize()?(r=e.getChildAtIndex(t-1),o=!0):(r=e.getChildAtIndex(t),o=!1),A(r)){n.set(r.__key,o?r.getTextContentSize():0,"text",!0);break}if(!S(r))break;n.set(r.__key,o?r.getChildrenSize():0,"element",!0)}}let se,lt,on,ir,Kr,Br,le,xt,Wr,sn,G="",Et=null,Zt=null,be=!1,Wn=!1;function Jn(n,e){const t=le.get(n);if(e!==null){const r=Vr(n);r.parentNode===e&&e.removeChild(r)}if(xt.has(n)||lt._keyToDOMMap.delete(n),S(t)){const r=Un(t,le);Jr(r,0,r.length-1,null)}t!==void 0&&Ao(sn,on,ir,t,"destroyed")}function Jr(n,e,t,r){for(let o=e;o<=t;++o){const i=n[o];i!==void 0&&Jn(i,r)}}function Qt(n,e){n.setProperty("text-align",e)}const Va="40px";function Os(n,e){const t=se.theme.indent;if(typeof t=="string"){const o=n.classList.contains(t);e>0&&!o?n.classList.add(t):e<1&&o&&n.classList.remove(t)}const r=getComputedStyle(n).getPropertyValue("--lexical-indent-base-value")||Va;n.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function Ms(n,e){const t=n.style;e===0?Qt(t,""):e===1?Qt(t,"left"):e===2?Qt(t,"center"):e===3?Qt(t,"right"):e===4?Qt(t,"justify"):e===5?Qt(t,"start"):e===6&&Qt(t,"end")}function jr(n,e){const t=function(r){const o=r.__dir;if(o!==null)return o;if(nt(r))return null;const i=r.getParentOrThrow();return nt(i)&&i.__dir===null?"auto":null}(e);t!==null?n.dir=t:n.removeAttribute("dir")}function jn(n,e){const t=xt.get(n);t===void 0&&N(60);const r=t.createDOM(se,lt);if(function(o,i,s){const l=s._keyToDOMMap;(function(a,c,u){const f=`__lexicalKey_${c._key}`;a[f]=u})(i,s,o),l.set(o,i)}(n,r,lt),A(t)?r.setAttribute("data-lexical-text","true"):B(t)&&r.setAttribute("data-lexical-decorator","true"),S(t)){const o=t.__indent,i=t.__size;if(jr(r,t),o!==0&&Os(r,o),i!==0){const l=i-1;Ur(Un(t,xt),t,0,l,t.getDOMSlot(r))}const s=t.__format;s!==0&&Ms(r,s),t.isInline()||As(null,t,r)}else{const o=t.getTextContent();if(B(t)){const i=t.decorate(lt,se);i!==null&&Ds(n,i),r.contentEditable="false"}G+=o}return e!==null&&e.insertChild(r),Ao(sn,on,ir,t,"created"),r}function Ur(n,e,t,r,o){const i=G;G="";let s=t;for(;s<=r;++s){jn(n[s],o);const l=xt.get(n[s]);l!==null&&A(l)?Et===null&&(Et=l.getFormat(),Zt=l.getStyle()):S(l)&&s<r&&!l.isInline()&&(G+=or)}o.element.__lexicalTextContent=G,G=i+G}function ii(n,e){if(n){const t=n.__last;if(t){const r=e.get(t);if(r)return re(r)?"line-break":B(r)&&r.isInline()?"decorator":null}return"empty"}return null}function As(n,e,t){const r=ii(n,le),o=ii(e,xt);r!==o&&e.getDOMSlot(t).setManagedLineBreak(o)}function Ha(n,e,t){var r;Et=null,Zt=null,function(o,i,s){const l=G,a=o.__size,c=i.__size;G="";const u=s.element;if(a===1&&c===1){const f=o.__first,d=i.__first;if(f===d)Fn(f,u);else{const h=Vr(f),p=jn(d,null);try{u.replaceChild(p,h)}catch(_){if(typeof _=="object"&&_!=null){const m=`${_.toString()} Parent: ${u.tagName}, new child: {tag: ${p.tagName} key: ${d}}, old child: {tag: ${h.tagName}, key: ${f}}.`;throw new Error(m)}throw _}Jn(f,null)}const g=xt.get(d);A(g)&&Et===null&&(Et=g.getFormat(),Zt=g.getStyle())}else{const f=Un(o,le),d=Un(i,xt);if(f.length!==a&&N(227),d.length!==c&&N(228),a===0)c!==0&&Ur(d,0,0,c-1,s);else if(c===0){if(a!==0){const g=s.after==null&&s.before==null&&s.element.__lexicalLineBreak==null;Jr(f,0,a-1,g?null:u),g&&(u.textContent="")}}else(function(g,h,p,_,m,y){const C=_-1,w=m-1;let E,v,k=y.getFirstChild(),T=0,b=0;for(;T<=C&&b<=w;){const z=h[T],R=p[b];if(z===R)k=wr(Fn(R,y.element)),T++,b++;else{if(v===void 0&&(v=si(p,b)),E===void 0)E=si(h,T);else if(!E.has(z)){T++;continue}if(!v.has(z)){k=wr(Vr(z)),Jn(z,y.element),T++,E.delete(z);continue}if(E.has(R)){const V=ue(lt,R);V!==k&&y.withBefore(k).insertChild(V),k=wr(Fn(R,y.element)),T++,b++}else jn(R,y.withBefore(k)),b++}const K=xt.get(R);K!==null&&A(K)?Et===null&&(Et=K.getFormat(),Zt=K.getStyle()):S(K)&&b<=w&&!K.isInline()&&(G+=or)}const M=T>C,L=b>w;if(M&&!L){const z=p[w+1],R=z===void 0?null:lt.getElementByKey(z);Ur(p,0,b,w,y.withBefore(R))}else L&&!M&&Jr(h,T,C,y.element)})(0,f,d,a,c,s)}u.__lexicalTextContent=G,G=l+G}(n,e,e.getDOMSlot(t)),r=e,Et==null||Et===r.__textFormat||Wn||r.setTextFormat(Et),function(o){Zt==null||Zt===o.__textStyle||Wn||o.setTextStyle(Zt)}(e)}function Un(n,e){const t=[];let r=n.__first;for(;r!==null;){const o=e.get(r);o===void 0&&N(101),t.push(r),r=o.__next}return t}function Fn(n,e){const t=le.get(n);let r=xt.get(n);t!==void 0&&r!==void 0||N(61);const o=be||Br.has(n)||Kr.has(n),i=ue(lt,n);if(t===r&&!o){let s;if(S(t)){const l=i.__lexicalTextContent;typeof l=="string"?s=l:(s=t.getTextContent(),i.__lexicalTextContent=s)}else s=t.getTextContent();return G+=s,i}if(t!==r&&o&&Ao(sn,on,ir,r,"updated"),r.updateDOM(t,i,se)){const s=jn(n,null);return e===null&&N(62),e.replaceChild(s,i),Jn(n,null),s}if(S(t)){S(r)||N(334,n);const s=r.__indent;(be||s!==t.__indent)&&Os(i,s);const l=r.__format;if((be||l!==t.__format)&&Ms(i,l),o)Ha(t,r,i),nt(r)||r.isInline()||As(t,r,i);else{const a=i.__lexicalTextContent;let c;typeof a=="string"?c=a:(c=t.getTextContent(),i.__lexicalTextContent=c),G+=c}if((be||r.__dir!==t.__dir)&&(jr(i,r),nt(r)&&!be))for(const a of r.getChildren())S(a)&&jr(ue(lt,a.getKey()),a)}else{const s=r.getTextContent();if(B(r)){const l=r.decorate(lt,se);l!==null&&Ds(n,l)}G+=s}if(!Wn&&nt(r)&&r.__cachedText!==G){const s=r.getWritable();s.__cachedText=G,r=s}return i}function Ds(n,e){let t=lt._pendingDecorators;const r=lt._decorators;if(t===null){if(r[n]===e)return;t=Ml(lt)}t[n]=e}function wr(n){let e=n.nextSibling;return e!==null&&e===lt._blockCursorElement&&(e=e.nextSibling),e}function si(n,e){const t=new Set;for(let r=e;r<n.length;r++)t.add(n[r]);return t}function qa(n,e,t,r,o,i){G="",be=r===2,lt=t,se=t._config,on=t._nodes,ir=lt._listeners.mutation,Kr=o,Br=i,le=n._nodeMap,xt=e._nodeMap,Wn=e._readOnly,Wr=new Map(t._keyToDOMMap);const s=new Map;return sn=s,Fn("root",null),lt=void 0,on=void 0,Kr=void 0,Br=void 0,le=void 0,xt=void 0,se=void 0,Wr=void 0,sn=void 0,s}function Vr(n){const e=Wr.get(n);return e===void 0&&N(75,n),e}function P(n){return{type:n}}const Fs=P("SELECTION_CHANGE_COMMAND"),Ya=P("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),Ps=P("CLICK_COMMAND"),Ls=P("BEFORE_INPUT_COMMAND"),Rs=P("INPUT_COMMAND"),$s=P("COMPOSITION_START_COMMAND"),Is=P("COMPOSITION_END_COMMAND"),ne=P("DELETE_CHARACTER_COMMAND"),ke=P("INSERT_LINE_BREAK_COMMAND"),Vn=P("INSERT_PARAGRAPH_COMMAND"),Oe=P("CONTROLLED_TEXT_INSERTION_COMMAND"),po=P("PASTE_COMMAND"),Hr=P("REMOVE_TEXT_COMMAND"),ln=P("DELETE_WORD_COMMAND"),an=P("DELETE_LINE_COMMAND"),Wt=P("FORMAT_TEXT_COMMAND"),zs=P("UNDO_COMMAND"),Ks=P("REDO_COMMAND"),Bs=P("KEYDOWN_COMMAND"),Ws=P("KEY_ARROW_RIGHT_COMMAND"),Ga=P("MOVE_TO_END"),Js=P("KEY_ARROW_LEFT_COMMAND"),Xa=P("MOVE_TO_START"),js=P("KEY_ARROW_UP_COMMAND"),Us=P("KEY_ARROW_DOWN_COMMAND"),Hn=P("KEY_ENTER_COMMAND"),Vs=P("KEY_SPACE_COMMAND"),Hs=P("KEY_BACKSPACE_COMMAND"),qs=P("KEY_ESCAPE_COMMAND"),Ys=P("KEY_DELETE_COMMAND"),Gs=P("KEY_TAB_COMMAND"),Qa=P("INSERT_TAB_COMMAND"),Za=P("INDENT_CONTENT_COMMAND"),li=P("OUTDENT_CONTENT_COMMAND"),Xs=P("DROP_COMMAND"),tc=P("FORMAT_ELEMENT_COMMAND"),Qs=P("DRAGSTART_COMMAND"),Zs=P("DRAGOVER_COMMAND"),ec=P("DRAGEND_COMMAND"),sr=P("COPY_COMMAND"),_o=P("CUT_COMMAND"),qr=P("SELECT_ALL_COMMAND"),nc=P("CLEAR_EDITOR_COMMAND"),Wf=P("CLEAR_HISTORY_COMMAND"),Jf=P("CAN_REDO_COMMAND"),jf=P("CAN_UNDO_COMMAND"),rc=P("FOCUS_COMMAND"),oc=P("BLUR_COMMAND"),ic=P("KEY_MODIFIER_COMMAND"),Ft=Object.freeze({}),Yr=[["keydown",function(n,e){cn=n.timeStamp,tl=n.key,!e.isComposing()&&D(e,Bs,n)}],["pointerdown",function(n,e){const t=n.target,r=n.pointerType;je(t)&&r!=="touch"&&r!=="pen"&&n.button===0&&Ot(e,()=>{El(t)||(Qr=!0)})}],["compositionstart",function(n,e){D(e,$s,n)}],["compositionend",function(n,e){Ht?Xe=!0:$e||!hn&&!gn?D(e,Is,n):(Zr=!0,to=n.data)}],["input",function(n,e){n.stopPropagation(),Ot(e,()=>{e.dispatchCommand(Rs,n)},{event:n}),Ne=null}],["click",function(n,e){Ot(e,()=>{const t=F(),r=bt(mt(e)),o=Ke();if(r){if(O(t)){const i=t.anchor,s=i.getNode();if(i.type==="element"&&i.offset===0&&t.isCollapsed()&&!nt(s)&&H().getChildrenSize()===1&&s.getTopLevelElementOrThrow().isEmpty()&&o!==null&&t.is(o))r.removeAllRanges(),t.dirty=!0;else if(n.detail===3&&!t.isCollapsed()&&s!==t.focus.getNode()){const l=gt(s,a=>S(a)&&!a.isInline());S(l)&&l.select(0)}}else if(n.pointerType==="touch"||n.pointerType==="pen"){const i=r.anchorNode;(q(i)||zt(i))&&ct(xo(o,r,e,n))}}D(e,Ps,n)})}],["cut",Ft],["copy",Ft],["dragstart",Ft],["dragover",Ft],["dragend",Ft],["paste",Ft],["focus",Ft],["blur",Ft],["drop",Ft]];Bn&&Yr.push(["beforeinput",(n,e)=>function(t,r){const o=t.inputType;o==="deleteCompositionText"||Ht&&Ll(r)||o!=="insertCompositionText"&&D(r,Ls,t)}(n,e)]);let cn=0,tl=null,el=0,Ne=null;const Gr=new WeakMap,qn=new WeakMap;let Xr=!1,Qr=!1,Ze=!1,Xe=!1,Zr=!1,to="",te=null,nl=[0,"",0,"root",0];function rl(n,e,t,r,o){const i=n.anchor,s=n.focus,l=i.getNode(),a=j(),c=bt(mt(a)),u=c!==null?c.anchorNode:null,f=i.key,d=a.getElementByKey(f),g=t.length;return f!==s.key||!A(l)||(!o&&(!Bn||el<r+50)||l.isDirty()&&g<2||Dl(t))&&i.offset!==s.offset&&!l.isComposing()||Rt(l)||l.isDirty()&&g>1||(o||!Bn)&&d!==null&&!l.isComposing()&&u!==Pe(d)||c!==null&&e!==null&&(!e.collapsed||e.startContainer!==c.anchorNode||e.startOffset!==c.anchorOffset)||l.getFormat()!==n.format||l.getStyle()!==n.style||function(h,p){if(p.isSegmented())return!0;if(!h.isCollapsed())return!1;const _=h.anchor.offset,m=p.getParentOrThrow(),y=oe(p);return _===0?!p.canInsertTextBefore()||!m.canInsertTextBefore()&&!p.isComposing()||y||function(C){const w=C.getPreviousSibling();return(A(w)||S(w)&&w.isInline())&&!w.canInsertTextAfter()}(p):_===p.getTextContentSize()&&(!p.canInsertTextAfter()||!m.canInsertTextAfter()&&!p.isComposing()||y)}(n,l)}function ai(n,e){return zt(n)&&n.nodeValue!==null&&e!==0&&e!==n.nodeValue.length}function ci(n,e,t){const{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}=n;Xr&&(Xr=!1,ai(r,o)&&ai(i,s)&&!te)||Ot(e,()=>{if(!t)return void ct(null);if(!mn(e,r,i))return;let l=F();if(te&&O(l)&&l.isCollapsed()){const a=l.anchor,c=te.anchor;(a.key===c.key&&a.offset===c.offset+1||a.offset===1&&c.getNode().is(a.getNode().getPreviousSibling()))&&(l=te.clone(),ct(l))}if(te=null,O(l)){const a=l.anchor,c=a.getNode();if(l.isCollapsed()){n.type==="Range"&&n.anchorNode===n.focusNode&&(l.dirty=!0);const u=mt(e).event,f=u?u.timeStamp:performance.now(),[d,g,h,p,_]=nl,m=H(),y=e.isComposing()===!1&&m.getTextContent()==="";if(f<_+200&&a.offset===h&&a.key===p)Pn(l,d,g);else if(a.type==="text")A(c)||N(141),ol(l,c);else if(a.type==="element"&&!y){S(c)||N(259);const C=a.getNode();C.isEmpty()?function(w,E){const v=E.getTextFormat(),k=E.getTextStyle();Pn(w,v,k)}(l,C):Pn(l,0,"")}}else{const u=a.key,f=l.focus.key,d=l.getNodes(),g=d.length,h=l.isBackward(),p=h?s:o,_=h?o:s,m=h?f:u,y=h?u:f;let C=2047,w=!1;for(let E=0;E<g;E++){const v=d[E],k=v.getTextContentSize();if(A(v)&&k!==0&&!(E===0&&v.__key===m&&p===k||E===g-1&&v.__key===y&&_===0)&&(w=!0,C&=v.getFormat(),C===0))break}l.format=w?C:0}}D(e,Fs,void 0)})}function Pn(n,e,t){n.format===e&&n.style===t||(n.format=e,n.style=t,n.dirty=!0)}function ol(n,e){Pn(n,e.getFormat(),e.getStyle())}function il(n){if(!n.getTargetRanges)return null;const e=n.getTargetRanges();return e.length===0?null:e[0]}function sc(n){const e=n.inputType,t=il(n),r=j(),o=F();if(e==="deleteContentBackward"){if(o===null){const f=Ke();if(!O(f))return!0;ct(f.clone())}if(O(o)){const f=o.anchor.key===o.focus.key;if(i=n.timeStamp,tl==="MediaLast"&&i<cn+30&&r.isComposing()&&f){if(it(null),cn=0,setTimeout(()=>{Ot(r,()=>{it(null)})},30),O(o)){const d=o.anchor.getNode();d.markDirty(),A(d)||N(142),ol(o,d)}}else{it(null),n.preventDefault();const d=o.anchor.getNode(),g=d.getTextContent(),h=d.canInsertTextAfter(),p=o.anchor.offset===0&&o.focus.offset===g.length;let _=qo&&f&&!p&&h;if(_&&o.isCollapsed()&&(_=!B(io(o.anchor,!0))),!_){D(r,ne,!0);const m=F();qo&&O(m)&&m.isCollapsed()&&(te=m,setTimeout(()=>te=null))}}return!0}}var i;if(!O(o))return!0;const s=n.data;Ne!==null&&Oo(!1,r,Ne),o.dirty&&Ne===null||!o.isCollapsed()||nt(o.anchor.getNode())||t===null||o.applyDOMRange(t),Ne=null;const l=o.anchor,a=o.focus,c=l.getNode(),u=a.getNode();if(e==="insertText"||e==="insertTranspose"){if(s===`
`)n.preventDefault(),D(r,ke,!1);else if(s===or)n.preventDefault(),D(r,Vn,void 0);else if(s==null&&n.dataTransfer){const f=n.dataTransfer.getData("text/plain");n.preventDefault(),o.insertRawText(f)}else s!=null&&rl(o,t,s,n.timeStamp,!0)?(n.preventDefault(),D(r,Oe,s)):Ne=s;return el=n.timeStamp,!0}switch(n.preventDefault(),e){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":D(r,Oe,n);break;case"insertFromComposition":it(null),D(r,Oe,n);break;case"insertLineBreak":it(null),D(r,ke,!1);break;case"insertParagraph":it(null),Ze&&!$e?(Ze=!1,D(r,ke,!1)):D(r,Vn,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":D(r,po,n);break;case"deleteByComposition":(function(f,d){return f!==d||S(f)||S(d)||!oe(f)||!oe(d)})(c,u)&&D(r,Hr,n);break;case"deleteByDrag":case"deleteByCut":D(r,Hr,n);break;case"deleteContent":D(r,ne,!1);break;case"deleteWordBackward":D(r,ln,!0);break;case"deleteWordForward":D(r,ln,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":D(r,an,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":D(r,an,!1);break;case"formatStrikeThrough":D(r,Wt,"strikethrough");break;case"formatBold":D(r,Wt,"bold");break;case"formatItalic":D(r,Wt,"italic");break;case"formatUnderline":D(r,Wt,"underline");break;case"historyUndo":D(r,zs,void 0);break;case"historyRedo":D(r,Ks,void 0)}return!0}function lc(n){if(q(n.target)&&El(n.target))return!0;const e=j(),t=F(),r=n.data,o=il(n);if(r!=null&&O(t)&&rl(t,o,r,n.timeStamp,!1)){Xe&&(Yn(e,r),Xe=!1);const i=t.anchor.getNode(),s=bt(mt(e));if(s===null)return!0;const l=t.isBackward(),a=l?t.anchor.offset:t.focus.offset,c=l?t.focus.offset:t.anchor.offset;Bn&&!t.isCollapsed()&&A(i)&&s.anchorNode!==null&&i.getTextContent().slice(0,a)+r+i.getTextContent().slice(a+c)===Pl(s.anchorNode)||D(e,Oe,r);const u=r.length;Ht&&u>1&&n.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=u),hn||$e||gn||!e.isComposing()||(cn=0,it(null))}else Oo(!1,e,r!==null?r:void 0),Xe&&(Yn(e,r||void 0),Xe=!1);return function(){ot();const i=j();bs(i)}(),!0}function ac(n){const e=j(),t=F();if(O(t)&&!e.isComposing()){const r=t.anchor,o=t.anchor.getNode();it(r.key),(n.timeStamp<cn+30||r.type==="element"||!t.isCollapsed()||o.getFormat()!==t.format||A(o)&&o.getStyle()!==t.style)&&D(e,Oe,Da)}return!0}function cc(n){return Yn(j(),n.data),!0}function Yn(n,e){const t=n._compositionKey;if(it(null),t!==null&&e!=null){if(e===""){const r=Y(t),o=Pe(n.getElementByKey(t));return void(o!==null&&o.nodeValue!==null&&A(r)&&Mo(r,o.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=F();if(O(r)){const o=r.focus;return r.anchor.set(o.key,o.offset,o.type),void D(n,Hn,null)}}}Oo(!0,n,e)}function uc(n){const e=j();if(n.key==null)return!0;if(Zr&&Li(n))return Ot(e,()=>{Yn(e,to)}),Zr=!1,to="",!0;if(function(t){return J(t,"ArrowRight",{shiftKey:"any"})}(n))D(e,Ws,n);else if(function(t){return J(t,"ArrowRight",Lt)}(n))D(e,Ga,n);else if(function(t){return J(t,"ArrowLeft",{shiftKey:"any"})}(n))D(e,Js,n);else if(function(t){return J(t,"ArrowLeft",Lt)}(n))D(e,Xa,n);else if(function(t){return J(t,"ArrowUp",{altKey:"any",shiftKey:"any"})}(n))D(e,js,n);else if(function(t){return J(t,"ArrowDown",{altKey:"any",shiftKey:"any"})}(n))D(e,Us,n);else if(function(t){return J(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(n))Ze=!0,D(e,Hn,n);else if(function(t){return t.key===" "}(n))D(e,Vs,n);else if(function(t){return yt&&J(t,"o",{ctrlKey:!0})}(n))n.preventDefault(),Ze=!0,D(e,ke,!0);else if(function(t){return J(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(n))Ze=!1,D(e,Hn,n);else if(function(t){return J(t,"Backspace",{shiftKey:"any"})||yt&&J(t,"h",{ctrlKey:!0})}(n))Li(n)?D(e,Hs,n):(n.preventDefault(),D(e,ne,!0));else if(function(t){return t.key==="Escape"}(n))D(e,qs,n);else if(function(t){return J(t,"Delete",{})||yt&&J(t,"d",{ctrlKey:!0})}(n))(function(t){return t.key==="Delete"})(n)?D(e,Ys,n):(n.preventDefault(),D(e,ne,!1));else if(function(t){return J(t,"Backspace",Pi)}(n))n.preventDefault(),D(e,ln,!0);else if(function(t){return J(t,"Delete",Pi)}(n))n.preventDefault(),D(e,ln,!1);else if(function(t){return yt&&J(t,"Backspace",{metaKey:!0})}(n))n.preventDefault(),D(e,an,!0);else if(function(t){return yt&&(J(t,"Delete",{metaKey:!0})||J(t,"k",{ctrlKey:!0}))}(n))n.preventDefault(),D(e,an,!1);else if(function(t){return J(t,"b",Lt)}(n))n.preventDefault(),D(e,Wt,"bold");else if(function(t){return J(t,"u",Lt)}(n))n.preventDefault(),D(e,Wt,"underline");else if(function(t){return J(t,"i",Lt)}(n))n.preventDefault(),D(e,Wt,"italic");else if(function(t){return J(t,"Tab",{shiftKey:"any"})}(n))D(e,Gs,n);else if(function(t){return J(t,"z",Lt)}(n))n.preventDefault(),D(e,zs,void 0);else if(function(t){return yt?J(t,"z",{metaKey:!0,shiftKey:!0}):J(t,"y",{ctrlKey:!0})||J(t,"z",{ctrlKey:!0,shiftKey:!0})}(n))n.preventDefault(),D(e,Ks,void 0);else{const t=e._editorState._selection;t===null||O(t)?Ri(n)&&(n.preventDefault(),D(e,qr,n)):function(r){return J(r,"c",Lt)}(n)?(n.preventDefault(),D(e,sr,n)):function(r){return J(r,"x",Lt)}(n)?(n.preventDefault(),D(e,_o,n)):Ri(n)&&(n.preventDefault(),D(e,qr,n))}return function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey}(n)&&e.dispatchCommand(ic,n),!0}function sl(n){let e=n.__lexicalEventHandles;return e===void 0&&(e=[],n.__lexicalEventHandles=e),e}const Me=new Map;function ll(n){const e=Jc(n.target);if(e===null)return;const t=Tl(e.anchorNode);if(t===null)return;Qr&&(Qr=!1,Ot(t,()=>{const a=Ke(),c=e.anchorNode;(q(c)||zt(c))&&ct(xo(a,e,t,n))}));const r=ko(t),o=r[r.length-1],i=o._key,s=Me.get(i),l=s||o;l!==t&&ci(e,l,!1),ci(e,t,!0),t!==o?Me.set(i,t):s&&Me.delete(i)}function ui(n){n._lexicalHandled=!0}function fi(n){return n._lexicalHandled===!0}function fc(n){const e=Gr.get(n);if(e===void 0)return;const t=qn.get(e);if(t===void 0)return;const r=t-1;r>=0||N(164),Gr.delete(n),qn.set(e,r),r===0&&e.removeEventListener("selectionchange",ll);const o=cr(n);To(o)?(function(s){if(s._parentEditor!==null){const l=ko(s),a=l[l.length-1]._key;Me.get(a)===s&&Me.delete(a)}else Me.delete(s._key)}(o),n.__lexicalEditor=null):o&&N(198);const i=sl(n);for(let s=0;s<i.length;s++)i[s]();n.__lexicalEventHandles=[]}function eo(n,e,t){ot();const r=n.__key,o=n.getParent();if(o===null)return;const i=function(l){const a=F();if(!O(a)||!S(l))return a;const{anchor:c,focus:u}=a,f=c.getNode(),d=u.getNode();return so(f,l)&&c.set(l.__key,0,"element"),so(d,l)&&u.set(l.__key,0,"element"),a}(n);let s=!1;if(O(i)&&e){const l=i.anchor,a=i.focus;l.key===r&&(Qn(l,n,o,n.getPreviousSibling(),n.getNextSibling()),s=!0),a.key===r&&(Qn(a,n,o,n.getPreviousSibling(),n.getNextSibling()),s=!0)}else dt(i)&&e&&n.isSelected()&&n.selectPrevious();if(O(i)&&e&&!s){const l=n.getIndexWithinParent();ie(n),Xn(i,o,l,-1)}else ie(n);t||Mt(o)||o.canBeEmpty()||!o.isEmpty()||eo(o,e),e&&i&&nt(o)&&o.isEmpty()&&o.selectEnd()}const al=Symbol.for("ephemeral");function Gn(n){return n[al]||!1}class St{constructor(e){x(this,"__type");x(this,"__key");x(this,"__parent");x(this,"__prev");x(this,"__next");x(this,"__state");this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Lc(this,e)}static getType(){const{ownNodeType:e}=dr(this);return e===void 0&&N(64,this.name),e}static clone(e){N(65,this.name)}$config(){return{}}config(e,t){const r=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:r,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}getType(){return this.__type}isInline(){N(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=Y(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||F();if(t==null)return!1;const r=t.getNodes().some(o=>o.__key===this.__key);if(A(this))return r;if(O(t)&&t.anchor.type==="element"&&t.focus.type==="element"){if(t.isCollapsed())return!1;const o=this.getParent();if(B(this)&&this.isInline()&&o){const i=t.isBackward()?t.focus:t.anchor;if(o.is(i.getNode())&&i.offset===o.getChildrenSize()&&this.is(o.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),r=0;for(;t!==null;){if(this.is(t))return r;r++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:Y(e)}getParentOrThrow(){const e=this.getParent();return e===null&&N(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(Mt(t))return S(e)||e===this&&B(e)||N(194),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&N(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:Y(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let r=t.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:Y(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=S(this)?this:this.getParent(),r=S(e)?e:e.getParent(),o=t&&r?Rn(t,r):null;return o?o.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const t=Rn(this,e);return t!==null&&(t.type==="descendant"||(t.type==="branch"?zl(t)===-1:(t.type!=="same"&&t.type!=="ancestor"&&N(279),!1)))}isParentOf(e){const t=Rn(this,e);return t!==null&&t.type==="ancestor"}getNodesBetween(e){const t=this.isBefore(e),r=[],o=new Set;let i=this;for(;i!==null;){const s=i.__key;if(o.has(s)||(o.add(s),r.push(i)),i===e)break;const l=S(i)?t?i.getFirstChild():i.getLastChild():null;if(l!==null){i=l;continue}const a=t?i.getNextSibling():i.getPreviousSibling();if(a!==null){i=a;continue}const c=i.getParentOrThrow();if(o.has(c.__key)||r.push(c),c===e)break;let u=null,f=c;do{if(f===null&&N(68),u=t?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;u!==null||o.has(f.__key)||r.push(f)}while(u===null);i=u}return t||r.reverse(),r}isDirty(){const e=j()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){if(Gn(this))return this;const e=Y(this.__key);return e===null&&N(113),e}getWritable(){if(Gn(this))return this;ot();const e=Xt(),t=j(),r=e._nodeMap,o=this.__key,i=this.getLatest(),s=t._cloneNotNeeded,l=F();if(l!==null&&l.setCachedNodes(null),s.has(o))return tr(i),i;const a=$l(i);return s.add(o),tr(a),r.set(o,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){N(70)}updateDOM(e,t,r){N(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){N(18,this.name)}updateFromJSON(e){return function(t,r){const o=t.getWritable(),i=r.$;let s=i;for(const l of ks(o).flatKeys)l in r&&(s!==void 0&&s!==i||(s={...i}),s[l]=r[l]);return(o.__state||s)&&Ts(t).updateFromJSON(s),o}(this,e)}static transform(){return null}remove(e){eo(this,!0,e)}replace(e,t){ot();let r=F();r!==null&&(r=r.clone()),Or(this,e);const o=this.getLatest(),i=this.__key,s=e.__key,l=e.getWritable(),a=this.getParentOrThrow().getWritable(),c=a.__size;ie(l);const u=o.getPreviousSibling(),f=o.getNextSibling(),d=o.__prev,g=o.__next,h=o.__parent;if(eo(o,!1,!0),u===null?a.__first=s:u.getWritable().__next=s,l.__prev=d,f===null?a.__last=s:f.getWritable().__prev=s,l.__next=g,l.__parent=h,a.__size=c,t&&(S(this)&&S(l)||N(139),this.getChildren().forEach(p=>{l.append(p)})),O(r)){ct(r);const p=r.anchor,_=r.focus;p.key===i&&_i(p,l),_.key===i&&_i(_,l)}return Jt()===i&&it(s),l}insertAfter(e,t=!0){ot(),Or(this,e);const r=this.getWritable(),o=e.getWritable(),i=o.getParent(),s=F();let l=!1,a=!1;if(i!==null){const g=e.getIndexWithinParent();if(ie(o),O(s)){const h=i.__key,p=s.anchor,_=s.focus;l=p.type==="element"&&p.key===h&&p.offset===g+1,a=_.type==="element"&&_.key===h&&_.offset===g+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),f=o.__key,d=r.__next;if(c===null?u.__last=f:c.getWritable().__prev=f,u.__size++,r.__next=f,o.__next=d,o.__prev=r.__key,o.__parent=r.__parent,t&&O(s)){const g=this.getIndexWithinParent();Xn(s,u,g+1);const h=u.__key;l&&s.anchor.set(h,g+2,"element"),a&&s.focus.set(h,g+2,"element")}return e}insertBefore(e,t=!0){ot(),Or(this,e);const r=this.getWritable(),o=e.getWritable(),i=o.__key;ie(o);const s=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),a=r.__prev,c=this.getIndexWithinParent();s===null?l.__first=i:s.getWritable().__next=i,l.__size++,r.__prev=i,o.__prev=a,o.__next=r.__key,o.__parent=r.__parent;const u=F();return t&&O(u)&&Xn(u,this.getParentOrThrow(),c),e}isParentRequired(){return!1}createParentElementNode(){return Q()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){ot();const r=this.getPreviousSibling(),o=this.getParentOrThrow();if(r===null)return o.select(0,0);if(S(r))return r.select();if(!A(r)){const i=r.getIndexWithinParent()+1;return o.select(i,i)}return r.select(e,t)}selectNext(e,t){ot();const r=this.getNextSibling(),o=this.getParentOrThrow();if(r===null)return o.select();if(S(r))return r.select(0,0);if(!A(r)){const i=r.getIndexWithinParent();return o.select(i,i)}return r.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}x(St,"importDOM");const Uf="historic",Vf="history-push",Ae="history-merge",dc="paste",hc="collaboration",gc="skip-scroll-into-view",pc="skip-dom-selection",di="skip-selection-focus";class Ie extends St{static getType(){return"linebreak"}static clone(e){return new Ie(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>function(t){const r=t.parentElement;if(r!==null&&er(r)){const o=r.firstChild;if(o===t||o.nextSibling===t&&Nn(o)){const i=r.lastChild;if(i===t||i.previousSibling===t&&Nn(i))return!0}}return!1}(e)||function(t){const r=t.parentElement;if(r!==null&&er(r)){const o=r.firstChild;if(o===t||o.nextSibling===t&&Nn(o))return!1;const i=r.lastChild;if(i===t||i.previousSibling===t&&Nn(i))return!0}return!1}(e)?null:{conversion:_c,priority:0}}}static importJSON(e){return ae().updateFromJSON(e)}}function _c(n){return{node:ae()}}function ae(){return Kt(new Ie)}function re(n){return n instanceof Ie}function Nn(n){return zt(n)&&/^( |\t|\r?\n)+$/.test(n.textContent||"")}function br(n,e){return 16&e?"code":e&Cs?"mark":32&e?"sub":64&e?"sup":null}function Nr(n,e){return 1&e?"strong":2&e?"em":"span"}function cl(n,e,t,r,o){const i=r.classList;let s=De(o,"base");s!==void 0&&i.add(...s),s=De(o,"underlineStrikethrough");let l=!1;const a=8&e&&4&e;s!==void 0&&(8&t&&4&t?(l=!0,a||i.add(...s)):a&&i.remove(...s));for(const c in qt){const u=qt[c];if(s=De(o,c),s!==void 0)if(t&u){if(l&&(c==="underline"||c==="strikethrough")){e&u&&i.remove(...s);continue}((e&u)===0||a&&c==="underline"||c==="strikethrough")&&i.add(...s)}else e&u&&i.remove(...s)}}function ul(n,e,t){const r=e.firstChild,o=t.isComposing(),i=n+(o?rr:"");if(r==null)e.textContent=i;else{const s=r.nodeValue;if(s!==i)if(o||Ht){const[l,a,c]=function(u,f){const d=u.length,g=f.length;let h=0,p=0;for(;h<d&&h<g&&u[h]===f[h];)h++;for(;p+h<d&&p+h<g&&u[d-p-1]===f[g-p-1];)p++;return[h,d-h-p,f.slice(h,g-p)]}(s,i);a!==0&&r.deleteData(l,a),r.insertData(l,c)}else r.nodeValue=i}}function hi(n,e,t,r,o,i){ul(o,n,e);const s=i.theme.text;s!==void 0&&cl(0,0,r,n,s)}function En(n,e){const t=document.createElement(e);return t.appendChild(n),t}class _e extends St{constructor(t="",r){super(r);x(this,"__text");x(this,"__format");x(this,"__style");x(this,"__mode");x(this,"__detail");this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}static getType(){return"text"}static clone(t){return new _e(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return Ra[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Jt()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=qt[t];return(this.getFormat()&r)!==0}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return Zn(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const o=this.__format,i=br(0,o),s=Nr(0,o),l=i===null?s:i,a=document.createElement(l);let c=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),i!==null&&(c=document.createElement(s),a.appendChild(c)),hi(c,this,0,o,this.__text,t);const u=this.__style;return u!==""&&(a.style.cssText=u),a}updateDOM(t,r,o){const i=this.__text,s=t.__format,l=this.__format,a=br(0,s),c=br(0,l),u=Nr(0,s),f=Nr(0,l);if((a===null?u:a)!==(c===null?f:c))return!0;if(a===c&&u!==f){const _=r.firstChild;_==null&&N(48);const m=document.createElement(f);return hi(m,this,0,l,i,o),r.replaceChild(m,_),!1}let d=r;c!==null&&a!==null&&(d=r.firstChild,d==null&&N(49)),ul(i,d,this);const g=o.theme.text;g!==void 0&&s!==l&&cl(0,s,l,d,g);const h=t.__style,p=this.__style;return h!==p&&(r.style.cssText=p),!1}static importDOM(){return{"#text":()=>({conversion:Sc,priority:0}),b:()=>({conversion:yc,priority:0}),code:()=>({conversion:Pt,priority:0}),em:()=>({conversion:Pt,priority:0}),i:()=>({conversion:Pt,priority:0}),mark:()=>({conversion:Pt,priority:0}),s:()=>({conversion:Pt,priority:0}),span:()=>({conversion:mc,priority:0}),strong:()=>({conversion:Pt,priority:0}),sub:()=>({conversion:Pt,priority:0}),sup:()=>({conversion:Pt,priority:0}),u:()=>({conversion:Pt,priority:0})}}static importJSON(t){return rt().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return q(r)||N(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=En(r,"b")),this.hasFormat("italic")&&(r=En(r,"i")),this.hasFormat("strikethrough")&&(r=En(r,"s")),this.hasFormat("underline")&&(r=En(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?qt[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?Fa[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=Zn(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=La[t];if(this.__mode===r)return this;const o=this.getWritable();return o.__mode=r,o}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){ot();let o=t,i=r;const s=F(),l=this.getTextContent(),a=this.__key;if(typeof l=="string"){const c=l.length;o===void 0&&(o=c),i===void 0&&(i=c)}else o=0,i=0;if(!O(s))return gl(a,o,a,i,"text","text");{const c=Jt();c!==s.anchor.key&&c!==s.focus.key||it(a),s.setTextNodeRange(this,o,this,i)}return s}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,o,i){const s=this.getWritable(),l=s.__text,a=o.length;let c=t;c<0&&(c=a+c,c<0&&(c=0));const u=F();if(i&&O(u)){const d=t+a;u.setTextNodeRange(s,d,s,d)}const f=l.slice(0,c)+o+l.slice(c+r);return s.__text=f,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){ot();const r=this.getLatest(),o=r.getTextContent();if(o==="")return[];const i=r.__key,s=Jt(),l=o.length;t.sort((b,M)=>b-M),t.push(l);const a=[],c=t.length;for(let b=0,M=0;b<l&&M<=c;M++){const L=t[M];L>b&&(a.push(o.slice(b,L)),b=L)}const u=a.length;if(u===1)return[r];const f=a[0],d=r.getParent();let g;const h=r.getFormat(),p=r.getStyle(),_=r.__detail;let m=!1,y=null,C=null;const w=F();if(O(w)){const[b,M]=w.isBackward()?[w.focus,w.anchor]:[w.anchor,w.focus];b.type==="text"&&b.key===i&&(y=b),M.type==="text"&&M.key===i&&(C=M)}r.isSegmented()?(g=rt(f),g.__format=h,g.__style=p,g.__detail=_,g.__state=ti(r,g),m=!0):g=r.setTextContent(f);const E=[g];for(let b=1;b<u;b++){const M=rt(a[b]);M.__format=h,M.__style=p,M.__detail=_,M.__state=ti(r,M);const L=M.__key;s===i&&it(L),E.push(M)}const v=y?y.offset:null,k=C?C.offset:null;let T=0;for(const b of E){if(!y&&!C)break;const M=T+b.getTextContentSize();if(y!==null&&v!==null&&v<=M&&v>=T&&(y.set(b.getKey(),v-T,"text"),v<M&&(y=null)),C!==null&&k!==null&&k<=M&&k>=T){C.set(b.getKey(),k-T,"text");break}T=M}if(d!==null){(function(L){const z=L.getPreviousSibling(),R=L.getNextSibling();z!==null&&tr(z),R!==null&&tr(R)})(this);const b=d.getWritable(),M=this.getIndexWithinParent();m?(b.splice(M,0,E),this.remove()):b.splice(M,1,E),O(w)&&Xn(w,d,M,u-1)}return E}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||N(50);const o=this.__key,i=t.__key,s=this.__text,l=s.length;Jt()===i&&it(o);const a=F();if(O(a)){const d=a.anchor,g=a.focus;d!==null&&d.key===i&&wi(d,r,o,t,l),g!==null&&g.key===i&&wi(g,r,o,t,l)}const c=t.__text,u=r?c+s:s+c;this.setTextContent(u);const f=this.getWritable();return t.remove(),f}isTextEntity(){return!1}}function mc(n){return{forChild:mo(n.style),node:null}}function yc(n){const e=n,t=e.style.fontWeight==="normal";return{forChild:mo(e.style,t?void 0:"bold"),node:null}}const gi=new WeakMap;function xc(n){if(!q(n))return!1;if(n.nodeName==="PRE")return!0;const e=n.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function Sc(n){const e=n;n.parentElement===null&&N(129);let t=e.textContent||"";if(function(r){let o,i=r.parentNode;const s=[r];for(;i!==null&&(o=gi.get(i))===void 0&&!xc(i);)s.push(i),i=i.parentNode;const l=o===void 0?i:o;for(let a=0;a<s.length;a++)gi.set(s[a],l);return l}(e)!==null){const r=t.split(/(\r?\n|\t)/),o=[],i=r.length;for(let s=0;s<i;s++){const l=r[s];l===`
`||l===`\r
`?o.push(ae()):l==="	"?o.push(pn()):l!==""&&o.push(rt(l))}return{node:o}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let r=e,o=!0;for(;r!==null&&(r=pi(r,!1))!==null;){const i=r.textContent||"";if(i.length>0){/[ \t\n]$/.test(i)&&(t=t.slice(1)),o=!1;break}}o&&(t=t.slice(1))}if(t[t.length-1]===" "){let r=e,o=!0;for(;r!==null&&(r=pi(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){o=!1;break}o&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:rt(t)}}function pi(n,e){let t=n;for(;;){let r;for(;(r=e?t.nextSibling:t.previousSibling)===null;){const i=t.parentElement;if(i===null)return null;t=i}if(t=r,q(t)){const i=t.style.display;if(i===""&&!co(t)||i!==""&&!i.startsWith("inline"))return null}let o=t;for(;(o=e?t.firstChild:t.lastChild)!==null;)t=o;if(zt(t))return t;if(t.nodeName==="BR")return null}}const Cc={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Pt(n){const e=Cc[n.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:mo(n.style,e),node:null}}function rt(n=""){return Kt(new _e(n))}function A(n){return n instanceof _e}function mo(n,e){const t=n.fontWeight,r=n.textDecoration.split(" "),o=t==="700"||t==="bold",i=r.includes("line-through"),s=n.fontStyle==="italic",l=r.includes("underline"),a=n.verticalAlign;return c=>(A(c)&&(o&&!c.hasFormat("bold")&&c.toggleFormat("bold"),i&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),s&&!c.hasFormat("italic")&&c.toggleFormat("italic"),l&&!c.hasFormat("underline")&&c.toggleFormat("underline"),a!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),a!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),e&&!c.hasFormat(e)&&c.toggleFormat(e)),c)}class ze extends _e{static getType(){return"tab"}static clone(e){return new ze(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const t=super.createDOM(e),r=De(e.theme,"tab");return r!==void 0&&t.classList.add(...r),t}static importJSON(e){return pn().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&xs(126),super.setTextContent("	")}spliceText(e,t,r,o){return r===""&&t===0||r==="	"&&t===1||N(286),this}setDetail(e){return e!==2&&N(127),this}setMode(e){return e!=="normal"&&N(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function pn(){return Kt(new ze)}function fl(n){return n instanceof ze}class vc{constructor(e,t,r){x(this,"key");x(this,"offset");x(this,"type");x(this,"_selection");this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:Il(kt(It(this,"next")),kt(It(e,"next")))<0}getNode(){const e=Y(this.key);return e===null&&N(20),e}set(e,t,r,o){const i=this._selection,s=this.key;o&&this.key===e&&this.offset===t&&this.type===r||(this.key=e,this.offset=t,this.type=r,Be()||(Jt()===s&&it(e),i!==null&&(i.setCachedNodes(null),i.dirty=!0)))}}function _t(n,e,t){return new vc(n,e,t)}function Er(n,e){let t=e.__key,r=n.offset,o="element";if(A(e)){o="text";const i=e.getTextContentSize();r>i&&(r=i)}else if(!S(e)){const i=e.getNextSibling();if(A(i))t=i.__key,r=0,o="text";else{const s=e.getParent();s&&(t=s.__key,r=e.getIndexWithinParent()+1)}}n.set(t,r,o)}function _i(n,e){if(S(e)){const t=e.getLastDescendant();S(t)||A(t)?Er(n,t):Er(n,e)}else Er(n,e)}class lr{constructor(e){x(this,"_nodes");x(this,"_cachedNodes");x(this,"dirty");this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!dt(e))return!1;const t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(o=>r.has(o))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new lr(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),r=t.length,o=t[r-1];let i;if(A(o))i=o.select();else{const s=o.getIndexWithinParent()+1;i=o.getParentOrThrow().select(s,s)}i.insertNodes(e);for(let s=0;s<r;s++)t[s].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,r=[];for(const o of t){const i=Y(o);i!==null&&r.push(i)}return Be()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}deleteNodes(){const e=this.getNodes();if((F()||Ke())===this&&e[0]){const t=Z(e[0],"next");nu(Gt(t,t))}for(const t of e)t.remove()}}function O(n){return n instanceof me}class me{constructor(e,t,r,o){x(this,"format");x(this,"style");x(this,"anchor");x(this,"focus");x(this,"_cachedNodes");x(this,"dirty");this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=o,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!O(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=function(r){const o=[],[i,s]=r.getTextSlices();i&&o.push(i.caret.origin);const l=new Set,a=new Set;for(const c of r)if(Ct(c)){const{origin:u}=c;o.length===0?l.add(u):(a.add(u),o.push(u))}else{const{origin:u}=c;S(u)&&a.has(u)||o.push(u)}if(s&&o.push(s.caret.origin),he(r.focus)&&S(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let c=vt(r.focus.origin,"previous");Ct(c)&&l.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(o[o.length-1]);c=fn(c))l.delete(c.origin),o.pop();for(;o.length>1;){const c=o[o.length-1];if(!S(c)||a.has(c)||c.isEmpty()||l.has(c))break;o.pop()}if(o.length===0&&r.isCollapsed()){const c=kt(r.anchor),u=kt(r.anchor.getFlipped()),f=g=>jt(g)?g.origin:g.getNodeAtCaret(),d=f(c)||f(u)||(r.anchor.getNodeAtCaret()?c.origin:u.origin);o.push(d)}return o}(Bl(Wi(this),"next"));return Be()||(this._cachedNodes=t),t}setTextNodeRange(e,t,r,o){this.anchor.set(e.__key,t,"text"),this.focus.set(r.__key,o,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],r=e[e.length-1],o=this.anchor,i=this.focus,s=o.isBefore(i),[l,a]=no(this);let c="",u=!0;for(let f=0;f<e.length;f++){const d=e[f];if(S(d)&&!d.isInline())u||(c+=`
`),u=!d.isEmpty();else if(u=!1,A(d)){let g=d.getTextContent();d===t?d===r?o.type==="element"&&i.type==="element"&&i.offset!==o.offset||(g=l<a?g.slice(l,a):g.slice(a,l)):g=s?g.slice(l):g.slice(a):d===r&&(g=s?g.slice(0,a):g.slice(0,l)),c+=g}else!B(d)&&!re(d)||d===r&&this.isCollapsed()||(c+=d.getTextContent())}return c}applyDOMRange(e){const t=j(),r=t.getEditorState()._selection,o=hl(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(o===null)return;const[i,s]=o;this.anchor.set(i.key,i.offset,i.type,!0),this.focus.set(s.key,s.offset,s.type,!0),rn(this)}clone(){const e=this.anchor,t=this.focus;return new me(_t(e.key,e.offset,e.type),_t(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=Zn(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=qt[e];return(this.format&t)!==0}insertRawText(e){const t=e.split(/(\r?\n|\t)/),r=[],o=t.length;for(let i=0;i<o;i++){const s=t[i];s===`
`||s===`\r
`?r.push(ae()):s==="	"?r.push(pn()):r.push(rt(s))}this.insertNodes(r)}insertText(e){const t=this.anchor,r=this.focus,o=this.format,i=this.style;let s=t,l=r;!this.isCollapsed()&&r.isBefore(t)&&(s=r,l=t),s.type==="element"&&function(_,m,y,C){const w=_.getNode(),E=w.getChildAtIndex(_.offset),v=rt();if(v.setFormat(y),v.setStyle(C),wo(E))E.splice(0,0,[v]);else{const k=nt(w)?Q().append(v):v;E===null?w.append(k):E.insertBefore(k)}_.is(m)&&m.set(v.__key,0,"text"),_.set(v.__key,0,"text")}(s,l,o,i),l.type==="element"&&dn(l,kt(It(l,"next")));const a=s.offset;let c=l.offset;const u=this.getNodes(),f=u.length;let d=u[0];A(d)||N(26);const g=d.getTextContent().length,h=d.getParentOrThrow();let p=u[f-1];if(f===1&&l.type==="element"&&(c=g,l.set(s.key,c,"text")),this.isCollapsed()&&a===g&&(Rt(d)||!d.canInsertTextAfter()||!h.canInsertTextAfter()&&d.getNextSibling()===null)){let _=d.getNextSibling();if(A(_)&&_.canInsertTextBefore()&&!Rt(_)||(_=rt(),_.setFormat(o),_.setStyle(i),h.canInsertTextAfter()?d.insertAfter(_):h.insertAfter(_)),_.select(0,0),d=_,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&a===0&&(Rt(d)||!d.canInsertTextBefore()||!h.canInsertTextBefore()&&d.getPreviousSibling()===null)){let _=d.getPreviousSibling();if(A(_)&&!Rt(_)||(_=rt(),_.setFormat(o),h.canInsertTextBefore()?d.insertBefore(_):h.insertBefore(_)),_.select(),d=_,e!=="")return void this.insertText(e)}else if(d.isSegmented()&&a!==g){const _=rt(d.getTextContent());_.setFormat(o),d.replace(_),d=_}else if(!this.isCollapsed()&&e!==""){const _=p.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||S(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(""),dl(this.anchor,this.focus,null),void this.insertText(e)}if(f===1){if(oe(d)){const C=rt(e);return C.select(),void d.replace(C)}const _=d.getFormat(),m=d.getStyle();if(a!==c||_===o&&m===i){if(fl(d)){const C=rt(e);return C.setFormat(o),C.setStyle(i),C.select(),void d.replace(C)}}else{if(d.getTextContent()!==""){const C=rt(e);if(C.setFormat(o),C.setStyle(i),C.select(),a===0)d.insertBefore(C,!1);else{const[w]=d.splitText(a);w.insertAfter(C,!1)}return void(C.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}d.setFormat(o),d.setStyle(i)}const y=c-a;d=d.spliceText(a,y,e,!0),d.getTextContent()===""?d.remove():this.anchor.type==="text"&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=_,this.style=m))}else{const _=new Set([...d.getParentKeys(),...p.getParentKeys()]),m=S(d)?d:d.getParentOrThrow();let y=S(p)?p:p.getParentOrThrow(),C=p;if(!m.is(y)&&y.isInline())do C=y,y=y.getParentOrThrow();while(y.isInline());if(l.type==="text"&&(c!==0||p.getTextContent()==="")||l.type==="element"&&p.getIndexWithinParent()<c)if(A(p)&&!oe(p)&&c!==p.getTextContentSize()){if(p.isSegmented()){const T=rt(p.getTextContent());p.replace(T),p=T}nt(l.getNode())||l.type!=="text"||(p=p.spliceText(0,c,"")),_.add(p.__key)}else{const T=p.getParentOrThrow();T.canBeEmpty()||T.getChildrenSize()!==1?p.remove():T.remove()}else _.add(p.__key);const w=y.getChildren(),E=new Set(u),v=m.is(y),k=m.isInline()&&d.getNextSibling()===null?m:d;for(let T=w.length-1;T>=0;T--){const b=w[T];if(b.is(d)||S(b)&&b.isParentOf(d))break;b.isAttached()&&(!E.has(b)||b.is(C)?v||k.insertAfter(b,!1):b.remove())}if(!v){let T=y,b=null;for(;T!==null;){const M=T.getChildren(),L=M.length;(L===0||M[L-1].is(b))&&(_.delete(T.__key),b=T),T=T.getParent()}}if(oe(d))if(a===g)d.select();else{const T=rt(e);T.select(),d.replace(T)}else d=d.spliceText(a,g-a,e,!0),d.getTextContent()===""?d.remove():this.anchor.type==="text"&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=d.getFormat(),this.style=d.getStyle()));for(let T=1;T<f;T++){const b=u[T],M=b.__key;_.has(M)||b.remove()}}}removeText(){const e=F()===this;$n(this,ru(Wi(this))),e&&F()!==this&&ct(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void it(null);const r=this.getNodes(),o=[];for(const w of r)A(w)&&o.push(w);const i=w=>{r.forEach(E=>{if(S(E)){const v=E.getFormatFlags(e,w);E.setTextFormat(v)}})},s=o.length;if(s===0)return this.toggleFormat(e),it(null),void i(t);const l=this.anchor,a=this.focus,c=this.isBackward(),u=c?a:l,f=c?l:a;let d=0,g=o[0],h=u.type==="element"?0:u.offset;if(u.type==="text"&&h===g.getTextContentSize()&&(d=1,g=o[1],h=0),g==null)return;const p=g.getFormatFlags(e,t);i(p);const _=s-1;let m=o[_];const y=f.type==="text"?f.offset:m.getTextContentSize();if(g.is(m)){if(h===y)return;if(Rt(g)||h===0&&y===g.getTextContentSize())g.setFormat(p);else{const w=g.splitText(h,y),E=h===0?w[0]:w[1];E.setFormat(p),u.type==="text"&&u.set(E.__key,0,"text"),f.type==="text"&&f.set(E.__key,y-h,"text")}return void(this.format=p)}h===0||Rt(g)||([,g]=g.splitText(h),h=0),g.setFormat(p);const C=m.getFormatFlags(e,p);y>0&&(y===m.getTextContentSize()||Rt(m)||([m]=m.splitText(y)),m.setFormat(C));for(let w=d+1;w<_;w++){const E=o[w],v=E.getFormatFlags(e,C);E.setFormat(v)}u.type==="text"&&u.set(g.__key,h,"text"),f.type==="text"&&f.set(m.__key,y,"text"),this.format=p|C}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const h=F();return O(h)||N(134),h.insertNodes(e)}const t=(this.isBackward()?this.focus:this.anchor).getNode(),r=gt(t,pt),o=e[e.length-1];if(S(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const h=Tr(this);r.splice(h,0,e),o.selectEnd()}return}if(!e.some(h=>(S(h)||B(h))&&!h.isInline())){S(r)||N(211,t.constructor.name,t.getType());const h=Tr(this);return r.splice(h,0,e),void o.selectEnd()}const i=function(h){const p=Q();let _=null;for(let m=0;m<h.length;m++){const y=h[m],C=re(y);if(C||B(y)&&y.isInline()||S(y)&&y.isInline()||A(y)||y.isParentRequired()){if(_===null&&(_=y.createParentElementNode(),p.append(_),C))continue;_!==null&&_.append(y)}else p.append(y),_=null}return p}(e),s=i.getLastDescendant(),l=i.getChildren(),a=!S(r)||!r.isEmpty()?this.insertParagraph():null,c=l[l.length-1];let u=l[0];var f;S(f=u)&&pt(f)&&!f.isEmpty()&&S(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(S(r)||N(211,t.constructor.name,t.getType()),r.append(...u.getChildren()),u=l[1]),u&&(r===null&&N(212,t.constructor.name,t.getType()),function(h,p){const _=p.getParentOrThrow().getLastChild();let m=p;const y=[p];for(;m!==_;)m.getNextSibling()||N(140),m=m.getNextSibling(),y.push(m);let C=h;for(const w of y)C=C.insertAfter(w)}(r,u));const d=gt(s,pt);a&&S(d)&&(a.canMergeWhenEmpty()||pt(c))&&(d.append(...a.getChildren()),a.remove()),S(r)&&r.isEmpty()&&r.remove(),s.selectEnd();const g=S(r)?r.getLastChild():null;re(g)&&d!==r&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const s=Q();return H().splice(this.anchor.offset,0,[s]),s.select(),s}const e=Tr(this),t=gt(this.anchor.getNode(),pt);S(t)||N(213);const r=t.getChildAtIndex(e),o=r?[r,...r.getNextSiblings()]:[],i=t.insertNewAfter(this,!1);return i?(i.append(...o),i.selectStart(),i):null}insertLineBreak(e){const t=ae();if(this.insertNodes([t]),e){const r=t.getParentOrThrow(),o=t.getIndexWithinParent();r.select(o,o)}}extract(){const e=[...this.getNodes()],t=e.length;let r=e[0],o=e[t-1];const[i,s]=no(this),l=this.isBackward(),[a,c]=l?[this.focus,this.anchor]:[this.anchor,this.focus],[u,f]=l?[s,i]:[i,s];if(t===0)return[];if(t===1){if(A(r)&&!this.isCollapsed()){const d=r.splitText(u,f),g=u===0?d[0]:d[1];return g?(a.set(g.getKey(),0,"text"),c.set(g.getKey(),g.getTextContentSize(),"text"),[g]):[]}return[r]}if(A(r)&&(u===r.getTextContentSize()?e.shift():u!==0&&([,r]=r.splitText(u),e[0]=r,a.set(r.getKey(),0,"text"))),A(o)){const d=o.getTextContent().length;f===0?e.pop():f!==d&&([o]=o.splitText(f),e[e.length-1]=o,c.set(o.getKey(),o.getTextContentSize(),"text"))}return e}modify(e,t,r){if(bi(this,e,t,r))return;const o=e==="move",i=j(),s=bt(mt(i));if(!s)return;const l=i._blockCursorElement,a=i._rootElement,c=this.focus.getNode();if(a===null||l===null||!S(c)||c.isInline()||c.canBeEmpty()||lo(l,i,a),this.dirty){let u=ue(i,this.anchor.key),f=ue(i,this.focus.key);this.anchor.type==="text"&&(u=Pe(u)),this.focus.type==="text"&&(f=Pe(f)),u&&f&&_l(s,u,this.anchor.offset,f,this.focus.offset)}if(function(u,f,d,g){u.modify(f,d,g)}(s,e,t?"backward":"forward",r),s.rangeCount>0){const u=s.getRangeAt(0),f=this.anchor.getNode(),d=nt(f)?f:Bc(f);if(this.applyDOMRange(u),this.dirty=!0,!o){const g=this.getNodes(),h=[];let p=!1;for(let _=0;_<g.length;_++){const m=g[_];so(m,d)?h.push(m):p=!0}if(p&&h.length>0)if(t){const _=h[0];S(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{const _=h[h.length-1];S(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}s.anchorNode===u.startContainer&&s.anchorOffset===u.startOffset||function(_){const m=_.focus,y=_.anchor,C=y.key,w=y.offset,E=y.type;y.set(m.key,m.offset,m.type,!0),m.set(C,w,E,!0)}(this)}}r==="lineboundary"&&bi(this,e,t,r,"decorators")}forwardDeletion(e,t,r){if(!r&&(e.type==="element"&&S(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const o=t.getParent(),i=t.getNextSibling()||(o===null?null:o.getNextSibling());if(S(i)&&i.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let o=r.getNode();if(this.forwardDeletion(r,o,e))return;const i=$o(It(r,e?"previous":"next"));if(i.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const a of i.iterNodeCarets("shadowRoot"))if(Ct(a)){if(!a.origin.isInline()){if(a.origin.isShadowRoot()){if(l.type==="merge-block")break;if(S(i.anchor.origin)&&i.anchor.origin.isEmpty()){const c=kt(a);$n(this,Gt(c,c)),i.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:a,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(he(a)){if(S(a.origin)){if(a.origin.isInline()){if(!a.origin.isParentOf(i.anchor.origin))break}else l={block:a.origin,type:"merge-next-block"};continue}if(B(a.origin)){if(!a.origin.isIsolated())if(l.type==="merge-next-block"&&(a.origin.isKeyboardSelectable()||!a.origin.isInline())&&S(i.anchor.origin)&&i.anchor.origin.isEmpty()){i.anchor.origin.remove();const c=pl();c.add(a.origin.getKey()),ct(c)}else a.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:a,block:c}=l;return $n(this,Gt(!a.origin.isEmpty()&&c.isEmpty()?gr(Z(c,a.direction)):i.anchor,a)),this.removeText()}}const s=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&yi(this,r.getNode()))return}else{const l=s.type==="text"?s.getNode():null;if(o=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const a=s.offset,c=l.getTextContentSize();if(l.is(o)||e&&a!==c||!e&&a!==0)return void xi(l,e,a)}else if(o!==null&&o.isSegmented()){const a=r.offset,c=o.getTextContentSize();if(o.is(l)||e&&a!==0||!e&&a!==c)return void xi(o,e,a)}(function(a,c){const u=a.anchor,f=a.focus,d=u.getNode(),g=f.getNode();if(d===g&&u.type==="text"&&f.type==="text"){const h=u.offset,p=f.offset,_=h<p,m=_?h:p,y=_?p:h,C=y-1;m!==C&&function(w){return!(Dl(w)||wc(w))}(d.getTextContent().slice(m,y))&&(c?f.set(f.key,C,f.type):u.set(u.key,C,u.type))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&nt(r.getParent())&&r.getPreviousSibling()===null&&yi(this,r)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function dt(n){return n instanceof lr}function mi(n){const e=n.offset;if(n.type==="text")return e;const t=n.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function no(n){const e=n.getStartEndPoints();if(e===null)return[0,0];const[t,r]=e;return t.type==="element"&&r.type==="element"&&t.key===r.key&&t.offset===r.offset?[0,0]:[mi(t),mi(r)]}function yi(n,e){for(let t=e;t;t=t.getParent()){if(S(t)){if(t.collapseAtStart(n))return!0;if(Mt(t))break}if(t.getPreviousSibling())break}return!1}const wc=(()=>{try{const n=new RegExp("\\p{Emoji}","u"),e=n.test.bind(n);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch{}return()=>!1})();function xi(n,e,t){const r=n,o=r.getTextContent().split(/(?=\s)/g),i=o.length;let s=0,l=0;for(let c=0;c<i;c++){const u=c===i-1;if(l=s,s+=o[c].length,e&&s===t||s>t||u){o.splice(c,1),u&&(l=void 0);break}}const a=o.join("").trim();a===""?r.remove():(r.setTextContent(a),r.select(l,l))}function Si(n,e,t,r){let o,i=e;if(q(n)){let s=!1;const l=n.childNodes,a=l.length,c=r._blockCursorElement;i===a&&(s=!0,i=a-1);let u=l[i],f=!1;if(u===c)u=l[i+1],f=!0;else if(c!==null){const d=c.parentNode;n===d&&e>Array.prototype.indexOf.call(d.children,c)&&i--}if(o=Te(u),A(o))i=Ut(o,s?"next":"previous");else{let d=Te(n);if(d===null)return null;if(S(d)){const g=r.getElementByKey(d.getKey());g===null&&N(214),[d,i]=d.getDOMSlot(g).resolveChildIndex(d,g,n,e),S(d)||N(215),s&&i>=d.getChildrenSize()&&(i=Math.max(0,d.getChildrenSize()-1));let p=d.getChildAtIndex(i);if(S(p)&&function(_,m,y){const C=_.getParent();return y===null||C===null||!C.canBeEmpty()||C!==y.getNode()}(p,0,t)){const _=s?p.getLastDescendant():p.getFirstDescendant();_===null?d=p:(p=_,d=S(p)?p:p.getParentOrThrow()),i=0}A(p)?(o=p,d=null,i=Ut(p,s?"next":"previous")):p!==d&&s&&!f&&(S(d)||N(216),i=Math.min(d.getChildrenSize(),i+1))}else{const g=d.getIndexWithinParent();i=e===0&&B(d)&&Te(n)===d?g:g+1,d=d.getParentOrThrow()}if(S(d))return _t(d.__key,i,"element")}}else o=Te(n);return A(o)?_t(o.__key,Ut(o,i,"clamp"),"text"):null}function Ci(n,e,t){const r=n.offset,o=n.getNode();if(r===0){const i=o.getPreviousSibling(),s=o.getParent();if(e){if((t||!e)&&i===null&&S(s)&&s.isInline()){const l=s.getPreviousSibling();A(l)&&n.set(l.__key,l.getTextContent().length,"text")}}else S(i)&&!t&&i.isInline()?n.set(i.__key,i.getChildrenSize(),"element"):A(i)&&n.set(i.__key,i.getTextContent().length,"text")}else if(r===o.getTextContent().length){const i=o.getNextSibling(),s=o.getParent();if(e&&S(i)&&i.isInline())n.set(i.__key,0,"element");else if((t||e)&&i===null&&S(s)&&s.isInline()&&!s.canInsertTextAfter()){const l=s.getNextSibling();A(l)&&n.set(l.__key,0,"text")}}}function dl(n,e,t){if(n.type==="text"&&e.type==="text"){const r=n.isBefore(e),o=n.is(e);Ci(n,r,o),Ci(e,!r,o),o&&e.set(n.key,n.offset,n.type);const i=j();if(i.isComposing()&&i._compositionKey!==n.key&&O(t)){const s=t.anchor,l=t.focus;n.set(s.key,s.offset,s.type,!0),e.set(l.key,l.offset,l.type,!0)}}}function hl(n,e,t,r,o,i){if(n===null||t===null||!mn(o,n,t))return null;const s=Si(n,e,O(i)?i.anchor:null,o);if(s===null)return null;const l=Si(t,r,O(i)?i.focus:null,o);if(l===null)return null;if(s.type==="element"&&l.type==="element"){const a=Te(n),c=Te(t);if(B(a)&&B(c))return null}return dl(s,l,i),[s,l]}function ro(n){return S(n)&&!n.isInline()}function gl(n,e,t,r,o,i){const s=Xt(),l=new me(_t(n,e,o),_t(t,r,i),0,"");return l.dirty=!0,s._selection=l,l}function yo(){const n=_t("root",0,"element"),e=_t("root",0,"element");return new me(n,e,0,"")}function pl(){return new lr(new Set)}function xo(n,e,t,r){const o=t._window;if(o===null)return null;const i=r||o.event,s=i?i.type:void 0,l=s==="selectionchange",a=!zr&&(l||s==="beforeinput"||s==="compositionstart"||s==="compositionend"||s==="click"&&i&&i.detail===3||s==="drop"||s===void 0);let c,u,f,d;if(O(n)&&!a)return n.clone();if(e===null)return null;if(c=e.anchorNode,u=e.focusNode,f=e.anchorOffset,d=e.focusOffset,(l||s===void 0)&&O(n)&&!mn(t,c,u))return n.clone();const g=hl(c,f,u,d,t,n);if(g===null)return null;const[h,p]=g;return new me(h,p,O(n)?n.format:0,O(n)?n.style:"")}function F(){return Xt()._selection}function Ke(){return j()._editorState._selection}function Xn(n,e,t,r=1){const o=n.anchor,i=n.focus,s=o.getNode(),l=i.getNode();if(!e.is(s)&&!e.is(l))return;const a=e.__key;if(n.isCollapsed()){const c=o.offset;if(t<=c&&r>0||t<c&&r<0){const u=Math.max(0,c+r);o.set(a,u,"element"),i.set(a,u,"element"),vi(n)}}else{const c=n.isBackward(),u=c?i:o,f=u.getNode(),d=c?o:i,g=d.getNode();if(e.is(f)){const h=u.offset;(t<=h&&r>0||t<h&&r<0)&&u.set(a,Math.max(0,h+r),"element")}if(e.is(g)){const h=d.offset;(t<=h&&r>0||t<h&&r<0)&&d.set(a,Math.max(0,h+r),"element")}}vi(n)}function vi(n){const e=n.anchor,t=e.offset,r=n.focus,o=r.offset,i=e.getNode(),s=r.getNode();if(n.isCollapsed()){if(!S(i))return;const l=i.getChildrenSize(),a=t>=l,c=a?i.getChildAtIndex(l-1):i.getChildAtIndex(t);if(A(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text"),r.set(c.__key,u,"text")}return}if(S(i)){const l=i.getChildrenSize(),a=t>=l,c=a?i.getChildAtIndex(l-1):i.getChildAtIndex(t);if(A(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text")}}if(S(s)){const l=s.getChildrenSize(),a=o>=l,c=a?s.getChildAtIndex(l-1):s.getChildAtIndex(o);if(A(c)){let u=0;a&&(u=c.getTextContentSize()),r.set(c.__key,u,"text")}}}function Qn(n,e,t,r,o){let i=null,s=0,l=null;r!==null?(i=r.__key,A(r)?(s=r.getTextContentSize(),l="text"):S(r)&&(s=r.getChildrenSize(),l="element")):o!==null&&(i=o.__key,A(o)?l="text":S(o)&&(l="element")),i!==null&&l!==null?n.set(i,s,l):(s=e.getIndexWithinParent(),s===-1&&(s=t.getChildrenSize()),n.set(t.__key,s,"element"))}function wi(n,e,t,r,o){n.type==="text"?n.set(t,n.offset+(e?0:o),"text"):n.offset>r.getIndexWithinParent()&&n.set(n.key,n.offset-1,"element")}function _l(n,e,t,r,o){try{n.setBaseAndExtent(e,t,r,o)}catch{}}function bc(n,e,t,r,o,i,s){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,u=r.focusOffset,f=document.activeElement;if(o.has(hc)&&f!==i||f!==null&&Eo(f))return;if(!O(e))return void(n!==null&&mn(t,l,a)&&r.removeAllRanges());const d=e.anchor,g=e.focus,h=d.key,p=g.key,_=ue(t,h),m=ue(t,p),y=d.offset,C=g.offset,w=e.format,E=e.style,v=e.isCollapsed();let k=_,T=m,b=!1;if(d.type==="text"){k=Pe(_);const V=d.getNode();b=V.getFormat()!==w||V.getStyle()!==E}else O(n)&&n.anchor.type==="text"&&(b=!0);var M,L,z,R,K;if(g.type==="text"&&(T=Pe(m)),k!==null&&T!==null&&(v&&(n===null||b||O(n)&&(n.format!==w||n.style!==E))&&(M=w,L=E,z=y,R=h,K=performance.now(),nl=[M,L,z,R,K]),c!==y||u!==C||l!==k||a!==T||r.type==="Range"&&v||(f!==null&&i.contains(f)||o.has(di)||i.focus({preventScroll:!0}),d.type==="element"))){if(_l(r,k,y,T,C),!Ht||!e.isCollapsed()||i===null||o.has(di)||document.activeElement!==null&&i.contains(document.activeElement)||i.focus({preventScroll:!0}),!o.has(gc)&&e.isCollapsed()&&i!==null&&i===document.activeElement){const V=O(e)&&e.anchor.type==="element"?k.childNodes[y]||null:r.rangeCount>0?r.getRangeAt(0):null;if(V!==null){let ut;if(V instanceof Text){const Nt=document.createRange();Nt.selectNode(V),ut=Nt.getBoundingClientRect()}else ut=V.getBoundingClientRect();(function(Nt,xe,Dt){const Ve=Rl(Dt),Uo=Do(Ve);if(Ve===null||Uo===null)return;let{top:xr,bottom:Sr}=xe,vn=0,wn=0,Bt=Dt;for(;Bt!==null;){const Cr=Bt===Ve.body;if(Cr)vn=0,wn=mt(Nt).innerHeight;else{const bn=Bt.getBoundingClientRect();vn=bn.top,wn=bn.bottom}let He=0;if(xr<vn?He=-(vn-xr):Sr>wn&&(He=Sr-wn),He!==0)if(Cr)Uo.scrollBy(0,He);else{const bn=Bt.scrollTop;Bt.scrollTop+=He;const Vo=Bt.scrollTop-bn;xr-=Vo,Sr-=Vo}if(Cr)break;Bt=yn(Bt)}})(t,ut,i)}}Xr=!0}}function Nc(n){let e=F()||Ke();e===null&&(e=H().selectEnd()),e.insertNodes(n)}function Tr(n){let e=n;n.isCollapsed()||e.removeText();const t=F();O(t)&&(e=t),O(e)||N(161);const r=e.anchor;let o=r.getNode(),i=r.offset;for(;!pt(o);){const s=o;if([o,i]=Ec(o,i),s.is(o))break}return i}function Ec(n,e){const t=n.getParent();if(!t){const o=Q();return H().append(o),o.select(),[H(),0]}if(A(n)){const o=n.splitText(e);if(o.length===0)return[t,n.getIndexWithinParent()];const i=e===0?0:1;return[t,o[0].getIndexWithinParent()+i]}if(!S(n)||e===0)return[t,n.getIndexWithinParent()];const r=n.getChildAtIndex(e);if(r){const o=new me(_t(n.__key,e,"element"),_t(n.__key,e,"element"),0,""),i=n.insertNewAfter(o);i&&i.append(r,...r.getNextSiblings())}return[t,n.getIndexWithinParent()+1]}function bi(n,e,t,r,o="decorators-and-blocks"){if(e==="move"&&r==="character"&&!n.isCollapsed()){const[u,f]=t===n.isBackward()?[n.focus,n.anchor]:[n.anchor,n.focus];return f.set(u.key,u.offset,u.type),!0}const i=It(n.focus,t?"previous":"next"),s=r==="lineboundary",l=e==="move";let a=i,c=o==="decorators-and-blocks";if(!Kl(a)){for(const u of a){c=!1;const{origin:f}=u;if(!B(f)||f.isIsolated()||(a=u,!s||!f.isInline()))break}if(c)for(const u of $o(i).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(Ct(u))u.origin.isInline()||(a=u);else{if(S(u.origin))continue;B(u.origin)&&!u.origin.isInline()&&(a=u)}break}}if(a===i)return!1;if(l&&!s&&B(a.origin)&&a.origin.isKeyboardSelectable()){const u=pl();return u.add(a.origin.getKey()),ct(u),!0}return a=kt(a),l&&dn(n.anchor,a),dn(n.focus,a),c||!s}let tt=null,et=null,ft=!1,kr=!1,Ln=0;const Ni={characterData:!0,childList:!0,subtree:!0};function Be(){return ft||tt!==null&&tt._readOnly}function ot(){ft&&N(13)}function ml(){Ln>99&&N(14)}function Xt(){return tt===null&&N(195,yl()),tt}function j(){return et===null&&N(196,yl()),et}function yl(){let n=0;const e=new Set,t=ce.version;if(typeof window<"u")for(const o of document.querySelectorAll("[contenteditable]")){const i=cr(o);if(To(i))n++;else if(i){let s=String(i.constructor.version||"<0.17.1");s===t&&(s+=" (separately built, likely a bundler configuration issue)"),e.add(s)}}let r=` Detected on the page: ${n} compatible editor(s) with version ${t}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function Tc(){return et}function Ei(n,e,t){const r=e.__type,o=Nl(n,r);let i=t.get(r);i===void 0&&(i=Array.from(o.transforms),t.set(r,i));const s=i.length;for(let l=0;l<s&&(i[l](e),e.isAttached());l++);}function Ti(n,e){return n!==void 0&&n.__key!==e&&n.isAttached()}function xl(n,e){if(!e)return;const t=n._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const o of r)t.add(o)}function kc(n){return So(n,j()._nodes)}function So(n,e){const t=n.type,r=e.get(t);r===void 0&&N(17,t);const o=r.klass;n.type!==o.getType()&&N(18,o.name);const i=o.importJSON(n),s=n.children;if(S(i)&&Array.isArray(s))for(let l=0;l<s.length;l++){const a=So(s[l],e);i.append(a)}return i}function ki(n,e,t){const r=tt,o=ft,i=et;tt=e,ft=!0,et=n;try{return t()}finally{tt=r,ft=o,et=i}}function $t(n,e){const t=n._pendingEditorState,r=n._rootElement,o=n._headless||r===null;if(t===null)return;const i=n._editorState,s=i._selection,l=t._selection,a=n._dirtyType!==0,c=tt,u=ft,f=et,d=n._updating,g=n._observer;let h=null;if(n._pendingEditorState=null,n._editorState=t,!o&&a&&g!==null){et=n,tt=t,ft=!1,n._updating=!0;try{const v=n._dirtyType,k=n._dirtyElements,T=n._dirtyLeaves;g.disconnect(),h=qa(i,t,n,v,k,T)}catch(v){if(v instanceof Error&&n._onError(v),kr)throw v;return wl(n,null,r,t),Ns(n),n._dirtyType=2,kr=!0,$t(n,i),void(kr=!1)}finally{g.observe(r,Ni),n._updating=d,tt=c,ft=u,et=f}}t._readOnly||(t._readOnly=!0);const p=n._dirtyLeaves,_=n._dirtyElements,m=n._normalizedNodes,y=n._updateTags,C=n._deferred;a&&(n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),function(v,k){const T=v._decorators;let b=v._pendingDecorators||T;const M=k._nodeMap;let L;for(L in b)M.has(L)||(b===T&&(b=Ml(v)),delete b[L])}(n,t);const w=o?null:bt(mt(n));if(n._editable&&w!==null&&(a||l===null||l.dirty||!l.is(s))&&r!==null&&!y.has(pc)){et=n,tt=t;try{if(g!==null&&g.disconnect(),a||l===null||l.dirty){const v=n._blockCursorElement;v!==null&&lo(v,n,r),bc(s,l,n,w,y,r)}(function(v,k,T){let b=v._blockCursorElement;if(O(T)&&T.isCollapsed()&&T.anchor.type==="element"&&k.contains(document.activeElement)){const M=T.anchor,L=M.getNode(),z=M.offset;let R=!1,K=null;if(z===L.getChildrenSize())Mr(L.getChildAtIndex(z-1))&&(R=!0);else{const V=L.getChildAtIndex(z);if(V!==null&&Mr(V)){const ut=V.getPreviousSibling();(ut===null||Mr(ut))&&(R=!0,K=v.getElementByKey(V.__key))}}if(R){const V=v.getElementByKey(L.__key);return b===null&&(v._blockCursorElement=b=function(ut){const Nt=ut.theme,xe=document.createElement("div");xe.contentEditable="false",xe.setAttribute("data-lexical-cursor","true");let Dt=Nt.blockCursor;if(Dt!==void 0){if(typeof Dt=="string"){const Ve=pr(Dt);Dt=Nt.blockCursor=Ve}Dt!==void 0&&xe.classList.add(...Dt)}return xe}(v._config)),k.style.caretColor="transparent",void(K===null?V.appendChild(b):V.insertBefore(b,K))}}b!==null&&lo(b,v,k)})(n,r,l)}finally{g!==null&&g.observe(r,Ni),et=f,tt=c}}h!==null&&function(v,k,T,b,M){const L=Array.from(v._listeners.mutation),z=L.length;for(let R=0;R<z;R++){const[K,V]=L[R];for(const ut of V){const Nt=k.get(ut);Nt!==void 0&&K(Nt,{dirtyLeaves:b,prevEditorState:M,updateTags:T})}}}(n,h,y,p,i),O(l)||l===null||s!==null&&s.is(l)||n.dispatchCommand(Fs,void 0);const E=n._pendingDecorators;E!==null&&(n._decorators=E,n._pendingDecorators=null,tn("decorator",n,!0,E)),function(v,k,T){const b=Di(k),M=Di(T);b!==M&&tn("textcontent",v,!0,M)}(n,e||i,t),tn("update",n,!0,{dirtyElements:_,dirtyLeaves:p,editorState:t,mutatedNodes:h,normalizedNodes:m,prevEditorState:e||i,tags:y}),function(v,k){if(v._deferred=[],k.length!==0){const T=v._updating;v._updating=!0;try{for(let b=0;b<k.length;b++)k[b]()}finally{v._updating=T}}}(n,C),function(v){const k=v._updates;if(k.length!==0){const T=k.shift();if(T){const[b,M]=T;ar(v,b,M)}}}(n)}function tn(n,e,t,...r){const o=e._updating;e._updating=t;try{const i=Array.from(e._listeners[n]);for(let s=0;s<i.length;s++)i[s].apply(null,r)}finally{e._updating=o}}function Oi(n,e){const t=n._updates;let r=e||!1;for(;t.length!==0;){const o=t.shift();if(o){const[i,s]=o,l=n._pendingEditorState;let a;s!==void 0&&(a=s.onUpdate,s.skipTransforms&&(r=!0),s.discrete&&(l===null&&N(191),l._flushSync=!0),a&&n._deferred.push(a),xl(n,s.tag)),l==null?ar(n,i,s):i()}}return r}function ar(n,e,t){const r=n._updateTags;let o,i=!1,s=!1;t!==void 0&&(o=t.onUpdate,xl(n,t.tag),i=t.skipTransforms||!1,s=t.discrete||!1),o&&n._deferred.push(o);const l=n._editorState;let a=n._pendingEditorState,c=!1;(a===null||a._readOnly)&&(a=n._pendingEditorState=Cl(a||l),c=!0),a._flushSync=s;const u=tt,f=ft,d=et,g=n._updating;tt=a,ft=!1,n._updating=!0,et=n;const h=n._headless||n.getRootElement()===null;bo(null);try{c&&(h?l._selection!==null&&(a._selection=l._selection.clone()):a._selection=function(y,C){const w=y.getEditorState()._selection,E=bt(mt(y));return O(w)||w==null?xo(w,E,y,C):w.clone()}(n,t&&t.event||null));const _=n._compositionKey;e(),i=Oi(n,i),function(y,C){const w=C.getEditorState()._selection,E=y._selection;if(O(E)){const v=E.anchor,k=E.focus;let T;if(v.type==="text"&&(T=v.getNode(),T.selectionTransform(w,E)),k.type==="text"){const b=k.getNode();T!==b&&b.selectionTransform(w,E)}}}(a,n),n._dirtyType!==0&&(i?function(y,C){const w=C._dirtyLeaves,E=y._nodeMap;for(const v of w){const k=E.get(v);A(k)&&k.isAttached()&&k.isSimpleText()&&!k.isUnmergeable()&&ri(k)}}(a,n):function(y,C){const w=C._dirtyLeaves,E=C._dirtyElements,v=y._nodeMap,k=Jt(),T=new Map;let b=w,M=b.size,L=E,z=L.size;for(;M>0||z>0;){if(M>0){C._dirtyLeaves=new Set;for(const R of b){const K=v.get(R);A(K)&&K.isAttached()&&K.isSimpleText()&&!K.isUnmergeable()&&ri(K),K!==void 0&&Ti(K,k)&&Ei(C,K,T),w.add(R)}if(b=C._dirtyLeaves,M=b.size,M>0){Ln++;continue}}C._dirtyLeaves=new Set,C._dirtyElements=new Map,L.delete("root")&&L.set("root",!0);for(const R of L){const K=R[0],V=R[1];if(E.set(K,V),!V)continue;const ut=v.get(K);ut!==void 0&&Ti(ut,k)&&Ei(C,ut,T)}b=C._dirtyLeaves,M=b.size,L=C._dirtyElements,z=L.size,Ln++}C._dirtyLeaves=w,C._dirtyElements=E}(a,n),Oi(n),function(y,C,w,E){const v=y._nodeMap,k=C._nodeMap,T=[];for(const[b]of E){const M=k.get(b);M!==void 0&&(M.isAttached()||(S(M)&&vs(M,b,v,k,T,E),v.has(b)||E.delete(b),T.push(b)))}for(const b of T)k.delete(b);for(const b of w){const M=k.get(b);M===void 0||M.isAttached()||(v.has(b)||w.delete(b),k.delete(b))}}(l,a,n._dirtyLeaves,n._dirtyElements)),_!==n._compositionKey&&(a._flushSync=!0);const m=a._selection;if(O(m)){const y=a._nodeMap,C=m.anchor.key,w=m.focus.key;y.get(C)!==void 0&&y.get(w)!==void 0||N(19)}else dt(m)&&m._nodes.size===0&&(a._selection=null)}catch(_){return _ instanceof Error&&n._onError(_),n._pendingEditorState=l,n._dirtyType=2,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void $t(n)}finally{tt=u,ft=f,et=d,n._updating=g,Ln=0}n._dirtyType!==0||n._deferred.length>0||function(_,m){const y=m.getEditorState()._selection,C=_._selection;if(C!==null){if(C.dirty||!C.is(y))return!0}else if(y!==null)return!0;return!1}(a,n)?a._flushSync?(a._flushSync=!1,$t(n)):c&&Pc(()=>{$t(n)}):(a._flushSync=!1,c&&(r.clear(),n._deferred=[],n._pendingEditorState=null))}function Ot(n,e,t){et===n&&t===void 0?e():ar(n,e,t)}class en{constructor(e,t,r){x(this,"element");x(this,"before");x(this,"after");this.element=e,this.before=t||null,this.after=r||null}withBefore(e){return new en(this.element,e,this.after)}withAfter(e){return new en(this.element,this.before,e)}withElement(e){return this.element===e?this:new en(e,this.before,this.after)}insertChild(e){const t=this.before||this.getManagedLineBreak();return t!==null&&t.parentElement!==this.element&&N(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&N(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&N(224),this.element.replaceChild(e,t),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const t=e==="decorator"&&(gn||$e||hn);this.insertManagedLineBreak(t)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const t=this.element,r=e.nodeName==="IMG"?e.nextSibling:null;r&&t.removeChild(r),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const t=this.getManagedLineBreak();if(t){if(e===(t.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,o=this.before,i=document.createElement("br");if(r.insertBefore(i,o),e){const s=document.createElement("img");s.setAttribute("data-lexical-linebreak","true"),s.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",s.alt="",r.insertBefore(s,i),r.__lexicalLineBreak=s}else r.__lexicalLineBreak=i}getFirstChildOffset(){let e=0;for(let t=this.after;t!==null;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,r,o){if(r===this.element){const a=this.getFirstChildOffset();return[e,Math.min(a+e.getChildrenSize(),Math.max(a,o))]}const i=Mi(t,r);i.push(o);const s=Mi(t,this.element);let l=e.getIndexWithinParent();for(let a=0;a<s.length;a++){const c=i[a],u=s[a];if(c===void 0||c<u)break;if(c>u){l+=1;break}}return[e.getParentOrThrow(),l]}}function Mi(n,e){const t=[];let r=e;for(;r!==n&&r!==null;r=r.parentNode){let o=0;for(let i=r.previousSibling;i!==null;i=i.previousSibling)o++;t.push(o)}return r!==n&&N(225),t.reverse()}class At extends St{constructor(t){super(t);x(this,"__first");x(this,"__last");x(this,"__size");x(this,"__format");x(this,"__style");x(this,"__indent");x(this,"__dir");x(this,"__textFormat");x(this,"__textStyle");this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return Pa[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=j()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(A(r)&&t.push(r),S(r)){const o=r.getAllTextNodes();t.push(...o)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;S(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;S(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),o=r.length;if(t>=o){const s=r[o-1];return S(s)&&s.getLastDescendant()||s||null}const i=r[t];return S(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Y(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&N(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Y(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&N(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let o,i;if(t<r/2){for(o=this.getFirstChild(),i=0;o!==null&&i<=t;){if(i===t)return o;o=o.getNextSibling(),i++}return null}for(o=this.getLastChild(),i=r-1;o!==null&&i>=t;){if(i===t)return o;o=o.getPreviousSibling(),i--}return null}getTextContent(){let t="";const r=this.getChildren(),o=r.length;for(let i=0;i<o;i++){const s=r[i];t+=s.getTextContent(),S(s)&&i!==o-1&&!s.isInline()&&(t+=or)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),o=r.length;for(let i=0;i<o;i++){const s=r[i];t+=s.getTextContentSize(),S(s)&&i!==o-1&&!s.isInline()&&(t+=2)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=Yo[t];return(this.getFormat()&r)!==0}return!1}hasTextFormat(t){const r=qt[t];return(this.getTextFormat()&r)!==0}getFormatFlags(t,r){return Zn(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){ot();const o=F();let i=t,s=r;const l=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const c=this.getFirstChild();if(A(c)||S(c))return c.select(0,0)}else if(!(t!==void 0&&t!==l||r!==void 0&&r!==l)){const c=this.getLastChild();if(A(c)||S(c))return c.select()}}i===void 0&&(i=l),s===void 0&&(s=l);const a=this.__key;return O(o)?(o.anchor.set(a,i,"element"),o.focus.set(a,s,"element"),o.dirty=!0,o):gl(a,i,a,s,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(r=>r.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?Yo[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,o){Gn(this)&&N(324,this.__key,this.__type);const i=this.getChildrenSize(),s=this.getWritable();t+r<=i||N(226,String(t),String(r),String(i));const l=s.__key,a=[],c=[],u=this.getChildAtIndex(t+r);let f=null,d=i-r+o.length;if(t!==0)if(t===i)f=this.getLastChild();else{const h=this.getChildAtIndex(t);h!==null&&(f=h.getPreviousSibling())}if(r>0){let h=f===null?this.getFirstChild():f.getNextSibling();for(let p=0;p<r;p++){h===null&&N(100);const _=h.getNextSibling(),m=h.__key;ie(h.getWritable()),c.push(m),h=_}}let g=f;for(const h of o){g!==null&&h.is(g)&&(f=g=g.getPreviousSibling());const p=h.getWritable();p.__parent===l&&d--,ie(p);const _=h.__key;if(g===null)s.__first=_,p.__prev=null;else{const m=g.getWritable();m.__next=_,p.__prev=m.__key}h.__key===l&&N(76),p.__parent=l,a.push(_),g=h}if(t+r===i)g!==null&&(g.getWritable().__next=null,s.__last=g.__key);else if(u!==null){const h=u.getWritable();if(g!==null){const p=g.getWritable();h.__prev=g.__key,p.__next=u.__key}else h.__prev=null}if(s.__size=d,c.length){const h=F();if(O(h)){const p=new Set(c),_=new Set(a),{anchor:m,focus:y}=h;Ai(m,p,_)&&Qn(m,m.getNode(),this,f,u),Ai(y,p,_)&&Qn(y,y.getNode(),this,f,u),d!==0||this.canBeEmpty()||Mt(this)||this.remove()}}return s}getDOMSlot(t){return new en(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(q(r)){const o=this.getIndent();o>0&&(r.style.paddingInlineStart=40*o+"px");const i=this.getDirection();i&&(r.dir=i)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),o=this.getTextStyle();return r===0&&o===""||Mt(this)||this.getChildren().some(A)||(r!==0&&(t.textFormat=r),o!==""&&(t.textStyle=o)),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,o){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const o=this.getDOMSlot(t);let i=o.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){const l=r.getElementByKey(s.getKey());l!==null&&(i==null?(o.insertChild(l),i=l):i!==l&&o.replaceChild(l,i),i=i.nextSibling)}}}function S(n){return n instanceof At}function Ai(n,e,t){let r=n.getNode();for(;r;){const o=r.__key;if(e.has(o)&&!t.has(o))return!0;r=r.getParent()}return!1}class Sl extends St{decorate(e,t){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function B(n){return n instanceof Sl}class We extends At{constructor(){super("root");x(this,"__cachedText");this.__cachedText=null}static getType(){return"root"}static clone(){return new We}getTopLevelElementOrThrow(){N(51)}getTextContent(){const t=this.__cachedText;return!Be()&&j()._dirtyType!==0||t===null?super.getTextContent():t}remove(){N(52)}replace(t){N(53)}insertBefore(t){N(54)}insertAfter(t){N(55)}updateDOM(t,r){return!1}splice(t,r,o){for(const i of o)S(i)||B(i)||N(282);return super.splice(t,r,o)}static importJSON(t){return H().updateFromJSON(t)}collapseAtStart(){return!0}}function nt(n){return n instanceof We}function Cl(n){return new _n(new Map(n._nodeMap))}function Co(){return new _n(new Map([["root",new We]]))}function vl(n){const e=n.exportJSON(),t=n.constructor;if(e.type!==t.getType()&&N(130,t.name),S(n)){const r=e.children;Array.isArray(r)||N(59,t.name);const o=n.getChildren();for(let i=0;i<o.length;i++){const s=vl(o[i]);r.push(s)}}return e}function Oc(n){return n instanceof _n}class _n{constructor(e,t){x(this,"_nodeMap");x(this,"_selection");x(this,"_flushSync");x(this,"_readOnly");this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,t){return ki(t&&t.editor||null,this,e)}clone(e){const t=new _n(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return ki(null,this,()=>({root:vl(H())}))}}class vo extends At{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class Je extends At{static getType(){return"paragraph"}static clone(e){return new Je(e.__key)}createDOM(e){const t=document.createElement("p"),r=De(e.theme,"paragraph");return r!==void 0&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:Mc,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(q(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();r&&(t.style.textAlign=r)}return{element:t}}static importJSON(e){return Q().updateFromJSON(e)}exportJSON(){const e=super.exportJSON();if(e.textFormat===void 0||e.textStyle===void 0){const t=this.getChildren().find(A);t?(e.textFormat=t.getFormat(),e.textStyle=t.getStyle()):(e.textFormat=this.getTextFormat(),e.textStyle=this.getTextStyle())}return e}insertNewAfter(e,t){const r=Q();r.setTextFormat(e.format),r.setTextStyle(e.style);const o=this.getDirection();return r.setDirection(o),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,t),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||A(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Mc(n){const e=Q();return n.style&&(e.setFormat(n.style.textAlign),Fo(n,e)),{node:e}}function Q(){return Kt(new Je)}function wo(n){return n instanceof Je}const $=0,Hf=1,qf=2,Yf=3,Ac=4;function wl(n,e,t,r){const o=n._keyToDOMMap;o.clear(),n._editorState=Co(),n._pendingEditorState=r,n._compositionKey=null,n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;const i=n._observer;i!==null&&(i.disconnect(),n._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",o.set("root",t))}function Dc(n){const e=new Set,t=new Set;let r=n;for(;r;){const{ownNodeConfig:o}=dr(r),i=r.transform;if(!t.has(i)){t.add(i);const s=r.transform();s&&e.add(s)}if(o){const s=o.$transform;s&&e.add(s),r=o.extends}else{const s=Object.getPrototypeOf(r);r=s.prototype instanceof St&&s!==St?s:void 0}}return e}function bl(n){const e=n||{},t=Tc(),r=e.theme||{},o=n===void 0?t:e.parentEditor||null,i=e.disableEvents||!1,s=Co(),l=e.namespace||(o!==null?o._config.namespace:Fl()),a=e.editorState,c=[We,_e,Ie,ze,Je,vo,...e.nodes||[]],{onError:u,html:f}=e,d=e.editable===void 0||e.editable;let g;if(n===void 0&&t!==null)g=t._nodes;else{g=new Map;for(let p=0;p<c.length;p++){let _=c[p],m=null,y=null;if(typeof _!="function"){const E=_;_=E.replace,m=E.with,y=E.withKlass||null}dr(_);const C=_.getType(),w=Dc(_);g.set(C,{exportDOM:f&&f.export?f.export.get(_):void 0,klass:_,replace:m,replaceWithKlass:y,sharedNodeState:Ja(c[p]),transforms:w})}}const h=new ce(s,o,g,{disableEvents:i,namespace:l,theme:r},u||console.error,function(p,_){const m=new Map,y=new Set,C=w=>{Object.keys(w).forEach(E=>{let v=m.get(E);v===void 0&&(v=[],m.set(E,v)),v.push(w[E])})};return p.forEach(w=>{const E=w.klass.importDOM;if(E==null||y.has(E))return;y.add(E);const v=E.call(w.klass);v!==null&&C(v)}),_&&C(_),m}(g,f?f.import:void 0),d,n);return a!==void 0&&(h._pendingEditorState=a,h._dirtyType=2),function(p){p.registerCommand(Ls,sc,$),p.registerCommand(Rs,lc,$),p.registerCommand($s,ac,$),p.registerCommand(Is,cc,$),p.registerCommand(Bs,uc,$)}(h),h}class ce{constructor(e,t,r,o,i,s,l,a){x(this,"_headless");x(this,"_parentEditor");x(this,"_rootElement");x(this,"_editorState");x(this,"_pendingEditorState");x(this,"_compositionKey");x(this,"_deferred");x(this,"_keyToDOMMap");x(this,"_updates");x(this,"_updating");x(this,"_listeners");x(this,"_commands");x(this,"_nodes");x(this,"_decorators");x(this,"_pendingDecorators");x(this,"_config");x(this,"_dirtyType");x(this,"_cloneNotNeeded");x(this,"_dirtyLeaves");x(this,"_dirtyElements");x(this,"_normalizedNodes");x(this,"_updateTags");x(this,"_observer");x(this,"_key");x(this,"_onError");x(this,"_htmlConversions");x(this,"_window");x(this,"_editable");x(this,"_blockCursorElement");x(this,"_createEditorArgs");this._createEditorArgs=a,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=o,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Fl(),this._onError=i,this._htmlConversions=s,this._editable=l,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){r===void 0&&N(35);const o=this._commands;o.has(e)||o.set(e,[new Set,new Set,new Set,new Set,new Set]);const i=o.get(e);i===void 0&&N(36,String(e));const s=i[r];return s.add(t),()=>{s.delete(t),i.every(l=>l.size===0)&&o.delete(e)}}registerMutationListener(e,t,r){const o=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,i=this._listeners.mutation;let s=i.get(t);s===void 0&&(s=new Set,i.set(t,s)),s.add(o);const l=r&&r.skipInitialization;return l!==void 0&&l||this.initializeMutationListener(t,o),()=>{s.delete(o),s.size===0&&i.delete(t)}}getRegisteredNode(e){const t=this._nodes.get(e.getType());return t===void 0&&N(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){const r=this._editorState,o=zi(r).get(t.getType());if(!o)return;const i=new Map;for(const s of o.keys())i.set(s,"created");i.size>0&&e(i,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){const r=this.getRegisteredNode(e);return r.transforms.add(t),r}registerNodeTransform(e,t){const r=this.registerNodeTransformToKlass(e,t),o=[r],i=r.replaceWithKlass;if(i!=null){const s=this.registerNodeTransformToKlass(i,t);o.push(s)}return function(s,l){const a=zi(s.getEditorState()),c=[];for(const u of l){const f=a.get(u);f&&c.push(f)}c.length!==0&&s.update(()=>{for(const u of c)for(const f of u.keys()){const d=Y(f);d&&d.markDirty()}},s._pendingEditorState===null?{tag:Ae}:void 0)}(this,o.map(s=>s.klass.getType())),()=>{o.forEach(s=>s.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return D(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const r=De(this._config.theme,"root"),o=this._pendingEditorState||this._editorState;if(this._rootElement=e,wl(this,t,e,o),t!==null&&(this._config.disableEvents||fc(t),r!=null&&t.classList.remove(...r)),e!==null){const i=Do(e),s=e.style;s.userSelect="text",s.whiteSpace="pre-wrap",s.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=i,this._dirtyType=2,Ns(this),this._updateTags.add(Ae),$t(this),this._config.disableEvents||function(l,a){const c=l.ownerDocument;Gr.set(l,c);const u=qn.get(c)??0;u<1&&c.addEventListener("selectionchange",ll),qn.set(c,u+1),l.__lexicalEditor=a;const f=sl(l);for(let d=0;d<Yr.length;d++){const[g,h]=Yr[d],p=typeof h=="function"?_=>{fi(_)||(ui(_),(a.isEditable()||g==="click")&&h(_,a))}:_=>{if(fi(_))return;ui(_);const m=a.isEditable();switch(g){case"cut":return m&&D(a,_o,_);case"copy":return D(a,sr,_);case"paste":return m&&D(a,po,_);case"dragstart":return m&&D(a,Qs,_);case"dragover":return m&&D(a,Zs,_);case"dragend":return m&&D(a,ec,_);case"focus":return m&&D(a,rc,_);case"blur":return m&&D(a,oc,_);case"drop":return m&&D(a,Xs,_)}};l.addEventListener(g,p),f.push(()=>{l.removeEventListener(g,p)})}}(e,this),r!=null&&e.classList.add(...r)}else this._window=null,this._updateTags.add(Ae),$t(this);tn("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&N(38);let r=e;r._readOnly&&(r=Cl(e),r._selection=e._selection?e._selection.clone():null),bs(this);const o=this._pendingEditorState,i=this._updateTags,s=t!==void 0?t.tag:null;o===null||o.isEmpty()||(s!=null&&i.add(s),$t(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,s!=null&&i.add(s),this._updating||$t(this)}parseEditorState(e,t){return function(r,o,i){const s=Co(),l=tt,a=ft,c=et,u=o._dirtyElements,f=o._dirtyLeaves,d=o._cloneNotNeeded,g=o._dirtyType;o._dirtyElements=new Map,o._dirtyLeaves=new Set,o._cloneNotNeeded=new Set,o._dirtyType=0,tt=s,ft=!1,et=o,bo(null);try{const h=o._nodes;So(r.root,h),i&&i(),s._readOnly=!0}catch(h){h instanceof Error&&o._onError(h)}finally{o._dirtyElements=u,o._dirtyLeaves=f,o._cloneNotNeeded=d,o._dirtyType=g,tt=l,ft=a,et=c}return s}(typeof e=="string"?JSON.parse(e):e,this,t)}read(e){return $t(this),this.getEditorState().read(e,{editor:this})}update(e,t){(function(r,o,i){r._updating?r._updates.push([o,i]):ar(r,o,i)})(this,e,t)}focus(e,t={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),Ot(this,()=>{const o=F(),i=H();o!==null?o.dirty||ct(o.clone()):i.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?i.selectStart():i.selectEnd()),Ic("focus"),zc(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=bt(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,tn("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}x(ce,"version");ce.version="0.40.0+prod.esm";let oo=null;function bo(n){oo=n}let Fc=1;function Nl(n,e){const t=No(n,e);return t===void 0&&N(30,e),t}function No(n,e){return n._nodes.get(e)}const Pc=typeof queueMicrotask=="function"?queueMicrotask:n=>{Promise.resolve().then(n)};function El(n){return B(Yt(n))}function Eo(n){const e=document.activeElement;if(!q(e))return!1;const t=e.nodeName;return B(Yt(n))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&cr(e)==null)}function mn(n,e,t){const r=n.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(t)&&e!==null&&!Eo(e)&&Tl(e)===n}catch{return!1}}function To(n){return n instanceof ce}function Tl(n){let e=n;for(;e!=null;){const t=cr(e);if(To(t))return t;e=yn(e)}return null}function cr(n){return n?n.__lexicalEditor:null}function oe(n){return fl(n)||n.isToken()}function Rt(n){return oe(n)||n.isSegmented()}function zt(n){return je(n)&&n.nodeType===3}function kl(n){return je(n)&&n.nodeType===9}function Pe(n){let e=n;for(;e!=null;){if(zt(e))return e;e=e.firstChild}return null}function Zn(n,e,t){const r=qt[e];if(t!==null&&(n&r)===(t&r))return n;let o=n^r;return e==="subscript"?o&=-65:e==="superscript"?o&=-33:e==="lowercase"?(o&=-513,o&=-1025):e==="uppercase"?(o&=-257,o&=-1025):e==="capitalize"&&(o&=-257,o&=-513),o}function Lc(n,e){const t=function(){const s=oo;return oo=null,s}();if((e=e||t&&t.__key)!=null)return void(n.__key=e);ot(),ml();const r=j(),o=Xt(),i=""+Fc++;o._nodeMap.set(i,n),S(n)?r._dirtyElements.set(i,!0):r._dirtyLeaves.add(i),r._cloneNotNeeded.add(i),r._dirtyType=1,n.__key=i}function ie(n){const e=n.getParent();if(e!==null){const t=n.getWritable(),r=e.getWritable(),o=n.getPreviousSibling(),i=n.getNextSibling(),s=i!==null?i.__key:null,l=o!==null?o.__key:null,a=o!==null?o.getWritable():null,c=i!==null?i.getWritable():null;o===null&&(r.__first=s),i===null&&(r.__last=l),a!==null&&(a.__next=s),c!==null&&(c.__prev=l),t.__prev=null,t.__next=null,t.__parent=null,r.__size--}}function tr(n){ml(),Gn(n)&&N(323,n.__key,n.__type);const e=n.getLatest(),t=e.__parent,r=Xt(),o=j(),i=r._nodeMap,s=o._dirtyElements;t!==null&&function(a,c,u){let f=a;for(;f!==null;){if(u.has(f))return;const d=c.get(f);if(d===void 0)break;u.set(f,!1),f=d.__parent}}(t,i,s);const l=e.__key;o._dirtyType=1,S(n)?s.set(l,!0):o._dirtyLeaves.add(l)}function it(n){ot();const e=j(),t=e._compositionKey;if(n!==t){if(e._compositionKey=n,t!==null){const r=Y(t);r!==null&&r.getWritable()}if(n!==null){const r=Y(n);r!==null&&r.getWritable()}}}function Jt(){return Be()?null:j()._compositionKey}function Y(n,e){const t=(e||Xt())._nodeMap.get(n);return t===void 0?null:t}function Ol(n,e){const t=ur(n,j());return t!==void 0?Y(t,e):null}function ur(n,e){return n[`__lexicalKey_${e._key}`]}function Yt(n,e){let t=n;for(;t!=null;){const r=Ol(t,e);if(r!==null)return r;t=yn(t)}return null}function Ml(n){const e=n._decorators,t=Object.assign({},e);return n._pendingDecorators=t,t}function Di(n){return n.read(()=>H().getTextContent())}function H(){return Al(Xt())}function Al(n){return n._nodeMap.get("root")}function ct(n){ot();const e=Xt();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),e._selection=n}function Te(n){const e=j(),t=function(r,o){let i=r;for(;i!=null;){const s=ur(i,o);if(s!==void 0)return s;i=yn(i)}return null}(n,e);return t===null?n===e.getRootElement()?Y("root"):null:Y(t)}function Dl(n){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)}function ko(n){const e=[];let t=n;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function Fl(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function Pl(n){return zt(n)?n.nodeValue:null}function Oo(n,e,t){const r=bt(mt(e));if(r===null)return;const o=r.anchorNode;let{anchorOffset:i,focusOffset:s}=r;if(o!==null){let l=Pl(o);const a=Yt(o);if(l!==null&&A(a)){if(l===rr&&t){const c=t.length;l=t,i=c,s=c}l!==null&&Mo(a,l,i,s,n)}}}function Mo(n,e,t,r,o){let i=n;if(i.isAttached()&&(o||!i.isDirty())){const s=i.isComposing();let l=e;(s||o)&&e[e.length-1]===rr&&(l=e.slice(0,-1));const a=i.getTextContent();if(o||l!==a){if(l===""){if(it(null),hn||$e||gn)i.remove();else{const p=j();setTimeout(()=>{p.update(()=>{i.isAttached()&&i.remove()})},20)}return}const c=i.getParent(),u=Ke(),f=i.getTextContentSize(),d=Jt(),g=i.getKey();if(i.isToken()||d!==null&&g===d&&!s||O(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===n.__key&&u.anchor.offset===0&&!i.canInsertTextBefore()&&!s||u.focus.key===n.__key&&u.focus.offset===f&&!i.canInsertTextAfter()&&!s))return void i.markDirty();const h=F();if(!O(h)||t===null||r===null)return void Fi(i,l,h);if(h.setTextNodeRange(i,t,i,r),i.isSegmented()){const p=rt(i.getTextContent());i.replace(p),i=p}Fi(i,l,h)}}}function Fi(n,e,t){if(n.setTextContent(e),O(t)){const r=n.getKey();for(const o of["anchor","focus"]){const i=t[o];i.type==="text"&&i.key===r&&(i.offset=Ut(n,i.offset,"clamp"))}}}function Tn(n,e,t){const r=e[t]||!1;return r==="any"||r===n[t]}function Rc(n,e){return Tn(n,e,"altKey")&&Tn(n,e,"ctrlKey")&&Tn(n,e,"shiftKey")&&Tn(n,e,"metaKey")}function J(n,e,t){return Rc(n,t)&&n.key.toLowerCase()===e.toLowerCase()}const Lt={ctrlKey:!yt,metaKey:yt},Pi={altKey:yt,ctrlKey:!yt};function Li(n){return n.key==="Backspace"}function Ri(n){return J(n,"a",Lt)}function $c(n){const e=H();if(O(n)){const t=n.anchor,r=n.focus,o=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(o.getKey(),0,"element"),r.set(o.getKey(),o.getChildrenSize(),"element"),rn(n),n}{const t=e.select(0,e.getChildrenSize());return ct(rn(t)),t}}function De(n,e){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});const t=n.__lexicalClassNameCache,r=t[e];if(r!==void 0)return r;const o=n[e];if(typeof o=="string"){const i=pr(o);return t[e]=i,i}return o}function Ao(n,e,t,r,o){if(t.size===0)return;const i=r.__type,s=r.__key,l=e.get(i);l===void 0&&N(33,i);const a=l.klass;let c=n.get(a);c===void 0&&(c=new Map,n.set(a,c));const u=c.get(s),f=u==="destroyed"&&o==="created";(u===void 0||f)&&c.set(s,f?"updated":o)}function $i(n,e,t){const r=n.getParent();let o=t,i=n;return r!==null&&(e&&t===0?(o=i.getIndexWithinParent(),i=r):e||t!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(e?o-1:o)}function io(n,e){const t=n.offset;if(n.type==="element")return $i(n.getNode(),e,t);{const r=n.getNode();if(e&&t===0||!e&&t===r.getTextContentSize()){const o=e?r.getPreviousSibling():r.getNextSibling();return o===null?$i(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):o}}return null}function Ll(n){const e=mt(n).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function D(n,e,t){return function(r,o,i){const s=ko(r);for(let l=4;l>=0;l--)for(let a=0;a<s.length;a++){const c=s[a],u=c._commands.get(o);if(u!==void 0){const f=u[l];if(f!==void 0){const d=Array.from(f),g=d.length;let h=!1;if(Ot(c,()=>{for(let p=0;p<g;p++)if(d[p](i,r))return void(h=!0)}),h)return h}}}return!1}(n,e,t)}function ue(n,e){const t=n._keyToDOMMap.get(e);return t===void 0&&N(75,e),t}function yn(n){const e=n.assignedSlot||n.parentElement;return ao(e)?e.host:e}function Rl(n){return kl(n)?n:q(n)?n.ownerDocument:null}function Gf(n){return j()._updateTags.has(n)}function Ic(n){ot(),j()._updateTags.add(n)}function zc(n){ot(),j()._deferred.push(n)}function so(n,e){let t=n.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function Do(n){const e=Rl(n);return e?e.defaultView:null}function mt(n){const e=n._window;return e===null&&N(78),e}function Kc(n){return S(n)&&n.isInline()||B(n)&&n.isInline()}function Bc(n){let e=n.getParentOrThrow();for(;e!==null;){if(Mt(e))return e;e=e.getParentOrThrow()}return e}function Mt(n){return nt(n)||S(n)&&n.isShadowRoot()}function Kt(n){const e=j(),t=n.getType(),r=No(e,t);r===void 0&&N(200,n.constructor.name,t);const{replace:o,replaceWithKlass:i}=r;if(o!==null){const s=o(n),l=s.constructor;return i!==null?s instanceof i||N(201,i.name,i.getType(),l.name,l.getType(),n.constructor.name,t):s instanceof n.constructor&&l!==n.constructor||N(202,l.name,l.getType(),n.constructor.name,t),s.__key===n.__key&&N(203,n.constructor.name,t,l.name,l.getType()),s}return n}function Or(n,e){!nt(n.getParent())||S(e)||B(e)||N(99)}function Wc(n){const e=Y(n);return e===null&&N(63,n),e}function Mr(n){return(B(n)||S(n)&&!n.canBeEmpty())&&!n.isInline()}function lo(n,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=n.parentElement;r!==null&&r.removeChild(n)}function bt(n){return wt?(n||window).getSelection():null}function Jc(n){const e=Do(n);return e?e.getSelection():null}function Xf(n){return q(n)&&n.tagName==="A"}function q(n){return je(n)&&n.nodeType===1}function je(n){return typeof n=="object"&&n!==null&&"nodeType"in n&&typeof n.nodeType=="number"}function ao(n){return je(n)&&n.nodeType===11}function co(n){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return n.nodeName.match(e)!==null}function er(n){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return n.nodeName.match(e)!==null}function pt(n){if(B(n)&&!n.isInline())return!0;if(!S(n)||Mt(n))return!1;const e=n.getFirstChild(),t=e===null||re(e)||A(e)||e.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&t}function fr(){return j()}const Ii=new WeakMap,jc=new Map;function zi(n){if(!n._readOnly&&n.isEmpty())return jc;n._readOnly||N(192);let e=Ii.get(n);return e||(e=function(t){const r=new Map;for(const[o,i]of t._nodeMap){const s=i.__type;let l=r.get(s);l||(l=new Map,r.set(s,l)),l.set(o,i)}return r}(n),Ii.set(n,e)),e}function $l(n){const e=n.constructor.clone(n);return e.afterCloneFrom(n),e}function Uc(n){return(e=$l(n))[al]=!0,e;var e}function Fo(n,e){const t=parseInt(n.style.paddingInlineStart,10)||0,r=Math.round(t/40);e.setIndent(r)}function Vc(n){n.__lexicalUnmanaged=!0}function Hc(n){return n.__lexicalUnmanaged===!0}function qe(n,e){return function(t,r){return Object.prototype.hasOwnProperty.call(t,r)}(n,e)&&n[e]!==St[e]}function dr(n){const e=Go in n.prototype?n.prototype[Go]():void 0,t=function(s){if(!(s===St||s.prototype instanceof St)){let l="<unknown>",a="<unknown>";try{l=s.getType()}catch{}try{ce.version&&(a=JSON.parse(ce.version))}catch{}N(290,s.name,l,a)}return s===Sl||s===At||s===St}(n),r=!t&&qe(n,"getType")?n.getType():void 0;let o,i=r;if(e)if(r)o=e[r];else for(const[s,l]of Object.entries(e))i=s,o=l;if(!t&&i&&(qe(n,"getType")||(n.getType=()=>i),qe(n,"clone")||(n.clone=s=>(bo(s),new n)),qe(n,"importJSON")||(n.importJSON=o&&o.$importJSON||(s=>new n().updateFromJSON(s))),!qe(n,"importDOM")&&o)){const{importDOM:s}=o;s&&(n.importDOM=()=>s)}return{ownNodeConfig:o,ownNodeType:i}}const gt=(n,e)=>{let t=n;for(;t!=null&&!nt(t);){if(e(t))return t;t=t.getParent()}return null},qc={next:"previous",previous:"next"};class Po{constructor(e){x(this,"origin");this.origin=e}[Symbol.iterator](){return hr({hasNext:he,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return Z(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Z(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){const r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(r===null?this.insert(e):r.replace(e,t)),this}splice(e,t,r="next"){const o=r===this.direction?t:Array.from(t).reverse();let i=this;const s=this.getParentAtCaret(),l=new Map;for(let a=i.getAdjacentCaret();a!==null&&l.size<e;a=a.getAdjacentCaret()){const c=a.origin.getWritable();l.set(c.getKey(),c)}for(const a of o){if(l.size>0){const c=i.getNodeAtCaret();if(c){if(l.delete(c.getKey()),l.delete(a.getKey()),!(c.is(a)||i.origin.is(a))){const u=a.getParent();u&&u.is(s)&&a.remove(),c.replace(a)}}else c===null&&N(263,Array.from(l).join(" "))}else i.insert(a);i=Z(a,this.direction)}for(const a of l.values())a.remove();return this}}class un extends Po{constructor(){super(...arguments);x(this,"type","child")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:vt(t,this.direction)}getParentCaret(t="root"){return Z(Lo(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Ue(this.direction);return Z(this.getNodeAtCaret(),t)||vt(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof un&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const Yc={root:nt,shadowRoot:Mt};function Ue(n){return qc[n]}function Lo(n,e="root"){return Yc[e](n)?null:n}class fe extends Po{constructor(){super(...arguments);x(this,"type","sibling")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Z(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return S(this.origin)?vt(this.origin,this.direction):null}getParentCaret(t="root"){return Z(Lo(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Ue(this.direction);return Z(this.getNodeAtCaret(),t)||vt(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof fe&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof fe||t instanceof de)&&this.direction===t.direction&&this.origin.is(t.origin)}}class de extends Po{constructor(t,r){super(t);x(this,"type","text");x(this,"offset");this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ge(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Z(Lo(this.getParentAtCaret(),t),this.direction)}getFlipped(){return ge(this.origin,Ue(this.direction),this.offset)}isSamePointCaret(t){return t instanceof de&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof fe||t instanceof de)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Z(this.origin,this.direction)}}function jt(n){return n instanceof de}function he(n){return n instanceof fe}function Ct(n){return n instanceof un}const Gc={next:class extends de{constructor(){super(...arguments);x(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends de{constructor(){super(...arguments);x(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Xc={next:class extends fe{constructor(){super(...arguments);x(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends fe{constructor(){super(...arguments);x(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Qc={next:class extends un{constructor(){super(...arguments);x(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends un{constructor(){super(...arguments);x(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Z(n,e){return n?new Xc[e](n):null}function ge(n,e,t){return n?new Gc[e](n,Ut(n,t)):null}function Ut(n,e,t="error"){const r=n.getTextContentSize();let o=e==="next"?r:e==="previous"?0:e;return(o<0||o>r)&&(t!=="clamp"&&xs(284,String(e),String(r),n.getKey()),o=o<0?0:r),o}function Ki(n,e){return new tu(n,e)}function vt(n,e){return S(n)?new Qc[e](n):null}function Zc(n){return n&&n.getChildCaret()||n}function fn(n){return n&&Zc(n.getAdjacentCaret())}class Ro{constructor(e,t,r){x(this,"type","node-caret-range");x(this,"direction");x(this,"anchor");x(this,"focus");this.anchor=e,this.focus=t,this.direction=r}getLatest(){const e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new Ro(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=o=>{const i=this[o].getLatest();return jt(i)?function(s,l){const{direction:a,origin:c}=s,u=Ut(c,l==="focus"?Ue(a):a);return Ki(s,u-s.offset)}(i,o):null},t=e("anchor"),r=e("focus");if(t&&r){const{caret:o}=t,{caret:i}=r;if(o.isSameNodeCaret(i))return[Ki(o,i.offset-o.offset),null]}return[t,r]}iterNodeCarets(e="root"){const t=jt(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),o=jt(r),i=s=>s.isSameNodeCaret(r)?null:fn(s)||s.getParentCaret(e);return hr({hasNext:s=>s!==null&&!(o&&r.isSameNodeCaret(s)),initial:t.isSameNodeCaret(r)?null:i(t),map:s=>s,step:i})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class tu{constructor(e,t){x(this,"type","slice");x(this,"caret");x(this,"distance");this.caret=e,this.distance=t}getSliceIndices(){const{distance:e,caret:{offset:t}}=this,r=t+e;return r<t?[r,t]:[t,r]}getTextContent(){const[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:t}}=this,[r,o]=this.getSliceIndices(),i=e.getTextContent();return ge(e.setTextContent(i.slice(0,r)+i.slice(o)),t,r)}}function $o(n){return Gt(n,Z(H(),n.direction))}function eu(n){return Gt(n,n)}function Gt(n,e){return n.direction!==e.direction&&N(265),new Ro(n,e,n.direction)}function hr(n){const{initial:e,hasNext:t,step:r,map:o}=n;let i=e;return{[Symbol.iterator](){return this},next(){if(!t(i))return{done:!0,value:void 0};const s={done:!1,value:o(i)};return i=r(i),s}}}function Il(n,e){const t=Rn(n.origin,e.origin);switch(t===null&&N(275,n.origin.getKey(),e.origin.getKey()),t.type){case"same":{const r=n.type==="text",o=e.type==="text";return r&&o?function(i,s){return Math.sign(i-s)}(n.offset,e.offset):n.type===e.type?0:r?-1:o?1:n.type==="child"?-1:1}case"ancestor":return n.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return zl(t)}}function zl(n){const{a:e,b:t}=n,r=e.__key,o=t.__key;let i=e,s=t;for(;i&&s;i=i.getNextSibling(),s=s.getNextSibling()){if(i.__key===o)return-1;if(s.__key===r)return 1}return i===null?1:-1}function kn(n,e){return e.is(n)}function Bi(n){return S(n)?[n.getLatest(),null]:[n.getParent(),n.getLatest()]}function Rn(n,e){if(n.is(e))return{commonAncestor:n,type:"same"};const t=new Map;for(let[r,o]=Bi(n);r;o=r,r=r.getParent())t.set(r,o);for(let[r,o]=Bi(e);r;o=r,r=r.getParent()){const i=t.get(r);if(i!==void 0)return i===null?(kn(n,r)||N(276),{commonAncestor:r,type:"ancestor"}):o===null?(kn(e,r)||N(277),{commonAncestor:r,type:"descendant"}):((S(i)||kn(n,i))&&(S(o)||kn(e,o))&&r.is(i.getParent())&&r.is(o.getParent())||N(278),{a:i,b:o,commonAncestor:r,type:"branch"})}return null}function It(n,e){const{type:t,key:r,offset:o}=n,i=Wc(n.key);return t==="text"?(A(i)||N(266,i.getType(),r),ge(i,e,o)):(S(i)||N(267,i.getType(),r),ou(i,n.offset,e))}function dn(n,e){const{origin:t,direction:r}=e,o=r==="next";jt(e)?n.set(t.getKey(),e.offset,"text"):he(e)?A(t)?n.set(t.getKey(),Ut(t,r),"text"):n.set(t.getParentOrThrow().getKey(),t.getIndexWithinParent()+(o?1:0),"element"):(Ct(e)&&S(t)||N(268),n.set(t.getKey(),o?0:t.getChildrenSize(),"element"))}function nu(n){const e=F(),t=O(e)?e:yo();return $n(t,n),ct(t),t}function $n(n,e){dn(n.anchor,e.anchor),dn(n.focus,e.focus)}function Wi(n){const{anchor:e,focus:t}=n,r=It(e,"next"),o=It(t,"next"),i=Il(r,o)<=0?"next":"previous";return Gt(Le(r,i),Le(o,i))}function gr(n){const{direction:e,origin:t}=n,r=Z(t,Ue(e)).getNodeAtCaret();return r?Z(r,e):vt(t.getParentOrThrow(),e)}function Ji(n,e="root"){const t=[n];for(let r=Ct(n)?n.getParentCaret(e):n.getSiblingCaret();r!==null;r=r.getParentCaret(e))t.push(gr(r));return t}function Ar(n){return!!n&&n.origin.isAttached()}function ru(n,e="removeEmptySlices"){if(n.isCollapsed())return n;const t="root",r="next";let o=e;const i=Bl(n,r),s=Ji(i.anchor,t),l=Ji(i.focus.getFlipped(),t),a=new Set,c=[];for(const h of i.iterNodeCarets(t))if(Ct(h))a.add(h.origin.getKey());else if(he(h)){const{origin:p}=h;S(p)&&!a.has(p.getKey())||c.push(p)}for(const h of c)h.remove();for(const h of i.getTextSlices()){if(!h)continue;const{origin:p}=h.caret,_=p.getTextContentSize(),m=gr(Z(p,r)),y=p.getMode();if(Math.abs(h.distance)===_&&o==="removeEmptySlices"||y==="token"&&h.distance!==0)m.remove();else if(h.distance!==0){o="removeEmptySlices";let C=h.removeTextSlice();const w=h.caret.origin;if(y==="segmented"){const E=C.origin,v=rt(E.getTextContent()).setStyle(E.getStyle()).setFormat(E.getFormat());m.replaceOrInsert(v),C=ge(v,r,C.offset)}w.is(s[0].origin)&&(s[0]=C),w.is(l[0].origin)&&(l[0]=C.getFlipped())}}let u,f;for(const h of s)if(Ar(h)){u=kt(h);break}for(const h of l)if(Ar(h)){f=kt(h);break}const d=function(h,p,_){if(!h||!p)return null;const m=h.getParentAtCaret(),y=p.getParentAtCaret();if(!m||!y)return null;const C=m.getParents().reverse();C.push(m);const w=y.getParents().reverse();w.push(y);const E=Math.min(C.length,w.length);let v;for(v=0;v<E&&C[v]===w[v];v++);const k=(M,L)=>{let z;for(let R=v;R<M.length;R++){const K=M[R];if(Mt(K))return;!z&&L(K)&&(z=K)}return z},T=k(C,pt),b=T&&k(w,M=>_.has(M.getKey())&&pt(M));return T&&b?[T,b]:null}(u,f,a);if(d){const[h,p]=d;vt(h,"previous").splice(0,p.getChildren()),p.remove()}const g=[u,f,...s,...l].find(Ar);if(g)return eu(Le(kt(g),n.direction));N(269,JSON.stringify(s.map(h=>h.origin.__key)))}function kt(n){const e=function(o){let i=o;for(;Ct(i);){const s=fn(i);if(!Ct(s))break;i=s}return i}(n.getLatest()),{direction:t}=e;if(A(e.origin))return jt(e)?e:ge(e.origin,t,t);const r=e.getAdjacentCaret();return he(r)&&A(r.origin)?ge(r.origin,t,Ue(t)):e}function Kl(n){return jt(n)&&n.offset!==Ut(n.origin,n.direction)}function Le(n,e){return n.direction===e?n:n.getFlipped()}function Bl(n,e){return n.direction===e?n:Gt(Le(n.focus,e),Le(n.anchor,e))}function ou(n,e,t){let r=vt(n,"next");for(let o=0;o<e;o++){const i=r.getAdjacentCaret();if(i===null)break;r=i}return Le(r,t)}function Wl(n,e="root"){let t=0,r=n,o=fn(r);for(;o===null;){if(t--,o=r.getParentCaret(e),!o)return null;r=o,o=fn(r)}return o&&[o,t]}function Qf(n){return n}function Zf(...n){return n}function td(n){return n}function iu(n,e){if(!e||n===e)return n;for(const t in e)if(n[t]!==e[t])return{...n,...e};return n}function pr(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}function Tt(n,...e){const t=pr(...e);t.length>0&&n.classList.add(...t)}function In(n,...e){const t=pr(...e);t.length>0&&n.classList.remove(...t)}function Re(...n){return()=>{for(let e=n.length-1;e>=0;e--)n[e]();n.length=0}}const Jl=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,su=Jl?I.useLayoutEffect:I.useEffect,On={tag:Ae};function ed({initialConfig:n,children:e}){const t=I.useMemo(()=>{const{theme:r,namespace:o,nodes:i,onError:s,editorState:l,html:a}=n,c=Sa(null,r),u=bl({editable:n.editable,html:a,namespace:o,nodes:i,onError:f=>s(f,u),theme:r});return function(f,d){if(d!==null){if(d===void 0)f.update(()=>{const g=H();if(g.isEmpty()){const h=Q();g.append(h);const p=Jl?document.activeElement:null;(F()!==null||p!==null&&p===f.getRootElement())&&h.select()}},On);else if(d!==null)switch(typeof d){case"string":{const g=f.parseEditorState(d);f.setEditorState(g,On);break}case"object":f.setEditorState(d,On);break;case"function":f.update(()=>{H().isEmpty()&&d(f)},On)}}}(u,l),[u,c]},[]);return su(()=>{const r=n.editable,[o]=t;o.setEditable(r===void 0||r)},[]),st.jsx(ys.Provider,{value:t,children:e})}const lu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?I.useLayoutEffect:I.useEffect;function nd({ignoreHistoryMergeTagChange:n=!0,ignoreSelectionChange:e=!1,onChange:t}){const[r]=pe();return lu(()=>{if(t)return r.registerUpdateListener(({editorState:o,dirtyElements:i,dirtyLeaves:s,prevEditorState:l,tags:a})=>{e&&i.size===0&&s.size===0||n&&a.has(Ae)||l.isEmpty()||t(o,r,a)})},[r,n,e,t]),null}const au=new Map;function ji(n){let e=n;for(;e!=null;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function Ui(n){const e=n.parentNode;if(e==null)throw new Error("Should never happen");return[e,Array.from(e.childNodes).indexOf(n)]}function rd(n,e,t,r,o){const i=e.getKey(),s=r.getKey(),l=document.createRange();let a=n.getElementByKey(i),c=n.getElementByKey(s),u=t,f=o;if(A(e)&&(a=ji(a)),A(r)&&(c=ji(c)),e===void 0||r===void 0||a===null||c===null)return null;a.nodeName==="BR"&&([a,u]=Ui(a)),c.nodeName==="BR"&&([c,f]=Ui(c));const d=a.firstChild;a===c&&d!=null&&d.nodeName==="BR"&&u===0&&f===0&&(f=1);try{l.setStart(a,u),l.setEnd(c,f)}catch{return null}return!l.collapsed||u===f&&i===s||(l.setStart(c,f),l.setEnd(a,u)),l}function od(n,e){const t=n.getRootElement();if(t===null)return[];const r=t.getBoundingClientRect(),o=getComputedStyle(t),i=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),s=Array.from(e.getClientRects());let l,a=s.length;s.sort((c,u)=>{const f=c.top-u.top;return Math.abs(f)<=3?c.left-u.left:f});for(let c=0;c<a;c++){const u=s[c],f=l&&l.top<=u.top&&l.top+l.height>u.top&&l.left+l.width>u.left,d=u.width+i===r.width;f||d?(s.splice(c--,1),a--):l=u}return s}function cu(n){const e={};if(!n)return e;const t=n.split(";");for(const r of t)if(r!==""){const[o,i]=r.split(/:([^]+)/);o&&i&&(e[o.trim()]=i.trim())}return e}function jl(n){const e=fr().getElementByKey(n.getKey());if(e===null)return null;const t=e.ownerDocument.defaultView;return t===null?null:t.getComputedStyle(e)}function Ul(n){return jl(nt(n)?n:n.getParentOrThrow())}function Vi(n){const e=Ul(n);return e!==null&&e.direction==="rtl"}function Vl(n,e,t="self"){const r=n.getStartEndPoints();if(e.isSelected(n)&&!Rt(e)&&r!==null){const[o,i]=r,s=n.isBackward(),l=o.getNode(),a=i.getNode(),c=e.is(l),u=e.is(a);if(c||u){const[f,d]=no(n),g=l.is(a),h=e.is(s?a:l),p=e.is(s?l:a);let _,m=0;g?(m=f>d?d:f,_=f>d?f:d):h?(m=s?d:f,_=void 0):p&&(m=0,_=s?f:d);const y=e.__text.slice(m,_);y!==e.__text&&(t==="clone"&&(e=Uc(e)),e.__text=y)}}return e}function uu(n){const e=n.getStyle(),t=cu(e);au.set(e,t)}function fu(n,e){const t=n.getFormatType(),r=n.getIndent();t!==e.getFormatType()&&e.setFormat(t),r!==e.getIndent()&&e.setIndent(r)}function id(n,e,t=fu){if(n===null)return;const r=n.getStartEndPoints(),o=new Map;let i=null;if(r){const[s,l]=r;i=yo(),i.anchor.set(s.key,s.offset,s.type),i.focus.set(l.key,l.offset,l.type);const a=gt(s.getNode(),pt),c=gt(l.getNode(),pt);S(a)&&o.set(a.getKey(),a),S(c)&&o.set(c.getKey(),c)}for(const s of n.getNodes())if(S(s)&&pt(s))o.set(s.getKey(),s);else if(r===null){const l=gt(s,pt);S(l)&&o.set(l.getKey(),l)}for(const[s,l]of o){const a=e();t(l,a),l.replace(a,!0),i&&(s===i.anchor.key&&i.anchor.set(a.getKey(),i.anchor.offset,i.anchor.type),s===i.focus.key&&i.focus.set(a.getKey(),i.focus.offset,i.focus.type))}i&&n.is(F())&&ct(i)}function Hl(n){const e=ql(n);return e!==null&&e.writingMode==="vertical-rl"}function ql(n){const e=n.anchor.getNode();return S(e)?jl(e):Ul(e)}function Hi(n,e){let t=Hl(n)?!e:e;Yl(n)&&(t=!t);const r=It(n.focus,t?"previous":"next");if(Kl(r))return!1;for(const o of $o(r)){if(Ct(o))return!o.origin.isInline();if(!S(o.origin)){if(B(o.origin))return!0;break}}return!1}function du(n,e,t,r){n.modify(e?"extend":"move",t,r)}function Yl(n){const e=ql(n);return e!==null&&e.direction==="rtl"}function qi(n,e,t){const r=Yl(n);let o;o=Hl(n)||r?!t:t,du(n,e,o,"character")}function hu(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const xn=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,gu=xn&&"documentMode"in document?document.documentMode:null,pu=xn&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),_u=xn&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!xn||!("InputEvent"in window)||gu)&&"getTargetRanges"in new window.InputEvent("input");const mu=xn,sd=pu,yu=_u;function ld(n,e){return Array.from(xu(n))}function xu(n,e){return Cu("next",n)}function Su(n,e){const t=Wl(Z(n,e));return t&&t[0]}function Cu(n,e,t){const r=H(),o=e||r,i=S(o)?vt(o,n):Z(o,n),s=vu(o),l=Su(o,n);let a=s;return hr({hasNext:c=>c!==null,initial:i,map:c=>({depth:a,node:c.origin}),step:c=>{if(c.isSameNodeCaret(l))return null;Ct(c)&&a++;const u=Wl(c);return!u||u[0].isSameNodeCaret(l)?null:(a+=u[1],u[0])}})}function vu(n){let e=-1;for(let t=n;t!==null;t=t.getParent())e++;return e}function wu(n){const e=gt(n,t=>S(t)&&!t.isInline());return S(e)||hu(4,n.__key),e}function ad(n,e,t,r){const o=i=>i instanceof e;return n.registerNodeTransform(e,i=>{const s=(l=>{const a=l.getChildren();for(let f=0;f<a.length;f++){const d=a[f];if(o(d))return null}let c=l,u=l;for(;c!==null;)if(u=c,c=c.getParent(),o(c))return{child:u,parent:c};return null})(i);if(s!==null){const{child:l,parent:a}=s;if(l.is(i)){r(a,i);const c=l.getNextSiblings(),u=c.length;if(a.insertAfter(l),u!==0){const f=t(a);l.insertAfter(f);for(let d=0;d<u;d++)f.append(c[d])}a.canBeEmpty()||a.getChildrenSize()!==0||a.remove()}}})}function ee(n,e){return n!==null&&Object.getPrototypeOf(n).constructor.name===e.name}let Dr=!(yu||!mu)&&void 0;function cd(n,e=!1){let t=1;if(function(){if(Dr===void 0){const r=document.createElement("div");r.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(r);const o=r.getBoundingClientRect();r.style.setProperty("zoom","2"),Dr=r.getBoundingClientRect().width===o.width,document.body.removeChild(r)}return Dr}()||e)for(;n;)t*=Number(window.getComputedStyle(n).getPropertyValue("zoom")),n=n.parentElement;return t}function Gl(n,e){const t=[],r=Array.from(n).reverse();for(let o=r.pop();o!==void 0;o=r.pop())if(e(o))t.push(o);else if(S(o))for(const i of bu(o))r.push(i);return t}function bu(n){return Nu(vt(n,"previous"))}function Nu(n){return hr({hasNext:he,initial:n.getAdjacentCaret(),map:e=>e.origin.getLatest(),step:e=>e.getAdjacentCaret()})}function ud(n){gr(Z(n,"next")).splice(1,n.getChildren())}function Eu(n,e){const t=kl(e)?e.body.childNodes:e.childNodes;let r=[];const o=[];for(const i of t)if(!Ql.has(i.nodeName)){const s=Zl(i,n,o,!1);s!==null&&(r=r.concat(s))}return function(i){for(const s of i)s.getNextSibling()instanceof vo&&s.insertAfter(ae());for(const s of i){const l=s.getChildren();for(const a of l)s.insertBefore(a);s.remove()}}(o),r}function Tu(n,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const t=document.createElement("div"),r=H().getChildren();for(let o=0;o<r.length;o++)Xl(n,r[o],t,e);return t.innerHTML}function Xl(n,e,t,r=null){let o=r===null||e.isSelected(r);const i=S(e)&&e.excludeFromCopy("html");let s=e;r!==null&&A(e)&&(s=Vl(r,e,"clone"));const l=S(s)?s.getChildren():[],a=No(n,s.getType());let c;c=a&&a.exportDOM!==void 0?a.exportDOM(n,s):s.exportDOM(n);const{element:u,after:f}=c;if(!u)return!1;const d=document.createDocumentFragment();for(let g=0;g<l.length;g++){const h=l[g],p=Xl(n,h,d,r);!o&&S(e)&&p&&e.extractWithChild(h,r,"html")&&(o=!0)}if(o&&!i){if((q(u)||ao(u))&&u.append(d),t.append(u),f){const g=f.call(s,u);g&&(ao(u)?u.replaceChildren(g):u.replaceWith(g))}}else t.append(d);return o}const Ql=new Set(["STYLE","SCRIPT"]);function Zl(n,e,t,r,o=new Map,i){let s=[];if(Ql.has(n.nodeName))return s;let l=null;const a=function(h,p){const{nodeName:_}=h,m=p._htmlConversions.get(_.toLowerCase());let y=null;if(m!==void 0)for(const C of m){const w=C(h);w!==null&&(y===null||(y.priority||0)<=(w.priority||0))&&(y=w)}return y!==null?y.conversion:null}(n,e),c=a?a(n):null;let u=null;if(c!==null){u=c.after;const h=c.node;if(l=Array.isArray(h)?h[h.length-1]:h,l!==null){for(const[,p]of o)if(l=p(l,i),!l)break;l&&s.push(...Array.isArray(h)?h:[l])}c.forChild!=null&&o.set(n.nodeName,c.forChild)}const f=n.childNodes;let d=[];const g=(l==null||!Mt(l))&&(l!=null&&ro(l)||r);for(let h=0;h<f.length;h++)d.push(...Zl(f[h],e,t,g,new Map(o),l));return u!=null&&(d=u(d)),er(n)&&(d=ku(n,d,g?()=>{const h=new vo;return t.push(h),h}:Q)),l==null?d.length>0?s=s.concat(d):er(n)&&function(h){return h.nextSibling==null||h.previousSibling==null?!1:co(h.nextSibling)&&co(h.previousSibling)}(n)&&(s=s.concat(ae())):S(l)&&l.append(...d),s}function ku(n,e,t){const r=n.style.textAlign,o=[];let i=[];for(let s=0;s<e.length;s++){const l=e[s];if(ro(l))r&&!l.getFormat()&&l.setFormat(r),o.push(l);else if(i.push(l),s===e.length-1||s<e.length-1&&ro(e[s+1])){const a=t();a.setFormat(r),a.append(...i),o.push(a),i=[]}}return o}function nr(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Ou(n,e=F()){return e==null&&nr(166),O(e)&&e.isCollapsed()||e.getNodes().length===0?"":Tu(n,e)}function Mu(n,e=F()){return e==null&&nr(166),O(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(Au(n,e))}function fd(n,e){const t=n.getData("text/plain")||n.getData("text/uri-list");t!=null&&e.insertRawText(t)}function Yi(n,e,t){const r=n.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===t._config.namespace&&Array.isArray(l.nodes))return Gi(t,Du(l.nodes),e)}catch(l){console.error(l)}const o=n.getData("text/html"),i=n.getData("text/plain");if(o&&i!==o)try{const l=new DOMParser().parseFromString(function(a){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:c=>c}).createHTML(a):a}(o),"text/html");return Gi(t,Eu(t,l),e)}catch(l){console.error(l)}const s=i||n.getData("text/uri-list");if(s!=null)if(O(e)){const l=s.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let a=0;a<l.length;a++){const c=F();if(O(c)){const u=l[a];u===`
`||u===`\r
`?c.insertParagraph():u==="	"?c.insertNodes([pn()]):c.insertText(u)}}}else e.insertRawText(s)}function Gi(n,e,t){n.dispatchCommand(Ya,{nodes:e,selection:t})||(t.insertNodes(e),function(r){if(O(r)&&r.isCollapsed()){const o=r.anchor;let i=null;const s=It(o,"previous");if(s)if(jt(s))i=s.origin;else{const l=Gt(s,vt(H(),"next").getFlipped());for(const a of l){if(A(a.origin)){i=a.origin;break}if(S(a.origin)&&!a.origin.isInline())break}}if(i&&A(i)){const l=i.getFormat(),a=i.getStyle();r.format===l&&r.style===a||(r.format=l,r.style=a,r.dirty=!0)}}}(t))}function ta(n,e,t,r=[]){let o=e===null||t.isSelected(e);const i=S(t)&&t.excludeFromCopy("html");let s=t;e!==null&&A(s)&&(s=Vl(e,s,"clone"));const l=S(s)?s.getChildren():[],a=function(c){const u=c.exportJSON(),f=c.constructor;if(u.type!==f.getType()&&nr(58,f.name),S(c)){const d=u.children;Array.isArray(d)||nr(59,f.name)}return u}(s);A(s)&&s.getTextContentSize()===0&&(o=!1);for(let c=0;c<l.length;c++){const u=l[c],f=ta(n,e,u,a.children);!o&&S(t)&&f&&t.extractWithChild(u,e,"clone")&&(o=!0)}if(o&&!i)r.push(a);else if(Array.isArray(a.children))for(let c=0;c<a.children.length;c++){const u=a.children[c];r.push(u)}return o}function Au(n,e){const t=[],r=H().getChildren();for(let o=0;o<r.length;o++)ta(n,e,r[o],t);return{namespace:n._config.namespace,nodes:t}}function Du(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t],o=kc(r);A(o)&&uu(o),e.push(o)}return e}let Se=null;async function Xi(n,e,t){if(Se!==null)return!1;if(e!==null)return new Promise((c,u)=>{n.update(()=>{c(Qi(n,e,t))})});const r=n.getRootElement(),o=n._window||window,i=o.document,s=bt(o);if(r===null||s===null)return!1;const l=i.createElement("span");l.style.cssText="position: fixed; top: -1000px;",l.append(i.createTextNode("#")),r.append(l);const a=new Range;return a.setStart(l,0),a.setEnd(l,1),s.removeAllRanges(),s.addRange(a),new Promise((c,u)=>{const f=n.registerCommand(sr,d=>(ee(d,ClipboardEvent)&&(f(),Se!==null&&(o.clearTimeout(Se),Se=null),c(Qi(n,d,t))),!0),Ac);Se=o.setTimeout(()=>{f(),Se=null,c(!1)},50),i.execCommand("copy"),l.remove()})}function Qi(n,e,t){if(t===void 0){const o=bt(n._window),i=F();if(!i||i.isCollapsed()||!o)return!1;const s=o.anchorNode,l=o.focusNode;if(s!==null&&l!==null&&!mn(n,s,l))return!1;t=Fu(i)}e.preventDefault();const r=e.clipboardData;return r!==null&&(Pu(r,t),!0)}const ea=[["text/html",Ou],["application/x-lexical-editor",Mu]];function Fu(n=F()){const e={"text/plain":n?n.getTextContent():""};if(n){const t=fr();for(const[r,o]of ea){const i=o(t,n);i!==null&&(e[r]=i)}}return e}function Pu(n,e){for(const[t]of ea)e[t]===void 0&&n.setData(t,"");for(const t in e){const r=e[t];r!==void 0&&n.setData(t,r)}}const Lu=Symbol.for("preact-signals");function _r(){if(Vt>1)return void Vt--;let n,e=!1;for(;nn!==void 0;){let t=nn;for(nn=void 0,uo++;t!==void 0;){const r=t.o;if(t.o=void 0,t.f&=-3,!(8&t.f)&&na(t))try{t.c()}catch(o){e||(n=o,e=!0)}t=r}}if(uo=0,Vt--,e)throw n}function dd(n){if(Vt>0)return n();Vt++;try{return n()}finally{_r()}}let W,nn;function Zi(n){const e=W;W=void 0;try{return n()}finally{W=e}}let Vt=0,uo=0,zn=0;function ts(n){if(W===void 0)return;let e=n.n;return e===void 0||e.t!==W?(e={i:0,S:n,p:W.s,n:void 0,t:W,e:void 0,x:void 0,r:e},W.s!==void 0&&(W.s.n=e),W.s=e,n.n=e,32&W.f&&n.S(e),e):e.i===-1?(e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=W.s,e.n=void 0,W.s.n=e,W.s=e),e):void 0}function at(n,e){this.v=n,this.i=0,this.n=void 0,this.t=void 0,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}function Ru(n,e){return new at(n,e)}function na(n){for(let e=n.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function es(n){for(let e=n.s;e!==void 0;e=e.n){const t=e.S.n;if(t!==void 0&&(e.r=t),e.S.n=e,e.i=-1,e.n===void 0){n.s=e;break}}}function ra(n){let e,t=n.s;for(;t!==void 0;){const r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):e=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}n.s=e}function Ce(n,e){at.call(this,void 0),this.x=n,this.s=void 0,this.g=zn-1,this.f=4,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}function oa(n){const e=n.u;if(n.u=void 0,typeof e=="function"){Vt++;const t=W;W=void 0;try{e()}catch(r){throw n.f&=-2,n.f|=8,Io(n),r}finally{W=t,_r()}}}function Io(n){for(let e=n.s;e!==void 0;e=e.n)e.S.U(e);n.x=void 0,n.s=void 0,oa(n)}function $u(n){if(W!==this)throw new Error("Out-of-order effect");ra(this),W=n,this.f&=-2,8&this.f&&Io(this),_r()}function Ee(n,e){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e==null?void 0:e.name}function Iu(n,e){const t=new Ee(n,e);try{t.c()}catch(o){throw t.d(),o}const r=t.d.bind(t);return r[Symbol.dispose]=r,r}function hd(n,e={}){const t={};for(const r in n){const o=e[r],i=Ru(o===void 0?n[r]:o);t[r]=i}return t}at.prototype.brand=Lu,at.prototype.h=function(){return!0},at.prototype.S=function(n){const e=this.t;e!==n&&n.e===void 0&&(n.x=e,this.t=n,e!==void 0?e.e=n:Zi(()=>{var t;(t=this.W)==null||t.call(this)}))},at.prototype.U=function(n){if(this.t!==void 0){const e=n.e,t=n.x;e!==void 0&&(e.x=t,n.e=void 0),t!==void 0&&(t.e=e,n.x=void 0),n===this.t&&(this.t=t,t===void 0&&Zi(()=>{var r;(r=this.Z)==null||r.call(this)}))}},at.prototype.subscribe=function(n){return Iu(()=>{const e=this.value,t=W;W=void 0;try{n(e)}finally{W=t}},{name:"sub"})},at.prototype.valueOf=function(){return this.value},at.prototype.toString=function(){return this.value+""},at.prototype.toJSON=function(){return this.value},at.prototype.peek=function(){const n=W;W=void 0;try{return this.value}finally{W=n}},Object.defineProperty(at.prototype,"value",{get(){const n=ts(this);return n!==void 0&&(n.i=this.i),this.v},set(n){if(n!==this.v){if(uo>100)throw new Error("Cycle detected");this.v=n,this.i++,zn++,Vt++;try{for(let e=this.t;e!==void 0;e=e.x)e.t.N()}finally{_r()}}}}),Ce.prototype=new at,Ce.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===zn))return!0;if(this.g=zn,this.f|=1,this.i>0&&!na(this))return this.f&=-2,!0;const n=W;try{es(this),W=this;const e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return W=n,ra(this),this.f&=-2,!0},Ce.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(let e=this.s;e!==void 0;e=e.n)e.S.S(e)}at.prototype.S.call(this,n)},Ce.prototype.U=function(n){if(this.t!==void 0&&(at.prototype.U.call(this,n),this.t===void 0)){this.f&=-33;for(let e=this.s;e!==void 0;e=e.n)e.S.U(e)}},Ce.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let n=this.t;n!==void 0;n=n.x)n.t.N()}},Object.defineProperty(Ce.prototype,"value",{get(){if(1&this.f)throw new Error("Cycle detected");const n=ts(this);if(this.h(),n!==void 0&&(n.i=this.i),16&this.f)throw this.v;return this.v}}),Ee.prototype.c=function(){const n=this.S();try{if(8&this.f||this.x===void 0)return;const e=this.x();typeof e=="function"&&(this.u=e)}finally{n()}},Ee.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,oa(this),es(this),Vt++;const n=W;return W=this,$u.bind(this,n)},Ee.prototype.N=function(){2&this.f||(this.f|=2,this.o=nn,nn=this)},Ee.prototype.d=function(){this.f|=8,1&this.f||Io(this)},Ee.prototype.dispose=function(){this.d()};function zu(){const n=H(),e=F(),t=Q();n.clear(),n.append(t),e!==null&&t.select(),O(e)&&(e.format=0)}function Ku(n,e=zu){return n.registerCommand(nc,t=>(n.update(e),!0),$)}function Bu(n){return(typeof n.nodes=="function"?n.nodes():n.nodes)||[]}function U(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ia(n,e){if(n&&e&&!Array.isArray(e)&&typeof n=="object"&&typeof e=="object"){const t=n,r=e;for(const o in r)t[o]=ia(t[o],r[o]);return n}return e}const zo=0,fo=1,sa=2,Fr=3,Mn=4,ve=5,Pr=6,Ye=7;function Lr(n){return n.id===zo}function la(n){return n.id===sa}function Wu(n){return function(e){return e.id===fo}(n)||U(305,String(n.id),String(fo)),Object.assign(n,{id:sa})}const Ju=new Set;class ju{constructor(e,t){x(this,"builder");x(this,"configs");x(this,"_dependency");x(this,"_peerNameSet");x(this,"extension");x(this,"state");x(this,"_signal");this.builder=e,this.extension=t,this.configs=new Set,this.state={id:zo}}mergeConfigs(){let e=this.extension.config||{};const t=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):iu;for(const r of this.configs)e=t(e,r);return e}init(e){const t=this.state;la(t)||U(306,String(t.id));const r={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},o={...r,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},i=function(l,a,c){return Object.assign(l,{config:a,id:Fr,registerState:c})}(t,this.mergeConfigs(),r);let s;this.state=i,this.extension.init&&(s=this.extension.init(e,i.config,r)),this.state=function(l,a,c){return Object.assign(l,{id:Mn,initResult:a,registerState:c})}(i,s,o)}build(e){const t=this.state;let r;t.id!==Mn&&U(307,String(t.id),String(ve)),this.extension.build&&(r=this.extension.build(e,t.config,t.registerState));const o={...t.registerState,getOutput:()=>r,getSignal:this.getSignal.bind(this)};this.state=function(i,s,l){return Object.assign(i,{id:ve,output:s,registerState:l})}(t,r,o)}register(e,t){this._signal=t;const r=this.state;r.id!==ve&&U(308,String(r.id),String(ve));const o=this.extension.register&&this.extension.register(e,r.config,r.registerState);return this.state=function(i){return Object.assign(i,{id:Pr})}(r),()=>{const i=this.state;i.id!==Ye&&U(309,String(r.id),String(Ye)),this.state=function(s){return Object.assign(s,{id:ve})}(i),o&&o()}}afterRegistration(e){const t=this.state;let r;return t.id!==Pr&&U(310,String(t.id),String(Pr)),this.extension.afterRegistration&&(r=this.extension.afterRegistration(e,t.config,t.registerState)),this.state=function(o){return Object.assign(o,{id:Ye})}(t),r}getSignal(){return this._signal===void 0&&U(311),this._signal}getInitResult(){this.extension.init===void 0&&U(312,this.extension.name);const e=this.state;return function(t){return t.id>=Mn}(e)||U(313,String(e.id),String(Mn)),e.initResult}getInitPeer(e){const t=this.builder.extensionNameMap.get(e);return t?t.getExtensionInitDependency():void 0}getExtensionInitDependency(){const e=this.state;return function(t){return t.id>=Fr}(e)||U(314,String(e.id),String(Fr)),{config:e.config}}getPeer(e){const t=this.builder.extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}getInitDependency(e){const t=this.builder.getExtensionRep(e);return t===void 0&&U(315,this.extension.name,e.name),t.getExtensionInitDependency()}getDependency(e){const t=this.builder.getExtensionRep(e);return t===void 0&&U(315,this.extension.name,e.name),t.getExtensionDependency()}getState(){const e=this.state;return function(t){return t.id>=Ye}(e)||U(316,String(e.id),String(Ye)),e}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||Ju}getPeerNameSet(){let e=this._peerNameSet;return e||(e=new Set((this.extension.peerDependencies||[]).map(([t])=>t)),this._peerNameSet=e),e}getExtensionDependency(){if(!this._dependency){const e=this.state;(function(t){return t.id>=ve})(e)||U(317,this.extension.name),this._dependency={config:e.config,init:e.initResult,output:e.output}}return this._dependency}}const ns={tag:Ae};function Uu(){const n=H();n.isEmpty()&&n.append(Q())}const Vu={config:{setOptions:ns,updateOptions:ns},init:({$initialEditorState:n=Uu})=>({$initialEditorState:n,initialized:!1}),afterRegistration(n,{updateOptions:e,setOptions:t},r){const o=r.getInitResult();if(!o.initialized){o.initialized=!0;const{$initialEditorState:i}=o;if(Oc(i))n.setEditorState(i,t);else if(typeof i=="function")n.update(()=>{i(n)},e);else if(i&&(typeof i=="string"||typeof i=="object")){const s=n.parseEditorState(i);n.setEditorState(s,t)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[We,_e,Ie,ze,Je]},rs=Symbol.for("@lexical/extension/LexicalBuilder");function os(){}function Hu(n){throw n}function An(n){return Array.isArray(n)?n:[n]}const Rr="0.40.0+prod.esm";let aa=class Kn{constructor(e){x(this,"roots");x(this,"extensionNameMap");x(this,"outgoingConfigEdges");x(this,"incomingEdges");x(this,"conflicts");x(this,"_sortedExtensionReps");x(this,"PACKAGE_VERSION");this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=Rr,this.roots=e;for(const t of e)this.addExtension(t)}static fromExtensions(e){const t=[An(Vu)];for(const r of e)t.push(An(r));return new Kn(t)}static maybeFromEditor(e){const t=e[rs];return t&&(t.PACKAGE_VERSION!==Rr&&U(292,t.PACKAGE_VERSION,Rr),t instanceof Kn||U(293)),t}static fromEditor(e){const t=Kn.maybeFromEditor(e);return t===void 0&&U(294),t}constructEditor(){const{$initialEditorState:e,onError:t,...r}=this.buildCreateEditorArgs(),o=Object.assign(bl({...r,...t?{onError:i=>{t(i,o)}}:{}}),{[rs]:this});for(const i of this.sortedExtensionReps())i.build(o);return o}buildEditor(){let e=os;function t(){try{e()}finally{e=os}}const r=Object.assign(this.constructEditor(),{dispose:t,[Symbol.dispose]:t});return e=Re(this.registerEditor(r),()=>r.setRootElement(null)),r}hasExtensionByName(e){return this.extensionNameMap.has(e)}getExtensionRep(e){const t=this.extensionNameMap.get(e.name);if(t)return t.extension!==e&&U(295,e.name),t}addEdge(e,t,r){const o=this.outgoingConfigEdges.get(e);o?o.set(t,r):this.outgoingConfigEdges.set(e,new Map([[t,r]]));const i=this.incomingEdges.get(t);i?i.add(e):this.incomingEdges.set(t,new Set([e]))}addExtension(e){this._sortedExtensionReps!==void 0&&U(296);const t=An(e),[r]=t;typeof r.name!="string"&&U(297,typeof r.name);let o=this.extensionNameMap.get(r.name);if(o!==void 0&&o.extension!==r&&U(298,r.name),!o){o=new ju(this,r),this.extensionNameMap.set(r.name,o);const i=this.conflicts.get(r.name);typeof i=="string"&&U(299,r.name,i);for(const s of r.conflictsWith||[])this.extensionNameMap.has(s)&&U(299,r.name,s),this.conflicts.set(s,r.name);for(const s of r.dependencies||[]){const l=An(s);this.addEdge(r.name,l[0].name,l.slice(1)),this.addExtension(l)}for(const[s,l]of r.peerDependencies||[])this.addEdge(r.name,s,l?[l]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;const e=[],t=(r,o)=>{let i=r.state;if(la(i))return;const s=r.extension.name;var l;Lr(i)||U(300,s,o||"[unknown]"),Lr(l=i)||U(304,String(l.id),String(zo)),i=Object.assign(l,{id:fo}),r.state=i;const a=this.outgoingConfigEdges.get(s);if(a)for(const c of a.keys()){const u=this.extensionNameMap.get(c);u&&t(u,s)}i=Wu(i),r.state=i,e.push(r)};for(const r of this.extensionNameMap.values())Lr(r.state)&&t(r);for(const r of e)for(const[o,i]of this.outgoingConfigEdges.get(r.extension.name)||[])if(i.length>0){const s=this.extensionNameMap.get(o);if(s)for(const l of i)s.configs.add(l)}for(const[r,...o]of this.roots)if(o.length>0){const i=this.extensionNameMap.get(r.name);i===void 0&&U(301,r.name);for(const s of o)i.configs.add(s)}return this._sortedExtensionReps=e,this._sortedExtensionReps}registerEditor(e){const t=this.sortedExtensionReps(),r=new AbortController,o=[()=>r.abort()],i=r.signal;for(const s of t){const l=s.register(e,i);l&&o.push(l)}for(const s of t){const l=s.afterRegistration(e);l&&o.push(l)}return Re(...o)}buildCreateEditorArgs(){const e={},t=new Set,r=new Map,o=new Map,i={},s={},l=this.sortedExtensionReps();for(const u of l){const{extension:f}=u;if(f.onError!==void 0&&(e.onError=f.onError),f.disableEvents!==void 0&&(e.disableEvents=f.disableEvents),f.parentEditor!==void 0&&(e.parentEditor=f.parentEditor),f.editable!==void 0&&(e.editable=f.editable),f.namespace!==void 0&&(e.namespace=f.namespace),f.$initialEditorState!==void 0&&(e.$initialEditorState=f.$initialEditorState),f.nodes)for(const d of Bu(f)){if(typeof d!="function"){const g=r.get(d.replace);g&&U(302,f.name,d.replace.name,g.extension.name),r.set(d.replace,u)}t.add(d)}if(f.html){if(f.html.export)for(const[d,g]of f.html.export.entries())o.set(d,g);f.html.import&&Object.assign(i,f.html.import)}f.theme&&ia(s,f.theme)}Object.keys(s).length>0&&(e.theme=s),t.size&&(e.nodes=[...t]);const a=Object.keys(i).length>0,c=o.size>0;(a||c)&&(e.html={},a&&(e.html.import=i),c&&(e.html.export=o));for(const u of l)u.init(e);return e.onError||(e.onError=Hu),e}};function gd(n,e){const t=aa.fromEditor(n).extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}function qu(n){const e=window.location.origin,t=r=>{if(r.origin!==e)return;const o=n.getRootElement();if(document.activeElement!==o)return;const i=r.data;if(typeof i=="string"){let s;try{s=JSON.parse(i)}catch{return}if(s&&s.protocol==="nuanria_messaging"&&s.type==="request"){const l=s.payload;if(l&&l.functionId==="makeChanges"){const a=l.args;if(a){const[c,u,f,d,g]=a;n.update(()=>{const h=F();if(O(h)){const p=h.anchor;let _=p.getNode(),m=0,y=0;if(A(_)&&c>=0&&u>=0&&(m=c,y=c+u,h.setTextNodeRange(_,m,_,y)),m===y&&f===""||(h.insertRawText(f),_=p.getNode()),A(_)){m=d,y=d+g;const C=_.getTextContentSize();m=m>C?C:m,y=y>C?C:y,h.setTextNodeRange(_,m,_,y)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}function is(n,e){if(document.caretRangeFromPoint!==void 0){const t=document.caretRangeFromPoint(n,e);return t===null?null:{node:t.startContainer,offset:t.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const t=document.caretPositionFromPoint(n,e);return t===null?null:{node:t.offsetNode,offset:t.offset}}return null}const ye=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Yu=ye&&"documentMode"in document?document.documentMode:null,Gu=ye&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Xu=!(!ye||!("InputEvent"in window)||Yu)&&"getTargetRanges"in new window.InputEvent("input"),Qu=ye&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ss=ye&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Zu=ye&&/^(?=.*Chrome).*/i.test(navigator.userAgent),tf=ye&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&Gu&&!Zu,ls=P("DRAG_DROP_PASTE_FILE");class Ko extends At{static getType(){return"quote"}static clone(e){return new Ko(e.__key)}createDOM(e){const t=document.createElement("blockquote");return Tt(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:ef,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(q(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();r&&(t.style.textAlign=r);const o=this.getDirection();o&&(t.dir=o)}return{element:t}}static importJSON(e){return ca().updateFromJSON(e)}insertNewAfter(e,t){const r=Q(),o=this.getDirection();return r.setDirection(o),this.insertAfter(r,t),r}collapseAtStart(){const e=Q();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}canMergeWhenEmpty(){return!0}}function ca(){return Kt(new Ko)}class Bo extends At{constructor(t,r){super(r);x(this,"__tag");this.__tag=t}static getType(){return"heading"}static clone(t){return new Bo(t.__tag,t.__key)}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,o=document.createElement(r),i=t.theme.heading;if(i!==void 0){const s=i[r];Tt(o,s)}return o}updateDOM(t,r,o){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:we,priority:0}),h2:t=>({conversion:we,priority:0}),h3:t=>({conversion:we,priority:0}),h4:t=>({conversion:we,priority:0}),h5:t=>({conversion:we,priority:0}),h6:t=>({conversion:we,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&as(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>as(t)?{conversion:r=>({node:Qe("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(q(r)){this.isEmpty()&&r.append(document.createElement("br"));const o=this.getFormatType();o&&(r.style.textAlign=o);const i=this.getDirection();i&&(r.dir=i)}return{element:r}}static importJSON(t){return Qe(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const o=t?t.anchor.offset:0,i=this.getLastDescendant(),s=!i||t&&t.anchor.key===i.getKey()&&o===i.getTextContentSize()||!t?Q():Qe(this.getTag()),l=this.getDirection();if(s.setDirection(l),this.insertAfter(s,r),o===0&&!this.isEmpty()&&t){const a=Q();a.select(),this.replace(a,!0)}return s}collapseAtStart(){const t=this.isEmpty()?Q():Qe(this.getTag());return this.getChildren().forEach(r=>t.append(r)),this.replace(t),!0}extractWithChild(){return!0}}function as(n){return n.nodeName.toLowerCase()==="span"&&n.style.fontSize==="26pt"}function we(n){const e=n.nodeName.toLowerCase();let t=null;return e!=="h1"&&e!=="h2"&&e!=="h3"&&e!=="h4"&&e!=="h5"&&e!=="h6"||(t=Qe(e),n.style!==null&&(Fo(n,t),t.setFormat(n.style.textAlign))),{node:t}}function ef(n){const e=ca();return n.style!==null&&(e.setFormat(n.style.textAlign),Fo(n,e)),{node:e}}function Qe(n="h1"){return Kt(new Bo(n))}function Dn(n){let e=null;if(ee(n,DragEvent)?e=n.dataTransfer:ee(n,ClipboardEvent)&&(e=n.clipboardData),e===null)return[!1,[],!1];const t=e.types,r=t.includes("Files"),o=t.includes("text/html")||t.includes("text/plain");return[r,Array.from(e.files),o]}function cs(n){const e=F();if(!O(e))return!1;const t=new Set,r=e.getNodes();for(let o=0;o<r.length;o++){const i=r[o],s=i.getKey();if(t.has(s))continue;const l=gt(i,c=>S(c)&&!c.isInline());if(l===null)continue;const a=l.getKey();l.canIndent()&&!t.has(a)&&(t.add(a),n(l))}return t.size>0}function us(n){const e=Yt(n);return B(e)}function $r(n){for(const e of["lowercase","uppercase","capitalize"])n.hasFormat(e)&&n.toggleFormat(e)}function nf(n){return Re(n.registerCommand(Ps,e=>{const t=F();return!!dt(t)&&(t.clear(),!0)},$),n.registerCommand(ne,e=>{const t=F();return O(t)?(t.deleteCharacter(e),!0):!!dt(t)&&(t.deleteNodes(),!0)},$),n.registerCommand(ln,e=>{const t=F();return!!O(t)&&(t.deleteWord(e),!0)},$),n.registerCommand(an,e=>{const t=F();return!!O(t)&&(t.deleteLine(e),!0)},$),n.registerCommand(Oe,e=>{const t=F();if(typeof e=="string")t!==null&&t.insertText(e);else{if(t===null)return!1;const r=e.dataTransfer;if(r!=null)Yi(r,t,n);else if(O(t)){const o=e.data;return o&&t.insertText(o),!0}}return!0},$),n.registerCommand(Hr,()=>{const e=F();return!!O(e)&&(e.removeText(),!0)},$),n.registerCommand(Wt,e=>{const t=F();return!!O(t)&&(t.formatText(e),!0)},$),n.registerCommand(tc,e=>{const t=F();if(!O(t)&&!dt(t))return!1;const r=t.getNodes();for(const o of r){const i=gt(o,s=>S(s)&&!s.isInline());i!==null&&i.setFormat(e)}return!0},$),n.registerCommand(ke,e=>{const t=F();return!!O(t)&&(t.insertLineBreak(e),!0)},$),n.registerCommand(Vn,()=>{const e=F();return!!O(e)&&(e.insertParagraph(),!0)},$),n.registerCommand(Qa,()=>(Nc([pn()]),!0),$),n.registerCommand(Za,()=>cs(e=>{const t=e.getIndent();e.setIndent(t+1)}),$),n.registerCommand(li,()=>cs(e=>{const t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),$),n.registerCommand(js,e=>{const t=F();if(dt(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectPrevious(),!0}else if(O(t)){const r=io(t.focus,!0);if(!e.shiftKey&&B(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1},$),n.registerCommand(Us,e=>{const t=F();if(dt(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectNext(0,0),!0}else if(O(t)){if(function(o){const i=o.focus;return i.key==="root"&&i.offset===H().getChildrenSize()}(t))return e.preventDefault(),!0;const r=io(t.focus,!1);if(!e.shiftKey&&B(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},$),n.registerCommand(Js,e=>{const t=F();if(dt(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),Vi(r[0])?r[0].selectNext(0,0):r[0].selectPrevious(),!0}if(!O(t))return!1;if(Hi(t,!0)){const r=e.shiftKey;return e.preventDefault(),qi(t,r,!0),!0}return!1},$),n.registerCommand(Ws,e=>{const t=F();if(dt(t)){const o=t.getNodes();if(o.length>0)return e.preventDefault(),Vi(o[0])?o[0].selectPrevious():o[0].selectNext(0,0),!0}if(!O(t))return!1;const r=e.shiftKey;return!!Hi(t,!1)&&(e.preventDefault(),qi(t,r,!1),!0)},$),n.registerCommand(Hs,e=>{if(us(e.target))return!1;const t=F();if(O(t)){if(function(r){if(!r.isCollapsed())return!1;const{anchor:o}=r;if(o.offset!==0)return!1;const i=o.getNode();if(nt(i))return!1;const s=wu(i);return s.getIndent()>0&&(s.is(i)||i.is(s.getFirstDescendant()))}(t))return e.preventDefault(),n.dispatchCommand(li,void 0);if(ss&&navigator.language==="ko-KR")return!1}else if(!dt(t))return!1;return e.preventDefault(),n.dispatchCommand(ne,!0)},$),n.registerCommand(Ys,e=>{if(us(e.target))return!1;const t=F();return!(!O(t)&&!dt(t))&&(e.preventDefault(),n.dispatchCommand(ne,!1))},$),n.registerCommand(Hn,e=>{const t=F();if(!O(t))return!1;if($r(t),e!==null){if((ss||Qu||tf)&&Xu)return!1;if(e.preventDefault(),e.shiftKey)return n.dispatchCommand(ke,!1)}return n.dispatchCommand(Vn,void 0)},$),n.registerCommand(qs,()=>{const e=F();return!!O(e)&&(n.blur(),!0)},$),n.registerCommand(Xs,e=>{const[,t]=Dn(e);if(t.length>0){const o=is(e.clientX,e.clientY);if(o!==null){const{offset:i,node:s}=o,l=Yt(s);if(l!==null){const a=yo();if(A(l))a.anchor.set(l.getKey(),i,"text"),a.focus.set(l.getKey(),i,"text");else{const u=l.getParentOrThrow().getKey(),f=l.getIndexWithinParent()+1;a.anchor.set(u,f,"element"),a.focus.set(u,f,"element")}const c=rn(a);ct(c)}n.dispatchCommand(ls,t)}return e.preventDefault(),!0}const r=F();return!!O(r)},$),n.registerCommand(Qs,e=>{const[t]=Dn(e),r=F();return!(t&&!O(r))},$),n.registerCommand(Zs,e=>{const[t]=Dn(e),r=F();if(t&&!O(r))return!1;const o=is(e.clientX,e.clientY);if(o!==null){const i=Yt(o.node);B(i)&&e.preventDefault()}return!0},$),n.registerCommand(qr,()=>($c(),!0),$),n.registerCommand(sr,e=>(Xi(n,ee(e,ClipboardEvent)?e:null),!0),$),n.registerCommand(_o,e=>(async function(t,r){await Xi(r,ee(t,ClipboardEvent)?t:null),r.update(()=>{const o=F();O(o)?o.removeText():dt(o)&&o.getNodes().forEach(i=>i.remove())})}(e,n),!0),$),n.registerCommand(po,e=>{const[,t,r]=Dn(e);return t.length>0&&!r?(n.dispatchCommand(ls,t),!0):je(e.target)&&Eo(e.target)?!1:F()!==null&&(function(o,i){o.preventDefault(),i.update(()=>{const s=F(),l=ee(o,InputEvent)||ee(o,KeyboardEvent)?null:o.clipboardData;l!=null&&s!==null&&Yi(l,s,i)},{tag:dc})}(e,n),!0)},$),n.registerCommand(Vs,e=>{const t=F();return O(t)&&$r(t),!1},$),n.registerCommand(Gs,e=>{const t=F();return O(t)&&$r(t),!1},$))}const rf=I.createContext(null),Ir={didCatch:!1,error:null};class of extends I.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Ir}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];(t=(r=this.props).onReset)===null||t===void 0||t.call(r,{args:i,reason:"imperative-api"}),this.setState(Ir)}}componentDidCatch(e,t){var r,o;(r=(o=this.props).onError)===null||r===void 0||r.call(o,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:o}=this.props;if(r&&t.error!==null&&sf(e.resetKeys,o)){var i,s;(i=(s=this.props).onReset)===null||i===void 0||i.call(s,{next:o,prev:e.resetKeys,reason:"keys"}),this.setState(Ir)}}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:o}=this.props,{didCatch:i,error:s}=this.state;let l=e;if(i){const a={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")l=t(a);else if(r)l=I.createElement(r,a);else if(o!==void 0)l=o;else throw s}return I.createElement(rf.Provider,{value:{didCatch:i,error:s,resetErrorBoundary:this.resetErrorBoundary}},l)}}function sf(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==e.length||n.some((t,r)=>!Object.is(t,e[r]))}function pd({children:n,onError:e}){return st.jsx(of,{fallback:st.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:n})}const lf=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?I.useLayoutEffect:I.useEffect;function af(n){return{initialValueFn:()=>n.isEditable(),subscribe:e=>n.registerEditableListener(e)}}function cf(){return function(n){const[e]=pe(),t=I.useMemo(()=>n(e),[e,n]),[r,o]=I.useState(()=>t.initialValueFn()),i=I.useRef(r);return lf(()=>{const{initialValueFn:s,subscribe:l}=t,a=s();return i.current!==a&&(i.current=a,o(a)),l(c=>{i.current=c,o(c)})},[t,n]),r}(af)}const uf={name:"@lexical/react/ReactProvider"};function ff(){return H().getTextContent()}function df(n,e=!0){if(n)return!1;let t=ff();return e&&(t=t.trim()),t===""}function hf(n){if(!df(n,!1))return!1;const e=H().getChildren(),t=e.length;if(t>1)return!1;for(let r=0;r<t;r++){const o=e[r];if(B(o))return!1;if(S(o)){if(!wo(o)||o.__indent!==0)return!1;const i=o.getChildren(),s=i.length;for(let l=0;l<s;l++){const a=i[r];if(!A(a))return!1}}}return!0}function ua(n){return()=>hf(n)}function gf(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Wo=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?I.useLayoutEffect:I.useEffect;function pf({editor:n,ErrorBoundary:e}){return function(t,r){const[o,i]=I.useState(()=>t.getDecorators());return Wo(()=>t.registerDecoratorListener(s=>{Ho.flushSync(()=>{i(s)})}),[t]),I.useEffect(()=>{i(t.getDecorators())},[t]),I.useMemo(()=>{const s=[],l=Object.keys(o);for(let a=0;a<l.length;a++){const c=l[a],u=st.jsx(r,{onError:d=>t._onError(d),children:st.jsx(I.Suspense,{fallback:null,children:o[c]})}),f=t.getElementByKey(c);f!==null&&s.push(Ho.createPortal(u,f,c))}return s},[r,o,t])}(n,e)}function _f({editor:n,ErrorBoundary:e}){return function(t){const r=aa.maybeFromEditor(t);if(r&&r.hasExtensionByName(uf.name)){for(const o of["@lexical/plain-text","@lexical/rich-text"])r.hasExtensionByName(o)&&gf(320,o);return!0}return!1}(n)?null:st.jsx(pf,{editor:n,ErrorBoundary:e})}function fs(n){return n.getEditorState().read(ua(n.isComposing()))}function _d({contentEditable:n,placeholder:e=null,ErrorBoundary:t}){const[r]=pe();return function(o){Wo(()=>Re(nf(o),qu(o)),[o])}(r),st.jsxs(st.Fragment,{children:[n,st.jsx(mf,{content:e}),st.jsx(_f,{editor:r,ErrorBoundary:t})]})}function mf({content:n}){const[e]=pe(),t=function(o){const[i,s]=I.useState(()=>fs(o));return Wo(()=>{function l(){const a=fs(o);s(a)}return l(),Re(o.registerUpdateListener(()=>{l()}),o.registerEditableListener(()=>{l()}))},[o]),i}(e),r=cf();return t?typeof n=="function"?n(r):n:null}function md({defaultSelection:n}){const[e]=pe();return I.useEffect(()=>{e.focus(()=>{const t=document.activeElement,r=e.getRootElement();r===null||t!==null&&r.contains(t)||r.focus({preventScroll:!0})},{defaultSelection:n})},[n,e]),null}const yf=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?I.useLayoutEffect:I.useEffect;function yd({onClear:n}){const[e]=pe();return yf(()=>Ku(e,n),[e,n]),null}const fa=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?I.useLayoutEffect:I.useEffect;function xf({editor:n,ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:o,ariaErrorMessage:i,ariaExpanded:s,ariaInvalid:l,ariaLabel:a,ariaLabelledBy:c,ariaMultiline:u,ariaOwns:f,ariaRequired:d,autoCapitalize:g,className:h,id:p,role:_="textbox",spellCheck:m=!0,style:y,tabIndex:C,"data-testid":w,...E},v){const[k,T]=I.useState(n.isEditable()),b=I.useCallback(L=>{L&&L.ownerDocument&&L.ownerDocument.defaultView?n.setRootElement(L):n.setRootElement(null)},[n]),M=I.useMemo(()=>function(...L){return z=>{for(const R of L)typeof R=="function"?R(z):R!=null&&(R.current=z)}}(v,b),[b,v]);return fa(()=>(T(n.isEditable()),n.registerEditableListener(L=>{T(L)})),[n]),st.jsx("div",{"aria-activedescendant":k?e:void 0,"aria-autocomplete":k?t:"none","aria-controls":k?r:void 0,"aria-describedby":o,...i!=null?{"aria-errormessage":i}:{},"aria-expanded":k&&_==="combobox"?!!s:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":a,"aria-labelledby":c,"aria-multiline":u,"aria-owns":k?f:void 0,"aria-readonly":!k||void 0,"aria-required":d,autoCapitalize:g,className:h,contentEditable:k,"data-testid":w,id:p,ref:M,role:_,spellCheck:m,style:y,tabIndex:C,...E})}const Sf=I.forwardRef(xf);function ds(n){return n.getEditorState().read(ua(n.isComposing()))}const xd=I.forwardRef(Cf);function Cf(n,e){const{placeholder:t,...r}=n,[o]=pe();return st.jsxs(st.Fragment,{children:[st.jsx(Sf,{editor:o,...r,ref:e}),t!=null&&st.jsx(vf,{editor:o,content:t})]})}function vf({content:n,editor:e}){const t=function(s){const[l,a]=I.useState(()=>ds(s));return fa(()=>{function c(){const u=ds(s);a(u)}return c(),Re(s.registerUpdateListener(()=>{c()}),s.registerEditableListener(()=>{c()}))},[s]),l}(e),[r,o]=I.useState(e.isEditable());if(I.useLayoutEffect(()=>(o(e.isEditable()),e.registerEditableListener(s=>{o(s)})),[e]),!t)return null;let i=null;return typeof n=="function"?i=n(r):n!==null&&(i=n),i===null?null:st.jsx("div",{"aria-hidden":!0,children:i})}const Jo=/^(\d+(?:\.\d+)?)px$/,Fe={BOTH:3,NO_STATUS:0,ROW:1};class Sn extends At{constructor(t=Fe.NO_STATUS,r=1,o,i){super(i);x(this,"__colSpan");x(this,"__rowSpan");x(this,"__headerState");x(this,"__width");x(this,"__backgroundColor");x(this,"__verticalAlign");this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=o,this.__backgroundColor=null,this.__verticalAlign=void 0}static getType(){return"tablecell"}static clone(t){return new Sn(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:hs,priority:0}),th:t=>({conversion:hs,priority:0})}}static importJSON(t){return da().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),ho(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),Tt(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(q(r.element)){const o=r.element;o.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),o.style.border="1px solid black",this.__colSpan>1&&(o.colSpan=this.__colSpan),this.__rowSpan>1&&(o.rowSpan=this.__rowSpan),o.style.width=`${this.getWidth()||75}px`,o.style.verticalAlign=this.getVerticalAlign()||"top",o.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(o.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...ho(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=Fe.BOTH){const o=this.getWritable();return o.__headerState=t&r|o.__headerState&~r,o}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Fe.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function ho(n){return n==="middle"||n==="bottom"}function hs(n){const e=n,t=n.nodeName.toLowerCase();let r;Jo.test(e.style.width)&&(r=parseFloat(e.style.width));const o=da(t==="th"?Fe.ROW:Fe.NO_STATUS,e.colSpan,r);o.__rowSpan=e.rowSpan;const i=e.style.backgroundColor;i!==""&&(o.__backgroundColor=i);const s=e.style.verticalAlign;ho(s)&&(o.__verticalAlign=s);const l=e.style,a=(l&&l.textDecoration||"").split(" "),c=l.fontWeight==="700"||l.fontWeight==="bold",u=a.includes("line-through"),f=l.fontStyle==="italic",d=a.includes("underline");return{after:g=>{const h=[];let p=null;const _=()=>{if(p){const m=p.getFirstChild();re(m)&&p.getChildrenSize()===1&&m.remove()}};for(const m of g)Kc(m)||A(m)||re(m)?(A(m)&&(c&&m.toggleFormat("bold"),u&&m.toggleFormat("strikethrough"),f&&m.toggleFormat("italic"),d&&m.toggleFormat("underline")),p?p.append(m):(p=Q().append(m),h.push(p))):(h.push(m),_(),p=null);return _(),h.length===0&&h.push(Q()),h},node:o}}function da(n=Fe.NO_STATUS,e=1,t){return Kt(new Sn(n,e,t))}function ht(n){return n instanceof Sn}function X(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const o of e)r.append("v",o);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class mr extends At{constructor(t,r){super(r);x(this,"__height");this.__height=t}static getType(){return"tablerow"}static clone(t){return new mr(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:wf,priority:0})}}static importJSON(t){return ha().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),Tt(r,t.theme.tableRow),r}extractWithChild(t,r,o){return o==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function wf(n){const e=n;let t;return Jo.test(e.style.height)&&(t=parseFloat(e.style.height)),{after:r=>Gl(r,ht),node:ha(t)}}function ha(n){return Kt(new mr(n))}function Cn(n){return n instanceof mr}const ga=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,bf=ga&&"documentMode"in document?document.documentMode:null;ga&&"InputEvent"in window&&!bf&&new window.InputEvent("input");function Nf(n,e,t){const[r,o,i]=pa(n,e,t);return o===null&&X(207),i===null&&X(208),[r,o,i]}function pa(n,e,t){const r=[];let o=null,i=null;function s(a){let c=r[a];return c===void 0&&(r[a]=c=[]),c}const l=n.getChildren();for(let a=0;a<l.length;a++){const c=l[a];Cn(c)||X(209);const u=s(a);for(let f=c.getFirstChild(),d=0;f!=null;f=f.getNextSibling()){for(ht(f)||X(147);u[d]!==void 0;)d++;const g={cell:f,startColumn:d,startRow:a},{__rowSpan:h,__colSpan:p}=f;for(let _=0;_<h&&!(a+_>=l.length);_++){const m=s(a+_);for(let y=0;y<p;y++)m[d+y]=g}e!==null&&o===null&&e.is(f)&&(o=g),t!==null&&i===null&&t.is(f)&&(i=g)}}return[r,o,i]}function Ef(n){let e;if(n instanceof Sn)e=n;else if("__type"in n){const o=gt(n,ht);ht(o)||X(148),e=o}else{const o=gt(n.getNode(),ht);ht(o)||X(148),e=o}const t=e.getParent();Cn(t)||X(149);const r=t.getParent();return ma(r)||X(210),[e,t,r]}function Tf(n,e,t){let r,o=Math.min(e.startColumn,t.startColumn),i=Math.min(e.startRow,t.startRow),s=Math.max(e.startColumn+e.cell.__colSpan-1,t.startColumn+t.cell.__colSpan-1),l=Math.max(e.startRow+e.cell.__rowSpan-1,t.startRow+t.cell.__rowSpan-1);do{r=!1;for(let a=0;a<n.length;a++)for(let c=0;c<n[0].length;c++){const u=n[a][c];if(!u)continue;const f=u.startColumn+u.cell.__colSpan-1,d=u.startRow+u.cell.__rowSpan-1,g=u.startColumn<=s&&f>=o,h=u.startRow<=l&&d>=i;if(g&&h){const p=Math.min(o,u.startColumn),_=Math.max(s,f),m=Math.min(i,u.startRow),y=Math.max(l,d);p===o&&_===s&&m===i&&y===l||(o=p,s=_,i=m,l=y,r=!0)}}}while(r);return{maxColumn:s,maxRow:l,minColumn:o,minRow:i}}function gs(n){const[e,,t]=Ef(n),r=t.getChildren(),o=r.length,i=r[0].getChildren().length,s=new Array(o);for(let l=0;l<o;l++)s[l]=new Array(i);for(let l=0;l<o;l++){const a=r[l].getChildren();let c=0;for(let u=0;u<a.length;u++){for(;s[l][c];)c++;const f=a[u],d=f.__rowSpan||1,g=f.__colSpan||1;for(let h=0;h<d;h++)for(let p=0;p<g;p++)s[l+h][c+p]=f;if(e===f)return{colSpan:g,columnIndex:c,rowIndex:l,rowSpan:d};c+=g}}return null}function ps(n){const[[e,t,r,o],[i,s,l,a]]=["anchor","focus"].map(c=>{const u=n[c].getNode(),f=gt(u,ht);ht(f)||X(238,c,u.getKey(),u.getType());const d=f.getParent();Cn(d)||X(239,c);const g=d.getParent();return ma(g)||X(240,c),[u,f,d,g]});return o.is(a)||X(241),{anchorCell:t,anchorNode:e,anchorRow:r,anchorTable:o,focusCell:s,focusNode:i,focusRow:l,focusTable:a}}class jo{constructor(e,t,r){x(this,"tableKey");x(this,"anchor");x(this,"focus");x(this,"_cachedNodes");x(this,"dirty");this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e}getStartEndPoints(){return[this.anchor,this.focus]}isValid(){if(this.tableKey==="root"||this.anchor.key==="root"||this.anchor.type!=="element"||this.focus.key==="root"||this.focus.type!=="element")return!1;const e=Y(this.tableKey),t=Y(this.anchor.key),r=Y(this.focus.key);return e!==null&&t!==null&&r!==null}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return kf(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)}set(e,t,r){this.dirty=this.dirty||e!==this.tableKey||t!==this.anchor.key||r!==this.focus.key,this.tableKey=e,this.anchor.key=t,this.focus.key=r,this._cachedNodes=null}clone(){return new jo(this.tableKey,_t(this.anchor.key,this.anchor.offset,this.anchor.type),_t(this.focus.key,this.focus.offset,this.focus.type))}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(e){}insertText(){}hasFormat(e){let t=0;this.getNodes().filter(ht).forEach(o=>{const i=o.getFirstChild();wo(i)&&(t|=i.getTextFormat())});const r=qt[e];return(t&r)!==0}insertNodes(e){const t=this.focus.getNode();S(t)||X(151),rn(t.select(0,t.getChildrenSize())).insertNodes(e)}getShape(){const{anchorCell:e,focusCell:t}=ps(this),r=gs(e);r===null&&X(153);const o=gs(t);o===null&&X(155);const i=Math.min(r.columnIndex,o.columnIndex),s=Math.max(r.columnIndex+r.colSpan-1,o.columnIndex+o.colSpan-1),l=Math.min(r.rowIndex,o.rowIndex),a=Math.max(r.rowIndex+r.rowSpan-1,o.rowIndex+o.rowSpan-1);return{fromX:Math.min(i,s),fromY:Math.min(l,a),toX:Math.max(i,s),toY:Math.max(l,a)}}getNodes(){if(!this.isValid())return[];const e=this._cachedNodes;if(e!==null)return e;const{anchorTable:t,anchorCell:r,focusCell:o}=ps(this),i=o.getParents()[1];if(i!==t){if(t.isParentOf(o)){const _=i.getParent();_==null&&X(159),this.set(this.tableKey,o.getKey(),_.getKey())}else{const _=t.getParent();_==null&&X(158),this.set(this.tableKey,_.getKey(),o.getKey())}return this.getNodes()}const[s,l,a]=Nf(t,r,o),{minColumn:c,maxColumn:u,minRow:f,maxRow:d}=Tf(s,l,a),g=new Map([[t.getKey(),t]]);let h=null;for(let _=f;_<=d;_++)for(let m=c;m<=u;m++){const{cell:y}=s[_][m],C=y.getParent();Cn(C)||X(160),C!==h&&(g.set(C.getKey(),C),h=C),g.has(y.getKey())||Of(y,w=>{g.set(w.getKey(),w)})}const p=Array.from(g.values());return Be()||(this._cachedNodes=p),p}getTextContent(){const e=this.getNodes().filter(r=>ht(r));let t="";for(let r=0;r<e.length;r++){const o=e[r],i=o.__parent,s=(e[r+1]||{}).__parent;t+=o.getTextContent()+(s!==i?`
`:"	")}return t}}function kf(n){return n instanceof jo}function Of(n,e){const t=[[n]];for(let r=t.at(-1);r!==void 0&&t.length>0;r=t.at(-1)){const o=r.pop();o===void 0?t.pop():e(o)!==!1&&S(o)&&t.push(o.getChildren())}}function Ge(n){return q(n)&&n.nodeName==="TABLE"}function Mf(n,e){for(let t=e,r=null;t!==null;t=t.getParent()){if(n.is(t))return r;ht(t)&&(r=t)}return null}function Af(n,e,t){return Mf(n,Yt(e,t))}function _s(n,e,t){if(!e.theme.tableAlignment)return;const r=[],o=[];for(const i of["center","right"]){const s=e.theme.tableAlignment[i];s&&(i===t?o:r).push(s)}In(n,...r),Tt(n,...o)}const Df=new WeakSet;function ms(n=fr()){return Df.has(n)}class yr extends At{constructor(t){super(t);x(this,"__rowStriping");x(this,"__frozenColumnCount");x(this,"__frozenRowCount");x(this,"__colWidths");this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0,this.__colWidths=void 0}static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new yr(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:Ff,priority:1})}}static importJSON(t){return _a().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,o){return o==="html"}getDOMSlot(t){const r=Ge(t)?t:t.querySelector("table");return Ge(r)||X(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const o=document.createElement("table");this.__style&&(o.style.cssText=this.__style);const i=document.createElement("colgroup");if(o.appendChild(i),Vc(i),Tt(o,t.theme.table),this.updateTableElement(null,o,t),ms(r)){const s=document.createElement("div"),l=t.theme.tableScrollableWrapper;return l?Tt(s,l):s.style.cssText="overflow-x: auto;",s.appendChild(o),this.updateTableWrapper(null,s,o,t),s}return o}updateTableWrapper(t,r,o,i){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&function(s,l,a,c){c>0?(Tt(s,a.theme.tableFrozenColumn),l.setAttribute("data-lexical-frozen-column","true")):(In(s,a.theme.tableFrozenColumn),l.removeAttribute("data-lexical-frozen-column"))}(r,o,i,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&function(s,l,a,c){c>0?(Tt(s,a.theme.tableFrozenRow),l.setAttribute("data-lexical-frozen-row","true")):(In(s,a.theme.tableFrozenRow),l.removeAttribute("data-lexical-frozen-row"))}(r,o,i,this.__frozenRowCount)}updateTableElement(t,r,o){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&function(i,s,l){l?(Tt(i,s.theme.tableRowStriping),i.setAttribute("data-lexical-row-striping","true")):(In(i,s.theme.tableRowStriping),i.removeAttribute("data-lexical-row-striping"))}(r,o,this.__rowStriping),function(i,s,l,a){const c=i.querySelector("colgroup");if(!c)return;const u=[];for(let f=0;f<l;f++){const d=document.createElement("col"),g=a&&a[f];g&&(d.style.width=`${g}px`),u.push(d)}c.replaceChildren(...u)}(r,0,this.getColumnCount(),this.getColWidths()),_s(r,o,this.getFormatType())}updateDOM(t,r,o){const i=this.getDOMSlot(r).element;return r===i===ms()||(q(s=r)&&s.nodeName==="DIV"&&this.updateTableWrapper(t,r,i,o),this.updateTableElement(t,i,o),!1);var s}exportDOM(t){const r=super.exportDOM(t),{element:o}=r;return{after:i=>{if(r.after&&(i=r.after(i)),!Ge(i)&&q(i)&&(i=i.querySelector("table")),!Ge(i))return null;_s(i,t._config,this.getFormatType());const[s]=pa(this,null,null),l=new Map;for(const f of s)for(const d of f){const g=d.cell.getKey();l.has(g)||l.set(g,{colSpan:d.cell.getColSpan(),startColumn:d.startColumn})}const a=new Set;for(const f of i.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const d=f.getAttribute("data-temporary-table-cell-lexical-key");if(d){const g=l.get(d);if(f.removeAttribute("data-temporary-table-cell-lexical-key"),g){l.delete(d);for(let h=0;h<g.colSpan;h++)a.add(h+g.startColumn)}}}const c=i.querySelector(":scope > colgroup");if(c){const f=Array.from(i.querySelectorAll(":scope > colgroup > col")).filter((d,g)=>a.has(g));c.replaceChildren(...f)}const u=i.querySelectorAll(":scope > tr");if(u.length>0){const f=document.createElement("tbody");for(const d of u)f.appendChild(d);i.append(f)}return i},element:!Ge(o)&&q(o)?o.querySelector("table"):o}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:o,domRows:i}=r;for(let s=0;s<o;s++){const l=i[s];if(l!=null)for(let a=0;a<l.length;a++){const c=l[a];if(c==null)continue;const{elem:u}=c,f=Af(this,u);if(f!==null&&t.is(f))return{x:a,y:s}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,o){const{domRows:i}=o,s=i[r];if(s==null)return null;const l=s[t<s.length?t:s.length-1];return l??null}getDOMCellFromCordsOrThrow(t,r,o){const i=this.getDOMCellFromCords(t,r,o);if(!i)throw new Error("Cell not found at cords.");return i}getCellNodeFromCords(t,r,o){const i=this.getDOMCellFromCords(t,r,o);if(i==null)return null;const s=Yt(i.elem);return ht(s)?s:null}getCellNodeFromCordsOrThrow(t,r,o){const i=this.getCellNodeFromCords(t,r,o);if(!i)throw new Error("Node at cords not TableCellNode.");return i}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach(o=>{ht(o)&&(r+=o.getColSpan())}),r}}function Ff(n){const e=_a();n.hasAttribute("data-lexical-row-striping")&&e.setRowStriping(!0),n.hasAttribute("data-lexical-frozen-column")&&e.setFrozenColumns(1),n.hasAttribute("data-lexical-frozen-row")&&e.setFrozenRows(1);const t=n.querySelector(":scope > colgroup");if(t){let r=[];for(const o of t.querySelectorAll(":scope > col")){let i=o.style.width||"";if(!Jo.test(i)&&(i=o.getAttribute("width")||"",!/^\d+$/.test(i))){r=void 0;break}r.push(parseFloat(i))}r&&e.setColWidths(r)}return{after:r=>Gl(r,Cn),node:e}}function _a(){return Kt(new yr)}function ma(n){return n instanceof yr}export{wo as $,gd as A,Vf as B,Ks as C,H as D,Ko as E,nt as F,Tt as G,Ac as H,Iu as I,td as J,hd as K,_d as L,dd as M,O as N,S as O,Bo as P,bl as Q,Uf as R,cd as S,je as T,nc as U,Wf as V,Je as W,Nc as X,Jf as Y,Hf as Z,A as _,pe as a,od as a$,P as a0,Hn as a1,Gs as a2,qs as a3,js as a4,Us as a5,Qs as a6,Xs as a7,po as a8,ee as a9,id as aA,ct as aB,Ic as aC,Y as aD,ld as aE,yo as aF,_t as aG,Sl as aH,q as aI,gt as aJ,sd as aK,rt as aL,qf as aM,Bs as aN,Mt as aO,Rn as aP,kc as aQ,Ie as aR,ad as aS,Yf as aT,Bf as aU,Gf as aV,If as aW,Wa as aX,re as aY,ud as aZ,rd as a_,fd as aa,dc as ab,_o as ac,sr as ad,qr as ae,$c as af,ke as ag,Ys as ah,ne as ai,Hs as aj,Ws as ak,Hi as al,qi as am,Js as an,Vn as ao,Hr as ap,Oe as aq,an as ar,ln as as,Ou as at,qu as au,cf as av,aa as aw,uf as ax,ua as ay,Kf as az,md as b,ff as b0,df as b1,yd as c,nd as d,Eu as e,ed as f,Tu as g,At as h,Xf as i,F as j,Kt as k,In as l,Wt as m,pd as n,_e as o,Re as p,jf as q,Fs as r,$ as s,zs as t,Ae as u,kf as v,dt as w,xd as x,Qf as y,Zf as z};
