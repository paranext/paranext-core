var m0=Object.defineProperty;var y0=(n,e,t)=>e in n?m0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Sn=(n,e,t)=>y0(n,typeof e!="symbol"?e+"":e,t);import{j as L}from"./jsx-runtime-4wK_0ZO4.js";import{r as T,c as qr,g as _0}from"./iframe-BcYeWgcr.js";import{r as En}from"./index-CiidgNRF.js";import{d as b0,c as v0,s as C0,f as E0}from"./floating-ui.dom-DCpBEVSC.js";import{M as w0}from"./markdown-renderer.component-DWWrHvCP.js";import{C as k0,a as x0,b as S0,d as T0}from"./card-BSWwl2Bs.js";import"./index-xAGYJ6Tj.js";import"./shadcn-ui.util-DMJ19wEV.js";var A0=Object.getOwnPropertyNames,D0=Object.getOwnPropertySymbols,N0=Object.prototype.hasOwnProperty;function Ef(n,e){return function(r,i,s){return n(r,i,s)&&e(r,i,s)}}function oa(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var s=i.cache,o=s.get(t),a=s.get(r);if(o&&a)return o===r&&a===t;s.set(t,r),s.set(r,t);var l=n(t,r,i);return s.delete(t),s.delete(r),l}}function wf(n){return A0(n).concat(D0(n))}var M0=Object.hasOwn||function(n,e){return N0.call(n,e)};function Fi(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var O0="__v",I0="__o",R0="_owner",kf=Object.getOwnPropertyDescriptor,xf=Object.keys;function L0(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function P0(n,e){return Fi(n.getTime(),e.getTime())}function $0(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function F0(n,e){return n===e}function Sf(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=n.entries(),o,a,l=0;(o=s.next())&&!o.done;){for(var u=e.entries(),c=!1,f=0;(a=u.next())&&!a.done;){if(i[f]){f++;continue}var d=o.value,h=a.value;if(t.equals(d[0],h[0],l,f,n,e,t)&&t.equals(d[1],h[1],d[0],h[0],n,e,t)){c=i[f]=!0;break}f++}if(!c)return!1;l++}return!0}var B0=Fi;function q0(n,e,t){var r=xf(n),i=r.length;if(xf(e).length!==i)return!1;for(;i-- >0;)if(!tm(n,e,t,r[i]))return!1;return!0}function Zs(n,e,t){var r=wf(n),i=r.length;if(wf(e).length!==i)return!1;for(var s,o,a;i-- >0;)if(s=r[i],!tm(n,e,t,s)||(o=kf(n,s),a=kf(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function j0(n,e){return Fi(n.valueOf(),e.valueOf())}function U0(n,e){return n.source===e.source&&n.flags===e.flags}function Tf(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=n.values(),o,a;(o=s.next())&&!o.done;){for(var l=e.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&t.equals(o.value,a.value,o.value,a.value,n,e,t)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function W0(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function z0(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function tm(n,e,t,r){return(r===R0||r===I0||r===O0)&&(n.$$typeof||e.$$typeof)?!0:M0(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}var H0="[object Arguments]",K0="[object Boolean]",V0="[object Date]",J0="[object Error]",G0="[object Map]",Y0="[object Number]",X0="[object Object]",Q0="[object RegExp]",Z0="[object Set]",ev="[object String]",tv="[object URL]",nv=Array.isArray,Af=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Df=Object.assign,rv=Object.prototype.toString.call.bind(Object.prototype.toString);function iv(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,s=n.areMapsEqual,o=n.areNumbersEqual,a=n.areObjectsEqual,l=n.arePrimitiveWrappersEqual,u=n.areRegExpsEqual,c=n.areSetsEqual,f=n.areTypedArraysEqual,d=n.areUrlsEqual;return function(p,m,_){if(p===m)return!0;if(p==null||m==null)return!1;var C=typeof p;if(C!==typeof m)return!1;if(C!=="object")return C==="number"?o(p,m,_):C==="function"?i(p,m,_):!1;var v=p.constructor;if(v!==m.constructor)return!1;if(v===Object)return a(p,m,_);if(nv(p))return e(p,m,_);if(Af!=null&&Af(p))return f(p,m,_);if(v===Date)return t(p,m,_);if(v===RegExp)return u(p,m,_);if(v===Map)return s(p,m,_);if(v===Set)return c(p,m,_);var k=rv(p);return k===V0?t(p,m,_):k===Q0?u(p,m,_):k===G0?s(p,m,_):k===Z0?c(p,m,_):k===X0?typeof p.then!="function"&&typeof m.then!="function"&&a(p,m,_):k===tv?d(p,m,_):k===J0?r(p,m,_):k===H0?a(p,m,_):k===K0||k===Y0||k===ev?l(p,m,_):!1}}function sv(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?Zs:L0,areDatesEqual:P0,areErrorsEqual:$0,areFunctionsEqual:F0,areMapsEqual:r?Ef(Sf,Zs):Sf,areNumbersEqual:B0,areObjectsEqual:r?Zs:q0,arePrimitiveWrappersEqual:j0,areRegExpsEqual:U0,areSetsEqual:r?Ef(Tf,Zs):Tf,areTypedArraysEqual:r?Zs:W0,areUrlsEqual:z0};if(t&&(i=Df({},i,t(i))),e){var s=oa(i.areArraysEqual),o=oa(i.areMapsEqual),a=oa(i.areObjectsEqual),l=oa(i.areSetsEqual);i=Df({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return i}function ov(n){return function(e,t,r,i,s,o,a){return n(e,t,a)}}function av(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,s=n.strict;if(r)return function(l,u){var c=r(),f=c.cache,d=f===void 0?e?new WeakMap:void 0:f,h=c.meta;return t(l,u,{cache:d,equals:i,meta:h,strict:s})};if(e)return function(l,u){return t(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,u){return t(l,u,o)}}var Fr=ii();ii({strict:!0});ii({circular:!0});ii({circular:!0,strict:!0});ii({createInternalComparator:function(){return Fi}});ii({strict:!0,createInternalComparator:function(){return Fi}});ii({circular:!0,createInternalComparator:function(){return Fi}});ii({circular:!0,createInternalComparator:function(){return Fi},strict:!0});function ii(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,s=n.strict,o=s===void 0?!1:s,a=sv(n),l=iv(a),u=r?r(l):ov(l);return av({circular:t,comparator:l,createState:i,equals:u,strict:o})}const nm=T.createContext(null);function lv(n,e){return{getTheme:function(){return e??null}}}function we(){const n=T.useContext(nm);return n==null&&function(e,...t){const r=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",e);for(const s of t)i.append("v",s);throw r.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),n}function se(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Kn=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,uv=Kn&&"documentMode"in document?document.documentMode:null,nr=Kn&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),xi=Kn&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Va=!(!Kn||!("InputEvent"in window)||uv)&&"getTargetRanges"in new window.InputEvent("input"),_o=Kn&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),cs=Kn&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,cv=Kn&&/Android/.test(navigator.userAgent),rm=Kn&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Nf=Kn&&cv&&rm,Ja=Kn&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!rm;function Ga(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}const dv=1,fv=3,hv=9,pv=11,Si=0,im=1,ds=2,gv=0,mv=1,yv=2,Ya=4,Xa=8,ed=128,_v=1792|(112|(3|Ya|Xa)|ed),td=1,nd=2,rd=3,id=4,sd=5,od=6,Tl=_o||cs||Ja?" ":"​",Ar=`

`,bv=xi?" ":Tl,sm="֑-߿יִ-﷽ﹰ-ﻼ",om="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",vv=new RegExp("^[^"+om+"]*["+sm+"]"),Cv=new RegExp("^[^"+sm+"]*["+om+"]"),Jr={bold:1,capitalize:1024,code:16,highlight:ed,italic:2,lowercase:256,strikethrough:Ya,subscript:32,superscript:64,underline:Xa,uppercase:512},Ev={directionless:1,unmergeable:2},Mf={center:nd,end:od,justify:id,left:td,right:rd,start:sd},wv={[nd]:"center",[od]:"end",[id]:"justify",[td]:"left",[rd]:"right",[sd]:"start"},kv={normal:0,segmented:2,token:1},xv={[gv]:"normal",[yv]:"segmented",[mv]:"token"},Of="$config";function am(n,e,t,r,i,s){let o=n.getFirstChild();for(;o!==null;){const a=o.__key;o.__parent===e&&(V(o)&&am(o,a,t,r,i,s),t.has(a)||s.delete(a),i.push(a)),o=o.getNextSibling()}}const Sv=100;let Gu=!1,ad=0;function Tv(n){ad=n.timeStamp}function _u(n,e,t){const r=n.nodeName==="BR",i=e.__lexicalLineBreak;return i&&(n===i||r&&n.previousSibling===i)||r&&$l(n,t)!==void 0}function Av(n,e,t){const r=zn(Mn(t));let i=null,s=null;r!==null&&r.anchorNode===n&&(i=r.anchorOffset,s=r.focusOffset);const o=n.nodeValue;o!==null&&Md(e,o,i,s,!1)}function Dv(n,e,t){if(G(n)){const r=n.anchor.getNode();if(r.is(t)&&n.format!==r.getFormat())return!1}return Or(e)&&t.isAttached()}function Nv(n,e,t,r){for(let i=n;i&&!A2(i);i=qo(i)){const s=$l(i,e);if(s!==void 0){const o=Ae(s,t);if(o)return Le(o)||!qe(i)?void 0:[i,o]}else if(i===r)return[r,ay(t)]}}function lm(n,e,t){Gu=!0;const r=performance.now()-ad>Sv;try{Cn(n,()=>{const i=ne()||function(d){return d.getEditorState().read(()=>{const h=ne();return h!==null?h.clone():null})}(n),s=new Map,o=n.getRootElement(),a=n._editorState,l=n._blockCursorElement;let u=!1,c="";for(let d=0;d<e.length;d++){const h=e[d],p=h.type,m=h.target,_=Nv(m,n,a,o);if(!_)continue;const[C,v]=_;if(p==="characterData")r&&ee(v)&&Or(m)&&Dv(i,m,v)&&Av(m,v,n);else if(p==="childList"){u=!0;const k=h.addedNodes;for(let x=0;x<k.length;x++){const O=k[x],N=sy(O),I=O.parentNode;if(I!=null&&O!==l&&N===null&&!_u(O,I,n)){if(xi){const H=(qe(O)?O.innerText:null)||O.nodeValue;H&&(c+=H)}I.removeChild(O)}}const M=h.removedNodes,$=M.length;if($>0){let x=0;for(let O=0;O<$;O++){const N=M[O];(_u(N,m,n)||l===N)&&(m.appendChild(N),x++)}$!==x&&s.set(C,v)}}}if(s.size>0)for(const[d,h]of s)h.reconcileObservedMutation(d,n);const f=t.takeRecords();if(f.length>0){for(let d=0;d<f.length;d++){const h=f[d],p=h.addedNodes,m=h.target;for(let _=0;_<p.length;_++){const C=p[_],v=C.parentNode;v==null||C.nodeName!=="BR"||_u(C,m,n)||v.removeChild(C)}}t.takeRecords()}i!==null&&(u&&Mt(i),xi&&fy(n)&&i.insertRawText(c))})}finally{Gu=!1}}function um(n){const e=n._observer;e!==null&&lm(n,e.takeRecords(),e)}function cm(n){(function(e){ad===0&&Mn(e).addEventListener("textInput",Tv,!0)})(n),n._observer=new MutationObserver((e,t)=>{lm(n,e,t)})}let Mv=class{constructor(e,t){this.key=e,this.parse=t.parse.bind(t),this.unparse=(t.unparse||Rv).bind(t),this.isEqual=(t.isEqual||Object.is).bind(t),this.defaultValue=this.parse(void 0)}};function dm(n,e){return new Mv(n,e)}function fs(n,e,t="latest"){const r=(t==="latest"?n.getLatest():n).__state;return r?r.getValue(e):e.defaultValue}function kr(n,e,t){let r;if(kt(),typeof t=="function"){const s=n.getLatest(),o=fs(s,e);if(r=t(o),e.isEqual(o,r))return s}else r=t;const i=n.getWritable();return hm(i).updateFromKnown(e,r),i}function Ov(n){const e=new Map,t=new Set;for(let r=typeof n=="function"?n:n.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:i}=Ld(r);if(i&&i.stateConfigs)for(const s of i.stateConfigs){let o;"stateConfig"in s?(o=s.stateConfig,s.flat&&t.add(o.key)):o=s,e.set(o.key,o)}}return{flatKeys:t,sharedConfigMap:e}}let Iv=class fm{constructor(e,t,r=void 0,i=new Map,s=void 0){this.node=e,this.sharedNodeState=t,this.unknownState=r,this.knownState=i;const{sharedConfigMap:o}=this.sharedNodeState,a=s!==void 0?s:function(l,u,c){let f=c.size;if(u)for(const d in u){const h=l.get(d);h&&c.has(h)||f++}return f}(o,r,i);this.size=a}getValue(e){const t=this.knownState.get(e);if(t!==void 0)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const i=this.unknownState[e.key];i!==void 0&&(r=e.parse(i)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState},t={};for(const[r,i]of this.knownState)r.isEqual(i,r.defaultValue)?delete e[r.key]:e[r.key]=r.unparse(i);for(const r of this.sharedNodeState.flatKeys)r in e&&(t[r]=e[r],delete e[r]);return If(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;const{sharedNodeState:t,unknownState:r}=this,i=new Map(this.knownState);return new fm(e,t,function(s,o,a){let l;if(a)for(const[u,c]of Object.entries(a)){const f=s.get(u);f?o.has(f)||o.set(f,f.parse(c)):(l=l||{},l[u]=c)}return l}(t.sharedConfigMap,i,r),i,this.size)}updateFromKnown(e,t){const r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);const{knownState:i,unknownState:s}=this;i.has(e)||s&&r in s||(s&&(delete s[r],this.unknownState=If(s)),this.size++),i.set(e,t)}updateFromUnknown(e,t){const r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){const{knownState:t}=this;for(const r of t.keys())t.set(r,r.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(const[r,i]of Object.entries(e))this.updateFromUnknown(r,i)}};function hm(n){const e=n.getWritable(),t=e.__state?e.__state.getWritable(e):new Iv(e,pm(e));return e.__state=t,t}function pm(n){return n.__state?n.__state.sharedNodeState:ry(Bl(),n.getType()).sharedNodeState}function If(n){if(n)for(const e in n)return n}function Rv(n){return n}function Rf(n,e,t){for(const[r,i]of e.knownState){if(n.has(r.key))continue;n.add(r.key);const s=t?t.getValue(r):r.defaultValue;if(s!==i&&!r.isEqual(s,i))return!0}return!1}function Lf(n,e,t){const{unknownState:r}=e,i=t?t.unknownState:void 0;if(r){for(const[s,o]of Object.entries(r))if(!n.has(s)&&(n.add(s),o!==(i?i[s]:void 0)))return!0}return!1}function Pf(n,e){const t=n.__state;return t&&t.node===n?t.getWritable(e):t}function $f(n,e){const t=n.__mode,r=n.__format,i=n.__style,s=e.__mode,o=e.__format,a=e.__style,l=n.__state,u=e.__state;return(t===null||t===s)&&(r===null||r===o)&&(i===null||i===a)&&(n.__state===null||l===u||function(c,f){if(c===f)return!0;if(c&&f&&c.size!==f.size)return!1;const d=new Set;return!(c&&Rf(d,c,f)||f&&Rf(d,f,c)||c&&Lf(d,c,f)||f&&Lf(d,f,c))}(l,u))}function Ff(n,e){const t=n.mergeWithSibling(e),r=Ve()._normalizedNodes;return r.add(n.__key),r.add(e.__key),t}function Bf(n){let e,t,r=n;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&ee(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if($f(e,r)){r=Ff(e,r);break}break}e.remove()}for(;(t=r.getNextSibling())!==null&&ee(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if($f(r,t)){r=Ff(r,t);break}break}t.remove()}}else r.remove()}function bo(n){return qf(n.anchor),qf(n.focus),n}function qf(n){for(;n.type==="element";){const e=n.getNode(),t=n.offset;let r,i;if(t===e.getChildrenSize()?(r=e.getChildAtIndex(t-1),i=!0):(r=e.getChildAtIndex(t),i=!1),ee(r)){n.set(r.__key,i?r.getTextContentSize():0,"text",!0);break}if(!V(r))break;n.set(r.__key,i?r.getChildrenSize():0,"element",!0)}}let Gr,Vt,vo,Al,Yu,Xu,Ti,jn,Qu,Co,at="",Kt="",er=null,tr="",Er="",gm=!1,Eo=!1,Ra=null;function Qa(n,e){const t=Ti.get(n);if(e!==null){const r=tc(n);r.parentNode===e&&e.removeChild(r)}if(jn.has(n)||Vt._keyToDOMMap.delete(n),V(t)){const r=el(t,Ti);Zu(r,0,r.length-1,null)}t!==void 0&&Od(Co,vo,Al,t,"destroyed")}function Zu(n,e,t,r){let i=e;for(;i<=t;++i){const s=n[i];s!==void 0&&Qa(s,r)}}function pi(n,e){n.setProperty("text-align",e)}const Lv="40px";function mm(n,e){const t=Gr.theme.indent;if(typeof t=="string"){const i=n.classList.contains(t);e>0&&!i?n.classList.add(t):e<1&&i&&n.classList.remove(t)}const r=getComputedStyle(n).getPropertyValue("--lexical-indent-base-value")||Lv;n.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function ym(n,e){const t=n.style;e===0?pi(t,""):e===td?pi(t,"left"):e===nd?pi(t,"center"):e===rd?pi(t,"right"):e===id?pi(t,"justify"):e===sd?pi(t,"start"):e===od&&pi(t,"end")}function Za(n,e){const t=jn.get(n);t===void 0&&se(60);const r=t.createDOM(Gr,Vt);if(function(i,s,o){const a=o._keyToDOMMap;(function(l,u,c){const f=`__lexicalKey_${u._key}`;l[f]=c})(s,o,i),a.set(i,s)}(n,r,Vt),ee(t)?r.setAttribute("data-lexical-text","true"):Le(t)&&r.setAttribute("data-lexical-decorator","true"),V(t)){const i=t.__indent,s=t.__size;if(i!==0&&mm(r,i),s!==0){const a=s-1;(function(l,u,c,f){const d=Kt;Kt="",ec(l,c,0,u,c.getDOMSlot(f)),bm(c,f),Kt=d})(el(t,jn),a,t,r)}const o=t.__format;o!==0&&ym(r,o),t.isInline()||_m(null,t,r),Fl(t)&&(at+=Ar,Er+=Ar)}else{const i=t.getTextContent();if(Le(t)){const s=t.decorate(Vt,Gr);s!==null&&vm(n,s),r.contentEditable="false"}else ee(t)&&(t.isDirectionless()||(Kt+=i));at+=i,Er+=i}return e!==null&&e.insertChild(r),Od(Co,vo,Al,t,"created"),r}function ec(n,e,t,r,i){const s=at;at="";let o=t;for(;o<=r;++o){Za(n[o],i);const a=jn.get(n[o]);a!==null&&ee(a)&&(er===null&&(er=a.getFormat()),tr===""&&(tr=a.getStyle()))}Fl(e)&&(at+=Ar),i.element.__lexicalTextContent=at,at=s+at}function jf(n,e){if(n){const t=n.__last;if(t){const r=e.get(t);if(r)return bi(r)?"line-break":Le(r)&&r.isInline()?"decorator":null}return"empty"}return null}function _m(n,e,t){const r=jf(n,Ti),i=jf(e,jn);r!==i&&e.getDOMSlot(t).setManagedLineBreak(i)}function bm(n,e){const t=e.__lexicalDirTextContent||"",r=e.__lexicalDir||"";if(t!==Kt||r!==Ra){const i=Kt==="",s=i?Ra:function(o){return vv.test(o)?"rtl":Cv.test(o)?"ltr":null}(Kt);if(s!==r){const o=e.classList,a=Gr.theme;let l=r!==null?a[r]:void 0,u=s!==null?a[s]:void 0;if(l!==void 0){if(typeof l=="string"){const c=Ga(l);l=a[r]=c}o.remove(...l)}if(s===null||i&&s==="ltr")e.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const c=Ga(u);u=a[s]=c}u!==void 0&&o.add(...u)}e.dir=s}Eo||(n.getWritable().__dir=s)}Ra=s,e.__lexicalDirTextContent=Kt,e.__lexicalDir=s}}function Pv(n,e,t){const r=Kt;var i;Kt="",er=null,tr="",function(s,o,a){const l=at,u=s.__size,c=o.__size;at="";const f=a.element;if(u===1&&c===1){const d=s.__first,h=o.__first;if(d===h)io(d,f);else{const m=tc(d),_=Za(h,null);try{f.replaceChild(_,m)}catch(C){if(typeof C=="object"&&C!=null){const v=`${C.toString()} Parent: ${f.tagName}, new child: {tag: ${_.tagName} key: ${h}}, old child: {tag: ${m.tagName}, key: ${d}}.`;throw new Error(v)}throw C}Qa(d,null)}const p=jn.get(h);ee(p)&&(er===null&&(er=p.getFormat()),tr===""&&(tr=p.getStyle()))}else{const d=el(s,Ti),h=el(o,jn);if(d.length!==u&&se(227),h.length!==c&&se(228),u===0)c!==0&&ec(h,o,0,c-1,a);else if(c===0){if(u!==0){const p=a.after==null&&a.before==null&&a.element.__lexicalLineBreak==null;Zu(d,0,u-1,p?null:f),p&&(f.textContent="")}}else(function(p,m,_,C,v,k){const M=C-1,$=v-1;let x,O,N=k.getFirstChild(),I=0,H=0;for(;I<=M&&H<=$;){const S=m[I],K=_[H];if(S===K)N=bu(io(K,k.element)),I++,H++;else{x===void 0&&(x=new Set(m)),O===void 0&&(O=new Set(_));const P=O.has(S),j=x.has(K);if(P)if(j){const z=ys(Vt,K);z===N?N=bu(io(K,k.element)):(k.withBefore(N).insertChild(z),io(K,k.element)),I++,H++}else Za(K,k.withBefore(N)),H++;else N=bu(tc(S)),Qa(S,k.element),I++}const A=jn.get(K);A!==null&&ee(A)&&(er===null&&(er=A.getFormat()),tr===""&&(tr=A.getStyle()))}const w=I>M,q=H>$;if(w&&!q){const S=_[$+1],K=S===void 0?null:Vt.getElementByKey(S);ec(_,p,H,$,k.withBefore(K))}else q&&!w&&Zu(m,I,M,k.element)})(o,d,h,u,c,a)}Fl(o)&&(at+=Ar),f.__lexicalTextContent=at,at=l+at}(n,e,e.getDOMSlot(t)),bm(e,t),i=e,er==null||er===i.__textFormat||Eo||i.setTextFormat(er),function(s){tr===""||tr===s.__textStyle||Eo||s.setTextStyle(tr)}(e),Kt=r}function el(n,e){const t=[];let r=n.__first;for(;r!==null;){const i=e.get(r);i===void 0&&se(101),t.push(r),r=i.__next}return t}function io(n,e){const t=Ti.get(n);let r=jn.get(n);t!==void 0&&r!==void 0||se(61);const i=gm||Xu.has(n)||Yu.has(n),s=ys(Vt,n);if(t===r&&!i){if(V(t)){const o=s.__lexicalTextContent;o!==void 0&&(at+=o,Er+=o);const a=s.__lexicalDirTextContent;a!==void 0&&(Kt+=a)}else{const o=t.getTextContent();ee(t)&&!t.isDirectionless()&&(Kt+=o),Er+=o,at+=o}return s}if(t!==r&&i&&Od(Co,vo,Al,r,"updated"),r.updateDOM(t,s,Gr)){const o=Za(n,null);return e===null&&se(62),e.replaceChild(o,s),Qa(n,null),o}if(V(t)&&V(r)){const o=r.__indent;o!==t.__indent&&mm(s,o);const a=r.__format;a!==t.__format&&ym(s,a),i&&(Pv(t,r,s),St(r)||r.isInline()||_m(t,r,s)),Fl(r)&&(at+=Ar,Er+=Ar)}else{const o=r.getTextContent();if(Le(r)){const a=r.decorate(Vt,Gr);a!==null&&vm(n,a)}else ee(r)&&!r.isDirectionless()&&(Kt+=o);at+=o,Er+=o}if(!Eo&&St(r)&&r.__cachedText!==Er){const o=r.getWritable();o.__cachedText=Er,r=o}return s}function vm(n,e){let t=Vt._pendingDecorators;const r=Vt._decorators;if(t===null){if(r[n]===e)return;t=oy(Vt)}t[n]=e}function bu(n){let e=n.nextSibling;return e!==null&&e===Vt._blockCursorElement&&(e=e.nextSibling),e}function $v(n,e,t,r,i,s){at="",Er="",Kt="",gm=r===ds,Ra=null,Vt=t,Gr=t._config,vo=t._nodes,Al=Vt._listeners.mutation,Yu=i,Xu=s,Ti=n._nodeMap,jn=e._nodeMap,Eo=e._readOnly,Qu=new Map(t._keyToDOMMap);const o=new Map;return Co=o,io("root",null),Vt=void 0,vo=void 0,Yu=void 0,Xu=void 0,Ti=void 0,jn=void 0,Gr=void 0,Qu=void 0,Co=void 0,o}function tc(n){const e=Qu.get(n);return e===void 0&&se(75,n),e}function be(n){return{type:n}}const Ts=be("SELECTION_CHANGE_COMMAND"),Fv=be("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),Cm=be("CLICK_COMMAND"),sr=be("DELETE_CHARACTER_COMMAND"),Hr=be("INSERT_LINE_BREAK_COMMAND"),wo=be("INSERT_PARAGRAPH_COMMAND"),_i=be("CONTROLLED_TEXT_INSERTION_COMMAND"),Bi=be("PASTE_COMMAND"),tl=be("REMOVE_TEXT_COMMAND"),hs=be("DELETE_WORD_COMMAND"),ps=be("DELETE_LINE_COMMAND"),jr=be("FORMAT_TEXT_COMMAND"),Dl=be("UNDO_COMMAND"),Nl=be("REDO_COMMAND"),As=be("KEYDOWN_COMMAND"),ld=be("KEY_ARROW_RIGHT_COMMAND"),Bv=be("MOVE_TO_END"),ud=be("KEY_ARROW_LEFT_COMMAND"),qv=be("MOVE_TO_START"),cd=be("KEY_ARROW_UP_COMMAND"),dd=be("KEY_ARROW_DOWN_COMMAND"),gs=be("KEY_ENTER_COMMAND"),Em=be("KEY_SPACE_COMMAND"),fd=be("KEY_BACKSPACE_COMMAND"),Ml=be("KEY_ESCAPE_COMMAND"),hd=be("KEY_DELETE_COMMAND"),pd=be("KEY_TAB_COMMAND"),jv=be("INSERT_TAB_COMMAND"),Uv=be("INDENT_CONTENT_COMMAND"),Uf=be("OUTDENT_CONTENT_COMMAND"),Ol=be("DROP_COMMAND"),Wv=be("FORMAT_ELEMENT_COMMAND"),gd=be("DRAGSTART_COMMAND"),wm=be("DRAGOVER_COMMAND"),zv=be("DRAGEND_COMMAND"),qi=be("COPY_COMMAND"),Ds=be("CUT_COMMAND"),nl=be("SELECT_ALL_COMMAND"),md=be("CLEAR_EDITOR_COMMAND"),km=be("CLEAR_HISTORY_COMMAND"),so=be("CAN_REDO_COMMAND"),oo=be("CAN_UNDO_COMMAND"),Hv=be("FOCUS_COMMAND"),Kv=be("BLUR_COMMAND"),Vv=be("KEY_MODIFIER_COMMAND"),yr=Object.freeze({}),nc=30,rc=[["keydown",function(n,e){if(fo=n.timeStamp,xm=n.key,!e.isComposing()&&!ce(e,As,n)&&n.key!=null){if(vu&&mh(n))return Cn(e,()=>{aa(e,Cu)}),vu=!1,void(Cu="");if(function(t){return Be(t,"ArrowRight",{shiftKey:"any"})}(n))ce(e,ld,n);else if(function(t){return Be(t,"ArrowRight",vr)}(n))ce(e,Bv,n);else if(function(t){return Be(t,"ArrowLeft",{shiftKey:"any"})}(n))ce(e,ud,n);else if(function(t){return Be(t,"ArrowLeft",vr)}(n))ce(e,qv,n);else if(function(t){return Be(t,"ArrowUp",{altKey:"any",shiftKey:"any"})}(n))ce(e,cd,n);else if(function(t){return Be(t,"ArrowDown",{altKey:"any",shiftKey:"any"})}(n))ce(e,dd,n);else if(function(t){return Be(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(n))ho=!0,ce(e,gs,n);else if(function(t){return t.key===" "}(n))ce(e,Em,n);else if(function(t){return nr&&Be(t,"o",{ctrlKey:!0})}(n))n.preventDefault(),ho=!0,ce(e,Hr,!0);else if(function(t){return Be(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(n))ho=!1,ce(e,gs,n);else if(function(t){return Be(t,"Backspace",{shiftKey:"any"})||nr&&Be(t,"h",{ctrlKey:!0})}(n))mh(n)?ce(e,fd,n):(n.preventDefault(),ce(e,sr,!0));else if(function(t){return t.key==="Escape"}(n))ce(e,Ml,n);else if(function(t){return Be(t,"Delete",{})||nr&&Be(t,"d",{ctrlKey:!0})}(n))(function(t){return t.key==="Delete"})(n)?ce(e,hd,n):(n.preventDefault(),ce(e,sr,!1));else if(function(t){return Be(t,"Backspace",gh)}(n))n.preventDefault(),ce(e,hs,!0);else if(function(t){return Be(t,"Delete",gh)}(n))n.preventDefault(),ce(e,hs,!1);else if(function(t){return nr&&Be(t,"Backspace",{metaKey:!0})}(n))n.preventDefault(),ce(e,ps,!0);else if(function(t){return nr&&(Be(t,"Delete",{metaKey:!0})||Be(t,"k",{ctrlKey:!0}))}(n))n.preventDefault(),ce(e,ps,!1);else if(function(t){return Be(t,"b",vr)}(n))n.preventDefault(),ce(e,jr,"bold");else if(function(t){return Be(t,"u",vr)}(n))n.preventDefault(),ce(e,jr,"underline");else if(function(t){return Be(t,"i",vr)}(n))n.preventDefault(),ce(e,jr,"italic");else if(function(t){return Be(t,"Tab",{shiftKey:"any"})}(n))ce(e,pd,n);else if(function(t){return Be(t,"z",vr)}(n))n.preventDefault(),ce(e,Dl,void 0);else if(function(t){return nr?Be(t,"z",{metaKey:!0,shiftKey:!0}):Be(t,"y",{ctrlKey:!0})||Be(t,"z",{ctrlKey:!0,shiftKey:!0})}(n))n.preventDefault(),ce(e,Nl,void 0);else{const t=e._editorState._selection;t===null||G(t)?yh(n)&&(n.preventDefault(),ce(e,nl,n)):function(r){return Be(r,"c",vr)}(n)?(n.preventDefault(),ce(e,qi,n)):function(r){return Be(r,"x",vr)}(n)?(n.preventDefault(),ce(e,Ds,n)):yh(n)&&(n.preventDefault(),ce(e,nl,n))}(function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey})(n)&&ce(e,Vv,n)}}],["pointerdown",function(n,e){const t=n.target,r=n.pointerType;ji(t)&&r!=="touch"&&r!=="pen"&&n.button===0&&Cn(e,()=>{fh(t)||(sc=!0)})}],["compositionstart",function(n,e){Cn(e,()=>{const t=ne();if(G(t)&&!e.isComposing()){const r=t.anchor,i=t.anchor.getNode();xt(r.key),(n.timeStamp<fo+nc||r.type==="element"||!t.isCollapsed()||i.getFormat()!==t.format||ee(i)&&i.getStyle()!==t.style)&&ce(e,_i,bv)}})}],["compositionend",function(n,e){xi?eo=!0:cs||!_o&&!Ja?Cn(e,()=>{aa(e,n.data)}):(vu=!0,Cu=n.data)}],["input",function(n,e){n.stopPropagation(),Cn(e,()=>{if(qe(n.target)&&fh(n.target))return;const t=ne(),r=n.data,i=Nm(n);if(r!=null&&G(t)&&Am(t,i,r,n.timeStamp,!1)){eo&&(aa(e,r),eo=!1);const s=t.anchor.getNode(),o=zn(Mn(e));if(o===null)return;const a=t.isBackward(),l=a?t.anchor.offset:t.focus.offset,u=a?t.focus.offset:t.anchor.offset;Va&&!t.isCollapsed()&&ee(s)&&o.anchorNode!==null&&s.getTextContent().slice(0,l)+r+s.getTextContent().slice(l+u)===cy(o.anchorNode)||ce(e,_i,r);const c=r.length;xi&&c>1&&n.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=c),_o||cs||Ja||!e.isComposing()||(fo=0,xt(null))}else Nd(!1,e,r!==null?r:void 0),eo&&(aa(e,r||void 0),eo=!1);(function(){kt();const s=Ve();um(s)})()},{event:n}),es=null}],["click",function(n,e){Cn(e,()=>{const t=ne(),r=zn(Mn(e)),i=Ms();if(r){if(G(t)){const s=t.anchor,o=s.getNode();if(s.type==="element"&&s.offset===0&&t.isCollapsed()&&!St(o)&&De().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&i!==null&&t.is(i))r.removeAllRanges(),t.dirty=!0;else if(n.detail===3&&!t.isCollapsed()&&o!==t.focus.getNode()){const a=function(l,u){let c=l;for(;c!==De()&&c!=null;){if(u(c))return c;c=c.getParent()}return null}(o,l=>V(l)&&!l.isInline());V(a)&&a.select(0)}}else if(n.pointerType==="touch"||n.pointerType==="pen"){const s=r.anchorNode;(qe(s)||Or(s))&&Mt(bd(i,r,e,n))}}ce(e,Cm,n)})}],["cut",yr],["copy",yr],["dragstart",yr],["dragover",yr],["dragend",yr],["paste",yr],["focus",yr],["blur",yr],["drop",yr]];Va&&rc.push(["beforeinput",(n,e)=>function(t,r){const i=t.inputType,s=Nm(t);i==="deleteCompositionText"||xi&&fy(r)||i!=="insertCompositionText"&&Cn(r,()=>{const o=ne();if(i==="deleteContentBackward"){if(o===null){const h=Ms();if(!G(h))return;Mt(h.clone())}if(G(o)){const h=o.anchor.key===o.focus.key;if(a=t.timeStamp,xm==="MediaLast"&&a<fo+nc&&r.isComposing()&&h){if(xt(null),fo=0,setTimeout(()=>{Cn(r,()=>{xt(null)})},nc),G(o)){const p=o.anchor.getNode();p.markDirty(),ee(p)||se(142),Dm(o,p)}}else{xt(null),t.preventDefault();const p=o.anchor.getNode(),m=p.getTextContent(),_=p.canInsertTextAfter(),C=o.anchor.offset===0&&o.focus.offset===m.length;let v=Nf&&h&&!C&&_;if(v&&o.isCollapsed()&&(v=!Le(dc(o.anchor,!0))),!v){ce(r,sr,!0);const k=ne();Nf&&G(k)&&k.isCollapsed()&&(yi=k,setTimeout(()=>yi=null))}}return}}var a;if(!G(o))return;const l=t.data;es!==null&&Nd(!1,r,es),o.dirty&&es===null||!o.isCollapsed()||St(o.anchor.getNode())||s===null||o.applyDOMRange(s),es=null;const u=o.anchor,c=o.focus,f=u.getNode(),d=c.getNode();if(i!=="insertText"&&i!=="insertTranspose")switch(t.preventDefault(),i){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ce(r,_i,t);break;case"insertFromComposition":xt(null),ce(r,_i,t);break;case"insertLineBreak":xt(null),ce(r,Hr,!1);break;case"insertParagraph":xt(null),ho&&!cs?(ho=!1,ce(r,Hr,!1)):ce(r,wo,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ce(r,Bi,t);break;case"deleteByComposition":(function(h,p){return h!==p||V(h)||V(p)||!Ci(h)||!Ci(p)})(f,d)&&ce(r,tl,t);break;case"deleteByDrag":case"deleteByCut":ce(r,tl,t);break;case"deleteContent":ce(r,sr,!1);break;case"deleteWordBackward":ce(r,hs,!0);break;case"deleteWordForward":ce(r,hs,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ce(r,ps,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ce(r,ps,!1);break;case"formatStrikeThrough":ce(r,jr,"strikethrough");break;case"formatBold":ce(r,jr,"bold");break;case"formatItalic":ce(r,jr,"italic");break;case"formatUnderline":ce(r,jr,"underline");break;case"historyUndo":ce(r,Dl,void 0);break;case"historyRedo":ce(r,Nl,void 0)}else{if(l===`
`)t.preventDefault(),ce(r,Hr,!1);else if(l===Ar)t.preventDefault(),ce(r,wo,void 0);else if(l==null&&t.dataTransfer){const h=t.dataTransfer.getData("text/plain");t.preventDefault(),o.insertRawText(h)}else l!=null&&Am(o,s,l,t.timeStamp,!0)?(t.preventDefault(),ce(r,_i,l)):es=l;Sm=t.timeStamp}})}(n,e)]);let fo=0,xm=null,Sm=0,es=null;const rl=new WeakMap;let ic=!1,sc=!1,ho=!1,eo=!1,vu=!1,Cu="",yi=null,Tm=[0,"",0,"root",0];function Am(n,e,t,r,i){const s=n.anchor,o=n.focus,a=s.getNode(),l=Ve(),u=zn(Mn(l)),c=u!==null?u.anchorNode:null,f=s.key,d=l.getElementByKey(f),h=t.length;return f!==o.key||!ee(a)||(!i&&(!Va||Sm<r+50)||a.isDirty()&&h<2||ly(t))&&s.offset!==o.offset&&!a.isComposing()||Cr(a)||a.isDirty()&&h>1||(i||!Va)&&d!==null&&!a.isComposing()&&c!==ms(d)||u!==null&&e!==null&&(!e.collapsed||e.startContainer!==u.anchorNode||e.startOffset!==u.anchorOffset)||a.getFormat()!==n.format||a.getStyle()!==n.style||function(p,m){if(m.isSegmented())return!0;if(!p.isCollapsed())return!1;const _=p.anchor.offset,C=m.getParentOrThrow(),v=Ci(m);return _===0?!m.canInsertTextBefore()||!C.canInsertTextBefore()&&!m.isComposing()||v||function(k){const M=k.getPreviousSibling();return(ee(M)||V(M)&&M.isInline())&&!M.canInsertTextAfter()}(m):_===m.getTextContentSize()&&(!m.canInsertTextAfter()||!C.canInsertTextAfter()&&!m.isComposing()||v)}(n,a)}function Wf(n,e){return Or(n)&&n.nodeValue!==null&&e!==0&&e!==n.nodeValue.length}function zf(n,e,t){const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=n;ic&&(ic=!1,Wf(r,i)&&Wf(s,o)&&!yi)||Cn(e,()=>{if(!t)return void Mt(null);if(!Bo(e,r,s))return;let a=ne();if(yi&&G(a)&&a.isCollapsed()){const l=a.anchor,u=yi.anchor;(l.key===u.key&&l.offset===u.offset+1||l.offset===1&&u.getNode().is(l.getNode().getPreviousSibling()))&&(a=yi.clone(),Mt(a))}if(yi=null,G(a)){const l=a.anchor,u=l.getNode();if(a.isCollapsed()){n.type==="Range"&&n.anchorNode===n.focusNode&&(a.dirty=!0);const c=Mn(e).event,f=c?c.timeStamp:performance.now(),[d,h,p,m,_]=Tm,C=De(),v=e.isComposing()===!1&&C.getTextContent()==="";if(f<_+200&&l.offset===p&&l.key===m)La(a,d,h);else if(l.type==="text")ee(u)||se(141),Dm(a,u);else if(l.type==="element"&&!v){V(u)||se(259);const k=l.getNode();k.isEmpty()?function(M,$){const x=$.getTextFormat(),O=$.getTextStyle();La(M,x,O)}(a,k):La(a,0,"")}}else{const c=l.key,f=a.focus.key,d=a.getNodes(),h=d.length,p=a.isBackward(),m=p?o:i,_=p?i:o,C=p?f:c,v=p?c:f;let k=_v,M=!1;for(let $=0;$<h;$++){const x=d[$],O=x.getTextContentSize();if(ee(x)&&O!==0&&!($===0&&x.__key===C&&m===O||$===h-1&&x.__key===v&&_===0)&&(M=!0,k&=x.getFormat(),k===0))break}a.format=M?k:0}}ce(e,Ts,void 0)})}function La(n,e,t){n.format===e&&n.style===t||(n.format=e,n.style=t,n.dirty=!0)}function Dm(n,e){La(n,e.getFormat(),e.getStyle())}function Nm(n){if(!n.getTargetRanges)return null;const e=n.getTargetRanges();return e.length===0?null:e[0]}function aa(n,e){const t=n._compositionKey;if(xt(null),t!==null&&e!=null){if(e===""){const r=Ae(t),i=ms(n.getElementByKey(t));return void(i!==null&&i.nodeValue!==null&&ee(r)&&Md(r,i.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=ne();if(G(r)){const i=r.focus;return r.anchor.set(i.key,i.offset,i.type),void ce(n,gs,null)}}}Nd(!0,n,e)}function Mm(n){let e=n.__lexicalEventHandles;return e===void 0&&(e=[],n.__lexicalEventHandles=e),e}const ss=new Map;function Om(n){const e=k2(n.target);if(e===null)return;const t=iy(e.anchorNode);if(t===null)return;sc&&(sc=!1,Cn(t,()=>{const l=Ms(),u=e.anchorNode;(qe(u)||Or(u))&&Mt(bd(l,e,t,n))}));const r=Dd(t),i=r[r.length-1],s=i._key,o=ss.get(s),a=o||i;a!==t&&zf(e,a,!1),zf(e,t,!0),t!==i?ss.set(s,t):o&&ss.delete(s)}function Hf(n){n._lexicalHandled=!0}function Kf(n){return n._lexicalHandled===!0}function Jv(n){const e=n.ownerDocument,t=rl.get(e);if(t===void 0)return;const r=t-1;r>=0||se(164),rl.set(e,r),r===0&&e.removeEventListener("selectionchange",Om);const i=Pl(n);Ad(i)?(function(o){if(o._parentEditor!==null){const a=Dd(o),l=a[a.length-1]._key;ss.get(l)===o&&ss.delete(l)}else ss.delete(o._key)}(i),n.__lexicalEditor=null):i&&se(198);const s=Mm(n);for(let o=0;o<s.length;o++)s[o]();n.__lexicalEventHandles=[]}function oc(n,e,t){kt();const r=n.__key,i=n.getParent();if(i===null)return;const s=function(a){const l=ne();if(!G(l)||!V(a))return l;const{anchor:u,focus:c}=l,f=u.getNode(),d=c.getNode();return fc(f,a)&&u.set(a.__key,0,"element"),fc(d,a)&&c.set(a.__key,0,"element"),l}(n);let o=!1;if(G(s)&&e){const a=s.anchor,l=s.focus;a.key===r&&(sl(a,n,i,n.getPreviousSibling(),n.getNextSibling()),o=!0),l.key===r&&(sl(l,n,i,n.getPreviousSibling(),n.getNextSibling()),o=!0)}else Ht(s)&&e&&n.isSelected()&&n.selectPrevious();if(G(s)&&e&&!o){const a=n.getIndexWithinParent();Ei(n),il(s,i,a,-1)}else Ei(n);t||fr(i)||i.canBeEmpty()||!i.isEmpty()||oc(i,e),e&&s&&St(i)&&i.isEmpty()&&i.selectEnd()}let Ns=class{static getType(){const{ownNodeType:e}=Ld(this);return e===void 0&&se(64,this.name),e}static clone(e){se(65,this.name)}$config(){return{}}config(e,t){const r=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:r,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),y2(this,e)}getType(){return this.__type}isInline(){se(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=Ae(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||ne();if(t==null)return!1;const r=t.getNodes().some(i=>i.__key===this.__key);if(ee(this))return r;if(G(t)&&t.anchor.type==="element"&&t.focus.type==="element"){if(t.isCollapsed())return!1;const i=this.getParent();if(Le(this)&&this.isInline()&&i){const s=t.isBackward()?t.focus:t.anchor;if(i.is(s.getNode())&&s.offset===i.getChildrenSize()&&this.is(i.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),r=0;for(;t!==null;){if(this.is(t))return r;r++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:Ae(e)}getParentOrThrow(){const e=this.getParent();return e===null&&se(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(fr(t))return V(e)||e===this&&Le(e)||se(194),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&se(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:Ae(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let r=t.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:Ae(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=V(this)?this:this.getParent(),r=V(e)?e:e.getParent(),i=t&&r?mo(t,r):null;return i?i.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const t=mo(this,e);return t!==null&&(t.type==="descendant"||(t.type==="branch"?by(t)===-1:(t.type!=="same"&&t.type!=="ancestor"&&se(279),!1)))}isParentOf(e){const t=mo(this,e);return t!==null&&t.type==="ancestor"}getNodesBetween(e){const t=this.isBefore(e),r=[],i=new Set;let s=this;for(;s!==null;){const o=s.__key;if(i.has(o)||(i.add(o),r.push(s)),s===e)break;const a=V(s)?t?s.getFirstChild():s.getLastChild():null;if(a!==null){s=a;continue}const l=t?s.getNextSibling():s.getPreviousSibling();if(l!==null){s=l;continue}const u=s.getParentOrThrow();if(i.has(u.__key)||r.push(u),u===e)break;let c=null,f=u;do{if(f===null&&se(68),c=t?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;c!==null||i.has(f.__key)||r.push(f)}while(c===null);s=c}return t||r.reverse(),r}isDirty(){const e=Ve()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=Ae(this.__key);return e===null&&se(113),e}getWritable(){kt();const e=si(),t=Ve(),r=e._nodeMap,i=this.__key,s=this.getLatest(),o=t._cloneNotNeeded,a=ne();if(a!==null&&a.setCachedNodes(null),o.has(i))return al(s),s;const l=Rd(s);return o.add(i),al(l),r.set(i,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){se(70)}updateDOM(e,t,r){se(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){se(18,this.name)}updateFromJSON(e){return function(t,r){const i=t.getWritable(),s=r.$;let o=s;for(const a of pm(i).flatKeys)a in r&&(o!==void 0&&o!==s||(o={...s}),o[a]=r[a]);return(i.__state||o)&&hm(t).updateFromJSON(o),i}(this,e)}static transform(){return null}remove(e){oc(this,!0,e)}replace(e,t){kt();let r=ne();r!==null&&(r=r.clone()),Tu(this,e);const i=this.getLatest(),s=this.__key,o=e.__key,a=e.getWritable(),l=this.getParentOrThrow().getWritable(),u=l.__size;Ei(a);const c=i.getPreviousSibling(),f=i.getNextSibling(),d=i.__prev,h=i.__next,p=i.__parent;if(oc(i,!1,!0),c===null?l.__first=o:c.getWritable().__next=o,a.__prev=d,f===null?l.__last=o:f.getWritable().__prev=o,a.__next=h,a.__parent=p,l.__size=u,t&&(V(this)&&V(a)||se(139),this.getChildren().forEach(m=>{a.append(m)})),G(r)){Mt(r);const m=r.anchor,_=r.focus;m.key===s&&Yf(m,a),_.key===s&&Yf(_,a)}return Ur()===s&&xt(o),a}insertAfter(e,t=!0){kt(),Tu(this,e);const r=this.getWritable(),i=e.getWritable(),s=i.getParent(),o=ne();let a=!1,l=!1;if(s!==null){const h=e.getIndexWithinParent();if(Ei(i),G(o)){const p=s.__key,m=o.anchor,_=o.focus;a=m.type==="element"&&m.key===p&&m.offset===h+1,l=_.type==="element"&&_.key===p&&_.offset===h+1}}const u=this.getNextSibling(),c=this.getParentOrThrow().getWritable(),f=i.__key,d=r.__next;if(u===null?c.__last=f:u.getWritable().__prev=f,c.__size++,r.__next=f,i.__next=d,i.__prev=r.__key,i.__parent=r.__parent,t&&G(o)){const h=this.getIndexWithinParent();il(o,c,h+1);const p=c.__key;a&&o.anchor.set(p,h+2,"element"),l&&o.focus.set(p,h+2,"element")}return e}insertBefore(e,t=!0){kt(),Tu(this,e);const r=this.getWritable(),i=e.getWritable(),s=i.__key;Ei(i);const o=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=r.__prev,u=this.getIndexWithinParent();o===null?a.__first=s:o.getWritable().__next=s,a.__size++,r.__prev=s,i.__prev=l,i.__next=r.__key,i.__parent=r.__parent;const c=ne();return t&&G(c)&&il(c,this.getParentOrThrow(),u),e}isParentRequired(){return!1}createParentElementNode(){return kn()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){kt();const r=this.getPreviousSibling(),i=this.getParentOrThrow();if(r===null)return i.select(0,0);if(V(r))return r.select();if(!ee(r)){const s=r.getIndexWithinParent()+1;return i.select(s,s)}return r.select(e,t)}selectNext(e,t){kt();const r=this.getNextSibling(),i=this.getParentOrThrow();if(r===null)return i.select();if(V(r))return r.select(0,0);if(!ee(r)){const s=r.getIndexWithinParent();return i.select(s,s)}return r.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}},Lo=class Im extends Ns{static getType(){return"linebreak"}static clone(e){return new Im(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>function(t){const r=t.parentElement;if(r!==null&&ll(r)){const i=r.firstChild;if(i===t||i.nextSibling===t&&la(i)){const s=r.lastChild;if(s===t||s.previousSibling===t&&la(s))return!0}}return!1}(e)||function(t){const r=t.parentElement;if(r!==null&&ll(r)){const i=r.firstChild;if(i===t||i.nextSibling===t&&la(i))return!1;const s=r.lastChild;if(s===t||s.previousSibling===t&&la(s))return!0}return!1}(e)?null:{conversion:Gv,priority:0}}}static importJSON(e){return Ai().updateFromJSON(e)}};function Gv(n){return{node:Ai()}}function Ai(){return Ue(new Lo)}function bi(n){return n instanceof Lo}function la(n){return Or(n)&&/^( |\t|\r?\n)+$/.test(n.textContent||"")}function Eu(n,e){return 16&e?"code":e&ed?"mark":32&e?"sub":64&e?"sup":null}function wu(n,e){return 1&e?"strong":2&e?"em":"span"}function Rm(n,e,t,r,i){const s=r.classList;let o=os(i,"base");o!==void 0&&s.add(...o),o=os(i,"underlineStrikethrough");let a=!1;const l=e&Xa&&e&Ya;o!==void 0&&(t&Xa&&t&Ya?(a=!0,l||s.add(...o)):l&&s.remove(...o));for(const u in Jr){const c=Jr[u];if(o=os(i,u),o!==void 0)if(t&c){if(a&&(u==="underline"||u==="strikethrough")){e&c&&s.remove(...o);continue}e&c&&(!l||u!=="underline")&&u!=="strikethrough"||s.add(...o)}else e&c&&s.remove(...o)}}function Lm(n,e,t){const r=e.firstChild,i=t.isComposing(),s=n+(i?Tl:"");if(r==null)e.textContent=s;else{const o=r.nodeValue;if(o!==s)if(i||xi){const[a,l,u]=function(c,f){const d=c.length,h=f.length;let p=0,m=0;for(;p<d&&p<h&&c[p]===f[p];)p++;for(;m+p<d&&m+p<h&&c[d-m-1]===f[h-m-1];)m++;return[p,d-p-m,f.slice(p,h-m)]}(o,s);l!==0&&r.deleteData(a,l),r.insertData(a,u)}else r.nodeValue=s}}function Vf(n,e,t,r,i,s){Lm(i,n,e);const o=s.theme.text;o!==void 0&&Rm(0,0,r,n,o)}function ua(n,e){const t=document.createElement(e);return t.appendChild(n),t}class Jt extends Ns{static getType(){return"text"}static clone(e){return new Jt(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return xv[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Ur()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const t=Jr[e];return!!(this.getFormat()&t)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return ol(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){const r=this.__format,i=Eu(0,r),s=wu(0,r),o=i===null?s:i,a=document.createElement(o);let l=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),i!==null&&(l=document.createElement(s),a.appendChild(l)),Vf(l,this,0,r,this.__text,e);const u=this.__style;return u!==""&&(a.style.cssText=u),a}updateDOM(e,t,r){const i=this.__text,s=e.__format,o=this.__format,a=Eu(0,s),l=Eu(0,o),u=wu(0,s),c=wu(0,o);if((a===null?u:a)!==(l===null?c:l))return!0;if(a===l&&u!==c){const m=t.firstChild;m==null&&se(48);const _=document.createElement(c);return Vf(_,this,0,o,i,r),t.replaceChild(_,m),!1}let f=t;l!==null&&a!==null&&(f=t.firstChild,f==null&&se(49)),Lm(i,f,this);const d=r.theme.text;d!==void 0&&s!==o&&Rm(0,s,o,f,d);const h=e.__style,p=this.__style;return h!==p&&(t.style.cssText=p),!1}static importDOM(){return{"#text":()=>({conversion:Zv,priority:0}),b:()=>({conversion:Xv,priority:0}),code:()=>({conversion:_r,priority:0}),em:()=>({conversion:_r,priority:0}),i:()=>({conversion:_r,priority:0}),mark:()=>({conversion:_r,priority:0}),s:()=>({conversion:_r,priority:0}),span:()=>({conversion:Yv,priority:0}),strong:()=>({conversion:_r,priority:0}),sub:()=>({conversion:_r,priority:0}),sup:()=>({conversion:_r,priority:0}),u:()=>({conversion:_r,priority:0})}}static importJSON(e){return Oe().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return qe(t)||se(132),t.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?t.style.textTransform="lowercase":this.hasFormat("uppercase")?t.style.textTransform="uppercase":this.hasFormat("capitalize")&&(t.style.textTransform="capitalize"),this.hasFormat("bold")&&(t=ua(t,"b")),this.hasFormat("italic")&&(t=ua(t,"i")),this.hasFormat("strikethrough")&&(t=ua(t,"s")),this.hasFormat("underline")&&(t=ua(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format=typeof e=="string"?Jr[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail=typeof e=="string"?Ev[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=ol(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=kv[e];if(this.__mode===t)return this;const r=this.getWritable();return r.__mode=t,r}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){kt();let r=e,i=t;const s=ne(),o=this.getTextContent(),a=this.__key;if(typeof o=="string"){const l=o.length;r===void 0&&(r=l),i===void 0&&(i=l)}else r=0,i=0;if(!G(s))return Wm(a,r,a,i,"text","text");{const l=Ur();l!==s.anchor.key&&l!==s.focus.key||xt(a),s.setTextNodeRange(this,r,this,i)}return s}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,r,i){const s=this.getWritable(),o=s.__text,a=r.length;let l=e;l<0&&(l=a+l,l<0&&(l=0));const u=ne();if(i&&G(u)){const f=e+a;u.setTextNodeRange(s,f,s,f)}const c=o.slice(0,l)+r+o.slice(l+t);return s.__text=c,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){kt();const t=this.getLatest(),r=t.getTextContent();if(r==="")return[];const i=t.__key,s=Ur(),o=r.length;e.sort((N,I)=>N-I),e.push(o);const a=[],l=e.length;for(let N=0,I=0;N<o&&I<=l;I++){const H=e[I];H>N&&(a.push(r.slice(N,H)),N=H)}const u=a.length;if(u===1)return[t];const c=a[0],f=t.getParent();let d;const h=t.getFormat(),p=t.getStyle(),m=t.__detail;let _=!1,C=null,v=null;const k=ne();if(G(k)){const[N,I]=k.isBackward()?[k.focus,k.anchor]:[k.anchor,k.focus];N.type==="text"&&N.key===i&&(C=N),I.type==="text"&&I.key===i&&(v=I)}t.isSegmented()?(d=Oe(c),d.__format=h,d.__style=p,d.__detail=m,d.__state=Pf(t,d),_=!0):d=t.setTextContent(c);const M=[d];for(let N=1;N<u;N++){const I=Oe(a[N]);I.__format=h,I.__style=p,I.__detail=m,I.__state=Pf(t,I);const H=I.__key;s===i&&xt(H),M.push(I)}const $=C?C.offset:null,x=v?v.offset:null;let O=0;for(const N of M){if(!C&&!v)break;const I=O+N.getTextContentSize();if(C!==null&&$!==null&&$<=I&&$>=O&&(C.set(N.getKey(),$-O,"text"),$<I&&(C=null)),v!==null&&x!==null&&x<=I&&x>=O){v.set(N.getKey(),x-O,"text");break}O=I}if(f!==null){(function(H){const w=H.getPreviousSibling(),q=H.getNextSibling();w!==null&&al(w),q!==null&&al(q)})(this);const N=f.getWritable(),I=this.getIndexWithinParent();_?(N.splice(I,0,M),this.remove()):N.splice(I,1,M),G(k)&&il(k,f,I,u-1)}return M}mergeWithSibling(e){const t=e===this.getPreviousSibling();t||e===this.getNextSibling()||se(50);const r=this.__key,i=e.__key,s=this.__text,o=s.length;Ur()===i&&xt(r);const a=ne();if(G(a)){const f=a.anchor,d=a.focus;f!==null&&f.key===i&&rh(f,t,r,e,o),d!==null&&d.key===i&&rh(d,t,r,e,o)}const l=e.__text,u=t?l+s:s+l;this.setTextContent(u);const c=this.getWritable();return e.remove(),c}isTextEntity(){return!1}}function Yv(n){return{forChild:yd(n.style),node:null}}function Xv(n){const e=n,t=e.style.fontWeight==="normal";return{forChild:yd(e.style,t?void 0:"bold"),node:null}}const Jf=new WeakMap;function Qv(n){if(!qe(n))return!1;if(n.nodeName==="PRE")return!0;const e=n.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function Zv(n){const e=n;n.parentElement===null&&se(129);let t=e.textContent||"";if(function(r){let i,s=r.parentNode;const o=[r];for(;s!==null&&(i=Jf.get(s))===void 0&&!Qv(s);)o.push(s),s=s.parentNode;const a=i===void 0?s:i;for(let l=0;l<o.length;l++)Jf.set(o[l],a);return a}(e)!==null){const r=t.split(/(\r?\n|\t)/),i=[],s=r.length;for(let o=0;o<s;o++){const a=r[o];a===`
`||a===`\r
`?i.push(Ai()):a==="	"?i.push(Po()):a!==""&&i.push(Oe(a))}return{node:i}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let r=e,i=!0;for(;r!==null&&(r=Gf(r,!1))!==null;){const s=r.textContent||"";if(s.length>0){/[ \t\n]$/.test(s)&&(t=t.slice(1)),i=!1;break}}i&&(t=t.slice(1))}if(t[t.length-1]===" "){let r=e,i=!0;for(;r!==null&&(r=Gf(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:Oe(t)}}function Gf(n,e){let t=n;for(;;){let r;for(;(r=e?t.nextSibling:t.previousSibling)===null;){const s=t.parentElement;if(s===null)return null;t=s}if(t=r,qe(t)){const s=t.style.display;if(s===""&&!gc(t)||s!==""&&!s.startsWith("inline"))return null}let i=t;for(;(i=e?t.firstChild:t.lastChild)!==null;)t=i;if(Or(t))return t;if(t.nodeName==="BR")return null}}const e2={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function _r(n){const e=e2[n.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:yd(n.style,e),node:null}}function Oe(n=""){return Ue(new Jt(n))}function ee(n){return n instanceof Jt}function yd(n,e){const t=n.fontWeight,r=n.textDecoration.split(" "),i=t==="700"||t==="bold",s=r.includes("line-through"),o=n.fontStyle==="italic",a=r.includes("underline"),l=n.verticalAlign;return u=>(ee(u)&&(i&&!u.hasFormat("bold")&&u.toggleFormat("bold"),s&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),o&&!u.hasFormat("italic")&&u.toggleFormat("italic"),a&&!u.hasFormat("underline")&&u.toggleFormat("underline"),l!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),l!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),e&&!u.hasFormat(e)&&u.toggleFormat(e)),u)}let _d=class Pm extends Jt{static getType(){return"tab"}static clone(e){return new Pm(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const t=super.createDOM(e),r=os(e.theme,"tab");return r!==void 0&&t.classList.add(...r),t}static importJSON(e){return Po().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&se(126),super.setTextContent("	")}spliceText(e,t,r,i){return r===""&&t===0||r==="	"&&t===1||se(286),this}setDetail(e){return e!==2&&se(127),this}setMode(e){return e!=="normal"&&se(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}};function Po(){return Ue(new _d)}function $m(n){return n instanceof _d}let t2=class{constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:_y(ir(Dr(this,"next")),ir(Dr(e,"next")))<0}getNode(){const e=Ae(this.key);return e===null&&se(20),e}set(e,t,r,i){const s=this._selection,o=this.key;i&&this.key===e&&this.offset===t&&this.type===r||(this.key=e,this.offset=t,this.type=r,Os()||(Ur()===o&&xt(e),s!==null&&(s.setCachedNodes(null),s.dirty=!0)))}};function an(n,e,t){return new t2(n,e,t)}function ku(n,e){let t=e.__key,r=n.offset,i="element";if(ee(e)){i="text";const s=e.getTextContentSize();r>s&&(r=s)}else if(!V(e)){const s=e.getNextSibling();if(ee(s))t=s.__key,r=0,i="text";else{const o=e.getParent();o&&(t=o.__key,r=e.getIndexWithinParent()+1)}}n.set(t,r,i)}function Yf(n,e){if(V(e)){const t=e.getLastDescendant();V(t)||ee(t)?ku(n,t):ku(n,e)}else ku(n,e)}let Fm=class Bm{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!Ht(e))return!1;const t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(i=>r.has(i))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new Bm(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),r=t.length,i=t[r-1];let s;if(ee(i))s=i.select();else{const o=i.getIndexWithinParent()+1;s=i.getParentOrThrow().select(o,o)}s.insertNodes(e);for(let o=0;o<r;o++)t[o].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,r=[];for(const i of t){const s=Ae(i);s!==null&&r.push(s)}return Os()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}deleteNodes(){const e=this.getNodes();if((ne()||Ms())===this&&e[0]){const t=ut(e[0],"next");F2(Xr(t,t))}for(const t of e)t.remove()}};function G(n){return n instanceof $o}let $o=class qm{constructor(e,t,r,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!G(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=function(r){const i=[],[s,o]=r.getTextSlices();s&&i.push(s.caret.origin);const a=new Set,l=new Set;for(const u of r)if(Un(u)){const{origin:c}=u;i.length===0?a.add(c):(l.add(c),i.push(c))}else{const{origin:c}=u;V(c)&&l.has(c)||i.push(c)}if(o&&i.push(o.caret.origin),Di(r.focus)&&V(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let u=Hn(r.focus.origin,"previous");Un(u)&&a.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(i[i.length-1]);u=ko(u))a.delete(u.origin),i.pop();for(;i.length>1;){const u=i[i.length-1];if(!V(u)||l.has(u)||u.isEmpty()||a.has(u))break;i.pop()}if(i.length===0&&r.isCollapsed()){const u=ir(r.anchor),c=ir(r.anchor.getFlipped()),f=h=>Kr(h)?h.origin:h.getNodeAtCaret(),d=f(u)||f(c)||(r.anchor.getNodeAtCaret()?u.origin:c.origin);i.push(d)}return i}(Cy(wh(this),"next"));return Os()||(this._cachedNodes=t),t}setTextNodeRange(e,t,r,i){this.anchor.set(e.__key,t,"text"),this.focus.set(r.__key,i,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],r=e[e.length-1],i=this.anchor,s=this.focus,o=i.isBefore(s),[a,l]=ac(this);let u="",c=!0;for(let f=0;f<e.length;f++){const d=e[f];if(V(d)&&!d.isInline())c||(u+=`
`),c=!d.isEmpty();else if(c=!1,ee(d)){let h=d.getTextContent();d===t?d===r?i.type==="element"&&s.type==="element"&&s.offset!==i.offset||(h=a<l?h.slice(a,l):h.slice(l,a)):h=o?h.slice(a):h.slice(l):d===r&&(h=o?h.slice(0,l):h.slice(0,a)),u+=h}else!Le(d)&&!bi(d)||d===r&&this.isCollapsed()||(u+=d.getTextContent())}return u}applyDOMRange(e){const t=Ve(),r=t.getEditorState()._selection,i=Um(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(i===null)return;const[s,o]=i;this.anchor.set(s.key,s.offset,s.type,!0),this.focus.set(o.key,o.offset,o.type,!0),bo(this)}clone(){const e=this.anchor,t=this.focus;return new qm(an(e.key,e.offset,e.type),an(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=ol(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=Jr[e];return!!(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];o===`
`||o===`\r
`?r.push(Ai()):o==="	"?r.push(Po()):r.push(Oe(o))}this.insertNodes(r)}insertText(e){const t=this.anchor,r=this.focus,i=this.format,s=this.style;let o=t,a=r;!this.isCollapsed()&&r.isBefore(t)&&(o=r,a=t),o.type==="element"&&function(_,C,v,k){const M=_.getNode(),$=M.getChildAtIndex(_.offset),x=Oe(),O=St(M)?kn().append(x):x;x.setFormat(v),x.setStyle(k),$===null?M.append(O):$.insertBefore(O),_.is(C)&&C.set(x.__key,0,"text"),_.set(x.__key,0,"text")}(o,a,i,s),a.type==="element"&&xo(a,ir(Dr(a,"next")));const l=o.offset;let u=a.offset;const c=this.getNodes(),f=c.length;let d=c[0];ee(d)||se(26);const h=d.getTextContent().length,p=d.getParentOrThrow();let m=c[f-1];if(f===1&&a.type==="element"&&(u=h,a.set(o.key,u,"text")),this.isCollapsed()&&l===h&&(Cr(d)||!d.canInsertTextAfter()||!p.canInsertTextAfter()&&d.getNextSibling()===null)){let _=d.getNextSibling();if(ee(_)&&_.canInsertTextBefore()&&!Cr(_)||(_=Oe(),_.setFormat(i),_.setStyle(s),p.canInsertTextAfter()?d.insertAfter(_):p.insertAfter(_)),_.select(0,0),d=_,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&l===0&&(Cr(d)||!d.canInsertTextBefore()||!p.canInsertTextBefore()&&d.getPreviousSibling()===null)){let _=d.getPreviousSibling();if(ee(_)&&!Cr(_)||(_=Oe(),_.setFormat(i),p.canInsertTextBefore()?d.insertBefore(_):p.insertBefore(_)),_.select(),d=_,e!=="")return void this.insertText(e)}else if(d.isSegmented()&&l!==h){const _=Oe(d.getTextContent());_.setFormat(i),d.replace(_),d=_}else if(!this.isCollapsed()&&e!==""){const _=m.getParent();if(!p.canInsertTextBefore()||!p.canInsertTextAfter()||V(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(""),jm(this.anchor,this.focus,null),void this.insertText(e)}if(f===1){if(Ci(d)){const k=Oe(e);return k.select(),void d.replace(k)}const _=d.getFormat(),C=d.getStyle();if(l!==u||_===i&&C===s){if($m(d)){const k=Oe(e);return k.setFormat(i),k.setStyle(s),k.select(),void d.replace(k)}}else{if(d.getTextContent()!==""){const k=Oe(e);if(k.setFormat(i),k.setStyle(s),k.select(),l===0)d.insertBefore(k,!1);else{const[M]=d.splitText(l);M.insertAfter(k,!1)}return void(k.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}d.setFormat(i),d.setStyle(s)}const v=u-l;d=d.spliceText(l,v,e,!0),d.getTextContent()===""?d.remove():this.anchor.type==="text"&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=_,this.style=C))}else{const _=new Set([...d.getParentKeys(),...m.getParentKeys()]),C=V(d)?d:d.getParentOrThrow();let v=V(m)?m:m.getParentOrThrow(),k=m;if(!C.is(v)&&v.isInline())do k=v,v=v.getParentOrThrow();while(v.isInline());if(a.type==="text"&&(u!==0||m.getTextContent()==="")||a.type==="element"&&m.getIndexWithinParent()<u)if(ee(m)&&!Ci(m)&&u!==m.getTextContentSize()){if(m.isSegmented()){const N=Oe(m.getTextContent());m.replace(N),m=N}St(a.getNode())||a.type!=="text"||(m=m.spliceText(0,u,"")),_.add(m.__key)}else{const N=m.getParentOrThrow();N.canBeEmpty()||N.getChildrenSize()!==1?m.remove():N.remove()}else _.add(m.__key);const M=v.getChildren(),$=new Set(c),x=C.is(v),O=C.isInline()&&d.getNextSibling()===null?C:d;for(let N=M.length-1;N>=0;N--){const I=M[N];if(I.is(d)||V(I)&&I.isParentOf(d))break;I.isAttached()&&(!$.has(I)||I.is(k)?x||O.insertAfter(I,!1):I.remove())}if(!x){let N=v,I=null;for(;N!==null;){const H=N.getChildren(),w=H.length;(w===0||H[w-1].is(I))&&(_.delete(N.__key),I=N),N=N.getParent()}}if(Ci(d))if(l===h)d.select();else{const N=Oe(e);N.select(),d.replace(N)}else d=d.spliceText(l,h-l,e,!0),d.getTextContent()===""?d.remove():d.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let N=1;N<f;N++){const I=c[N],H=I.__key;_.has(H)||I.remove()}}}removeText(){const e=ne()===this;Ba(this,B2(wh(this))),e&&ne()!==this&&Mt(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void xt(null);const r=this.getNodes(),i=[];for(const M of r)ee(M)&&i.push(M);const s=M=>{r.forEach($=>{if(V($)){const x=$.getFormatFlags(e,M);$.setTextFormat(x)}})},o=i.length;if(o===0)return this.toggleFormat(e),xt(null),void s(t);const a=this.anchor,l=this.focus,u=this.isBackward(),c=u?l:a,f=u?a:l;let d=0,h=i[0],p=c.type==="element"?0:c.offset;if(c.type==="text"&&p===h.getTextContentSize()&&(d=1,h=i[1],p=0),h==null)return;const m=h.getFormatFlags(e,t);s(m);const _=o-1;let C=i[_];const v=f.type==="text"?f.offset:C.getTextContentSize();if(h.is(C)){if(p===v)return;if(Cr(h)||p===0&&v===h.getTextContentSize())h.setFormat(m);else{const M=h.splitText(p,v),$=p===0?M[0]:M[1];$.setFormat(m),c.type==="text"&&c.set($.__key,0,"text"),f.type==="text"&&f.set($.__key,v-p,"text")}return void(this.format=m)}p===0||Cr(h)||([,h]=h.splitText(p),p=0),h.setFormat(m);const k=C.getFormatFlags(e,m);v>0&&(v===C.getTextContentSize()||Cr(C)||([C]=C.splitText(v)),C.setFormat(k));for(let M=d+1;M<_;M++){const $=i[M],x=$.getFormatFlags(e,k);$.setFormat(x)}c.type==="text"&&c.set(h.__key,p,"text"),f.type==="text"&&f.set(C.__key,v,"text"),this.format=m|k}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const p=ne();return G(p)||se(134),p.insertNodes(e)}const t=(this.isBackward()?this.focus:this.anchor).getNode(),r=Du(t,An),i=e[e.length-1];if(V(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const p=xu(this);r.splice(p,0,e),i.selectEnd()}return}if(!e.some(p=>(V(p)||Le(p))&&!p.isInline())){V(r)||se(211,t.constructor.name,t.getType());const p=xu(this);return r.splice(p,0,e),void i.selectEnd()}const s=function(p){const m=kn();let _=null;for(let C=0;C<p.length;C++){const v=p[C],k=bi(v);if(k||Le(v)&&v.isInline()||V(v)&&v.isInline()||ee(v)||v.isParentRequired()){if(_===null&&(_=v.createParentElementNode(),m.append(_),k))continue;_!==null&&_.append(v)}else m.append(v),_=null}return m}(e),o=s.getLastDescendant(),a=s.getChildren(),l=!V(r)||!r.isEmpty()?this.insertParagraph():null,u=a[a.length-1];let c=a[0];var f;V(f=c)&&An(f)&&!f.isEmpty()&&V(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(V(r)||se(211,t.constructor.name,t.getType()),r.append(...c.getChildren()),c=a[1]),c&&(r===null&&se(212,t.constructor.name,t.getType()),function(p,m,_){const C=m.getParentOrThrow().getLastChild();let v=m;const k=[m];for(;v!==C;)v.getNextSibling()||se(140),v=v.getNextSibling(),k.push(v);let M=p;for(const $ of k)M=M.insertAfter($)}(r,c));const d=Du(o,An);l&&V(d)&&(l.canMergeWhenEmpty()||An(u))&&(d.append(...l.getChildren()),l.remove()),V(r)&&r.isEmpty()&&r.remove(),o.selectEnd();const h=V(r)?r.getLastChild():null;bi(h)&&d!==r&&h.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=kn();return De().splice(this.anchor.offset,0,[o]),o.select(),o}const e=xu(this),t=Du(this.anchor.getNode(),An);V(t)||se(213);const r=t.getChildAtIndex(e),i=r?[r,...r.getNextSiblings()]:[],s=t.insertNewAfter(this,!1);return s?(s.append(...i),s.selectStart(),s):null}insertLineBreak(e){const t=Ai();if(this.insertNodes([t]),e){const r=t.getParentOrThrow(),i=t.getIndexWithinParent();r.select(i,i)}}extract(){const e=this.getNodes(),t=e.length,r=t-1,i=this.anchor,s=this.focus;let o=e[0],a=e[r];const[l,u]=ac(this);if(t===0)return[];if(t===1){if(ee(o)&&!this.isCollapsed()){const f=l>u?u:l,d=l>u?l:u,h=o.splitText(f,d),p=f===0?h[0]:h[1];return p!=null?[p]:[]}return[o]}const c=i.isBefore(s);if(ee(o)){const f=c?l:u;f===o.getTextContentSize()?e.shift():f!==0&&([,o]=o.splitText(f),e[0]=o)}if(ee(a)){const f=a.getTextContent().length,d=c?u:l;d===0?e.pop():d!==f&&([a]=a.splitText(d),e[r]=a)}return e}modify(e,t,r){if(ih(this,e,t,r))return;const i=e==="move",s=Ve(),o=zn(Mn(s));if(!o)return;const a=s._blockCursorElement,l=s._rootElement,u=this.focus.getNode();if(l===null||a===null||!V(u)||u.isInline()||u.canBeEmpty()||hc(a,s,l),this.dirty){let c=ys(s,this.anchor.key),f=ys(s,this.focus.key);this.anchor.type==="text"&&(c=ms(c)),this.focus.type==="text"&&(f=ms(f)),c&&f&&Hm(o,c,this.anchor.offset,f,this.focus.offset)}if(function(c,f,d,h){c.modify(f,d,h)}(o,e,t?"backward":"forward",r),o.rangeCount>0){const c=o.getRangeAt(0),f=this.anchor.getNode(),d=St(f)?f:E2(f);if(this.applyDOMRange(c),this.dirty=!0,!i){const h=this.getNodes(),p=[];let m=!1;for(let _=0;_<h.length;_++){const C=h[_];fc(C,d)?p.push(C):m=!0}if(m&&p.length>0)if(t){const _=p[0];V(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{const _=p[p.length-1];V(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}o.anchorNode===c.startContainer&&o.anchorOffset===c.startOffset||function(_){const C=_.focus,v=_.anchor,k=v.key,M=v.offset,$=v.type;v.set(C.key,C.offset,C.type,!0),C.set(k,M,$,!0)}(this)}}r==="lineboundary"&&ih(this,e,t,r,"decorators")}forwardDeletion(e,t,r){if(!r&&(e.type==="element"&&V(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const i=t.getParent(),s=t.getNextSibling()||(i===null?null:i.getNextSibling());if(V(s)&&s.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let i=r.getNode();if(this.forwardDeletion(r,i,e))return;const s=Fd(Dr(r,e?"previous":"next"));if(s.getTextSlices().every(a=>a===null||a.distance===0)){let a={type:"initial"};for(const l of s.iterNodeCarets("shadowRoot"))if(Un(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(a.type==="merge-block")break;if(V(s.anchor.origin)&&s.anchor.origin.isEmpty()){const u=ir(l);Ba(this,Xr(u,u)),s.anchor.origin.remove()}return}a.type!=="merge-next-block"&&a.type!=="merge-block"||(a={block:a.block,caret:l,type:"merge-block"})}}else{if(a.type==="merge-block")break;if(Di(l)){if(V(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(s.anchor.origin))break}else a={block:l.origin,type:"merge-next-block"};continue}if(Le(l.origin)){if(!l.origin.isIsolated())if(a.type==="merge-next-block"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&V(s.anchor.origin)&&s.anchor.origin.isEmpty()){s.anchor.origin.remove();const u=zm();u.add(l.origin.getKey()),Mt(u)}else l.origin.remove();return}break}}if(a.type==="merge-block"){const{caret:l,block:u}=a;return Ba(this,Xr(!l.origin.isEmpty()&&u.isEmpty()?jl(ut(u,l.direction)):s.anchor,l)),this.removeText()}}const o=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&Qf(this,r.getNode()))return}else{const a=o.type==="text"?o.getNode():null;if(i=r.type==="text"?r.getNode():null,a!==null&&a.isSegmented()){const l=o.offset,u=a.getTextContentSize();if(a.is(i)||e&&l!==u||!e&&l!==0)return void Zf(a,e,l)}else if(i!==null&&i.isSegmented()){const l=r.offset,u=i.getTextContentSize();if(i.is(a)||e&&l!==0||!e&&l!==u)return void Zf(i,e,l)}(function(l,u){const c=l.anchor,f=l.focus,d=c.getNode(),h=f.getNode();if(d===h&&c.type==="text"&&f.type==="text"){const p=c.offset,m=f.offset,_=p<m,C=_?p:m,v=_?m:p,k=v-1;C!==k&&function(M){return!(ly(M)||n2(M))}(d.getTextContent().slice(C,v))&&(u?f.set(f.key,k,f.type):c.set(c.key,k,c.type))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&St(r.getParent())&&r.getPreviousSibling()===null&&Qf(this,r)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}};function Ht(n){return n instanceof Fm}function Xf(n){const e=n.offset;if(n.type==="text")return e;const t=n.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function ac(n){const e=n.getStartEndPoints();if(e===null)return[0,0];const[t,r]=e;return t.type==="element"&&r.type==="element"&&t.key===r.key&&t.offset===r.offset?[0,0]:[Xf(t),Xf(r)]}function Qf(n,e){for(let t=e;t;t=t.getParent()){if(V(t)){if(t.collapseAtStart(n))return!0;if(fr(t))break}if(t.getPreviousSibling())break}return!1}const n2=(()=>{try{const n=new RegExp("\\p{Emoji}","u"),e=n.test.bind(n);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch{}return()=>!1})();function Zf(n,e,t){const r=n,i=r.getTextContent().split(/(?=\s)/g),s=i.length;let o=0,a=0;for(let u=0;u<s;u++){const c=u===s-1;if(a=o,o+=i[u].length,e&&o===t||o>t||c){i.splice(u,1),c&&(a=void 0);break}}const l=i.join("").trim();l===""?r.remove():(r.setTextContent(l),r.select(a,a))}function eh(n,e,t,r){let i,s=e;if(qe(n)){let o=!1;const a=n.childNodes,l=a.length,u=r._blockCursorElement;s===l&&(o=!0,s=l-1);let c=a[s],f=!1;if(c===u)c=a[s+1],f=!0;else if(u!==null){const d=u.parentNode;n===d&&e>Array.prototype.indexOf.call(d.children,u)&&s--}if(i=rs(c),ee(i))s=Vr(i,o?"next":"previous");else{let d=rs(n);if(d===null)return null;if(V(d)){const h=r.getElementByKey(d.getKey());h===null&&se(214),[d,s]=d.getDOMSlot(h).resolveChildIndex(d,h,n,e),V(d)||se(215),o&&s>=d.getChildrenSize()&&(s=Math.max(0,d.getChildrenSize()-1));let m=d.getChildAtIndex(s);if(V(m)&&function(_,C,v){const k=_.getParent();return v===null||k===null||!k.canBeEmpty()||k!==v.getNode()}(m,0,t)){const _=o?m.getLastDescendant():m.getFirstDescendant();_===null?d=m:(m=_,d=V(m)?m:m.getParentOrThrow()),s=0}ee(m)?(i=m,d=null,s=Vr(m,o?"next":"previous")):m!==d&&o&&!f&&(V(d)||se(216),s=Math.min(d.getChildrenSize(),s+1))}else{const h=d.getIndexWithinParent();s=e===0&&Le(d)&&rs(n)===d?h:h+1,d=d.getParentOrThrow()}if(V(d))return an(d.__key,s,"element")}}else i=rs(n);return ee(i)?an(i.__key,Vr(i,s,"clamp"),"text"):null}function th(n,e,t){const r=n.offset,i=n.getNode();if(r===0){const s=i.getPreviousSibling(),o=i.getParent();if(e){if((t||!e)&&s===null&&V(o)&&o.isInline()){const a=o.getPreviousSibling();ee(a)&&n.set(a.__key,a.getTextContent().length,"text")}}else V(s)&&!t&&s.isInline()?n.set(s.__key,s.getChildrenSize(),"element"):ee(s)&&n.set(s.__key,s.getTextContent().length,"text")}else if(r===i.getTextContent().length){const s=i.getNextSibling(),o=i.getParent();if(e&&V(s)&&s.isInline())n.set(s.__key,0,"element");else if((t||e)&&s===null&&V(o)&&o.isInline()&&!o.canInsertTextAfter()){const a=o.getNextSibling();ee(a)&&n.set(a.__key,0,"text")}}}function jm(n,e,t){if(n.type==="text"&&e.type==="text"){const r=n.isBefore(e),i=n.is(e);th(n,r,i),th(e,!r,i),i&&e.set(n.key,n.offset,n.type);const s=Ve();if(s.isComposing()&&s._compositionKey!==n.key&&G(t)){const o=t.anchor,a=t.focus;n.set(o.key,o.offset,o.type,!0),e.set(a.key,a.offset,a.type,!0)}}}function Um(n,e,t,r,i,s){if(n===null||t===null||!Bo(i,n,t))return null;const o=eh(n,e,G(s)?s.anchor:null,i);if(o===null)return null;const a=eh(t,r,G(s)?s.focus:null,i);if(a===null)return null;if(o.type==="element"&&a.type==="element"){const l=rs(n),u=rs(t);if(Le(l)&&Le(u))return null}return jm(o,a,s),[o,a]}function lc(n){return V(n)&&!n.isInline()}function Wm(n,e,t,r,i,s){const o=si(),a=new $o(an(n,e,i),an(t,r,s),0,"");return a.dirty=!0,o._selection=a,a}function Fo(){const n=an("root",0,"element"),e=an("root",0,"element");return new $o(n,e,0,"")}function zm(){return new Fm(new Set)}function bd(n,e,t,r){const i=t._window;if(i===null)return null;const s=r||i.event,o=s?s.type:void 0,a=o==="selectionchange",l=!Gu&&(a||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&s&&s.detail===3||o==="drop"||o===void 0);let u,c,f,d;if(G(n)&&!l)return n.clone();if(e===null)return null;if(u=e.anchorNode,c=e.focusNode,f=e.anchorOffset,d=e.focusOffset,a&&G(n)&&!Bo(t,u,c))return n.clone();const h=Um(u,f,c,d,t,n);if(h===null)return null;const[p,m]=h;return new $o(p,m,G(n)?n.format:0,G(n)?n.style:"")}function ne(){return si()._selection}function Ms(){return Ve()._editorState._selection}function il(n,e,t,r=1){const i=n.anchor,s=n.focus,o=i.getNode(),a=s.getNode();if(!e.is(o)&&!e.is(a))return;const l=e.__key;if(n.isCollapsed()){const u=i.offset;if(t<=u&&r>0||t<u&&r<0){const c=Math.max(0,u+r);i.set(l,c,"element"),s.set(l,c,"element"),nh(n)}}else{const u=n.isBackward(),c=u?s:i,f=c.getNode(),d=u?i:s,h=d.getNode();if(e.is(f)){const p=c.offset;(t<=p&&r>0||t<p&&r<0)&&c.set(l,Math.max(0,p+r),"element")}if(e.is(h)){const p=d.offset;(t<=p&&r>0||t<p&&r<0)&&d.set(l,Math.max(0,p+r),"element")}}nh(n)}function nh(n){const e=n.anchor,t=e.offset,r=n.focus,i=r.offset,s=e.getNode(),o=r.getNode();if(n.isCollapsed()){if(!V(s))return;const a=s.getChildrenSize(),l=t>=a,u=l?s.getChildAtIndex(a-1):s.getChildAtIndex(t);if(ee(u)){let c=0;l&&(c=u.getTextContentSize()),e.set(u.__key,c,"text"),r.set(u.__key,c,"text")}}else{if(V(s)){const a=s.getChildrenSize(),l=t>=a,u=l?s.getChildAtIndex(a-1):s.getChildAtIndex(t);if(ee(u)){let c=0;l&&(c=u.getTextContentSize()),e.set(u.__key,c,"text")}}if(V(o)){const a=o.getChildrenSize(),l=i>=a,u=l?o.getChildAtIndex(a-1):o.getChildAtIndex(i);if(ee(u)){let c=0;l&&(c=u.getTextContentSize()),r.set(u.__key,c,"text")}}}}function sl(n,e,t,r,i){let s=null,o=0,a=null;r!==null?(s=r.__key,ee(r)?(o=r.getTextContentSize(),a="text"):V(r)&&(o=r.getChildrenSize(),a="element")):i!==null&&(s=i.__key,ee(i)?a="text":V(i)&&(a="element")),s!==null&&a!==null?n.set(s,o,a):(o=e.getIndexWithinParent(),o===-1&&(o=t.getChildrenSize()),n.set(t.__key,o,"element"))}function rh(n,e,t,r,i){n.type==="text"?n.set(t,n.offset+(e?0:i),"text"):n.offset>r.getIndexWithinParent()&&n.set(n.key,n.offset-1,"element")}function Hm(n,e,t,r,i){try{n.setBaseAndExtent(e,t,r,i)}catch{}}function r2(n,e,t,r,i,s,o){const a=r.anchorNode,l=r.focusNode,u=r.anchorOffset,c=r.focusOffset,f=document.activeElement;if(i.has(u2)&&f!==s||f!==null&&Td(f))return;if(!G(e))return void(n!==null&&Bo(t,a,l)&&r.removeAllRanges());const d=e.anchor,h=e.focus,p=d.key,m=h.key,_=ys(t,p),C=ys(t,m),v=d.offset,k=h.offset,M=e.format,$=e.style,x=e.isCollapsed();let O=_,N=C,I=!1;if(d.type==="text"){O=ms(_);const A=d.getNode();I=A.getFormat()!==M||A.getStyle()!==$}else G(n)&&n.anchor.type==="text"&&(I=!0);var H,w,q,S,K;if(h.type==="text"&&(N=ms(C)),O!==null&&N!==null&&(x&&(n===null||I||G(n)&&(n.format!==M||n.style!==$))&&(H=M,w=$,q=v,S=p,K=performance.now(),Tm=[H,w,q,S,K]),u!==v||c!==k||a!==O||l!==N||r.type==="Range"&&x||(f!==null&&s.contains(f)||s.focus({preventScroll:!0}),d.type==="element"))){if(Hm(r,O,v,N,k),!i.has(c2)&&e.isCollapsed()&&s!==null&&s===document.activeElement){const A=G(e)&&e.anchor.type==="element"?O.childNodes[v]||null:r.rangeCount>0?r.getRangeAt(0):null;if(A!==null){let P;if(A instanceof Text){const j=document.createRange();j.selectNode(A),P=j.getBoundingClientRect()}else P=A.getBoundingClientRect();(function(j,z,J){const W=hy(J),Q=Id(W);if(W===null||Q===null)return;let{top:ie,bottom:te}=z,Z=0,Y=0,oe=J;for(;oe!==null;){const ue=oe===W.body;if(ue)Z=0,Y=Mn(j).innerHeight;else{const pe=oe.getBoundingClientRect();Z=pe.top,Y=pe.bottom}let de=0;if(ie<Z?de=-(Z-ie):te>Y&&(de=te-Y),de!==0)if(ue)Q.scrollBy(0,de);else{const pe=oe.scrollTop;oe.scrollTop+=de;const ge=oe.scrollTop-pe;ie-=ge,te-=ge}if(ue)break;oe=qo(oe)}})(t,P,s)}}ic=!0}}function i2(n){let e=ne()||Ms();e===null&&(e=De().selectEnd()),e.insertNodes(n)}function xu(n){let e=n;n.isCollapsed()||e.removeText();const t=ne();G(t)&&(e=t),G(e)||se(161);const r=e.anchor;let i=r.getNode(),s=r.offset;for(;!An(i);){const o=i;if([i,s]=s2(i,s),o.is(i))break}return s}function s2(n,e){const t=n.getParent();if(!t){const i=kn();return De().append(i),i.select(),[De(),0]}if(ee(n)){const i=n.splitText(e);if(i.length===0)return[t,n.getIndexWithinParent()];const s=e===0?0:1;return[t,i[0].getIndexWithinParent()+s]}if(!V(n)||e===0)return[t,n.getIndexWithinParent()];const r=n.getChildAtIndex(e);if(r){const i=new $o(an(n.__key,e,"element"),an(n.__key,e,"element"),0,""),s=n.insertNewAfter(i);s&&s.append(r,...r.getNextSiblings())}return[t,n.getIndexWithinParent()+1]}function ih(n,e,t,r,i="decorators-and-blocks"){if(e==="move"&&r==="character"&&!n.isCollapsed()){const[c,f]=t===n.isBackward()?[n.focus,n.anchor]:[n.anchor,n.focus];return f.set(c.key,c.offset,c.type),!0}const s=Dr(n.focus,t?"previous":"next"),o=r==="lineboundary",a=e==="move";let l=s,u=i==="decorators-and-blocks";if(!vy(l)){for(const c of l){u=!1;const{origin:f}=c;if(!Le(f)||f.isIsolated()||(l=c,!o||!f.isInline()))break}if(u)for(const c of Fd(s).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(Un(c))c.origin.isInline()||(l=c);else{if(V(c.origin))continue;Le(c.origin)&&!c.origin.isInline()&&(l=c)}break}}if(l===s)return!1;if(a&&!o&&Le(l.origin)&&l.origin.isKeyboardSelectable()){const c=zm();return c.add(l.origin.getKey()),Mt(c),!0}return l=ir(l),a&&xo(n.anchor,l),xo(n.focus,l),u||!o}let mt=null,yt=null,on=!1,Su=!1,Pa=0;const sh={characterData:!0,childList:!0,subtree:!0};function Os(){return on||mt!==null&&mt._readOnly}function kt(){on&&se(13)}function Km(){Pa>99&&se(14)}function si(){return mt===null&&se(195,Vm()),mt}function Ve(){return yt===null&&se(196,Vm()),yt}function Vm(){let n=0;const e=new Set,t=Ll.version;if(typeof window<"u")for(const i of document.querySelectorAll("[contenteditable]")){const s=Pl(i);if(Ad(s))n++;else if(s){let o=String(s.constructor.version||"<0.17.1");o===t&&(o+=" (separately built, likely a bundler configuration issue)"),e.add(o)}}let r=` Detected on the page: ${n} compatible editor(s) with version ${t}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function o2(){return yt}function oh(n,e,t){const r=e.__type,i=ry(n,r);let s=t.get(r);s===void 0&&(s=Array.from(i.transforms),t.set(r,s));const o=s.length;for(let a=0;a<o&&(s[a](e),e.isAttached());a++);}function ah(n,e){return n!==void 0&&n.__key!==e&&n.isAttached()}function Jm(n,e){if(!e)return;const t=n._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const i of r)t.add(i)}function Gm(n){return vd(n,Ve()._nodes)}function vd(n,e){const t=n.type,r=e.get(t);r===void 0&&se(17,t);const i=r.klass;n.type!==i.getType()&&se(18,i.name);const s=i.importJSON(n),o=n.children;if(V(s)&&Array.isArray(o))for(let a=0;a<o.length;a++){const l=vd(o[a],e);s.append(l)}return s}function lh(n,e,t){const r=mt,i=on,s=yt;mt=e,on=!0,yt=n;try{return t()}finally{mt=r,on=i,yt=s}}function wr(n,e){const t=n._pendingEditorState,r=n._rootElement,i=n._headless||r===null;if(t===null)return;const s=n._editorState,o=s._selection,a=t._selection,l=n._dirtyType!==Si,u=mt,c=on,f=yt,d=n._updating,h=n._observer;let p=null;if(n._pendingEditorState=null,n._editorState=t,!i&&l&&h!==null){yt=n,mt=t,on=!1,n._updating=!0;try{const x=n._dirtyType,O=n._dirtyElements,N=n._dirtyLeaves;h.disconnect(),p=$v(s,t,n,x,O,N)}catch(x){if(x instanceof Error&&n._onError(x),Su)throw x;return ny(n,null,r,t),cm(n),n._dirtyType=ds,Su=!0,wr(n,s),void(Su=!1)}finally{h.observe(r,sh),n._updating=d,mt=u,on=c,yt=f}}t._readOnly||(t._readOnly=!0);const m=n._dirtyLeaves,_=n._dirtyElements,C=n._normalizedNodes,v=n._updateTags,k=n._deferred;l&&(n._dirtyType=Si,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),function(x,O){const N=x._decorators;let I=x._pendingDecorators||N;const H=O._nodeMap;let w;for(w in I)H.has(w)||(I===N&&(I=oy(x)),delete I[w])}(n,t);const M=i?null:zn(Mn(n));if(n._editable&&M!==null&&(l||a===null||a.dirty)&&r!==null&&!v.has(d2)){yt=n,mt=t;try{if(h!==null&&h.disconnect(),l||a===null||a.dirty){const x=n._blockCursorElement;x!==null&&hc(x,n,r),r2(o,a,n,M,v,r)}(function(x,O,N){let I=x._blockCursorElement;if(G(N)&&N.isCollapsed()&&N.anchor.type==="element"&&O.contains(document.activeElement)){const H=N.anchor,w=H.getNode(),q=H.offset;let S=!1,K=null;if(q===w.getChildrenSize())Au(w.getChildAtIndex(q-1))&&(S=!0);else{const A=w.getChildAtIndex(q);if(A!==null&&Au(A)){const P=A.getPreviousSibling();(P===null||Au(P))&&(S=!0,K=x.getElementByKey(A.__key))}}if(S){const A=x.getElementByKey(w.__key);return I===null&&(x._blockCursorElement=I=function(P){const j=P.theme,z=document.createElement("div");z.contentEditable="false",z.setAttribute("data-lexical-cursor","true");let J=j.blockCursor;if(J!==void 0){if(typeof J=="string"){const W=Ga(J);J=j.blockCursor=W}J!==void 0&&z.classList.add(...J)}return z}(x._config)),O.style.caretColor="transparent",void(K===null?A.appendChild(I):A.insertBefore(I,K))}}I!==null&&hc(I,x,O)})(n,r,a)}finally{h!==null&&h.observe(r,sh),yt=f,mt=u}}p!==null&&function(x,O,N,I,H){const w=Array.from(x._listeners.mutation),q=w.length;for(let S=0;S<q;S++){const[K,A]=w[S];for(const P of A){const j=O.get(P);j!==void 0&&K(j,{dirtyLeaves:I,prevEditorState:H,updateTags:N})}}}(n,p,v,m,s),G(a)||a===null||o!==null&&o.is(a)||n.dispatchCommand(Ts,void 0);const $=n._pendingDecorators;$!==null&&(n._decorators=$,n._pendingDecorators=null,po("decorator",n,!0,$)),function(x,O,N){const I=hh(O),H=hh(N);I!==H&&po("textcontent",x,!0,H)}(n,e||s,t),po("update",n,!0,{dirtyElements:_,dirtyLeaves:m,editorState:t,mutatedNodes:p,normalizedNodes:C,prevEditorState:e||s,tags:v}),function(x,O){if(x._deferred=[],O.length!==0){const N=x._updating;x._updating=!0;try{for(let I=0;I<O.length;I++)O[I]()}finally{x._updating=N}}}(n,k),function(x){const O=x._updates;if(O.length!==0){const N=O.shift();if(N){const[I,H]=N;Il(x,I,H)}}}(n)}function po(n,e,t,...r){const i=e._updating;e._updating=t;try{const s=Array.from(e._listeners[n]);for(let o=0;o<s.length;o++)s[o].apply(null,r)}finally{e._updating=i}}function uh(n,e){const t=n._updates;let r=e||!1;for(;t.length!==0;){const i=t.shift();if(i){const[s,o]=i,a=n._pendingEditorState;let l;o!==void 0&&(l=o.onUpdate,o.skipTransforms&&(r=!0),o.discrete&&(a===null&&se(191),a._flushSync=!0),l&&n._deferred.push(l),Jm(n,o.tag)),a==null?Il(n,s,o):s()}}return r}function Il(n,e,t){const r=n._updateTags;let i,s=!1,o=!1;t!==void 0&&(i=t.onUpdate,Jm(n,t.tag),s=t.skipTransforms||!1,o=t.discrete||!1),i&&n._deferred.push(i);const a=n._editorState;let l=n._pendingEditorState,u=!1;(l===null||l._readOnly)&&(l=n._pendingEditorState=Xm(l||a),u=!0),l._flushSync=o;const c=mt,f=on,d=yt,h=n._updating;mt=l,on=!1,n._updating=!0,yt=n;const p=n._headless||n.getRootElement()===null;xd(null);try{u&&(p?a._selection!==null&&(l._selection=a._selection.clone()):l._selection=function(v,k){const M=v.getEditorState()._selection,$=zn(Mn(v));return G(M)||M==null?bd(M,$,v,k):M.clone()}(n,t&&t.event||null));const _=n._compositionKey;e(),s=uh(n,s),function(v,k){const M=k.getEditorState()._selection,$=v._selection;if(G($)){const x=$.anchor,O=$.focus;let N;if(x.type==="text"&&(N=x.getNode(),N.selectionTransform(M,$)),O.type==="text"){const I=O.getNode();N!==I&&I.selectionTransform(M,$)}}}(l,n),n._dirtyType!==Si&&(s?function(v,k){const M=k._dirtyLeaves,$=v._nodeMap;for(const x of M){const O=$.get(x);ee(O)&&O.isAttached()&&O.isSimpleText()&&!O.isUnmergeable()&&Bf(O)}}(l,n):function(v,k){const M=k._dirtyLeaves,$=k._dirtyElements,x=v._nodeMap,O=Ur(),N=new Map;let I=M,H=I.size,w=$,q=w.size;for(;H>0||q>0;){if(H>0){k._dirtyLeaves=new Set;for(const S of I){const K=x.get(S);ee(K)&&K.isAttached()&&K.isSimpleText()&&!K.isUnmergeable()&&Bf(K),K!==void 0&&ah(K,O)&&oh(k,K,N),M.add(S)}if(I=k._dirtyLeaves,H=I.size,H>0){Pa++;continue}}k._dirtyLeaves=new Set,k._dirtyElements=new Map,w.delete("root")&&w.set("root",!0);for(const S of w){const K=S[0],A=S[1];if($.set(K,A),!A)continue;const P=x.get(K);P!==void 0&&ah(P,O)&&oh(k,P,N)}I=k._dirtyLeaves,H=I.size,w=k._dirtyElements,q=w.size,Pa++}k._dirtyLeaves=M,k._dirtyElements=$}(l,n),uh(n),function(v,k,M,$){const x=v._nodeMap,O=k._nodeMap,N=[];for(const[I]of $){const H=O.get(I);H!==void 0&&(H.isAttached()||(V(H)&&am(H,I,x,O,N,$),x.has(I)||$.delete(I),N.push(I)))}for(const I of N)O.delete(I);for(const I of M){const H=O.get(I);H===void 0||H.isAttached()||(x.has(I)||M.delete(I),O.delete(I))}}(a,l,n._dirtyLeaves,n._dirtyElements)),_!==n._compositionKey&&(l._flushSync=!0);const C=l._selection;if(G(C)){const v=l._nodeMap,k=C.anchor.key,M=C.focus.key;v.get(k)!==void 0&&v.get(M)!==void 0||se(19)}else Ht(C)&&C._nodes.size===0&&(l._selection=null)}catch(_){return _ instanceof Error&&n._onError(_),n._pendingEditorState=a,n._dirtyType=ds,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void wr(n)}finally{mt=c,on=f,yt=d,n._updating=h,Pa=0}n._dirtyType!==Si||n._deferred.length>0||function(_,C){const v=C.getEditorState()._selection,k=_._selection;if(k!==null){if(k.dirty||!k.is(v))return!0}else if(v!==null)return!0;return!1}(l,n)?l._flushSync?(l._flushSync=!1,wr(n)):u&&g2(()=>{wr(n)}):(l._flushSync=!1,u&&(r.clear(),n._deferred=[],n._pendingEditorState=null))}function Cn(n,e,t){yt===n&&t===void 0?e():Il(n,e,t)}let a2=class $a{constructor(e,t,r){this.element=e,this.before=t||null,this.after=r||null}withBefore(e){return new $a(this.element,e,this.after)}withAfter(e){return new $a(this.element,this.before,e)}withElement(e){return this.element===e?this:new $a(e,this.before,this.after)}insertChild(e){const t=this.before||this.getManagedLineBreak();return t!==null&&t.parentElement!==this.element&&se(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&se(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&se(224),this.element.replaceChild(e,t),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const t=e==="decorator"&&(cs||_o);this.insertManagedLineBreak(t)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const t=this.element,r=e.nodeName==="IMG"?e.nextSibling:null;r&&t.removeChild(r),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const t=this.getManagedLineBreak();if(t){if(e===(t.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,i=this.before,s=document.createElement("br");if(r.insertBefore(s,i),e){const o=document.createElement("img");o.setAttribute("data-lexical-linebreak","true"),o.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",o.alt="",r.insertBefore(o,s),r.__lexicalLineBreak=o}else r.__lexicalLineBreak=s}getFirstChildOffset(){let e=0;for(let t=this.after;t!==null;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,r,i){if(r===this.element){const l=this.getFirstChildOffset();return[e,Math.min(l+e.getChildrenSize(),Math.max(l,i))]}const s=ch(t,r);s.push(i);const o=ch(t,this.element);let a=e.getIndexWithinParent();for(let l=0;l<o.length;l++){const u=s[l],c=o[l];if(u===void 0||u<c)break;if(u>c){a+=1;break}}return[e.getParentOrThrow(),a]}};function ch(n,e){const t=[];let r=e;for(;r!==n&&r!==null;r=r.parentNode){let i=0;for(let s=r.previousSibling;s!==null;s=s.previousSibling)i++;t.push(i)}return r!==n&&se(225),t.reverse()}let qt=class extends Ns{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return wv[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=Ve()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return t!==null&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;t!==null;){if(ee(t)&&e.push(t),V(t)){const r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;V(e);){const t=e.getFirstChild();if(t===null)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;V(e);){const t=e.getLastChild();if(t===null)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),r=t.length;if(e>=r){const s=t[r-1];return V(s)&&s.getLastDescendant()||s||null}const i=t[e];return V(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:Ae(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&se(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:Ae(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&se(96,this.__key),e}getChildAtIndex(e){const t=this.getChildrenSize();let r,i;if(e<t/2){for(r=this.getFirstChild(),i=0;r!==null&&i<=e;){if(i===e)return r;r=r.getNextSibling(),i++}return null}for(r=this.getLastChild(),i=t-1;r!==null&&i>=e;){if(i===e)return r;r=r.getPreviousSibling(),i--}return null}getTextContent(){let e="";const t=this.getChildren(),r=t.length;for(let i=0;i<r;i++){const s=t[i];e+=s.getTextContent(),V(s)&&i!==r-1&&!s.isInline()&&(e+=Ar)}return e}getTextContentSize(){let e=0;const t=this.getChildren(),r=t.length;for(let i=0;i<r;i++){const s=t[i];e+=s.getTextContentSize(),V(s)&&i!==r-1&&!s.isInline()&&(e+=Ar.length)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==""){const t=Mf[e];return!!(this.getFormat()&t)}return!1}hasTextFormat(e){const t=Jr[e];return!!(this.getTextFormat()&t)}getFormatFlags(e,t){return ol(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){kt();const r=ne();let i=e,s=t;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&t===0){const l=this.getFirstChild();if(ee(l)||V(l))return l.select(0,0)}else if(!(e!==void 0&&e!==o||t!==void 0&&t!==o)){const l=this.getLastChild();if(ee(l)||V(l))return l.select()}}i===void 0&&(i=o),s===void 0&&(s=o);const a=this.__key;return G(r)?(r.anchor.set(a,i,"element"),r.focus.set(a,s,"element"),r.dirty=!0,r):Wm(a,i,a,s,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(t=>t.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=e!==""?Mf[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){const t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){const i=r.length,s=this.getChildrenSize(),o=this.getWritable();e+t<=s||se(226,String(e),String(t),String(s));const a=o.__key,l=[],u=[],c=this.getChildAtIndex(e+t);let f=null,d=s-t+i;if(e!==0)if(e===s)f=this.getLastChild();else{const p=this.getChildAtIndex(e);p!==null&&(f=p.getPreviousSibling())}if(t>0){let p=f===null?this.getFirstChild():f.getNextSibling();for(let m=0;m<t;m++){p===null&&se(100);const _=p.getNextSibling(),C=p.__key;Ei(p.getWritable()),u.push(C),p=_}}let h=f;for(let p=0;p<i;p++){const m=r[p];h!==null&&m.is(h)&&(f=h=h.getPreviousSibling());const _=m.getWritable();_.__parent===a&&d--,Ei(_);const C=m.__key;if(h===null)o.__first=C,_.__prev=null;else{const v=h.getWritable();v.__next=C,_.__prev=v.__key}m.__key===a&&se(76),_.__parent=a,l.push(C),h=m}if(e+t===s)h!==null&&(h.getWritable().__next=null,o.__last=h.__key);else if(c!==null){const p=c.getWritable();if(h!==null){const m=h.getWritable();p.__prev=h.__key,m.__next=c.__key}else p.__prev=null}if(o.__size=d,u.length){const p=ne();if(G(p)){const m=new Set(u),_=new Set(l),{anchor:C,focus:v}=p;dh(C,m,_)&&sl(C,C.getNode(),this,f,c),dh(v,m,_)&&sl(v,v.getNode(),this,f,c),d!==0||this.canBeEmpty()||fr(this)||this.remove()}}return o}getDOMSlot(e){return new a2(e)}exportDOM(e){const{element:t}=super.exportDOM(e);if(qe(t)){const r=this.getIndent();r>0&&(t.style.paddingInlineStart=40*r+"px");const i=this.getDirection();i&&(t.dir=i)}return{element:t}}exportJSON(){const e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),r=this.getTextStyle();return t!==0&&(e.textFormat=t),r!==""&&(e.textStyle=r),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){const r=this.getDOMSlot(e);let i=r.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){const o=t.getElementByKey(s.getKey());o!==null&&(i==null?(r.insertChild(o),i=o):i!==o&&r.replaceChild(o,i),i=i.nextSibling)}}};function V(n){return n instanceof qt}function dh(n,e,t){let r=n.getNode();for(;r;){const i=r.__key;if(e.has(i)&&!t.has(i))return!0;r=r.getParent()}return!1}let oi=class extends Ns{decorate(e,t){se(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function Le(n){return n instanceof oi}let Cd=class Ym extends qt{static getType(){return"root"}static clone(){return new Ym}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){se(51)}getTextContent(){const e=this.__cachedText;return!Os()&&Ve()._dirtyType!==Si||e===null?super.getTextContent():e}remove(){se(52)}replace(e){se(53)}insertBefore(e){se(54)}insertAfter(e){se(55)}updateDOM(e,t){return!1}splice(e,t,r){for(const i of r)V(i)||Le(i)||se(282);return super.splice(e,t,r)}static importJSON(e){return De().updateFromJSON(e)}collapseAtStart(){return!0}};function St(n){return n instanceof Cd}function Xm(n){return new Zm(new Map(n._nodeMap))}function Ed(){return new Zm(new Map([["root",new Cd]]))}function Qm(n){const e=n.exportJSON(),t=n.constructor;if(e.type!==t.getType()&&se(130,t.name),V(n)){const r=e.children;Array.isArray(r)||se(59,t.name);const i=n.getChildren();for(let s=0;s<i.length;s++){const o=Qm(i[s]);r.push(o)}}return e}let Zm=class ey{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,t){return lh(t&&t.editor||null,this,e)}clone(e){const t=new ey(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return lh(null,this,()=>({root:Qm(De())}))}};const uc="historic",l2="history-push",vi="history-merge",ty="paste",u2="collaboration",c2="skip-scroll-into-view",d2="skip-dom-selection";let wd=class extends qt{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}};class ai extends qt{static getType(){return"paragraph"}static clone(e){return new ai(e.__key)}createDOM(e){const t=document.createElement("p"),r=os(e.theme,"paragraph");return r!==void 0&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:f2,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(qe(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();r&&(t.style.textAlign=r)}return{element:t}}static importJSON(e){return kn().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,t){const r=kn();r.setTextFormat(e.format),r.setTextStyle(e.style);const i=this.getDirection();return r.setDirection(i),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,t),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||ee(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function f2(n){const e=kn();return n.style&&(e.setFormat(n.style.textAlign),S2(n,e)),{node:e}}function kn(){return Ue(new ai)}function kd(n){return n instanceof ai}const ye=0,Is=1,Fa=2,Rl=3,go=4;function ny(n,e,t,r){const i=n._keyToDOMMap;i.clear(),n._editorState=Ed(),n._pendingEditorState=r,n._compositionKey=null,n._dirtyType=Si,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;const s=n._observer;s!==null&&(s.disconnect(),n._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",i.set("root",t))}function h2(n){const e=n||{},t=o2(),r=e.theme||{},i=n===void 0?t:e.parentEditor||null,s=e.disableEvents||!1,o=Ed(),a=e.namespace||(i!==null?i._config.namespace:uy()),l=e.editorState,u=[Cd,Jt,Lo,_d,ai,wd,...e.nodes||[]],{onError:c,html:f}=e,d=e.editable===void 0||e.editable;let h;if(n===void 0&&t!==null)h=t._nodes;else{h=new Map;for(let m=0;m<u.length;m++){let _=u[m],C=null,v=null;if(typeof _!="function"){const O=_;_=O.replace,C=O.with,v=O.withKlass||null}const{ownNodeConfig:k}=Ld(_),M=_.getType(),$=_.transform(),x=new Set;k&&k.$transform&&x.add(k.$transform),$!==null&&x.add($),h.set(M,{exportDOM:f&&f.export?f.export.get(_):void 0,klass:_,replace:C,replaceWithKlass:v,sharedNodeState:Ov(u[m]),transforms:x})}}const p=new Ll(o,i,h,{disableEvents:s,namespace:a,theme:r},c||console.error,function(m,_){const C=new Map,v=new Set,k=M=>{Object.keys(M).forEach($=>{let x=C.get($);x===void 0&&(x=[],C.set($,x)),x.push(M[$])})};return m.forEach(M=>{const $=M.klass.importDOM;if($==null||v.has($))return;v.add($);const x=$.call(M.klass);x!==null&&k(x)}),_&&k(_),C}(h,f?f.import:void 0),d,n);return l!==void 0&&(p._pendingEditorState=l,p._dirtyType=ds),p}let Ll=class{constructor(e,t,r,i,s,o,a,l){this._createEditorArgs=l,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=Si,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=uy(),this._onError=s,this._htmlConversions=o,this._editable=a,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){r===void 0&&se(35);const i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);const s=i.get(e);s===void 0&&se(36,String(e));const o=s[r];return o.add(t),()=>{o.delete(t),s.every(a=>a.size===0)&&i.delete(e)}}registerMutationListener(e,t,r){const i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,s=this._listeners.mutation;let o=s.get(t);o===void 0&&(o=new Set,s.set(t,o)),o.add(i);const a=r&&r.skipInitialization;return a!==void 0&&a||this.initializeMutationListener(t,i),()=>{o.delete(i),o.size===0&&s.delete(t)}}getRegisteredNode(e){const t=this._nodes.get(e.getType());return t===void 0&&se(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){const r=this._editorState,i=vh(r).get(t.getType());if(!i)return;const s=new Map;for(const o of i.keys())s.set(o,"created");s.size>0&&e(s,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){const r=this.getRegisteredNode(e);return r.transforms.add(t),r}registerNodeTransform(e,t){const r=this.registerNodeTransformToKlass(e,t),i=[r],s=r.replaceWithKlass;if(s!=null){const o=this.registerNodeTransformToKlass(s,t);i.push(o)}return function(o,a){const l=vh(o.getEditorState()),u=[];for(const c of a){const f=l.get(c);f&&u.push(f)}u.length!==0&&o.update(()=>{for(const c of u)for(const f of c.keys()){const d=Ae(f);d&&d.markDirty()}},o._pendingEditorState===null?{tag:vi}:void 0)}(this,i.map(o=>o.klass.getType())),()=>{i.forEach(o=>o.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return ce(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const r=os(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,ny(this,t,e,i),t!==null&&(this._config.disableEvents||Jv(t),r!=null&&t.classList.remove(...r)),e!==null){const s=Id(e),o=e.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=s,this._dirtyType=ds,cm(this),this._updateTags.add(vi),wr(this),this._config.disableEvents||function(a,l){const u=a.ownerDocument,c=rl.get(u);(c===void 0||c<1)&&u.addEventListener("selectionchange",Om),rl.set(u,(c||0)+1),a.__lexicalEditor=l;const f=Mm(a);for(let d=0;d<rc.length;d++){const[h,p]=rc[d],m=typeof p=="function"?_=>{Kf(_)||(Hf(_),(l.isEditable()||h==="click")&&p(_,l))}:_=>{if(Kf(_))return;Hf(_);const C=l.isEditable();switch(h){case"cut":return C&&ce(l,Ds,_);case"copy":return ce(l,qi,_);case"paste":return C&&ce(l,Bi,_);case"dragstart":return C&&ce(l,gd,_);case"dragover":return C&&ce(l,wm,_);case"dragend":return C&&ce(l,zv,_);case"focus":return C&&ce(l,Hv,_);case"blur":return C&&ce(l,Kv,_);case"drop":return C&&ce(l,Ol,_)}};a.addEventListener(h,m),f.push(()=>{a.removeEventListener(h,m)})}}(e,this),r!=null&&e.classList.add(...r)}else this._window=null,this._updateTags.add(vi),wr(this);po("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&se(38);let r=e;r._readOnly&&(r=Xm(e),r._selection=e._selection?e._selection.clone():null),um(this);const i=this._pendingEditorState,s=this._updateTags,o=t!==void 0?t.tag:null;i===null||i.isEmpty()||(o!=null&&s.add(o),wr(this)),this._pendingEditorState=r,this._dirtyType=ds,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&s.add(o),this._updating||wr(this)}parseEditorState(e,t){return function(r,i,s){const o=Ed(),a=mt,l=on,u=yt,c=i._dirtyElements,f=i._dirtyLeaves,d=i._cloneNotNeeded,h=i._dirtyType;i._dirtyElements=new Map,i._dirtyLeaves=new Set,i._cloneNotNeeded=new Set,i._dirtyType=0,mt=o,on=!1,yt=i,xd(null);try{const p=i._nodes;vd(r.root,p),s&&s(),o._readOnly=!0}catch(p){p instanceof Error&&i._onError(p)}finally{i._dirtyElements=c,i._dirtyLeaves=f,i._cloneNotNeeded=d,i._dirtyType=h,mt=a,on=l,yt=u}return o}(typeof e=="string"?JSON.parse(e):e,this,t)}read(e){return wr(this),this.getEditorState().read(e,{editor:this})}update(e,t){(function(r,i,s){r._updating?r._updates.push([i,s]):Il(r,i,s)})(this,e,t)}focus(e,t={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),Cn(this,()=>{const i=ne(),s=De();i!==null?i.dirty||Mt(i.clone()):s.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?s.selectStart():s.selectEnd()),py("focus"),v2(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=zn(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,po("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}};Ll.version="0.34.0+prod.esm";let cc=null;function xd(n){cc=n}let p2=1;function ry(n,e){const t=Sd(n,e);return t===void 0&&se(30,e),t}function Sd(n,e){return n._nodes.get(e)}const g2=typeof queueMicrotask=="function"?queueMicrotask:n=>{Promise.resolve().then(n)};function fh(n){return Le(Yr(n))}function Td(n){const e=document.activeElement;if(!qe(e))return!1;const t=e.nodeName;return Le(Yr(n))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&Pl(e)==null)}function Bo(n,e,t){const r=n.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(t)&&e!==null&&!Td(e)&&iy(e)===n}catch{return!1}}function Ad(n){return n instanceof Ll}function iy(n){let e=n;for(;e!=null;){const t=Pl(e);if(Ad(t))return t;e=qo(e)}return null}function Pl(n){return n?n.__lexicalEditor:null}function Ci(n){return $m(n)||n.isToken()}function Cr(n){return Ci(n)||n.isSegmented()}function Or(n){return ji(n)&&n.nodeType===fv}function m2(n){return ji(n)&&n.nodeType===hv}function ms(n){let e=n;for(;e!=null;){if(Or(e))return e;e=e.firstChild}return null}function ol(n,e,t){const r=Jr[e];if(t!==null&&(n&r)==(t&r))return n;let i=n^r;return e==="subscript"?i&=-65:e==="superscript"?i&=-33:e==="lowercase"?(i&=-513,i&=-1025):e==="uppercase"?(i&=-257,i&=-1025):e==="capitalize"&&(i&=-257,i&=-513),i}function y2(n,e){const t=function(){const o=cc;return cc=null,o}();if((e=e||t&&t.__key)!=null)return void(n.__key=e);kt(),Km();const r=Ve(),i=si(),s=""+p2++;i._nodeMap.set(s,n),V(n)?r._dirtyElements.set(s,!0):r._dirtyLeaves.add(s),r._cloneNotNeeded.add(s),r._dirtyType=im,n.__key=s}function Ei(n){const e=n.getParent();if(e!==null){const t=n.getWritable(),r=e.getWritable(),i=n.getPreviousSibling(),s=n.getNextSibling(),o=s!==null?s.__key:null,a=i!==null?i.__key:null,l=i!==null?i.getWritable():null,u=s!==null?s.getWritable():null;i===null&&(r.__first=o),s===null&&(r.__last=a),l!==null&&(l.__next=o),u!==null&&(u.__prev=a),t.__prev=null,t.__next=null,t.__parent=null,r.__size--}}function al(n){Km();const e=n.getLatest(),t=e.__parent,r=si(),i=Ve(),s=r._nodeMap,o=i._dirtyElements;t!==null&&function(l,u,c){let f=l;for(;f!==null;){if(c.has(f))return;const d=u.get(f);if(d===void 0)break;c.set(f,!1),f=d.__parent}}(t,s,o);const a=e.__key;i._dirtyType=im,V(n)?o.set(a,!0):i._dirtyLeaves.add(a)}function xt(n){kt();const e=Ve(),t=e._compositionKey;if(n!==t){if(e._compositionKey=n,t!==null){const r=Ae(t);r!==null&&r.getWritable()}if(n!==null){const r=Ae(n);r!==null&&r.getWritable()}}}function Ur(){return Os()?null:Ve()._compositionKey}function Ae(n,e){const t=(e||si())._nodeMap.get(n);return t===void 0?null:t}function sy(n,e){const t=$l(n,Ve());return t!==void 0?Ae(t,e):null}function $l(n,e){return n[`__lexicalKey_${e._key}`]}function Yr(n,e){let t=n;for(;t!=null;){const r=sy(t,e);if(r!==null)return r;t=qo(t)}return null}function oy(n){const e=n._decorators,t=Object.assign({},e);return n._pendingDecorators=t,t}function hh(n){return n.read(()=>De().getTextContent())}function De(){return ay(si())}function ay(n){return n._nodeMap.get("root")}function Mt(n){kt();const e=si();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),e._selection=n}function rs(n){const e=Ve(),t=function(r,i){let s=r;for(;s!=null;){const o=$l(s,i);if(o!==void 0)return o;s=qo(s)}return null}(n,e);return t===null?n===e.getRootElement()?Ae("root"):null:Ae(t)}function ly(n){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)}function Dd(n){const e=[];let t=n;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function uy(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function cy(n){return Or(n)?n.nodeValue:null}function Nd(n,e,t){const r=zn(Mn(e));if(r===null)return;const i=r.anchorNode;let{anchorOffset:s,focusOffset:o}=r;if(i!==null){let a=cy(i);const l=Yr(i);if(a!==null&&ee(l)){if(a===Tl&&t){const u=t.length;a=t,s=u,o=u}a!==null&&Md(l,a,s,o,n)}}}function Md(n,e,t,r,i){let s=n;if(s.isAttached()&&(i||!s.isDirty())){const o=s.isComposing();let a=e;(o||i)&&e[e.length-1]===Tl&&(a=e.slice(0,-1));const l=s.getTextContent();if(i||a!==l){if(a===""){if(xt(null),_o||cs||Ja)s.remove();else{const m=Ve();setTimeout(()=>{m.update(()=>{s.isAttached()&&s.remove()})},20)}return}const u=s.getParent(),c=Ms(),f=s.getTextContentSize(),d=Ur(),h=s.getKey();if(s.isToken()||d!==null&&h===d&&!o||G(c)&&(u!==null&&!u.canInsertTextBefore()&&c.anchor.offset===0||c.anchor.key===n.__key&&c.anchor.offset===0&&!s.canInsertTextBefore()&&!o||c.focus.key===n.__key&&c.focus.offset===f&&!s.canInsertTextAfter()&&!o))return void s.markDirty();const p=ne();if(!G(p)||t===null||r===null)return void ph(s,a,p);if(p.setTextNodeRange(s,t,s,r),s.isSegmented()){const m=Oe(s.getTextContent());s.replace(m),s=m}ph(s,a,p)}}}function ph(n,e,t){if(n.setTextContent(e),G(t)){const r=n.getKey();for(const i of["anchor","focus"]){const s=t[i];s.type==="text"&&s.key===r&&(s.offset=Vr(n,s.offset,"clamp"))}}}function ca(n,e,t){const r=e[t]||!1;return r==="any"||r===n[t]}function _2(n,e){return ca(n,e,"altKey")&&ca(n,e,"ctrlKey")&&ca(n,e,"shiftKey")&&ca(n,e,"metaKey")}function Be(n,e,t){return _2(n,t)&&n.key.toLowerCase()===e.toLowerCase()}const vr={ctrlKey:!nr,metaKey:nr},gh={altKey:nr,ctrlKey:!nr};function mh(n){return n.key==="Backspace"}function yh(n){return Be(n,"a",vr)}function dy(n){const e=De();if(G(n)){const t=n.anchor,r=n.focus,i=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(i.getKey(),0,"element"),r.set(i.getKey(),i.getChildrenSize(),"element"),bo(n),n}{const t=e.select(0,e.getChildrenSize());return Mt(bo(t)),t}}function os(n,e){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});const t=n.__lexicalClassNameCache,r=t[e];if(r!==void 0)return r;const i=n[e];if(typeof i=="string"){const s=Ga(i);return t[e]=s,s}return i}function Od(n,e,t,r,i){if(t.size===0)return;const s=r.__type,o=r.__key,a=e.get(s);a===void 0&&se(33,s);const l=a.klass;let u=n.get(l);u===void 0&&(u=new Map,n.set(l,u));const c=u.get(o),f=c==="destroyed"&&i==="created";(c===void 0||f)&&u.set(o,f?"updated":i)}function _h(n,e,t){const r=n.getParent();let i=t,s=n;return r!==null&&(e&&t===0?(i=s.getIndexWithinParent(),s=r):e||t!==s.getChildrenSize()||(i=s.getIndexWithinParent()+1,s=r)),s.getChildAtIndex(e?i-1:i)}function dc(n,e){const t=n.offset;if(n.type==="element")return _h(n.getNode(),e,t);{const r=n.getNode();if(e&&t===0||!e&&t===r.getTextContentSize()){const i=e?r.getPreviousSibling():r.getNextSibling();return i===null?_h(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):i}}return null}function fy(n){const e=Mn(n).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function ce(n,e,t){return function(r,i,s){const o=Dd(r);for(let a=4;a>=0;a--)for(let l=0;l<o.length;l++){const u=o[l],c=u._commands.get(i);if(c!==void 0){const f=c[a];if(f!==void 0){const d=Array.from(f),h=d.length;let p=!1;if(Cn(u,()=>{for(let m=0;m<h;m++)if(d[m](s,r))return void(p=!0)}),p)return p}}}return!1}(n,e,t)}function Fl(n){return!St(n)&&!n.isLastChild()&&!n.isInline()}function ys(n,e){const t=n._keyToDOMMap.get(e);return t===void 0&&se(75,e),t}function qo(n){const e=n.assignedSlot||n.parentElement;return pc(e)?e.host:e}function hy(n){return m2(n)?n:qe(n)?n.ownerDocument:null}function b2(n){return Ve()._updateTags.has(n)}function py(n){kt(),Ve()._updateTags.add(n)}function v2(n){kt(),Ve()._deferred.push(n)}function fc(n,e){let t=n.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function Id(n){const e=hy(n);return e?e.defaultView:null}function Mn(n){const e=n._window;return e===null&&se(78),e}function C2(n){return V(n)&&n.isInline()||Le(n)&&n.isInline()}function E2(n){let e=n.getParentOrThrow();for(;e!==null;){if(fr(e))return e;e=e.getParentOrThrow()}return e}function fr(n){return St(n)||V(n)&&n.isShadowRoot()}function Ue(n){const e=Ve(),t=n.getType(),r=Sd(e,t);r===void 0&&se(200,n.constructor.name,t);const{replace:i,replaceWithKlass:s}=r;if(i!==null){const o=i(n),a=o.constructor;return s!==null?o instanceof s||se(201,s.name,s.getType(),a.name,a.getType(),n.constructor.name,t):o instanceof n.constructor&&a!==n.constructor||se(202,a.name,a.getType(),n.constructor.name,t),o.__key===n.__key&&se(203,n.constructor.name,t,a.name,a.getType()),o}return n}function Tu(n,e){!St(n.getParent())||V(e)||Le(e)||se(99)}function w2(n){const e=Ae(n);return e===null&&se(63,n),e}function Au(n){return(Le(n)||V(n)&&!n.canBeEmpty())&&!n.isInline()}function hc(n,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=n.parentElement;r!==null&&r.removeChild(n)}function zn(n){return Kn?(n||window).getSelection():null}function k2(n){const e=Id(n);return e?e.getSelection():null}function gy(n){return qe(n)&&n.tagName==="A"}function qe(n){return ji(n)&&n.nodeType===dv}function ji(n){return typeof n=="object"&&n!==null&&"nodeType"in n&&typeof n.nodeType=="number"}function pc(n){return ji(n)&&n.nodeType===pv}function gc(n){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return n.nodeName.match(e)!==null}function ll(n){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return n.nodeName.match(e)!==null}function An(n){if(Le(n)&&!n.isInline())return!0;if(!V(n)||fr(n))return!1;const e=n.getFirstChild(),t=e===null||bi(e)||ee(e)||e.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&t}function Du(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function Bl(){return Ve()}const bh=new WeakMap,x2=new Map;function vh(n){if(!n._readOnly&&n.isEmpty())return x2;n._readOnly||se(192);let e=bh.get(n);return e||(e=function(t){const r=new Map;for(const[i,s]of t._nodeMap){const o=s.__type;let a=r.get(o);a||(a=new Map,r.set(o,a)),a.set(i,s)}return r}(n),bh.set(n,e)),e}function Rd(n){const e=n.constructor.clone(n);return e.afterCloneFrom(n),e}function S2(n,e){const t=parseInt(n.style.paddingInlineStart,10)||0,r=Math.round(t/40);e.setIndent(r)}function T2(n){n.__lexicalUnmanaged=!0}function A2(n){return n.__lexicalUnmanaged===!0}function to(n,e){return function(t,r){return Object.prototype.hasOwnProperty.call(t,r)}(n,e)&&n[e]!==Ns[e]}function Ld(n){const e=Of in n.prototype?n.prototype[Of]():void 0,t=function(o){return o===oi||o===qt||o===Ns}(n),r=!t&&to(n,"getType")?n.getType():void 0;let i,s=r;if(e)if(r)i=e[r];else for(const[o,a]of Object.entries(e))s=o,i=a;if(!t&&s&&(to(n,"getType")||(n.getType=()=>s),to(n,"clone")||(n.clone=o=>(xd(o),new n)),to(n,"importJSON")||(n.importJSON=i&&i.$importJSON||(o=>new n().updateFromJSON(o))),!to(n,"importDOM")&&i)){const{importDOM:o}=i;o&&(n.importDOM=()=>o)}return{ownNodeConfig:i,ownNodeType:s}}const D2={next:"previous",previous:"next"};let Pd=class{constructor(e){this.origin=e}[Symbol.iterator](){return ql({hasNext:Di,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return ut(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return ut(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){const r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(r===null?this.insert(e):r.replace(e,t)),this}splice(e,t,r="next"){const i=r===this.direction?t:Array.from(t).reverse();let s=this;const o=this.getParentAtCaret(),a=new Map;for(let l=s.getAdjacentCaret();l!==null&&a.size<e;l=l.getAdjacentCaret()){const u=l.origin.getWritable();a.set(u.getKey(),u)}for(const l of i){if(a.size>0){const u=s.getNodeAtCaret();if(u){if(a.delete(u.getKey()),a.delete(l.getKey()),!(u.is(l)||s.origin.is(l))){const c=l.getParent();c&&c.is(o)&&l.remove(),u.replace(l)}}else u===null&&se(263,Array.from(a).join(" "))}else s.insert(l);s=ut(l,this.direction)}for(const l of a.values())l.remove();return this}},mc=class my extends Pd{constructor(){super(...arguments);Sn(this,"type","child")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Hn(t,this.direction)}getParentCaret(t="root"){return ut($d(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Rs(this.direction);return ut(this.getNodeAtCaret(),t)||Hn(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof my&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}};const N2={root:St,shadowRoot:fr};function Rs(n){return D2[n]}function $d(n,e="root"){return N2[e](n)?null:n}let ul=class yc extends Pd{constructor(){super(...arguments);Sn(this,"type","sibling")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ut(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return V(this.origin)?Hn(this.origin,this.direction):null}getParentCaret(t="root"){return ut($d(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Rs(this.direction);return ut(this.getNodeAtCaret(),t)||Hn(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof yc&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof yc||t instanceof cl)&&this.direction===t.direction&&this.origin.is(t.origin)}},cl=class _c extends Pd{constructor(t,r){super(t);Sn(this,"type","text");this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Ni(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return ut($d(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Ni(this.origin,Rs(this.direction),this.offset)}isSamePointCaret(t){return t instanceof _c&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof ul||t instanceof _c)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return ut(this.origin,this.direction)}};function Kr(n){return n instanceof cl}function Di(n){return n instanceof ul}function Un(n){return n instanceof mc}const M2={next:class extends cl{constructor(){super(...arguments);Sn(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends cl{constructor(){super(...arguments);Sn(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},O2={next:class extends ul{constructor(){super(...arguments);Sn(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends ul{constructor(){super(...arguments);Sn(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},I2={next:class extends mc{constructor(){super(...arguments);Sn(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends mc{constructor(){super(...arguments);Sn(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function ut(n,e){return n?new O2[e](n):null}function Ni(n,e,t){return n?new M2[e](n,Vr(n,t)):null}function Vr(n,e,t="error"){const r=n.getTextContentSize();let i=e==="next"?r:e==="previous"?0:e;return(i<0||i>r)&&(t!=="clamp"&&function(s,...o){const a=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;l.append("code",s);for(const u of o)l.append("v",u);a.search=l.toString(),console.warn(`Minified Lexical warning #${s}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(284,String(e),String(r),n.getKey()),i=i<0?0:r),i}function Ch(n,e){return new P2(n,e)}function Hn(n,e){return V(n)?new I2[e](n):null}function R2(n){return n&&n.getChildCaret()||n}function ko(n){return n&&R2(n.getAdjacentCaret())}let L2=class yy{constructor(e,t,r){Sn(this,"type","node-caret-range");this.anchor=e,this.focus=t,this.direction=r}getLatest(){const e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new yy(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=i=>{const s=this[i].getLatest();return Kr(s)?function(o,a){const{direction:l,origin:u}=o,c=Vr(u,a==="focus"?Rs(l):l);return Ch(o,c-o.offset)}(s,i):null},t=e("anchor"),r=e("focus");if(t&&r){const{caret:i}=t,{caret:s}=r;if(i.isSameNodeCaret(s))return[Ch(i,s.offset-i.offset),null]}return[t,r]}iterNodeCarets(e="root"){const t=Kr(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),i=Kr(r),s=o=>o.isSameNodeCaret(r)?null:ko(o)||o.getParentCaret(e);return ql({hasNext:o=>o!==null&&!(i&&r.isSameNodeCaret(o)),initial:t.isSameNodeCaret(r)?null:s(t),map:o=>o,step:s})}[Symbol.iterator](){return this.iterNodeCarets("root")}},P2=class{constructor(e,t){Sn(this,"type","slice");this.caret=e,this.distance=t}getSliceIndices(){const{distance:e,caret:{offset:t}}=this,r=t+e;return r<t?[r,t]:[t,r]}getTextContent(){const[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:t}}=this,[r,i]=this.getSliceIndices(),s=e.getTextContent();return Ni(e.setTextContent(s.slice(0,r)+s.slice(i)),t,r)}};function Fd(n){return Xr(n,ut(De(),n.direction))}function $2(n){return Xr(n,n)}function Xr(n,e){return n.direction!==e.direction&&se(265),new L2(n,e,n.direction)}function ql(n){const{initial:e,hasNext:t,step:r,map:i}=n;let s=e;return{[Symbol.iterator](){return this},next(){if(!t(s))return{done:!0,value:void 0};const o={done:!1,value:i(s)};return s=r(s),o}}}function _y(n,e){const t=mo(n.origin,e.origin);switch(t===null&&se(275,n.origin.getKey(),e.origin.getKey()),t.type){case"same":{const r=n.type==="text",i=e.type==="text";return r&&i?function(s,o){return Math.sign(s-o)}(n.offset,e.offset):n.type===e.type?0:r?-1:i?1:n.type==="child"?-1:1}case"ancestor":return n.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return by(t)}}function by(n){const{a:e,b:t}=n,r=e.__key,i=t.__key;let s=e,o=t;for(;s&&o;s=s.getNextSibling(),o=o.getNextSibling()){if(s.__key===i)return-1;if(o.__key===r)return 1}return s===null?1:-1}function da(n,e){return e.is(n)}function Eh(n){return V(n)?[n.getLatest(),null]:[n.getParent(),n.getLatest()]}function mo(n,e){if(n.is(e))return{commonAncestor:n,type:"same"};const t=new Map;for(let[r,i]=Eh(n);r;i=r,r=r.getParent())t.set(r,i);for(let[r,i]=Eh(e);r;i=r,r=r.getParent()){const s=t.get(r);if(s!==void 0)return s===null?(da(n,r)||se(276),{commonAncestor:r,type:"ancestor"}):i===null?(da(e,r)||se(277),{commonAncestor:r,type:"descendant"}):((V(s)||da(n,s))&&(V(i)||da(e,i))&&r.is(s.getParent())&&r.is(i.getParent())||se(278),{a:s,b:i,commonAncestor:r,type:"branch"})}return null}function Dr(n,e){const{type:t,key:r,offset:i}=n,s=w2(n.key);return t==="text"?(ee(s)||se(266,s.getType(),r),Ni(s,e,i)):(V(s)||se(267,s.getType(),r),q2(s,n.offset,e))}function xo(n,e){const{origin:t,direction:r}=e,i=r==="next";Kr(e)?n.set(t.getKey(),e.offset,"text"):Di(e)?ee(t)?n.set(t.getKey(),Vr(t,r),"text"):n.set(t.getParentOrThrow().getKey(),t.getIndexWithinParent()+(i?1:0),"element"):(Un(e)&&V(t)||se(268),n.set(t.getKey(),i?0:t.getChildrenSize(),"element"))}function F2(n){const e=ne(),t=G(e)?e:Fo();return Ba(t,n),Mt(t),t}function Ba(n,e){xo(n.anchor,e.anchor),xo(n.focus,e.focus)}function wh(n){const{anchor:e,focus:t}=n,r=Dr(e,"next"),i=Dr(t,"next"),s=_y(r,i)<=0?"next":"previous";return Xr(_s(r,s),_s(i,s))}function jl(n){const{direction:e,origin:t}=n,r=ut(t,Rs(e)).getNodeAtCaret();return r?ut(r,e):Hn(t.getParentOrThrow(),e)}function kh(n,e="root"){const t=[n];for(let r=Un(n)?n.getParentCaret(e):n.getSiblingCaret();r!==null;r=r.getParentCaret(e))t.push(jl(r));return t}function Nu(n){return!!n&&n.origin.isAttached()}function B2(n,e="removeEmptySlices"){if(n.isCollapsed())return n;const t="root",r="next";let i=e;const s=Cy(n,r),o=kh(s.anchor,t),a=kh(s.focus.getFlipped(),t),l=new Set,u=[];for(const p of s.iterNodeCarets(t))if(Un(p))l.add(p.origin.getKey());else if(Di(p)){const{origin:m}=p;V(m)&&!l.has(m.getKey())||u.push(m)}for(const p of u)p.remove();for(const p of s.getTextSlices()){if(!p)continue;const{origin:m}=p.caret,_=m.getTextContentSize(),C=jl(ut(m,r)),v=m.getMode();if(Math.abs(p.distance)===_&&i==="removeEmptySlices"||v==="token"&&p.distance!==0)C.remove();else if(p.distance!==0){i="removeEmptySlices";let k=p.removeTextSlice();const M=p.caret.origin;if(v==="segmented"){const $=k.origin,x=Oe($.getTextContent()).setStyle($.getStyle()).setFormat($.getFormat());C.replaceOrInsert(x),k=Ni(x,r,k.offset)}M.is(o[0].origin)&&(o[0]=k),M.is(a[0].origin)&&(a[0]=k.getFlipped())}}let c,f;for(const p of o)if(Nu(p)){c=ir(p);break}for(const p of a)if(Nu(p)){f=ir(p);break}const d=function(p,m,_){if(!p||!m)return null;const C=p.getParentAtCaret(),v=m.getParentAtCaret();if(!C||!v)return null;const k=C.getParents().reverse();k.push(C);const M=v.getParents().reverse();M.push(v);const $=Math.min(k.length,M.length);let x;for(x=0;x<$&&k[x]===M[x];x++);const O=(H,w)=>{let q;for(let S=x;S<H.length;S++){const K=H[S];if(fr(K))return;!q&&w(K)&&(q=K)}return q},N=O(k,An),I=N&&O(M,H=>_.has(H.getKey())&&An(H));return N&&I?[N,I]:null}(c,f,l);if(d){const[p,m]=d;Hn(p,"previous").splice(0,m.getChildren()),m.remove()}const h=[c,f,...o,...a].find(Nu);if(h)return $2(_s(ir(h),n.direction));se(269,JSON.stringify(o.map(p=>p.origin.__key)))}function ir(n){const e=function(i){let s=i;for(;Un(s);){const o=ko(s);if(!Un(o))break;s=o}return s}(n.getLatest()),{direction:t}=e;if(ee(e.origin))return Kr(e)?e:Ni(e.origin,t,t);const r=e.getAdjacentCaret();return Di(r)&&ee(r.origin)?Ni(r.origin,t,Rs(t)):e}function vy(n){return Kr(n)&&n.offset!==Vr(n.origin,n.direction)}function _s(n,e){return n.direction===e?n:n.getFlipped()}function Cy(n,e){return n.direction===e?n:Xr(_s(n.focus,e),_s(n.anchor,e))}function q2(n,e,t){let r=Hn(n,"next");for(let i=0;i<e;i++){const s=r.getAdjacentCaret();if(s===null)break;r=s}return _s(r,t)}var Se={},pt={},xh;function Ls(){if(xh)return pt;xh=1;function n(C,v,k){if(k===void 0&&(k=Array.prototype),C&&typeof k.find=="function")return k.find.call(C,v);for(var M=0;M<C.length;M++)if(t(C,M)){var $=C[M];if(v.call(void 0,$,M,C))return $}}function e(C,v){return v===void 0&&(v=Object),v&&typeof v.getOwnPropertyDescriptors=="function"&&(C=v.create(null,v.getOwnPropertyDescriptors(C))),v&&typeof v.freeze=="function"?v.freeze(C):C}function t(C,v){return Object.prototype.hasOwnProperty.call(C,v)}function r(C,v){if(C===null||typeof C!="object")throw new TypeError("target is not an object");for(var k in v)t(v,k)&&(C[k]=v[k]);return C}var i=e({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function s(C){return t(i,C.toLowerCase())}var o=e({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(C){return t(o,C.toLowerCase())}var l=e({script:!1,style:!1,textarea:!0,title:!0});function u(C){var v=C.toLowerCase();return t(l,v)&&!l[v]}function c(C){var v=C.toLowerCase();return t(l,v)&&l[v]}function f(C){return C===h.HTML}function d(C){return f(C)||C===h.XML_XHTML_APPLICATION}var h=e({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),p=Object.keys(h).map(function(C){return h[C]});function m(C){return p.indexOf(C)>-1}var _=e({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return pt.assign=r,pt.find=n,pt.freeze=e,pt.HTML_BOOLEAN_ATTRIBUTES=i,pt.HTML_RAW_TEXT_ELEMENTS=l,pt.HTML_VOID_ELEMENTS=o,pt.hasDefaultHTMLNamespace=d,pt.hasOwn=t,pt.isHTMLBooleanAttribute=s,pt.isHTMLRawTextElement=u,pt.isHTMLEscapableRawTextElement=c,pt.isHTMLMimeType=f,pt.isHTMLVoidElement=a,pt.isValidMimeType=m,pt.MIME_TYPE=h,pt.NAMESPACE=_,pt}var Qi={},Sh;function Ul(){if(Sh)return Qi;Sh=1;var n=Ls();function e(d,h){d.prototype=Object.create(Error.prototype,{constructor:{value:d},name:{value:d.name,enumerable:!0,writable:h}})}var t=n.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),r=Object.keys(t);function i(d){return typeof d=="number"&&d>=1&&d<=25}function s(d){return typeof d=="string"&&d.substring(d.length-t.Error.length)===t.Error}function o(d,h){i(d)?(this.name=r[d],this.message=h||""):(this.message=d,this.name=s(h)?h:t.Error),Error.captureStackTrace&&Error.captureStackTrace(this,o)}e(o,!0),Object.defineProperties(o.prototype,{code:{enumerable:!0,get:function(){var d=r.indexOf(this.name);return i(d)?d:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},l=Object.entries(a),u=0;u<l.length;u++){var c=l[u][0];o[c]=l[u][1]}function f(d,h){this.message=d,this.locator=h,Error.captureStackTrace&&Error.captureStackTrace(this,f)}return e(f),Qi.DOMException=o,Qi.DOMExceptionName=t,Qi.ExceptionCode=a,Qi.ParseError=f,Qi}var Ye={},Ee={},Th;function Ey(){if(Th)return Ee;Th=1;function n(Fe){try{typeof Fe!="function"&&(Fe=RegExp);var Je=new Fe("𝌆","u").exec("𝌆");return!!Je&&Je[0].length===2}catch{}return!1}var e=n();function t(Fe){if(Fe.source[0]!=="[")throw new Error(Fe+" can not be used with chars");return Fe.source.slice(1,Fe.source.lastIndexOf("]"))}function r(Fe,Je){if(Fe.source[0]!=="[")throw new Error("/"+Fe.source+"/ can not be used with chars_without");if(!Je||typeof Je!="string")throw new Error(JSON.stringify(Je)+" is not a valid search");if(Fe.source.indexOf(Je)===-1)throw new Error('"'+Je+'" is not is /'+Fe.source+"/");if(Je==="-"&&Fe.source.indexOf(Je)!==1)throw new Error('"'+Je+'" is not at the first postion of /'+Fe.source+"/");return new RegExp(Fe.source.replace(Je,""),e?"u":"")}function i(Fe){var Je=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(Ut){var Wt=typeof Ut=="string";if(Wt&&Je===void 0&&Ut==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return Wt?Ut:Ut.source}).join(""),e?"mu":"m")}function s(Fe){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(s,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var o="�",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;e&&(a=i("[",t(a),"\\u{10000}-\\u{10FFFF}","]"));var l=/[\x20\x09\x0D\x0A]/,u=t(l),c=i(l,"+"),f=i(l,"*"),d=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;e&&(d=i("[",t(d),"\\u{10000}-\\u{10FFFF}","]"));var h=t(d),p=i("[",h,t(/[-.0-9\xB7]/),t(/[\u0300-\u036F\u203F-\u2040]/),"]"),m=i(d,p,"*"),_=i(p,"+"),C=i("&",m,";"),v=s(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),k=s(C,"|",v),M=i("%",m,";"),$=s(i('"',s(/[^%&"]/,"|",M,"|",k),"*",'"'),"|",i("'",s(/[^%&']/,"|",M,"|",k),"*","'")),x=s('"',s(/[^<&"]/,"|",k),"*",'"',"|","'",s(/[^<&']/,"|",k),"*","'"),O=r(d,":"),N=r(p,":"),I=i(O,N,"*"),H=i(I,s(":",I),"?"),w=i("^",H,"$"),q=i("(",H,")"),S=s(/"[^"]*"|'[^']*'/),K=i(/^<\?/,"(",m,")",s(c,"(",a,"*?)"),"?",/\?>/),A=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,P=s('"',A,'*"',"|","'",r(A,"'"),"*'"),j="<!--",z="-->",J=i(j,s(r(a,"-"),"|",i("-",r(a,"-"))),"*",z),W="#PCDATA",Q=s(i(/\(/,f,W,s(f,/\|/,f,H),"*",f,/\)\*/),"|",i(/\(/,f,W,f,/\)/)),ie=/[?*+]?/,te=i(/\([^>]+\)/,ie),Z=s("EMPTY","|","ANY","|",Q,"|",te),Y="<!ELEMENT",oe=i(Y,c,s(H,"|",M),c,s(Z,"|",M),f,">"),ue=i("NOTATION",c,/\(/,f,m,s(f,/\|/,f,m),"*",f,/\)/),de=i(/\(/,f,_,s(f,/\|/,f,_),"*",f,/\)/),pe=s(ue,"|",de),ge=s(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",pe),_e=s(/#REQUIRED|#IMPLIED/,"|",s(s("#FIXED",c),"?",x)),ae=s(c,m,c,ge,c,_e),ke="<!ATTLIST",Ie=i(ke,c,m,ae,"*",f,">"),Te="about:legacy-compat",Qt=s('"'+Te+'"',"|","'"+Te+"'"),jt="SYSTEM",Ot="PUBLIC",un=s(s(jt,c,S),"|",s(Ot,c,P,c,S)),Zt=i("^",s(s(jt,c,"(?<SystemLiteralOnly>",S,")"),"|",s(Ot,c,"(?<PubidLiteral>",P,")",c,"(?<SystemLiteral>",S,")"))),cn=s(c,"NDATA",c,m),ft=s($,"|",s(un,cn,"?")),Re="<!ENTITY",rt=i(Re,c,m,c,ft,f,">"),We=s($,"|",un),Rn=i(Re,c,"%",c,m,c,We,f,">"),dn=s(rt,"|",Rn),en=i(Ot,c,P),fn=i("<!NOTATION",c,m,c,s(un,"|",en),f,">"),me=i(f,"=",f),$e=/1[.]\d+/,it=i(c,"version",me,s("'",$e,"'","|",'"',$e,'"')),ht=/[A-Za-z][-A-Za-z0-9._]*/,hn=s(c,"encoding",me,s('"',ht,'"',"|","'",ht,"'")),pn=s(c,"standalone",me,s("'",s("yes","|","no"),"'","|",'"',s("yes","|","no"),'"')),Ln=i(/^<\?xml/,it,hn,"?",pn,"?",f,/\?>/),gn="<!DOCTYPE",mn="<![CDATA[",Ct="]]>",yn=/<!\[CDATA\[/,_n=/\]\]>/,tn=i(a,"*?",_n),Jn=i(yn,tn);return Ee.chars=t,Ee.chars_without=r,Ee.detectUnicodeSupport=n,Ee.reg=i,Ee.regg=s,Ee.ABOUT_LEGACY_COMPAT=Te,Ee.ABOUT_LEGACY_COMPAT_SystemLiteral=Qt,Ee.AttlistDecl=Ie,Ee.CDATA_START=mn,Ee.CDATA_END=Ct,Ee.CDSect=Jn,Ee.Char=a,Ee.Comment=J,Ee.COMMENT_START=j,Ee.COMMENT_END=z,Ee.DOCTYPE_DECL_START=gn,Ee.elementdecl=oe,Ee.EntityDecl=dn,Ee.EntityValue=$,Ee.ExternalID=un,Ee.ExternalID_match=Zt,Ee.Name=m,Ee.NotationDecl=fn,Ee.Reference=k,Ee.PEReference=M,Ee.PI=K,Ee.PUBLIC=Ot,Ee.PubidLiteral=P,Ee.QName=H,Ee.QName_exact=w,Ee.QName_group=q,Ee.S=c,Ee.SChar_s=u,Ee.S_OPT=f,Ee.SYSTEM=jt,Ee.SystemLiteral=S,Ee.UNICODE_REPLACEMENT_CHARACTER=o,Ee.UNICODE_SUPPORT=e,Ee.XMLDecl=Ln,Ee}var Ah;function wy(){if(Ah)return Ye;Ah=1;var n=Ls(),e=n.find,t=n.hasDefaultHTMLNamespace,r=n.hasOwn,i=n.isHTMLMimeType,s=n.isHTMLRawTextElement,o=n.isHTMLVoidElement,a=n.MIME_TYPE,l=n.NAMESPACE,u=Symbol(),c=Ul(),f=c.DOMException,d=c.DOMExceptionName,h=Ey();function p(y){if(y!==u)throw new TypeError("Illegal constructor")}function m(y){return y!==""}function _(y){return y?y.split(/[\t\n\f\r ]+/).filter(m):[]}function C(y,b){return r(y,b)||(y[b]=!0),y}function v(y){if(!y)return[];var b=_(y);return Object.keys(b.reduce(C,{}))}function k(y){return function(b){return y&&y.indexOf(b)!==-1}}function M(y){if(!h.QName_exact.test(y))throw new f(f.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+y+'"')}function $(y,b){M(b),y=y||null;var D=null,U=b;if(b.indexOf(":")>=0){var re=b.split(":");D=re[0],U=re[1]}if(D!==null&&y===null)throw new f(f.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(D==="xml"&&y!==n.NAMESPACE.XML)throw new f(f.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((D==="xmlns"||b==="xmlns")&&y!==n.NAMESPACE.XMLNS)throw new f(f.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(y===n.NAMESPACE.XMLNS&&D!=="xmlns"&&b!=="xmlns")throw new f(f.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[y,D,U]}function x(y,b){for(var D in y)r(y,D)&&(b[D]=y[D])}function O(y,b){var D=y.prototype;if(!(D instanceof b)){let U=function(){};U.prototype=b.prototype,U=new U,x(D,U),y.prototype=D=U}D.constructor!=y&&(typeof y!="function"&&console.error("unknown Class:"+y),D.constructor=y)}var N={},I=N.ELEMENT_NODE=1,H=N.ATTRIBUTE_NODE=2,w=N.TEXT_NODE=3,q=N.CDATA_SECTION_NODE=4,S=N.ENTITY_REFERENCE_NODE=5,K=N.ENTITY_NODE=6,A=N.PROCESSING_INSTRUCTION_NODE=7,P=N.COMMENT_NODE=8,j=N.DOCUMENT_NODE=9,z=N.DOCUMENT_TYPE_NODE=10,J=N.DOCUMENT_FRAGMENT_NODE=11,W=N.NOTATION_NODE=12,Q=n.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function ie(y,b){if(b.length<y.length)return ie(b,y);var D=null;for(var U in y){if(y[U]!==b[U])return D;D=y[U]}return D}function te(y){return y.guid||(y.guid=Math.random()),y.guid}function Z(){}Z.prototype={length:0,item:function(y){return y>=0&&y<this.length?this[y]:null},toString:function(y){for(var b=[],D=0;D<this.length;D++)Wt(this[D],b,y);return b.join("")},filter:function(y){return Array.prototype.filter.call(this,y)},indexOf:function(y){return Array.prototype.indexOf.call(this,y)}},Z.prototype[Symbol.iterator]=function(){var y=this,b=0;return{next:function(){return b<y.length?{value:y[b++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Y(y,b){this._node=y,this._refresh=b,oe(this)}function oe(y){var b=y._node._inc||y._node.ownerDocument._inc;if(y._inc!==b){var D=y._refresh(y._node);if(xn(y,"length",D.length),!y.$$length||D.length<y.$$length)for(var U=D.length;U in y;U++)r(y,U)&&delete y[U];x(D,y),y._inc=b}}Y.prototype.item=function(y){return oe(this),this[y]||null},O(Y,Z);function ue(){}function de(y,b){for(var D=0;D<y.length;){if(y[D]===b)return D;D++}}function pe(y,b,D,U){if(U?b[de(b,U)]=D:(b[b.length]=D,b.length++),y){D.ownerElement=y;var re=y.ownerDocument;re&&(U&&jt(re,y,U),Qt(re,y,D))}}function ge(y,b,D){var U=de(b,D);if(U>=0){for(var re=b.length-1;U<=re;)b[U]=b[++U];if(b.length=re,y){var le=y.ownerDocument;le&&jt(le,y,D),D.ownerElement=null}}}ue.prototype={length:0,item:Z.prototype.item,getNamedItem:function(y){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(y=y.toLowerCase());for(var b=0;b<this.length;){var D=this[b];if(D.nodeName===y)return D;b++}return null},setNamedItem:function(y){var b=y.ownerElement;if(b&&b!==this._ownerElement)throw new f(f.INUSE_ATTRIBUTE_ERR);var D=this.getNamedItemNS(y.namespaceURI,y.localName);return D===y?y:(pe(this._ownerElement,this,y,D),D)},setNamedItemNS:function(y){return this.setNamedItem(y)},removeNamedItem:function(y){var b=this.getNamedItem(y);if(!b)throw new f(f.NOT_FOUND_ERR,y);return ge(this._ownerElement,this,b),b},removeNamedItemNS:function(y,b){var D=this.getNamedItemNS(y,b);if(!D)throw new f(f.NOT_FOUND_ERR,y?y+" : "+b:b);return ge(this._ownerElement,this,D),D},getNamedItemNS:function(y,b){y||(y=null);for(var D=0;D<this.length;){var U=this[D];if(U.localName===b&&U.namespaceURI===y)return U;D++}return null}},ue.prototype[Symbol.iterator]=function(){var y=this,b=0;return{next:function(){return b<y.length?{value:y[b++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function _e(){}_e.prototype={hasFeature:function(y,b){return!0},createDocument:function(y,b,D){var U=a.XML_APPLICATION;y===l.HTML?U=a.XML_XHTML_APPLICATION:y===l.SVG&&(U=a.XML_SVG_IMAGE);var re=new Te(u,{contentType:U});if(re.implementation=this,re.childNodes=new Z,re.doctype=D||null,D&&re.appendChild(D),b){var le=re.createElementNS(y,b);re.appendChild(le)}return re},createDocumentType:function(y,b,D,U){M(y);var re=new gn(u);return re.name=y,re.nodeName=y,re.publicId=b||"",re.systemId=D||"",re.internalSubset=U||"",re.childNodes=new Z,re},createHTMLDocument:function(y){var b=new Te(u,{contentType:a.HTML});if(b.implementation=this,b.childNodes=new Z,y!==!1){b.doctype=this.createDocumentType("html"),b.doctype.ownerDocument=b,b.appendChild(b.doctype);var D=b.createElement("html");b.appendChild(D);var U=b.createElement("head");if(D.appendChild(U),typeof y=="string"){var re=b.createElement("title");re.appendChild(b.createTextNode(y)),U.appendChild(re)}D.appendChild(b.createElement("body"))}return b}};function ae(y){p(y)}ae.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var y=this.getRootNode();return y&&y.nodeType===y.DOCUMENT_NODE},contains:function(y){if(!y)return!1;var b=y;do{if(this===b)return!0;b=y.parentNode}while(b);return!1},getRootNode:function(y){var b=this;do{if(!b.parentNode)return b;b=b.parentNode}while(b)},isEqualNode:function(y){if(!y||this.nodeType!==y.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==y.name||this.publicId!==y.publicId||this.systemId!==y.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==y.namespaceURI||this.prefix!==y.prefix||this.localName!==y.localName||this.attributes.length!==y.attributes.length)return!1;for(var b=0;b<this.attributes.length;b++){var D=this.attributes.item(b);if(!D.isEqualNode(y.getAttributeNodeNS(D.namespaceURI,D.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==y.namespaceURI||this.localName!==y.localName||this.value!==y.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==y.target||this.data!==y.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==y.data)return!1;break}if(this.childNodes.length!==y.childNodes.length)return!1;for(var b=0;b<this.childNodes.length;b++)if(!this.childNodes[b].isEqualNode(y.childNodes[b]))return!1;return!0},isSameNode:function(y){return this===y},insertBefore:function(y,b){return me(this,y,b)},replaceChild:function(y,b){me(this,y,b,fn),b&&this.removeChild(b)},removeChild:function(y){return un(this,y)},appendChild:function(y){return this.insertBefore(y,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(y){return Lr(this.ownerDocument||this,this,y)},normalize:function(){for(var y=this.firstChild;y;){var b=y.nextSibling;b&&b.nodeType==w&&y.nodeType==w?(this.removeChild(b),y.appendData(b.data)):(y.normalize(),y=b)}},isSupported:function(y,b){return this.ownerDocument.implementation.hasFeature(y,b)},lookupPrefix:function(y){for(var b=this;b;){var D=b._nsMap;if(D){for(var U in D)if(r(D,U)&&D[U]===y)return U}b=b.nodeType==H?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(y){for(var b=this;b;){var D=b._nsMap;if(D&&r(D,y))return D[y];b=b.nodeType==H?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(y){var b=this.lookupPrefix(y);return b==null},compareDocumentPosition:function(y){if(this===y)return 0;var b=y,D=this,U=null,re=null;if(b instanceof it&&(U=b,b=U.ownerElement),D instanceof it&&(re=D,D=re.ownerElement,U&&b&&D===b))for(var le=0,xe;xe=D.attributes[le];le++){if(xe===U)return Q.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Q.DOCUMENT_POSITION_PRECEDING;if(xe===re)return Q.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Q.DOCUMENT_POSITION_FOLLOWING}if(!b||!D||D.ownerDocument!==b.ownerDocument)return Q.DOCUMENT_POSITION_DISCONNECTED+Q.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(te(D.ownerDocument)>te(b.ownerDocument)?Q.DOCUMENT_POSITION_FOLLOWING:Q.DOCUMENT_POSITION_PRECEDING);if(re&&b===D)return Q.DOCUMENT_POSITION_CONTAINS+Q.DOCUMENT_POSITION_PRECEDING;if(U&&b===D)return Q.DOCUMENT_POSITION_CONTAINED_BY+Q.DOCUMENT_POSITION_FOLLOWING;for(var Ge=[],Ze=b.parentNode;Ze;){if(!re&&Ze===D)return Q.DOCUMENT_POSITION_CONTAINED_BY+Q.DOCUMENT_POSITION_FOLLOWING;Ge.push(Ze),Ze=Ze.parentNode}Ge.reverse();for(var Et=[],st=D.parentNode;st;){if(!U&&st===b)return Q.DOCUMENT_POSITION_CONTAINS+Q.DOCUMENT_POSITION_PRECEDING;Et.push(st),st=st.parentNode}Et.reverse();var Ke=ie(Ge,Et);for(var bn in Ke.childNodes){var It=Ke.childNodes[bn];if(It===D)return Q.DOCUMENT_POSITION_FOLLOWING;if(It===b)return Q.DOCUMENT_POSITION_PRECEDING;if(Et.indexOf(It)>=0)return Q.DOCUMENT_POSITION_FOLLOWING;if(Ge.indexOf(It)>=0)return Q.DOCUMENT_POSITION_PRECEDING}return 0}};function ke(y){return y=="<"&&"&lt;"||y==">"&&"&gt;"||y=="&"&&"&amp;"||y=='"'&&"&quot;"||"&#"+y.charCodeAt()+";"}x(N,ae),x(N,ae.prototype),x(Q,ae),x(Q,ae.prototype);function Ie(y,b){if(b(y))return!0;if(y=y.firstChild)do if(Ie(y,b))return!0;while(y=y.nextSibling)}function Te(y,b){p(y);var D=b||{};this.ownerDocument=this,this.contentType=D.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function Qt(y,b,D){y&&y._inc++;var U=D.namespaceURI;U===l.XMLNS&&(b._nsMap[D.prefix?D.localName:""]=D.value)}function jt(y,b,D,U){y&&y._inc++;var re=D.namespaceURI;re===l.XMLNS&&delete b._nsMap[D.prefix?D.localName:""]}function Ot(y,b,D){if(y&&y._inc){y._inc++;var U=b.childNodes;if(D&&!D.nextSibling)U[U.length++]=D;else{for(var re=b.firstChild,le=0;re;)U[le++]=re,re=re.nextSibling;U.length=le,delete U[U.length]}}}function un(y,b){if(y!==b.parentNode)throw new f(f.NOT_FOUND_ERR,"child's parent is not parent");var D=b.previousSibling,U=b.nextSibling;return D?D.nextSibling=U:y.firstChild=U,U?U.previousSibling=D:y.lastChild=D,Ot(y.ownerDocument,y),b.parentNode=null,b.previousSibling=null,b.nextSibling=null,b}function Zt(y){return y&&(y.nodeType===ae.DOCUMENT_NODE||y.nodeType===ae.DOCUMENT_FRAGMENT_NODE||y.nodeType===ae.ELEMENT_NODE)}function cn(y){return y&&(y.nodeType===ae.CDATA_SECTION_NODE||y.nodeType===ae.COMMENT_NODE||y.nodeType===ae.DOCUMENT_FRAGMENT_NODE||y.nodeType===ae.DOCUMENT_TYPE_NODE||y.nodeType===ae.ELEMENT_NODE||y.nodeType===ae.PROCESSING_INSTRUCTION_NODE||y.nodeType===ae.TEXT_NODE)}function ft(y){return y&&y.nodeType===ae.DOCUMENT_TYPE_NODE}function Re(y){return y&&y.nodeType===ae.ELEMENT_NODE}function rt(y){return y&&y.nodeType===ae.TEXT_NODE}function We(y,b){var D=y.childNodes||[];if(e(D,Re)||ft(b))return!1;var U=e(D,ft);return!(b&&U&&D.indexOf(U)>D.indexOf(b))}function Rn(y,b){var D=y.childNodes||[];function U(le){return Re(le)&&le!==b}if(e(D,U))return!1;var re=e(D,ft);return!(b&&re&&D.indexOf(re)>D.indexOf(b))}function dn(y,b,D){if(!Zt(y))throw new f(f.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+y.nodeType);if(D&&D.parentNode!==y)throw new f(f.NOT_FOUND_ERR,"child not in parent");if(!cn(b)||ft(b)&&y.nodeType!==ae.DOCUMENT_NODE)throw new f(f.HIERARCHY_REQUEST_ERR,"Unexpected node type "+b.nodeType+" for parent node type "+y.nodeType)}function en(y,b,D){var U=y.childNodes||[],re=b.childNodes||[];if(b.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var le=re.filter(Re);if(le.length>1||e(re,rt))throw new f(f.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(le.length===1&&!We(y,D))throw new f(f.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Re(b)&&!We(y,D))throw new f(f.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ft(b)){if(e(U,ft))throw new f(f.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var xe=e(U,Re);if(D&&U.indexOf(xe)<U.indexOf(D))throw new f(f.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!D&&xe)throw new f(f.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function fn(y,b,D){var U=y.childNodes||[],re=b.childNodes||[];if(b.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var le=re.filter(Re);if(le.length>1||e(re,rt))throw new f(f.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(le.length===1&&!Rn(y,D))throw new f(f.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Re(b)&&!Rn(y,D))throw new f(f.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ft(b)){if(e(U,function(Ze){return ft(Ze)&&Ze!==D}))throw new f(f.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var xe=e(U,Re);if(D&&U.indexOf(xe)<U.indexOf(D))throw new f(f.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function me(y,b,D,U){dn(y,b,D),y.nodeType===ae.DOCUMENT_NODE&&(U||en)(y,b,D);var re=b.parentNode;if(re&&re.removeChild(b),b.nodeType===J){var le=b.firstChild;if(le==null)return b;var xe=b.lastChild}else le=xe=b;var Ge=D?D.previousSibling:y.lastChild;le.previousSibling=Ge,xe.nextSibling=D,Ge?Ge.nextSibling=le:y.firstChild=le,D==null?y.lastChild=xe:D.previousSibling=xe;do le.parentNode=y;while(le!==xe&&(le=le.nextSibling));return Ot(y.ownerDocument||y,y,b),b.nodeType==J&&(b.firstChild=b.lastChild=null),b}Te.prototype={implementation:null,nodeName:"#document",nodeType:j,doctype:null,documentElement:null,_inc:1,insertBefore:function(y,b){if(y.nodeType===J){for(var D=y.firstChild;D;){var U=D.nextSibling;this.insertBefore(D,b),D=U}return y}return me(this,y,b),y.ownerDocument=this,this.documentElement===null&&y.nodeType===I&&(this.documentElement=y),y},removeChild:function(y){var b=un(this,y);return b===this.documentElement&&(this.documentElement=null),b},replaceChild:function(y,b){me(this,y,b,fn),y.ownerDocument=this,b&&this.removeChild(b),Re(y)&&(this.documentElement=y)},importNode:function(y,b){return Pn(this,y,b)},getElementById:function(y){var b=null;return Ie(this.documentElement,function(D){if(D.nodeType==I&&D.getAttribute("id")==y)return b=D,!0}),b},createElement:function(y){var b=new $e(u);b.ownerDocument=this,this.type==="html"&&(y=y.toLowerCase()),t(this.contentType)&&(b.namespaceURI=l.HTML),b.nodeName=y,b.tagName=y,b.localName=y,b.childNodes=new Z;var D=b.attributes=new ue;return D._ownerElement=b,b},createDocumentFragment:function(){var y=new _n(u);return y.ownerDocument=this,y.childNodes=new Z,y},createTextNode:function(y){var b=new hn(u);return b.ownerDocument=this,b.childNodes=new Z,b.appendData(y),b},createComment:function(y){var b=new pn(u);return b.ownerDocument=this,b.childNodes=new Z,b.appendData(y),b},createCDATASection:function(y){var b=new Ln(u);return b.ownerDocument=this,b.childNodes=new Z,b.appendData(y),b},createProcessingInstruction:function(y,b){var D=new tn(u);return D.ownerDocument=this,D.childNodes=new Z,D.nodeName=D.target=y,D.nodeValue=D.data=b,D},createAttribute:function(y){if(!h.QName_exact.test(y))throw new f(f.INVALID_CHARACTER_ERR,'invalid character in name "'+y+'"');return this.type==="html"&&(y=y.toLowerCase()),this._createAttribute(y)},_createAttribute:function(y){var b=new it(u);return b.ownerDocument=this,b.childNodes=new Z,b.name=y,b.nodeName=y,b.localName=y,b.specified=!0,b},createEntityReference:function(y){if(!h.Name.test(y))throw new f(f.INVALID_CHARACTER_ERR,'not a valid xml name "'+y+'"');if(this.type==="html")throw new f("document is an html document",d.NotSupportedError);var b=new yn(u);return b.ownerDocument=this,b.childNodes=new Z,b.nodeName=y,b},createElementNS:function(y,b){var D=$(y,b),U=new $e(u),re=U.attributes=new ue;return U.childNodes=new Z,U.ownerDocument=this,U.nodeName=b,U.tagName=b,U.namespaceURI=D[0],U.prefix=D[1],U.localName=D[2],re._ownerElement=U,U},createAttributeNS:function(y,b){var D=$(y,b),U=new it(u);return U.ownerDocument=this,U.childNodes=new Z,U.nodeName=b,U.name=b,U.specified=!0,U.namespaceURI=D[0],U.prefix=D[1],U.localName=D[2],U}},O(Te,ae);function $e(y){p(y),this._nsMap=Object.create(null)}$e.prototype={nodeType:I,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===l.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(y){return!!this.getAttributeNode(y)},getAttribute:function(y){var b=this.getAttributeNode(y);return b?b.value:null},getAttributeNode:function(y){return this._isInHTMLDocumentAndNamespace()&&(y=y.toLowerCase()),this.attributes.getNamedItem(y)},setAttribute:function(y,b){this._isInHTMLDocumentAndNamespace()&&(y=y.toLowerCase());var D=this.getAttributeNode(y);D?D.value=D.nodeValue=""+b:(D=this.ownerDocument._createAttribute(y),D.value=D.nodeValue=""+b,this.setAttributeNode(D))},removeAttribute:function(y){var b=this.getAttributeNode(y);b&&this.removeAttributeNode(b)},setAttributeNode:function(y){return this.attributes.setNamedItem(y)},setAttributeNodeNS:function(y){return this.attributes.setNamedItemNS(y)},removeAttributeNode:function(y){return this.attributes.removeNamedItem(y.nodeName)},removeAttributeNS:function(y,b){var D=this.getAttributeNodeNS(y,b);D&&this.removeAttributeNode(D)},hasAttributeNS:function(y,b){return this.getAttributeNodeNS(y,b)!=null},getAttributeNS:function(y,b){var D=this.getAttributeNodeNS(y,b);return D?D.value:null},setAttributeNS:function(y,b,D){var U=$(y,b),re=U[2],le=this.getAttributeNodeNS(y,re);le?le.value=le.nodeValue=""+D:(le=this.ownerDocument.createAttributeNS(y,b),le.value=le.nodeValue=""+D,this.setAttributeNode(le))},getAttributeNodeNS:function(y,b){return this.attributes.getNamedItemNS(y,b)},getElementsByClassName:function(y){var b=v(y);return new Y(this,function(D){var U=[];return b.length>0&&Ie(D,function(re){if(re!==D&&re.nodeType===I){var le=re.getAttribute("class");if(le){var xe=y===le;if(!xe){var Ge=v(le);xe=b.every(k(Ge))}xe&&U.push(re)}}}),U})},getElementsByTagName:function(y){var b=(this.nodeType===j?this:this.ownerDocument).type==="html",D=y.toLowerCase();return new Y(this,function(U){var re=[];return Ie(U,function(le){if(!(le===U||le.nodeType!==I))if(y==="*")re.push(le);else{var xe=le.getQualifiedName(),Ge=b&&le.namespaceURI===l.HTML?D:y;xe===Ge&&re.push(le)}}),re})},getElementsByTagNameNS:function(y,b){return new Y(this,function(D){var U=[];return Ie(D,function(re){re!==D&&re.nodeType===I&&(y==="*"||re.namespaceURI===y)&&(b==="*"||re.localName==b)&&U.push(re)}),U})}},Te.prototype.getElementsByClassName=$e.prototype.getElementsByClassName,Te.prototype.getElementsByTagName=$e.prototype.getElementsByTagName,Te.prototype.getElementsByTagNameNS=$e.prototype.getElementsByTagNameNS,O($e,ae);function it(y){p(y),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}it.prototype.nodeType=H,O(it,ae);function ht(y){p(y)}ht.prototype={data:"",substringData:function(y,b){return this.data.substring(y,y+b)},appendData:function(y){y=this.data+y,this.nodeValue=this.data=y,this.length=y.length},insertData:function(y,b){this.replaceData(y,0,b)},deleteData:function(y,b){this.replaceData(y,b,"")},replaceData:function(y,b,D){var U=this.data.substring(0,y),re=this.data.substring(y+b);D=U+D+re,this.nodeValue=this.data=D,this.length=D.length}},O(ht,ae);function hn(y){p(y)}hn.prototype={nodeName:"#text",nodeType:w,splitText:function(y){var b=this.data,D=b.substring(y);b=b.substring(0,y),this.data=this.nodeValue=b,this.length=b.length;var U=this.ownerDocument.createTextNode(D);return this.parentNode&&this.parentNode.insertBefore(U,this.nextSibling),U}},O(hn,ht);function pn(y){p(y)}pn.prototype={nodeName:"#comment",nodeType:P},O(pn,ht);function Ln(y){p(y)}Ln.prototype={nodeName:"#cdata-section",nodeType:q},O(Ln,hn);function gn(y){p(y)}gn.prototype.nodeType=z,O(gn,ae);function mn(y){p(y)}mn.prototype.nodeType=W,O(mn,ae);function Ct(y){p(y)}Ct.prototype.nodeType=K,O(Ct,ae);function yn(y){p(y)}yn.prototype.nodeType=S,O(yn,ae);function _n(y){p(y)}_n.prototype.nodeName="#document-fragment",_n.prototype.nodeType=J,O(_n,ae);function tn(y){p(y)}tn.prototype.nodeType=A,O(tn,ht);function Jn(){}Jn.prototype.serializeToString=function(y,b){return Fe.call(y,b)},ae.prototype.toString=Fe;function Fe(y){var b=[],D=this.nodeType===j&&this.documentElement||this,U=D.prefix,re=D.namespaceURI;if(re&&U==null){var U=D.lookupPrefix(re);if(U==null)var le=[{namespace:re,prefix:null}]}return Wt(this,b,y,le),b.join("")}function Je(y,b,D){var U=y.prefix||"",re=y.namespaceURI;if(!re||U==="xml"&&re===l.XML||re===l.XMLNS)return!1;for(var le=D.length;le--;){var xe=D[le];if(xe.prefix===U)return xe.namespace!==re}return!0}function Ut(y,b,D){y.push(" ",b,'="',D.replace(/[<>&"\t\n\r]/g,ke),'"')}function Wt(y,b,D,U){U||(U=[]);var re=y.nodeType===j?y:y.ownerDocument,le=re.type==="html";if(D)if(y=D(y),y){if(typeof y=="string"){b.push(y);return}}else return;switch(y.nodeType){case I:var xe=y.attributes,Ge=xe.length,tt=y.firstChild,Ze=y.tagName,Et=Ze;if(!le&&!y.prefix&&y.namespaceURI){for(var st,Ke=0;Ke<xe.length;Ke++)if(xe.item(Ke).name==="xmlns"){st=xe.item(Ke).value;break}if(!st)for(var bn=U.length-1;bn>=0;bn--){var It=U[bn];if(It.prefix===""&&It.namespace===y.namespaceURI){st=It.namespace;break}}if(st!==y.namespaceURI)for(var bn=U.length-1;bn>=0;bn--){var It=U[bn];if(It.namespace===y.namespaceURI){It.prefix&&(Et=It.prefix+":"+Ze);break}}}b.push("<",Et);for(var $n=0;$n<Ge;$n++){var nn=xe.item($n);nn.prefix=="xmlns"?U.push({prefix:nn.localName,namespace:nn.value}):nn.nodeName=="xmlns"&&U.push({prefix:"",namespace:nn.value})}for(var $n=0;$n<Ge;$n++){var nn=xe.item($n);if(Je(nn,le,U)){var Fn=nn.prefix||"",et=nn.namespaceURI;Ut(b,Fn?"xmlns:"+Fn:"xmlns",et),U.push({prefix:Fn,namespace:et})}Wt(nn,b,D,U)}if(Ze===Et&&Je(y,le,U)){var Fn=y.prefix||"",et=y.namespaceURI;Ut(b,Fn?"xmlns:"+Fn:"xmlns",et),U.push({prefix:Fn,namespace:et})}var ci=!tt;if(ci&&(le||y.namespaceURI===l.HTML)&&(ci=o(Ze)),ci)b.push("/>");else{if(b.push(">"),le&&s(Ze))for(;tt;)tt.data?b.push(tt.data):Wt(tt,b,D,U.slice()),tt=tt.nextSibling;else for(;tt;)Wt(tt,b,D,U.slice()),tt=tt.nextSibling;b.push("</",Et,">")}return;case j:case J:for(var tt=y.firstChild;tt;)Wt(tt,b,D,U.slice()),tt=tt.nextSibling;return;case H:return Ut(b,y.name,y.value);case w:return b.push(y.data.replace(/[<&>]/g,ke));case q:return b.push(h.CDATA_START,y.data,h.CDATA_END);case P:return b.push(h.COMMENT_START,y.data,h.COMMENT_END);case z:var Ki=y.publicId,Gn=y.systemId;b.push(h.DOCTYPE_DECL_START," ",y.name),Ki?(b.push(" ",h.PUBLIC," ",Ki),Gn&&Gn!=="."&&b.push(" ",Gn)):Gn&&Gn!=="."&&b.push(" ",h.SYSTEM," ",Gn),y.internalSubset&&b.push(" [",y.internalSubset,"]"),b.push(">");return;case A:return b.push("<?",y.target," ",y.data,"?>");case S:return b.push("&",y.nodeName,";");default:b.push("??",y.nodeName)}}function Pn(y,b,D){var U;switch(b.nodeType){case I:U=b.cloneNode(!1),U.ownerDocument=y;case J:break;case H:D=!0;break}if(U||(U=b.cloneNode(!1)),U.ownerDocument=y,U.parentNode=null,D)for(var re=b.firstChild;re;)U.appendChild(Pn(y,re,D)),re=re.nextSibling;return U}function Lr(y,b,D){var U=new b.constructor(u);for(var re in b)if(r(b,re)){var le=b[re];typeof le!="object"&&le!=U[re]&&(U[re]=le)}switch(b.childNodes&&(U.childNodes=new Z),U.ownerDocument=y,U.nodeType){case I:var xe=b.attributes,Ge=U.attributes=new ue,Ze=xe.length;Ge._ownerElement=U;for(var Et=0;Et<Ze;Et++)U.setAttributeNode(Lr(y,xe.item(Et),!0));break;case H:D=!0}if(D)for(var st=b.firstChild;st;)U.appendChild(Lr(y,st,D)),st=st.nextSibling;return U}function xn(y,b,D){y[b]=D}try{if(Object.defineProperty){let y=function(b){switch(b.nodeType){case I:case J:var D=[];for(b=b.firstChild;b;)b.nodeType!==7&&b.nodeType!==8&&D.push(y(b)),b=b.nextSibling;return D.join("");default:return b.nodeValue}};Object.defineProperty(Y.prototype,"length",{get:function(){return oe(this),this.$$length}}),Object.defineProperty(ae.prototype,"textContent",{get:function(){return y(this)},set:function(b){switch(this.nodeType){case I:case J:for(;this.firstChild;)this.removeChild(this.firstChild);(b||String(b))&&this.appendChild(this.ownerDocument.createTextNode(b));break;default:this.data=b,this.value=b,this.nodeValue=b}}}),xn=function(b,D,U){b["$$"+D]=U}}}catch{}return Ye._updateLiveList=oe,Ye.Attr=it,Ye.CDATASection=Ln,Ye.CharacterData=ht,Ye.Comment=pn,Ye.Document=Te,Ye.DocumentFragment=_n,Ye.DocumentType=gn,Ye.DOMImplementation=_e,Ye.Element=$e,Ye.Entity=Ct,Ye.EntityReference=yn,Ye.LiveNodeList=Y,Ye.NamedNodeMap=ue,Ye.Node=ae,Ye.NodeList=Z,Ye.Notation=mn,Ye.Text=hn,Ye.ProcessingInstruction=tn,Ye.XMLSerializer=Jn,Ye}var gi={},Mu={},Dh;function j2(){return Dh||(Dh=1,function(n){var e=Ls().freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES}(Mu)),Mu}var no={},Nh;function U2(){if(Nh)return no;Nh=1;var n=Ls(),e=Ey(),t=Ul(),r=n.isHTMLEscapableRawTextElement,i=n.isHTMLMimeType,s=n.isHTMLRawTextElement,o=n.hasOwn,a=n.NAMESPACE,l=t.ParseError,u=t.DOMException,c=0,f=1,d=2,h=3,p=4,m=5,_=6,C=7;function v(){}v.prototype={parse:function(A,P,j){var z=this.domBuilder;z.startDocument(),I(P,P=Object.create(null)),M(A,P,j,z,this.errorHandler),z.endDocument()}};var k=/&#?\w+;?/g;function M(A,P,j,z,J){var W=i(z.mimeType);A.indexOf(e.UNICODE_REPLACEMENT_CHARACTER)>=0&&J.warning("Unicode replacement character detected, source encoding issues?");function Q(me){if(me>65535){me-=65536;var $e=55296+(me>>10),it=56320+(me&1023);return String.fromCharCode($e,it)}else return String.fromCharCode(me)}function ie(me){var $e=me[me.length-1]===";"?me:me+";";if(!W&&$e!==me)return J.error("EntityRef: expecting ;"),me;var it=e.Reference.exec($e);if(!it||it[0].length!==$e.length)return J.error("entity not matching Reference production: "+me),me;var ht=$e.slice(1,-1);return o(j,ht)?j[ht]:ht.charAt(0)==="#"?Q(parseInt(ht.substring(1).replace("x","0x"))):(J.error("entity not found:"+me),me)}function te(me){if(me>_e){var $e=A.substring(_e,me).replace(k,ie);ue&&de(_e),z.characters($e,0,me-_e),_e=me}}var Z=0,Y=0,oe=/\r\n?|\n|$/g,ue=z.locator;function de(me,$e){for(;me>=Y&&($e=oe.exec(A));)Z=Y,Y=$e.index+$e[0].length,ue.lineNumber++;ue.columnNumber=me-Z+1}for(var pe=[{currentNSMap:P}],ge=[],_e=0;;){try{var ae=A.indexOf("<",_e);if(ae<0){if(!W&&ge.length>0)return J.fatalError("unclosed xml tag(s): "+ge.join(", "));if(!A.substring(_e).match(/^\s*$/)){var ke=z.doc,Ie=ke.createTextNode(A.substring(_e));if(ke.documentElement)return J.error("Extra content at the end of the document");ke.appendChild(Ie),z.currentElement=Ie}return}if(ae>_e){var Te=A.substring(_e,ae);!W&&ge.length===0&&(Te=Te.replace(new RegExp(e.S_OPT.source,"g"),""),Te&&J.error("Unexpected content outside root element: '"+Te+"'")),te(ae)}switch(A.charAt(ae+1)){case"/":var We=A.indexOf(">",ae+2),Qt=A.substring(ae+2,We>0?We:void 0);if(!Qt)return J.fatalError("end tag name missing");var jt=We>0&&e.reg("^",e.QName_group,e.S_OPT,"$").exec(Qt);if(!jt)return J.fatalError('end tag name contains invalid characters: "'+Qt+'"');if(!z.currentElement&&!z.doc.documentElement)return;var Ot=ge[ge.length-1]||z.currentElement.tagName||z.doc.documentElement.tagName||"";if(Ot!==jt[1]){var un=jt[1].toLowerCase();if(!W||Ot.toLowerCase()!==un)return J.fatalError('Opening and ending tag mismatch: "'+Ot+'" != "'+Qt+'"')}var Zt=pe.pop();ge.pop();var cn=Zt.localNSMap;if(z.endElement(Zt.uri,Zt.localName,Ot),cn)for(var ft in cn)o(cn,ft)&&z.endPrefixMapping(ft);We++;break;case"?":ue&&de(ae),We=S(A,ae,z,J);break;case"!":ue&&de(ae),We=q(A,ae,z,J,W);break;default:ue&&de(ae);var Re=new K,rt=pe[pe.length-1].currentNSMap,We=x(A,ae,Re,rt,ie,J,W),Rn=Re.length;if(Re.closed||(W&&n.isHTMLVoidElement(Re.tagName)?Re.closed=!0:ge.push(Re.tagName)),ue&&Rn){for(var dn=$(ue,{}),en=0;en<Rn;en++){var fn=Re[en];de(fn.offset),fn.locator=$(ue,{})}z.locator=dn,O(Re,z,rt)&&pe.push(Re),z.locator=ue}else O(Re,z,rt)&&pe.push(Re);W&&!Re.closed?We=N(A,We,Re.tagName,ie,z):We++}}catch(me){if(me instanceof l)throw me;if(me instanceof u)throw new l(me.name+": "+me.message,z.locator,me);J.error("element parse error: "+me),We=-1}We>_e?_e=We:te(Math.max(ae,_e)+1)}}function $(A,P){return P.lineNumber=A.lineNumber,P.columnNumber=A.columnNumber,P}function x(A,P,j,z,J,W,Q){function ie(de,pe,ge){if(o(j.attributeNames,de))return W.fatalError("Attribute "+de+" redefined");if(!Q&&pe.indexOf("<")>=0)return W.fatalError("Unescaped '<' not allowed in attributes values");j.addValue(de,pe.replace(/[\t\n\r]/g," ").replace(k,J),ge)}for(var te,Z,Y=++P,oe=c;;){var ue=A.charAt(Y);switch(ue){case"=":if(oe===f)te=A.slice(P,Y),oe=h;else if(oe===d)oe=h;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(oe===h||oe===f)if(oe===f&&(W.warning('attribute value must after "="'),te=A.slice(P,Y)),P=Y+1,Y=A.indexOf(ue,P),Y>0)Z=A.slice(P,Y),ie(te,Z,P-1),oe=m;else throw new Error("attribute value no end '"+ue+"' match");else if(oe==p)Z=A.slice(P,Y),ie(te,Z,P),W.warning('attribute "'+te+'" missed start quot('+ue+")!!"),P=Y+1,oe=m;else throw new Error('attribute value must after "="');break;case"/":switch(oe){case c:j.setTagName(A.slice(P,Y));case m:case _:case C:oe=C,j.closed=!0;case p:case f:break;case d:j.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return W.error("unexpected end of input"),oe==c&&j.setTagName(A.slice(P,Y)),Y;case">":switch(oe){case c:j.setTagName(A.slice(P,Y));case m:case _:case C:break;case p:case f:Z=A.slice(P,Y),Z.slice(-1)==="/"&&(j.closed=!0,Z=Z.slice(0,-1));case d:oe===d&&(Z=te),oe==p?(W.warning('attribute "'+Z+'" missed quot(")!'),ie(te,Z,P)):(Q||W.warning('attribute "'+Z+'" missed value!! "'+Z+'" instead!!'),ie(Z,Z,P));break;case h:if(!Q)return W.fatalError(`AttValue: ' or " expected`)}return Y;case"":ue=" ";default:if(ue<=" ")switch(oe){case c:j.setTagName(A.slice(P,Y)),oe=_;break;case f:te=A.slice(P,Y),oe=d;break;case p:var Z=A.slice(P,Y);W.warning('attribute "'+Z+'" missed quot(")!!'),ie(te,Z,P);case m:oe=_;break}else switch(oe){case d:Q||W.warning('attribute "'+te+'" missed value!! "'+te+'" instead2!!'),ie(te,te,P),P=Y,oe=f;break;case m:W.warning('attribute space is required"'+te+'"!!');case _:oe=f,P=Y;break;case h:oe=p,P=Y;break;case C:throw new Error("elements closed character '/' and '>' must be connected to")}}Y++}}function O(A,P,j){for(var z=A.tagName,J=null,oe=A.length;oe--;){var W=A[oe],Q=W.qName,ie=W.value,ue=Q.indexOf(":");if(ue>0)var te=W.prefix=Q.slice(0,ue),Z=Q.slice(ue+1),Y=te==="xmlns"&&Z;else Z=Q,te=null,Y=Q==="xmlns"&&"";W.localName=Z,Y!==!1&&(J==null&&(J=Object.create(null),I(j,j=Object.create(null))),j[Y]=J[Y]=ie,W.uri=a.XMLNS,P.startPrefixMapping(Y,ie))}for(var oe=A.length;oe--;)W=A[oe],W.prefix&&(W.prefix==="xml"&&(W.uri=a.XML),W.prefix!=="xmlns"&&(W.uri=j[W.prefix]));var ue=z.indexOf(":");ue>0?(te=A.prefix=z.slice(0,ue),Z=A.localName=z.slice(ue+1)):(te=null,Z=A.localName=z);var de=A.uri=j[te||""];if(P.startElement(de,Z,z,A),A.closed){if(P.endElement(de,Z,z),J)for(te in J)o(J,te)&&P.endPrefixMapping(te)}else return A.currentNSMap=j,A.localNSMap=J,!0}function N(A,P,j,z,J){var W=r(j);if(W||s(j)){var Q=A.indexOf("</"+j+">",P),ie=A.substring(P+1,Q);return W&&(ie=ie.replace(k,z)),J.characters(ie,0,ie.length),Q}return P+1}function I(A,P){for(var j in A)o(A,j)&&(P[j]=A[j])}function H(A,P){var j=P;function z(Y){return Y=Y||0,A.charAt(j+Y)}function J(Y){Y=Y||1,j+=Y}function W(){for(var Y=0;j<A.length;){var oe=z();if(oe!==" "&&oe!==`
`&&oe!=="	"&&oe!=="\r")return Y;Y++,J()}return-1}function Q(){return A.substring(j)}function ie(Y){return A.substring(j,j+Y.length)===Y}function te(Y){return A.substring(j,j+Y.length).toUpperCase()===Y.toUpperCase()}function Z(Y){var oe=e.reg("^",Y),ue=oe.exec(Q());return ue?(J(ue[0].length),ue[0]):null}return{char:z,getIndex:function(){return j},getMatch:Z,getSource:function(){return A},skip:J,skipBlanks:W,substringFromIndex:Q,substringStartsWith:ie,substringStartsWithCaseInsensitive:te}}function w(A,P){function j(ie,te){var Z=e.PI.exec(ie.substringFromIndex());return Z?Z[1].toLowerCase()==="xml"?te.fatalError("xml declaration is only allowed at the start of the document, but found at position "+ie.getIndex()):(ie.skip(Z[0].length),Z[0]):te.fatalError("processing instruction is not well-formed at position "+ie.getIndex())}var z=A.getSource();if(A.char()==="["){A.skip(1);for(var J=A.getIndex();A.getIndex()<z.length;){if(A.skipBlanks(),A.char()==="]"){var W=z.substring(J,A.getIndex());return A.skip(1),W}var Q=null;if(A.char()==="<"&&A.char(1)==="!")switch(A.char(2)){case"E":A.char(3)==="L"?Q=A.getMatch(e.elementdecl):A.char(3)==="N"&&(Q=A.getMatch(e.EntityDecl));break;case"A":Q=A.getMatch(e.AttlistDecl);break;case"N":Q=A.getMatch(e.NotationDecl);break;case"-":Q=A.getMatch(e.Comment);break}else if(A.char()==="<"&&A.char(1)==="?")Q=j(A,P);else if(A.char()==="%")Q=A.getMatch(e.PEReference);else return P.fatalError("Error detected in Markup declaration");if(!Q)return P.fatalError("Error in internal subset at position "+A.getIndex())}return P.fatalError("doctype internal subset is not well-formed, missing ]")}}function q(A,P,j,z,J){var W=H(A,P);switch(J?W.char(2).toUpperCase():W.char(2)){case"-":var Q=W.getMatch(e.Comment);return Q?(j.comment(Q,e.COMMENT_START.length,Q.length-e.COMMENT_START.length-e.COMMENT_END.length),W.getIndex()):z.fatalError("comment is not well-formed at position "+W.getIndex());case"[":var ie=W.getMatch(e.CDSect);return ie?!J&&!j.currentElement?z.fatalError("CDATA outside of element"):(j.startCDATA(),j.characters(ie,e.CDATA_START.length,ie.length-e.CDATA_START.length-e.CDATA_END.length),j.endCDATA(),W.getIndex()):z.fatalError("Invalid CDATA starting at position "+P);case"D":{if(j.doc&&j.doc.documentElement)return z.fatalError("Doctype not allowed inside or after documentElement at position "+W.getIndex());if(J?!W.substringStartsWithCaseInsensitive(e.DOCTYPE_DECL_START):!W.substringStartsWith(e.DOCTYPE_DECL_START))return z.fatalError("Expected "+e.DOCTYPE_DECL_START+" at position "+W.getIndex());if(W.skip(e.DOCTYPE_DECL_START.length),W.skipBlanks()<1)return z.fatalError("Expected whitespace after "+e.DOCTYPE_DECL_START+" at position "+W.getIndex());var te={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(te.name=W.getMatch(e.Name),!te.name)return z.fatalError("doctype name missing or contains unexpected characters at position "+W.getIndex());if(J&&te.name.toLowerCase()!=="html"&&z.warning("Unexpected DOCTYPE in HTML document at position "+W.getIndex()),W.skipBlanks(),W.substringStartsWith(e.PUBLIC)||W.substringStartsWith(e.SYSTEM)){var Z=e.ExternalID_match.exec(W.substringFromIndex());if(!Z)return z.fatalError("doctype external id is not well-formed at position "+W.getIndex());Z.groups.SystemLiteralOnly!==void 0?te.systemId=Z.groups.SystemLiteralOnly:(te.systemId=Z.groups.SystemLiteral,te.publicId=Z.groups.PubidLiteral),W.skip(Z[0].length)}else if(J&&W.substringStartsWithCaseInsensitive(e.SYSTEM)){if(W.skip(e.SYSTEM.length),W.skipBlanks()<1)return z.fatalError("Expected whitespace after "+e.SYSTEM+" at position "+W.getIndex());if(te.systemId=W.getMatch(e.ABOUT_LEGACY_COMPAT_SystemLiteral),!te.systemId)return z.fatalError("Expected "+e.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+e.SYSTEM+" at position "+W.getIndex())}return J&&te.systemId&&!e.ABOUT_LEGACY_COMPAT_SystemLiteral.test(te.systemId)&&z.warning("Unexpected doctype.systemId in HTML document at position "+W.getIndex()),J||(W.skipBlanks(),te.internalSubset=w(W,z)),W.skipBlanks(),W.char()!==">"?z.fatalError("doctype not terminated with > at position "+W.getIndex()):(W.skip(1),j.startDTD(te.name,te.publicId,te.systemId,te.internalSubset),j.endDTD(),W.getIndex())}default:return z.fatalError('Not well-formed XML starting with "<!" at position '+P)}}function S(A,P,j,z){var J=A.substring(P).match(e.PI);if(!J)return z.fatalError("Invalid processing instruction starting at position "+P);if(J[1].toLowerCase()==="xml"){if(P>0)return z.fatalError("processing instruction at position "+P+" is an xml declaration which is only at the start of the document");if(!e.XMLDecl.test(A.substring(P)))return z.fatalError("xml declaration is not well-formed")}return j.processingInstruction(J[1],J[2]),P+J[0].length}function K(){this.attributeNames=Object.create(null)}return K.prototype={setTagName:function(A){if(!e.QName_exact.test(A))throw new Error("invalid tagName:"+A);this.tagName=A},addValue:function(A,P,j){if(!e.QName_exact.test(A))throw new Error("invalid attribute:"+A);this.attributeNames[A]=this.length,this[this.length++]={qName:A,value:P,offset:j}},length:0,getLocalName:function(A){return this[A].localName},getLocator:function(A){return this[A].locator},getQName:function(A){return this[A].qName},getURI:function(A){return this[A].uri},getValue:function(A){return this[A].value}},no.XMLReader=v,no.parseUtils=H,no.parseDoctypeCommentOrCData=q,no}var Mh;function W2(){if(Mh)return gi;Mh=1;var n=Ls(),e=wy(),t=Ul(),r=j2(),i=U2(),s=e.DOMImplementation,o=n.hasDefaultHTMLNamespace,a=n.isHTMLMimeType,l=n.isValidMimeType,u=n.MIME_TYPE,c=n.NAMESPACE,f=t.ParseError,d=i.XMLReader;function h(x){return x.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function p(x){if(x=x||{},x.locator===void 0&&(x.locator=!0),this.assign=x.assign||n.assign,this.domHandler=x.domHandler||m,this.onError=x.onError||x.errorHandler,x.errorHandler&&typeof x.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");x.errorHandler&&x.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=x.normalizeLineEndings||h,this.locator=!!x.locator,this.xmlns=this.assign(Object.create(null),x.xmlns)}p.prototype.parseFromString=function(x,O){if(!l(O))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+O+'" is not valid.');var N=this.assign(Object.create(null),this.xmlns),I=r.XML_ENTITIES,H=N[""]||null;o(O)?(I=r.HTML_ENTITIES,H=c.HTML):O===u.XML_SVG_IMAGE&&(H=c.SVG),N[""]=H,N.xml=N.xml||c.XML;var w=new this.domHandler({mimeType:O,defaultNamespace:H,onError:this.onError}),q=this.locator?{}:void 0;this.locator&&w.setDocumentLocator(q);var S=new d;S.errorHandler=w,S.domBuilder=w;var K=!n.isHTMLMimeType(O);return K&&typeof x!="string"&&S.errorHandler.fatalError("source is not a string"),S.parse(this.normalizeLineEndings(String(x)),N,I),w.doc.documentElement||S.errorHandler.fatalError("missing root element"),w.doc};function m(x){var O=x||{};this.mimeType=O.mimeType||u.XML_APPLICATION,this.defaultNamespace=O.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=O.onError}function _(x,O){O.lineNumber=x.lineNumber,O.columnNumber=x.columnNumber}m.prototype={startDocument:function(){var x=new s;this.doc=a(this.mimeType)?x.createHTMLDocument(!1):x.createDocument(this.defaultNamespace,"")},startElement:function(x,O,N,I){var H=this.doc,w=H.createElementNS(x,N||O),q=I.length;k(this,w),this.currentElement=w,this.locator&&_(this.locator,w);for(var S=0;S<q;S++){var x=I.getURI(S),K=I.getValue(S),N=I.getQName(S),A=H.createAttributeNS(x,N);this.locator&&_(I.getLocator(S),A),A.value=A.nodeValue=K,w.setAttributeNode(A)}},endElement:function(x,O,N){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(x,O){},endPrefixMapping:function(x){},processingInstruction:function(x,O){var N=this.doc.createProcessingInstruction(x,O);this.locator&&_(this.locator,N),k(this,N)},ignorableWhitespace:function(x,O,N){},characters:function(x,O,N){if(x=v.apply(this,arguments),x){if(this.cdata)var I=this.doc.createCDATASection(x);else var I=this.doc.createTextNode(x);this.currentElement?this.currentElement.appendChild(I):/^\s*$/.test(x)&&this.doc.appendChild(I),this.locator&&_(this.locator,I)}},skippedEntity:function(x){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(x){x&&(x.lineNumber=0),this.locator=x},comment:function(x,O,N){x=v.apply(this,arguments);var I=this.doc.createComment(x);this.locator&&_(this.locator,I),k(this,I)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(x,O,N,I){var H=this.doc.implementation;if(H&&H.createDocumentType){var w=H.createDocumentType(x,O,N,I);this.locator&&_(this.locator,w),k(this,w),this.doc.doctype=w}},reportError:function(x,O){if(typeof this.onError=="function")try{this.onError(x,O,this)}catch(N){throw new f("Reporting "+x+' "'+O+'" caused '+N,this.locator)}else console.error("[xmldom "+x+"]	"+O,C(this.locator))},warning:function(x){this.reportError("warning",x)},error:function(x){this.reportError("error",x)},fatalError:function(x){throw this.reportError("fatalError",x),new f(x,this.locator)}};function C(x){if(x)return`
@#[line:`+x.lineNumber+",col:"+x.columnNumber+"]"}function v(x,O,N){return typeof x=="string"?x.substr(O,N):x.length>=O+N||O?new java.lang.String(x,O,N)+"":x}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(x){m.prototype[x]=function(){return null}});function k(x,O){x.currentElement?x.currentElement.appendChild(O):x.doc.appendChild(O)}function M(x){if(x==="error")throw"onErrorStopParsing"}function $(){throw"onWarningStopParsing"}return gi.__DOMHandler=m,gi.DOMParser=p,gi.normalizeLineEndings=h,gi.onErrorStopParsing=M,gi.onWarningStopParsing=$,gi}var Oh;function z2(){if(Oh)return Se;Oh=1;var n=Ls();Se.assign=n.assign,Se.hasDefaultHTMLNamespace=n.hasDefaultHTMLNamespace,Se.isHTMLMimeType=n.isHTMLMimeType,Se.isValidMimeType=n.isValidMimeType,Se.MIME_TYPE=n.MIME_TYPE,Se.NAMESPACE=n.NAMESPACE;var e=Ul();Se.DOMException=e.DOMException,Se.DOMExceptionName=e.DOMExceptionName,Se.ExceptionCode=e.ExceptionCode,Se.ParseError=e.ParseError;var t=wy();Se.Attr=t.Attr,Se.CDATASection=t.CDATASection,Se.CharacterData=t.CharacterData,Se.Comment=t.Comment,Se.Document=t.Document,Se.DocumentFragment=t.DocumentFragment,Se.DocumentType=t.DocumentType,Se.DOMImplementation=t.DOMImplementation,Se.Element=t.Element,Se.Entity=t.Entity,Se.EntityReference=t.EntityReference,Se.LiveNodeList=t.LiveNodeList,Se.NamedNodeMap=t.NamedNodeMap,Se.Node=t.Node,Se.NodeList=t.NodeList,Se.Notation=t.Notation,Se.ProcessingInstruction=t.ProcessingInstruction,Se.Text=t.Text,Se.XMLSerializer=t.XMLSerializer;var r=W2();return Se.DOMParser=r.DOMParser,Se.normalizeLineEndings=r.normalizeLineEndings,Se.onErrorStopParsing=r.onErrorStopParsing,Se.onWarningStopParsing=r.onWarningStopParsing,Se}var H2=z2();const Mi="USJ",Oi="3.1",K2=["type","marker","content","sid","eid","number","code","altnumber","pubnumber","caller","align","category"];function V2(n){return J2.includes(n)}const J2=["GEN","EXO","LEV","NUM","DEU","JOS","JDG","RUT","1SA","2SA","1KI","2KI","1CH","2CH","EZR","NEH","EST","JOB","PSA","PRO","ECC","SNG","ISA","JER","LAM","EZK","DAN","HOS","JOL","AMO","OBA","JON","MIC","NAM","HAB","ZEP","HAG","ZEC","MAL","MAT","MRK","LUK","JHN","ACT","ROM","1CO","2CO","GAL","EPH","PHP","COL","1TH","2TH","1TI","2TI","TIT","PHM","HEB","JAS","1PE","2PE","1JN","2JN","3JN","JUD","REV","TOB","JDT","ESG","WIS","SIR","BAR","LJE","S3Y","SUS","BEL","1MA","2MA","3MA","4MA","1ES","2ES","MAN","PS2","ODA","PSS","EZA","5EZ","6EZ","DAG","PS3","2BA","LBA","JUB","ENO","1MQ","2MQ","3MQ","REP","4BA","LAO","FRT","BAK","OTH","INT","CNC","GLO","TDX","NDX","XXA","XXB","XXC","XXD","XXE","XXF","XXG"],G2="usx";function Bd(n){const e=new H2.DOMParser().parseFromString(n,"text/xml");return Y2(e.documentElement)}function Y2(n){const[e]=n?ky(n):[{content:[]}];return e.type=Mi,e.version=Oi,e}function ky(n){const e={};let t=n.tagName,r,i,s="append";if(["row","cell"].includes(t)&&(t="table:"+t),n.attributes)for(const l of Array.from(n.attributes))e[l.name]=l.value;e.style&&(r=e.style,delete e.style),e.vid&&delete e.vid,e.status&&delete e.status;let o={type:t};r&&(o.marker=r),o={...o,...e},n.firstChild&&n.firstChild.nodeType===n.firstChild.TEXT_NODE&&n.firstChild.nodeValue&&Ih(n.firstChild.nodeValue)!==""&&(i=n.firstChild.nodeValue);const a=Array.from(n.childNodes);o.content=[],i&&o.content.push(i);for(const l of a){if(l.tagName===void 0)continue;const[u,c]=ky(l);switch(c){case"append":o.content.push(u);break;case"merge":o.content=o.content.concat(u);break}l.nextSibling&&l.nextSibling.nodeType===l.nextSibling.TEXT_NODE&&l.nextSibling.nodeValue&&(Ih(l.nextSibling.nodeValue)!==""||l.nextSibling.nodeValue===" ")&&o.content.push(l.nextSibling.nodeValue)}return o.content.length===0&&o.type!==G2&&delete o.content,"eid"in o&&["verse","chapter"].includes(t)&&(s="ignore"),[o,s]}function Ih(n){return n.replace(/(^[ \t\n\r\f\v]+)|([ \t\n\r\f\v]+$)/g,"")}const bc="$",xy=".content[";function X2(n){const e=n.split(xy);if(e.shift()!==bc)throw new Error(`indexesFromJsonPath: jsonPath didn't start with '${bc}'`);return e.map(t=>parseInt(t,10))}function Q2(n){return n.reduce((e,t)=>`${e}${xy}${t}]`,bc)}const Z2=new Map;function Rh(n){let e=n;for(;e!=null;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function Lh(n){const e=n.parentNode;if(e==null)throw new Error("Should never happen");return[e,Array.from(e.childNodes).indexOf(n)]}function eC(n,e,t,r,i){const s=e.getKey(),o=r.getKey(),a=document.createRange();let l=n.getElementByKey(s),u=n.getElementByKey(o),c=t,f=i;if(ee(e)&&(l=Rh(l)),ee(r)&&(u=Rh(u)),e===void 0||r===void 0||l===null||u===null)return null;l.nodeName==="BR"&&([l,c]=Lh(l)),u.nodeName==="BR"&&([u,f]=Lh(u));const d=l.firstChild;l===u&&d!=null&&d.nodeName==="BR"&&c===0&&f===0&&(f=1);try{a.setStart(l,c),a.setEnd(u,f)}catch{return null}return!a.collapsed||c===f&&s===o||(a.setStart(u,f),a.setEnd(l,c)),a}function tC(n,e){const t=n.getRootElement();if(t===null)return[];const r=t.getBoundingClientRect(),i=getComputedStyle(t),s=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),o=Array.from(e.getClientRects());let a,l=o.length;o.sort((u,c)=>{const f=u.top-c.top;return Math.abs(f)<=3?u.left-c.left:f});for(let u=0;u<l;u++){const c=o[u],f=a&&a.top<=c.top&&a.top+a.height>c.top&&a.left+a.width>c.left,d=c.width+s===r.width;f||d?(o.splice(u--,1),l--):a=c}return o}function nC(n){const e={};if(!n)return e;const t=n.split(";");for(const r of t)if(r!==""){const[i,s]=r.split(/:([^]+)/);i&&s&&(e[i.trim()]=s.trim())}return e}function Sy(n,e){const t=n.getStartEndPoints();if(e.isSelected(n)&&!Cr(e)&&t!==null){const[r,i]=t,s=n.isBackward(),o=r.getNode(),a=i.getNode(),l=e.is(o),u=e.is(a);if(l||u){const[c,f]=ac(n),d=o.is(a),h=e.is(s?a:o),p=e.is(s?o:a);let m,_=0;d?(_=c>f?f:c,m=c>f?c:f):h?(_=s?f:c,m=void 0):p&&(_=0,m=s?c:f),e.__text=e.__text.slice(_,m)}}return e}function rC(n){const e=n.getStyle(),t=nC(e);Z2.set(e,t)}function iC(n,e){const t=n.getFormatType(),r=n.getIndent();t!==e.getFormatType()&&e.setFormat(t),r!==e.getIndent()&&e.setIndent(r)}function sC(n,e,t=iC){if(n===null)return;const r=n.getStartEndPoints(),i=new Map;let s=null;if(r){const[o,a]=r;s=Fo(),s.anchor.set(o.key,o.offset,o.type),s.focus.set(a.key,a.offset,a.type);const l=Ou(o.getNode(),An),u=Ou(a.getNode(),An);V(l)&&i.set(l.getKey(),l),V(u)&&i.set(u.getKey(),u)}for(const o of n.getNodes())if(V(o)&&An(o))i.set(o.getKey(),o);else if(r===null){const a=Ou(o,An);V(a)&&i.set(a.getKey(),a)}for(const[o,a]of i){const l=e();t(a,l),a.replace(l,!0),s&&(o===s.anchor.key&&s.anchor.set(l.getKey(),s.anchor.offset,s.anchor.type),o===s.focus.key&&s.focus.set(l.getKey(),s.focus.offset,s.focus.type))}s&&n.is(ne())&&Mt(s)}function Ty(n){const e=n.anchor.getNode(),t=St(e)?e:e.getParentOrThrow(),r=Bl().getElementByKey(t.getKey());if(r===null)return!1;const i=r.ownerDocument.defaultView;return i===null?!1:i.getComputedStyle(r).writingMode==="vertical-rl"}function dl(n,e){let t=Ty(n)?!e:e;Ay(n)&&(t=!t);const r=Dr(n.focus,t?"previous":"next");if(vy(r))return!1;for(const i of Fd(r)){if(Un(i))return!i.origin.isInline();if(!V(i.origin)){if(Le(i.origin))return!0;break}}return!1}function oC(n,e,t,r){n.modify(e?"extend":"move",t,r)}function Ay(n){const e=n.anchor.getNode();return(St(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}function fl(n,e,t){const r=Ay(n);let i;i=Ty(n)||r?!t:t,oC(n,e,i,"character")}function Ou(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function aC(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const jo=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,lC=jo&&"documentMode"in document?document.documentMode:null,uC=jo&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),cC=jo&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!jo||!("InputEvent"in window)||lC)&&"getTargetRanges"in new window.InputEvent("input");function Dy(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}function _t(...n){return()=>{for(let e=n.length-1;e>=0;e--)n[e]();n.length=0}}const dC=jo,vc=uC,fC=cC;function Pt(n,...e){const t=Dy(...e);t.length>0&&n.classList.add(...t)}function wi(n,...e){const t=Dy(...e);t.length>0&&n.classList.remove(...t)}function qd(n,e){return Array.from(hC(n))}function hC(n,e){return pC("next",n)}function pC(n,e,t){const r=De(),i=e||r,s=V(i)?Hn(i,n):ut(i,n),o=gC(i),a=function(u,c){const f=$h(ut(u,c));return f&&f[0]}(i,n);let l=o;return ql({hasNext:u=>u!==null,initial:s,map:u=>({depth:l,node:u.origin}),step:u=>{if(u.isSameNodeCaret(a))return null;Un(u)&&l++;const c=$h(u);return!c||c[0].isSameNodeCaret(a)?null:(l+=c[1],c[0])}})}function gC(n){let e=-1;for(let t=n;t!==null;t=t.getParent())e++;return e}function mC(n){const e=Qr(n,t=>V(t)&&!t.isInline());return V(e)||aC(4,n.__key),e}const Qr=(n,e)=>{let t=n;for(;t!==De()&&t!=null;){if(e(t))return t;t=t.getParent()}return null};function Ny(n,e,t,r){const i=s=>s instanceof e;return n.registerNodeTransform(e,s=>{const o=(a=>{const l=a.getChildren();for(let f=0;f<l.length;f++){const d=l[f];if(i(d))return null}let u=a,c=a;for(;u!==null;)if(c=u,u=u.getParent(),i(u))return{child:c,parent:u};return null})(s);if(o!==null){const{child:a,parent:l}=o;if(a.is(s)){r(l,s);const u=a.getNextSiblings(),c=u.length;if(l.insertAfter(a),c!==0){const f=t(l);a.insertAfter(f);for(let d=0;d<c;d++)f.append(u[d])}l.canBeEmpty()||l.getChildrenSize()!==0||l.remove()}}})}function xr(n,e){return n!==null&&Object.getPrototypeOf(n).constructor.name===e.name}let Iu=!(fC||!dC)&&void 0;function yC(n){let e=1;if(function(){if(Iu===void 0){const t=document.createElement("div");t.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(t);const r=t.getBoundingClientRect();t.style.setProperty("zoom","2"),Iu=t.getBoundingClientRect().width===r.width,document.body.removeChild(t)}return Iu}())for(;n;)e*=Number(window.getComputedStyle(n).getPropertyValue("zoom")),n=n.parentElement;return e}function My(n,e){const t=[],r=Array.from(n).reverse();for(let i=r.pop();i!==void 0;i=r.pop())if(e(i))t.push(i);else if(V(i))for(const s of _C(i))r.push(s);return t}function _C(n){return bC(Hn(n,"previous"))}function bC(n){return ql({hasNext:Di,initial:n.getAdjacentCaret(),map:e=>e.origin.getLatest(),step:e=>e.getAdjacentCaret()})}function Ph(n){jl(ut(n,"next")).splice(1,n.getChildren())}function $h(n,e="root"){let t=0,r=n,i=ko(r);for(;i===null;){if(t--,i=r.getParentCaret(e),!i)return null;r=i,i=ko(r)}return i&&[i,t]}function vC(n,e){const t=e.body?e.body.childNodes:[];let r=[];const i=[];for(let s=0;s<t.length;s++){const o=t[s];if(!Ry.has(o.nodeName)){const a=Ly(o,n,i,!1);a!==null&&(r=r.concat(a))}}return function(s){for(const o of s)o.getNextSibling()instanceof wd&&o.insertAfter(Ai());for(const o of s){const a=o.getChildren();for(const l of a)o.insertBefore(l);o.remove()}}(i),r}function Oy(n,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const t=document.createElement("div"),r=De().getChildren();for(let i=0;i<r.length;i++)Iy(n,r[i],t,e);return t.innerHTML}function Iy(n,e,t,r=null){let i=r===null||e.isSelected(r);const s=V(e)&&e.excludeFromCopy("html");let o=e;if(r!==null){let h=Rd(e);h=ee(h)&&r!==null?Sy(r,h):h,o=h}const a=V(o)?o.getChildren():[],l=Sd(n,o.getType());let u;u=l&&l.exportDOM!==void 0?l.exportDOM(n,o):o.exportDOM(n);const{element:c,after:f}=u;if(!c)return!1;const d=document.createDocumentFragment();for(let h=0;h<a.length;h++){const p=a[h],m=Iy(n,p,d,r);!i&&V(e)&&m&&e.extractWithChild(p,r,"html")&&(i=!0)}if(i&&!s){if((qe(c)||pc(c))&&c.append(d),t.append(c),f){const h=f.call(o,c);h&&(pc(c)?c.replaceChildren(h):c.replaceWith(h))}}else t.append(d);return i}const Ry=new Set(["STYLE","SCRIPT"]);function Ly(n,e,t,r,i=new Map,s){let o=[];if(Ry.has(n.nodeName))return o;let a=null;const l=function(p,m){const{nodeName:_}=p,C=m._htmlConversions.get(_.toLowerCase());let v=null;if(C!==void 0)for(const k of C){const M=k(p);M!==null&&(v===null||(v.priority||0)<=(M.priority||0))&&(v=M)}return v!==null?v.conversion:null}(n,e),u=l?l(n):null;let c=null;if(u!==null){c=u.after;const p=u.node;if(a=Array.isArray(p)?p[p.length-1]:p,a!==null){for(const[,m]of i)if(a=m(a,s),!a)break;a&&o.push(...Array.isArray(p)?p:[a])}u.forChild!=null&&i.set(n.nodeName,u.forChild)}const f=n.childNodes;let d=[];const h=(a==null||!fr(a))&&(a!=null&&lc(a)||r);for(let p=0;p<f.length;p++)d.push(...Ly(f[p],e,t,h,new Map(i),a));return c!=null&&(d=c(d)),ll(n)&&(d=CC(n,d,h?()=>{const p=new wd;return t.push(p),p}:kn)),a==null?d.length>0?o=o.concat(d):ll(n)&&function(p){return p.nextSibling==null||p.previousSibling==null?!1:gc(p.nextSibling)&&gc(p.previousSibling)}(n)&&(o=o.concat(Ai())):V(a)&&a.append(...d),o}function CC(n,e,t){const r=n.style.textAlign,i=[];let s=[];for(let o=0;o<e.length;o++){const a=e[o];if(lc(a))r&&!a.getFormat()&&a.setFormat(r),i.push(a);else if(s.push(a),o===e.length-1||o<e.length-1&&lc(e[o+1])){const l=t();l.setFormat(r),l.append(...s),i.push(l),s=[]}}return i}const EC=new Set(["http:","https:","mailto:","sms:","tel:"]);let Py=class $y extends qt{static getType(){return"link"}static clone(e){return new $y(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",t={},r){super(r);const{target:i=null,rel:s=null,title:o=null}=t;this.__url=e,this.__target=i,this.__rel=s,this.__title=o}createDOM(e){const t=document.createElement("a");return this.updateLinkDOM(null,t,e),Pt(t,e.theme.link),t}updateLinkDOM(e,t,r){if(gy(t)){e&&e.__url===this.__url||(t.href=this.sanitizeUrl(this.__url));for(const i of["target","rel","title"]){const s=`__${i}`,o=this[s];e&&e[s]===o||(o?t[i]=o:t.removeAttribute(i))}}}updateDOM(e,t,r){return this.updateLinkDOM(e,t,r),!1}static importDOM(){return{a:e=>({conversion:wC,priority:1})}}static importJSON(e){return Cc().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=Fh(e);try{const t=new URL(Fh(e));if(!EC.has(t.protocol))return"about:blank"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){const t=this.getWritable();return t.__url=e,t}getTarget(){return this.getLatest().__target}setTarget(e){const t=this.getWritable();return t.__target=e,t}getRel(){return this.getLatest().__rel}setRel(e){const t=this.getWritable();return t.__rel=e,t}getTitle(){return this.getLatest().__title}setTitle(e){const t=this.getWritable();return t.__title=e,t}insertNewAfter(e,t=!0){const r=Cc(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,t),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,r){if(!G(t))return!1;const i=t.anchor.getNode(),s=t.focus.getNode();return this.isParentOf(i)&&this.isParentOf(s)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function wC(n){let e=null;if(gy(n)){const t=n.textContent;(t!==null&&t!==""||n.children.length>0)&&(e=Cc(n.getAttribute("href")||"",{rel:n.getAttribute("rel"),target:n.getAttribute("target"),title:n.getAttribute("title")}))}return{node:e}}function Cc(n="",e){return Ue(new Py(n,e))}function kC(n){return n instanceof Py}const xC=/^\+?[0-9\s()-]{5,}$/;function Fh(n){return n.match(/^[a-z][a-z0-9+.-]*:/i)||n.match(/^[/#.]/)?n:n.includes("@")?`mailto:${n}`:xC.test(n)?`tel:${n}`:`https://${n}`}const Fy=[];let By=class qy extends qt{static getType(){return"mark"}static clone(e){return new qy(e.__ids,e.__key)}static importDOM(){return null}static importJSON(e){return Bh().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIDs(e.ids)}exportJSON(){return{...super.exportJSON(),ids:this.getIDs()}}constructor(e=Fy,t){super(t),this.__ids=e}createDOM(e){const t=document.createElement("mark");return Pt(t,e.theme.mark),this.__ids.length>1&&Pt(t,e.theme.markOverlap),t}updateDOM(e,t,r){const i=e.__ids,s=this.__ids,o=i.length,a=s.length,l=r.theme.markOverlap;return o!==a&&(o===1?a===2&&Pt(t,l):a===1&&wi(t,l)),!1}hasID(e){return this.getIDs().includes(e)}getIDs(){return Array.from(this.getLatest().__ids)}setIDs(e){const t=this.getWritable();return t.__ids=e,t}addID(e){const t=this.getWritable();return t.__ids.includes(e)?t:t.setIDs([...t.__ids,e])}deleteID(e){const t=this.getWritable(),r=t.__ids.indexOf(e);if(r===-1)return t;const i=Array.from(t.__ids);return i.splice(r,1),t.setIDs(i)}insertNewAfter(e,t=!0){const r=Bh(this.__ids);return this.insertAfter(r,t),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,r){if(!G(t)||r==="html")return!1;const i=t.anchor,s=t.focus,o=i.getNode(),a=s.getNode(),l=t.isBackward()?i.offset-s.offset:s.offset-i.offset;return this.isParentOf(o)&&this.isParentOf(a)&&this.getTextContent().length===l}excludeFromCopy(e){return e!=="clone"}};function Bh(n=Fy){return Ue(new By(n))}function SC(n){return n instanceof By}function hl(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function jy(n,e=ne()){return e==null&&hl(166),G(e)&&e.isCollapsed()||e.getNodes().length===0?"":Oy(n,e)}function TC(n,e=ne()){return e==null&&hl(166),G(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(AC(n,e))}function qh(n,e){const t=n.getData("text/plain")||n.getData("text/uri-list");t!=null&&e.insertRawText(t)}function jh(n,e,t){const r=n.getData("application/x-lexical-editor");if(r)try{const a=JSON.parse(r);if(a.namespace===t._config.namespace&&Array.isArray(a.nodes))return Uh(t,DC(a.nodes),e)}catch{}const i=n.getData("text/html"),s=n.getData("text/plain");if(i&&s!==i)try{const a=new DOMParser().parseFromString(function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(l):l}(i),"text/html");return Uh(t,vC(t,a),e)}catch{}const o=s||n.getData("text/uri-list");if(o!=null)if(G(e)){const a=o.split(/(\r?\n|\t)/);a[a.length-1]===""&&a.pop();for(let l=0;l<a.length;l++){const u=ne();if(G(u)){const c=a[l];c===`
`||c===`\r
`?u.insertParagraph():c==="	"?u.insertNodes([Po()]):u.insertText(c)}}}else e.insertRawText(o)}function Uh(n,e,t){n.dispatchCommand(Fv,{nodes:e,selection:t})||(t.insertNodes(e),function(r){if(G(r)&&r.isCollapsed()){const i=r.anchor;let s=null;const o=Dr(i,"previous");if(o)if(Kr(o))s=o.origin;else{const a=Xr(o,Hn(De(),"next").getFlipped());for(const l of a){if(ee(l.origin)){s=l.origin;break}if(V(l.origin)&&!l.origin.isInline())break}}if(s&&ee(s)){const a=s.getFormat(),l=s.getStyle();r.format===a&&r.style===l||(r.format=a,r.style=l,r.dirty=!0)}}}(t))}function Uy(n,e,t,r=[]){let i=e===null||t.isSelected(e);const s=V(t)&&t.excludeFromCopy("html");let o=t;if(e!==null){let u=Rd(t);u=ee(u)&&e!==null?Sy(e,u):u,o=u}const a=V(o)?o.getChildren():[],l=function(u){const c=u.exportJSON(),f=u.constructor;if(c.type!==f.getType()&&hl(58,f.name),V(u)){const d=c.children;Array.isArray(d)||hl(59,f.name)}return c}(o);if(ee(o)){const u=o.__text;u.length>0?l.text=u:i=!1}for(let u=0;u<a.length;u++){const c=a[u],f=Uy(n,e,c,l.children);!i&&V(t)&&f&&t.extractWithChild(c,e,"clone")&&(i=!0)}if(i&&!s)r.push(l);else if(Array.isArray(l.children))for(let u=0;u<l.children.length;u++){const c=l.children[u];r.push(c)}return i}function AC(n,e){const t=[],r=De().getChildren();for(let i=0;i<r.length;i++)Uy(n,e,r[i],t);return{namespace:n._config.namespace,nodes:t}}function DC(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t],i=Gm(r);ee(i)&&rC(i),e.push(i)}return e}let Zi=null;async function Wh(n,e,t){if(Zi!==null)return!1;if(e!==null)return new Promise((u,c)=>{n.update(()=>{u(zh(n,e,t))})});const r=n.getRootElement(),i=n._window||window,s=window.document,o=zn(i);if(r===null||o===null)return!1;const a=s.createElement("span");a.style.cssText="position: fixed; top: -1000px;",a.append(s.createTextNode("#")),r.append(a);const l=new Range;return l.setStart(a,0),l.setEnd(a,1),o.removeAllRanges(),o.addRange(l),new Promise((u,c)=>{const f=n.registerCommand(qi,d=>(xr(d,ClipboardEvent)&&(f(),Zi!==null&&(window.clearTimeout(Zi),Zi=null),u(zh(n,d,t))),!0),go);Zi=window.setTimeout(()=>{f(),Zi=null,u(!1)},50),s.execCommand("copy"),a.remove()})}function zh(n,e,t){if(t===void 0){const i=zn(n._window);if(!i)return!1;const s=i.anchorNode,o=i.focusNode;if(s!==null&&o!==null&&!Bo(n,s,o))return!1;const a=ne();if(a===null)return!1;t=MC(a)}e.preventDefault();const r=e.clipboardData;return r!==null&&(OC(r,t),!0)}const NC=[["text/html",jy],["application/x-lexical-editor",TC]];function MC(n=ne()){const e={"text/plain":n?n.getTextContent():""};if(n){const t=Bl();for(const[r,i]of NC){const s=i(t,n);s!==null&&(e[r]=s)}}return e}function OC(n,e){for(const t in e){const r=e[t];r!==void 0&&n.setData(t,r)}}const jd=/^(\d+(?:\.\d+)?)px$/,as={BOTH:3,NO_STATUS:0,ROW:1};let Ud=class Wy extends qt{static getType(){return"tablecell"}static clone(e){return new Wy(e.__headerState,e.__colSpan,e.__width,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__rowSpan=e.__rowSpan,this.__backgroundColor=e.__backgroundColor,this.__verticalAlign=e.__verticalAlign}static importDOM(){return{td:e=>({conversion:Hh,priority:0}),th:e=>({conversion:Hh,priority:0})}}static importJSON(e){return zy().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHeaderStyles(e.headerState).setColSpan(e.colSpan||1).setRowSpan(e.rowSpan||1).setWidth(e.width||void 0).setBackgroundColor(e.backgroundColor||null).setVerticalAlign(e.verticalAlign||void 0)}constructor(e=as.NO_STATUS,t=1,r,i){super(i),this.__colSpan=t,this.__rowSpan=1,this.__headerState=e,this.__width=r,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(e){const t=document.createElement(this.getTag());return this.__width&&(t.style.width=`${this.__width}px`),this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(t.style.backgroundColor=this.__backgroundColor),Ec(this.__verticalAlign)&&(t.style.verticalAlign=this.__verticalAlign),Pt(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){const t=super.exportDOM(e);if(qe(t.element)){const r=t.element;r.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),r.style.border="1px solid black",this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),r.style.width=`${this.getWidth()||75}px`,r.style.verticalAlign=this.getVerticalAlign()||"top",r.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(r.style.backgroundColor="#f2f3f5")}return t}exportJSON(){return{...super.exportJSON(),...Ec(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(e){const t=this.getWritable();return t.__colSpan=e,t}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(e){const t=this.getWritable();return t.__rowSpan=e,t}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e,t=as.BOTH){const r=this.getWritable();return r.__headerState=e&t|r.__headerState&~t,r}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){const t=this.getWritable();return t.__width=e,t}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){const t=this.getWritable();return t.__backgroundColor=e,t}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(e){const t=this.getWritable();return t.__verticalAlign=e||void 0,t}toggleHeaderStyle(e){const t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==as.NO_STATUS}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor||e.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}};function Ec(n){return n==="middle"||n==="bottom"}function Hh(n){const e=n,t=n.nodeName.toLowerCase();let r;jd.test(e.style.width)&&(r=parseFloat(e.style.width));const i=zy(t==="th"?as.ROW:as.NO_STATUS,e.colSpan,r);i.__rowSpan=e.rowSpan;const s=e.style.backgroundColor;s!==""&&(i.__backgroundColor=s);const o=e.style.verticalAlign;Ec(o)&&(i.__verticalAlign=o);const a=e.style,l=(a&&a.textDecoration||"").split(" "),u=a.fontWeight==="700"||a.fontWeight==="bold",c=l.includes("line-through"),f=a.fontStyle==="italic",d=l.includes("underline");return{after:h=>{const p=[];let m=null;const _=()=>{if(m){const C=m.getFirstChild();bi(C)&&m.getChildrenSize()===1&&C.remove()}};for(const C of h)C2(C)||ee(C)||bi(C)?(ee(C)&&(u&&C.toggleFormat("bold"),c&&C.toggleFormat("strikethrough"),f&&C.toggleFormat("italic"),d&&C.toggleFormat("underline")),m?m.append(C):(m=kn().append(C),p.push(m))):(p.push(C),_(),m=null);return _(),p.length===0&&p.push(kn()),p},node:i}}function zy(n=as.NO_STATUS,e=1,t){return Ue(new Ud(n,e,t))}function wn(n){return n instanceof Ud}function lt(n,...e){const t=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",n);for(const i of e)r.append("v",i);throw t.search=r.toString(),Error(`Minified Lexical error #${n}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let Hy=class Ky extends qt{static getType(){return"tablerow"}static clone(e){return new Ky(e.__height,e.__key)}static importDOM(){return{tr:e=>({conversion:IC,priority:0})}}static importJSON(e){return Vy().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHeight(e.height)}constructor(e,t){super(t),this.__height=e}exportJSON(){const e=this.getHeight();return{...super.exportJSON(),...e===void 0?void 0:{height:e}}}createDOM(e){const t=document.createElement("tr");return this.__height&&(t.style.height=`${this.__height}px`),Pt(t,e.theme.tableRow),t}extractWithChild(e,t,r){return r==="html"}isShadowRoot(){return!0}setHeight(e){const t=this.getWritable();return t.__height=e,t}getHeight(){return this.getLatest().__height}updateDOM(e){return e.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}};function IC(n){const e=n;let t;return jd.test(e.style.height)&&(t=parseFloat(e.style.height)),{after:r=>My(r,wn),node:Vy(t)}}function Vy(n){return Ue(new Hy(n))}function Uo(n){return n instanceof Hy}const Jy=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,RC=Jy&&"documentMode"in document?document.documentMode:null;Jy&&"InputEvent"in window&&!RC&&new window.InputEvent("input");function LC(n,e,t){const[r,i,s]=Gy(n,e,t);return i===null&&lt(207),s===null&&lt(208),[r,i,s]}function Gy(n,e,t){const r=[];let i=null,s=null;function o(l){let u=r[l];return u===void 0&&(r[l]=u=[]),u}const a=n.getChildren();for(let l=0;l<a.length;l++){const u=a[l];Uo(u)||lt(209);const c=o(l);for(let f=u.getFirstChild(),d=0;f!=null;f=f.getNextSibling()){for(wn(f)||lt(147);c[d]!==void 0;)d++;const h={cell:f,startColumn:d,startRow:l},{__rowSpan:p,__colSpan:m}=f;for(let _=0;_<p&&!(l+_>=a.length);_++){const C=o(l+_);for(let v=0;v<m;v++)C[d+v]=h}e!==null&&i===null&&e.is(f)&&(i=h),t!==null&&s===null&&t.is(f)&&(s=h)}}return[r,i,s]}function PC(n){let e;if(n instanceof Ud)e=n;else if("__type"in n){const i=Qr(n,wn);wn(i)||lt(148),e=i}else{const i=Qr(n.getNode(),wn);wn(i)||lt(148),e=i}const t=e.getParent();Uo(t)||lt(149);const r=t.getParent();return t_(r)||lt(210),[e,t,r]}function $C(n,e,t){let r,i=Math.min(e.startColumn,t.startColumn),s=Math.min(e.startRow,t.startRow),o=Math.max(e.startColumn+e.cell.__colSpan-1,t.startColumn+t.cell.__colSpan-1),a=Math.max(e.startRow+e.cell.__rowSpan-1,t.startRow+t.cell.__rowSpan-1);do{r=!1;for(let l=0;l<n.length;l++)for(let u=0;u<n[0].length;u++){const c=n[l][u];if(!c)continue;const f=c.startColumn+c.cell.__colSpan-1,d=c.startRow+c.cell.__rowSpan-1,h=c.startColumn<=o&&f>=i,p=c.startRow<=a&&d>=s;if(h&&p){const m=Math.min(i,c.startColumn),_=Math.max(o,f),C=Math.min(s,c.startRow),v=Math.max(a,d);m===i&&_===o&&C===s&&v===a||(i=m,o=_,s=C,a=v,r=!0)}}}while(r);return{maxColumn:o,maxRow:a,minColumn:i,minRow:s}}function Kh(n){const[e,,t]=PC(n),r=t.getChildren(),i=r.length,s=r[0].getChildren().length,o=new Array(i);for(let a=0;a<i;a++)o[a]=new Array(s);for(let a=0;a<i;a++){const l=r[a].getChildren();let u=0;for(let c=0;c<l.length;c++){for(;o[a][u];)u++;const f=l[c],d=f.__rowSpan||1,h=f.__colSpan||1;for(let p=0;p<d;p++)for(let m=0;m<h;m++)o[a+p][u+m]=f;if(e===f)return{colSpan:h,columnIndex:u,rowIndex:a,rowSpan:d};u+=h}}return null}function Vh(n){const[[e,t,r,i],[s,o,a,l]]=["anchor","focus"].map(u=>{const c=n[u].getNode(),f=Qr(c,wn);wn(f)||lt(238,u,c.getKey(),c.getType());const d=f.getParent();Uo(d)||lt(239,u);const h=d.getParent();return t_(h)||lt(240,u),[c,f,d,h]});return i.is(l)||lt(241),{anchorCell:t,anchorNode:e,anchorRow:r,anchorTable:i,focusCell:o,focusNode:s,focusRow:a,focusTable:l}}let FC=class Yy{constructor(e,t,r){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e}getStartEndPoints(){return[this.anchor,this.focus]}isValid(){return this.tableKey!=="root"&&this.anchor.key!=="root"&&this.anchor.type==="element"&&this.focus.key!=="root"&&this.focus.type==="element"}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return Xy(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)}set(e,t,r){this.dirty=this.dirty||e!==this.tableKey||t!==this.anchor.key||r!==this.focus.key,this.tableKey=e,this.anchor.key=t,this.focus.key=r,this._cachedNodes=null}clone(){return new Yy(this.tableKey,an(this.anchor.key,this.anchor.offset,this.anchor.type),an(this.focus.key,this.focus.offset,this.focus.type))}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(e){}insertText(){}hasFormat(e){let t=0;this.getNodes().filter(wn).forEach(i=>{const s=i.getFirstChild();kd(s)&&(t|=s.getTextFormat())});const r=Jr[e];return!!(t&r)}insertNodes(e){const t=this.focus.getNode();V(t)||lt(151),bo(t.select(0,t.getChildrenSize())).insertNodes(e)}getShape(){const{anchorCell:e,focusCell:t}=Vh(this),r=Kh(e);r===null&&lt(153);const i=Kh(t);i===null&&lt(155);const s=Math.min(r.columnIndex,i.columnIndex),o=Math.max(r.columnIndex+r.colSpan-1,i.columnIndex+i.colSpan-1),a=Math.min(r.rowIndex,i.rowIndex),l=Math.max(r.rowIndex+r.rowSpan-1,i.rowIndex+i.rowSpan-1);return{fromX:Math.min(s,o),fromY:Math.min(a,l),toX:Math.max(s,o),toY:Math.max(a,l)}}getNodes(){if(!this.isValid())return[];const e=this._cachedNodes;if(e!==null)return e;const{anchorTable:t,anchorCell:r,focusCell:i}=Vh(this),s=i.getParents()[1];if(s!==t){if(t.isParentOf(i)){const _=s.getParent();_==null&&lt(159),this.set(this.tableKey,i.getKey(),_.getKey())}else{const _=t.getParent();_==null&&lt(158),this.set(this.tableKey,_.getKey(),i.getKey())}return this.getNodes()}const[o,a,l]=LC(t,r,i),{minColumn:u,maxColumn:c,minRow:f,maxRow:d}=$C(o,a,l),h=new Map([[t.getKey(),t]]);let p=null;for(let _=f;_<=d;_++)for(let C=u;C<=c;C++){const{cell:v}=o[_][C],k=v.getParent();Uo(k)||lt(160),k!==p&&(h.set(k.getKey(),k),p=k),h.has(v.getKey())||BC(v,M=>{h.set(M.getKey(),M)})}const m=Array.from(h.values());return Os()||(this._cachedNodes=m),m}getTextContent(){const e=this.getNodes().filter(r=>wn(r));let t="";for(let r=0;r<e.length;r++){const i=e[r],s=i.__parent,o=(e[r+1]||{}).__parent;t+=i.getTextContent()+(o!==s?`
`:"	")}return t}};function Xy(n){return n instanceof FC}function BC(n,e){const t=[[n]];for(let r=t.at(-1);r!==void 0&&t.length>0;r=t.at(-1)){const i=r.pop();i===void 0?t.pop():e(i)!==!1&&V(i)&&t.push(i.getChildren())}}function ro(n){return qe(n)&&n.nodeName==="TABLE"}function qC(n,e){for(let t=e,r=null;t!==null;t=t.getParent()){if(n.is(t))return r;wn(t)&&(r=t)}return null}function jC(n,e,t){return qC(n,Yr(e,t))}function Jh(n,e,t){if(!e.theme.tableAlignment)return;const r=[],i=[];for(const s of["center","right"]){const o=e.theme.tableAlignment[s];o&&(s===t?i:r).push(o)}wi(n,...r),Pt(n,...i)}const UC=new WeakSet;function Gh(n=Bl()){return UC.has(n)}let Qy=class Zy extends qt{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(e){const t=this.getWritable();return t.__colWidths=e,t}static clone(e){return new Zy(e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__colWidths=e.__colWidths,this.__rowStriping=e.__rowStriping,this.__frozenColumnCount=e.__frozenColumnCount,this.__frozenRowCount=e.__frozenRowCount}static importDOM(){return{table:e=>({conversion:WC,priority:1})}}static importJSON(e){return e_().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setRowStriping(e.rowStriping||!1).setFrozenColumns(e.frozenColumnCount||0).setFrozenRows(e.frozenRowCount||0).setColWidths(e.colWidths)}constructor(e){super(e),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(e,t,r){return r==="html"}getDOMSlot(e){const t=ro(e)?e:e.querySelector("table");return ro(t)||lt(229),super.getDOMSlot(e).withElement(t).withAfter(t.querySelector("colgroup"))}createDOM(e,t){const r=document.createElement("table");this.__style&&(r.style.cssText=this.__style);const i=document.createElement("colgroup");if(r.appendChild(i),T2(i),Pt(r,e.theme.table),this.updateTableElement(null,r,e),Gh(t)){const s=document.createElement("div"),o=e.theme.tableScrollableWrapper;return o?Pt(s,o):s.style.cssText="overflow-x: auto;",s.appendChild(r),this.updateTableWrapper(null,s,r,e),s}return r}updateTableWrapper(e,t,r,i){this.__frozenColumnCount!==(e?e.__frozenColumnCount:0)&&function(s,o,a,l){l>0?(Pt(s,a.theme.tableFrozenColumn),o.setAttribute("data-lexical-frozen-column","true")):(wi(s,a.theme.tableFrozenColumn),o.removeAttribute("data-lexical-frozen-column"))}(t,r,i,this.__frozenColumnCount),this.__frozenRowCount!==(e?e.__frozenRowCount:0)&&function(s,o,a,l){l>0?(Pt(s,a.theme.tableFrozenRow),o.setAttribute("data-lexical-frozen-row","true")):(wi(s,a.theme.tableFrozenRow),o.removeAttribute("data-lexical-frozen-row"))}(t,r,i,this.__frozenRowCount)}updateTableElement(e,t,r){this.__style!==(e?e.__style:"")&&(t.style.cssText=this.__style),this.__rowStriping!==(!!e&&e.__rowStriping)&&function(i,s,o){o?(Pt(i,s.theme.tableRowStriping),i.setAttribute("data-lexical-row-striping","true")):(wi(i,s.theme.tableRowStriping),i.removeAttribute("data-lexical-row-striping"))}(t,r,this.__rowStriping),function(i,s,o,a){const l=i.querySelector("colgroup");if(!l)return;const u=[];for(let c=0;c<o;c++){const f=document.createElement("col"),d=a&&a[c];d&&(f.style.width=`${d}px`),u.push(f)}l.replaceChildren(...u)}(t,0,this.getColumnCount(),this.getColWidths()),Jh(t,r,this.getFormatType())}updateDOM(e,t,r){const i=this.getDOMSlot(t).element;return t===i===Gh()||(qe(s=t)&&s.nodeName==="DIV"&&this.updateTableWrapper(e,t,i,r),this.updateTableElement(e,i,r),!1);var s}exportDOM(e){const t=super.exportDOM(e),{element:r}=t;return{after:i=>{if(t.after&&(i=t.after(i)),!ro(i)&&qe(i)&&(i=i.querySelector("table")),!ro(i))return null;Jh(i,e._config,this.getFormatType());const[s]=Gy(this,null,null),o=new Map;for(const c of s)for(const f of c){const d=f.cell.getKey();o.has(d)||o.set(d,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const a=new Set;for(const c of i.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=c.getAttribute("data-temporary-table-cell-lexical-key");if(f){const d=o.get(f);if(c.removeAttribute("data-temporary-table-cell-lexical-key"),d){o.delete(f);for(let h=0;h<d.colSpan;h++)a.add(h+d.startColumn)}}}const l=i.querySelector(":scope > colgroup");if(l){const c=Array.from(i.querySelectorAll(":scope > colgroup > col")).filter((f,d)=>a.has(d));l.replaceChildren(...c)}const u=i.querySelectorAll(":scope > tr");if(u.length>0){const c=document.createElement("tbody");for(const f of u)c.appendChild(f);i.append(c)}return i},element:!ro(r)&&qe(r)?r.querySelector("table"):r}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(e,t){const{rows:r,domRows:i}=t;for(let s=0;s<r;s++){const o=i[s];if(o!=null)for(let a=0;a<o.length;a++){const l=o[a];if(l==null)continue;const{elem:u}=l,c=jC(this,u);if(c!==null&&e.is(c))return{x:a,y:s}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(e,t,r){const{domRows:i}=r,s=i[t];if(s==null)return null;const o=s[e<s.length?e:s.length-1];return o??null}getDOMCellFromCordsOrThrow(e,t,r){const i=this.getDOMCellFromCords(e,t,r);if(!i)throw new Error("Cell not found at cords.");return i}getCellNodeFromCords(e,t,r){const i=this.getDOMCellFromCords(e,t,r);if(i==null)return null;const s=Yr(i.elem);return wn(s)?s:null}getCellNodeFromCordsOrThrow(e,t,r){const i=this.getCellNodeFromCords(e,t,r);if(!i)throw new Error("Node at cords not TableCellNode.");return i}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(e){const t=this.getWritable();return t.__rowStriping=e,t}setFrozenColumns(e){const t=this.getWritable();return t.__frozenColumnCount=e,t}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(e){const t=this.getWritable();return t.__frozenRowCount=e,t}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const e=this.getFirstChild();if(!e)return 0;let t=0;return e.getChildren().forEach(r=>{wn(r)&&(t+=r.getColSpan())}),t}};function WC(n){const e=e_();n.hasAttribute("data-lexical-row-striping")&&e.setRowStriping(!0),n.hasAttribute("data-lexical-frozen-column")&&e.setFrozenColumns(1),n.hasAttribute("data-lexical-frozen-row")&&e.setFrozenRows(1);const t=n.querySelector(":scope > colgroup");if(t){let r=[];for(const i of t.querySelectorAll(":scope > col")){let s=i.style.width||"";if(!jd.test(s)&&(s=i.getAttribute("width")||"",!/^\d+$/.test(s))){r=void 0;break}r.push(parseFloat(s))}r&&e.setColWidths(r)}return{after:r=>My(r,Uo),node:e}}function e_(){return Ue(new Qy)}function t_(n){return n instanceof Qy}const n_=Object.freeze({"	":"\\t","\n":"\\n"}),Yh=new RegExp(Object.keys(n_).join("|"),"g"),rr=Object.freeze({ancestorHasNextSibling:"|",ancestorIsLastChild:" ",hasNextSibling:"├",isLastChild:"└",selectedChar:"^",selectedLine:">"}),zC=[n=>n.hasFormat("bold")&&"Bold",n=>n.hasFormat("code")&&"Code",n=>n.hasFormat("italic")&&"Italic",n=>n.hasFormat("strikethrough")&&"Strikethrough",n=>n.hasFormat("subscript")&&"Subscript",n=>n.hasFormat("superscript")&&"Superscript",n=>n.hasFormat("underline")&&"Underline",n=>n.hasFormat("highlight")&&"Highlight"],HC=[n=>n.hasTextFormat("bold")&&"Bold",n=>n.hasTextFormat("code")&&"Code",n=>n.hasTextFormat("italic")&&"Italic",n=>n.hasTextFormat("strikethrough")&&"Strikethrough",n=>n.hasTextFormat("subscript")&&"Subscript",n=>n.hasTextFormat("superscript")&&"Superscript",n=>n.hasTextFormat("underline")&&"Underline",n=>n.hasTextFormat("highlight")&&"Highlight"],KC=[n=>n.isDirectionless()&&"Directionless",n=>n.isUnmergeable()&&"Unmergeable"],VC=[n=>n.isToken()&&"Token",n=>n.isSegmented()&&"Segmented"];function JC(n,e,t,r,i=!1){const s=n.getEditorState(),o=n._config,a=n._compositionKey,l=n._editable;if(t){let d="";return s.read(()=>{d=function(h){const p=document.createElement("div");return p.innerHTML=h.trim(),i_(p,0).innerHTML}(Oy(n))}),d}let u=` root
`;const c=s.read(()=>{const d=ne();return r_(De(),(h,p)=>{const m=`(${h.getKey()})`,_=h.getType()||"",C=h.isSelected();u+=`${C?rr.selectedLine:" "} ${p.join(" ")} ${m} ${_} ${function(v,k,M=!1){const $=k?k(v,M):void 0;if($!==void 0&&$.length>0)return $;if(ee(v)){const x=v.getTextContent(),O=x.length===0?"(empty)":`"${Xh(x,M)}"`,N=function(I){return[Qh(I),GC(I),YC(I),Zh(I)].filter(Boolean).join(", ")}(v);return[O,N.length!==0?`{ ${N} }`:null].filter(Boolean).join(" ").trim()}if(kC(v)){const x=v.getURL(),O=x.length===0?"(empty)":`"${Xh(x,M)}"`,N=function(I){return[XC(I),QC(I),ZC(I),Zh(I)].filter(Boolean).join(", ")}(v);return[O,N.length!==0?`{ ${N} }`:null].filter(Boolean).join(" ").trim()}if(SC(v))return`ids: [ ${v.getIDs().join(", ")} ]`;if(kd(v)){const x=function(N){let I=HC.map(H=>H(N)).filter(Boolean).join(", ").toLocaleLowerCase();return I!==""&&(I="format: "+I),I}(v);let O=x!==""?`{ ${x} }`:"";return O+=v.__style?`(${v.__style})`:"",O}return""}(h,r,i)}
`,u+=function({indent:v,isSelected:k,node:M,nodeKeyDisplay:$,selection:x,typeDisplay:O}){if(!ee(M)||!G(x)||!k||V(M))return"";const N=x.anchor,I=x.focus;if(M.getTextContent()===""||N.getNode()===x.focus.getNode()&&N.offset===I.offset)return"";const[H,w]=function(z,J){const W=J.getStartEndPoints();if(Ht(J)||W===null)return[-1,-1];const[Q,ie]=W,te=z.getTextContent(),Z=te.length;let Y=-1,oe=-1;if(Q.type==="text"&&ie.type==="text"){const pe=Q.getNode(),ge=ie.getNode();pe===ge&&z===pe&&Q.offset!==ie.offset?[Y,oe]=Q.offset<ie.offset?[Q.offset,ie.offset]:[ie.offset,Q.offset]:[Y,oe]=z===pe?pe.isBefore(ge)?[Q.offset,Z]:[0,Q.offset]:z===ge?ge.isBefore(pe)?[ie.offset,Z]:[0,ie.offset]:[0,Z]}const ue=(te.slice(0,Y).match(Yh)||[]).length,de=(te.slice(Y,oe).match(Yh)||[]).length;return[Y+ue,oe+ue+de]}(M,x);if(H===w)return"";const q=v[v.length-1]===rr.hasNextSibling?rr.ancestorHasNextSibling:rr.ancestorIsLastChild,S=[...v.slice(0,v.length-1),q],K=Array(H+1).fill(" "),A=Array(w-H).fill(rr.selectedChar),P=O.length+2,j=Array($.length+P).fill(" ");return[rr.selectedLine,S.join(" "),[...j,...K,...A].join("")].join(" ")+`
`}({indent:p,isSelected:C,node:h,nodeKeyDisplay:m,selection:d,typeDisplay:_})}),d===null?": null":G(d)?function(h){let p="";const m=Qh(h);p+=`: range ${m!==""?`{ ${m} }`:""} ${h.style!==""?`{ style: ${h.style} } `:""}`;const _=h.anchor,C=h.focus,v=_.offset,k=C.offset;return p+=`
  ├ anchor { key: ${_.key}, offset: ${v===null?"null":v}, type: ${_.type} }`,p+=`
  └ focus { key: ${C.key}, offset: ${k===null?"null":k}, type: ${C.type} }`,p}(d):Xy(d)?function(h){return`: table
  └ { table: ${h.tableKey}, anchorCell: ${h.anchor.key}, focusCell: ${h.focus.key} }`}(d):function(h){return Ht(h)?`: node
  └ [${Array.from(h._nodes).join(", ")}]`:""}(d)});if(u+=`
 selection`+c,u+=`

 commands:`,e.length)for(const{index:d,type:h,payload:p}of e)u+=`
  └ ${d}. { type: ${h}, payload: ${p instanceof Event?p.constructor.name:p} }`;else u+=`
  └ None dispatched.`;const{version:f}=n.constructor;return u+=`

 editor${f?` (v${f})`:""}:`,u+=`
  └ namespace ${o.namespace}`,a!==null&&(u+=`
  └ compositionKey ${a}`),u+=`
  └ editable ${String(l)}`,u}function r_(n,e,t=[]){const r=n.getChildren(),i=r.length;r.forEach((s,o)=>{e(s,t.concat(o===i-1?rr.isLastChild:rr.hasNextSibling)),V(s)&&r_(s,e,t.concat(o===i-1?rr.ancestorIsLastChild:rr.ancestorHasNextSibling))})}function Xh(n,e=!1){const t=Object.entries(n_).reduce((r,[i,s])=>r.replace(new RegExp(i,"g"),String(s)),n);return e?t.replace(/[^\s]/g,"*"):t}function GC(n){let e=KC.map(t=>t(n)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="detail: "+e),e}function YC(n){let e=VC.map(t=>t(n)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="mode: "+e),e}function Qh(n){let e=zC.map(t=>t(n)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="format: "+e),e}function XC(n){let e=n.getTarget();return e!=null&&(e="target: "+e),e}function QC(n){let e=n.getRel();return e!=null&&(e="rel: "+e),e}function ZC(n){let e=n.getTitle();return e!=null&&(e="title: "+e),e}function Zh(n){if(!n.__state)return!1;const e=[];for(const[r,i]of n.__state.knownState.entries()){if(r.isEqual(i,r.defaultValue))continue;const s=JSON.stringify(r.unparse(i));e.push(`[${r.key}: ${s}]`)}let t=e.join(",");return t!==""&&(t="state: "+t),t}function i_(n,e){const t=new Array(1+e++).join("  "),r=new Array(e-1).join("  ");let i;for(let s=0;s<n.children.length;s++)i=document.createTextNode(`
`+t),n.insertBefore(i,n.children[s]),i_(n.children[s],e),n.lastElementChild===n.children[s]&&(i=document.createTextNode(`
`+r),n.appendChild(i));return n}const eE=T.forwardRef(function({treeTypeButtonClassName:n,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:r,viewClassName:i,timeTravelPanelClassName:s,editorState:o,setEditorState:a,setEditorReadOnly:l,generateContent:u,commandsLog:c=[]},f){const[d,h]=T.useState([]),[p,m]=T.useState(""),[_,C]=T.useState(!1),[v,k]=T.useState(!1),M=T.useRef(0),$=T.useRef(null),[x,O]=T.useState(!1),[N,I]=T.useState(!1),[H,w]=T.useState(!1),q=T.useRef(),S=T.useRef([]),K=T.useRef(0),A=T.useCallback(j=>{const z=++K.current;u(j).then(J=>{z===K.current&&m(J)}).catch(J=>{z===K.current&&m(`Error rendering tree: ${J.message}

Stack:
${J.stack}`)})},[u]);T.useEffect(()=>{if(!(!H&&o._nodeMap.size>1e3&&(I(!0),!H))&&(q.current!==o||S.current!==c)){const j=q.current!==o;q.current=o,S.current=c,A(v),!_&&j&&h(z=>[...z,[Date.now(),o]])}},[o,A,v,H,_,c]);const P=d.length;return T.useEffect(()=>{if(x){let j;const z=()=>{const J=M.current;if(J===P-1)return void O(!1);const W=d[J][0],Q=d[J+1][0];j=setTimeout(()=>{M.current++;const ie=M.current,te=$.current;te!==null&&(te.value=String(ie)),a(d[ie][1]),z()},Q-W)};return z(),()=>{clearTimeout(j)}}},[d,x,P,a]),L.jsxs("div",{className:i,children:[!H&&N?L.jsxs("div",{style:{padding:20},children:[L.jsx("span",{style:{marginRight:20},children:"Detected large EditorState, this can impact debugging performance."}),L.jsx("button",{onClick:()=>{w(!0)},style:{background:"transparent",border:"1px solid white",color:"white",cursor:"pointer",padding:5},children:"Show full tree"})]}):null,H?null:L.jsx("button",{onClick:()=>(A(!v),void k(!v)),className:n,type:"button",children:v?"Tree":"Export DOM"}),!_&&(H||!N)&&P>2&&L.jsx("button",{onClick:()=>{l(!0),M.current=P-1,C(!0)},className:e,type:"button",children:"Time Travel"}),(H||!N)&&L.jsx("pre",{ref:f,children:p}),_&&(H||!N)&&L.jsxs("div",{className:s,children:[L.jsx("button",{className:r,onClick:()=>{M.current===P-1&&(M.current=1),O(!x)},type:"button",children:x?"Pause":"Play"}),L.jsx("input",{className:t,ref:$,onChange:j=>{const z=Number(j.target.value),J=d[z];J&&(M.current=z,a(J[1]))},type:"range",min:"1",max:P-1}),L.jsx("button",{className:r,onClick:()=>{l(!1);const j=d.length-1,z=d[j];a(z[1]);const J=$.current;J!==null&&(J.value=String(j)),C(!1),O(!1)},type:"button",children:"Exit"})]})]})});function tE(n,e){const t=new Set;let r=0;for(const[i]of n._commands)t.add(n.registerCommand(i,s=>(e(o=>{r+=1;const a=[...o];return a.push({index:r,payload:s,type:i.type?i.type:"UNKNOWN"}),a.length>10&&a.shift(),a}),!1),go));return()=>t.forEach(i=>i())}function nE(n){const[e,t]=T.useState([]);return T.useEffect(()=>tE(n,t),[n]),T.useMemo(()=>e,[e])}function rE({treeTypeButtonClassName:n,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:r,timeTravelPanelClassName:i,viewClassName:s,editor:o,customPrintNode:a}){const l=T.createRef(),[u,c]=T.useState(o.getEditorState()),f=nE(o);return T.useEffect(()=>_t(o.registerUpdateListener(({editorState:d})=>{c(d)}),o.registerEditableListener(()=>{c(o.getEditorState())})),[o]),T.useEffect(()=>{const d=l.current;if(d!==null)return d.__lexicalEditor=o,()=>{d.__lexicalEditor=null}},[o,l]),L.jsx(eE,{treeTypeButtonClassName:n,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:r,viewClassName:s,timeTravelPanelClassName:i,setEditorReadOnly:d=>{const h=o.getRootElement();h!=null&&(h.contentEditable=d?"false":"true")},editorState:u,setEditorState:d=>o.setEditorState(d),generateContent:async function(d){return JC(o,f,d,a)},ref:l,commandsLog:f})}const s_=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,iE=s_?T.useLayoutEffect:T.useEffect,fa={tag:vi};function o_({initialConfig:n,children:e}){const t=T.useMemo(()=>{const{theme:r,namespace:i,nodes:s,onError:o,editorState:a,html:l}=n,u=lv(null,r),c=h2({editable:n.editable,html:l,namespace:i,nodes:s,onError:f=>o(f,c),theme:r});return function(f,d){if(d!==null){if(d===void 0)f.update(()=>{const h=De();if(h.isEmpty()){const p=kn();h.append(p);const m=s_?document.activeElement:null;(ne()!==null||m!==null&&m===f.getRootElement())&&p.select()}},fa);else if(d!==null)switch(typeof d){case"string":{const h=f.parseEditorState(d);f.setEditorState(h,fa);break}case"object":f.setEditorState(d,fa);break;case"function":f.update(()=>{De().isEmpty()&&d(f)},fa)}}}(c,a),[c,u]},[]);return iE(()=>{const r=n.editable,[i]=t;i.setEditable(r===void 0||r)},[]),L.jsx(nm.Provider,{value:t,children:e})}function a_(){return De().getTextContent()}function l_(n,e=!0){if(n)return!1;let t=a_();return e&&(t=t.trim()),t===""}function sE(n){if(!l_(n,!1))return!1;const e=De().getChildren(),t=e.length;if(t>1)return!1;for(let r=0;r<t;r++){const i=e[r];if(Le(i))return!1;if(V(i)){if(!kd(i)||i.__indent!==0)return!1;const s=i.getChildren(),o=s.length;for(let a=0;a<o;a++){const l=s[r];if(!ee(l))return!1}}}return!0}function Wd(n){return()=>sE(n)}const u_=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function oE({editor:n,ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:i,ariaErrorMessage:s,ariaExpanded:o,ariaInvalid:a,ariaLabel:l,ariaLabelledBy:u,ariaMultiline:c,ariaOwns:f,ariaRequired:d,autoCapitalize:h,className:p,id:m,role:_="textbox",spellCheck:C=!0,style:v,tabIndex:k,"data-testid":M,...$},x){const[O,N]=T.useState(n.isEditable()),I=T.useCallback(w=>{w&&w.ownerDocument&&w.ownerDocument.defaultView?n.setRootElement(w):n.setRootElement(null)},[n]),H=T.useMemo(()=>function(...w){return q=>{w.forEach(S=>{typeof S=="function"?S(q):S!=null&&(S.current=q)})}}(x,I),[I,x]);return u_(()=>(N(n.isEditable()),n.registerEditableListener(w=>{N(w)})),[n]),L.jsx("div",{"aria-activedescendant":O?e:void 0,"aria-autocomplete":O?t:"none","aria-controls":O?r:void 0,"aria-describedby":i,...s!=null?{"aria-errormessage":s}:{},"aria-expanded":O&&_==="combobox"?!!o:void 0,...a!=null?{"aria-invalid":a}:{},"aria-label":l,"aria-labelledby":u,"aria-multiline":c,"aria-owns":O?f:void 0,"aria-readonly":!O||void 0,"aria-required":d,autoCapitalize:h,className:p,contentEditable:O,"data-testid":M,id:m,ref:H,role:_,spellCheck:C,style:v,tabIndex:k,...$})}const aE=T.forwardRef(oE);function ep(n){return n.getEditorState().read(Wd(n.isComposing()))}const c_=T.forwardRef(lE);function lE(n,e){const{placeholder:t,...r}=n,[i]=we();return L.jsxs(L.Fragment,{children:[L.jsx(aE,{editor:i,...r,ref:e}),t!=null&&L.jsx(uE,{editor:i,content:t})]})}function uE({content:n,editor:e}){const t=function(o){const[a,l]=T.useState(()=>ep(o));return u_(()=>{function u(){const c=ep(o);l(c)}return u(),_t(o.registerUpdateListener(()=>{u()}),o.registerEditableListener(()=>{u()}))},[o]),a}(e),[r,i]=T.useState(e.isEditable());if(T.useLayoutEffect(()=>(i(e.isEditable()),e.registerEditableListener(o=>{i(o)})),[e]),!t)return null;let s=null;return typeof n=="function"?s=n(r):n!==null&&(s=n),s===null?null:L.jsx("div",{"aria-hidden":!0,children:s})}function d_({editorRef:n}){const[e]=we();return T.useEffect(()=>{typeof n=="function"?n(e):typeof n=="object"&&(n.current=e)},[e]),null}function wc(n,e){return wc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},wc(n,e)}var tp={error:null},cE=function(n){var e,t;function r(){for(var s,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(s=n.call.apply(n,[this].concat(a))||this).state=tp,s.resetErrorBoundary=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];s.props.onReset==null||(u=s.props).onReset.apply(u,f),s.reset()},s}t=n,(e=r).prototype=Object.create(t.prototype),e.prototype.constructor=e,wc(e,t),r.getDerivedStateFromError=function(s){return{error:s}};var i=r.prototype;return i.reset=function(){this.setState(tp)},i.componentDidCatch=function(s,o){var a,l;(a=(l=this.props).onError)==null||a.call(l,s,o)},i.componentDidUpdate=function(s,o){var a,l,u,c,f=this.state.error,d=this.props.resetKeys;f!==null&&o.error!==null&&((u=s.resetKeys)===void 0&&(u=[]),(c=d)===void 0&&(c=[]),u.length!==c.length||u.some(function(h,p){return!Object.is(h,c[p])}))&&((a=(l=this.props).onResetKeysChange)==null||a.call(l,s.resetKeys,d),this.reset())},i.render=function(){var s=this.state.error,o=this.props,a=o.fallbackRender,l=o.FallbackComponent,u=o.fallback;if(s!==null){var c={error:s,resetErrorBoundary:this.resetErrorBoundary};if(T.isValidElement(u))return u;if(typeof a=="function")return a(c);if(l)return T.createElement(l,c);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(T.Component);function f_({children:n,onError:e}){return L.jsx(cE,{fallback:L.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:n})}const ha=0,kc=1,xc=2,qn=0,dE=1,np=2,fE=3,hE=4;function pE(n,e,t,r,i){if(n===null||t.size===0&&r.size===0&&!i)return qn;const s=e._selection,o=n._selection;if(i)return dE;if(!(G(s)&&G(o)&&o.isCollapsed()&&s.isCollapsed()))return qn;const a=function(C,v,k){const M=C._nodeMap,$=[];for(const x of v){const O=M.get(x);O!==void 0&&$.push(O)}for(const[x,O]of k){if(!O)continue;const N=M.get(x);N===void 0||St(N)||$.push(N)}return $}(e,t,r);if(a.length===0)return qn;if(a.length>1){const C=e._nodeMap,v=C.get(s.anchor.key),k=C.get(o.anchor.key);return v&&k&&!n._nodeMap.has(v.__key)&&ee(v)&&v.__text.length===1&&s.anchor.offset===1?np:qn}const l=a[0],u=n._nodeMap.get(l.__key);if(!ee(u)||!ee(l)||u.__mode!==l.__mode)return qn;const c=u.__text,f=l.__text;if(c===f)return qn;const d=s.anchor,h=o.anchor;if(d.key!==h.key||d.type!=="text")return qn;const p=d.offset,m=h.offset,_=f.length-c.length;return _===1&&m===p-1?np:_===-1&&m===p+1?fE:_===-1&&m===p?hE:qn}function gE(n,e){let t=Date.now(),r=qn;return(i,s,o,a,l,u)=>{const c=Date.now();if(u.has(uc))return r=qn,t=c,xc;const f=pE(i,s,a,l,n.isComposing()),d=(()=>{const h=o===null||o.editor===n,p=u.has(l2);if(!p&&h&&u.has(vi))return ha;if(i===null)return kc;const m=s._selection;return a.size>0||l.size>0?p===!1&&f!==qn&&f===r&&c<t+e&&h||a.size===1&&function(_,C,v){const k=C._nodeMap.get(_),M=v._nodeMap.get(_),$=C._selection,x=v._selection;return!(G($)&&G(x)&&$.anchor.type==="element"&&$.focus.type==="element"&&x.anchor.type==="text"&&x.focus.type==="text"||!ee(k)||!ee(M)||k.__parent!==M.__parent)&&JSON.stringify(C.read(()=>k.exportJSON()))===JSON.stringify(v.read(()=>M.exportJSON()))}(Array.from(a)[0],i,s)?ha:kc:m!==null?ha:xc})();return t=c,r=f,d}}function rp(n){n.undoStack=[],n.redoStack=[],n.current=null}function mE(n,e,t){const r=gE(n,t);return _t(n.registerCommand(Dl,()=>(function(s,o){const a=o.redoStack,l=o.undoStack;if(l.length!==0){const u=o.current,c=l.pop();u!==null&&(a.push(u),s.dispatchCommand(so,!0)),l.length===0&&s.dispatchCommand(oo,!1),o.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:uc})}}(n,e),!0),ye),n.registerCommand(Nl,()=>(function(s,o){const a=o.redoStack,l=o.undoStack;if(a.length!==0){const u=o.current;u!==null&&(l.push(u),s.dispatchCommand(oo,!0));const c=a.pop();a.length===0&&s.dispatchCommand(so,!1),o.current=c||null,c&&c.editor.setEditorState(c.editorState,{tag:uc})}}(n,e),!0),ye),n.registerCommand(md,()=>(rp(e),!1),ye),n.registerCommand(km,()=>(rp(e),n.dispatchCommand(so,!1),n.dispatchCommand(oo,!1),!0),ye),n.registerUpdateListener(({editorState:s,prevEditorState:o,dirtyLeaves:a,dirtyElements:l,tags:u})=>{const c=e.current,f=e.redoStack,d=e.undoStack,h=c===null?null:c.editorState;if(c!==null&&s===h)return;const p=r(o,s,c,a,l,u);if(p===kc)f.length!==0&&(e.redoStack=[],n.dispatchCommand(so,!1)),c!==null&&(d.push({...c}),n.dispatchCommand(oo,!0));else if(p===xc)return;e.current={editor:n,editorState:s}}))}function yE(){return{current:null,redoStack:[],undoStack:[]}}function h_({delay:n,externalHistoryState:e}){const[t]=we();return function(r,i,s=1e3){const o=T.useMemo(()=>i||yE(),[i]);T.useEffect(()=>mE(r,o,s),[s,r,o])}(t,e,n),null}const _E=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function bE(n){return{initialValueFn:()=>n.isEditable(),subscribe:e=>n.registerEditableListener(e)}}function p_(){return function(n){const[e]=we(),t=T.useMemo(()=>n(e),[e,n]),[r,i]=T.useState(()=>t.initialValueFn()),s=T.useRef(r);return _E(()=>{const{initialValueFn:o,subscribe:a}=t,l=o();return s.current!==l&&(s.current=l,i(l)),a(u=>{s.current=u,i(u)})},[t,n]),r}(bE)}function g_(n){const e=window.location.origin,t=r=>{if(r.origin!==e)return;const i=n.getRootElement();if(document.activeElement!==i)return;const s=r.data;if(typeof s=="string"){let o;try{o=JSON.parse(s)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const a=o.payload;if(a&&a.functionId==="makeChanges"){const l=a.args;if(l){const[u,c,f,d,h,p]=l;n.update(()=>{const m=ne();if(G(m)){const _=m.anchor;let C=_.getNode(),v=0,k=0;if(ee(C)&&u>=0&&c>=0&&(v=u,k=u+c,m.setTextNodeRange(C,v,C,k)),v===k&&f===""||(m.insertRawText(f),C=_.getNode()),ee(C)){v=d,k=d+h;const M=C.getTextContentSize();v=v>M?M:v,k=k>M?M:k,m.setTextNodeRange(C,v,C,k)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}function ip(n,e){if(document.caretRangeFromPoint!==void 0){const t=document.caretRangeFromPoint(n,e);return t===null?null:{node:t.startContainer,offset:t.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const t=document.caretPositionFromPoint(n,e);return t===null?null:{node:t.offsetNode,offset:t.offset}}return null}const Ps=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,vE=Ps&&"documentMode"in document?document.documentMode:null,CE=!(!Ps||!("InputEvent"in window)||vE)&&"getTargetRanges"in new window.InputEvent("input"),EE=Ps&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),sp=Ps&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,wE=Ps&&/^(?=.*Chrome).*/i.test(navigator.userAgent),kE=Ps&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!wE,op=be("DRAG_DROP_PASTE_FILE");function pa(n){let e=null;if(xr(n,DragEvent)?e=n.dataTransfer:xr(n,ClipboardEvent)&&(e=n.clipboardData),e===null)return[!1,[],!1];const t=e.types,r=t.includes("Files"),i=t.includes("text/html")||t.includes("text/plain");return[r,Array.from(e.files),i]}function ap(n){const e=ne();if(!G(e))return!1;const t=new Set,r=e.getNodes();for(let i=0;i<r.length;i++){const s=r[i],o=s.getKey();if(t.has(o))continue;const a=Qr(s,u=>V(u)&&!u.isInline());if(a===null)continue;const l=a.getKey();a.canIndent()&&!t.has(l)&&(t.add(l),n(a))}return t.size>0}function lp(n){const e=Yr(n);return Le(e)}function Ru(n){for(const e of["lowercase","uppercase","capitalize"])n.hasFormat(e)&&n.toggleFormat(e)}function xE(n){return _t(n.registerCommand(Cm,e=>{const t=ne();return!!Ht(t)&&(t.clear(),!0)},ye),n.registerCommand(sr,e=>{const t=ne();return G(t)?(t.deleteCharacter(e),!0):!!Ht(t)&&(t.deleteNodes(),!0)},ye),n.registerCommand(hs,e=>{const t=ne();return!!G(t)&&(t.deleteWord(e),!0)},ye),n.registerCommand(ps,e=>{const t=ne();return!!G(t)&&(t.deleteLine(e),!0)},ye),n.registerCommand(_i,e=>{const t=ne();if(typeof e=="string")t!==null&&t.insertText(e);else{if(t===null)return!1;const r=e.dataTransfer;if(r!=null)jh(r,t,n);else if(G(t)){const i=e.data;return i&&t.insertText(i),!0}}return!0},ye),n.registerCommand(tl,()=>{const e=ne();return!!G(e)&&(e.removeText(),!0)},ye),n.registerCommand(jr,e=>{const t=ne();return!!G(t)&&(t.formatText(e),!0)},ye),n.registerCommand(Wv,e=>{const t=ne();if(!G(t)&&!Ht(t))return!1;const r=t.getNodes();for(const i of r){const s=Qr(i,o=>V(o)&&!o.isInline());s!==null&&s.setFormat(e)}return!0},ye),n.registerCommand(Hr,e=>{const t=ne();return!!G(t)&&(t.insertLineBreak(e),!0)},ye),n.registerCommand(wo,()=>{const e=ne();return!!G(e)&&(e.insertParagraph(),!0)},ye),n.registerCommand(jv,()=>(i2([Po()]),!0),ye),n.registerCommand(Uv,()=>ap(e=>{const t=e.getIndent();e.setIndent(t+1)}),ye),n.registerCommand(Uf,()=>ap(e=>{const t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),ye),n.registerCommand(cd,e=>{const t=ne();if(Ht(t)){const r=t.getNodes();if(r.length>0)return r[0].selectPrevious(),!0}else if(G(t)){const r=dc(t.focus,!0);if(!e.shiftKey&&Le(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1},ye),n.registerCommand(dd,e=>{const t=ne();if(Ht(t)){const r=t.getNodes();if(r.length>0)return r[0].selectNext(0,0),!0}else if(G(t)){if(function(i){const s=i.focus;return s.key==="root"&&s.offset===De().getChildrenSize()}(t))return e.preventDefault(),!0;const r=dc(t.focus,!1);if(!e.shiftKey&&Le(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},ye),n.registerCommand(ud,e=>{const t=ne();if(Ht(t)){const r=t.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectPrevious(),!0}if(!G(t))return!1;if(dl(t,!0)){const r=e.shiftKey;return e.preventDefault(),fl(t,r,!0),!0}return!1},ye),n.registerCommand(ld,e=>{const t=ne();if(Ht(t)){const i=t.getNodes();if(i.length>0)return e.preventDefault(),i[0].selectNext(0,0),!0}if(!G(t))return!1;const r=e.shiftKey;return!!dl(t,!1)&&(e.preventDefault(),fl(t,r,!1),!0)},ye),n.registerCommand(fd,e=>{if(lp(e.target))return!1;const t=ne();if(G(t)){if(function(r){if(!r.isCollapsed())return!1;const{anchor:i}=r;if(i.offset!==0)return!1;const s=i.getNode();if(St(s))return!1;const o=mC(s);return o.getIndent()>0&&(o.is(s)||s.is(o.getFirstDescendant()))}(t))return e.preventDefault(),n.dispatchCommand(Uf,void 0);if(sp&&navigator.language==="ko-KR")return!1}else if(!Ht(t))return!1;return e.preventDefault(),n.dispatchCommand(sr,!0)},ye),n.registerCommand(hd,e=>{if(lp(e.target))return!1;const t=ne();return!(!G(t)&&!Ht(t))&&(e.preventDefault(),n.dispatchCommand(sr,!1))},ye),n.registerCommand(gs,e=>{const t=ne();if(!G(t))return!1;if(Ru(t),e!==null){if((sp||EE||kE)&&CE)return!1;if(e.preventDefault(),e.shiftKey)return n.dispatchCommand(Hr,!1)}return n.dispatchCommand(wo,void 0)},ye),n.registerCommand(Ml,()=>{const e=ne();return!!G(e)&&(n.blur(),!0)},ye),n.registerCommand(Ol,e=>{const[,t]=pa(e);if(t.length>0){const i=ip(e.clientX,e.clientY);if(i!==null){const{offset:s,node:o}=i,a=Yr(o);if(a!==null){const l=Fo();if(ee(a))l.anchor.set(a.getKey(),s,"text"),l.focus.set(a.getKey(),s,"text");else{const c=a.getParentOrThrow().getKey(),f=a.getIndexWithinParent()+1;l.anchor.set(c,f,"element"),l.focus.set(c,f,"element")}const u=bo(l);Mt(u)}n.dispatchCommand(op,t)}return e.preventDefault(),!0}const r=ne();return!!G(r)},ye),n.registerCommand(gd,e=>{const[t]=pa(e),r=ne();return!(t&&!G(r))},ye),n.registerCommand(wm,e=>{const[t]=pa(e),r=ne();if(t&&!G(r))return!1;const i=ip(e.clientX,e.clientY);if(i!==null){const s=Yr(i.node);Le(s)&&e.preventDefault()}return!0},ye),n.registerCommand(nl,()=>(dy(),!0),ye),n.registerCommand(qi,e=>(Wh(n,xr(e,ClipboardEvent)?e:null),!0),ye),n.registerCommand(Ds,e=>(async function(t,r){await Wh(r,xr(t,ClipboardEvent)?t:null),r.update(()=>{const i=ne();G(i)?i.removeText():Ht(i)&&i.getNodes().forEach(s=>s.remove())})}(e,n),!0),ye),n.registerCommand(Bi,e=>{const[,t,r]=pa(e);return t.length>0&&!r?(n.dispatchCommand(op,t),!0):ji(e.target)&&Td(e.target)?!1:ne()!==null&&(function(i,s){i.preventDefault(),s.update(()=>{const o=ne(),a=xr(i,InputEvent)||xr(i,KeyboardEvent)?null:i.clipboardData;a!=null&&o!==null&&jh(a,o,s)},{tag:ty})}(e,n),!0)},ye),n.registerCommand(Em,e=>{const t=ne();return G(t)&&Ru(t),!1},ye),n.registerCommand(pd,e=>{const t=ne();return G(t)&&Ru(t),!1},ye))}const Sc=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function up(n){return n.getEditorState().read(Wd(n.isComposing()))}function SE({contentEditable:n,placeholder:e=null,ErrorBoundary:t}){const[r]=we(),i=function(s,o){const[a,l]=T.useState(()=>s.getDecorators());return Sc(()=>s.registerDecoratorListener(u=>{En.flushSync(()=>{l(u)})}),[s]),T.useEffect(()=>{l(s.getDecorators())},[s]),T.useMemo(()=>{const u=[],c=Object.keys(a);for(let f=0;f<c.length;f++){const d=c[f],h=L.jsx(o,{onError:m=>s._onError(m),children:L.jsx(T.Suspense,{fallback:null,children:a[d]})}),p=s.getElementByKey(d);p!==null&&u.push(En.createPortal(h,p,d))}return u},[o,a,s])}(r,t);return function(s){Sc(()=>_t(xE(s),g_(s)),[s])}(r),L.jsxs(L.Fragment,{children:[n,L.jsx(TE,{content:e}),i]})}function TE({content:n}){const[e]=we(),t=function(i){const[s,o]=T.useState(()=>up(i));return Sc(()=>{function a(){const l=up(i);o(l)}return a(),_t(i.registerUpdateListener(()=>{a()}),i.registerEditableListener(()=>{a()}))},[i]),s}(e),r=p_();return t?typeof n=="function"?n(r):n:null}var ga={exports:{}},Lu,cp;function AE(){if(cp)return Lu;cp=1;var n=-1,e=1,t=0;function r(w,q,S,K,A){if(w===q)return w?[[t,w]]:[];if(S!=null){var P=I(w,q,S);if(P)return P}var j=a(w,q),z=w.substring(0,j);w=w.substring(j),q=q.substring(j),j=u(w,q);var J=w.substring(w.length-j);w=w.substring(0,w.length-j),q=q.substring(0,q.length-j);var W=i(w,q);return z&&W.unshift([t,z]),J&&W.push([t,J]),v(W,A),K&&f(W),W}function i(w,q){var S;if(!w)return[[e,q]];if(!q)return[[n,w]];var K=w.length>q.length?w:q,A=w.length>q.length?q:w,P=K.indexOf(A);if(P!==-1)return S=[[e,K.substring(0,P)],[t,A],[e,K.substring(P+A.length)]],w.length>q.length&&(S[0][0]=S[2][0]=n),S;if(A.length===1)return[[n,w],[e,q]];var j=c(w,q);if(j){var z=j[0],J=j[1],W=j[2],Q=j[3],ie=j[4],te=r(z,W),Z=r(J,Q);return te.concat([[t,ie]],Z)}return s(w,q)}function s(w,q){for(var S=w.length,K=q.length,A=Math.ceil((S+K)/2),P=A,j=2*A,z=new Array(j),J=new Array(j),W=0;W<j;W++)z[W]=-1,J[W]=-1;z[P+1]=0,J[P+1]=0;for(var Q=S-K,ie=Q%2!==0,te=0,Z=0,Y=0,oe=0,ue=0;ue<A;ue++){for(var de=-ue+te;de<=ue-Z;de+=2){var pe=P+de,ge;de===-ue||de!==ue&&z[pe-1]<z[pe+1]?ge=z[pe+1]:ge=z[pe-1]+1;for(var _e=ge-de;ge<S&&_e<K&&w.charAt(ge)===q.charAt(_e);)ge++,_e++;if(z[pe]=ge,ge>S)Z+=2;else if(_e>K)te+=2;else if(ie){var ae=P+Q-de;if(ae>=0&&ae<j&&J[ae]!==-1){var ke=S-J[ae];if(ge>=ke)return o(w,q,ge,_e)}}}for(var Ie=-ue+Y;Ie<=ue-oe;Ie+=2){var ae=P+Ie,ke;Ie===-ue||Ie!==ue&&J[ae-1]<J[ae+1]?ke=J[ae+1]:ke=J[ae-1]+1;for(var Te=ke-Ie;ke<S&&Te<K&&w.charAt(S-ke-1)===q.charAt(K-Te-1);)ke++,Te++;if(J[ae]=ke,ke>S)oe+=2;else if(Te>K)Y+=2;else if(!ie){var pe=P+Q-Ie;if(pe>=0&&pe<j&&z[pe]!==-1){var ge=z[pe],_e=P+ge-pe;if(ke=S-ke,ge>=ke)return o(w,q,ge,_e)}}}}return[[n,w],[e,q]]}function o(w,q,S,K){var A=w.substring(0,S),P=q.substring(0,K),j=w.substring(S),z=q.substring(K),J=r(A,P),W=r(j,z);return J.concat(W)}function a(w,q){if(!w||!q||w.charAt(0)!==q.charAt(0))return 0;for(var S=0,K=Math.min(w.length,q.length),A=K,P=0;S<A;)w.substring(P,A)==q.substring(P,A)?(S=A,P=S):K=A,A=Math.floor((K-S)/2+S);return k(w.charCodeAt(A-1))&&A--,A}function l(w,q){var S=w.length,K=q.length;if(S==0||K==0)return 0;S>K?w=w.substring(S-K):S<K&&(q=q.substring(0,S));var A=Math.min(S,K);if(w==q)return A;for(var P=0,j=1;;){var z=w.substring(A-j),J=q.indexOf(z);if(J==-1)return P;j+=J,(J==0||w.substring(A-j)==q.substring(0,j))&&(P=j,j++)}}function u(w,q){if(!w||!q||w.slice(-1)!==q.slice(-1))return 0;for(var S=0,K=Math.min(w.length,q.length),A=K,P=0;S<A;)w.substring(w.length-A,w.length-P)==q.substring(q.length-A,q.length-P)?(S=A,P=S):K=A,A=Math.floor((K-S)/2+S);return M(w.charCodeAt(w.length-A))&&A--,A}function c(w,q){var S=w.length>q.length?w:q,K=w.length>q.length?q:w;if(S.length<4||K.length*2<S.length)return null;function A(Z,Y,oe){for(var ue=Z.substring(oe,oe+Math.floor(Z.length/4)),de=-1,pe="",ge,_e,ae,ke;(de=Y.indexOf(ue,de+1))!==-1;){var Ie=a(Z.substring(oe),Y.substring(de)),Te=u(Z.substring(0,oe),Y.substring(0,de));pe.length<Te+Ie&&(pe=Y.substring(de-Te,de)+Y.substring(de,de+Ie),ge=Z.substring(0,oe-Te),_e=Z.substring(oe+Ie),ae=Y.substring(0,de-Te),ke=Y.substring(de+Ie))}return pe.length*2>=Z.length?[ge,_e,ae,ke,pe]:null}var P=A(S,K,Math.ceil(S.length/4)),j=A(S,K,Math.ceil(S.length/2)),z;if(!P&&!j)return null;j?P?z=P[4].length>j[4].length?P:j:z=j:z=P;var J,W,Q,ie;w.length>q.length?(J=z[0],W=z[1],Q=z[2],ie=z[3]):(Q=z[0],ie=z[1],J=z[2],W=z[3]);var te=z[4];return[J,W,Q,ie,te]}function f(w){for(var q=!1,S=[],K=0,A=null,P=0,j=0,z=0,J=0,W=0;P<w.length;)w[P][0]==t?(S[K++]=P,j=J,z=W,J=0,W=0,A=w[P][1]):(w[P][0]==e?J+=w[P][1].length:W+=w[P][1].length,A&&A.length<=Math.max(j,z)&&A.length<=Math.max(J,W)&&(w.splice(S[K-1],0,[n,A]),w[S[K-1]+1][0]=e,K--,K--,P=K>0?S[K-1]:-1,j=0,z=0,J=0,W=0,A=null,q=!0)),P++;for(q&&v(w),C(w),P=1;P<w.length;){if(w[P-1][0]==n&&w[P][0]==e){var Q=w[P-1][1],ie=w[P][1],te=l(Q,ie),Z=l(ie,Q);te>=Z?(te>=Q.length/2||te>=ie.length/2)&&(w.splice(P,0,[t,ie.substring(0,te)]),w[P-1][1]=Q.substring(0,Q.length-te),w[P+1][1]=ie.substring(te),P++):(Z>=Q.length/2||Z>=ie.length/2)&&(w.splice(P,0,[t,Q.substring(0,Z)]),w[P-1][0]=e,w[P-1][1]=ie.substring(0,ie.length-Z),w[P+1][0]=n,w[P+1][1]=Q.substring(Z),P++),P++}P++}}var d=/[^a-zA-Z0-9]/,h=/\s/,p=/[\r\n]/,m=/\n\r?\n$/,_=/^\r?\n\r?\n/;function C(w){function q(Z,Y){if(!Z||!Y)return 6;var oe=Z.charAt(Z.length-1),ue=Y.charAt(0),de=oe.match(d),pe=ue.match(d),ge=de&&oe.match(h),_e=pe&&ue.match(h),ae=ge&&oe.match(p),ke=_e&&ue.match(p),Ie=ae&&Z.match(m),Te=ke&&Y.match(_);return Ie||Te?5:ae||ke?4:de&&!ge&&_e?3:ge||_e?2:de||pe?1:0}for(var S=1;S<w.length-1;){if(w[S-1][0]==t&&w[S+1][0]==t){var K=w[S-1][1],A=w[S][1],P=w[S+1][1],j=u(K,A);if(j){var z=A.substring(A.length-j);K=K.substring(0,K.length-j),A=z+A.substring(0,A.length-j),P=z+P}for(var J=K,W=A,Q=P,ie=q(K,A)+q(A,P);A.charAt(0)===P.charAt(0);){K+=A.charAt(0),A=A.substring(1)+P.charAt(0),P=P.substring(1);var te=q(K,A)+q(A,P);te>=ie&&(ie=te,J=K,W=A,Q=P)}w[S-1][1]!=J&&(J?w[S-1][1]=J:(w.splice(S-1,1),S--),w[S][1]=W,Q?w[S+1][1]=Q:(w.splice(S+1,1),S--))}S++}}function v(w,q){w.push([t,""]);for(var S=0,K=0,A=0,P="",j="",z;S<w.length;){if(S<w.length-1&&!w[S][1]){w.splice(S,1);continue}switch(w[S][0]){case e:A++,j+=w[S][1],S++;break;case n:K++,P+=w[S][1],S++;break;case t:var J=S-A-K-1;if(q){if(J>=0&&x(w[J][1])){var W=w[J][1].slice(-1);if(w[J][1]=w[J][1].slice(0,-1),P=W+P,j=W+j,!w[J][1]){w.splice(J,1),S--;var Q=J-1;w[Q]&&w[Q][0]===e&&(A++,j=w[Q][1]+j,Q--),w[Q]&&w[Q][0]===n&&(K++,P=w[Q][1]+P,Q--),J=Q}}if($(w[S][1])){var W=w[S][1].charAt(0);w[S][1]=w[S][1].slice(1),P+=W,j+=W}}if(S<w.length-1&&!w[S][1]){w.splice(S,1);break}if(P.length>0||j.length>0){P.length>0&&j.length>0&&(z=a(j,P),z!==0&&(J>=0?w[J][1]+=j.substring(0,z):(w.splice(0,0,[t,j.substring(0,z)]),S++),j=j.substring(z),P=P.substring(z)),z=u(j,P),z!==0&&(w[S][1]=j.substring(j.length-z)+w[S][1],j=j.substring(0,j.length-z),P=P.substring(0,P.length-z)));var ie=A+K;P.length===0&&j.length===0?(w.splice(S-ie,ie),S=S-ie):P.length===0?(w.splice(S-ie,ie,[e,j]),S=S-ie+1):j.length===0?(w.splice(S-ie,ie,[n,P]),S=S-ie+1):(w.splice(S-ie,ie,[n,P],[e,j]),S=S-ie+2)}S!==0&&w[S-1][0]===t?(w[S-1][1]+=w[S][1],w.splice(S,1)):S++,A=0,K=0,P="",j="";break}}w[w.length-1][1]===""&&w.pop();var te=!1;for(S=1;S<w.length-1;)w[S-1][0]===t&&w[S+1][0]===t&&(w[S][1].substring(w[S][1].length-w[S-1][1].length)===w[S-1][1]?(w[S][1]=w[S-1][1]+w[S][1].substring(0,w[S][1].length-w[S-1][1].length),w[S+1][1]=w[S-1][1]+w[S+1][1],w.splice(S-1,1),te=!0):w[S][1].substring(0,w[S+1][1].length)==w[S+1][1]&&(w[S-1][1]+=w[S+1][1],w[S][1]=w[S][1].substring(w[S+1][1].length)+w[S+1][1],w.splice(S+1,1),te=!0)),S++;te&&v(w,q)}function k(w){return w>=55296&&w<=56319}function M(w){return w>=56320&&w<=57343}function $(w){return M(w.charCodeAt(0))}function x(w){return k(w.charCodeAt(w.length-1))}function O(w){for(var q=[],S=0;S<w.length;S++)w[S][1].length>0&&q.push(w[S]);return q}function N(w,q,S,K){return x(w)||$(K)?null:O([[t,w],[n,q],[e,S],[t,K]])}function I(w,q,S){var K=typeof S=="number"?{index:S,length:0}:S.oldRange,A=typeof S=="number"?null:S.newRange,P=w.length,j=q.length;if(K.length===0&&(A===null||A.length===0)){var z=K.index,J=w.slice(0,z),W=w.slice(z),Q=A?A.index:null;e:{var ie=z+j-P;if(Q!==null&&Q!==ie||ie<0||ie>j)break e;var te=q.slice(0,ie),Z=q.slice(ie);if(Z!==W)break e;var Y=Math.min(z,ie),oe=J.slice(0,Y),ue=te.slice(0,Y);if(oe!==ue)break e;var de=J.slice(Y),pe=te.slice(Y);return N(oe,de,pe,W)}e:{if(Q!==null&&Q!==z)break e;var ge=z,te=q.slice(0,ge),Z=q.slice(ge);if(te!==J)break e;var _e=Math.min(P-ge,j-ge),ae=W.slice(W.length-_e),ke=Z.slice(Z.length-_e);if(ae!==ke)break e;var de=W.slice(0,W.length-_e),pe=Z.slice(0,Z.length-_e);return N(J,de,pe,ae)}}if(K.length>0&&A&&A.length===0)e:{var oe=w.slice(0,K.index),ae=w.slice(K.index+K.length),Y=oe.length,_e=ae.length;if(j<Y+_e)break e;var ue=q.slice(0,Y),ke=q.slice(j-_e);if(oe!==ue||ae!==ke)break e;var de=w.slice(Y,P-_e),pe=q.slice(Y,j-_e);return N(oe,de,pe,ae)}return null}function H(w,q,S,K){return r(w,q,S,K,!0)}return H.INSERT=e,H.DELETE=n,H.EQUAL=t,Lu=H,Lu}var ao={exports:{}};ao.exports;var dp;function m_(){return dp||(dp=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",f="[object GeneratorFunction]",d="[object Map]",h="[object Number]",p="[object Object]",m="[object Promise]",_="[object RegExp]",C="[object Set]",v="[object String]",k="[object Symbol]",M="[object WeakMap]",$="[object ArrayBuffer]",x="[object DataView]",O="[object Float32Array]",N="[object Float64Array]",I="[object Int8Array]",H="[object Int16Array]",w="[object Int32Array]",q="[object Uint8Array]",S="[object Uint8ClampedArray]",K="[object Uint16Array]",A="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,j=/\w*$/,z=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,W={};W[s]=W[o]=W[$]=W[x]=W[a]=W[l]=W[O]=W[N]=W[I]=W[H]=W[w]=W[d]=W[h]=W[p]=W[_]=W[C]=W[v]=W[k]=W[q]=W[S]=W[K]=W[A]=!0,W[u]=W[c]=W[M]=!1;var Q=typeof qr=="object"&&qr&&qr.Object===Object&&qr,ie=typeof self=="object"&&self&&self.Object===Object&&self,te=Q||ie||Function("return this")(),Z=e&&!e.nodeType&&e,Y=Z&&!0&&n&&!n.nodeType&&n,oe=Y&&Y.exports===Z;function ue(g,E){return g.set(E[0],E[1]),g}function de(g,E){return g.add(E),g}function pe(g,E){for(var R=-1,X=g?g.length:0;++R<X&&E(g[R],R,g)!==!1;);return g}function ge(g,E){for(var R=-1,X=E.length,Ce=g.length;++R<X;)g[Ce+R]=E[R];return g}function _e(g,E,R,X){for(var Ce=-1,he=g?g.length:0;++Ce<he;)R=E(R,g[Ce],Ce,g);return R}function ae(g,E){for(var R=-1,X=Array(g);++R<g;)X[R]=E(R);return X}function ke(g,E){return g==null?void 0:g[E]}function Ie(g){var E=!1;if(g!=null&&typeof g.toString!="function")try{E=!!(g+"")}catch{}return E}function Te(g){var E=-1,R=Array(g.size);return g.forEach(function(X,Ce){R[++E]=[Ce,X]}),R}function Qt(g,E){return function(R){return g(E(R))}}function jt(g){var E=-1,R=Array(g.size);return g.forEach(function(X){R[++E]=X}),R}var Ot=Array.prototype,un=Function.prototype,Zt=Object.prototype,cn=te["__core-js_shared__"],ft=function(){var g=/[^.]+$/.exec(cn&&cn.keys&&cn.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Re=un.toString,rt=Zt.hasOwnProperty,We=Zt.toString,Rn=RegExp("^"+Re.call(rt).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dn=oe?te.Buffer:void 0,en=te.Symbol,fn=te.Uint8Array,me=Qt(Object.getPrototypeOf,Object),$e=Object.create,it=Zt.propertyIsEnumerable,ht=Ot.splice,hn=Object.getOwnPropertySymbols,pn=dn?dn.isBuffer:void 0,Ln=Qt(Object.keys,Object),gn=Bn(te,"DataView"),mn=Bn(te,"Map"),Ct=Bn(te,"Promise"),yn=Bn(te,"Set"),_n=Bn(te,"WeakMap"),tn=Bn(Object,"create"),Jn=zt(gn),Fe=zt(mn),Je=zt(Ct),Ut=zt(yn),Wt=zt(_n),Pn=en?en.prototype:void 0,Lr=Pn?Pn.valueOf:void 0;function xn(g){var E=-1,R=g?g.length:0;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function y(){this.__data__=tn?tn(null):{}}function b(g){return this.has(g)&&delete this.__data__[g]}function D(g){var E=this.__data__;if(tn){var R=E[g];return R===r?void 0:R}return rt.call(E,g)?E[g]:void 0}function U(g){var E=this.__data__;return tn?E[g]!==void 0:rt.call(E,g)}function re(g,E){var R=this.__data__;return R[g]=tn&&E===void 0?r:E,this}xn.prototype.clear=y,xn.prototype.delete=b,xn.prototype.get=D,xn.prototype.has=U,xn.prototype.set=re;function le(g){var E=-1,R=g?g.length:0;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function xe(){this.__data__=[]}function Ge(g){var E=this.__data__,R=Ji(E,g);if(R<0)return!1;var X=E.length-1;return R==X?E.pop():ht.call(E,R,1),!0}function Ze(g){var E=this.__data__,R=Ji(E,g);return R<0?void 0:E[R][1]}function Et(g){return Ji(this.__data__,g)>-1}function st(g,E){var R=this.__data__,X=Ji(R,g);return X<0?R.push([g,E]):R[X][1]=E,this}le.prototype.clear=xe,le.prototype.delete=Ge,le.prototype.get=Ze,le.prototype.has=Et,le.prototype.set=st;function Ke(g){var E=-1,R=g?g.length:0;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function bn(){this.__data__={hash:new xn,map:new(mn||le),string:new xn}}function It(g){return fi(this,g).delete(g)}function $n(g){return fi(this,g).get(g)}function nn(g){return fi(this,g).has(g)}function Fn(g,E){return fi(this,g).set(g,E),this}Ke.prototype.clear=bn,Ke.prototype.delete=It,Ke.prototype.get=$n,Ke.prototype.has=nn,Ke.prototype.set=Fn;function et(g){this.__data__=new le(g)}function ci(){this.__data__=new le}function tt(g){return this.__data__.delete(g)}function Ki(g){return this.__data__.get(g)}function Gn(g){return this.__data__.has(g)}function Ql(g,E){var R=this.__data__;if(R instanceof le){var X=R.__data__;if(!mn||X.length<t-1)return X.push([g,E]),this;R=this.__data__=new Ke(X)}return R.set(g,E),this}et.prototype.clear=ci,et.prototype.delete=tt,et.prototype.get=Ki,et.prototype.has=Gn,et.prototype.set=Ql;function Vi(g,E){var R=Ys(g)||Yi(g)?ae(g.length,String):[],X=R.length,Ce=!!X;for(var he in g)rt.call(g,he)&&!(Ce&&(he=="length"||fu(he,X)))&&R.push(he);return R}function Go(g,E,R){var X=g[E];(!(rt.call(g,E)&&ea(X,R))||R===void 0&&!(E in g))&&(g[E]=R)}function Ji(g,E){for(var R=g.length;R--;)if(ea(g[R][0],E))return R;return-1}function Yn(g,E){return g&&Gs(E,Qs(E),g)}function Vs(g,E,R,X,Ce,he,Me){var Ne;if(X&&(Ne=he?X(g,Ce,he,Me):X(g)),Ne!==void 0)return Ne;if(!Qn(g))return g;var nt=Ys(g);if(nt){if(Ne=cu(g),!E)return au(g,Ne)}else{var Pe=gr(g),Rt=Pe==c||Pe==f;if(ta(g))return Gi(g,E);if(Pe==p||Pe==s||Rt&&!he){if(Ie(g))return he?g:{};if(Ne=Xn(Rt?{}:g),!E)return lu(g,Yn(Ne,g))}else{if(!W[Pe])return he?g:{};Ne=du(g,Pe,Vs,E)}}Me||(Me=new et);var rn=Me.get(g);if(rn)return rn;if(Me.set(g,Ne),!nt)var ot=R?uu(g):Qs(g);return pe(ot||g,function(Lt,wt){ot&&(wt=Lt,Lt=g[wt]),Go(Ne,wt,Vs(Lt,E,R,X,wt,g,Me))}),Ne}function Zl(g){return Qn(g)?$e(g):{}}function eu(g,E,R){var X=E(g);return Ys(g)?X:ge(X,R(g))}function tu(g){return We.call(g)}function nu(g){if(!Qn(g)||pu(g))return!1;var E=Xs(g)||Ie(g)?Rn:z;return E.test(zt(g))}function ru(g){if(!Qo(g))return Ln(g);var E=[];for(var R in Object(g))rt.call(g,R)&&R!="constructor"&&E.push(R);return E}function Gi(g,E){if(E)return g.slice();var R=new g.constructor(g.length);return g.copy(R),R}function Js(g){var E=new g.constructor(g.byteLength);return new fn(E).set(new fn(g)),E}function di(g,E){var R=E?Js(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.byteLength)}function Yo(g,E,R){var X=E?R(Te(g),!0):Te(g);return _e(X,ue,new g.constructor)}function Xo(g){var E=new g.constructor(g.source,j.exec(g));return E.lastIndex=g.lastIndex,E}function iu(g,E,R){var X=E?R(jt(g),!0):jt(g);return _e(X,de,new g.constructor)}function su(g){return Lr?Object(Lr.call(g)):{}}function ou(g,E){var R=E?Js(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.length)}function au(g,E){var R=-1,X=g.length;for(E||(E=Array(X));++R<X;)E[R]=g[R];return E}function Gs(g,E,R,X){R||(R={});for(var Ce=-1,he=E.length;++Ce<he;){var Me=E[Ce],Ne=void 0;Go(R,Me,Ne===void 0?g[Me]:Ne)}return R}function lu(g,E){return Gs(g,pr(g),E)}function uu(g){return eu(g,Qs,pr)}function fi(g,E){var R=g.__data__;return hu(E)?R[typeof E=="string"?"string":"hash"]:R.map}function Bn(g,E){var R=ke(g,E);return nu(R)?R:void 0}var pr=hn?Qt(hn,Object):mu,gr=tu;(gn&&gr(new gn(new ArrayBuffer(1)))!=x||mn&&gr(new mn)!=d||Ct&&gr(Ct.resolve())!=m||yn&&gr(new yn)!=C||_n&&gr(new _n)!=M)&&(gr=function(g){var E=We.call(g),R=E==p?g.constructor:void 0,X=R?zt(R):void 0;if(X)switch(X){case Jn:return x;case Fe:return d;case Je:return m;case Ut:return C;case Wt:return M}return E});function cu(g){var E=g.length,R=g.constructor(E);return E&&typeof g[0]=="string"&&rt.call(g,"index")&&(R.index=g.index,R.input=g.input),R}function Xn(g){return typeof g.constructor=="function"&&!Qo(g)?Zl(me(g)):{}}function du(g,E,R,X){var Ce=g.constructor;switch(E){case $:return Js(g);case a:case l:return new Ce(+g);case x:return di(g,X);case O:case N:case I:case H:case w:case q:case S:case K:case A:return ou(g,X);case d:return Yo(g,X,R);case h:case v:return new Ce(g);case _:return Xo(g);case C:return iu(g,X,R);case k:return su(g)}}function fu(g,E){return E=E??i,!!E&&(typeof g=="number"||J.test(g))&&g>-1&&g%1==0&&g<E}function hu(g){var E=typeof g;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?g!=="__proto__":g===null}function pu(g){return!!ft&&ft in g}function Qo(g){var E=g&&g.constructor,R=typeof E=="function"&&E.prototype||Zt;return g===R}function zt(g){if(g!=null){try{return Re.call(g)}catch{}try{return g+""}catch{}}return""}function Zo(g){return Vs(g,!0,!0)}function ea(g,E){return g===E||g!==g&&E!==E}function Yi(g){return gu(g)&&rt.call(g,"callee")&&(!it.call(g,"callee")||We.call(g)==s)}var Ys=Array.isArray;function Xi(g){return g!=null&&na(g.length)&&!Xs(g)}function gu(g){return ra(g)&&Xi(g)}var ta=pn||yu;function Xs(g){var E=Qn(g)?We.call(g):"";return E==c||E==f}function na(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=i}function Qn(g){var E=typeof g;return!!g&&(E=="object"||E=="function")}function ra(g){return!!g&&typeof g=="object"}function Qs(g){return Xi(g)?Vi(g):ru(g)}function mu(){return[]}function yu(){return!1}n.exports=Zo}(ao,ao.exports)),ao.exports}var lo={exports:{}};lo.exports;var fp;function y_(){return fp||(fp=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",_="[object Number]",C="[object Null]",v="[object Object]",k="[object Promise]",M="[object Proxy]",$="[object RegExp]",x="[object Set]",O="[object String]",N="[object Symbol]",I="[object Undefined]",H="[object WeakMap]",w="[object ArrayBuffer]",q="[object DataView]",S="[object Float32Array]",K="[object Float64Array]",A="[object Int8Array]",P="[object Int16Array]",j="[object Int32Array]",z="[object Uint8Array]",J="[object Uint8ClampedArray]",W="[object Uint16Array]",Q="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,te=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,Y={};Y[S]=Y[K]=Y[A]=Y[P]=Y[j]=Y[z]=Y[J]=Y[W]=Y[Q]=!0,Y[a]=Y[l]=Y[w]=Y[c]=Y[q]=Y[f]=Y[d]=Y[h]=Y[m]=Y[_]=Y[v]=Y[$]=Y[x]=Y[O]=Y[H]=!1;var oe=typeof qr=="object"&&qr&&qr.Object===Object&&qr,ue=typeof self=="object"&&self&&self.Object===Object&&self,de=oe||ue||Function("return this")(),pe=e&&!e.nodeType&&e,ge=pe&&!0&&n&&!n.nodeType&&n,_e=ge&&ge.exports===pe,ae=_e&&oe.process,ke=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Ie=ke&&ke.isTypedArray;function Te(g,E){for(var R=-1,X=g==null?0:g.length,Ce=0,he=[];++R<X;){var Me=g[R];E(Me,R,g)&&(he[Ce++]=Me)}return he}function Qt(g,E){for(var R=-1,X=E.length,Ce=g.length;++R<X;)g[Ce+R]=E[R];return g}function jt(g,E){for(var R=-1,X=g==null?0:g.length;++R<X;)if(E(g[R],R,g))return!0;return!1}function Ot(g,E){for(var R=-1,X=Array(g);++R<g;)X[R]=E(R);return X}function un(g){return function(E){return g(E)}}function Zt(g,E){return g.has(E)}function cn(g,E){return g==null?void 0:g[E]}function ft(g){var E=-1,R=Array(g.size);return g.forEach(function(X,Ce){R[++E]=[Ce,X]}),R}function Re(g,E){return function(R){return g(E(R))}}function rt(g){var E=-1,R=Array(g.size);return g.forEach(function(X){R[++E]=X}),R}var We=Array.prototype,Rn=Function.prototype,dn=Object.prototype,en=de["__core-js_shared__"],fn=Rn.toString,me=dn.hasOwnProperty,$e=function(){var g=/[^.]+$/.exec(en&&en.keys&&en.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),it=dn.toString,ht=RegExp("^"+fn.call(me).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hn=_e?de.Buffer:void 0,pn=de.Symbol,Ln=de.Uint8Array,gn=dn.propertyIsEnumerable,mn=We.splice,Ct=pn?pn.toStringTag:void 0,yn=Object.getOwnPropertySymbols,_n=hn?hn.isBuffer:void 0,tn=Re(Object.keys,Object),Jn=pr(de,"DataView"),Fe=pr(de,"Map"),Je=pr(de,"Promise"),Ut=pr(de,"Set"),Wt=pr(de,"WeakMap"),Pn=pr(Object,"create"),Lr=zt(Jn),xn=zt(Fe),y=zt(Je),b=zt(Ut),D=zt(Wt),U=pn?pn.prototype:void 0,re=U?U.valueOf:void 0;function le(g){var E=-1,R=g==null?0:g.length;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function xe(){this.__data__=Pn?Pn(null):{},this.size=0}function Ge(g){var E=this.has(g)&&delete this.__data__[g];return this.size-=E?1:0,E}function Ze(g){var E=this.__data__;if(Pn){var R=E[g];return R===r?void 0:R}return me.call(E,g)?E[g]:void 0}function Et(g){var E=this.__data__;return Pn?E[g]!==void 0:me.call(E,g)}function st(g,E){var R=this.__data__;return this.size+=this.has(g)?0:1,R[g]=Pn&&E===void 0?r:E,this}le.prototype.clear=xe,le.prototype.delete=Ge,le.prototype.get=Ze,le.prototype.has=Et,le.prototype.set=st;function Ke(g){var E=-1,R=g==null?0:g.length;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function bn(){this.__data__=[],this.size=0}function It(g){var E=this.__data__,R=Gi(E,g);if(R<0)return!1;var X=E.length-1;return R==X?E.pop():mn.call(E,R,1),--this.size,!0}function $n(g){var E=this.__data__,R=Gi(E,g);return R<0?void 0:E[R][1]}function nn(g){return Gi(this.__data__,g)>-1}function Fn(g,E){var R=this.__data__,X=Gi(R,g);return X<0?(++this.size,R.push([g,E])):R[X][1]=E,this}Ke.prototype.clear=bn,Ke.prototype.delete=It,Ke.prototype.get=$n,Ke.prototype.has=nn,Ke.prototype.set=Fn;function et(g){var E=-1,R=g==null?0:g.length;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function ci(){this.size=0,this.__data__={hash:new le,map:new(Fe||Ke),string:new le}}function tt(g){var E=Bn(this,g).delete(g);return this.size-=E?1:0,E}function Ki(g){return Bn(this,g).get(g)}function Gn(g){return Bn(this,g).has(g)}function Ql(g,E){var R=Bn(this,g),X=R.size;return R.set(g,E),this.size+=R.size==X?0:1,this}et.prototype.clear=ci,et.prototype.delete=tt,et.prototype.get=Ki,et.prototype.has=Gn,et.prototype.set=Ql;function Vi(g){var E=-1,R=g==null?0:g.length;for(this.__data__=new et;++E<R;)this.add(g[E])}function Go(g){return this.__data__.set(g,r),this}function Ji(g){return this.__data__.has(g)}Vi.prototype.add=Vi.prototype.push=Go,Vi.prototype.has=Ji;function Yn(g){var E=this.__data__=new Ke(g);this.size=E.size}function Vs(){this.__data__=new Ke,this.size=0}function Zl(g){var E=this.__data__,R=E.delete(g);return this.size=E.size,R}function eu(g){return this.__data__.get(g)}function tu(g){return this.__data__.has(g)}function nu(g,E){var R=this.__data__;if(R instanceof Ke){var X=R.__data__;if(!Fe||X.length<t-1)return X.push([g,E]),this.size=++R.size,this;R=this.__data__=new et(X)}return R.set(g,E),this.size=R.size,this}Yn.prototype.clear=Vs,Yn.prototype.delete=Zl,Yn.prototype.get=eu,Yn.prototype.has=tu,Yn.prototype.set=nu;function ru(g,E){var R=Yi(g),X=!R&&ea(g),Ce=!R&&!X&&Xi(g),he=!R&&!X&&!Ce&&ra(g),Me=R||X||Ce||he,Ne=Me?Ot(g.length,String):[],nt=Ne.length;for(var Pe in g)me.call(g,Pe)&&!(Me&&(Pe=="length"||Ce&&(Pe=="offset"||Pe=="parent")||he&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||du(Pe,nt)))&&Ne.push(Pe);return Ne}function Gi(g,E){for(var R=g.length;R--;)if(Zo(g[R][0],E))return R;return-1}function Js(g,E,R){var X=E(g);return Yi(g)?X:Qt(X,R(g))}function di(g){return g==null?g===void 0?I:C:Ct&&Ct in Object(g)?gr(g):Qo(g)}function Yo(g){return Qn(g)&&di(g)==a}function Xo(g,E,R,X,Ce){return g===E?!0:g==null||E==null||!Qn(g)&&!Qn(E)?g!==g&&E!==E:iu(g,E,R,X,Xo,Ce)}function iu(g,E,R,X,Ce,he){var Me=Yi(g),Ne=Yi(E),nt=Me?l:Xn(g),Pe=Ne?l:Xn(E);nt=nt==a?v:nt,Pe=Pe==a?v:Pe;var Rt=nt==v,rn=Pe==v,ot=nt==Pe;if(ot&&Xi(g)){if(!Xi(E))return!1;Me=!0,Rt=!1}if(ot&&!Rt)return he||(he=new Yn),Me||ra(g)?Gs(g,E,R,X,Ce,he):lu(g,E,nt,R,X,Ce,he);if(!(R&i)){var Lt=Rt&&me.call(g,"__wrapped__"),wt=rn&&me.call(E,"__wrapped__");if(Lt||wt){var Pr=Lt?g.value():g,mr=wt?E.value():E;return he||(he=new Yn),Ce(Pr,mr,R,X,he)}}return ot?(he||(he=new Yn),uu(g,E,R,X,Ce,he)):!1}function su(g){if(!na(g)||hu(g))return!1;var E=ta(g)?ht:te;return E.test(zt(g))}function ou(g){return Qn(g)&&Xs(g.length)&&!!Y[di(g)]}function au(g){if(!pu(g))return tn(g);var E=[];for(var R in Object(g))me.call(g,R)&&R!="constructor"&&E.push(R);return E}function Gs(g,E,R,X,Ce,he){var Me=R&i,Ne=g.length,nt=E.length;if(Ne!=nt&&!(Me&&nt>Ne))return!1;var Pe=he.get(g);if(Pe&&he.get(E))return Pe==E;var Rt=-1,rn=!0,ot=R&s?new Vi:void 0;for(he.set(g,E),he.set(E,g);++Rt<Ne;){var Lt=g[Rt],wt=E[Rt];if(X)var Pr=Me?X(wt,Lt,Rt,E,g,he):X(Lt,wt,Rt,g,E,he);if(Pr!==void 0){if(Pr)continue;rn=!1;break}if(ot){if(!jt(E,function(mr,hi){if(!Zt(ot,hi)&&(Lt===mr||Ce(Lt,mr,R,X,he)))return ot.push(hi)})){rn=!1;break}}else if(!(Lt===wt||Ce(Lt,wt,R,X,he))){rn=!1;break}}return he.delete(g),he.delete(E),rn}function lu(g,E,R,X,Ce,he,Me){switch(R){case q:if(g.byteLength!=E.byteLength||g.byteOffset!=E.byteOffset)return!1;g=g.buffer,E=E.buffer;case w:return!(g.byteLength!=E.byteLength||!he(new Ln(g),new Ln(E)));case c:case f:case _:return Zo(+g,+E);case d:return g.name==E.name&&g.message==E.message;case $:case O:return g==E+"";case m:var Ne=ft;case x:var nt=X&i;if(Ne||(Ne=rt),g.size!=E.size&&!nt)return!1;var Pe=Me.get(g);if(Pe)return Pe==E;X|=s,Me.set(g,E);var Rt=Gs(Ne(g),Ne(E),X,Ce,he,Me);return Me.delete(g),Rt;case N:if(re)return re.call(g)==re.call(E)}return!1}function uu(g,E,R,X,Ce,he){var Me=R&i,Ne=fi(g),nt=Ne.length,Pe=fi(E),Rt=Pe.length;if(nt!=Rt&&!Me)return!1;for(var rn=nt;rn--;){var ot=Ne[rn];if(!(Me?ot in E:me.call(E,ot)))return!1}var Lt=he.get(g);if(Lt&&he.get(E))return Lt==E;var wt=!0;he.set(g,E),he.set(E,g);for(var Pr=Me;++rn<nt;){ot=Ne[rn];var mr=g[ot],hi=E[ot];if(X)var Cf=Me?X(hi,mr,ot,E,g,he):X(mr,hi,ot,g,E,he);if(!(Cf===void 0?mr===hi||Ce(mr,hi,R,X,he):Cf)){wt=!1;break}Pr||(Pr=ot=="constructor")}if(wt&&!Pr){var ia=g.constructor,sa=E.constructor;ia!=sa&&"constructor"in g&&"constructor"in E&&!(typeof ia=="function"&&ia instanceof ia&&typeof sa=="function"&&sa instanceof sa)&&(wt=!1)}return he.delete(g),he.delete(E),wt}function fi(g){return Js(g,Qs,cu)}function Bn(g,E){var R=g.__data__;return fu(E)?R[typeof E=="string"?"string":"hash"]:R.map}function pr(g,E){var R=cn(g,E);return su(R)?R:void 0}function gr(g){var E=me.call(g,Ct),R=g[Ct];try{g[Ct]=void 0;var X=!0}catch{}var Ce=it.call(g);return X&&(E?g[Ct]=R:delete g[Ct]),Ce}var cu=yn?function(g){return g==null?[]:(g=Object(g),Te(yn(g),function(E){return gn.call(g,E)}))}:mu,Xn=di;(Jn&&Xn(new Jn(new ArrayBuffer(1)))!=q||Fe&&Xn(new Fe)!=m||Je&&Xn(Je.resolve())!=k||Ut&&Xn(new Ut)!=x||Wt&&Xn(new Wt)!=H)&&(Xn=function(g){var E=di(g),R=E==v?g.constructor:void 0,X=R?zt(R):"";if(X)switch(X){case Lr:return q;case xn:return m;case y:return k;case b:return x;case D:return H}return E});function du(g,E){return E=E??o,!!E&&(typeof g=="number"||Z.test(g))&&g>-1&&g%1==0&&g<E}function fu(g){var E=typeof g;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?g!=="__proto__":g===null}function hu(g){return!!$e&&$e in g}function pu(g){var E=g&&g.constructor,R=typeof E=="function"&&E.prototype||dn;return g===R}function Qo(g){return it.call(g)}function zt(g){if(g!=null){try{return fn.call(g)}catch{}try{return g+""}catch{}}return""}function Zo(g,E){return g===E||g!==g&&E!==E}var ea=Yo(function(){return arguments}())?Yo:function(g){return Qn(g)&&me.call(g,"callee")&&!gn.call(g,"callee")},Yi=Array.isArray;function Ys(g){return g!=null&&Xs(g.length)&&!ta(g)}var Xi=_n||yu;function gu(g,E){return Xo(g,E)}function ta(g){if(!na(g))return!1;var E=di(g);return E==h||E==p||E==u||E==M}function Xs(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=o}function na(g){var E=typeof g;return g!=null&&(E=="object"||E=="function")}function Qn(g){return g!=null&&typeof g=="object"}var ra=Ie?un(Ie):ou;function Qs(g){return Ys(g)?ru(g):au(g)}function mu(){return[]}function yu(){return!1}n.exports=gu}(lo,lo.exports)),lo.exports}var ma={},hp;function DE(){if(hp)return ma;hp=1,Object.defineProperty(ma,"__esModule",{value:!0});const n=m_(),e=y_();var t;return function(r){function i(l={},u={},c=!1){typeof l!="object"&&(l={}),typeof u!="object"&&(u={});let f=n(u);c||(f=Object.keys(f).reduce((d,h)=>(f[h]!=null&&(d[h]=f[h]),d),{}));for(const d in l)l[d]!==void 0&&u[d]===void 0&&(f[d]=l[d]);return Object.keys(f).length>0?f:void 0}r.compose=i;function s(l={},u={}){typeof l!="object"&&(l={}),typeof u!="object"&&(u={});const c=Object.keys(l).concat(Object.keys(u)).reduce((f,d)=>(e(l[d],u[d])||(f[d]=u[d]===void 0?null:u[d]),f),{});return Object.keys(c).length>0?c:void 0}r.diff=s;function o(l={},u={}){l=l||{};const c=Object.keys(u).reduce((f,d)=>(u[d]!==l[d]&&l[d]!==void 0&&(f[d]=u[d]),f),{});return Object.keys(l).reduce((f,d)=>(l[d]!==u[d]&&u[d]===void 0&&(f[d]=null),f),c)}r.invert=o;function a(l,u,c=!1){if(typeof l!="object")return u;if(typeof u!="object")return;if(!c)return u;const f=Object.keys(u).reduce((d,h)=>(l[h]===void 0&&(d[h]=u[h]),d),{});return Object.keys(f).length>0?f:void 0}r.transform=a}(t||(t={})),ma.default=t,ma}var ya={},pp;function __(){if(pp)return ya;pp=1,Object.defineProperty(ya,"__esModule",{value:!0});var n;return function(e){function t(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=t}(n||(n={})),ya.default=n,ya}var _a={},gp;function NE(){if(gp)return _a;gp=1,Object.defineProperty(_a,"__esModule",{value:!0});const n=__();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const i=this.ops[this.index];if(i){const s=this.offset,o=n.default.length(i);if(r>=o-s?(r=o-s,this.index+=1,this.offset=0):this.offset+=r,typeof i.delete=="number")return{delete:r};{const a={};return i.attributes&&(a.attributes=i.attributes),typeof i.retain=="number"?a.retain=r:typeof i.retain=="object"&&i.retain!==null?a.retain=i.retain:typeof i.insert=="string"?a.insert=i.insert.substr(s,r):a.insert=i.insert,a}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,i=this.index,s=this.next(),o=this.ops.slice(this.index);return this.offset=r,this.index=i,[s].concat(o)}}else return[]}}return _a.default=e,_a}var mp;function ME(){return mp||(mp=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=AE(),r=m_(),i=y_(),s=DE();e.AttributeMap=s.default;const o=__();e.Op=o.default;const a=NE();e.OpIterator=a.default;const l="\0",u=(f,d)=>{if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);const h=Object.keys(f)[0];if(!h||h!==Object.keys(d)[0])throw new Error(`embed types not matched: ${h} != ${Object.keys(d)[0]}`);return[h,f[h],d[h]]};class c{constructor(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]}static registerEmbed(d,h){this.handlers[d]=h}static unregisterEmbed(d){delete this.handlers[d]}static getHandler(d){const h=this.handlers[d];if(!h)throw new Error(`no handlers for embed type "${d}"`);return h}insert(d,h){const p={};return typeof d=="string"&&d.length===0?this:(p.insert=d,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(p.attributes=h),this.push(p))}delete(d){return d<=0?this:this.push({delete:d})}retain(d,h){if(typeof d=="number"&&d<=0)return this;const p={retain:d};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(p.attributes=h),this.push(p)}push(d){let h=this.ops.length,p=this.ops[h-1];if(d=r(d),typeof p=="object"){if(typeof d.delete=="number"&&typeof p.delete=="number")return this.ops[h-1]={delete:p.delete+d.delete},this;if(typeof p.delete=="number"&&d.insert!=null&&(h-=1,p=this.ops[h-1],typeof p!="object"))return this.ops.unshift(d),this;if(i(d.attributes,p.attributes)){if(typeof d.insert=="string"&&typeof p.insert=="string")return this.ops[h-1]={insert:p.insert+d.insert},typeof d.attributes=="object"&&(this.ops[h-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof p.retain=="number")return this.ops[h-1]={retain:p.retain+d.retain},typeof d.attributes=="object"&&(this.ops[h-1].attributes=d.attributes),this}}return h===this.ops.length?this.ops.push(d):this.ops.splice(h,0,d),this}chop(){const d=this.ops[this.ops.length-1];return d&&typeof d.retain=="number"&&!d.attributes&&this.ops.pop(),this}filter(d){return this.ops.filter(d)}forEach(d){this.ops.forEach(d)}map(d){return this.ops.map(d)}partition(d){const h=[],p=[];return this.forEach(m=>{(d(m)?h:p).push(m)}),[h,p]}reduce(d,h){return this.ops.reduce(d,h)}changeLength(){return this.reduce((d,h)=>h.insert?d+o.default.length(h):h.delete?d-h.delete:d,0)}length(){return this.reduce((d,h)=>d+o.default.length(h),0)}slice(d=0,h=1/0){const p=[],m=new a.default(this.ops);let _=0;for(;_<h&&m.hasNext();){let C;_<d?C=m.next(d-_):(C=m.next(h-_),p.push(C)),_+=o.default.length(C)}return new c(p)}compose(d){const h=new a.default(this.ops),p=new a.default(d.ops),m=[],_=p.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){let v=_.retain;for(;h.peekType()==="insert"&&h.peekLength()<=v;)v-=h.peekLength(),m.push(h.next());_.retain-v>0&&p.next(_.retain-v)}const C=new c(m);for(;h.hasNext()||p.hasNext();)if(p.peekType()==="insert")C.push(p.next());else if(h.peekType()==="delete")C.push(h.next());else{const v=Math.min(h.peekLength(),p.peekLength()),k=h.next(v),M=p.next(v);if(M.retain){const $={};if(typeof k.retain=="number")$.retain=typeof M.retain=="number"?v:M.retain;else if(typeof M.retain=="number")k.retain==null?$.insert=k.insert:$.retain=k.retain;else{const O=k.retain==null?"insert":"retain",[N,I,H]=u(k[O],M.retain),w=c.getHandler(N);$[O]={[N]:w.compose(I,H,O==="retain")}}const x=s.default.compose(k.attributes,M.attributes,typeof k.retain=="number");if(x&&($.attributes=x),C.push($),!p.hasNext()&&i(C.ops[C.ops.length-1],$)){const O=new c(h.rest());return C.concat(O).chop()}}else typeof M.delete=="number"&&(typeof k.retain=="number"||typeof k.retain=="object"&&k.retain!==null)&&C.push(M)}return C.chop()}concat(d){const h=new c(this.ops.slice());return d.ops.length>0&&(h.push(d.ops[0]),h.ops=h.ops.concat(d.ops.slice(1))),h}diff(d,h){if(this.ops===d.ops)return new c;const p=[this,d].map(k=>k.map(M=>{if(M.insert!=null)return typeof M.insert=="string"?M.insert:l;const $=k===d?"on":"with";throw new Error("diff() called "+$+" non-document")}).join("")),m=new c,_=t(p[0],p[1],h,!0),C=new a.default(this.ops),v=new a.default(d.ops);return _.forEach(k=>{let M=k[1].length;for(;M>0;){let $=0;switch(k[0]){case t.INSERT:$=Math.min(v.peekLength(),M),m.push(v.next($));break;case t.DELETE:$=Math.min(M,C.peekLength()),C.next($),m.delete($);break;case t.EQUAL:$=Math.min(C.peekLength(),v.peekLength(),M);const x=C.next($),O=v.next($);i(x.insert,O.insert)?m.retain($,s.default.diff(x.attributes,O.attributes)):m.push(O).delete($);break}M-=$}}),m.chop()}eachLine(d,h=`
`){const p=new a.default(this.ops);let m=new c,_=0;for(;p.hasNext();){if(p.peekType()!=="insert")return;const C=p.peek(),v=o.default.length(C)-p.peekLength(),k=typeof C.insert=="string"?C.insert.indexOf(h,v)-v:-1;if(k<0)m.push(p.next());else if(k>0)m.push(p.next(k));else{if(d(m,p.next(1).attributes||{},_)===!1)return;_+=1,m=new c}}m.length()>0&&d(m,{},_)}invert(d){const h=new c;return this.reduce((p,m)=>{if(m.insert)h.delete(o.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return h.retain(m.retain),p+m.retain;if(m.delete||typeof m.retain=="number"){const _=m.delete||m.retain;return d.slice(p,p+_).forEach(v=>{m.delete?h.push(v):m.retain&&m.attributes&&h.retain(o.default.length(v),s.default.invert(m.attributes,v.attributes))}),p+_}else if(typeof m.retain=="object"&&m.retain!==null){const _=d.slice(p,p+1),C=new a.default(_.ops).next(),[v,k,M]=u(m.retain,C.insert),$=c.getHandler(v);return h.retain({[v]:$.invert(k,M)},s.default.invert(m.attributes,C.attributes)),p+1}}return p},0),h.chop()}transform(d,h=!1){if(h=!!h,typeof d=="number")return this.transformPosition(d,h);const p=d,m=new a.default(this.ops),_=new a.default(p.ops),C=new c;for(;m.hasNext()||_.hasNext();)if(m.peekType()==="insert"&&(h||_.peekType()!=="insert"))C.retain(o.default.length(m.next()));else if(_.peekType()==="insert")C.push(_.next());else{const v=Math.min(m.peekLength(),_.peekLength()),k=m.next(v),M=_.next(v);if(k.delete)continue;if(M.delete)C.push(M);else{const $=k.retain,x=M.retain;let O=typeof x=="object"&&x!==null?x:v;if(typeof $=="object"&&$!==null&&typeof x=="object"&&x!==null){const N=Object.keys($)[0];if(N===Object.keys(x)[0]){const I=c.getHandler(N);I&&(O={[N]:I.transform($[N],x[N],h)})}}C.retain(O,s.default.transform(k.attributes,M.attributes,h))}}return C.chop()}transformPosition(d,h=!1){h=!!h;const p=new a.default(this.ops);let m=0;for(;p.hasNext()&&m<=d;){const _=p.peekLength(),C=p.peekType();if(p.next(),C==="delete"){d-=Math.min(_,d-m);continue}else C==="insert"&&(m<d||!h)&&(d+=_);m+=_}return d}}c.Op=o.default,c.OpIterator=a.default,c.AttributeMap=s.default,c.handlers={},e.default=c,n.exports=c,n.exports.default=c}(ga,ga.exports)),ga.exports}var OE=ME();const uo=_0(OE),Tc=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,IE=Tc?T.useLayoutEffect:T.useEffect;let RE=class{constructor(e){this.key=e,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(e){this.ref={current:e}}};const yp=n=>{const e=document.getElementById("typeahead-menu");if(!e)return;const t=e.getBoundingClientRect();t.top+t.height>window.innerHeight&&e.scrollIntoView({block:"center"}),t.top<0&&e.scrollIntoView({block:"center"}),n.scrollIntoView({block:"nearest"})};function _p(n,e){const t=n.getBoundingClientRect(),r=e.getBoundingClientRect();return t.top>r.top&&t.top<r.bottom}function LE(n,e,t,r){const[i]=we();T.useEffect(()=>{if(e!=null&&n!=null){const s=i.getRootElement(),o=s!=null?function(f,d){let h=getComputedStyle(f);const p=h.position==="absolute",m=/(auto|scroll)/;if(h.position==="fixed")return document.body;for(let _=f;_=_.parentElement;)if(h=getComputedStyle(_),(!p||h.position!=="static")&&m.test(h.overflow+h.overflowY+h.overflowX))return _;return document.body}(s):document.body;let a=!1,l=_p(e,o);const u=function(){a||(window.requestAnimationFrame(function(){t(),a=!1}),a=!0);const f=_p(e,o);f!==l&&(l=f,r!=null&&r(f))},c=new ResizeObserver(t);return window.addEventListener("resize",t),document.addEventListener("scroll",u,{capture:!0,passive:!0}),c.observe(e),()=>{c.unobserve(e),window.removeEventListener("resize",t),document.removeEventListener("scroll",u,!0)}}},[e,i,r,t,n])}const bp=be("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function PE({close:n,editor:e,anchorElementRef:t,resolution:r,options:i,menuRenderFn:s,onSelectOption:o,shouldSplitNodeWithQuery:a=!1,commandPriority:l=Is,preselectFirstItem:u=!0}){const[c,f]=T.useState(null),d=r.match&&r.match.matchingString;T.useEffect(()=>{u&&f(0)},[d,u]);const h=T.useCallback(m=>{e.update(()=>{const _=r.match!=null&&a?function(C){const v=ne();if(!G(v)||!v.isCollapsed())return null;const k=v.anchor;if(k.type!=="text")return null;const M=k.getNode();if(!M.isSimpleText())return null;const $=k.offset,x=M.getTextContent().slice(0,$),O=C.replaceableString.length,N=$-function(H,w,q){let S=q;for(let K=S;K<=w.length;K++)H.slice(-K)===w.substring(0,K)&&(S=K);return S}(x,C.matchingString,O);if(N<0)return null;let I;return N===0?[I]=M.splitText($):[,I]=M.splitText(N,$),I}(r.match):null;o(m,_,n,r.match?r.match.matchingString:"")})},[e,a,r.match,o,n]),p=T.useCallback(m=>{const _=e.getRootElement();_!==null&&(_.setAttribute("aria-activedescendant","typeahead-item-"+m),f(m))},[e]);return T.useEffect(()=>()=>{const m=e.getRootElement();m!==null&&m.removeAttribute("aria-activedescendant")},[e]),IE(()=>{i===null?f(null):c===null&&u&&p(0)},[i,c,p,u]),T.useEffect(()=>_t(e.registerCommand(bp,({option:m})=>!(!m.ref||m.ref.current==null)&&(yp(m.ref.current),!0),l)),[e,p,l]),T.useEffect(()=>_t(e.registerCommand(dd,m=>{const _=m;if(i!==null&&i.length){const C=c===null?0:c!==i.length-1?c+1:0;p(C);const v=i[C];v.ref!=null&&v.ref.current&&e.dispatchCommand(bp,{index:C,option:v}),_.preventDefault(),_.stopImmediatePropagation()}return!0},l),e.registerCommand(cd,m=>{const _=m;if(i!==null&&i.length){const C=c===null?i.length-1:c!==0?c-1:i.length-1;p(C);const v=i[C];v.ref!=null&&v.ref.current&&yp(v.ref.current),_.preventDefault(),_.stopImmediatePropagation()}return!0},l),e.registerCommand(Ml,m=>{const _=m;return _.preventDefault(),_.stopImmediatePropagation(),n(),!0},l),e.registerCommand(pd,m=>{const _=m;return i!==null&&c!==null&&i[c]!=null&&(_.preventDefault(),_.stopImmediatePropagation(),h(i[c]),!0)},l),e.registerCommand(gs,m=>i!==null&&c!==null&&i[c]!=null&&(m!==null&&(m.preventDefault(),m.stopImmediatePropagation()),h(i[c]),!0),l)),[h,n,e,i,c,p,l]),s(t,T.useMemo(()=>({options:i,selectOptionAndCleanUp:h,selectedIndex:c,setHighlightedIndex:f}),[h,c,i]),r.match?r.match.matchingString:"")}function vp(n,e){e!=null&&(n.className=e),n.setAttribute("aria-label","Typeahead menu"),n.setAttribute("role","listbox"),n.style.display="block",n.style.position="absolute"}function $E({options:n,onWillOpen:e,onClose:t,onOpen:r,onSelectOption:i,menuRenderFn:s,anchorClassName:o,commandPriority:a=Is,parent:l}){const[u]=we(),[c,f]=T.useState(null),d=T.useRef(null),h=function(v,k,M,$=Tc?document.body:void 0,x=!0){const[O]=we(),N=Tc?document.createElement("div"):null,I=T.useRef(N),H=T.useCallback(()=>{if(I.current===null||$===void 0)return;I.current.style.top=I.current.style.bottom;const q=O.getRootElement(),S=I.current,K=S.firstChild;if(q!==null&&v!==null){const{left:A,top:P,width:j,height:z}=v.getRect(),J=I.current.offsetHeight;if(S.style.top=`${P+J+3+(x?window.pageYOffset:0)}px`,S.style.left=`${A+window.pageXOffset}px`,S.style.height=`${z}px`,S.style.width=`${j}px`,K!==null){K.style.top=`${P}`;const W=K.getBoundingClientRect(),Q=W.height,ie=W.width,te=q.getBoundingClientRect();A+ie>te.right&&(S.style.left=`${te.right-ie+window.pageXOffset}px`),(P+Q>window.innerHeight||P+Q>te.bottom)&&P-te.top>Q+z&&(S.style.top=`${P-Q-z+(x?window.pageYOffset:0)}px`)}S.isConnected||(vp(S,M),$.append(S)),S.setAttribute("id","typeahead-menu"),q.setAttribute("aria-controls","typeahead-menu")}},[O,v,x,M,$]);T.useEffect(()=>{const q=O.getRootElement();return v!==null&&H(),()=>{q!==null&&q.removeAttribute("aria-controls");const S=I.current;S!==null&&S.isConnected&&(S.remove(),S.removeAttribute("id"))}},[O,H,v]);const w=T.useCallback(q=>{v!==null&&(q||k(null))},[v,k]);return LE(v,I.current,H,w),N!=null&&N===I.current&&(vp(N,M),$!=null&&$.append(N)),I}(c,f,o,l),p=T.useCallback(()=>{f(null),t!=null&&c!==null&&t()},[t,c]),m=T.useCallback(v=>{f(v),r!=null&&c===null&&r(v)},[r,c]),_=T.useCallback(v=>{v.preventDefault(),e!=null&&e(v);const k=yC(v.target);m({getRect:()=>new DOMRect(v.clientX/k,v.clientY/k,1,1)})},[m,e]),C=T.useCallback(v=>{c!==null&&d.current!=null&&v.target!=null&&ji(v.target)&&!d.current.contains(v.target)&&p()},[p,c]);return T.useEffect(()=>{const v=u.getRootElement();if(v)return v.addEventListener("contextmenu",_),()=>v.removeEventListener("contextmenu",_)},[u,_]),T.useEffect(()=>(document.addEventListener("click",C),()=>document.removeEventListener("click",C)),[u,C]),h.current===null||c===null||u===null?null:L.jsx(PE,{close:p,resolution:c,editor:u,anchorElementRef:h,options:n,menuRenderFn:(v,k)=>s(v,k,{setMenuRef:M=>{d.current=M}}),onSelectOption:i,commandPriority:a})}function FE({defaultSelection:n}){const[e]=we();return T.useEffect(()=>{e.focus(()=>{const t=document.activeElement,r=e.getRootElement();r===null||t!==null&&r.contains(t)||r.focus({preventScroll:!0})},{defaultSelection:n})},[n,e]),null}const BE=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function qE({onClear:n}){const[e]=we();return BE(()=>e.registerCommand(md,t=>(e.update(()=>{if(n==null){const r=De(),i=ne(),s=kn();r.clear(),r.append(s),i!==null&&s.select(),G(i)&&(i.format=0)}else n()}),!0),ye),[e,n]),null}const Cp=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],Ep=Cp[Math.floor(Math.random()*Cp.length)],jE=T.createContext({clientID:0,color:Ep[1],isCollabActive:!1,name:Ep[0],yjsDocMap:new Map});function b_(n,e){return T.useContext(jE)}const UE=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function WE({ignoreHistoryMergeTagChange:n=!0,ignoreSelectionChange:e=!1,onChange:t}){const[r]=we();return UE(()=>{if(t)return r.registerUpdateListener(({editorState:i,dirtyElements:s,dirtyLeaves:o,prevEditorState:a,tags:l})=>{e&&s.size===0&&o.size===0||n&&l.has(vi)||a.isEmpty()||t(i,r,l)})},[r,n,e,t]),null}const $s=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,zE=$s&&"documentMode"in document?document.documentMode:null,HE=!(!$s||!("InputEvent"in window)||zE)&&"getTargetRanges"in new window.InputEvent("input"),KE=$s&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),wp=$s&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,VE=$s&&/^(?=.*Chrome).*/i.test(navigator.userAgent),JE=$s&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!VE;function kp(n,e){e.update(()=>{if(n!==null){const t=xr(n,KeyboardEvent)?null:n.clipboardData,r=ne();if(r!==null&&t!=null){n.preventDefault();const i=jy(e);i!==null&&t.setData("text/html",i),t.setData("text/plain",r.getTextContent())}}})}function GE(n){return _t(n.registerCommand(sr,e=>{const t=ne();return!!G(t)&&(t.deleteCharacter(e),!0)},ye),n.registerCommand(hs,e=>{const t=ne();return!!G(t)&&(t.deleteWord(e),!0)},ye),n.registerCommand(ps,e=>{const t=ne();return!!G(t)&&(t.deleteLine(e),!0)},ye),n.registerCommand(_i,e=>{const t=ne();if(!G(t))return!1;if(typeof e=="string")t.insertText(e);else{const r=e.dataTransfer;if(r!=null)qh(r,t);else{const i=e.data;i&&t.insertText(i)}}return!0},ye),n.registerCommand(tl,()=>{const e=ne();return!!G(e)&&(e.removeText(),!0)},ye),n.registerCommand(Hr,e=>{const t=ne();return!!G(t)&&(t.insertLineBreak(e),!0)},ye),n.registerCommand(wo,()=>{const e=ne();return!!G(e)&&(e.insertLineBreak(),!0)},ye),n.registerCommand(ud,e=>{const t=ne();if(!G(t))return!1;const r=e,i=r.shiftKey;return!!dl(t,!0)&&(r.preventDefault(),fl(t,i,!0),!0)},ye),n.registerCommand(ld,e=>{const t=ne();if(!G(t))return!1;const r=e,i=r.shiftKey;return!!dl(t,!1)&&(r.preventDefault(),fl(t,i,!1),!0)},ye),n.registerCommand(fd,e=>{const t=ne();return!!G(t)&&(!wp||navigator.language!=="ko-KR")&&(e.preventDefault(),n.dispatchCommand(sr,!0))},ye),n.registerCommand(hd,e=>{const t=ne();return!!G(t)&&(e.preventDefault(),n.dispatchCommand(sr,!1))},ye),n.registerCommand(gs,e=>{const t=ne();if(!G(t))return!1;if(e!==null){if((wp||KE||JE)&&HE)return!1;e.preventDefault()}return n.dispatchCommand(Hr,!1)},ye),n.registerCommand(nl,()=>(dy(),!0),ye),n.registerCommand(qi,e=>{const t=ne();return!!G(t)&&(kp(e,n),!0)},ye),n.registerCommand(Ds,e=>{const t=ne();return!!G(t)&&(function(r,i){kp(r,i),i.update(()=>{const s=ne();G(s)&&s.removeText()})}(e,n),!0)},ye),n.registerCommand(Bi,e=>{const t=ne();return!!G(t)&&(function(r,i){r.preventDefault(),i.update(()=>{const s=ne(),o=xr(r,ClipboardEvent)?r.clipboardData:null;o!=null&&G(s)&&qh(o,s)},{tag:ty})}(e,n),!0)},ye),n.registerCommand(Ol,e=>{const t=ne();return!!G(t)&&(e.preventDefault(),!0)},ye),n.registerCommand(gd,e=>{const t=ne();return!!G(t)&&(e.preventDefault(),!0)},ye))}const Ac=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function xp(n){return n.getEditorState().read(Wd(n.isComposing()))}function YE({contentEditable:n,placeholder:e=null,ErrorBoundary:t}){const[r]=we(),i=function(s,o){const[a,l]=T.useState(()=>s.getDecorators());return Ac(()=>s.registerDecoratorListener(u=>{En.flushSync(()=>{l(u)})}),[s]),T.useEffect(()=>{l(s.getDecorators())},[s]),T.useMemo(()=>{const u=[],c=Object.keys(a);for(let f=0;f<c.length;f++){const d=c[f],h=L.jsx(o,{onError:m=>s._onError(m),children:L.jsx(T.Suspense,{fallback:null,children:a[d]})}),p=s.getElementByKey(d);p!==null&&u.push(En.createPortal(h,p,d))}return u},[o,a,s])}(r,t);return function(s){Ac(()=>_t(GE(s),g_(s)),[s])}(r),L.jsxs(L.Fragment,{children:[n,L.jsx(XE,{content:e}),i]})}function XE({content:n}){const[e]=we(),t=function(i){const[s,o]=T.useState(()=>xp(i));return Ac(()=>{function a(){const l=xp(i);o(l)}return a(),_t(i.registerUpdateListener(()=>{a()}),i.registerEditableListener(()=>{a()}))},[i]),s}(e),r=p_();return t?typeof n=="function"?n(r):n:null}const or=()=>new Map,Dc=n=>{const e=or();return n.forEach((t,r)=>{e.set(r,t)}),e},Fs=(n,e,t)=>{let r=n.get(e);return r===void 0&&n.set(e,r=t()),r},QE=(n,e)=>{const t=[];for(const[r,i]of n)t.push(e(i,r));return t},ZE=(n,e)=>{for(const[t,r]of n)if(e(r,t))return!0;return!1},bs=()=>new Set,Pu=n=>n[n.length-1],vs=Array.from,ew=Array.isArray;class tw{constructor(){this._observers=or()}on(e,t){return Fs(this._observers,e,bs).add(t),t}once(e,t){const r=(...i)=>{this.off(e,r),t(...i)};this.on(e,r)}off(e,t){const r=this._observers.get(e);r!==void 0&&(r.delete(t),r.size===0&&this._observers.delete(e))}emit(e,t){return vs((this._observers.get(e)||or()).values()).forEach(r=>r(...t))}destroy(){this._observers=or()}}const Ii=Math.floor,qa=Math.abs,v_=(n,e)=>n<e?n:e,Bs=(n,e)=>n>e?n:e,nw=n=>n!==0?n<0:1/n<0,Sp=1,Tp=2,$u=4,Fu=8,rw=32,C_=64,pl=128,iw=31,Ap=63,yo=127,sw=2147483647,ow=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&Ii(n)===n),aw=n=>n.toLowerCase(),lw=/^\s*/g,uw=n=>n.replace(lw,""),cw=/([A-Z])/g,Dp=(n,e)=>uw(n.replace(cw,t=>`${e}${aw(t)}`)),dw=n=>{const e=unescape(encodeURIComponent(n)),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.codePointAt(i);return r},So=typeof TextEncoder<"u"?new TextEncoder:null,fw=n=>So.encode(n),hw=So?fw:dw;let Bu=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Bu&&Bu.decode(new Uint8Array).length===1&&(Bu=null);class Wo{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const zd=()=>new Wo,pw=n=>{let e=n.cpos;for(let t=0;t<n.bufs.length;t++)e+=n.bufs[t].length;return e},Sr=n=>{const e=new Uint8Array(pw(n));let t=0;for(let r=0;r<n.bufs.length;r++){const i=n.bufs[r];e.set(i,t),t+=i.length}return e.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),t),e},gw=(n,e)=>{const t=n.cbuf.length;t-n.cpos<e&&(n.bufs.push(new Uint8Array(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(Bs(t,e)*2),n.cpos=0)},gt=(n,e)=>{const t=n.cbuf.length;n.cpos===t&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(t*2),n.cpos=0),n.cbuf[n.cpos++]=e},Nc=gt,je=(n,e)=>{for(;e>yo;)gt(n,pl|yo&e),e=Ii(e/128);gt(n,yo&e)},Hd=(n,e)=>{const t=nw(e);for(t&&(e=-e),gt(n,(e>Ap?pl:0)|(t?C_:0)|Ap&e),e=Ii(e/64);e>0;)gt(n,(e>yo?pl:0)|yo&e),e=Ii(e/128)},Mc=new Uint8Array(3e4),mw=Mc.length/3,yw=(n,e)=>{if(e.length<mw){const t=So.encodeInto(e,Mc).written||0;je(n,t);for(let r=0;r<t;r++)gt(n,Mc[r])}else vn(n,hw(e))},_w=(n,e)=>{const t=unescape(encodeURIComponent(e)),r=t.length;je(n,r);for(let i=0;i<r;i++)gt(n,t.codePointAt(i))},ls=So&&So.encodeInto?yw:_w,Kd=(n,e)=>{const t=n.cbuf.length,r=n.cpos,i=v_(t-r,e.length),s=e.length-i;n.cbuf.set(e.subarray(0,i),r),n.cpos+=i,s>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(Bs(t*2,s)),n.cbuf.set(e.subarray(i)),n.cpos=s)},vn=(n,e)=>{je(n,e.byteLength),Kd(n,e)},Vd=(n,e)=>{gw(n,e);const t=new DataView(n.cbuf.buffer,n.cpos,e);return n.cpos+=e,t},bw=(n,e)=>Vd(n,4).setFloat32(0,e,!1),vw=(n,e)=>Vd(n,8).setFloat64(0,e,!1),Cw=(n,e)=>Vd(n,8).setBigInt64(0,e,!1),Np=new DataView(new ArrayBuffer(4)),Ew=n=>(Np.setFloat32(0,n),Np.getFloat32(0)===n),To=(n,e)=>{switch(typeof e){case"string":gt(n,119),ls(n,e);break;case"number":ow(e)&&qa(e)<=sw?(gt(n,125),Hd(n,e)):Ew(e)?(gt(n,124),bw(n,e)):(gt(n,123),vw(n,e));break;case"bigint":gt(n,122),Cw(n,e);break;case"object":if(e===null)gt(n,126);else if(ew(e)){gt(n,117),je(n,e.length);for(let t=0;t<e.length;t++)To(n,e[t])}else if(e instanceof Uint8Array)gt(n,116),vn(n,e);else{gt(n,118);const t=Object.keys(e);je(n,t.length);for(let r=0;r<t.length;r++){const i=t[r];ls(n,i),To(n,e[i])}}break;case"boolean":gt(n,e?120:121);break;default:gt(n,127)}};class Mp extends Wo{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&je(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Op=n=>{n.count>0&&(Hd(n.encoder,n.count===1?n.s:-n.s),n.count>1&&je(n.encoder,n.count-2))};class ja{constructor(){this.encoder=new Wo,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Op(this),this.count=1,this.s=e)}toUint8Array(){return Op(this),Sr(this.encoder)}}const Ip=n=>{if(n.count>0){const e=n.diff*2+(n.count===1?0:1);Hd(n.encoder,e),n.count>1&&je(n.encoder,n.count-2)}};class qu{constructor(){this.encoder=new Wo,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Ip(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Ip(this),Sr(this.encoder)}}class ww{constructor(){this.sarr=[],this.s="",this.lensE=new ja}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Wo;return this.sarr.push(this.s),this.s="",ls(e,this.sarr.join("")),Kd(e,this.lensE.toUint8Array()),Sr(e)}}const Cs=n=>new Error(n),ar=()=>{throw Cs("Method unimplemented")},Ri=()=>{throw Cs("Unexpected case")},kw=crypto.getRandomValues.bind(crypto),E_=()=>kw(new Uint32Array(1))[0],xw="10000000-1000-4000-8000"+-1e11,Sw=()=>xw.replace(/[018]/g,n=>(n^E_()&15>>n/4).toString(16)),Rp=n=>new Promise(n);Promise.all.bind(Promise);const Lp=n=>n===void 0?null:n;class Tw{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let w_=new Tw,Aw=!0;try{typeof localStorage<"u"&&localStorage&&(w_=localStorage,Aw=!1)}catch{}const Dw=w_,Nw=Object.assign,Mw=Object.keys,Ow=(n,e)=>{for(const t in n)e(n[t],t)},Pp=n=>Mw(n).length,Iw=n=>{for(const e in n)return!1;return!0},Rw=(n,e)=>{for(const t in n)if(!e(n[t],t))return!1;return!0},Lw=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),Pw=(n,e)=>n===e||Pp(n)===Pp(e)&&Rw(n,(t,r)=>(t!==void 0||Lw(e,r))&&e[r]===t),$w=Object.freeze,k_=n=>{for(const e in n){const t=n[e];(typeof t=="object"||typeof t=="function")&&k_(n[e])}return $w(n)},Jd=(n,e,t=0)=>{try{for(;t<n.length;t++)n[t](...e)}finally{t<n.length&&Jd(n,e,t+1)}},Fw=(n,e)=>e.includes(n);var x_={};const Ao=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Zn;const Bw=()=>{if(Zn===void 0)if(Ao){Zn=or();const n=process.argv;let e=null;for(let t=0;t<n.length;t++){const r=n[t];r[0]==="-"?(e!==null&&Zn.set(e,""),e=r):e!==null&&(Zn.set(e,r),e=null)}e!==null&&Zn.set(e,"")}else typeof location=="object"?(Zn=or(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){const[e,t]=n.split("=");Zn.set(`--${Dp(e,"-")}`,t),Zn.set(`-${Dp(e,"-")}`,t)}})):Zn=or();return Zn},Oc=n=>Bw().has(n),gl=n=>Lp(Ao?x_[n.toUpperCase().replaceAll("-","_")]:Dw.getItem(n)),S_=n=>Oc("--"+n)||gl(n)!==null;S_("production");const qw=Ao&&Fw(x_.FORCE_COLOR,["true","1","2"]),jw=qw||!Oc("--no-colors")&&!S_("no-color")&&(!Ao||process.stdout.isTTY)&&(!Ao||Oc("--color")||gl("COLORTERM")!==null||(gl("TERM")||"").includes("color"));class Uw{constructor(e,t){this.left=e,this.right=t}}const br=(n,e)=>new Uw(n,e);typeof DOMParser<"u"&&new DOMParser;const Ww=n=>QE(n,(e,t)=>`${t}:${e};`).join(""),Ir=Symbol,T_=Ir(),A_=Ir(),zw=Ir(),Hw=Ir(),Kw=Ir(),D_=Ir(),Vw=Ir(),Gd=Ir(),Jw=Ir(),Gw=n=>{var i;n.length===1&&((i=n[0])==null?void 0:i.constructor)===Function&&(n=n[0]());const e=[],t=[];let r=0;for(;r<n.length;r++){const s=n[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&t.push(e.join(""));r<n.length;r++){const s=n[r];s instanceof Symbol||t.push(s)}return t},Yw={[T_]:br("font-weight","bold"),[A_]:br("font-weight","normal"),[zw]:br("color","blue"),[Kw]:br("color","green"),[Hw]:br("color","grey"),[D_]:br("color","red"),[Vw]:br("color","purple"),[Gd]:br("color","orange"),[Jw]:br("color","black")},Xw=n=>{var o;n.length===1&&((o=n[0])==null?void 0:o.constructor)===Function&&(n=n[0]());const e=[],t=[],r=or();let i=[],s=0;for(;s<n.length;s++){const a=n[s],l=Yw[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const u=Ww(r);s>0||u.length>0?(e.push("%c"+a),t.push(u)):e.push(a)}else break}}for(s>0&&(i=t,i.unshift(e.join("")));s<n.length;s++){const a=n[s];a instanceof Symbol||i.push(a)}return i},N_=jw?Xw:Gw,Qw=(...n)=>{console.log(...N_(n)),M_.forEach(e=>e.print(n))},Zw=(...n)=>{console.warn(...N_(n)),n.unshift(Gd),M_.forEach(e=>e.print(n))},M_=bs(),O_=n=>({[Symbol.iterator](){return this},next:n}),ek=(n,e)=>O_(()=>{let t;do t=n.next();while(!t.done&&!e(t.value));return t}),ju=(n,e)=>O_(()=>{const{done:t,value:r}=n.next();return{done:t,value:t?void 0:e(r)}});class tk{constructor(e,t){this.clock=e,this.len=t}}class nk{constructor(){this.clients=new Map}}const I_=(n,e,t)=>e.clients.forEach((r,i)=>{const s=n.doc.store.clients.get(i);if(s!=null){const o=s[s.length-1],a=o.id.clock+o.length;for(let l=0,u=r[l];l<r.length&&u.clock<a;u=r[++l])q_(n,s,u.clock,u.len,t)}}),rk=(n,e)=>{let t=0,r=n.length-1;for(;t<=r;){const i=Ii((t+r)/2),s=n[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;t=i+1}else r=i-1}return null},R_=(n,e)=>{const t=n.clients.get(e.client);return t!==void 0&&rk(t,e.clock)!==null},L_=n=>{n.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let t,r;for(t=1,r=1;t<e.length;t++){const i=e[r-1],s=e[t];i.clock+i.len>=s.clock?i.len=Bs(i.len,s.clock+s.len-i.clock):(r<t&&(e[r]=s),r++)}e.length=r})},P_=(n,e,t,r)=>{Fs(n.clients,e,()=>[]).push(new tk(t,r))},ik=(n,e)=>{je(n.restEncoder,e.clients.size),vs(e.clients.entries()).sort((t,r)=>r[0]-t[0]).forEach(([t,r])=>{n.resetDsCurVal(),je(n.restEncoder,t);const i=r.length;je(n.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];n.writeDsClock(o.clock),n.writeDsLen(o.len)}})},$_=E_;class zo extends tw{constructor({guid:e=Sw(),collectionid:t=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=$_(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new pk,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Rp(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const l=()=>Rp(u=>{const c=f=>{(f===void 0||f===!0)&&(this.off("sync",c),u())};this.on("sync",c)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&ze(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(vs(this.subdocs).map(e=>e.guid))}transact(e,t=null){return ze(this,e,t)}get(e,t=Dt){const r=Fs(this.share,e,()=>{const s=new t;return s._integrate(this,null),s}),i=r.constructor;if(t!==Dt&&i!==t)if(i===Dt){const s=new t;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,ki)}getText(e=""){return this.get(e,_l)}getMap(e=""){return this.get(e,Es)}getXmlElement(e=""){return this.get(e,Mo)}getXmlFragment(e=""){return this.get(e,ws)}toJSON(){const e={};return this.share.forEach((t,r)=>{e[r]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,vs(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;t.doc=new zo({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,ze(e.parent.doc,r=>{const i=t.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class sk{constructor(){this.restEncoder=zd()}toUint8Array(){return Sr(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){je(this.restEncoder,e)}writeDsLen(e){je(this.restEncoder,e)}}class ok extends sk{writeLeftID(e){je(this.restEncoder,e.client),je(this.restEncoder,e.clock)}writeRightID(e){je(this.restEncoder,e.client),je(this.restEncoder,e.clock)}writeClient(e){je(this.restEncoder,e)}writeInfo(e){Nc(this.restEncoder,e)}writeString(e){ls(this.restEncoder,e)}writeParentInfo(e){je(this.restEncoder,e?1:0)}writeTypeRef(e){je(this.restEncoder,e)}writeLen(e){je(this.restEncoder,e)}writeAny(e){To(this.restEncoder,e)}writeBuf(e){vn(this.restEncoder,e)}writeJSON(e){ls(this.restEncoder,JSON.stringify(e))}writeKey(e){ls(this.restEncoder,e)}}class ak{constructor(){this.restEncoder=zd(),this.dsCurrVal=0}toUint8Array(){return Sr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,je(this.restEncoder,t)}writeDsLen(e){e===0&&Ri(),je(this.restEncoder,e-1),this.dsCurrVal+=e}}class lk extends ak{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new qu,this.clientEncoder=new ja,this.leftClockEncoder=new qu,this.rightClockEncoder=new qu,this.infoEncoder=new Mp(Nc),this.stringEncoder=new ww,this.parentInfoEncoder=new Mp(Nc),this.typeRefEncoder=new ja,this.lenEncoder=new ja}toUint8Array(){const e=zd();return je(e,0),vn(e,this.keyClockEncoder.toUint8Array()),vn(e,this.clientEncoder.toUint8Array()),vn(e,this.leftClockEncoder.toUint8Array()),vn(e,this.rightClockEncoder.toUint8Array()),vn(e,Sr(this.infoEncoder)),vn(e,this.stringEncoder.toUint8Array()),vn(e,Sr(this.parentInfoEncoder)),vn(e,this.typeRefEncoder.toUint8Array()),vn(e,this.lenEncoder.toUint8Array()),Kd(e,Sr(this.restEncoder)),Sr(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){To(this.restEncoder,e)}writeBuf(e){vn(this.restEncoder,e)}writeJSON(e){To(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const uk=(n,e,t,r)=>{r=Bs(r,e[0].id.clock);const i=Nr(e,r);je(n.restEncoder,e.length-i),n.writeClient(t),je(n.restEncoder,r);const s=e[i];s.write(n,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(n,0)},ck=(n,e,t)=>{const r=new Map;t.forEach((i,s)=>{sn(e,s)>i&&r.set(s,i)}),Yd(e).forEach((i,s)=>{t.has(s)||r.set(s,0)}),je(n.restEncoder,r.size),vs(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{uk(n,e.clients.get(i),i,s)})},dk=(n,e)=>ck(n,e.doc.store,e.beforeState);class fk{constructor(){this.l=[]}}const $p=()=>new fk,Fp=(n,e)=>n.l.push(e),Bp=(n,e)=>{const t=n.l,r=t.length;n.l=t.filter(i=>e!==i),r===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},F_=(n,e,t)=>Jd(n.l,[e,t]);class Ua{constructor(e,t){this.client=e,this.clock=t}}const ba=(n,e)=>n===e||n!==null&&e!==null&&n.client===e.client&&n.clock===e.clock,Xe=(n,e)=>new Ua(n,e),hk=n=>{for(const[e,t]of n.doc.share.entries())if(t===n)return e;throw Ri()},ts=(n,e)=>e===void 0?!n.deleted:e.sv.has(n.id.client)&&(e.sv.get(n.id.client)||0)>n.id.clock&&!R_(e.ds,n.id),Ic=(n,e)=>{const t=Fs(n.meta,Ic,bs),r=n.doc.store;t.has(e)||(e.sv.forEach((i,s)=>{i<sn(r,s)&&Zr(n,Xe(s,i))}),I_(n,e.ds,i=>{}),t.add(e))};class pk{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Yd=n=>{const e=new Map;return n.clients.forEach((t,r)=>{const i=t[t.length-1];e.set(r,i.id.clock+i.length)}),e},sn=(n,e)=>{const t=n.clients.get(e);if(t===void 0)return 0;const r=t[t.length-1];return r.id.clock+r.length},B_=(n,e)=>{let t=n.clients.get(e.id.client);if(t===void 0)t=[],n.clients.set(e.id.client,t);else{const r=t[t.length-1];if(r.id.clock+r.length!==e.id.clock)throw Ri()}t.push(e)},Nr=(n,e)=>{let t=0,r=n.length-1,i=n[r],s=i.id.clock;if(s===e)return r;let o=Ii(e/(s+i.length-1)*r);for(;t<=r;){if(i=n[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;t=o+1}else r=o-1;o=Ii((t+r)/2)}throw Ri()},gk=(n,e)=>{const t=n.clients.get(e.client);return t[Nr(t,e.clock)]},Uu=gk,Rc=(n,e,t)=>{const r=Nr(e,t),i=e[r];return i.id.clock<t&&i instanceof $t?(e.splice(r+1,0,sb(n,i,t-i.id.clock)),r+1):r},Zr=(n,e)=>{const t=n.doc.store.clients.get(e.client);return t[Rc(n,t,e.clock)]},qp=(n,e,t)=>{const r=e.clients.get(t.client),i=Nr(r,t.clock),s=r[i];return t.clock!==s.id.clock+s.length-1&&s.constructor!==Br&&r.splice(i+1,0,sb(n,s,t.clock-s.id.clock+1)),s},mk=(n,e,t)=>{const r=n.clients.get(e.id.client);r[Nr(r,e.id.clock)]=t},q_=(n,e,t,r,i)=>{if(r===0)return;const s=t+r;let o=Rc(n,e,t),a;do a=e[o++],s<a.id.clock+a.length&&Rc(n,e,s),i(a);while(o<e.length&&e[o].id.clock<s)};class yk{constructor(e,t,r){this.doc=e,this.deleteSet=new nk,this.beforeState=Yd(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const jp=(n,e)=>e.deleteSet.clients.size===0&&!ZE(e.afterState,(t,r)=>e.beforeState.get(r)!==t)?!1:(L_(e.deleteSet),dk(n,e),ik(n,e.deleteSet),!0),Up=(n,e,t)=>{const r=e._item;(r===null||r.id.clock<(n.beforeState.get(r.id.client)||0)&&!r.deleted)&&Fs(n.changed,e,bs).add(t)},Wa=(n,e)=>{let t=n[e],r=n[e-1],i=e;for(;i>0;t=r,r=n[--i-1]){if(r.deleted===t.deleted&&r.constructor===t.constructor&&r.mergeWith(t)){t instanceof $t&&t.parentSub!==null&&t.parent._map.get(t.parentSub)===t&&t.parent._map.set(t.parentSub,r);continue}break}const s=e-i;return s&&n.splice(e+1-s,s),s},_k=(n,e,t)=>{for(const[r,i]of n.clients.entries()){const s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){const a=i[o],l=a.clock+a.len;for(let u=Nr(s,a.clock),c=s[u];u<s.length&&c.id.clock<l;c=s[++u]){const f=s[u];if(a.clock+a.len<=f.id.clock)break;f instanceof $t&&f.deleted&&!f.keep&&t(f)&&f.gc(e,!1)}}}},bk=(n,e)=>{n.clients.forEach((t,r)=>{const i=e.clients.get(r);for(let s=t.length-1;s>=0;s--){const o=t[s],a=v_(i.length-1,1+Nr(i,o.clock+o.len-1));for(let l=a,u=i[l];l>0&&u.id.clock>=o.clock;u=i[l])l-=1+Wa(i,l)}})},j_=(n,e)=>{if(e<n.length){const t=n[e],r=t.doc,i=r.store,s=t.deleteSet,o=t._mergeStructs;try{L_(s),t.afterState=Yd(t.doc.store),r.emit("beforeObserverCalls",[t,r]);const a=[];t.changed.forEach((l,u)=>a.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(t,l)})),a.push(()=>{t.changedParentTypes.forEach((l,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(l=l.filter(c=>c.target._item===null||!c.target._item.deleted),l.forEach(c=>{c.currentTarget=u,c._path=null}),l.sort((c,f)=>c.path.length-f.path.length),F_(u._dEH,l,t))})}),a.push(()=>r.emit("afterTransaction",[t,r])),Jd(a,[]),t._needFormattingCleanup&&Nk(t)}finally{r.gc&&_k(s,i,r.gcFilter),bk(s,i),t.afterState.forEach((c,f)=>{const d=t.beforeState.get(f)||0;if(d!==c){const h=i.clients.get(f),p=Bs(Nr(h,d),1);for(let m=h.length-1;m>=p;)m-=1+Wa(h,m)}});for(let c=o.length-1;c>=0;c--){const{client:f,clock:d}=o[c].id,h=i.clients.get(f),p=Nr(h,d);p+1<h.length&&Wa(h,p+1)>1||p>0&&Wa(h,p)}if(!t.local&&t.afterState.get(r.clientID)!==t.beforeState.get(r.clientID)&&(Qw(Gd,T_,"[yjs] ",A_,D_,"Changed the client-id because another client seems to be using it."),r.clientID=$_()),r.emit("afterTransactionCleanup",[t,r]),r._observers.has("update")){const c=new ok;jp(c,t)&&r.emit("update",[c.toUint8Array(),t.origin,r,t])}if(r._observers.has("updateV2")){const c=new lk;jp(c,t)&&r.emit("updateV2",[c.toUint8Array(),t.origin,r,t])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:u}=t;(a.size>0||u.size>0||l.size>0)&&(a.forEach(c=>{c.clientID=r.clientID,c.collectionid==null&&(c.collectionid=r.collectionid),r.subdocs.add(c)}),u.forEach(c=>r.subdocs.delete(c)),r.emit("subdocs",[{loaded:l,added:a,removed:u},r,t]),u.forEach(c=>c.destroy())),n.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,n])):j_(n,e+1)}}},ze=(n,e,t=null,r=!0)=>{const i=n._transactionCleanups;let s=!1,o=null;n._transaction===null&&(s=!0,n._transaction=new yk(n,t,r),i.push(n._transaction),i.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{o=e(n._transaction)}finally{if(s){const a=n._transaction===i[0];n._transaction=null,a&&j_(i,0)}}return o},Wp="You must not compute changes after the event-handler fired.";class Wl{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=vk(this.currentTarget,this.target))}deletes(e){return R_(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Cs(Wp);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(i=>{if(i!==null){const s=t._map.get(i);let o,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))o="delete",a=Pu(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=Pu(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(s))o="delete",a=Pu(s.content.getContent());else return;e.set(i,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Cs(Wp);const t=this.target,r=bs(),i=bs(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(t).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let u=t._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=u.length,i.add(u)):this.adds(u)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(u.content.getContent()),r.add(u)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=u.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const vk=(n,e)=>{const t=[];for(;e._item!==null&&e!==n;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;t.unshift(r)}e=e._item.parent}return t},Ft=()=>{Zw("Invalid access: Add Yjs type to a document before reading data.")},U_=80;let Xd=0;class Ck{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=Xd++}}const Ek=n=>{n.timestamp=Xd++},W_=(n,e,t)=>{n.p.marker=!1,n.p=e,e.marker=!0,n.index=t,n.timestamp=Xd++},wk=(n,e,t)=>{if(n.length>=U_){const r=n.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return W_(r,e,t),r}else{const r=new Ck(e,t);return n.push(r),r}},zl=(n,e)=>{if(n._start===null||e===0||n._searchMarker===null)return null;const t=n._searchMarker.length===0?null:n._searchMarker.reduce((s,o)=>qa(e-s.index)<qa(e-o.index)?s:o);let r=n._start,i=0;for(t!==null&&(r=t.p,i=t.index,Ek(t));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return t!==null&&qa(t.index-i)<r.parent.length/U_?(W_(t,r,i),t):wk(n._searchMarker,r,i)},Do=(n,e,t)=>{for(let r=n.length-1;r>=0;r--){const i=n[r];if(t>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){n.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||t>0&&e===i.index)&&(i.index=Bs(e,i.index+t))}},Hl=(n,e,t)=>{const r=n,i=e.changedParentTypes;for(;Fs(i,n,()=>[]).push(t),n._item!==null;)n=n._item.parent;F_(r._eH,t,e)};class Dt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=$p(),this._dEH=$p(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw ar()}clone(){throw ar()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Fp(this._eH,e)}observeDeep(e){Fp(this._dEH,e)}unobserve(e){Bp(this._eH,e)}unobserveDeep(e){Bp(this._dEH,e)}toJSON(){}}const z_=(n,e,t)=>{n.doc??Ft(),e<0&&(e=n._length+e),t<0&&(t=n._length+t);let r=t-e;const i=[];let s=n._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&r>0;a++)i.push(o[a]),r--;e=0}}s=s.right}return i},H_=n=>{n.doc??Ft();const e=[];let t=n._start;for(;t!==null;){if(t.countable&&!t.deleted){const r=t.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}t=t.right}return e},No=(n,e)=>{let t=0,r=n._start;for(n.doc??Ft();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],t++,n)}r=r.right}},K_=(n,e)=>{const t=[];return No(n,(r,i)=>{t.push(e(r,i,n))}),t},kk=n=>{let e=n._start,t=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),r=0,e=e.right}const i=t[r++];return t.length<=r&&(t=null),{done:!1,value:i}}}},V_=(n,e)=>{n.doc??Ft();const t=zl(n,e);let r=n._start;for(t!==null&&(r=t.p,e-=t.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},ml=(n,e,t,r)=>{let i=t;const s=n.doc,o=s.clientID,a=s.store,l=t===null?e._start:t.right;let u=[];const c=()=>{u.length>0&&(i=new $t(Xe(o,sn(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new ks(u)),i.integrate(n,0),u=[])};r.forEach(f=>{if(f===null)u.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(f);break;default:switch(c(),f.constructor){case Uint8Array:case ArrayBuffer:i=new $t(Xe(o,sn(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new Kl(new Uint8Array(f))),i.integrate(n,0);break;case zo:i=new $t(Xe(o,sn(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new Vl(f)),i.integrate(n,0);break;default:if(f instanceof Dt)i=new $t(Xe(o,sn(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new li(f)),i.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),c()},J_=()=>Cs("Length exceeded!"),G_=(n,e,t,r)=>{if(t>e._length)throw J_();if(t===0)return e._searchMarker&&Do(e._searchMarker,t,r.length),ml(n,e,null,r);const i=t,s=zl(e,t);let o=e._start;for(s!==null&&(o=s.p,t-=s.index,t===0&&(o=o.prev,t+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(t<=o.length){t<o.length&&Zr(n,Xe(o.id.client,o.id.clock+t));break}t-=o.length}return e._searchMarker&&Do(e._searchMarker,i,r.length),ml(n,e,o,r)},xk=(n,e,t)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return ml(n,e,i,t)},Y_=(n,e,t,r)=>{if(r===0)return;const i=t,s=r,o=zl(e,t);let a=e._start;for(o!==null&&(a=o.p,t-=o.index);a!==null&&t>0;a=a.right)!a.deleted&&a.countable&&(t<a.length&&Zr(n,Xe(a.id.client,a.id.clock+t)),t-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&Zr(n,Xe(a.id.client,a.id.clock+r)),a.delete(n),r-=a.length),a=a.right;if(r>0)throw J_();e._searchMarker&&Do(e._searchMarker,i,-s+r)},yl=(n,e,t)=>{const r=e._map.get(t);r!==void 0&&r.delete(n)},Qd=(n,e,t,r)=>{const i=e._map.get(t)||null,s=n.doc,o=s.clientID;let a;if(r==null)a=new ks([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new ks([r]);break;case Uint8Array:a=new Kl(r);break;case zo:a=new Vl(r);break;default:if(r instanceof Dt)a=new li(r);else throw new Error("Unexpected content type")}new $t(Xe(o,sn(s.store,o)),i,i&&i.lastId,null,null,e,t,a).integrate(n,0)},Zd=(n,e)=>{n.doc??Ft();const t=n._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},X_=n=>{const e={};return n.doc??Ft(),n._map.forEach((t,r)=>{t.deleted||(e[r]=t.content.getContent()[t.length-1])}),e},Q_=(n,e)=>{n.doc??Ft();const t=n._map.get(e);return t!==void 0&&!t.deleted},Sk=(n,e)=>{const t={};return n._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&ts(s,e)&&(t[i]=s.content.getContent()[s.length-1])}),t},va=n=>(n.doc??Ft(),ek(n._map.entries(),e=>!e[1].deleted));class Z_ extends Wl{}class ki extends Dt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new ki;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ki}clone(){const e=new ki;return e.insert(0,this.toArray().map(t=>t instanceof Dt?t.clone():t)),e}get length(){return this.doc??Ft(),this._length}_callObserver(e,t){super._callObserver(e,t),Hl(this,e,new Z_(this,e))}insert(e,t){this.doc!==null?ze(this.doc,r=>{G_(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?ze(this.doc,t=>{xk(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?ze(this.doc,r=>{Y_(r,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return V_(this,e)}toArray(){return H_(this)}slice(e=0,t=this.length){return z_(this,e,t)}toJSON(){return this.map(e=>e instanceof Dt?e.toJSON():e)}map(e){return K_(this,e)}forEach(e){No(this,e)}[Symbol.iterator](){return kk(this)}_write(e){e.writeTypeRef(Pk)}}class Tk extends Wl{constructor(e,t,r){super(e,t),this.keysChanged=r}}class Es extends Dt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Es}clone(){const e=new Es;return this.forEach((t,r)=>{e.set(r,t instanceof Dt?t.clone():t)}),e}_callObserver(e,t){Hl(this,e,new Tk(this,e,t))}toJSON(){this.doc??Ft();const e={};return this._map.forEach((t,r)=>{if(!t.deleted){const i=t.content.getContent()[t.length-1];e[r]=i instanceof Dt?i.toJSON():i}}),e}get size(){return[...va(this)].length}keys(){return ju(va(this),e=>e[0])}values(){return ju(va(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return ju(va(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Ft(),this._map.forEach((t,r)=>{t.deleted||e(t.content.getContent()[t.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?ze(this.doc,t=>{yl(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?ze(this.doc,r=>{Qd(r,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return Zd(this,e)}has(e){return Q_(this,e)}clear(){this.doc!==null?ze(this.doc,e=>{this.forEach(function(t,r,i){yl(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef($k)}}const Wr=(n,e)=>n===e||typeof n=="object"&&typeof e=="object"&&n&&e&&Pw(n,e);class Lc{constructor(e,t,r,i){this.left=e,this.right=t,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Ri(),this.right.content.constructor){case bt:this.right.deleted||qs(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const zp=(n,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case bt:e.right.deleted||qs(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&Zr(n,Xe(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Ca=(n,e,t,r)=>{const i=new Map,s=r?zl(e,t):null;if(s){const o=new Lc(s.p.left,s.p,s.index,i);return zp(n,o,t-s.index)}else{const o=new Lc(null,e._start,0,i);return zp(n,o,t)}},eb=(n,e,t,r)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===bt&&Wr(r.get(t.right.content.key),t.right.content.value));)t.right.deleted||r.delete(t.right.content.key),t.forward();const i=n.doc,s=i.clientID;r.forEach((o,a)=>{const l=t.left,u=t.right,c=new $t(Xe(s,sn(i.store,s)),l,l&&l.lastId,u,u&&u.id,e,null,new bt(a,o));c.integrate(n,0),t.right=c,t.forward()})},qs=(n,e)=>{const{key:t,value:r}=e;r===null?n.delete(t):n.set(t,r)},tb=(n,e)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===bt&&Wr(e[n.right.content.key]??null,n.right.content.value)))break;n.forward()}},nb=(n,e,t,r)=>{const i=n.doc,s=i.clientID,o=new Map;for(const a in r){const l=r[a],u=t.currentAttributes.get(a)??null;if(!Wr(u,l)){o.set(a,u);const{left:c,right:f}=t;t.right=new $t(Xe(s,sn(i.store,s)),c,c&&c.lastId,f,f&&f.id,e,null,new bt(a,l)),t.right.integrate(n,0),t.forward()}}return o},Wu=(n,e,t,r,i)=>{t.currentAttributes.forEach((d,h)=>{i[h]===void 0&&(i[h]=null)});const s=n.doc,o=s.clientID;tb(t,i);const a=nb(n,e,t,i),l=r.constructor===String?new Mr(r):r instanceof Dt?new li(r):new js(r);let{left:u,right:c,index:f}=t;e._searchMarker&&Do(e._searchMarker,t.index,l.getLength()),c=new $t(Xe(o,sn(s.store,o)),u,u&&u.lastId,c,c&&c.id,e,null,l),c.integrate(n,0),t.right=c,t.index=f,t.forward(),eb(n,e,t,a)},Hp=(n,e,t,r,i)=>{const s=n.doc,o=s.clientID;tb(t,i);const a=nb(n,e,t,i);e:for(;t.right!==null&&(r>0||a.size>0&&(t.right.deleted||t.right.content.constructor===bt));){if(!t.right.deleted)switch(t.right.content.constructor){case bt:{const{key:l,value:u}=t.right.content,c=i[l];if(c!==void 0){if(Wr(c,u))a.delete(l);else{if(r===0)break e;a.set(l,u)}t.right.delete(n)}else t.currentAttributes.set(l,u);break}default:r<t.right.length&&Zr(n,Xe(t.right.id.client,t.right.id.clock+r)),r-=t.right.length;break}t.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;t.right=new $t(Xe(o,sn(s.store,o)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new Mr(l)),t.right.integrate(n,0),t.forward()}eb(n,e,t,a)},rb=(n,e,t,r,i)=>{let s=e;const o=or();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===bt){const u=s.content;o.set(u.key,u)}s=s.right}let a=0,l=!1;for(;e!==s;){if(t===e&&(l=!0),!e.deleted){const u=e.content;switch(u.constructor){case bt:{const{key:c,value:f}=u,d=r.get(c)??null;(o.get(c)!==u||d===f)&&(e.delete(n),a++,!l&&(i.get(c)??null)===f&&d!==f&&(d===null?i.delete(c):i.set(c,d))),!l&&!e.deleted&&qs(i,u);break}}}e=e.right}return a},Ak=(n,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===bt){const r=e.content.key;t.has(r)?e.delete(n):t.add(r)}e=e.left}},Dk=n=>{let e=0;return ze(n.doc,t=>{let r=n._start,i=n._start,s=or();const o=Dc(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case bt:qs(o,i.content);break;default:e+=rb(t,r,i,s,o),s=Dc(o),r=i;break}i=i.right}}),e},Nk=n=>{const e=new Set,t=n.doc;for(const[r,i]of n.afterState.entries()){const s=n.beforeState.get(r)||0;i!==s&&q_(n,t.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===bt&&o.constructor!==Br&&e.add(o.parent)})}ze(t,r=>{I_(n,n.deleteSet,i=>{if(i instanceof Br||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===bt?e.add(s):Ak(r,i)});for(const i of e)Dk(i)})},Kp=(n,e,t)=>{const r=t,i=Dc(e.currentAttributes),s=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case li:case js:case Mr:t<e.right.length&&Zr(n,Xe(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(n);break}e.forward()}s&&rb(n,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&Do(o._searchMarker,e.index,-r+t),e};class Mk extends Wl{constructor(e,t,r){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];ze(e,r=>{const i=new Map,s=new Map;let o=this.target._start,a=null;const l={};let u="",c=0,f=0;const d=()=>{if(a!==null){let h=null;switch(a){case"delete":f>0&&(h={delete:f}),f=0;break;case"insert":(typeof u=="object"||u.length>0)&&(h={insert:u},i.size>0&&(h.attributes={},i.forEach((p,m)=>{p!==null&&(h.attributes[m]=p)}))),u="";break;case"retain":c>0&&(h={retain:c},Iw(l)||(h.attributes=Nw({},l))),c=0;break}h&&t.push(h),a=null}};for(;o!==null;){switch(o.content.constructor){case li:case js:this.adds(o)?this.deletes(o)||(d(),a="insert",u=o.content.getContent()[0],d()):this.deletes(o)?(a!=="delete"&&(d(),a="delete"),f+=1):o.deleted||(a!=="retain"&&(d(),a="retain"),c+=1);break;case Mr:this.adds(o)?this.deletes(o)||(a!=="insert"&&(d(),a="insert"),u+=o.content.str):this.deletes(o)?(a!=="delete"&&(d(),a="delete"),f+=o.length):o.deleted||(a!=="retain"&&(d(),a="retain"),c+=o.length);break;case bt:{const{key:h,value:p}=o.content;if(this.adds(o)){if(!this.deletes(o)){const m=i.get(h)??null;Wr(m,p)?p!==null&&o.delete(r):(a==="retain"&&d(),Wr(p,s.get(h)??null)?delete l[h]:l[h]=p)}}else if(this.deletes(o)){s.set(h,p);const m=i.get(h)??null;Wr(m,p)||(a==="retain"&&d(),l[h]=m)}else if(!o.deleted){s.set(h,p);const m=l[h];m!==void 0&&(Wr(m,p)?m!==null&&o.delete(r):(a==="retain"&&d(),p===null?delete l[h]:l[h]=p))}o.deleted||(a==="insert"&&d(),qs(i,o.content));break}}o=o.right}for(d();t.length>0;){const h=t[t.length-1];if(h.retain!==void 0&&h.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class _l extends Dt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Ft(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new _l}clone(){const e=new _l;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const r=new Mk(this,e,t);Hl(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Ft();let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===Mr&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?ze(this.doc,r=>{const i=new Lc(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const a=!t&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&Wu(r,this,i,a,o.attributes||{})}else o.retain!==void 0?Hp(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&Kp(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,r){this.doc??Ft();const i=[],s=new Map,o=this.doc;let a="",l=this._start;function u(){if(a.length>0){const f={};let d=!1;s.forEach((p,m)=>{d=!0,f[m]=p});const h={insert:a};d&&(h.attributes=f),i.push(h),a=""}}const c=()=>{for(;l!==null;){if(ts(l,e)||t!==void 0&&ts(l,t))switch(l.content.constructor){case Mr:{const f=s.get("ychange");e!==void 0&&!ts(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(u(),s.set("ychange",r?r("removed",l.id):{type:"removed"})):t!==void 0&&!ts(l,t)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(u(),s.set("ychange",r?r("added",l.id):{type:"added"})):f!==void 0&&(u(),s.delete("ychange")),a+=l.content.str;break}case li:case js:{u();const f={insert:l.content.getContent()[0]};if(s.size>0){const d={};f.attributes=d,s.forEach((h,p)=>{d[p]=h})}i.push(f);break}case bt:ts(l,e)&&(u(),qs(s,l.content));break}l=l.right}u()};return e||t?ze(o,f=>{e&&Ic(f,e),t&&Ic(f,t),c()},"cleanup"):c(),i}insert(e,t,r){if(t.length<=0)return;const i=this.doc;i!==null?ze(i,s=>{const o=Ca(s,this,e,!r);r||(r={},o.currentAttributes.forEach((a,l)=>{r[l]=a})),Wu(s,this,o,t,r)}):this._pending.push(()=>this.insert(e,t,r))}insertEmbed(e,t,r){const i=this.doc;i!==null?ze(i,s=>{const o=Ca(s,this,e,!r);Wu(s,this,o,t,r||{})}):this._pending.push(()=>this.insertEmbed(e,t,r||{}))}delete(e,t){if(t===0)return;const r=this.doc;r!==null?ze(r,i=>{Kp(i,Ca(i,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,r){if(t===0)return;const i=this.doc;i!==null?ze(i,s=>{const o=Ca(s,this,e,!1);o.right!==null&&Hp(s,this,o,t,r)}):this._pending.push(()=>this.format(e,t,r))}removeAttribute(e){this.doc!==null?ze(this.doc,t=>{yl(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?ze(this.doc,r=>{Qd(r,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return Zd(this,e)}getAttributes(){return X_(this)}_write(e){e.writeTypeRef(Fk)}}class zu{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Ft()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===Mo||t.constructor===ws)&&t._start!==null)e=t._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ws extends Dt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ws}clone(){const e=new ws;return e.insert(0,this.toArray().map(t=>t instanceof Dt?t.clone():t)),e}get length(){return this.doc??Ft(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new zu(this,e)}querySelector(e){e=e.toUpperCase();const r=new zu(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),vs(new zu(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){Hl(this,e,new Ok(this,t,e))}toString(){return K_(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),No(this,s=>{i.insertBefore(s.toDOM(e,t,r),null)}),i}insert(e,t){this.doc!==null?ze(this.doc,r=>{G_(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)ze(this.doc,r=>{const i=e&&e instanceof Dt?e._item:e;ml(r,this,i,t)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Cs("Reference item not found");r.splice(i,0,...t)}}delete(e,t=1){this.doc!==null?ze(this.doc,r=>{Y_(r,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return H_(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return V_(this,e)}slice(e=0,t=this.length){return z_(this,e,t)}forEach(e){No(this,e)}_write(e){e.writeTypeRef(qk)}}class Mo extends ws{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new Mo(this.nodeName)}clone(){const e=new Mo(this.nodeName),t=this.getAttributes();return Ow(t,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof Dt?r.clone():r)),e}toString(){const e=this.getAttributes(),t=[],r=[];for(const a in e)r.push(a);r.sort();const i=r.length;for(let a=0;a<i;a++){const l=r[a];t.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?ze(this.doc,t=>{yl(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?ze(this.doc,r=>{Qd(r,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return Zd(this,e)}hasAttribute(e){return Q_(this,e)}getAttributes(e){return e?Sk(this,e):X_(this)}toDOM(e=document,t={},r){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const a=s[o];typeof a=="string"&&i.setAttribute(o,a)}return No(this,o=>{i.appendChild(o.toDOM(e,t,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(Bk),e.writeKey(this.nodeName)}}class Ok extends Wl{constructor(e,t,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class ib{constructor(e,t){this.id=e,this.length=t}get deleted(){throw ar()}mergeWith(e){return!1}write(e,t,r){throw ar()}integrate(e,t){throw ar()}}const Ik=0;class Br extends ib{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),B_(e.doc.store,this)}write(e,t){e.writeInfo(Ik),e.writeLen(this.length-t)}getMissing(e,t){return null}}class Kl{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Kl(this.content)}splice(e){throw ar()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class bl{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new bl(this.len)}splice(e){const t=new bl(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){P_(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const Rk=(n,e)=>new zo({guid:n,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Vl{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Vl(Rk(this.doc.guid,this.opts))}splice(e){throw ar()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class js{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new js(this.embed)}splice(e){throw ar()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class bt{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new bt(this.key,this.value)}splice(e){throw ar()}mergeWith(e){return!1}integrate(e,t){const r=t.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Lk=gl("node_env")==="development";class ks{constructor(e){this.arr=e,Lk&&k_(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ks(this.arr)}splice(e){const t=new ks(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const r=this.arr.length;e.writeLen(r-t);for(let i=t;i<r;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}class Mr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Mr(this.str)}splice(e){const t=new Mr(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const Pk=0,$k=1,Fk=2,Bk=3,qk=4;class li{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new li(this.type._copy())}splice(e){throw ar()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const sb=(n,e,t)=>{const{client:r,clock:i}=e.id,s=new $t(Xe(r,i+t),e,Xe(r,i+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=Xe(e.redone.client,e.redone.clock+t)),e.right=s,s.right!==null&&(s.right.left=s),n._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=t,s};class $t extends ib{constructor(e,t,r,i,s,o,a,l){super(e,l.getLength()),this.origin=r,this.left=t,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?Tp:0}set marker(e){(this.info&Fu)>0!==e&&(this.info^=Fu)}get marker(){return(this.info&Fu)>0}get keep(){return(this.info&Sp)>0}set keep(e){this.keep!==e&&(this.info^=Sp)}get countable(){return(this.info&Tp)>0}get deleted(){return(this.info&$u)>0}set deleted(e){this.deleted!==e&&(this.info^=$u)}markDeleted(){this.info|=$u}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=sn(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=sn(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ua&&this.id.client!==this.parent.client&&this.parent.clock>=sn(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=qp(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Zr(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Br||this.right&&this.right.constructor===Br)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===$t?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===$t&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Ua){const r=Uu(t,this.parent);r.constructor===Br?this.parent=null:this.parent=r.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=qp(e,e.doc.store,Xe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),ba(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(ba(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(Uu(e.doc.store,i.origin)))s.has(Uu(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),B_(e.doc.store,this),this.content.integrate(e,this),Up(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Br(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Xe(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&ba(e.origin,this.lastId)&&this.right===e&&ba(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),P_(e.deleteSet,this.id.client,this.id.clock,this.length),Up(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Ri();this.content.gc(e),t?mk(e,this,new Br(this.id,this.length)):this.content=new bl(this.length)}write(e,t){const r=t>0?Xe(this.id.client,this.id.clock+t-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&iw|(r===null?0:pl)|(i===null?0:C_)|(s===null?0:rw);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const u=hk(a);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Ua?(e.writeParentInfo(!1),e.writeLeftID(a)):Ri();s!==null&&e.writeString(s)}this.content.write(e,t)}}const ob=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},ab="__ $YJS$ __";ob[ab]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");ob[ab]=!0;const jk=be("TOGGLE_CONNECT_COMMAND");var Uk=Object.defineProperty,Wk=(n,e,t)=>e in n?Uk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fe=(n,e,t)=>Wk(n,typeof e!="symbol"?e+"":e,t);function zk({options:n,editedUsjRef:e,usj:t,setUsj:r}){const{view:i,nodes:s}=n||{},{hasSpacing:o,isFormattedFont:a,markerMode:l}=i||{};return T.useEffect(()=>{e.current&&!Fr(e.current,t)&&r(e.current)},[e,o,a,l,s,r,t]),null}const Vp=n=>Ue(Gm(n)),ei=dm("cid",{parse:n=>typeof n=="string"?n:void 0}),xs=dm("segment",{parse:n=>typeof n=="string"?n:void 0}),Pc="unknown",lb=1;class Ui extends qt{constructor(e="",t="",r,i){super(i),fe(this,"__tag"),fe(this,"__marker"),fe(this,"__unknownAttributes"),this.__tag=e,this.__marker=t,this.__unknownAttributes=r}static getType(){return"unknown"}static clone(e){const{__tag:t,__marker:r,__unknownAttributes:i,__key:s}=e;return new Ui(t,r,i,s)}static importDOM(){return{[Pc]:e=>Kk(e)?{conversion:Hk,priority:1}:null}}static importJSON(e){return ub().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag).setMarker(e.marker).setUnknownAttributes(e.unknownAttributes)}setTag(e){if(this.__tag===e)return this;const t=this.getWritable();return t.__tag=e,t}getTag(){return this.getLatest().__tag}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement(Pc);return e.style.display="none",e}updateDOM(){return!1}exportDOM(){return{element:null}}exportJSON(){return{...super.exportJSON(),type:this.getType(),tag:this.getTag(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:lb}}canBeEmpty(){return!0}isInline(){return!0}extractWithChild(){return!1}excludeFromCopy(e){return e!=="clone"}}function Hk(n){const e=n.getAttribute("data-tag")??"",t=n.getAttribute("data-marker")??"";return{node:ub(e,t)}}function ub(n,e,t){return Ue(new Ui(n,e,t))}function Kk(n){return(n==null?void 0:n.tagName)===Pc}function Ho(n){return n instanceof Ui}const Jl="id",cb=1;class On extends qt{constructor(e="",t,r){super(r),fe(this,"__marker",Jl),fe(this,"__code"),fe(this,"__unknownAttributes"),this.__code=e,this.__unknownAttributes=t}static getType(){return"book"}static clone(e){const{__code:t,__unknownAttributes:r,__key:i}=e;return new On(t,r,i)}static importJSON(e){const{code:t}=e;return db(t).updateFromJSON(e)}static isValidBookCode(e){return V2(e)}updateFromJSON(e){return super.updateFromJSON(e).setCode(e.code).setUnknownAttributes(e.unknownAttributes)}getMarker(){return this.getLatest().__marker}setCode(e){if(this.__code===e)return this;const t=this.getWritable();return t.__code=e,t}getCode(){return this.getLatest().__code}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e.setAttribute("data-code",this.__code),e}updateDOM(){return!1}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),code:this.getCode(),unknownAttributes:this.getUnknownAttributes(),version:cb}}}function db(n,e){return Ue(new On(n,e))}function Tr(n){return n instanceof On}function Vk(n){return(n==null?void 0:n.type)===On.getType()}const In=" ",$c="​",fb=`${In}|`,ef="p",Li="+",vl="chapter",Fc="verse",Jp="invalid",Jk="text-spacing",Gk="formatted-font",Yk="marker-",tf="external-usj-mutation",hb="selection-change",Bc="cursor-change",qc="annotation-change",jc="delta-change",Xk=[tf,hb,Bc,qc,jc],nf="c",pb=1;class Vn extends qt{constructor(e="",t,r,i,s,o){super(o),fe(this,"__marker"),fe(this,"__number"),fe(this,"__sid"),fe(this,"__altnumber"),fe(this,"__pubnumber"),fe(this,"__unknownAttributes"),this.__marker=nf,this.__number=e,this.__sid=t,this.__altnumber=r,this.__pubnumber=i,this.__unknownAttributes=s}static getType(){return"chapter"}static clone(e){const{__number:t,__sid:r,__altnumber:i,__pubnumber:s,__unknownAttributes:o,__key:a}=e;return new Vn(t,r,i,s,o,a)}static importJSON(e){return gb().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker).setNumber(e.number).setSid(e.sid).setAltnumber(e.altnumber).setPubnumber(e.pubnumber).setUnknownAttributes(e.unknownAttributes)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(vl,`usfm_${this.__marker}`),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),number:this.getNumber(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:pb}}}function gb(n,e,t,r,i){return Ue(new Vn(n,e,t,r,i))}function rf(n){return n instanceof Vn}function Qk(n){return(n==null?void 0:n.type)===Vn.getType()}const mb=["fr","fq","fqa","fk","ft","fl","fw","fp","fv","fdc","fm"],yb=["xo","xop","xk","xq","xt","xta","xot","xnt","xdc"],Zk=["ca","cp","va","vp","add","bk","dc","em","jmp","k","nd","ord","pn","png","qt","rb","rq","sig","sls","tl","w","wa","wg","wh","wj","bd","it","bdit","no","sc","sup","ior","iqt","qac","qs","litl","lik","liv","liv1","liv2","liv3","liv4","liv5",...mb,...yb],_b=1;class Qe extends qt{constructor(e="",t,r){super(r),fe(this,"__marker"),fe(this,"__unknownAttributes"),this.__marker=e,this.__unknownAttributes=t}static getType(){return"char"}static clone(e){const{__marker:t,__unknownAttributes:r,__key:i}=e;return new Qe(t,r,i)}static importDOM(){return{span:e=>tx(e)?{conversion:ex,priority:1}:null}}static importJSON(e){return Cl().updateFromJSON(e)}static isValidMarker(e){return e!==void 0&&Zk.includes(e)}static isValidFootnoteMarker(e){return e!==void 0&&mb.includes(e)}static isValidCrossReferenceMarker(e){return e!==void 0&&yb.includes(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker).setUnknownAttributes(e.unknownAttributes)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&qe(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`)),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:_b}}canBeEmpty(){return!1}isInline(){return!0}}function ex(n){const e=n.getAttribute("data-marker")??"f";return{node:Cl(e)}}function Cl(n,e){return Ue(new Qe(n,e))}function tx(n){if(!n)return!1;const e=n.getAttribute("data-marker")??"";return Qe.isValidMarker(e)&&n.classList.contains(Qe.getType())}function ct(n){return n instanceof Qe}function nx(n){return(n==null?void 0:n.type)===Qe.getType()}const bb=1,rx="c",vb="span";class Rr extends oi{constructor(e="",t=!1,r,i,s,o,a){super(a),fe(this,"__marker"),fe(this,"__number"),fe(this,"__showMarker"),fe(this,"__sid"),fe(this,"__altnumber"),fe(this,"__pubnumber"),fe(this,"__unknownAttributes"),this.__marker=rx,this.__number=e,this.__showMarker=t,this.__sid=r,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"immutable-chapter"}static clone(e){const{__number:t,__showMarker:r,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new Rr(t,r,i,s,o,a,l)}static importDOM(){return{span:e=>Cb(e)?{conversion:ix,priority:1}:null}}static importJSON(e){return sf().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker).setNumber(e.number).setShowMarker(e.showMarker).setSid(e.sid).setAltnumber(e.altnumber).setPubnumber(e.pubnumber).setUnknownAttributes(e.unknownAttributes)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setShowMarker(e=!1){if(this.__showMarker===e)return this;const t=this.getWritable();return t.__showMarker=e,t}getShowMarker(){return this.getLatest().__showMarker}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement(vb);return e.setAttribute("data-marker",this.__marker),e.classList.add(vl,`usfm_${this.__marker}`),this.__showMarker&&e.classList.add("marker"),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&qe(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(vl,`usfm_${this.getMarker()}`),t.setAttribute("data-number",this.getNumber())),{element:t}}decorate(){return this.getShowMarker()?Ko(this.getMarker(),this.getNumber()):this.getNumber()}exportJSON(){return{type:this.getType(),marker:this.getMarker(),number:this.getNumber(),showMarker:this.getShowMarker(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:bb}}isInline(){return!1}isKeyboardSelectable(){return!1}}function ix(n){const e=n.getAttribute("data-number")??"0";return{node:sf(e)}}function sf(n,e,t,r,i,s){return Ue(new Rr(n,e,t,r,i,s))}function Cb(n){return n?n.classList.contains(vl)&&n.tagName.toLowerCase()===vb:!1}function Us(n){return n instanceof Rr}function sx(n){return(n==null?void 0:n.type)===Rr.getType()}const Eb=1;class ti extends ai{static getType(){return"implied-para"}static clone(e){return new ti(e.__key)}static importJSON(e){return Wn().updateFromJSON(e)}getMarker(){return ef}exportJSON(){return{...super.exportJSON(),type:this.getType(),version:Eb}}insertNewAfter(e,t){const r=Wn();return r.setTextFormat(e.format),r.setTextStyle(e.style),r.setDirection(this.getDirection()),r.setFormat(this.getFormatType()),r.setStyle(this.getTextStyle()),r.setIndent(this.getIndent()),this.insertAfter(r,t),r}}function Wn(){return Ue(new ti)}function lr(n){return n instanceof ti}function of(n){return(n==null?void 0:n.type)===ti.getType()}const Pi="zmsc-s",us="zmsc-e",ox=[Pi,us],ax=["ts-s","ts-e","t-s","t-e","ts","qt1-s","qt1-e","qt2-s","qt2-e","qt3-s","qt3-e","qt4-s","qt4-e","qt5-s","qt5-e","qt-s","qt-e",Pi,us],wb=1;class ur extends oi{constructor(e="",t,r,i,s){super(s),fe(this,"__marker"),fe(this,"__sid"),fe(this,"__eid"),fe(this,"__unknownAttributes"),this.__marker=e,this.__sid=t,this.__eid=r,this.__unknownAttributes=i}static getType(){return"ms"}static clone(e){const{__marker:t,__sid:r,__eid:i,__unknownAttributes:s,__key:o}=e;return new ur(t,r,i,s,o)}static importJSON(e){return kb().updateFromJSON(e)}static isValidMarker(e){return e!==void 0&&(ax.includes(e)||e.startsWith("z"))}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker).setSid(e.sid).setEid(e.eid).setUnknownAttributes(e.unknownAttributes)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setEid(e){if(this.__eid===e)return this;const t=this.getWritable();return t.__eid=e,t}getEid(){return this.getLatest().__eid}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}updateDOM(){return!1}decorate(){return""}exportJSON(){return{type:this.getType(),marker:this.getMarker(),sid:this.getSid(),eid:this.getEid(),unknownAttributes:this.getUnknownAttributes(),version:wb}}isKeyboardSelectable(){return!1}}function lx(n){return ox.includes(n)}function kb(n,e,t,r){return Ue(new ur(n,e,t,r))}function Gl(n){return n instanceof ur}const ux=["f","fe","ef","x","ex"],xb=1;class Xt extends qt{constructor(e="",t=Li,r,i,s){super(s),fe(this,"__marker"),fe(this,"__caller"),fe(this,"__category"),fe(this,"__unknownAttributes"),this.__marker=e,this.__caller=t,this.__category=r,this.__unknownAttributes=i}static getType(){return"note"}static clone(e){const{__marker:t,__caller:r,__category:i,__unknownAttributes:s,__key:o}=e;return new Xt(t,r,i,s,o)}static importDOM(){return{span:e=>dx(e)?{conversion:cx,priority:1}:null}}static importJSON(e){return af().updateFromJSON(e)}static isValidMarker(e){return e!==void 0&&ux.includes(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker).setCaller(e.caller).setCategory(e.category).setUnknownAttributes(e.unknownAttributes)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setCaller(e){if(this.__caller===e)return this;const t=this.getWritable();return t.__caller=e,t}getCaller(){return this.getLatest().__caller}setCategory(e){if(this.__category===e)return this;const t=this.getWritable();return t.__category=e,t}getCategory(){return this.getLatest().__category}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e.setAttribute("data-caller",this.__caller),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&qe(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`),t.setAttribute("data-caller",this.getCaller())),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),caller:this.getCaller(),category:this.getCategory(),unknownAttributes:this.getUnknownAttributes(),version:xb}}canBeEmpty(){return!1}isInline(){return!0}}function cx(n){const e=n.getAttribute("data-marker")??"f",t=n.getAttribute("data-caller")??"";return{node:af(e,t)}}function af(n,e=Li,t,r){return Ue(new Xt(n,e,t,r))}function dx(n){if(!n)return!1;const e=n.getAttribute("data-marker")??"";return Xt.isValidMarker(e)&&n.classList.contains(Xt.getType())}function Bt(n){return n instanceof Xt}const fx=["ide","sts","rem","h","toc1","toc2","toc3","toca1","toca2","toca3","imt","imt1","imt2","imt3","imt4","is","is1","is2","ip","ipi","im","imi","ipq","imq","ipr","iq","iq1","iq2","iq3","ili","ili1","ili2","ib","iot","io","io1","io2","io3","io4","iex","imte","imte1","imte2","ie","mt","mt1","mt2","mt3","mt4","mte","mte1","mte2","cl","cd","ms","ms1","ms2","ms3","mr","s","s1","s2","s3","s4","sr","r","d","sp","sd","sd1","sd2","sd3","sd4",ef,"m","po","cls","pr","pc","pm","pmo","pmc","pmr","pi","pi1","pi2","pi3","mi","lit","nb","q","q1","q2","q3","q4","qr","qc","qa","qm","qm1","qm2","qm3","qd","b","lh","li","li1","li2","li3","li4","lf","lim","lim1","lim2","lim3","lim4","pb"],Sb=1;class ln extends ai{constructor(e=ef,t,r){super(r),fe(this,"__marker"),fe(this,"__unknownAttributes"),this.__marker=e,this.__unknownAttributes=t}static getType(){return"para"}static clone(e){const{__marker:t,__unknownAttributes:r,__key:i}=e;return new ln(t,r,i)}static importDOM(){return{p:()=>({conversion:hx,priority:1})}}static importJSON(e){return Oo().updateFromJSON(e)}static isValidMarker(e){return e!==void 0&&fx.includes(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker).setUnknownAttributes(e.unknownAttributes)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&qe(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`)),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:Sb}}insertNewAfter(e,t){const r=Oo(this.getMarker());return r.setTextFormat(e.format),r.setTextStyle(e.style),r.setDirection(this.getDirection()),r.setFormat(this.getFormatType()),r.setStyle(this.getTextStyle()),r.setIndent(this.getIndent()),this.insertAfter(r,t),r}}function hx(n){const e=n.getAttribute("data-marker")??void 0,t=Oo(e);if(n.style){t.setFormat(n.style.textAlign);const r=parseInt(n.style.textIndent,10)/20;r>0&&t.setIndent(r)}return{node:t}}function Oo(n,e){return Ue(new ln(n,e))}function Tt(n){return n instanceof ln}function px(n){return(n==null?void 0:n.type)===ln.getType()}const lf="v",Tb=1;class Gt extends Jt{constructor(e="",t,r,i,s,o,a){super(t??e,a),fe(this,"__marker"),fe(this,"__number"),fe(this,"__sid"),fe(this,"__altnumber"),fe(this,"__pubnumber"),fe(this,"__unknownAttributes"),this.__marker=lf,this.__number=e,this.__sid=r,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"verse"}static clone(e){const{__number:t,__text:r,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new Gt(t,r,i,s,o,a,l)}static importJSON(e){return Ab().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker).setNumber(e.number).setSid(e.sid).setAltnumber(e.altnumber).setPubnumber(e.pubnumber).setUnknownAttributes(e.unknownAttributes)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(e){const t=super.createDOM(e);return t.setAttribute("data-marker",this.__marker),t.classList.add(Fc,`usfm_${this.__marker}`),t.setAttribute("data-number",this.__number),t}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),number:this.getNumber(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:Tb}}}function Ab(n,e,t,r,i,s){return Ue(new Gt(n,e,t,r,i,s))}function uf(n){return n instanceof Gt}function gx(n){return(n==null?void 0:n.type)===Gt.getType()}function mx(n){return Qk(n)||sx(n)}function Dn(n){return rf(n)||Us(n)}function yx(n,e){return n.find(t=>Dn(t)&&t.getNumber()===e.toString())}function _x(n,e=!1){return n.find((t,r)=>(!e||r>0)&&Dn(t))}function cf(n){var e;if(!n)return;if(Dn(n))return n;let t=(e=n.getTopLevelElement())==null?void 0:e.getPreviousSibling();for(;t&&!Dn(t);)t=t.getPreviousSibling();if(t&&Dn(t))return t}function bx(n){let e=n;for(;e!==null;){if(Bt(e))return e;e=e.getParent()}}function vx(n){return Tr(n)||rf(n)||ct(n)||Us(n)||lr(n)||Gl(n)||Tt(n)||Bt(n)||uf(n)||Ho(n)}function Cx(n){var e;if(n.anchor.type==="element"){const r=n.anchor.getNode(),i=n.anchor.offset;if(i<r.getChildrenSize())return r.getChildAtIndex(i)}const t=n.anchor.getNode();return t.getNextSibling()??((e=t.getParent())==null?void 0:e.getNextSibling())??null}function Ex(n){var e;const t=n.anchor.offset;if(n.anchor.type==="element"&&t>0)return n.anchor.getNode().getChildAtIndex(t-1);const r=n.anchor.getNode();return r.getPreviousSibling()??((e=r.getParent())==null?void 0:e.getPreviousSibling())??null}function is(n){return Tt(n)||lr(n)}function Uc(n,e){const t=fs(e,ei),r=!!(n.cid&&t),i=!n.cid&&!t;return n.style===e.getMarker()&&(i||r&&n.cid===t)}function wx(n,e){const t=V(n)?n:n.getParent(),r=V(e)?e:e.getParent(),i=t&&r?mo(t,r):void 0;return i?i.commonAncestor:void 0}function df(n){return(n==null?void 0:n.type)===Jt.getType()}function kx(n,e){if(!e)return;const t=n.findIndex(r=>r===e);t&&(n.length=t)}function xx(n,e){if(!e)return n;const t=e.getIndexWithinParent();return n.splice(t+1,n.length-t-1)}function Wi(n){return`\\${n}`}function El(n){return`\\${n}*`}function Db(n,e,t){const r=Wi(n);if(e!=null&&e.startsWith(r)){const i=parseInt(e.slice(r.length),10);isNaN(i)||(t=i.toString())}return t}function Ko(n,e){let t=Wi(n);return e&&(t+=`${In}${e}`),t+=" ",t}function Nb(n){return df(n)?n.text:nx(n)?n.children.map(e=>Nb(e)).join(""):""}function Sx(n){return n.map(e=>Nb(e)).join(" ").trim()}function ff(n){return In+n+" "}function hf(n){return n.reduce((e,t)=>e+(ct(t)?` ${t.getTextContent()}`:""),"").trim()}function vt(n,e=K2){const t={...n};return e.forEach(r=>{Reflect.deleteProperty(t,r)}),Object.keys(t).length===0?void 0:t}function Tx(n,e){const t=e.getElementByKey(n.getKey());return t?t.tagName.toLowerCase():void 0}function dt(n){return Object.fromEntries(Object.entries(n).filter(([,e])=>e!==void 0))}function Mb(n){if(!n)return;const e=n.getNodes();if(e.length>0)return n.isBackward()?e[e.length-1]:e[0]}function Wc(n,e){if(!e)return(n+1).toString();const t=e.split("-");if(t.length===2)return parseInt(t[1])?`${parseInt(t[1])+1}`:`${parseInt(t[0])+1}`;const r=RegExp(/^(\d+)([a-yA-Y]{1,3})$/).exec(e);if(!r)return(parseInt(e)+1).toString();const i=String.fromCharCode(r[2].charCodeAt(0)+1);return`${r[1]}${i}`}function pf(n,e){if(!e)return!1;const t=e.split("-").map(r=>parseInt(r));if(t.length<1||t.length>2||t[0]>t[1])throw new Error("isVerseInRange: invalid range");return t.length===1?n===t[0]:t.length===2&&isNaN(t[1])?n>=t[0]:(t.length===2&&isNaN(t[0])||n>=t[0])&&n<=t[1]}function Ax(n){return!!n&&n.includes("-")}const Dx=1;class Ws extends Jt{constructor(e="",t="opening",r){super(Hu(e,t),r),fe(this,"__marker"),fe(this,"__markerSyntax"),this.__marker=e,this.__markerSyntax=t}static getType(){return"marker"}static clone(e){return new Ws(e.__marker,e.__markerSyntax,e.__key)}static importJSON(e){return zc().updateFromJSON(e)}updateFromJSON(e){const{marker:t,markerSyntax:r="opening"}=e;return super.updateFromJSON(e).setMarker(t).setMarkerSyntax(r)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t.__text=Hu(e,t.__markerSyntax),t}getMarker(){return this.getLatest().__marker}setMarkerSyntax(e){if(this.__markerSyntax===e)return this;const t=this.getWritable();return t.__markerSyntax=e,t.__text=Hu(t.__marker,e),t}getMarkerSyntax(){return this.getLatest().__markerSyntax}createDOM(e){const t=super.createDOM(e);return t.setAttribute("data-marker",this.__marker),t.classList.add(this.__markerSyntax),t}exportJSON(){return{...super.exportJSON(),type:this.getType(),text:this.getTextContent(),marker:this.getMarker(),markerSyntax:this.getMarkerSyntax(),version:Dx}}}function zc(n,e){return Ue(new Ws(n,e))}function Hu(n,e){return e==="closing"?El(n):e==="selfClosing"?El(""):Wi(n)}const zr="internal-comment",Nx=[zr],Mx={},Ox=1;class At extends qt{constructor(e=Mx,t){super(t),fe(this,"__typedIDs"),this.__typedIDs=e}static getType(){return"typed-mark"}static clone(e){const t=JSON.parse(JSON.stringify(e.__typedIDs));return new At(t,e.__key)}static isReservedType(e){return Nx.includes(e)}static importDOM(){return null}static importJSON(e){return Io().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),type:this.getType(),typedIDs:this.getTypedIDs(),version:Ox}}createDOM(e){const t=document.createElement("mark");for(const[r,i]of Object.entries(this.__typedIDs))Pt(t,Ea(e.theme.typedMark,r)),i.length>1&&Pt(t,Ea(e.theme.typedMarkOverlap,r));return t}updateDOM(e,t,r){for(const[i,s]of Object.entries(this.__typedIDs)){const o=e.__typedIDs[i].length,a=s.length,l=Ea(r.theme.typedMark,i),u=Ea(r.theme.typedMarkOverlap,i);o!==a&&(o===0?a===1&&Pt(t,l):a===0&&wi(t,l),o===1?a===2&&Pt(t,u):a===1&&wi(t,u))}return!1}updateFromJSON(e){return super.updateFromJSON(e).setTypedIDs(e.typedIDs)}hasID(e,t){const r=this.getTypedIDs()[e];if(!r)return!1;for(const i of r)if(t===i)return!0;return!1}getTypedIDs(){const e=this.getLatest();return Nt(e)?e.__typedIDs:{}}setTypedIDs(e){const t=this.getWritable();return t.__typedIDs=e,t}addID(e,t){const r=this.getWritable();if(!Nt(r))return;const i=r.__typedIDs[e]??[];r.__typedIDs[e]=i;for(const s of i)if(t===s)return;i.push(t)}deleteID(e,t){const r=this.getWritable();if(!Nt(r))return;const i=r.__typedIDs[e];for(let s=0;s<i.length;s++)if(t===i[s]){i.splice(s,1);return}}hasNoIDsForEveryType(){return Object.values(this.getTypedIDs()).every(e=>e===void 0||e.length===0)}insertNewAfter(e,t=!0){const r=Io(this.__typedIDs);return this.insertAfter(r,t),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,r){if(!G(t)||r==="html")return!1;const i=t.anchor,s=t.focus,o=i.getNode(),a=s.getNode(),l=t.isBackward()?i.offset-s.offset:s.offset-i.offset;return this.isParentOf(o)&&this.isParentOf(a)&&this.getTextContent().length===l}excludeFromCopy(e){return e!=="clone"}}function Ea(n,e){return`${n}-${e}`}function Io(n){return Ue(new At(n))}function Nt(n){return n instanceof At}function Ix(n){return(n==null?void 0:n.type)===At.getType()}function Ob(n){const e=n.getChildren();let t=null;for(const r of e)t===null?n.insertBefore(r):t.insertAfter(r),t=r;n.remove()}function Ib(n,e,t,r){const i=n.getNodes(),s=n.anchor.offset,o=n.focus.offset,a=i.length,l=n.isBackward(),u=l?o:s,c=l?s:o;let f,d;for(let h=0;h<a;h++){const p=i[h];if(V(d)&&d.isParentOf(p))continue;const m=h===0,_=h===a-1;let C=null;if(ee(p)){const v=p.getTextContentSize(),k=m?u:0,M=_?c:v;if(k===0&&M===0)continue;const $=p.splitText(k,M);C=$.length>1&&($.length===3||m&&!_||M===v)?$[1]:$[0]}else{if(Nt(p))continue;V(p)&&p.isInline()&&(C=p)}if(C!==null){if(C&&C.is(f))continue;const v=C.getParent();(v==null||!v.is(f))&&(d=void 0),f=v,d===void 0&&(d=Io({[e]:[t]}),C.insertBefore(d)),d.append(C)}else f=void 0,d=void 0}e===zr&&V(d)&&(l?d.selectStart():d.selectEnd())}function Rx(n,e,t){let r=n;for(;r!==null;){if(Nt(r))return r.getTypedIDs()[e];if(ee(r)&&t===r.getTextContentSize()){const i=r.getNextSibling();if(Nt(i))return i.getTypedIDs()[e]}r=r.getParent()}}function Gp(n){return`external-${n}`}const Rb=1;class zs extends oi{constructor(e="",t="",r){super(r),fe(this,"__textType"),fe(this,"__text"),this.__textType=e,this.__text=t}static getType(){return"typed-text"}static clone(e){const{__textType:t,__text:r,__key:i}=e;return new zs(t,r,i)}static importDOM(){return{span:e=>Px(e)?{conversion:Lx,priority:1}:null}}static importJSON(e){return Lb().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextType(e.textType).setTextContent(e.text)}setTextType(e){if(this.__textType===e)return this;const t=this.getWritable();return t.__textType=e,t}getTextType(){return this.getLatest().__textType}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}getTextContent(){return this.getLatest().__text}createDOM(){const e=document.createElement("span");return e.setAttribute("data-text-type",this.__textType),e.classList.add(this.__textType),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&qe(t)&&t.setAttribute("data-text-type",this.getTextType()),{element:t}}decorate(){return this.getTextContent()}exportJSON(){return{type:this.getType(),textType:this.getTextType(),text:this.getTextContent(),version:Rb}}isKeyboardSelectable(){return!1}}function Lx(n){const e=n.getAttribute("data-text-type")??"",t=n.textContent??"";return{node:Lb(e,t)}}function Lb(n,e){return Ue(new zs(n,e))}function Px(n){return(n==null?void 0:n.tagName)==="span"}const wl="unmatched",Pb=1;class ui extends oi{constructor(e="",t){super(t),fe(this,"__marker"),this.__marker=e}static getType(){return"unmatched"}static clone(e){const{__marker:t,__key:r}=e;return new ui(t,r)}static importDOM(){return{[wl]:e=>Fx(e)?{conversion:$x,priority:1}:null}}static importJSON(e){return $b().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}createDOM(){const e=document.createElement(wl);e.setAttribute("data-marker",this.__marker),e.classList.add(Jp);const t=this.__marker.endsWith("*");return e.title=t?"This closing marker has no matching opening marker!":"This opening marker has no matching closing marker!",e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&qe(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(Jp)),{element:t}}decorate(){return`\\${this.getMarker()}${$c}`}exportJSON(){return{type:this.getType(),marker:this.getMarker(),version:Pb}}isKeyboardSelectable(){return!1}}function $x(n){const e=n.getAttribute("data-marker")??"";return{node:$b(e)}}function $b(n){return Ue(new ui(n))}function Fx(n){return(n==null?void 0:n.tagName)===wl}function Bx(n){return n instanceof ui}const qx=[On,Rr,Vn,Gt,Qe,Xt,ur,Ws,Ui,zs,ui,ln,ti,{replace:ai,with:()=>Wn(),withKlass:ti}];var B;(function(n){n.FileIdentification="FileIdentification",n.Headers="Headers",n.Remarks="Remarks",n.Introduction="Introduction",n.DivisionMarks="DivisionMarks",n.Paragraphs="Paragraphs",n.Poetry="Poetry",n.TitlesHeadings="TitlesHeadings",n.Tables="Tables",n.CenterTables="CenterTables",n.RightTables="RightTables",n.Lists="Lists",n.Footnotes="Footnotes",n.CrossReferences="CrossReferences",n.SpecialText="SpecialText",n.CharacterStyling="CharacterStyling",n.Breaks="Breaks",n.SpecialFeatures="SpecialFeatures",n.PeripheralReferences="PeripheralReferences",n.PeripheralMaterials="PeripheralMaterials",n.Uncategorized="Uncategorized"})(B||(B={}));var F;(function(n){n.Paragraph="Paragraph",n.Character="Character",n.Note="Note",n.Unknown="Unknown"})(F||(F={}));const jx={id:{category:B.FileIdentification,type:F.Paragraph,description:"File identification information (BOOKID, FILENAME, EDITOR, MODIFICATION DATE)",hasEndMarker:!1,children:{FileIdentification:["usfm","ide"],Headers:["h","h1","h2","h3","toc1","toc2","toc3"],Remarks:["rem","sts","restore"],Introduction:["imt","imt1","imt2","imt3","imt4","imte","imte1","imte2","is","is1","is2","iot","io","io1","io2","io3","io4","ior","ip","im","ipi","imi","ili","ili1","ili2","ipq","imq","ipr","ib","iq","iq1","iq2","iq3","iex","ie"],DivisionMarks:["c","cl"],TitlesHeadings:["mt","mt1","mt2","mt3","mt4"]}},usfm:{category:B.FileIdentification,type:F.Paragraph,description:"File markup version information",hasEndMarker:!1,children:void 0},ide:{category:B.FileIdentification,type:F.Paragraph,description:"File encoding information",hasEndMarker:!1,children:{Remarks:["rem","sts"]}},h:{category:B.Headers,type:F.Paragraph,description:"Running header text for a book (basic)",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h1:{category:B.Headers,type:F.Paragraph,description:"Running header text",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h2:{category:B.Headers,type:F.Paragraph,description:"Running header text, left side of page",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h3:{category:B.Headers,type:F.Paragraph,description:"Running header text, right side of page",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},toc1:{category:B.Headers,type:F.Paragraph,description:"Long table of contents text",hasEndMarker:!1,children:void 0},toc2:{category:B.Headers,type:F.Paragraph,description:"Short table of contents text",hasEndMarker:!1,children:void 0},toc3:{category:B.Headers,type:F.Paragraph,description:"Book Abbreviation",hasEndMarker:!1,children:void 0},toca1:{category:B.Headers,type:F.Paragraph,description:"Alternative language long table of contents text",hasEndMarker:!1,children:void 0},toca2:{category:B.Headers,type:F.Paragraph,description:"Alternative language short table of contents text",hasEndMarker:!1,children:void 0},toca3:{category:B.Headers,type:F.Paragraph,description:"Alternative language book Abbreviation",hasEndMarker:!1,children:void 0},rem:{category:B.Remarks,type:F.Paragraph,description:"Comments and remarks",hasEndMarker:!1,children:void 0},sts:{category:B.Remarks,type:F.Paragraph,description:"Status of this file",hasEndMarker:!1,children:void 0},restore:{category:B.Remarks,type:F.Paragraph,description:"Project restore information",hasEndMarker:!1,children:void 0},imt:{category:B.Introduction,type:F.Paragraph,description:"Introduction major title, level 1 (if single level) (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt1:{category:B.Introduction,type:F.Paragraph,description:"Introduction major title, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt2:{category:B.Introduction,type:F.Paragraph,description:"Introduction major title, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt3:{category:B.Introduction,type:F.Paragraph,description:"Introduction major title, level 3",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt4:{category:B.Introduction,type:F.Paragraph,description:"Introduction major title, level 4 (usually within parenthesis)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte:{category:B.Introduction,type:F.Paragraph,description:"Introduction major title at introduction end, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte1:{category:B.Introduction,type:F.Paragraph,description:"Introduction major title at introduction end, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte2:{category:B.Introduction,type:F.Paragraph,description:"Introduction major title at introduction end, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},is:{category:B.Introduction,type:F.Paragraph,description:"Introduction section heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"],CharacterStyling:["no"]}},is1:{category:B.Introduction,type:F.Paragraph,description:"Introduction section heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},is2:{category:B.Introduction,type:F.Paragraph,description:"Introduction section heading, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},iot:{category:B.Introduction,type:F.Paragraph,description:"Introduction outline title (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],CharacterStyling:["no"]}},io:{category:B.Introduction,type:F.Paragraph,description:"Introduction outline text, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},io1:{category:B.Introduction,type:F.Paragraph,description:"Introduction outline text, level 1 (if multiple levels) (basic)",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io2:{category:B.Introduction,type:F.Paragraph,description:"Introduction outline text, level 2",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io3:{category:B.Introduction,type:F.Paragraph,description:"Introduction outline text, level 3",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io4:{category:B.Introduction,type:F.Paragraph,description:"Introduction outline text, level 4",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ior:{category:B.Introduction,type:F.Character,description:"Introduction references range for outline entry; for marking references separately",hasEndMarker:!0,children:void 0},ip:{category:B.Introduction,type:F.Paragraph,description:"Introduction prose paragraph (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],Footnotes:["f","fe","fm"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},im:{category:B.Introduction,type:F.Paragraph,description:"Introduction prose paragraph, with no first line indent (may occur after poetry)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipi:{category:B.Introduction,type:F.Paragraph,description:"Introduction prose paragraph, indented, with first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},imi:{category:B.Introduction,type:F.Paragraph,description:"Introduction prose paragraph text, indented, with no first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili:{category:B.Introduction,type:F.Paragraph,description:"A list entry, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili1:{category:B.Introduction,type:F.Paragraph,description:"A list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili2:{category:B.Introduction,type:F.Paragraph,description:"A list entry, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipq:{category:B.Introduction,type:F.Paragraph,description:"Introduction prose paragraph, quote from the body text",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},imq:{category:B.Introduction,type:F.Paragraph,description:"Introduction prose paragraph, quote from the body text, with no first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipr:{category:B.Introduction,type:F.Paragraph,description:"Introduction prose paragraph, right aligned",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ib:{category:B.Introduction,type:F.Paragraph,description:"Introduction blank line",hasEndMarker:!1,children:{Introduction:["iqt"]}},iq:{category:B.Introduction,type:F.Paragraph,description:"Introduction poetry text, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},iq1:{category:B.Introduction,type:F.Paragraph,description:"Introduction poetry text, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iq2:{category:B.Introduction,type:F.Paragraph,description:"Introduction poetry text, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iq3:{category:B.Introduction,type:F.Paragraph,description:"Introduction poetry text, level 3",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iex:{category:B.Introduction,type:F.Paragraph,description:"Introduction explanatory or bridge text (e.g. explanation of missing book in Short Old Testament)",hasEndMarker:!1,children:{Introduction:["iqt"],CharacterStyling:["no"]}},iqt:{category:B.Introduction,type:F.Character,description:"For quoted scripture text appearing in the introduction",hasEndMarker:!0,children:void 0},ie:{category:B.Introduction,type:F.Paragraph,description:"Introduction ending marker",hasEndMarker:!1,children:void 0},c:{category:B.DivisionMarks,type:F.Paragraph,description:"Chapter number",hasEndMarker:!1,children:{DivisionMarks:["ca","cp","cl","cd"],Paragraphs:["p","m","po","pr","cls","pi","pi1","pi2","pi3","pc","mi","nb"],Poetry:["q","q1","q2","q3","q4","qc","qr","qa","qd","b"],TitlesHeadings:["mte","ms","ms1","ms2","ms3","s","s1","s2","s3","s4","r","sp","d","sd","sd1","sd2","sd3","sd4"],Lists:["lh","li","li1","li2","li3","li4","lf","lim","lim1","lim2","lim3","lim4"],Footnotes:["f","fe"],SpecialText:["lit"],Breaks:["pb"]}},ca:{category:B.DivisionMarks,type:F.Character,description:"Second (alternate) chapter number (for coding dual versification; useful for places where different traditions of chapter breaks need to be supported in the same translation)",hasEndMarker:!0,children:void 0},cp:{category:B.DivisionMarks,type:F.Paragraph,description:"Published chapter number (chapter string that should appear in the published text)",hasEndMarker:!1,children:{Footnotes:["f"]}},cl:{category:B.DivisionMarks,type:F.Paragraph,description:"Chapter label used for translations that add a word such as 'Chapter' before chapter numbers (e.g. Psalms). The subsequent text is the chapter label.",hasEndMarker:!1,children:void 0},cd:{category:B.DivisionMarks,type:F.Paragraph,description:"Chapter Description (Publishing option D, e.g. in Russian Bibles)",hasEndMarker:!1,children:{DivisionMarks:["vp"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},v:{category:B.DivisionMarks,type:F.Character,description:"A verse number",hasEndMarker:!1,children:void 0},va:{category:B.DivisionMarks,type:F.Character,description:"Second (alternate) verse number (for coding dual numeration in Psalms; see also NRSV Exo 22.1-4)",hasEndMarker:!0,children:void 0},vp:{category:B.DivisionMarks,type:F.Character,description:"Published verse marker (verse string that should appear in the published text)",hasEndMarker:!0,children:void 0},p:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, with first line indent (basic)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},m:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, with no first line indent (may occur after poetry) (basic)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},po:{category:B.Paragraphs,type:F.Paragraph,description:"Letter opening",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pr:{category:B.Paragraphs,type:F.Paragraph,description:"Text refrain (paragraph text, right aligned)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},cls:{category:B.Paragraphs,type:F.Paragraph,description:"Letter Closing",hasEndMarker:!1,children:{SpecialText:["tl","sig","pn","png","addpn","add"]}},pmo:{category:B.Paragraphs,type:F.Paragraph,description:"Embedded text opening",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pm:{category:B.Paragraphs,type:F.Paragraph,description:"Embedded text paragraph",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pmc:{category:B.Paragraphs,type:F.Paragraph,description:"Embedded text closing",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pmr:{category:B.Paragraphs,type:F.Paragraph,description:"Embedded text refrain (e.g. Then all the people shall say, 'Amen!')",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, level 1 indent (if single level), with first line indent; often used for discourse (basic)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi1:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, level 1 indent (if multiple levels), with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi2:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, level 2 indent, with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi3:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, level 3 indent, with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pc:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, centered (for Inscription)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},mi:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, indented, with no first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},nb:{category:B.Paragraphs,type:F.Paragraph,description:"Paragraph text, with no break from previous paragraph text (at chapter boundary) (basic)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, level 1 indent (if single level)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q1:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, level 1 indent (if multiple levels) (basic)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q2:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, level 2 indent (basic)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q3:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, level 3 indent",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q4:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, level 4 indent",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qc:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, centered",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qr:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, Right Aligned",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qs:{category:B.Poetry,type:F.Character,description:"Poetry text, Selah",hasEndMarker:!0,children:{Footnotes:["f"],CrossReferences:["x"]}},qa:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, Acrostic marker/heading",hasEndMarker:!1,children:void 0},qac:{category:B.Poetry,type:F.Character,description:"Poetry text, Acrostic markup of the first character of a line of acrostic poetry",hasEndMarker:!0,children:void 0},qm:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, embedded, level 1 indent (if single level)",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm1:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, embedded, level 1 indent (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm2:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, embedded, level 2 indent",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm3:{category:B.Poetry,type:F.Paragraph,description:"Poetry text, embedded, level 3 indent",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qd:{category:B.Poetry,type:F.Paragraph,description:"A Hebrew musical performance annotation, similar in content to Hebrew descriptive title.",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},b:{category:B.Poetry,type:F.Paragraph,description:"Poetry text stanza break (e.g. stanza break) (basic)",hasEndMarker:!1,children:void 0},mt:{category:B.TitlesHeadings,type:F.Paragraph,description:"The main title of the book (if single level)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt1:{category:B.TitlesHeadings,type:F.Paragraph,description:"The main title of the book (if multiple levels) (basic)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt2:{category:B.TitlesHeadings,type:F.Paragraph,description:"A secondary title usually occurring before the main title (basic)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt3:{category:B.TitlesHeadings,type:F.Paragraph,description:"A secondary title occurring after the main title",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt4:{category:B.TitlesHeadings,type:F.Paragraph,description:"A small secondary title sometimes occurring within parentheses",hasEndMarker:!1,children:void 0},mte:{category:B.TitlesHeadings,type:F.Paragraph,description:"The main title of the book repeated at the end of the book, level 1 (if single level)",hasEndMarker:!1,children:void 0},mte1:{category:B.TitlesHeadings,type:F.Paragraph,description:"The main title of the book repeated at the end of the book, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mte2"]}},mte2:{category:B.TitlesHeadings,type:F.Paragraph,description:"A secondary title occurring before or after the 'ending' main title",hasEndMarker:!1,children:void 0},ms:{category:B.TitlesHeadings,type:F.Paragraph,description:"A major section division heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms1:{category:B.TitlesHeadings,type:F.Paragraph,description:"A major section division heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms2:{category:B.TitlesHeadings,type:F.Paragraph,description:"A major section division heading, level 2",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms3:{category:B.TitlesHeadings,type:F.Paragraph,description:"A major section division heading, level 3",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe"]}},mr:{category:B.TitlesHeadings,type:F.Paragraph,description:"A major section division references range heading (basic)",hasEndMarker:!1,children:void 0},s:{category:B.TitlesHeadings,type:F.Paragraph,description:"A section heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s1:{category:B.TitlesHeadings,type:F.Paragraph,description:"A section heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s2:{category:B.TitlesHeadings,type:F.Paragraph,description:"A section heading, level 2 (e.g. Proverbs 22-24)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s3:{category:B.TitlesHeadings,type:F.Paragraph,description:"A section heading, level 3 (e.g. Genesis 'The First Day')",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s4:{category:B.TitlesHeadings,type:F.Paragraph,description:"A section heading, level 4",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},sr:{category:B.TitlesHeadings,type:F.Paragraph,description:"A section division references range heading",hasEndMarker:!1,children:void 0},r:{category:B.TitlesHeadings,type:F.Paragraph,description:"Parallel reference(s) (basic)",hasEndMarker:!1,children:void 0},sp:{category:B.TitlesHeadings,type:F.Paragraph,description:"A heading, to identify the speaker (e.g. Job)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},d:{category:B.TitlesHeadings,type:F.Paragraph,description:"A Hebrew text heading, to provide description (e.g. Psalms)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},sd:{category:B.TitlesHeadings,type:F.Paragraph,description:"Vertical space used to divide the text into sections, level 1 (if single level)",hasEndMarker:!1,children:void 0},sd1:{category:B.TitlesHeadings,type:F.Paragraph,description:"Vertical space used to divide the text into sections, level 1 (if multiple levels)",hasEndMarker:!1,children:void 0},sd2:{category:B.TitlesHeadings,type:F.Paragraph,description:"Vertical space used to divide the text into sections, level 2",hasEndMarker:!1,children:void 0},sd3:{category:B.TitlesHeadings,type:F.Paragraph,description:"Vertical space used to divide the text into sections, level 3",hasEndMarker:!1,children:void 0},sd4:{category:B.TitlesHeadings,type:F.Paragraph,description:"Vertical space used to divide the text into sections, level 4",hasEndMarker:!1,children:void 0},lh:{category:B.Lists,type:F.Paragraph,description:"List header (introductory remark)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li:{category:B.Lists,type:F.Paragraph,description:"A list entry, level 1 (if single level)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li1:{category:B.Lists,type:F.Paragraph,description:"A list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li2:{category:B.Lists,type:F.Paragraph,description:"A list entry, level 2",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li3:{category:B.Lists,type:F.Paragraph,description:"A list entry, level 3",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li4:{category:B.Lists,type:F.Paragraph,description:"A list entry, level 4",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lf:{category:B.Lists,type:F.Paragraph,description:"List footer (concluding remark)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim:{category:B.Lists,type:F.Paragraph,description:"An embedded list entry, level 1 (if single level)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim1:{category:B.Lists,type:F.Paragraph,description:"An embedded list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim2:{category:B.Lists,type:F.Paragraph,description:"An embedded list entry, level 2",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim3:{category:B.Lists,type:F.Paragraph,description:"An embedded list item, level 3",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim4:{category:B.Lists,type:F.Paragraph,description:"An embedded list entry, level 4",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},litl:{category:B.Lists,type:F.Character,description:"List entry total text",hasEndMarker:!0,children:void 0},lik:{category:B.Lists,type:F.Character,description:"Structured list entry key text",hasEndMarker:!0,children:void 0},liv:{category:B.Lists,type:F.Character,description:"Structured list entry value 1 content (if single value)",hasEndMarker:!0,children:void 0},liv1:{category:B.Lists,type:F.Character,description:"Structured list entry value 1 content (if multiple values)",hasEndMarker:!0,children:void 0},liv2:{category:B.Lists,type:F.Character,description:"Structured list entry value 2 content",hasEndMarker:!0,children:void 0},liv3:{category:B.Lists,type:F.Character,description:"Structured list entry value 3 content",hasEndMarker:!0,children:void 0},liv4:{category:B.Lists,type:F.Character,description:"Structured list entry value 4 content",hasEndMarker:!0,children:void 0},liv5:{category:B.Lists,type:F.Character,description:"Structured list entry value 5 content",hasEndMarker:!0,children:void 0},f:{category:B.Footnotes,type:F.Note,description:"A Footnote text item (basic)",hasEndMarker:!0,children:{Footnotes:["fr","ft","fk","fq","fqa","fl","fw","fp","fv","fdc"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},fe:{category:B.Footnotes,type:F.Note,description:"An Endnote text item",hasEndMarker:!0,children:{Footnotes:["fr","ft","fk","fq","fqa","fl","fw","fp","fv","fdc"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},fr:{category:B.Footnotes,type:F.Character,description:"The origin reference for the footnote (basic)",hasEndMarker:!0,children:void 0},ft:{category:B.Footnotes,type:F.Character,description:"Footnote text, Protocanon (basic)",hasEndMarker:!0,children:void 0},fk:{category:B.Footnotes,type:F.Character,description:"A footnote keyword (basic)",hasEndMarker:!0,children:void 0},fq:{category:B.Footnotes,type:F.Character,description:"A footnote scripture quote or alternate rendering (basic)",hasEndMarker:!0,children:void 0},fqa:{category:B.Footnotes,type:F.Character,description:"A footnote alternate rendering for a portion of scripture text",hasEndMarker:!0,children:void 0},fl:{category:B.Footnotes,type:F.Character,description:"A footnote label text item, for marking or 'labelling' the type or alternate translation being provided in the note.",hasEndMarker:!0,children:void 0},fw:{category:B.Footnotes,type:F.Character,description:"A footnote witness list, for distinguishing a list of sigla representing witnesses in critical editions.",hasEndMarker:!0,children:void 0},fp:{category:B.Footnotes,type:F.Character,description:"A Footnote additional paragraph marker",hasEndMarker:!0,children:void 0},fv:{category:B.Footnotes,type:F.Character,description:"A verse number within the footnote text",hasEndMarker:!0,children:void 0},fdc:{category:B.Footnotes,type:F.Character,description:"Footnote text, applies to Deuterocanon only",hasEndMarker:!0,children:void 0},fm:{category:B.Footnotes,type:F.Character,description:"An additional footnote marker location for a previous footnote",hasEndMarker:!0,children:void 0},x:{category:B.CrossReferences,type:F.Note,description:"A list of cross references (basic)",hasEndMarker:!0,children:{CrossReferences:["xo","xop","xt","xta","xk","xq","xot","xnt","xdc"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},xo:{category:B.CrossReferences,type:F.Character,description:"The cross reference origin reference (basic)",hasEndMarker:!0,children:void 0},xop:{category:B.CrossReferences,type:F.Character,description:"Published cross reference origin reference (origin reference that should appear in the published text)",hasEndMarker:!0,children:void 0},xt:{category:B.CrossReferences,type:F.Character,description:"The cross reference target reference(s), protocanon only (basic)",hasEndMarker:!0,children:void 0},xta:{category:B.CrossReferences,type:F.Character,description:"Cross reference target references added text",hasEndMarker:!0,children:void 0},xk:{category:B.CrossReferences,type:F.Character,description:"A cross reference keyword",hasEndMarker:!0,children:void 0},xq:{category:B.CrossReferences,type:F.Character,description:"A cross-reference quotation from the scripture text",hasEndMarker:!0,children:void 0},xot:{category:B.CrossReferences,type:F.Character,description:"Cross-reference target reference(s), Old Testament only",hasEndMarker:!0,children:void 0},xnt:{category:B.CrossReferences,type:F.Character,description:"Cross-reference target reference(s), New Testament only",hasEndMarker:!0,children:void 0},xdc:{category:B.CrossReferences,type:F.Character,description:"Cross-reference target reference(s), Deuterocanon only",hasEndMarker:!0,children:void 0},rq:{category:B.CrossReferences,type:F.Character,description:"A cross-reference indicating the source text for the preceding quotation.",hasEndMarker:!0,children:void 0},qt:{category:B.SpecialText,type:F.Character,description:"For Old Testament quoted text appearing in the New Testament (basic)",hasEndMarker:!0,children:void 0},nd:{category:B.SpecialText,type:F.Character,description:"For name of deity (basic)",hasEndMarker:!0,children:void 0},tl:{category:B.SpecialText,type:F.Character,description:"For transliterated words",hasEndMarker:!0,children:void 0},dc:{category:B.SpecialText,type:F.Character,description:"Deuterocanonical/LXX additions or insertions in the Protocanonical text",hasEndMarker:!0,children:void 0},bk:{category:B.SpecialText,type:F.Character,description:"For the quoted name of a book",hasEndMarker:!0,children:void 0},sig:{category:B.SpecialText,type:F.Character,description:"For the signature of the author of an Epistle",hasEndMarker:!0,children:void 0},pn:{category:B.SpecialText,type:F.Character,description:"For a proper name",hasEndMarker:!0,children:void 0},png:{category:B.SpecialText,type:F.Character,description:"For a geographic proper name",hasEndMarker:!0,children:void 0},addpn:{category:B.SpecialText,type:F.Character,description:"For chinese words to be dot underline & underline",hasEndMarker:!0,children:void 0},wj:{category:B.SpecialText,type:F.Character,description:"For marking the words of Jesus",hasEndMarker:!0,children:void 0},k:{category:B.SpecialText,type:F.Character,description:"For a keyword",hasEndMarker:!0,children:void 0},sls:{category:B.SpecialText,type:F.Character,description:"To represent where the original text is in a secondary language or from an alternate text source",hasEndMarker:!0,children:void 0},ord:{category:B.SpecialText,type:F.Character,description:"For the text portion of an ordinal number",hasEndMarker:!0,children:void 0},add:{category:B.SpecialText,type:F.Character,description:"For a translational addition to the text",hasEndMarker:!0,children:void 0},lit:{category:B.SpecialText,type:F.Paragraph,description:"For a comment or note inserted for liturgical use",hasEndMarker:!1,children:void 0},no:{category:B.CharacterStyling,type:F.Character,description:"A character style, use normal text",hasEndMarker:!0,children:void 0},it:{category:B.CharacterStyling,type:F.Character,description:"A character style, use italic text",hasEndMarker:!0,children:void 0},bd:{category:B.CharacterStyling,type:F.Character,description:"A character style, use bold text",hasEndMarker:!0,children:void 0},bdit:{category:B.CharacterStyling,type:F.Character,description:"A character style, use bold + italic text",hasEndMarker:!0,children:void 0},em:{category:B.CharacterStyling,type:F.Character,description:"A character style, use emphasized text style",hasEndMarker:!0,children:void 0},sc:{category:B.CharacterStyling,type:F.Character,description:"A character style, for small capitalization text",hasEndMarker:!0,children:void 0},sup:{category:B.CharacterStyling,type:F.Character,description:"A character style, for superscript text. Typically for use in critical edition footnotes.",hasEndMarker:!0,children:void 0},pb:{category:B.Breaks,type:F.Paragraph,description:"Page Break used for new reader portions and children's bibles where content is controlled by the page",hasEndMarker:!1,children:void 0}},mi={DivisionMarks:{add:["v","c"],remove:[]},Paragraphs:{add:["p"],remove:[]},Poetry:{add:["q","q1","q2","q3","q4","b"],remove:[]},TitlesHeadings:{add:["mte","ms","ms1","ms2","ms3","s","s1","s2","s3","s4","r","sp","d","sd","sd1","sd2","sd3","sd4"],remove:[]}},Ux={p:{children:mi},q:{children:mi},q1:{children:mi},q2:{children:mi},q3:{children:mi},q4:{children:mi},b:{children:mi},qm:{children:{Paragraphs:{add:["p"],remove:[]}}},c:{type:F.Paragraph,children:null},v:{children:null}};function Yp(n){const e=jx[n],t=Ux[n];if(!e)return;if(!t)return e;let r=e.children?{...e.children}:void 0;if(t.children===null&&(r=void 0),t.children){r=r||{};for(const[i,s]of Object.entries(t.children)){const o=i;if(s===null)Reflect.deleteProperty(r,o);else{let a=r[o]||[];s.remove&&(a=a.filter(l=>!s.remove.includes(l))),s.add&&(a=[...new Set([...a,...s.add])]),a.length>0?r[o]=a:Reflect.deleteProperty(r,o)}}Object.keys(r).length===0&&(r=void 0)}return{...e,...t,children:r}}function Wx(n,e,t){const r={type:Mi,version:Oi,content:n},i=e.serializeEditorState(r,t);return of(i.root.children[0])?i.root.children[0].children[0]:i.root.children[0]}const Fb=1;class cr extends oi{constructor(e=Li,t="",r,i){super(i),fe(this,"__caller"),fe(this,"__previewText"),fe(this,"__onClick"),this.__caller=e,this.__previewText=t,this.__onClick=r??(()=>{})}static getType(){return"immutable-note-caller"}static clone(e){const{__caller:t,__previewText:r,__onClick:i,__key:s}=e;return new cr(t,r,i,s)}static importDOM(){return{span:e=>Hx(e)?{conversion:zx,priority:1}:null}}static importJSON(e){return gf().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setCaller(e.caller).setPreviewText(e.previewText).setOnClick(e.onClick)}setCaller(e){if(this.__caller===e)return this;const t=this.getWritable();return t.__caller=e,t}getCaller(){return this.getLatest().__caller}setPreviewText(e){if(this.__previewText===e)return this;const t=this.getWritable();return t.__previewText=e,t}getPreviewText(){return this.getLatest().__previewText}setOnClick(e){if(this.__onClick===e)return this;const t=this.getWritable();return t.__onClick=e,t}getOnClick(){return this.getLatest().__onClick}createDOM(){const e=document.createElement("span");return e.classList.add(this.__type),e.setAttribute("data-caller",this.__caller),e.setAttribute("data-preview-text",this.__previewText),e}updateDOM(e){return e.__caller!==this.__caller}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&qe(t)&&(t.classList.add(this.getType()),t.setAttribute("data-caller",this.getCaller()),t.setAttribute("data-preview-text",this.getPreviewText())),{element:t}}decorate(){const e=`${this.__caller}_${this.__previewText}}`.replace(/\s+/g,"").substring(0,25);return L.jsx("button",{onClick:this.__onClick,title:this.__previewText,"data-caller-id":e,children:this.__caller===Li?"":this.__caller})}exportJSON(){return{type:this.getType(),caller:this.getCaller(),previewText:this.getPreviewText(),onClick:this.getOnClick(),version:Fb}}isKeyboardSelectable(){return!1}}function zx(n){const e=n.getAttribute("data-caller")??"",t=n.getAttribute("data-preview-text")??"";return{node:gf(e,t)}}function gf(n,e,t){return Ue(new cr(n,e,t))}function Hx(n){return n?n.classList.contains(cr.getType()):!1}function Vo(n){return n instanceof cr}const Kx=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Bb="v",qb=1;class Yt extends oi{constructor(e="",t=!1,r,i,s,o,a){super(a),fe(this,"__marker"),fe(this,"__number"),fe(this,"__showMarker"),fe(this,"__sid"),fe(this,"__altnumber"),fe(this,"__pubnumber"),fe(this,"__unknownAttributes"),this.__marker=Bb,this.__number=e,this.__showMarker=t,this.__sid=r,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"immutable-verse"}static clone(e){const{__number:t,__showMarker:r,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new Yt(t,r,i,s,o,a,l)}static importDOM(){return{span:e=>Jx(e)?{conversion:Vx,priority:1}:null}}static importJSON(e){return mf().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker).setNumber(e.number).setShowMarker(e.showMarker).setSid(e.sid).setAltnumber(e.altnumber).setPubnumber(e.pubnumber).setUnknownAttributes(e.unknownAttributes)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setShowMarker(e=!1){if(this.__showMarker===e)return this;const t=this.getWritable();return t.__showMarker=e,t}getShowMarker(){return this.getLatest().__showMarker}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(Fc,`usfm_${this.__marker}`),this.__showMarker&&e.classList.add("marker"),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&qe(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(Fc,`usfm_${this.getMarker()}`),t.setAttribute("data-number",this.getNumber())),{element:t}}decorate(){return L.jsx("span",{children:this.getShowMarker()?Ko(this.getMarker(),this.getNumber()):$c+this.getNumber()+$c})}exportJSON(){return{type:this.getType(),marker:this.getMarker(),number:this.getNumber(),showMarker:this.getShowMarker(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:qb}}isKeyboardSelectable(){return!1}}function Vx(n){const e=n.getAttribute("data-number")??"0";return{node:mf(e)}}function mf(n,e,t,r,i,s){return Ue(new Yt(n,e,t,r,i,s))}function Jx(n){return((n==null?void 0:n.getAttribute("data-marker"))??void 0)===Bb}function Jo(n){return n instanceof Yt}function Gx(n){return(n==null?void 0:n.type)===Yt.getType()}function Nn(n){return uf(n)||Jo(n)}function Yx(n){return gx(n)||Gx(n)}function Xx(n){return n.find(e=>Tt(e))}function Qx(n,e){return V(n)?n.getChildren().find(t=>Nn(t)&&pf(e,t.getNumber())):void 0}function Zx(n,e){return e===0?Xx(n):n.map(t=>Qx(t,e)).filter(t=>t)[0]}function Xp(n){return!n||!V(n)?void 0:n.getChildren().findLast(e=>Nn(e))}function jb(n){var e,t;if(!n||Dn(n))return;if(Nn(n))return n;let r=Nt(n.getParent())?(e=n.getParent())==null?void 0:e.getPreviousSibling():n.getPreviousSibling();for(;r&&!Nn(r)&&!Dn(r);)r=r.getPreviousSibling();if(r&&Nn(r))return r;let i=(t=n.getTopLevelElement())==null?void 0:t.getPreviousSibling(),s=Xp(i),o=s;for(;i&&!s&&!Dn(i);)s=o,i=i.getPreviousSibling(),o=Xp(i);if(!(!s&&Dn(i)))return s}function eS(n){return vx(n)||Jo(n)}function yf(n){if(ee(n)){const e=n.getTextContent();!e.endsWith(" ")&&!e.endsWith(In)&&n.setTextContent(`${e} `)}}function Ub(n){if(ee(n)){const e=n.getTextContent();e.startsWith(" ")&&n.setTextContent(e.trimStart())}}function _f(n,e){return n.getEditorState().read(()=>!Ae(e))}const tS=[cr,Yt,...qx],nS=T.forwardRef((n,e)=>{const{coords:t,children:r,style:i,...s}=n,o=t!==void 0;return L.jsx("div",{ref:e,className:"floating-box","aria-hidden":!o,style:{...i,position:"absolute",zIndex:1e3,top:t==null?void 0:t.y,left:t==null?void 0:t.x,visibility:o?"visible":"hidden",opacity:o?1:0},...s,children:r})});function rS(){const[n,e]=T.useState(void 0),[t,r]=T.useState(),i=T.useRef(null),s=T.useCallback((a,l)=>{i.current&&i.current();const u=a.commonAncestorContainer.nodeType===a.commonAncestorContainer.TEXT_NODE?a:a.commonAncestorContainer;i.current=b0(u,l,()=>{v0(u,l,{placement:"bottom-start",middleware:[C0(),E0()]}).then(c=>{r(c.placement),e(f=>(f==null?void 0:f.x)===c.x&&(f==null?void 0:f.y)===c.y?f:{x:c.x,y:c.y})}).catch(()=>{e(void 0)})})},[]),o=T.useCallback(()=>{i.current&&(e(void 0),i.current(),i.current=null)},[]);return T.useEffect(()=>o,[o]),{coords:n,placement:t,updatePosition:s,cleanup:o}}function iS({isOpen:n,floatingBoxRef:e}){const{coords:t,updatePosition:r,cleanup:i,placement:s}=rS();return T.useEffect(()=>{var o;if(!n||!e.current){i();return}const a=(o=window.getSelection())==null?void 0:o.getRangeAt(0);if(!a){i();return}return r(a,e.current),i},[i,n,e,r]),{coords:t,placement:s}}const sS=document.body,oS=T.memo(nS);function aS({isOpen:n=!1,children:e}){const t=T.useRef(null),{coords:r,placement:i}=iS({isOpen:n,floatingBoxRef:t}),s=T.useMemo(()=>r?typeof e=="function"?e:()=>e:()=>null,[e,r]);return En.createPortal(L.jsx(oS,{ref:t,coords:r,style:r?void 0:{display:"none"},children:s({isOpen:n,placement:i})}),sS)}const Wb=T.createContext(void 0);function bf(){const n=T.useContext(Wb);if(!n)throw new Error("useMenuContext must be used within a MenuProvider");return n}function lS(n,e){const[t,r]=T.useState(0),[i,s]=T.useState(-1),o=T.useMemo(()=>n??[],[n]),a={menuItems:o,activeIndex:t,selectedIndex:i,onSelectOption:e??(()=>{})},l=T.useCallback(()=>{r(f=>{const d=o.length;return d?(f-1+d)%d:0})},[o.length]),u=T.useCallback(()=>{r(f=>{const d=o.length;return d?(f+1)%d:0})},[o.length]),c=T.useCallback(()=>{const f=o.length;if(t>=0&&t<f){const d=o[t];e==null||e(d),s(t)}},[t,o,e]);return{state:a,moveUp:l,moveDown:u,select:c,setActiveIndex:r,setSelectedIndex:s}}function uS({children:n,menuItems:e,onSelectOption:t,...r}){const i=lS(e,t);return L.jsx(Wb.Provider,{value:i,children:L.jsx("div",{...r,children:n})})}const zb=T.forwardRef(({index:n,children:e,onMouseEnter:t,onClick:r,...i},s)=>{const{state:{activeIndex:o},setActiveIndex:a,setSelectedIndex:l,select:u}=bf(),c=T.useCallback(d=>{u(),l(-1),r==null||r(d)},[r,u,l]),f=T.useCallback(d=>{a(n),t==null||t(d)},[n,a,t]);return L.jsx("button",{ref:s,role:"menuitem",...i,onClick:c,onMouseEnter:f,"aria-selected":n!==void 0&&o===n?"true":void 0,tabIndex:-1,children:e})});function cS({children:n,autoIndex:e=!0,...t}){const r=T.useRef(null),{state:{activeIndex:i,menuItems:s}}=bf(),o=T.useMemo(()=>s?typeof n=="function"?n:()=>n:()=>null,[n,s]),a=T.useMemo(()=>{const l=o(s);return e?T.Children.map(l,(u,c)=>T.isValidElement(u)&&u.type===zb&&u.props.index===void 0?T.cloneElement(u,{index:c}):u):l},[o,e,s]);return T.useEffect(()=>{if(r.current){const l=r.current,u=l.children[i];if(u){const c=l.getBoundingClientRect(),f=u.getBoundingClientRect();f.bottom>c.bottom?l.scrollTop+=f.bottom-c.bottom:f.top<c.top&&(l.scrollTop-=c.top-f.top)}}},[i]),L.jsx("div",{ref:r,role:"menu",...t,children:a})}const Ku={Root:uS,Options:cS,Option:zb},dS=(n,e,t)=>za(n,t).toLowerCase().includes(e.toLowerCase()),Qp=n=>Object.keys(n).find(e=>typeof n[e]=="string")||"",za=(n,e)=>{const t=n[e];return typeof t=="string"?t:String(t)};function fS(n){const{query:e,items:t,filterBy:r,filter:i,sortBy:s,sortingOptions:o}=n,{caseSensitive:a=!1,priorityOrder:l=["exact","startsWith","contains"]}=o||{},u=a?e:e.toLowerCase();let c,f;i?(f=i,c=t.length>0?Qp(t[0]):""):(c=r||(t.length>0?Qp(t[0]):""),f=(p,m)=>dS(p,m,c));const d=s||c,h=new Map;return t.filter(p=>{try{return f(p,e)}catch(m){return console.warn("Error filtering item:",p,m),!1}}).sort((p,m)=>{const _=k=>(h.has(k)||h.set(k,za(k,d).toLowerCase()),h.get(k)??""),C=a?za(p,d):_(p),v=a?za(m,d):_(m);for(const k of l)switch(k){case"exact":if(C===u&&v!==u)return-1;if(v===u&&C!==u)return 1;break;case"startsWith":if(C.startsWith(u)&&!v.startsWith(u))return-1;if(v.startsWith(u)&&!C.startsWith(u))return 1;break;case"contains":{const M=C.indexOf(u),$=v.indexOf(u);if(M!==-1&&$===-1)return-1;if($!==-1&&M===-1)return 1;if(M!==-1&&$!==-1)return M-$;break}}return C.localeCompare(v)})}function hS(n){const{query:e,items:t,filterBy:r,filter:i,sortBy:s,sortingOptions:o}=n;return T.useMemo(()=>fS({query:e,items:t,filterBy:r,filter:i,sortBy:s,sortingOptions:o}),[e,t,r,i,s,o])}function pS(){const{moveUp:n,moveDown:e,select:t}=bf();return T.useMemo(()=>({moveUp:n,moveDown:e,select:t}),[n,e,t])}const gS=()=>{const n=pS(),[e]=we();T.useEffect(()=>{const t=r=>{const i={ArrowDown:()=>n==null?void 0:n.moveDown(),ArrowUp:()=>n==null?void 0:n.moveUp(),Enter:()=>n==null?void 0:n.select(),Tab:()=>n==null?void 0:n.select()}[r.key];return i?(i(),r.preventDefault(),r.stopPropagation(),!0):!1};return e.registerCommand(As,t,Rl)},[e,n])};function mS(){return gS(),null}function yS(n){const{options:e,onSelectOption:t,onClose:r,inverse:i,query:s,menuOpenKey:o}=n,[a]=we(),l=s!==void 0,[u,c]=T.useState(""),f=l?s??"":u,d=hS({query:f,items:e,filterBy:"name"}),h=p=>{r==null||r(),t?t(p):p.action(a)};return T.useEffect(()=>a.registerCommand(As,p=>{if(l)return!1;const m={Escape:()=>r==null?void 0:r(),Backspace:()=>{f.length===0?r==null||r():c(_=>_.slice(0,-1))}}[p.key];return m?(p.stopPropagation(),p.preventDefault(),m(),!0):p.key.length===1?(p.stopPropagation(),p.preventDefault(),p.key!==o&&c(_=>_+p.key),!0):!1},Rl),[a,l,f,o,r]),L.jsxs(Ku.Root,{className:`autocomplete-menu-container ${i?"inverse":""}`,menuItems:d,onSelectOption:p=>h(p),children:[!l&&L.jsx("input",{value:f,type:"text",disabled:!0}),L.jsx(mS,{}),L.jsx(Ku.Options,{className:"autocomplete-menu-options",autoIndex:!1,children:p=>p.map((m,_)=>L.jsxs(Ku.Option,{index:_,children:[L.jsx("span",{className:"label",children:m.label??m.name}),L.jsx("span",{className:"description",children:m.description})]},m.name))})]})}function _S({trigger:n,items:e}){const[t]=we(),[r,i]=T.useState(!1),s=T.useCallback(o=>{o.key==="Escape"&&r?(i(!1),t.focus()):o.key===n&&!r&&(o.preventDefault(),i(!0))},[t,n,r]);return T.useEffect(()=>t.registerRootListener(o=>{if(o)return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}}),[t,s]),T.useEffect(()=>t.registerUpdateListener(({prevEditorState:o,editorState:a})=>{const l=o.read(()=>{const u=ne();if(G(u))return u});a.read(()=>{const u=ne();!G(u)||l!=null&&l.is(u)||i(!1)})}),[t]),e&&L.jsx(aS,{isOpen:r,children:({placement:o})=>L.jsx(yS,{options:e,onClose:()=>i(!1),inverse:o==="top-start",menuOpenKey:n})})}function bS({scriptureReference:n,contextMarker:e,getMarkerAction:t}){return{markersMenuItems:T.useMemo(()=>{if(!e||!n)return;const r=Yp(e);if(r!=null&&r.children)return Object.values(r.children).flatMap(i=>i.map(s=>{const o=Yp(s),{action:a}=t(s,o);return{name:s,label:s,description:(o==null?void 0:o.description)??"",action:l=>{a({editor:l,reference:n})}}}))},[e,t,n])}}function Hc(n,e){if(!n||!ee(n))return[void 0,void 0];const t=n.getTextContent();if(e>=0&&e<t.length)return[n,e];let r=n.getNextSibling();if(!r){const s=n.getParent();Nt(s)&&(r=s.getNextSibling())}if(!r||!Nt(r)&&!ee(r))return[void 0,void 0];const i=e-t.length;return r&&ee(r)?Hc(r,i):Hc(r.getFirstChild()??void 0,i)}function Zp(n){const e=X2(n.jsonPath);let t=De();for(const r of e){if(!t||!V(t))return[void 0,void 0];t=t.getChildAtIndex(r)??void 0}return Hc(t,n.offset)}function eg(n){return V(n)?"element":"text"}function Hb(n){const{start:e}=n;let{end:t}=n;t===void 0&&(t=e);const[r,i]=Zp(e),[s,o]=Zp(t);if(!r||!s||i===void 0||o===void 0)return;const a=Fo();return a.anchor=an(r.getKey(),i,eg(r)),a.focus=an(s.getKey(),o,eg(s)),a}function tg(n,e){const t=[];let r=n;for(;r!=null&&r.getParent();){const i=r.getParent();if(i){const s=i==null?void 0:i.getChildren().indexOf(r);s>=0&&t.unshift(s)}r=i}return{jsonPath:Q2(t),offset:e}}function Kb(){const n=ne();if(!n||!G(n))return;const e=n.isBackward()?n.focus.getNode():n.anchor.getNode(),t=n.isBackward()?n.focus.offset:n.anchor.offset,r=tg(e,t);if(n.isCollapsed())return{start:r};const i=n.isBackward()?n.anchor.getNode():n.focus.getNode(),s=n.isBackward()?n.anchor.offset:n.focus.offset,o=tg(i,s);return{start:r,end:o}}function Ha(n,e){return`${n}:${e}`}function vS(n,e){T.useEffect(()=>{if(!n.hasNodes([At]))throw new Error("AnnotationPlugin: TypedMarkNode not registered on editor!");const t=new Map;return _t(Ny(n,At,r=>Io(r.getTypedIDs()),(r,i)=>{for(const[s,o]of Object.entries(r.getTypedIDs()))o.forEach(a=>{i.addID(s,a)})}),n.registerMutationListener(At,r=>{n.getEditorState().read(()=>{for(const[i,s]of r){const o=Ae(i);let a={};s==="destroyed"?a=t.get(i)??{}:Nt(o)&&(a=o.getTypedIDs());for(const[l,u]of Object.entries(a))if(!At.isReservedType(l))for(const c of u){let f=e.get(Ha(l,c));a[l]=u,t.set(i,a),s==="destroyed"?f!==void 0&&(f.delete(i),f.size===0&&e.delete(Ha(l,c))):(f===void 0&&(f=new Set,e.set(Ha(l,c),f)),f.has(i)||f.add(i))}}})},{skipInitialization:!0}))},[n,e])}const CS=T.forwardRef(function({logger:n},e){const[t]=we(),r=T.useMemo(()=>new Map,[]);return vS(t,r),T.useImperativeHandle(e,()=>({addAnnotation(i,s,o){if(At.isReservedType(s))throw new Error(`addAnnotation: Can't directly add this reserved annotation type '${s}'. Use the appropriate plugin instead.`);t.update(()=>{const a=Hb(i);if(a===void 0){n==null||n.error("Failed to find start or end node of the annotation.");return}Ib(a,s,o)},{tag:qc})},removeAnnotation(i,s){if(At.isReservedType(i))throw new Error(`removeAnnotation: Can't directly remove this reserved annotation type '${i}'. Use the appropriate plugin instead.`);const o=r.get(Ha(i,s));o!==void 0&&setTimeout(()=>{t.update(()=>{for(const a of o){const l=Ae(a);Nt(l)&&(l.deleteID(i,s),l.hasNoIDsForEveryType()&&Ob(l))}},{tag:qc})})}})),null}),Yl=`
`;function ni(n){return Dn(n)||Nn(n)||Gl(n)||Bt(n)||Bx(n)}function dr(n){return is(n)||Tr(n)}function Vb(n,e){if(!n)return!1;if(!e)return!0;let t=e.node.getParent();for(;t;){if(t===n)return!1;t=t.getParent()}return!0}function Kc(n,e){const t={insert:n.__text},r=fs(n,xs);if(r&&(t.attributes={segment:r}),e&&e.length>0){let i=e.map(s=>{const o={style:s.__marker},a=fs(s,ei);return a&&(o.cid=a),o});i.length===1&&(i=i[0]),t.attributes={...t.attributes,char:i}}return t}function ng(n){const e=new uo;return n.isEmpty()||n.read(()=>{const t=De();if(!t||t.isEmpty())return;const r=t.getChildren();if(r.length===1&&lr(r[0])&&(!r[0].getChildren()||r[0].getChildrenSize()===0))return;const i=ES();for(const s of i)e.push(s)}),e}function ES(){const n=[],e=qd(),t=[],r=[],i={children:[],contentsOps:[]};for(let s=0;s<e.length;s++){const o=e[s].node;n.push(...rg(o,s,e,t,r,i))}for(const s of t)n.push(...rg(s,e.length,e,t,r,i));return n}function rg(n,e,t,r,i,s){if(!n)return[];const o=[];return wS(n,o,r),kS(n,o,i,s),xS(n,e,t,i),Dn(n)&&o.push(AS(n)),Nn(n)&&o.push(NS(n)),Gl(n)&&o.push(MS(n)),SS(n,o,s),o}function wS(n,e,t){if(!n.isInline()){const r=t.pop();Tr(r)?e.push(TS(r)):Tt(r)?e.push(DS(r)):lr(r)&&e.push({insert:Yl})}dr(n)&&(t.includes(n)||t.push(n))}function kS(n,e,t,r){var i;if(!ee(n))return;const s=n.getParent();if(Bt(s)&&s.getFirstChild()===n)return;const o=Kc(n,t);r.children.includes(n)?(i=r.contentsOps)==null||i.push(o):e.push(o)}function xS(n,e,t,r){ct(n)&&!r.includes(n)&&r.push(n);const i=t[e+1];for(const s of r.toReversed())Vb(s,i)&&r.pop()}function SS(n,e,t){var r;if(!Bt(n))return;qd(n).forEach(s=>t.children.push(s.node));const i=OS(n);t.contentsOps=(r=i.insert.note.contents)==null?void 0:r.ops,e.push(i)}function TS(n){const e={style:Jl,code:n.__code};return{insert:Yl,attributes:{book:e}}}function AS(n){const e={style:nf,number:n.__number};return n.__sid&&(e.sid=n.__sid),n.__altnumber&&(e.altnumber=n.__altnumber),n.__pubnumber&&(e.pubnumber=n.__pubnumber),{insert:{chapter:e}}}function DS(n){const e={style:n.__marker};return{insert:Yl,attributes:{para:e}}}function NS(n){const e={style:lf,number:n.__number};return n.__sid&&(e.sid=n.__sid),n.__altnumber&&(e.altnumber=n.__altnumber),n.__pubnumber&&(e.pubnumber=n.__pubnumber),{insert:{verse:e}}}function MS(n){const e={style:n.__marker};return n.__sid&&(e.sid=n.__sid),n.__eid&&(e.eid=n.__eid),{insert:{milestone:e}}}function OS(n){const e={style:n.__marker,caller:n.__caller};return n.__category&&(e.category=n.__category),n.getChildrenSize()>1&&(e.contents={ops:[]}),{insert:{note:e}}}function IS({ignoreHistoryMergeTagChange:n=!0,ignoreSelectionChange:e=!1,onChange:t}){const[r]=we();return T.useLayoutEffect(()=>{if(t)return r.registerUpdateListener(i=>{const{editorState:s,dirtyElements:o,dirtyLeaves:a,prevEditorState:l,tags:u}=i;if(e&&o.size===0&&a.size===0||n&&u.has(vi)||l.isEmpty())return;const c=RS(r,i);t(s,r,u,c)})},[r,n,e,t]),null}function RS(n,{dirtyLeaves:e,prevEditorState:t}){let r=new uo;return n.getEditorState().read(()=>{const i=e.values().next().value??"";if(e.size===1&&ee(Ae(i))){const s=Ae(i),o=LS(s);if(ee(s)){const a=t.read(()=>{const c=Ae(i);return new uo([ee(c)?Kc(c):{insert:""}])}),l=new uo([Kc(s)]),u=new uo(o>0?[{retain:o}]:[]);r=r.concat(u).concat(a.diff(l))}}else{const s=ng(t),o=ng(n.getEditorState());r=s.diff(o)}}),r.ops}function LS(n){if(!n)return 0;const e=qd(),t=[];let r=0;for(let i=0;i<e.length;i++){const s=e[i].node;if(s===n)return r;r+=PS(s,i,e,t)}return r}function PS(n,e,t,r){return ee(n)?n.getTextContent().length:ni(n)?1:dr(n)?$S(n,e,t,r):0}function $S(n,e,t,r){if(r.includes(n)||r.push(n),Vb(n,t[e+1])){const i=r.indexOf(n);return i>-1&&r.splice(i,1),1}return 0}const FS=["style"],BS=["style","code"],kl=["style","cid"],qS=["style","number","sid","altnumber","pubnumber"],jS=["style","number","sid","altnumber","pubnumber"],US=["style","sid","eid"],WS=["style","caller","category","contents"];function zS(n,e,t,r){let i=0;n.forEach(s=>{if("retain"in s)i+=HS(s,i,r);else if("delete"in s){if(typeof s.delete!="number"||s.delete<=0){r==null||r.error(`Invalid delete operation: ${JSON.stringify(s)}`);return}r==null||r.debug(`Delete: ${s.delete}`),VS(i,s.delete,r)}else"insert"in s?typeof s.insert=="string"?(r==null||r.debug(`Insert: '${s.insert}'`),i+=JS(i,s.insert,s.attributes,r)):typeof s.insert=="object"&&s.insert!==null?(r==null||r.debug(`Insert embed: ${JSON.stringify(s.insert)}`),YS(i,s,e,t,r)?i+=1:r==null||r.error(`Failed to process insert embed operation: ${JSON.stringify(s.insert)} at index ${i}. Document may be inconsistent.`)):r==null||r.error(`Insert of unknown type: ${JSON.stringify(s.insert)}`):r==null||r.error(`Unknown operation: ${JSON.stringify(s)}`)})}function HS(n,e,t){return typeof n.retain!="number"||n.retain<0?(t==null||t.error(`Invalid retain operation: ${JSON.stringify(n)}`),0):(t==null||t.debug(`Retain: ${n.retain}`),n.attributes&&(t==null||t.debug(`Retain attributes: ${JSON.stringify(n.attributes)}`),KS(e,n.retain,n.attributes,t)),n.retain)}function KS(n,e,t,r){r==null||r.debug(`Applying attributes for range [${n}, ${n+e-1}] with attributes: ${JSON.stringify(t)}`);let i=e,s=0,o=-1;const a=De();function l(u){if(i<=0)return!0;if(ee(u)){const c=u.getTextContentSize();if(n<s+c&&s<n+e){const f=Math.max(0,n-s),d=c-f,h=Math.min(i,d);if(h>0){let p=u;const m=f>0,_=h<c-f;if(m&&_){const[,C]=u.splitText(f);[p]=C.splitText(h)}else m?[,p]=u.splitText(f):_&&([p]=u.splitText(h));if(Ro(t)){const C=p.getParent();if(ct(C)){const v=t.char;let k;Array.isArray(v)?o>=0&&o<=v.length-1&&(k=v[o]):o===0&&(k=v);const M=k?Uc(k,C):!1;if(M&&Array.isArray(v)&&v.length>1){const $=Oe("");p.replace($);const x=typeof t.segment=="string"?t.segment:void 0,O=Xl(v.slice(1),p,x);$.replace(O),Tn(t,p)}else if(M)Tn(t,p);else{const $=Oe("");p.replace($);const x=ig(p,t,r);x?C.insertAfter(x):$.replace(p)}}else{const v=Oe("");p.replace(v);const k=ig(p,t,r);k?v.replace(k):v.replace(p)}}else Tn(t,p);i-=h}}s+=c}else if(ni(u))n<=s&&s<n+e&&i>0&&(sg(u,t),i-=1),s+=1;else if(ct(u)){o+=1;let c=!1;if(n<=s&&s<n+e&&i>0)if(Ro(t)){const f=t.char;let d;if(Array.isArray(f)?o>=0&&o<=f.length-1&&(d=f[o]):o===0&&(d=f),d){u.setMarker(d.style),typeof d.cid=="string"&&kr(u,ei,()=>d.cid);const h=vt(d,kl);h&&Object.keys(h).length>0?u.setUnknownAttributes({...u.getUnknownAttributes()??{},...h}):u.setUnknownAttributes(void 0)}}else(t.char===!1||t.char===null||i1(t.char))&&(c=!0);if(i>0){const f=u.getChildren();for(const d of f){if(i<=0)break;if(l(d)&&i<=0)return c&&Ph(u),!0}}c&&Ph(u),o-=1}else if(dr(u)){const c=u.getChildren();for(const d of c){if(i<=0)break;if(l(d)&&i<=0)return!0}const f=1;if(n<=s&&s<n+i&&i>0){if(!lr(u))sg(u,t);else if(Yb(t)){const d=Gb(t.para);d&&u.replace(d,!0)}i-=f}s+=f}else if(V(u)){const c=u.getChildren();for(const f of c){if(i<=0)break;if(l(f)&&i<=0)return!0}}return i<=0}l(a),i>0&&(r==null||r.warn(`$applyAttributes: Not all characters in the retain operation (length ${e}) could be processed. Remaining: ${i}. targetIndex: ${n}, final currentIndex: ${s}`))}function ig(n,e,t){var r;const i=typeof e.segment=="string"?e.segment:void 0,s=Xl(e.char,n,i);if(!ct(s)){t==null||t.error(`Failed to create CharNode for text transformation. Style: ${Array.isArray(e.char)?e.char[0].style:(r=e.char)==null?void 0:r.style}. Falling back to standard text attributes.`),Tn(e,n);return}const o={};Xb.forEach(u=>{n.hasFormat(u)&&(o[u]="true")});const a={};Object.entries(e).forEach(([u,c])=>{u==="segment"||u==="char"||(typeof c=="string"?a[u]=c:c===!0?a[u]="true":c===!1&&(a[u]="false"))});const l={...s.getUnknownAttributes()??{},...o,...a};return Object.keys(l).length>0&&s.setUnknownAttributes(l),Tn(e,n),s}function sg(n,e){for(const t of Object.keys(e)){const r=e[t];if(t==="char"&&ct(n)&&Ro(e)){const i=r;if(n.setMarker(i.style),typeof i.cid=="string"){const o=i.cid;kr(n,ei,()=>o)}const s=vt(i,kl);s&&Object.keys(s).length>0&&n.setUnknownAttributes({...n.getUnknownAttributes()??{},...s});continue}typeof r=="string"&&(Dn(n)||Nn(n)||Gl(n)||Bt(n)||Ho(n)?n.setUnknownAttributes({...n.getUnknownAttributes()??{},[t]:r}):(Tr(n)||Tt(n)||ct(n))&&(t==="style"&&!Tr(n)?n.setMarker(r):t==="code"&&Tr(n)?n.setCode(r):n.setUnknownAttributes({...n.getUnknownAttributes()??{},[t]:r})),t==="segment"&&kr(n,xs,()=>r))}}function VS(n,e,t){if(e<=0)return;const r=De();let i=0,s=e;function o(a){if(s<=0)return!0;if(ee(a)){let l=a.getTextContentSize();if(n<i+l&&i<n+s){const u=Math.max(0,n-i),c=l-u,f=Math.min(s,c);f>0&&(a.spliceText(u,f,""),a.getTextContentSize()===0&&a.remove(),t==null||t.debug(`Deleted ${f} length from TextNode (key: ${a.getKey()}) at nodeOffset ${u}. Original targetIndex: ${n}, current currentIndex: ${i}.`),s-=f,l-=f)}i+=l}else if(ni(a))n<=i&&i<n+s?(a.remove(),t==null||t.debug(`Deleted embed node (key: ${a.getKey()}) at currentIndex: ${i}. Original targetIndex: ${n}, remainingToDelete: ${s}.`),s-=1):i+=1;else if(dr(a)){const l=a.getChildren().slice(),u=a.getChildren();for(const c of u){if(s<=0)break;if(o(c)&&s<=0)return!0}if(n<=i&&i<n+s&&dr(a)){s-=1;const c=a.getChildren().length;if(l.length>0&&c===0){const f=a.getParent();((f==null?void 0:f.getChildren())??[]).length>1?(a.remove(),t==null||t.debug(`Removed entire ParaNode that had all its content deleted at currentIndex: ${i}. Original targetIndex: ${n}, remainingToDelete: ${s}.`)):(a.replace(Wn(),!0),t==null||t.debug(`Replaced last ParaNode with ImpliedParaNode at currentIndex: ${i}. Original targetIndex: ${n}, remainingToDelete: ${s}.`))}else if(s>0){const f=a.getNextSibling();if(f&&is(f)){let d=i+1;const h=f.getChildren();for(const m of h){if(s<=0)break;const _=i;if(i=d,o(m)){i=_;break}ee(m)?d+=m.getTextContentSize():ni(m)&&(d+=1),i=_}const p=f.getChildren();for(const m of p)m.remove(),a.append(m);f.remove(),t==null||t.debug(`Merged next paragraph into current one after deleting symbolic close at currentIndex: ${i}. Original targetIndex: ${n}, remainingToDelete: ${s}.`)}else a.replace(Wn(),!0)}else Tt(a)?a.replace(Wn(),!0):a.remove()}i+=1}else if(V(a)){const l=a.getChildren();for(const u of l){if(s<=0)break;if(o(u)&&s<=0)return!0}}return s<=0}o(r),s>0&&(t==null||t.warn(`Delete operation could not remove all requested characters. Remaining to delete: ${s}. Original targetIndex: ${n}, OT length: ${e}. Final currentIndex: ${i}`))}function JS(n,e,t,r){return e===Yl?XS(n,t,r):Ro(t)?GS(n,e,t,r):(r==null||r.debug(`Attempting to insert text "${e}" with attributes ${JSON.stringify(t)} at index ${n}`),Vc(n,e,t,r))}function GS(n,e,t,r){r==null||r.debug(`Attempting to insert CharNode with text "${e}" and attributes ${JSON.stringify(t.char)} at index ${n}`);const i=Oe(e);Tn(t,i);let s;{let c=function(h){if(ee(h)){const p=h.getTextContentSize();if(n>=d&&n<=d+p){const m=h.getParent();return ct(m)&&(s=m),!0}d+=p}else if(ni(h))d+=1;else if(ct(h)){const p=h.getChildren();for(const m of p)if(c(m))return!0}else if(V(h)){const p=h.getChildren();for(const m of p)if(c(m))return!0;dr(h)&&(d+=1)}return!1};const f=De();let d=0;c(f)}let o=t.char;if(Array.isArray(o)&&s){const c=s.getMarker(),f=fs(s,ei),d=o[0];d&&d.style===c&&d.cid===f&&(o=o.slice(1),o.length===1&&(o=o[0]))}const a=typeof t.segment=="string"?t.segment:void 0,l=Xl(o,i,a);if(!ct(l))return r==null||r.error(`CharNode style is missing for text "${e}". Attributes: ${JSON.stringify(t.char)}. Falling back to rich text insertion.`),Vc(n,e,void 0,r);const u={};for(const[c,f]of Object.entries(t))c!=="char"&&c!=="segment"&&typeof f=="string"&&(u[c]=f);return Object.keys(u).length>0&&l.setUnknownAttributes(u),Jb(n,l,r)?e.length:(r==null||r.error(`Failed to insert CharNode with text "${e}" at index ${n}. Falling back to rich text.`),Vc(n,e,void 0,r))}function Vc(n,e,t,r){if(e.length<=0)return r==null||r.debug("Attempted to insert empty string. No action taken."),0;const i=De();let s=0,o=!1;function a(l){if(o)return!0;if(ee(l)){const u=l.getTextContentSize();if(n>=s&&n<=s+u){const c=n-s,f=Oe(e);if(Tn(t,f),c===0)l.insertBefore(f);else if(c===u)l.insertAfter(f);else{const[,d]=l.splitText(c);d.insertBefore(f)}return r==null||r.debug(`Inserted text "${e}" in/around TextNode (key: ${l.getKey()}) at nodeOffset ${c}. Original targetIndex: ${n}, currentIndex at node start: ${s}.`),o=!0,!0}s+=u}else if(ni(l))s+=1;else if(ct(l)){if(!o&&n===s){const c=Oe(e);Tn(t,c);const f=l.getFirstChild();return f?f.insertBefore(c):l.append(c),r==null||r.debug(`Inserted text "${e}" at beginning of CharNode ${l.getType()} (key: ${l.getKey()}).`),o=!0,!0}const u=l.getChildren();for(const c of u){if(a(c))return!0;if(o)break}if(!o&&n===s){const c=Oe(e);return Tn(t,c),l.append(c),r==null||r.debug(`Appended text "${e}" to end of CharNode ${l.getType()} (key: ${l.getKey()}).`),o=!0,!0}}else if(dr(l)){if(!o&&n===s){const c=Oe(e);Tn(t,c);const f=l.getFirstChild();return f?f.insertBefore(c):l.append(c),r==null||r.debug(`Inserted text "${e}" at beginning of container ${l.getType()} (key: ${l.getKey()}).`),o=!0,!0}const u=l.getChildren();for(const c of u){if(a(c))return!0;if(o)break}if(!o&&n===s){const c=Oe(e);return Tn(t,c),l.append(c),r==null||r.debug(`Appended text "${e}" to end of container ${l.getType()} (key: ${l.getKey()}).`),o=!0,!0}s+=1}else if(V(l)){const u=l.getChildren();for(const c of u){if(a(c))return!0;if(o)break}}return o}if(a(i),!o&&n===s){r==null||r.debug(`Insertion point matches end of document (targetIndex: ${n}, final currentIndex: ${s}). Appending text to new ParaNode.`);const l=Oe(e);Tn(t,l);const u=Wn().append(l);i.append(u),o=!0}return o?e.length:(r==null||r.warn(`$insertRichText: Could not find insertion point for text "${e}" at targetIndex ${n}. Final currentIndex: ${s}. Text not inserted.`),0)}function Jb(n,e,t){const r=De();let i=0,s=!1;function o(a){if(s)return!0;if(a===r&&n===0&&!r.getFirstChild())return e.isInline()?(t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${e.getType()} into empty root, wrapped in ImpliedParaNode. targetIndex: ${n}`),r.append(Wn().append(e))):(t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting block node ${e.getType()} directly into empty root. targetIndex: ${n}`),r.append(e)),s=!0,!0;if(!V(a))return!1;const l=a.getChildren();for(const u of l){if(n===i&&!s){if(a===r&&e.isInline())if(is(u)){t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${e.getType()} into existing ${u.getType()} at beginning. targetIndex: ${n}`);const c=u.getFirstChild();c?c.insertBefore(e):u.append(e)}else t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${e.getType()} into root before ${u.getType()}, wrapping in ImpliedParaNode. targetIndex: ${n}`),u.insertBefore(Wn().append(e));else u.insertBefore(e),t==null||t.debug(`$insertNodeAtCharacterOffset: Inserted node ${e.getType()} (key: ${e.getKey()}) before child ${u.getType()} (key: ${u.getKey()}) in ${a.getType()} (key: ${a.getKey()}). targetIndex: ${n}, currentIndex: ${i}`);return s=!0,!0}if(ee(u)){const c=u.getTextContentSize();if(!s&&n>i&&n<i+c){const f=n-i,[d]=u.splitText(f);return d.insertAfter(e),t==null||t.debug(`$insertNodeAtCharacterOffset: Inserted node ${e.getType()} (key: ${e.getKey()}) by splitting TextNode (key: ${u.getKey()}) at offset ${f}. targetIndex: ${n}, currentIndex at node start: ${i}`),s=!0,!0}i+=c}else if(ni(u))i+=1;else if(ct(u)){if(o(u))return!0}else if(dr(u)){const c=u;if(o(c))return!0;const f=i;if(lr(c)&&dr(e)&&n===f&&!s)return t==null||t.debug(`$insertNodeAtCharacterOffset: Replacing ImpliedParaNode (key: ${c.getKey()}) with block node '${e.getType()}' (key: ${e.getKey()}) at OT index ${n}.`),u.replace(e,!0),i=f+1,s=!0,!0;i+=1}else if(V(u)&&o(u))return!0;if(s)return!0}return V(a)&&!s&&(n===i||a===r&&n>i)?a===r?(e.isInline()?(t==null||t.debug(`$insertNodeAtCharacterOffset: Appending inline node ${e.getType()} to root. Wrapping in new ImpliedParaNode. targetIndex: ${n}, current document OT length: ${i}.`),r.append(Wn().append(e))):(t==null||t.debug(`$insertNodeAtCharacterOffset: Appending block node ${e.getType()} to root. targetIndex: ${n}, current document OT length: ${i}.`),r.append(e)),s=!0,!0):is(a)?lr(a)&&Tt(e)&&n===i?(t==null||t.debug(`$insertNodeAtCharacterOffset: Replacing ImpliedParaNode container (key: ${a.getKey()}) with ParaNode ${e.getType()} (key: ${e.getKey()}) via append logic. targetIndex: ${n}`),a.replace(e,!0),s=!0,!0):e.isInline()||!is(e)?(t==null||t.debug(`$insertNodeAtCharacterOffset: Appending node ${e.getType()} to existing container ${a.getType()} (key: ${a.getKey()}). targetIndex: ${n}, container end OT index: ${i}.`),a.append(e),s=!0,!0):(t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting block node ${e.getType()} after container ${a.getType()} (key: ${a.getKey()}). targetIndex: ${n}, container end OT index: ${i}.`),a.insertAfter(e),s=!0,!0):(e.isInline()||!is(e)?(t==null||t.debug(`$insertNodeAtCharacterOffset: Appending node ${e.getType()} to generic element ${a.getType()} (key: ${a.getKey()}). targetIndex: ${n}, element end OT index: ${i}.`),a.append(e)):(t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting block node ${e.getType()} after generic element ${a.getType()} (key: ${a.getKey()}). targetIndex: ${n}, element end OT index: ${i}.`),a.insertAfter(e)),s=!0,!0):s}return o(r),s||t==null||t.warn(`$insertNodeAtCharacterOffset: Could not find insertion point for node ${e.getType()} (key: ${e.getKey()}) at targetIndex ${n}. Final currentIndex: ${i}. Node not inserted.`),s}function YS(n,e,t,r,i){const s=e.insert;let o;return wa("chapter",s)?o=QS(s.chapter,t):wa("verse",s)?o=ZS(s.verse,t):wa("ms",s)?o=e1(s.ms):wa("note",s)&&(o=t1(e,t,r)),o?Jb(n,o,i):(i==null||i.error(`$insertEmbedAtCurrentIndex: Cannot create LexicalNode for embed object: ${JSON.stringify(s)}`),!1)}function XS(n,e,t){let r;Yb(e)?r=Gb(e.para):r1(e)&&(r=n1(e.book)),r??(r=Wn());const i=r,s=Tt(i),o=lr(i);let a=0,l=!1;function u(c){if(l)return!0;if(ee(c)){const f=c.getTextContentSize();if(n>=a&&n<=a+f){const d=c.getParent();if(Tt(d)&&(s||o)){t==null||t.debug(`Splitting ParaNode (marker: ${d.getMarker()}) with LF attributes at targetIndex ${n}`);const h=n-a,[p]=h>0?c.splitText(h):[void 0];let m=p==null?void 0:p.getPreviousSibling();for(;m;){const _=m;m=m.getPreviousSibling();const C=i.getFirstChild();C?C.insertBefore(_):i.append(_)}return p&&i.append(p),d.insertBefore(i),l=!0,!0}}a+=f}else if(ni(c))a+=1;else if(dr(c)){const f=c.getChildren();for(const d of f){if(u(d))return!0;if(l)break}if(n===a){if(lr(c)&&i)return t==null||t.debug(`Replacing ImpliedParaNode (key: ${c.getKey()}) with ParaNode at targetIndex ${n}`),c.replace(i,!0),l=!0,!0;if(Tt(c)&&i){const d=c;return t==null||t.debug(`Creating new block node with LF attributes after existing ParaNode (marker: ${d.getMarker()}) at targetIndex ${n}`),d.insertAfter(i),l=!0,!0}}if(a+=1,n===a&&Tt(c)&&i)return t==null||t.debug(`Creating new block node after existing ParaNode (marker: ${c.getMarker()}) at targetIndex ${n}`),c.insertAfter(i),l=!0,!0}else if(V(c)){const f=c.getChildren();for(const d of f){if(u(d))return!0;if(l)break}}return l}return u(De()),l||t==null||t.warn(`Could not find location to handle newline with para attributes at targetIndex ${n}. Final currentIndex: ${a}.`),1}function QS(n,e){const{number:t,sid:r,altnumber:i,pubnumber:s}=n;if(!t)return;const o=vt(n,qS);let a;if(e.markerMode==="editable")a=gb(t,r,i,s,o);else{const l=e.markerMode==="visible";a=sf(t,l,r,i,s,o)}return a}function ZS(n,e){const{style:t,number:r,sid:i,altnumber:s,pubnumber:o}=n;if(!r)return;const a=vt(n,jS);let l;if(e.markerMode==="editable"){if(!t)return;const u=Ko(t,r);l=Ab(r,u,i,s,o,a)}else{const u=e.markerMode==="visible";l=mf(r,u,i,s,o,a)}return l}function e1(n){const{style:e,sid:t,eid:r}=n;if(!e)return;const i=vt(n,US);return kb(e,t,r,i)}function t1(n,e,t){var r;const i=n.insert,{style:s,caller:o,category:a,contents:l}=i.note;if(!s||!o)return;const u=vt(i.note,WS),c=af(s,o,a,u),f=(r=n.attributes)==null?void 0:r.segment;f&&typeof f=="string"&&kr(c,xs,()=>f);const d=[];for(const _ of(l==null?void 0:l.ops)??[])typeof _.insert=="string"&&(Ro(_.attributes)?d.push(Xl(_.attributes.char,Oe(_.insert))):d.push(Oe(_.insert)));let h;if((e==null?void 0:e.markerMode)==="editable")h=Oe(ff(o));else{const _=hf(d);let C=()=>{};t!=null&&t.noteCallerOnClick&&(C=t.noteCallerOnClick),h=gf(o,_,C)}let p,m;return((e==null?void 0:e.markerMode)==="visible"||(e==null?void 0:e.markerMode)==="editable")&&(p=zc(s),m=zc(s,"closing")),p&&c.append(p),c.append(h,...d),m&&c.append(m),c}function n1(n){const{style:e,code:t}=n;if(!e||e!==Jl||!t||!On.isValidBookCode(t))return;const r=vt(n,BS);return db(t,r)}function Gb(n){const{style:e}=n;if(!e)return;const t=vt(n,FS);return Oo(e,t)}function Xl(n,e,t){if(Array.isArray(n)){if(n.length===0)throw new Error("Empty charAttr array");return n.reduceRight((r,i,s)=>{const o=Cl(i.style,vt(i,kl));return typeof i.cid=="string"&&kr(o,ei,()=>i.cid),t&&s===n.length-1&&kr(o,xs,()=>t),r&&o.append(r),o},e)}else{const r=Cl(n.style,vt(n,kl));return typeof n.cid=="string"&&kr(r,ei,()=>n.cid),t&&kr(r,xs,()=>t),e&&r.append(e),r}}function wa(n,e){if(!(n in e))return!1;const t=e[n];return typeof t=="object"&&t!==null}function r1(n){return!!n&&!!n.book&&typeof n.book=="object"&&n.book!==null&&"style"in n.book&&typeof n.book.style=="string"&&"code"in n.book&&typeof n.book.code=="string"}function Yb(n){return!!n&&!!n.para&&typeof n.para=="object"&&n.para!==null&&"style"in n.para&&typeof n.para.style=="string"}function Ro(n){return!!n&&!!n.char&&typeof n.char=="object"&&n.char!==null&&(!Array.isArray(n.char)&&"style"in n.char&&typeof n.char.style=="string"||Array.isArray(n.char)&&n.char.length>0&&"style"in n.char[0]&&typeof n.char[0].style=="string")}function i1(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Object.keys(n).length===0}function Tn(n,e){if(n)for(const t of Object.keys(n)){if(t==="segment"&&typeof n[t]=="string"){const r=n[t];kr(e,xs,()=>r);continue}if(s1(t)){const r=!!n[t],i=t,s=e.hasFormat(i);(r&&!s||!r&&s)&&e.toggleFormat(i)}}}const Xb=["bold","underline","strikethrough","italic","highlight","code","subscript","superscript","lowercase","uppercase","capitalize"];function s1(n){return Xb.includes(n)}function o1(){const[n]=we();return a1(n),null}function a1(n){T.useEffect(()=>{if(!n.hasNodes([Rr,Yt,Xt]))throw new Error("ArrowNavigationPlugin: ImmutableChapterNode, ImmutableVerseNode or NoteNode not registered on editor!");const e=t=>{if(t.key!=="ArrowLeft"&&t.key!=="ArrowRight")return!1;const r=ne();if(!G(r)||!r.isCollapsed())return!1;const i=n.getRootElement();if(!i)return!1;const s=i.dir||"ltr";let o=!1;return l1(s,t.key)?o=c1(r):u1(s,t.key)&&(o=d1(r)),o&&t.preventDefault(),o};return n.registerCommand(As,e,Rl)},[n])}function l1(n,e){return n==="ltr"&&e==="ArrowRight"||n==="rtl"&&e==="ArrowLeft"}function u1(n,e){return n==="ltr"&&e==="ArrowLeft"||n==="rtl"&&e==="ArrowRight"}function c1(n){const e=Cx(n);if(!Us(e)&&!Jo(e))return!1;const t=n.anchor.getNode();if(Tt(t)||lr(t)){if(n.anchor.offset===t.getChildrenSize())return!1}else if(n.anchor.offset!==t.getTextContentSize())return!1;const r=e.getNextSibling();if(!Bt(r))return!1;const i=r.getNextSibling();return i?i.selectStart():r.selectEnd(),!0}function d1(n){const e=Ex(n);if(Us(e)&&!e.getPreviousSibling())return!0;if(!Bt(e))return!1;const t=n.anchor.offset===0,r=e.getPreviousSibling();return!Jo(r)||!t?!1:(r.selectStart(),!0)}function f1(){const[n]=we();return h1(n),null}function h1(n){T.useEffect(()=>{if(!n.hasNodes([Qe]))throw new Error("CharNodePlugin: CharNode not registered on editor!");return n.registerNodeTransform(Qe,p1)},[n])}function p1(n){if(!ct(n))return;if(n.isEmpty()){n.remove();return}const e=n.getMarker(),t=fs(n,ei),r=n.getUnknownAttributes(),i=n.getNextSibling();ct(i)&&Uc({style:e,cid:t},i)&&Fr(r,i.getUnknownAttributes())&&(n.append(...i.getChildren()),i.remove());const s=n.getPreviousSibling();ct(s)&&Uc({style:e,cid:t},s)&&Fr(r,s.getUnknownAttributes())&&(s.append(...n.getChildren()),n.remove())}function Qb(n){return n.replaceAll("	"," ")}const Zb=n=>{navigator.clipboard.read().then(async e=>{if((await navigator.permissions.query({name:"clipboard-read"})).state==="denied"){alert("Not allowed to paste from clipboard.");return}const t=new DataTransfer,r=e[0];for(const s of r.types){const o=await(await r.getType(s)).text();t.setData(s,Qb(o))}const i=new ClipboardEvent("paste",{clipboardData:t});n.dispatchCommand(Bi,i)})},e0=n=>{navigator.clipboard.read().then(async()=>{if((await navigator.permissions.query({name:"clipboard-read"})).state==="denied"){alert("Not allowed to paste from clipboard.");return}const e=new DataTransfer,t=await navigator.clipboard.readText();e.setData("text/plain",Qb(t));const r=new ClipboardEvent("paste",{clipboardData:e});n.dispatchCommand(Bi,r)})};function g1(){const[n]=we();return T.useEffect(()=>{const e=t=>{const{key:r,shiftKey:i,metaKey:s,ctrlKey:o,altKey:a}=t;!(vc?s:o)||a||(!i&&r.toLowerCase()==="c"?(t.preventDefault(),n.dispatchCommand(qi,null)):!i&&r.toLowerCase()==="x"?(t.preventDefault(),n.dispatchCommand(Ds,null)):r.toLowerCase()==="v"&&(t.preventDefault(),i?e0(n):Zb(n)))};return n.registerRootListener((t,r)=>{r!==null&&r.removeEventListener("keydown",e),t!==null&&t.addEventListener("keydown",e)})},[n]),null}function m1({logger:n}){const[e]=we();return T.useEffect(()=>_t(e.registerCommand(As,t=>t.key!=="\\"&&t.key!=="/"?!1:(t.preventDefault(),!0),Fa),e.registerCommand(Bi,t=>{var r;const i=(r=t.clipboardData)==null?void 0:r.getData("text/plain");return!i||!i.includes("\\")&&!i.includes("/")?!1:(n==null||n.info("CommandMenuPlugin: paste containing backslash or forward slash ignored."),t.preventDefault(),!0)},Fa),e.registerCommand(Ol,t=>{var r;const i=(r=t.dataTransfer)==null?void 0:r.getData("text/plain");return!i||!i.includes("\\")&&!i.includes("/")?!1:(n==null||n.info("CommandMenuPlugin: drag containing backslash or forward slash ignored."),t.preventDefault(),!0)},Fa)),[e,n]),null}function y1({index:n,isSelected:e,onClick:t,onMouseEnter:r,option:i}){let s="item";return e&&(s+=" selected"),i.isDisabled&&(s+=" disabled"),L.jsx("li",{tabIndex:-1,className:s,ref:i.setRefElement,role:"option","aria-selected":e,"aria-disabled":i.isDisabled,id:"typeahead-item-"+n,onMouseEnter:r,onClick:i.isDisabled?void 0:t,children:L.jsx("span",{className:"text",children:i.title})},i.key)}function _1({options:n,selectedItemIndex:e,onOptionClick:t,onOptionMouseEnter:r}){return L.jsx("div",{className:"typeahead-popover",children:L.jsx("ul",{children:n.map((i,s)=>L.jsx(y1,{index:s,isSelected:e===s,onClick:()=>t(i,s),onMouseEnter:()=>r(s),option:i},i.key))})})}class ka extends RE{constructor(e,t){super(e),fe(this,"title"),fe(this,"onSelect"),fe(this,"isDisabled"),this.title=e,this.onSelect=t.onSelect.bind(this),this.isDisabled=t.isDisabled||!1}}function b1(n,e="editor-input"){return n?n.classList.contains(e):!1}function v1(){const[n]=we(),[e,t]=T.useState(()=>!n.isEditable()),r=T.useRef(void 0),i=T.useRef(void 0),s=T.useRef(void 0),o=T.useMemo(()=>[new ka("Cut",{onSelect:()=>{n.dispatchCommand(Ds,null)},isDisabled:e}),new ka("Copy",{onSelect:()=>{n.dispatchCommand(qi,null)}}),new ka("Paste",{onSelect:()=>{Zb(n)},isDisabled:e}),new ka("Paste as Plain Text",{onSelect:()=>{e0(n)},isDisabled:e})],[n,e]),a=T.useCallback((l,u,c)=>{n.update(()=>{l==null||l.onSelect(u),c()})},[n]);return T.useEffect(()=>{var l;i.current=((l=n.getRootElement())==null?void 0:l.className)??""},[n]),T.useEffect(()=>{const l=()=>{var u;(u=s.current)==null||u.call(s)};return window.addEventListener("scroll",l,!0),()=>{window.removeEventListener("scroll",l,!0)}},[]),T.useEffect(()=>n.registerEditableListener(l=>{t(!l)}),[n]),L.jsx($E,{options:o,onSelectOption:a,onWillOpen:l=>{r.current=l.target},menuRenderFn:(l,{selectedIndex:u,options:c,selectOptionAndCleanUp:f,setHighlightedIndex:d},{setMenuRef:h})=>(s.current=()=>f(void 0),l.current&&!b1(r.current,i.current)&&!Cb(r.current)?En.createPortal(L.jsx("div",{className:"typeahead-popover auto-embed-menu",style:{marginLeft:l.current.style.width,userSelect:"none",width:200},ref:h,children:L.jsx(_1,{options:o,selectedItemIndex:u,onOptionClick:(p,m)=>{p.isDisabled||(d(m),f(p))},onOptionMouseEnter:p=>{d(p)}})}),l.current):null)})}function C1({isEditable:n}){const[e]=we();return T.useLayoutEffect(()=>{e.setEditable(n)},[e,n]),null}function E1({scripture:n,nodeOptions:e,editorAdaptor:t,viewOptions:r,logger:i}){const[s]=we();return T.useEffect(()=>{var o;(o=t.initialize)==null||o.call(t,e,i)},[t,i,e]),T.useEffect(()=>{var o;(o=t.reset)==null||o.call(t);const a=t.serializeEditorState(n,r);if(a==null){i==null||i.warn("LoadStatePlugin: serializedEditorState was null or undefined. Skipping editor update.");return}try{const l=s.parseEditorState(a);s.update(()=>{s.setEditorState(l),s.dispatchCommand(km,void 0)},{tag:tf})}catch{i==null||i.error("LoadStatePlugin: error parsing or setting editor state.")}},[s,t,i,n,r]),null}function w1({nodeOptions:n,viewOptions:e,logger:t}){const[r]=we();return k1(n,t),x1(r,e),null}function k1(n,e){const t=T.useRef(void 0),r=n.noteCallers;T.useEffect(()=>{let i=r;(!i||i.length<=0)&&(i=Kx),t.current!==i&&(t.current=i,M1("note-callers",i,e))},[e,r])}function x1(n,e){T.useEffect(()=>{if(!n.hasNodes([Qe,Xt,cr]))throw new Error("NoteNodePlugin: CharNode, NoteNode or ImmutableNoteCallerNode not registered on editor!");const t=r=>n.update(()=>N1(r));return _t(n.registerNodeTransform(Xt,r=>S1(r,e)),n.registerNodeTransform(Qe,T1),n.registerNodeTransform(Jt,A1),n.registerMutationListener(cr,(r,{prevEditorState:i})=>D1(r,i)),n.registerRootListener((r,i)=>{i!==null&&i.removeEventListener("dblclick",t),r!==null&&r.addEventListener("dblclick",t)}))},[n,e])}function S1(n,e){!n.getChildren().some(t=>Vo(t))&&(e==null?void 0:e.markerMode)!=="editable"&&n.remove()}function T1(n){const e=n.getParentOrThrow(),t=e.getChildren(),r=t.find(s=>Vo(s));if(!ct(n)||!Bt(e)||!r)return;const i=hf(t);r.getPreviewText()!==i&&r.setPreviewText(i)}function A1(n){const e=bx(n),t=e==null?void 0:e.getChildren(),r=t==null?void 0:t.find(s=>Vo(s));if(!ee(n)||!Bt(e)||!r||!t)return;const i=hf(t);r.getPreviewText()!==i&&r.setPreviewText(i)}function D1(n,e){for(const[t,r]of n){if(r!=="destroyed")continue;const i=e.read(()=>{const o=Ae(t),a=o==null?void 0:o.getParent();return Vo(o)&&Bt(a)&&a.getCaller()===Li}),s=document.querySelector(".editor-input");!i||!s||(s.classList.add("reset-counters"),s.offsetHeight,s.classList.remove("reset-counters"))}}function N1(n){const e=ne();if(!G(e))return;const t=e.anchor,r=e.focus,i=t.getNode(),s=r.getNode();if(Bt(i)&&ee(s)){n.preventDefault();const o=Fo();o.anchor.set(s.getKey(),0,"text"),o.focus.set(s.getKey(),r.offset,"text"),Mt(o)}}function M1(n,e,t){for(const r of document.styleSheets)try{const i=r.cssRules||r.rules;for(const s of i)if(O1(s,n)){const o=e.map(a=>`"${a}"`).join(" ");s.symbols=o;return}}catch{continue}t==null||t.warn(`Editor: counter style "${n}" not found.`)}function O1(n,e){return typeof n=="object"&&n!==null&&"name"in n&&n.name===e&&"symbols"in n&&typeof n.symbols=="string"}function I1({onChange:n}){const[e]=we();return T.useEffect(()=>e.registerCommand(Ts,()=>{const t=e.read(()=>Kb());return n==null||n(t),!1},Is),[e,n]),null}function R1(){const[n]=we();return L1(n),null}function L1(n){T.useEffect(()=>{if(!n.hasNodes([ln]))throw new Error("ParaNodePlugin: ParaNode not registered on editor!");return n.registerNodeTransform(ln,e=>P1(e,n))},[n])}function P1(n,e){_f(e,n.getKey())&&Ub(n.getFirstChild()),!(!Tt(n)||n.getMarker()!=="b"||n.isEmpty()||!e.getEditorState().read(()=>{const t=Ae(n.getKey());return Tt(t)&&((t==null?void 0:t.isEmpty())??!1)}))&&n.clear()}function $1({textDirection:n}){const[e]=we();return F1(e,n),B1(e),null}function F1(n,e){T.useEffect(()=>{function t(){const r=n.getRootElement();if(!r||e==="auto")return;r.dir=e;const i=n._config.theme.placeholder,s=document.getElementsByClassName(i)[0];s&&(s.dir=e)}return t(),n.registerUpdateListener(({dirtyElements:r})=>{r.size>0&&t()})},[n,e])}function B1(n){T.useEffect(()=>{const e=t=>{if(t.key!=="ArrowLeft"&&t.key!=="ArrowRight")return!1;const r=ne();if(!G(r))return!1;const i=r.anchor.getNode(),s=Qr(i,f=>Tx(f,n)==="p");if(!s)return!1;const o=n.getElementByKey(s.getKey());if(!o)return!1;const a=o.parentElement,l=o.dir||"ltr",u=((a==null?void 0:a.dir)??"")||"ltr";if(!a||l===u)return!1;const c=a.dir==="rtl"&&t.key==="ArrowLeft"||a.dir==="ltr"&&t.key==="ArrowRight";return r.modify("move",c,"character"),t.preventDefault(),!0};return n.registerCommand(As,e,Rl)},[n])}function q1(){const[n]=we();return j1(n),null}function j1(n){T.useEffect(()=>{if(!n.hasNodes([Qe,Yt,Xt,Jt,Gt]))throw new Error("TextSpacingPlugin: CharNode, ImmutableVerseNode, NoteNode, TextNode or VerseNode not registered on editor!");return _t(n.registerNodeTransform(Jt,U1),n.registerNodeTransform(Jt,e=>W1(e,n)),n.registerNodeTransform(Gt,og),n.registerNodeTransform(Yt,og))},[n])}function U1(n){if(!n.isAttached())return;const e=n.getTextContent(),t=n.getNextSibling(),r=n.getParent();n.getMode()!=="normal"||e.endsWith(" ")&&e.length>1||Bt(t)||ct(r)||Nt(r)||Ho(r)||(e===" "&&!Nn(t)?n.setTextContent(""):yf(n))}function W1(n,e){const t=n.getParent();!Ho(t)||!n.isAttached()||_f(e,n.getKey())&&t.insertAfter(n)}function og(n){if(!n.isAttached())return;const e=n.getPreviousSibling();e&&!Nn(e)&&!ee(e)&&!Ho(e)&&n.insertBefore(Oe(" "))}function z1({trigger:n,scriptureReference:e,contextMarker:t,getMarkerAction:r}){const{markersMenuItems:i}=bS({scriptureReference:e,contextMarker:t,getMarkerAction:r});return L.jsx(_S,{trigger:n,items:i})}function H1({trigger:n,scrRef:e,getMarkerAction:t}){const{book:r,chapterNum:i,verseNum:s,verse:o}=e,a=T.useMemo(()=>e,[r,i,s,o]),[l]=we(),[u]=K1(l);return V1(l),L.jsx(z1,{trigger:n,scriptureReference:a,contextMarker:u,getMarkerAction:t})}function K1(n){const[e,t]=T.useState();return T.useEffect(()=>n.registerCommand(Ts,()=>(n.read(()=>{const r=ne();if(!G(r)){e&&t(void 0);return}const i=Ae(r.anchor.key),s=Ae(r.focus.key);if(!i||!s){e&&t(void 0);return}const o=wx(i,s);if(!o||!eS(o)){e&&t(void 0);return}const a=o.getMarker();e!==a&&t(a)}),!1),Is),[e,n]),[e]}function V1(n){T.useEffect(()=>{if(!n.hasNodes([Gt,Yt]))throw new Error("UsjNodesMenuPlugin: VerseNode or ImmutableVerseNode not registered on editor!");const e={},t={};return _t(n.registerNodeTransform(Yt,r=>ag(r,n,e)),n.registerNodeTransform(Gt,r=>ag(r,n,e)),n.registerMutationListener(Yt,r=>dg(r,n,e,t)),n.registerMutationListener(Gt,r=>dg(r,n,e,t)))},[n])}function ag(n,e,t){b2(tf)||_f(e,n.getKey())&&Y1(n,t)}function lg(n){return RegExp(/(\d+)([a-zA-Z]+)?(-(\d+)([a-zA-Z]+)?)?/).exec(n)}const ug=2,J1=3,cg=4,G1=5;function Y1(n,e){var t;const r=cf(n),i=r==null?void 0:r.getNumber();if(!i)return;const s=e[i];if(!s)return;let o=parseInt(n.getNumber()),a=((t=lg(n.getNumber()))==null?void 0:t[ug])??"";s.forEach(l=>{const u=Ae(l);if(!u)return;const c=u.getNumber(),f=parseInt(c),d=lg(c),h=!!(d!=null&&d[J1]),p=h?parseInt(d[cg]):f;if(p<o||f>o||p===o&&a)return;const m=(d==null?void 0:d[ug])??"",_=(d==null?void 0:d[G1])??"",C=h?Wc(parseInt(d[cg]),void 0):"";let v=`${m}`;v+=h?`-${C}${_}`:"";const k=Wc(f,void 0);u.setNumber(`${k}${v}`),o=parseInt(h?C:k),a=h?_:m})}function dg(n,e,t,r){e.getEditorState().read(()=>{for(const[i,s]of n){const o=Ae(i);if(Nn(o)){if(s==="created"){const a=cf(o);if(!a)continue;const l=a.getNumber();t[l]||(t[l]=[]),t[l].push(i),r[i]=l}else if(s==="destroyed"){const a=r[i],l=t[a];if(!l)continue;const u=l.findIndex(c=>c===i);if(u===-1)continue;l.splice(u,1),Reflect.deleteProperty(r,i)}}}})}const t0="formatted",X1="unformatted";let vf;function Q1(n){const e=Z1(n);if(!e)throw new Error(`Invalid view mode: ${n}`);vf=e}Q1(t0);const n0=()=>vf;function Z1(n){let e;switch(n){case t0:e={markerMode:"hidden",hasSpacing:!0,isFormattedFont:!0};break;case X1:e={markerMode:"editable",hasSpacing:!1,isFormattedFont:!1};break}return e}function eT(n){if(n)return n.markerMode==="editable"?Gt:Yt}function tT(n){const e=[],t=n??vf;return t&&(e.push(`${Yk}${t.markerMode}`),t.hasSpacing&&e.push(Jk),t.isFormattedFont&&e.push(Gk)),e}function nT({scrRef:n,onScrRefChange:e}){const[t]=we(),r=T.useRef(!1),i=T.useRef(!1),{book:s,chapterNum:o,verseNum:a}=n;return T.useEffect(()=>t.registerMutationListener(On,l=>{t.update(()=>{for(const[u,c]of l){const f=Ae(u);f&&Tr(f)&&c==="created"&&fg(o,a,i)}},{tag:Bc})},{skipInitialization:!0}),[t,o,a]),T.useEffect(()=>{r.current?r.current=!1:t.update(()=>fg(o,a,i),{tag:Bc})},[t,o,a]),T.useEffect(()=>t.registerCommand(Ts,()=>(i.current?i.current=!1:rT(s,o,a,e,r),!1),Is),[t,s,o,a,e]),null}function fg(n,e,t){var r;const i=Mb(ne()),s=(r=jb(i))==null?void 0:r.getNumber();if(Ax(s)&&pf(e,s))return;const o=De().getChildren(),a=yx(o,n),l=xx(o,a),u=_x(l,!!a);if(u&&!a||!a)return;kx(l,u);const c=Zx(l,e);if(c){if(Tt(c)){const f=c.getFirstChild();ee(f)?f.select(0,0):c.select(0,0)}else c.selectNext(0,0);t.current=!0}}function rT(n,e,t,r,i){const s=Mb(ne());if(!s)return;const o=cf(s),a=parseInt((o==null?void 0:o.getNumber())??"1",10),l=jb(s),u=l==null?void 0:l.getNumber(),c=parseInt(u??"0",10),f=u?pf(t,u):t===c;if(i.current=!!(o&&a!==e||!f),i.current){const d={book:n,chapterNum:a,verseNum:c};u!=null&&c.toString()!==u&&(d.verse=u),r(d)}}function iT(n){return Tr(n)?`${n.__code}`:rf(n)?`${n.__marker} "${n.__number}"`:ct(n)?`${n.__marker}`:Us(n)?`${n.__marker} "${n.__number}"`:Vo(n)?`${n.__caller}`:Jo(n)?`${n.__marker} "${n.__number}"`:Bt(n)?`${n.__marker}`:Tt(n)?`${n.__marker}`:Nt(n)?`ids: [ ${JSON.stringify(n.getTypedIDs())} ]`:uf(n)?`${n.__marker} "${n.__number}"`:""}function sT(){const[n]=we();return L.jsx(rE,{viewClassName:"tree-view-output",treeTypeButtonClassName:"debug-treetype-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",customPrintNode:iT,editor:n})}const hg={type:Mi,version:Oi,content:[]};let Jc;function oT(n){n&&(Jc=n)}function aT(n){if(n.isEmpty())return hg;const e=n.toJSON();if(!e.root||!e.root.children)return;const t=e.root.children;if(t.length===1&&of(t[0])&&(!t[0].children||t[0].children.length===0))return hg;const r=r0(t),i=$r(r);return i?{type:Mi,version:Oi,content:i}:void 0}function lT(n,e){const{type:t,marker:r,unknownAttributes:i}=n;let s;return n.code!==""&&(s=n.code),dt({type:t,marker:r,code:s,...i,content:e})}function uT(n){const{marker:e,number:t,sid:r,altnumber:i,pubnumber:s,unknownAttributes:o}=n;return dt({type:Vn.getType(),marker:e,number:t,sid:r,altnumber:i,pubnumber:s,...o})}function cT(n,e){const{marker:t,sid:r,altnumber:i,pubnumber:s,unknownAttributes:o}=n,a=e&&typeof e[0]=="string"?e[0]:void 0;let{number:l}=n;return l=Db(t,a,l),dt({type:Vn.getType(),marker:t,number:l,sid:r,altnumber:i,pubnumber:s,...o})}function dT(n){const{marker:e,sid:t,altnumber:r,pubnumber:i,unknownAttributes:s}=n,{text:o}=n;let{number:a}=n;return a=Db(e,o,a),dt({type:Gt.getType(),marker:e,number:a,sid:t,altnumber:r,pubnumber:i,...s})}function fT(n,e){const{type:t,marker:r,unknownAttributes:i}=n;return e==null||e.forEach((s,o)=>{typeof s=="string"&&s.startsWith(In)&&(e[o]=s.slice(1))}),dt({type:t,marker:r,...i,content:e})}function hT(n,e){const{type:t,marker:r,unknownAttributes:i}=n;return dt({type:t,marker:r,...i,content:e})}function pT(n,e){const{type:t,marker:r,caller:i,category:s,unknownAttributes:o}=n;return dt({type:t,marker:r,caller:i,category:s,...o,content:e})}function ns(n){const{type:e,marker:t,sid:r,eid:i,unknownAttributes:s}=n;return dt({type:e,marker:t,sid:r,eid:i,...s})}function gT(n){return n.text}function mT(n,e){const{tag:t,marker:r,unknownAttributes:i}=n;return dt({type:t,marker:r,...i,content:e})}function yT(n){const{marker:e}=n;return{type:wl,marker:e}}function pg(n,e){const t=n[n.length-1];t&&typeof t=="string"?n[n.length-1]=t+e:n.push(e)}function _T(n,e,t,r,i){const s=ur.getType(),o=e.filter(a=>!t.includes(a));if(t.filter(a=>!e.includes(a)).forEach(a=>{const l=ns({type:s,marker:us,eid:a});i.push(l)}),o.forEach(a=>{const l=ns({type:s,marker:Pi,sid:a});i.push(l)}),e.length===0){const a=ns({type:s,marker:Pi});i.push(a)}if(i.push(...n),e.length===0){const a=ns({type:s,marker:us});i.push(a)}(!r||!Ix(r))&&e.forEach(a=>{const l=ns({type:s,marker:us,eid:a});i.push(l)})}function $r(n,e){const t=[];let r,i=[];return n.forEach((s,o)=>{const a=s,l=s,u=s,c=s,f=s,d=s,h=s,p=s;switch(s.type){case On.getType():t.push(lT(a,$r(a.children)));break;case Rr.getType():t.push(uT(s));break;case Vn.getType():t.push(cT(l,$r(l.children)));break;case Yt.getType():case Gt.getType():t.push(dT(s));break;case Qe.getType():t.push(fT(u,$r(u.children)));break;case ln.getType():t.push(hT(c,$r(c.children)));break;case Xt.getType():t.push(pT(f,$r(f.children,f.caller)));break;case zs.getType():case cr.getType():case Lo.getType():case Ws.getType():break;case At.getType():if(r=$r(h.children),r){const m=h.typedIDs[zr];if(m)_T(r,m,i,n[o+1],t),i=m;else{const _=r.shift();_&&(typeof _=="string"?pg(t,_):t.push(_)),r.length>0&&t.push(...r)}}break;case ur.getType():t.push(ns(s));break;case Jt.getType():d.text&&d.text!==In&&!d.text.startsWith(fb)&&(!e||d.text!==ff(e))&&pg(t,gT(d));break;case Ui.getType():t.push(mT(p,$r(p.children)));break;case ui.getType():t.push(yT(s));break;default:Jc==null||Jc.error(`Unexpected node type '${s.type}'!`)}}),t&&t.length>0?t:void 0}function r0(n){const e=n.findIndex(t=>of(t));if(e>=0){const t=n.slice(0,e),r=n[e].children,i=r0(n.slice(e+1));n=[...t,...r,...i]}return n}const Vu={initialize:oT,deserializeEditorState:aT},gg=i0([]),bT={type:Lo.getType(),version:1};let xl=[],ve,Ka,Gc,He;function vT(n,e){xl=[],wT(n),kT(e)}function CT(n=0){}function ET(n,e){ve=e??n0();let t;return n?(n.type!==Mi&&(He==null||He.warn(`This USJ type '${n.type}' didn't match the expected type '${Mi}'.`)),n.version!==Oi&&(He==null||He.warn(`This USJ version '${n.version}' didn't match the expected version '${Oi}'.`)),n.content.length>0?t=Xc(co(n.content)):t=[gg]):t=[gg],Gc==null||Gc(xl),{root:{children:t,direction:null,format:"",indent:0,type:"root",version:1}}}function wT(n){n&&(Ka=n),n!=null&&n.addMissingComments&&(Gc=n.addMissingComments)}function kT(n){n&&(He=n)}function xT(n){return!n||n.length!==1||typeof n[0]!="string"?"":n[0]}function ST(n){const{marker:e,code:t}=n;e!==Jl&&(He==null||He.warn(`Unexpected book marker '${e}'!`)),(!t||!On.isValidBookCode(t))&&(He==null||He.warn(`Unexpected book code '${t}'!`));const r=[];((ve==null?void 0:ve.markerMode)==="editable"||(ve==null?void 0:ve.markerMode)==="visible")&&r.push($i("marker",Wi(e)+" "+t+In)),r.push(Hs(xT(n.content)));const i=vt(n);return dt({type:On.getType(),marker:e,code:t??"",unknownAttributes:i,children:r,direction:null,format:"",indent:0,version:cb})}function TT(n){const{marker:e,number:t,sid:r,altnumber:i,pubnumber:s}=n;e!==nf&&(He==null||He.warn(`Unexpected chapter marker '${e}'!`));const o=vt(n);let a;return(ve==null?void 0:ve.markerMode)==="visible"&&(a=!0),(ve==null?void 0:ve.markerMode)==="editable"?dt({type:Vn.getType(),marker:e,number:t??"",sid:r,altnumber:i,pubnumber:s,unknownAttributes:o,children:[Hs(Ko(e,t)??"")],direction:null,format:"",indent:0,version:pb}):dt({type:Rr.getType(),marker:e,number:t??"",showMarker:a,sid:r,altnumber:i,pubnumber:s,unknownAttributes:o,version:bb})}function AT(n){const{marker:e,number:t,sid:r,altnumber:i,pubnumber:s}=n;e!==lf&&(He==null||He.warn(`Unexpected verse marker '${e}'!`));const o=(eT(ve)??Yt).getType(),a=(ve==null?void 0:ve.markerMode)==="editable"?Tb:qb;let l,u;(ve==null?void 0:ve.markerMode)==="editable"?l=Ko(e,t):(ve==null?void 0:ve.markerMode)==="visible"&&(u=!0);const c=vt(n);return dt({type:o,text:l,marker:e,number:t??"",sid:r,altnumber:i,pubnumber:s,showMarker:u,unknownAttributes:c,version:a})}function DT(n,e=[]){const{marker:t}=n;Qe.isValidMarker(t)||He==null||He.warn(`Unexpected char marker '${t}'!`),((ve==null?void 0:ve.markerMode)==="visible"||(ve==null?void 0:ve.markerMode)==="editable")&&e.forEach(i=>{df(i)&&(i.text=In+i.text)});const r=vt(n);return dt({type:Qe.getType(),marker:t,unknownAttributes:r,children:[...e],direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:_b})}function i0(n){return{type:ti.getType(),children:n,direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:Eb}}function NT(n,e=[]){const{marker:t}=n;ln.isValidMarker(t)||He==null||He.warn(`Unexpected para marker '${t}'!`);const r=[];(ve==null?void 0:ve.markerMode)==="editable"?r.push(Ss(t),Hs(In)):(ve==null?void 0:ve.markerMode)==="visible"&&r.push($i("marker",Wi(t)+In)),r.push(...e);const i=vt(n);return dt({type:ln.getType(),marker:t,unknownAttributes:i,children:r,direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:Sb})}function MT(n,e){const t=Sx(e);let r=()=>{};return Ka!=null&&Ka.noteCallerOnClick&&(r=Ka.noteCallerOnClick),dt({type:cr.getType(),caller:n,previewText:t,onClick:r,version:Fb})}function OT(n,e){const{marker:t,category:r}=n;Xt.isValidMarker(t)||He==null||He.warn(`Unexpected note marker '${t}'!`);const i=n.caller??"*";let s;(ve==null?void 0:ve.markerMode)==="editable"?s=Hs(ff(i)):s=MT(i,e);const o=vt(n);let a,l;(ve==null?void 0:ve.markerMode)==="editable"?(a=Ss(t),l=Ss(t,"closing")):(ve==null?void 0:ve.markerMode)==="visible"&&(a=$i("marker",Wi(t)+In),l=$i("marker",El(t)+In));const u=[];return a&&u.push(a),u.push(s,...e),l&&u.push(l),dt({type:Xt.getType(),marker:t,caller:i,category:r,unknownAttributes:o,children:u,direction:null,format:"",indent:0,version:xb})}function IT(n){const{marker:e,sid:t,eid:r}=n;(!e||!ur.isValidMarker(e))&&(He==null||He.warn(`Unexpected milestone marker '${e}'!`));const i=vt(n);return dt({type:ur.getType(),marker:e,sid:t,eid:r,unknownAttributes:i,version:wb})}function mg(n,e=[]){return{type:At.getType(),typedIDs:{[zr]:e},children:n,direction:null,format:"",indent:0,version:1}}function RT(n,e){const{marker:t}=n,r=n.type,i=vt(n),s=[...e];return s.forEach(o=>{df(o)&&(o.mode="token")}),dt({type:Ui.getType(),tag:r,marker:t,unknownAttributes:i,children:s,direction:null,format:"",indent:0,version:lb})}function LT(n){return{type:ui.getType(),marker:n,version:Pb}}function Ss(n,e="opening"){return{type:Ws.getType(),marker:n,markerSyntax:e,text:"",detail:0,format:0,mode:"normal",style:"",version:1}}function Hs(n,e="normal"){return{type:Jt.getType(),text:n,detail:0,format:0,mode:e,style:"",version:1}}function $i(n,e){return{type:zs.getType(),text:e,textType:n,version:Rb}}function yg(n,e){(ve==null?void 0:ve.markerMode)==="editable"?e.push(Ss(n)):(ve==null?void 0:ve.markerMode)==="visible"&&e.push($i("marker",Wi(n)))}function _g(n,e,t=!1){Qe.isValidFootnoteMarker(n)||Qe.isValidCrossReferenceMarker(n)||((ve==null?void 0:ve.markerMode)==="editable"?t?e.push(Ss("","selfClosing")):e.push(Ss(n,"closing")):(ve==null?void 0:ve.markerMode)==="visible"&&e.push($i("marker",El(t?"":n))))}function PT(n,e){if(n.type!=="ms")return;const t=[];if(n.sid&&t.push(`sid="${n.sid}"`),n.eid&&t.push(`eid="${n.eid}"`),t.length<=0)return;const r=fb+t.join(" ");(ve==null?void 0:ve.markerMode)==="editable"?e.push(Hs(r)):(ve==null?void 0:ve.markerMode)==="visible"&&e.push($i("attribute",r))}function bg(n,e){return n.length<=0||e===0?n:n.map(t=>t-e)}function $T(n,e){const t=n.indexOf(e,0);t>-1&&n.splice(t,1)}function vg(n,e){e.marker===Pi&&e.sid!==void 0&&n.push(e.sid),e.marker===us&&e.eid!==void 0&&$T(n,e.eid)}function Yc(n,e,t=!1,r=[]){if(e.length<=0||e[0]>=n.length)return n;const i=e.shift(),s=e.length>0?e.shift():n.length-1;if(i===void 0||s===void 0||s>=n.length||n.length<=0)return n;const o=n.slice(0,i),a=t?[mg(o,[...r])]:o,l=n[i];vg(r,l);const u=Yc(n.slice(i+1,s),bg(e,i+1),l.marker===Pi,r),c=mg(u,[...r]),f=n[s];vg(r,f);const d=Yc(n.slice(s+1),bg(e,s+1),f.marker===Pi,r);return[...a,c,...d]}function co(n){const e=[],t=[];return n==null||n.forEach(r=>{if(typeof r=="string")t.push(Hs(r));else if(!r.type)He==null||He.error("Marker type is missing!");else switch(r.type){case On.getType():t.push(ST(r));break;case Vn.getType():t.push(TT(r));break;case Gt.getType():ve!=null&&ve.hasSpacing||t.push(bT),t.push(AT(r));break;case Qe.getType():yg(r.marker,t),t.push(DT(r,co(r.content))),_g(r.marker,t);break;case ln.getType():t.push(NT(r,co(r.content)));break;case Xt.getType():t.push(OT(r,co(r.content)));break;case ur.getType():lx(r.marker)&&(e.push(t.length),r.sid!==void 0&&(xl==null||xl.push(r.sid))),t.push(IT(r)),yg(r.marker,t),PT(r,t),_g(r.marker,t,!0);break;case ui.getType():t.push(LT(r.marker));break;default:He==null||He.warn(`Unknown type-marker '${r.type}-${r.marker}'!`),t.push(RT(r,co(r.content)))}}),Yc(t,e)}function Xc(n){const e=n.findIndex(t=>Vk(t)||mx(t)||px(t));if(e>=0){const t=Xc(n.slice(0,e)),r=n[e],i=Xc(n.slice(e+1));return[...t,r,...i]}else if(n.some(t=>"text"in t&&"mode"in t||Yx(t)))return[i0(n)];return n}const s0={initialize:vT,reset:CT,serializeEditorState:ET},FT={c:{action:n=>{const{chapterNum:e}=n.reference;return[{type:"chapter",marker:"c",number:`${e+1}`}]}},v:{action:n=>{const{verseNum:e,verse:t}=n.reference;return[{type:"verse",marker:"v",number:`${Wc(e,t)}`}]}},f:{action:n=>{const{chapterNum:e,verseNum:t}=n.reference;return[{type:"note",marker:"f",caller:Li,content:[{type:"char",marker:"fr",content:[`${e}:${t}`]},{type:"char",marker:"ft",content:["-"]}]}]}},x:{action:n=>{const{chapterNum:e,verseNum:t}=n.reference;return[{type:"note",marker:"x",caller:Li,content:[{type:"char",marker:"xo",content:[`${e}:${t}`]},{type:"char",marker:"xt",content:["-"]}]}]}}};function BT(n,e,t,r){const i=qT(n);return{action:s=>{s.editor.update(()=>{var o;const a=(o=i==null?void 0:i.action)==null?void 0:o.call(i,s);if(!a)return;const l=Wx(a,s0,t),u=Vp(l),c=ne();if(G(c))if(c.getTextContent().length>0)jT(c,()=>Vp(l));else if(V(u)&&!u.isInline()){const f=c.insertParagraph();if(f){const d=f.getChildren();u.append(...d),f.replace(u),u.selectStart()}}else{c.insertNodes([u]),KT(u);const f=u.getNextSibling();f?f.selectStart():u.selectStart()}else c==null||c.insertNodes([u])},r)},label:i==null?void 0:i.label}}function qT(n){let e=FT[n];return e||(ln.isValidMarker(n)?e={action:()=>[{type:ln.getType(),marker:n,content:[]}]}:Qe.isValidMarker(n)&&(e={action:()=>[{type:Qe.getType(),marker:n,content:["-"]}]})),e}function jT(n,e){const t=n.getNodes(),[r,i]=UT(n);let s;t.forEach((o,a)=>{if(V(s)&&s.isParentOf(o))return;const l=WT(o,a===0,a===t.length-1,r,i);if(!l){s=void 0;return}s||(s=e(),l.insertBefore(s)),HT(l,s)}),(ee(s)||V(s))&&s.selectEnd()}function UT(n){const e=n.anchor.offset,t=n.focus.offset;return n.isBackward()?[t,e]:[e,t]}function WT(n,e,t,r,i){if(!(Nt(n)||Bt(n)||Bt(n.getParent()))){if(ee(n))return zT(n,e,t,r,i);if(V(n)&&n.isInline())return n}}function zT(n,e,t,r,i){const s=n.getTextContentSize(),o=e?r:0,a=t?i:s;if(o===0&&a===0)return;const l=n.splitText(o,a);return l.length===1?l[0]:l.length===3||a===s?l[1]:l[0]}function HT(n,e){var t;if(ee(e)){const r=Cg(n,e);e.setTextContent(r),n.remove()}else if(V(e)){const r=e.getChildrenSize();e.append(n);for(let i=0;i<r;i++)(t=e.getFirstChild())==null||t.remove();Cg(n,e)}}function Cg(n,e){let t=n.getTextContent();if(ee(n)&&e.isInline()&&t.startsWith(" ")){t=t.trimStart(),n.setTextContent(t);const r=e.getPreviousSibling();yf(r),ee(r)||e.insertBefore(Oe(" "))}return t}function KT(n){Nn(n)&&(yf(n.getPreviousSibling()),Ub(n.getNextSibling()))}const o0={chapter:"chapter",verse:"verse",char:"char",para:"para",typedMark:"editor-typed-mark",typedMarkOverlap:"editor-typed-markOverlap",mark:"editor-mark",markOverlap:"editor-markOverlap",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough"}},a0=T.createContext(null),Eg=4;function VT({children:n,className:e,onClick:t,title:r}){const i=T.useRef(null),s=T.useContext(a0);if(s===null)throw new Error("DropDownItem must be used within a DropDown");const{registerItem:o}=s;return T.useEffect(()=>{i&&i.current&&o(i)},[i,o]),L.jsx("button",{className:e,onClick:t,ref:i,title:r,type:"button",children:n})}function JT({children:n,dropDownRef:e,onClose:t}){const[r,i]=T.useState(),[s,o]=T.useState(),a=T.useCallback(c=>{i(f=>f?[...f,c]:[c])},[i]),l=c=>{if(!r)return;const f=c.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(f)&&c.preventDefault(),f==="Escape"||f==="Tab"?t():f==="ArrowUp"?o(d=>{if(!d)return r[0];const h=r.indexOf(d)-1;return r[h===-1?r.length-1:h]}):f==="ArrowDown"&&o(d=>d?r[r.indexOf(d)+1]:r[0])},u=T.useMemo(()=>({registerItem:a}),[a]);return T.useEffect(()=>{r&&!s&&o(r[0]),s&&s.current&&s.current.focus()},[r,s]),L.jsx(a0.Provider,{value:u,children:L.jsx("div",{className:"dropdown",ref:e,onKeyDown:l,children:n})})}function GT({disabled:n=!1,buttonLabel:e,buttonAriaLabel:t,buttonClassName:r,buttonIconClassName:i,children:s,stopCloseOnClickSelf:o}){const a=T.useRef(null),l=T.useRef(null),[u,c]=T.useState(!1),f=()=>{c(!1),l&&l.current&&l.current.focus()};return T.useEffect(()=>{const d=l.current,h=a.current;if(u&&d!==null&&h!==null){const{top:p,left:m}=d.getBoundingClientRect();h.style.top=`${p+d.offsetHeight+Eg}px`,h.style.left=`${Math.min(m,window.innerWidth-h.offsetWidth-20)}px`}},[a,l,u]),T.useEffect(()=>{const d=l.current;if(d!==null&&u){const h=p=>{const m=p.target;o&&a.current&&a.current.contains(m)||d.contains(m)||c(!1)};return document.addEventListener("click",h),()=>{document.removeEventListener("click",h)}}return()=>{}},[a,l,u,o]),T.useEffect(()=>{const d=()=>{if(u){const h=l.current,p=a.current;if(h!==null&&p!==null){const{top:m}=h.getBoundingClientRect(),_=m+h.offsetHeight+Eg;_!==p.getBoundingClientRect().top&&(p.style.top=`${_}px`)}}};return document.addEventListener("scroll",d),()=>{document.removeEventListener("scroll",d)}},[l,a,u]),L.jsxs(L.Fragment,{children:[L.jsxs("button",{type:"button",disabled:n,"aria-label":t||e,className:r,onClick:()=>c(!u),ref:l,children:[i&&L.jsx("span",{className:i}),e&&L.jsx("span",{className:"text dropdown-button-text",children:e}),L.jsx("i",{className:"chevron-down"})]}),u&&En.createPortal(L.jsx(JT,{dropDownRef:a,onClose:f,children:s}),document.body)]})}const Qc={m:"m - Paragraph - Margin - No First Line Indent",ms:"ms - Heading - Major Section Level 1",nb:"nb - Paragraph - No Break with Previous Paragraph",p:"p - Paragraph - Normal - First Line Indent",pi:"pi - Paragraph - Indented - Level 1 - First Line Indent",q1:"q1 - Poetry - Indent Level 1",q2:"q2 - Poetry - Indent Level 2",r:"r - Heading - Parallel References",s:"s - Heading - Section Level 1"},Zc={...Qc,ide:"ide - File - Encoding",h:"h - File - Header",h1:"h1 - File - Header",h2:"h2 - File - Left Header",h3:"h3 - File - Right Header",toc1:"toc1 - File - Long Table of Contents Text",toc2:"toc2 - File - Short Table of Contents Text",toc3:"toc3 - File - Book Abbreviation",cl:"cl - Chapter - Publishing Label",mt:"mt - Title - Major Title Level 1",mt1:"mt1 - Title - Major Title Level 1",mt2:"mt2 - Title - Major Title Level 2",mt3:"mt3 - Title - Major Title Level 3",mt4:"mt4 - Title - Major Title Level 4",ms1:"ms1 - Heading - Major Section Level 1",ms2:"ms2 - Heading - Major Section Level 2",ms3:"ms3 - Heading - Major Section Level 3",b:"b - Poetry - Stanza Break (Blank Line)"};function YT(n){return n in Zc?n:"ban"}function XT(n){return n in Zc?Zc[n]:"No Style"}function QT(n){return n?"active dropdown-item-active":""}function ZT({editor:n,blockMarker:e,disabled:t=!1}){const r=i=>{n.update(()=>{const s=ne();G(s)&&sC(s,()=>Oo(i))})};return L.jsx(GT,{disabled:t,buttonClassName:"toolbar-item block-controls",buttonIconClassName:"icon block-marker "+YT(e),buttonLabel:XT(e),buttonAriaLabel:"Formatting options for block type",children:Object.keys(Qc).map(i=>L.jsxs(VT,{className:"item block-marker "+QT(e===i),onClick:()=>r(i),children:[L.jsx("i",{className:"icon block-marker "+i}),L.jsx("span",{className:"text usfm_"+i,children:Qc[i]})]},i))})}function wg(){return L.jsx("div",{className:"divider"})}const eA=T.forwardRef(function(n,e){const[t]=we(),[r,i]=T.useState(t),[s,o]=T.useState(""),[a,l]=T.useState(!1),[u,c]=T.useState(!1),[f,d]=T.useState(()=>t.isEditable()),h=T.useCallback(()=>{const p=ne();if(G(p)){const m=p.anchor.getNode();let _=m.getKey()==="root"?m:Qr(m,v=>{const k=v.getParent();return k!==null&&fr(k)});_===null&&(_=m.getTopLevelElementOrThrow());const C=_.getKey();r.getElementByKey(C)!==null&&(Tt(_)||Tr(_)||Us(_))&&o(_.getMarker())}},[r]);return T.useEffect(()=>t.registerCommand(Ts,(p,m)=>(h(),i(m),!1),go),[t,h]),T.useEffect(()=>_t(t.registerEditableListener(p=>{d(p)}),r.registerUpdateListener(({editorState:p})=>{p.read(()=>{h()})}),r.registerCommand(oo,p=>(l(p),!1),go),r.registerCommand(so,p=>(c(p),!1),go)),[h,r,t]),L.jsxs("div",{className:"toolbar",children:[L.jsx("button",{disabled:!a||!f,onClick:()=>{r.dispatchCommand(Dl,void 0)},title:vc?"Undo (⌘Z)":"Undo (Ctrl+Z)",type:"button",className:"toolbar-item spaced","aria-label":"Undo",children:L.jsx("i",{className:"format undo"})}),L.jsx("button",{disabled:!u||!f,onClick:()=>{r.dispatchCommand(Nl,void 0)},title:vc?"Redo (⌘Y)":"Redo (Ctrl+Y)",type:"button",className:"toolbar-item","aria-label":"Redo",children:L.jsx("i",{className:"format redo"})}),L.jsx(wg,{}),r===t&&L.jsxs(L.Fragment,{children:[L.jsx(ZT,{disabled:!f,blockMarker:s,editor:t}),L.jsx(wg,{})]}),L.jsx("div",{ref:e,className:"end-container"})]})}),kg={namespace:"platformEditor",theme:o0,editable:!0,editorState:void 0,onError(n){throw n},nodes:[At,...tS]},tA=n0(),nA={},rA={};function iA(){return L.jsx("div",{className:"editor-placeholder",children:"Enter some Scripture..."})}const l0=T.forwardRef(function({defaultUsj:n,scrRef:e,onScrRefChange:t,onSelectionChange:r,onUsjChange:i,options:s,logger:o,children:a},l){const u=T.useRef(null),c=T.useRef(null),f=T.useRef(null),d=T.useRef(n),[h,p]=T.useState(n),{isReadonly:m=!1,hasSpellCheck:_=!1,textDirection:C="ltr",markerMenuTrigger:v="\\",view:k=tA,nodes:M=nA,debug:$=!1}=s??rA;kg.editable=!m,Vu.initialize(o),T.useImperativeHandle(l,()=>({focus(){var O;(O=u.current)==null||O.focus()},getUsj(){return d.current},setUsj(O){Fr(d.current,O)||(d.current=O,p(O))},applyUpdate(O,N="remote"){var I,H;(I=u.current)==null||I.update(()=>{N==="remote"&&py(jc),zS(O,k,M,o)},{discrete:!0});const w=(H=u.current)==null?void 0:H.getEditorState();if(!w)return;const q=Vu.deserializeEditorState(w);if(q){const S=!Fr(d.current,q);S&&(d.current=q),(S||!Fr(h,q))&&(i==null||i(q,O,N))}},getSelection(){var O;return(O=u.current)==null?void 0:O.read(Kb)},setSelection(O){var N;(N=u.current)==null||N.update(()=>{const I=Hb(O);I!==void 0&&Mt(I)},{tag:hb})},addAnnotation(O,N,I){var H;(H=c.current)==null||H.addAnnotation(O,Gp(N),I)},removeAnnotation(O,N){var I;(I=c.current)==null||I.removeAnnotation(Gp(O),N)},get toolbarEndRef(){return f}}));const x=T.useCallback((O,N,I,H)=>{if(Xk.some(q=>I.has(q)))return;const w=Vu.deserializeEditorState(O);if(w){const q=!Fr(d.current,w);q&&(d.current=w);const S=I.has(jc)?"remote":"local";(q||!Fr(h,w))&&(i==null||i(w,H,S))}},[h,i]);return L.jsxs(o_,{initialConfig:kg,children:[L.jsx(C1,{isEditable:!m}),L.jsxs("div",{className:"editor-container",children:[L.jsx("div",{className:"editor-toolbar-container"+(m?"-readonly":"-editable"),children:L.jsx(eA,{ref:f})}),L.jsxs("div",{className:"editor-inner",children:[L.jsx(d_,{editorRef:u}),L.jsx(SE,{contentEditable:L.jsx(c_,{className:`editor-input ${tT(k).join(" ")}`,spellCheck:_}),placeholder:L.jsx(iA,{}),ErrorBoundary:f_}),L.jsx(h_,{}),e&&t&&L.jsx(nT,{scrRef:e,onScrRefChange:t}),e&&L.jsx(H1,{trigger:v,scrRef:e,getMarkerAction:(O,N)=>BT(O,N,k)}),L.jsx(zk,{options:{view:k,nodes:M},editedUsjRef:d,usj:h,setUsj:p}),L.jsx(E1,{scripture:h,nodeOptions:M,editorAdaptor:s0,viewOptions:k,logger:o}),L.jsx(I1,{onChange:r}),L.jsx(IS,{onChange:x,ignoreSelectionChange:!0,ignoreHistoryMergeTagChange:!0}),L.jsx(CS,{ref:c,logger:o}),L.jsx(o1,{}),L.jsx(f1,{}),L.jsx(g1,{}),L.jsx(m1,{logger:o}),L.jsx(v1,{}),L.jsx(w1,{nodeOptions:M,viewOptions:k,logger:o}),L.jsx(R1,{}),L.jsx($1,{textDirection:C}),L.jsx(q1,{}),a]}),$&&L.jsx(sT,{})]})]})}),zi=T.forwardRef(function(n,e){const{children:t,...r}=n;return L.jsx(l0,{ref:e,...r})});function u0(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function Sl(n,e,t,r,i){return{author:e,content:n,deleted:i===void 0?!1:i,id:t===void 0?u0():t,timeStamp:r===void 0?performance.timeOrigin+performance.now():r,type:"comment"}}function c0(n,e,t){return{comments:e,id:t===void 0?u0():t,quote:n,type:"thread"}}function xg(n){return{comments:Array.from(n.comments),id:n.id,quote:n.quote,type:"thread"}}function sA(n){return{author:n.author,content:"[Deleted Comment]",deleted:!0,id:n.id,timeStamp:n.timeStamp,type:"comment"}}function Ju(n){const e=n._changeListeners;for(const t of e)t()}class oA{constructor(e,t){fe(this,"_editor"),fe(this,"_comments"),fe(this,"_changeListeners"),fe(this,"_collabProvider"),fe(this,"logger"),this._comments=[],this._editor=e,this.logger=t,this._collabProvider=null,this._changeListeners=new Set}isCollaborative(){return this._collabProvider!==null}getComments(){return this._comments}setComments(e){this._comments=e,Ju(this)}addComment(e,t,r){const i=Array.from(this._comments),s=this._getCollabComments();if(t!==void 0&&e.type==="comment")for(let o=0;o<i.length;o++){const a=i[o];if(a.type==="thread"&&a.id===t.id){const l=xg(a);i.splice(o,1,l);const u=r!==void 0?r:l.comments.length;if(this.isCollaborative()&&s!==null){const c=s.get(o).get("comments");this._withRemoteTransaction(()=>{const f=this._createCollabSharedMap(e);c.insert(u,[f])})}l.comments.splice(u,0,e);break}}else{const o=r!==void 0?r:i.length;this.isCollaborative()&&s!==null&&this._withRemoteTransaction(()=>{const a=this._createCollabSharedMap(e);s.insert(o,[a])}),i.splice(o,0,e)}this._comments=i,Ju(this)}deleteCommentOrThread(e,t){const r=Array.from(this._comments),i=this._getCollabComments();let s=null;if(t!==void 0)for(let o=0;o<r.length;o++){const a=r[o];if(a.type==="thread"&&a.id===t.id){const l=xg(a);r.splice(o,1,l);const u=l.comments;if(s=u.indexOf(e),this.isCollaborative()&&i!==null){const c=i.get(o).get("comments"),f=s;this._withRemoteTransaction(()=>{c.delete(f)})}u.splice(s,1);break}}else s=r.indexOf(e),this.isCollaborative()&&i!==null&&this._withRemoteTransaction(()=>{i.delete(s)}),r.splice(s,1);return this._comments=r,Ju(this),e.type==="comment"?{index:s,markedComment:sA(e)}:null}registerOnChange(e){const t=this._changeListeners;return t.add(e),()=>{t.delete(e)}}_withRemoteTransaction(e){const t=this._collabProvider;t!==null&&t.doc.transact(e,this)}_withLocalTransaction(e){const t=this._collabProvider;try{this._collabProvider=null,e()}finally{this._collabProvider=t}}_getCollabComments(){const e=this._collabProvider;return e!==null?e.doc.get("comments",ki):null}_createCollabSharedMap(e){const t=new Es,r=e.type,i=e.id;if(t.set("type",r),t.set("id",i),r==="comment")t.set("author",e.author),t.set("content",e.content),t.set("deleted",e.deleted),t.set("timeStamp",e.timeStamp);else{t.set("quote",e.quote);const s=new ki;e.comments.forEach((o,a)=>{const l=this._createCollabSharedMap(o);s.insert(a,[l])}),t.set("comments",s)}return t}registerCollaboration(e){this._collabProvider=e;const t=this._getCollabComments(),r=()=>{e.connect()},i=()=>{try{e.disconnect()}catch{}},s=this._editor.registerCommand(jk,a=>{var l,u;return r!==void 0&&i!==void 0&&(a?((l=this.logger)==null||l.info("Comments connected!"),r()):((u=this.logger)==null||u.info("Comments disconnected!"),i())),!1},Is),o=(a,l)=>{if(l.origin!==this){for(const u of a)if(u instanceof Z_){const c=u.target,f=u.delta;let d=0;for(const h of f){const p=h.insert,m=h.retain,_=h.delete,C=c.parent,v=c===t?void 0:C instanceof Es&&this._comments.find(k=>k.id===C.get("id"));if(Array.isArray(p)){const k=d;p.slice().reverse().forEach(M=>{const $=M.get("id"),x=M.get("type")==="thread"?c0(M.get("quote"),M.get("comments").toArray().map(O=>Sl(O.get("content"),O.get("author"),O.get("id"),O.get("timeStamp"),O.get("deleted"))),$):Sl(M.get("content"),M.get("author"),$,M.get("timeStamp"),M.get("deleted"));this._withLocalTransaction(()=>{this.addComment(x,v,k)})})}else if(typeof m=="number")d+=m;else if(typeof _=="number")for(let k=0;k<_;k++){const M=v===void 0||v===!1?this._comments[d]:v.comments[d];this._withLocalTransaction(()=>{this.deleteCommentOrThread(M,v)}),d++}}}}};return t===null?()=>null:(t.observeDeep(o),r(),()=>{t.unobserveDeep(o),s(),this._collabProvider=null})}}function aA(n){const[e,t]=T.useState(n.getComments());return T.useEffect(()=>n.registerOnChange(()=>{t(n.getComments())}),[n]),e}function lA({onClose:n,children:e,title:t,closeOnClickOutside:r}){const i=T.useRef(null);return T.useEffect(()=>{i.current!==null&&i.current.focus()},[]),T.useEffect(()=>{let s=null;const o=u=>{u.key==="Escape"&&n()},a=u=>{const c=u.target;i.current!==null&&!i.current.contains(c)&&r&&n()},l=i.current;return l!==null&&(s=l.parentElement,s!==null&&s.addEventListener("click",a)),window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o),s!==null&&(s==null||s.removeEventListener("click",a))}},[r,n]),L.jsx("div",{className:"Modal__overlay",role:"dialog",children:L.jsxs("div",{className:"Modal__modal",tabIndex:-1,ref:i,children:[L.jsx("h2",{className:"Modal__title",children:t}),L.jsx("button",{className:"Modal__closeButton","aria-label":"Close modal",type:"button",onClick:n,children:"X"}),L.jsx("div",{className:"Modal__content",children:e})]})})}function uA({onClose:n,children:e,title:t,closeOnClickOutside:r=!1}){return En.createPortal(L.jsx(lA,{onClose:n,title:t,closeOnClickOutside:r,children:e}),document.body)}function d0(){const[n,e]=T.useState(null),t=T.useCallback(()=>{e(null)},[]),r=T.useMemo(()=>{if(n===null)return null;const{title:s,content:o,closeOnClickOutside:a}=n;return L.jsx(uA,{onClose:t,title:s,closeOnClickOutside:a,children:o})},[n,t]),i=T.useCallback((s,o,a=!1)=>{e({closeOnClickOutside:a,content:o(t),title:s})},[t]);return[r,i]}const cA={...o0,paragraph:"CommentEditorTheme__paragraph"};function dA(...n){return n.filter(Boolean).join(" ")}function ri({"data-test-id":n,children:e,className:t,onClick:r,disabled:i,small:s,title:o}){return L.jsx("button",{disabled:i,className:dA("Button__root",i&&"Button__disabled",s&&"Button__small",t),onClick:r,title:o,"aria-label":o,...n&&{"data-test-id":n},children:e})}function fA({className:n}){return L.jsx(c_,{className:n||"ContentEditable__root"})}function hA({children:n,className:e}){return L.jsx("div",{className:e||"Placeholder__root",children:n})}const Sg=be("INSERT_INLINE_COMMAND");function pA({anchorKey:n,editor:e,showComments:t,onAddComment:r}){const i=T.useRef(null),s=T.useCallback(()=>{const o=i.current,a=e.getRootElement(),l=e.getElementByKey(n);if(o!==null&&a!==null&&l!==null){const{right:u}=a.getBoundingClientRect(),{top:c}=l.getBoundingClientRect();o.style.left=`${u-20}px`,o.style.top=`${c-30}px`}},[n,e]);return T.useEffect(()=>(window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}),[e,s]),T.useLayoutEffect(()=>{s()},[n,e,t,s]),L.jsx("div",{className:"CommentPlugin_AddCommentBox",ref:i,children:L.jsx("button",{className:"CommentPlugin_AddCommentBox_button",onClick:r,children:L.jsx("i",{className:"icon add-comment"})})})}function gA({onEscape:n}){const[e]=we();return T.useEffect(()=>e.registerCommand(Ml,t=>n(t),Fa),[e,n]),null}function f0({className:n,autoFocus:e,onEscape:t,onChange:r,editorRef:i,placeholder:s="Type a comment..."}){return L.jsx(o_,{initialConfig:{namespace:"Commenting",nodes:[],onError:o=>{throw o},theme:cA},children:L.jsxs("div",{className:"CommentPlugin_CommentInputBox_EditorContainer",children:[L.jsx(YE,{contentEditable:L.jsx(fA,{className:n}),placeholder:L.jsx(hA,{children:s}),ErrorBoundary:f_}),L.jsx(WE,{onChange:r}),L.jsx(h_,{}),e!==!1&&L.jsx(FE,{}),L.jsx(gA,{onEscape:t}),L.jsx(qE,{}),i!==void 0&&L.jsx(d_,{editorRef:i})]})})}function h0(n,e){return T.useCallback((t,r)=>{t.read(()=>{n(a_()),e(!l_(r.isComposing(),!0))})},[e,n])}function mA({editor:n,cancelAddComment:e,submitAddComment:t}){const[r,i]=T.useState(""),[s,o]=T.useState(!1),a=T.useRef(null),l=T.useMemo(()=>({container:document.createElement("div"),elements:[]}),[]),u=T.useRef(null),c=g0(),f=T.useCallback(()=>{n.getEditorState().read(()=>{const m=ne();if(G(m)){u.current=m.clone();const _=m.anchor,C=m.focus,v=eC(n,_.getNode(),_.offset,C.getNode(),C.offset),k=a.current;if(v!==null&&k!==null){const{left:M,bottom:$,width:x}=v.getBoundingClientRect(),O=tC(n,v);let N=O.length===1?M+x/2-125:M-125;N<10&&(N=10),k.style.left=`${N}px`,k.style.top=`${$+20+(window.pageYOffset||document.documentElement.scrollTop)}px`;const I=O.length,{container:H}=l,w=l.elements,q=w.length;for(let S=0;S<I;S++){const K=O[S];let A=w[S];A===void 0&&(A=document.createElement("span"),w[S]=A,H.appendChild(A));const P=`position:absolute;top:${K.top+(window.pageYOffset||document.documentElement.scrollTop)}px;left:${K.left}px;height:${K.height}px;width:${K.width}px;background-color:rgba(255, 212, 0, 0.3);pointer-events:none;z-index:5;`;A.style.cssText=P}for(let S=q-1;S>=I;S--){const K=w[S];H.removeChild(K),w.pop()}}}})},[n,l]);T.useLayoutEffect(()=>{f();const m=l.container,_=document.body;return _!==null?(_.appendChild(m),()=>{_.removeChild(m)}):()=>{}},[l.container,f]),T.useEffect(()=>(window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[f]);const d=m=>(m.preventDefault(),e(),!0),h=()=>{if(s){let m=n.getEditorState().read(()=>{const _=u.current;return _?_.getTextContent():""});m.length>100&&(m=m.slice(0,99)+"…"),t(c0(m,[Sl(r,c)]),!0,void 0,u.current),u.current=null}},p=h0(i,o);return L.jsxs("div",{className:"CommentPlugin_CommentInputBox",ref:a,children:[L.jsx(f0,{className:"CommentPlugin_CommentInputBox_Editor",onEscape:d,onChange:p}),L.jsxs("div",{className:"CommentPlugin_CommentInputBox_Buttons",children:[L.jsx(ri,{onClick:e,className:"CommentPlugin_CommentInputBox_Button",children:"Cancel"}),L.jsx(ri,{onClick:h,disabled:!s,className:"CommentPlugin_CommentInputBox_Button primary",children:"Comment"})]})]})}function yA({submitAddComment:n,thread:e,placeholder:t}){const[r,i]=T.useState(""),[s,o]=T.useState(!1),a=T.useRef(null),l=g0(),u=h0(i,o);return L.jsxs(L.Fragment,{children:[L.jsx(f0,{className:"CommentPlugin_CommentsPanel_Editor",autoFocus:!1,onEscape:()=>!0,onChange:u,editorRef:a,placeholder:t}),L.jsx(ri,{className:"CommentPlugin_CommentsPanel_SendButton",onClick:()=>{if(s){n(Sl(r,l),!1,e);const c=a.current;c!==null&&c.dispatchCommand(md,void 0)}},disabled:!s,children:L.jsx("i",{className:"send"})})]})}function p0({commentOrThread:n,deleteCommentOrThread:e,onClose:t,thread:r=void 0}){return L.jsxs(L.Fragment,{children:["Are you sure you want to delete this ",n.type,"?",L.jsxs("div",{className:"Modal__content",children:[L.jsx(ri,{onClick:()=>{e(n,r),t()},children:"Delete"})," ",L.jsx(ri,{onClick:()=>{t()},children:"Cancel"})]})]})}function Tg({comment:n,deleteComment:e,thread:t,rtf:r}){const i=Math.round((n.timeStamp-(performance.timeOrigin+performance.now()))/1e3),s=Math.round(i/60),[o,a]=d0();return L.jsxs("li",{className:"CommentPlugin_CommentsPanel_List_Comment",children:[L.jsxs("div",{className:"CommentPlugin_CommentsPanel_List_Details",children:[L.jsx("span",{className:"CommentPlugin_CommentsPanel_List_Comment_Author",children:n.author}),L.jsxs("span",{className:"CommentPlugin_CommentsPanel_List_Comment_Time",children:["· ",i>-10?"Just now":r.format(s,"minute")]})]}),L.jsx("p",{className:n.deleted?"CommentPlugin_CommentsPanel_DeletedComment":"",children:n.content}),!n.deleted&&L.jsxs(L.Fragment,{children:[L.jsx(ri,{onClick:()=>{a("Delete Comment",l=>L.jsx(p0,{commentOrThread:n,deleteCommentOrThread:e,thread:t,onClose:l}))},className:"CommentPlugin_CommentsPanel_List_DeleteButton",children:L.jsx("i",{className:"delete"})}),o]})]})}function _A({activeIDs:n,comments:e,deleteCommentOrThread:t,listRef:r,submitAddComment:i,markNodeMap:s}){const[o]=we(),[a,l]=T.useState(0),[u,c]=d0(),f=T.useMemo(()=>new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",numeric:"auto",style:"short"}),[]);return T.useEffect(()=>{const d=setTimeout(()=>{l(a+1)},1e4);return()=>{clearTimeout(d)}},[a]),L.jsx("ul",{className:"CommentPlugin_CommentsPanel_List",ref:r,children:e.map(d=>{const h=d.id;return d.type==="thread"?L.jsxs("li",{onClick:()=>{const p=s.get(h);if(p!==void 0&&(n===null||n.indexOf(h)===-1)){const m=document.activeElement;o.update(()=>{const _=Array.from(p)[0],C=Ae(_);Nt(C)&&C.selectStart()},{onUpdate(){m!==null&&m.focus()}})}},className:`CommentPlugin_CommentsPanel_List_Thread ${s.has(h)?"interactive":""} ${n.indexOf(h)===-1?"":"active"}`,children:[L.jsxs("div",{className:"CommentPlugin_CommentsPanel_List_Thread_QuoteBox",children:[L.jsxs("blockquote",{className:"CommentPlugin_CommentsPanel_List_Thread_Quote",children:["> ",L.jsx("span",{children:d.quote})]}),L.jsx(ri,{onClick:()=>{c("Delete Thread",p=>L.jsx(p0,{commentOrThread:d,deleteCommentOrThread:t,onClose:p}))},className:"CommentPlugin_CommentsPanel_List_DeleteButton",children:L.jsx("i",{className:"delete"})}),u]}),L.jsx("ul",{className:"CommentPlugin_CommentsPanel_List_Thread_Comments",children:d.comments.map(p=>L.jsx(Tg,{comment:p,deleteComment:t,thread:d,rtf:f},p.id))}),L.jsx("div",{className:"CommentPlugin_CommentsPanel_List_Thread_Editor",children:L.jsx(yA,{submitAddComment:i,thread:d,placeholder:"Reply to comment..."})})]},h):L.jsx(Tg,{comment:d,deleteComment:t,rtf:f},h)})})}function bA({activeIDs:n,deleteCommentOrThread:e,comments:t,submitAddComment:r,markNodeMap:i}){const s=T.useRef(null),o=t.length===0;return L.jsxs("div",{className:"CommentPlugin_CommentsPanel",children:[L.jsx("h2",{className:"CommentPlugin_CommentsPanel_Heading",children:"Comments"}),o?L.jsx("div",{className:"CommentPlugin_CommentsPanel_Empty",children:"No Comments"}):L.jsx(_A,{activeIDs:n,comments:t,deleteCommentOrThread:e,listRef:s,submitAddComment:r,markNodeMap:i})]})}function g0(){const n=b_(),{yjsDocMap:e,name:t}=n;return e.has("comments")?t:"Scripture User"}function vA({providerFactory:n,setCommentStore:e,onChange:t,showCommentsContainerRef:r,commentContainerRef:i,logger:s}){const o=b_(),[a]=we(),l=T.useMemo(()=>{const N=new oA(a,s);return t&&N.registerOnChange(t),e==null||e(N),N},[a,s,t,e]),u=aA(l),c=T.useMemo(()=>new Map,[]),[f,d]=T.useState(),[h,p]=T.useState([]),[m,_]=T.useState(!1),[C,v]=T.useState(!1),{yjsDocMap:k}=o;T.useEffect(()=>{if(n){const N=n("comments",k);return l.registerCollaboration(N)}return()=>{}},[l,n,k]);const M=T.useCallback(()=>{a.update(()=>{const N=ne();N!==null&&(N.dirty=!0)}),_(!1)},[a]),$=T.useCallback((N,I)=>{if(N.type==="comment"){const H=l.deleteCommentOrThread(N,I);if(!H)return;const{markedComment:w,index:q}=H;l.addComment(w,I,q)}else{l.deleteCommentOrThread(N);const H=I!==void 0?I.id:N.id,w=c.get(H);w!==void 0&&setTimeout(()=>{a.update(()=>{for(const q of w){const S=Ae(q);Nt(S)&&(S.deleteID(zr,H),S.hasNoIDsForEveryType()&&Ob(S))}})})}},[l,a,c]),x=T.useCallback((N,I,H,w)=>{l.addComment(N,H),I&&(a.update(()=>{G(w)&&Ib(w,zr,N.id)}),_(!1))},[l,a]);T.useEffect(()=>{const N=[];for(const I of h){const H=c.get(I);if(H!==void 0)for(const w of H){const q=a.getElementByKey(w);q!==null&&(q.classList.add("selected"),N.push(q),v(!0))}}return()=>{for(const I of N)I.classList.remove("selected")}},[h,a,c]),T.useEffect(()=>{if(!a.hasNodes([At]))throw new Error("CommentPlugin: TypedMarkNode not registered on editor!");const N=new Map;return _t(Ny(a,At,I=>Io(I.getTypedIDs()),(I,H)=>{for(const[w,q]of Object.entries(I.getTypedIDs()))q.forEach(S=>{H.addID(w,S)})}),a.registerMutationListener(At,I=>{a.getEditorState().read(()=>{for(const[H,w]of I){const q=Ae(H);let S=[];w==="destroyed"?S=N.get(H)??[]:Nt(q)&&(S=q.getTypedIDs()[zr]??[]);for(const K of S){let A=c.get(K);N.set(H,S),w==="destroyed"?A!==void 0&&(A.delete(H),A.size===0&&c.delete(K)):(A===void 0&&(A=new Set,c.set(K,A)),A.has(H)||A.add(H))}}})},{skipInitialization:!1}),a.registerUpdateListener(({editorState:I,tags:H})=>{I.read(()=>{const w=ne();let q=!1,S=!1;if(G(w)){const K=w.anchor.getNode();if(ee(K)){const A=Rx(K,zr,w.anchor.offset)??[];A!==null&&(p(A),q=!0),w.isCollapsed()||(d(K.getKey()),S=!0)}}q||p(K=>K.length===0?K:[]),S||d(null),!H.has("collaboration")&&G(w)&&_(!1)})}),a.registerCommand(Sg,()=>{const I=window.getSelection();return I!==null&&I.removeAllRanges(),_(!0),!0},ye))},[a,c]);const O=()=>{a.dispatchCommand(Sg,void 0)};return L.jsxs(L.Fragment,{children:[m&&En.createPortal(L.jsx(mA,{editor:a,cancelAddComment:M,submitAddComment:x}),document.body),f!=null&&!m&&En.createPortal(L.jsx(pA,{anchorKey:f,editor:a,showComments:C,onAddComment:O}),document.body),r!==null&&En.createPortal(L.jsx(ri,{className:`CommentPlugin_ShowCommentsButton ${C?"active":""}`,onClick:()=>v(!C),title:C?"Hide Comments":"Show Comments",children:L.jsx("i",{className:"comments"})}),(r==null?void 0:r.current)??document.body),C&&En.createPortal(L.jsx(bA,{comments:u,submitAddComment:x,deleteCommentOrThread:$,activeIDs:h,markNodeMap:c}),(i==null?void 0:i.current)??document.body)]})}function CA(){const n=T.useRef(void 0),e=T.useCallback(t=>{n.current=t},[]);return[n,e]}function EA(n,e){var t,r;const i=((t=e.current)==null?void 0:t.getComments())??[],s=i==null?void 0:i.map(a=>a.id),o=n.map(a=>{const l=s.findIndex(u=>u===a);return l!==void 0&&l>=0?i[l]:{comments:[{author:"unknown",content:"Comment not found",deleted:!1,id:"",timeStamp:0,type:"comment"}],id:a,quote:"",type:"thread"}});i.forEach(a=>{n.includes(a.id)||o.push(a)}),o&&((r=e.current)==null||r.setComments(o))}function wA(n,e){T.useEffect(()=>{var t;n.options??(n.options={}),(t=n.options).nodes??(t.nodes={}),n.options.nodes.addMissingComments=r=>{EA(r,e)}},[e,n])}T.forwardRef(function(n,e){const t=T.useRef(null),r=T.useRef(!0),i=T.useRef(null),[s,o]=T.useState(null),{children:a,onCommentChange:l,onUsjChange:u,...c}=n,{options:{isReadonly:f}={}}=n,[d,h]=CA();wA(c,d),T.useImperativeHandle(e,()=>({focus(){var _;(_=t.current)==null||_.focus()},getUsj(){var _;return(_=t.current)==null?void 0:_.getUsj()},setUsj(_){var C;(C=t.current)==null||C.setUsj(_)},applyUpdate(_,C){var v;(v=t.current)==null||v.applyUpdate(_,C)},getSelection(){var _;return(_=t.current)==null?void 0:_.getSelection()},setSelection(_){var C;(C=t.current)==null||C.setSelection(_)},addAnnotation(_,C,v){var k;(k=t.current)==null||k.addAnnotation(_,C,v)},removeAnnotation(_,C){var v;(v=t.current)==null||v.removeAnnotation(_,C)},setComments(_){var C;(C=d.current)==null||C.setComments(_),r.current=!0},get toolbarEndRef(){return s}}));const p=T.useCallback((_,C,v)=>{var k;if(!u)return;const M=(k=d.current)==null?void 0:k.getComments();u(_,M,C,v)},[d,u]),m=T.useCallback(()=>{var _;if(!l||r.current){r.current=!1;return}const C=(_=d.current)==null?void 0:_.getComments();l(C)},[d,r,l]);return T.useEffect(()=>{var _;return o(((_=t.current)==null?void 0:_.toolbarEndRef)??null),()=>o(null)},[]),L.jsxs(l0,{ref:t,onUsjChange:p,...c,children:[L.jsx(vA,{setCommentStore:h,onChange:m,showCommentsContainerRef:f?null:s,commentContainerRef:i,logger:c.logger}),L.jsx("div",{ref:i,className:"comment-container"})]})});const Ks=T.memo(function({viewMode:e,description:t,children:r}){const i=e==="story",s=T.useMemo(()=>!i||typeof t!="string"||!t.trim()?null:L.jsxs(k0,{className:"tw-w-full",children:[L.jsx(x0,{className:"tw-pb-2",children:L.jsx(S0,{className:"tw-text-sm tw-font-medium tw-text-muted-foreground",children:"Story Description"})}),L.jsx(T0,{className:"tw-pt-2",children:L.jsx(w0,{className:"tw-prose-sm tw-max-w-none tw-text-muted-foreground",markdown:t})})]}),[t,i]);return L.jsxs("div",{style:{display:"grid",gap:8},children:[r,s]})});Ks.__docgenInfo={description:"",methods:[],displayName:"CanvasWithDescription",props:{viewMode:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const kA='<usx version="3.1" />',xA=Bd(kA),SA=`<?xml version="1.0" encoding="utf-8"?>
<usx version="3.1">
  <book code="PSA" style="id">World English Bible (WEB)</book>
  <para style="mt1">The Psalms</para>
  <chapter number="1" style="c" sid="PSA 1" />
  <para style="q1">
    <verse number="1" style="v" sid="PSA 1:1" />Blessed is the man who doesn’t walk in the counsel of the wicked<note caller="+" style="f"><char style="fr">1:1 </char><char style="ft">Or "sinful"</char></note>,</para>
  <para style="q2" vid="PSA 1:1">nor stand on the path<note caller="+" style="f"><char style="fr">1:1 </char><char style="ft">Hebrew: "way"</char></note> of sinners,</para>
  <para style="q2" vid="PSA 1:1">nor sit in the seat of scoffers;<verse eid="PSA 1:1" /></para>
</usx>
`,Hi=Bd(SA),TA={start:{jsonPath:"$.content[3].content[1]",offset:15},end:{jsonPath:"$.content[3].content[1]",offset:18}},AA={start:{jsonPath:"$.content[3].content[1]",offset:15},end:{jsonPath:"$.content[3].content[1]",offset:22}},DA=`<?xml version="1.0" encoding="utf-8"?>
<usx version="3.1">
  <book code="PSA" style="id">תהילים</book>
  <para style="mt1">תהילים</para>
  <chapter number="1" style="c" sid="PSA 1" />
  <para style="q1">
    <verse number="1" style="v" sid="PSA 1:1" />אשרי האיש אשר לא הלך בעצת רשעים,</para>
  <para style="q2" vid="PSA 1:1">ובדרך חטאים לא עמד,</para>
  <para style="q2" vid="PSA 1:1">ובמושב לצים לא ישב.<verse eid="PSA 1:1" /></para>
</usx>
`,NA=Bd(DA),hr={book:"PSA",chapterNum:1,verseNum:1},XA={title:"Demo/Editorial",component:zi,tags:["autodocs"],parameters:{docs:{description:{component:`
**Demo Only:** This component is provided for demonstration purposes only. For production applications, developers should import the Scripture Editor component directly from:
- npm [@eten-tech-foundation/platform-editor](https://www.npmjs.com/package/@eten-tech-foundation/platform-editor)
- github [@eten-tech-foundation/platform-editor](https://github.com/eten-tech-foundation/scripture-editors/tree/main/packages/platform)

This demo version is included in Storybook to showcase the component's functionality and usage patterns.

**Known Limitation:** In the Docs view, all story examples may show the same note caller style due to global state management in the editor component. To see the correct note caller behavior for each story (default lowercase letters vs custom symbols), please view the individual stories in the Canvas view instead of the Docs view.
        `}}},argTypes:{ref:{control:"object",description:"Reference to the editor instance",defaultValue:null},defaultUsj:{control:"object",description:"Default USJ object to initialize the editor with",defaultValue:{type:Mi,version:Oi,content:[""]}},scrRef:{control:"object",description:"Scripture reference",defaultValue:hr},options:{control:"object",description:"Options to configure the editor (EditorOptions)",defaultValue:{},table:{type:{summary:"EditorOptions",detail:'{ isReadonly?: boolean; hasSpellCheck?: boolean; textDirection?: "ltr" | "rtl" | "auto"; markerMenuTrigger?: string; nodes?: UsjNodeOptions; }'}}}}},xa={args:{defaultUsj:Hi,scrRef:hr}},Sa={args:{defaultUsj:xA,scrRef:hr}},Ta={args:{defaultUsj:Hi,scrRef:hr,options:{isReadonly:!0}}},Aa={render:(n,e)=>{var t,r,i,s;return L.jsx(Ks,{viewMode:e.viewMode,description:((i=(r=(t=e.parameters)==null?void 0:t.docs)==null?void 0:r.description)==null?void 0:i.story)??((s=e.parameters)==null?void 0:s.description),children:L.jsx(zi,{...n})})},parameters:{docs:{description:{story:'Right-to-left example using a Hebrew snippet (Psalm 1:1). The editor is set to RTL via _options.textDirection = "rtl"_. If you want the UI (editor toolbar) to be RTL click **Switch direction** in the Storybook toolbar.'}}},args:{defaultUsj:NA,scrRef:hr,options:{textDirection:"rtl"}}},Da={render:n=>{const e=T.useRef(null);return T.useEffect(()=>{e.current&&(e.current.addAnnotation(TA,"spelling","annotationId"),e.current.addAnnotation(AA,"grammar","abc123"))},[]),L.jsx(zi,{...n,ref:e})},args:{defaultUsj:Hi,scrRef:hr}},MA={nodes:{noteCallers:["①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩"],noteCallerOnClick:n=>{console.log("Note caller clicked:",n),alert("Note caller clicked! Check console for details.")}}},Na={render:(n,e)=>{var t,r,i,s;return L.jsx(Ks,{viewMode:e.viewMode,description:((i=(r=(t=e.parameters)==null?void 0:t.docs)==null?void 0:r.description)==null?void 0:i.story)??((s=e.parameters)==null?void 0:s.description),children:L.jsx(zi,{...n})})},parameters:{docs:{description:{story:"This story demonstrates custom note callers and click handling. **Try clicking on the circled number footnote markers (① ②) in the text to see the click handler in action!** The click event will show an alert and log details to the browser console."}}},args:{defaultUsj:Hi,scrRef:hr,options:MA}},Ma={render:(n,e)=>{var t,r,i,s;return L.jsx(Ks,{viewMode:e.viewMode,description:((i=(r=(t=e.parameters)==null?void 0:t.docs)==null?void 0:r.description)==null?void 0:i.story)??((s=e.parameters)==null?void 0:s.description),children:L.jsx(zi,{...n})})},parameters:{docs:{description:{story:'This story demonstrates using a custom marker menu trigger key. **Try typing "?" (question mark) anywhere in the editor text to open the marker menu!** The default trigger is "\\\\" (backslash), but this story changes it to "?" for demonstration. The marker menu allows you to insert USFM markers into the text.'}}},args:{defaultUsj:Hi,scrRef:hr,options:{markerMenuTrigger:"?"}}},Oa={render:(n,e)=>{var u,c,f,d;const t=T.useRef(null),[r,i]=T.useState(null),[s,o]=T.useState(!1),a=T.useMemo(()=>({...n.options??{},view:{markerMode:s?"visible":"hidden",hasSpacing:!0,isFormattedFont:!0}}),[n.options,s]);T.useEffect(()=>{var p,m;const h=(m=(p=t.current)==null?void 0:p.toolbarEndRef)==null?void 0:m.current;if(h)i(h);else{const _=window.setTimeout(()=>{var v,k;const C=(k=(v=t.current)==null?void 0:v.toolbarEndRef)==null?void 0:k.current;C&&i(C)},0);return()=>window.clearTimeout(_)}},[a]);const l=T.useCallback(()=>o(h=>!h),[]);return L.jsxs(Ks,{viewMode:e.viewMode,description:((f=(c=(u=e.parameters)==null?void 0:u.docs)==null?void 0:c.description)==null?void 0:f.story)??((d=e.parameters)==null?void 0:d.description),children:[L.jsx(zi,{...n,options:a,ref:t}),r&&En.createPortal(L.jsx("button",{type:"button",title:"Show/hide markers","aria-label":"Show/hide markers","aria-pressed":s,className:`toolbar-item ${s?"active":""}`,onClick:l,children:L.jsx("span",{className:"icon pilcrow-icon","aria-hidden":"true",children:"¶"})}),r)]})},parameters:{docs:{description:{story:"This story demonstrates the Markers view, which shows USFM markers inline with the text. Click the **Show/hide markers** (¶) button in the editor toolbar to toggle the Markers view on and off. "}}},args:{defaultUsj:Hi,scrRef:hr}},Ia={name:"View Options",render:(n,e)=>{var t,r,i,s;return L.jsx(Ks,{viewMode:e.viewMode,description:((i=(r=(t=e.parameters)==null?void 0:t.docs)==null?void 0:r.description)==null?void 0:i.story)??((s=e.parameters)==null?void 0:s.description),children:L.jsx(zi,{...n})})},parameters:{docs:{description:{story:'Demonstrates the editor view options (marker visibility, spacing, and formatted font) using USX input. Below in the **Controls** tab, try changing the **options.view** values to see how they affect the editor display. Valid values for **markerMode** are _"hidden"_, _"visible"_, and _"editable"_.'}}},args:{defaultUsj:Hi,scrRef:hr,options:{view:{markerMode:"hidden",hasSpacing:!0,isFormattedFont:!0}}}};var Ag,Dg,Ng;xa.parameters={...xa.parameters,docs:{...(Ag=xa.parameters)==null?void 0:Ag.docs,source:{originalSource:`{
  args: {
    defaultUsj: usjWeb,
    scrRef: defaultScrRef
  }
}`,...(Ng=(Dg=xa.parameters)==null?void 0:Dg.docs)==null?void 0:Ng.source}}};var Mg,Og,Ig;Sa.parameters={...Sa.parameters,docs:{...(Mg=Sa.parameters)==null?void 0:Mg.docs,source:{originalSource:`{
  args: {
    defaultUsj: usjEmpty,
    scrRef: defaultScrRef
  }
}`,...(Ig=(Og=Sa.parameters)==null?void 0:Og.docs)==null?void 0:Ig.source}}};var Rg,Lg,Pg;Ta.parameters={...Ta.parameters,docs:{...(Rg=Ta.parameters)==null?void 0:Rg.docs,source:{originalSource:`{
  args: {
    defaultUsj: usjWeb,
    scrRef: defaultScrRef,
    options: {
      isReadonly: true
    }
  }
}`,...(Pg=(Lg=Ta.parameters)==null?void 0:Lg.docs)==null?void 0:Pg.source}}};var $g,Fg,Bg;Aa.parameters={...Aa.parameters,docs:{...($g=Aa.parameters)==null?void 0:$g.docs,source:{originalSource:`{
  render: (args, context) => <CanvasWithDescription viewMode={context.viewMode} description={context.parameters?.docs?.description?.story ?? context.parameters?.description}>
      <Editorial {...args} />
    </CanvasWithDescription>,
  parameters: {
    docs: {
      description: {
        story: 'Right-to-left example using a Hebrew snippet (Psalm 1:1). ' + 'The editor is set to RTL via _options.textDirection = "rtl"_. If you want the UI ' + '(editor toolbar) to be RTL click **Switch direction** in the Storybook toolbar.'
      }
    }
  },
  args: {
    defaultUsj: usjHebrew,
    scrRef: defaultScrRef,
    options: {
      textDirection: 'rtl'
    }
  }
}`,...(Bg=(Fg=Aa.parameters)==null?void 0:Fg.docs)==null?void 0:Bg.source}}};var qg,jg,Ug;Da.parameters={...Da.parameters,docs:{...(qg=Da.parameters)==null?void 0:qg.docs,source:{originalSource:`{
  render: args => {
    // eslint-disable-next-line no-null/no-null
    const editorRef = useRef<EditorRef | null>(null);
    useEffect(() => {
      if (editorRef.current) {
        editorRef.current.addAnnotation(annotationRangeWeb1, 'spelling', 'annotationId');
        editorRef.current.addAnnotation(annotationRangeWeb2, 'grammar', 'abc123');
      }
    }, []);
    return <Editorial {...args} ref={editorRef} />;
  },
  args: {
    defaultUsj: usjWeb,
    scrRef: defaultScrRef
  }
}`,...(Ug=(jg=Da.parameters)==null?void 0:jg.docs)==null?void 0:Ug.source}}};var Wg,zg,Hg;Na.parameters={...Na.parameters,docs:{...(Wg=Na.parameters)==null?void 0:Wg.docs,source:{originalSource:`{
  render: (args, context) => <CanvasWithDescription viewMode={context.viewMode} description={context.parameters?.docs?.description?.story ?? context.parameters?.description}>
      <Editorial {...args} />
    </CanvasWithDescription>,
  parameters: {
    docs: {
      description: {
        story: 'This story demonstrates custom note callers and click handling. **Try clicking on the ' + 'circled number footnote markers (① ②) in the text to see the click handler in ' + 'action!** The click event will show an alert and log details to the browser console.'
      }
    }
  },
  args: {
    defaultUsj: usjWeb,
    scrRef: defaultScrRef,
    options: customNodeOptions
  }
}`,...(Hg=(zg=Na.parameters)==null?void 0:zg.docs)==null?void 0:Hg.source}}};var Kg,Vg,Jg;Ma.parameters={...Ma.parameters,docs:{...(Kg=Ma.parameters)==null?void 0:Kg.docs,source:{originalSource:`{
  render: (args, context) => <CanvasWithDescription viewMode={context.viewMode} description={context.parameters?.docs?.description?.story ?? context.parameters?.description}>
      <Editorial {...args} />
    </CanvasWithDescription>,
  parameters: {
    docs: {
      description: {
        story: 'This story demonstrates using a custom marker menu trigger key. **Try typing "?" ' + '(question mark) anywhere in the editor text to open the marker menu!** The default ' + 'trigger is "\\\\\\\\" (backslash), but this story changes it to "?" for demonstration. ' + 'The marker menu allows you to insert USFM markers into the text.'
      }
    }
  },
  args: {
    defaultUsj: usjWeb,
    scrRef: defaultScrRef,
    options: {
      markerMenuTrigger: '?'
    }
  }
}`,...(Jg=(Vg=Ma.parameters)==null?void 0:Vg.docs)==null?void 0:Jg.source}}};var Gg,Yg,Xg;Oa.parameters={...Oa.parameters,docs:{...(Gg=Oa.parameters)==null?void 0:Gg.docs,source:{originalSource:`{
  render: (args, context) => {
    // eslint-disable-next-line no-null/no-null
    const editorRef = useRef<EditorRef | null>(null);
    // eslint-disable-next-line no-null/no-null
    const [toolbarEndEl, setToolbarEndEl] = useState<HTMLElement | null>(null);
    const [showMarkers, setShowMarkers] = useState(false);
    const mergedOptions = useMemo(() => {
      const base = args.options ?? {};
      const view: ViewOptions = {
        markerMode: showMarkers ? 'visible' : 'hidden',
        hasSpacing: true,
        isFormattedFont: true
      };
      return {
        ...base,
        view
      };
    }, [args.options, showMarkers]);
    useEffect(() => {
      const el = editorRef.current?.toolbarEndRef?.current;
      if (el) setToolbarEndEl(el);else {
        // Retry once on next tick in case the toolbar mounts after the ref effect
        const id = window.setTimeout(() => {
          const el2 = editorRef.current?.toolbarEndRef?.current;
          if (el2) setToolbarEndEl(el2);
        }, 0);
        return () => window.clearTimeout(id);
      }
      return undefined;
    }, [mergedOptions]);
    const handleShowMarkerToggle = useCallback(() => setShowMarkers(v => !v), []);
    return <CanvasWithDescription viewMode={context.viewMode} description={context.parameters?.docs?.description?.story ?? context.parameters?.description}>
        <Editorial {...args} options={mergedOptions} ref={editorRef} />
        {toolbarEndEl && createPortal(<button type="button" title="Show/hide markers" aria-label="Show/hide markers" aria-pressed={showMarkers} className={\`toolbar-item \${showMarkers ? 'active' : ''}\`} onClick={handleShowMarkerToggle}>
              <span className="icon pilcrow-icon" aria-hidden="true">
                ¶
              </span>
            </button>, toolbarEndEl)}
      </CanvasWithDescription>;
  },
  parameters: {
    docs: {
      description: {
        story: 'This story demonstrates the Markers view, which shows USFM markers inline with the ' + 'text. Click the **Show/hide markers** (¶) button in the editor toolbar to toggle the ' + 'Markers view on and off. '
      }
    }
  },
  args: {
    defaultUsj: usjWeb,
    scrRef: defaultScrRef
  }
}`,...(Xg=(Yg=Oa.parameters)==null?void 0:Yg.docs)==null?void 0:Xg.source}}};var Qg,Zg,em;Ia.parameters={...Ia.parameters,docs:{...(Qg=Ia.parameters)==null?void 0:Qg.docs,source:{originalSource:`{
  name: 'View Options',
  render: (args, context) => <CanvasWithDescription viewMode={context.viewMode} description={context.parameters?.docs?.description?.story ?? context.parameters?.description}>
      <Editorial {...args} />
    </CanvasWithDescription>,
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates the editor view options (marker visibility, spacing, and formatted font) ' + 'using USX input. Below in the **Controls** tab, try changing the **options.view** ' + 'values to see how they affect the editor display. Valid values for **markerMode** are ' + '_"hidden"_, _"visible"_, and _"editable"_.'
      }
    }
  },
  args: {
    defaultUsj: usjWeb,
    scrRef: defaultScrRef,
    options: {
      view: {
        markerMode: 'hidden',
        hasSpacing: true,
        isFormattedFont: true
      }
    }
  }
}`,...(em=(Zg=Ia.parameters)==null?void 0:Zg.docs)==null?void 0:em.source}}};const QA=["Default","Empty","ReadOnly","RTL","Annotated","CustomNoteOptions","CustomMarkerTrigger","MarkersView","ViewOptionsStory"];export{Da as Annotated,Ma as CustomMarkerTrigger,Na as CustomNoteOptions,xa as Default,Sa as Empty,Oa as MarkersView,Aa as RTL,Ta as ReadOnly,Ia as ViewOptionsStory,QA as __namedExportsOrder,XA as default};
