var Kb=Object.defineProperty;var Vb=(r,e,t)=>e in r?Kb(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var kr=(r,e,t)=>Vb(r,typeof e!="symbol"?e+"":e,t);import{j as F}from"./jsx-runtime-Dp1lb1Uf.js";import{c as $n,g as Jb,r as T}from"./iframe-bGuH-Abg.js";import{r as Tr}from"./index-BkoBbs9Y.js";import{d as Gb,c as Yb,s as Xb,f as Qb}from"./floating-ui.dom-DCpBEVSC.js";import"./index-BhiuDxmi.js";var Zb=Object.getOwnPropertyNames,e0=Object.getOwnPropertySymbols,t0=Object.prototype.hasOwnProperty;function gf(r,e){return function(n,i,s){return r(n,i,s)&&e(n,i,s)}}function ra(r){return function(t,n,i){if(!t||!n||typeof t!="object"||typeof n!="object")return r(t,n,i);var s=i.cache,o=s.get(t),a=s.get(n);if(o&&a)return o===n&&a===t;s.set(t,n),s.set(n,t);var l=r(t,n,i);return s.delete(t),s.delete(n),l}}function mf(r){return Zb(r).concat(e0(r))}var r0=Object.hasOwn||function(r,e){return t0.call(r,e)};function Oi(r,e){return r===e||!r&&!e&&r!==r&&e!==e}var n0="__v",i0="__o",s0="_owner",yf=Object.getOwnPropertyDescriptor,_f=Object.keys;function o0(r,e,t){var n=r.length;if(e.length!==n)return!1;for(;n-- >0;)if(!t.equals(r[n],e[n],n,n,r,e,t))return!1;return!0}function a0(r,e){return Oi(r.getTime(),e.getTime())}function l0(r,e){return r.name===e.name&&r.message===e.message&&r.cause===e.cause&&r.stack===e.stack}function u0(r,e){return r===e}function bf(r,e,t){var n=r.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=r.entries(),o,a,l=0;(o=s.next())&&!o.done;){for(var u=e.entries(),c=!1,f=0;(a=u.next())&&!a.done;){if(i[f]){f++;continue}var d=o.value,h=a.value;if(t.equals(d[0],h[0],l,f,r,e,t)&&t.equals(d[1],h[1],d[0],h[0],r,e,t)){c=i[f]=!0;break}f++}if(!c)return!1;l++}return!0}var c0=Oi;function d0(r,e,t){var n=_f(r),i=n.length;if(_f(e).length!==i)return!1;for(;i-- >0;)if(!Fg(r,e,t,n[i]))return!1;return!0}function Ws(r,e,t){var n=mf(r),i=n.length;if(mf(e).length!==i)return!1;for(var s,o,a;i-- >0;)if(s=n[i],!Fg(r,e,t,s)||(o=yf(r,s),a=yf(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function f0(r,e){return Oi(r.valueOf(),e.valueOf())}function h0(r,e){return r.source===e.source&&r.flags===e.flags}function vf(r,e,t){var n=r.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),s=r.values(),o,a;(o=s.next())&&!o.done;){for(var l=e.values(),u=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&t.equals(o.value,a.value,o.value,a.value,r,e,t)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function p0(r,e){var t=r.length;if(e.length!==t)return!1;for(;t-- >0;)if(r[t]!==e[t])return!1;return!0}function g0(r,e){return r.hostname===e.hostname&&r.pathname===e.pathname&&r.protocol===e.protocol&&r.port===e.port&&r.hash===e.hash&&r.username===e.username&&r.password===e.password}function Fg(r,e,t,n){return(n===s0||n===i0||n===n0)&&(r.$$typeof||e.$$typeof)?!0:r0(e,n)&&t.equals(r[n],e[n],n,n,r,e,t)}var m0="[object Arguments]",y0="[object Boolean]",_0="[object Date]",b0="[object Error]",v0="[object Map]",C0="[object Number]",E0="[object Object]",w0="[object RegExp]",k0="[object Set]",x0="[object String]",S0="[object URL]",T0=Array.isArray,Cf=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ef=Object.assign,A0=Object.prototype.toString.call.bind(Object.prototype.toString);function D0(r){var e=r.areArraysEqual,t=r.areDatesEqual,n=r.areErrorsEqual,i=r.areFunctionsEqual,s=r.areMapsEqual,o=r.areNumbersEqual,a=r.areObjectsEqual,l=r.arePrimitiveWrappersEqual,u=r.areRegExpsEqual,c=r.areSetsEqual,f=r.areTypedArraysEqual,d=r.areUrlsEqual;return function(p,m,_){if(p===m)return!0;if(p==null||m==null)return!1;var C=typeof p;if(C!==typeof m)return!1;if(C!=="object")return C==="number"?o(p,m,_):C==="function"?i(p,m,_):!1;var v=p.constructor;if(v!==m.constructor)return!1;if(v===Object)return a(p,m,_);if(T0(p))return e(p,m,_);if(Cf!=null&&Cf(p))return f(p,m,_);if(v===Date)return t(p,m,_);if(v===RegExp)return u(p,m,_);if(v===Map)return s(p,m,_);if(v===Set)return c(p,m,_);var k=A0(p);return k===_0?t(p,m,_):k===w0?u(p,m,_):k===v0?s(p,m,_):k===k0?c(p,m,_):k===E0?typeof p.then!="function"&&typeof m.then!="function"&&a(p,m,_):k===S0?d(p,m,_):k===b0?n(p,m,_):k===m0?a(p,m,_):k===y0||k===C0||k===x0?l(p,m,_):!1}}function N0(r){var e=r.circular,t=r.createCustomConfig,n=r.strict,i={areArraysEqual:n?Ws:o0,areDatesEqual:a0,areErrorsEqual:l0,areFunctionsEqual:u0,areMapsEqual:n?gf(bf,Ws):bf,areNumbersEqual:c0,areObjectsEqual:n?Ws:d0,arePrimitiveWrappersEqual:f0,areRegExpsEqual:h0,areSetsEqual:n?gf(vf,Ws):vf,areTypedArraysEqual:n?Ws:p0,areUrlsEqual:g0};if(t&&(i=Ef({},i,t(i))),e){var s=ra(i.areArraysEqual),o=ra(i.areMapsEqual),a=ra(i.areObjectsEqual),l=ra(i.areSetsEqual);i=Ef({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return i}function M0(r){return function(e,t,n,i,s,o,a){return r(e,t,a)}}function O0(r){var e=r.circular,t=r.comparator,n=r.createState,i=r.equals,s=r.strict;if(n)return function(l,u){var c=n(),f=c.cache,d=f===void 0?e?new WeakMap:void 0:f,h=c.meta;return t(l,u,{cache:d,equals:i,meta:h,strict:s})};if(e)return function(l,u){return t(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,u){return t(l,u,o)}}var Pn=ri();ri({strict:!0});ri({circular:!0});ri({circular:!0,strict:!0});ri({createInternalComparator:function(){return Oi}});ri({strict:!0,createInternalComparator:function(){return Oi}});ri({circular:!0,createInternalComparator:function(){return Oi}});ri({circular:!0,createInternalComparator:function(){return Oi},strict:!0});function ri(r){r===void 0&&(r={});var e=r.circular,t=e===void 0?!1:e,n=r.createInternalComparator,i=r.createState,s=r.strict,o=s===void 0?!1:s,a=N0(r),l=D0(a),u=n?n(l):M0(l);return O0({circular:t,comparator:l,createState:i,equals:u,strict:o})}function se(r,...e){const t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",r);for(const i of e)n.append("v",i);throw t.search=n.toString(),Error(`Minified Lexical error #${r}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Hr=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,I0=Hr&&"documentMode"in document?document.documentMode:null,en=Hr&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Ci=Hr&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Ba=!(!Hr||!("InputEvent"in window)||I0)&&"getTargetRanges"in new window.InputEvent("input"),uo=Hr&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),is=Hr&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,R0=Hr&&/Android/.test(navigator.userAgent),$g=Hr&&/^(?=.*Chrome).*/i.test(navigator.userAgent),wf=Hr&&R0&&$g,qa=Hr&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!$g;function ja(...r){const e=[];for(const t of r)if(t&&typeof t=="string")for(const[n]of t.matchAll(/\S+/g))e.push(n);return e}const L0=1,P0=3,F0=9,$0=11,Ei=0,Bg=1,ss=2,B0=0,q0=1,j0=2,Ua=4,za=8,Jc=128,U0=1792|(112|(3|Ua|za)|Jc),Gc=1,Yc=2,Xc=3,Qc=4,Zc=5,ed=6,bl=uo||is||qa?" ":"​",Sn=`

`,z0=Ci?" ":bl,qg="֑-߿יִ-﷽ﹰ-ﻼ",jg="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",H0=new RegExp("^[^"+jg+"]*["+qg+"]"),W0=new RegExp("^[^"+qg+"]*["+jg+"]"),Kn={bold:1,capitalize:1024,code:16,highlight:Jc,italic:2,lowercase:256,strikethrough:Ua,subscript:32,superscript:64,underline:za,uppercase:512},K0={directionless:1,unmergeable:2},kf={center:Yc,end:ed,justify:Qc,left:Gc,right:Xc,start:Zc},V0={[Yc]:"center",[ed]:"end",[Qc]:"justify",[Gc]:"left",[Xc]:"right",[Zc]:"start"},J0={normal:0,segmented:2,token:1},G0={[B0]:"normal",[j0]:"segmented",[q0]:"token"},xf="$config";function Ug(r,e,t,n,i,s){let o=r.getFirstChild();for(;o!==null;){const a=o.__key;o.__parent===e&&(V(o)&&Ug(o,a,t,n,i,s),t.has(a)||s.delete(a),i.push(a)),o=o.getNextSibling()}}const Y0=100;let zu=!1,td=0;function X0(r){td=r.timeStamp}function fu(r,e,t){const n=r.nodeName==="BR",i=e.__lexicalLineBreak;return i&&(r===i||n&&r.previousSibling===i)||n&&Dl(r,t)!==void 0}function Q0(r,e,t){const n=Ur(Nr(t));let i=null,s=null;n!==null&&n.anchorNode===r&&(i=n.anchorOffset,s=n.focusOffset);const o=r.nodeValue;o!==null&&xd(e,o,i,s,!1)}function Z0(r,e,t){if(G(r)){const n=r.anchor.getNode();if(n.is(t)&&r.format!==n.getFormat())return!1}return Nn(e)&&t.isAttached()}function ev(r,e,t,n){for(let i=r;i&&!Qv(i);i=Io(i)){const s=Dl(i,e);if(s!==void 0){const o=Ae(s,t);if(o)return Le(o)||!je(i)?void 0:[i,o]}else if(i===n)return[n,zm(t)]}}function zg(r,e,t){zu=!0;const n=performance.now()-td>Y0;try{vr(r,()=>{const i=re()||function(d){return d.getEditorState().read(()=>{const h=re();return h!==null?h.clone():null})}(r),s=new Map,o=r.getRootElement(),a=r._editorState,l=r._blockCursorElement;let u=!1,c="";for(let d=0;d<e.length;d++){const h=e[d],p=h.type,m=h.target,_=ev(m,r,a,o);if(!_)continue;const[C,v]=_;if(p==="characterData")n&&ee(v)&&Nn(m)&&Z0(i,m,v)&&Q0(m,v,r);else if(p==="childList"){u=!0;const k=h.addedNodes;for(let x=0;x<k.length;x++){const O=k[x],N=jm(O),I=O.parentNode;if(I!=null&&O!==l&&N===null&&!fu(O,I,r)){if(Ci){const W=(je(O)?O.innerText:null)||O.nodeValue;W&&(c+=W)}I.removeChild(O)}}const M=h.removedNodes,P=M.length;if(P>0){let x=0;for(let O=0;O<P;O++){const N=M[O];(fu(N,m,r)||l===N)&&(m.appendChild(N),x++)}P!==x&&s.set(C,v)}}}if(s.size>0)for(const[d,h]of s)h.reconcileObservedMutation(d,r);const f=t.takeRecords();if(f.length>0){for(let d=0;d<f.length;d++){const h=f[d],p=h.addedNodes,m=h.target;for(let _=0;_<p.length;_++){const C=p[_],v=C.parentNode;v==null||C.nodeName!=="BR"||fu(C,m,r)||v.removeChild(C)}}t.takeRecords()}i!==null&&(u&&Mt(i),Ci&&Jm(r)&&i.insertRawText(c))})}finally{zu=!1}}function Hg(r){const e=r._observer;e!==null&&zg(r,e.takeRecords(),e)}function Wg(r){(function(e){td===0&&Nr(e).addEventListener("textInput",X0,!0)})(r),r._observer=new MutationObserver((e,t)=>{zg(r,e,t)})}class tv{constructor(e,t){this.key=e,this.parse=t.parse.bind(t),this.unparse=(t.unparse||iv).bind(t),this.isEqual=(t.isEqual||Object.is).bind(t),this.defaultValue=this.parse(void 0)}}function Kg(r,e){return new tv(r,e)}function os(r,e,t="latest"){const n=(t==="latest"?r.getLatest():r).__state;return n?n.getValue(e):e.defaultValue}function En(r,e,t){let n;if(kt(),typeof t=="function"){const s=r.getLatest(),o=os(s,e);if(n=t(o),e.isEqual(o,n))return s}else n=t;const i=r.getWritable();return Jg(i).updateFromKnown(e,n),i}function rv(r){const e=new Map,t=new Set;for(let n=typeof r=="function"?r:r.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:i}=Dd(n);if(i&&i.stateConfigs)for(const s of i.stateConfigs){let o;"stateConfig"in s?(o=s.stateConfig,s.flat&&t.add(o.key)):o=s,e.set(o.key,o)}}return{flatKeys:t,sharedConfigMap:e}}let nv=class Vg{constructor(e,t,n=void 0,i=new Map,s=void 0){this.node=e,this.sharedNodeState=t,this.unknownState=n,this.knownState=i;const{sharedConfigMap:o}=this.sharedNodeState,a=s!==void 0?s:function(l,u,c){let f=c.size;if(u)for(const d in u){const h=l.get(d);h&&c.has(h)||f++}return f}(o,n,i);this.size=a}getValue(e){const t=this.knownState.get(e);if(t!==void 0)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let n=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const i=this.unknownState[e.key];i!==void 0&&(n=e.parse(i)),this.updateFromKnown(e,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState},t={};for(const[n,i]of this.knownState)n.isEqual(i,n.defaultValue)?delete e[n.key]:e[n.key]=n.unparse(i);for(const n of this.sharedNodeState.flatKeys)n in e&&(t[n]=e[n],delete e[n]);return Sf(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;const{sharedNodeState:t,unknownState:n}=this,i=new Map(this.knownState);return new Vg(e,t,function(s,o,a){let l;if(a)for(const[u,c]of Object.entries(a)){const f=s.get(u);f?o.has(f)||o.set(f,f.parse(c)):(l=l||{},l[u]=c)}return l}(t.sharedConfigMap,i,n),i,this.size)}updateFromKnown(e,t){const n=e.key;this.sharedNodeState.sharedConfigMap.set(n,e);const{knownState:i,unknownState:s}=this;i.has(e)||s&&n in s||(s&&(delete s[n],this.unknownState=Sf(s)),this.size++),i.set(e,t)}updateFromUnknown(e,t){const n=this.sharedNodeState.sharedConfigMap.get(e);n?this.updateFromKnown(n,n.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){const{knownState:t}=this;for(const n of t.keys())t.set(n,n.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(const[n,i]of Object.entries(e))this.updateFromUnknown(n,i)}};function Jg(r){const e=r.getWritable(),t=e.__state?e.__state.getWritable(e):new nv(e,Gg(e));return e.__state=t,t}function Gg(r){return r.__state?r.__state.sharedNodeState:Bm(Ml(),r.getType()).sharedNodeState}function Sf(r){if(r)for(const e in r)return r}function iv(r){return r}function Tf(r,e,t){for(const[n,i]of e.knownState){if(r.has(n.key))continue;r.add(n.key);const s=t?t.getValue(n):n.defaultValue;if(s!==i&&!n.isEqual(s,i))return!0}return!1}function Af(r,e,t){const{unknownState:n}=e,i=t?t.unknownState:void 0;if(n){for(const[s,o]of Object.entries(n))if(!r.has(s)&&(r.add(s),o!==(i?i[s]:void 0)))return!0}return!1}function Df(r,e){const t=r.__state;return t&&t.node===r?t.getWritable(e):t}function Nf(r,e){const t=r.__mode,n=r.__format,i=r.__style,s=e.__mode,o=e.__format,a=e.__style,l=r.__state,u=e.__state;return(t===null||t===s)&&(n===null||n===o)&&(i===null||i===a)&&(r.__state===null||l===u||function(c,f){if(c===f)return!0;if(c&&f&&c.size!==f.size)return!1;const d=new Set;return!(c&&Tf(d,c,f)||f&&Tf(d,f,c)||c&&Af(d,c,f)||f&&Af(d,f,c))}(l,u))}function Mf(r,e){const t=r.mergeWithSibling(e),n=Ve()._normalizedNodes;return n.add(r.__key),n.add(e.__key),t}function Of(r){let e,t,n=r;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(e=n.getPreviousSibling())!==null&&ee(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(Nf(e,n)){n=Mf(e,n);break}break}e.remove()}for(;(t=n.getNextSibling())!==null&&ee(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(Nf(n,t)){n=Mf(n,t);break}break}t.remove()}}else n.remove()}function co(r){return If(r.anchor),If(r.focus),r}function If(r){for(;r.type==="element";){const e=r.getNode(),t=r.offset;let n,i;if(t===e.getChildrenSize()?(n=e.getChildAtIndex(t-1),i=!0):(n=e.getChildAtIndex(t),i=!1),ee(n)){r.set(n.__key,i?n.getTextContentSize():0,"text",!0);break}if(!V(n))break;r.set(n.__key,i?n.getChildrenSize():0,"element",!0)}}let Vn,Vt,fo,vl,Hu,Wu,wi,Br,Ku,ho,at="",Kt="",Qr=null,Zr="",vn="",Yg=!1,po=!1,Sa=null;function Ha(r,e){const t=wi.get(r);if(e!==null){const n=Gu(r);n.parentNode===e&&e.removeChild(n)}if(Br.has(r)||Vt._keyToDOMMap.delete(r),V(t)){const n=Ka(t,wi);Vu(n,0,n.length-1,null)}t!==void 0&&Sd(ho,fo,vl,t,"destroyed")}function Vu(r,e,t,n){let i=e;for(;i<=t;++i){const s=r[i];s!==void 0&&Ha(s,n)}}function ci(r,e){r.setProperty("text-align",e)}const sv="40px";function Xg(r,e){const t=Vn.theme.indent;if(typeof t=="string"){const i=r.classList.contains(t);e>0&&!i?r.classList.add(t):e<1&&i&&r.classList.remove(t)}const n=getComputedStyle(r).getPropertyValue("--lexical-indent-base-value")||sv;r.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${n})`)}function Qg(r,e){const t=r.style;e===0?ci(t,""):e===Gc?ci(t,"left"):e===Yc?ci(t,"center"):e===Xc?ci(t,"right"):e===Qc?ci(t,"justify"):e===Zc?ci(t,"start"):e===ed&&ci(t,"end")}function Wa(r,e){const t=Br.get(r);t===void 0&&se(60);const n=t.createDOM(Vn,Vt);if(function(i,s,o){const a=o._keyToDOMMap;(function(l,u,c){const f=`__lexicalKey_${u._key}`;l[f]=c})(s,o,i),a.set(i,s)}(r,n,Vt),ee(t)?n.setAttribute("data-lexical-text","true"):Le(t)&&n.setAttribute("data-lexical-decorator","true"),V(t)){const i=t.__indent,s=t.__size;if(i!==0&&Xg(n,i),s!==0){const a=s-1;(function(l,u,c,f){const d=Kt;Kt="",Ju(l,c,0,u,c.getDOMSlot(f)),em(c,f),Kt=d})(Ka(t,Br),a,t,n)}const o=t.__format;o!==0&&Qg(n,o),t.isInline()||Zg(null,t,n),Nl(t)&&(at+=Sn,vn+=Sn)}else{const i=t.getTextContent();if(Le(t)){const s=t.decorate(Vt,Vn);s!==null&&tm(r,s),n.contentEditable="false"}else ee(t)&&(t.isDirectionless()||(Kt+=i));at+=i,vn+=i}return e!==null&&e.insertChild(n),Sd(ho,fo,vl,t,"created"),n}function Ju(r,e,t,n,i){const s=at;at="";let o=t;for(;o<=n;++o){Wa(r[o],i);const a=Br.get(r[o]);a!==null&&ee(a)&&(Qr===null&&(Qr=a.getFormat()),Zr===""&&(Zr=a.getStyle()))}Nl(e)&&(at+=Sn),i.element.__lexicalTextContent=at,at=s+at}function Rf(r,e){if(r){const t=r.__last;if(t){const n=e.get(t);if(n)return gi(n)?"line-break":Le(n)&&n.isInline()?"decorator":null}return"empty"}return null}function Zg(r,e,t){const n=Rf(r,wi),i=Rf(e,Br);n!==i&&e.getDOMSlot(t).setManagedLineBreak(i)}function em(r,e){const t=e.__lexicalDirTextContent||"",n=e.__lexicalDir||"";if(t!==Kt||n!==Sa){const i=Kt==="",s=i?Sa:function(o){return H0.test(o)?"rtl":W0.test(o)?"ltr":null}(Kt);if(s!==n){const o=e.classList,a=Vn.theme;let l=n!==null?a[n]:void 0,u=s!==null?a[s]:void 0;if(l!==void 0){if(typeof l=="string"){const c=ja(l);l=a[n]=c}o.remove(...l)}if(s===null||i&&s==="ltr")e.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const c=ja(u);u=a[s]=c}u!==void 0&&o.add(...u)}e.dir=s}po||(r.getWritable().__dir=s)}Sa=s,e.__lexicalDirTextContent=Kt,e.__lexicalDir=s}}function ov(r,e,t){const n=Kt;var i;Kt="",Qr=null,Zr="",function(s,o,a){const l=at,u=s.__size,c=o.__size;at="";const f=a.element;if(u===1&&c===1){const d=s.__first,h=o.__first;if(d===h)Ys(d,f);else{const m=Gu(d),_=Wa(h,null);try{f.replaceChild(_,m)}catch(C){if(typeof C=="object"&&C!=null){const v=`${C.toString()} Parent: ${f.tagName}, new child: {tag: ${_.tagName} key: ${h}}, old child: {tag: ${m.tagName}, key: ${d}}.`;throw new Error(v)}throw C}Ha(d,null)}const p=Br.get(h);ee(p)&&(Qr===null&&(Qr=p.getFormat()),Zr===""&&(Zr=p.getStyle()))}else{const d=Ka(s,wi),h=Ka(o,Br);if(d.length!==u&&se(227),h.length!==c&&se(228),u===0)c!==0&&Ju(h,o,0,c-1,a);else if(c===0){if(u!==0){const p=a.after==null&&a.before==null&&a.element.__lexicalLineBreak==null;Vu(d,0,u-1,p?null:f),p&&(f.textContent="")}}else(function(p,m,_,C,v,k){const M=C-1,P=v-1;let x,O,N=k.getFirstChild(),I=0,W=0;for(;I<=M&&W<=P;){const S=m[I],K=_[W];if(S===K)N=hu(Ys(K,k.element)),I++,W++;else{x===void 0&&(x=new Set(m)),O===void 0&&(O=new Set(_));const L=O.has(S),j=x.has(K);if(L)if(j){const H=ds(Vt,K);H===N?N=hu(Ys(K,k.element)):(k.withBefore(N).insertChild(H),Ys(K,k.element)),I++,W++}else Wa(K,k.withBefore(N)),W++;else N=hu(Gu(S)),Ha(S,k.element),I++}const A=Br.get(K);A!==null&&ee(A)&&(Qr===null&&(Qr=A.getFormat()),Zr===""&&(Zr=A.getStyle()))}const w=I>M,q=W>P;if(w&&!q){const S=_[P+1],K=S===void 0?null:Vt.getElementByKey(S);Ju(_,p,W,P,k.withBefore(K))}else q&&!w&&Vu(m,I,M,k.element)})(o,d,h,u,c,a)}Nl(o)&&(at+=Sn),f.__lexicalTextContent=at,at=l+at}(r,e,e.getDOMSlot(t)),em(e,t),i=e,Qr==null||Qr===i.__textFormat||po||i.setTextFormat(Qr),function(s){Zr===""||Zr===s.__textStyle||po||s.setTextStyle(Zr)}(e),Kt=n}function Ka(r,e){const t=[];let n=r.__first;for(;n!==null;){const i=e.get(n);i===void 0&&se(101),t.push(n),n=i.__next}return t}function Ys(r,e){const t=wi.get(r);let n=Br.get(r);t!==void 0&&n!==void 0||se(61);const i=Yg||Wu.has(r)||Hu.has(r),s=ds(Vt,r);if(t===n&&!i){if(V(t)){const o=s.__lexicalTextContent;o!==void 0&&(at+=o,vn+=o);const a=s.__lexicalDirTextContent;a!==void 0&&(Kt+=a)}else{const o=t.getTextContent();ee(t)&&!t.isDirectionless()&&(Kt+=o),vn+=o,at+=o}return s}if(t!==n&&i&&Sd(ho,fo,vl,n,"updated"),n.updateDOM(t,s,Vn)){const o=Wa(r,null);return e===null&&se(62),e.replaceChild(o,s),Ha(r,null),o}if(V(t)&&V(n)){const o=n.__indent;o!==t.__indent&&Xg(s,o);const a=n.__format;a!==t.__format&&Qg(s,a),i&&(ov(t,n,s),St(n)||n.isInline()||Zg(t,n,s)),Nl(n)&&(at+=Sn,vn+=Sn)}else{const o=n.getTextContent();if(Le(n)){const a=n.decorate(Vt,Vn);a!==null&&tm(r,a)}else ee(n)&&!n.isDirectionless()&&(Kt+=o);at+=o,vn+=o}if(!po&&St(n)&&n.__cachedText!==vn){const o=n.getWritable();o.__cachedText=vn,n=o}return s}function tm(r,e){let t=Vt._pendingDecorators;const n=Vt._decorators;if(t===null){if(n[r]===e)return;t=Um(Vt)}t[r]=e}function hu(r){let e=r.nextSibling;return e!==null&&e===Vt._blockCursorElement&&(e=e.nextSibling),e}function av(r,e,t,n,i,s){at="",vn="",Kt="",Yg=n===ss,Sa=null,Vt=t,Vn=t._config,fo=t._nodes,vl=Vt._listeners.mutation,Hu=i,Wu=s,wi=r._nodeMap,Br=e._nodeMap,po=e._readOnly,Ku=new Map(t._keyToDOMMap);const o=new Map;return ho=o,Ys("root",null),Vt=void 0,fo=void 0,Hu=void 0,Wu=void 0,wi=void 0,Br=void 0,Vn=void 0,Ku=void 0,ho=void 0,o}function Gu(r){const e=Ku.get(r);return e===void 0&&se(75,r),e}function be(r){return{type:r}}const vs=be("SELECTION_CHANGE_COMMAND"),lv=be("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),rm=be("CLICK_COMMAND"),nn=be("DELETE_CHARACTER_COMMAND"),zn=be("INSERT_LINE_BREAK_COMMAND"),go=be("INSERT_PARAGRAPH_COMMAND"),pi=be("CONTROLLED_TEXT_INSERTION_COMMAND"),Ii=be("PASTE_COMMAND"),Va=be("REMOVE_TEXT_COMMAND"),as=be("DELETE_WORD_COMMAND"),ls=be("DELETE_LINE_COMMAND"),Bn=be("FORMAT_TEXT_COMMAND"),Cl=be("UNDO_COMMAND"),El=be("REDO_COMMAND"),Cs=be("KEYDOWN_COMMAND"),rd=be("KEY_ARROW_RIGHT_COMMAND"),uv=be("MOVE_TO_END"),nd=be("KEY_ARROW_LEFT_COMMAND"),cv=be("MOVE_TO_START"),id=be("KEY_ARROW_UP_COMMAND"),sd=be("KEY_ARROW_DOWN_COMMAND"),us=be("KEY_ENTER_COMMAND"),nm=be("KEY_SPACE_COMMAND"),od=be("KEY_BACKSPACE_COMMAND"),wl=be("KEY_ESCAPE_COMMAND"),ad=be("KEY_DELETE_COMMAND"),ld=be("KEY_TAB_COMMAND"),dv=be("INSERT_TAB_COMMAND"),fv=be("INDENT_CONTENT_COMMAND"),Lf=be("OUTDENT_CONTENT_COMMAND"),kl=be("DROP_COMMAND"),hv=be("FORMAT_ELEMENT_COMMAND"),ud=be("DRAGSTART_COMMAND"),im=be("DRAGOVER_COMMAND"),pv=be("DRAGEND_COMMAND"),Ri=be("COPY_COMMAND"),Es=be("CUT_COMMAND"),Ja=be("SELECT_ALL_COMMAND"),cd=be("CLEAR_EDITOR_COMMAND"),sm=be("CLEAR_HISTORY_COMMAND"),Xs=be("CAN_REDO_COMMAND"),Qs=be("CAN_UNDO_COMMAND"),gv=be("FOCUS_COMMAND"),mv=be("BLUR_COMMAND"),yv=be("KEY_MODIFIER_COMMAND"),gn=Object.freeze({}),Yu=30,Xu=[["keydown",function(r,e){if(no=r.timeStamp,om=r.key,!e.isComposing()&&!ce(e,Cs,r)&&r.key!=null){if(pu&&uh(r))return vr(e,()=>{na(e,gu)}),pu=!1,void(gu="");if(function(t){return Be(t,"ArrowRight",{shiftKey:"any"})}(r))ce(e,rd,r);else if(function(t){return Be(t,"ArrowRight",_n)}(r))ce(e,uv,r);else if(function(t){return Be(t,"ArrowLeft",{shiftKey:"any"})}(r))ce(e,nd,r);else if(function(t){return Be(t,"ArrowLeft",_n)}(r))ce(e,cv,r);else if(function(t){return Be(t,"ArrowUp",{altKey:"any",shiftKey:"any"})}(r))ce(e,id,r);else if(function(t){return Be(t,"ArrowDown",{altKey:"any",shiftKey:"any"})}(r))ce(e,sd,r);else if(function(t){return Be(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(r))io=!0,ce(e,us,r);else if(function(t){return t.key===" "}(r))ce(e,nm,r);else if(function(t){return en&&Be(t,"o",{ctrlKey:!0})}(r))r.preventDefault(),io=!0,ce(e,zn,!0);else if(function(t){return Be(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(r))io=!1,ce(e,us,r);else if(function(t){return Be(t,"Backspace",{shiftKey:"any"})||en&&Be(t,"h",{ctrlKey:!0})}(r))uh(r)?ce(e,od,r):(r.preventDefault(),ce(e,nn,!0));else if(function(t){return t.key==="Escape"}(r))ce(e,wl,r);else if(function(t){return Be(t,"Delete",{})||en&&Be(t,"d",{ctrlKey:!0})}(r))(function(t){return t.key==="Delete"})(r)?ce(e,ad,r):(r.preventDefault(),ce(e,nn,!1));else if(function(t){return Be(t,"Backspace",lh)}(r))r.preventDefault(),ce(e,as,!0);else if(function(t){return Be(t,"Delete",lh)}(r))r.preventDefault(),ce(e,as,!1);else if(function(t){return en&&Be(t,"Backspace",{metaKey:!0})}(r))r.preventDefault(),ce(e,ls,!0);else if(function(t){return en&&(Be(t,"Delete",{metaKey:!0})||Be(t,"k",{ctrlKey:!0}))}(r))r.preventDefault(),ce(e,ls,!1);else if(function(t){return Be(t,"b",_n)}(r))r.preventDefault(),ce(e,Bn,"bold");else if(function(t){return Be(t,"u",_n)}(r))r.preventDefault(),ce(e,Bn,"underline");else if(function(t){return Be(t,"i",_n)}(r))r.preventDefault(),ce(e,Bn,"italic");else if(function(t){return Be(t,"Tab",{shiftKey:"any"})}(r))ce(e,ld,r);else if(function(t){return Be(t,"z",_n)}(r))r.preventDefault(),ce(e,Cl,void 0);else if(function(t){return en?Be(t,"z",{metaKey:!0,shiftKey:!0}):Be(t,"y",{ctrlKey:!0})||Be(t,"z",{ctrlKey:!0,shiftKey:!0})}(r))r.preventDefault(),ce(e,El,void 0);else{const t=e._editorState._selection;t===null||G(t)?ch(r)&&(r.preventDefault(),ce(e,Ja,r)):function(n){return Be(n,"c",_n)}(r)?(r.preventDefault(),ce(e,Ri,r)):function(n){return Be(n,"x",_n)}(r)?(r.preventDefault(),ce(e,Es,r)):ch(r)&&(r.preventDefault(),ce(e,Ja,r))}(function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey})(r)&&ce(e,yv,r)}}],["pointerdown",function(r,e){const t=r.target,n=r.pointerType;Pi(t)&&n!=="touch"&&n!=="pen"&&r.button===0&&vr(e,()=>{sh(t)||(Zu=!0)})}],["compositionstart",function(r,e){vr(e,()=>{const t=re();if(G(t)&&!e.isComposing()){const n=t.anchor,i=t.anchor.getNode();xt(n.key),(r.timeStamp<no+Yu||n.type==="element"||!t.isCollapsed()||i.getFormat()!==t.format||ee(i)&&i.getStyle()!==t.style)&&ce(e,pi,z0)}})}],["compositionend",function(r,e){Ci?Ks=!0:is||!uo&&!qa?vr(e,()=>{na(e,r.data)}):(pu=!0,gu=r.data)}],["input",function(r,e){r.stopPropagation(),vr(e,()=>{if(je(r.target)&&sh(r.target))return;const t=re(),n=r.data,i=dm(r);if(n!=null&&G(t)&&um(t,i,n,r.timeStamp,!1)){Ks&&(na(e,n),Ks=!1);const s=t.anchor.getNode(),o=Ur(Nr(e));if(o===null)return;const a=t.isBackward(),l=a?t.anchor.offset:t.focus.offset,u=a?t.focus.offset:t.anchor.offset;Ba&&!t.isCollapsed()&&ee(s)&&o.anchorNode!==null&&s.getTextContent().slice(0,l)+n+s.getTextContent().slice(l+u)===Km(o.anchorNode)||ce(e,pi,n);const c=n.length;Ci&&c>1&&r.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=c),uo||is||qa||!e.isComposing()||(no=0,xt(null))}else kd(!1,e,n!==null?n:void 0),Ks&&(na(e,n||void 0),Ks=!1);(function(){kt();const s=Ve();Hg(s)})()},{event:r}),Ji=null}],["click",function(r,e){vr(e,()=>{const t=re(),n=Ur(Nr(e)),i=ks();if(n){if(G(t)){const s=t.anchor,o=s.getNode();if(s.type==="element"&&s.offset===0&&t.isCollapsed()&&!St(o)&&De().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&i!==null&&t.is(i))n.removeAllRanges(),t.dirty=!0;else if(r.detail===3&&!t.isCollapsed()&&o!==t.focus.getNode()){const a=function(l,u){let c=l;for(;c!==De()&&c!=null;){if(u(c))return c;c=c.getParent()}return null}(o,l=>V(l)&&!l.isInline());V(a)&&a.select(0)}}else if(r.pointerType==="touch"||r.pointerType==="pen"){const s=n.anchorNode;(je(s)||Nn(s))&&Mt(hd(i,n,e,r))}}ce(e,rm,r)})}],["cut",gn],["copy",gn],["dragstart",gn],["dragover",gn],["dragend",gn],["paste",gn],["focus",gn],["blur",gn],["drop",gn]];Ba&&Xu.push(["beforeinput",(r,e)=>function(t,n){const i=t.inputType,s=dm(t);i==="deleteCompositionText"||Ci&&Jm(n)||i!=="insertCompositionText"&&vr(n,()=>{const o=re();if(i==="deleteContentBackward"){if(o===null){const h=ks();if(!G(h))return;Mt(h.clone())}if(G(o)){const h=o.anchor.key===o.focus.key;if(a=t.timeStamp,om==="MediaLast"&&a<no+Yu&&n.isComposing()&&h){if(xt(null),no=0,setTimeout(()=>{vr(n,()=>{xt(null)})},Yu),G(o)){const p=o.anchor.getNode();p.markDirty(),ee(p)||se(142),cm(o,p)}}else{xt(null),t.preventDefault();const p=o.anchor.getNode(),m=p.getTextContent(),_=p.canInsertTextAfter(),C=o.anchor.offset===0&&o.focus.offset===m.length;let v=wf&&h&&!C&&_;if(v&&o.isCollapsed()&&(v=!Le(sc(o.anchor,!0))),!v){ce(n,nn,!0);const k=re();wf&&G(k)&&k.isCollapsed()&&(hi=k,setTimeout(()=>hi=null))}}return}}var a;if(!G(o))return;const l=t.data;Ji!==null&&kd(!1,n,Ji),o.dirty&&Ji===null||!o.isCollapsed()||St(o.anchor.getNode())||s===null||o.applyDOMRange(s),Ji=null;const u=o.anchor,c=o.focus,f=u.getNode(),d=c.getNode();if(i!=="insertText"&&i!=="insertTranspose")switch(t.preventDefault(),i){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ce(n,pi,t);break;case"insertFromComposition":xt(null),ce(n,pi,t);break;case"insertLineBreak":xt(null),ce(n,zn,!1);break;case"insertParagraph":xt(null),io&&!is?(io=!1,ce(n,zn,!1)):ce(n,go,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ce(n,Ii,t);break;case"deleteByComposition":(function(h,p){return h!==p||V(h)||V(p)||!yi(h)||!yi(p)})(f,d)&&ce(n,Va,t);break;case"deleteByDrag":case"deleteByCut":ce(n,Va,t);break;case"deleteContent":ce(n,nn,!1);break;case"deleteWordBackward":ce(n,as,!0);break;case"deleteWordForward":ce(n,as,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ce(n,ls,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ce(n,ls,!1);break;case"formatStrikeThrough":ce(n,Bn,"strikethrough");break;case"formatBold":ce(n,Bn,"bold");break;case"formatItalic":ce(n,Bn,"italic");break;case"formatUnderline":ce(n,Bn,"underline");break;case"historyUndo":ce(n,Cl,void 0);break;case"historyRedo":ce(n,El,void 0)}else{if(l===`
`)t.preventDefault(),ce(n,zn,!1);else if(l===Sn)t.preventDefault(),ce(n,go,void 0);else if(l==null&&t.dataTransfer){const h=t.dataTransfer.getData("text/plain");t.preventDefault(),o.insertRawText(h)}else l!=null&&um(o,s,l,t.timeStamp,!0)?(t.preventDefault(),ce(n,pi,l)):Ji=l;am=t.timeStamp}})}(r,e)]);let no=0,om=null,am=0,Ji=null;const Ga=new WeakMap;let Qu=!1,Zu=!1,io=!1,Ks=!1,pu=!1,gu="",hi=null,lm=[0,"",0,"root",0];function um(r,e,t,n,i){const s=r.anchor,o=r.focus,a=s.getNode(),l=Ve(),u=Ur(Nr(l)),c=u!==null?u.anchorNode:null,f=s.key,d=l.getElementByKey(f),h=t.length;return f!==o.key||!ee(a)||(!i&&(!Ba||am<n+50)||a.isDirty()&&h<2||Hm(t))&&s.offset!==o.offset&&!a.isComposing()||bn(a)||a.isDirty()&&h>1||(i||!Ba)&&d!==null&&!a.isComposing()&&c!==cs(d)||u!==null&&e!==null&&(!e.collapsed||e.startContainer!==u.anchorNode||e.startOffset!==u.anchorOffset)||a.getFormat()!==r.format||a.getStyle()!==r.style||function(p,m){if(m.isSegmented())return!0;if(!p.isCollapsed())return!1;const _=p.anchor.offset,C=m.getParentOrThrow(),v=yi(m);return _===0?!m.canInsertTextBefore()||!C.canInsertTextBefore()&&!m.isComposing()||v||function(k){const M=k.getPreviousSibling();return(ee(M)||V(M)&&M.isInline())&&!M.canInsertTextAfter()}(m):_===m.getTextContentSize()&&(!m.canInsertTextAfter()||!C.canInsertTextAfter()&&!m.isComposing()||v)}(r,a)}function Pf(r,e){return Nn(r)&&r.nodeValue!==null&&e!==0&&e!==r.nodeValue.length}function Ff(r,e,t){const{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}=r;Qu&&(Qu=!1,Pf(n,i)&&Pf(s,o)&&!hi)||vr(e,()=>{if(!t)return void Mt(null);if(!Oo(e,n,s))return;let a=re();if(hi&&G(a)&&a.isCollapsed()){const l=a.anchor,u=hi.anchor;(l.key===u.key&&l.offset===u.offset+1||l.offset===1&&u.getNode().is(l.getNode().getPreviousSibling()))&&(a=hi.clone(),Mt(a))}if(hi=null,G(a)){const l=a.anchor,u=l.getNode();if(a.isCollapsed()){r.type==="Range"&&r.anchorNode===r.focusNode&&(a.dirty=!0);const c=Nr(e).event,f=c?c.timeStamp:performance.now(),[d,h,p,m,_]=lm,C=De(),v=e.isComposing()===!1&&C.getTextContent()==="";if(f<_+200&&l.offset===p&&l.key===m)Ta(a,d,h);else if(l.type==="text")ee(u)||se(141),cm(a,u);else if(l.type==="element"&&!v){V(u)||se(259);const k=l.getNode();k.isEmpty()?function(M,P){const x=P.getTextFormat(),O=P.getTextStyle();Ta(M,x,O)}(a,k):Ta(a,0,"")}}else{const c=l.key,f=a.focus.key,d=a.getNodes(),h=d.length,p=a.isBackward(),m=p?o:i,_=p?i:o,C=p?f:c,v=p?c:f;let k=U0,M=!1;for(let P=0;P<h;P++){const x=d[P],O=x.getTextContentSize();if(ee(x)&&O!==0&&!(P===0&&x.__key===C&&m===O||P===h-1&&x.__key===v&&_===0)&&(M=!0,k&=x.getFormat(),k===0))break}a.format=M?k:0}}ce(e,vs,void 0)})}function Ta(r,e,t){r.format===e&&r.style===t||(r.format=e,r.style=t,r.dirty=!0)}function cm(r,e){Ta(r,e.getFormat(),e.getStyle())}function dm(r){if(!r.getTargetRanges)return null;const e=r.getTargetRanges();return e.length===0?null:e[0]}function na(r,e){const t=r._compositionKey;if(xt(null),t!==null&&e!=null){if(e===""){const n=Ae(t),i=cs(r.getElementByKey(t));return void(i!==null&&i.nodeValue!==null&&ee(n)&&xd(n,i.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const n=re();if(G(n)){const i=n.focus;return n.anchor.set(i.key,i.offset,i.type),void ce(r,us,null)}}}kd(!0,r,e)}function fm(r){let e=r.__lexicalEventHandles;return e===void 0&&(e=[],r.__lexicalEventHandles=e),e}const Zi=new Map;function hm(r){const e=Jv(r.target);if(e===null)return;const t=qm(e.anchorNode);if(t===null)return;Zu&&(Zu=!1,vr(t,()=>{const l=ks(),u=e.anchorNode;(je(u)||Nn(u))&&Mt(hd(l,e,t,r))}));const n=wd(t),i=n[n.length-1],s=i._key,o=Zi.get(s),a=o||i;a!==t&&Ff(e,a,!1),Ff(e,t,!0),t!==i?Zi.set(s,t):o&&Zi.delete(s)}function $f(r){r._lexicalHandled=!0}function Bf(r){return r._lexicalHandled===!0}function _v(r){const e=r.ownerDocument,t=Ga.get(e);if(t===void 0)return;const n=t-1;n>=0||se(164),Ga.set(e,n),n===0&&e.removeEventListener("selectionchange",hm);const i=Al(r);Ed(i)?(function(o){if(o._parentEditor!==null){const a=wd(o),l=a[a.length-1]._key;Zi.get(l)===o&&Zi.delete(l)}else Zi.delete(o._key)}(i),r.__lexicalEditor=null):i&&se(198);const s=fm(r);for(let o=0;o<s.length;o++)s[o]();r.__lexicalEventHandles=[]}function ec(r,e,t){kt();const n=r.__key,i=r.getParent();if(i===null)return;const s=function(a){const l=re();if(!G(l)||!V(a))return l;const{anchor:u,focus:c}=l,f=u.getNode(),d=c.getNode();return oc(f,a)&&u.set(a.__key,0,"element"),oc(d,a)&&c.set(a.__key,0,"element"),l}(r);let o=!1;if(G(s)&&e){const a=s.anchor,l=s.focus;a.key===n&&(Xa(a,r,i,r.getPreviousSibling(),r.getNextSibling()),o=!0),l.key===n&&(Xa(l,r,i,r.getPreviousSibling(),r.getNextSibling()),o=!0)}else Wt(s)&&e&&r.isSelected()&&r.selectPrevious();if(G(s)&&e&&!o){const a=r.getIndexWithinParent();_i(r),Ya(s,i,a,-1)}else _i(r);t||dn(i)||i.canBeEmpty()||!i.isEmpty()||ec(i,e),e&&s&&St(i)&&i.isEmpty()&&i.selectEnd()}let ws=class{static getType(){const{ownNodeType:e}=Dd(this);return e===void 0&&se(64,this.name),e}static clone(e){se(65,this.name)}$config(){return{}}config(e,t){const n=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:n,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),jv(this,e)}getType(){return this.__type}isInline(){se(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=Ae(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||re();if(t==null)return!1;const n=t.getNodes().some(i=>i.__key===this.__key);if(ee(this))return n;if(G(t)&&t.anchor.type==="element"&&t.focus.type==="element"){if(t.isCollapsed())return!1;const i=this.getParent();if(Le(this)&&this.isInline()&&i){const s=t.isBackward()?t.focus:t.anchor;if(i.is(s.getNode())&&s.offset===i.getChildrenSize()&&this.is(i.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),n=0;for(;t!==null;){if(this.is(t))return n;n++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:Ae(e)}getParentOrThrow(){const e=this.getParent();return e===null&&se(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(dn(t))return V(e)||e===this&&Le(e)||se(194),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&se(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:Ae(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let n=t.getFirstChild();for(;n!==null&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:Ae(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=V(this)?this:this.getParent(),n=V(e)?e:e.getParent(),i=t&&n?ao(t,n):null;return i?i.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const t=ao(this,e);return t!==null&&(t.type==="descendant"||(t.type==="branch"?ty(t)===-1:(t.type!=="same"&&t.type!=="ancestor"&&se(279),!1)))}isParentOf(e){const t=ao(this,e);return t!==null&&t.type==="ancestor"}getNodesBetween(e){const t=this.isBefore(e),n=[],i=new Set;let s=this;for(;s!==null;){const o=s.__key;if(i.has(o)||(i.add(o),n.push(s)),s===e)break;const a=V(s)?t?s.getFirstChild():s.getLastChild():null;if(a!==null){s=a;continue}const l=t?s.getNextSibling():s.getPreviousSibling();if(l!==null){s=l;continue}const u=s.getParentOrThrow();if(i.has(u.__key)||n.push(u),u===e)break;let c=null,f=u;do{if(f===null&&se(68),c=t?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;c!==null||i.has(f.__key)||n.push(f)}while(c===null);s=c}return t||n.reverse(),n}isDirty(){const e=Ve()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=Ae(this.__key);return e===null&&se(113),e}getWritable(){kt();const e=ni(),t=Ve(),n=e._nodeMap,i=this.__key,s=this.getLatest(),o=t._cloneNotNeeded,a=re();if(a!==null&&a.setCachedNodes(null),o.has(i))return Za(s),s;const l=Ad(s);return o.add(i),Za(l),n.set(i,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){se(70)}updateDOM(e,t,n){se(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){se(18,this.name)}updateFromJSON(e){return function(t,n){const i=t.getWritable(),s=n.$;let o=s;for(const a of Gg(i).flatKeys)a in n&&(o!==void 0&&o!==s||(o={...s}),o[a]=n[a]);return(i.__state||o)&&Jg(t).updateFromJSON(o),i}(this,e)}static transform(){return null}remove(e){ec(this,!0,e)}replace(e,t){kt();let n=re();n!==null&&(n=n.clone()),Cu(this,e);const i=this.getLatest(),s=this.__key,o=e.__key,a=e.getWritable(),l=this.getParentOrThrow().getWritable(),u=l.__size;_i(a);const c=i.getPreviousSibling(),f=i.getNextSibling(),d=i.__prev,h=i.__next,p=i.__parent;if(ec(i,!1,!0),c===null?l.__first=o:c.getWritable().__next=o,a.__prev=d,f===null?l.__last=o:f.getWritable().__prev=o,a.__next=h,a.__parent=p,l.__size=u,t&&(V(this)&&V(a)||se(139),this.getChildren().forEach(m=>{a.append(m)})),G(n)){Mt(n);const m=n.anchor,_=n.focus;m.key===s&&zf(m,a),_.key===s&&zf(_,a)}return qn()===s&&xt(o),a}insertAfter(e,t=!0){kt(),Cu(this,e);const n=this.getWritable(),i=e.getWritable(),s=i.getParent(),o=re();let a=!1,l=!1;if(s!==null){const h=e.getIndexWithinParent();if(_i(i),G(o)){const p=s.__key,m=o.anchor,_=o.focus;a=m.type==="element"&&m.key===p&&m.offset===h+1,l=_.type==="element"&&_.key===p&&_.offset===h+1}}const u=this.getNextSibling(),c=this.getParentOrThrow().getWritable(),f=i.__key,d=n.__next;if(u===null?c.__last=f:u.getWritable().__prev=f,c.__size++,n.__next=f,i.__next=d,i.__prev=n.__key,i.__parent=n.__parent,t&&G(o)){const h=this.getIndexWithinParent();Ya(o,c,h+1);const p=c.__key;a&&o.anchor.set(p,h+2,"element"),l&&o.focus.set(p,h+2,"element")}return e}insertBefore(e,t=!0){kt(),Cu(this,e);const n=this.getWritable(),i=e.getWritable(),s=i.__key;_i(i);const o=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=n.__prev,u=this.getIndexWithinParent();o===null?a.__first=s:o.getWritable().__next=s,a.__size++,n.__prev=s,i.__prev=l,i.__next=n.__key,i.__parent=n.__parent;const c=re();return t&&G(c)&&Ya(c,this.getParentOrThrow(),u),e}isParentRequired(){return!1}createParentElementNode(){return Er()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){kt();const n=this.getPreviousSibling(),i=this.getParentOrThrow();if(n===null)return i.select(0,0);if(V(n))return n.select();if(!ee(n)){const s=n.getIndexWithinParent()+1;return i.select(s,s)}return n.select(e,t)}selectNext(e,t){kt();const n=this.getNextSibling(),i=this.getParentOrThrow();if(n===null)return i.select();if(V(n))return n.select(0,0);if(!ee(n)){const s=n.getIndexWithinParent();return i.select(s,s)}return n.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}},Ao=class pm extends ws{static getType(){return"linebreak"}static clone(e){return new pm(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>function(t){const n=t.parentElement;if(n!==null&&el(n)){const i=n.firstChild;if(i===t||i.nextSibling===t&&ia(i)){const s=n.lastChild;if(s===t||s.previousSibling===t&&ia(s))return!0}}return!1}(e)||function(t){const n=t.parentElement;if(n!==null&&el(n)){const i=n.firstChild;if(i===t||i.nextSibling===t&&ia(i))return!1;const s=n.lastChild;if(s===t||s.previousSibling===t&&ia(s))return!0}return!1}(e)?null:{conversion:bv,priority:0}}}static importJSON(e){return ki().updateFromJSON(e)}};function bv(r){return{node:ki()}}function ki(){return We(new Ao)}function gi(r){return r instanceof Ao}function ia(r){return Nn(r)&&/^( |\t|\r?\n)+$/.test(r.textContent||"")}function mu(r,e){return 16&e?"code":e&Jc?"mark":32&e?"sub":64&e?"sup":null}function yu(r,e){return 1&e?"strong":2&e?"em":"span"}function gm(r,e,t,n,i){const s=n.classList;let o=es(i,"base");o!==void 0&&s.add(...o),o=es(i,"underlineStrikethrough");let a=!1;const l=e&za&&e&Ua;o!==void 0&&(t&za&&t&Ua?(a=!0,l||s.add(...o)):l&&s.remove(...o));for(const u in Kn){const c=Kn[u];if(o=es(i,u),o!==void 0)if(t&c){if(a&&(u==="underline"||u==="strikethrough")){e&c&&s.remove(...o);continue}e&c&&(!l||u!=="underline")&&u!=="strikethrough"||s.add(...o)}else e&c&&s.remove(...o)}}function mm(r,e,t){const n=e.firstChild,i=t.isComposing(),s=r+(i?bl:"");if(n==null)e.textContent=s;else{const o=n.nodeValue;if(o!==s)if(i||Ci){const[a,l,u]=function(c,f){const d=c.length,h=f.length;let p=0,m=0;for(;p<d&&p<h&&c[p]===f[p];)p++;for(;m+p<d&&m+p<h&&c[d-m-1]===f[h-m-1];)m++;return[p,d-p-m,f.slice(p,h-m)]}(o,s);l!==0&&n.deleteData(a,l),n.insertData(a,u)}else n.nodeValue=s}}function qf(r,e,t,n,i,s){mm(i,r,e);const o=s.theme.text;o!==void 0&&gm(0,0,n,r,o)}function sa(r,e){const t=document.createElement(e);return t.appendChild(r),t}class Jt extends ws{static getType(){return"text"}static clone(e){return new Jt(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return G0[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===qn()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const t=Kn[e];return!!(this.getFormat()&t)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return Qa(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){const n=this.__format,i=mu(0,n),s=yu(0,n),o=i===null?s:i,a=document.createElement(o);let l=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),i!==null&&(l=document.createElement(s),a.appendChild(l)),qf(l,this,0,n,this.__text,e);const u=this.__style;return u!==""&&(a.style.cssText=u),a}updateDOM(e,t,n){const i=this.__text,s=e.__format,o=this.__format,a=mu(0,s),l=mu(0,o),u=yu(0,s),c=yu(0,o);if((a===null?u:a)!==(l===null?c:l))return!0;if(a===l&&u!==c){const m=t.firstChild;m==null&&se(48);const _=document.createElement(c);return qf(_,this,0,o,i,n),t.replaceChild(_,m),!1}let f=t;l!==null&&a!==null&&(f=t.firstChild,f==null&&se(49)),mm(i,f,this);const d=n.theme.text;d!==void 0&&s!==o&&gm(0,s,o,f,d);const h=e.__style,p=this.__style;return h!==p&&(t.style.cssText=p),!1}static importDOM(){return{"#text":()=>({conversion:wv,priority:0}),b:()=>({conversion:Cv,priority:0}),code:()=>({conversion:mn,priority:0}),em:()=>({conversion:mn,priority:0}),i:()=>({conversion:mn,priority:0}),mark:()=>({conversion:mn,priority:0}),s:()=>({conversion:mn,priority:0}),span:()=>({conversion:vv,priority:0}),strong:()=>({conversion:mn,priority:0}),sub:()=>({conversion:mn,priority:0}),sup:()=>({conversion:mn,priority:0}),u:()=>({conversion:mn,priority:0})}}static importJSON(e){return Oe().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return je(t)||se(132),t.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?t.style.textTransform="lowercase":this.hasFormat("uppercase")?t.style.textTransform="uppercase":this.hasFormat("capitalize")&&(t.style.textTransform="capitalize"),this.hasFormat("bold")&&(t=sa(t,"b")),this.hasFormat("italic")&&(t=sa(t,"i")),this.hasFormat("strikethrough")&&(t=sa(t,"s")),this.hasFormat("underline")&&(t=sa(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format=typeof e=="string"?Kn[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail=typeof e=="string"?K0[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=Qa(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=J0[e];if(this.__mode===t)return this;const n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){kt();let n=e,i=t;const s=re(),o=this.getTextContent(),a=this.__key;if(typeof o=="string"){const l=o.length;n===void 0&&(n=l),i===void 0&&(i=l)}else n=0,i=0;if(!G(s))return km(a,n,a,i,"text","text");{const l=qn();l!==s.anchor.key&&l!==s.focus.key||xt(a),s.setTextNodeRange(this,n,this,i)}return s}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,i){const s=this.getWritable(),o=s.__text,a=n.length;let l=e;l<0&&(l=a+l,l<0&&(l=0));const u=re();if(i&&G(u)){const f=e+a;u.setTextNodeRange(s,f,s,f)}const c=o.slice(0,l)+n+o.slice(l+t);return s.__text=c,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){kt();const t=this.getLatest(),n=t.getTextContent();if(n==="")return[];const i=t.__key,s=qn(),o=n.length;e.sort((N,I)=>N-I),e.push(o);const a=[],l=e.length;for(let N=0,I=0;N<o&&I<=l;I++){const W=e[I];W>N&&(a.push(n.slice(N,W)),N=W)}const u=a.length;if(u===1)return[t];const c=a[0],f=t.getParent();let d;const h=t.getFormat(),p=t.getStyle(),m=t.__detail;let _=!1,C=null,v=null;const k=re();if(G(k)){const[N,I]=k.isBackward()?[k.focus,k.anchor]:[k.anchor,k.focus];N.type==="text"&&N.key===i&&(C=N),I.type==="text"&&I.key===i&&(v=I)}t.isSegmented()?(d=Oe(c),d.__format=h,d.__style=p,d.__detail=m,d.__state=Df(t,d),_=!0):d=t.setTextContent(c);const M=[d];for(let N=1;N<u;N++){const I=Oe(a[N]);I.__format=h,I.__style=p,I.__detail=m,I.__state=Df(t,I);const W=I.__key;s===i&&xt(W),M.push(I)}const P=C?C.offset:null,x=v?v.offset:null;let O=0;for(const N of M){if(!C&&!v)break;const I=O+N.getTextContentSize();if(C!==null&&P!==null&&P<=I&&P>=O&&(C.set(N.getKey(),P-O,"text"),P<I&&(C=null)),v!==null&&x!==null&&x<=I&&x>=O){v.set(N.getKey(),x-O,"text");break}O=I}if(f!==null){(function(W){const w=W.getPreviousSibling(),q=W.getNextSibling();w!==null&&Za(w),q!==null&&Za(q)})(this);const N=f.getWritable(),I=this.getIndexWithinParent();_?(N.splice(I,0,M),this.remove()):N.splice(I,1,M),G(k)&&Ya(k,f,I,u-1)}return M}mergeWithSibling(e){const t=e===this.getPreviousSibling();t||e===this.getNextSibling()||se(50);const n=this.__key,i=e.__key,s=this.__text,o=s.length;qn()===i&&xt(n);const a=re();if(G(a)){const f=a.anchor,d=a.focus;f!==null&&f.key===i&&Yf(f,t,n,e,o),d!==null&&d.key===i&&Yf(d,t,n,e,o)}const l=e.__text,u=t?l+s:s+l;this.setTextContent(u);const c=this.getWritable();return e.remove(),c}isTextEntity(){return!1}}function vv(r){return{forChild:dd(r.style),node:null}}function Cv(r){const e=r,t=e.style.fontWeight==="normal";return{forChild:dd(e.style,t?void 0:"bold"),node:null}}const jf=new WeakMap;function Ev(r){if(!je(r))return!1;if(r.nodeName==="PRE")return!0;const e=r.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function wv(r){const e=r;r.parentElement===null&&se(129);let t=e.textContent||"";if(function(n){let i,s=n.parentNode;const o=[n];for(;s!==null&&(i=jf.get(s))===void 0&&!Ev(s);)o.push(s),s=s.parentNode;const a=i===void 0?s:i;for(let l=0;l<o.length;l++)jf.set(o[l],a);return a}(e)!==null){const n=t.split(/(\r?\n|\t)/),i=[],s=n.length;for(let o=0;o<s;o++){const a=n[o];a===`
`||a===`\r
`?i.push(ki()):a==="	"?i.push(Do()):a!==""&&i.push(Oe(a))}return{node:i}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let n=e,i=!0;for(;n!==null&&(n=Uf(n,!1))!==null;){const s=n.textContent||"";if(s.length>0){/[ \t\n]$/.test(s)&&(t=t.slice(1)),i=!1;break}}i&&(t=t.slice(1))}if(t[t.length-1]===" "){let n=e,i=!0;for(;n!==null&&(n=Uf(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:Oe(t)}}function Uf(r,e){let t=r;for(;;){let n;for(;(n=e?t.nextSibling:t.previousSibling)===null;){const s=t.parentElement;if(s===null)return null;t=s}if(t=n,je(t)){const s=t.style.display;if(s===""&&!uc(t)||s!==""&&!s.startsWith("inline"))return null}let i=t;for(;(i=e?t.firstChild:t.lastChild)!==null;)t=i;if(Nn(t))return t;if(t.nodeName==="BR")return null}}const kv={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function mn(r){const e=kv[r.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:dd(r.style,e),node:null}}function Oe(r=""){return We(new Jt(r))}function ee(r){return r instanceof Jt}function dd(r,e){const t=r.fontWeight,n=r.textDecoration.split(" "),i=t==="700"||t==="bold",s=n.includes("line-through"),o=r.fontStyle==="italic",a=n.includes("underline"),l=r.verticalAlign;return u=>(ee(u)&&(i&&!u.hasFormat("bold")&&u.toggleFormat("bold"),s&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),o&&!u.hasFormat("italic")&&u.toggleFormat("italic"),a&&!u.hasFormat("underline")&&u.toggleFormat("underline"),l!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),l!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),e&&!u.hasFormat(e)&&u.toggleFormat(e)),u)}let fd=class ym extends Jt{static getType(){return"tab"}static clone(e){return new ym(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const t=super.createDOM(e),n=es(e.theme,"tab");return n!==void 0&&t.classList.add(...n),t}static importJSON(e){return Do().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&se(126),super.setTextContent("	")}spliceText(e,t,n,i){return n===""&&t===0||n==="	"&&t===1||se(286),this}setDetail(e){return e!==2&&se(127),this}setMode(e){return e!=="normal"&&se(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}};function Do(){return We(new fd)}function _m(r){return r instanceof fd}let xv=class{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:ey(rn(Tn(this,"next")),rn(Tn(e,"next")))<0}getNode(){const e=Ae(this.key);return e===null&&se(20),e}set(e,t,n,i){const s=this._selection,o=this.key;i&&this.key===e&&this.offset===t&&this.type===n||(this.key=e,this.offset=t,this.type=n,xs()||(qn()===o&&xt(e),s!==null&&(s.setCachedNodes(null),s.dirty=!0)))}};function or(r,e,t){return new xv(r,e,t)}function _u(r,e){let t=e.__key,n=r.offset,i="element";if(ee(e)){i="text";const s=e.getTextContentSize();n>s&&(n=s)}else if(!V(e)){const s=e.getNextSibling();if(ee(s))t=s.__key,n=0,i="text";else{const o=e.getParent();o&&(t=o.__key,n=e.getIndexWithinParent()+1)}}r.set(t,n,i)}function zf(r,e){if(V(e)){const t=e.getLastDescendant();V(t)||ee(t)?_u(r,t):_u(r,e)}else _u(r,e)}let bm=class vm{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!Wt(e))return!1;const t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every(i=>n.has(i))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new vm(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),n=t.length,i=t[n-1];let s;if(ee(i))s=i.select();else{const o=i.getIndexWithinParent()+1;s=i.getParentOrThrow().select(o,o)}s.insertNodes(e);for(let o=0;o<n;o++)t[o].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,n=[];for(const i of t){const s=Ae(i);s!==null&&n.push(s)}return xs()||(this._cachedNodes=n),n}getTextContent(){const e=this.getNodes();let t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}deleteNodes(){const e=this.getNodes();if((re()||ks())===this&&e[0]){const t=ut(e[0],"next");l2(Gn(t,t))}for(const t of e)t.remove()}};function G(r){return r instanceof No}let No=class Cm{constructor(e,t,n,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!G(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=function(n){const i=[],[s,o]=n.getTextSlices();s&&i.push(s.caret.origin);const a=new Set,l=new Set;for(const u of n)if(qr(u)){const{origin:c}=u;i.length===0?a.add(c):(l.add(c),i.push(c))}else{const{origin:c}=u;V(c)&&l.has(c)||i.push(c)}if(o&&i.push(o.caret.origin),xi(n.focus)&&V(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=zr(n.focus.origin,"previous");qr(u)&&a.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(i[i.length-1]);u=mo(u))a.delete(u.origin),i.pop();for(;i.length>1;){const u=i[i.length-1];if(!V(u)||l.has(u)||u.isEmpty()||a.has(u))break;i.pop()}if(i.length===0&&n.isCollapsed()){const u=rn(n.anchor),c=rn(n.anchor.getFlipped()),f=h=>Hn(h)?h.origin:h.getNodeAtCaret(),d=f(u)||f(c)||(n.anchor.getNodeAtCaret()?u.origin:c.origin);i.push(d)}return i}(ny(mh(this),"next"));return xs()||(this._cachedNodes=t),t}setTextNodeRange(e,t,n,i){this.anchor.set(e.__key,t,"text"),this.focus.set(n.__key,i,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],n=e[e.length-1],i=this.anchor,s=this.focus,o=i.isBefore(s),[a,l]=tc(this);let u="",c=!0;for(let f=0;f<e.length;f++){const d=e[f];if(V(d)&&!d.isInline())c||(u+=`
`),c=!d.isEmpty();else if(c=!1,ee(d)){let h=d.getTextContent();d===t?d===n?i.type==="element"&&s.type==="element"&&s.offset!==i.offset||(h=a<l?h.slice(a,l):h.slice(l,a)):h=o?h.slice(a):h.slice(l):d===n&&(h=o?h.slice(0,l):h.slice(0,a)),u+=h}else!Le(d)&&!gi(d)||d===n&&this.isCollapsed()||(u+=d.getTextContent())}return u}applyDOMRange(e){const t=Ve(),n=t.getEditorState()._selection,i=wm(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(i===null)return;const[s,o]=i;this.anchor.set(s.key,s.offset,s.type,!0),this.focus.set(o.key,o.offset,o.type,!0),co(this)}clone(){const e=this.anchor,t=this.focus;return new Cm(or(e.key,e.offset,e.type),or(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=Qa(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=Kn[e];return!!(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),n=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];o===`
`||o===`\r
`?n.push(ki()):o==="	"?n.push(Do()):n.push(Oe(o))}this.insertNodes(n)}insertText(e){const t=this.anchor,n=this.focus,i=this.format,s=this.style;let o=t,a=n;!this.isCollapsed()&&n.isBefore(t)&&(o=n,a=t),o.type==="element"&&function(_,C,v,k){const M=_.getNode(),P=M.getChildAtIndex(_.offset),x=Oe(),O=St(M)?Er().append(x):x;x.setFormat(v),x.setStyle(k),P===null?M.append(O):P.insertBefore(O),_.is(C)&&C.set(x.__key,0,"text"),_.set(x.__key,0,"text")}(o,a,i,s),a.type==="element"&&yo(a,rn(Tn(a,"next")));const l=o.offset;let u=a.offset;const c=this.getNodes(),f=c.length;let d=c[0];ee(d)||se(26);const h=d.getTextContent().length,p=d.getParentOrThrow();let m=c[f-1];if(f===1&&a.type==="element"&&(u=h,a.set(o.key,u,"text")),this.isCollapsed()&&l===h&&(bn(d)||!d.canInsertTextAfter()||!p.canInsertTextAfter()&&d.getNextSibling()===null)){let _=d.getNextSibling();if(ee(_)&&_.canInsertTextBefore()&&!bn(_)||(_=Oe(),_.setFormat(i),_.setStyle(s),p.canInsertTextAfter()?d.insertAfter(_):p.insertAfter(_)),_.select(0,0),d=_,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&l===0&&(bn(d)||!d.canInsertTextBefore()||!p.canInsertTextBefore()&&d.getPreviousSibling()===null)){let _=d.getPreviousSibling();if(ee(_)&&!bn(_)||(_=Oe(),_.setFormat(i),p.canInsertTextBefore()?d.insertBefore(_):p.insertBefore(_)),_.select(),d=_,e!=="")return void this.insertText(e)}else if(d.isSegmented()&&l!==h){const _=Oe(d.getTextContent());_.setFormat(i),d.replace(_),d=_}else if(!this.isCollapsed()&&e!==""){const _=m.getParent();if(!p.canInsertTextBefore()||!p.canInsertTextAfter()||V(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(""),Em(this.anchor,this.focus,null),void this.insertText(e)}if(f===1){if(yi(d)){const k=Oe(e);return k.select(),void d.replace(k)}const _=d.getFormat(),C=d.getStyle();if(l!==u||_===i&&C===s){if(_m(d)){const k=Oe(e);return k.setFormat(i),k.setStyle(s),k.select(),void d.replace(k)}}else{if(d.getTextContent()!==""){const k=Oe(e);if(k.setFormat(i),k.setStyle(s),k.select(),l===0)d.insertBefore(k,!1);else{const[M]=d.splitText(l);M.insertAfter(k,!1)}return void(k.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}d.setFormat(i),d.setStyle(s)}const v=u-l;d=d.spliceText(l,v,e,!0),d.getTextContent()===""?d.remove():this.anchor.type==="text"&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=_,this.style=C))}else{const _=new Set([...d.getParentKeys(),...m.getParentKeys()]),C=V(d)?d:d.getParentOrThrow();let v=V(m)?m:m.getParentOrThrow(),k=m;if(!C.is(v)&&v.isInline())do k=v,v=v.getParentOrThrow();while(v.isInline());if(a.type==="text"&&(u!==0||m.getTextContent()==="")||a.type==="element"&&m.getIndexWithinParent()<u)if(ee(m)&&!yi(m)&&u!==m.getTextContentSize()){if(m.isSegmented()){const N=Oe(m.getTextContent());m.replace(N),m=N}St(a.getNode())||a.type!=="text"||(m=m.spliceText(0,u,"")),_.add(m.__key)}else{const N=m.getParentOrThrow();N.canBeEmpty()||N.getChildrenSize()!==1?m.remove():N.remove()}else _.add(m.__key);const M=v.getChildren(),P=new Set(c),x=C.is(v),O=C.isInline()&&d.getNextSibling()===null?C:d;for(let N=M.length-1;N>=0;N--){const I=M[N];if(I.is(d)||V(I)&&I.isParentOf(d))break;I.isAttached()&&(!P.has(I)||I.is(k)?x||O.insertAfter(I,!1):I.remove())}if(!x){let N=v,I=null;for(;N!==null;){const W=N.getChildren(),w=W.length;(w===0||W[w-1].is(I))&&(_.delete(N.__key),I=N),N=N.getParent()}}if(yi(d))if(l===h)d.select();else{const N=Oe(e);N.select(),d.replace(N)}else d=d.spliceText(l,h-l,e,!0),d.getTextContent()===""?d.remove():d.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let N=1;N<f;N++){const I=c[N],W=I.__key;_.has(W)||I.remove()}}}removeText(){const e=re()===this;Ma(this,u2(mh(this))),e&&re()!==this&&Mt(this)}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void xt(null);const n=this.getNodes(),i=[];for(const M of n)ee(M)&&i.push(M);const s=M=>{n.forEach(P=>{if(V(P)){const x=P.getFormatFlags(e,M);P.setTextFormat(x)}})},o=i.length;if(o===0)return this.toggleFormat(e),xt(null),void s(t);const a=this.anchor,l=this.focus,u=this.isBackward(),c=u?l:a,f=u?a:l;let d=0,h=i[0],p=c.type==="element"?0:c.offset;if(c.type==="text"&&p===h.getTextContentSize()&&(d=1,h=i[1],p=0),h==null)return;const m=h.getFormatFlags(e,t);s(m);const _=o-1;let C=i[_];const v=f.type==="text"?f.offset:C.getTextContentSize();if(h.is(C)){if(p===v)return;if(bn(h)||p===0&&v===h.getTextContentSize())h.setFormat(m);else{const M=h.splitText(p,v),P=p===0?M[0]:M[1];P.setFormat(m),c.type==="text"&&c.set(P.__key,0,"text"),f.type==="text"&&f.set(P.__key,v-p,"text")}return void(this.format=m)}p===0||bn(h)||([,h]=h.splitText(p),p=0),h.setFormat(m);const k=C.getFormatFlags(e,m);v>0&&(v===C.getTextContentSize()||bn(C)||([C]=C.splitText(v)),C.setFormat(k));for(let M=d+1;M<_;M++){const P=i[M],x=P.getFormatFlags(e,k);P.setFormat(x)}c.type==="text"&&c.set(h.__key,p,"text"),f.type==="text"&&f.set(C.__key,v,"text"),this.format=m|k}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const p=re();return G(p)||se(134),p.insertNodes(e)}const t=(this.isBackward()?this.focus:this.anchor).getNode(),n=wu(t,Sr),i=e[e.length-1];if(V(n)&&"__language"in n){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const p=bu(this);n.splice(p,0,e),i.selectEnd()}return}if(!e.some(p=>(V(p)||Le(p))&&!p.isInline())){V(n)||se(211,t.constructor.name,t.getType());const p=bu(this);return n.splice(p,0,e),void i.selectEnd()}const s=function(p){const m=Er();let _=null;for(let C=0;C<p.length;C++){const v=p[C],k=gi(v);if(k||Le(v)&&v.isInline()||V(v)&&v.isInline()||ee(v)||v.isParentRequired()){if(_===null&&(_=v.createParentElementNode(),m.append(_),k))continue;_!==null&&_.append(v)}else m.append(v),_=null}return m}(e),o=s.getLastDescendant(),a=s.getChildren(),l=!V(n)||!n.isEmpty()?this.insertParagraph():null,u=a[a.length-1];let c=a[0];var f;V(f=c)&&Sr(f)&&!f.isEmpty()&&V(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(V(n)||se(211,t.constructor.name,t.getType()),n.append(...c.getChildren()),c=a[1]),c&&(n===null&&se(212,t.constructor.name,t.getType()),function(p,m,_){const C=m.getParentOrThrow().getLastChild();let v=m;const k=[m];for(;v!==C;)v.getNextSibling()||se(140),v=v.getNextSibling(),k.push(v);let M=p;for(const P of k)M=M.insertAfter(P)}(n,c));const d=wu(o,Sr);l&&V(d)&&(l.canMergeWhenEmpty()||Sr(u))&&(d.append(...l.getChildren()),l.remove()),V(n)&&n.isEmpty()&&n.remove(),o.selectEnd();const h=V(n)?n.getLastChild():null;gi(h)&&d!==n&&h.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=Er();return De().splice(this.anchor.offset,0,[o]),o.select(),o}const e=bu(this),t=wu(this.anchor.getNode(),Sr);V(t)||se(213);const n=t.getChildAtIndex(e),i=n?[n,...n.getNextSiblings()]:[],s=t.insertNewAfter(this,!1);return s?(s.append(...i),s.selectStart(),s):null}insertLineBreak(e){const t=ki();if(this.insertNodes([t]),e){const n=t.getParentOrThrow(),i=t.getIndexWithinParent();n.select(i,i)}}extract(){const e=this.getNodes(),t=e.length,n=t-1,i=this.anchor,s=this.focus;let o=e[0],a=e[n];const[l,u]=tc(this);if(t===0)return[];if(t===1){if(ee(o)&&!this.isCollapsed()){const f=l>u?u:l,d=l>u?l:u,h=o.splitText(f,d),p=f===0?h[0]:h[1];return p!=null?[p]:[]}return[o]}const c=i.isBefore(s);if(ee(o)){const f=c?l:u;f===o.getTextContentSize()?e.shift():f!==0&&([,o]=o.splitText(f),e[0]=o)}if(ee(a)){const f=a.getTextContent().length,d=c?u:l;d===0?e.pop():d!==f&&([a]=a.splitText(d),e[n]=a)}return e}modify(e,t,n){if(Xf(this,e,t,n))return;const i=e==="move",s=Ve(),o=Ur(Nr(s));if(!o)return;const a=s._blockCursorElement,l=s._rootElement,u=this.focus.getNode();if(l===null||a===null||!V(u)||u.isInline()||u.canBeEmpty()||ac(a,s,l),this.dirty){let c=ds(s,this.anchor.key),f=ds(s,this.focus.key);this.anchor.type==="text"&&(c=cs(c)),this.focus.type==="text"&&(f=cs(f)),c&&f&&Sm(o,c,this.anchor.offset,f,this.focus.offset)}if(function(c,f,d,h){c.modify(f,d,h)}(o,e,t?"backward":"forward",n),o.rangeCount>0){const c=o.getRangeAt(0),f=this.anchor.getNode(),d=St(f)?f:Kv(f);if(this.applyDOMRange(c),this.dirty=!0,!i){const h=this.getNodes(),p=[];let m=!1;for(let _=0;_<h.length;_++){const C=h[_];oc(C,d)?p.push(C):m=!0}if(m&&p.length>0)if(t){const _=p[0];V(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{const _=p[p.length-1];V(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}o.anchorNode===c.startContainer&&o.anchorOffset===c.startOffset||function(_){const C=_.focus,v=_.anchor,k=v.key,M=v.offset,P=v.type;v.set(C.key,C.offset,C.type,!0),C.set(k,M,P,!0)}(this)}}n==="lineboundary"&&Xf(this,e,t,n,"decorators")}forwardDeletion(e,t,n){if(!n&&(e.type==="element"&&V(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const i=t.getParent(),s=t.getNextSibling()||(i===null?null:i.getNextSibling());if(V(s)&&s.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let i=n.getNode();if(this.forwardDeletion(n,i,e))return;const s=Od(Tn(n,e?"previous":"next"));if(s.getTextSlices().every(a=>a===null||a.distance===0)){let a={type:"initial"};for(const l of s.iterNodeCarets("shadowRoot"))if(qr(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(a.type==="merge-block")break;if(V(s.anchor.origin)&&s.anchor.origin.isEmpty()){const u=rn(l);Ma(this,Gn(u,u)),s.anchor.origin.remove()}return}a.type!=="merge-next-block"&&a.type!=="merge-block"||(a={block:a.block,caret:l,type:"merge-block"})}}else{if(a.type==="merge-block")break;if(xi(l)){if(V(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(s.anchor.origin))break}else a={block:l.origin,type:"merge-next-block"};continue}if(Le(l.origin)){if(!l.origin.isIsolated())if(a.type==="merge-next-block"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&V(s.anchor.origin)&&s.anchor.origin.isEmpty()){s.anchor.origin.remove();const u=xm();u.add(l.origin.getKey()),Mt(u)}else l.origin.remove();return}break}}if(a.type==="merge-block"){const{caret:l,block:u}=a;return Ma(this,Gn(!l.origin.isEmpty()&&u.isEmpty()?Il(ut(u,l.direction)):s.anchor,l)),this.removeText()}}const o=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&n.offset===0&&Wf(this,n.getNode()))return}else{const a=o.type==="text"?o.getNode():null;if(i=n.type==="text"?n.getNode():null,a!==null&&a.isSegmented()){const l=o.offset,u=a.getTextContentSize();if(a.is(i)||e&&l!==u||!e&&l!==0)return void Kf(a,e,l)}else if(i!==null&&i.isSegmented()){const l=n.offset,u=i.getTextContentSize();if(i.is(a)||e&&l!==0||!e&&l!==u)return void Kf(i,e,l)}(function(l,u){const c=l.anchor,f=l.focus,d=c.getNode(),h=f.getNode();if(d===h&&c.type==="text"&&f.type==="text"){const p=c.offset,m=f.offset,_=p<m,C=_?p:m,v=_?m:p,k=v-1;C!==k&&function(M){return!(Hm(M)||Sv(M))}(d.getTextContent().slice(C,v))&&(u?f.set(f.key,k,f.type):c.set(c.key,k,c.type))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&St(n.getParent())&&n.getPreviousSibling()===null&&Wf(this,n)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}};function Wt(r){return r instanceof bm}function Hf(r){const e=r.offset;if(r.type==="text")return e;const t=r.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function tc(r){const e=r.getStartEndPoints();if(e===null)return[0,0];const[t,n]=e;return t.type==="element"&&n.type==="element"&&t.key===n.key&&t.offset===n.offset?[0,0]:[Hf(t),Hf(n)]}function Wf(r,e){for(let t=e;t;t=t.getParent()){if(V(t)){if(t.collapseAtStart(r))return!0;if(dn(t))break}if(t.getPreviousSibling())break}return!1}const Sv=(()=>{try{const r=new RegExp("\\p{Emoji}","u"),e=r.test.bind(r);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch{}return()=>!1})();function Kf(r,e,t){const n=r,i=n.getTextContent().split(/(?=\s)/g),s=i.length;let o=0,a=0;for(let u=0;u<s;u++){const c=u===s-1;if(a=o,o+=i[u].length,e&&o===t||o>t||c){i.splice(u,1),c&&(a=void 0);break}}const l=i.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(a,a))}function Vf(r,e,t,n){let i,s=e;if(je(r)){let o=!1;const a=r.childNodes,l=a.length,u=n._blockCursorElement;s===l&&(o=!0,s=l-1);let c=a[s],f=!1;if(c===u)c=a[s+1],f=!0;else if(u!==null){const d=u.parentNode;r===d&&e>Array.prototype.indexOf.call(d.children,u)&&s--}if(i=Xi(c),ee(i))s=Wn(i,o?"next":"previous");else{let d=Xi(r);if(d===null)return null;if(V(d)){const h=n.getElementByKey(d.getKey());h===null&&se(214),[d,s]=d.getDOMSlot(h).resolveChildIndex(d,h,r,e),V(d)||se(215),o&&s>=d.getChildrenSize()&&(s=Math.max(0,d.getChildrenSize()-1));let m=d.getChildAtIndex(s);if(V(m)&&function(_,C,v){const k=_.getParent();return v===null||k===null||!k.canBeEmpty()||k!==v.getNode()}(m,0,t)){const _=o?m.getLastDescendant():m.getFirstDescendant();_===null?d=m:(m=_,d=V(m)?m:m.getParentOrThrow()),s=0}ee(m)?(i=m,d=null,s=Wn(m,o?"next":"previous")):m!==d&&o&&!f&&(V(d)||se(216),s=Math.min(d.getChildrenSize(),s+1))}else{const h=d.getIndexWithinParent();s=e===0&&Le(d)&&Xi(r)===d?h:h+1,d=d.getParentOrThrow()}if(V(d))return or(d.__key,s,"element")}}else i=Xi(r);return ee(i)?or(i.__key,Wn(i,s,"clamp"),"text"):null}function Jf(r,e,t){const n=r.offset,i=r.getNode();if(n===0){const s=i.getPreviousSibling(),o=i.getParent();if(e){if((t||!e)&&s===null&&V(o)&&o.isInline()){const a=o.getPreviousSibling();ee(a)&&r.set(a.__key,a.getTextContent().length,"text")}}else V(s)&&!t&&s.isInline()?r.set(s.__key,s.getChildrenSize(),"element"):ee(s)&&r.set(s.__key,s.getTextContent().length,"text")}else if(n===i.getTextContent().length){const s=i.getNextSibling(),o=i.getParent();if(e&&V(s)&&s.isInline())r.set(s.__key,0,"element");else if((t||e)&&s===null&&V(o)&&o.isInline()&&!o.canInsertTextAfter()){const a=o.getNextSibling();ee(a)&&r.set(a.__key,0,"text")}}}function Em(r,e,t){if(r.type==="text"&&e.type==="text"){const n=r.isBefore(e),i=r.is(e);Jf(r,n,i),Jf(e,!n,i),i&&e.set(r.key,r.offset,r.type);const s=Ve();if(s.isComposing()&&s._compositionKey!==r.key&&G(t)){const o=t.anchor,a=t.focus;r.set(o.key,o.offset,o.type,!0),e.set(a.key,a.offset,a.type,!0)}}}function wm(r,e,t,n,i,s){if(r===null||t===null||!Oo(i,r,t))return null;const o=Vf(r,e,G(s)?s.anchor:null,i);if(o===null)return null;const a=Vf(t,n,G(s)?s.focus:null,i);if(a===null)return null;if(o.type==="element"&&a.type==="element"){const l=Xi(r),u=Xi(t);if(Le(l)&&Le(u))return null}return Em(o,a,s),[o,a]}function rc(r){return V(r)&&!r.isInline()}function km(r,e,t,n,i,s){const o=ni(),a=new No(or(r,e,i),or(t,n,s),0,"");return a.dirty=!0,o._selection=a,a}function Mo(){const r=or("root",0,"element"),e=or("root",0,"element");return new No(r,e,0,"")}function xm(){return new bm(new Set)}function hd(r,e,t,n){const i=t._window;if(i===null)return null;const s=n||i.event,o=s?s.type:void 0,a=o==="selectionchange",l=!zu&&(a||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&s&&s.detail===3||o==="drop"||o===void 0);let u,c,f,d;if(G(r)&&!l)return r.clone();if(e===null)return null;if(u=e.anchorNode,c=e.focusNode,f=e.anchorOffset,d=e.focusOffset,a&&G(r)&&!Oo(t,u,c))return r.clone();const h=wm(u,f,c,d,t,r);if(h===null)return null;const[p,m]=h;return new No(p,m,G(r)?r.format:0,G(r)?r.style:"")}function re(){return ni()._selection}function ks(){return Ve()._editorState._selection}function Ya(r,e,t,n=1){const i=r.anchor,s=r.focus,o=i.getNode(),a=s.getNode();if(!e.is(o)&&!e.is(a))return;const l=e.__key;if(r.isCollapsed()){const u=i.offset;if(t<=u&&n>0||t<u&&n<0){const c=Math.max(0,u+n);i.set(l,c,"element"),s.set(l,c,"element"),Gf(r)}}else{const u=r.isBackward(),c=u?s:i,f=c.getNode(),d=u?i:s,h=d.getNode();if(e.is(f)){const p=c.offset;(t<=p&&n>0||t<p&&n<0)&&c.set(l,Math.max(0,p+n),"element")}if(e.is(h)){const p=d.offset;(t<=p&&n>0||t<p&&n<0)&&d.set(l,Math.max(0,p+n),"element")}}Gf(r)}function Gf(r){const e=r.anchor,t=e.offset,n=r.focus,i=n.offset,s=e.getNode(),o=n.getNode();if(r.isCollapsed()){if(!V(s))return;const a=s.getChildrenSize(),l=t>=a,u=l?s.getChildAtIndex(a-1):s.getChildAtIndex(t);if(ee(u)){let c=0;l&&(c=u.getTextContentSize()),e.set(u.__key,c,"text"),n.set(u.__key,c,"text")}}else{if(V(s)){const a=s.getChildrenSize(),l=t>=a,u=l?s.getChildAtIndex(a-1):s.getChildAtIndex(t);if(ee(u)){let c=0;l&&(c=u.getTextContentSize()),e.set(u.__key,c,"text")}}if(V(o)){const a=o.getChildrenSize(),l=i>=a,u=l?o.getChildAtIndex(a-1):o.getChildAtIndex(i);if(ee(u)){let c=0;l&&(c=u.getTextContentSize()),n.set(u.__key,c,"text")}}}}function Xa(r,e,t,n,i){let s=null,o=0,a=null;n!==null?(s=n.__key,ee(n)?(o=n.getTextContentSize(),a="text"):V(n)&&(o=n.getChildrenSize(),a="element")):i!==null&&(s=i.__key,ee(i)?a="text":V(i)&&(a="element")),s!==null&&a!==null?r.set(s,o,a):(o=e.getIndexWithinParent(),o===-1&&(o=t.getChildrenSize()),r.set(t.__key,o,"element"))}function Yf(r,e,t,n,i){r.type==="text"?r.set(t,r.offset+(e?0:i),"text"):r.offset>n.getIndexWithinParent()&&r.set(r.key,r.offset-1,"element")}function Sm(r,e,t,n,i){try{r.setBaseAndExtent(e,t,n,i)}catch{}}function Tv(r,e,t,n,i,s,o){const a=n.anchorNode,l=n.focusNode,u=n.anchorOffset,c=n.focusOffset,f=document.activeElement;if(i.has(Iv)&&f!==s||f!==null&&Cd(f))return;if(!G(e))return void(r!==null&&Oo(t,a,l)&&n.removeAllRanges());const d=e.anchor,h=e.focus,p=d.key,m=h.key,_=ds(t,p),C=ds(t,m),v=d.offset,k=h.offset,M=e.format,P=e.style,x=e.isCollapsed();let O=_,N=C,I=!1;if(d.type==="text"){O=cs(_);const A=d.getNode();I=A.getFormat()!==M||A.getStyle()!==P}else G(r)&&r.anchor.type==="text"&&(I=!0);var W,w,q,S,K;if(h.type==="text"&&(N=cs(C)),O!==null&&N!==null&&(x&&(r===null||I||G(r)&&(r.format!==M||r.style!==P))&&(W=M,w=P,q=v,S=p,K=performance.now(),lm=[W,w,q,S,K]),u!==v||c!==k||a!==O||l!==N||n.type==="Range"&&x||(f!==null&&s.contains(f)||s.focus({preventScroll:!0}),d.type==="element"))){if(Sm(n,O,v,N,k),!i.has(Rv)&&e.isCollapsed()&&s!==null&&s===document.activeElement){const A=G(e)&&e.anchor.type==="element"?O.childNodes[v]||null:n.rangeCount>0?n.getRangeAt(0):null;if(A!==null){let L;if(A instanceof Text){const j=document.createRange();j.selectNode(A),L=j.getBoundingClientRect()}else L=A.getBoundingClientRect();(function(j,H,J){const z=Gm(J),Q=Td(z);if(z===null||Q===null)return;let{top:ie,bottom:te}=H,Z=0,Y=0,oe=J;for(;oe!==null;){const ue=oe===z.body;if(ue)Z=0,Y=Nr(j).innerHeight;else{const pe=oe.getBoundingClientRect();Z=pe.top,Y=pe.bottom}let de=0;if(ie<Z?de=-(Z-ie):te>Y&&(de=te-Y),de!==0)if(ue)Q.scrollBy(0,de);else{const pe=oe.scrollTop;oe.scrollTop+=de;const ge=oe.scrollTop-pe;ie-=ge,te-=ge}if(ue)break;oe=Io(oe)}})(t,L,s)}}Qu=!0}}function Av(r){let e=re()||ks();e===null&&(e=De().selectEnd()),e.insertNodes(r)}function bu(r){let e=r;r.isCollapsed()||e.removeText();const t=re();G(t)&&(e=t),G(e)||se(161);const n=e.anchor;let i=n.getNode(),s=n.offset;for(;!Sr(i);){const o=i;if([i,s]=Dv(i,s),o.is(i))break}return s}function Dv(r,e){const t=r.getParent();if(!t){const i=Er();return De().append(i),i.select(),[De(),0]}if(ee(r)){const i=r.splitText(e);if(i.length===0)return[t,r.getIndexWithinParent()];const s=e===0?0:1;return[t,i[0].getIndexWithinParent()+s]}if(!V(r)||e===0)return[t,r.getIndexWithinParent()];const n=r.getChildAtIndex(e);if(n){const i=new No(or(r.__key,e,"element"),or(r.__key,e,"element"),0,""),s=r.insertNewAfter(i);s&&s.append(n,...n.getNextSiblings())}return[t,r.getIndexWithinParent()+1]}function Xf(r,e,t,n,i="decorators-and-blocks"){if(e==="move"&&n==="character"&&!r.isCollapsed()){const[c,f]=t===r.isBackward()?[r.focus,r.anchor]:[r.anchor,r.focus];return f.set(c.key,c.offset,c.type),!0}const s=Tn(r.focus,t?"previous":"next"),o=n==="lineboundary",a=e==="move";let l=s,u=i==="decorators-and-blocks";if(!ry(l)){for(const c of l){u=!1;const{origin:f}=c;if(!Le(f)||f.isIsolated()||(l=c,!o||!f.isInline()))break}if(u)for(const c of Od(s).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(qr(c))c.origin.isInline()||(l=c);else{if(V(c.origin))continue;Le(c.origin)&&!c.origin.isInline()&&(l=c)}break}}if(l===s)return!1;if(a&&!o&&Le(l.origin)&&l.origin.isKeyboardSelectable()){const c=xm();return c.add(l.origin.getKey()),Mt(c),!0}return l=rn(l),a&&yo(r.anchor,l),yo(r.focus,l),u||!o}let mt=null,yt=null,sr=!1,vu=!1,Aa=0;const Qf={characterData:!0,childList:!0,subtree:!0};function xs(){return sr||mt!==null&&mt._readOnly}function kt(){sr&&se(13)}function Tm(){Aa>99&&se(14)}function ni(){return mt===null&&se(195,Am()),mt}function Ve(){return yt===null&&se(196,Am()),yt}function Am(){let r=0;const e=new Set,t=Tl.version;if(typeof window<"u")for(const i of document.querySelectorAll("[contenteditable]")){const s=Al(i);if(Ed(s))r++;else if(s){let o=String(s.constructor.version||"<0.17.1");o===t&&(o+=" (separately built, likely a bundler configuration issue)"),e.add(o)}}let n=` Detected on the page: ${r} compatible editor(s) with version ${t}`;return e.size&&(n+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),n}function Nv(){return yt}function Zf(r,e,t){const n=e.__type,i=Bm(r,n);let s=t.get(n);s===void 0&&(s=Array.from(i.transforms),t.set(n,s));const o=s.length;for(let a=0;a<o&&(s[a](e),e.isAttached());a++);}function eh(r,e){return r!==void 0&&r.__key!==e&&r.isAttached()}function Dm(r,e){if(!e)return;const t=r._updateTags;let n=e;Array.isArray(e)||(n=[e]);for(const i of n)t.add(i)}function Nm(r){return pd(r,Ve()._nodes)}function pd(r,e){const t=r.type,n=e.get(t);n===void 0&&se(17,t);const i=n.klass;r.type!==i.getType()&&se(18,i.name);const s=i.importJSON(r),o=r.children;if(V(s)&&Array.isArray(o))for(let a=0;a<o.length;a++){const l=pd(o[a],e);s.append(l)}return s}function th(r,e,t){const n=mt,i=sr,s=yt;mt=e,sr=!0,yt=r;try{return t()}finally{mt=n,sr=i,yt=s}}function Cn(r,e){const t=r._pendingEditorState,n=r._rootElement,i=r._headless||n===null;if(t===null)return;const s=r._editorState,o=s._selection,a=t._selection,l=r._dirtyType!==Ei,u=mt,c=sr,f=yt,d=r._updating,h=r._observer;let p=null;if(r._pendingEditorState=null,r._editorState=t,!i&&l&&h!==null){yt=r,mt=t,sr=!1,r._updating=!0;try{const x=r._dirtyType,O=r._dirtyElements,N=r._dirtyLeaves;h.disconnect(),p=av(s,t,r,x,O,N)}catch(x){if(x instanceof Error&&r._onError(x),vu)throw x;return $m(r,null,n,t),Wg(r),r._dirtyType=ss,vu=!0,Cn(r,s),void(vu=!1)}finally{h.observe(n,Qf),r._updating=d,mt=u,sr=c,yt=f}}t._readOnly||(t._readOnly=!0);const m=r._dirtyLeaves,_=r._dirtyElements,C=r._normalizedNodes,v=r._updateTags,k=r._deferred;l&&(r._dirtyType=Ei,r._cloneNotNeeded.clear(),r._dirtyLeaves=new Set,r._dirtyElements=new Map,r._normalizedNodes=new Set,r._updateTags=new Set),function(x,O){const N=x._decorators;let I=x._pendingDecorators||N;const W=O._nodeMap;let w;for(w in I)W.has(w)||(I===N&&(I=Um(x)),delete I[w])}(r,t);const M=i?null:Ur(Nr(r));if(r._editable&&M!==null&&(l||a===null||a.dirty)&&n!==null&&!v.has(Lv)){yt=r,mt=t;try{if(h!==null&&h.disconnect(),l||a===null||a.dirty){const x=r._blockCursorElement;x!==null&&ac(x,r,n),Tv(o,a,r,M,v,n)}(function(x,O,N){let I=x._blockCursorElement;if(G(N)&&N.isCollapsed()&&N.anchor.type==="element"&&O.contains(document.activeElement)){const W=N.anchor,w=W.getNode(),q=W.offset;let S=!1,K=null;if(q===w.getChildrenSize())Eu(w.getChildAtIndex(q-1))&&(S=!0);else{const A=w.getChildAtIndex(q);if(A!==null&&Eu(A)){const L=A.getPreviousSibling();(L===null||Eu(L))&&(S=!0,K=x.getElementByKey(A.__key))}}if(S){const A=x.getElementByKey(w.__key);return I===null&&(x._blockCursorElement=I=function(L){const j=L.theme,H=document.createElement("div");H.contentEditable="false",H.setAttribute("data-lexical-cursor","true");let J=j.blockCursor;if(J!==void 0){if(typeof J=="string"){const z=ja(J);J=j.blockCursor=z}J!==void 0&&H.classList.add(...J)}return H}(x._config)),O.style.caretColor="transparent",void(K===null?A.appendChild(I):A.insertBefore(I,K))}}I!==null&&ac(I,x,O)})(r,n,a)}finally{h!==null&&h.observe(n,Qf),yt=f,mt=u}}p!==null&&function(x,O,N,I,W){const w=Array.from(x._listeners.mutation),q=w.length;for(let S=0;S<q;S++){const[K,A]=w[S];for(const L of A){const j=O.get(L);j!==void 0&&K(j,{dirtyLeaves:I,prevEditorState:W,updateTags:N})}}}(r,p,v,m,s),G(a)||a===null||o!==null&&o.is(a)||r.dispatchCommand(vs,void 0);const P=r._pendingDecorators;P!==null&&(r._decorators=P,r._pendingDecorators=null,so("decorator",r,!0,P)),function(x,O,N){const I=oh(O),W=oh(N);I!==W&&so("textcontent",x,!0,W)}(r,e||s,t),so("update",r,!0,{dirtyElements:_,dirtyLeaves:m,editorState:t,mutatedNodes:p,normalizedNodes:C,prevEditorState:e||s,tags:v}),function(x,O){if(x._deferred=[],O.length!==0){const N=x._updating;x._updating=!0;try{for(let I=0;I<O.length;I++)O[I]()}finally{x._updating=N}}}(r,k),function(x){const O=x._updates;if(O.length!==0){const N=O.shift();if(N){const[I,W]=N;xl(x,I,W)}}}(r)}function so(r,e,t,...n){const i=e._updating;e._updating=t;try{const s=Array.from(e._listeners[r]);for(let o=0;o<s.length;o++)s[o].apply(null,n)}finally{e._updating=i}}function rh(r,e){const t=r._updates;let n=e||!1;for(;t.length!==0;){const i=t.shift();if(i){const[s,o]=i,a=r._pendingEditorState;let l;o!==void 0&&(l=o.onUpdate,o.skipTransforms&&(n=!0),o.discrete&&(a===null&&se(191),a._flushSync=!0),l&&r._deferred.push(l),Dm(r,o.tag)),a==null?xl(r,s,o):s()}}return n}function xl(r,e,t){const n=r._updateTags;let i,s=!1,o=!1;t!==void 0&&(i=t.onUpdate,Dm(r,t.tag),s=t.skipTransforms||!1,o=t.discrete||!1),i&&r._deferred.push(i);const a=r._editorState;let l=r._pendingEditorState,u=!1;(l===null||l._readOnly)&&(l=r._pendingEditorState=Om(l||a),u=!0),l._flushSync=o;const c=mt,f=sr,d=yt,h=r._updating;mt=l,sr=!1,r._updating=!0,yt=r;const p=r._headless||r.getRootElement()===null;bd(null);try{u&&(p?a._selection!==null&&(l._selection=a._selection.clone()):l._selection=function(v,k){const M=v.getEditorState()._selection,P=Ur(Nr(v));return G(M)||M==null?hd(M,P,v,k):M.clone()}(r,t&&t.event||null));const _=r._compositionKey;e(),s=rh(r,s),function(v,k){const M=k.getEditorState()._selection,P=v._selection;if(G(P)){const x=P.anchor,O=P.focus;let N;if(x.type==="text"&&(N=x.getNode(),N.selectionTransform(M,P)),O.type==="text"){const I=O.getNode();N!==I&&I.selectionTransform(M,P)}}}(l,r),r._dirtyType!==Ei&&(s?function(v,k){const M=k._dirtyLeaves,P=v._nodeMap;for(const x of M){const O=P.get(x);ee(O)&&O.isAttached()&&O.isSimpleText()&&!O.isUnmergeable()&&Of(O)}}(l,r):function(v,k){const M=k._dirtyLeaves,P=k._dirtyElements,x=v._nodeMap,O=qn(),N=new Map;let I=M,W=I.size,w=P,q=w.size;for(;W>0||q>0;){if(W>0){k._dirtyLeaves=new Set;for(const S of I){const K=x.get(S);ee(K)&&K.isAttached()&&K.isSimpleText()&&!K.isUnmergeable()&&Of(K),K!==void 0&&eh(K,O)&&Zf(k,K,N),M.add(S)}if(I=k._dirtyLeaves,W=I.size,W>0){Aa++;continue}}k._dirtyLeaves=new Set,k._dirtyElements=new Map,w.delete("root")&&w.set("root",!0);for(const S of w){const K=S[0],A=S[1];if(P.set(K,A),!A)continue;const L=x.get(K);L!==void 0&&eh(L,O)&&Zf(k,L,N)}I=k._dirtyLeaves,W=I.size,w=k._dirtyElements,q=w.size,Aa++}k._dirtyLeaves=M,k._dirtyElements=P}(l,r),rh(r),function(v,k,M,P){const x=v._nodeMap,O=k._nodeMap,N=[];for(const[I]of P){const W=O.get(I);W!==void 0&&(W.isAttached()||(V(W)&&Ug(W,I,x,O,N,P),x.has(I)||P.delete(I),N.push(I)))}for(const I of N)O.delete(I);for(const I of M){const W=O.get(I);W===void 0||W.isAttached()||(x.has(I)||M.delete(I),O.delete(I))}}(a,l,r._dirtyLeaves,r._dirtyElements)),_!==r._compositionKey&&(l._flushSync=!0);const C=l._selection;if(G(C)){const v=l._nodeMap,k=C.anchor.key,M=C.focus.key;v.get(k)!==void 0&&v.get(M)!==void 0||se(19)}else Wt(C)&&C._nodes.size===0&&(l._selection=null)}catch(_){return _ instanceof Error&&r._onError(_),r._pendingEditorState=a,r._dirtyType=ss,r._cloneNotNeeded.clear(),r._dirtyLeaves=new Set,r._dirtyElements.clear(),void Cn(r)}finally{mt=c,sr=f,yt=d,r._updating=h,Aa=0}r._dirtyType!==Ei||r._deferred.length>0||function(_,C){const v=C.getEditorState()._selection,k=_._selection;if(k!==null){if(k.dirty||!k.is(v))return!0}else if(v!==null)return!0;return!1}(l,r)?l._flushSync?(l._flushSync=!1,Cn(r)):u&&Bv(()=>{Cn(r)}):(l._flushSync=!1,u&&(n.clear(),r._deferred=[],r._pendingEditorState=null))}function vr(r,e,t){yt===r&&t===void 0?e():xl(r,e,t)}let Mv=class Da{constructor(e,t,n){this.element=e,this.before=t||null,this.after=n||null}withBefore(e){return new Da(this.element,e,this.after)}withAfter(e){return new Da(this.element,this.before,e)}withElement(e){return this.element===e?this:new Da(e,this.before,this.after)}insertChild(e){const t=this.before||this.getManagedLineBreak();return t!==null&&t.parentElement!==this.element&&se(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&se(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&se(224),this.element.replaceChild(e,t),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const t=e==="decorator"&&(is||uo);this.insertManagedLineBreak(t)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const t=this.element,n=e.nodeName==="IMG"?e.nextSibling:null;n&&t.removeChild(n),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const t=this.getManagedLineBreak();if(t){if(e===(t.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,i=this.before,s=document.createElement("br");if(n.insertBefore(s,i),e){const o=document.createElement("img");o.setAttribute("data-lexical-linebreak","true"),o.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",o.alt="",n.insertBefore(o,s),n.__lexicalLineBreak=o}else n.__lexicalLineBreak=s}getFirstChildOffset(){let e=0;for(let t=this.after;t!==null;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,n,i){if(n===this.element){const l=this.getFirstChildOffset();return[e,Math.min(l+e.getChildrenSize(),Math.max(l,i))]}const s=nh(t,n);s.push(i);const o=nh(t,this.element);let a=e.getIndexWithinParent();for(let l=0;l<o.length;l++){const u=s[l],c=o[l];if(u===void 0||u<c)break;if(u>c){a+=1;break}}return[e.getParentOrThrow(),a]}};function nh(r,e){const t=[];let n=e;for(;n!==r&&n!==null;n=n.parentNode){let i=0;for(let s=n.previousSibling;s!==null;s=s.previousSibling)i++;t.push(i)}return n!==r&&se(225),t.reverse()}let qt=class extends ws{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return V0[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=Ve()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return t!==null&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;t!==null;){if(ee(t)&&e.push(t),V(t)){const n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;V(e);){const t=e.getFirstChild();if(t===null)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;V(e);){const t=e.getLastChild();if(t===null)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),n=t.length;if(e>=n){const s=t[n-1];return V(s)&&s.getLastDescendant()||s||null}const i=t[e];return V(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:Ae(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&se(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:Ae(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&se(96,this.__key),e}getChildAtIndex(e){const t=this.getChildrenSize();let n,i;if(e<t/2){for(n=this.getFirstChild(),i=0;n!==null&&i<=e;){if(i===e)return n;n=n.getNextSibling(),i++}return null}for(n=this.getLastChild(),i=t-1;n!==null&&i>=e;){if(i===e)return n;n=n.getPreviousSibling(),i--}return null}getTextContent(){let e="";const t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){const s=t[i];e+=s.getTextContent(),V(s)&&i!==n-1&&!s.isInline()&&(e+=Sn)}return e}getTextContentSize(){let e=0;const t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){const s=t[i];e+=s.getTextContentSize(),V(s)&&i!==n-1&&!s.isInline()&&(e+=Sn.length)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==""){const t=kf[e];return!!(this.getFormat()&t)}return!1}hasTextFormat(e){const t=Kn[e];return!!(this.getTextFormat()&t)}getFormatFlags(e,t){return Qa(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){kt();const n=re();let i=e,s=t;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&t===0){const l=this.getFirstChild();if(ee(l)||V(l))return l.select(0,0)}else if(!(e!==void 0&&e!==o||t!==void 0&&t!==o)){const l=this.getLastChild();if(ee(l)||V(l))return l.select()}}i===void 0&&(i=o),s===void 0&&(s=o);const a=this.__key;return G(n)?(n.anchor.set(a,i,"element"),n.focus.set(a,s,"element"),n.dirty=!0,n):km(a,i,a,s,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(t=>t.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=e!==""?kf[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){const t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){const i=n.length,s=this.getChildrenSize(),o=this.getWritable();e+t<=s||se(226,String(e),String(t),String(s));const a=o.__key,l=[],u=[],c=this.getChildAtIndex(e+t);let f=null,d=s-t+i;if(e!==0)if(e===s)f=this.getLastChild();else{const p=this.getChildAtIndex(e);p!==null&&(f=p.getPreviousSibling())}if(t>0){let p=f===null?this.getFirstChild():f.getNextSibling();for(let m=0;m<t;m++){p===null&&se(100);const _=p.getNextSibling(),C=p.__key;_i(p.getWritable()),u.push(C),p=_}}let h=f;for(let p=0;p<i;p++){const m=n[p];h!==null&&m.is(h)&&(f=h=h.getPreviousSibling());const _=m.getWritable();_.__parent===a&&d--,_i(_);const C=m.__key;if(h===null)o.__first=C,_.__prev=null;else{const v=h.getWritable();v.__next=C,_.__prev=v.__key}m.__key===a&&se(76),_.__parent=a,l.push(C),h=m}if(e+t===s)h!==null&&(h.getWritable().__next=null,o.__last=h.__key);else if(c!==null){const p=c.getWritable();if(h!==null){const m=h.getWritable();p.__prev=h.__key,m.__next=c.__key}else p.__prev=null}if(o.__size=d,u.length){const p=re();if(G(p)){const m=new Set(u),_=new Set(l),{anchor:C,focus:v}=p;ih(C,m,_)&&Xa(C,C.getNode(),this,f,c),ih(v,m,_)&&Xa(v,v.getNode(),this,f,c),d!==0||this.canBeEmpty()||dn(this)||this.remove()}}return o}getDOMSlot(e){return new Mv(e)}exportDOM(e){const{element:t}=super.exportDOM(e);if(je(t)){const n=this.getIndent();n>0&&(t.style.paddingInlineStart=40*n+"px");const i=this.getDirection();i&&(t.dir=i)}return{element:t}}exportJSON(){const e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),n=this.getTextStyle();return t!==0&&(e.textFormat=t),n!==""&&(e.textStyle=n),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){const n=this.getDOMSlot(e);let i=n.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){const o=t.getElementByKey(s.getKey());o!==null&&(i==null?(n.insertChild(o),i=o):i!==o&&n.replaceChild(o,i),i=i.nextSibling)}}};function V(r){return r instanceof qt}function ih(r,e,t){let n=r.getNode();for(;n;){const i=n.__key;if(e.has(i)&&!t.has(i))return!0;n=n.getParent()}return!1}let Li=class extends ws{decorate(e,t){se(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function Le(r){return r instanceof Li}let gd=class Mm extends qt{static getType(){return"root"}static clone(){return new Mm}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){se(51)}getTextContent(){const e=this.__cachedText;return!xs()&&Ve()._dirtyType!==Ei||e===null?super.getTextContent():e}remove(){se(52)}replace(e){se(53)}insertBefore(e){se(54)}insertAfter(e){se(55)}updateDOM(e,t){return!1}splice(e,t,n){for(const i of n)V(i)||Le(i)||se(282);return super.splice(e,t,n)}static importJSON(e){return De().updateFromJSON(e)}collapseAtStart(){return!0}};function St(r){return r instanceof gd}function Om(r){return new Rm(new Map(r._nodeMap))}function md(){return new Rm(new Map([["root",new gd]]))}function Im(r){const e=r.exportJSON(),t=r.constructor;if(e.type!==t.getType()&&se(130,t.name),V(r)){const n=e.children;Array.isArray(n)||se(59,t.name);const i=r.getChildren();for(let s=0;s<i.length;s++){const o=Im(i[s]);n.push(o)}}return e}let Rm=class Lm{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,t){return th(t&&t.editor||null,this,e)}clone(e){const t=new Lm(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return th(null,this,()=>({root:Im(De())}))}};const nc="historic",Ov="history-push",mi="history-merge",Pm="paste",Iv="collaboration",Rv="skip-scroll-into-view",Lv="skip-dom-selection";let yd=class extends qt{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}},Ss=class Fm extends qt{static getType(){return"paragraph"}static clone(e){return new Fm(e.__key)}createDOM(e){const t=document.createElement("p"),n=es(e.theme,"paragraph");return n!==void 0&&t.classList.add(...n),t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:Pv,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(je(t)){this.isEmpty()&&t.append(document.createElement("br"));const n=this.getFormatType();n&&(t.style.textAlign=n)}return{element:t}}static importJSON(e){return Er().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,t){const n=Er();n.setTextFormat(e.format),n.setTextStyle(e.style);const i=this.getDirection();return n.setDirection(i),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,t),n}collapseAtStart(){const e=this.getChildren();if(e.length===0||ee(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}};function Pv(r){const e=Er();return r.style&&(e.setFormat(r.style.textAlign),Yv(r,e)),{node:e}}function Er(){return We(new Ss)}function _d(r){return r instanceof Ss}const ye=0,Ts=1,Na=2,Sl=3,oo=4;function $m(r,e,t,n){const i=r._keyToDOMMap;i.clear(),r._editorState=md(),r._pendingEditorState=n,r._compositionKey=null,r._dirtyType=Ei,r._cloneNotNeeded.clear(),r._dirtyLeaves=new Set,r._dirtyElements.clear(),r._normalizedNodes=new Set,r._updateTags=new Set,r._updates=[],r._blockCursorElement=null;const s=r._observer;s!==null&&(s.disconnect(),r._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",i.set("root",t))}function Fv(r){const e=r||{},t=Nv(),n=e.theme||{},i=r===void 0?t:e.parentEditor||null,s=e.disableEvents||!1,o=md(),a=e.namespace||(i!==null?i._config.namespace:Wm()),l=e.editorState,u=[gd,Jt,Ao,fd,Ss,yd,...e.nodes||[]],{onError:c,html:f}=e,d=e.editable===void 0||e.editable;let h;if(r===void 0&&t!==null)h=t._nodes;else{h=new Map;for(let m=0;m<u.length;m++){let _=u[m],C=null,v=null;if(typeof _!="function"){const O=_;_=O.replace,C=O.with,v=O.withKlass||null}const{ownNodeConfig:k}=Dd(_),M=_.getType(),P=_.transform(),x=new Set;k&&k.$transform&&x.add(k.$transform),P!==null&&x.add(P),h.set(M,{exportDOM:f&&f.export?f.export.get(_):void 0,klass:_,replace:C,replaceWithKlass:v,sharedNodeState:rv(u[m]),transforms:x})}}const p=new Tl(o,i,h,{disableEvents:s,namespace:a,theme:n},c||console.error,function(m,_){const C=new Map,v=new Set,k=M=>{Object.keys(M).forEach(P=>{let x=C.get(P);x===void 0&&(x=[],C.set(P,x)),x.push(M[P])})};return m.forEach(M=>{const P=M.klass.importDOM;if(P==null||v.has(P))return;v.add(P);const x=P.call(M.klass);x!==null&&k(x)}),_&&k(_),C}(h,f?f.import:void 0),d,r);return l!==void 0&&(p._pendingEditorState=l,p._dirtyType=ss),p}let Tl=class{constructor(e,t,n,i,s,o,a,l){this._createEditorArgs=l,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Ei,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Wm(),this._onError=s,this._htmlConversions=o,this._editable=a,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){n===void 0&&se(35);const i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);const s=i.get(e);s===void 0&&se(36,String(e));const o=s[n];return o.add(t),()=>{o.delete(t),s.every(a=>a.size===0)&&i.delete(e)}}registerMutationListener(e,t,n){const i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,s=this._listeners.mutation;let o=s.get(t);o===void 0&&(o=new Set,s.set(t,o)),o.add(i);const a=n&&n.skipInitialization;return a!==void 0&&a||this.initializeMutationListener(t,i),()=>{o.delete(i),o.size===0&&s.delete(t)}}getRegisteredNode(e){const t=this._nodes.get(e.getType());return t===void 0&&se(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){const n=this._editorState,i=hh(n).get(t.getType());if(!i)return;const s=new Map;for(const o of i.keys())s.set(o,"created");s.size>0&&e(s,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){const n=this.getRegisteredNode(e);return n.transforms.add(t),n}registerNodeTransform(e,t){const n=this.registerNodeTransformToKlass(e,t),i=[n],s=n.replaceWithKlass;if(s!=null){const o=this.registerNodeTransformToKlass(s,t);i.push(o)}return function(o,a){const l=hh(o.getEditorState()),u=[];for(const c of a){const f=l.get(c);f&&u.push(f)}u.length!==0&&o.update(()=>{for(const c of u)for(const f of c.keys()){const d=Ae(f);d&&d.markDirty()}},o._pendingEditorState===null?{tag:mi}:void 0)}(this,i.map(o=>o.klass.getType())),()=>{i.forEach(o=>o.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return ce(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const n=es(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,$m(this,t,e,i),t!==null&&(this._config.disableEvents||_v(t),n!=null&&t.classList.remove(...n)),e!==null){const s=Td(e),o=e.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=s,this._dirtyType=ss,Wg(this),this._updateTags.add(mi),Cn(this),this._config.disableEvents||function(a,l){const u=a.ownerDocument,c=Ga.get(u);(c===void 0||c<1)&&u.addEventListener("selectionchange",hm),Ga.set(u,(c||0)+1),a.__lexicalEditor=l;const f=fm(a);for(let d=0;d<Xu.length;d++){const[h,p]=Xu[d],m=typeof p=="function"?_=>{Bf(_)||($f(_),(l.isEditable()||h==="click")&&p(_,l))}:_=>{if(Bf(_))return;$f(_);const C=l.isEditable();switch(h){case"cut":return C&&ce(l,Es,_);case"copy":return ce(l,Ri,_);case"paste":return C&&ce(l,Ii,_);case"dragstart":return C&&ce(l,ud,_);case"dragover":return C&&ce(l,im,_);case"dragend":return C&&ce(l,pv,_);case"focus":return C&&ce(l,gv,_);case"blur":return C&&ce(l,mv,_);case"drop":return C&&ce(l,kl,_)}};a.addEventListener(h,m),f.push(()=>{a.removeEventListener(h,m)})}}(e,this),n!=null&&e.classList.add(...n)}else this._window=null,this._updateTags.add(mi),Cn(this);so("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&se(38);let n=e;n._readOnly&&(n=Om(e),n._selection=e._selection?e._selection.clone():null),Hg(this);const i=this._pendingEditorState,s=this._updateTags,o=t!==void 0?t.tag:null;i===null||i.isEmpty()||(o!=null&&s.add(o),Cn(this)),this._pendingEditorState=n,this._dirtyType=ss,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&s.add(o),this._updating||Cn(this)}parseEditorState(e,t){return function(n,i,s){const o=md(),a=mt,l=sr,u=yt,c=i._dirtyElements,f=i._dirtyLeaves,d=i._cloneNotNeeded,h=i._dirtyType;i._dirtyElements=new Map,i._dirtyLeaves=new Set,i._cloneNotNeeded=new Set,i._dirtyType=0,mt=o,sr=!1,yt=i,bd(null);try{const p=i._nodes;pd(n.root,p),s&&s(),o._readOnly=!0}catch(p){p instanceof Error&&i._onError(p)}finally{i._dirtyElements=c,i._dirtyLeaves=f,i._cloneNotNeeded=d,i._dirtyType=h,mt=a,sr=l,yt=u}return o}(typeof e=="string"?JSON.parse(e):e,this,t)}read(e){return Cn(this),this.getEditorState().read(e,{editor:this})}update(e,t){(function(n,i,s){n._updating?n._updates.push([i,s]):xl(n,i,s)})(this,e,t)}focus(e,t={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),vr(this,()=>{const i=re(),s=De();i!==null?i.dirty||Mt(i.clone()):s.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?s.selectStart():s.selectEnd()),Ym("focus"),Hv(()=>{n.removeAttribute("autocapitalize"),e&&e()})}),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=Ur(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,so("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}};Tl.version="0.34.0+prod.esm";let ic=null;function bd(r){ic=r}let $v=1;function Bm(r,e){const t=vd(r,e);return t===void 0&&se(30,e),t}function vd(r,e){return r._nodes.get(e)}const Bv=typeof queueMicrotask=="function"?queueMicrotask:r=>{Promise.resolve().then(r)};function sh(r){return Le(Jn(r))}function Cd(r){const e=document.activeElement;if(!je(e))return!1;const t=e.nodeName;return Le(Jn(r))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&Al(e)==null)}function Oo(r,e,t){const n=r.getRootElement();try{return n!==null&&n.contains(e)&&n.contains(t)&&e!==null&&!Cd(e)&&qm(e)===r}catch{return!1}}function Ed(r){return r instanceof Tl}function qm(r){let e=r;for(;e!=null;){const t=Al(e);if(Ed(t))return t;e=Io(e)}return null}function Al(r){return r?r.__lexicalEditor:null}function yi(r){return _m(r)||r.isToken()}function bn(r){return yi(r)||r.isSegmented()}function Nn(r){return Pi(r)&&r.nodeType===P0}function qv(r){return Pi(r)&&r.nodeType===F0}function cs(r){let e=r;for(;e!=null;){if(Nn(e))return e;e=e.firstChild}return null}function Qa(r,e,t){const n=Kn[e];if(t!==null&&(r&n)==(t&n))return r;let i=r^n;return e==="subscript"?i&=-65:e==="superscript"?i&=-33:e==="lowercase"?(i&=-513,i&=-1025):e==="uppercase"?(i&=-257,i&=-1025):e==="capitalize"&&(i&=-257,i&=-513),i}function jv(r,e){const t=function(){const o=ic;return ic=null,o}();if((e=e||t&&t.__key)!=null)return void(r.__key=e);kt(),Tm();const n=Ve(),i=ni(),s=""+$v++;i._nodeMap.set(s,r),V(r)?n._dirtyElements.set(s,!0):n._dirtyLeaves.add(s),n._cloneNotNeeded.add(s),n._dirtyType=Bg,r.__key=s}function _i(r){const e=r.getParent();if(e!==null){const t=r.getWritable(),n=e.getWritable(),i=r.getPreviousSibling(),s=r.getNextSibling(),o=s!==null?s.__key:null,a=i!==null?i.__key:null,l=i!==null?i.getWritable():null,u=s!==null?s.getWritable():null;i===null&&(n.__first=o),s===null&&(n.__last=a),l!==null&&(l.__next=o),u!==null&&(u.__prev=a),t.__prev=null,t.__next=null,t.__parent=null,n.__size--}}function Za(r){Tm();const e=r.getLatest(),t=e.__parent,n=ni(),i=Ve(),s=n._nodeMap,o=i._dirtyElements;t!==null&&function(l,u,c){let f=l;for(;f!==null;){if(c.has(f))return;const d=u.get(f);if(d===void 0)break;c.set(f,!1),f=d.__parent}}(t,s,o);const a=e.__key;i._dirtyType=Bg,V(r)?o.set(a,!0):i._dirtyLeaves.add(a)}function xt(r){kt();const e=Ve(),t=e._compositionKey;if(r!==t){if(e._compositionKey=r,t!==null){const n=Ae(t);n!==null&&n.getWritable()}if(r!==null){const n=Ae(r);n!==null&&n.getWritable()}}}function qn(){return xs()?null:Ve()._compositionKey}function Ae(r,e){const t=(e||ni())._nodeMap.get(r);return t===void 0?null:t}function jm(r,e){const t=Dl(r,Ve());return t!==void 0?Ae(t,e):null}function Dl(r,e){return r[`__lexicalKey_${e._key}`]}function Jn(r,e){let t=r;for(;t!=null;){const n=jm(t,e);if(n!==null)return n;t=Io(t)}return null}function Um(r){const e=r._decorators,t=Object.assign({},e);return r._pendingDecorators=t,t}function oh(r){return r.read(()=>De().getTextContent())}function De(){return zm(ni())}function zm(r){return r._nodeMap.get("root")}function Mt(r){kt();const e=ni();r!==null&&(r.dirty=!0,r.setCachedNodes(null)),e._selection=r}function Xi(r){const e=Ve(),t=function(n,i){let s=n;for(;s!=null;){const o=Dl(s,i);if(o!==void 0)return o;s=Io(s)}return null}(r,e);return t===null?r===e.getRootElement()?Ae("root"):null:Ae(t)}function Hm(r){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(r)}function wd(r){const e=[];let t=r;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function Wm(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function Km(r){return Nn(r)?r.nodeValue:null}function kd(r,e,t){const n=Ur(Nr(e));if(n===null)return;const i=n.anchorNode;let{anchorOffset:s,focusOffset:o}=n;if(i!==null){let a=Km(i);const l=Jn(i);if(a!==null&&ee(l)){if(a===bl&&t){const u=t.length;a=t,s=u,o=u}a!==null&&xd(l,a,s,o,r)}}}function xd(r,e,t,n,i){let s=r;if(s.isAttached()&&(i||!s.isDirty())){const o=s.isComposing();let a=e;(o||i)&&e[e.length-1]===bl&&(a=e.slice(0,-1));const l=s.getTextContent();if(i||a!==l){if(a===""){if(xt(null),uo||is||qa)s.remove();else{const m=Ve();setTimeout(()=>{m.update(()=>{s.isAttached()&&s.remove()})},20)}return}const u=s.getParent(),c=ks(),f=s.getTextContentSize(),d=qn(),h=s.getKey();if(s.isToken()||d!==null&&h===d&&!o||G(c)&&(u!==null&&!u.canInsertTextBefore()&&c.anchor.offset===0||c.anchor.key===r.__key&&c.anchor.offset===0&&!s.canInsertTextBefore()&&!o||c.focus.key===r.__key&&c.focus.offset===f&&!s.canInsertTextAfter()&&!o))return void s.markDirty();const p=re();if(!G(p)||t===null||n===null)return void ah(s,a,p);if(p.setTextNodeRange(s,t,s,n),s.isSegmented()){const m=Oe(s.getTextContent());s.replace(m),s=m}ah(s,a,p)}}}function ah(r,e,t){if(r.setTextContent(e),G(t)){const n=r.getKey();for(const i of["anchor","focus"]){const s=t[i];s.type==="text"&&s.key===n&&(s.offset=Wn(r,s.offset,"clamp"))}}}function oa(r,e,t){const n=e[t]||!1;return n==="any"||n===r[t]}function Uv(r,e){return oa(r,e,"altKey")&&oa(r,e,"ctrlKey")&&oa(r,e,"shiftKey")&&oa(r,e,"metaKey")}function Be(r,e,t){return Uv(r,t)&&r.key.toLowerCase()===e.toLowerCase()}const _n={ctrlKey:!en,metaKey:en},lh={altKey:en,ctrlKey:!en};function uh(r){return r.key==="Backspace"}function ch(r){return Be(r,"a",_n)}function Vm(r){const e=De();if(G(r)){const t=r.anchor,n=r.focus,i=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();return t.set(i.getKey(),0,"element"),n.set(i.getKey(),i.getChildrenSize(),"element"),co(r),r}{const t=e.select(0,e.getChildrenSize());return Mt(co(t)),t}}function es(r,e){r.__lexicalClassNameCache===void 0&&(r.__lexicalClassNameCache={});const t=r.__lexicalClassNameCache,n=t[e];if(n!==void 0)return n;const i=r[e];if(typeof i=="string"){const s=ja(i);return t[e]=s,s}return i}function Sd(r,e,t,n,i){if(t.size===0)return;const s=n.__type,o=n.__key,a=e.get(s);a===void 0&&se(33,s);const l=a.klass;let u=r.get(l);u===void 0&&(u=new Map,r.set(l,u));const c=u.get(o),f=c==="destroyed"&&i==="created";(c===void 0||f)&&u.set(o,f?"updated":i)}function dh(r,e,t){const n=r.getParent();let i=t,s=r;return n!==null&&(e&&t===0?(i=s.getIndexWithinParent(),s=n):e||t!==s.getChildrenSize()||(i=s.getIndexWithinParent()+1,s=n)),s.getChildAtIndex(e?i-1:i)}function sc(r,e){const t=r.offset;if(r.type==="element")return dh(r.getNode(),e,t);{const n=r.getNode();if(e&&t===0||!e&&t===n.getTextContentSize()){const i=e?n.getPreviousSibling():n.getNextSibling();return i===null?dh(n.getParentOrThrow(),e,n.getIndexWithinParent()+(e?0:1)):i}}return null}function Jm(r){const e=Nr(r).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function ce(r,e,t){return function(n,i,s){const o=wd(n);for(let a=4;a>=0;a--)for(let l=0;l<o.length;l++){const u=o[l],c=u._commands.get(i);if(c!==void 0){const f=c[a];if(f!==void 0){const d=Array.from(f),h=d.length;let p=!1;if(vr(u,()=>{for(let m=0;m<h;m++)if(d[m](s,n))return void(p=!0)}),p)return p}}}return!1}(r,e,t)}function Nl(r){return!St(r)&&!r.isLastChild()&&!r.isInline()}function ds(r,e){const t=r._keyToDOMMap.get(e);return t===void 0&&se(75,e),t}function Io(r){const e=r.assignedSlot||r.parentElement;return lc(e)?e.host:e}function Gm(r){return qv(r)?r:je(r)?r.ownerDocument:null}function zv(r){return Ve()._updateTags.has(r)}function Ym(r){kt(),Ve()._updateTags.add(r)}function Hv(r){kt(),Ve()._deferred.push(r)}function oc(r,e){let t=r.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function Td(r){const e=Gm(r);return e?e.defaultView:null}function Nr(r){const e=r._window;return e===null&&se(78),e}function Wv(r){return V(r)&&r.isInline()||Le(r)&&r.isInline()}function Kv(r){let e=r.getParentOrThrow();for(;e!==null;){if(dn(e))return e;e=e.getParentOrThrow()}return e}function dn(r){return St(r)||V(r)&&r.isShadowRoot()}function We(r){const e=Ve(),t=r.getType(),n=vd(e,t);n===void 0&&se(200,r.constructor.name,t);const{replace:i,replaceWithKlass:s}=n;if(i!==null){const o=i(r),a=o.constructor;return s!==null?o instanceof s||se(201,s.name,s.getType(),a.name,a.getType(),r.constructor.name,t):o instanceof r.constructor&&a!==r.constructor||se(202,a.name,a.getType(),r.constructor.name,t),o.__key===r.__key&&se(203,r.constructor.name,t,a.name,a.getType()),o}return r}function Cu(r,e){!St(r.getParent())||V(e)||Le(e)||se(99)}function Vv(r){const e=Ae(r);return e===null&&se(63,r),e}function Eu(r){return(Le(r)||V(r)&&!r.canBeEmpty())&&!r.isInline()}function ac(r,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const n=r.parentElement;n!==null&&n.removeChild(r)}function Ur(r){return Hr?(r||window).getSelection():null}function Jv(r){const e=Td(r);return e?e.getSelection():null}function Xm(r){return je(r)&&r.tagName==="A"}function je(r){return Pi(r)&&r.nodeType===L0}function Pi(r){return typeof r=="object"&&r!==null&&"nodeType"in r&&typeof r.nodeType=="number"}function lc(r){return Pi(r)&&r.nodeType===$0}function uc(r){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return r.nodeName.match(e)!==null}function el(r){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return r.nodeName.match(e)!==null}function Sr(r){if(Le(r)&&!r.isInline())return!0;if(!V(r)||dn(r))return!1;const e=r.getFirstChild(),t=e===null||gi(e)||ee(e)||e.isInline();return!r.isInline()&&r.canBeEmpty()!==!1&&t}function wu(r,e){let t=r;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function Ml(){return Ve()}const fh=new WeakMap,Gv=new Map;function hh(r){if(!r._readOnly&&r.isEmpty())return Gv;r._readOnly||se(192);let e=fh.get(r);return e||(e=function(t){const n=new Map;for(const[i,s]of t._nodeMap){const o=s.__type;let a=n.get(o);a||(a=new Map,n.set(o,a)),a.set(i,s)}return n}(r),fh.set(r,e)),e}function Ad(r){const e=r.constructor.clone(r);return e.afterCloneFrom(r),e}function Yv(r,e){const t=parseInt(r.style.paddingInlineStart,10)||0,n=Math.round(t/40);e.setIndent(n)}function Xv(r){r.__lexicalUnmanaged=!0}function Qv(r){return r.__lexicalUnmanaged===!0}function Vs(r,e){return function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}(r,e)&&r[e]!==ws[e]}function Dd(r){const e=xf in r.prototype?r.prototype[xf]():void 0,t=function(o){return o===Li||o===qt||o===ws}(r),n=!t&&Vs(r,"getType")?r.getType():void 0;let i,s=n;if(e)if(n)i=e[n];else for(const[o,a]of Object.entries(e))s=o,i=a;if(!t&&s&&(Vs(r,"getType")||(r.getType=()=>s),Vs(r,"clone")||(r.clone=o=>(bd(o),new r)),Vs(r,"importJSON")||(r.importJSON=i&&i.$importJSON||(o=>new r().updateFromJSON(o))),!Vs(r,"importDOM")&&i)){const{importDOM:o}=i;o&&(r.importDOM=()=>o)}return{ownNodeConfig:i,ownNodeType:s}}const Zv={next:"previous",previous:"next"};let Nd=class{constructor(e){this.origin=e}[Symbol.iterator](){return Ol({hasNext:xi,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return ut(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return ut(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){const n=this.getNodeAtCaret();return e.is(this.origin)||e.is(n)||(n===null?this.insert(e):n.replace(e,t)),this}splice(e,t,n="next"){const i=n===this.direction?t:Array.from(t).reverse();let s=this;const o=this.getParentAtCaret(),a=new Map;for(let l=s.getAdjacentCaret();l!==null&&a.size<e;l=l.getAdjacentCaret()){const u=l.origin.getWritable();a.set(u.getKey(),u)}for(const l of i){if(a.size>0){const u=s.getNodeAtCaret();if(u){if(a.delete(u.getKey()),a.delete(l.getKey()),!(u.is(l)||s.origin.is(l))){const c=l.getParent();c&&c.is(o)&&l.remove(),u.replace(l)}}else u===null&&se(263,Array.from(a).join(" "))}else s.insert(l);s=ut(l,this.direction)}for(const l of a.values())l.remove();return this}},cc=class Qm extends Nd{constructor(){super(...arguments);kr(this,"type","child")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:zr(t,this.direction)}getParentCaret(t="root"){return ut(Md(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=As(this.direction);return ut(this.getNodeAtCaret(),t)||zr(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof Qm&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}};const e2={root:St,shadowRoot:dn};function As(r){return Zv[r]}function Md(r,e="root"){return e2[e](r)?null:r}let tl=class dc extends Nd{constructor(){super(...arguments);kr(this,"type","sibling")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ut(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return V(this.origin)?zr(this.origin,this.direction):null}getParentCaret(t="root"){return ut(Md(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=As(this.direction);return ut(this.getNodeAtCaret(),t)||zr(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof dc&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof dc||t instanceof rl)&&this.direction===t.direction&&this.origin.is(t.origin)}},rl=class fc extends Nd{constructor(t,n){super(t);kr(this,"type","text");this.offset=n}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Si(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return ut(Md(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Si(this.origin,As(this.direction),this.offset)}isSamePointCaret(t){return t instanceof fc&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof tl||t instanceof fc)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return ut(this.origin,this.direction)}};function Hn(r){return r instanceof rl}function xi(r){return r instanceof tl}function qr(r){return r instanceof cc}const t2={next:class extends rl{constructor(){super(...arguments);kr(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends rl{constructor(){super(...arguments);kr(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},r2={next:class extends tl{constructor(){super(...arguments);kr(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends tl{constructor(){super(...arguments);kr(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},n2={next:class extends cc{constructor(){super(...arguments);kr(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends cc{constructor(){super(...arguments);kr(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function ut(r,e){return r?new r2[e](r):null}function Si(r,e,t){return r?new t2[e](r,Wn(r,t)):null}function Wn(r,e,t="error"){const n=r.getTextContentSize();let i=e==="next"?n:e==="previous"?0:e;return(i<0||i>n)&&(t!=="clamp"&&function(s,...o){const a=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;l.append("code",s);for(const u of o)l.append("v",u);a.search=l.toString(),console.warn(`Minified Lexical warning #${s}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(284,String(e),String(n),r.getKey()),i=i<0?0:n),i}function ph(r,e){return new o2(r,e)}function zr(r,e){return V(r)?new n2[e](r):null}function i2(r){return r&&r.getChildCaret()||r}function mo(r){return r&&i2(r.getAdjacentCaret())}let s2=class Zm{constructor(e,t,n){kr(this,"type","node-caret-range");this.anchor=e,this.focus=t,this.direction=n}getLatest(){const e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new Zm(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=i=>{const s=this[i].getLatest();return Hn(s)?function(o,a){const{direction:l,origin:u}=o,c=Wn(u,a==="focus"?As(l):l);return ph(o,c-o.offset)}(s,i):null},t=e("anchor"),n=e("focus");if(t&&n){const{caret:i}=t,{caret:s}=n;if(i.isSameNodeCaret(s))return[ph(i,s.offset-i.offset),null]}return[t,n]}iterNodeCarets(e="root"){const t=Hn(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),i=Hn(n),s=o=>o.isSameNodeCaret(n)?null:mo(o)||o.getParentCaret(e);return Ol({hasNext:o=>o!==null&&!(i&&n.isSameNodeCaret(o)),initial:t.isSameNodeCaret(n)?null:s(t),map:o=>o,step:s})}[Symbol.iterator](){return this.iterNodeCarets("root")}},o2=class{constructor(e,t){kr(this,"type","slice");this.caret=e,this.distance=t}getSliceIndices(){const{distance:e,caret:{offset:t}}=this,n=t+e;return n<t?[n,t]:[t,n]}getTextContent(){const[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:t}}=this,[n,i]=this.getSliceIndices(),s=e.getTextContent();return Si(e.setTextContent(s.slice(0,n)+s.slice(i)),t,n)}};function Od(r){return Gn(r,ut(De(),r.direction))}function a2(r){return Gn(r,r)}function Gn(r,e){return r.direction!==e.direction&&se(265),new s2(r,e,r.direction)}function Ol(r){const{initial:e,hasNext:t,step:n,map:i}=r;let s=e;return{[Symbol.iterator](){return this},next(){if(!t(s))return{done:!0,value:void 0};const o={done:!1,value:i(s)};return s=n(s),o}}}function ey(r,e){const t=ao(r.origin,e.origin);switch(t===null&&se(275,r.origin.getKey(),e.origin.getKey()),t.type){case"same":{const n=r.type==="text",i=e.type==="text";return n&&i?function(s,o){return Math.sign(s-o)}(r.offset,e.offset):r.type===e.type?0:n?-1:i?1:r.type==="child"?-1:1}case"ancestor":return r.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return ty(t)}}function ty(r){const{a:e,b:t}=r,n=e.__key,i=t.__key;let s=e,o=t;for(;s&&o;s=s.getNextSibling(),o=o.getNextSibling()){if(s.__key===i)return-1;if(o.__key===n)return 1}return s===null?1:-1}function aa(r,e){return e.is(r)}function gh(r){return V(r)?[r.getLatest(),null]:[r.getParent(),r.getLatest()]}function ao(r,e){if(r.is(e))return{commonAncestor:r,type:"same"};const t=new Map;for(let[n,i]=gh(r);n;i=n,n=n.getParent())t.set(n,i);for(let[n,i]=gh(e);n;i=n,n=n.getParent()){const s=t.get(n);if(s!==void 0)return s===null?(aa(r,n)||se(276),{commonAncestor:n,type:"ancestor"}):i===null?(aa(e,n)||se(277),{commonAncestor:n,type:"descendant"}):((V(s)||aa(r,s))&&(V(i)||aa(e,i))&&n.is(s.getParent())&&n.is(i.getParent())||se(278),{a:s,b:i,commonAncestor:n,type:"branch"})}return null}function Tn(r,e){const{type:t,key:n,offset:i}=r,s=Vv(r.key);return t==="text"?(ee(s)||se(266,s.getType(),n),Si(s,e,i)):(V(s)||se(267,s.getType(),n),c2(s,r.offset,e))}function yo(r,e){const{origin:t,direction:n}=e,i=n==="next";Hn(e)?r.set(t.getKey(),e.offset,"text"):xi(e)?ee(t)?r.set(t.getKey(),Wn(t,n),"text"):r.set(t.getParentOrThrow().getKey(),t.getIndexWithinParent()+(i?1:0),"element"):(qr(e)&&V(t)||se(268),r.set(t.getKey(),i?0:t.getChildrenSize(),"element"))}function l2(r){const e=re(),t=G(e)?e:Mo();return Ma(t,r),Mt(t),t}function Ma(r,e){yo(r.anchor,e.anchor),yo(r.focus,e.focus)}function mh(r){const{anchor:e,focus:t}=r,n=Tn(e,"next"),i=Tn(t,"next"),s=ey(n,i)<=0?"next":"previous";return Gn(fs(n,s),fs(i,s))}function Il(r){const{direction:e,origin:t}=r,n=ut(t,As(e)).getNodeAtCaret();return n?ut(n,e):zr(t.getParentOrThrow(),e)}function yh(r,e="root"){const t=[r];for(let n=qr(r)?r.getParentCaret(e):r.getSiblingCaret();n!==null;n=n.getParentCaret(e))t.push(Il(n));return t}function ku(r){return!!r&&r.origin.isAttached()}function u2(r,e="removeEmptySlices"){if(r.isCollapsed())return r;const t="root",n="next";let i=e;const s=ny(r,n),o=yh(s.anchor,t),a=yh(s.focus.getFlipped(),t),l=new Set,u=[];for(const p of s.iterNodeCarets(t))if(qr(p))l.add(p.origin.getKey());else if(xi(p)){const{origin:m}=p;V(m)&&!l.has(m.getKey())||u.push(m)}for(const p of u)p.remove();for(const p of s.getTextSlices()){if(!p)continue;const{origin:m}=p.caret,_=m.getTextContentSize(),C=Il(ut(m,n)),v=m.getMode();if(Math.abs(p.distance)===_&&i==="removeEmptySlices"||v==="token"&&p.distance!==0)C.remove();else if(p.distance!==0){i="removeEmptySlices";let k=p.removeTextSlice();const M=p.caret.origin;if(v==="segmented"){const P=k.origin,x=Oe(P.getTextContent()).setStyle(P.getStyle()).setFormat(P.getFormat());C.replaceOrInsert(x),k=Si(x,n,k.offset)}M.is(o[0].origin)&&(o[0]=k),M.is(a[0].origin)&&(a[0]=k.getFlipped())}}let c,f;for(const p of o)if(ku(p)){c=rn(p);break}for(const p of a)if(ku(p)){f=rn(p);break}const d=function(p,m,_){if(!p||!m)return null;const C=p.getParentAtCaret(),v=m.getParentAtCaret();if(!C||!v)return null;const k=C.getParents().reverse();k.push(C);const M=v.getParents().reverse();M.push(v);const P=Math.min(k.length,M.length);let x;for(x=0;x<P&&k[x]===M[x];x++);const O=(W,w)=>{let q;for(let S=x;S<W.length;S++){const K=W[S];if(dn(K))return;!q&&w(K)&&(q=K)}return q},N=O(k,Sr),I=N&&O(M,W=>_.has(W.getKey())&&Sr(W));return N&&I?[N,I]:null}(c,f,l);if(d){const[p,m]=d;zr(p,"previous").splice(0,m.getChildren()),m.remove()}const h=[c,f,...o,...a].find(ku);if(h)return a2(fs(rn(h),r.direction));se(269,JSON.stringify(o.map(p=>p.origin.__key)))}function rn(r){const e=function(i){let s=i;for(;qr(s);){const o=mo(s);if(!qr(o))break;s=o}return s}(r.getLatest()),{direction:t}=e;if(ee(e.origin))return Hn(e)?e:Si(e.origin,t,t);const n=e.getAdjacentCaret();return xi(n)&&ee(n.origin)?Si(n.origin,t,As(t)):e}function ry(r){return Hn(r)&&r.offset!==Wn(r.origin,r.direction)}function fs(r,e){return r.direction===e?r:r.getFlipped()}function ny(r,e){return r.direction===e?r:Gn(fs(r.focus,e),fs(r.anchor,e))}function c2(r,e,t){let n=zr(r,"next");for(let i=0;i<e;i++){const s=n.getAdjacentCaret();if(s===null)break;n=s}return fs(n,t)}var xe={},pt={},_h;function Ds(){if(_h)return pt;_h=1;function r(C,v,k){if(k===void 0&&(k=Array.prototype),C&&typeof k.find=="function")return k.find.call(C,v);for(var M=0;M<C.length;M++)if(t(C,M)){var P=C[M];if(v.call(void 0,P,M,C))return P}}function e(C,v){return v===void 0&&(v=Object),v&&typeof v.getOwnPropertyDescriptors=="function"&&(C=v.create(null,v.getOwnPropertyDescriptors(C))),v&&typeof v.freeze=="function"?v.freeze(C):C}function t(C,v){return Object.prototype.hasOwnProperty.call(C,v)}function n(C,v){if(C===null||typeof C!="object")throw new TypeError("target is not an object");for(var k in v)t(v,k)&&(C[k]=v[k]);return C}var i=e({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function s(C){return t(i,C.toLowerCase())}var o=e({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(C){return t(o,C.toLowerCase())}var l=e({script:!1,style:!1,textarea:!0,title:!0});function u(C){var v=C.toLowerCase();return t(l,v)&&!l[v]}function c(C){var v=C.toLowerCase();return t(l,v)&&l[v]}function f(C){return C===h.HTML}function d(C){return f(C)||C===h.XML_XHTML_APPLICATION}var h=e({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),p=Object.keys(h).map(function(C){return h[C]});function m(C){return p.indexOf(C)>-1}var _=e({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return pt.assign=n,pt.find=r,pt.freeze=e,pt.HTML_BOOLEAN_ATTRIBUTES=i,pt.HTML_RAW_TEXT_ELEMENTS=l,pt.HTML_VOID_ELEMENTS=o,pt.hasDefaultHTMLNamespace=d,pt.hasOwn=t,pt.isHTMLBooleanAttribute=s,pt.isHTMLRawTextElement=u,pt.isHTMLEscapableRawTextElement=c,pt.isHTMLMimeType=f,pt.isHTMLVoidElement=a,pt.isValidMimeType=m,pt.MIME_TYPE=h,pt.NAMESPACE=_,pt}var Ki={},bh;function Rl(){if(bh)return Ki;bh=1;var r=Ds();function e(d,h){d.prototype=Object.create(Error.prototype,{constructor:{value:d},name:{value:d.name,enumerable:!0,writable:h}})}var t=r.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(t);function i(d){return typeof d=="number"&&d>=1&&d<=25}function s(d){return typeof d=="string"&&d.substring(d.length-t.Error.length)===t.Error}function o(d,h){i(d)?(this.name=n[d],this.message=h||""):(this.message=d,this.name=s(h)?h:t.Error),Error.captureStackTrace&&Error.captureStackTrace(this,o)}e(o,!0),Object.defineProperties(o.prototype,{code:{enumerable:!0,get:function(){var d=n.indexOf(this.name);return i(d)?d:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},l=Object.entries(a),u=0;u<l.length;u++){var c=l[u][0];o[c]=l[u][1]}function f(d,h){this.message=d,this.locator=h,Error.captureStackTrace&&Error.captureStackTrace(this,f)}return e(f),Ki.DOMException=o,Ki.DOMExceptionName=t,Ki.ExceptionCode=a,Ki.ParseError=f,Ki}var Ye={},Ce={},vh;function iy(){if(vh)return Ce;vh=1;function r($e){try{typeof $e!="function"&&($e=RegExp);var Je=new $e("𝌆","u").exec("𝌆");return!!Je&&Je[0].length===2}catch{}return!1}var e=r();function t($e){if($e.source[0]!=="[")throw new Error($e+" can not be used with chars");return $e.source.slice(1,$e.source.lastIndexOf("]"))}function n($e,Je){if($e.source[0]!=="[")throw new Error("/"+$e.source+"/ can not be used with chars_without");if(!Je||typeof Je!="string")throw new Error(JSON.stringify(Je)+" is not a valid search");if($e.source.indexOf(Je)===-1)throw new Error('"'+Je+'" is not is /'+$e.source+"/");if(Je==="-"&&$e.source.indexOf(Je)!==1)throw new Error('"'+Je+'" is not at the first postion of /'+$e.source+"/");return new RegExp($e.source.replace(Je,""),e?"u":"")}function i($e){var Je=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(Ut){var zt=typeof Ut=="string";if(zt&&Je===void 0&&Ut==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return zt?Ut:Ut.source}).join(""),e?"mu":"m")}function s($e){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(s,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var o="�",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;e&&(a=i("[",t(a),"\\u{10000}-\\u{10FFFF}","]"));var l=/[\x20\x09\x0D\x0A]/,u=t(l),c=i(l,"+"),f=i(l,"*"),d=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;e&&(d=i("[",t(d),"\\u{10000}-\\u{10FFFF}","]"));var h=t(d),p=i("[",h,t(/[-.0-9\xB7]/),t(/[\u0300-\u036F\u203F-\u2040]/),"]"),m=i(d,p,"*"),_=i(p,"+"),C=i("&",m,";"),v=s(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),k=s(C,"|",v),M=i("%",m,";"),P=s(i('"',s(/[^%&"]/,"|",M,"|",k),"*",'"'),"|",i("'",s(/[^%&']/,"|",M,"|",k),"*","'")),x=s('"',s(/[^<&"]/,"|",k),"*",'"',"|","'",s(/[^<&']/,"|",k),"*","'"),O=n(d,":"),N=n(p,":"),I=i(O,N,"*"),W=i(I,s(":",I),"?"),w=i("^",W,"$"),q=i("(",W,")"),S=s(/"[^"]*"|'[^']*'/),K=i(/^<\?/,"(",m,")",s(c,"(",a,"*?)"),"?",/\?>/),A=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,L=s('"',A,'*"',"|","'",n(A,"'"),"*'"),j="<!--",H="-->",J=i(j,s(n(a,"-"),"|",i("-",n(a,"-"))),"*",H),z="#PCDATA",Q=s(i(/\(/,f,z,s(f,/\|/,f,W),"*",f,/\)\*/),"|",i(/\(/,f,z,f,/\)/)),ie=/[?*+]?/,te=i(/\([^>]+\)/,ie),Z=s("EMPTY","|","ANY","|",Q,"|",te),Y="<!ELEMENT",oe=i(Y,c,s(W,"|",M),c,s(Z,"|",M),f,">"),ue=i("NOTATION",c,/\(/,f,m,s(f,/\|/,f,m),"*",f,/\)/),de=i(/\(/,f,_,s(f,/\|/,f,_),"*",f,/\)/),pe=s(ue,"|",de),ge=s(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",pe),_e=s(/#REQUIRED|#IMPLIED/,"|",s(s("#FIXED",c),"?",x)),ae=s(c,m,c,ge,c,_e),we="<!ATTLIST",Ie=i(we,c,m,ae,"*",f,">"),Se="about:legacy-compat",Qt=s('"'+Se+'"',"|","'"+Se+"'"),jt="SYSTEM",Ot="PUBLIC",lr=s(s(jt,c,S),"|",s(Ot,c,L,c,S)),Zt=i("^",s(s(jt,c,"(?<SystemLiteralOnly>",S,")"),"|",s(Ot,c,"(?<PubidLiteral>",L,")",c,"(?<SystemLiteral>",S,")"))),ur=s(c,"NDATA",c,m),ft=s(P,"|",s(lr,ur,"?")),Re="<!ENTITY",nt=i(Re,c,m,c,ft,f,">"),Ue=s(P,"|",lr),Or=i(Re,c,"%",c,m,c,Ue,f,">"),cr=s(nt,"|",Or),er=i(Ot,c,L),dr=i("<!NOTATION",c,m,c,s(lr,"|",er),f,">"),me=i(f,"=",f),Fe=/1[.]\d+/,it=i(c,"version",me,s("'",Fe,"'","|",'"',Fe,'"')),ht=/[A-Za-z][-A-Za-z0-9._]*/,fr=s(c,"encoding",me,s('"',ht,'"',"|","'",ht,"'")),hr=s(c,"standalone",me,s("'",s("yes","|","no"),"'","|",'"',s("yes","|","no"),'"')),Ir=i(/^<\?xml/,it,fr,"?",hr,"?",f,/\?>/),pr="<!DOCTYPE",gr="<![CDATA[",Ct="]]>",mr=/<!\[CDATA\[/,yr=/\]\]>/,tr=i(a,"*?",yr),Kr=i(mr,tr);return Ce.chars=t,Ce.chars_without=n,Ce.detectUnicodeSupport=r,Ce.reg=i,Ce.regg=s,Ce.ABOUT_LEGACY_COMPAT=Se,Ce.ABOUT_LEGACY_COMPAT_SystemLiteral=Qt,Ce.AttlistDecl=Ie,Ce.CDATA_START=gr,Ce.CDATA_END=Ct,Ce.CDSect=Kr,Ce.Char=a,Ce.Comment=J,Ce.COMMENT_START=j,Ce.COMMENT_END=H,Ce.DOCTYPE_DECL_START=pr,Ce.elementdecl=oe,Ce.EntityDecl=cr,Ce.EntityValue=P,Ce.ExternalID=lr,Ce.ExternalID_match=Zt,Ce.Name=m,Ce.NotationDecl=dr,Ce.Reference=k,Ce.PEReference=M,Ce.PI=K,Ce.PUBLIC=Ot,Ce.PubidLiteral=L,Ce.QName=W,Ce.QName_exact=w,Ce.QName_group=q,Ce.S=c,Ce.SChar_s=u,Ce.S_OPT=f,Ce.SYSTEM=jt,Ce.SystemLiteral=S,Ce.UNICODE_REPLACEMENT_CHARACTER=o,Ce.UNICODE_SUPPORT=e,Ce.XMLDecl=Ir,Ce}var Ch;function sy(){if(Ch)return Ye;Ch=1;var r=Ds(),e=r.find,t=r.hasDefaultHTMLNamespace,n=r.hasOwn,i=r.isHTMLMimeType,s=r.isHTMLRawTextElement,o=r.isHTMLVoidElement,a=r.MIME_TYPE,l=r.NAMESPACE,u=Symbol(),c=Rl(),f=c.DOMException,d=c.DOMExceptionName,h=iy();function p(y){if(y!==u)throw new TypeError("Illegal constructor")}function m(y){return y!==""}function _(y){return y?y.split(/[\t\n\f\r ]+/).filter(m):[]}function C(y,b){return n(y,b)||(y[b]=!0),y}function v(y){if(!y)return[];var b=_(y);return Object.keys(b.reduce(C,{}))}function k(y){return function(b){return y&&y.indexOf(b)!==-1}}function M(y){if(!h.QName_exact.test(y))throw new f(f.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+y+'"')}function P(y,b){M(b),y=y||null;var D=null,U=b;if(b.indexOf(":")>=0){var ne=b.split(":");D=ne[0],U=ne[1]}if(D!==null&&y===null)throw new f(f.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(D==="xml"&&y!==r.NAMESPACE.XML)throw new f(f.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((D==="xmlns"||b==="xmlns")&&y!==r.NAMESPACE.XMLNS)throw new f(f.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(y===r.NAMESPACE.XMLNS&&D!=="xmlns"&&b!=="xmlns")throw new f(f.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[y,D,U]}function x(y,b){for(var D in y)n(y,D)&&(b[D]=y[D])}function O(y,b){var D=y.prototype;if(!(D instanceof b)){let U=function(){};U.prototype=b.prototype,U=new U,x(D,U),y.prototype=D=U}D.constructor!=y&&(typeof y!="function"&&console.error("unknown Class:"+y),D.constructor=y)}var N={},I=N.ELEMENT_NODE=1,W=N.ATTRIBUTE_NODE=2,w=N.TEXT_NODE=3,q=N.CDATA_SECTION_NODE=4,S=N.ENTITY_REFERENCE_NODE=5,K=N.ENTITY_NODE=6,A=N.PROCESSING_INSTRUCTION_NODE=7,L=N.COMMENT_NODE=8,j=N.DOCUMENT_NODE=9,H=N.DOCUMENT_TYPE_NODE=10,J=N.DOCUMENT_FRAGMENT_NODE=11,z=N.NOTATION_NODE=12,Q=r.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function ie(y,b){if(b.length<y.length)return ie(b,y);var D=null;for(var U in y){if(y[U]!==b[U])return D;D=y[U]}return D}function te(y){return y.guid||(y.guid=Math.random()),y.guid}function Z(){}Z.prototype={length:0,item:function(y){return y>=0&&y<this.length?this[y]:null},toString:function(y){for(var b=[],D=0;D<this.length;D++)zt(this[D],b,y);return b.join("")},filter:function(y){return Array.prototype.filter.call(this,y)},indexOf:function(y){return Array.prototype.indexOf.call(this,y)}},Z.prototype[Symbol.iterator]=function(){var y=this,b=0;return{next:function(){return b<y.length?{value:y[b++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Y(y,b){this._node=y,this._refresh=b,oe(this)}function oe(y){var b=y._node._inc||y._node.ownerDocument._inc;if(y._inc!==b){var D=y._refresh(y._node);if(wr(y,"length",D.length),!y.$$length||D.length<y.$$length)for(var U=D.length;U in y;U++)n(y,U)&&delete y[U];x(D,y),y._inc=b}}Y.prototype.item=function(y){return oe(this),this[y]||null},O(Y,Z);function ue(){}function de(y,b){for(var D=0;D<y.length;){if(y[D]===b)return D;D++}}function pe(y,b,D,U){if(U?b[de(b,U)]=D:(b[b.length]=D,b.length++),y){D.ownerElement=y;var ne=y.ownerDocument;ne&&(U&&jt(ne,y,U),Qt(ne,y,D))}}function ge(y,b,D){var U=de(b,D);if(U>=0){for(var ne=b.length-1;U<=ne;)b[U]=b[++U];if(b.length=ne,y){var le=y.ownerDocument;le&&jt(le,y,D),D.ownerElement=null}}}ue.prototype={length:0,item:Z.prototype.item,getNamedItem:function(y){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(y=y.toLowerCase());for(var b=0;b<this.length;){var D=this[b];if(D.nodeName===y)return D;b++}return null},setNamedItem:function(y){var b=y.ownerElement;if(b&&b!==this._ownerElement)throw new f(f.INUSE_ATTRIBUTE_ERR);var D=this.getNamedItemNS(y.namespaceURI,y.localName);return D===y?y:(pe(this._ownerElement,this,y,D),D)},setNamedItemNS:function(y){return this.setNamedItem(y)},removeNamedItem:function(y){var b=this.getNamedItem(y);if(!b)throw new f(f.NOT_FOUND_ERR,y);return ge(this._ownerElement,this,b),b},removeNamedItemNS:function(y,b){var D=this.getNamedItemNS(y,b);if(!D)throw new f(f.NOT_FOUND_ERR,y?y+" : "+b:b);return ge(this._ownerElement,this,D),D},getNamedItemNS:function(y,b){y||(y=null);for(var D=0;D<this.length;){var U=this[D];if(U.localName===b&&U.namespaceURI===y)return U;D++}return null}},ue.prototype[Symbol.iterator]=function(){var y=this,b=0;return{next:function(){return b<y.length?{value:y[b++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function _e(){}_e.prototype={hasFeature:function(y,b){return!0},createDocument:function(y,b,D){var U=a.XML_APPLICATION;y===l.HTML?U=a.XML_XHTML_APPLICATION:y===l.SVG&&(U=a.XML_SVG_IMAGE);var ne=new Se(u,{contentType:U});if(ne.implementation=this,ne.childNodes=new Z,ne.doctype=D||null,D&&ne.appendChild(D),b){var le=ne.createElementNS(y,b);ne.appendChild(le)}return ne},createDocumentType:function(y,b,D,U){M(y);var ne=new pr(u);return ne.name=y,ne.nodeName=y,ne.publicId=b||"",ne.systemId=D||"",ne.internalSubset=U||"",ne.childNodes=new Z,ne},createHTMLDocument:function(y){var b=new Se(u,{contentType:a.HTML});if(b.implementation=this,b.childNodes=new Z,y!==!1){b.doctype=this.createDocumentType("html"),b.doctype.ownerDocument=b,b.appendChild(b.doctype);var D=b.createElement("html");b.appendChild(D);var U=b.createElement("head");if(D.appendChild(U),typeof y=="string"){var ne=b.createElement("title");ne.appendChild(b.createTextNode(y)),U.appendChild(ne)}D.appendChild(b.createElement("body"))}return b}};function ae(y){p(y)}ae.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var y=this.getRootNode();return y&&y.nodeType===y.DOCUMENT_NODE},contains:function(y){if(!y)return!1;var b=y;do{if(this===b)return!0;b=y.parentNode}while(b);return!1},getRootNode:function(y){var b=this;do{if(!b.parentNode)return b;b=b.parentNode}while(b)},isEqualNode:function(y){if(!y||this.nodeType!==y.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==y.name||this.publicId!==y.publicId||this.systemId!==y.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==y.namespaceURI||this.prefix!==y.prefix||this.localName!==y.localName||this.attributes.length!==y.attributes.length)return!1;for(var b=0;b<this.attributes.length;b++){var D=this.attributes.item(b);if(!D.isEqualNode(y.getAttributeNodeNS(D.namespaceURI,D.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==y.namespaceURI||this.localName!==y.localName||this.value!==y.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==y.target||this.data!==y.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==y.data)return!1;break}if(this.childNodes.length!==y.childNodes.length)return!1;for(var b=0;b<this.childNodes.length;b++)if(!this.childNodes[b].isEqualNode(y.childNodes[b]))return!1;return!0},isSameNode:function(y){return this===y},insertBefore:function(y,b){return me(this,y,b)},replaceChild:function(y,b){me(this,y,b,dr),b&&this.removeChild(b)},removeChild:function(y){return lr(this,y)},appendChild:function(y){return this.insertBefore(y,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(y){return In(this.ownerDocument||this,this,y)},normalize:function(){for(var y=this.firstChild;y;){var b=y.nextSibling;b&&b.nodeType==w&&y.nodeType==w?(this.removeChild(b),y.appendData(b.data)):(y.normalize(),y=b)}},isSupported:function(y,b){return this.ownerDocument.implementation.hasFeature(y,b)},lookupPrefix:function(y){for(var b=this;b;){var D=b._nsMap;if(D){for(var U in D)if(n(D,U)&&D[U]===y)return U}b=b.nodeType==W?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(y){for(var b=this;b;){var D=b._nsMap;if(D&&n(D,y))return D[y];b=b.nodeType==W?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(y){var b=this.lookupPrefix(y);return b==null},compareDocumentPosition:function(y){if(this===y)return 0;var b=y,D=this,U=null,ne=null;if(b instanceof it&&(U=b,b=U.ownerElement),D instanceof it&&(ne=D,D=ne.ownerElement,U&&b&&D===b))for(var le=0,ke;ke=D.attributes[le];le++){if(ke===U)return Q.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Q.DOCUMENT_POSITION_PRECEDING;if(ke===ne)return Q.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Q.DOCUMENT_POSITION_FOLLOWING}if(!b||!D||D.ownerDocument!==b.ownerDocument)return Q.DOCUMENT_POSITION_DISCONNECTED+Q.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(te(D.ownerDocument)>te(b.ownerDocument)?Q.DOCUMENT_POSITION_FOLLOWING:Q.DOCUMENT_POSITION_PRECEDING);if(ne&&b===D)return Q.DOCUMENT_POSITION_CONTAINS+Q.DOCUMENT_POSITION_PRECEDING;if(U&&b===D)return Q.DOCUMENT_POSITION_CONTAINED_BY+Q.DOCUMENT_POSITION_FOLLOWING;for(var Ge=[],Ze=b.parentNode;Ze;){if(!ne&&Ze===D)return Q.DOCUMENT_POSITION_CONTAINED_BY+Q.DOCUMENT_POSITION_FOLLOWING;Ge.push(Ze),Ze=Ze.parentNode}Ge.reverse();for(var Et=[],st=D.parentNode;st;){if(!U&&st===b)return Q.DOCUMENT_POSITION_CONTAINS+Q.DOCUMENT_POSITION_PRECEDING;Et.push(st),st=st.parentNode}Et.reverse();var Ke=ie(Ge,Et);for(var _r in Ke.childNodes){var It=Ke.childNodes[_r];if(It===D)return Q.DOCUMENT_POSITION_FOLLOWING;if(It===b)return Q.DOCUMENT_POSITION_PRECEDING;if(Et.indexOf(It)>=0)return Q.DOCUMENT_POSITION_FOLLOWING;if(Ge.indexOf(It)>=0)return Q.DOCUMENT_POSITION_PRECEDING}return 0}};function we(y){return y=="<"&&"&lt;"||y==">"&&"&gt;"||y=="&"&&"&amp;"||y=='"'&&"&quot;"||"&#"+y.charCodeAt()+";"}x(N,ae),x(N,ae.prototype),x(Q,ae),x(Q,ae.prototype);function Ie(y,b){if(b(y))return!0;if(y=y.firstChild)do if(Ie(y,b))return!0;while(y=y.nextSibling)}function Se(y,b){p(y);var D=b||{};this.ownerDocument=this,this.contentType=D.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function Qt(y,b,D){y&&y._inc++;var U=D.namespaceURI;U===l.XMLNS&&(b._nsMap[D.prefix?D.localName:""]=D.value)}function jt(y,b,D,U){y&&y._inc++;var ne=D.namespaceURI;ne===l.XMLNS&&delete b._nsMap[D.prefix?D.localName:""]}function Ot(y,b,D){if(y&&y._inc){y._inc++;var U=b.childNodes;if(D&&!D.nextSibling)U[U.length++]=D;else{for(var ne=b.firstChild,le=0;ne;)U[le++]=ne,ne=ne.nextSibling;U.length=le,delete U[U.length]}}}function lr(y,b){if(y!==b.parentNode)throw new f(f.NOT_FOUND_ERR,"child's parent is not parent");var D=b.previousSibling,U=b.nextSibling;return D?D.nextSibling=U:y.firstChild=U,U?U.previousSibling=D:y.lastChild=D,Ot(y.ownerDocument,y),b.parentNode=null,b.previousSibling=null,b.nextSibling=null,b}function Zt(y){return y&&(y.nodeType===ae.DOCUMENT_NODE||y.nodeType===ae.DOCUMENT_FRAGMENT_NODE||y.nodeType===ae.ELEMENT_NODE)}function ur(y){return y&&(y.nodeType===ae.CDATA_SECTION_NODE||y.nodeType===ae.COMMENT_NODE||y.nodeType===ae.DOCUMENT_FRAGMENT_NODE||y.nodeType===ae.DOCUMENT_TYPE_NODE||y.nodeType===ae.ELEMENT_NODE||y.nodeType===ae.PROCESSING_INSTRUCTION_NODE||y.nodeType===ae.TEXT_NODE)}function ft(y){return y&&y.nodeType===ae.DOCUMENT_TYPE_NODE}function Re(y){return y&&y.nodeType===ae.ELEMENT_NODE}function nt(y){return y&&y.nodeType===ae.TEXT_NODE}function Ue(y,b){var D=y.childNodes||[];if(e(D,Re)||ft(b))return!1;var U=e(D,ft);return!(b&&U&&D.indexOf(U)>D.indexOf(b))}function Or(y,b){var D=y.childNodes||[];function U(le){return Re(le)&&le!==b}if(e(D,U))return!1;var ne=e(D,ft);return!(b&&ne&&D.indexOf(ne)>D.indexOf(b))}function cr(y,b,D){if(!Zt(y))throw new f(f.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+y.nodeType);if(D&&D.parentNode!==y)throw new f(f.NOT_FOUND_ERR,"child not in parent");if(!ur(b)||ft(b)&&y.nodeType!==ae.DOCUMENT_NODE)throw new f(f.HIERARCHY_REQUEST_ERR,"Unexpected node type "+b.nodeType+" for parent node type "+y.nodeType)}function er(y,b,D){var U=y.childNodes||[],ne=b.childNodes||[];if(b.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var le=ne.filter(Re);if(le.length>1||e(ne,nt))throw new f(f.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(le.length===1&&!Ue(y,D))throw new f(f.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Re(b)&&!Ue(y,D))throw new f(f.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ft(b)){if(e(U,ft))throw new f(f.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var ke=e(U,Re);if(D&&U.indexOf(ke)<U.indexOf(D))throw new f(f.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!D&&ke)throw new f(f.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function dr(y,b,D){var U=y.childNodes||[],ne=b.childNodes||[];if(b.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var le=ne.filter(Re);if(le.length>1||e(ne,nt))throw new f(f.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(le.length===1&&!Or(y,D))throw new f(f.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Re(b)&&!Or(y,D))throw new f(f.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ft(b)){if(e(U,function(Ze){return ft(Ze)&&Ze!==D}))throw new f(f.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var ke=e(U,Re);if(D&&U.indexOf(ke)<U.indexOf(D))throw new f(f.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function me(y,b,D,U){cr(y,b,D),y.nodeType===ae.DOCUMENT_NODE&&(U||er)(y,b,D);var ne=b.parentNode;if(ne&&ne.removeChild(b),b.nodeType===J){var le=b.firstChild;if(le==null)return b;var ke=b.lastChild}else le=ke=b;var Ge=D?D.previousSibling:y.lastChild;le.previousSibling=Ge,ke.nextSibling=D,Ge?Ge.nextSibling=le:y.firstChild=le,D==null?y.lastChild=ke:D.previousSibling=ke;do le.parentNode=y;while(le!==ke&&(le=le.nextSibling));return Ot(y.ownerDocument||y,y,b),b.nodeType==J&&(b.firstChild=b.lastChild=null),b}Se.prototype={implementation:null,nodeName:"#document",nodeType:j,doctype:null,documentElement:null,_inc:1,insertBefore:function(y,b){if(y.nodeType===J){for(var D=y.firstChild;D;){var U=D.nextSibling;this.insertBefore(D,b),D=U}return y}return me(this,y,b),y.ownerDocument=this,this.documentElement===null&&y.nodeType===I&&(this.documentElement=y),y},removeChild:function(y){var b=lr(this,y);return b===this.documentElement&&(this.documentElement=null),b},replaceChild:function(y,b){me(this,y,b,dr),y.ownerDocument=this,b&&this.removeChild(b),Re(y)&&(this.documentElement=y)},importNode:function(y,b){return Rr(this,y,b)},getElementById:function(y){var b=null;return Ie(this.documentElement,function(D){if(D.nodeType==I&&D.getAttribute("id")==y)return b=D,!0}),b},createElement:function(y){var b=new Fe(u);b.ownerDocument=this,this.type==="html"&&(y=y.toLowerCase()),t(this.contentType)&&(b.namespaceURI=l.HTML),b.nodeName=y,b.tagName=y,b.localName=y,b.childNodes=new Z;var D=b.attributes=new ue;return D._ownerElement=b,b},createDocumentFragment:function(){var y=new yr(u);return y.ownerDocument=this,y.childNodes=new Z,y},createTextNode:function(y){var b=new fr(u);return b.ownerDocument=this,b.childNodes=new Z,b.appendData(y),b},createComment:function(y){var b=new hr(u);return b.ownerDocument=this,b.childNodes=new Z,b.appendData(y),b},createCDATASection:function(y){var b=new Ir(u);return b.ownerDocument=this,b.childNodes=new Z,b.appendData(y),b},createProcessingInstruction:function(y,b){var D=new tr(u);return D.ownerDocument=this,D.childNodes=new Z,D.nodeName=D.target=y,D.nodeValue=D.data=b,D},createAttribute:function(y){if(!h.QName_exact.test(y))throw new f(f.INVALID_CHARACTER_ERR,'invalid character in name "'+y+'"');return this.type==="html"&&(y=y.toLowerCase()),this._createAttribute(y)},_createAttribute:function(y){var b=new it(u);return b.ownerDocument=this,b.childNodes=new Z,b.name=y,b.nodeName=y,b.localName=y,b.specified=!0,b},createEntityReference:function(y){if(!h.Name.test(y))throw new f(f.INVALID_CHARACTER_ERR,'not a valid xml name "'+y+'"');if(this.type==="html")throw new f("document is an html document",d.NotSupportedError);var b=new mr(u);return b.ownerDocument=this,b.childNodes=new Z,b.nodeName=y,b},createElementNS:function(y,b){var D=P(y,b),U=new Fe(u),ne=U.attributes=new ue;return U.childNodes=new Z,U.ownerDocument=this,U.nodeName=b,U.tagName=b,U.namespaceURI=D[0],U.prefix=D[1],U.localName=D[2],ne._ownerElement=U,U},createAttributeNS:function(y,b){var D=P(y,b),U=new it(u);return U.ownerDocument=this,U.childNodes=new Z,U.nodeName=b,U.name=b,U.specified=!0,U.namespaceURI=D[0],U.prefix=D[1],U.localName=D[2],U}},O(Se,ae);function Fe(y){p(y),this._nsMap=Object.create(null)}Fe.prototype={nodeType:I,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===l.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(y){return!!this.getAttributeNode(y)},getAttribute:function(y){var b=this.getAttributeNode(y);return b?b.value:null},getAttributeNode:function(y){return this._isInHTMLDocumentAndNamespace()&&(y=y.toLowerCase()),this.attributes.getNamedItem(y)},setAttribute:function(y,b){this._isInHTMLDocumentAndNamespace()&&(y=y.toLowerCase());var D=this.getAttributeNode(y);D?D.value=D.nodeValue=""+b:(D=this.ownerDocument._createAttribute(y),D.value=D.nodeValue=""+b,this.setAttributeNode(D))},removeAttribute:function(y){var b=this.getAttributeNode(y);b&&this.removeAttributeNode(b)},setAttributeNode:function(y){return this.attributes.setNamedItem(y)},setAttributeNodeNS:function(y){return this.attributes.setNamedItemNS(y)},removeAttributeNode:function(y){return this.attributes.removeNamedItem(y.nodeName)},removeAttributeNS:function(y,b){var D=this.getAttributeNodeNS(y,b);D&&this.removeAttributeNode(D)},hasAttributeNS:function(y,b){return this.getAttributeNodeNS(y,b)!=null},getAttributeNS:function(y,b){var D=this.getAttributeNodeNS(y,b);return D?D.value:null},setAttributeNS:function(y,b,D){var U=P(y,b),ne=U[2],le=this.getAttributeNodeNS(y,ne);le?le.value=le.nodeValue=""+D:(le=this.ownerDocument.createAttributeNS(y,b),le.value=le.nodeValue=""+D,this.setAttributeNode(le))},getAttributeNodeNS:function(y,b){return this.attributes.getNamedItemNS(y,b)},getElementsByClassName:function(y){var b=v(y);return new Y(this,function(D){var U=[];return b.length>0&&Ie(D,function(ne){if(ne!==D&&ne.nodeType===I){var le=ne.getAttribute("class");if(le){var ke=y===le;if(!ke){var Ge=v(le);ke=b.every(k(Ge))}ke&&U.push(ne)}}}),U})},getElementsByTagName:function(y){var b=(this.nodeType===j?this:this.ownerDocument).type==="html",D=y.toLowerCase();return new Y(this,function(U){var ne=[];return Ie(U,function(le){if(!(le===U||le.nodeType!==I))if(y==="*")ne.push(le);else{var ke=le.getQualifiedName(),Ge=b&&le.namespaceURI===l.HTML?D:y;ke===Ge&&ne.push(le)}}),ne})},getElementsByTagNameNS:function(y,b){return new Y(this,function(D){var U=[];return Ie(D,function(ne){ne!==D&&ne.nodeType===I&&(y==="*"||ne.namespaceURI===y)&&(b==="*"||ne.localName==b)&&U.push(ne)}),U})}},Se.prototype.getElementsByClassName=Fe.prototype.getElementsByClassName,Se.prototype.getElementsByTagName=Fe.prototype.getElementsByTagName,Se.prototype.getElementsByTagNameNS=Fe.prototype.getElementsByTagNameNS,O(Fe,ae);function it(y){p(y),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}it.prototype.nodeType=W,O(it,ae);function ht(y){p(y)}ht.prototype={data:"",substringData:function(y,b){return this.data.substring(y,y+b)},appendData:function(y){y=this.data+y,this.nodeValue=this.data=y,this.length=y.length},insertData:function(y,b){this.replaceData(y,0,b)},deleteData:function(y,b){this.replaceData(y,b,"")},replaceData:function(y,b,D){var U=this.data.substring(0,y),ne=this.data.substring(y+b);D=U+D+ne,this.nodeValue=this.data=D,this.length=D.length}},O(ht,ae);function fr(y){p(y)}fr.prototype={nodeName:"#text",nodeType:w,splitText:function(y){var b=this.data,D=b.substring(y);b=b.substring(0,y),this.data=this.nodeValue=b,this.length=b.length;var U=this.ownerDocument.createTextNode(D);return this.parentNode&&this.parentNode.insertBefore(U,this.nextSibling),U}},O(fr,ht);function hr(y){p(y)}hr.prototype={nodeName:"#comment",nodeType:L},O(hr,ht);function Ir(y){p(y)}Ir.prototype={nodeName:"#cdata-section",nodeType:q},O(Ir,fr);function pr(y){p(y)}pr.prototype.nodeType=H,O(pr,ae);function gr(y){p(y)}gr.prototype.nodeType=z,O(gr,ae);function Ct(y){p(y)}Ct.prototype.nodeType=K,O(Ct,ae);function mr(y){p(y)}mr.prototype.nodeType=S,O(mr,ae);function yr(y){p(y)}yr.prototype.nodeName="#document-fragment",yr.prototype.nodeType=J,O(yr,ae);function tr(y){p(y)}tr.prototype.nodeType=A,O(tr,ht);function Kr(){}Kr.prototype.serializeToString=function(y,b){return $e.call(y,b)},ae.prototype.toString=$e;function $e(y){var b=[],D=this.nodeType===j&&this.documentElement||this,U=D.prefix,ne=D.namespaceURI;if(ne&&U==null){var U=D.lookupPrefix(ne);if(U==null)var le=[{namespace:ne,prefix:null}]}return zt(this,b,y,le),b.join("")}function Je(y,b,D){var U=y.prefix||"",ne=y.namespaceURI;if(!ne||U==="xml"&&ne===l.XML||ne===l.XMLNS)return!1;for(var le=D.length;le--;){var ke=D[le];if(ke.prefix===U)return ke.namespace!==ne}return!0}function Ut(y,b,D){y.push(" ",b,'="',D.replace(/[<>&"\t\n\r]/g,we),'"')}function zt(y,b,D,U){U||(U=[]);var ne=y.nodeType===j?y:y.ownerDocument,le=ne.type==="html";if(D)if(y=D(y),y){if(typeof y=="string"){b.push(y);return}}else return;switch(y.nodeType){case I:var ke=y.attributes,Ge=ke.length,tt=y.firstChild,Ze=y.tagName,Et=Ze;if(!le&&!y.prefix&&y.namespaceURI){for(var st,Ke=0;Ke<ke.length;Ke++)if(ke.item(Ke).name==="xmlns"){st=ke.item(Ke).value;break}if(!st)for(var _r=U.length-1;_r>=0;_r--){var It=U[_r];if(It.prefix===""&&It.namespace===y.namespaceURI){st=It.namespace;break}}if(st!==y.namespaceURI)for(var _r=U.length-1;_r>=0;_r--){var It=U[_r];if(It.namespace===y.namespaceURI){It.prefix&&(Et=It.prefix+":"+Ze);break}}}b.push("<",Et);for(var Lr=0;Lr<Ge;Lr++){var rr=ke.item(Lr);rr.prefix=="xmlns"?U.push({prefix:rr.localName,namespace:rr.value}):rr.nodeName=="xmlns"&&U.push({prefix:"",namespace:rr.value})}for(var Lr=0;Lr<Ge;Lr++){var rr=ke.item(Lr);if(Je(rr,le,U)){var Pr=rr.prefix||"",et=rr.namespaceURI;Ut(b,Pr?"xmlns:"+Pr:"xmlns",et),U.push({prefix:Pr,namespace:et})}zt(rr,b,D,U)}if(Ze===Et&&Je(y,le,U)){var Pr=y.prefix||"",et=y.namespaceURI;Ut(b,Pr?"xmlns:"+Pr:"xmlns",et),U.push({prefix:Pr,namespace:et})}var oi=!tt;if(oi&&(le||y.namespaceURI===l.HTML)&&(oi=o(Ze)),oi)b.push("/>");else{if(b.push(">"),le&&s(Ze))for(;tt;)tt.data?b.push(tt.data):zt(tt,b,D,U.slice()),tt=tt.nextSibling;else for(;tt;)zt(tt,b,D,U.slice()),tt=tt.nextSibling;b.push("</",Et,">")}return;case j:case J:for(var tt=y.firstChild;tt;)zt(tt,b,D,U.slice()),tt=tt.nextSibling;return;case W:return Ut(b,y.name,y.value);case w:return b.push(y.data.replace(/[<&>]/g,we));case q:return b.push(h.CDATA_START,y.data,h.CDATA_END);case L:return b.push(h.COMMENT_START,y.data,h.COMMENT_END);case H:var qi=y.publicId,Vr=y.systemId;b.push(h.DOCTYPE_DECL_START," ",y.name),qi?(b.push(" ",h.PUBLIC," ",qi),Vr&&Vr!=="."&&b.push(" ",Vr)):Vr&&Vr!=="."&&b.push(" ",h.SYSTEM," ",Vr),y.internalSubset&&b.push(" [",y.internalSubset,"]"),b.push(">");return;case A:return b.push("<?",y.target," ",y.data,"?>");case S:return b.push("&",y.nodeName,";");default:b.push("??",y.nodeName)}}function Rr(y,b,D){var U;switch(b.nodeType){case I:U=b.cloneNode(!1),U.ownerDocument=y;case J:break;case W:D=!0;break}if(U||(U=b.cloneNode(!1)),U.ownerDocument=y,U.parentNode=null,D)for(var ne=b.firstChild;ne;)U.appendChild(Rr(y,ne,D)),ne=ne.nextSibling;return U}function In(y,b,D){var U=new b.constructor(u);for(var ne in b)if(n(b,ne)){var le=b[ne];typeof le!="object"&&le!=U[ne]&&(U[ne]=le)}switch(b.childNodes&&(U.childNodes=new Z),U.ownerDocument=y,U.nodeType){case I:var ke=b.attributes,Ge=U.attributes=new ue,Ze=ke.length;Ge._ownerElement=U;for(var Et=0;Et<Ze;Et++)U.setAttributeNode(In(y,ke.item(Et),!0));break;case W:D=!0}if(D)for(var st=b.firstChild;st;)U.appendChild(In(y,st,D)),st=st.nextSibling;return U}function wr(y,b,D){y[b]=D}try{if(Object.defineProperty){let y=function(b){switch(b.nodeType){case I:case J:var D=[];for(b=b.firstChild;b;)b.nodeType!==7&&b.nodeType!==8&&D.push(y(b)),b=b.nextSibling;return D.join("");default:return b.nodeValue}};Object.defineProperty(Y.prototype,"length",{get:function(){return oe(this),this.$$length}}),Object.defineProperty(ae.prototype,"textContent",{get:function(){return y(this)},set:function(b){switch(this.nodeType){case I:case J:for(;this.firstChild;)this.removeChild(this.firstChild);(b||String(b))&&this.appendChild(this.ownerDocument.createTextNode(b));break;default:this.data=b,this.value=b,this.nodeValue=b}}}),wr=function(b,D,U){b["$$"+D]=U}}}catch{}return Ye._updateLiveList=oe,Ye.Attr=it,Ye.CDATASection=Ir,Ye.CharacterData=ht,Ye.Comment=hr,Ye.Document=Se,Ye.DocumentFragment=yr,Ye.DocumentType=pr,Ye.DOMImplementation=_e,Ye.Element=Fe,Ye.Entity=Ct,Ye.EntityReference=mr,Ye.LiveNodeList=Y,Ye.NamedNodeMap=ue,Ye.Node=ae,Ye.NodeList=Z,Ye.Notation=gr,Ye.Text=fr,Ye.ProcessingInstruction=tr,Ye.XMLSerializer=Kr,Ye}var di={},xu={},Eh;function d2(){return Eh||(Eh=1,function(r){var e=Ds().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),r.entityMap=r.HTML_ENTITIES}(xu)),xu}var Js={},wh;function f2(){if(wh)return Js;wh=1;var r=Ds(),e=iy(),t=Rl(),n=r.isHTMLEscapableRawTextElement,i=r.isHTMLMimeType,s=r.isHTMLRawTextElement,o=r.hasOwn,a=r.NAMESPACE,l=t.ParseError,u=t.DOMException,c=0,f=1,d=2,h=3,p=4,m=5,_=6,C=7;function v(){}v.prototype={parse:function(A,L,j){var H=this.domBuilder;H.startDocument(),I(L,L=Object.create(null)),M(A,L,j,H,this.errorHandler),H.endDocument()}};var k=/&#?\w+;?/g;function M(A,L,j,H,J){var z=i(H.mimeType);A.indexOf(e.UNICODE_REPLACEMENT_CHARACTER)>=0&&J.warning("Unicode replacement character detected, source encoding issues?");function Q(me){if(me>65535){me-=65536;var Fe=55296+(me>>10),it=56320+(me&1023);return String.fromCharCode(Fe,it)}else return String.fromCharCode(me)}function ie(me){var Fe=me[me.length-1]===";"?me:me+";";if(!z&&Fe!==me)return J.error("EntityRef: expecting ;"),me;var it=e.Reference.exec(Fe);if(!it||it[0].length!==Fe.length)return J.error("entity not matching Reference production: "+me),me;var ht=Fe.slice(1,-1);return o(j,ht)?j[ht]:ht.charAt(0)==="#"?Q(parseInt(ht.substring(1).replace("x","0x"))):(J.error("entity not found:"+me),me)}function te(me){if(me>_e){var Fe=A.substring(_e,me).replace(k,ie);ue&&de(_e),H.characters(Fe,0,me-_e),_e=me}}var Z=0,Y=0,oe=/\r\n?|\n|$/g,ue=H.locator;function de(me,Fe){for(;me>=Y&&(Fe=oe.exec(A));)Z=Y,Y=Fe.index+Fe[0].length,ue.lineNumber++;ue.columnNumber=me-Z+1}for(var pe=[{currentNSMap:L}],ge=[],_e=0;;){try{var ae=A.indexOf("<",_e);if(ae<0){if(!z&&ge.length>0)return J.fatalError("unclosed xml tag(s): "+ge.join(", "));if(!A.substring(_e).match(/^\s*$/)){var we=H.doc,Ie=we.createTextNode(A.substring(_e));if(we.documentElement)return J.error("Extra content at the end of the document");we.appendChild(Ie),H.currentElement=Ie}return}if(ae>_e){var Se=A.substring(_e,ae);!z&&ge.length===0&&(Se=Se.replace(new RegExp(e.S_OPT.source,"g"),""),Se&&J.error("Unexpected content outside root element: '"+Se+"'")),te(ae)}switch(A.charAt(ae+1)){case"/":var Ue=A.indexOf(">",ae+2),Qt=A.substring(ae+2,Ue>0?Ue:void 0);if(!Qt)return J.fatalError("end tag name missing");var jt=Ue>0&&e.reg("^",e.QName_group,e.S_OPT,"$").exec(Qt);if(!jt)return J.fatalError('end tag name contains invalid characters: "'+Qt+'"');if(!H.currentElement&&!H.doc.documentElement)return;var Ot=ge[ge.length-1]||H.currentElement.tagName||H.doc.documentElement.tagName||"";if(Ot!==jt[1]){var lr=jt[1].toLowerCase();if(!z||Ot.toLowerCase()!==lr)return J.fatalError('Opening and ending tag mismatch: "'+Ot+'" != "'+Qt+'"')}var Zt=pe.pop();ge.pop();var ur=Zt.localNSMap;if(H.endElement(Zt.uri,Zt.localName,Ot),ur)for(var ft in ur)o(ur,ft)&&H.endPrefixMapping(ft);Ue++;break;case"?":ue&&de(ae),Ue=S(A,ae,H,J);break;case"!":ue&&de(ae),Ue=q(A,ae,H,J,z);break;default:ue&&de(ae);var Re=new K,nt=pe[pe.length-1].currentNSMap,Ue=x(A,ae,Re,nt,ie,J,z),Or=Re.length;if(Re.closed||(z&&r.isHTMLVoidElement(Re.tagName)?Re.closed=!0:ge.push(Re.tagName)),ue&&Or){for(var cr=P(ue,{}),er=0;er<Or;er++){var dr=Re[er];de(dr.offset),dr.locator=P(ue,{})}H.locator=cr,O(Re,H,nt)&&pe.push(Re),H.locator=ue}else O(Re,H,nt)&&pe.push(Re);z&&!Re.closed?Ue=N(A,Ue,Re.tagName,ie,H):Ue++}}catch(me){if(me instanceof l)throw me;if(me instanceof u)throw new l(me.name+": "+me.message,H.locator,me);J.error("element parse error: "+me),Ue=-1}Ue>_e?_e=Ue:te(Math.max(ae,_e)+1)}}function P(A,L){return L.lineNumber=A.lineNumber,L.columnNumber=A.columnNumber,L}function x(A,L,j,H,J,z,Q){function ie(de,pe,ge){if(o(j.attributeNames,de))return z.fatalError("Attribute "+de+" redefined");if(!Q&&pe.indexOf("<")>=0)return z.fatalError("Unescaped '<' not allowed in attributes values");j.addValue(de,pe.replace(/[\t\n\r]/g," ").replace(k,J),ge)}for(var te,Z,Y=++L,oe=c;;){var ue=A.charAt(Y);switch(ue){case"=":if(oe===f)te=A.slice(L,Y),oe=h;else if(oe===d)oe=h;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(oe===h||oe===f)if(oe===f&&(z.warning('attribute value must after "="'),te=A.slice(L,Y)),L=Y+1,Y=A.indexOf(ue,L),Y>0)Z=A.slice(L,Y),ie(te,Z,L-1),oe=m;else throw new Error("attribute value no end '"+ue+"' match");else if(oe==p)Z=A.slice(L,Y),ie(te,Z,L),z.warning('attribute "'+te+'" missed start quot('+ue+")!!"),L=Y+1,oe=m;else throw new Error('attribute value must after "="');break;case"/":switch(oe){case c:j.setTagName(A.slice(L,Y));case m:case _:case C:oe=C,j.closed=!0;case p:case f:break;case d:j.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return z.error("unexpected end of input"),oe==c&&j.setTagName(A.slice(L,Y)),Y;case">":switch(oe){case c:j.setTagName(A.slice(L,Y));case m:case _:case C:break;case p:case f:Z=A.slice(L,Y),Z.slice(-1)==="/"&&(j.closed=!0,Z=Z.slice(0,-1));case d:oe===d&&(Z=te),oe==p?(z.warning('attribute "'+Z+'" missed quot(")!'),ie(te,Z,L)):(Q||z.warning('attribute "'+Z+'" missed value!! "'+Z+'" instead!!'),ie(Z,Z,L));break;case h:if(!Q)return z.fatalError(`AttValue: ' or " expected`)}return Y;case"":ue=" ";default:if(ue<=" ")switch(oe){case c:j.setTagName(A.slice(L,Y)),oe=_;break;case f:te=A.slice(L,Y),oe=d;break;case p:var Z=A.slice(L,Y);z.warning('attribute "'+Z+'" missed quot(")!!'),ie(te,Z,L);case m:oe=_;break}else switch(oe){case d:Q||z.warning('attribute "'+te+'" missed value!! "'+te+'" instead2!!'),ie(te,te,L),L=Y,oe=f;break;case m:z.warning('attribute space is required"'+te+'"!!');case _:oe=f,L=Y;break;case h:oe=p,L=Y;break;case C:throw new Error("elements closed character '/' and '>' must be connected to")}}Y++}}function O(A,L,j){for(var H=A.tagName,J=null,oe=A.length;oe--;){var z=A[oe],Q=z.qName,ie=z.value,ue=Q.indexOf(":");if(ue>0)var te=z.prefix=Q.slice(0,ue),Z=Q.slice(ue+1),Y=te==="xmlns"&&Z;else Z=Q,te=null,Y=Q==="xmlns"&&"";z.localName=Z,Y!==!1&&(J==null&&(J=Object.create(null),I(j,j=Object.create(null))),j[Y]=J[Y]=ie,z.uri=a.XMLNS,L.startPrefixMapping(Y,ie))}for(var oe=A.length;oe--;)z=A[oe],z.prefix&&(z.prefix==="xml"&&(z.uri=a.XML),z.prefix!=="xmlns"&&(z.uri=j[z.prefix]));var ue=H.indexOf(":");ue>0?(te=A.prefix=H.slice(0,ue),Z=A.localName=H.slice(ue+1)):(te=null,Z=A.localName=H);var de=A.uri=j[te||""];if(L.startElement(de,Z,H,A),A.closed){if(L.endElement(de,Z,H),J)for(te in J)o(J,te)&&L.endPrefixMapping(te)}else return A.currentNSMap=j,A.localNSMap=J,!0}function N(A,L,j,H,J){var z=n(j);if(z||s(j)){var Q=A.indexOf("</"+j+">",L),ie=A.substring(L+1,Q);return z&&(ie=ie.replace(k,H)),J.characters(ie,0,ie.length),Q}return L+1}function I(A,L){for(var j in A)o(A,j)&&(L[j]=A[j])}function W(A,L){var j=L;function H(Y){return Y=Y||0,A.charAt(j+Y)}function J(Y){Y=Y||1,j+=Y}function z(){for(var Y=0;j<A.length;){var oe=H();if(oe!==" "&&oe!==`
`&&oe!=="	"&&oe!=="\r")return Y;Y++,J()}return-1}function Q(){return A.substring(j)}function ie(Y){return A.substring(j,j+Y.length)===Y}function te(Y){return A.substring(j,j+Y.length).toUpperCase()===Y.toUpperCase()}function Z(Y){var oe=e.reg("^",Y),ue=oe.exec(Q());return ue?(J(ue[0].length),ue[0]):null}return{char:H,getIndex:function(){return j},getMatch:Z,getSource:function(){return A},skip:J,skipBlanks:z,substringFromIndex:Q,substringStartsWith:ie,substringStartsWithCaseInsensitive:te}}function w(A,L){function j(ie,te){var Z=e.PI.exec(ie.substringFromIndex());return Z?Z[1].toLowerCase()==="xml"?te.fatalError("xml declaration is only allowed at the start of the document, but found at position "+ie.getIndex()):(ie.skip(Z[0].length),Z[0]):te.fatalError("processing instruction is not well-formed at position "+ie.getIndex())}var H=A.getSource();if(A.char()==="["){A.skip(1);for(var J=A.getIndex();A.getIndex()<H.length;){if(A.skipBlanks(),A.char()==="]"){var z=H.substring(J,A.getIndex());return A.skip(1),z}var Q=null;if(A.char()==="<"&&A.char(1)==="!")switch(A.char(2)){case"E":A.char(3)==="L"?Q=A.getMatch(e.elementdecl):A.char(3)==="N"&&(Q=A.getMatch(e.EntityDecl));break;case"A":Q=A.getMatch(e.AttlistDecl);break;case"N":Q=A.getMatch(e.NotationDecl);break;case"-":Q=A.getMatch(e.Comment);break}else if(A.char()==="<"&&A.char(1)==="?")Q=j(A,L);else if(A.char()==="%")Q=A.getMatch(e.PEReference);else return L.fatalError("Error detected in Markup declaration");if(!Q)return L.fatalError("Error in internal subset at position "+A.getIndex())}return L.fatalError("doctype internal subset is not well-formed, missing ]")}}function q(A,L,j,H,J){var z=W(A,L);switch(J?z.char(2).toUpperCase():z.char(2)){case"-":var Q=z.getMatch(e.Comment);return Q?(j.comment(Q,e.COMMENT_START.length,Q.length-e.COMMENT_START.length-e.COMMENT_END.length),z.getIndex()):H.fatalError("comment is not well-formed at position "+z.getIndex());case"[":var ie=z.getMatch(e.CDSect);return ie?!J&&!j.currentElement?H.fatalError("CDATA outside of element"):(j.startCDATA(),j.characters(ie,e.CDATA_START.length,ie.length-e.CDATA_START.length-e.CDATA_END.length),j.endCDATA(),z.getIndex()):H.fatalError("Invalid CDATA starting at position "+L);case"D":{if(j.doc&&j.doc.documentElement)return H.fatalError("Doctype not allowed inside or after documentElement at position "+z.getIndex());if(J?!z.substringStartsWithCaseInsensitive(e.DOCTYPE_DECL_START):!z.substringStartsWith(e.DOCTYPE_DECL_START))return H.fatalError("Expected "+e.DOCTYPE_DECL_START+" at position "+z.getIndex());if(z.skip(e.DOCTYPE_DECL_START.length),z.skipBlanks()<1)return H.fatalError("Expected whitespace after "+e.DOCTYPE_DECL_START+" at position "+z.getIndex());var te={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(te.name=z.getMatch(e.Name),!te.name)return H.fatalError("doctype name missing or contains unexpected characters at position "+z.getIndex());if(J&&te.name.toLowerCase()!=="html"&&H.warning("Unexpected DOCTYPE in HTML document at position "+z.getIndex()),z.skipBlanks(),z.substringStartsWith(e.PUBLIC)||z.substringStartsWith(e.SYSTEM)){var Z=e.ExternalID_match.exec(z.substringFromIndex());if(!Z)return H.fatalError("doctype external id is not well-formed at position "+z.getIndex());Z.groups.SystemLiteralOnly!==void 0?te.systemId=Z.groups.SystemLiteralOnly:(te.systemId=Z.groups.SystemLiteral,te.publicId=Z.groups.PubidLiteral),z.skip(Z[0].length)}else if(J&&z.substringStartsWithCaseInsensitive(e.SYSTEM)){if(z.skip(e.SYSTEM.length),z.skipBlanks()<1)return H.fatalError("Expected whitespace after "+e.SYSTEM+" at position "+z.getIndex());if(te.systemId=z.getMatch(e.ABOUT_LEGACY_COMPAT_SystemLiteral),!te.systemId)return H.fatalError("Expected "+e.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+e.SYSTEM+" at position "+z.getIndex())}return J&&te.systemId&&!e.ABOUT_LEGACY_COMPAT_SystemLiteral.test(te.systemId)&&H.warning("Unexpected doctype.systemId in HTML document at position "+z.getIndex()),J||(z.skipBlanks(),te.internalSubset=w(z,H)),z.skipBlanks(),z.char()!==">"?H.fatalError("doctype not terminated with > at position "+z.getIndex()):(z.skip(1),j.startDTD(te.name,te.publicId,te.systemId,te.internalSubset),j.endDTD(),z.getIndex())}default:return H.fatalError('Not well-formed XML starting with "<!" at position '+L)}}function S(A,L,j,H){var J=A.substring(L).match(e.PI);if(!J)return H.fatalError("Invalid processing instruction starting at position "+L);if(J[1].toLowerCase()==="xml"){if(L>0)return H.fatalError("processing instruction at position "+L+" is an xml declaration which is only at the start of the document");if(!e.XMLDecl.test(A.substring(L)))return H.fatalError("xml declaration is not well-formed")}return j.processingInstruction(J[1],J[2]),L+J[0].length}function K(){this.attributeNames=Object.create(null)}return K.prototype={setTagName:function(A){if(!e.QName_exact.test(A))throw new Error("invalid tagName:"+A);this.tagName=A},addValue:function(A,L,j){if(!e.QName_exact.test(A))throw new Error("invalid attribute:"+A);this.attributeNames[A]=this.length,this[this.length++]={qName:A,value:L,offset:j}},length:0,getLocalName:function(A){return this[A].localName},getLocator:function(A){return this[A].locator},getQName:function(A){return this[A].qName},getURI:function(A){return this[A].uri},getValue:function(A){return this[A].value}},Js.XMLReader=v,Js.parseUtils=W,Js.parseDoctypeCommentOrCData=q,Js}var kh;function h2(){if(kh)return di;kh=1;var r=Ds(),e=sy(),t=Rl(),n=d2(),i=f2(),s=e.DOMImplementation,o=r.hasDefaultHTMLNamespace,a=r.isHTMLMimeType,l=r.isValidMimeType,u=r.MIME_TYPE,c=r.NAMESPACE,f=t.ParseError,d=i.XMLReader;function h(x){return x.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function p(x){if(x=x||{},x.locator===void 0&&(x.locator=!0),this.assign=x.assign||r.assign,this.domHandler=x.domHandler||m,this.onError=x.onError||x.errorHandler,x.errorHandler&&typeof x.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");x.errorHandler&&x.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=x.normalizeLineEndings||h,this.locator=!!x.locator,this.xmlns=this.assign(Object.create(null),x.xmlns)}p.prototype.parseFromString=function(x,O){if(!l(O))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+O+'" is not valid.');var N=this.assign(Object.create(null),this.xmlns),I=n.XML_ENTITIES,W=N[""]||null;o(O)?(I=n.HTML_ENTITIES,W=c.HTML):O===u.XML_SVG_IMAGE&&(W=c.SVG),N[""]=W,N.xml=N.xml||c.XML;var w=new this.domHandler({mimeType:O,defaultNamespace:W,onError:this.onError}),q=this.locator?{}:void 0;this.locator&&w.setDocumentLocator(q);var S=new d;S.errorHandler=w,S.domBuilder=w;var K=!r.isHTMLMimeType(O);return K&&typeof x!="string"&&S.errorHandler.fatalError("source is not a string"),S.parse(this.normalizeLineEndings(String(x)),N,I),w.doc.documentElement||S.errorHandler.fatalError("missing root element"),w.doc};function m(x){var O=x||{};this.mimeType=O.mimeType||u.XML_APPLICATION,this.defaultNamespace=O.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=O.onError}function _(x,O){O.lineNumber=x.lineNumber,O.columnNumber=x.columnNumber}m.prototype={startDocument:function(){var x=new s;this.doc=a(this.mimeType)?x.createHTMLDocument(!1):x.createDocument(this.defaultNamespace,"")},startElement:function(x,O,N,I){var W=this.doc,w=W.createElementNS(x,N||O),q=I.length;k(this,w),this.currentElement=w,this.locator&&_(this.locator,w);for(var S=0;S<q;S++){var x=I.getURI(S),K=I.getValue(S),N=I.getQName(S),A=W.createAttributeNS(x,N);this.locator&&_(I.getLocator(S),A),A.value=A.nodeValue=K,w.setAttributeNode(A)}},endElement:function(x,O,N){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(x,O){},endPrefixMapping:function(x){},processingInstruction:function(x,O){var N=this.doc.createProcessingInstruction(x,O);this.locator&&_(this.locator,N),k(this,N)},ignorableWhitespace:function(x,O,N){},characters:function(x,O,N){if(x=v.apply(this,arguments),x){if(this.cdata)var I=this.doc.createCDATASection(x);else var I=this.doc.createTextNode(x);this.currentElement?this.currentElement.appendChild(I):/^\s*$/.test(x)&&this.doc.appendChild(I),this.locator&&_(this.locator,I)}},skippedEntity:function(x){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(x){x&&(x.lineNumber=0),this.locator=x},comment:function(x,O,N){x=v.apply(this,arguments);var I=this.doc.createComment(x);this.locator&&_(this.locator,I),k(this,I)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(x,O,N,I){var W=this.doc.implementation;if(W&&W.createDocumentType){var w=W.createDocumentType(x,O,N,I);this.locator&&_(this.locator,w),k(this,w),this.doc.doctype=w}},reportError:function(x,O){if(typeof this.onError=="function")try{this.onError(x,O,this)}catch(N){throw new f("Reporting "+x+' "'+O+'" caused '+N,this.locator)}else console.error("[xmldom "+x+"]	"+O,C(this.locator))},warning:function(x){this.reportError("warning",x)},error:function(x){this.reportError("error",x)},fatalError:function(x){throw this.reportError("fatalError",x),new f(x,this.locator)}};function C(x){if(x)return`
@#[line:`+x.lineNumber+",col:"+x.columnNumber+"]"}function v(x,O,N){return typeof x=="string"?x.substr(O,N):x.length>=O+N||O?new java.lang.String(x,O,N)+"":x}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(x){m.prototype[x]=function(){return null}});function k(x,O){x.currentElement?x.currentElement.appendChild(O):x.doc.appendChild(O)}function M(x){if(x==="error")throw"onErrorStopParsing"}function P(){throw"onWarningStopParsing"}return di.__DOMHandler=m,di.DOMParser=p,di.normalizeLineEndings=h,di.onErrorStopParsing=M,di.onWarningStopParsing=P,di}var xh;function p2(){if(xh)return xe;xh=1;var r=Ds();xe.assign=r.assign,xe.hasDefaultHTMLNamespace=r.hasDefaultHTMLNamespace,xe.isHTMLMimeType=r.isHTMLMimeType,xe.isValidMimeType=r.isValidMimeType,xe.MIME_TYPE=r.MIME_TYPE,xe.NAMESPACE=r.NAMESPACE;var e=Rl();xe.DOMException=e.DOMException,xe.DOMExceptionName=e.DOMExceptionName,xe.ExceptionCode=e.ExceptionCode,xe.ParseError=e.ParseError;var t=sy();xe.Attr=t.Attr,xe.CDATASection=t.CDATASection,xe.CharacterData=t.CharacterData,xe.Comment=t.Comment,xe.Document=t.Document,xe.DocumentFragment=t.DocumentFragment,xe.DocumentType=t.DocumentType,xe.DOMImplementation=t.DOMImplementation,xe.Element=t.Element,xe.Entity=t.Entity,xe.EntityReference=t.EntityReference,xe.LiveNodeList=t.LiveNodeList,xe.NamedNodeMap=t.NamedNodeMap,xe.Node=t.Node,xe.NodeList=t.NodeList,xe.Notation=t.Notation,xe.ProcessingInstruction=t.ProcessingInstruction,xe.Text=t.Text,xe.XMLSerializer=t.XMLSerializer;var n=h2();return xe.DOMParser=n.DOMParser,xe.normalizeLineEndings=n.normalizeLineEndings,xe.onErrorStopParsing=n.onErrorStopParsing,xe.onWarningStopParsing=n.onWarningStopParsing,xe}var g2=p2();const Ti="USJ",Ai="3.1",m2=["type","marker","content","sid","eid","number","code","altnumber","pubnumber","caller","align","category"];function y2(r){return _2.includes(r)}const _2=["GEN","EXO","LEV","NUM","DEU","JOS","JDG","RUT","1SA","2SA","1KI","2KI","1CH","2CH","EZR","NEH","EST","JOB","PSA","PRO","ECC","SNG","ISA","JER","LAM","EZK","DAN","HOS","JOL","AMO","OBA","JON","MIC","NAM","HAB","ZEP","HAG","ZEC","MAL","MAT","MRK","LUK","JHN","ACT","ROM","1CO","2CO","GAL","EPH","PHP","COL","1TH","2TH","1TI","2TI","TIT","PHM","HEB","JAS","1PE","2PE","1JN","2JN","3JN","JUD","REV","TOB","JDT","ESG","WIS","SIR","BAR","LJE","S3Y","SUS","BEL","1MA","2MA","3MA","4MA","1ES","2ES","MAN","PS2","ODA","PSS","EZA","5EZ","6EZ","DAG","PS3","2BA","LBA","JUB","ENO","1MQ","2MQ","3MQ","REP","4BA","LAO","FRT","BAK","OTH","INT","CNC","GLO","TDX","NDX","XXA","XXB","XXC","XXD","XXE","XXF","XXG"],b2="usx";function Ns(r){const e=new g2.DOMParser().parseFromString(r,"text/xml");return v2(e.documentElement)}function v2(r){const[e]=r?oy(r):[{content:[]}];return e.type=Ti,e.version=Ai,e}function oy(r){const e={};let t=r.tagName,n,i,s="append";if(["row","cell"].includes(t)&&(t="table:"+t),r.attributes)for(const l of Array.from(r.attributes))e[l.name]=l.value;e.style&&(n=e.style,delete e.style),e.vid&&delete e.vid,e.status&&delete e.status;let o={type:t};n&&(o.marker=n),o={...o,...e},r.firstChild&&r.firstChild.nodeType===r.firstChild.TEXT_NODE&&r.firstChild.nodeValue&&Sh(r.firstChild.nodeValue)!==""&&(i=r.firstChild.nodeValue);const a=Array.from(r.childNodes);o.content=[],i&&o.content.push(i);for(const l of a){if(l.tagName===void 0)continue;const[u,c]=oy(l);switch(c){case"append":o.content.push(u);break;case"merge":o.content=o.content.concat(u);break}l.nextSibling&&l.nextSibling.nodeType===l.nextSibling.TEXT_NODE&&l.nextSibling.nodeValue&&(Sh(l.nextSibling.nodeValue)!==""||l.nextSibling.nodeValue===" ")&&o.content.push(l.nextSibling.nodeValue)}return o.content.length===0&&o.type!==b2&&delete o.content,"eid"in o&&["verse","chapter"].includes(t)&&(s="ignore"),[o,s]}function Sh(r){return r.replace(/(^[ \t\n\r\f\v]+)|([ \t\n\r\f\v]+$)/g,"")}const hc="$",ay=".content[";function C2(r){const e=r.split(ay);if(e.shift()!==hc)throw new Error(`indexesFromJsonPath: jsonPath didn't start with '${hc}'`);return e.map(t=>parseInt(t,10))}function E2(r){return r.reduce((e,t)=>`${e}${ay}${t}]`,hc)}const w2=new Map;function Th(r){let e=r;for(;e!=null;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function Ah(r){const e=r.parentNode;if(e==null)throw new Error("Should never happen");return[e,Array.from(e.childNodes).indexOf(r)]}function k2(r,e,t,n,i){const s=e.getKey(),o=n.getKey(),a=document.createRange();let l=r.getElementByKey(s),u=r.getElementByKey(o),c=t,f=i;if(ee(e)&&(l=Th(l)),ee(n)&&(u=Th(u)),e===void 0||n===void 0||l===null||u===null)return null;l.nodeName==="BR"&&([l,c]=Ah(l)),u.nodeName==="BR"&&([u,f]=Ah(u));const d=l.firstChild;l===u&&d!=null&&d.nodeName==="BR"&&c===0&&f===0&&(f=1);try{a.setStart(l,c),a.setEnd(u,f)}catch{return null}return!a.collapsed||c===f&&s===o||(a.setStart(u,f),a.setEnd(l,c)),a}function x2(r,e){const t=r.getRootElement();if(t===null)return[];const n=t.getBoundingClientRect(),i=getComputedStyle(t),s=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),o=Array.from(e.getClientRects());let a,l=o.length;o.sort((u,c)=>{const f=u.top-c.top;return Math.abs(f)<=3?u.left-c.left:f});for(let u=0;u<l;u++){const c=o[u],f=a&&a.top<=c.top&&a.top+a.height>c.top&&a.left+a.width>c.left,d=c.width+s===n.width;f||d?(o.splice(u--,1),l--):a=c}return o}function S2(r){const e={};if(!r)return e;const t=r.split(";");for(const n of t)if(n!==""){const[i,s]=n.split(/:([^]+)/);i&&s&&(e[i.trim()]=s.trim())}return e}function ly(r,e){const t=r.getStartEndPoints();if(e.isSelected(r)&&!bn(e)&&t!==null){const[n,i]=t,s=r.isBackward(),o=n.getNode(),a=i.getNode(),l=e.is(o),u=e.is(a);if(l||u){const[c,f]=tc(r),d=o.is(a),h=e.is(s?a:o),p=e.is(s?o:a);let m,_=0;d?(_=c>f?f:c,m=c>f?c:f):h?(_=s?f:c,m=void 0):p&&(_=0,m=s?c:f),e.__text=e.__text.slice(_,m)}}return e}function T2(r){const e=r.getStyle(),t=S2(e);w2.set(e,t)}function A2(r,e){const t=r.getFormatType(),n=r.getIndent();t!==e.getFormatType()&&e.setFormat(t),n!==e.getIndent()&&e.setIndent(n)}function D2(r,e,t=A2){if(r===null)return;const n=r.getStartEndPoints(),i=new Map;let s=null;if(n){const[o,a]=n;s=Mo(),s.anchor.set(o.key,o.offset,o.type),s.focus.set(a.key,a.offset,a.type);const l=Su(o.getNode(),Sr),u=Su(a.getNode(),Sr);V(l)&&i.set(l.getKey(),l),V(u)&&i.set(u.getKey(),u)}for(const o of r.getNodes())if(V(o)&&Sr(o))i.set(o.getKey(),o);else if(n===null){const a=Su(o,Sr);V(a)&&i.set(a.getKey(),a)}for(const[o,a]of i){const l=e();t(a,l),a.replace(l,!0),s&&(o===s.anchor.key&&s.anchor.set(l.getKey(),s.anchor.offset,s.anchor.type),o===s.focus.key&&s.focus.set(l.getKey(),s.focus.offset,s.focus.type))}s&&r.is(re())&&Mt(s)}function uy(r){const e=r.anchor.getNode(),t=St(e)?e:e.getParentOrThrow(),n=Ml().getElementByKey(t.getKey());if(n===null)return!1;const i=n.ownerDocument.defaultView;return i===null?!1:i.getComputedStyle(n).writingMode==="vertical-rl"}function nl(r,e){let t=uy(r)?!e:e;cy(r)&&(t=!t);const n=Tn(r.focus,t?"previous":"next");if(ry(n))return!1;for(const i of Od(n)){if(qr(i))return!i.origin.isInline();if(!V(i.origin)){if(Le(i.origin))return!0;break}}return!1}function N2(r,e,t,n){r.modify(e?"extend":"move",t,n)}function cy(r){const e=r.anchor.getNode();return(St(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}function il(r,e,t){const n=cy(r);let i;i=uy(r)||n?!t:t,N2(r,e,i,"character")}function Su(r,e){let t=r;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function M2(r,...e){const t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",r);for(const i of e)n.append("v",i);throw t.search=n.toString(),Error(`Minified Lexical error #${r}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Ro=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,O2=Ro&&"documentMode"in document?document.documentMode:null,I2=Ro&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),R2=Ro&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!Ro||!("InputEvent"in window)||O2)&&"getTargetRanges"in new window.InputEvent("input");function dy(...r){const e=[];for(const t of r)if(t&&typeof t=="string")for(const[n]of t.matchAll(/\S+/g))e.push(n);return e}function _t(...r){return()=>{for(let e=r.length-1;e>=0;e--)r[e]();r.length=0}}const L2=Ro,pc=I2,P2=R2;function Pt(r,...e){const t=dy(...e);t.length>0&&r.classList.add(...t)}function bi(r,...e){const t=dy(...e);t.length>0&&r.classList.remove(...t)}function Id(r,e){return Array.from(F2(r))}function F2(r,e){return $2("next",r)}function $2(r,e,t){const n=De(),i=e||n,s=V(i)?zr(i,r):ut(i,r),o=B2(i),a=function(u,c){const f=Nh(ut(u,c));return f&&f[0]}(i,r);let l=o;return Ol({hasNext:u=>u!==null,initial:s,map:u=>({depth:l,node:u.origin}),step:u=>{if(u.isSameNodeCaret(a))return null;qr(u)&&l++;const c=Nh(u);return!c||c[0].isSameNodeCaret(a)?null:(l+=c[1],c[0])}})}function B2(r){let e=-1;for(let t=r;t!==null;t=t.getParent())e++;return e}function q2(r){const e=Yn(r,t=>V(t)&&!t.isInline());return V(e)||M2(4,r.__key),e}const Yn=(r,e)=>{let t=r;for(;t!==De()&&t!=null;){if(e(t))return t;t=t.getParent()}return null};function fy(r,e,t,n){const i=s=>s instanceof e;return r.registerNodeTransform(e,s=>{const o=(a=>{const l=a.getChildren();for(let f=0;f<l.length;f++){const d=l[f];if(i(d))return null}let u=a,c=a;for(;u!==null;)if(c=u,u=u.getParent(),i(u))return{child:c,parent:u};return null})(s);if(o!==null){const{child:a,parent:l}=o;if(a.is(s)){n(l,s);const u=a.getNextSiblings(),c=u.length;if(l.insertAfter(a),c!==0){const f=t(l);a.insertAfter(f);for(let d=0;d<c;d++)f.append(u[d])}l.canBeEmpty()||l.getChildrenSize()!==0||l.remove()}}})}function wn(r,e){return r!==null&&Object.getPrototypeOf(r).constructor.name===e.name}let Tu=!(P2||!L2)&&void 0;function j2(r){let e=1;if(function(){if(Tu===void 0){const t=document.createElement("div");t.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(t);const n=t.getBoundingClientRect();t.style.setProperty("zoom","2"),Tu=t.getBoundingClientRect().width===n.width,document.body.removeChild(t)}return Tu}())for(;r;)e*=Number(window.getComputedStyle(r).getPropertyValue("zoom")),r=r.parentElement;return e}function hy(r,e){const t=[],n=Array.from(r).reverse();for(let i=n.pop();i!==void 0;i=n.pop())if(e(i))t.push(i);else if(V(i))for(const s of U2(i))n.push(s);return t}function U2(r){return z2(zr(r,"previous"))}function z2(r){return Ol({hasNext:xi,initial:r.getAdjacentCaret(),map:e=>e.origin.getLatest(),step:e=>e.getAdjacentCaret()})}function Dh(r){Il(ut(r,"next")).splice(1,r.getChildren())}function Nh(r,e="root"){let t=0,n=r,i=mo(n);for(;i===null;){if(t--,i=n.getParentCaret(e),!i)return null;n=i,i=mo(n)}return i&&[i,t]}function py(){return De().getTextContent()}function gy(r,e=!0){if(r)return!1;let t=py();return e&&(t=t.trim()),t===""}function H2(r){if(!gy(r,!1))return!1;const e=De().getChildren(),t=e.length;if(t>1)return!1;for(let n=0;n<t;n++){const i=e[n];if(Le(i))return!1;if(V(i)){if(!_d(i)||i.__indent!==0)return!1;const s=i.getChildren(),o=s.length;for(let a=0;a<o;a++){const l=s[n];if(!ee(l))return!1}}}return!0}function Rd(r){return()=>H2(r)}var la={exports:{}},Au,Mh;function W2(){if(Mh)return Au;Mh=1;var r=-1,e=1,t=0;function n(w,q,S,K,A){if(w===q)return w?[[t,w]]:[];if(S!=null){var L=I(w,q,S);if(L)return L}var j=a(w,q),H=w.substring(0,j);w=w.substring(j),q=q.substring(j),j=u(w,q);var J=w.substring(w.length-j);w=w.substring(0,w.length-j),q=q.substring(0,q.length-j);var z=i(w,q);return H&&z.unshift([t,H]),J&&z.push([t,J]),v(z,A),K&&f(z),z}function i(w,q){var S;if(!w)return[[e,q]];if(!q)return[[r,w]];var K=w.length>q.length?w:q,A=w.length>q.length?q:w,L=K.indexOf(A);if(L!==-1)return S=[[e,K.substring(0,L)],[t,A],[e,K.substring(L+A.length)]],w.length>q.length&&(S[0][0]=S[2][0]=r),S;if(A.length===1)return[[r,w],[e,q]];var j=c(w,q);if(j){var H=j[0],J=j[1],z=j[2],Q=j[3],ie=j[4],te=n(H,z),Z=n(J,Q);return te.concat([[t,ie]],Z)}return s(w,q)}function s(w,q){for(var S=w.length,K=q.length,A=Math.ceil((S+K)/2),L=A,j=2*A,H=new Array(j),J=new Array(j),z=0;z<j;z++)H[z]=-1,J[z]=-1;H[L+1]=0,J[L+1]=0;for(var Q=S-K,ie=Q%2!==0,te=0,Z=0,Y=0,oe=0,ue=0;ue<A;ue++){for(var de=-ue+te;de<=ue-Z;de+=2){var pe=L+de,ge;de===-ue||de!==ue&&H[pe-1]<H[pe+1]?ge=H[pe+1]:ge=H[pe-1]+1;for(var _e=ge-de;ge<S&&_e<K&&w.charAt(ge)===q.charAt(_e);)ge++,_e++;if(H[pe]=ge,ge>S)Z+=2;else if(_e>K)te+=2;else if(ie){var ae=L+Q-de;if(ae>=0&&ae<j&&J[ae]!==-1){var we=S-J[ae];if(ge>=we)return o(w,q,ge,_e)}}}for(var Ie=-ue+Y;Ie<=ue-oe;Ie+=2){var ae=L+Ie,we;Ie===-ue||Ie!==ue&&J[ae-1]<J[ae+1]?we=J[ae+1]:we=J[ae-1]+1;for(var Se=we-Ie;we<S&&Se<K&&w.charAt(S-we-1)===q.charAt(K-Se-1);)we++,Se++;if(J[ae]=we,we>S)oe+=2;else if(Se>K)Y+=2;else if(!ie){var pe=L+Q-Ie;if(pe>=0&&pe<j&&H[pe]!==-1){var ge=H[pe],_e=L+ge-pe;if(we=S-we,ge>=we)return o(w,q,ge,_e)}}}}return[[r,w],[e,q]]}function o(w,q,S,K){var A=w.substring(0,S),L=q.substring(0,K),j=w.substring(S),H=q.substring(K),J=n(A,L),z=n(j,H);return J.concat(z)}function a(w,q){if(!w||!q||w.charAt(0)!==q.charAt(0))return 0;for(var S=0,K=Math.min(w.length,q.length),A=K,L=0;S<A;)w.substring(L,A)==q.substring(L,A)?(S=A,L=S):K=A,A=Math.floor((K-S)/2+S);return k(w.charCodeAt(A-1))&&A--,A}function l(w,q){var S=w.length,K=q.length;if(S==0||K==0)return 0;S>K?w=w.substring(S-K):S<K&&(q=q.substring(0,S));var A=Math.min(S,K);if(w==q)return A;for(var L=0,j=1;;){var H=w.substring(A-j),J=q.indexOf(H);if(J==-1)return L;j+=J,(J==0||w.substring(A-j)==q.substring(0,j))&&(L=j,j++)}}function u(w,q){if(!w||!q||w.slice(-1)!==q.slice(-1))return 0;for(var S=0,K=Math.min(w.length,q.length),A=K,L=0;S<A;)w.substring(w.length-A,w.length-L)==q.substring(q.length-A,q.length-L)?(S=A,L=S):K=A,A=Math.floor((K-S)/2+S);return M(w.charCodeAt(w.length-A))&&A--,A}function c(w,q){var S=w.length>q.length?w:q,K=w.length>q.length?q:w;if(S.length<4||K.length*2<S.length)return null;function A(Z,Y,oe){for(var ue=Z.substring(oe,oe+Math.floor(Z.length/4)),de=-1,pe="",ge,_e,ae,we;(de=Y.indexOf(ue,de+1))!==-1;){var Ie=a(Z.substring(oe),Y.substring(de)),Se=u(Z.substring(0,oe),Y.substring(0,de));pe.length<Se+Ie&&(pe=Y.substring(de-Se,de)+Y.substring(de,de+Ie),ge=Z.substring(0,oe-Se),_e=Z.substring(oe+Ie),ae=Y.substring(0,de-Se),we=Y.substring(de+Ie))}return pe.length*2>=Z.length?[ge,_e,ae,we,pe]:null}var L=A(S,K,Math.ceil(S.length/4)),j=A(S,K,Math.ceil(S.length/2)),H;if(!L&&!j)return null;j?L?H=L[4].length>j[4].length?L:j:H=j:H=L;var J,z,Q,ie;w.length>q.length?(J=H[0],z=H[1],Q=H[2],ie=H[3]):(Q=H[0],ie=H[1],J=H[2],z=H[3]);var te=H[4];return[J,z,Q,ie,te]}function f(w){for(var q=!1,S=[],K=0,A=null,L=0,j=0,H=0,J=0,z=0;L<w.length;)w[L][0]==t?(S[K++]=L,j=J,H=z,J=0,z=0,A=w[L][1]):(w[L][0]==e?J+=w[L][1].length:z+=w[L][1].length,A&&A.length<=Math.max(j,H)&&A.length<=Math.max(J,z)&&(w.splice(S[K-1],0,[r,A]),w[S[K-1]+1][0]=e,K--,K--,L=K>0?S[K-1]:-1,j=0,H=0,J=0,z=0,A=null,q=!0)),L++;for(q&&v(w),C(w),L=1;L<w.length;){if(w[L-1][0]==r&&w[L][0]==e){var Q=w[L-1][1],ie=w[L][1],te=l(Q,ie),Z=l(ie,Q);te>=Z?(te>=Q.length/2||te>=ie.length/2)&&(w.splice(L,0,[t,ie.substring(0,te)]),w[L-1][1]=Q.substring(0,Q.length-te),w[L+1][1]=ie.substring(te),L++):(Z>=Q.length/2||Z>=ie.length/2)&&(w.splice(L,0,[t,Q.substring(0,Z)]),w[L-1][0]=e,w[L-1][1]=ie.substring(0,ie.length-Z),w[L+1][0]=r,w[L+1][1]=Q.substring(Z),L++),L++}L++}}var d=/[^a-zA-Z0-9]/,h=/\s/,p=/[\r\n]/,m=/\n\r?\n$/,_=/^\r?\n\r?\n/;function C(w){function q(Z,Y){if(!Z||!Y)return 6;var oe=Z.charAt(Z.length-1),ue=Y.charAt(0),de=oe.match(d),pe=ue.match(d),ge=de&&oe.match(h),_e=pe&&ue.match(h),ae=ge&&oe.match(p),we=_e&&ue.match(p),Ie=ae&&Z.match(m),Se=we&&Y.match(_);return Ie||Se?5:ae||we?4:de&&!ge&&_e?3:ge||_e?2:de||pe?1:0}for(var S=1;S<w.length-1;){if(w[S-1][0]==t&&w[S+1][0]==t){var K=w[S-1][1],A=w[S][1],L=w[S+1][1],j=u(K,A);if(j){var H=A.substring(A.length-j);K=K.substring(0,K.length-j),A=H+A.substring(0,A.length-j),L=H+L}for(var J=K,z=A,Q=L,ie=q(K,A)+q(A,L);A.charAt(0)===L.charAt(0);){K+=A.charAt(0),A=A.substring(1)+L.charAt(0),L=L.substring(1);var te=q(K,A)+q(A,L);te>=ie&&(ie=te,J=K,z=A,Q=L)}w[S-1][1]!=J&&(J?w[S-1][1]=J:(w.splice(S-1,1),S--),w[S][1]=z,Q?w[S+1][1]=Q:(w.splice(S+1,1),S--))}S++}}function v(w,q){w.push([t,""]);for(var S=0,K=0,A=0,L="",j="",H;S<w.length;){if(S<w.length-1&&!w[S][1]){w.splice(S,1);continue}switch(w[S][0]){case e:A++,j+=w[S][1],S++;break;case r:K++,L+=w[S][1],S++;break;case t:var J=S-A-K-1;if(q){if(J>=0&&x(w[J][1])){var z=w[J][1].slice(-1);if(w[J][1]=w[J][1].slice(0,-1),L=z+L,j=z+j,!w[J][1]){w.splice(J,1),S--;var Q=J-1;w[Q]&&w[Q][0]===e&&(A++,j=w[Q][1]+j,Q--),w[Q]&&w[Q][0]===r&&(K++,L=w[Q][1]+L,Q--),J=Q}}if(P(w[S][1])){var z=w[S][1].charAt(0);w[S][1]=w[S][1].slice(1),L+=z,j+=z}}if(S<w.length-1&&!w[S][1]){w.splice(S,1);break}if(L.length>0||j.length>0){L.length>0&&j.length>0&&(H=a(j,L),H!==0&&(J>=0?w[J][1]+=j.substring(0,H):(w.splice(0,0,[t,j.substring(0,H)]),S++),j=j.substring(H),L=L.substring(H)),H=u(j,L),H!==0&&(w[S][1]=j.substring(j.length-H)+w[S][1],j=j.substring(0,j.length-H),L=L.substring(0,L.length-H)));var ie=A+K;L.length===0&&j.length===0?(w.splice(S-ie,ie),S=S-ie):L.length===0?(w.splice(S-ie,ie,[e,j]),S=S-ie+1):j.length===0?(w.splice(S-ie,ie,[r,L]),S=S-ie+1):(w.splice(S-ie,ie,[r,L],[e,j]),S=S-ie+2)}S!==0&&w[S-1][0]===t?(w[S-1][1]+=w[S][1],w.splice(S,1)):S++,A=0,K=0,L="",j="";break}}w[w.length-1][1]===""&&w.pop();var te=!1;for(S=1;S<w.length-1;)w[S-1][0]===t&&w[S+1][0]===t&&(w[S][1].substring(w[S][1].length-w[S-1][1].length)===w[S-1][1]?(w[S][1]=w[S-1][1]+w[S][1].substring(0,w[S][1].length-w[S-1][1].length),w[S+1][1]=w[S-1][1]+w[S+1][1],w.splice(S-1,1),te=!0):w[S][1].substring(0,w[S+1][1].length)==w[S+1][1]&&(w[S-1][1]+=w[S+1][1],w[S][1]=w[S][1].substring(w[S+1][1].length)+w[S+1][1],w.splice(S+1,1),te=!0)),S++;te&&v(w,q)}function k(w){return w>=55296&&w<=56319}function M(w){return w>=56320&&w<=57343}function P(w){return M(w.charCodeAt(0))}function x(w){return k(w.charCodeAt(w.length-1))}function O(w){for(var q=[],S=0;S<w.length;S++)w[S][1].length>0&&q.push(w[S]);return q}function N(w,q,S,K){return x(w)||P(K)?null:O([[t,w],[r,q],[e,S],[t,K]])}function I(w,q,S){var K=typeof S=="number"?{index:S,length:0}:S.oldRange,A=typeof S=="number"?null:S.newRange,L=w.length,j=q.length;if(K.length===0&&(A===null||A.length===0)){var H=K.index,J=w.slice(0,H),z=w.slice(H),Q=A?A.index:null;e:{var ie=H+j-L;if(Q!==null&&Q!==ie||ie<0||ie>j)break e;var te=q.slice(0,ie),Z=q.slice(ie);if(Z!==z)break e;var Y=Math.min(H,ie),oe=J.slice(0,Y),ue=te.slice(0,Y);if(oe!==ue)break e;var de=J.slice(Y),pe=te.slice(Y);return N(oe,de,pe,z)}e:{if(Q!==null&&Q!==H)break e;var ge=H,te=q.slice(0,ge),Z=q.slice(ge);if(te!==J)break e;var _e=Math.min(L-ge,j-ge),ae=z.slice(z.length-_e),we=Z.slice(Z.length-_e);if(ae!==we)break e;var de=z.slice(0,z.length-_e),pe=Z.slice(0,Z.length-_e);return N(J,de,pe,ae)}}if(K.length>0&&A&&A.length===0)e:{var oe=w.slice(0,K.index),ae=w.slice(K.index+K.length),Y=oe.length,_e=ae.length;if(j<Y+_e)break e;var ue=q.slice(0,Y),we=q.slice(j-_e);if(oe!==ue||ae!==we)break e;var de=w.slice(Y,L-_e),pe=q.slice(Y,j-_e);return N(oe,de,pe,ae)}return null}function W(w,q,S,K){return n(w,q,S,K,!0)}return W.INSERT=e,W.DELETE=r,W.EQUAL=t,Au=W,Au}var Zs={exports:{}};Zs.exports;var Oh;function my(){return Oh||(Oh=1,function(r,e){var t=200,n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",f="[object GeneratorFunction]",d="[object Map]",h="[object Number]",p="[object Object]",m="[object Promise]",_="[object RegExp]",C="[object Set]",v="[object String]",k="[object Symbol]",M="[object WeakMap]",P="[object ArrayBuffer]",x="[object DataView]",O="[object Float32Array]",N="[object Float64Array]",I="[object Int8Array]",W="[object Int16Array]",w="[object Int32Array]",q="[object Uint8Array]",S="[object Uint8ClampedArray]",K="[object Uint16Array]",A="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,j=/\w*$/,H=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,z={};z[s]=z[o]=z[P]=z[x]=z[a]=z[l]=z[O]=z[N]=z[I]=z[W]=z[w]=z[d]=z[h]=z[p]=z[_]=z[C]=z[v]=z[k]=z[q]=z[S]=z[K]=z[A]=!0,z[u]=z[c]=z[M]=!1;var Q=typeof $n=="object"&&$n&&$n.Object===Object&&$n,ie=typeof self=="object"&&self&&self.Object===Object&&self,te=Q||ie||Function("return this")(),Z=e&&!e.nodeType&&e,Y=Z&&!0&&r&&!r.nodeType&&r,oe=Y&&Y.exports===Z;function ue(g,E){return g.set(E[0],E[1]),g}function de(g,E){return g.add(E),g}function pe(g,E){for(var R=-1,X=g?g.length:0;++R<X&&E(g[R],R,g)!==!1;);return g}function ge(g,E){for(var R=-1,X=E.length,ve=g.length;++R<X;)g[ve+R]=E[R];return g}function _e(g,E,R,X){for(var ve=-1,he=g?g.length:0;++ve<he;)R=E(R,g[ve],ve,g);return R}function ae(g,E){for(var R=-1,X=Array(g);++R<g;)X[R]=E(R);return X}function we(g,E){return g==null?void 0:g[E]}function Ie(g){var E=!1;if(g!=null&&typeof g.toString!="function")try{E=!!(g+"")}catch{}return E}function Se(g){var E=-1,R=Array(g.size);return g.forEach(function(X,ve){R[++E]=[ve,X]}),R}function Qt(g,E){return function(R){return g(E(R))}}function jt(g){var E=-1,R=Array(g.size);return g.forEach(function(X){R[++E]=X}),R}var Ot=Array.prototype,lr=Function.prototype,Zt=Object.prototype,ur=te["__core-js_shared__"],ft=function(){var g=/[^.]+$/.exec(ur&&ur.keys&&ur.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Re=lr.toString,nt=Zt.hasOwnProperty,Ue=Zt.toString,Or=RegExp("^"+Re.call(nt).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cr=oe?te.Buffer:void 0,er=te.Symbol,dr=te.Uint8Array,me=Qt(Object.getPrototypeOf,Object),Fe=Object.create,it=Zt.propertyIsEnumerable,ht=Ot.splice,fr=Object.getOwnPropertySymbols,hr=cr?cr.isBuffer:void 0,Ir=Qt(Object.keys,Object),pr=Fr(te,"DataView"),gr=Fr(te,"Map"),Ct=Fr(te,"Promise"),mr=Fr(te,"Set"),yr=Fr(te,"WeakMap"),tr=Fr(Object,"create"),Kr=Ht(pr),$e=Ht(gr),Je=Ht(Ct),Ut=Ht(mr),zt=Ht(yr),Rr=er?er.prototype:void 0,In=Rr?Rr.valueOf:void 0;function wr(g){var E=-1,R=g?g.length:0;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function y(){this.__data__=tr?tr(null):{}}function b(g){return this.has(g)&&delete this.__data__[g]}function D(g){var E=this.__data__;if(tr){var R=E[g];return R===n?void 0:R}return nt.call(E,g)?E[g]:void 0}function U(g){var E=this.__data__;return tr?E[g]!==void 0:nt.call(E,g)}function ne(g,E){var R=this.__data__;return R[g]=tr&&E===void 0?n:E,this}wr.prototype.clear=y,wr.prototype.delete=b,wr.prototype.get=D,wr.prototype.has=U,wr.prototype.set=ne;function le(g){var E=-1,R=g?g.length:0;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function ke(){this.__data__=[]}function Ge(g){var E=this.__data__,R=Ui(E,g);if(R<0)return!1;var X=E.length-1;return R==X?E.pop():ht.call(E,R,1),!0}function Ze(g){var E=this.__data__,R=Ui(E,g);return R<0?void 0:E[R][1]}function Et(g){return Ui(this.__data__,g)>-1}function st(g,E){var R=this.__data__,X=Ui(R,g);return X<0?R.push([g,E]):R[X][1]=E,this}le.prototype.clear=ke,le.prototype.delete=Ge,le.prototype.get=Ze,le.prototype.has=Et,le.prototype.set=st;function Ke(g){var E=-1,R=g?g.length:0;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function _r(){this.__data__={hash:new wr,map:new(gr||le),string:new wr}}function It(g){return li(this,g).delete(g)}function Lr(g){return li(this,g).get(g)}function rr(g){return li(this,g).has(g)}function Pr(g,E){return li(this,g).set(g,E),this}Ke.prototype.clear=_r,Ke.prototype.delete=It,Ke.prototype.get=Lr,Ke.prototype.has=rr,Ke.prototype.set=Pr;function et(g){this.__data__=new le(g)}function oi(){this.__data__=new le}function tt(g){return this.__data__.delete(g)}function qi(g){return this.__data__.get(g)}function Vr(g){return this.__data__.has(g)}function Kl(g,E){var R=this.__data__;if(R instanceof le){var X=R.__data__;if(!gr||X.length<t-1)return X.push([g,E]),this;R=this.__data__=new Ke(X)}return R.set(g,E),this}et.prototype.clear=oi,et.prototype.delete=tt,et.prototype.get=qi,et.prototype.has=Vr,et.prototype.set=Kl;function ji(g,E){var R=Us(g)||Hi(g)?ae(g.length,String):[],X=R.length,ve=!!X;for(var he in g)nt.call(g,he)&&!(ve&&(he=="length"||ou(he,X)))&&R.push(he);return R}function Wo(g,E,R){var X=g[E];(!(nt.call(g,E)&&Yo(X,R))||R===void 0&&!(E in g))&&(g[E]=R)}function Ui(g,E){for(var R=g.length;R--;)if(Yo(g[R][0],E))return R;return-1}function Jr(g,E){return g&&js(E,Hs(E),g)}function Bs(g,E,R,X,ve,he,Me){var Ne;if(X&&(Ne=he?X(g,ve,he,Me):X(g)),Ne!==void 0)return Ne;if(!Yr(g))return g;var rt=Us(g);if(rt){if(Ne=iu(g),!E)return tu(g,Ne)}else{var Pe=hn(g),Rt=Pe==c||Pe==f;if(Xo(g))return zi(g,E);if(Pe==p||Pe==s||Rt&&!he){if(Ie(g))return he?g:{};if(Ne=Gr(Rt?{}:g),!E)return ru(g,Jr(Ne,g))}else{if(!z[Pe])return he?g:{};Ne=su(g,Pe,Bs,E)}}Me||(Me=new et);var nr=Me.get(g);if(nr)return nr;if(Me.set(g,Ne),!rt)var ot=R?nu(g):Hs(g);return pe(ot||g,function(Lt,wt){ot&&(wt=Lt,Lt=g[wt]),Wo(Ne,wt,Bs(Lt,E,R,X,wt,g,Me))}),Ne}function Vl(g){return Yr(g)?Fe(g):{}}function Jl(g,E,R){var X=E(g);return Us(g)?X:ge(X,R(g))}function Gl(g){return Ue.call(g)}function Yl(g){if(!Yr(g)||lu(g))return!1;var E=zs(g)||Ie(g)?Or:H;return E.test(Ht(g))}function Xl(g){if(!Jo(g))return Ir(g);var E=[];for(var R in Object(g))nt.call(g,R)&&R!="constructor"&&E.push(R);return E}function zi(g,E){if(E)return g.slice();var R=new g.constructor(g.length);return g.copy(R),R}function qs(g){var E=new g.constructor(g.byteLength);return new dr(E).set(new dr(g)),E}function ai(g,E){var R=E?qs(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.byteLength)}function Ko(g,E,R){var X=E?R(Se(g),!0):Se(g);return _e(X,ue,new g.constructor)}function Vo(g){var E=new g.constructor(g.source,j.exec(g));return E.lastIndex=g.lastIndex,E}function Ql(g,E,R){var X=E?R(jt(g),!0):jt(g);return _e(X,de,new g.constructor)}function Zl(g){return In?Object(In.call(g)):{}}function eu(g,E){var R=E?qs(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.length)}function tu(g,E){var R=-1,X=g.length;for(E||(E=Array(X));++R<X;)E[R]=g[R];return E}function js(g,E,R,X){R||(R={});for(var ve=-1,he=E.length;++ve<he;){var Me=E[ve],Ne=void 0;Wo(R,Me,Ne===void 0?g[Me]:Ne)}return R}function ru(g,E){return js(g,fn(g),E)}function nu(g){return Jl(g,Hs,fn)}function li(g,E){var R=g.__data__;return au(E)?R[typeof E=="string"?"string":"hash"]:R.map}function Fr(g,E){var R=we(g,E);return Yl(R)?R:void 0}var fn=fr?Qt(fr,Object):cu,hn=Gl;(pr&&hn(new pr(new ArrayBuffer(1)))!=x||gr&&hn(new gr)!=d||Ct&&hn(Ct.resolve())!=m||mr&&hn(new mr)!=C||yr&&hn(new yr)!=M)&&(hn=function(g){var E=Ue.call(g),R=E==p?g.constructor:void 0,X=R?Ht(R):void 0;if(X)switch(X){case Kr:return x;case $e:return d;case Je:return m;case Ut:return C;case zt:return M}return E});function iu(g){var E=g.length,R=g.constructor(E);return E&&typeof g[0]=="string"&&nt.call(g,"index")&&(R.index=g.index,R.input=g.input),R}function Gr(g){return typeof g.constructor=="function"&&!Jo(g)?Vl(me(g)):{}}function su(g,E,R,X){var ve=g.constructor;switch(E){case P:return qs(g);case a:case l:return new ve(+g);case x:return ai(g,X);case O:case N:case I:case W:case w:case q:case S:case K:case A:return eu(g,X);case d:return Ko(g,X,R);case h:case v:return new ve(g);case _:return Vo(g);case C:return Ql(g,X,R);case k:return Zl(g)}}function ou(g,E){return E=E??i,!!E&&(typeof g=="number"||J.test(g))&&g>-1&&g%1==0&&g<E}function au(g){var E=typeof g;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?g!=="__proto__":g===null}function lu(g){return!!ft&&ft in g}function Jo(g){var E=g&&g.constructor,R=typeof E=="function"&&E.prototype||Zt;return g===R}function Ht(g){if(g!=null){try{return Re.call(g)}catch{}try{return g+""}catch{}}return""}function Go(g){return Bs(g,!0,!0)}function Yo(g,E){return g===E||g!==g&&E!==E}function Hi(g){return uu(g)&&nt.call(g,"callee")&&(!it.call(g,"callee")||Ue.call(g)==s)}var Us=Array.isArray;function Wi(g){return g!=null&&Qo(g.length)&&!zs(g)}function uu(g){return Zo(g)&&Wi(g)}var Xo=hr||du;function zs(g){var E=Yr(g)?Ue.call(g):"";return E==c||E==f}function Qo(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=i}function Yr(g){var E=typeof g;return!!g&&(E=="object"||E=="function")}function Zo(g){return!!g&&typeof g=="object"}function Hs(g){return Wi(g)?ji(g):Xl(g)}function cu(){return[]}function du(){return!1}r.exports=Go}(Zs,Zs.exports)),Zs.exports}var eo={exports:{}};eo.exports;var Ih;function yy(){return Ih||(Ih=1,function(r,e){var t=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",_="[object Number]",C="[object Null]",v="[object Object]",k="[object Promise]",M="[object Proxy]",P="[object RegExp]",x="[object Set]",O="[object String]",N="[object Symbol]",I="[object Undefined]",W="[object WeakMap]",w="[object ArrayBuffer]",q="[object DataView]",S="[object Float32Array]",K="[object Float64Array]",A="[object Int8Array]",L="[object Int16Array]",j="[object Int32Array]",H="[object Uint8Array]",J="[object Uint8ClampedArray]",z="[object Uint16Array]",Q="[object Uint32Array]",ie=/[\\^$.*+?()[\]{}|]/g,te=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,Y={};Y[S]=Y[K]=Y[A]=Y[L]=Y[j]=Y[H]=Y[J]=Y[z]=Y[Q]=!0,Y[a]=Y[l]=Y[w]=Y[c]=Y[q]=Y[f]=Y[d]=Y[h]=Y[m]=Y[_]=Y[v]=Y[P]=Y[x]=Y[O]=Y[W]=!1;var oe=typeof $n=="object"&&$n&&$n.Object===Object&&$n,ue=typeof self=="object"&&self&&self.Object===Object&&self,de=oe||ue||Function("return this")(),pe=e&&!e.nodeType&&e,ge=pe&&!0&&r&&!r.nodeType&&r,_e=ge&&ge.exports===pe,ae=_e&&oe.process,we=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Ie=we&&we.isTypedArray;function Se(g,E){for(var R=-1,X=g==null?0:g.length,ve=0,he=[];++R<X;){var Me=g[R];E(Me,R,g)&&(he[ve++]=Me)}return he}function Qt(g,E){for(var R=-1,X=E.length,ve=g.length;++R<X;)g[ve+R]=E[R];return g}function jt(g,E){for(var R=-1,X=g==null?0:g.length;++R<X;)if(E(g[R],R,g))return!0;return!1}function Ot(g,E){for(var R=-1,X=Array(g);++R<g;)X[R]=E(R);return X}function lr(g){return function(E){return g(E)}}function Zt(g,E){return g.has(E)}function ur(g,E){return g==null?void 0:g[E]}function ft(g){var E=-1,R=Array(g.size);return g.forEach(function(X,ve){R[++E]=[ve,X]}),R}function Re(g,E){return function(R){return g(E(R))}}function nt(g){var E=-1,R=Array(g.size);return g.forEach(function(X){R[++E]=X}),R}var Ue=Array.prototype,Or=Function.prototype,cr=Object.prototype,er=de["__core-js_shared__"],dr=Or.toString,me=cr.hasOwnProperty,Fe=function(){var g=/[^.]+$/.exec(er&&er.keys&&er.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),it=cr.toString,ht=RegExp("^"+dr.call(me).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fr=_e?de.Buffer:void 0,hr=de.Symbol,Ir=de.Uint8Array,pr=cr.propertyIsEnumerable,gr=Ue.splice,Ct=hr?hr.toStringTag:void 0,mr=Object.getOwnPropertySymbols,yr=fr?fr.isBuffer:void 0,tr=Re(Object.keys,Object),Kr=fn(de,"DataView"),$e=fn(de,"Map"),Je=fn(de,"Promise"),Ut=fn(de,"Set"),zt=fn(de,"WeakMap"),Rr=fn(Object,"create"),In=Ht(Kr),wr=Ht($e),y=Ht(Je),b=Ht(Ut),D=Ht(zt),U=hr?hr.prototype:void 0,ne=U?U.valueOf:void 0;function le(g){var E=-1,R=g==null?0:g.length;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function ke(){this.__data__=Rr?Rr(null):{},this.size=0}function Ge(g){var E=this.has(g)&&delete this.__data__[g];return this.size-=E?1:0,E}function Ze(g){var E=this.__data__;if(Rr){var R=E[g];return R===n?void 0:R}return me.call(E,g)?E[g]:void 0}function Et(g){var E=this.__data__;return Rr?E[g]!==void 0:me.call(E,g)}function st(g,E){var R=this.__data__;return this.size+=this.has(g)?0:1,R[g]=Rr&&E===void 0?n:E,this}le.prototype.clear=ke,le.prototype.delete=Ge,le.prototype.get=Ze,le.prototype.has=Et,le.prototype.set=st;function Ke(g){var E=-1,R=g==null?0:g.length;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function _r(){this.__data__=[],this.size=0}function It(g){var E=this.__data__,R=zi(E,g);if(R<0)return!1;var X=E.length-1;return R==X?E.pop():gr.call(E,R,1),--this.size,!0}function Lr(g){var E=this.__data__,R=zi(E,g);return R<0?void 0:E[R][1]}function rr(g){return zi(this.__data__,g)>-1}function Pr(g,E){var R=this.__data__,X=zi(R,g);return X<0?(++this.size,R.push([g,E])):R[X][1]=E,this}Ke.prototype.clear=_r,Ke.prototype.delete=It,Ke.prototype.get=Lr,Ke.prototype.has=rr,Ke.prototype.set=Pr;function et(g){var E=-1,R=g==null?0:g.length;for(this.clear();++E<R;){var X=g[E];this.set(X[0],X[1])}}function oi(){this.size=0,this.__data__={hash:new le,map:new($e||Ke),string:new le}}function tt(g){var E=Fr(this,g).delete(g);return this.size-=E?1:0,E}function qi(g){return Fr(this,g).get(g)}function Vr(g){return Fr(this,g).has(g)}function Kl(g,E){var R=Fr(this,g),X=R.size;return R.set(g,E),this.size+=R.size==X?0:1,this}et.prototype.clear=oi,et.prototype.delete=tt,et.prototype.get=qi,et.prototype.has=Vr,et.prototype.set=Kl;function ji(g){var E=-1,R=g==null?0:g.length;for(this.__data__=new et;++E<R;)this.add(g[E])}function Wo(g){return this.__data__.set(g,n),this}function Ui(g){return this.__data__.has(g)}ji.prototype.add=ji.prototype.push=Wo,ji.prototype.has=Ui;function Jr(g){var E=this.__data__=new Ke(g);this.size=E.size}function Bs(){this.__data__=new Ke,this.size=0}function Vl(g){var E=this.__data__,R=E.delete(g);return this.size=E.size,R}function Jl(g){return this.__data__.get(g)}function Gl(g){return this.__data__.has(g)}function Yl(g,E){var R=this.__data__;if(R instanceof Ke){var X=R.__data__;if(!$e||X.length<t-1)return X.push([g,E]),this.size=++R.size,this;R=this.__data__=new et(X)}return R.set(g,E),this.size=R.size,this}Jr.prototype.clear=Bs,Jr.prototype.delete=Vl,Jr.prototype.get=Jl,Jr.prototype.has=Gl,Jr.prototype.set=Yl;function Xl(g,E){var R=Hi(g),X=!R&&Yo(g),ve=!R&&!X&&Wi(g),he=!R&&!X&&!ve&&Zo(g),Me=R||X||ve||he,Ne=Me?Ot(g.length,String):[],rt=Ne.length;for(var Pe in g)me.call(g,Pe)&&!(Me&&(Pe=="length"||ve&&(Pe=="offset"||Pe=="parent")||he&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||su(Pe,rt)))&&Ne.push(Pe);return Ne}function zi(g,E){for(var R=g.length;R--;)if(Go(g[R][0],E))return R;return-1}function qs(g,E,R){var X=E(g);return Hi(g)?X:Qt(X,R(g))}function ai(g){return g==null?g===void 0?I:C:Ct&&Ct in Object(g)?hn(g):Jo(g)}function Ko(g){return Yr(g)&&ai(g)==a}function Vo(g,E,R,X,ve){return g===E?!0:g==null||E==null||!Yr(g)&&!Yr(E)?g!==g&&E!==E:Ql(g,E,R,X,Vo,ve)}function Ql(g,E,R,X,ve,he){var Me=Hi(g),Ne=Hi(E),rt=Me?l:Gr(g),Pe=Ne?l:Gr(E);rt=rt==a?v:rt,Pe=Pe==a?v:Pe;var Rt=rt==v,nr=Pe==v,ot=rt==Pe;if(ot&&Wi(g)){if(!Wi(E))return!1;Me=!0,Rt=!1}if(ot&&!Rt)return he||(he=new Jr),Me||Zo(g)?js(g,E,R,X,ve,he):ru(g,E,rt,R,X,ve,he);if(!(R&i)){var Lt=Rt&&me.call(g,"__wrapped__"),wt=nr&&me.call(E,"__wrapped__");if(Lt||wt){var Rn=Lt?g.value():g,pn=wt?E.value():E;return he||(he=new Jr),ve(Rn,pn,R,X,he)}}return ot?(he||(he=new Jr),nu(g,E,R,X,ve,he)):!1}function Zl(g){if(!Qo(g)||au(g))return!1;var E=Xo(g)?ht:te;return E.test(Ht(g))}function eu(g){return Yr(g)&&zs(g.length)&&!!Y[ai(g)]}function tu(g){if(!lu(g))return tr(g);var E=[];for(var R in Object(g))me.call(g,R)&&R!="constructor"&&E.push(R);return E}function js(g,E,R,X,ve,he){var Me=R&i,Ne=g.length,rt=E.length;if(Ne!=rt&&!(Me&&rt>Ne))return!1;var Pe=he.get(g);if(Pe&&he.get(E))return Pe==E;var Rt=-1,nr=!0,ot=R&s?new ji:void 0;for(he.set(g,E),he.set(E,g);++Rt<Ne;){var Lt=g[Rt],wt=E[Rt];if(X)var Rn=Me?X(wt,Lt,Rt,E,g,he):X(Lt,wt,Rt,g,E,he);if(Rn!==void 0){if(Rn)continue;nr=!1;break}if(ot){if(!jt(E,function(pn,ui){if(!Zt(ot,ui)&&(Lt===pn||ve(Lt,pn,R,X,he)))return ot.push(ui)})){nr=!1;break}}else if(!(Lt===wt||ve(Lt,wt,R,X,he))){nr=!1;break}}return he.delete(g),he.delete(E),nr}function ru(g,E,R,X,ve,he,Me){switch(R){case q:if(g.byteLength!=E.byteLength||g.byteOffset!=E.byteOffset)return!1;g=g.buffer,E=E.buffer;case w:return!(g.byteLength!=E.byteLength||!he(new Ir(g),new Ir(E)));case c:case f:case _:return Go(+g,+E);case d:return g.name==E.name&&g.message==E.message;case P:case O:return g==E+"";case m:var Ne=ft;case x:var rt=X&i;if(Ne||(Ne=nt),g.size!=E.size&&!rt)return!1;var Pe=Me.get(g);if(Pe)return Pe==E;X|=s,Me.set(g,E);var Rt=js(Ne(g),Ne(E),X,ve,he,Me);return Me.delete(g),Rt;case N:if(ne)return ne.call(g)==ne.call(E)}return!1}function nu(g,E,R,X,ve,he){var Me=R&i,Ne=li(g),rt=Ne.length,Pe=li(E),Rt=Pe.length;if(rt!=Rt&&!Me)return!1;for(var nr=rt;nr--;){var ot=Ne[nr];if(!(Me?ot in E:me.call(E,ot)))return!1}var Lt=he.get(g);if(Lt&&he.get(E))return Lt==E;var wt=!0;he.set(g,E),he.set(E,g);for(var Rn=Me;++nr<rt;){ot=Ne[nr];var pn=g[ot],ui=E[ot];if(X)var pf=Me?X(ui,pn,ot,E,g,he):X(pn,ui,ot,g,E,he);if(!(pf===void 0?pn===ui||ve(pn,ui,R,X,he):pf)){wt=!1;break}Rn||(Rn=ot=="constructor")}if(wt&&!Rn){var ea=g.constructor,ta=E.constructor;ea!=ta&&"constructor"in g&&"constructor"in E&&!(typeof ea=="function"&&ea instanceof ea&&typeof ta=="function"&&ta instanceof ta)&&(wt=!1)}return he.delete(g),he.delete(E),wt}function li(g){return qs(g,Hs,iu)}function Fr(g,E){var R=g.__data__;return ou(E)?R[typeof E=="string"?"string":"hash"]:R.map}function fn(g,E){var R=ur(g,E);return Zl(R)?R:void 0}function hn(g){var E=me.call(g,Ct),R=g[Ct];try{g[Ct]=void 0;var X=!0}catch{}var ve=it.call(g);return X&&(E?g[Ct]=R:delete g[Ct]),ve}var iu=mr?function(g){return g==null?[]:(g=Object(g),Se(mr(g),function(E){return pr.call(g,E)}))}:cu,Gr=ai;(Kr&&Gr(new Kr(new ArrayBuffer(1)))!=q||$e&&Gr(new $e)!=m||Je&&Gr(Je.resolve())!=k||Ut&&Gr(new Ut)!=x||zt&&Gr(new zt)!=W)&&(Gr=function(g){var E=ai(g),R=E==v?g.constructor:void 0,X=R?Ht(R):"";if(X)switch(X){case In:return q;case wr:return m;case y:return k;case b:return x;case D:return W}return E});function su(g,E){return E=E??o,!!E&&(typeof g=="number"||Z.test(g))&&g>-1&&g%1==0&&g<E}function ou(g){var E=typeof g;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?g!=="__proto__":g===null}function au(g){return!!Fe&&Fe in g}function lu(g){var E=g&&g.constructor,R=typeof E=="function"&&E.prototype||cr;return g===R}function Jo(g){return it.call(g)}function Ht(g){if(g!=null){try{return dr.call(g)}catch{}try{return g+""}catch{}}return""}function Go(g,E){return g===E||g!==g&&E!==E}var Yo=Ko(function(){return arguments}())?Ko:function(g){return Yr(g)&&me.call(g,"callee")&&!pr.call(g,"callee")},Hi=Array.isArray;function Us(g){return g!=null&&zs(g.length)&&!Xo(g)}var Wi=yr||du;function uu(g,E){return Vo(g,E)}function Xo(g){if(!Qo(g))return!1;var E=ai(g);return E==h||E==p||E==u||E==M}function zs(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=o}function Qo(g){var E=typeof g;return g!=null&&(E=="object"||E=="function")}function Yr(g){return g!=null&&typeof g=="object"}var Zo=Ie?lr(Ie):eu;function Hs(g){return Us(g)?Xl(g):tu(g)}function cu(){return[]}function du(){return!1}r.exports=uu}(eo,eo.exports)),eo.exports}var ua={},Rh;function K2(){if(Rh)return ua;Rh=1,Object.defineProperty(ua,"__esModule",{value:!0});const r=my(),e=yy();var t;return function(n){function i(l={},u={},c=!1){typeof l!="object"&&(l={}),typeof u!="object"&&(u={});let f=r(u);c||(f=Object.keys(f).reduce((d,h)=>(f[h]!=null&&(d[h]=f[h]),d),{}));for(const d in l)l[d]!==void 0&&u[d]===void 0&&(f[d]=l[d]);return Object.keys(f).length>0?f:void 0}n.compose=i;function s(l={},u={}){typeof l!="object"&&(l={}),typeof u!="object"&&(u={});const c=Object.keys(l).concat(Object.keys(u)).reduce((f,d)=>(e(l[d],u[d])||(f[d]=u[d]===void 0?null:u[d]),f),{});return Object.keys(c).length>0?c:void 0}n.diff=s;function o(l={},u={}){l=l||{};const c=Object.keys(u).reduce((f,d)=>(u[d]!==l[d]&&l[d]!==void 0&&(f[d]=u[d]),f),{});return Object.keys(l).reduce((f,d)=>(l[d]!==u[d]&&u[d]===void 0&&(f[d]=null),f),c)}n.invert=o;function a(l,u,c=!1){if(typeof l!="object")return u;if(typeof u!="object")return;if(!c)return u;const f=Object.keys(u).reduce((d,h)=>(l[h]===void 0&&(d[h]=u[h]),d),{});return Object.keys(f).length>0?f:void 0}n.transform=a}(t||(t={})),ua.default=t,ua}var ca={},Lh;function _y(){if(Lh)return ca;Lh=1,Object.defineProperty(ca,"__esModule",{value:!0});var r;return function(e){function t(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}e.length=t}(r||(r={})),ca.default=r,ca}var da={},Ph;function V2(){if(Ph)return da;Ph=1,Object.defineProperty(da,"__esModule",{value:!0});const r=_y();class e{constructor(n){this.ops=n,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(n){n||(n=1/0);const i=this.ops[this.index];if(i){const s=this.offset,o=r.default.length(i);if(n>=o-s?(n=o-s,this.index+=1,this.offset=0):this.offset+=n,typeof i.delete=="number")return{delete:n};{const a={};return i.attributes&&(a.attributes=i.attributes),typeof i.retain=="number"?a.retain=n:typeof i.retain=="object"&&i.retain!==null?a.retain=i.retain:typeof i.insert=="string"?a.insert=i.insert.substr(s,n):a.insert=i.insert,a}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?r.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const n=this.ops[this.index];return n?typeof n.delete=="number"?"delete":typeof n.retain=="number"||typeof n.retain=="object"&&n.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const n=this.offset,i=this.index,s=this.next(),o=this.ops.slice(this.index);return this.offset=n,this.index=i,[s].concat(o)}}else return[]}}return da.default=e,da}var Fh;function J2(){return Fh||(Fh=1,function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=W2(),n=my(),i=yy(),s=K2();e.AttributeMap=s.default;const o=_y();e.Op=o.default;const a=V2();e.OpIterator=a.default;const l="\0",u=(f,d)=>{if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);const h=Object.keys(f)[0];if(!h||h!==Object.keys(d)[0])throw new Error(`embed types not matched: ${h} != ${Object.keys(d)[0]}`);return[h,f[h],d[h]]};class c{constructor(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]}static registerEmbed(d,h){this.handlers[d]=h}static unregisterEmbed(d){delete this.handlers[d]}static getHandler(d){const h=this.handlers[d];if(!h)throw new Error(`no handlers for embed type "${d}"`);return h}insert(d,h){const p={};return typeof d=="string"&&d.length===0?this:(p.insert=d,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(p.attributes=h),this.push(p))}delete(d){return d<=0?this:this.push({delete:d})}retain(d,h){if(typeof d=="number"&&d<=0)return this;const p={retain:d};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(p.attributes=h),this.push(p)}push(d){let h=this.ops.length,p=this.ops[h-1];if(d=n(d),typeof p=="object"){if(typeof d.delete=="number"&&typeof p.delete=="number")return this.ops[h-1]={delete:p.delete+d.delete},this;if(typeof p.delete=="number"&&d.insert!=null&&(h-=1,p=this.ops[h-1],typeof p!="object"))return this.ops.unshift(d),this;if(i(d.attributes,p.attributes)){if(typeof d.insert=="string"&&typeof p.insert=="string")return this.ops[h-1]={insert:p.insert+d.insert},typeof d.attributes=="object"&&(this.ops[h-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof p.retain=="number")return this.ops[h-1]={retain:p.retain+d.retain},typeof d.attributes=="object"&&(this.ops[h-1].attributes=d.attributes),this}}return h===this.ops.length?this.ops.push(d):this.ops.splice(h,0,d),this}chop(){const d=this.ops[this.ops.length-1];return d&&typeof d.retain=="number"&&!d.attributes&&this.ops.pop(),this}filter(d){return this.ops.filter(d)}forEach(d){this.ops.forEach(d)}map(d){return this.ops.map(d)}partition(d){const h=[],p=[];return this.forEach(m=>{(d(m)?h:p).push(m)}),[h,p]}reduce(d,h){return this.ops.reduce(d,h)}changeLength(){return this.reduce((d,h)=>h.insert?d+o.default.length(h):h.delete?d-h.delete:d,0)}length(){return this.reduce((d,h)=>d+o.default.length(h),0)}slice(d=0,h=1/0){const p=[],m=new a.default(this.ops);let _=0;for(;_<h&&m.hasNext();){let C;_<d?C=m.next(d-_):(C=m.next(h-_),p.push(C)),_+=o.default.length(C)}return new c(p)}compose(d){const h=new a.default(this.ops),p=new a.default(d.ops),m=[],_=p.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){let v=_.retain;for(;h.peekType()==="insert"&&h.peekLength()<=v;)v-=h.peekLength(),m.push(h.next());_.retain-v>0&&p.next(_.retain-v)}const C=new c(m);for(;h.hasNext()||p.hasNext();)if(p.peekType()==="insert")C.push(p.next());else if(h.peekType()==="delete")C.push(h.next());else{const v=Math.min(h.peekLength(),p.peekLength()),k=h.next(v),M=p.next(v);if(M.retain){const P={};if(typeof k.retain=="number")P.retain=typeof M.retain=="number"?v:M.retain;else if(typeof M.retain=="number")k.retain==null?P.insert=k.insert:P.retain=k.retain;else{const O=k.retain==null?"insert":"retain",[N,I,W]=u(k[O],M.retain),w=c.getHandler(N);P[O]={[N]:w.compose(I,W,O==="retain")}}const x=s.default.compose(k.attributes,M.attributes,typeof k.retain=="number");if(x&&(P.attributes=x),C.push(P),!p.hasNext()&&i(C.ops[C.ops.length-1],P)){const O=new c(h.rest());return C.concat(O).chop()}}else typeof M.delete=="number"&&(typeof k.retain=="number"||typeof k.retain=="object"&&k.retain!==null)&&C.push(M)}return C.chop()}concat(d){const h=new c(this.ops.slice());return d.ops.length>0&&(h.push(d.ops[0]),h.ops=h.ops.concat(d.ops.slice(1))),h}diff(d,h){if(this.ops===d.ops)return new c;const p=[this,d].map(k=>k.map(M=>{if(M.insert!=null)return typeof M.insert=="string"?M.insert:l;const P=k===d?"on":"with";throw new Error("diff() called "+P+" non-document")}).join("")),m=new c,_=t(p[0],p[1],h,!0),C=new a.default(this.ops),v=new a.default(d.ops);return _.forEach(k=>{let M=k[1].length;for(;M>0;){let P=0;switch(k[0]){case t.INSERT:P=Math.min(v.peekLength(),M),m.push(v.next(P));break;case t.DELETE:P=Math.min(M,C.peekLength()),C.next(P),m.delete(P);break;case t.EQUAL:P=Math.min(C.peekLength(),v.peekLength(),M);const x=C.next(P),O=v.next(P);i(x.insert,O.insert)?m.retain(P,s.default.diff(x.attributes,O.attributes)):m.push(O).delete(P);break}M-=P}}),m.chop()}eachLine(d,h=`
`){const p=new a.default(this.ops);let m=new c,_=0;for(;p.hasNext();){if(p.peekType()!=="insert")return;const C=p.peek(),v=o.default.length(C)-p.peekLength(),k=typeof C.insert=="string"?C.insert.indexOf(h,v)-v:-1;if(k<0)m.push(p.next());else if(k>0)m.push(p.next(k));else{if(d(m,p.next(1).attributes||{},_)===!1)return;_+=1,m=new c}}m.length()>0&&d(m,{},_)}invert(d){const h=new c;return this.reduce((p,m)=>{if(m.insert)h.delete(o.default.length(m));else{if(typeof m.retain=="number"&&m.attributes==null)return h.retain(m.retain),p+m.retain;if(m.delete||typeof m.retain=="number"){const _=m.delete||m.retain;return d.slice(p,p+_).forEach(v=>{m.delete?h.push(v):m.retain&&m.attributes&&h.retain(o.default.length(v),s.default.invert(m.attributes,v.attributes))}),p+_}else if(typeof m.retain=="object"&&m.retain!==null){const _=d.slice(p,p+1),C=new a.default(_.ops).next(),[v,k,M]=u(m.retain,C.insert),P=c.getHandler(v);return h.retain({[v]:P.invert(k,M)},s.default.invert(m.attributes,C.attributes)),p+1}}return p},0),h.chop()}transform(d,h=!1){if(h=!!h,typeof d=="number")return this.transformPosition(d,h);const p=d,m=new a.default(this.ops),_=new a.default(p.ops),C=new c;for(;m.hasNext()||_.hasNext();)if(m.peekType()==="insert"&&(h||_.peekType()!=="insert"))C.retain(o.default.length(m.next()));else if(_.peekType()==="insert")C.push(_.next());else{const v=Math.min(m.peekLength(),_.peekLength()),k=m.next(v),M=_.next(v);if(k.delete)continue;if(M.delete)C.push(M);else{const P=k.retain,x=M.retain;let O=typeof x=="object"&&x!==null?x:v;if(typeof P=="object"&&P!==null&&typeof x=="object"&&x!==null){const N=Object.keys(P)[0];if(N===Object.keys(x)[0]){const I=c.getHandler(N);I&&(O={[N]:I.transform(P[N],x[N],h)})}}C.retain(O,s.default.transform(k.attributes,M.attributes,h))}}return C.chop()}transformPosition(d,h=!1){h=!!h;const p=new a.default(this.ops);let m=0;for(;p.hasNext()&&m<=d;){const _=p.peekLength(),C=p.peekType();if(p.next(),C==="delete"){d-=Math.min(_,d-m);continue}else C==="insert"&&(m<d||!h)&&(d+=_);m+=_}return d}}c.Op=o.default,c.OpIterator=a.default,c.AttributeMap=s.default,c.handlers={},e.default=c,r.exports=c,r.exports.default=c}(la,la.exports)),la.exports}var G2=J2();const to=Jb(G2),sn=()=>new Map,gc=r=>{const e=sn();return r.forEach((t,n)=>{e.set(n,t)}),e},Ms=(r,e,t)=>{let n=r.get(e);return n===void 0&&r.set(e,n=t()),n},Y2=(r,e)=>{const t=[];for(const[n,i]of r)t.push(e(i,n));return t},X2=(r,e)=>{for(const[t,n]of r)if(e(n,t))return!0;return!1},hs=()=>new Set,Du=r=>r[r.length-1],ps=Array.from,Q2=Array.isArray;class Z2{constructor(){this._observers=sn()}on(e,t){return Ms(this._observers,e,hs).add(t),t}once(e,t){const n=(...i)=>{this.off(e,n),t(...i)};this.on(e,n)}off(e,t){const n=this._observers.get(e);n!==void 0&&(n.delete(t),n.size===0&&this._observers.delete(e))}emit(e,t){return ps((this._observers.get(e)||sn()).values()).forEach(n=>n(...t))}destroy(){this._observers=sn()}}const Di=Math.floor,Oa=Math.abs,by=(r,e)=>r<e?r:e,Os=(r,e)=>r>e?r:e,eC=r=>r!==0?r<0:1/r<0,$h=1,Bh=2,Nu=4,Mu=8,tC=32,vy=64,sl=128,rC=31,qh=63,lo=127,nC=2147483647,iC=Number.isInteger||(r=>typeof r=="number"&&isFinite(r)&&Di(r)===r),sC=r=>r.toLowerCase(),oC=/^\s*/g,aC=r=>r.replace(oC,""),lC=/([A-Z])/g,jh=(r,e)=>aC(r.replace(lC,t=>`${e}${sC(t)}`)),uC=r=>{const e=unescape(encodeURIComponent(r)),t=e.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=e.codePointAt(i);return n},_o=typeof TextEncoder<"u"?new TextEncoder:null,cC=r=>_o.encode(r),dC=_o?cC:uC;let Ou=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Ou&&Ou.decode(new Uint8Array).length===1&&(Ou=null);class Lo{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Ld=()=>new Lo,fC=r=>{let e=r.cpos;for(let t=0;t<r.bufs.length;t++)e+=r.bufs[t].length;return e},kn=r=>{const e=new Uint8Array(fC(r));let t=0;for(let n=0;n<r.bufs.length;n++){const i=r.bufs[n];e.set(i,t),t+=i.length}return e.set(new Uint8Array(r.cbuf.buffer,0,r.cpos),t),e},hC=(r,e)=>{const t=r.cbuf.length;t-r.cpos<e&&(r.bufs.push(new Uint8Array(r.cbuf.buffer,0,r.cpos)),r.cbuf=new Uint8Array(Os(t,e)*2),r.cpos=0)},gt=(r,e)=>{const t=r.cbuf.length;r.cpos===t&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(t*2),r.cpos=0),r.cbuf[r.cpos++]=e},mc=gt,qe=(r,e)=>{for(;e>lo;)gt(r,sl|lo&e),e=Di(e/128);gt(r,lo&e)},Pd=(r,e)=>{const t=eC(e);for(t&&(e=-e),gt(r,(e>qh?sl:0)|(t?vy:0)|qh&e),e=Di(e/64);e>0;)gt(r,(e>lo?sl:0)|lo&e),e=Di(e/128)},yc=new Uint8Array(3e4),pC=yc.length/3,gC=(r,e)=>{if(e.length<pC){const t=_o.encodeInto(e,yc).written||0;qe(r,t);for(let n=0;n<t;n++)gt(r,yc[n])}else br(r,dC(e))},mC=(r,e)=>{const t=unescape(encodeURIComponent(e)),n=t.length;qe(r,n);for(let i=0;i<n;i++)gt(r,t.codePointAt(i))},ts=_o&&_o.encodeInto?gC:mC,Fd=(r,e)=>{const t=r.cbuf.length,n=r.cpos,i=by(t-n,e.length),s=e.length-i;r.cbuf.set(e.subarray(0,i),n),r.cpos+=i,s>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(Os(t*2,s)),r.cbuf.set(e.subarray(i)),r.cpos=s)},br=(r,e)=>{qe(r,e.byteLength),Fd(r,e)},$d=(r,e)=>{hC(r,e);const t=new DataView(r.cbuf.buffer,r.cpos,e);return r.cpos+=e,t},yC=(r,e)=>$d(r,4).setFloat32(0,e,!1),_C=(r,e)=>$d(r,8).setFloat64(0,e,!1),bC=(r,e)=>$d(r,8).setBigInt64(0,e,!1),Uh=new DataView(new ArrayBuffer(4)),vC=r=>(Uh.setFloat32(0,r),Uh.getFloat32(0)===r),bo=(r,e)=>{switch(typeof e){case"string":gt(r,119),ts(r,e);break;case"number":iC(e)&&Oa(e)<=nC?(gt(r,125),Pd(r,e)):vC(e)?(gt(r,124),yC(r,e)):(gt(r,123),_C(r,e));break;case"bigint":gt(r,122),bC(r,e);break;case"object":if(e===null)gt(r,126);else if(Q2(e)){gt(r,117),qe(r,e.length);for(let t=0;t<e.length;t++)bo(r,e[t])}else if(e instanceof Uint8Array)gt(r,116),br(r,e);else{gt(r,118);const t=Object.keys(e);qe(r,t.length);for(let n=0;n<t.length;n++){const i=t[n];ts(r,i),bo(r,e[i])}}break;case"boolean":gt(r,e?120:121);break;default:gt(r,127)}};class zh extends Lo{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&qe(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Hh=r=>{r.count>0&&(Pd(r.encoder,r.count===1?r.s:-r.s),r.count>1&&qe(r.encoder,r.count-2))};class Ia{constructor(){this.encoder=new Lo,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Hh(this),this.count=1,this.s=e)}toUint8Array(){return Hh(this),kn(this.encoder)}}const Wh=r=>{if(r.count>0){const e=r.diff*2+(r.count===1?0:1);Pd(r.encoder,e),r.count>1&&qe(r.encoder,r.count-2)}};class Iu{constructor(){this.encoder=new Lo,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Wh(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Wh(this),kn(this.encoder)}}class CC{constructor(){this.sarr=[],this.s="",this.lensE=new Ia}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Lo;return this.sarr.push(this.s),this.s="",ts(e,this.sarr.join("")),Fd(e,this.lensE.toUint8Array()),kn(e)}}const gs=r=>new Error(r),on=()=>{throw gs("Method unimplemented")},Ni=()=>{throw gs("Unexpected case")},EC=crypto.getRandomValues.bind(crypto),Cy=()=>EC(new Uint32Array(1))[0],wC="10000000-1000-4000-8000"+-1e11,kC=()=>wC.replace(/[018]/g,r=>(r^Cy()&15>>r/4).toString(16)),Kh=r=>new Promise(r);Promise.all.bind(Promise);const Vh=r=>r===void 0?null:r;class xC{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let Ey=new xC,SC=!0;try{typeof localStorage<"u"&&localStorage&&(Ey=localStorage,SC=!1)}catch{}const TC=Ey,AC=Object.assign,DC=Object.keys,NC=(r,e)=>{for(const t in r)e(r[t],t)},Jh=r=>DC(r).length,MC=r=>{for(const e in r)return!1;return!0},OC=(r,e)=>{for(const t in r)if(!e(r[t],t))return!1;return!0},IC=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),RC=(r,e)=>r===e||Jh(r)===Jh(e)&&OC(r,(t,n)=>(t!==void 0||IC(e,n))&&e[n]===t),LC=Object.freeze,wy=r=>{for(const e in r){const t=r[e];(typeof t=="object"||typeof t=="function")&&wy(r[e])}return LC(r)},Bd=(r,e,t=0)=>{try{for(;t<r.length;t++)r[t](...e)}finally{t<r.length&&Bd(r,e,t+1)}},PC=(r,e)=>e.includes(r);var ky={};const vo=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Xr;const FC=()=>{if(Xr===void 0)if(vo){Xr=sn();const r=process.argv;let e=null;for(let t=0;t<r.length;t++){const n=r[t];n[0]==="-"?(e!==null&&Xr.set(e,""),e=n):e!==null&&(Xr.set(e,n),e=null)}e!==null&&Xr.set(e,"")}else typeof location=="object"?(Xr=sn(),(location.search||"?").slice(1).split("&").forEach(r=>{if(r.length!==0){const[e,t]=r.split("=");Xr.set(`--${jh(e,"-")}`,t),Xr.set(`-${jh(e,"-")}`,t)}})):Xr=sn();return Xr},_c=r=>FC().has(r),ol=r=>Vh(vo?ky[r.toUpperCase().replaceAll("-","_")]:TC.getItem(r)),xy=r=>_c("--"+r)||ol(r)!==null;xy("production");const $C=vo&&PC(ky.FORCE_COLOR,["true","1","2"]),BC=$C||!_c("--no-colors")&&!xy("no-color")&&(!vo||process.stdout.isTTY)&&(!vo||_c("--color")||ol("COLORTERM")!==null||(ol("TERM")||"").includes("color"));class qC{constructor(e,t){this.left=e,this.right=t}}const yn=(r,e)=>new qC(r,e);typeof DOMParser<"u"&&new DOMParser;const jC=r=>Y2(r,(e,t)=>`${t}:${e};`).join(""),Mn=Symbol,Sy=Mn(),Ty=Mn(),UC=Mn(),zC=Mn(),HC=Mn(),Ay=Mn(),WC=Mn(),qd=Mn(),KC=Mn(),VC=r=>{var i;r.length===1&&((i=r[0])==null?void 0:i.constructor)===Function&&(r=r[0]());const e=[],t=[];let n=0;for(;n<r.length;n++){const s=r[n];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(n>0&&t.push(e.join(""));n<r.length;n++){const s=r[n];s instanceof Symbol||t.push(s)}return t},JC={[Sy]:yn("font-weight","bold"),[Ty]:yn("font-weight","normal"),[UC]:yn("color","blue"),[HC]:yn("color","green"),[zC]:yn("color","grey"),[Ay]:yn("color","red"),[WC]:yn("color","purple"),[qd]:yn("color","orange"),[KC]:yn("color","black")},GC=r=>{var o;r.length===1&&((o=r[0])==null?void 0:o.constructor)===Function&&(r=r[0]());const e=[],t=[],n=sn();let i=[],s=0;for(;s<r.length;s++){const a=r[s],l=JC[a];if(l!==void 0)n.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const u=jC(n);s>0||u.length>0?(e.push("%c"+a),t.push(u)):e.push(a)}else break}}for(s>0&&(i=t,i.unshift(e.join("")));s<r.length;s++){const a=r[s];a instanceof Symbol||i.push(a)}return i},Dy=BC?GC:VC,YC=(...r)=>{console.log(...Dy(r)),Ny.forEach(e=>e.print(r))},XC=(...r)=>{console.warn(...Dy(r)),r.unshift(qd),Ny.forEach(e=>e.print(r))},Ny=hs(),My=r=>({[Symbol.iterator](){return this},next:r}),QC=(r,e)=>My(()=>{let t;do t=r.next();while(!t.done&&!e(t.value));return t}),Ru=(r,e)=>My(()=>{const{done:t,value:n}=r.next();return{done:t,value:t?void 0:e(n)}});class ZC{constructor(e,t){this.clock=e,this.len=t}}class eE{constructor(){this.clients=new Map}}const Oy=(r,e,t)=>e.clients.forEach((n,i)=>{const s=r.doc.store.clients.get(i);if(s!=null){const o=s[s.length-1],a=o.id.clock+o.length;for(let l=0,u=n[l];l<n.length&&u.clock<a;u=n[++l])By(r,s,u.clock,u.len,t)}}),tE=(r,e)=>{let t=0,n=r.length-1;for(;t<=n;){const i=Di((t+n)/2),s=r[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;t=i+1}else n=i-1}return null},Iy=(r,e)=>{const t=r.clients.get(e.client);return t!==void 0&&tE(t,e.clock)!==null},Ry=r=>{r.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let t,n;for(t=1,n=1;t<e.length;t++){const i=e[n-1],s=e[t];i.clock+i.len>=s.clock?i.len=Os(i.len,s.clock+s.len-i.clock):(n<t&&(e[n]=s),n++)}e.length=n})},Ly=(r,e,t,n)=>{Ms(r.clients,e,()=>[]).push(new ZC(t,n))},rE=(r,e)=>{qe(r.restEncoder,e.clients.size),ps(e.clients.entries()).sort((t,n)=>n[0]-t[0]).forEach(([t,n])=>{r.resetDsCurVal(),qe(r.restEncoder,t);const i=n.length;qe(r.restEncoder,i);for(let s=0;s<i;s++){const o=n[s];r.writeDsClock(o.clock),r.writeDsLen(o.len)}})},Py=Cy;class Po extends Z2{constructor({guid:e=kC(),collectionid:t=null,gc:n=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=i,this.clientID=Py(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new fE,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Kh(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const l=()=>Kh(u=>{const c=f=>{(f===void 0||f===!0)&&(this.off("sync",c),u())};this.on("sync",c)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&ze(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(ps(this.subdocs).map(e=>e.guid))}transact(e,t=null){return ze(this,e,t)}get(e,t=Dt){const n=Ms(this.share,e,()=>{const s=new t;return s._integrate(this,null),s}),i=n.constructor;if(t!==Dt&&i!==t)if(i===Dt){const s=new t;s._map=n._map,n._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=n._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=n._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return n}getArray(e=""){return this.get(e,vi)}getText(e=""){return this.get(e,ul)}getMap(e=""){return this.get(e,ms)}getXmlElement(e=""){return this.get(e,wo)}getXmlFragment(e=""){return this.get(e,ys)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,ps(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;t.doc=new Po({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,ze(e.parent.doc,n=>{const i=t.doc;e.deleted||n.subdocsAdded.add(i),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class nE{constructor(){this.restEncoder=Ld()}toUint8Array(){return kn(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){qe(this.restEncoder,e)}writeDsLen(e){qe(this.restEncoder,e)}}class iE extends nE{writeLeftID(e){qe(this.restEncoder,e.client),qe(this.restEncoder,e.clock)}writeRightID(e){qe(this.restEncoder,e.client),qe(this.restEncoder,e.clock)}writeClient(e){qe(this.restEncoder,e)}writeInfo(e){mc(this.restEncoder,e)}writeString(e){ts(this.restEncoder,e)}writeParentInfo(e){qe(this.restEncoder,e?1:0)}writeTypeRef(e){qe(this.restEncoder,e)}writeLen(e){qe(this.restEncoder,e)}writeAny(e){bo(this.restEncoder,e)}writeBuf(e){br(this.restEncoder,e)}writeJSON(e){ts(this.restEncoder,JSON.stringify(e))}writeKey(e){ts(this.restEncoder,e)}}class sE{constructor(){this.restEncoder=Ld(),this.dsCurrVal=0}toUint8Array(){return kn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,qe(this.restEncoder,t)}writeDsLen(e){e===0&&Ni(),qe(this.restEncoder,e-1),this.dsCurrVal+=e}}class oE extends sE{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Iu,this.clientEncoder=new Ia,this.leftClockEncoder=new Iu,this.rightClockEncoder=new Iu,this.infoEncoder=new zh(mc),this.stringEncoder=new CC,this.parentInfoEncoder=new zh(mc),this.typeRefEncoder=new Ia,this.lenEncoder=new Ia}toUint8Array(){const e=Ld();return qe(e,0),br(e,this.keyClockEncoder.toUint8Array()),br(e,this.clientEncoder.toUint8Array()),br(e,this.leftClockEncoder.toUint8Array()),br(e,this.rightClockEncoder.toUint8Array()),br(e,kn(this.infoEncoder)),br(e,this.stringEncoder.toUint8Array()),br(e,kn(this.parentInfoEncoder)),br(e,this.typeRefEncoder.toUint8Array()),br(e,this.lenEncoder.toUint8Array()),Fd(e,kn(this.restEncoder)),kn(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){bo(this.restEncoder,e)}writeBuf(e){br(this.restEncoder,e)}writeJSON(e){bo(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const aE=(r,e,t,n)=>{n=Os(n,e[0].id.clock);const i=An(e,n);qe(r.restEncoder,e.length-i),r.writeClient(t),qe(r.restEncoder,n);const s=e[i];s.write(r,n-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(r,0)},lE=(r,e,t)=>{const n=new Map;t.forEach((i,s)=>{ir(e,s)>i&&n.set(s,i)}),jd(e).forEach((i,s)=>{t.has(s)||n.set(s,0)}),qe(r.restEncoder,n.size),ps(n.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{aE(r,e.clients.get(i),i,s)})},uE=(r,e)=>lE(r,e.doc.store,e.beforeState);class cE{constructor(){this.l=[]}}const Gh=()=>new cE,Yh=(r,e)=>r.l.push(e),Xh=(r,e)=>{const t=r.l,n=t.length;r.l=t.filter(i=>e!==i),n===r.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Fy=(r,e,t)=>Bd(r.l,[e,t]);class Ra{constructor(e,t){this.client=e,this.clock=t}}const fa=(r,e)=>r===e||r!==null&&e!==null&&r.client===e.client&&r.clock===e.clock,Xe=(r,e)=>new Ra(r,e),dE=r=>{for(const[e,t]of r.doc.share.entries())if(t===r)return e;throw Ni()},Gi=(r,e)=>e===void 0?!r.deleted:e.sv.has(r.id.client)&&(e.sv.get(r.id.client)||0)>r.id.clock&&!Iy(e.ds,r.id),bc=(r,e)=>{const t=Ms(r.meta,bc,hs),n=r.doc.store;t.has(e)||(e.sv.forEach((i,s)=>{i<ir(n,s)&&Xn(r,Xe(s,i))}),Oy(r,e.ds,i=>{}),t.add(e))};class fE{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const jd=r=>{const e=new Map;return r.clients.forEach((t,n)=>{const i=t[t.length-1];e.set(n,i.id.clock+i.length)}),e},ir=(r,e)=>{const t=r.clients.get(e);if(t===void 0)return 0;const n=t[t.length-1];return n.id.clock+n.length},$y=(r,e)=>{let t=r.clients.get(e.id.client);if(t===void 0)t=[],r.clients.set(e.id.client,t);else{const n=t[t.length-1];if(n.id.clock+n.length!==e.id.clock)throw Ni()}t.push(e)},An=(r,e)=>{let t=0,n=r.length-1,i=r[n],s=i.id.clock;if(s===e)return n;let o=Di(e/(s+i.length-1)*n);for(;t<=n;){if(i=r[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;t=o+1}else n=o-1;o=Di((t+n)/2)}throw Ni()},hE=(r,e)=>{const t=r.clients.get(e.client);return t[An(t,e.clock)]},Lu=hE,vc=(r,e,t)=>{const n=An(e,t),i=e[n];return i.id.clock<t&&i instanceof Ft?(e.splice(n+1,0,i_(r,i,t-i.id.clock)),n+1):n},Xn=(r,e)=>{const t=r.doc.store.clients.get(e.client);return t[vc(r,t,e.clock)]},Qh=(r,e,t)=>{const n=e.clients.get(t.client),i=An(n,t.clock),s=n[i];return t.clock!==s.id.clock+s.length-1&&s.constructor!==Fn&&n.splice(i+1,0,i_(r,s,t.clock-s.id.clock+1)),s},pE=(r,e,t)=>{const n=r.clients.get(e.id.client);n[An(n,e.id.clock)]=t},By=(r,e,t,n,i)=>{if(n===0)return;const s=t+n;let o=vc(r,e,t),a;do a=e[o++],s<a.id.clock+a.length&&vc(r,e,s),i(a);while(o<e.length&&e[o].id.clock<s)};class gE{constructor(e,t,n){this.doc=e,this.deleteSet=new eE,this.beforeState=jd(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Zh=(r,e)=>e.deleteSet.clients.size===0&&!X2(e.afterState,(t,n)=>e.beforeState.get(n)!==t)?!1:(Ry(e.deleteSet),uE(r,e),rE(r,e.deleteSet),!0),ep=(r,e,t)=>{const n=e._item;(n===null||n.id.clock<(r.beforeState.get(n.id.client)||0)&&!n.deleted)&&Ms(r.changed,e,hs).add(t)},La=(r,e)=>{let t=r[e],n=r[e-1],i=e;for(;i>0;t=n,n=r[--i-1]){if(n.deleted===t.deleted&&n.constructor===t.constructor&&n.mergeWith(t)){t instanceof Ft&&t.parentSub!==null&&t.parent._map.get(t.parentSub)===t&&t.parent._map.set(t.parentSub,n);continue}break}const s=e-i;return s&&r.splice(e+1-s,s),s},mE=(r,e,t)=>{for(const[n,i]of r.clients.entries()){const s=e.clients.get(n);for(let o=i.length-1;o>=0;o--){const a=i[o],l=a.clock+a.len;for(let u=An(s,a.clock),c=s[u];u<s.length&&c.id.clock<l;c=s[++u]){const f=s[u];if(a.clock+a.len<=f.id.clock)break;f instanceof Ft&&f.deleted&&!f.keep&&t(f)&&f.gc(e,!1)}}}},yE=(r,e)=>{r.clients.forEach((t,n)=>{const i=e.clients.get(n);for(let s=t.length-1;s>=0;s--){const o=t[s],a=by(i.length-1,1+An(i,o.clock+o.len-1));for(let l=a,u=i[l];l>0&&u.id.clock>=o.clock;u=i[l])l-=1+La(i,l)}})},qy=(r,e)=>{if(e<r.length){const t=r[e],n=t.doc,i=n.store,s=t.deleteSet,o=t._mergeStructs;try{Ry(s),t.afterState=jd(t.doc.store),n.emit("beforeObserverCalls",[t,n]);const a=[];t.changed.forEach((l,u)=>a.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(t,l)})),a.push(()=>{t.changedParentTypes.forEach((l,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(l=l.filter(c=>c.target._item===null||!c.target._item.deleted),l.forEach(c=>{c.currentTarget=u,c._path=null}),l.sort((c,f)=>c.path.length-f.path.length),Fy(u._dEH,l,t))})}),a.push(()=>n.emit("afterTransaction",[t,n])),Bd(a,[]),t._needFormattingCleanup&&AE(t)}finally{n.gc&&mE(s,i,n.gcFilter),yE(s,i),t.afterState.forEach((c,f)=>{const d=t.beforeState.get(f)||0;if(d!==c){const h=i.clients.get(f),p=Os(An(h,d),1);for(let m=h.length-1;m>=p;)m-=1+La(h,m)}});for(let c=o.length-1;c>=0;c--){const{client:f,clock:d}=o[c].id,h=i.clients.get(f),p=An(h,d);p+1<h.length&&La(h,p+1)>1||p>0&&La(h,p)}if(!t.local&&t.afterState.get(n.clientID)!==t.beforeState.get(n.clientID)&&(YC(qd,Sy,"[yjs] ",Ty,Ay,"Changed the client-id because another client seems to be using it."),n.clientID=Py()),n.emit("afterTransactionCleanup",[t,n]),n._observers.has("update")){const c=new iE;Zh(c,t)&&n.emit("update",[c.toUint8Array(),t.origin,n,t])}if(n._observers.has("updateV2")){const c=new oE;Zh(c,t)&&n.emit("updateV2",[c.toUint8Array(),t.origin,n,t])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:u}=t;(a.size>0||u.size>0||l.size>0)&&(a.forEach(c=>{c.clientID=n.clientID,c.collectionid==null&&(c.collectionid=n.collectionid),n.subdocs.add(c)}),u.forEach(c=>n.subdocs.delete(c)),n.emit("subdocs",[{loaded:l,added:a,removed:u},n,t]),u.forEach(c=>c.destroy())),r.length<=e+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,r])):qy(r,e+1)}}},ze=(r,e,t=null,n=!0)=>{const i=r._transactionCleanups;let s=!1,o=null;r._transaction===null&&(s=!0,r._transaction=new gE(r,t,n),i.push(r._transaction),i.length===1&&r.emit("beforeAllTransactions",[r]),r.emit("beforeTransaction",[r._transaction,r]));try{o=e(r._transaction)}finally{if(s){const a=r._transaction===i[0];r._transaction=null,a&&qy(i,0)}}return o},tp="You must not compute changes after the event-handler fired.";class Ll{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=_E(this.currentTarget,this.target))}deletes(e){return Iy(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw gs(tp);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(i=>{if(i!==null){const s=t._map.get(i);let o,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))o="delete",a=Du(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=Du(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(s))o="delete",a=Du(s.content.getContent());else return;e.set(i,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw gs(tp);const t=this.target,n=hs(),i=hs(),s=[];if(e={added:n,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(t).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let u=t._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=u.length,i.add(u)):this.adds(u)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(u.content.getContent()),n.add(u)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=u.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const _E=(r,e)=>{const t=[];for(;e._item!==null&&e!==r;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let n=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(n+=i.length),i=i.right;t.unshift(n)}e=e._item.parent}return t},$t=()=>{XC("Invalid access: Add Yjs type to a document before reading data.")},jy=80;let Ud=0;class bE{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=Ud++}}const vE=r=>{r.timestamp=Ud++},Uy=(r,e,t)=>{r.p.marker=!1,r.p=e,e.marker=!0,r.index=t,r.timestamp=Ud++},CE=(r,e,t)=>{if(r.length>=jy){const n=r.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return Uy(n,e,t),n}else{const n=new bE(e,t);return r.push(n),n}},Pl=(r,e)=>{if(r._start===null||e===0||r._searchMarker===null)return null;const t=r._searchMarker.length===0?null:r._searchMarker.reduce((s,o)=>Oa(e-s.index)<Oa(e-o.index)?s:o);let n=r._start,i=0;for(t!==null&&(n=t.p,i=t.index,vE(t));n.right!==null&&i<e;){if(!n.deleted&&n.countable){if(e<i+n.length)break;i+=n.length}n=n.right}for(;n.left!==null&&i>e;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(i-=n.length);return t!==null&&Oa(t.index-i)<n.parent.length/jy?(Uy(t,n,i),t):CE(r._searchMarker,n,i)},Co=(r,e,t)=>{for(let n=r.length-1;n>=0;n--){const i=r[n];if(t>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){r.splice(n,1);continue}i.p=s,s.marker=!0}(e<i.index||t>0&&e===i.index)&&(i.index=Os(e,i.index+t))}},Fl=(r,e,t)=>{const n=r,i=e.changedParentTypes;for(;Ms(i,r,()=>[]).push(t),r._item!==null;)r=r._item.parent;Fy(n._eH,t,e)};class Dt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Gh(),this._dEH=Gh(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw on()}clone(){throw on()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Yh(this._eH,e)}observeDeep(e){Yh(this._dEH,e)}unobserve(e){Xh(this._eH,e)}unobserveDeep(e){Xh(this._dEH,e)}toJSON(){}}const zy=(r,e,t)=>{r.doc??$t(),e<0&&(e=r._length+e),t<0&&(t=r._length+t);let n=t-e;const i=[];let s=r._start;for(;s!==null&&n>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&n>0;a++)i.push(o[a]),n--;e=0}}s=s.right}return i},Hy=r=>{r.doc??$t();const e=[];let t=r._start;for(;t!==null;){if(t.countable&&!t.deleted){const n=t.content.getContent();for(let i=0;i<n.length;i++)e.push(n[i])}t=t.right}return e},Eo=(r,e)=>{let t=0,n=r._start;for(r.doc??$t();n!==null;){if(n.countable&&!n.deleted){const i=n.content.getContent();for(let s=0;s<i.length;s++)e(i[s],t++,r)}n=n.right}},Wy=(r,e)=>{const t=[];return Eo(r,(n,i)=>{t.push(e(n,i,r))}),t},EE=r=>{let e=r._start,t=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),n=0,e=e.right}const i=t[n++];return t.length<=n&&(t=null),{done:!1,value:i}}}},Ky=(r,e)=>{r.doc??$t();const t=Pl(r,e);let n=r._start;for(t!==null&&(n=t.p,e-=t.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(e<n.length)return n.content.getContent()[e];e-=n.length}},al=(r,e,t,n)=>{let i=t;const s=r.doc,o=s.clientID,a=s.store,l=t===null?e._start:t.right;let u=[];const c=()=>{u.length>0&&(i=new Ft(Xe(o,ir(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new _s(u)),i.integrate(r,0),u=[])};n.forEach(f=>{if(f===null)u.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(f);break;default:switch(c(),f.constructor){case Uint8Array:case ArrayBuffer:i=new Ft(Xe(o,ir(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new $l(new Uint8Array(f))),i.integrate(r,0);break;case Po:i=new Ft(Xe(o,ir(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new Bl(f)),i.integrate(r,0);break;default:if(f instanceof Dt)i=new Ft(Xe(o,ir(a,o)),i,i&&i.lastId,l,l&&l.id,e,null,new ii(f)),i.integrate(r,0);else throw new Error("Unexpected content type in insert operation")}}}),c()},Vy=()=>gs("Length exceeded!"),Jy=(r,e,t,n)=>{if(t>e._length)throw Vy();if(t===0)return e._searchMarker&&Co(e._searchMarker,t,n.length),al(r,e,null,n);const i=t,s=Pl(e,t);let o=e._start;for(s!==null&&(o=s.p,t-=s.index,t===0&&(o=o.prev,t+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(t<=o.length){t<o.length&&Xn(r,Xe(o.id.client,o.id.clock+t));break}t-=o.length}return e._searchMarker&&Co(e._searchMarker,i,n.length),al(r,e,o,n)},wE=(r,e,t)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return al(r,e,i,t)},Gy=(r,e,t,n)=>{if(n===0)return;const i=t,s=n,o=Pl(e,t);let a=e._start;for(o!==null&&(a=o.p,t-=o.index);a!==null&&t>0;a=a.right)!a.deleted&&a.countable&&(t<a.length&&Xn(r,Xe(a.id.client,a.id.clock+t)),t-=a.length);for(;n>0&&a!==null;)a.deleted||(n<a.length&&Xn(r,Xe(a.id.client,a.id.clock+n)),a.delete(r),n-=a.length),a=a.right;if(n>0)throw Vy();e._searchMarker&&Co(e._searchMarker,i,-s+n)},ll=(r,e,t)=>{const n=e._map.get(t);n!==void 0&&n.delete(r)},zd=(r,e,t,n)=>{const i=e._map.get(t)||null,s=r.doc,o=s.clientID;let a;if(n==null)a=new _s([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new _s([n]);break;case Uint8Array:a=new $l(n);break;case Po:a=new Bl(n);break;default:if(n instanceof Dt)a=new ii(n);else throw new Error("Unexpected content type")}new Ft(Xe(o,ir(s.store,o)),i,i&&i.lastId,null,null,e,t,a).integrate(r,0)},Hd=(r,e)=>{r.doc??$t();const t=r._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},Yy=r=>{const e={};return r.doc??$t(),r._map.forEach((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])}),e},Xy=(r,e)=>{r.doc??$t();const t=r._map.get(e);return t!==void 0&&!t.deleted},kE=(r,e)=>{const t={};return r._map.forEach((n,i)=>{let s=n;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&Gi(s,e)&&(t[i]=s.content.getContent()[s.length-1])}),t},ha=r=>(r.doc??$t(),QC(r._map.entries(),e=>!e[1].deleted));class Qy extends Ll{}class vi extends Dt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new vi;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new vi}clone(){const e=new vi;return e.insert(0,this.toArray().map(t=>t instanceof Dt?t.clone():t)),e}get length(){return this.doc??$t(),this._length}_callObserver(e,t){super._callObserver(e,t),Fl(this,e,new Qy(this,e))}insert(e,t){this.doc!==null?ze(this.doc,n=>{Jy(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?ze(this.doc,t=>{wE(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?ze(this.doc,n=>{Gy(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return Ky(this,e)}toArray(){return Hy(this)}slice(e=0,t=this.length){return zy(this,e,t)}toJSON(){return this.map(e=>e instanceof Dt?e.toJSON():e)}map(e){return Wy(this,e)}forEach(e){Eo(this,e)}[Symbol.iterator](){return EE(this)}_write(e){e.writeTypeRef(RE)}}class xE extends Ll{constructor(e,t,n){super(e,t),this.keysChanged=n}}class ms extends Dt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((n,i)=>{this.set(i,n)}),this._prelimContent=null}_copy(){return new ms}clone(){const e=new ms;return this.forEach((t,n)=>{e.set(n,t instanceof Dt?t.clone():t)}),e}_callObserver(e,t){Fl(this,e,new xE(this,e,t))}toJSON(){this.doc??$t();const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const i=t.content.getContent()[t.length-1];e[n]=i instanceof Dt?i.toJSON():i}}),e}get size(){return[...ha(this)].length}keys(){return Ru(ha(this),e=>e[0])}values(){return Ru(ha(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Ru(ha(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??$t(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?ze(this.doc,t=>{ll(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?ze(this.doc,n=>{zd(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return Hd(this,e)}has(e){return Xy(this,e)}clear(){this.doc!==null?ze(this.doc,e=>{this.forEach(function(t,n,i){ll(e,i,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(LE)}}const jn=(r,e)=>r===e||typeof r=="object"&&typeof e=="object"&&r&&e&&RC(r,e);class Cc{constructor(e,t,n,i){this.left=e,this.right=t,this.index=n,this.currentAttributes=i}forward(){switch(this.right===null&&Ni(),this.right.content.constructor){case bt:this.right.deleted||Is(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const rp=(r,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case bt:e.right.deleted||Is(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&Xn(r,Xe(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},pa=(r,e,t,n)=>{const i=new Map,s=n?Pl(e,t):null;if(s){const o=new Cc(s.p.left,s.p,s.index,i);return rp(r,o,t-s.index)}else{const o=new Cc(null,e._start,0,i);return rp(r,o,t)}},Zy=(r,e,t,n)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===bt&&jn(n.get(t.right.content.key),t.right.content.value));)t.right.deleted||n.delete(t.right.content.key),t.forward();const i=r.doc,s=i.clientID;n.forEach((o,a)=>{const l=t.left,u=t.right,c=new Ft(Xe(s,ir(i.store,s)),l,l&&l.lastId,u,u&&u.id,e,null,new bt(a,o));c.integrate(r,0),t.right=c,t.forward()})},Is=(r,e)=>{const{key:t,value:n}=e;n===null?r.delete(t):r.set(t,n)},e_=(r,e)=>{for(;r.right!==null;){if(!(r.right.deleted||r.right.content.constructor===bt&&jn(e[r.right.content.key]??null,r.right.content.value)))break;r.forward()}},t_=(r,e,t,n)=>{const i=r.doc,s=i.clientID,o=new Map;for(const a in n){const l=n[a],u=t.currentAttributes.get(a)??null;if(!jn(u,l)){o.set(a,u);const{left:c,right:f}=t;t.right=new Ft(Xe(s,ir(i.store,s)),c,c&&c.lastId,f,f&&f.id,e,null,new bt(a,l)),t.right.integrate(r,0),t.forward()}}return o},Pu=(r,e,t,n,i)=>{t.currentAttributes.forEach((d,h)=>{i[h]===void 0&&(i[h]=null)});const s=r.doc,o=s.clientID;e_(t,i);const a=t_(r,e,t,i),l=n.constructor===String?new Dn(n):n instanceof Dt?new ii(n):new Rs(n);let{left:u,right:c,index:f}=t;e._searchMarker&&Co(e._searchMarker,t.index,l.getLength()),c=new Ft(Xe(o,ir(s.store,o)),u,u&&u.lastId,c,c&&c.id,e,null,l),c.integrate(r,0),t.right=c,t.index=f,t.forward(),Zy(r,e,t,a)},np=(r,e,t,n,i)=>{const s=r.doc,o=s.clientID;e_(t,i);const a=t_(r,e,t,i);e:for(;t.right!==null&&(n>0||a.size>0&&(t.right.deleted||t.right.content.constructor===bt));){if(!t.right.deleted)switch(t.right.content.constructor){case bt:{const{key:l,value:u}=t.right.content,c=i[l];if(c!==void 0){if(jn(c,u))a.delete(l);else{if(n===0)break e;a.set(l,u)}t.right.delete(r)}else t.currentAttributes.set(l,u);break}default:n<t.right.length&&Xn(r,Xe(t.right.id.client,t.right.id.clock+n)),n-=t.right.length;break}t.forward()}if(n>0){let l="";for(;n>0;n--)l+=`
`;t.right=new Ft(Xe(o,ir(s.store,o)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new Dn(l)),t.right.integrate(r,0),t.forward()}Zy(r,e,t,a)},r_=(r,e,t,n,i)=>{let s=e;const o=sn();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===bt){const u=s.content;o.set(u.key,u)}s=s.right}let a=0,l=!1;for(;e!==s;){if(t===e&&(l=!0),!e.deleted){const u=e.content;switch(u.constructor){case bt:{const{key:c,value:f}=u,d=n.get(c)??null;(o.get(c)!==u||d===f)&&(e.delete(r),a++,!l&&(i.get(c)??null)===f&&d!==f&&(d===null?i.delete(c):i.set(c,d))),!l&&!e.deleted&&Is(i,u);break}}}e=e.right}return a},SE=(r,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===bt){const n=e.content.key;t.has(n)?e.delete(r):t.add(n)}e=e.left}},TE=r=>{let e=0;return ze(r.doc,t=>{let n=r._start,i=r._start,s=sn();const o=gc(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case bt:Is(o,i.content);break;default:e+=r_(t,n,i,s,o),s=gc(o),n=i;break}i=i.right}}),e},AE=r=>{const e=new Set,t=r.doc;for(const[n,i]of r.afterState.entries()){const s=r.beforeState.get(n)||0;i!==s&&By(r,t.store.clients.get(n),s,i,o=>{!o.deleted&&o.content.constructor===bt&&o.constructor!==Fn&&e.add(o.parent)})}ze(t,n=>{Oy(r,r.deleteSet,i=>{if(i instanceof Fn||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===bt?e.add(s):SE(n,i)});for(const i of e)TE(i)})},ip=(r,e,t)=>{const n=t,i=gc(e.currentAttributes),s=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case ii:case Rs:case Dn:t<e.right.length&&Xn(r,Xe(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(r);break}e.forward()}s&&r_(r,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&Co(o._searchMarker,e.index,-n+t),e};class DE extends Ll{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];ze(e,n=>{const i=new Map,s=new Map;let o=this.target._start,a=null;const l={};let u="",c=0,f=0;const d=()=>{if(a!==null){let h=null;switch(a){case"delete":f>0&&(h={delete:f}),f=0;break;case"insert":(typeof u=="object"||u.length>0)&&(h={insert:u},i.size>0&&(h.attributes={},i.forEach((p,m)=>{p!==null&&(h.attributes[m]=p)}))),u="";break;case"retain":c>0&&(h={retain:c},MC(l)||(h.attributes=AC({},l))),c=0;break}h&&t.push(h),a=null}};for(;o!==null;){switch(o.content.constructor){case ii:case Rs:this.adds(o)?this.deletes(o)||(d(),a="insert",u=o.content.getContent()[0],d()):this.deletes(o)?(a!=="delete"&&(d(),a="delete"),f+=1):o.deleted||(a!=="retain"&&(d(),a="retain"),c+=1);break;case Dn:this.adds(o)?this.deletes(o)||(a!=="insert"&&(d(),a="insert"),u+=o.content.str):this.deletes(o)?(a!=="delete"&&(d(),a="delete"),f+=o.length):o.deleted||(a!=="retain"&&(d(),a="retain"),c+=o.length);break;case bt:{const{key:h,value:p}=o.content;if(this.adds(o)){if(!this.deletes(o)){const m=i.get(h)??null;jn(m,p)?p!==null&&o.delete(n):(a==="retain"&&d(),jn(p,s.get(h)??null)?delete l[h]:l[h]=p)}}else if(this.deletes(o)){s.set(h,p);const m=i.get(h)??null;jn(m,p)||(a==="retain"&&d(),l[h]=m)}else if(!o.deleted){s.set(h,p);const m=l[h];m!==void 0&&(jn(m,p)?m!==null&&o.delete(n):(a==="retain"&&d(),p===null?delete l[h]:l[h]=p))}o.deleted||(a==="insert"&&d(),Is(i,o.content));break}}o=o.right}for(d();t.length>0;){const h=t[t.length-1];if(h.retain!==void 0&&h.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class ul extends Dt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??$t(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new ul}clone(){const e=new ul;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new DE(this,e,t);Fl(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??$t();let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===Dn&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?ze(this.doc,n=>{const i=new Cc(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const a=!t&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&Pu(n,this,i,a,o.attributes||{})}else o.retain!==void 0?np(n,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&ip(n,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){this.doc??$t();const i=[],s=new Map,o=this.doc;let a="",l=this._start;function u(){if(a.length>0){const f={};let d=!1;s.forEach((p,m)=>{d=!0,f[m]=p});const h={insert:a};d&&(h.attributes=f),i.push(h),a=""}}const c=()=>{for(;l!==null;){if(Gi(l,e)||t!==void 0&&Gi(l,t))switch(l.content.constructor){case Dn:{const f=s.get("ychange");e!==void 0&&!Gi(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(u(),s.set("ychange",n?n("removed",l.id):{type:"removed"})):t!==void 0&&!Gi(l,t)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(u(),s.set("ychange",n?n("added",l.id):{type:"added"})):f!==void 0&&(u(),s.delete("ychange")),a+=l.content.str;break}case ii:case Rs:{u();const f={insert:l.content.getContent()[0]};if(s.size>0){const d={};f.attributes=d,s.forEach((h,p)=>{d[p]=h})}i.push(f);break}case bt:Gi(l,e)&&(u(),Is(s,l.content));break}l=l.right}u()};return e||t?ze(o,f=>{e&&bc(f,e),t&&bc(f,t),c()},"cleanup"):c(),i}insert(e,t,n){if(t.length<=0)return;const i=this.doc;i!==null?ze(i,s=>{const o=pa(s,this,e,!n);n||(n={},o.currentAttributes.forEach((a,l)=>{n[l]=a})),Pu(s,this,o,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){const i=this.doc;i!==null?ze(i,s=>{const o=pa(s,this,e,!n);Pu(s,this,o,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(t===0)return;const n=this.doc;n!==null?ze(n,i=>{ip(i,pa(i,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(t===0)return;const i=this.doc;i!==null?ze(i,s=>{const o=pa(s,this,e,!1);o.right!==null&&np(s,this,o,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){this.doc!==null?ze(this.doc,t=>{ll(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?ze(this.doc,n=>{zd(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return Hd(this,e)}getAttributes(){return Yy(this)}_write(e){e.writeTypeRef(PE)}}class Fu{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??$t()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===wo||t.constructor===ys)&&t._start!==null)e=t._start;else for(;e!==null;){const n=e.next;if(n!==null){e=n;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ys extends Dt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ys}clone(){const e=new ys;return e.insert(0,this.toArray().map(t=>t instanceof Dt?t.clone():t)),e}get length(){return this.doc??$t(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Fu(this,e)}querySelector(e){e=e.toUpperCase();const n=new Fu(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),ps(new Fu(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){Fl(this,e,new NE(this,t,e))}toString(){return Wy(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const i=e.createDocumentFragment();return n!==void 0&&n._createAssociation(i,this),Eo(this,s=>{i.insertBefore(s.toDOM(e,t,n),null)}),i}insert(e,t){this.doc!==null?ze(this.doc,n=>{Jy(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)ze(this.doc,n=>{const i=e&&e instanceof Dt?e._item:e;al(n,this,i,t)});else{const n=this._prelimContent,i=e===null?0:n.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw gs("Reference item not found");n.splice(i,0,...t)}}delete(e,t=1){this.doc!==null?ze(this.doc,n=>{Gy(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return Hy(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Ky(this,e)}slice(e=0,t=this.length){return zy(this,e,t)}forEach(e){Eo(this,e)}_write(e){e.writeTypeRef($E)}}class wo extends ys{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((n,i)=>{this.setAttribute(i,n)}),this._prelimAttrs=null}_copy(){return new wo(this.nodeName)}clone(){const e=new wo(this.nodeName),t=this.getAttributes();return NC(t,(n,i)=>{typeof n=="string"&&e.setAttribute(i,n)}),e.insert(0,this.toArray().map(n=>n instanceof Dt?n.clone():n)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const a in e)n.push(a);n.sort();const i=n.length;for(let a=0;a<i;a++){const l=n[a];t.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?ze(this.doc,t=>{ll(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?ze(this.doc,n=>{zd(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return Hd(this,e)}hasAttribute(e){return Xy(this,e)}getAttributes(e){return e?kE(this,e):Yy(this)}toDOM(e=document,t={},n){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const a=s[o];typeof a=="string"&&i.setAttribute(o,a)}return Eo(this,o=>{i.appendChild(o.toDOM(e,t,n))}),n!==void 0&&n._createAssociation(i,this),i}_write(e){e.writeTypeRef(FE),e.writeKey(this.nodeName)}}class NE extends Ll{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class n_{constructor(e,t){this.id=e,this.length=t}get deleted(){throw on()}mergeWith(e){return!1}write(e,t,n){throw on()}integrate(e,t){throw on()}}const ME=0;class Fn extends n_{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),$y(e.doc.store,this)}write(e,t){e.writeInfo(ME),e.writeLen(this.length-t)}getMissing(e,t){return null}}class $l{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new $l(this.content)}splice(e){throw on()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class cl{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new cl(this.len)}splice(e){const t=new cl(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){Ly(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const OE=(r,e)=>new Po({guid:r,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Bl{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Bl(OE(this.doc.guid,this.opts))}splice(e){throw on()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class Rs{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Rs(this.embed)}splice(e){throw on()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class bt{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new bt(this.key,this.value)}splice(e){throw on()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const IE=ol("node_env")==="development";class _s{constructor(e){this.arr=e,IE&&wy(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new _s(this.arr)}splice(e){const t=new _s(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let i=t;i<n;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}class Dn{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Dn(this.str)}splice(e){const t=new Dn(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const RE=0,LE=1,PE=2,FE=3,$E=4;class ii{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ii(this.type._copy())}splice(e){throw on()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(e,!0),n=n.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const i_=(r,e,t)=>{const{client:n,clock:i}=e.id,s=new Ft(Xe(n,i+t),e,Xe(n,i+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=Xe(e.redone.client,e.redone.clock+t)),e.right=s,s.right!==null&&(s.right.left=s),r._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=t,s};class Ft extends n_{constructor(e,t,n,i,s,o,a,l){super(e,l.getLength()),this.origin=n,this.left=t,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?Bh:0}set marker(e){(this.info&Mu)>0!==e&&(this.info^=Mu)}get marker(){return(this.info&Mu)>0}get keep(){return(this.info&$h)>0}set keep(e){this.keep!==e&&(this.info^=$h)}get countable(){return(this.info&Bh)>0}get deleted(){return(this.info&Nu)>0}set deleted(e){this.deleted!==e&&(this.info^=Nu)}markDeleted(){this.info|=Nu}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=ir(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=ir(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ra&&this.id.client!==this.parent.client&&this.parent.clock>=ir(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Qh(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Xn(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Fn||this.right&&this.right.constructor===Fn)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ft?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ft&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Ra){const n=Lu(t,this.parent);n.constructor===Fn?this.parent=null:this.parent=n.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Qh(e,e.doc.store,Xe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,i;if(n!==null)i=n.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),fa(this.origin,i.origin)){if(i.id.client<this.id.client)n=i,s.clear();else if(fa(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(Lu(e.doc.store,i.origin)))s.has(Lu(e.doc.store,i.origin))||(n=i,s.clear());else break;i=i.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),$y(e.doc.store,this),this.content.integrate(e,this),ep(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Fn(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Xe(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&fa(e.origin,this.lastId)&&this.right===e&&fa(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(n=>{n.p===e&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),Ly(e.deleteSet,this.id.client,this.id.clock,this.length),ep(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Ni();this.content.gc(e),t?pE(e,this,new Fn(this.id,this.length)):this.content=new cl(this.length)}write(e,t){const n=t>0?Xe(this.id.client,this.id.clock+t-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&rC|(n===null?0:sl)|(i===null?0:vy)|(s===null?0:tC);if(e.writeInfo(o),n!==null&&e.writeLeftID(n),i!==null&&e.writeRightID(i),n===null&&i===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const u=dE(a);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Ra?(e.writeParentInfo(!1),e.writeLeftID(a)):Ni();s!==null&&e.writeString(s)}this.content.write(e,t)}}const s_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},o_="__ $YJS$ __";s_[o_]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");s_[o_]=!0;const BE=be("TOGGLE_CONNECT_COMMAND");var qE=Object.defineProperty,jE=(r,e,t)=>e in r?qE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,fe=(r,e,t)=>jE(r,typeof e!="symbol"?e+"":e,t);function UE({options:r,editedUsjRef:e,usj:t,setUsj:n}){const{view:i,nodes:s}=r||{},{hasSpacing:o,isFormattedFont:a,markerMode:l}=i||{};return T.useEffect(()=>{e.current&&!Pn(e.current,t)&&n(e.current)},[e,o,a,l,s,n,t]),null}const a_=T.createContext(null);function zE(r,e){return{getTheme:function(){return e??null}}}function Ee(){const r=T.useContext(a_);return r==null&&function(e,...t){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",e);for(const s of t)i.append("v",s);throw n.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),r}const sp=r=>We(Nm(r)),Qn=Kg("cid",{parse:r=>typeof r=="string"?r:void 0}),bs=Kg("segment",{parse:r=>typeof r=="string"?r:void 0}),Ec="unknown",l_=1;class Fi extends qt{constructor(e,t,n,i){super(i),fe(this,"__tag"),fe(this,"__marker"),fe(this,"__unknownAttributes"),this.__tag=e,this.__marker=t,this.__unknownAttributes=n}static getType(){return"unknown"}static clone(e){const{__tag:t,__marker:n,__unknownAttributes:i,__key:s}=e;return new Fi(t,n,i,s)}static importJSON(e){const{tag:t,marker:n,unknownAttributes:i}=e;return u_(t,n,i).updateFromJSON(e)}static importDOM(){return{[Ec]:e=>WE(e)?{conversion:HE,priority:1}:null}}setTag(e){if(this.__tag===e)return this;const t=this.getWritable();return t.__tag=e,t}getTag(){return this.getLatest().__tag}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement(Ec);return e.style.display="none",e}updateDOM(){return!1}exportDOM(){return{element:null}}exportJSON(){return{...super.exportJSON(),type:this.getType(),tag:this.getTag(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:l_}}canBeEmpty(){return!0}isInline(){return!0}extractWithChild(){return!1}excludeFromCopy(e){return e!=="clone"}}function HE(r){const e=r.getAttribute("data-tag")??"",t=r.getAttribute("data-marker")??"";return{node:u_(e,t)}}function u_(r,e,t){return We(new Fi(r,e,t))}function WE(r){return(r==null?void 0:r.tagName)===Ec}function Fo(r){return r instanceof Fi}const ql="id",c_=1;class Mr extends qt{constructor(e,t,n){super(n),fe(this,"__marker"),fe(this,"__code"),fe(this,"__unknownAttributes"),this.__marker=ql,this.__code=e,this.__unknownAttributes=t}static getType(){return"book"}static clone(e){const{__code:t,__unknownAttributes:n,__key:i}=e;return new Mr(t,n,i)}static importJSON(e){const{code:t,unknownAttributes:n}=e;return d_(t,n).updateFromJSON(e)}static isValidBookCode(e){return y2(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setCode(e){if(this.__code===e)return this;const t=this.getWritable();return t.__code=e,t}getCode(){return this.getLatest().__code}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e.setAttribute("data-code",this.__code),e}updateDOM(){return!1}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),code:this.getCode(),unknownAttributes:this.getUnknownAttributes(),version:c_}}}function d_(r,e){return We(new Mr(r,e))}function xn(r){return r instanceof Mr}function KE(r){return(r==null?void 0:r.type)===Mr.getType()}const Wd="p",$i=" ",wc="​",dl="chapter",kc="verse",op="invalid",VE="text-spacing",JE="formatted-font",GE="marker-",Kd="external-usj-mutation",f_="selection-change",xc="cursor-change",Sc="annotation-change",Tc="delta-change",YE=[Kd,f_,xc,Sc,Tc],Vd="c",h_=1;class Wr extends qt{constructor(e,t,n,i,s,o){super(o),fe(this,"__marker"),fe(this,"__number"),fe(this,"__sid"),fe(this,"__altnumber"),fe(this,"__pubnumber"),fe(this,"__unknownAttributes"),this.__marker=Vd,this.__number=e,this.__sid=t,this.__altnumber=n,this.__pubnumber=i,this.__unknownAttributes=s}static getType(){return"chapter"}static clone(e){const{__number:t,__sid:n,__altnumber:i,__pubnumber:s,__unknownAttributes:o,__key:a}=e;return new Wr(t,n,i,s,o,a)}static importJSON(e){const{number:t,sid:n,altnumber:i,pubnumber:s,unknownAttributes:o}=e;return p_(t,n,i,s,o).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(dl,`usfm_${this.__marker}`),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),number:this.getNumber(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:h_}}}function p_(r,e,t,n,i){return We(new Wr(r,e,t,n,i))}function Jd(r){return r instanceof Wr}function XE(r){return(r==null?void 0:r.type)===Wr.getType()}const g_=["fr","fq","fqa","fk","ft","fl","fw","fp","fv","fdc","fm"],m_=["xo","xop","xk","xq","xt","xta","xot","xnt","xdc"],QE=["ca","cp","va","vp","add","bk","dc","em","jmp","k","nd","ord","pn","png","qt","rb","rq","sig","sls","tl","w","wa","wg","wh","wj","bd","it","bdit","no","sc","sup","ior","iqt","qac","qs","litl","lik","liv","liv1","liv2","liv3","liv4","liv5",...g_,...m_],y_=1;class Qe extends qt{constructor(e,t,n){super(n),fe(this,"__marker"),fe(this,"__unknownAttributes"),this.__marker=e,this.__unknownAttributes=t}static getType(){return"char"}static clone(e){const{__marker:t,__unknownAttributes:n,__key:i}=e;return new Qe(t,n,i)}static importJSON(e){const{marker:t,unknownAttributes:n}=e;return fl(t,n).updateFromJSON(e)}static importDOM(){return{span:e=>ew(e)?{conversion:ZE,priority:1}:null}}static isValidMarker(e){return e!==void 0&&QE.includes(e)}static isValidFootnoteMarker(e){return e!==void 0&&g_.includes(e)}static isValidCrossReferenceMarker(e){return e!==void 0&&m_.includes(e)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&je(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`)),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:y_}}canBeEmpty(){return!1}isInline(){return!0}}function ZE(r){const e=r.getAttribute("data-marker")??"f";return{node:fl(e)}}function fl(r,e){return We(new Qe(r,e))}function ew(r){if(!r)return!1;const e=r.getAttribute("data-marker")??"";return Qe.isValidMarker(e)&&r.classList.contains(Qe.getType())}function ct(r){return r instanceof Qe}function tw(r){return(r==null?void 0:r.type)===Qe.getType()}const __=1,rw="c",b_="span";class On extends Li{constructor(e,t=!1,n,i,s,o,a){super(a),fe(this,"__marker"),fe(this,"__number"),fe(this,"__showMarker"),fe(this,"__sid"),fe(this,"__altnumber"),fe(this,"__pubnumber"),fe(this,"__unknownAttributes"),this.__marker=rw,this.__number=e,this.__showMarker=t,this.__sid=n,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"immutable-chapter"}static clone(e){const{__number:t,__showMarker:n,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new On(t,n,i,s,o,a,l)}static importJSON(e){const{number:t,showMarker:n,sid:i,altnumber:s,pubnumber:o,unknownAttributes:a}=e;return Gd(t,n,i,s,o,a).updateFromJSON(e)}static importDOM(){return{span:e=>v_(e)?{conversion:nw,priority:1}:null}}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setShowMarker(e=!1){if(this.__showMarker===e)return this;const t=this.getWritable();return t.__showMarker=e,t}getShowMarker(){return this.getLatest().__showMarker}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement(b_);return e.setAttribute("data-marker",this.__marker),e.classList.add(dl,`usfm_${this.__marker}`),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&je(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(dl,`usfm_${this.getMarker()}`),t.setAttribute("data-number",this.getNumber())),{element:t}}decorate(){return this.getShowMarker()?$o(this.getMarker(),this.getNumber()):this.getNumber()}exportJSON(){return{type:this.getType(),marker:this.getMarker(),number:this.getNumber(),showMarker:this.getShowMarker(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:__}}isInline(){return!1}isKeyboardSelectable(){return!1}}function nw(r){const e=r.getAttribute("data-number")??"0";return{node:Gd(e)}}function Gd(r,e,t,n,i,s){return We(new On(r,e,t,n,i,s))}function v_(r){return r?r.classList.contains(dl)&&r.tagName.toLowerCase()===b_:!1}function Ls(r){return r instanceof On}function iw(r){return(r==null?void 0:r.type)===On.getType()}const C_=1;class Zn extends Ss{static getType(){return"implied-para"}static clone(e){return new Zn(e.__key)}static importJSON(e){return jr().updateFromJSON(e)}getMarker(){return Wd}exportJSON(){return{...super.exportJSON(),type:this.getType(),version:C_}}insertNewAfter(e,t){const n=jr();return n.setTextFormat(e.format),n.setTextStyle(e.style),n.setDirection(this.getDirection()),n.setFormat(this.getFormatType()),n.setStyle(this.getTextStyle()),n.setIndent(this.getIndent()),this.insertAfter(n,t),n}}function jr(){return We(new Zn)}function an(r){return r instanceof Zn}function Yd(r){return(r==null?void 0:r.type)===Zn.getType()}const Mi="zmsc-s",rs="zmsc-e",sw=[Mi,rs],ow=["ts-s","ts-e","t-s","t-e","ts","qt1-s","qt1-e","qt2-s","qt2-e","qt3-s","qt3-e","qt4-s","qt4-e","qt5-s","qt5-e","qt-s","qt-e",Mi,rs],E_=1;class ln extends Li{constructor(e,t,n,i,s){super(s),fe(this,"__marker"),fe(this,"__sid"),fe(this,"__eid"),fe(this,"__unknownAttributes"),this.__marker=e,this.__sid=t,this.__eid=n,this.__unknownAttributes=i}static getType(){return"ms"}static clone(e){const{__marker:t,__sid:n,__eid:i,__unknownAttributes:s,__key:o}=e;return new ln(t,n,i,s,o)}static importJSON(e){const{marker:t,sid:n,eid:i,unknownAttributes:s}=e;return w_(t,n,i,s)}static isValidMarker(e){return e!==void 0&&(ow.includes(e)||e.startsWith("z"))}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setEid(e){if(this.__eid===e)return this;const t=this.getWritable();return t.__eid=e,t}getEid(){return this.getLatest().__eid}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}updateDOM(){return!1}decorate(){return""}exportJSON(){return{type:this.getType(),marker:this.getMarker(),sid:this.getSid(),eid:this.getEid(),unknownAttributes:this.getUnknownAttributes(),version:E_}}isKeyboardSelectable(){return!1}}function aw(r){return sw.includes(r)}function w_(r,e,t,n){return We(new ln(r,e,t,n))}function jl(r){return r instanceof ln}const lw=["f","fe","ef","x","ex"],k_=1;class Xt extends qt{constructor(e,t,n,i,s){super(s),fe(this,"__marker"),fe(this,"__caller"),fe(this,"__category"),fe(this,"__unknownAttributes"),this.__marker=e,this.__caller=t,this.__category=n,this.__unknownAttributes=i}static getType(){return"note"}static clone(e){const{__marker:t,__caller:n,__category:i,__unknownAttributes:s,__key:o}=e;return new Xt(t,n,i,s,o)}static importJSON(e){const{marker:t,caller:n,category:i,unknownAttributes:s}=e;return Xd(t,n,i,s).updateFromJSON(e)}static importDOM(){return{span:e=>cw(e)?{conversion:uw,priority:1}:null}}static isValidMarker(e){return e!==void 0&&lw.includes(e)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setCaller(e){if(this.__caller===e)return this;const t=this.getWritable();return t.__caller=e,t}getCaller(){return this.getLatest().__caller}setCategory(e){if(this.__category===e)return this;const t=this.getWritable();return t.__category=e,t}getCategory(){return this.getLatest().__category}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e.setAttribute("data-caller",this.__caller),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&je(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`),t.setAttribute("data-caller",this.getCaller())),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),caller:this.getCaller(),category:this.getCategory(),unknownAttributes:this.getUnknownAttributes(),version:k_}}canBeEmpty(){return!1}isInline(){return!0}}function uw(r){const e=r.getAttribute("data-marker")??"f",t=r.getAttribute("data-caller")??"";return{node:Xd(e,t)}}function Xd(r,e,t,n){return We(new Xt(r,e,t,n))}function cw(r){if(!r)return!1;const e=r.getAttribute("data-marker")??"";return Xt.isValidMarker(e)&&r.classList.contains(Xt.getType())}function Bt(r){return r instanceof Xt}const dw=["ide","sts","rem","h","toc1","toc2","toc3","toca1","toca2","toca3","imt","imt1","imt2","imt3","imt4","is","is1","is2","ip","ipi","im","imi","ipq","imq","ipr","iq","iq1","iq2","iq3","ili","ili1","ili2","ib","iot","io","io1","io2","io3","io4","iex","imte","imte1","imte2","ie","mt","mt1","mt2","mt3","mt4","mte","mte1","mte2","cl","cd","ms","ms1","ms2","ms3","mr","s","s1","s2","s3","s4","sr","r","d","sp","sd","sd1","sd2","sd3","sd4",Wd,"m","po","cls","pr","pc","pm","pmo","pmc","pmr","pi","pi1","pi2","pi3","mi","lit","nb","q","q1","q2","q3","q4","qr","qc","qa","qm","qm1","qm2","qm3","qd","b","lh","li","li1","li2","li3","li4","lf","lim","lim1","lim2","lim3","lim4","pb"],x_=1;class ar extends Ss{constructor(e=Wd,t,n){super(n),fe(this,"__marker"),fe(this,"__unknownAttributes"),this.__marker=e,this.__unknownAttributes=t}static getType(){return"para"}static clone(e){const{__marker:t,__unknownAttributes:n,__key:i}=e;return new ar(t,n,i)}static importJSON(e){const{marker:t,unknownAttributes:n}=e;return ko(t,n).updateFromJSON(e)}static importDOM(){return{p:()=>({conversion:fw,priority:1})}}static isValidMarker(e){return e!==void 0&&dw.includes(e)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("p");return e.setAttribute("data-marker",this.__marker),e.classList.add(this.__type,`usfm_${this.__marker}`),e}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&je(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(this.getType(),`usfm_${this.getMarker()}`)),{element:t}}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),unknownAttributes:this.getUnknownAttributes(),version:x_}}insertNewAfter(e,t){const n=ko(this.getMarker());return n.setTextFormat(e.format),n.setTextStyle(e.style),n.setDirection(this.getDirection()),n.setFormat(this.getFormatType()),n.setStyle(this.getTextStyle()),n.setIndent(this.getIndent()),this.insertAfter(n,t),n}}function fw(r){const e=r.getAttribute("data-marker")??void 0,t=ko(e);if(r.style){t.setFormat(r.style.textAlign);const n=parseInt(r.style.textIndent,10)/20;n>0&&t.setIndent(n)}return{node:t}}function ko(r,e){return We(new ar(r,e))}function Tt(r){return r instanceof ar}function hw(r){return(r==null?void 0:r.type)===ar.getType()}const Qd="v",S_=1;class Gt extends Jt{constructor(e,t,n,i,s,o,a){super(t??e,a),fe(this,"__marker"),fe(this,"__number"),fe(this,"__sid"),fe(this,"__altnumber"),fe(this,"__pubnumber"),fe(this,"__unknownAttributes"),this.__marker=Qd,this.__number=e,this.__sid=n,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"verse"}static clone(e){const{__number:t,__text:n,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new Gt(t,n,i,s,o,a,l)}static importJSON(e){const{number:t,text:n,sid:i,altnumber:s,pubnumber:o,unknownAttributes:a}=e;return T_(t,n,i,s,o,a).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(e){const t=super.createDOM(e);return t.setAttribute("data-marker",this.__marker),t.classList.add(kc,`usfm_${this.__marker}`),t.setAttribute("data-number",this.__number),t}exportJSON(){return{...super.exportJSON(),type:this.getType(),marker:this.getMarker(),number:this.getNumber(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:S_}}}function T_(r,e,t,n,i,s){return We(new Gt(r,e,t,n,i,s))}function Zd(r){return r instanceof Gt}function pw(r){return(r==null?void 0:r.type)===Gt.getType()}function gw(r){return XE(r)||iw(r)}function Ar(r){return Jd(r)||Ls(r)}function mw(r,e){return r.find(t=>Ar(t)&&t.getNumber()===e.toString())}function yw(r,e=!1){return r.find((t,n)=>(!e||n>0)&&Ar(t))}function ef(r){var e;if(!r)return;if(Ar(r))return r;let t=(e=r.getTopLevelElement())==null?void 0:e.getPreviousSibling();for(;t&&!Ar(t);)t=t.getPreviousSibling();if(t&&Ar(t))return t}function _w(r){let e=r;for(;e!==null;){if(Bt(e))return e;e=e.getParent()}}function bw(r){return xn(r)||Jd(r)||ct(r)||Ls(r)||an(r)||jl(r)||Tt(r)||Bt(r)||Zd(r)||Fo(r)}function vw(r){var e;if(r.anchor.type==="element"){const n=r.anchor.getNode(),i=r.anchor.offset;if(i<n.getChildrenSize())return n.getChildAtIndex(i)}const t=r.anchor.getNode();return t.getNextSibling()??((e=t.getParent())==null?void 0:e.getNextSibling())??null}function Cw(r){var e;const t=r.anchor.offset;if(r.anchor.type==="element"&&t>0)return r.anchor.getNode().getChildAtIndex(t-1);const n=r.anchor.getNode();return n.getPreviousSibling()??((e=n.getParent())==null?void 0:e.getPreviousSibling())??null}function Qi(r){return Tt(r)||an(r)}function Ac(r,e){const t=os(e,Qn),n=!!(r.cid&&t),i=!r.cid&&!t;return r.style===e.getMarker()&&(i||n&&r.cid===t)}function Ew(r,e){const t=V(r)?r:r.getParent(),n=V(e)?e:e.getParent(),i=t&&n?ao(t,n):void 0;return i?i.commonAncestor:void 0}function tf(r){return(r==null?void 0:r.type)===Jt.getType()}function ww(r,e){if(!e)return;const t=r.findIndex(n=>n===e);t&&(r.length=t)}function kw(r,e){if(!e)return r;const t=e.getIndexWithinParent();return r.splice(t+1,r.length-t-1)}function rf(r){return`\\${r}`}function xw(r){return`\\${r}*`}function A_(r,e,t){const n=rf(r);if(e!=null&&e.startsWith(n)){const i=parseInt(e.slice(n.length),10);isNaN(i)||(t=i.toString())}return t}function $o(r,e){let t=rf(r);return e&&(t+=`${$i}${e}`),t+=" ",t}function D_(r){return tf(r)?r.text:tw(r)?r.children.map(e=>D_(e)).join(""):""}function Sw(r){return r.map(e=>D_(e)).join(" ").trim()}function nf(r){return $i+r+" "}function sf(r){return r.reduce((e,t)=>e+(ct(t)?` ${t.getTextContent()}`:""),"").trim()}function vt(r,e=m2){const t={...r};return e.forEach(n=>{Reflect.deleteProperty(t,n)}),Object.keys(t).length===0?void 0:t}function Tw(r,e){const t=e.getElementByKey(r.getKey());return t?t.tagName.toLowerCase():void 0}function dt(r){return Object.fromEntries(Object.entries(r).filter(([,e])=>e!==void 0))}function N_(r){if(!r)return;const e=r.getNodes();if(e.length>0)return r.isBackward()?e[e.length-1]:e[0]}function Dc(r,e){if(!e)return(r+1).toString();const t=e.split("-");if(t.length===2)return parseInt(t[1])?`${parseInt(t[1])+1}`:`${parseInt(t[0])+1}`;const n=RegExp(/^(\d+)([a-yA-Y]{1,3})$/).exec(e);if(!n)return(parseInt(e)+1).toString();const i=String.fromCharCode(n[2].charCodeAt(0)+1);return`${n[1]}${i}`}function of(r,e){if(!e)return!1;const t=e.split("-").map(n=>parseInt(n));if(t.length<1||t.length>2||t[0]>t[1])throw new Error("isVerseInRange: invalid range");return t.length===1?r===t[0]:t.length===2&&isNaN(t[1])?r>=t[0]:(t.length===2&&isNaN(t[0])||r>=t[0])&&r<=t[1]}function Aw(r){return!!r&&r.includes("-")}const Dw=1;class Ps extends Jt{constructor(e,t=!0,n){const i=t?rf(e):xw(e);super(i,n),fe(this,"__marker"),fe(this,"__isOpening"),this.__marker=e,this.__isOpening=t}static getType(){return"marker"}static clone(e){return new Ps(e.__marker,e.__isOpening,e.__key)}static importJSON(e){const{marker:t,isOpening:n}=e;return Nc(t,n).updateFromJSON(e)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setIsOpening(e){if(this.__isOpening===e)return this;const t=this.getWritable();return t.__isOpening=e,t}getIsOpening(){return this.getLatest().__isOpening}createDOM(e){const t=super.createDOM(e);return t.setAttribute("data-marker",this.__marker),t.classList.add(this.__type,this.__isOpening?"opening":"closing"),t}exportJSON(){return{...super.exportJSON(),type:this.getType(),text:this.getTextContent(),marker:this.getMarker(),isOpening:this.getIsOpening(),version:Dw}}}function Nc(r,e){return We(new Ps(r,e))}const Un="internal-comment",Nw=[Un],Mw=1;class At extends qt{constructor(e,t){super(t),fe(this,"__typedIDs"),this.__typedIDs=e||{}}static getType(){return"typed-mark"}static clone(e){const t=JSON.parse(JSON.stringify(e.__typedIDs));return new At(t,e.__key)}static isReservedType(e){return Nw.includes(e)}static importJSON(e){const{typedIDs:t}=e;return xo(t).updateFromJSON(e)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:this.getType(),typedIDs:this.getTypedIDs(),version:Mw}}createDOM(e){const t=document.createElement("mark");for(const[n,i]of Object.entries(this.__typedIDs))Pt(t,ga(e.theme.typedMark,n)),i.length>1&&Pt(t,ga(e.theme.typedMarkOverlap,n));return t}updateDOM(e,t,n){for(const[i,s]of Object.entries(this.__typedIDs)){const o=e.__typedIDs[i].length,a=s.length,l=ga(n.theme.typedMark,i),u=ga(n.theme.typedMarkOverlap,i);o!==a&&(o===0?a===1&&Pt(t,l):a===0&&bi(t,l),o===1?a===2&&Pt(t,u):a===1&&bi(t,u))}return!1}hasID(e,t){const n=this.getTypedIDs()[e];if(!n)return!1;for(const i of n)if(t===i)return!0;return!1}getTypedIDs(){const e=this.getLatest();return Nt(e)?e.__typedIDs:{}}addID(e,t){const n=this.getWritable();if(!Nt(n))return;const i=n.__typedIDs[e]??[];n.__typedIDs[e]=i;for(const s of i)if(t===s)return;i.push(t)}deleteID(e,t){const n=this.getWritable();if(!Nt(n))return;const i=n.__typedIDs[e];for(let s=0;s<i.length;s++)if(t===i[s]){i.splice(s,1);return}}hasNoIDsForEveryType(){return Object.values(this.getTypedIDs()).every(e=>e===void 0||e.length===0)}insertNewAfter(e,t=!0){const n=xo(this.__typedIDs);return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!G(t)||n==="html")return!1;const i=t.anchor,s=t.focus,o=i.getNode(),a=s.getNode(),l=t.isBackward()?i.offset-s.offset:s.offset-i.offset;return this.isParentOf(o)&&this.isParentOf(a)&&this.getTextContent().length===l}excludeFromCopy(e){return e!=="clone"}}function ga(r,e){return`${r}-${e}`}function xo(r){return We(new At(r))}function Nt(r){return r instanceof At}function Ow(r){return(r==null?void 0:r.type)===At.getType()}function M_(r){const e=r.getChildren();let t=null;for(const n of e)t===null?r.insertBefore(n):t.insertAfter(n),t=n;r.remove()}function O_(r,e,t,n){const i=r.getNodes(),s=r.anchor.offset,o=r.focus.offset,a=i.length,l=r.isBackward(),u=l?o:s,c=l?s:o;let f,d;for(let h=0;h<a;h++){const p=i[h];if(V(d)&&d.isParentOf(p))continue;const m=h===0,_=h===a-1;let C=null;if(ee(p)){const v=p.getTextContentSize(),k=m?u:0,M=_?c:v;if(k===0&&M===0)continue;const P=p.splitText(k,M);C=P.length>1&&(P.length===3||m&&!_||M===v)?P[1]:P[0]}else{if(Nt(p))continue;V(p)&&p.isInline()&&(C=p)}if(C!==null){if(C&&C.is(f))continue;const v=C.getParent();(v==null||!v.is(f))&&(d=void 0),f=v,d===void 0&&(d=xo({[e]:[t]}),C.insertBefore(d)),d.append(C)}else f=void 0,d=void 0}e===Un&&V(d)&&(l?d.selectStart():d.selectEnd())}function Iw(r,e,t){let n=r;for(;n!==null;){if(Nt(n))return n.getTypedIDs()[e];if(ee(n)&&t===n.getTextContentSize()){const i=n.getNextSibling();if(Nt(i))return i.getTypedIDs()[e]}n=n.getParent()}}function ap(r){return`external-${r}`}const hl="unmatched",I_=1;class si extends Li{constructor(e,t){super(t),fe(this,"__marker"),this.__marker=e}static getType(){return"unmatched"}static clone(e){const{__marker:t,__key:n}=e;return new si(t,n)}static importJSON(e){const{marker:t}=e;return R_(t)}static importDOM(){return{[hl]:e=>Lw(e)?{conversion:Rw,priority:1}:null}}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}createDOM(){const e=document.createElement(hl);e.setAttribute("data-marker",this.__marker),e.classList.add(op);const t=this.__marker.endsWith("*");return e.title=t?"This closing marker has no matching opening marker!":"This opening marker has no matching closing marker!",e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&je(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(op)),{element:t}}decorate(){return`\\${this.getMarker()}${wc}`}exportJSON(){return{type:this.getType(),marker:this.getMarker(),version:I_}}isKeyboardSelectable(){return!1}}function Rw(r){const e=r.getAttribute("data-marker")??"";return{node:R_(e)}}function R_(r){return We(new si(r))}function Lw(r){return(r==null?void 0:r.tagName)===hl}function Pw(r){return r instanceof si}const Fw=[Mr,On,Wr,Gt,Qe,Xt,ln,Ps,Fi,si,ar,Zn,{replace:Ss,with:()=>jr(),withKlass:Zn}];var B;(function(r){r.FileIdentification="FileIdentification",r.Headers="Headers",r.Remarks="Remarks",r.Introduction="Introduction",r.DivisionMarks="DivisionMarks",r.Paragraphs="Paragraphs",r.Poetry="Poetry",r.TitlesHeadings="TitlesHeadings",r.Tables="Tables",r.CenterTables="CenterTables",r.RightTables="RightTables",r.Lists="Lists",r.Footnotes="Footnotes",r.CrossReferences="CrossReferences",r.SpecialText="SpecialText",r.CharacterStyling="CharacterStyling",r.Breaks="Breaks",r.SpecialFeatures="SpecialFeatures",r.PeripheralReferences="PeripheralReferences",r.PeripheralMaterials="PeripheralMaterials",r.Uncategorized="Uncategorized"})(B||(B={}));var $;(function(r){r.Paragraph="Paragraph",r.Character="Character",r.Note="Note",r.Unknown="Unknown"})($||($={}));const $w={id:{category:B.FileIdentification,type:$.Paragraph,description:"File identification information (BOOKID, FILENAME, EDITOR, MODIFICATION DATE)",hasEndMarker:!1,children:{FileIdentification:["usfm","ide"],Headers:["h","h1","h2","h3","toc1","toc2","toc3"],Remarks:["rem","sts","restore"],Introduction:["imt","imt1","imt2","imt3","imt4","imte","imte1","imte2","is","is1","is2","iot","io","io1","io2","io3","io4","ior","ip","im","ipi","imi","ili","ili1","ili2","ipq","imq","ipr","ib","iq","iq1","iq2","iq3","iex","ie"],DivisionMarks:["c","cl"],TitlesHeadings:["mt","mt1","mt2","mt3","mt4"]}},usfm:{category:B.FileIdentification,type:$.Paragraph,description:"File markup version information",hasEndMarker:!1,children:void 0},ide:{category:B.FileIdentification,type:$.Paragraph,description:"File encoding information",hasEndMarker:!1,children:{Remarks:["rem","sts"]}},h:{category:B.Headers,type:$.Paragraph,description:"Running header text for a book (basic)",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h1:{category:B.Headers,type:$.Paragraph,description:"Running header text",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h2:{category:B.Headers,type:$.Paragraph,description:"Running header text, left side of page",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},h3:{category:B.Headers,type:$.Paragraph,description:"Running header text, right side of page",hasEndMarker:!1,children:{Headers:["toc1","toc2","toc3","toca1","toca2","toca3"]}},toc1:{category:B.Headers,type:$.Paragraph,description:"Long table of contents text",hasEndMarker:!1,children:void 0},toc2:{category:B.Headers,type:$.Paragraph,description:"Short table of contents text",hasEndMarker:!1,children:void 0},toc3:{category:B.Headers,type:$.Paragraph,description:"Book Abbreviation",hasEndMarker:!1,children:void 0},toca1:{category:B.Headers,type:$.Paragraph,description:"Alternative language long table of contents text",hasEndMarker:!1,children:void 0},toca2:{category:B.Headers,type:$.Paragraph,description:"Alternative language short table of contents text",hasEndMarker:!1,children:void 0},toca3:{category:B.Headers,type:$.Paragraph,description:"Alternative language book Abbreviation",hasEndMarker:!1,children:void 0},rem:{category:B.Remarks,type:$.Paragraph,description:"Comments and remarks",hasEndMarker:!1,children:void 0},sts:{category:B.Remarks,type:$.Paragraph,description:"Status of this file",hasEndMarker:!1,children:void 0},restore:{category:B.Remarks,type:$.Paragraph,description:"Project restore information",hasEndMarker:!1,children:void 0},imt:{category:B.Introduction,type:$.Paragraph,description:"Introduction major title, level 1 (if single level) (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt1:{category:B.Introduction,type:$.Paragraph,description:"Introduction major title, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt2:{category:B.Introduction,type:$.Paragraph,description:"Introduction major title, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt3:{category:B.Introduction,type:$.Paragraph,description:"Introduction major title, level 3",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imt4:{category:B.Introduction,type:$.Paragraph,description:"Introduction major title, level 4 (usually within parenthesis)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte:{category:B.Introduction,type:$.Paragraph,description:"Introduction major title at introduction end, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte1:{category:B.Introduction,type:$.Paragraph,description:"Introduction major title at introduction end, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},imte2:{category:B.Introduction,type:$.Paragraph,description:"Introduction major title at introduction end, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},is:{category:B.Introduction,type:$.Paragraph,description:"Introduction section heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"],CharacterStyling:["no"]}},is1:{category:B.Introduction,type:$.Paragraph,description:"Introduction section heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},is2:{category:B.Introduction,type:$.Paragraph,description:"Introduction section heading, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],SpecialText:["bk"]}},iot:{category:B.Introduction,type:$.Paragraph,description:"Introduction outline title (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],CharacterStyling:["no"]}},io:{category:B.Introduction,type:$.Paragraph,description:"Introduction outline text, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},io1:{category:B.Introduction,type:$.Paragraph,description:"Introduction outline text, level 1 (if multiple levels) (basic)",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io2:{category:B.Introduction,type:$.Paragraph,description:"Introduction outline text, level 2",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io3:{category:B.Introduction,type:$.Paragraph,description:"Introduction outline text, level 3",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},io4:{category:B.Introduction,type:$.Paragraph,description:"Introduction outline text, level 4",hasEndMarker:!1,children:{Introduction:["ior","iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ior:{category:B.Introduction,type:$.Character,description:"Introduction references range for outline entry; for marking references separately",hasEndMarker:!0,children:void 0},ip:{category:B.Introduction,type:$.Paragraph,description:"Introduction prose paragraph (basic)",hasEndMarker:!1,children:{Introduction:["iqt"],Footnotes:["f","fe","fm"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},im:{category:B.Introduction,type:$.Paragraph,description:"Introduction prose paragraph, with no first line indent (may occur after poetry)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipi:{category:B.Introduction,type:$.Paragraph,description:"Introduction prose paragraph, indented, with first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},imi:{category:B.Introduction,type:$.Paragraph,description:"Introduction prose paragraph text, indented, with no first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili:{category:B.Introduction,type:$.Paragraph,description:"A list entry, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili1:{category:B.Introduction,type:$.Paragraph,description:"A list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ili2:{category:B.Introduction,type:$.Paragraph,description:"A list entry, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipq:{category:B.Introduction,type:$.Paragraph,description:"Introduction prose paragraph, quote from the body text",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},imq:{category:B.Introduction,type:$.Paragraph,description:"Introduction prose paragraph, quote from the body text, with no first line indent",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},ipr:{category:B.Introduction,type:$.Paragraph,description:"Introduction prose paragraph, right aligned",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ib:{category:B.Introduction,type:$.Paragraph,description:"Introduction blank line",hasEndMarker:!1,children:{Introduction:["iqt"]}},iq:{category:B.Introduction,type:$.Paragraph,description:"Introduction poetry text, level 1 (if single level)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},iq1:{category:B.Introduction,type:$.Paragraph,description:"Introduction poetry text, level 1 (if multiple levels)",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iq2:{category:B.Introduction,type:$.Paragraph,description:"Introduction poetry text, level 2",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iq3:{category:B.Introduction,type:$.Paragraph,description:"Introduction poetry text, level 3",hasEndMarker:!1,children:{Introduction:["iqt"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},iex:{category:B.Introduction,type:$.Paragraph,description:"Introduction explanatory or bridge text (e.g. explanation of missing book in Short Old Testament)",hasEndMarker:!1,children:{Introduction:["iqt"],CharacterStyling:["no"]}},iqt:{category:B.Introduction,type:$.Character,description:"For quoted scripture text appearing in the introduction",hasEndMarker:!0,children:void 0},ie:{category:B.Introduction,type:$.Paragraph,description:"Introduction ending marker",hasEndMarker:!1,children:void 0},c:{category:B.DivisionMarks,type:$.Paragraph,description:"Chapter number",hasEndMarker:!1,children:{DivisionMarks:["ca","cp","cl","cd"],Paragraphs:["p","m","po","pr","cls","pi","pi1","pi2","pi3","pc","mi","nb"],Poetry:["q","q1","q2","q3","q4","qc","qr","qa","qd","b"],TitlesHeadings:["mte","ms","ms1","ms2","ms3","s","s1","s2","s3","s4","r","sp","d","sd","sd1","sd2","sd3","sd4"],Lists:["lh","li","li1","li2","li3","li4","lf","lim","lim1","lim2","lim3","lim4"],Footnotes:["f","fe"],SpecialText:["lit"],Breaks:["pb"]}},ca:{category:B.DivisionMarks,type:$.Character,description:"Second (alternate) chapter number (for coding dual versification; useful for places where different traditions of chapter breaks need to be supported in the same translation)",hasEndMarker:!0,children:void 0},cp:{category:B.DivisionMarks,type:$.Paragraph,description:"Published chapter number (chapter string that should appear in the published text)",hasEndMarker:!1,children:{Footnotes:["f"]}},cl:{category:B.DivisionMarks,type:$.Paragraph,description:"Chapter label used for translations that add a word such as 'Chapter' before chapter numbers (e.g. Psalms). The subsequent text is the chapter label.",hasEndMarker:!1,children:void 0},cd:{category:B.DivisionMarks,type:$.Paragraph,description:"Chapter Description (Publishing option D, e.g. in Russian Bibles)",hasEndMarker:!1,children:{DivisionMarks:["vp"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},v:{category:B.DivisionMarks,type:$.Character,description:"A verse number",hasEndMarker:!1,children:void 0},va:{category:B.DivisionMarks,type:$.Character,description:"Second (alternate) verse number (for coding dual numeration in Psalms; see also NRSV Exo 22.1-4)",hasEndMarker:!0,children:void 0},vp:{category:B.DivisionMarks,type:$.Character,description:"Published verse marker (verse string that should appear in the published text)",hasEndMarker:!0,children:void 0},p:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, with first line indent (basic)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},m:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, with no first line indent (may occur after poetry) (basic)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},po:{category:B.Paragraphs,type:$.Paragraph,description:"Letter opening",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pr:{category:B.Paragraphs,type:$.Paragraph,description:"Text refrain (paragraph text, right aligned)",hasEndMarker:!1,children:{Paragraphs:["pmo","pm","pmc","pmr"],Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},cls:{category:B.Paragraphs,type:$.Paragraph,description:"Letter Closing",hasEndMarker:!1,children:{SpecialText:["tl","sig","pn","png","addpn","add"]}},pmo:{category:B.Paragraphs,type:$.Paragraph,description:"Embedded text opening",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pm:{category:B.Paragraphs,type:$.Paragraph,description:"Embedded text paragraph",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pmc:{category:B.Paragraphs,type:$.Paragraph,description:"Embedded text closing",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pmr:{category:B.Paragraphs,type:$.Paragraph,description:"Embedded text refrain (e.g. Then all the people shall say, 'Amen!')",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, level 1 indent (if single level), with first line indent; often used for discourse (basic)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi1:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, level 1 indent (if multiple levels), with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi2:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, level 2 indent, with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pi3:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, level 3 indent, with first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},pc:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, centered (for Inscription)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},mi:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, indented, with no first line indent; often used for discourse",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},nb:{category:B.Paragraphs,type:$.Paragraph,description:"Paragraph text, with no break from previous paragraph text (at chapter boundary) (basic)",hasEndMarker:!1,children:{Poetry:["qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, level 1 indent (if single level)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q1:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, level 1 indent (if multiple levels) (basic)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q2:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, level 2 indent (basic)",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q3:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, level 3 indent",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},q4:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, level 4 indent",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qc:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, centered",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qr:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, Right Aligned",hasEndMarker:!1,children:{Poetry:["qs","qac","qm","qm1","qm2","qm3"],TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qs:{category:B.Poetry,type:$.Character,description:"Poetry text, Selah",hasEndMarker:!0,children:{Footnotes:["f"],CrossReferences:["x"]}},qa:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, Acrostic marker/heading",hasEndMarker:!1,children:void 0},qac:{category:B.Poetry,type:$.Character,description:"Poetry text, Acrostic markup of the first character of a line of acrostic poetry",hasEndMarker:!0,children:void 0},qm:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, embedded, level 1 indent (if single level)",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm1:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, embedded, level 1 indent (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm2:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, embedded, level 2 indent",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qm3:{category:B.Poetry,type:$.Paragraph,description:"Poetry text, embedded, level 3 indent",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},qd:{category:B.Poetry,type:$.Paragraph,description:"A Hebrew musical performance annotation, similar in content to Hebrew descriptive title.",hasEndMarker:!1,children:{TitlesHeadings:["mte1"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},b:{category:B.Poetry,type:$.Paragraph,description:"Poetry text stanza break (e.g. stanza break) (basic)",hasEndMarker:!1,children:void 0},mt:{category:B.TitlesHeadings,type:$.Paragraph,description:"The main title of the book (if single level)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt1:{category:B.TitlesHeadings,type:$.Paragraph,description:"The main title of the book (if multiple levels) (basic)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt2:{category:B.TitlesHeadings,type:$.Paragraph,description:"A secondary title usually occurring before the main title (basic)",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt3:{category:B.TitlesHeadings,type:$.Paragraph,description:"A secondary title occurring after the main title",hasEndMarker:!1,children:{Footnotes:["f"],CrossReferences:["x"]}},mt4:{category:B.TitlesHeadings,type:$.Paragraph,description:"A small secondary title sometimes occurring within parentheses",hasEndMarker:!1,children:void 0},mte:{category:B.TitlesHeadings,type:$.Paragraph,description:"The main title of the book repeated at the end of the book, level 1 (if single level)",hasEndMarker:!1,children:void 0},mte1:{category:B.TitlesHeadings,type:$.Paragraph,description:"The main title of the book repeated at the end of the book, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mte2"]}},mte2:{category:B.TitlesHeadings,type:$.Paragraph,description:"A secondary title occurring before or after the 'ending' main title",hasEndMarker:!1,children:void 0},ms:{category:B.TitlesHeadings,type:$.Paragraph,description:"A major section division heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms1:{category:B.TitlesHeadings,type:$.Paragraph,description:"A major section division heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms2:{category:B.TitlesHeadings,type:$.Paragraph,description:"A major section division heading, level 2",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},ms3:{category:B.TitlesHeadings,type:$.Paragraph,description:"A major section division heading, level 3",hasEndMarker:!1,children:{TitlesHeadings:["mr"],Footnotes:["f","fe"]}},mr:{category:B.TitlesHeadings,type:$.Paragraph,description:"A major section division references range heading (basic)",hasEndMarker:!1,children:void 0},s:{category:B.TitlesHeadings,type:$.Paragraph,description:"A section heading, level 1 (if single level) (basic)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s1:{category:B.TitlesHeadings,type:$.Paragraph,description:"A section heading, level 1 (if multiple levels)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s2:{category:B.TitlesHeadings,type:$.Paragraph,description:"A section heading, level 2 (e.g. Proverbs 22-24)",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s3:{category:B.TitlesHeadings,type:$.Paragraph,description:"A section heading, level 3 (e.g. Genesis 'The First Day')",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["no","it","bd","bdit","em","sc","sup"]}},s4:{category:B.TitlesHeadings,type:$.Paragraph,description:"A section heading, level 4",hasEndMarker:!1,children:{TitlesHeadings:["sr","r"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},sr:{category:B.TitlesHeadings,type:$.Paragraph,description:"A section division references range heading",hasEndMarker:!1,children:void 0},r:{category:B.TitlesHeadings,type:$.Paragraph,description:"Parallel reference(s) (basic)",hasEndMarker:!1,children:void 0},sp:{category:B.TitlesHeadings,type:$.Paragraph,description:"A heading, to identify the speaker (e.g. Job)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},d:{category:B.TitlesHeadings,type:$.Paragraph,description:"A Hebrew text heading, to provide description (e.g. Psalms)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},sd:{category:B.TitlesHeadings,type:$.Paragraph,description:"Vertical space used to divide the text into sections, level 1 (if single level)",hasEndMarker:!1,children:void 0},sd1:{category:B.TitlesHeadings,type:$.Paragraph,description:"Vertical space used to divide the text into sections, level 1 (if multiple levels)",hasEndMarker:!1,children:void 0},sd2:{category:B.TitlesHeadings,type:$.Paragraph,description:"Vertical space used to divide the text into sections, level 2",hasEndMarker:!1,children:void 0},sd3:{category:B.TitlesHeadings,type:$.Paragraph,description:"Vertical space used to divide the text into sections, level 3",hasEndMarker:!1,children:void 0},sd4:{category:B.TitlesHeadings,type:$.Paragraph,description:"Vertical space used to divide the text into sections, level 4",hasEndMarker:!1,children:void 0},lh:{category:B.Lists,type:$.Paragraph,description:"List header (introductory remark)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li:{category:B.Lists,type:$.Paragraph,description:"A list entry, level 1 (if single level)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li1:{category:B.Lists,type:$.Paragraph,description:"A list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li2:{category:B.Lists,type:$.Paragraph,description:"A list entry, level 2",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li3:{category:B.Lists,type:$.Paragraph,description:"A list entry, level 3",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},li4:{category:B.Lists,type:$.Paragraph,description:"A list entry, level 4",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lf:{category:B.Lists,type:$.Paragraph,description:"List footer (concluding remark)",hasEndMarker:!1,children:{Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim:{category:B.Lists,type:$.Paragraph,description:"An embedded list entry, level 1 (if single level)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim1:{category:B.Lists,type:$.Paragraph,description:"An embedded list entry, level 1 (if multiple levels)",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim2:{category:B.Lists,type:$.Paragraph,description:"An embedded list entry, level 2",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim3:{category:B.Lists,type:$.Paragraph,description:"An embedded list item, level 3",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},lim4:{category:B.Lists,type:$.Paragraph,description:"An embedded list entry, level 4",hasEndMarker:!1,children:{Lists:["litl","lik","liv","liv1","liv2","liv3","liv4","liv5"],Footnotes:["f","fe","fm"],CrossReferences:["x","xt","rq"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},litl:{category:B.Lists,type:$.Character,description:"List entry total text",hasEndMarker:!0,children:void 0},lik:{category:B.Lists,type:$.Character,description:"Structured list entry key text",hasEndMarker:!0,children:void 0},liv:{category:B.Lists,type:$.Character,description:"Structured list entry value 1 content (if single value)",hasEndMarker:!0,children:void 0},liv1:{category:B.Lists,type:$.Character,description:"Structured list entry value 1 content (if multiple values)",hasEndMarker:!0,children:void 0},liv2:{category:B.Lists,type:$.Character,description:"Structured list entry value 2 content",hasEndMarker:!0,children:void 0},liv3:{category:B.Lists,type:$.Character,description:"Structured list entry value 3 content",hasEndMarker:!0,children:void 0},liv4:{category:B.Lists,type:$.Character,description:"Structured list entry value 4 content",hasEndMarker:!0,children:void 0},liv5:{category:B.Lists,type:$.Character,description:"Structured list entry value 5 content",hasEndMarker:!0,children:void 0},f:{category:B.Footnotes,type:$.Note,description:"A Footnote text item (basic)",hasEndMarker:!0,children:{Footnotes:["fr","ft","fk","fq","fqa","fl","fw","fp","fv","fdc"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},fe:{category:B.Footnotes,type:$.Note,description:"An Endnote text item",hasEndMarker:!0,children:{Footnotes:["fr","ft","fk","fq","fqa","fl","fw","fp","fv","fdc"],CrossReferences:["xt"],SpecialText:["qt","nd","tl","dc","bk","sig","pn","png","addpn","wj","k","sls","ord","add"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},fr:{category:B.Footnotes,type:$.Character,description:"The origin reference for the footnote (basic)",hasEndMarker:!0,children:void 0},ft:{category:B.Footnotes,type:$.Character,description:"Footnote text, Protocanon (basic)",hasEndMarker:!0,children:void 0},fk:{category:B.Footnotes,type:$.Character,description:"A footnote keyword (basic)",hasEndMarker:!0,children:void 0},fq:{category:B.Footnotes,type:$.Character,description:"A footnote scripture quote or alternate rendering (basic)",hasEndMarker:!0,children:void 0},fqa:{category:B.Footnotes,type:$.Character,description:"A footnote alternate rendering for a portion of scripture text",hasEndMarker:!0,children:void 0},fl:{category:B.Footnotes,type:$.Character,description:"A footnote label text item, for marking or 'labelling' the type or alternate translation being provided in the note.",hasEndMarker:!0,children:void 0},fw:{category:B.Footnotes,type:$.Character,description:"A footnote witness list, for distinguishing a list of sigla representing witnesses in critical editions.",hasEndMarker:!0,children:void 0},fp:{category:B.Footnotes,type:$.Character,description:"A Footnote additional paragraph marker",hasEndMarker:!0,children:void 0},fv:{category:B.Footnotes,type:$.Character,description:"A verse number within the footnote text",hasEndMarker:!0,children:void 0},fdc:{category:B.Footnotes,type:$.Character,description:"Footnote text, applies to Deuterocanon only",hasEndMarker:!0,children:void 0},fm:{category:B.Footnotes,type:$.Character,description:"An additional footnote marker location for a previous footnote",hasEndMarker:!0,children:void 0},x:{category:B.CrossReferences,type:$.Note,description:"A list of cross references (basic)",hasEndMarker:!0,children:{CrossReferences:["xo","xop","xt","xta","xk","xq","xot","xnt","xdc"],CharacterStyling:["it","bd","bdit","em","sc","sup"]}},xo:{category:B.CrossReferences,type:$.Character,description:"The cross reference origin reference (basic)",hasEndMarker:!0,children:void 0},xop:{category:B.CrossReferences,type:$.Character,description:"Published cross reference origin reference (origin reference that should appear in the published text)",hasEndMarker:!0,children:void 0},xt:{category:B.CrossReferences,type:$.Character,description:"The cross reference target reference(s), protocanon only (basic)",hasEndMarker:!0,children:void 0},xta:{category:B.CrossReferences,type:$.Character,description:"Cross reference target references added text",hasEndMarker:!0,children:void 0},xk:{category:B.CrossReferences,type:$.Character,description:"A cross reference keyword",hasEndMarker:!0,children:void 0},xq:{category:B.CrossReferences,type:$.Character,description:"A cross-reference quotation from the scripture text",hasEndMarker:!0,children:void 0},xot:{category:B.CrossReferences,type:$.Character,description:"Cross-reference target reference(s), Old Testament only",hasEndMarker:!0,children:void 0},xnt:{category:B.CrossReferences,type:$.Character,description:"Cross-reference target reference(s), New Testament only",hasEndMarker:!0,children:void 0},xdc:{category:B.CrossReferences,type:$.Character,description:"Cross-reference target reference(s), Deuterocanon only",hasEndMarker:!0,children:void 0},rq:{category:B.CrossReferences,type:$.Character,description:"A cross-reference indicating the source text for the preceding quotation.",hasEndMarker:!0,children:void 0},qt:{category:B.SpecialText,type:$.Character,description:"For Old Testament quoted text appearing in the New Testament (basic)",hasEndMarker:!0,children:void 0},nd:{category:B.SpecialText,type:$.Character,description:"For name of deity (basic)",hasEndMarker:!0,children:void 0},tl:{category:B.SpecialText,type:$.Character,description:"For transliterated words",hasEndMarker:!0,children:void 0},dc:{category:B.SpecialText,type:$.Character,description:"Deuterocanonical/LXX additions or insertions in the Protocanonical text",hasEndMarker:!0,children:void 0},bk:{category:B.SpecialText,type:$.Character,description:"For the quoted name of a book",hasEndMarker:!0,children:void 0},sig:{category:B.SpecialText,type:$.Character,description:"For the signature of the author of an Epistle",hasEndMarker:!0,children:void 0},pn:{category:B.SpecialText,type:$.Character,description:"For a proper name",hasEndMarker:!0,children:void 0},png:{category:B.SpecialText,type:$.Character,description:"For a geographic proper name",hasEndMarker:!0,children:void 0},addpn:{category:B.SpecialText,type:$.Character,description:"For chinese words to be dot underline & underline",hasEndMarker:!0,children:void 0},wj:{category:B.SpecialText,type:$.Character,description:"For marking the words of Jesus",hasEndMarker:!0,children:void 0},k:{category:B.SpecialText,type:$.Character,description:"For a keyword",hasEndMarker:!0,children:void 0},sls:{category:B.SpecialText,type:$.Character,description:"To represent where the original text is in a secondary language or from an alternate text source",hasEndMarker:!0,children:void 0},ord:{category:B.SpecialText,type:$.Character,description:"For the text portion of an ordinal number",hasEndMarker:!0,children:void 0},add:{category:B.SpecialText,type:$.Character,description:"For a translational addition to the text",hasEndMarker:!0,children:void 0},lit:{category:B.SpecialText,type:$.Paragraph,description:"For a comment or note inserted for liturgical use",hasEndMarker:!1,children:void 0},no:{category:B.CharacterStyling,type:$.Character,description:"A character style, use normal text",hasEndMarker:!0,children:void 0},it:{category:B.CharacterStyling,type:$.Character,description:"A character style, use italic text",hasEndMarker:!0,children:void 0},bd:{category:B.CharacterStyling,type:$.Character,description:"A character style, use bold text",hasEndMarker:!0,children:void 0},bdit:{category:B.CharacterStyling,type:$.Character,description:"A character style, use bold + italic text",hasEndMarker:!0,children:void 0},em:{category:B.CharacterStyling,type:$.Character,description:"A character style, use emphasized text style",hasEndMarker:!0,children:void 0},sc:{category:B.CharacterStyling,type:$.Character,description:"A character style, for small capitalization text",hasEndMarker:!0,children:void 0},sup:{category:B.CharacterStyling,type:$.Character,description:"A character style, for superscript text. Typically for use in critical edition footnotes.",hasEndMarker:!0,children:void 0},pb:{category:B.Breaks,type:$.Paragraph,description:"Page Break used for new reader portions and children's bibles where content is controlled by the page",hasEndMarker:!1,children:void 0}},fi={DivisionMarks:{add:["v","c"],remove:[]},Paragraphs:{add:["p"],remove:[]},Poetry:{add:["q","q1","q2","q3","q4","b"],remove:[]},TitlesHeadings:{add:["mte","ms","ms1","ms2","ms3","s","s1","s2","s3","s4","r","sp","d","sd","sd1","sd2","sd3","sd4"],remove:[]}},Bw={p:{children:fi},q:{children:fi},q1:{children:fi},q2:{children:fi},q3:{children:fi},q4:{children:fi},b:{children:fi},qm:{children:{Paragraphs:{add:["p"],remove:[]}}},c:{type:$.Paragraph,children:null},v:{children:null}};function lp(r){const e=$w[r],t=Bw[r];if(!e)return;if(!t)return e;let n=e.children?{...e.children}:void 0;if(t.children===null&&(n=void 0),t.children){n=n||{};for(const[i,s]of Object.entries(t.children)){const o=i;if(s===null)Reflect.deleteProperty(n,o);else{let a=n[o]||[];s.remove&&(a=a.filter(l=>!s.remove.includes(l))),s.add&&(a=[...new Set([...a,...s.add])]),a.length>0?n[o]=a:Reflect.deleteProperty(n,o)}}Object.keys(n).length===0&&(n=void 0)}return{...e,...t,children:n}}const L_=[];let P_=class F_ extends qt{static getType(){return"mark"}static clone(e){return new F_(e.__ids,e.__key)}static importDOM(){return null}static importJSON(e){return up().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIDs(e.ids)}exportJSON(){return{...super.exportJSON(),ids:this.getIDs()}}constructor(e=L_,t){super(t),this.__ids=e}createDOM(e){const t=document.createElement("mark");return Pt(t,e.theme.mark),this.__ids.length>1&&Pt(t,e.theme.markOverlap),t}updateDOM(e,t,n){const i=e.__ids,s=this.__ids,o=i.length,a=s.length,l=n.theme.markOverlap;return o!==a&&(o===1?a===2&&Pt(t,l):a===1&&bi(t,l)),!1}hasID(e){return this.getIDs().includes(e)}getIDs(){return Array.from(this.getLatest().__ids)}setIDs(e){const t=this.getWritable();return t.__ids=e,t}addID(e){const t=this.getWritable();return t.__ids.includes(e)?t:t.setIDs([...t.__ids,e])}deleteID(e){const t=this.getWritable(),n=t.__ids.indexOf(e);if(n===-1)return t;const i=Array.from(t.__ids);return i.splice(n,1),t.setIDs(i)}insertNewAfter(e,t=!0){const n=up(this.__ids);return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!G(t)||n==="html")return!1;const i=t.anchor,s=t.focus,o=i.getNode(),a=s.getNode(),l=t.isBackward()?i.offset-s.offset:s.offset-i.offset;return this.isParentOf(o)&&this.isParentOf(a)&&this.getTextContent().length===l}excludeFromCopy(e){return e!=="clone"}};function up(r=L_){return We(new P_(r))}function qw(r){return r instanceof P_}function jw(r,e,t){const n={type:Ti,version:Ai,content:r},i=e.serializeEditorState(n,t);return Yd(i.root.children[0])?i.root.children[0].children[0]:i.root.children[0]}const pl="+",$_=1;class un extends Li{constructor(e,t,n,i){super(i),fe(this,"__caller"),fe(this,"__previewText"),fe(this,"__onClick"),this.__caller=e,this.__previewText=t,this.__onClick=n??(()=>{})}static getType(){return"immutable-note-caller"}static clone(e){const{__caller:t,__previewText:n,__onClick:i,__key:s}=e;return new un(t,n,i,s)}static importJSON(e){const{caller:t,previewText:n,onClick:i}=e;return af(t,n,i)}static importDOM(){return{span:e=>zw(e)?{conversion:Uw,priority:1}:null}}setCaller(e){if(this.__caller===e)return this;const t=this.getWritable();return t.__caller=e,t}getCaller(){return this.getLatest().__caller}setPreviewText(e){if(this.__previewText===e)return this;const t=this.getWritable();return t.__previewText=e,t}getPreviewText(){return this.getLatest().__previewText}setOnClick(e){if(this.__onClick===e)return this;const t=this.getWritable();return t.__onClick=e,t}getOnClick(){return this.getLatest().__onClick}createDOM(){const e=document.createElement("span");return e.classList.add(this.__type),e.setAttribute("data-caller",this.__caller),e.setAttribute("data-preview-text",this.__previewText),e}updateDOM(e){return e.__caller!==this.__caller}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&je(t)&&(t.classList.add(this.getType()),t.setAttribute("data-caller",this.getCaller()),t.setAttribute("data-preview-text",this.getPreviewText())),{element:t}}decorate(){const e=`${this.__caller}_${this.__previewText}}`.replace(/\s+/g,"").substring(0,25);return F.jsx("button",{onClick:this.__onClick,title:this.__previewText,"data-caller-id":e,children:this.__caller===pl?"":this.__caller})}exportJSON(){return{type:this.getType(),caller:this.getCaller(),previewText:this.getPreviewText(),onClick:this.getOnClick(),version:$_}}isKeyboardSelectable(){return!1}}function Uw(r){const e=r.getAttribute("data-caller")??"",t=r.getAttribute("data-preview-text")??"";return{node:af(e,t)}}function af(r,e,t){return We(new un(r,e,t))}function zw(r){return r?r.classList.contains(un.getType()):!1}function Bo(r){return r instanceof un}const Hw=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],B_="v",q_=1;class Yt extends Li{constructor(e,t=!1,n,i,s,o,a){super(a),fe(this,"__marker"),fe(this,"__number"),fe(this,"__showMarker"),fe(this,"__sid"),fe(this,"__altnumber"),fe(this,"__pubnumber"),fe(this,"__unknownAttributes"),this.__marker=B_,this.__number=e,this.__showMarker=t,this.__sid=n,this.__altnumber=i,this.__pubnumber=s,this.__unknownAttributes=o}static getType(){return"immutable-verse"}static clone(e){const{__number:t,__showMarker:n,__sid:i,__altnumber:s,__pubnumber:o,__unknownAttributes:a,__key:l}=e;return new Yt(t,n,i,s,o,a,l)}static importJSON(e){const{number:t,showMarker:n,sid:i,altnumber:s,pubnumber:o,unknownAttributes:a}=e;return lf(t,n,i,s,o,a).updateFromJSON(e)}static importDOM(){return{span:e=>Kw(e)?{conversion:Ww,priority:1}:null}}updateFromJSON(e){return super.updateFromJSON(e).setMarker(e.marker)}setMarker(e){if(this.__marker===e)return this;const t=this.getWritable();return t.__marker=e,t}getMarker(){return this.getLatest().__marker}setNumber(e){if(this.__number===e)return this;const t=this.getWritable();return t.__number=e,t}getNumber(){return this.getLatest().__number}setShowMarker(e=!1){if(this.__showMarker===e)return this;const t=this.getWritable();return t.__showMarker=e,t}getShowMarker(){return this.getLatest().__showMarker}setSid(e){if(this.__sid===e)return this;const t=this.getWritable();return t.__sid=e,t}getSid(){return this.getLatest().__sid}setAltnumber(e){if(this.__altnumber===e)return this;const t=this.getWritable();return t.__altnumber=e,t}getAltnumber(){return this.getLatest().__altnumber}setPubnumber(e){if(this.__pubnumber===e)return this;const t=this.getWritable();return t.__pubnumber=e,t}getPubnumber(){return this.getLatest().__pubnumber}setUnknownAttributes(e){const t=this.getWritable();return t.__unknownAttributes=e,t}getUnknownAttributes(){return this.getLatest().__unknownAttributes}createDOM(){const e=document.createElement("span");return e.setAttribute("data-marker",this.__marker),e.classList.add(kc,`usfm_${this.__marker}`),e.setAttribute("data-number",this.__number),e}updateDOM(){return!1}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&je(t)&&(t.setAttribute("data-marker",this.getMarker()),t.classList.add(kc,`usfm_${this.getMarker()}`),t.setAttribute("data-number",this.getNumber())),{element:t}}decorate(){return F.jsx("span",{children:this.getShowMarker()?$o(this.getMarker(),this.getNumber()):wc+this.getNumber()+wc})}exportJSON(){return{type:this.getType(),marker:this.getMarker(),number:this.getNumber(),showMarker:this.getShowMarker(),sid:this.getSid(),altnumber:this.getAltnumber(),pubnumber:this.getPubnumber(),unknownAttributes:this.getUnknownAttributes(),version:q_}}isKeyboardSelectable(){return!1}}function Ww(r){const e=r.getAttribute("data-number")??"0";return{node:lf(e)}}function lf(r,e,t,n,i,s){return We(new Yt(r,e,t,n,i,s))}function Kw(r){return((r==null?void 0:r.getAttribute("data-marker"))??void 0)===B_}function qo(r){return r instanceof Yt}function Vw(r){return(r==null?void 0:r.type)===Yt.getType()}function Dr(r){return Zd(r)||qo(r)}function Jw(r){return pw(r)||Vw(r)}function Gw(r){return r.find(e=>Tt(e))}function Yw(r,e){return V(r)?r.getChildren().find(t=>Dr(t)&&of(e,t.getNumber())):void 0}function Xw(r,e){return e===0?Gw(r):r.map(t=>Yw(t,e)).filter(t=>t)[0]}function cp(r){return!r||!V(r)?void 0:r.getChildren().findLast(e=>Dr(e))}function j_(r){var e,t;if(!r||Ar(r))return;if(Dr(r))return r;let n=Nt(r.getParent())?(e=r.getParent())==null?void 0:e.getPreviousSibling():r.getPreviousSibling();for(;n&&!Dr(n)&&!Ar(n);)n=n.getPreviousSibling();if(n&&Dr(n))return n;let i=(t=r.getTopLevelElement())==null?void 0:t.getPreviousSibling(),s=cp(i),o=s;for(;i&&!s&&!Ar(i);)s=o,i=i.getPreviousSibling(),o=cp(i);if(!(!s&&Ar(i)))return s}function Qw(r){return bw(r)||qo(r)}function uf(r){if(ee(r)){const e=r.getTextContent();!e.endsWith(" ")&&!e.endsWith($i)&&r.setTextContent(`${e} `)}}function U_(r){if(ee(r)){const e=r.getTextContent();e.startsWith(" ")&&r.setTextContent(e.trimStart())}}function cf(r,e){return r.getEditorState().read(()=>!Ae(e))}const Zw=[un,Yt,...Fw],ek=T.forwardRef((r,e)=>{const{coords:t,children:n,style:i,...s}=r,o=t!==void 0;return F.jsx("div",{ref:e,className:"floating-box","aria-hidden":!o,style:{...i,position:"absolute",zIndex:1e3,top:t==null?void 0:t.y,left:t==null?void 0:t.x,visibility:o?"visible":"hidden",opacity:o?1:0},...s,children:n})});function tk(){const[r,e]=T.useState(void 0),[t,n]=T.useState(),i=T.useRef(null),s=T.useCallback((a,l)=>{i.current&&i.current();const u=a.commonAncestorContainer.nodeType===a.commonAncestorContainer.TEXT_NODE?a:a.commonAncestorContainer;i.current=Gb(u,l,()=>{Yb(u,l,{placement:"bottom-start",middleware:[Xb(),Qb()]}).then(c=>{n(c.placement),e(f=>(f==null?void 0:f.x)===c.x&&(f==null?void 0:f.y)===c.y?f:{x:c.x,y:c.y})}).catch(()=>{e(void 0)})})},[]),o=T.useCallback(()=>{i.current&&(e(void 0),i.current(),i.current=null)},[]);return T.useEffect(()=>o,[o]),{coords:r,placement:t,updatePosition:s,cleanup:o}}function rk({isOpen:r,floatingBoxRef:e}){const{coords:t,updatePosition:n,cleanup:i,placement:s}=tk();return T.useEffect(()=>{var o;if(!r||!e.current){i();return}const a=(o=window.getSelection())==null?void 0:o.getRangeAt(0);if(!a){i();return}return n(a,e.current),i},[i,r,e,n]),{coords:t,placement:s}}const nk=document.body,ik=T.memo(ek);function sk({isOpen:r=!1,children:e}){const t=T.useRef(null),{coords:n,placement:i}=rk({isOpen:r,floatingBoxRef:t}),s=T.useMemo(()=>n?typeof e=="function"?e:()=>e:()=>null,[e,n]);return Tr.createPortal(F.jsx(ik,{ref:t,coords:n,style:n?void 0:{display:"none"},children:s({isOpen:r,placement:i})}),nk)}const z_=T.createContext(void 0);function df(){const r=T.useContext(z_);if(!r)throw new Error("useMenuContext must be used within a MenuProvider");return r}function ok(r,e){const[t,n]=T.useState(0),[i,s]=T.useState(-1),o=T.useMemo(()=>r??[],[r]),a={menuItems:o,activeIndex:t,selectedIndex:i,onSelectOption:e??(()=>{})},l=T.useCallback(()=>{n(f=>{const d=o.length;return d?(f-1+d)%d:0})},[o.length]),u=T.useCallback(()=>{n(f=>{const d=o.length;return d?(f+1)%d:0})},[o.length]),c=T.useCallback(()=>{const f=o.length;if(t>=0&&t<f){const d=o[t];e==null||e(d),s(t)}},[t,o,e]);return{state:a,moveUp:l,moveDown:u,select:c,setActiveIndex:n,setSelectedIndex:s}}function ak({children:r,menuItems:e,onSelectOption:t,...n}){const i=ok(e,t);return F.jsx(z_.Provider,{value:i,children:F.jsx("div",{...n,children:r})})}const H_=T.forwardRef(({index:r,children:e,onMouseEnter:t,onClick:n,...i},s)=>{const{state:{activeIndex:o},setActiveIndex:a,setSelectedIndex:l,select:u}=df(),c=T.useCallback(d=>{u(),l(-1),n==null||n(d)},[n,u,l]),f=T.useCallback(d=>{a(r),t==null||t(d)},[r,a,t]);return F.jsx("button",{ref:s,role:"menuitem",...i,onClick:c,onMouseEnter:f,"aria-selected":r!==void 0&&o===r?"true":void 0,tabIndex:-1,children:e})});function lk({children:r,autoIndex:e=!0,...t}){const n=T.useRef(null),{state:{activeIndex:i,menuItems:s}}=df(),o=T.useMemo(()=>s?typeof r=="function"?r:()=>r:()=>null,[r,s]),a=T.useMemo(()=>{const l=o(s);return e?T.Children.map(l,(u,c)=>T.isValidElement(u)&&u.type===H_&&u.props.index===void 0?T.cloneElement(u,{index:c}):u):l},[o,e,s]);return T.useEffect(()=>{if(n.current){const l=n.current,u=l.children[i];if(u){const c=l.getBoundingClientRect(),f=u.getBoundingClientRect();f.bottom>c.bottom?l.scrollTop+=f.bottom-c.bottom:f.top<c.top&&(l.scrollTop-=c.top-f.top)}}},[i]),F.jsx("div",{ref:n,role:"menu",...t,children:a})}const $u={Root:ak,Options:lk,Option:H_},uk=(r,e,t)=>Pa(r,t).toLowerCase().includes(e.toLowerCase()),dp=r=>Object.keys(r).find(e=>typeof r[e]=="string")||"",Pa=(r,e)=>{const t=r[e];return typeof t=="string"?t:String(t)};function ck(r){const{query:e,items:t,filterBy:n,filter:i,sortBy:s,sortingOptions:o}=r,{caseSensitive:a=!1,priorityOrder:l=["exact","startsWith","contains"]}=o||{},u=a?e:e.toLowerCase();let c,f;i?(f=i,c=t.length>0?dp(t[0]):""):(c=n||(t.length>0?dp(t[0]):""),f=(p,m)=>uk(p,m,c));const d=s||c,h=new Map;return t.filter(p=>{try{return f(p,e)}catch(m){return console.warn("Error filtering item:",p,m),!1}}).sort((p,m)=>{const _=k=>(h.has(k)||h.set(k,Pa(k,d).toLowerCase()),h.get(k)??""),C=a?Pa(p,d):_(p),v=a?Pa(m,d):_(m);for(const k of l)switch(k){case"exact":if(C===u&&v!==u)return-1;if(v===u&&C!==u)return 1;break;case"startsWith":if(C.startsWith(u)&&!v.startsWith(u))return-1;if(v.startsWith(u)&&!C.startsWith(u))return 1;break;case"contains":{const M=C.indexOf(u),P=v.indexOf(u);if(M!==-1&&P===-1)return-1;if(P!==-1&&M===-1)return 1;if(M!==-1&&P!==-1)return M-P;break}}return C.localeCompare(v)})}function dk(r){const{query:e,items:t,filterBy:n,filter:i,sortBy:s,sortingOptions:o}=r;return T.useMemo(()=>ck({query:e,items:t,filterBy:n,filter:i,sortBy:s,sortingOptions:o}),[e,t,n,i,s,o])}function fk(){const{moveUp:r,moveDown:e,select:t}=df();return T.useMemo(()=>({moveUp:r,moveDown:e,select:t}),[r,e,t])}const hk=()=>{const r=fk(),[e]=Ee();T.useEffect(()=>{const t=n=>{const i={ArrowDown:()=>r==null?void 0:r.moveDown(),ArrowUp:()=>r==null?void 0:r.moveUp(),Enter:()=>r==null?void 0:r.select(),Tab:()=>r==null?void 0:r.select()}[n.key];return i?(i(),n.preventDefault(),n.stopPropagation(),!0):!1};return e.registerCommand(Cs,t,Sl)},[e,r])};function pk(){return hk(),null}function gk(r){const{options:e,onSelectOption:t,onClose:n,inverse:i,query:s,menuOpenKey:o}=r,[a]=Ee(),l=s!==void 0,[u,c]=T.useState(""),f=l?s??"":u,d=dk({query:f,items:e,filterBy:"name"}),h=p=>{n==null||n(),t?t(p):p.action(a)};return T.useEffect(()=>a.registerCommand(Cs,p=>{if(l)return!1;const m={Escape:()=>n==null?void 0:n(),Backspace:()=>{f.length===0?n==null||n():c(_=>_.slice(0,-1))}}[p.key];return m?(p.stopPropagation(),p.preventDefault(),m(),!0):p.key.length===1?(p.stopPropagation(),p.preventDefault(),p.key!==o&&c(_=>_+p.key),!0):!1},Sl),[a,l,f,o,n]),F.jsxs($u.Root,{className:`autocomplete-menu-container ${i?"inverse":""}`,menuItems:d,onSelectOption:p=>h(p),children:[!l&&F.jsx("input",{value:f,type:"text",disabled:!0}),F.jsx(pk,{}),F.jsx($u.Options,{className:"autocomplete-menu-options",autoIndex:!1,children:p=>p.map((m,_)=>F.jsxs($u.Option,{index:_,children:[F.jsx("span",{className:"label",children:m.label??m.name}),F.jsx("span",{className:"description",children:m.description})]},m.name))})]})}function mk({trigger:r,items:e}){const[t]=Ee(),[n,i]=T.useState(!1),s=T.useCallback(o=>{o.key==="Escape"&&n?(i(!1),t.focus()):o.key===r&&!n&&(o.preventDefault(),i(!0))},[t,r,n]);return T.useEffect(()=>t.registerRootListener(o=>{if(o)return o.addEventListener("keydown",s),()=>{o.removeEventListener("keydown",s)}}),[t,s]),T.useEffect(()=>t.registerUpdateListener(({prevEditorState:o,editorState:a})=>{const l=o.read(()=>{const u=re();if(G(u))return u});a.read(()=>{const u=re();!G(u)||l!=null&&l.is(u)||i(!1)})}),[t]),e&&F.jsx(sk,{isOpen:n,children:({placement:o})=>F.jsx(gk,{options:e,onClose:()=>i(!1),inverse:o==="top-start",menuOpenKey:r})})}function yk({scriptureReference:r,contextMarker:e,getMarkerAction:t}){return{markersMenuItems:T.useMemo(()=>{if(!e||!r)return;const n=lp(e);if(n!=null&&n.children)return Object.values(n.children).flatMap(i=>i.map(s=>{const o=lp(s),{action:a}=t(s,o);return{name:s,label:s,description:(o==null?void 0:o.description)??"",action:l=>{a({editor:l,reference:r})}}}))},[e,t,r])}}function Mc(r,e){if(!r||!ee(r))return[void 0,void 0];const t=r.getTextContent();if(e>=0&&e<t.length)return[r,e];let n=r.getNextSibling();if(!n){const s=r.getParent();Nt(s)&&(n=s.getNextSibling())}if(!n||!Nt(n)&&!ee(n))return[void 0,void 0];const i=e-t.length;return n&&ee(n)?Mc(n,i):Mc(n.getFirstChild()??void 0,i)}function fp(r){const e=C2(r.jsonPath);let t=De();for(const n of e){if(!t||!V(t))return[void 0,void 0];t=t.getChildAtIndex(n)??void 0}return Mc(t,r.offset)}function hp(r){return V(r)?"element":"text"}function W_(r){const{start:e}=r;let{end:t}=r;t===void 0&&(t=e);const[n,i]=fp(e),[s,o]=fp(t);if(!n||!s||i===void 0||o===void 0)return;const a=Mo();return a.anchor=or(n.getKey(),i,hp(n)),a.focus=or(s.getKey(),o,hp(s)),a}function pp(r,e){const t=[];let n=r;for(;n!=null&&n.getParent();){const i=n.getParent();if(i){const s=i==null?void 0:i.getChildren().indexOf(n);s>=0&&t.unshift(s)}n=i}return{jsonPath:E2(t),offset:e}}function K_(){const r=re();if(!r||!G(r))return;const e=r.isBackward()?r.focus.getNode():r.anchor.getNode(),t=r.isBackward()?r.focus.offset:r.anchor.offset,n=pp(e,t);if(r.isCollapsed())return{start:n};const i=r.isBackward()?r.anchor.getNode():r.focus.getNode(),s=r.isBackward()?r.anchor.offset:r.focus.offset,o=pp(i,s);return{start:n,end:o}}function Fa(r,e){return`${r}:${e}`}function _k(r,e){T.useEffect(()=>{if(!r.hasNodes([At]))throw new Error("AnnotationPlugin: TypedMarkNode not registered on editor!");const t=new Map;return _t(fy(r,At,n=>xo(n.getTypedIDs()),(n,i)=>{for(const[s,o]of Object.entries(n.getTypedIDs()))o.forEach(a=>{i.addID(s,a)})}),r.registerMutationListener(At,n=>{r.getEditorState().read(()=>{for(const[i,s]of n){const o=Ae(i);let a={};s==="destroyed"?a=t.get(i)??{}:Nt(o)&&(a=o.getTypedIDs());for(const[l,u]of Object.entries(a))if(!At.isReservedType(l))for(const c of u){let f=e.get(Fa(l,c));a[l]=u,t.set(i,a),s==="destroyed"?f!==void 0&&(f.delete(i),f.size===0&&e.delete(Fa(l,c))):(f===void 0&&(f=new Set,e.set(Fa(l,c),f)),f.has(i)||f.add(i))}}})},{skipInitialization:!0}))},[r,e])}const bk=T.forwardRef(function({logger:r},e){const[t]=Ee(),n=T.useMemo(()=>new Map,[]);return _k(t,n),T.useImperativeHandle(e,()=>({addAnnotation(i,s,o){if(At.isReservedType(s))throw new Error(`addAnnotation: Can't directly add this reserved annotation type '${s}'. Use the appropriate plugin instead.`);t.update(()=>{const a=W_(i);if(a===void 0){r==null||r.error("Failed to find start or end node of the annotation.");return}O_(a,s,o)},{tag:Sc})},removeAnnotation(i,s){if(At.isReservedType(i))throw new Error(`removeAnnotation: Can't directly remove this reserved annotation type '${i}'. Use the appropriate plugin instead.`);const o=n.get(Fa(i,s));o!==void 0&&setTimeout(()=>{t.update(()=>{for(const a of o){const l=Ae(a);Nt(l)&&(l.deleteID(i,s),l.hasNoIDsForEveryType()&&M_(l))}},{tag:Sc})})}})),null}),Ul=`
`;function ei(r){return Ar(r)||Dr(r)||jl(r)||Bt(r)||Pw(r)}function cn(r){return Qi(r)||xn(r)}function V_(r,e){if(!r)return!1;if(!e)return!0;let t=e.node.getParent();for(;t;){if(t===r)return!1;t=t.getParent()}return!0}function Oc(r,e){const t={insert:r.__text},n=os(r,bs);if(n&&(t.attributes={segment:n}),e&&e.length>0){let i=e.map(s=>{const o={style:s.__marker},a=os(s,Qn);return a&&(o.cid=a),o});i.length===1&&(i=i[0]),t.attributes={...t.attributes,char:i}}return t}function gp(r){const e=new to;return r.isEmpty()||r.read(()=>{const t=De();if(!t||t.isEmpty())return;const n=t.getChildren();if(n.length===1&&an(n[0])&&(!n[0].getChildren()||n[0].getChildrenSize()===0))return;const i=vk();for(const s of i)e.push(s)}),e}function vk(){const r=[],e=Id(),t=[],n=[],i={children:[],contentsOps:[]};for(let s=0;s<e.length;s++){const o=e[s].node;r.push(...mp(o,s,e,t,n,i))}for(const s of t)r.push(...mp(s,e.length,e,t,n,i));return r}function mp(r,e,t,n,i,s){if(!r)return[];const o=[];return Ck(r,o,n),Ek(r,o,i,s),wk(r,e,t,i),Ar(r)&&o.push(Sk(r)),Dr(r)&&o.push(Ak(r)),jl(r)&&o.push(Dk(r)),kk(r,o,s),o}function Ck(r,e,t){if(!r.isInline()){const n=t.pop();xn(n)?e.push(xk(n)):Tt(n)?e.push(Tk(n)):an(n)&&e.push({insert:Ul})}cn(r)&&(t.includes(r)||t.push(r))}function Ek(r,e,t,n){var i;if(!ee(r))return;const s=r.getParent();if(Bt(s)&&s.getFirstChild()===r)return;const o=Oc(r,t);n.children.includes(r)?(i=n.contentsOps)==null||i.push(o):e.push(o)}function wk(r,e,t,n){ct(r)&&!n.includes(r)&&n.push(r);const i=t[e+1];for(const s of n.toReversed())V_(s,i)&&n.pop()}function kk(r,e,t){var n;if(!Bt(r))return;Id(r).forEach(s=>t.children.push(s.node));const i=Nk(r);t.contentsOps=(n=i.insert.note.contents)==null?void 0:n.ops,e.push(i)}function xk(r){const e={style:ql,code:r.__code};return{insert:Ul,attributes:{book:e}}}function Sk(r){const e={style:Vd,number:r.__number};return r.__sid&&(e.sid=r.__sid),r.__altnumber&&(e.altnumber=r.__altnumber),r.__pubnumber&&(e.pubnumber=r.__pubnumber),{insert:{chapter:e}}}function Tk(r){const e={style:r.__marker};return{insert:Ul,attributes:{para:e}}}function Ak(r){const e={style:Qd,number:r.__number};return r.__sid&&(e.sid=r.__sid),r.__altnumber&&(e.altnumber=r.__altnumber),r.__pubnumber&&(e.pubnumber=r.__pubnumber),{insert:{verse:e}}}function Dk(r){const e={style:r.__marker};return r.__sid&&(e.sid=r.__sid),r.__eid&&(e.eid=r.__eid),{insert:{milestone:e}}}function Nk(r){const e={style:r.__marker,caller:r.__caller};return r.__category&&(e.category=r.__category),r.getChildrenSize()>1&&(e.contents={ops:[]}),{insert:{note:e}}}function Mk({ignoreHistoryMergeTagChange:r=!0,ignoreSelectionChange:e=!1,onChange:t}){const[n]=Ee();return T.useLayoutEffect(()=>{if(t)return n.registerUpdateListener(i=>{const{editorState:s,dirtyElements:o,dirtyLeaves:a,prevEditorState:l,tags:u}=i;if(e&&o.size===0&&a.size===0||r&&u.has(mi)||l.isEmpty())return;const c=Ok(n,i);t(s,n,u,c)})},[n,r,e,t]),null}function Ok(r,{dirtyLeaves:e,prevEditorState:t}){let n=new to;return r.getEditorState().read(()=>{const i=e.values().next().value??"";if(e.size===1&&ee(Ae(i))){const s=Ae(i),o=Ik(s);if(ee(s)){const a=t.read(()=>{const c=Ae(i);return new to([ee(c)?Oc(c):{insert:""}])}),l=new to([Oc(s)]),u=new to(o>0?[{retain:o}]:[]);n=n.concat(u).concat(a.diff(l))}}else{const s=gp(t),o=gp(r.getEditorState());n=s.diff(o)}}),n.ops}function Ik(r){if(!r)return 0;const e=Id(),t=[];let n=0;for(let i=0;i<e.length;i++){const s=e[i].node;if(s===r)return n;n+=Rk(s,i,e,t)}return n}function Rk(r,e,t,n){return ee(r)?r.getTextContent().length:ei(r)?1:cn(r)?Lk(r,e,t,n):0}function Lk(r,e,t,n){if(n.includes(r)||n.push(r),V_(r,t[e+1])){const i=n.indexOf(r);return i>-1&&n.splice(i,1),1}return 0}const Pk=["style"],Fk=["style","code"],gl=["style","cid"],$k=["style","number","sid","altnumber","pubnumber"],Bk=["style","number","sid","altnumber","pubnumber"],qk=["style","sid","eid"],jk=["style","caller","category","contents"];function Uk(r,e,t,n){let i=0;r.forEach(s=>{if("retain"in s)i+=zk(s,i,n);else if("delete"in s){if(typeof s.delete!="number"||s.delete<=0){n==null||n.error(`Invalid delete operation: ${JSON.stringify(s)}`);return}n==null||n.debug(`Delete: ${s.delete}`),Wk(i,s.delete,n)}else"insert"in s?typeof s.insert=="string"?(n==null||n.debug(`Insert: '${s.insert}'`),i+=Kk(i,s.insert,s.attributes,n)):typeof s.insert=="object"&&s.insert!==null?(n==null||n.debug(`Insert embed: ${JSON.stringify(s.insert)}`),Jk(i,s,e,t,n)?i+=1:n==null||n.error(`Failed to process insert embed operation: ${JSON.stringify(s.insert)} at index ${i}. Document may be inconsistent.`)):n==null||n.error(`Insert of unknown type: ${JSON.stringify(s.insert)}`):n==null||n.error(`Unknown operation: ${JSON.stringify(s)}`)})}function zk(r,e,t){return typeof r.retain!="number"||r.retain<0?(t==null||t.error(`Invalid retain operation: ${JSON.stringify(r)}`),0):(t==null||t.debug(`Retain: ${r.retain}`),r.attributes&&(t==null||t.debug(`Retain attributes: ${JSON.stringify(r.attributes)}`),Hk(e,r.retain,r.attributes,t)),r.retain)}function Hk(r,e,t,n){n==null||n.debug(`Applying attributes for range [${r}, ${r+e-1}] with attributes: ${JSON.stringify(t)}`);let i=e,s=0,o=-1;const a=De();function l(u){if(i<=0)return!0;if(ee(u)){const c=u.getTextContentSize();if(r<s+c&&s<r+e){const f=Math.max(0,r-s),d=c-f,h=Math.min(i,d);if(h>0){let p=u;const m=f>0,_=h<c-f;if(m&&_){const[,C]=u.splitText(f);[p]=C.splitText(h)}else m?[,p]=u.splitText(f):_&&([p]=u.splitText(h));if(So(t)){const C=p.getParent();if(ct(C)){const v=t.char;let k;Array.isArray(v)?o>=0&&o<=v.length-1&&(k=v[o]):o===0&&(k=v);const M=k?Ac(k,C):!1;if(M&&Array.isArray(v)&&v.length>1){const P=Oe("");p.replace(P);const x=typeof t.segment=="string"?t.segment:void 0,O=zl(v.slice(1),p,x);P.replace(O),xr(t,p)}else if(M)xr(t,p);else{const P=Oe("");p.replace(P);const x=yp(p,t,n);x?C.insertAfter(x):P.replace(p)}}else{const v=Oe("");p.replace(v);const k=yp(p,t,n);k?v.replace(k):v.replace(p)}}else xr(t,p);i-=h}}s+=c}else if(ei(u))r<=s&&s<r+e&&i>0&&(_p(u,t),i-=1),s+=1;else if(ct(u)){o+=1;let c=!1;if(r<=s&&s<r+e&&i>0)if(So(t)){const f=t.char;let d;if(Array.isArray(f)?o>=0&&o<=f.length-1&&(d=f[o]):o===0&&(d=f),d){u.setMarker(d.style),typeof d.cid=="string"&&En(u,Qn,()=>d.cid);const h=vt(d,gl);h&&Object.keys(h).length>0?u.setUnknownAttributes({...u.getUnknownAttributes()??{},...h}):u.setUnknownAttributes(void 0)}}else(t.char===!1||t.char===null||rx(t.char))&&(c=!0);if(i>0){const f=u.getChildren();for(const d of f){if(i<=0)break;if(l(d)&&i<=0)return c&&Dh(u),!0}}c&&Dh(u),o-=1}else if(cn(u)){const c=u.getChildren();for(const d of c){if(i<=0)break;if(l(d)&&i<=0)return!0}const f=1;if(r<=s&&s<r+i&&i>0){if(!an(u))_p(u,t);else if(Y_(t)){const d=G_(t.para);d&&u.replace(d,!0)}i-=f}s+=f}else if(V(u)){const c=u.getChildren();for(const f of c){if(i<=0)break;if(l(f)&&i<=0)return!0}}return i<=0}l(a),i>0&&(n==null||n.warn(`$applyAttributes: Not all characters in the retain operation (length ${e}) could be processed. Remaining: ${i}. targetIndex: ${r}, final currentIndex: ${s}`))}function yp(r,e,t){var n;const i=typeof e.segment=="string"?e.segment:void 0,s=zl(e.char,r,i);if(!ct(s)){t==null||t.error(`Failed to create CharNode for text transformation. Style: ${Array.isArray(e.char)?e.char[0].style:(n=e.char)==null?void 0:n.style}. Falling back to standard text attributes.`),xr(e,r);return}const o={};X_.forEach(u=>{r.hasFormat(u)&&(o[u]="true")});const a={};Object.entries(e).forEach(([u,c])=>{u==="segment"||u==="char"||(typeof c=="string"?a[u]=c:c===!0?a[u]="true":c===!1&&(a[u]="false"))});const l={...s.getUnknownAttributes()??{},...o,...a};return Object.keys(l).length>0&&s.setUnknownAttributes(l),xr(e,r),s}function _p(r,e){for(const t of Object.keys(e)){const n=e[t];if(t==="char"&&ct(r)&&So(e)){const i=n;if(r.setMarker(i.style),typeof i.cid=="string"){const o=i.cid;En(r,Qn,()=>o)}const s=vt(i,gl);s&&Object.keys(s).length>0&&r.setUnknownAttributes({...r.getUnknownAttributes()??{},...s});continue}typeof n=="string"&&(Ar(r)||Dr(r)||jl(r)||Bt(r)||Fo(r)?r.setUnknownAttributes({...r.getUnknownAttributes()??{},[t]:n}):(xn(r)||Tt(r)||ct(r))&&(t==="style"&&!xn(r)?r.setMarker(n):t==="code"&&xn(r)?r.setCode(n):r.setUnknownAttributes({...r.getUnknownAttributes()??{},[t]:n})),t==="segment"&&En(r,bs,()=>n))}}function Wk(r,e,t){if(e<=0)return;const n=De();let i=0,s=e;function o(a){if(s<=0)return!0;if(ee(a)){let l=a.getTextContentSize();if(r<i+l&&i<r+s){const u=Math.max(0,r-i),c=l-u,f=Math.min(s,c);f>0&&(a.spliceText(u,f,""),a.getTextContentSize()===0&&a.remove(),t==null||t.debug(`Deleted ${f} length from TextNode (key: ${a.getKey()}) at nodeOffset ${u}. Original targetIndex: ${r}, current currentIndex: ${i}.`),s-=f,l-=f)}i+=l}else if(ei(a))r<=i&&i<r+s?(a.remove(),t==null||t.debug(`Deleted embed node (key: ${a.getKey()}) at currentIndex: ${i}. Original targetIndex: ${r}, remainingToDelete: ${s}.`),s-=1):i+=1;else if(cn(a)){const l=a.getChildren().slice(),u=a.getChildren();for(const c of u){if(s<=0)break;if(o(c)&&s<=0)return!0}if(r<=i&&i<r+s&&cn(a)){s-=1;const c=a.getChildren().length;if(l.length>0&&c===0){const f=a.getParent();((f==null?void 0:f.getChildren())??[]).length>1?(a.remove(),t==null||t.debug(`Removed entire ParaNode that had all its content deleted at currentIndex: ${i}. Original targetIndex: ${r}, remainingToDelete: ${s}.`)):(a.replace(jr(),!0),t==null||t.debug(`Replaced last ParaNode with ImpliedParaNode at currentIndex: ${i}. Original targetIndex: ${r}, remainingToDelete: ${s}.`))}else if(s>0){const f=a.getNextSibling();if(f&&Qi(f)){let d=i+1;const h=f.getChildren();for(const m of h){if(s<=0)break;const _=i;if(i=d,o(m)){i=_;break}ee(m)?d+=m.getTextContentSize():ei(m)&&(d+=1),i=_}const p=f.getChildren();for(const m of p)m.remove(),a.append(m);f.remove(),t==null||t.debug(`Merged next paragraph into current one after deleting symbolic close at currentIndex: ${i}. Original targetIndex: ${r}, remainingToDelete: ${s}.`)}else a.replace(jr(),!0)}else Tt(a)?a.replace(jr(),!0):a.remove()}i+=1}else if(V(a)){const l=a.getChildren();for(const u of l){if(s<=0)break;if(o(u)&&s<=0)return!0}}return s<=0}o(n),s>0&&(t==null||t.warn(`Delete operation could not remove all requested characters. Remaining to delete: ${s}. Original targetIndex: ${r}, OT length: ${e}. Final currentIndex: ${i}`))}function Kk(r,e,t,n){return e===Ul?Gk(r,t,n):So(t)?Vk(r,e,t,n):(n==null||n.debug(`Attempting to insert text "${e}" with attributes ${JSON.stringify(t)} at index ${r}`),Ic(r,e,t,n))}function Vk(r,e,t,n){n==null||n.debug(`Attempting to insert CharNode with text "${e}" and attributes ${JSON.stringify(t.char)} at index ${r}`);const i=Oe(e);xr(t,i);let s;{let c=function(h){if(ee(h)){const p=h.getTextContentSize();if(r>=d&&r<=d+p){const m=h.getParent();return ct(m)&&(s=m),!0}d+=p}else if(ei(h))d+=1;else if(ct(h)){const p=h.getChildren();for(const m of p)if(c(m))return!0}else if(V(h)){const p=h.getChildren();for(const m of p)if(c(m))return!0;cn(h)&&(d+=1)}return!1};const f=De();let d=0;c(f)}let o=t.char;if(Array.isArray(o)&&s){const c=s.getMarker(),f=os(s,Qn),d=o[0];d&&d.style===c&&d.cid===f&&(o=o.slice(1),o.length===1&&(o=o[0]))}const a=typeof t.segment=="string"?t.segment:void 0,l=zl(o,i,a);if(!ct(l))return n==null||n.error(`CharNode style is missing for text "${e}". Attributes: ${JSON.stringify(t.char)}. Falling back to rich text insertion.`),Ic(r,e,void 0,n);const u={};for(const[c,f]of Object.entries(t))c!=="char"&&c!=="segment"&&typeof f=="string"&&(u[c]=f);return Object.keys(u).length>0&&l.setUnknownAttributes(u),J_(r,l,n)?e.length:(n==null||n.error(`Failed to insert CharNode with text "${e}" at index ${r}. Falling back to rich text.`),Ic(r,e,void 0,n))}function Ic(r,e,t,n){if(e.length<=0)return n==null||n.debug("Attempted to insert empty string. No action taken."),0;const i=De();let s=0,o=!1;function a(l){if(o)return!0;if(ee(l)){const u=l.getTextContentSize();if(r>=s&&r<=s+u){const c=r-s,f=Oe(e);if(xr(t,f),c===0)l.insertBefore(f);else if(c===u)l.insertAfter(f);else{const[,d]=l.splitText(c);d.insertBefore(f)}return n==null||n.debug(`Inserted text "${e}" in/around TextNode (key: ${l.getKey()}) at nodeOffset ${c}. Original targetIndex: ${r}, currentIndex at node start: ${s}.`),o=!0,!0}s+=u}else if(ei(l))s+=1;else if(ct(l)){if(!o&&r===s){const c=Oe(e);xr(t,c);const f=l.getFirstChild();return f?f.insertBefore(c):l.append(c),n==null||n.debug(`Inserted text "${e}" at beginning of CharNode ${l.getType()} (key: ${l.getKey()}).`),o=!0,!0}const u=l.getChildren();for(const c of u){if(a(c))return!0;if(o)break}if(!o&&r===s){const c=Oe(e);return xr(t,c),l.append(c),n==null||n.debug(`Appended text "${e}" to end of CharNode ${l.getType()} (key: ${l.getKey()}).`),o=!0,!0}}else if(cn(l)){if(!o&&r===s){const c=Oe(e);xr(t,c);const f=l.getFirstChild();return f?f.insertBefore(c):l.append(c),n==null||n.debug(`Inserted text "${e}" at beginning of container ${l.getType()} (key: ${l.getKey()}).`),o=!0,!0}const u=l.getChildren();for(const c of u){if(a(c))return!0;if(o)break}if(!o&&r===s){const c=Oe(e);return xr(t,c),l.append(c),n==null||n.debug(`Appended text "${e}" to end of container ${l.getType()} (key: ${l.getKey()}).`),o=!0,!0}s+=1}else if(V(l)){const u=l.getChildren();for(const c of u){if(a(c))return!0;if(o)break}}return o}if(a(i),!o&&r===s){n==null||n.debug(`Insertion point matches end of document (targetIndex: ${r}, final currentIndex: ${s}). Appending text to new ParaNode.`);const l=Oe(e);xr(t,l);const u=jr().append(l);i.append(u),o=!0}return o?e.length:(n==null||n.warn(`$insertRichText: Could not find insertion point for text "${e}" at targetIndex ${r}. Final currentIndex: ${s}. Text not inserted.`),0)}function J_(r,e,t){const n=De();let i=0,s=!1;function o(a){if(s)return!0;if(a===n&&r===0&&!n.getFirstChild())return e.isInline()?(t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${e.getType()} into empty root, wrapped in ImpliedParaNode. targetIndex: ${r}`),n.append(jr().append(e))):(t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting block node ${e.getType()} directly into empty root. targetIndex: ${r}`),n.append(e)),s=!0,!0;if(!V(a))return!1;const l=a.getChildren();for(const u of l){if(r===i&&!s){if(a===n&&e.isInline())if(Qi(u)){t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${e.getType()} into existing ${u.getType()} at beginning. targetIndex: ${r}`);const c=u.getFirstChild();c?c.insertBefore(e):u.append(e)}else t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${e.getType()} into root before ${u.getType()}, wrapping in ImpliedParaNode. targetIndex: ${r}`),u.insertBefore(jr().append(e));else u.insertBefore(e),t==null||t.debug(`$insertNodeAtCharacterOffset: Inserted node ${e.getType()} (key: ${e.getKey()}) before child ${u.getType()} (key: ${u.getKey()}) in ${a.getType()} (key: ${a.getKey()}). targetIndex: ${r}, currentIndex: ${i}`);return s=!0,!0}if(ee(u)){const c=u.getTextContentSize();if(!s&&r>i&&r<i+c){const f=r-i,[d]=u.splitText(f);return d.insertAfter(e),t==null||t.debug(`$insertNodeAtCharacterOffset: Inserted node ${e.getType()} (key: ${e.getKey()}) by splitting TextNode (key: ${u.getKey()}) at offset ${f}. targetIndex: ${r}, currentIndex at node start: ${i}`),s=!0,!0}i+=c}else if(ei(u))i+=1;else if(ct(u)){if(o(u))return!0}else if(cn(u)){const c=u;if(o(c))return!0;const f=i;if(an(c)&&cn(e)&&r===f&&!s)return t==null||t.debug(`$insertNodeAtCharacterOffset: Replacing ImpliedParaNode (key: ${c.getKey()}) with block node '${e.getType()}' (key: ${e.getKey()}) at OT index ${r}.`),u.replace(e,!0),i=f+1,s=!0,!0;i+=1}else if(V(u)&&o(u))return!0;if(s)return!0}return V(a)&&!s&&(r===i||a===n&&r>i)?a===n?(e.isInline()?(t==null||t.debug(`$insertNodeAtCharacterOffset: Appending inline node ${e.getType()} to root. Wrapping in new ImpliedParaNode. targetIndex: ${r}, current document OT length: ${i}.`),n.append(jr().append(e))):(t==null||t.debug(`$insertNodeAtCharacterOffset: Appending block node ${e.getType()} to root. targetIndex: ${r}, current document OT length: ${i}.`),n.append(e)),s=!0,!0):Qi(a)?an(a)&&Tt(e)&&r===i?(t==null||t.debug(`$insertNodeAtCharacterOffset: Replacing ImpliedParaNode container (key: ${a.getKey()}) with ParaNode ${e.getType()} (key: ${e.getKey()}) via append logic. targetIndex: ${r}`),a.replace(e,!0),s=!0,!0):e.isInline()||!Qi(e)?(t==null||t.debug(`$insertNodeAtCharacterOffset: Appending node ${e.getType()} to existing container ${a.getType()} (key: ${a.getKey()}). targetIndex: ${r}, container end OT index: ${i}.`),a.append(e),s=!0,!0):(t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting block node ${e.getType()} after container ${a.getType()} (key: ${a.getKey()}). targetIndex: ${r}, container end OT index: ${i}.`),a.insertAfter(e),s=!0,!0):(e.isInline()||!Qi(e)?(t==null||t.debug(`$insertNodeAtCharacterOffset: Appending node ${e.getType()} to generic element ${a.getType()} (key: ${a.getKey()}). targetIndex: ${r}, element end OT index: ${i}.`),a.append(e)):(t==null||t.debug(`$insertNodeAtCharacterOffset: Inserting block node ${e.getType()} after generic element ${a.getType()} (key: ${a.getKey()}). targetIndex: ${r}, element end OT index: ${i}.`),a.insertAfter(e)),s=!0,!0):s}return o(n),s||t==null||t.warn(`$insertNodeAtCharacterOffset: Could not find insertion point for node ${e.getType()} (key: ${e.getKey()}) at targetIndex ${r}. Final currentIndex: ${i}. Node not inserted.`),s}function Jk(r,e,t,n,i){const s=e.insert;let o;return ma("chapter",s)?o=Yk(s.chapter,t):ma("verse",s)?o=Xk(s.verse,t):ma("ms",s)?o=Qk(s.ms):ma("note",s)&&(o=Zk(e,t,n)),o?J_(r,o,i):(i==null||i.error(`$insertEmbedAtCurrentIndex: Cannot create LexicalNode for embed object: ${JSON.stringify(s)}`),!1)}function Gk(r,e,t){let n;Y_(e)?n=G_(e.para):tx(e)&&(n=ex(e.book)),n??(n=jr());const i=n,s=Tt(i),o=an(i);let a=0,l=!1;function u(c){if(l)return!0;if(ee(c)){const f=c.getTextContentSize();if(r>=a&&r<=a+f){const d=c.getParent();if(Tt(d)&&(s||o)){t==null||t.debug(`Splitting ParaNode (marker: ${d.getMarker()}) with LF attributes at targetIndex ${r}`);const h=r-a,[p]=h>0?c.splitText(h):[void 0];let m=p==null?void 0:p.getPreviousSibling();for(;m;){const _=m;m=m.getPreviousSibling();const C=i.getFirstChild();C?C.insertBefore(_):i.append(_)}return p&&i.append(p),d.insertBefore(i),l=!0,!0}}a+=f}else if(ei(c))a+=1;else if(cn(c)){const f=c.getChildren();for(const d of f){if(u(d))return!0;if(l)break}if(r===a){if(an(c)&&i)return t==null||t.debug(`Replacing ImpliedParaNode (key: ${c.getKey()}) with ParaNode at targetIndex ${r}`),c.replace(i,!0),l=!0,!0;if(Tt(c)&&i){const d=c;return t==null||t.debug(`Creating new block node with LF attributes after existing ParaNode (marker: ${d.getMarker()}) at targetIndex ${r}`),d.insertAfter(i),l=!0,!0}}if(a+=1,r===a&&Tt(c)&&i)return t==null||t.debug(`Creating new block node after existing ParaNode (marker: ${c.getMarker()}) at targetIndex ${r}`),c.insertAfter(i),l=!0,!0}else if(V(c)){const f=c.getChildren();for(const d of f){if(u(d))return!0;if(l)break}}return l}return u(De()),l||t==null||t.warn(`Could not find location to handle newline with para attributes at targetIndex ${r}. Final currentIndex: ${a}.`),1}function Yk(r,e){const{number:t,sid:n,altnumber:i,pubnumber:s}=r;if(!t)return;const o=vt(r,$k);let a;if(e.markerMode==="editable")a=p_(t,n,i,s,o);else{const l=e.markerMode==="visible";a=Gd(t,l,n,i,s,o)}return a}function Xk(r,e){const{style:t,number:n,sid:i,altnumber:s,pubnumber:o}=r;if(!n)return;const a=vt(r,Bk);let l;if(e.markerMode==="editable"){if(!t)return;const u=$o(t,n);l=T_(n,u,i,s,o,a)}else{const u=e.markerMode==="visible";l=lf(n,u,i,s,o,a)}return l}function Qk(r){const{style:e,sid:t,eid:n}=r;if(!e)return;const i=vt(r,qk);return w_(e,t,n,i)}function Zk(r,e,t){var n;const i=r.insert,{style:s,caller:o,category:a,contents:l}=i.note;if(!s||!o)return;const u=vt(i.note,jk),c=Xd(s,o,a,u),f=(n=r.attributes)==null?void 0:n.segment;f&&typeof f=="string"&&En(c,bs,()=>f);const d=[];for(const _ of(l==null?void 0:l.ops)??[])typeof _.insert=="string"&&(So(_.attributes)?d.push(zl(_.attributes.char,Oe(_.insert))):d.push(Oe(_.insert)));let h;if((e==null?void 0:e.markerMode)==="editable")h=Oe(nf(o));else{const _=sf(d);let C=()=>{};t!=null&&t.noteCallerOnClick&&(C=t.noteCallerOnClick),h=af(o,_,C)}let p,m;return((e==null?void 0:e.markerMode)==="visible"||(e==null?void 0:e.markerMode)==="editable")&&(p=Nc(s),m=Nc(s,!1)),p&&c.append(p),c.append(h,...d),m&&c.append(m),c}function ex(r){const{style:e,code:t}=r;if(!e||e!==ql||!t||!Mr.isValidBookCode(t))return;const n=vt(r,Fk);return d_(t,n)}function G_(r){const{style:e}=r;if(!e)return;const t=vt(r,Pk);return ko(e,t)}function zl(r,e,t){if(Array.isArray(r)){if(r.length===0)throw new Error("Empty charAttr array");return r.reduceRight((n,i,s)=>{const o=fl(i.style,vt(i,gl));return typeof i.cid=="string"&&En(o,Qn,()=>i.cid),t&&s===r.length-1&&En(o,bs,()=>t),n&&o.append(n),o},e)}else{const n=fl(r.style,vt(r,gl));return typeof r.cid=="string"&&En(n,Qn,()=>r.cid),t&&En(n,bs,()=>t),e&&n.append(e),n}}function ma(r,e){if(!(r in e))return!1;const t=e[r];return typeof t=="object"&&t!==null}function tx(r){return!!r&&!!r.book&&typeof r.book=="object"&&r.book!==null&&"style"in r.book&&typeof r.book.style=="string"&&"code"in r.book&&typeof r.book.code=="string"}function Y_(r){return!!r&&!!r.para&&typeof r.para=="object"&&r.para!==null&&"style"in r.para&&typeof r.para.style=="string"}function So(r){return!!r&&!!r.char&&typeof r.char=="object"&&r.char!==null&&(!Array.isArray(r.char)&&"style"in r.char&&typeof r.char.style=="string"||Array.isArray(r.char)&&r.char.length>0&&"style"in r.char[0]&&typeof r.char[0].style=="string")}function rx(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&Object.keys(r).length===0}function xr(r,e){if(r)for(const t of Object.keys(r)){if(t==="segment"&&typeof r[t]=="string"){const n=r[t];En(e,bs,()=>n);continue}if(nx(t)){const n=!!r[t],i=t,s=e.hasFormat(i);(n&&!s||!n&&s)&&e.toggleFormat(i)}}}const X_=["bold","underline","strikethrough","italic","highlight","code","subscript","superscript","lowercase","uppercase","capitalize"];function nx(r){return X_.includes(r)}function ix(){const[r]=Ee();return sx(r),null}function sx(r){T.useEffect(()=>{if(!r.hasNodes([On,Yt,Xt]))throw new Error("ArrowNavigationPlugin: ImmutableChapterNode, ImmutableVerseNode or NoteNode not registered on editor!");const e=t=>{if(t.key!=="ArrowLeft"&&t.key!=="ArrowRight")return!1;const n=re();if(!G(n)||!n.isCollapsed())return!1;const i=r.getRootElement();if(!i)return!1;const s=i.dir||"ltr";let o=!1;return ox(s,t.key)?o=lx(n):ax(s,t.key)&&(o=ux(n)),o&&t.preventDefault(),o};return r.registerCommand(Cs,e,Sl)},[r])}function ox(r,e){return r==="ltr"&&e==="ArrowRight"||r==="rtl"&&e==="ArrowLeft"}function ax(r,e){return r==="ltr"&&e==="ArrowLeft"||r==="rtl"&&e==="ArrowRight"}function lx(r){const e=vw(r);if(!Ls(e)&&!qo(e))return!1;const t=r.anchor.getNode();if(Tt(t)||an(t)){if(r.anchor.offset===t.getChildrenSize())return!1}else if(r.anchor.offset!==t.getTextContentSize())return!1;const n=e.getNextSibling();if(!Bt(n))return!1;const i=n.getNextSibling();return i?i.selectStart():n.selectEnd(),!0}function ux(r){const e=Cw(r);if(Ls(e)&&!e.getPreviousSibling())return!0;if(!Bt(e))return!1;const t=r.anchor.offset===0,n=e.getPreviousSibling();return!qo(n)||!t?!1:(n.selectStart(),!0)}function cx(){const[r]=Ee();return dx(r),null}function dx(r){T.useEffect(()=>{if(!r.hasNodes([Qe]))throw new Error("CharNodePlugin: CharNode not registered on editor!");return r.registerNodeTransform(Qe,fx)},[r])}function fx(r){if(!ct(r))return;if(r.isEmpty()){r.remove();return}const e=r.getMarker(),t=os(r,Qn),n=r.getUnknownAttributes(),i=r.getNextSibling();ct(i)&&Ac({style:e,cid:t},i)&&Pn(n,i.getUnknownAttributes())&&(r.append(...i.getChildren()),i.remove());const s=r.getPreviousSibling();ct(s)&&Ac({style:e,cid:t},s)&&Pn(n,s.getUnknownAttributes())&&(s.append(...r.getChildren()),r.remove())}function Q_(r){return r.replaceAll("	"," ")}const Z_=r=>{navigator.clipboard.read().then(async e=>{if((await navigator.permissions.query({name:"clipboard-read"})).state==="denied"){alert("Not allowed to paste from clipboard.");return}const t=new DataTransfer,n=e[0];for(const s of n.types){const o=await(await n.getType(s)).text();t.setData(s,Q_(o))}const i=new ClipboardEvent("paste",{clipboardData:t});r.dispatchCommand(Ii,i)})},eb=r=>{navigator.clipboard.read().then(async()=>{if((await navigator.permissions.query({name:"clipboard-read"})).state==="denied"){alert("Not allowed to paste from clipboard.");return}const e=new DataTransfer,t=await navigator.clipboard.readText();e.setData("text/plain",Q_(t));const n=new ClipboardEvent("paste",{clipboardData:e});r.dispatchCommand(Ii,n)})};function hx(){const[r]=Ee();return T.useEffect(()=>{const e=t=>{const{key:n,shiftKey:i,metaKey:s,ctrlKey:o,altKey:a}=t;!(pc?s:o)||a||(!i&&n.toLowerCase()==="c"?(t.preventDefault(),r.dispatchCommand(Ri,null)):!i&&n.toLowerCase()==="x"?(t.preventDefault(),r.dispatchCommand(Es,null)):n.toLowerCase()==="v"&&(t.preventDefault(),i?eb(r):Z_(r)))};return r.registerRootListener((t,n)=>{n!==null&&n.removeEventListener("keydown",e),t!==null&&t.addEventListener("keydown",e)})},[r]),null}function px({logger:r}){const[e]=Ee();return T.useEffect(()=>_t(e.registerCommand(Cs,t=>t.key!=="\\"&&t.key!=="/"?!1:(t.preventDefault(),!0),Na),e.registerCommand(Ii,t=>{var n;const i=(n=t.clipboardData)==null?void 0:n.getData("text/plain");return!i||!i.includes("\\")&&!i.includes("/")?!1:(r==null||r.info("CommandMenuPlugin: paste containing backslash or forward slash ignored."),t.preventDefault(),!0)},Na),e.registerCommand(kl,t=>{var n;const i=(n=t.dataTransfer)==null?void 0:n.getData("text/plain");return!i||!i.includes("\\")&&!i.includes("/")?!1:(r==null||r.info("CommandMenuPlugin: drag containing backslash or forward slash ignored."),t.preventDefault(),!0)},Na)),[e,r]),null}const Rc=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,gx=Rc?T.useLayoutEffect:T.useEffect;let mx=class{constructor(r){this.key=r,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(r){this.ref={current:r}}};const bp=r=>{const e=document.getElementById("typeahead-menu");if(!e)return;const t=e.getBoundingClientRect();t.top+t.height>window.innerHeight&&e.scrollIntoView({block:"center"}),t.top<0&&e.scrollIntoView({block:"center"}),r.scrollIntoView({block:"nearest"})};function vp(r,e){const t=r.getBoundingClientRect(),n=e.getBoundingClientRect();return t.top>n.top&&t.top<n.bottom}function yx(r,e,t,n){const[i]=Ee();T.useEffect(()=>{if(e!=null&&r!=null){const s=i.getRootElement(),o=s!=null?function(f,d){let h=getComputedStyle(f);const p=h.position==="absolute",m=/(auto|scroll)/;if(h.position==="fixed")return document.body;for(let _=f;_=_.parentElement;)if(h=getComputedStyle(_),(!p||h.position!=="static")&&m.test(h.overflow+h.overflowY+h.overflowX))return _;return document.body}(s):document.body;let a=!1,l=vp(e,o);const u=function(){a||(window.requestAnimationFrame(function(){t(),a=!1}),a=!0);const f=vp(e,o);f!==l&&(l=f,n!=null&&n(f))},c=new ResizeObserver(t);return window.addEventListener("resize",t),document.addEventListener("scroll",u,{capture:!0,passive:!0}),c.observe(e),()=>{c.unobserve(e),window.removeEventListener("resize",t),document.removeEventListener("scroll",u,!0)}}},[e,i,n,t,r])}const Cp=be("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function _x({close:r,editor:e,anchorElementRef:t,resolution:n,options:i,menuRenderFn:s,onSelectOption:o,shouldSplitNodeWithQuery:a=!1,commandPriority:l=Ts,preselectFirstItem:u=!0}){const[c,f]=T.useState(null),d=n.match&&n.match.matchingString;T.useEffect(()=>{u&&f(0)},[d,u]);const h=T.useCallback(m=>{e.update(()=>{const _=n.match!=null&&a?function(C){const v=re();if(!G(v)||!v.isCollapsed())return null;const k=v.anchor;if(k.type!=="text")return null;const M=k.getNode();if(!M.isSimpleText())return null;const P=k.offset,x=M.getTextContent().slice(0,P),O=C.replaceableString.length,N=P-function(W,w,q){let S=q;for(let K=S;K<=w.length;K++)W.slice(-K)===w.substring(0,K)&&(S=K);return S}(x,C.matchingString,O);if(N<0)return null;let I;return N===0?[I]=M.splitText(P):[,I]=M.splitText(N,P),I}(n.match):null;o(m,_,r,n.match?n.match.matchingString:"")})},[e,a,n.match,o,r]),p=T.useCallback(m=>{const _=e.getRootElement();_!==null&&(_.setAttribute("aria-activedescendant","typeahead-item-"+m),f(m))},[e]);return T.useEffect(()=>()=>{const m=e.getRootElement();m!==null&&m.removeAttribute("aria-activedescendant")},[e]),gx(()=>{i===null?f(null):c===null&&u&&p(0)},[i,c,p,u]),T.useEffect(()=>_t(e.registerCommand(Cp,({option:m})=>!(!m.ref||m.ref.current==null)&&(bp(m.ref.current),!0),l)),[e,p,l]),T.useEffect(()=>_t(e.registerCommand(sd,m=>{const _=m;if(i!==null&&i.length){const C=c===null?0:c!==i.length-1?c+1:0;p(C);const v=i[C];v.ref!=null&&v.ref.current&&e.dispatchCommand(Cp,{index:C,option:v}),_.preventDefault(),_.stopImmediatePropagation()}return!0},l),e.registerCommand(id,m=>{const _=m;if(i!==null&&i.length){const C=c===null?i.length-1:c!==0?c-1:i.length-1;p(C);const v=i[C];v.ref!=null&&v.ref.current&&bp(v.ref.current),_.preventDefault(),_.stopImmediatePropagation()}return!0},l),e.registerCommand(wl,m=>{const _=m;return _.preventDefault(),_.stopImmediatePropagation(),r(),!0},l),e.registerCommand(ld,m=>{const _=m;return i!==null&&c!==null&&i[c]!=null&&(_.preventDefault(),_.stopImmediatePropagation(),h(i[c]),!0)},l),e.registerCommand(us,m=>i!==null&&c!==null&&i[c]!=null&&(m!==null&&(m.preventDefault(),m.stopImmediatePropagation()),h(i[c]),!0),l)),[h,r,e,i,c,p,l]),s(t,T.useMemo(()=>({options:i,selectOptionAndCleanUp:h,selectedIndex:c,setHighlightedIndex:f}),[h,c,i]),n.match?n.match.matchingString:"")}function Ep(r,e){e!=null&&(r.className=e),r.setAttribute("aria-label","Typeahead menu"),r.setAttribute("role","listbox"),r.style.display="block",r.style.position="absolute"}function bx({options:r,onWillOpen:e,onClose:t,onOpen:n,onSelectOption:i,menuRenderFn:s,anchorClassName:o,commandPriority:a=Ts,parent:l}){const[u]=Ee(),[c,f]=T.useState(null),d=T.useRef(null),h=function(v,k,M,P=Rc?document.body:void 0,x=!0){const[O]=Ee(),N=Rc?document.createElement("div"):null,I=T.useRef(N),W=T.useCallback(()=>{if(I.current===null||P===void 0)return;I.current.style.top=I.current.style.bottom;const q=O.getRootElement(),S=I.current,K=S.firstChild;if(q!==null&&v!==null){const{left:A,top:L,width:j,height:H}=v.getRect(),J=I.current.offsetHeight;if(S.style.top=`${L+J+3+(x?window.pageYOffset:0)}px`,S.style.left=`${A+window.pageXOffset}px`,S.style.height=`${H}px`,S.style.width=`${j}px`,K!==null){K.style.top=`${L}`;const z=K.getBoundingClientRect(),Q=z.height,ie=z.width,te=q.getBoundingClientRect();A+ie>te.right&&(S.style.left=`${te.right-ie+window.pageXOffset}px`),(L+Q>window.innerHeight||L+Q>te.bottom)&&L-te.top>Q+H&&(S.style.top=`${L-Q-H+(x?window.pageYOffset:0)}px`)}S.isConnected||(Ep(S,M),P.append(S)),S.setAttribute("id","typeahead-menu"),q.setAttribute("aria-controls","typeahead-menu")}},[O,v,x,M,P]);T.useEffect(()=>{const q=O.getRootElement();return v!==null&&W(),()=>{q!==null&&q.removeAttribute("aria-controls");const S=I.current;S!==null&&S.isConnected&&(S.remove(),S.removeAttribute("id"))}},[O,W,v]);const w=T.useCallback(q=>{v!==null&&(q||k(null))},[v,k]);return yx(v,I.current,W,w),N!=null&&N===I.current&&(Ep(N,M),P!=null&&P.append(N)),I}(c,f,o,l),p=T.useCallback(()=>{f(null),t!=null&&c!==null&&t()},[t,c]),m=T.useCallback(v=>{f(v),n!=null&&c===null&&n(v)},[n,c]),_=T.useCallback(v=>{v.preventDefault(),e!=null&&e(v);const k=j2(v.target);m({getRect:()=>new DOMRect(v.clientX/k,v.clientY/k,1,1)})},[m,e]),C=T.useCallback(v=>{c!==null&&d.current!=null&&v.target!=null&&Pi(v.target)&&!d.current.contains(v.target)&&p()},[p,c]);return T.useEffect(()=>{const v=u.getRootElement();if(v)return v.addEventListener("contextmenu",_),()=>v.removeEventListener("contextmenu",_)},[u,_]),T.useEffect(()=>(document.addEventListener("click",C),()=>document.removeEventListener("click",C)),[u,C]),h.current===null||c===null||u===null?null:F.jsx(_x,{close:p,resolution:c,editor:u,anchorElementRef:h,options:r,menuRenderFn:(v,k)=>s(v,k,{setMenuRef:M=>{d.current=M}}),onSelectOption:i,commandPriority:a})}function vx({index:r,isSelected:e,onClick:t,onMouseEnter:n,option:i}){let s="item";return e&&(s+=" selected"),i.isDisabled&&(s+=" disabled"),F.jsx("li",{tabIndex:-1,className:s,ref:i.setRefElement,role:"option","aria-selected":e,"aria-disabled":i.isDisabled,id:"typeahead-item-"+r,onMouseEnter:n,onClick:i.isDisabled?void 0:t,children:F.jsx("span",{className:"text",children:i.title})},i.key)}function Cx({options:r,selectedItemIndex:e,onOptionClick:t,onOptionMouseEnter:n}){return F.jsx("div",{className:"typeahead-popover",children:F.jsx("ul",{children:r.map((i,s)=>F.jsx(vx,{index:s,isSelected:e===s,onClick:()=>t(i,s),onMouseEnter:()=>n(s),option:i},i.key))})})}class ya extends mx{constructor(e,t){super(e),fe(this,"title"),fe(this,"onSelect"),fe(this,"isDisabled"),this.title=e,this.onSelect=t.onSelect.bind(this),this.isDisabled=t.isDisabled||!1}}function Ex(r,e="editor-input"){return r?r.classList.contains(e):!1}function wx(){const[r]=Ee(),[e,t]=T.useState(()=>!r.isEditable()),n=T.useRef(void 0),i=T.useRef(void 0),s=T.useRef(void 0),o=T.useMemo(()=>[new ya("Cut",{onSelect:()=>{r.dispatchCommand(Es,null)},isDisabled:e}),new ya("Copy",{onSelect:()=>{r.dispatchCommand(Ri,null)}}),new ya("Paste",{onSelect:()=>{Z_(r)},isDisabled:e}),new ya("Paste as Plain Text",{onSelect:()=>{eb(r)},isDisabled:e})],[r,e]),a=T.useCallback((l,u,c)=>{r.update(()=>{l==null||l.onSelect(u),c()})},[r]);return T.useEffect(()=>{var l;i.current=((l=r.getRootElement())==null?void 0:l.className)??""},[r]),T.useEffect(()=>{const l=()=>{var u;(u=s.current)==null||u.call(s)};return window.addEventListener("scroll",l,!0),()=>{window.removeEventListener("scroll",l,!0)}},[]),T.useEffect(()=>r.registerEditableListener(l=>{t(!l)}),[r]),F.jsx(bx,{options:o,onSelectOption:a,onWillOpen:l=>{n.current=l.target},menuRenderFn:(l,{selectedIndex:u,options:c,selectOptionAndCleanUp:f,setHighlightedIndex:d},{setMenuRef:h})=>(s.current=()=>f(void 0),l.current&&!Ex(n.current,i.current)&&!v_(n.current)?Tr.createPortal(F.jsx("div",{className:"typeahead-popover auto-embed-menu",style:{marginLeft:l.current.style.width,userSelect:"none",width:200},ref:h,children:F.jsx(Cx,{options:o,selectedItemIndex:u,onOptionClick:(p,m)=>{p.isDisabled||(d(m),f(p))},onOptionMouseEnter:p=>{d(p)}})}),l.current):null)})}function kx({isEditable:r}){const[e]=Ee();return T.useLayoutEffect(()=>{e.setEditable(r)},[e,r]),null}function xx({scripture:r,nodeOptions:e,editorAdaptor:t,viewOptions:n,logger:i}){const[s]=Ee();return T.useEffect(()=>{var o;(o=t.initialize)==null||o.call(t,e,i)},[t,i,e]),T.useEffect(()=>{var o;(o=t.reset)==null||o.call(t);const a=t.serializeEditorState(r,n);if(a==null){i==null||i.warn("LoadStatePlugin: serializedEditorState was null or undefined. Skipping editor update.");return}try{const l=s.parseEditorState(a);s.update(()=>{s.setEditorState(l),s.dispatchCommand(sm,void 0)},{tag:Kd})}catch{i==null||i.error("LoadStatePlugin: error parsing or setting editor state.")}},[s,t,i,r,n]),null}function Sx({nodeOptions:r,viewOptions:e,logger:t}){const[n]=Ee();return Tx(r,t),Ax(n,e),null}function Tx(r,e){const t=T.useRef(void 0),n=r.noteCallers;T.useEffect(()=>{let i=n;(!i||i.length<=0)&&(i=Hw),t.current!==i&&(t.current=i,Rx("note-callers",i,e))},[e,n])}function Ax(r,e){T.useEffect(()=>{if(!r.hasNodes([Qe,Xt,un]))throw new Error("NoteNodePlugin: CharNode, NoteNode or ImmutableNoteCallerNode not registered on editor!");const t=n=>r.update(()=>Ix(n));return _t(r.registerNodeTransform(Xt,n=>Dx(n,e)),r.registerNodeTransform(Qe,Nx),r.registerNodeTransform(Jt,Mx),r.registerMutationListener(un,(n,{prevEditorState:i})=>Ox(n,i)),r.registerRootListener((n,i)=>{i!==null&&i.removeEventListener("dblclick",t),n!==null&&n.addEventListener("dblclick",t)}))},[r,e])}function Dx(r,e){!r.getChildren().some(t=>Bo(t))&&(e==null?void 0:e.markerMode)!=="editable"&&r.remove()}function Nx(r){const e=r.getParentOrThrow(),t=e.getChildren(),n=t.find(s=>Bo(s));if(!ct(r)||!Bt(e)||!n)return;const i=sf(t);n.getPreviewText()!==i&&n.setPreviewText(i)}function Mx(r){const e=_w(r),t=e==null?void 0:e.getChildren(),n=t==null?void 0:t.find(s=>Bo(s));if(!ee(r)||!Bt(e)||!n||!t)return;const i=sf(t);n.getPreviewText()!==i&&n.setPreviewText(i)}function Ox(r,e){for(const[t,n]of r){if(n!=="destroyed")continue;const i=e.read(()=>{const o=Ae(t),a=o==null?void 0:o.getParent();return Bo(o)&&Bt(a)&&a.getCaller()===pl}),s=document.querySelector(".editor-input");!i||!s||(s.classList.add("reset-counters"),s.offsetHeight,s.classList.remove("reset-counters"))}}function Ix(r){const e=re();if(!G(e))return;const t=e.anchor,n=e.focus,i=t.getNode(),s=n.getNode();if(Bt(i)&&ee(s)){r.preventDefault();const o=Mo();o.anchor.set(s.getKey(),0,"text"),o.focus.set(s.getKey(),n.offset,"text"),Mt(o)}}function Rx(r,e,t){for(const n of document.styleSheets)try{const i=n.cssRules||n.rules;for(const s of i)if(Lx(s,r)){const o=e.map(a=>`"${a}"`).join(" ");s.symbols=o;return}}catch{continue}t==null||t.warn(`Editor: counter style "${r}" not found.`)}function Lx(r,e){return typeof r=="object"&&r!==null&&"name"in r&&r.name===e&&"symbols"in r&&typeof r.symbols=="string"}function Px({onChange:r}){const[e]=Ee();return T.useEffect(()=>e.registerCommand(vs,()=>{const t=e.read(()=>K_());return r==null||r(t),!1},Ts),[e,r]),null}function Fx(){const[r]=Ee();return $x(r),null}function $x(r){T.useEffect(()=>{if(!r.hasNodes([ar]))throw new Error("ParaNodePlugin: ParaNode not registered on editor!");return r.registerNodeTransform(ar,e=>Bx(e,r))},[r])}function Bx(r,e){cf(e,r.getKey())&&U_(r.getFirstChild()),!(!Tt(r)||r.getMarker()!=="b"||r.isEmpty()||!e.getEditorState().read(()=>{const t=Ae(r.getKey());return Tt(t)&&((t==null?void 0:t.isEmpty())??!1)}))&&r.clear()}function qx({textDirection:r}){const[e]=Ee();return jx(e,r),Ux(e),null}function jx(r,e){T.useEffect(()=>{function t(){const n=r.getRootElement();if(!n||e==="auto")return;n.dir=e;const i=r._config.theme.placeholder,s=document.getElementsByClassName(i)[0];s&&(s.dir=e)}return t(),r.registerUpdateListener(({dirtyElements:n})=>{n.size>0&&t()})},[r,e])}function Ux(r){T.useEffect(()=>{const e=t=>{if(t.key!=="ArrowLeft"&&t.key!=="ArrowRight")return!1;const n=re();if(!G(n))return!1;const i=n.anchor.getNode(),s=Yn(i,f=>Tw(f,r)==="p");if(!s)return!1;const o=r.getElementByKey(s.getKey());if(!o)return!1;const a=o.parentElement,l=o.dir||"ltr",u=((a==null?void 0:a.dir)??"")||"ltr";if(!a||l===u)return!1;const c=a.dir==="rtl"&&t.key==="ArrowLeft"||a.dir==="ltr"&&t.key==="ArrowRight";return n.modify("move",c,"character"),t.preventDefault(),!0};return r.registerCommand(Cs,e,Sl)},[r])}function zx(){const[r]=Ee();return Hx(r),null}function Hx(r){T.useEffect(()=>{if(!r.hasNodes([Qe,Yt,Xt,Jt,Gt]))throw new Error("TextSpacingPlugin: CharNode, ImmutableVerseNode, NoteNode, TextNode or VerseNode not registered on editor!");return _t(r.registerNodeTransform(Jt,Wx),r.registerNodeTransform(Jt,e=>Kx(e,r)),r.registerNodeTransform(Gt,wp),r.registerNodeTransform(Yt,wp))},[r])}function Wx(r){if(!r.isAttached())return;const e=r.getTextContent(),t=r.getNextSibling(),n=r.getParent();r.getMode()!=="normal"||e.endsWith(" ")&&e.length>1||Bt(t)||ct(n)||Nt(n)||Fo(n)||(e===" "&&!Dr(t)?r.setTextContent(""):uf(r))}function Kx(r,e){const t=r.getParent();!Fo(t)||!r.isAttached()||cf(e,r.getKey())&&t.insertAfter(r)}function wp(r){if(!r.isAttached())return;const e=r.getPreviousSibling();e&&!Dr(e)&&!ee(e)&&!Fo(e)&&r.insertBefore(Oe(" "))}function Vx({trigger:r,scriptureReference:e,contextMarker:t,getMarkerAction:n}){const{markersMenuItems:i}=yk({scriptureReference:e,contextMarker:t,getMarkerAction:n});return F.jsx(mk,{trigger:r,items:i})}function Jx({trigger:r,scrRef:e,getMarkerAction:t}){const{book:n,chapterNum:i,verseNum:s,verse:o}=e,a=T.useMemo(()=>e,[n,i,s,o]),[l]=Ee(),[u]=Gx(l);return Yx(l),F.jsx(Vx,{trigger:r,scriptureReference:a,contextMarker:u,getMarkerAction:t})}function Gx(r){const[e,t]=T.useState();return T.useEffect(()=>r.registerCommand(vs,()=>(r.read(()=>{const n=re();if(!G(n)){e&&t(void 0);return}const i=Ae(n.anchor.key),s=Ae(n.focus.key);if(!i||!s){e&&t(void 0);return}const o=Ew(i,s);if(!o||!Qw(o)){e&&t(void 0);return}const a=o.getMarker();e!==a&&t(a)}),!1),Ts),[e,r]),[e]}function Yx(r){T.useEffect(()=>{if(!r.hasNodes([Gt,Yt]))throw new Error("UsjNodesMenuPlugin: VerseNode or ImmutableVerseNode not registered on editor!");const e={},t={};return _t(r.registerNodeTransform(Yt,n=>kp(n,r,e)),r.registerNodeTransform(Gt,n=>kp(n,r,e)),r.registerMutationListener(Yt,n=>Ap(n,r,e,t)),r.registerMutationListener(Gt,n=>Ap(n,r,e,t)))},[r])}function kp(r,e,t){zv(Kd)||cf(e,r.getKey())&&Zx(r,t)}function xp(r){return RegExp(/(\d+)([a-zA-Z]+)?(-(\d+)([a-zA-Z]+)?)?/).exec(r)}const Sp=2,Xx=3,Tp=4,Qx=5;function Zx(r,e){var t;const n=ef(r),i=n==null?void 0:n.getNumber();if(!i)return;const s=e[i];if(!s)return;let o=parseInt(r.getNumber()),a=((t=xp(r.getNumber()))==null?void 0:t[Sp])??"";s.forEach(l=>{const u=Ae(l);if(!u)return;const c=u.getNumber(),f=parseInt(c),d=xp(c),h=!!(d!=null&&d[Xx]),p=h?parseInt(d[Tp]):f;if(p<o||f>o||p===o&&a)return;const m=(d==null?void 0:d[Sp])??"",_=(d==null?void 0:d[Qx])??"",C=h?Dc(parseInt(d[Tp]),void 0):"";let v=`${m}`;v+=h?`-${C}${_}`:"";const k=Dc(f,void 0);u.setNumber(`${k}${v}`),o=parseInt(h?C:k),a=h?_:m})}function Ap(r,e,t,n){e.getEditorState().read(()=>{for(const[i,s]of r){const o=Ae(i);if(Dr(o)){if(s==="created"){const a=ef(o);if(!a)continue;const l=a.getNumber();t[l]||(t[l]=[]),t[l].push(i),n[i]=l}else if(s==="destroyed"){const a=n[i],l=t[a];if(!l)continue;const u=l.findIndex(c=>c===i);if(u===-1)continue;l.splice(u,1),Reflect.deleteProperty(n,i)}}}})}const tb="formatted",e1="unformatted";let ff;function t1(r){const e=r1(r);if(!e)throw new Error(`Invalid view mode: ${r}`);ff=e}t1(tb);const rb=()=>ff;function r1(r){let e;switch(r){case tb:e={markerMode:"hidden",hasSpacing:!0,isFormattedFont:!0};break;case e1:e={markerMode:"editable",hasSpacing:!1,isFormattedFont:!1};break}return e}function n1(r){if(r)return r.markerMode==="editable"?Gt:Yt}function i1(r){const e=[],t=r??ff;return t&&(e.push(`${GE}${t.markerMode}`),t.hasSpacing&&e.push(VE),t.isFormattedFont&&e.push(JE)),e}function s1({scrRef:r,onScrRefChange:e}){const[t]=Ee(),n=T.useRef(!1),i=T.useRef(!1),{book:s,chapterNum:o,verseNum:a}=r;return T.useEffect(()=>t.registerMutationListener(Mr,l=>{t.update(()=>{for(const[u,c]of l){const f=Ae(u);f&&xn(f)&&c==="created"&&Dp(o,a,i)}},{tag:xc})},{skipInitialization:!0}),[t,o,a]),T.useEffect(()=>{n.current?n.current=!1:t.update(()=>Dp(o,a,i),{tag:xc})},[t,o,a]),T.useEffect(()=>t.registerCommand(vs,()=>(i.current?i.current=!1:o1(s,o,a,e,n),!1),Ts),[t,s,o,a,e]),null}function Dp(r,e,t){var n;const i=N_(re()),s=(n=j_(i))==null?void 0:n.getNumber();if(Aw(s)&&of(e,s))return;const o=De().getChildren(),a=mw(o,r),l=kw(o,a),u=yw(l,!!a);if(u&&!a||!a)return;ww(l,u);const c=Xw(l,e);if(c){if(Tt(c)){const f=c.getFirstChild();ee(f)?f.select(0,0):c.select(0,0)}else c.selectNext(0,0);t.current=!0}}function o1(r,e,t,n,i){const s=N_(re());if(!s)return;const o=ef(s),a=parseInt((o==null?void 0:o.getNumber())??"1",10),l=j_(s),u=l==null?void 0:l.getNumber(),c=parseInt(u??"0",10),f=u?of(t,u):t===c;if(i.current=!!(o&&a!==e||!f),i.current){const d={book:r,chapterNum:a,verseNum:c};u!=null&&c.toString()!==u&&(d.verse=u),n(d)}}function a1(r,e){const t=e.body?e.body.childNodes:[];let n=[];const i=[];for(let s=0;s<t.length;s++){const o=t[s];if(!sb.has(o.nodeName)){const a=ob(o,r,i,!1);a!==null&&(n=n.concat(a))}}return function(s){for(const o of s)o.getNextSibling()instanceof yd&&o.insertAfter(ki());for(const o of s){const a=o.getChildren();for(const l of a)o.insertBefore(l);o.remove()}}(i),n}function nb(r,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const t=document.createElement("div"),n=De().getChildren();for(let i=0;i<n.length;i++)ib(r,n[i],t,e);return t.innerHTML}function ib(r,e,t,n=null){let i=n===null||e.isSelected(n);const s=V(e)&&e.excludeFromCopy("html");let o=e;if(n!==null){let h=Ad(e);h=ee(h)&&n!==null?ly(n,h):h,o=h}const a=V(o)?o.getChildren():[],l=vd(r,o.getType());let u;u=l&&l.exportDOM!==void 0?l.exportDOM(r,o):o.exportDOM(r);const{element:c,after:f}=u;if(!c)return!1;const d=document.createDocumentFragment();for(let h=0;h<a.length;h++){const p=a[h],m=ib(r,p,d,n);!i&&V(e)&&m&&e.extractWithChild(p,n,"html")&&(i=!0)}if(i&&!s){if((je(c)||lc(c))&&c.append(d),t.append(c),f){const h=f.call(o,c);h&&(lc(c)?c.replaceChildren(h):c.replaceWith(h))}}else t.append(d);return i}const sb=new Set(["STYLE","SCRIPT"]);function ob(r,e,t,n,i=new Map,s){let o=[];if(sb.has(r.nodeName))return o;let a=null;const l=function(p,m){const{nodeName:_}=p,C=m._htmlConversions.get(_.toLowerCase());let v=null;if(C!==void 0)for(const k of C){const M=k(p);M!==null&&(v===null||(v.priority||0)<=(M.priority||0))&&(v=M)}return v!==null?v.conversion:null}(r,e),u=l?l(r):null;let c=null;if(u!==null){c=u.after;const p=u.node;if(a=Array.isArray(p)?p[p.length-1]:p,a!==null){for(const[,m]of i)if(a=m(a,s),!a)break;a&&o.push(...Array.isArray(p)?p:[a])}u.forChild!=null&&i.set(r.nodeName,u.forChild)}const f=r.childNodes;let d=[];const h=(a==null||!dn(a))&&(a!=null&&rc(a)||n);for(let p=0;p<f.length;p++)d.push(...ob(f[p],e,t,h,new Map(i),a));return c!=null&&(d=c(d)),el(r)&&(d=l1(r,d,h?()=>{const p=new yd;return t.push(p),p}:Er)),a==null?d.length>0?o=o.concat(d):el(r)&&function(p){return p.nextSibling==null||p.previousSibling==null?!1:uc(p.nextSibling)&&uc(p.previousSibling)}(r)&&(o=o.concat(ki())):V(a)&&a.append(...d),o}function l1(r,e,t){const n=r.style.textAlign,i=[];let s=[];for(let o=0;o<e.length;o++){const a=e[o];if(rc(a))n&&!a.getFormat()&&a.setFormat(n),i.push(a);else if(s.push(a),o===e.length-1||o<e.length-1&&rc(e[o+1])){const l=t();l.setFormat(n),l.append(...s),i.push(l),s=[]}}return i}const u1=new Set(["http:","https:","mailto:","sms:","tel:"]);let ab=class lb extends qt{static getType(){return"link"}static clone(e){return new lb(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",t={},n){super(n);const{target:i=null,rel:s=null,title:o=null}=t;this.__url=e,this.__target=i,this.__rel=s,this.__title=o}createDOM(e){const t=document.createElement("a");return this.updateLinkDOM(null,t,e),Pt(t,e.theme.link),t}updateLinkDOM(e,t,n){if(Xm(t)){e&&e.__url===this.__url||(t.href=this.sanitizeUrl(this.__url));for(const i of["target","rel","title"]){const s=`__${i}`,o=this[s];e&&e[s]===o||(o?t[i]=o:t.removeAttribute(i))}}}updateDOM(e,t,n){return this.updateLinkDOM(e,t,n),!1}static importDOM(){return{a:e=>({conversion:c1,priority:1})}}static importJSON(e){return Lc().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=Np(e);try{const t=new URL(Np(e));if(!u1.has(t.protocol))return"about:blank"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){const t=this.getWritable();return t.__url=e,t}getTarget(){return this.getLatest().__target}setTarget(e){const t=this.getWritable();return t.__target=e,t}getRel(){return this.getLatest().__rel}setRel(e){const t=this.getWritable();return t.__rel=e,t}getTitle(){return this.getLatest().__title}setTitle(e){const t=this.getWritable();return t.__title=e,t}insertNewAfter(e,t=!0){const n=Lc(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!G(t))return!1;const i=t.anchor.getNode(),s=t.focus.getNode();return this.isParentOf(i)&&this.isParentOf(s)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function c1(r){let e=null;if(Xm(r)){const t=r.textContent;(t!==null&&t!==""||r.children.length>0)&&(e=Lc(r.getAttribute("href")||"",{rel:r.getAttribute("rel"),target:r.getAttribute("target"),title:r.getAttribute("title")}))}return{node:e}}function Lc(r="",e){return We(new ab(r,e))}function d1(r){return r instanceof ab}const f1=/^\+?[0-9\s()-]{5,}$/;function Np(r){return r.match(/^[a-z][a-z0-9+.-]*:/i)||r.match(/^[/#.]/)?r:r.includes("@")?`mailto:${r}`:f1.test(r)?`tel:${r}`:`https://${r}`}function ml(r,...e){const t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",r);for(const i of e)n.append("v",i);throw t.search=n.toString(),Error(`Minified Lexical error #${r}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ub(r,e=re()){return e==null&&ml(166),G(e)&&e.isCollapsed()||e.getNodes().length===0?"":nb(r,e)}function h1(r,e=re()){return e==null&&ml(166),G(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(p1(r,e))}function Mp(r,e){const t=r.getData("text/plain")||r.getData("text/uri-list");t!=null&&e.insertRawText(t)}function Op(r,e,t){const n=r.getData("application/x-lexical-editor");if(n)try{const a=JSON.parse(n);if(a.namespace===t._config.namespace&&Array.isArray(a.nodes))return Ip(t,g1(a.nodes),e)}catch{}const i=r.getData("text/html"),s=r.getData("text/plain");if(i&&s!==i)try{const a=new DOMParser().parseFromString(function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(l):l}(i),"text/html");return Ip(t,a1(t,a),e)}catch{}const o=s||r.getData("text/uri-list");if(o!=null)if(G(e)){const a=o.split(/(\r?\n|\t)/);a[a.length-1]===""&&a.pop();for(let l=0;l<a.length;l++){const u=re();if(G(u)){const c=a[l];c===`
`||c===`\r
`?u.insertParagraph():c==="	"?u.insertNodes([Do()]):u.insertText(c)}}}else e.insertRawText(o)}function Ip(r,e,t){r.dispatchCommand(lv,{nodes:e,selection:t})||(t.insertNodes(e),function(n){if(G(n)&&n.isCollapsed()){const i=n.anchor;let s=null;const o=Tn(i,"previous");if(o)if(Hn(o))s=o.origin;else{const a=Gn(o,zr(De(),"next").getFlipped());for(const l of a){if(ee(l.origin)){s=l.origin;break}if(V(l.origin)&&!l.origin.isInline())break}}if(s&&ee(s)){const a=s.getFormat(),l=s.getStyle();n.format===a&&n.style===l||(n.format=a,n.style=l,n.dirty=!0)}}}(t))}function cb(r,e,t,n=[]){let i=e===null||t.isSelected(e);const s=V(t)&&t.excludeFromCopy("html");let o=t;if(e!==null){let u=Ad(t);u=ee(u)&&e!==null?ly(e,u):u,o=u}const a=V(o)?o.getChildren():[],l=function(u){const c=u.exportJSON(),f=u.constructor;if(c.type!==f.getType()&&ml(58,f.name),V(u)){const d=c.children;Array.isArray(d)||ml(59,f.name)}return c}(o);if(ee(o)){const u=o.__text;u.length>0?l.text=u:i=!1}for(let u=0;u<a.length;u++){const c=a[u],f=cb(r,e,c,l.children);!i&&V(t)&&f&&t.extractWithChild(c,e,"clone")&&(i=!0)}if(i&&!s)n.push(l);else if(Array.isArray(l.children))for(let u=0;u<l.children.length;u++){const c=l.children[u];n.push(c)}return i}function p1(r,e){const t=[],n=De().getChildren();for(let i=0;i<n.length;i++)cb(r,e,n[i],t);return{namespace:r._config.namespace,nodes:t}}function g1(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t],i=Nm(n);ee(i)&&T2(i),e.push(i)}return e}let Vi=null;async function Rp(r,e,t){if(Vi!==null)return!1;if(e!==null)return new Promise((u,c)=>{r.update(()=>{u(Lp(r,e,t))})});const n=r.getRootElement(),i=r._window||window,s=window.document,o=Ur(i);if(n===null||o===null)return!1;const a=s.createElement("span");a.style.cssText="position: fixed; top: -1000px;",a.append(s.createTextNode("#")),n.append(a);const l=new Range;return l.setStart(a,0),l.setEnd(a,1),o.removeAllRanges(),o.addRange(l),new Promise((u,c)=>{const f=r.registerCommand(Ri,d=>(wn(d,ClipboardEvent)&&(f(),Vi!==null&&(window.clearTimeout(Vi),Vi=null),u(Lp(r,d,t))),!0),oo);Vi=window.setTimeout(()=>{f(),Vi=null,u(!1)},50),s.execCommand("copy"),a.remove()})}function Lp(r,e,t){if(t===void 0){const i=Ur(r._window);if(!i)return!1;const s=i.anchorNode,o=i.focusNode;if(s!==null&&o!==null&&!Oo(r,s,o))return!1;const a=re();if(a===null)return!1;t=y1(a)}e.preventDefault();const n=e.clipboardData;return n!==null&&(_1(n,t),!0)}const m1=[["text/html",ub],["application/x-lexical-editor",h1]];function y1(r=re()){const e={"text/plain":r?r.getTextContent():""};if(r){const t=Ml();for(const[n,i]of m1){const s=i(t,r);s!==null&&(e[n]=s)}}return e}function _1(r,e){for(const t in e){const n=e[t];n!==void 0&&r.setData(t,n)}}const hf=/^(\d+(?:\.\d+)?)px$/,ns={BOTH:3,NO_STATUS:0,ROW:1};class jo extends qt{static getType(){return"tablecell"}static clone(e){return new jo(e.__headerState,e.__colSpan,e.__width,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__rowSpan=e.__rowSpan,this.__backgroundColor=e.__backgroundColor,this.__verticalAlign=e.__verticalAlign}static importDOM(){return{td:e=>({conversion:Pp,priority:0}),th:e=>({conversion:Pp,priority:0})}}static importJSON(e){return db().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHeaderStyles(e.headerState).setColSpan(e.colSpan||1).setRowSpan(e.rowSpan||1).setWidth(e.width||void 0).setBackgroundColor(e.backgroundColor||null).setVerticalAlign(e.verticalAlign||void 0)}constructor(e=ns.NO_STATUS,t=1,n,i){super(i),this.__colSpan=t,this.__rowSpan=1,this.__headerState=e,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(e){const t=document.createElement(this.getTag());return this.__width&&(t.style.width=`${this.__width}px`),this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(t.style.backgroundColor=this.__backgroundColor),Pc(this.__verticalAlign)&&(t.style.verticalAlign=this.__verticalAlign),Pt(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){const t=super.exportDOM(e);if(je(t.element)){const n=t.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return t}exportJSON(){return{...super.exportJSON(),...Pc(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(e){const t=this.getWritable();return t.__colSpan=e,t}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(e){const t=this.getWritable();return t.__rowSpan=e,t}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e,t=ns.BOTH){const n=this.getWritable();return n.__headerState=e&t|n.__headerState&~t,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){const t=this.getWritable();return t.__width=e,t}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){const t=this.getWritable();return t.__backgroundColor=e,t}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(e){const t=this.getWritable();return t.__verticalAlign=e||void 0,t}toggleHeaderStyle(e){const t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==ns.NO_STATUS}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor||e.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function Pc(r){return r==="middle"||r==="bottom"}function Pp(r){const e=r,t=r.nodeName.toLowerCase();let n;hf.test(e.style.width)&&(n=parseFloat(e.style.width));const i=db(t==="th"?ns.ROW:ns.NO_STATUS,e.colSpan,n);i.__rowSpan=e.rowSpan;const s=e.style.backgroundColor;s!==""&&(i.__backgroundColor=s);const o=e.style.verticalAlign;Pc(o)&&(i.__verticalAlign=o);const a=e.style,l=(a&&a.textDecoration||"").split(" "),u=a.fontWeight==="700"||a.fontWeight==="bold",c=l.includes("line-through"),f=a.fontStyle==="italic",d=l.includes("underline");return{after:h=>{const p=[];let m=null;const _=()=>{if(m){const C=m.getFirstChild();gi(C)&&m.getChildrenSize()===1&&C.remove()}};for(const C of h)Wv(C)||ee(C)||gi(C)?(ee(C)&&(u&&C.toggleFormat("bold"),c&&C.toggleFormat("strikethrough"),f&&C.toggleFormat("italic"),d&&C.toggleFormat("underline")),m?m.append(C):(m=Er().append(C),p.push(m))):(p.push(C),_(),m=null);return _(),p.length===0&&p.push(Er()),p},node:i}}function db(r=ns.NO_STATUS,e=1,t){return We(new jo(r,e,t))}function Cr(r){return r instanceof jo}function lt(r,...e){const t=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",r);for(const i of e)n.append("v",i);throw t.search=n.toString(),Error(`Minified Lexical error #${r}; visit ${t.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class Hl extends qt{static getType(){return"tablerow"}static clone(e){return new Hl(e.__height,e.__key)}static importDOM(){return{tr:e=>({conversion:b1,priority:0})}}static importJSON(e){return fb().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHeight(e.height)}constructor(e,t){super(t),this.__height=e}exportJSON(){const e=this.getHeight();return{...super.exportJSON(),...e===void 0?void 0:{height:e}}}createDOM(e){const t=document.createElement("tr");return this.__height&&(t.style.height=`${this.__height}px`),Pt(t,e.theme.tableRow),t}extractWithChild(e,t,n){return n==="html"}isShadowRoot(){return!0}setHeight(e){const t=this.getWritable();return t.__height=e,t}getHeight(){return this.getLatest().__height}updateDOM(e){return e.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function b1(r){const e=r;let t;return hf.test(e.style.height)&&(t=parseFloat(e.style.height)),{after:n=>hy(n,Cr),node:fb(t)}}function fb(r){return We(new Hl(r))}function Uo(r){return r instanceof Hl}const hb=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,v1=hb&&"documentMode"in document?document.documentMode:null;hb&&"InputEvent"in window&&!v1&&new window.InputEvent("input");function C1(r,e,t){const[n,i,s]=pb(r,e,t);return i===null&&lt(207),s===null&&lt(208),[n,i,s]}function pb(r,e,t){const n=[];let i=null,s=null;function o(l){let u=n[l];return u===void 0&&(n[l]=u=[]),u}const a=r.getChildren();for(let l=0;l<a.length;l++){const u=a[l];Uo(u)||lt(209);const c=o(l);for(let f=u.getFirstChild(),d=0;f!=null;f=f.getNextSibling()){for(Cr(f)||lt(147);c[d]!==void 0;)d++;const h={cell:f,startColumn:d,startRow:l},{__rowSpan:p,__colSpan:m}=f;for(let _=0;_<p&&!(l+_>=a.length);_++){const C=o(l+_);for(let v=0;v<m;v++)C[d+v]=h}e!==null&&i===null&&e.is(f)&&(i=h),t!==null&&s===null&&t.is(f)&&(s=h)}}return[n,i,s]}function E1(r){let e;if(r instanceof jo)e=r;else if("__type"in r){const i=Yn(r,Cr);Cr(i)||lt(148),e=i}else{const i=Yn(r.getNode(),Cr);Cr(i)||lt(148),e=i}const t=e.getParent();Uo(t)||lt(149);const n=t.getParent();return _b(n)||lt(210),[e,t,n]}function w1(r,e,t){let n,i=Math.min(e.startColumn,t.startColumn),s=Math.min(e.startRow,t.startRow),o=Math.max(e.startColumn+e.cell.__colSpan-1,t.startColumn+t.cell.__colSpan-1),a=Math.max(e.startRow+e.cell.__rowSpan-1,t.startRow+t.cell.__rowSpan-1);do{n=!1;for(let l=0;l<r.length;l++)for(let u=0;u<r[0].length;u++){const c=r[l][u];if(!c)continue;const f=c.startColumn+c.cell.__colSpan-1,d=c.startRow+c.cell.__rowSpan-1,h=c.startColumn<=o&&f>=i,p=c.startRow<=a&&d>=s;if(h&&p){const m=Math.min(i,c.startColumn),_=Math.max(o,f),C=Math.min(s,c.startRow),v=Math.max(a,d);m===i&&_===o&&C===s&&v===a||(i=m,o=_,s=C,a=v,n=!0)}}}while(n);return{maxColumn:o,maxRow:a,minColumn:i,minRow:s}}function Fp(r){const[e,,t]=E1(r),n=t.getChildren(),i=n.length,s=n[0].getChildren().length,o=new Array(i);for(let a=0;a<i;a++)o[a]=new Array(s);for(let a=0;a<i;a++){const l=n[a].getChildren();let u=0;for(let c=0;c<l.length;c++){for(;o[a][u];)u++;const f=l[c],d=f.__rowSpan||1,h=f.__colSpan||1;for(let p=0;p<d;p++)for(let m=0;m<h;m++)o[a+p][u+m]=f;if(e===f)return{colSpan:h,columnIndex:u,rowIndex:a,rowSpan:d};u+=h}}return null}function $p(r){const[[e,t,n,i],[s,o,a,l]]=["anchor","focus"].map(u=>{const c=r[u].getNode(),f=Yn(c,Cr);Cr(f)||lt(238,u,c.getKey(),c.getType());const d=f.getParent();Uo(d)||lt(239,u);const h=d.getParent();return _b(h)||lt(240,u),[c,f,d,h]});return i.is(l)||lt(241),{anchorCell:t,anchorNode:e,anchorRow:n,anchorTable:i,focusCell:o,focusNode:s,focusRow:a,focusTable:l}}let k1=class gb{constructor(e,t,n){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e}getStartEndPoints(){return[this.anchor,this.focus]}isValid(){return this.tableKey!=="root"&&this.anchor.key!=="root"&&this.anchor.type==="element"&&this.focus.key!=="root"&&this.focus.type==="element"}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return mb(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)}set(e,t,n){this.dirty=this.dirty||e!==this.tableKey||t!==this.anchor.key||n!==this.focus.key,this.tableKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null}clone(){return new gb(this.tableKey,or(this.anchor.key,this.anchor.offset,this.anchor.type),or(this.focus.key,this.focus.offset,this.focus.type))}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(e){}insertText(){}hasFormat(e){let t=0;this.getNodes().filter(Cr).forEach(i=>{const s=i.getFirstChild();_d(s)&&(t|=s.getTextFormat())});const n=Kn[e];return!!(t&n)}insertNodes(e){const t=this.focus.getNode();V(t)||lt(151),co(t.select(0,t.getChildrenSize())).insertNodes(e)}getShape(){const{anchorCell:e,focusCell:t}=$p(this),n=Fp(e);n===null&&lt(153);const i=Fp(t);i===null&&lt(155);const s=Math.min(n.columnIndex,i.columnIndex),o=Math.max(n.columnIndex+n.colSpan-1,i.columnIndex+i.colSpan-1),a=Math.min(n.rowIndex,i.rowIndex),l=Math.max(n.rowIndex+n.rowSpan-1,i.rowIndex+i.rowSpan-1);return{fromX:Math.min(s,o),fromY:Math.min(a,l),toX:Math.max(s,o),toY:Math.max(a,l)}}getNodes(){if(!this.isValid())return[];const e=this._cachedNodes;if(e!==null)return e;const{anchorTable:t,anchorCell:n,focusCell:i}=$p(this),s=i.getParents()[1];if(s!==t){if(t.isParentOf(i)){const _=s.getParent();_==null&&lt(159),this.set(this.tableKey,i.getKey(),_.getKey())}else{const _=t.getParent();_==null&&lt(158),this.set(this.tableKey,_.getKey(),i.getKey())}return this.getNodes()}const[o,a,l]=C1(t,n,i),{minColumn:u,maxColumn:c,minRow:f,maxRow:d}=w1(o,a,l),h=new Map([[t.getKey(),t]]);let p=null;for(let _=f;_<=d;_++)for(let C=u;C<=c;C++){const{cell:v}=o[_][C],k=v.getParent();Uo(k)||lt(160),k!==p&&(h.set(k.getKey(),k),p=k),h.has(v.getKey())||x1(v,M=>{h.set(M.getKey(),M)})}const m=Array.from(h.values());return xs()||(this._cachedNodes=m),m}getTextContent(){const e=this.getNodes().filter(n=>Cr(n));let t="";for(let n=0;n<e.length;n++){const i=e[n],s=i.__parent,o=(e[n+1]||{}).__parent;t+=i.getTextContent()+(o!==s?`
`:"	")}return t}};function mb(r){return r instanceof k1}function x1(r,e){const t=[[r]];for(let n=t.at(-1);n!==void 0&&t.length>0;n=t.at(-1)){const i=n.pop();i===void 0?t.pop():e(i)!==!1&&V(i)&&t.push(i.getChildren())}}function Gs(r){return je(r)&&r.nodeName==="TABLE"}function S1(r,e){for(let t=e,n=null;t!==null;t=t.getParent()){if(r.is(t))return n;Cr(t)&&(n=t)}return null}function T1(r,e,t){return S1(r,Jn(e,t))}function Bp(r,e,t){if(!e.theme.tableAlignment)return;const n=[],i=[];for(const s of["center","right"]){const o=e.theme.tableAlignment[s];o&&(s===t?i:n).push(o)}bi(r,...n),Pt(r,...i)}const A1=new WeakSet;function qp(r=Ml()){return A1.has(r)}class Wl extends qt{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(e){const t=this.getWritable();return t.__colWidths=e,t}static clone(e){return new Wl(e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__colWidths=e.__colWidths,this.__rowStriping=e.__rowStriping,this.__frozenColumnCount=e.__frozenColumnCount,this.__frozenRowCount=e.__frozenRowCount}static importDOM(){return{table:e=>({conversion:D1,priority:1})}}static importJSON(e){return yb().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setRowStriping(e.rowStriping||!1).setFrozenColumns(e.frozenColumnCount||0).setFrozenRows(e.frozenRowCount||0).setColWidths(e.colWidths)}constructor(e){super(e),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(e,t,n){return n==="html"}getDOMSlot(e){const t=Gs(e)?e:e.querySelector("table");return Gs(t)||lt(229),super.getDOMSlot(e).withElement(t).withAfter(t.querySelector("colgroup"))}createDOM(e,t){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const i=document.createElement("colgroup");if(n.appendChild(i),Xv(i),Pt(n,e.theme.table),this.updateTableElement(null,n,e),qp(t)){const s=document.createElement("div"),o=e.theme.tableScrollableWrapper;return o?Pt(s,o):s.style.cssText="overflow-x: auto;",s.appendChild(n),this.updateTableWrapper(null,s,n,e),s}return n}updateTableWrapper(e,t,n,i){this.__frozenColumnCount!==(e?e.__frozenColumnCount:0)&&function(s,o,a,l){l>0?(Pt(s,a.theme.tableFrozenColumn),o.setAttribute("data-lexical-frozen-column","true")):(bi(s,a.theme.tableFrozenColumn),o.removeAttribute("data-lexical-frozen-column"))}(t,n,i,this.__frozenColumnCount),this.__frozenRowCount!==(e?e.__frozenRowCount:0)&&function(s,o,a,l){l>0?(Pt(s,a.theme.tableFrozenRow),o.setAttribute("data-lexical-frozen-row","true")):(bi(s,a.theme.tableFrozenRow),o.removeAttribute("data-lexical-frozen-row"))}(t,n,i,this.__frozenRowCount)}updateTableElement(e,t,n){this.__style!==(e?e.__style:"")&&(t.style.cssText=this.__style),this.__rowStriping!==(!!e&&e.__rowStriping)&&function(i,s,o){o?(Pt(i,s.theme.tableRowStriping),i.setAttribute("data-lexical-row-striping","true")):(bi(i,s.theme.tableRowStriping),i.removeAttribute("data-lexical-row-striping"))}(t,n,this.__rowStriping),function(i,s,o,a){const l=i.querySelector("colgroup");if(!l)return;const u=[];for(let c=0;c<o;c++){const f=document.createElement("col"),d=a&&a[c];d&&(f.style.width=`${d}px`),u.push(f)}l.replaceChildren(...u)}(t,0,this.getColumnCount(),this.getColWidths()),Bp(t,n,this.getFormatType())}updateDOM(e,t,n){const i=this.getDOMSlot(t).element;return t===i===qp()||(je(s=t)&&s.nodeName==="DIV"&&this.updateTableWrapper(e,t,i,n),this.updateTableElement(e,i,n),!1);var s}exportDOM(e){const t=super.exportDOM(e),{element:n}=t;return{after:i=>{if(t.after&&(i=t.after(i)),!Gs(i)&&je(i)&&(i=i.querySelector("table")),!Gs(i))return null;Bp(i,e._config,this.getFormatType());const[s]=pb(this,null,null),o=new Map;for(const c of s)for(const f of c){const d=f.cell.getKey();o.has(d)||o.set(d,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const a=new Set;for(const c of i.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=c.getAttribute("data-temporary-table-cell-lexical-key");if(f){const d=o.get(f);if(c.removeAttribute("data-temporary-table-cell-lexical-key"),d){o.delete(f);for(let h=0;h<d.colSpan;h++)a.add(h+d.startColumn)}}}const l=i.querySelector(":scope > colgroup");if(l){const c=Array.from(i.querySelectorAll(":scope > colgroup > col")).filter((f,d)=>a.has(d));l.replaceChildren(...c)}const u=i.querySelectorAll(":scope > tr");if(u.length>0){const c=document.createElement("tbody");for(const f of u)c.appendChild(f);i.append(c)}return i},element:!Gs(n)&&je(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(e,t){const{rows:n,domRows:i}=t;for(let s=0;s<n;s++){const o=i[s];if(o!=null)for(let a=0;a<o.length;a++){const l=o[a];if(l==null)continue;const{elem:u}=l,c=T1(this,u);if(c!==null&&e.is(c))return{x:a,y:s}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(e,t,n){const{domRows:i}=n,s=i[t];return s==null?null:s[e<s.length?e:s.length-1]??null}getDOMCellFromCordsOrThrow(e,t,n){const i=this.getDOMCellFromCords(e,t,n);if(!i)throw new Error("Cell not found at cords.");return i}getCellNodeFromCords(e,t,n){const i=this.getDOMCellFromCords(e,t,n);if(i==null)return null;const s=Jn(i.elem);return Cr(s)?s:null}getCellNodeFromCordsOrThrow(e,t,n){const i=this.getCellNodeFromCords(e,t,n);if(!i)throw new Error("Node at cords not TableCellNode.");return i}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(e){const t=this.getWritable();return t.__rowStriping=e,t}setFrozenColumns(e){const t=this.getWritable();return t.__frozenColumnCount=e,t}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(e){const t=this.getWritable();return t.__frozenRowCount=e,t}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const e=this.getFirstChild();if(!e)return 0;let t=0;return e.getChildren().forEach(n=>{Cr(n)&&(t+=n.getColSpan())}),t}}function D1(r){const e=yb();r.hasAttribute("data-lexical-row-striping")&&e.setRowStriping(!0),r.hasAttribute("data-lexical-frozen-column")&&e.setFrozenColumns(1),r.hasAttribute("data-lexical-frozen-row")&&e.setFrozenRows(1);const t=r.querySelector(":scope > colgroup");if(t){let n=[];for(const i of t.querySelectorAll(":scope > col")){let s=i.style.width||"";if(!hf.test(s)&&(s=i.getAttribute("width")||"",!/^\d+$/.test(s))){n=void 0;break}n.push(parseFloat(s))}n&&e.setColWidths(n)}return{after:n=>hy(n,Uo),node:e}}function yb(){return We(new Wl)}function _b(r){return r instanceof Wl}const bb=Object.freeze({"	":"\\t","\n":"\\n"}),jp=new RegExp(Object.keys(bb).join("|"),"g"),tn=Object.freeze({ancestorHasNextSibling:"|",ancestorIsLastChild:" ",hasNextSibling:"├",isLastChild:"└",selectedChar:"^",selectedLine:">"}),N1=[r=>r.hasFormat("bold")&&"Bold",r=>r.hasFormat("code")&&"Code",r=>r.hasFormat("italic")&&"Italic",r=>r.hasFormat("strikethrough")&&"Strikethrough",r=>r.hasFormat("subscript")&&"Subscript",r=>r.hasFormat("superscript")&&"Superscript",r=>r.hasFormat("underline")&&"Underline",r=>r.hasFormat("highlight")&&"Highlight"],M1=[r=>r.hasTextFormat("bold")&&"Bold",r=>r.hasTextFormat("code")&&"Code",r=>r.hasTextFormat("italic")&&"Italic",r=>r.hasTextFormat("strikethrough")&&"Strikethrough",r=>r.hasTextFormat("subscript")&&"Subscript",r=>r.hasTextFormat("superscript")&&"Superscript",r=>r.hasTextFormat("underline")&&"Underline",r=>r.hasTextFormat("highlight")&&"Highlight"],O1=[r=>r.isDirectionless()&&"Directionless",r=>r.isUnmergeable()&&"Unmergeable"],I1=[r=>r.isToken()&&"Token",r=>r.isSegmented()&&"Segmented"];function R1(r,e,t,n,i=!1){const s=r.getEditorState(),o=r._config,a=r._compositionKey,l=r._editable;if(t){let d="";return s.read(()=>{d=function(h){const p=document.createElement("div");return p.innerHTML=h.trim(),Cb(p,0).innerHTML}(nb(r))}),d}let u=` root
`;const c=s.read(()=>{const d=re();return vb(De(),(h,p)=>{const m=`(${h.getKey()})`,_=h.getType()||"",C=h.isSelected();u+=`${C?tn.selectedLine:" "} ${p.join(" ")} ${m} ${_} ${function(v,k,M=!1){const P=k?k(v,M):void 0;if(P!==void 0&&P.length>0)return P;if(ee(v)){const x=v.getTextContent(),O=x.length===0?"(empty)":`"${Up(x,M)}"`,N=function(I){return[zp(I),L1(I),P1(I),Hp(I)].filter(Boolean).join(", ")}(v);return[O,N.length!==0?`{ ${N} }`:null].filter(Boolean).join(" ").trim()}if(d1(v)){const x=v.getURL(),O=x.length===0?"(empty)":`"${Up(x,M)}"`,N=function(I){return[F1(I),$1(I),B1(I),Hp(I)].filter(Boolean).join(", ")}(v);return[O,N.length!==0?`{ ${N} }`:null].filter(Boolean).join(" ").trim()}if(qw(v))return`ids: [ ${v.getIDs().join(", ")} ]`;if(_d(v)){const x=function(N){let I=M1.map(W=>W(N)).filter(Boolean).join(", ").toLocaleLowerCase();return I!==""&&(I="format: "+I),I}(v);let O=x!==""?`{ ${x} }`:"";return O+=v.__style?`(${v.__style})`:"",O}return""}(h,n,i)}
`,u+=function({indent:v,isSelected:k,node:M,nodeKeyDisplay:P,selection:x,typeDisplay:O}){if(!ee(M)||!G(x)||!k||V(M))return"";const N=x.anchor,I=x.focus;if(M.getTextContent()===""||N.getNode()===x.focus.getNode()&&N.offset===I.offset)return"";const[W,w]=function(H,J){const z=J.getStartEndPoints();if(Wt(J)||z===null)return[-1,-1];const[Q,ie]=z,te=H.getTextContent(),Z=te.length;let Y=-1,oe=-1;if(Q.type==="text"&&ie.type==="text"){const pe=Q.getNode(),ge=ie.getNode();pe===ge&&H===pe&&Q.offset!==ie.offset?[Y,oe]=Q.offset<ie.offset?[Q.offset,ie.offset]:[ie.offset,Q.offset]:[Y,oe]=H===pe?pe.isBefore(ge)?[Q.offset,Z]:[0,Q.offset]:H===ge?ge.isBefore(pe)?[ie.offset,Z]:[0,ie.offset]:[0,Z]}const ue=(te.slice(0,Y).match(jp)||[]).length,de=(te.slice(Y,oe).match(jp)||[]).length;return[Y+ue,oe+ue+de]}(M,x);if(W===w)return"";const q=v[v.length-1]===tn.hasNextSibling?tn.ancestorHasNextSibling:tn.ancestorIsLastChild,S=[...v.slice(0,v.length-1),q],K=Array(W+1).fill(" "),A=Array(w-W).fill(tn.selectedChar),L=O.length+2,j=Array(P.length+L).fill(" ");return[tn.selectedLine,S.join(" "),[...j,...K,...A].join("")].join(" ")+`
`}({indent:p,isSelected:C,node:h,nodeKeyDisplay:m,selection:d,typeDisplay:_})}),d===null?": null":G(d)?function(h){let p="";const m=zp(h);p+=`: range ${m!==""?`{ ${m} }`:""} ${h.style!==""?`{ style: ${h.style} } `:""}`;const _=h.anchor,C=h.focus,v=_.offset,k=C.offset;return p+=`
  ├ anchor { key: ${_.key}, offset: ${v===null?"null":v}, type: ${_.type} }`,p+=`
  └ focus { key: ${C.key}, offset: ${k===null?"null":k}, type: ${C.type} }`,p}(d):mb(d)?function(h){return`: table
  └ { table: ${h.tableKey}, anchorCell: ${h.anchor.key}, focusCell: ${h.focus.key} }`}(d):function(h){return Wt(h)?`: node
  └ [${Array.from(h._nodes).join(", ")}]`:""}(d)});if(u+=`
 selection`+c,u+=`

 commands:`,e.length)for(const{index:d,type:h,payload:p}of e)u+=`
  └ ${d}. { type: ${h}, payload: ${p instanceof Event?p.constructor.name:p} }`;else u+=`
  └ None dispatched.`;const{version:f}=r.constructor;return u+=`

 editor${f?` (v${f})`:""}:`,u+=`
  └ namespace ${o.namespace}`,a!==null&&(u+=`
  └ compositionKey ${a}`),u+=`
  └ editable ${String(l)}`,u}function vb(r,e,t=[]){const n=r.getChildren(),i=n.length;n.forEach((s,o)=>{e(s,t.concat(o===i-1?tn.isLastChild:tn.hasNextSibling)),V(s)&&vb(s,e,t.concat(o===i-1?tn.ancestorIsLastChild:tn.ancestorHasNextSibling))})}function Up(r,e=!1){const t=Object.entries(bb).reduce((n,[i,s])=>n.replace(new RegExp(i,"g"),String(s)),r);return e?t.replace(/[^\s]/g,"*"):t}function L1(r){let e=O1.map(t=>t(r)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="detail: "+e),e}function P1(r){let e=I1.map(t=>t(r)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="mode: "+e),e}function zp(r){let e=N1.map(t=>t(r)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="format: "+e),e}function F1(r){let e=r.getTarget();return e!=null&&(e="target: "+e),e}function $1(r){let e=r.getRel();return e!=null&&(e="rel: "+e),e}function B1(r){let e=r.getTitle();return e!=null&&(e="title: "+e),e}function Hp(r){if(!r.__state)return!1;const e=[];for(const[n,i]of r.__state.knownState.entries()){if(n.isEqual(i,n.defaultValue))continue;const s=JSON.stringify(n.unparse(i));e.push(`[${n.key}: ${s}]`)}let t=e.join(",");return t!==""&&(t="state: "+t),t}function Cb(r,e){const t=new Array(1+e++).join("  "),n=new Array(e-1).join("  ");let i;for(let s=0;s<r.children.length;s++)i=document.createTextNode(`
`+t),r.insertBefore(i,r.children[s]),Cb(r.children[s],e),r.lastElementChild===r.children[s]&&(i=document.createTextNode(`
`+n),r.appendChild(i));return r}const q1=T.forwardRef(function({treeTypeButtonClassName:r,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:n,viewClassName:i,timeTravelPanelClassName:s,editorState:o,setEditorState:a,setEditorReadOnly:l,generateContent:u,commandsLog:c=[]},f){const[d,h]=T.useState([]),[p,m]=T.useState(""),[_,C]=T.useState(!1),[v,k]=T.useState(!1),M=T.useRef(0),P=T.useRef(null),[x,O]=T.useState(!1),[N,I]=T.useState(!1),[W,w]=T.useState(!1),q=T.useRef(),S=T.useRef([]),K=T.useRef(0),A=T.useCallback(j=>{const H=++K.current;u(j).then(J=>{H===K.current&&m(J)}).catch(J=>{H===K.current&&m(`Error rendering tree: ${J.message}

Stack:
${J.stack}`)})},[u]);T.useEffect(()=>{if(!(!W&&o._nodeMap.size>1e3&&(I(!0),!W))&&(q.current!==o||S.current!==c)){const j=q.current!==o;q.current=o,S.current=c,A(v),!_&&j&&h(H=>[...H,[Date.now(),o]])}},[o,A,v,W,_,c]);const L=d.length;return T.useEffect(()=>{if(x){let j;const H=()=>{const J=M.current;if(J===L-1)return void O(!1);const z=d[J][0],Q=d[J+1][0];j=setTimeout(()=>{M.current++;const ie=M.current,te=P.current;te!==null&&(te.value=String(ie)),a(d[ie][1]),H()},Q-z)};return H(),()=>{clearTimeout(j)}}},[d,x,L,a]),F.jsxs("div",{className:i,children:[!W&&N?F.jsxs("div",{style:{padding:20},children:[F.jsx("span",{style:{marginRight:20},children:"Detected large EditorState, this can impact debugging performance."}),F.jsx("button",{onClick:()=>{w(!0)},style:{background:"transparent",border:"1px solid white",color:"white",cursor:"pointer",padding:5},children:"Show full tree"})]}):null,W?null:F.jsx("button",{onClick:()=>(A(!v),void k(!v)),className:r,type:"button",children:v?"Tree":"Export DOM"}),!_&&(W||!N)&&L>2&&F.jsx("button",{onClick:()=>{l(!0),M.current=L-1,C(!0)},className:e,type:"button",children:"Time Travel"}),(W||!N)&&F.jsx("pre",{ref:f,children:p}),_&&(W||!N)&&F.jsxs("div",{className:s,children:[F.jsx("button",{className:n,onClick:()=>{M.current===L-1&&(M.current=1),O(!x)},type:"button",children:x?"Pause":"Play"}),F.jsx("input",{className:t,ref:P,onChange:j=>{const H=Number(j.target.value),J=d[H];J&&(M.current=H,a(J[1]))},type:"range",min:"1",max:L-1}),F.jsx("button",{className:n,onClick:()=>{l(!1);const j=d.length-1,H=d[j];a(H[1]);const J=P.current;J!==null&&(J.value=String(j)),C(!1),O(!1)},type:"button",children:"Exit"})]})]})});function j1(r,e){const t=new Set;let n=0;for(const[i]of r._commands)t.add(r.registerCommand(i,s=>(e(o=>{n+=1;const a=[...o];return a.push({index:n,payload:s,type:i.type?i.type:"UNKNOWN"}),a.length>10&&a.shift(),a}),!1),oo));return()=>t.forEach(i=>i())}function U1(r){const[e,t]=T.useState([]);return T.useEffect(()=>j1(r,t),[r]),T.useMemo(()=>e,[e])}function z1({treeTypeButtonClassName:r,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:n,timeTravelPanelClassName:i,viewClassName:s,editor:o,customPrintNode:a}){const l=T.createRef(),[u,c]=T.useState(o.getEditorState()),f=U1(o);return T.useEffect(()=>_t(o.registerUpdateListener(({editorState:d})=>{c(d)}),o.registerEditableListener(()=>{c(o.getEditorState())})),[o]),T.useEffect(()=>{const d=l.current;if(d!==null)return d.__lexicalEditor=o,()=>{d.__lexicalEditor=null}},[o,l]),F.jsx(q1,{treeTypeButtonClassName:r,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:t,timeTravelPanelButtonClassName:n,viewClassName:s,timeTravelPanelClassName:i,setEditorReadOnly:d=>{const h=o.getRootElement();h!=null&&(h.contentEditable=d?"false":"true")},editorState:u,setEditorState:d=>o.setEditorState(d),generateContent:async function(d){return R1(o,f,d,a)},ref:l,commandsLog:f})}function H1(r){return xn(r)?`${r.__code}`:Jd(r)?`${r.__marker} "${r.__number}"`:ct(r)?`${r.__marker}`:Ls(r)?`${r.__marker} "${r.__number}"`:Bo(r)?`${r.__caller}`:qo(r)?`${r.__marker} "${r.__number}"`:Bt(r)?`${r.__marker}`:Tt(r)?`${r.__marker}`:Nt(r)?`ids: [ ${JSON.stringify(r.getTypedIDs())} ]`:Zd(r)?`${r.__marker} "${r.__number}"`:""}function W1(){const[r]=Ee();return F.jsx(z1,{viewClassName:"tree-view-output",treeTypeButtonClassName:"debug-treetype-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",customPrintNode:H1,editor:r})}const Wp={type:Ti,version:Ai,content:[]};let Fc;function K1(r){r&&(Fc=r)}function V1(r){if(r.isEmpty())return Wp;const e=r.toJSON();if(!e.root||!e.root.children)return;const t=e.root.children;if(t.length===1&&Yd(t[0])&&(!t[0].children||t[0].children.length===0))return Wp;const n=Eb(t),i=Ln(n);return i?{type:Ti,version:Ai,content:i}:void 0}function J1(r,e){const{type:t,marker:n,code:i,unknownAttributes:s}=r;return dt({type:t,marker:n,code:i,...s,content:e})}function G1(r){const{marker:e,number:t,sid:n,altnumber:i,pubnumber:s,unknownAttributes:o}=r;return dt({type:Wr.getType(),marker:e,number:t,sid:n,altnumber:i,pubnumber:s,...o})}function Y1(r,e){const{marker:t,sid:n,altnumber:i,pubnumber:s,unknownAttributes:o}=r,a=e&&typeof e[0]=="string"?e[0]:void 0;let{number:l}=r;return l=A_(t,a,l),dt({type:Wr.getType(),marker:t,number:l,sid:n,altnumber:i,pubnumber:s,...o})}function X1(r){const{marker:e,sid:t,altnumber:n,pubnumber:i,unknownAttributes:s}=r,{text:o}=r;let{number:a}=r;return a=A_(e,o,a),dt({type:Gt.getType(),marker:e,number:a,sid:t,altnumber:n,pubnumber:i,...s})}function Q1(r,e){const{type:t,marker:n,unknownAttributes:i}=r;return e==null||e.forEach((s,o)=>{typeof s=="string"&&s.startsWith($i)&&(e[o]=s.slice(1))}),dt({type:t,marker:n,...i,content:e})}function Z1(r,e){const{type:t,marker:n,unknownAttributes:i}=r;return dt({type:t,marker:n,...i,content:e})}function eS(r,e){const{type:t,marker:n,caller:i,category:s,unknownAttributes:o}=r;return dt({type:t,marker:n,caller:i,category:s,...o,content:e})}function Yi(r){const{type:e,marker:t,sid:n,eid:i,unknownAttributes:s}=r;return dt({type:e,marker:t,sid:n,eid:i,...s})}function tS(r){return r.text}function rS(r,e){const{tag:t,marker:n,unknownAttributes:i}=r;return dt({type:t,marker:n,...i,content:e})}function nS(r){const{marker:e}=r;return{type:hl,marker:e}}function Kp(r,e){const t=r[r.length-1];t&&typeof t=="string"?r[r.length-1]=t+e:r.push(e)}function iS(r,e,t,n,i){const s=ln.getType(),o=e.filter(a=>!t.includes(a));if(t.filter(a=>!e.includes(a)).forEach(a=>{const l=Yi({type:s,marker:rs,eid:a});i.push(l)}),o.forEach(a=>{const l=Yi({type:s,marker:Mi,sid:a});i.push(l)}),e.length===0){const a=Yi({type:s,marker:Mi});i.push(a)}if(i.push(...r),e.length===0){const a=Yi({type:s,marker:rs});i.push(a)}(!n||!Ow(n))&&e.forEach(a=>{const l=Yi({type:s,marker:rs,eid:a});i.push(l)})}function Ln(r,e){const t=[];let n,i=[];return r.forEach((s,o)=>{const a=s,l=s,u=s,c=s,f=s,d=s,h=s,p=s;switch(s.type){case Mr.getType():t.push(J1(a,Ln(a.children)));break;case On.getType():t.push(G1(s));break;case Wr.getType():t.push(Y1(l,Ln(l.children)));break;case Yt.getType():case Gt.getType():t.push(X1(s));break;case Qe.getType():t.push(Q1(u,Ln(u.children)));break;case ar.getType():t.push(Z1(c,Ln(c.children)));break;case Xt.getType():t.push(eS(f,Ln(f.children,f.caller)));break;case un.getType():case Ao.getType():case Ps.getType():break;case At.getType():if(n=Ln(h.children),n){const m=h.typedIDs[Un];if(m)iS(n,m,i,r[o+1],t),i=m;else{const _=n.shift();_&&(typeof _=="string"?Kp(t,_):t.push(_)),n.length>0&&t.push(...n)}}break;case ln.getType():t.push(Yi(s));break;case Jt.getType():d.text&&d.text!==$i&&(!e||d.text!==nf(e))&&Kp(t,tS(d));break;case Fi.getType():t.push(rS(p,Ln(p.children)));break;case si.getType():t.push(nS(s));break;default:Fc==null||Fc.error(`Unexpected node type '${s.type}'!`)}}),t&&t.length>0?t:void 0}function Eb(r){const e=r.findIndex(t=>Yd(t));if(e>=0){const t=r.slice(0,e),n=r[e].children,i=Eb(r.slice(e+1));r=[...t,...n,...i]}return r}const Bu={initialize:K1,deserializeEditorState:V1},Vp=wb([]),sS={type:Ao.getType(),version:1};let yl=[],Te,$a,$c,He;function oS(r,e){yl=[],uS(r),cS(e)}function aS(r=0){}function lS(r,e){Te=e??rb();let t;return r?(r.type!==Ti&&(He==null||He.warn(`This USJ type '${r.type}' didn't match the expected type '${Ti}'.`)),r.version!==Ai&&(He==null||He.warn(`This USJ version '${r.version}' didn't match the expected version '${Ai}'.`)),r.content.length>0?t=qc(ro(r.content)):t=[Vp]):t=[Vp],$c==null||$c(yl),{root:{children:t,direction:null,format:"",indent:0,type:"root",version:1}}}function uS(r){r&&($a=r),r!=null&&r.addMissingComments&&($c=r.addMissingComments)}function cS(r){r&&(He=r)}function dS(r){return!r||r.length!==1||typeof r[0]!="string"?"":r[0]}function fS(r){const{marker:e,code:t}=r;e!==ql&&(He==null||He.warn(`Unexpected book marker '${e}'!`)),(!t||!Mr.isValidBookCode(t))&&(He==null||He.warn(`Unexpected book code '${t}'!`));const n=vt(r);return dt({type:Mr.getType(),marker:e,code:t??"",unknownAttributes:n,children:[zo(dS(r.content))],direction:null,format:"",indent:0,version:c_})}function hS(r){const{marker:e,number:t,sid:n,altnumber:i,pubnumber:s}=r;e!==Vd&&(He==null||He.warn(`Unexpected chapter marker '${e}'!`));const o=vt(r);let a;return(Te==null?void 0:Te.markerMode)==="visible"&&(a=!0),(Te==null?void 0:Te.markerMode)==="editable"?dt({type:Wr.getType(),marker:e,number:t??"",sid:n,altnumber:i,pubnumber:s,unknownAttributes:o,children:[zo($o(e,t)??"")],direction:null,format:"",indent:0,version:h_}):dt({type:On.getType(),marker:e,number:t??"",showMarker:a,sid:n,altnumber:i,pubnumber:s,unknownAttributes:o,version:__})}function pS(r){const{marker:e,number:t,sid:n,altnumber:i,pubnumber:s}=r;e!==Qd&&(He==null||He.warn(`Unexpected verse marker '${e}'!`));const o=(n1(Te)??Yt).getType(),a=(Te==null?void 0:Te.markerMode)==="editable"?S_:q_;let l,u;(Te==null?void 0:Te.markerMode)==="editable"?l=$o(e,t):(Te==null?void 0:Te.markerMode)==="visible"&&(u=!0);const c=vt(r);return dt({type:o,text:l,marker:e,number:t??"",sid:n,altnumber:i,pubnumber:s,showMarker:u,unknownAttributes:c,version:a})}function gS(r,e=[]){const{marker:t}=r;Qe.isValidMarker(t)||He==null||He.warn(`Unexpected char marker '${t}'!`),((Te==null?void 0:Te.markerMode)==="visible"||(Te==null?void 0:Te.markerMode)==="editable")&&e.forEach(i=>{tf(i)&&(i.text=$i+i.text)});const n=vt(r);return dt({type:Qe.getType(),marker:t,unknownAttributes:n,children:[...e],direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:y_})}function wb(r){return{type:Zn.getType(),children:r,direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:C_}}function mS(r,e=[]){const{marker:t}=r;ar.isValidMarker(t)||He==null||He.warn(`Unexpected para marker '${t}'!`);const n=[];(Te==null?void 0:Te.markerMode)==="editable"&&n.push(To(t),zo($i)),n.push(...e);const i=vt(r);return dt({type:ar.getType(),marker:t,unknownAttributes:i,children:n,direction:null,format:"",indent:0,textFormat:0,textStyle:"",version:x_})}function yS(r,e){const t=Sw(e);let n=()=>{};return $a!=null&&$a.noteCallerOnClick&&(n=$a.noteCallerOnClick),dt({type:un.getType(),caller:r,previewText:t,onClick:n,version:$_})}function _S(r,e){const{marker:t,category:n}=r;Xt.isValidMarker(t)||He==null||He.warn(`Unexpected note marker '${t}'!`);const i=r.caller??"*";let s;(Te==null?void 0:Te.markerMode)==="editable"?s=zo(nf(i)):s=yS(i,e);const o=vt(r);let a,l;((Te==null?void 0:Te.markerMode)==="visible"||(Te==null?void 0:Te.markerMode)==="editable")&&(a=To(t),l=To(t,!1));const u=[];return a&&u.push(a),u.push(s,...e),l&&u.push(l),dt({type:Xt.getType(),marker:t,caller:i,category:n,unknownAttributes:o,children:u,direction:null,format:"",indent:0,version:k_})}function bS(r){const{marker:e,sid:t,eid:n}=r;(!e||!ln.isValidMarker(e))&&(He==null||He.warn(`Unexpected milestone marker '${e}'!`));const i=vt(r);return dt({type:ln.getType(),marker:e,sid:t,eid:n,unknownAttributes:i,version:E_})}function Jp(r,e=[]){return{type:At.getType(),typedIDs:{[Un]:e},children:r,direction:null,format:"",indent:0,version:1}}function vS(r,e){const{marker:t}=r,n=r.type,i=vt(r),s=[...e];return s.forEach(o=>{tf(o)&&(o.mode="token")}),dt({type:Fi.getType(),tag:n,marker:t,unknownAttributes:i,children:s,direction:null,format:"",indent:0,version:l_})}function CS(r){return{type:si.getType(),marker:r,version:I_}}function To(r,e=!0){return{type:Ps.getType(),marker:r,isOpening:e,text:"",detail:0,format:0,mode:"normal",style:"",version:1}}function zo(r,e="normal"){return{type:Jt.getType(),text:r,detail:0,format:0,mode:e,style:"",version:1}}function ES(r,e){((Te==null?void 0:Te.markerMode)==="visible"||(Te==null?void 0:Te.markerMode)==="editable")&&e.push(To(r))}function wS(r,e){((Te==null?void 0:Te.markerMode)==="visible"||(Te==null?void 0:Te.markerMode)==="editable")&&!(Qe.isValidFootnoteMarker(r)||Qe.isValidCrossReferenceMarker(r))&&e.push(To(r,!1))}function Gp(r,e){return r.length<=0||e===0?r:r.map(t=>t-e)}function kS(r,e){const t=r.indexOf(e,0);t>-1&&r.splice(t,1)}function Yp(r,e){e.marker===Mi&&e.sid!==void 0&&r.push(e.sid),e.marker===rs&&e.eid!==void 0&&kS(r,e.eid)}function Bc(r,e,t=!1,n=[]){if(e.length<=0||e[0]>=r.length)return r;const i=e.shift(),s=e.length>0?e.shift():r.length-1;if(i===void 0||s===void 0||s>=r.length||r.length<=0)return r;const o=r.slice(0,i),a=t?[Jp(o,[...n])]:o,l=r[i];Yp(n,l);const u=Bc(r.slice(i+1,s),Gp(e,i+1),l.marker===Mi,n),c=Jp(u,[...n]),f=r[s];Yp(n,f);const d=Bc(r.slice(s+1),Gp(e,s+1),f.marker===Mi,n);return[...a,c,...d]}function ro(r){const e=[],t=[];return r==null||r.forEach(n=>{if(typeof n=="string")t.push(zo(n));else if(!n.type)He==null||He.error("Marker type is missing!");else switch(n.type){case Mr.getType():t.push(fS(n));break;case Wr.getType():t.push(hS(n));break;case Gt.getType():Te!=null&&Te.hasSpacing||t.push(sS),t.push(pS(n));break;case Qe.getType():ES(n.marker,t),t.push(gS(n,ro(n.content))),wS(n.marker,t);break;case ar.getType():t.push(mS(n,ro(n.content)));break;case Xt.getType():t.push(_S(n,ro(n.content)));break;case ln.getType():aw(n.marker)&&(e.push(t.length),n.sid!==void 0&&(yl==null||yl.push(n.sid))),t.push(bS(n));break;case si.getType():t.push(CS(n.marker));break;default:He==null||He.warn(`Unknown type-marker '${n.type}-${n.marker}'!`),t.push(vS(n,ro(n.content)))}}),Bc(t,e)}function qc(r){const e=r.findIndex(t=>KE(t)||gw(t)||hw(t));if(e>=0){const t=qc(r.slice(0,e)),n=r[e],i=qc(r.slice(e+1));return[...t,n,...i]}else if(r.some(t=>"text"in t&&"mode"in t||Jw(t)))return[wb(r)];return r}const kb={initialize:oS,reset:aS,serializeEditorState:lS},xS={c:{action:r=>{const{chapterNum:e}=r.reference;return[{type:"chapter",marker:"c",number:`${e+1}`}]}},v:{action:r=>{const{verseNum:e,verse:t}=r.reference;return[{type:"verse",marker:"v",number:`${Dc(e,t)}`}]}},f:{action:r=>{const{chapterNum:e,verseNum:t}=r.reference;return[{type:"note",marker:"f",caller:pl,content:[{type:"char",marker:"fr",content:[`${e}:${t}`]},{type:"char",marker:"ft",content:["-"]}]}]}},x:{action:r=>{const{chapterNum:e,verseNum:t}=r.reference;return[{type:"note",marker:"x",caller:pl,content:[{type:"char",marker:"xo",content:[`${e}:${t}`]},{type:"char",marker:"xt",content:["-"]}]}]}}};function SS(r,e,t,n){const i=TS(r);return{action:s=>{s.editor.update(()=>{var o;const a=(o=i==null?void 0:i.action)==null?void 0:o.call(i,s);if(!a)return;const l=jw(a,kb,t),u=sp(l),c=re();if(G(c))if(c.getTextContent().length>0)AS(c,()=>sp(l));else if(V(u)&&!u.isInline()){const f=c.insertParagraph();if(f){const d=f.getChildren();u.append(...d),f.replace(u),u.selectStart()}}else{c.insertNodes([u]),IS(u);const f=u.getNextSibling();f?f.selectStart():u.selectStart()}else c==null||c.insertNodes([u])},n)},label:i==null?void 0:i.label}}function TS(r){let e=xS[r];return e||(ar.isValidMarker(r)?e={action:()=>[{type:ar.getType(),marker:r,content:[]}]}:Qe.isValidMarker(r)&&(e={action:()=>[{type:Qe.getType(),marker:r,content:["-"]}]})),e}function AS(r,e){const t=r.getNodes(),[n,i]=DS(r);let s;t.forEach((o,a)=>{if(V(s)&&s.isParentOf(o))return;const l=NS(o,a===0,a===t.length-1,n,i);if(!l){s=void 0;return}s||(s=e(),l.insertBefore(s)),OS(l,s)}),(ee(s)||V(s))&&s.selectEnd()}function DS(r){const e=r.anchor.offset,t=r.focus.offset;return r.isBackward()?[t,e]:[e,t]}function NS(r,e,t,n,i){if(!(Nt(r)||Bt(r)||Bt(r.getParent()))){if(ee(r))return MS(r,e,t,n,i);if(V(r)&&r.isInline())return r}}function MS(r,e,t,n,i){const s=r.getTextContentSize(),o=e?n:0,a=t?i:s;if(o===0&&a===0)return;const l=r.splitText(o,a);return l.length===1?l[0]:l.length===3||a===s?l[1]:l[0]}function OS(r,e){var t;if(ee(e)){const n=Xp(r,e);e.setTextContent(n),r.remove()}else if(V(e)){const n=e.getChildrenSize();e.append(r);for(let i=0;i<n;i++)(t=e.getFirstChild())==null||t.remove();Xp(r,e)}}function Xp(r,e){let t=r.getTextContent();if(ee(r)&&e.isInline()&&t.startsWith(" ")){t=t.trimStart(),r.setTextContent(t);const n=e.getPreviousSibling();uf(n),ee(n)||e.insertBefore(Oe(" "))}return t}function IS(r){Dr(r)&&(uf(r.getPreviousSibling()),U_(r.getNextSibling()))}const xb={chapter:"chapter",verse:"verse",char:"char",para:"para",typedMark:"editor-typed-mark",typedMarkOverlap:"editor-typed-markOverlap",mark:"editor-mark",markOverlap:"editor-markOverlap",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough"}},Sb=T.createContext(null),Qp=4;function RS({children:r,className:e,onClick:t,title:n}){const i=T.useRef(null),s=T.useContext(Sb);if(s===null)throw new Error("DropDownItem must be used within a DropDown");const{registerItem:o}=s;return T.useEffect(()=>{i&&i.current&&o(i)},[i,o]),F.jsx("button",{className:e,onClick:t,ref:i,title:n,type:"button",children:r})}function LS({children:r,dropDownRef:e,onClose:t}){const[n,i]=T.useState(),[s,o]=T.useState(),a=T.useCallback(c=>{i(f=>f?[...f,c]:[c])},[i]),l=c=>{if(!n)return;const f=c.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(f)&&c.preventDefault(),f==="Escape"||f==="Tab"?t():f==="ArrowUp"?o(d=>{if(!d)return n[0];const h=n.indexOf(d)-1;return n[h===-1?n.length-1:h]}):f==="ArrowDown"&&o(d=>d?n[n.indexOf(d)+1]:n[0])},u=T.useMemo(()=>({registerItem:a}),[a]);return T.useEffect(()=>{n&&!s&&o(n[0]),s&&s.current&&s.current.focus()},[n,s]),F.jsx(Sb.Provider,{value:u,children:F.jsx("div",{className:"dropdown",ref:e,onKeyDown:l,children:r})})}function PS({disabled:r=!1,buttonLabel:e,buttonAriaLabel:t,buttonClassName:n,buttonIconClassName:i,children:s,stopCloseOnClickSelf:o}){const a=T.useRef(null),l=T.useRef(null),[u,c]=T.useState(!1),f=()=>{c(!1),l&&l.current&&l.current.focus()};return T.useEffect(()=>{const d=l.current,h=a.current;if(u&&d!==null&&h!==null){const{top:p,left:m}=d.getBoundingClientRect();h.style.top=`${p+d.offsetHeight+Qp}px`,h.style.left=`${Math.min(m,window.innerWidth-h.offsetWidth-20)}px`}},[a,l,u]),T.useEffect(()=>{const d=l.current;if(d!==null&&u){const h=p=>{const m=p.target;o&&a.current&&a.current.contains(m)||d.contains(m)||c(!1)};return document.addEventListener("click",h),()=>{document.removeEventListener("click",h)}}return()=>{}},[a,l,u,o]),T.useEffect(()=>{const d=()=>{if(u){const h=l.current,p=a.current;if(h!==null&&p!==null){const{top:m}=h.getBoundingClientRect(),_=m+h.offsetHeight+Qp;_!==p.getBoundingClientRect().top&&(p.style.top=`${_}px`)}}};return document.addEventListener("scroll",d),()=>{document.removeEventListener("scroll",d)}},[l,a,u]),F.jsxs(F.Fragment,{children:[F.jsxs("button",{type:"button",disabled:r,"aria-label":t||e,className:n,onClick:()=>c(!u),ref:l,children:[i&&F.jsx("span",{className:i}),e&&F.jsx("span",{className:"text dropdown-button-text",children:e}),F.jsx("i",{className:"chevron-down"})]}),u&&Tr.createPortal(F.jsx(LS,{dropDownRef:a,onClose:f,children:s}),document.body)]})}const jc={m:"m - Paragraph - Margin - No First Line Indent",ms:"ms - Heading - Major Section Level 1",nb:"nb - Paragraph - No Break with Previous Paragraph",p:"p - Paragraph - Normal - First Line Indent",pi:"pi - Paragraph - Indented - Level 1 - First Line Indent",q1:"q1 - Poetry - Indent Level 1",q2:"q2 - Poetry - Indent Level 2",r:"r - Heading - Parallel References",s:"s - Heading - Section Level 1"},Uc={...jc,ide:"ide - File - Encoding",h:"h - File - Header",h1:"h1 - File - Header",h2:"h2 - File - Left Header",h3:"h3 - File - Right Header",toc1:"toc1 - File - Long Table of Contents Text",toc2:"toc2 - File - Short Table of Contents Text",toc3:"toc3 - File - Book Abbreviation",cl:"cl - Chapter - Publishing Label",mt:"mt - Title - Major Title Level 1",mt1:"mt1 - Title - Major Title Level 1",mt2:"mt2 - Title - Major Title Level 2",mt3:"mt3 - Title - Major Title Level 3",mt4:"mt4 - Title - Major Title Level 4",ms1:"ms1 - Heading - Major Section Level 1",ms2:"ms2 - Heading - Major Section Level 2",ms3:"ms3 - Heading - Major Section Level 3",b:"b - Poetry - Stanza Break (Blank Line)"};function FS(r){return r in Uc?r:"ban"}function $S(r){return r in Uc?Uc[r]:"No Style"}function BS(r){return r?"active dropdown-item-active":""}function qS({editor:r,blockMarker:e,disabled:t=!1}){const n=i=>{r.update(()=>{const s=re();G(s)&&D2(s,()=>ko(i))})};return F.jsx(PS,{disabled:t,buttonClassName:"toolbar-item block-controls",buttonIconClassName:"icon block-marker "+FS(e),buttonLabel:$S(e),buttonAriaLabel:"Formatting options for block type",children:Object.keys(jc).map(i=>F.jsxs(RS,{className:"item block-marker "+BS(e===i),onClick:()=>n(i),children:[F.jsx("i",{className:"icon block-marker "+i}),F.jsx("span",{className:"text usfm_"+i,children:jc[i]})]},i))})}function Zp(){return F.jsx("div",{className:"divider"})}const jS=T.forwardRef(function(r,e){const[t]=Ee(),[n,i]=T.useState(t),[s,o]=T.useState(""),[a,l]=T.useState(!1),[u,c]=T.useState(!1),[f,d]=T.useState(()=>t.isEditable()),h=T.useCallback(()=>{const p=re();if(G(p)){const m=p.anchor.getNode();let _=m.getKey()==="root"?m:Yn(m,v=>{const k=v.getParent();return k!==null&&dn(k)});_===null&&(_=m.getTopLevelElementOrThrow());const C=_.getKey();n.getElementByKey(C)!==null&&(Tt(_)||xn(_)||Ls(_))&&o(_.getMarker())}},[n]);return T.useEffect(()=>t.registerCommand(vs,(p,m)=>(h(),i(m),!1),oo),[t,h]),T.useEffect(()=>_t(t.registerEditableListener(p=>{d(p)}),n.registerUpdateListener(({editorState:p})=>{p.read(()=>{h()})}),n.registerCommand(Qs,p=>(l(p),!1),oo),n.registerCommand(Xs,p=>(c(p),!1),oo)),[h,n,t]),F.jsxs("div",{className:"toolbar",children:[F.jsx("button",{disabled:!a||!f,onClick:()=>{n.dispatchCommand(Cl,void 0)},title:pc?"Undo (⌘Z)":"Undo (Ctrl+Z)",type:"button",className:"toolbar-item spaced","aria-label":"Undo",children:F.jsx("i",{className:"format undo"})}),F.jsx("button",{disabled:!u||!f,onClick:()=>{n.dispatchCommand(El,void 0)},title:pc?"Redo (⌘Y)":"Redo (Ctrl+Y)",type:"button",className:"toolbar-item","aria-label":"Redo",children:F.jsx("i",{className:"format redo"})}),F.jsx(Zp,{}),n===t&&F.jsxs(F.Fragment,{children:[F.jsx(qS,{disabled:!f,blockMarker:s,editor:t}),F.jsx(Zp,{})]}),F.jsx("div",{ref:e,className:"end-container"})]})}),Tb=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,US=Tb?T.useLayoutEffect:T.useEffect,_a={tag:mi};function Ab({initialConfig:r,children:e}){const t=T.useMemo(()=>{const{theme:n,namespace:i,nodes:s,onError:o,editorState:a,html:l}=r,u=zE(null,n),c=Fv({editable:r.editable,html:l,namespace:i,nodes:s,onError:f=>o(f,c),theme:n});return function(f,d){if(d!==null){if(d===void 0)f.update(()=>{const h=De();if(h.isEmpty()){const p=Er();h.append(p);const m=Tb?document.activeElement:null;(re()!==null||m!==null&&m===f.getRootElement())&&p.select()}},_a);else if(d!==null)switch(typeof d){case"string":{const h=f.parseEditorState(d);f.setEditorState(h,_a);break}case"object":f.setEditorState(d,_a);break;case"function":f.update(()=>{De().isEmpty()&&d(f)},_a)}}}(c,a),[c,u]},[]);return US(()=>{const n=r.editable,[i]=t;i.setEditable(n===void 0||n)},[]),F.jsx(a_.Provider,{value:t,children:e})}const Db=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function zS({editor:r,ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:n,ariaDescribedBy:i,ariaErrorMessage:s,ariaExpanded:o,ariaInvalid:a,ariaLabel:l,ariaLabelledBy:u,ariaMultiline:c,ariaOwns:f,ariaRequired:d,autoCapitalize:h,className:p,id:m,role:_="textbox",spellCheck:C=!0,style:v,tabIndex:k,"data-testid":M,...P},x){const[O,N]=T.useState(r.isEditable()),I=T.useCallback(w=>{w&&w.ownerDocument&&w.ownerDocument.defaultView?r.setRootElement(w):r.setRootElement(null)},[r]),W=T.useMemo(()=>function(...w){return q=>{w.forEach(S=>{typeof S=="function"?S(q):S!=null&&(S.current=q)})}}(x,I),[I,x]);return Db(()=>(N(r.isEditable()),r.registerEditableListener(w=>{N(w)})),[r]),F.jsx("div",{"aria-activedescendant":O?e:void 0,"aria-autocomplete":O?t:"none","aria-controls":O?n:void 0,"aria-describedby":i,...s!=null?{"aria-errormessage":s}:{},"aria-expanded":O&&_==="combobox"?!!o:void 0,...a!=null?{"aria-invalid":a}:{},"aria-label":l,"aria-labelledby":u,"aria-multiline":c,"aria-owns":O?f:void 0,"aria-readonly":!O||void 0,"aria-required":d,autoCapitalize:h,className:p,contentEditable:O,"data-testid":M,id:m,ref:W,role:_,spellCheck:C,style:v,tabIndex:k,...P})}const HS=T.forwardRef(zS);function eg(r){return r.getEditorState().read(Rd(r.isComposing()))}const Nb=T.forwardRef(WS);function WS(r,e){const{placeholder:t,...n}=r,[i]=Ee();return F.jsxs(F.Fragment,{children:[F.jsx(HS,{editor:i,...n,ref:e}),t!=null&&F.jsx(KS,{editor:i,content:t})]})}function KS({content:r,editor:e}){const t=function(o){const[a,l]=T.useState(()=>eg(o));return Db(()=>{function u(){const c=eg(o);l(c)}return u(),_t(o.registerUpdateListener(()=>{u()}),o.registerEditableListener(()=>{u()}))},[o]),a}(e),[n,i]=T.useState(e.isEditable());if(T.useLayoutEffect(()=>(i(e.isEditable()),e.registerEditableListener(o=>{i(o)})),[e]),!t)return null;let s=null;return typeof r=="function"?s=r(n):r!==null&&(s=r),s===null?null:F.jsx("div",{"aria-hidden":!0,children:s})}function Mb({editorRef:r}){const[e]=Ee();return T.useEffect(()=>{typeof r=="function"?r(e):typeof r=="object"&&(r.current=e)},[e]),null}function zc(r,e){return zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},zc(r,e)}var tg={error:null},VS=function(r){var e,t;function n(){for(var s,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(s=r.call.apply(r,[this].concat(a))||this).state=tg,s.resetErrorBoundary=function(){for(var u,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];s.props.onReset==null||(u=s.props).onReset.apply(u,f),s.reset()},s}t=r,(e=n).prototype=Object.create(t.prototype),e.prototype.constructor=e,zc(e,t),n.getDerivedStateFromError=function(s){return{error:s}};var i=n.prototype;return i.reset=function(){this.setState(tg)},i.componentDidCatch=function(s,o){var a,l;(a=(l=this.props).onError)==null||a.call(l,s,o)},i.componentDidUpdate=function(s,o){var a,l,u,c,f=this.state.error,d=this.props.resetKeys;f!==null&&o.error!==null&&((u=s.resetKeys)===void 0&&(u=[]),(c=d)===void 0&&(c=[]),u.length!==c.length||u.some(function(h,p){return!Object.is(h,c[p])}))&&((a=(l=this.props).onResetKeysChange)==null||a.call(l,s.resetKeys,d),this.reset())},i.render=function(){var s=this.state.error,o=this.props,a=o.fallbackRender,l=o.FallbackComponent,u=o.fallback;if(s!==null){var c={error:s,resetErrorBoundary:this.resetErrorBoundary};if(T.isValidElement(u))return u;if(typeof a=="function")return a(c);if(l)return T.createElement(l,c);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n}(T.Component);function Ob({children:r,onError:e}){return F.jsx(VS,{fallback:F.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:r})}const qu=0,Hc=1,Wc=2,$r=0,JS=1,rg=2,GS=3,YS=4;function XS(r,e,t,n,i){if(r===null||t.size===0&&n.size===0&&!i)return $r;const s=e._selection,o=r._selection;if(i)return JS;if(!(G(s)&&G(o)&&o.isCollapsed()&&s.isCollapsed()))return $r;const a=function(C,v,k){const M=C._nodeMap,P=[];for(const x of v){const O=M.get(x);O!==void 0&&P.push(O)}for(const[x,O]of k){if(!O)continue;const N=M.get(x);N===void 0||St(N)||P.push(N)}return P}(e,t,n);if(a.length===0)return $r;if(a.length>1){const C=e._nodeMap,v=C.get(s.anchor.key),k=C.get(o.anchor.key);return v&&k&&!r._nodeMap.has(v.__key)&&ee(v)&&v.__text.length===1&&s.anchor.offset===1?rg:$r}const l=a[0],u=r._nodeMap.get(l.__key);if(!ee(u)||!ee(l)||u.__mode!==l.__mode)return $r;const c=u.__text,f=l.__text;if(c===f)return $r;const d=s.anchor,h=o.anchor;if(d.key!==h.key||d.type!=="text")return $r;const p=d.offset,m=h.offset,_=f.length-c.length;return _===1&&m===p-1?rg:_===-1&&m===p+1?GS:_===-1&&m===p?YS:$r}function QS(r,e){let t=Date.now(),n=$r;return(i,s,o,a,l,u)=>{const c=Date.now();if(u.has(nc))return n=$r,t=c,Wc;const f=XS(i,s,a,l,r.isComposing()),d=(()=>{const h=o===null||o.editor===r,p=u.has(Ov);if(!p&&h&&u.has(mi))return qu;if(i===null)return Hc;const m=s._selection;return a.size>0||l.size>0?p===!1&&f!==$r&&f===n&&c<t+e&&h||a.size===1&&function(_,C,v){const k=C._nodeMap.get(_),M=v._nodeMap.get(_),P=C._selection,x=v._selection;return!(G(P)&&G(x)&&P.anchor.type==="element"&&P.focus.type==="element"&&x.anchor.type==="text"&&x.focus.type==="text"||!ee(k)||!ee(M)||k.__parent!==M.__parent)&&JSON.stringify(C.read(()=>k.exportJSON()))===JSON.stringify(v.read(()=>M.exportJSON()))}(Array.from(a)[0],i,s)?qu:Hc:m!==null?qu:Wc})();return t=c,n=f,d}}function ng(r){r.undoStack=[],r.redoStack=[],r.current=null}function ZS(r,e,t){const n=QS(r,t);return _t(r.registerCommand(Cl,()=>(function(i,s){const o=s.redoStack,a=s.undoStack;if(a.length!==0){const l=s.current,u=a.pop();l!==null&&(o.push(l),i.dispatchCommand(Xs,!0)),a.length===0&&i.dispatchCommand(Qs,!1),s.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:nc})}}(r,e),!0),ye),r.registerCommand(El,()=>(function(i,s){const o=s.redoStack,a=s.undoStack;if(o.length!==0){const l=s.current;l!==null&&(a.push(l),i.dispatchCommand(Qs,!0));const u=o.pop();o.length===0&&i.dispatchCommand(Xs,!1),s.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:nc})}}(r,e),!0),ye),r.registerCommand(cd,()=>(ng(e),!1),ye),r.registerCommand(sm,()=>(ng(e),r.dispatchCommand(Xs,!1),r.dispatchCommand(Qs,!1),!0),ye),r.registerUpdateListener(({editorState:i,prevEditorState:s,dirtyLeaves:o,dirtyElements:a,tags:l})=>{const u=e.current,c=e.redoStack,f=e.undoStack,d=u===null?null:u.editorState;if(u!==null&&i===d)return;const h=n(s,i,u,o,a,l);if(h===Hc)c.length!==0&&(e.redoStack=[],r.dispatchCommand(Xs,!1)),u!==null&&(f.push({...u}),r.dispatchCommand(Qs,!0));else if(h===Wc)return;e.current={editor:r,editorState:i}}))}function eT(){return{current:null,redoStack:[],undoStack:[]}}function Ib({delay:r,externalHistoryState:e}){const[t]=Ee();return function(n,i,s=1e3){const o=T.useMemo(()=>i||eT(),[i]);T.useEffect(()=>ZS(n,o,s),[s,n,o])}(t,e,r),null}const tT=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function rT(r){return{initialValueFn:()=>r.isEditable(),subscribe:e=>r.registerEditableListener(e)}}function Rb(){return function(r){const[e]=Ee(),t=T.useMemo(()=>r(e),[e,r]),[n,i]=T.useState(()=>t.initialValueFn()),s=T.useRef(n);return tT(()=>{const{initialValueFn:o,subscribe:a}=t,l=o();return s.current!==l&&(s.current=l,i(l)),a(u=>{s.current=u,i(u)})},[t,r]),n}(rT)}function Lb(r){const e=window.location.origin,t=n=>{if(n.origin!==e)return;const i=r.getRootElement();if(document.activeElement!==i)return;const s=n.data;if(typeof s=="string"){let o;try{o=JSON.parse(s)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const a=o.payload;if(a&&a.functionId==="makeChanges"){const l=a.args;if(l){const[u,c,f,d,h,p]=l;r.update(()=>{const m=re();if(G(m)){const _=m.anchor;let C=_.getNode(),v=0,k=0;if(ee(C)&&u>=0&&c>=0&&(v=u,k=u+c,m.setTextNodeRange(C,v,C,k)),v===k&&f===""||(m.insertRawText(f),C=_.getNode()),ee(C)){v=d,k=d+h;const M=C.getTextContentSize();v=v>M?M:v,k=k>M?M:k,m.setTextNodeRange(C,v,C,k)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}function ig(r,e){if(document.caretRangeFromPoint!==void 0){const t=document.caretRangeFromPoint(r,e);return t===null?null:{node:t.startContainer,offset:t.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const t=document.caretPositionFromPoint(r,e);return t===null?null:{node:t.offsetNode,offset:t.offset}}return null}const Fs=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,nT=Fs&&"documentMode"in document?document.documentMode:null,iT=!(!Fs||!("InputEvent"in window)||nT)&&"getTargetRanges"in new window.InputEvent("input"),sT=Fs&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),sg=Fs&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,oT=Fs&&/^(?=.*Chrome).*/i.test(navigator.userAgent),aT=Fs&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!oT,og=be("DRAG_DROP_PASTE_FILE");function ba(r){let e=null;if(wn(r,DragEvent)?e=r.dataTransfer:wn(r,ClipboardEvent)&&(e=r.clipboardData),e===null)return[!1,[],!1];const t=e.types,n=t.includes("Files"),i=t.includes("text/html")||t.includes("text/plain");return[n,Array.from(e.files),i]}function ag(r){const e=re();if(!G(e))return!1;const t=new Set,n=e.getNodes();for(let i=0;i<n.length;i++){const s=n[i],o=s.getKey();if(t.has(o))continue;const a=Yn(s,u=>V(u)&&!u.isInline());if(a===null)continue;const l=a.getKey();a.canIndent()&&!t.has(l)&&(t.add(l),r(a))}return t.size>0}function lg(r){const e=Jn(r);return Le(e)}function ju(r){for(const e of["lowercase","uppercase","capitalize"])r.hasFormat(e)&&r.toggleFormat(e)}function lT(r){return _t(r.registerCommand(rm,e=>{const t=re();return!!Wt(t)&&(t.clear(),!0)},ye),r.registerCommand(nn,e=>{const t=re();return G(t)?(t.deleteCharacter(e),!0):!!Wt(t)&&(t.deleteNodes(),!0)},ye),r.registerCommand(as,e=>{const t=re();return!!G(t)&&(t.deleteWord(e),!0)},ye),r.registerCommand(ls,e=>{const t=re();return!!G(t)&&(t.deleteLine(e),!0)},ye),r.registerCommand(pi,e=>{const t=re();if(typeof e=="string")t!==null&&t.insertText(e);else{if(t===null)return!1;const n=e.dataTransfer;if(n!=null)Op(n,t,r);else if(G(t)){const i=e.data;return i&&t.insertText(i),!0}}return!0},ye),r.registerCommand(Va,()=>{const e=re();return!!G(e)&&(e.removeText(),!0)},ye),r.registerCommand(Bn,e=>{const t=re();return!!G(t)&&(t.formatText(e),!0)},ye),r.registerCommand(hv,e=>{const t=re();if(!G(t)&&!Wt(t))return!1;const n=t.getNodes();for(const i of n){const s=Yn(i,o=>V(o)&&!o.isInline());s!==null&&s.setFormat(e)}return!0},ye),r.registerCommand(zn,e=>{const t=re();return!!G(t)&&(t.insertLineBreak(e),!0)},ye),r.registerCommand(go,()=>{const e=re();return!!G(e)&&(e.insertParagraph(),!0)},ye),r.registerCommand(dv,()=>(Av([Do()]),!0),ye),r.registerCommand(fv,()=>ag(e=>{const t=e.getIndent();e.setIndent(t+1)}),ye),r.registerCommand(Lf,()=>ag(e=>{const t=e.getIndent();t>0&&e.setIndent(Math.max(0,t-1))}),ye),r.registerCommand(id,e=>{const t=re();if(Wt(t)){const n=t.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(G(t)){const n=sc(t.focus,!0);if(!e.shiftKey&&Le(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),e.preventDefault(),!0}return!1},ye),r.registerCommand(sd,e=>{const t=re();if(Wt(t)){const n=t.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(G(t)){if(function(i){const s=i.focus;return s.key==="root"&&s.offset===De().getChildrenSize()}(t))return e.preventDefault(),!0;const n=sc(t.focus,!1);if(!e.shiftKey&&Le(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),e.preventDefault(),!0}return!1},ye),r.registerCommand(nd,e=>{const t=re();if(Wt(t)){const n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectPrevious(),!0}if(!G(t))return!1;if(nl(t,!0)){const n=e.shiftKey;return e.preventDefault(),il(t,n,!0),!0}return!1},ye),r.registerCommand(rd,e=>{const t=re();if(Wt(t)){const i=t.getNodes();if(i.length>0)return e.preventDefault(),i[0].selectNext(0,0),!0}if(!G(t))return!1;const n=e.shiftKey;return!!nl(t,!1)&&(e.preventDefault(),il(t,n,!1),!0)},ye),r.registerCommand(od,e=>{if(lg(e.target))return!1;const t=re();if(G(t)){if(function(n){if(!n.isCollapsed())return!1;const{anchor:i}=n;if(i.offset!==0)return!1;const s=i.getNode();if(St(s))return!1;const o=q2(s);return o.getIndent()>0&&(o.is(s)||s.is(o.getFirstDescendant()))}(t))return e.preventDefault(),r.dispatchCommand(Lf,void 0);if(sg&&navigator.language==="ko-KR")return!1}else if(!Wt(t))return!1;return e.preventDefault(),r.dispatchCommand(nn,!0)},ye),r.registerCommand(ad,e=>{if(lg(e.target))return!1;const t=re();return!(!G(t)&&!Wt(t))&&(e.preventDefault(),r.dispatchCommand(nn,!1))},ye),r.registerCommand(us,e=>{const t=re();if(!G(t))return!1;if(ju(t),e!==null){if((sg||sT||aT)&&iT)return!1;if(e.preventDefault(),e.shiftKey)return r.dispatchCommand(zn,!1)}return r.dispatchCommand(go,void 0)},ye),r.registerCommand(wl,()=>{const e=re();return!!G(e)&&(r.blur(),!0)},ye),r.registerCommand(kl,e=>{const[,t]=ba(e);if(t.length>0){const i=ig(e.clientX,e.clientY);if(i!==null){const{offset:s,node:o}=i,a=Jn(o);if(a!==null){const l=Mo();if(ee(a))l.anchor.set(a.getKey(),s,"text"),l.focus.set(a.getKey(),s,"text");else{const c=a.getParentOrThrow().getKey(),f=a.getIndexWithinParent()+1;l.anchor.set(c,f,"element"),l.focus.set(c,f,"element")}const u=co(l);Mt(u)}r.dispatchCommand(og,t)}return e.preventDefault(),!0}const n=re();return!!G(n)},ye),r.registerCommand(ud,e=>{const[t]=ba(e),n=re();return!(t&&!G(n))},ye),r.registerCommand(im,e=>{const[t]=ba(e),n=re();if(t&&!G(n))return!1;const i=ig(e.clientX,e.clientY);if(i!==null){const s=Jn(i.node);Le(s)&&e.preventDefault()}return!0},ye),r.registerCommand(Ja,()=>(Vm(),!0),ye),r.registerCommand(Ri,e=>(Rp(r,wn(e,ClipboardEvent)?e:null),!0),ye),r.registerCommand(Es,e=>(async function(t,n){await Rp(n,wn(t,ClipboardEvent)?t:null),n.update(()=>{const i=re();G(i)?i.removeText():Wt(i)&&i.getNodes().forEach(s=>s.remove())})}(e,r),!0),ye),r.registerCommand(Ii,e=>{const[,t,n]=ba(e);return t.length>0&&!n?(r.dispatchCommand(og,t),!0):Pi(e.target)&&Cd(e.target)?!1:re()!==null&&(function(i,s){i.preventDefault(),s.update(()=>{const o=re(),a=wn(i,InputEvent)||wn(i,KeyboardEvent)?null:i.clipboardData;a!=null&&o!==null&&Op(a,o,s)},{tag:Pm})}(e,r),!0)},ye),r.registerCommand(nm,e=>{const t=re();return G(t)&&ju(t),!1},ye),r.registerCommand(ld,e=>{const t=re();return G(t)&&ju(t),!1},ye))}const Kc=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function ug(r){return r.getEditorState().read(Rd(r.isComposing()))}function uT({contentEditable:r,placeholder:e=null,ErrorBoundary:t}){const[n]=Ee(),i=function(s,o){const[a,l]=T.useState(()=>s.getDecorators());return Kc(()=>s.registerDecoratorListener(u=>{Tr.flushSync(()=>{l(u)})}),[s]),T.useEffect(()=>{l(s.getDecorators())},[s]),T.useMemo(()=>{const u=[],c=Object.keys(a);for(let f=0;f<c.length;f++){const d=c[f],h=F.jsx(o,{onError:m=>s._onError(m),children:F.jsx(T.Suspense,{fallback:null,children:a[d]})}),p=s.getElementByKey(d);p!==null&&u.push(Tr.createPortal(h,p,d))}return u},[o,a,s])}(n,t);return function(s){Kc(()=>_t(lT(s),Lb(s)),[s])}(n),F.jsxs(F.Fragment,{children:[r,F.jsx(cT,{content:e}),i]})}function cT({content:r}){const[e]=Ee(),t=function(i){const[s,o]=T.useState(()=>ug(i));return Kc(()=>{function a(){const l=ug(i);o(l)}return a(),_t(i.registerUpdateListener(()=>{a()}),i.registerEditableListener(()=>{a()}))},[i]),s}(e),n=Rb();return t?typeof r=="function"?r(n):r:null}const cg={namespace:"platformEditor",theme:xb,editable:!0,editorState:void 0,onError(r){throw r},nodes:[At,...Zw]},dT=rb(),fT={},hT={};function pT(){return F.jsx("div",{className:"editor-placeholder",children:"Enter some Scripture..."})}const Pb=T.forwardRef(function({defaultUsj:r,scrRef:e,onScrRefChange:t,onSelectionChange:n,onUsjChange:i,options:s,logger:o,children:a},l){const u=T.useRef(null),c=T.useRef(null),f=T.useRef(null),d=T.useRef(r),[h,p]=T.useState(r),{isReadonly:m=!1,hasSpellCheck:_=!1,textDirection:C="ltr",markerMenuTrigger:v="\\",view:k=dT,nodes:M=fT,debug:P=!1}=s??hT;cg.editable=!m,Bu.initialize(o),T.useImperativeHandle(l,()=>({focus(){var O;(O=u.current)==null||O.focus()},getUsj(){return d.current},setUsj(O){Pn(d.current,O)||(d.current=O,p(O))},applyUpdate(O,N="remote"){var I,W;(I=u.current)==null||I.update(()=>{N==="remote"&&Ym(Tc),Uk(O,k,M,o)},{discrete:!0});const w=(W=u.current)==null?void 0:W.getEditorState();if(!w)return;const q=Bu.deserializeEditorState(w);if(q){const S=!Pn(d.current,q);S&&(d.current=q),(S||!Pn(h,q))&&(i==null||i(q,O,N))}},getSelection(){var O;return(O=u.current)==null?void 0:O.read(K_)},setSelection(O){var N;(N=u.current)==null||N.update(()=>{const I=W_(O);I!==void 0&&Mt(I)},{tag:f_})},addAnnotation(O,N,I){var W;(W=c.current)==null||W.addAnnotation(O,ap(N),I)},removeAnnotation(O,N){var I;(I=c.current)==null||I.removeAnnotation(ap(O),N)},get toolbarEndRef(){return f}}));const x=T.useCallback((O,N,I,W)=>{if(YE.some(q=>I.has(q)))return;const w=Bu.deserializeEditorState(O);if(w){const q=!Pn(d.current,w);q&&(d.current=w);const S=I.has(Tc)?"remote":"local";(q||!Pn(h,w))&&(i==null||i(w,W,S))}},[h,i]);return F.jsxs(Ab,{initialConfig:cg,children:[F.jsx(kx,{isEditable:!m}),F.jsxs("div",{className:"editor-container",children:[F.jsx("div",{className:"editor-toolbar-container"+(m?"-readonly":"-editable"),children:F.jsx(jS,{ref:f})}),F.jsxs("div",{className:"editor-inner",children:[F.jsx(Mb,{editorRef:u}),F.jsx(uT,{contentEditable:F.jsx(Nb,{className:`editor-input ${i1(k).join(" ")}`,spellCheck:_}),placeholder:F.jsx(pT,{}),ErrorBoundary:Ob}),F.jsx(Ib,{}),e&&t&&F.jsx(s1,{scrRef:e,onScrRefChange:t}),e&&F.jsx(Jx,{trigger:v,scrRef:e,getMarkerAction:(O,N)=>SS(O,N,k)}),F.jsx(UE,{options:{view:k,nodes:M},editedUsjRef:d,usj:h,setUsj:p}),F.jsx(xx,{scripture:h,nodeOptions:M,editorAdaptor:kb,viewOptions:k,logger:o}),F.jsx(Px,{onChange:n}),F.jsx(Mk,{onChange:x,ignoreSelectionChange:!0,ignoreHistoryMergeTagChange:!0}),F.jsx(bk,{ref:c,logger:o}),F.jsx(ix,{}),F.jsx(cx,{}),F.jsx(hx,{}),F.jsx(px,{logger:o}),F.jsx(wx,{}),F.jsx(Sx,{nodeOptions:M,viewOptions:k,logger:o}),F.jsx(Fx,{}),F.jsx(qx,{textDirection:C}),F.jsx(zx,{}),a]}),P&&F.jsx(W1,{})]})]})}),Fb=T.forwardRef(function(r,e){const{children:t,...n}=r;return F.jsx(Pb,{ref:e,...n})});function gT({defaultSelection:r}){const[e]=Ee();return T.useEffect(()=>{e.focus(()=>{const t=document.activeElement,n=e.getRootElement();n===null||t!==null&&n.contains(t)||n.focus({preventScroll:!0})},{defaultSelection:r})},[r,e]),null}const mT=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function yT({onClear:r}){const[e]=Ee();return mT(()=>e.registerCommand(cd,t=>(e.update(()=>{if(r==null){const n=De(),i=re(),s=Er();n.clear(),n.append(s),i!==null&&s.select(),G(i)&&(i.format=0)}else r()}),!0),ye),[e,r]),null}const dg=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],fg=dg[Math.floor(Math.random()*dg.length)],_T=T.createContext({clientID:0,color:fg[1],isCollabActive:!1,name:fg[0],yjsDocMap:new Map});function $b(r,e){return T.useContext(_T)}const bT=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function vT({ignoreHistoryMergeTagChange:r=!0,ignoreSelectionChange:e=!1,onChange:t}){const[n]=Ee();return bT(()=>{if(t)return n.registerUpdateListener(({editorState:i,dirtyElements:s,dirtyLeaves:o,prevEditorState:a,tags:l})=>{e&&s.size===0&&o.size===0||r&&l.has(mi)||a.isEmpty()||t(i,n,l)})},[n,r,e,t]),null}const $s=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,CT=$s&&"documentMode"in document?document.documentMode:null,ET=!(!$s||!("InputEvent"in window)||CT)&&"getTargetRanges"in new window.InputEvent("input"),wT=$s&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),hg=$s&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,kT=$s&&/^(?=.*Chrome).*/i.test(navigator.userAgent),xT=$s&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!kT;function pg(r,e){e.update(()=>{if(r!==null){const t=wn(r,KeyboardEvent)?null:r.clipboardData,n=re();if(n!==null&&t!=null){r.preventDefault();const i=ub(e);i!==null&&t.setData("text/html",i),t.setData("text/plain",n.getTextContent())}}})}function ST(r){return _t(r.registerCommand(nn,e=>{const t=re();return!!G(t)&&(t.deleteCharacter(e),!0)},ye),r.registerCommand(as,e=>{const t=re();return!!G(t)&&(t.deleteWord(e),!0)},ye),r.registerCommand(ls,e=>{const t=re();return!!G(t)&&(t.deleteLine(e),!0)},ye),r.registerCommand(pi,e=>{const t=re();if(!G(t))return!1;if(typeof e=="string")t.insertText(e);else{const n=e.dataTransfer;if(n!=null)Mp(n,t);else{const i=e.data;i&&t.insertText(i)}}return!0},ye),r.registerCommand(Va,()=>{const e=re();return!!G(e)&&(e.removeText(),!0)},ye),r.registerCommand(zn,e=>{const t=re();return!!G(t)&&(t.insertLineBreak(e),!0)},ye),r.registerCommand(go,()=>{const e=re();return!!G(e)&&(e.insertLineBreak(),!0)},ye),r.registerCommand(nd,e=>{const t=re();if(!G(t))return!1;const n=e,i=n.shiftKey;return!!nl(t,!0)&&(n.preventDefault(),il(t,i,!0),!0)},ye),r.registerCommand(rd,e=>{const t=re();if(!G(t))return!1;const n=e,i=n.shiftKey;return!!nl(t,!1)&&(n.preventDefault(),il(t,i,!1),!0)},ye),r.registerCommand(od,e=>{const t=re();return!!G(t)&&(!hg||navigator.language!=="ko-KR")&&(e.preventDefault(),r.dispatchCommand(nn,!0))},ye),r.registerCommand(ad,e=>{const t=re();return!!G(t)&&(e.preventDefault(),r.dispatchCommand(nn,!1))},ye),r.registerCommand(us,e=>{const t=re();if(!G(t))return!1;if(e!==null){if((hg||wT||xT)&&ET)return!1;e.preventDefault()}return r.dispatchCommand(zn,!1)},ye),r.registerCommand(Ja,()=>(Vm(),!0),ye),r.registerCommand(Ri,e=>{const t=re();return!!G(t)&&(pg(e,r),!0)},ye),r.registerCommand(Es,e=>{const t=re();return!!G(t)&&(function(n,i){pg(n,i),i.update(()=>{const s=re();G(s)&&s.removeText()})}(e,r),!0)},ye),r.registerCommand(Ii,e=>{const t=re();return!!G(t)&&(function(n,i){n.preventDefault(),i.update(()=>{const s=re(),o=wn(n,ClipboardEvent)?n.clipboardData:null;o!=null&&G(s)&&Mp(o,s)},{tag:Pm})}(e,r),!0)},ye),r.registerCommand(kl,e=>{const t=re();return!!G(t)&&(e.preventDefault(),!0)},ye),r.registerCommand(ud,e=>{const t=re();return!!G(t)&&(e.preventDefault(),!0)},ye))}const Vc=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?T.useLayoutEffect:T.useEffect;function gg(r){return r.getEditorState().read(Rd(r.isComposing()))}function TT({contentEditable:r,placeholder:e=null,ErrorBoundary:t}){const[n]=Ee(),i=function(s,o){const[a,l]=T.useState(()=>s.getDecorators());return Vc(()=>s.registerDecoratorListener(u=>{Tr.flushSync(()=>{l(u)})}),[s]),T.useEffect(()=>{l(s.getDecorators())},[s]),T.useMemo(()=>{const u=[],c=Object.keys(a);for(let f=0;f<c.length;f++){const d=c[f],h=F.jsx(o,{onError:m=>s._onError(m),children:F.jsx(T.Suspense,{fallback:null,children:a[d]})}),p=s.getElementByKey(d);p!==null&&u.push(Tr.createPortal(h,p,d))}return u},[o,a,s])}(n,t);return function(s){Vc(()=>_t(ST(s),Lb(s)),[s])}(n),F.jsxs(F.Fragment,{children:[r,F.jsx(AT,{content:e}),i]})}function AT({content:r}){const[e]=Ee(),t=function(i){const[s,o]=T.useState(()=>gg(i));return Vc(()=>{function a(){const l=gg(i);o(l)}return a(),_t(i.registerUpdateListener(()=>{a()}),i.registerEditableListener(()=>{a()}))},[i]),s}(e),n=Rb();return t?typeof r=="function"?r(n):r:null}function Bb(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function _l(r,e,t,n,i){return{author:e,content:r,deleted:i===void 0?!1:i,id:t===void 0?Bb():t,timeStamp:n===void 0?performance.timeOrigin+performance.now():n,type:"comment"}}function qb(r,e,t){return{comments:e,id:t===void 0?Bb():t,quote:r,type:"thread"}}function mg(r){return{comments:Array.from(r.comments),id:r.id,quote:r.quote,type:"thread"}}function DT(r){return{author:r.author,content:"[Deleted Comment]",deleted:!0,id:r.id,timeStamp:r.timeStamp,type:"comment"}}function Uu(r){const e=r._changeListeners;for(const t of e)t()}class NT{constructor(e,t){fe(this,"_editor"),fe(this,"_comments"),fe(this,"_changeListeners"),fe(this,"_collabProvider"),fe(this,"logger"),this._comments=[],this._editor=e,this.logger=t,this._collabProvider=null,this._changeListeners=new Set}isCollaborative(){return this._collabProvider!==null}getComments(){return this._comments}setComments(e){this._comments=e,Uu(this)}addComment(e,t,n){const i=Array.from(this._comments),s=this._getCollabComments();if(t!==void 0&&e.type==="comment")for(let o=0;o<i.length;o++){const a=i[o];if(a.type==="thread"&&a.id===t.id){const l=mg(a);i.splice(o,1,l);const u=n!==void 0?n:l.comments.length;if(this.isCollaborative()&&s!==null){const c=s.get(o).get("comments");this._withRemoteTransaction(()=>{const f=this._createCollabSharedMap(e);c.insert(u,[f])})}l.comments.splice(u,0,e);break}}else{const o=n!==void 0?n:i.length;this.isCollaborative()&&s!==null&&this._withRemoteTransaction(()=>{const a=this._createCollabSharedMap(e);s.insert(o,[a])}),i.splice(o,0,e)}this._comments=i,Uu(this)}deleteCommentOrThread(e,t){const n=Array.from(this._comments),i=this._getCollabComments();let s=null;if(t!==void 0)for(let o=0;o<n.length;o++){const a=n[o];if(a.type==="thread"&&a.id===t.id){const l=mg(a);n.splice(o,1,l);const u=l.comments;if(s=u.indexOf(e),this.isCollaborative()&&i!==null){const c=i.get(o).get("comments"),f=s;this._withRemoteTransaction(()=>{c.delete(f)})}u.splice(s,1);break}}else s=n.indexOf(e),this.isCollaborative()&&i!==null&&this._withRemoteTransaction(()=>{i.delete(s)}),n.splice(s,1);return this._comments=n,Uu(this),e.type==="comment"?{index:s,markedComment:DT(e)}:null}registerOnChange(e){const t=this._changeListeners;return t.add(e),()=>{t.delete(e)}}_withRemoteTransaction(e){const t=this._collabProvider;t!==null&&t.doc.transact(e,this)}_withLocalTransaction(e){const t=this._collabProvider;try{this._collabProvider=null,e()}finally{this._collabProvider=t}}_getCollabComments(){const e=this._collabProvider;return e!==null?e.doc.get("comments",vi):null}_createCollabSharedMap(e){const t=new ms,n=e.type,i=e.id;if(t.set("type",n),t.set("id",i),n==="comment")t.set("author",e.author),t.set("content",e.content),t.set("deleted",e.deleted),t.set("timeStamp",e.timeStamp);else{t.set("quote",e.quote);const s=new vi;e.comments.forEach((o,a)=>{const l=this._createCollabSharedMap(o);s.insert(a,[l])}),t.set("comments",s)}return t}registerCollaboration(e){this._collabProvider=e;const t=this._getCollabComments(),n=()=>{e.connect()},i=()=>{try{e.disconnect()}catch{}},s=this._editor.registerCommand(BE,a=>{var l,u;return n!==void 0&&i!==void 0&&(a?((l=this.logger)==null||l.info("Comments connected!"),n()):((u=this.logger)==null||u.info("Comments disconnected!"),i())),!1},Ts),o=(a,l)=>{if(l.origin!==this){for(const u of a)if(u instanceof Qy){const c=u.target,f=u.delta;let d=0;for(const h of f){const p=h.insert,m=h.retain,_=h.delete,C=c.parent,v=c===t?void 0:C instanceof ms&&this._comments.find(k=>k.id===C.get("id"));if(Array.isArray(p)){const k=d;p.slice().reverse().forEach(M=>{const P=M.get("id"),x=M.get("type")==="thread"?qb(M.get("quote"),M.get("comments").toArray().map(O=>_l(O.get("content"),O.get("author"),O.get("id"),O.get("timeStamp"),O.get("deleted"))),P):_l(M.get("content"),M.get("author"),P,M.get("timeStamp"),M.get("deleted"));this._withLocalTransaction(()=>{this.addComment(x,v,k)})})}else if(typeof m=="number")d+=m;else if(typeof _=="number")for(let k=0;k<_;k++){const M=v===void 0||v===!1?this._comments[d]:v.comments[d];this._withLocalTransaction(()=>{this.deleteCommentOrThread(M,v)}),d++}}}}};return t===null?()=>null:(t.observeDeep(o),n(),()=>{t.unobserveDeep(o),s(),this._collabProvider=null})}}function MT(r){const[e,t]=T.useState(r.getComments());return T.useEffect(()=>r.registerOnChange(()=>{t(r.getComments())}),[r]),e}function OT({onClose:r,children:e,title:t,closeOnClickOutside:n}){const i=T.useRef(null);return T.useEffect(()=>{i.current!==null&&i.current.focus()},[]),T.useEffect(()=>{let s=null;const o=u=>{u.key==="Escape"&&r()},a=u=>{const c=u.target;i.current!==null&&!i.current.contains(c)&&n&&r()},l=i.current;return l!==null&&(s=l.parentElement,s!==null&&s.addEventListener("click",a)),window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o),s!==null&&(s==null||s.removeEventListener("click",a))}},[n,r]),F.jsx("div",{className:"Modal__overlay",role:"dialog",children:F.jsxs("div",{className:"Modal__modal",tabIndex:-1,ref:i,children:[F.jsx("h2",{className:"Modal__title",children:t}),F.jsx("button",{className:"Modal__closeButton","aria-label":"Close modal",type:"button",onClick:r,children:"X"}),F.jsx("div",{className:"Modal__content",children:e})]})})}function IT({onClose:r,children:e,title:t,closeOnClickOutside:n=!1}){return Tr.createPortal(F.jsx(OT,{onClose:r,title:t,closeOnClickOutside:n,children:e}),document.body)}function jb(){const[r,e]=T.useState(null),t=T.useCallback(()=>{e(null)},[]),n=T.useMemo(()=>{if(r===null)return null;const{title:s,content:o,closeOnClickOutside:a}=r;return F.jsx(IT,{onClose:t,title:s,closeOnClickOutside:a,children:o})},[r,t]),i=T.useCallback((s,o,a=!1)=>{e({closeOnClickOutside:a,content:o(t),title:s})},[t]);return[n,i]}const RT={...xb,paragraph:"CommentEditorTheme__paragraph"};function LT(...r){return r.filter(Boolean).join(" ")}function ti({"data-test-id":r,children:e,className:t,onClick:n,disabled:i,small:s,title:o}){return F.jsx("button",{disabled:i,className:LT("Button__root",i&&"Button__disabled",s&&"Button__small",t),onClick:n,title:o,"aria-label":o,...r&&{"data-test-id":r},children:e})}function PT({className:r}){return F.jsx(Nb,{className:r||"ContentEditable__root"})}function FT({children:r,className:e}){return F.jsx("div",{className:e||"Placeholder__root",children:r})}const yg=be("INSERT_INLINE_COMMAND");function $T({anchorKey:r,editor:e,showComments:t,onAddComment:n}){const i=T.useRef(null),s=T.useCallback(()=>{const o=i.current,a=e.getRootElement(),l=e.getElementByKey(r);if(o!==null&&a!==null&&l!==null){const{right:u}=a.getBoundingClientRect(),{top:c}=l.getBoundingClientRect();o.style.left=`${u-20}px`,o.style.top=`${c-30}px`}},[r,e]);return T.useEffect(()=>(window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}),[e,s]),T.useLayoutEffect(()=>{s()},[r,e,t,s]),F.jsx("div",{className:"CommentPlugin_AddCommentBox",ref:i,children:F.jsx("button",{className:"CommentPlugin_AddCommentBox_button",onClick:n,children:F.jsx("i",{className:"icon add-comment"})})})}function BT({onEscape:r}){const[e]=Ee();return T.useEffect(()=>e.registerCommand(wl,t=>r(t),Na),[e,r]),null}function Ub({className:r,autoFocus:e,onEscape:t,onChange:n,editorRef:i,placeholder:s="Type a comment..."}){return F.jsx(Ab,{initialConfig:{namespace:"Commenting",nodes:[],onError:o=>{throw o},theme:RT},children:F.jsxs("div",{className:"CommentPlugin_CommentInputBox_EditorContainer",children:[F.jsx(TT,{contentEditable:F.jsx(PT,{className:r}),placeholder:F.jsx(FT,{children:s}),ErrorBoundary:Ob}),F.jsx(vT,{onChange:n}),F.jsx(Ib,{}),e!==!1&&F.jsx(gT,{}),F.jsx(BT,{onEscape:t}),F.jsx(yT,{}),i!==void 0&&F.jsx(Mb,{editorRef:i})]})})}function zb(r,e){return T.useCallback((t,n)=>{t.read(()=>{r(py()),e(!gy(n.isComposing(),!0))})},[e,r])}function qT({editor:r,cancelAddComment:e,submitAddComment:t}){const[n,i]=T.useState(""),[s,o]=T.useState(!1),a=T.useRef(null),l=T.useMemo(()=>({container:document.createElement("div"),elements:[]}),[]),u=T.useRef(null),c=Wb(),f=T.useCallback(()=>{r.getEditorState().read(()=>{const m=re();if(G(m)){u.current=m.clone();const _=m.anchor,C=m.focus,v=k2(r,_.getNode(),_.offset,C.getNode(),C.offset),k=a.current;if(v!==null&&k!==null){const{left:M,bottom:P,width:x}=v.getBoundingClientRect(),O=x2(r,v);let N=O.length===1?M+x/2-125:M-125;N<10&&(N=10),k.style.left=`${N}px`,k.style.top=`${P+20+(window.pageYOffset||document.documentElement.scrollTop)}px`;const I=O.length,{container:W}=l,w=l.elements,q=w.length;for(let S=0;S<I;S++){const K=O[S];let A=w[S];A===void 0&&(A=document.createElement("span"),w[S]=A,W.appendChild(A));const L=`position:absolute;top:${K.top+(window.pageYOffset||document.documentElement.scrollTop)}px;left:${K.left}px;height:${K.height}px;width:${K.width}px;background-color:rgba(255, 212, 0, 0.3);pointer-events:none;z-index:5;`;A.style.cssText=L}for(let S=q-1;S>=I;S--){const K=w[S];W.removeChild(K),w.pop()}}}})},[r,l]);T.useLayoutEffect(()=>{f();const m=l.container,_=document.body;return _!==null?(_.appendChild(m),()=>{_.removeChild(m)}):()=>{}},[l.container,f]),T.useEffect(()=>(window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[f]);const d=m=>(m.preventDefault(),e(),!0),h=()=>{if(s){let m=r.getEditorState().read(()=>{const _=u.current;return _?_.getTextContent():""});m.length>100&&(m=m.slice(0,99)+"…"),t(qb(m,[_l(n,c)]),!0,void 0,u.current),u.current=null}},p=zb(i,o);return F.jsxs("div",{className:"CommentPlugin_CommentInputBox",ref:a,children:[F.jsx(Ub,{className:"CommentPlugin_CommentInputBox_Editor",onEscape:d,onChange:p}),F.jsxs("div",{className:"CommentPlugin_CommentInputBox_Buttons",children:[F.jsx(ti,{onClick:e,className:"CommentPlugin_CommentInputBox_Button",children:"Cancel"}),F.jsx(ti,{onClick:h,disabled:!s,className:"CommentPlugin_CommentInputBox_Button primary",children:"Comment"})]})]})}function jT({submitAddComment:r,thread:e,placeholder:t}){const[n,i]=T.useState(""),[s,o]=T.useState(!1),a=T.useRef(null),l=Wb(),u=zb(i,o);return F.jsxs(F.Fragment,{children:[F.jsx(Ub,{className:"CommentPlugin_CommentsPanel_Editor",autoFocus:!1,onEscape:()=>!0,onChange:u,editorRef:a,placeholder:t}),F.jsx(ti,{className:"CommentPlugin_CommentsPanel_SendButton",onClick:()=>{if(s){r(_l(n,l),!1,e);const c=a.current;c!==null&&c.dispatchCommand(cd,void 0)}},disabled:!s,children:F.jsx("i",{className:"send"})})]})}function Hb({commentOrThread:r,deleteCommentOrThread:e,onClose:t,thread:n=void 0}){return F.jsxs(F.Fragment,{children:["Are you sure you want to delete this ",r.type,"?",F.jsxs("div",{className:"Modal__content",children:[F.jsx(ti,{onClick:()=>{e(r,n),t()},children:"Delete"})," ",F.jsx(ti,{onClick:()=>{t()},children:"Cancel"})]})]})}function _g({comment:r,deleteComment:e,thread:t,rtf:n}){const i=Math.round((r.timeStamp-(performance.timeOrigin+performance.now()))/1e3),s=Math.round(i/60),[o,a]=jb();return F.jsxs("li",{className:"CommentPlugin_CommentsPanel_List_Comment",children:[F.jsxs("div",{className:"CommentPlugin_CommentsPanel_List_Details",children:[F.jsx("span",{className:"CommentPlugin_CommentsPanel_List_Comment_Author",children:r.author}),F.jsxs("span",{className:"CommentPlugin_CommentsPanel_List_Comment_Time",children:["· ",i>-10?"Just now":n.format(s,"minute")]})]}),F.jsx("p",{className:r.deleted?"CommentPlugin_CommentsPanel_DeletedComment":"",children:r.content}),!r.deleted&&F.jsxs(F.Fragment,{children:[F.jsx(ti,{onClick:()=>{a("Delete Comment",l=>F.jsx(Hb,{commentOrThread:r,deleteCommentOrThread:e,thread:t,onClose:l}))},className:"CommentPlugin_CommentsPanel_List_DeleteButton",children:F.jsx("i",{className:"delete"})}),o]})]})}function UT({activeIDs:r,comments:e,deleteCommentOrThread:t,listRef:n,submitAddComment:i,markNodeMap:s}){const[o]=Ee(),[a,l]=T.useState(0),[u,c]=jb(),f=T.useMemo(()=>new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",numeric:"auto",style:"short"}),[]);return T.useEffect(()=>{const d=setTimeout(()=>{l(a+1)},1e4);return()=>{clearTimeout(d)}},[a]),F.jsx("ul",{className:"CommentPlugin_CommentsPanel_List",ref:n,children:e.map(d=>{const h=d.id;return d.type==="thread"?F.jsxs("li",{onClick:()=>{const p=s.get(h);if(p!==void 0&&(r===null||r.indexOf(h)===-1)){const m=document.activeElement;o.update(()=>{const _=Array.from(p)[0],C=Ae(_);Nt(C)&&C.selectStart()},{onUpdate(){m!==null&&m.focus()}})}},className:`CommentPlugin_CommentsPanel_List_Thread ${s.has(h)?"interactive":""} ${r.indexOf(h)===-1?"":"active"}`,children:[F.jsxs("div",{className:"CommentPlugin_CommentsPanel_List_Thread_QuoteBox",children:[F.jsxs("blockquote",{className:"CommentPlugin_CommentsPanel_List_Thread_Quote",children:["> ",F.jsx("span",{children:d.quote})]}),F.jsx(ti,{onClick:()=>{c("Delete Thread",p=>F.jsx(Hb,{commentOrThread:d,deleteCommentOrThread:t,onClose:p}))},className:"CommentPlugin_CommentsPanel_List_DeleteButton",children:F.jsx("i",{className:"delete"})}),u]}),F.jsx("ul",{className:"CommentPlugin_CommentsPanel_List_Thread_Comments",children:d.comments.map(p=>F.jsx(_g,{comment:p,deleteComment:t,thread:d,rtf:f},p.id))}),F.jsx("div",{className:"CommentPlugin_CommentsPanel_List_Thread_Editor",children:F.jsx(jT,{submitAddComment:i,thread:d,placeholder:"Reply to comment..."})})]},h):F.jsx(_g,{comment:d,deleteComment:t,rtf:f},h)})})}function zT({activeIDs:r,deleteCommentOrThread:e,comments:t,submitAddComment:n,markNodeMap:i}){const s=T.useRef(null),o=t.length===0;return F.jsxs("div",{className:"CommentPlugin_CommentsPanel",children:[F.jsx("h2",{className:"CommentPlugin_CommentsPanel_Heading",children:"Comments"}),o?F.jsx("div",{className:"CommentPlugin_CommentsPanel_Empty",children:"No Comments"}):F.jsx(UT,{activeIDs:r,comments:t,deleteCommentOrThread:e,listRef:s,submitAddComment:n,markNodeMap:i})]})}function Wb(){const r=$b(),{yjsDocMap:e,name:t}=r;return e.has("comments")?t:"Scripture User"}function HT({providerFactory:r,setCommentStore:e,onChange:t,showCommentsContainerRef:n,commentContainerRef:i,logger:s}){const o=$b(),[a]=Ee(),l=T.useMemo(()=>{const N=new NT(a,s);return t&&N.registerOnChange(t),e==null||e(N),N},[a,s,t,e]),u=MT(l),c=T.useMemo(()=>new Map,[]),[f,d]=T.useState(),[h,p]=T.useState([]),[m,_]=T.useState(!1),[C,v]=T.useState(!1),{yjsDocMap:k}=o;T.useEffect(()=>{if(r){const N=r("comments",k);return l.registerCollaboration(N)}return()=>{}},[l,r,k]);const M=T.useCallback(()=>{a.update(()=>{const N=re();N!==null&&(N.dirty=!0)}),_(!1)},[a]),P=T.useCallback((N,I)=>{if(N.type==="comment"){const W=l.deleteCommentOrThread(N,I);if(!W)return;const{markedComment:w,index:q}=W;l.addComment(w,I,q)}else{l.deleteCommentOrThread(N);const W=I!==void 0?I.id:N.id,w=c.get(W);w!==void 0&&setTimeout(()=>{a.update(()=>{for(const q of w){const S=Ae(q);Nt(S)&&(S.deleteID(Un,W),S.hasNoIDsForEveryType()&&M_(S))}})})}},[l,a,c]),x=T.useCallback((N,I,W,w)=>{l.addComment(N,W),I&&(a.update(()=>{G(w)&&O_(w,Un,N.id)}),_(!1))},[l,a]);T.useEffect(()=>{const N=[];for(const I of h){const W=c.get(I);if(W!==void 0)for(const w of W){const q=a.getElementByKey(w);q!==null&&(q.classList.add("selected"),N.push(q),v(!0))}}return()=>{for(const I of N)I.classList.remove("selected")}},[h,a,c]),T.useEffect(()=>{if(!a.hasNodes([At]))throw new Error("CommentPlugin: TypedMarkNode not registered on editor!");const N=new Map;return _t(fy(a,At,I=>xo(I.getTypedIDs()),(I,W)=>{for(const[w,q]of Object.entries(I.getTypedIDs()))q.forEach(S=>{W.addID(w,S)})}),a.registerMutationListener(At,I=>{a.getEditorState().read(()=>{for(const[W,w]of I){const q=Ae(W);let S=[];w==="destroyed"?S=N.get(W)??[]:Nt(q)&&(S=q.getTypedIDs()[Un]??[]);for(const K of S){let A=c.get(K);N.set(W,S),w==="destroyed"?A!==void 0&&(A.delete(W),A.size===0&&c.delete(K)):(A===void 0&&(A=new Set,c.set(K,A)),A.has(W)||A.add(W))}}})},{skipInitialization:!1}),a.registerUpdateListener(({editorState:I,tags:W})=>{I.read(()=>{const w=re();let q=!1,S=!1;if(G(w)){const K=w.anchor.getNode();if(ee(K)){const A=Iw(K,Un,w.anchor.offset)??[];A!==null&&(p(A),q=!0),w.isCollapsed()||(d(K.getKey()),S=!0)}}q||p(K=>K.length===0?K:[]),S||d(null),!W.has("collaboration")&&G(w)&&_(!1)})}),a.registerCommand(yg,()=>{const I=window.getSelection();return I!==null&&I.removeAllRanges(),_(!0),!0},ye))},[a,c]);const O=()=>{a.dispatchCommand(yg,void 0)};return F.jsxs(F.Fragment,{children:[m&&Tr.createPortal(F.jsx(qT,{editor:a,cancelAddComment:M,submitAddComment:x}),document.body),f!=null&&!m&&Tr.createPortal(F.jsx($T,{anchorKey:f,editor:a,showComments:C,onAddComment:O}),document.body),n!==null&&Tr.createPortal(F.jsx(ti,{className:`CommentPlugin_ShowCommentsButton ${C?"active":""}`,onClick:()=>v(!C),title:C?"Hide Comments":"Show Comments",children:F.jsx("i",{className:"comments"})}),(n==null?void 0:n.current)??document.body),C&&Tr.createPortal(F.jsx(zT,{comments:u,submitAddComment:x,deleteCommentOrThread:P,activeIDs:h,markNodeMap:c}),(i==null?void 0:i.current)??document.body)]})}function WT(){const r=T.useRef(void 0),e=T.useCallback(t=>{r.current=t},[]);return[r,e]}function KT(r,e){var t,n;const i=((t=e.current)==null?void 0:t.getComments())??[],s=i==null?void 0:i.map(a=>a.id),o=r.map(a=>{const l=s.findIndex(u=>u===a);return l!==void 0&&l>=0?i[l]:{comments:[{author:"unknown",content:"Comment not found",deleted:!1,id:"",timeStamp:0,type:"comment"}],id:a,quote:"",type:"thread"}});i.forEach(a=>{r.includes(a.id)||o.push(a)}),o&&((n=e.current)==null||n.setComments(o))}function VT(r,e){T.useEffect(()=>{var t;r.options??(r.options={}),(t=r.options).nodes??(t.nodes={}),r.options.nodes.addMissingComments=n=>{KT(n,e)}},[e,r])}T.forwardRef(function(r,e){const t=T.useRef(null),n=T.useRef(!0),i=T.useRef(null),[s,o]=T.useState(null),{children:a,onCommentChange:l,onUsjChange:u,...c}=r,{options:{isReadonly:f}={}}=r,[d,h]=WT();VT(c,d),T.useImperativeHandle(e,()=>({focus(){var _;(_=t.current)==null||_.focus()},getUsj(){var _;return(_=t.current)==null?void 0:_.getUsj()},setUsj(_){var C;(C=t.current)==null||C.setUsj(_)},applyUpdate(_,C){var v;(v=t.current)==null||v.applyUpdate(_,C)},getSelection(){var _;return(_=t.current)==null?void 0:_.getSelection()},setSelection(_){var C;(C=t.current)==null||C.setSelection(_)},addAnnotation(_,C,v){var k;(k=t.current)==null||k.addAnnotation(_,C,v)},removeAnnotation(_,C){var v;(v=t.current)==null||v.removeAnnotation(_,C)},setComments(_){var C;(C=d.current)==null||C.setComments(_),n.current=!0},get toolbarEndRef(){return s}}));const p=T.useCallback((_,C,v)=>{var k;if(!u)return;const M=(k=d.current)==null?void 0:k.getComments();u(_,M,C,v)},[d,u]),m=T.useCallback(()=>{var _;if(!l||n.current){n.current=!1;return}const C=(_=d.current)==null?void 0:_.getComments();l(C)},[d,n,l]);return T.useEffect(()=>{var _;return o(((_=t.current)==null?void 0:_.toolbarEndRef)??null),()=>o(null)},[]),F.jsxs(Pb,{ref:t,onUsjChange:p,...c,children:[F.jsx(HT,{setCommentStore:h,onChange:m,showCommentsContainerRef:f?null:s,commentContainerRef:i,logger:c.logger}),F.jsx("div",{ref:i,className:"comment-container"})]})});const JT='<usx version="3.1" />',Ho=`<?xml version="1.0" encoding="utf-8"?>
<usx version="3.1">
  <book code="PSA" style="id">World English Bible (WEB)</book>
  <para style="mt1">The Psalms</para>
  <chapter number="1" style="c" sid="PSA 1" />
  <para style="q1">
    <verse number="1" style="v" sid="PSA 1:1" />Blessed is the man<note caller="+" style="f"><char style="fr">1:1 </char><char style="ft">Or "person"</char></note> who doesn’t walk in the counsel of the wicked,</para>
  <para style="q2" vid="PSA 1:1">nor stand on the path<note caller="+" style="f"><char style="fr">1:1 </char><char style="ft">Hebrew: "way"</char></note> of sinners,</para>
  <para style="q2" vid="PSA 1:1">nor sit in the seat of scoffers;<verse eid="PSA 1:1" /></para>
</usx>
`,GT={start:{jsonPath:"$.content[3].content[1]",offset:15},end:{jsonPath:"$.content[3].content[1]",offset:18}},YT={start:{jsonPath:"$.content[3].content[1]",offset:15},end:{jsonPath:"$.content[3].content[1]",offset:22}},Bi={book:"PSA",chapterNum:1,verseNum:1},XT={nodes:{noteCallers:["①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩"],noteCallerOnClick:r=>{console.log("Note caller clicked:",r),alert("Note caller clicked! Check console for details.")}}},fA={title:"Demo/Editorial",component:Fb,tags:["autodocs"],parameters:{docs:{description:{component:`
**Demo Only:** This component is provided for demonstration purposes only. For production applications, developers should import the Scripture Editor component directly from:
- npm [@eten-tech-foundation/platform-editor](https://www.npmjs.com/package/@eten-tech-foundation/platform-editor)
- github [@eten-tech-foundation/platform-editor](https://github.com/eten-tech-foundation/scripture-editors/tree/main/packages/platform)

This demo version is included in Storybook to showcase the component's functionality and usage patterns.

**Known Limitation:** In the Docs view, all story examples may show the same note caller style due to global state management in the editor component. To see the correct note caller behavior for each story (default lowercase letters vs custom symbols), please view the individual stories in the Canvas view instead of the Docs view.
        `}}},argTypes:{ref:{control:"object",description:"Reference to the editor instance",defaultValue:null},defaultUsj:{control:"object",description:"Default USJ object to initialize the editor with",defaultValue:{type:Ti,version:Ai,content:[""]}},scrRef:{control:"object",description:"Scripture reference",defaultValue:Bi},options:{control:"object",description:"Options to configure the editor (EditorOptions)",defaultValue:{},table:{type:{summary:"EditorOptions",detail:'{ isReadonly?: boolean; hasSpellCheck?: boolean; textDirection?: "ltr" | "rtl" | "auto"; markerMenuTrigger?: string; nodes?: UsjNodeOptions; }'}}}}},va={args:{defaultUsj:Ns(Ho),scrRef:Bi}},Ca={args:{defaultUsj:Ns(JT),scrRef:Bi}},Ea={args:{defaultUsj:Ns(Ho),scrRef:Bi,options:{isReadonly:!0}}},wa={render:r=>{const e=T.useRef(null);return T.useEffect(()=>{e.current&&(e.current.addAnnotation(GT,"spelling","annotationId"),e.current.addAnnotation(YT,"grammar","abc123"))},[]),F.jsx(Fb,{...r,ref:e})},args:{defaultUsj:Ns(Ho),scrRef:Bi}},ka={parameters:{docs:{description:{story:"This story demonstrates custom note callers and click handling. **Try clicking on the circled number footnote markers (① ②) in the text to see the click handler in action!** The click event will show an alert and log details to the browser console."}}},args:{defaultUsj:Ns(Ho),scrRef:Bi,options:XT}},xa={parameters:{docs:{description:{story:'This story demonstrates using a custom marker menu trigger key. **Try typing "?" (question mark) anywhere in the editor text to open the marker menu!** The default trigger is "\\\\" (backslash), but this story changes it to "?" for demonstration. The marker menu allows you to insert USFM markers into the text.'}}},args:{defaultUsj:Ns(Ho),scrRef:Bi,options:{markerMenuTrigger:"?"}}};var bg,vg,Cg;va.parameters={...va.parameters,docs:{...(bg=va.parameters)==null?void 0:bg.docs,source:{originalSource:`{
  args: {
    defaultUsj: usxStringToUsj(usx),
    scrRef: defaultScrRef
  }
}`,...(Cg=(vg=va.parameters)==null?void 0:vg.docs)==null?void 0:Cg.source}}};var Eg,wg,kg;Ca.parameters={...Ca.parameters,docs:{...(Eg=Ca.parameters)==null?void 0:Eg.docs,source:{originalSource:`{
  args: {
    defaultUsj: usxStringToUsj(emptyUsx),
    scrRef: defaultScrRef
  }
}`,...(kg=(wg=Ca.parameters)==null?void 0:wg.docs)==null?void 0:kg.source}}};var xg,Sg,Tg;Ea.parameters={...Ea.parameters,docs:{...(xg=Ea.parameters)==null?void 0:xg.docs,source:{originalSource:`{
  args: {
    defaultUsj: usxStringToUsj(usx),
    scrRef: defaultScrRef,
    options: {
      isReadonly: true
    }
  }
}`,...(Tg=(Sg=Ea.parameters)==null?void 0:Sg.docs)==null?void 0:Tg.source}}};var Ag,Dg,Ng;wa.parameters={...wa.parameters,docs:{...(Ag=wa.parameters)==null?void 0:Ag.docs,source:{originalSource:`{
  render: args => {
    // eslint-disable-next-line no-null/no-null
    const editorRef = useRef<EditorRef | null>(null);
    useEffect(() => {
      if (editorRef.current) {
        editorRef.current.addAnnotation(annotationRange1, 'spelling', 'annotationId');
        editorRef.current.addAnnotation(annotationRange2, 'grammar', 'abc123');
      }
    }, []);
    return <Editorial {...args} ref={editorRef} />;
  },
  args: {
    defaultUsj: usxStringToUsj(usx),
    scrRef: defaultScrRef
  }
}`,...(Ng=(Dg=wa.parameters)==null?void 0:Dg.docs)==null?void 0:Ng.source}}};var Mg,Og,Ig;ka.parameters={...ka.parameters,docs:{...(Mg=ka.parameters)==null?void 0:Mg.docs,source:{originalSource:`{
  parameters: {
    docs: {
      description: {
        story: 'This story demonstrates custom note callers and click handling. **Try clicking on the circled number footnote markers (① ②) in the text to see the click handler in action!** The click event will show an alert and log details to the browser console.'
      }
    }
  },
  args: {
    defaultUsj: usxStringToUsj(usx),
    scrRef: defaultScrRef,
    options: customNodeOptions
  }
}`,...(Ig=(Og=ka.parameters)==null?void 0:Og.docs)==null?void 0:Ig.source}}};var Rg,Lg,Pg;xa.parameters={...xa.parameters,docs:{...(Rg=xa.parameters)==null?void 0:Rg.docs,source:{originalSource:`{
  parameters: {
    docs: {
      description: {
        story: 'This story demonstrates using a custom marker menu trigger key. **Try typing "?" (question mark) anywhere in the editor text to open the marker menu!** The default trigger is "\\\\\\\\" (backslash), but this story changes it to "?" for demonstration. The marker menu allows you to insert USFM markers into the text.'
      }
    }
  },
  args: {
    defaultUsj: usxStringToUsj(usx),
    scrRef: defaultScrRef,
    options: {
      markerMenuTrigger: '?'
    }
  }
}`,...(Pg=(Lg=xa.parameters)==null?void 0:Lg.docs)==null?void 0:Pg.source}}};const hA=["Default","Empty","ReadOnly","Annotated","CustomNoteOptions","CustomMarkerTrigger"];export{wa as Annotated,xa as CustomMarkerTrigger,ka as CustomNoteOptions,va as Default,Ca as Empty,Ea as ReadOnly,hA as __namedExportsOrder,fA as default};
