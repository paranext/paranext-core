import{j as i}from"./jsx-runtime-DjwPZ1qe.js";import{N as S,z as j,q,D as N,x as P,o as c,h as g,V as f,P as m,_ as F,C as R,T as I,a as z,b as M,c as $,d as B,X as H,f as D,n as V,H as O,m as A,w as L,W as U,g as J}from"./LexicalTable.prod-C5l2E4TD.js";import{a as G}from"./tooltip-aptYAQSK.js";import{r as l}from"./iframe-mszaHKTI.js";import{D as W,b as X,c as K,d as Q}from"./dialog-DdqW681A.js";import{T as Y,a as Z}from"./toggle-group-BUogx3ji.js";import{B as tt,I as et,U as rt}from"./underline-Cj2ee2xv.js";import{c as ot}from"./createLucideIcon-B1igjBw4.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],nt=ot("Strikethrough",it),w={ltr:"tw-text-left",rtl:"tw-text-right",heading:{h1:"tw-scroll-m-20 tw-text-4xl tw-font-extrabold tw-tracking-tight lg:tw-text-5xl",h2:"tw-scroll-m-20 tw-border-b tw-pb-2 tw-text-3xl tw-font-semibold tw-tracking-tight first:tw-mt-0",h3:"tw-scroll-m-20 tw-text-2xl tw-font-semibold tw-tracking-tight",h4:"tw-scroll-m-20 tw-text-xl tw-font-semibold tw-tracking-tight",h5:"tw-scroll-m-20 tw-text-lg tw-font-semibold tw-tracking-tight",h6:"tw-scroll-m-20 tw-text-base tw-font-semibold tw-tracking-tight"},paragraph:"tw-outline-none",quote:"tw-mt-6 tw-border-l-2 tw-pl-6 tw-italic",link:"tw-text-blue-600 hover:tw-underline hover:tw-cursor-pointer",list:{checklist:"tw-relative",listitem:"tw-mx-8",listitemChecked:'tw-relative tw-mx-2 tw-px-6 tw-list-none tw-outline-none tw-line-through before:tw-content-[""] before:tw-w-4 before:tw-h-4 before:tw-top-0.5 before:tw-left-0 before:tw-cursor-pointer before:tw-block before:tw-bg-cover before:tw-absolute before:tw-border before:tw-border-primary before:tw-rounded before:tw-bg-primary before:tw-bg-no-repeat after:tw-content-[""] after:tw-cursor-pointer after:tw-border-white after:tw-border-solid after:tw-absolute after:tw-block after:tw-top-[6px] after:tw-w-[3px] after:tw-left-[7px] after:tw-right-[7px] after:tw-h-[6px] after:tw-rotate-45 after:tw-border-r-2 after:tw-border-b-2 after:tw-border-l-0 after:tw-border-t-0',listitemUnchecked:'tw-relative tw-mx-2 tw-px-6 tw-list-none tw-outline-none before:tw-content-[""] before:tw-w-4 before:tw-h-4 before:tw-top-0.5 before:tw-left-0 before:tw-cursor-pointer before:tw-block before:tw-bg-cover before:tw-absolute before:tw-border before:tw-border-primary before:tw-rounded',nested:{listitem:"tw-list-none before:tw-hidden after:tw-hidden"},ol:"tw-m-0 tw-p-0 tw-list-decimal [&>li]:tw-mt-2",olDepth:["tw-list-outside !tw-list-decimal","tw-list-outside !tw-list-[upper-roman]","tw-list-outside !tw-list-[lower-roman]","tw-list-outside !tw-list-[upper-alpha]","tw-list-outside !tw-list-[lower-alpha]"],ul:"tw-m-0 tw-p-0 tw-list-outside [&>li]:tw-mt-2",ulDepth:["tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc"]},hashtag:"tw-text-blue-600 tw-bg-blue-100 tw-rounded-md tw-px-1",text:{bold:"tw-font-bold",code:"tw-bg-gray-100 tw-p-1 tw-rounded-md",italic:"tw-italic",strikethrough:"tw-line-through",subscript:"tw-sub",superscript:"tw-sup",underline:"tw-underline",underlineStrikethrough:"tw-underline tw-line-through"},image:"tw-relative tw-inline-block tw-user-select-none tw-cursor-default editor-image",inlineImage:"tw-relative tw-inline-block tw-user-select-none tw-cursor-default inline-editor-image",keyword:"tw-text-purple-900 tw-font-bold",code:"EditorTheme__code",codeHighlight:{atrule:"EditorTheme__tokenAttr",attr:"EditorTheme__tokenAttr",boolean:"EditorTheme__tokenProperty",builtin:"EditorTheme__tokenSelector",cdata:"EditorTheme__tokenComment",char:"EditorTheme__tokenSelector",class:"EditorTheme__tokenFunction","class-name":"EditorTheme__tokenFunction",comment:"EditorTheme__tokenComment",constant:"EditorTheme__tokenProperty",deleted:"EditorTheme__tokenProperty",doctype:"EditorTheme__tokenComment",entity:"EditorTheme__tokenOperator",function:"EditorTheme__tokenFunction",important:"EditorTheme__tokenVariable",inserted:"EditorTheme__tokenSelector",keyword:"EditorTheme__tokenAttr",namespace:"EditorTheme__tokenVariable",number:"EditorTheme__tokenProperty",operator:"EditorTheme__tokenOperator",prolog:"EditorTheme__tokenComment",property:"EditorTheme__tokenProperty",punctuation:"EditorTheme__tokenPunctuation",regex:"EditorTheme__tokenVariable",selector:"EditorTheme__tokenSelector",string:"EditorTheme__tokenSelector",symbol:"EditorTheme__tokenProperty",tag:"EditorTheme__tokenProperty",url:"EditorTheme__tokenOperator",variable:"EditorTheme__tokenVariable"},characterLimit:"!tw-bg-destructive/50",table:"EditorTheme__table tw-w-fit tw-overflow-scroll tw-border-collapse",tableCell:"EditorTheme__tableCell tw-w-24 tw-relative tw-border tw-px-4 tw-py-2 tw-text-left [&[align=center]]:tw-text-center [&[align=right]]:tw-text-right",tableCellActionButton:"EditorTheme__tableCellActionButton tw-bg-background tw-block tw-border-0 tw-rounded-2xl tw-w-5 tw-h-5 tw-text-foreground tw-cursor-pointer",tableCellActionButtonContainer:"EditorTheme__tableCellActionButtonContainer tw-block tw-right-1 tw-top-1.5 tw-absolute tw-z-10 tw-w-5 tw-h-5",tableCellEditing:"EditorTheme__tableCellEditing tw-rounded-sm tw-shadow-sm",tableCellHeader:"EditorTheme__tableCellHeader tw-bg-muted tw-border tw-px-4 tw-py-2 tw-text-left tw-font-bold [&[align=center]]:tw-text-center [&[align=right]]:tw-text-right",tableCellPrimarySelected:"EditorTheme__tableCellPrimarySelected tw-border tw-border-primary tw-border-solid tw-block tw-h-[calc(100%-2px)] tw-w-[calc(100%-2px)] tw-absolute tw--left-[1px] tw--top-[1px] tw-z-10 ",tableCellResizer:"EditorTheme__tableCellResizer tw-absolute tw--right-1 tw-h-full tw-w-2 tw-cursor-ew-resize tw-z-10 tw-top-0",tableCellSelected:"EditorTheme__tableCellSelected tw-bg-muted",tableCellSortedIndicator:"EditorTheme__tableCellSortedIndicator tw-block tw-opacity-50 tw-absolute tw-bottom-0 tw-left-0 tw-w-full tw-h-1 tw-bg-muted",tableResizeRuler:"EditorTheme__tableCellResizeRuler tw-block tw-absolute tw-w-[1px] tw-h-full tw-bg-primary tw-top-0",tableRowStriping:"EditorTheme__tableRowStriping tw-m-0 tw-border-t tw-p-0 even:tw-bg-muted",tableSelected:"EditorTheme__tableSelected tw-ring-2 tw-ring-primary tw-ring-offset-2",tableSelection:"EditorTheme__tableSelection tw-bg-transparent",layoutItem:"tw-border tw-border-dashed tw-px-4 tw-py-2",layoutContainer:"tw-grid tw-gap-2.5 tw-my-2.5 tw-mx-0",autocomplete:"tw-text-muted-foreground",blockCursor:"",embedBlock:{base:"tw-user-select-none",focus:"tw-ring-2 tw-ring-primary tw-ring-offset-2"},hr:'tw-p-0.5 tw-border-none tw-my-1 tw-mx-0 tw-cursor-pointer after:tw-content-[""] after:tw-block after:tw-h-0.5 after:tw-bg-muted selected:tw-ring-2 selected:tw-ring-primary selected:tw-ring-offset-2 selected:tw-user-select-none',indent:"[--lexical-indent-base-value:40px]",mark:"",markOverlap:""},u=[S,j,q,N];function h({placeholder:t,className:r,placeholderClassName:e}){return i.jsx(P,{className:r??"ContentEditable__root tw-relative tw-block tw-min-h-11 tw-overflow-auto tw-px-3 tw-py-3 tw-text-sm tw-outline-none","aria-placeholder":t,placeholder:i.jsx("div",{className:e??"tw-pointer-events-none tw-absolute tw-left-0 tw-top-0 tw-select-none tw-overflow-hidden tw-text-ellipsis tw-px-3 tw-py-3 tw-text-sm tw-text-muted-foreground",children:t})})}h.__docgenInfo={description:"",methods:[],displayName:"ContentEditable",props:{placeholder:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}}};const b=l.createContext(void 0);function y({activeEditor:t,$updateToolbar:r,blockType:e,setBlockType:o,showModal:n,children:a}){const s=l.useMemo(()=>({activeEditor:t,$updateToolbar:r,blockType:e,setBlockType:o,showModal:n}),[t,r,e,o,n]);return i.jsx(b.Provider,{value:s,children:a})}function _(){const t=l.useContext(b);if(!t)throw new Error("useToolbarContext must be used within a ToolbarContext provider");return t}y.__docgenInfo={description:"",methods:[],displayName:"ToolbarContext",props:{activeEditor:{required:!0,tsType:{name:"LexicalEditor"},description:""},$updateToolbar:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},blockType:{required:!0,tsType:{name:"string"},description:""},setBlockType:{required:!0,tsType:{name:"signature",type:"function",raw:"(blockType: string) => void",signature:{arguments:[{type:{name:"string"},name:"blockType"}],return:{name:"void"}}},description:""},showModal:{required:!0,tsType:{name:"signature",type:"function",raw:"(title: string, showModal: (onClose: () => void) => ReactNode) => void",signature:{arguments:[{type:{name:"string"},name:"title"},{type:{name:"signature",type:"function",raw:"(onClose: () => void) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"onClose"}],return:{name:"ReactNode"}}},name:"showModal"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};function at(){const[t,r]=l.useState(void 0),e=l.useCallback(()=>{r(void 0)},[]),o=l.useMemo(()=>{if(t===void 0)return;const{title:a,content:s}=t;return i.jsx(W,{open:!0,onOpenChange:e,children:i.jsxs(X,{children:[i.jsx(K,{children:i.jsx(Q,{children:a})}),s]})})},[t,e]),n=l.useCallback((a,s,d=!1)=>{r({closeOnClickOutside:d,content:s(e),title:a})},[e]);return[o,n]}function x({children:t}){const[r]=c(),[e,o]=l.useState(r),[n,a]=l.useState("paragraph"),[s,d]=at(),v=()=>{};return l.useEffect(()=>e.registerCommand(g,(wt,C)=>(o(C),!1),f),[e]),i.jsxs(y,{activeEditor:e,$updateToolbar:v,blockType:n,setBlockType:a,showModal:d,children:[s,t({blockType:n})]})}x.__docgenInfo={description:"",methods:[],displayName:"ToolbarPlugin",props:{children:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: { blockType: string }) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ blockType: string }",signature:{properties:[{key:"blockType",value:{name:"string",required:!0}}]}},name:"props"}],return:{name:"ReactNode"}}},description:""}}};function st(t){const[r]=c(),{activeEditor:e}=_();l.useEffect(()=>e.registerCommand(g,()=>{const o=m();return o&&t(o),!1},f),[r,t]),l.useEffect(()=>{e.getEditorState().read(()=>{const o=m();o&&t(o)})},[e,t])}const p=[{format:"bold",icon:tt,label:"Bold"},{format:"italic",icon:et,label:"Italic"},{format:"underline",icon:rt,label:"Underline"},{format:"strikethrough",icon:nt,label:"Strikethrough"}];function E(){const{activeEditor:t}=_(),[r,e]=l.useState([]),o=l.useCallback(n=>{if(F(n)||R(n)){const a=[];p.forEach(({format:s})=>{n.hasFormat(s)&&a.push(s)}),e(s=>s.length!==a.length||!a.every(d=>s.includes(d))?a:s)}},[]);return st(o),i.jsx(Y,{type:"multiple",value:r,onValueChange:e,variant:"outline",size:"sm",children:p.map(({format:n,icon:a,label:s})=>i.jsx(Z,{value:n,"aria-label":s,onClick:()=>{t.dispatchCommand(I,n)},children:i.jsx(a,{className:"tw-h-4 tw-w-4"})},n))})}E.__docgenInfo={description:"",methods:[],displayName:"FontFormatToolbarPlugin"};function lt({onClear:t}){const[r]=c();l.useEffect(()=>{t&&t(()=>{r.dispatchCommand(H,void 0)})},[r,t])}function T({placeholder:t="Start typing ...",autoFocus:r=!1,onClear:e}){const[,o]=l.useState(void 0),n=a=>{a!==void 0&&o(a)};return i.jsxs("div",{className:"tw-relative",children:[i.jsx(x,{children:()=>i.jsx("div",{className:"tw-sticky tw-top-0 tw-z-10 tw-flex tw-gap-2 tw-overflow-auto tw-border-b tw-p-1",children:i.jsx(E,{})})}),i.jsxs("div",{className:"tw-relative",children:[i.jsx(z,{contentEditable:i.jsx("div",{ref:n,children:i.jsx(h,{placeholder:t})}),ErrorBoundary:M}),r&&i.jsx($,{defaultSelection:"rootEnd"}),i.jsx(lt,{onClear:e}),i.jsx(B,{})]})]})}T.__docgenInfo={description:"",methods:[],displayName:"Plugins",props:{placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Start typing ...'",computed:!1}},autoFocus:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"(clearFn: () => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"clearFn"}],return:{name:"void"}}},description:""}}};const dt={namespace:"commentEditor",theme:w,nodes:u,onError:t=>{console.error(t)}};function ct({editorState:t,editorSerializedState:r,onChange:e,onSerializedChange:o,placeholder:n="Start typing…",autoFocus:a=!1,onClear:s}){return i.jsx("div",{className:"pr-twp tw-overflow-hidden tw-rounded-lg tw-border tw-bg-background tw-shadow",children:i.jsx(D,{initialConfig:{...dt,...t?{editorState:t}:{},...r?{editorState:JSON.stringify(r)}:{}},children:i.jsxs(G,{children:[i.jsx(T,{placeholder:n,autoFocus:a,onClear:s}),i.jsx(V,{ignoreSelectionChange:!0,onChange:d=>{e==null||e(d),o==null||o(d.toJSON())}})]})})})}ct.__docgenInfo={description:`Shadcn UI based Lexical Editor component

Documentation: https://shadcn-editor.vercel.app/docs/`,methods:[],displayName:"Editor",props:{editorState:{required:!1,tsType:{name:"EditorState"},description:""},editorSerializedState:{required:!1,tsType:{name:"SerializedEditorState"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(editorState: EditorState) => void",signature:{arguments:[{type:{name:"EditorState"},name:"editorState"}],return:{name:"void"}}},description:""},onSerializedChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(editorSerializedState: SerializedEditorState) => void",signature:{arguments:[{type:{name:"SerializedEditorState"},name:"editorSerializedState"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Start typing…'",computed:!1}},autoFocus:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"(clearFn: () => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"clearFn"}],return:{name:"void"}}},description:""}}};function k(t){const r=O(t);return r._headless=!0,["registerDecoratorListener","registerRootListener","registerMutationListener","getRootElement","setRootElement","getElementByKey","focus","blur"].forEach(e=>{r[e]=()=>{throw new Error(`${e} is not supported in headless mode`)}}),r}function _t(t){var r;return(r=t==null?void 0:t.root)!=null&&r.children?t.root.children.some(e=>e!=null&&e.children?e.children.some(o=>(o==null?void 0:o.text)&&o.text.trim().length>0):!1):!1}function xt(t){if(t.trim()==="")throw new Error("Input HTML is empty");const r=t.replace(/<strikethrough>([\s\S]*?)<\/strikethrough>/gi,"<s>$1</s>").replace(/<color[^>]*>([\s\S]*?)<\/color>/gi,"$1").replace(/<language[^>]*>([\s\S]*?)<\/language>/gi,"$1"),e=k({namespace:"EditorUtils",theme:w,nodes:u,onError:n=>{console.error(n)}});let o;if(e.update(()=>{const a=new DOMParser().parseFromString(r,"text/html"),s=A(e,a);L().clear(),U(s)},{discrete:!0}),e.getEditorState().read(()=>{o=e.getEditorState().toJSON()}),!o)throw new Error("Failed to convert HTML to editor state");return o}function Et(t){const r=k({namespace:"EditorUtils",theme:w,nodes:u,onError:n=>{console.error(n)}}),e=r.parseEditorState(JSON.stringify(t));r.setEditorState(e);let o="";return r.getEditorState().read(()=>{o=J(r)}),o=o.replace(/\s+style="[^"]*"/g,"").replace(/\s+class="[^"]*"/g,"").replace(/<span>(.*?)<\/span>/g,"$1").replace(/<b><strong[^>]*>(.*?)<\/strong><\/b>/g,"<b>$1</b>").replace(/<strong><b[^>]*>(.*?)<\/b><\/strong>/g,"<b>$1</b>").replace(/<i><em[^>]*>(.*?)<\/em><\/i>/g,"<i>$1</i>").replace(/<em><i[^>]*>(.*?)<\/i><\/em>/g,"<i>$1</i>").replace(/<u><span[^>]*>(.*?)<\/span><\/u>/g,"<u>$1</u>").replace(/<s><span[^>]*>(.*?)<\/span><\/s>/g,"<s>$1</s>").replace(/<s>(.*?)<\/s>/g,"<strikethrough>$1</strikethrough>"),o}export{ct as E,_t as a,Et as e,xt as h};
