import{j as n}from"./jsx-runtime-BbhWLeVR.js";import{P as j,D as N,X as q,E as R,x as P,o as u,i as g,W as b,L as p,y as F,w as I,_ as A,a as M,n as $,b as z,r as B,J as D,f as L,c as H,$ as O,g as V,m as U,N as J,j as K}from"./LexicalTable.prod-Bhr0p_df.js";import{a as G}from"./tooltip-8zIserIx.js";import{c as W}from"./shadcn-ui.util-DMJ19wEV.js";import{r as l}from"./iframe-D_JBJic_.js";import{D as X,b as Q,c as Y,d as Z}from"./dialog-DUGkjLf-.js";import{T as ee,a as te}from"./toggle-group-CCCYf6b1.js";import{B as re,I as oe,U as ne}from"./underline-B1itUk12.js";import{c as ie}from"./createLucideIcon-CjJu5wqM.js";const w={ltr:"tw-text-left",rtl:"tw-text-right",heading:{h1:"tw-scroll-m-20 tw-text-4xl tw-font-extrabold tw-tracking-tight lg:tw-text-5xl",h2:"tw-scroll-m-20 tw-border-b tw-pb-2 tw-text-3xl tw-font-semibold tw-tracking-tight first:tw-mt-0",h3:"tw-scroll-m-20 tw-text-2xl tw-font-semibold tw-tracking-tight",h4:"tw-scroll-m-20 tw-text-xl tw-font-semibold tw-tracking-tight",h5:"tw-scroll-m-20 tw-text-lg tw-font-semibold tw-tracking-tight",h6:"tw-scroll-m-20 tw-text-base tw-font-semibold tw-tracking-tight"},paragraph:"tw-outline-none",quote:"tw-mt-6 tw-border-l-2 tw-pl-6 tw-italic",link:"tw-text-blue-600 hover:tw-underline hover:tw-cursor-pointer",list:{checklist:"tw-relative",listitem:"tw-mx-8",listitemChecked:'tw-relative tw-mx-2 tw-px-6 tw-list-none tw-outline-none tw-line-through before:tw-content-[""] before:tw-w-4 before:tw-h-4 before:tw-top-0.5 before:tw-left-0 before:tw-cursor-pointer before:tw-block before:tw-bg-cover before:tw-absolute before:tw-border before:tw-border-primary before:tw-rounded before:tw-bg-primary before:tw-bg-no-repeat after:tw-content-[""] after:tw-cursor-pointer after:tw-border-white after:tw-border-solid after:tw-absolute after:tw-block after:tw-top-[6px] after:tw-w-[3px] after:tw-left-[7px] after:tw-right-[7px] after:tw-h-[6px] after:tw-rotate-45 after:tw-border-r-2 after:tw-border-b-2 after:tw-border-l-0 after:tw-border-t-0',listitemUnchecked:'tw-relative tw-mx-2 tw-px-6 tw-list-none tw-outline-none before:tw-content-[""] before:tw-w-4 before:tw-h-4 before:tw-top-0.5 before:tw-left-0 before:tw-cursor-pointer before:tw-block before:tw-bg-cover before:tw-absolute before:tw-border before:tw-border-primary before:tw-rounded',nested:{listitem:"tw-list-none before:tw-hidden after:tw-hidden"},ol:"tw-m-0 tw-p-0 tw-list-decimal [&>li]:tw-mt-2",olDepth:["tw-list-outside !tw-list-decimal","tw-list-outside !tw-list-[upper-roman]","tw-list-outside !tw-list-[lower-roman]","tw-list-outside !tw-list-[upper-alpha]","tw-list-outside !tw-list-[lower-alpha]"],ul:"tw-m-0 tw-p-0 tw-list-outside [&>li]:tw-mt-2",ulDepth:["tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc"]},hashtag:"tw-text-blue-600 tw-bg-blue-100 tw-rounded-md tw-px-1",text:{bold:"tw-font-bold",code:"tw-bg-gray-100 tw-p-1 tw-rounded-md",italic:"tw-italic",strikethrough:"tw-line-through",subscript:"tw-sub",superscript:"tw-sup",underline:"tw-underline",underlineStrikethrough:"tw-underline tw-line-through"},image:"tw-relative tw-inline-block tw-user-select-none tw-cursor-default editor-image",inlineImage:"tw-relative tw-inline-block tw-user-select-none tw-cursor-default inline-editor-image",keyword:"tw-text-purple-900 tw-font-bold",code:"EditorTheme__code",codeHighlight:{atrule:"EditorTheme__tokenAttr",attr:"EditorTheme__tokenAttr",boolean:"EditorTheme__tokenProperty",builtin:"EditorTheme__tokenSelector",cdata:"EditorTheme__tokenComment",char:"EditorTheme__tokenSelector",class:"EditorTheme__tokenFunction","class-name":"EditorTheme__tokenFunction",comment:"EditorTheme__tokenComment",constant:"EditorTheme__tokenProperty",deleted:"EditorTheme__tokenProperty",doctype:"EditorTheme__tokenComment",entity:"EditorTheme__tokenOperator",function:"EditorTheme__tokenFunction",important:"EditorTheme__tokenVariable",inserted:"EditorTheme__tokenSelector",keyword:"EditorTheme__tokenAttr",namespace:"EditorTheme__tokenVariable",number:"EditorTheme__tokenProperty",operator:"EditorTheme__tokenOperator",prolog:"EditorTheme__tokenComment",property:"EditorTheme__tokenProperty",punctuation:"EditorTheme__tokenPunctuation",regex:"EditorTheme__tokenVariable",selector:"EditorTheme__tokenSelector",string:"EditorTheme__tokenSelector",symbol:"EditorTheme__tokenProperty",tag:"EditorTheme__tokenProperty",url:"EditorTheme__tokenOperator",variable:"EditorTheme__tokenVariable"},characterLimit:"!tw-bg-destructive/50",table:"EditorTheme__table tw-w-fit tw-overflow-scroll tw-border-collapse",tableCell:"EditorTheme__tableCell tw-w-24 tw-relative tw-border tw-px-4 tw-py-2 tw-text-left [&[align=center]]:tw-text-center [&[align=right]]:tw-text-right",tableCellActionButton:"EditorTheme__tableCellActionButton tw-bg-background tw-block tw-border-0 tw-rounded-2xl tw-w-5 tw-h-5 tw-text-foreground tw-cursor-pointer",tableCellActionButtonContainer:"EditorTheme__tableCellActionButtonContainer tw-block tw-right-1 tw-top-1.5 tw-absolute tw-z-10 tw-w-5 tw-h-5",tableCellEditing:"EditorTheme__tableCellEditing tw-rounded-sm tw-shadow-sm",tableCellHeader:"EditorTheme__tableCellHeader tw-bg-muted tw-border tw-px-4 tw-py-2 tw-text-left tw-font-bold [&[align=center]]:tw-text-center [&[align=right]]:tw-text-right",tableCellPrimarySelected:"EditorTheme__tableCellPrimarySelected tw-border tw-border-primary tw-border-solid tw-block tw-h-[calc(100%-2px)] tw-w-[calc(100%-2px)] tw-absolute tw--left-[1px] tw--top-[1px] tw-z-10 ",tableCellResizer:"EditorTheme__tableCellResizer tw-absolute tw--right-1 tw-h-full tw-w-2 tw-cursor-ew-resize tw-z-10 tw-top-0",tableCellSelected:"EditorTheme__tableCellSelected tw-bg-muted",tableCellSortedIndicator:"EditorTheme__tableCellSortedIndicator tw-block tw-opacity-50 tw-absolute tw-bottom-0 tw-left-0 tw-w-full tw-h-1 tw-bg-muted",tableResizeRuler:"EditorTheme__tableCellResizeRuler tw-block tw-absolute tw-w-[1px] tw-h-full tw-bg-primary tw-top-0",tableRowStriping:"EditorTheme__tableRowStriping tw-m-0 tw-border-t tw-p-0 even:tw-bg-muted",tableSelected:"EditorTheme__tableSelected tw-ring-2 tw-ring-primary tw-ring-offset-2",tableSelection:"EditorTheme__tableSelection tw-bg-transparent",layoutItem:"tw-border tw-border-dashed tw-px-4 tw-py-2",layoutContainer:"tw-grid tw-gap-2.5 tw-my-2.5 tw-mx-0",autocomplete:"tw-text-muted-foreground",blockCursor:"",embedBlock:{base:"tw-user-select-none",focus:"tw-ring-2 tw-ring-primary tw-ring-offset-2"},hr:'tw-p-0.5 tw-border-none tw-my-1 tw-mx-0 tw-cursor-pointer after:tw-content-[""] after:tw-block after:tw-h-0.5 after:tw-bg-muted selected:tw-ring-2 selected:tw-ring-primary selected:tw-ring-offset-2 selected:tw-user-select-none',indent:"[--lexical-indent-base-value:40px]",mark:"",markOverlap:""},m=[j,N,q,R];function h({placeholder:e,className:t,placeholderClassName:r}){return n.jsx(P,{className:t??"ContentEditable__root tw-relative tw-block tw-min-h-11 tw-overflow-auto tw-px-3 tw-py-3 tw-text-sm tw-outline-none","aria-placeholder":e,placeholder:n.jsx("div",{className:r??"tw-pointer-events-none tw-absolute tw-top-0 tw-select-none tw-overflow-hidden tw-text-ellipsis tw-px-3 tw-py-3 tw-text-sm tw-text-muted-foreground",children:e})})}h.__docgenInfo={description:"",methods:[],displayName:"ContentEditable",props:{placeholder:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}}};const y=l.createContext(void 0);function x({activeEditor:e,$updateToolbar:t,blockType:r,setBlockType:o,showModal:i,children:a}){const s=l.useMemo(()=>({activeEditor:e,$updateToolbar:t,blockType:r,setBlockType:o,showModal:i}),[e,t,r,o,i]);return n.jsx(y.Provider,{value:s,children:a})}function _(){const e=l.useContext(y);if(!e)throw new Error("useToolbarContext must be used within a ToolbarContext provider");return e}x.__docgenInfo={description:"",methods:[],displayName:"ToolbarContext",props:{activeEditor:{required:!0,tsType:{name:"LexicalEditor"},description:""},$updateToolbar:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},blockType:{required:!0,tsType:{name:"string"},description:""},setBlockType:{required:!0,tsType:{name:"signature",type:"function",raw:"(blockType: string) => void",signature:{arguments:[{type:{name:"string"},name:"blockType"}],return:{name:"void"}}},description:""},showModal:{required:!0,tsType:{name:"signature",type:"function",raw:"(title: string, showModal: (onClose: () => void) => ReactNode) => void",signature:{arguments:[{type:{name:"string"},name:"title"},{type:{name:"signature",type:"function",raw:"(onClose: () => void) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"onClose"}],return:{name:"ReactNode"}}},name:"showModal"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],se=ie("Strikethrough",ae);function le(){const[e,t]=l.useState(void 0),r=l.useCallback(()=>{t(void 0)},[]),o=l.useMemo(()=>{if(e===void 0)return;const{title:a,content:s}=e;return n.jsx(X,{open:!0,onOpenChange:r,children:n.jsxs(Q,{children:[n.jsx(Y,{children:n.jsx(Z,{children:a})}),s]})})},[e,r]),i=l.useCallback((a,s,d=!1)=>{t({closeOnClickOutside:d,content:s(r),title:a})},[r]);return[o,i]}function E({children:e}){const[t]=u(),[r,o]=l.useState(t),[i,a]=l.useState("paragraph"),[s,d]=le(),c=()=>{};return l.useEffect(()=>r.registerCommand(g,(me,S)=>(o(S),!1),b),[r]),n.jsxs(x,{activeEditor:r,$updateToolbar:c,blockType:i,setBlockType:a,showModal:d,children:[s,e({blockType:i})]})}E.__docgenInfo={description:"",methods:[],displayName:"ToolbarPlugin",props:{children:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: { blockType: string }) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ blockType: string }",signature:{properties:[{key:"blockType",value:{name:"string",required:!0}}]}},name:"props"}],return:{name:"ReactNode"}}},description:""}}};function de(e){const[t]=u(),{activeEditor:r}=_();l.useEffect(()=>r.registerCommand(g,()=>{const o=p();return o&&e(o),!1},b),[t,e]),l.useEffect(()=>{r.getEditorState().read(()=>{const o=p();o&&e(o)})},[r,e])}const f=[{format:"bold",icon:re,label:"Bold"},{format:"italic",icon:oe,label:"Italic"},{format:"underline",icon:ne,label:"Underline"},{format:"strikethrough",icon:se,label:"Strikethrough"}];function T(){const{activeEditor:e}=_(),[t,r]=l.useState([]),o=l.useCallback(i=>{if(F(i)||I(i)){const a=[];f.forEach(({format:s})=>{i.hasFormat(s)&&a.push(s)}),r(s=>s.length!==a.length||!a.every(d=>s.includes(d))?a:s)}},[]);return de(o),n.jsx(ee,{type:"multiple",value:t,onValueChange:r,variant:"outline",size:"sm",children:f.map(({format:i,icon:a,label:s})=>n.jsx(te,{value:i,"aria-label":s,onClick:()=>{e.dispatchCommand(A,i)},children:n.jsx(a,{className:"tw-h-4 tw-w-4"})},i))})}T.__docgenInfo={description:"",methods:[],displayName:"FontFormatToolbarPlugin"};function ce({onClear:e}){const[t]=u();l.useEffect(()=>{e&&e(()=>{t.dispatchCommand(D,void 0)})},[t,e])}function v({placeholder:e="Start typing ...",autoFocus:t=!1,onClear:r}){const[,o]=l.useState(void 0),i=a=>{a!==void 0&&o(a)};return n.jsxs("div",{className:"tw-relative",children:[n.jsx(E,{children:()=>n.jsx("div",{className:"tw-sticky tw-top-0 tw-z-10 tw-flex tw-gap-2 tw-overflow-auto tw-border-b tw-p-1",children:n.jsx(T,{})})}),n.jsxs("div",{className:"tw-relative",children:[n.jsx(M,{contentEditable:n.jsx("div",{ref:i,children:n.jsx(h,{placeholder:e})}),ErrorBoundary:$}),t&&n.jsx(z,{defaultSelection:"rootEnd"}),n.jsx(ce,{onClear:r}),n.jsx(B,{})]})]})}v.__docgenInfo={description:"",methods:[],displayName:"Plugins",props:{placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Start typing ...'",computed:!1}},autoFocus:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"(clearFn: () => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"clearFn"}],return:{name:"void"}}},description:""}}};const ue={namespace:"commentEditor",theme:w,nodes:m,onError:e=>{console.error(e)}};function we({editorState:e,editorSerializedState:t,onChange:r,onSerializedChange:o,placeholder:i="Start typing…",autoFocus:a=!1,onClear:s,className:d}){return n.jsx("div",{className:W("pr-twp tw-overflow-hidden tw-rounded-lg tw-border tw-bg-background tw-shadow",d),children:n.jsx(L,{initialConfig:{...ue,...e?{editorState:e}:{},...t?{editorState:JSON.stringify(t)}:{}},children:n.jsxs(G,{children:[n.jsx(v,{placeholder:i,autoFocus:a,onClear:s}),n.jsx(H,{ignoreSelectionChange:!0,onChange:c=>{r==null||r(c),o==null||o(c.toJSON())}})]})})})}we.__docgenInfo={description:`Shadcn UI based Lexical Editor component

Documentation: https://shadcn-editor.vercel.app/docs/`,methods:[],displayName:"Editor",props:{editorState:{required:!1,tsType:{name:"EditorState"},description:""},editorSerializedState:{required:!1,tsType:{name:"SerializedEditorState"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(editorState: EditorState) => void",signature:{arguments:[{type:{name:"EditorState"},name:"editorState"}],return:{name:"void"}}},description:""},onSerializedChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(editorSerializedState: SerializedEditorState) => void",signature:{arguments:[{type:{name:"SerializedEditorState"},name:"editorSerializedState"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Start typing…'",computed:!1}},autoFocus:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"(clearFn: () => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"clearFn"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};function k(e){const t=O(e);return t._headless=!0,["registerDecoratorListener","registerRootListener","registerMutationListener","getRootElement","setRootElement","getElementByKey","focus","blur"].forEach(r=>{t[r]=()=>{throw new Error(`${r} is not supported in headless mode`)}}),t}function Te(e){const t=e.querySelector('[contenteditable="true"]');if(!t)return!1;t.focus();const r=window.getSelection(),o=document.createRange();return o.selectNodeContents(t),o.collapse(!1),r==null||r.removeAllRanges(),r==null||r.addRange(o),!0}function C(e){return e?e.some(t=>t&&"text"in t&&t.text.trim().length>0?!0:!t||!("children"in t)?!1:C(t.children)):!1}function ve(e){var t;return(t=e==null?void 0:e.root)!=null&&t.children?C(e.root.children):!1}function ke(e){if(!e||e.trim()==="")throw new Error("Input HTML is empty");const t=k({namespace:"EditorUtils",theme:w,nodes:m,onError:o=>{console.error(o)}});let r;if(t.update(()=>{const i=new DOMParser().parseFromString(e,"text/html"),a=U(t,i);J().clear(),K(a)},{discrete:!0}),t.getEditorState().read(()=>{r=t.getEditorState().toJSON()}),!r)throw new Error("Failed to convert HTML to editor state");return r}function Ce(e){const t=k({namespace:"EditorUtils",theme:w,nodes:m,onError:i=>{console.error(i)}}),r=t.parseEditorState(JSON.stringify(e));t.setEditorState(r);let o="";return t.getEditorState().read(()=>{o=V(t)}),o=o.replace(/\s+style="[^"]*"/g,"").replace(/\s+class="[^"]*"/g,"").replace(/<span>(.*?)<\/span>/g,"$1").replace(/<b><strong[^>]*>(.*?)<\/strong><\/b>/g,"<b>$1</b>").replace(/<strong><b[^>]*>(.*?)<\/b><\/strong>/g,"<b>$1</b>").replace(/<i><em[^>]*>(.*?)<\/em><\/i>/g,"<i>$1</i>").replace(/<em><i[^>]*>(.*?)<\/i><\/em>/g,"<i>$1</i>").replace(/<u><span[^>]*>(.*?)<\/span><\/u>/g,"<u>$1</u>").replace(/<s><span[^>]*>(.*?)<\/span><\/s>/g,"<s>$1</s>").replace(/<br\s*\/?>/gi,"<br/>"),o}function Se(e){return["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"].includes(e.key)?(e.stopPropagation(),!0):!1}export{we as E,ve as a,Se as b,Ce as e,Te as f,ke as h};
