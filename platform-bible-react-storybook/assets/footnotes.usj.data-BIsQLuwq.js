import{j as t}from"./jsx-runtime-IhsRMfz-.js";import{c}from"./shadcn-ui.util-DMJ19wEV.js";import{C as u}from"./circle-alert-C3CfWPR5.js";import{D as v}from"./index-DHHh0bqX.js";function p(e,n){if(!n||n.length===0)return e??"empty";const o=n.find(r=>typeof r=="string");if(o)return`key-${e??"unknown"}-${o.slice(0,10)}`;const l=typeof n[0]=="string"?"impossible":n[0].marker??"unknown";return`key-${e??"unknown"}-${l}`}function j(e,n,o=!0,l=void 0){if(!n||n.length===0)return;const r=[],s=[];let i=[];return n.forEach(a=>{typeof a!="string"&&a.marker==="fp"?(i.length>0&&s.push(i),i=[a]):i.push(a)}),i.length>0&&s.push(i),s.map((a,d)=>{const h=d===s.length-1;return t.jsxs("p",{children:[m(e,a,o,!0,r),h&&l]},p(e,a))})}function m(e,n,o=!0,l=!0,r=[]){if(!(!n||n.length===0))return n.map(s=>{if(typeof s=="string"){const i=`${e}-text-${s.slice(0,10)}`;if(l){const a=c(`usfm_${e}`);return t.jsx("span",{className:a,children:s},i)}return t.jsxs("span",{className:"tw-inline-flex tw-items-center tw-gap-1 tw-underline tw-decoration-destructive",children:[t.jsx(u,{className:"tw-h-4 tw-w-4 tw-fill-destructive"}),t.jsx("span",{children:s}),t.jsx(u,{className:"tw-h-4 tw-w-4 tw-fill-destructive"})]},i)}return b(s,p(`${e}\\${s.marker}`,[s]),o,[...r,e??"unknown"])})}function b(e,n,o,l=[]){const{marker:r}=e;return t.jsxs("span",{children:[r?o&&t.jsx("span",{className:"marker",children:`\\${r} `}):t.jsx(u,{className:"tw-text-error tw-mr-1 tw-inline-block tw-h-4 tw-w-4","aria-label":"Missing marker"}),m(r,e.content,o,!0,[...l,r??"unknown"])]},n)}function N({footnote:e,layout:n="horizontal",formatCaller:o,showMarkers:l=!0}){const r=o?o(e.caller):e.caller,s=r!==e.caller;let i,a=e.content;Array.isArray(e.content)&&e.content.length>0&&typeof e.content[0]!="string"&&(e.content[0].marker==="fr"||e.content[0].marker==="xo")&&([i,...a]=e.content);const d=l?t.jsx("span",{className:"marker",children:`\\${e.marker} `}):void 0,h=l?t.jsx("span",{className:"marker",children:` \\${e.marker}*`}):void 0,y=r&&t.jsxs("span",{className:c("note-caller tw-inline-block",{formatted:s}),children:[r," "]}),w=i&&t.jsxs(t.Fragment,{children:[m(e.marker,[i],l,!1)," "]}),g=n==="horizontal"?"horizontal":"vertical",x=l?"marker-visible":"",k=n==="horizontal"?"tw-col-span-1":"tw-col-span-2 tw-col-start-1 tw-row-start-2",f=c(g,x);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:c("textual-note-header tw-col-span-1 tw-w-fit tw-text-nowrap",f),children:[d,y]}),t.jsx("div",{className:c("textual-note-header tw-col-span-1 tw-w-fit tw-text-nowrap",f),children:w}),t.jsx("div",{className:c("textual-note-body tw-flex tw-flex-col tw-gap-1",k,f),children:a&&a.length>0&&t.jsx(t.Fragment,{children:j(e.marker,a,l,h)})})]})}N.__docgenInfo={description:"`FootnoteItem` is a component that provides a read-only display of a single USFM/JSX footnote.",methods:[],displayName:"FootnoteItem",props:{footnote:{required:!0,tsType:{name:"MarkerObject"},description:"The footnote to display (typically from JSX). Note: Although {@link MarkerObject.content} is an\narray of {@link MarkerObject}, in practice, for footnotes that array contains only one\nadditional level of `MarkerObject` objects. The `content` of those nested objects will be plain\nstrings, containing the text of the individual footnote data (reference, quoted text, footnote\ntext, etc.)."},layout:{required:!1,tsType:{name:"union",raw:"'horizontal' | 'vertical'",elements:[{name:"literal",value:"'horizontal'"},{name:"literal",value:"'vertical'"}]},description:`Determines how footnotes are displayed:

- \`'horizontal'\`: caller and reference appear in a leading-aligned column, with the contents in a
  second column (typically used in a wide pane below the text).
- \`'vertical'\`: caller and reference appear on the first line, with the contents displayed
  beneath (typically used side-by-side with the text).

@default 'horizontal'`,defaultValue:{value:"'horizontal'",computed:!1}},showMarkers:{required:!1,tsType:{name:"boolean"},description:"Flag indicating whether to display USFM-style markers",defaultValue:{value:"true",computed:!1}},formatCaller:{required:!1,tsType:{name:"signature",type:"function",raw:"(caller: string | undefined) => string | undefined",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"caller"}],return:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}}},description:"A function that can interpret the two special footnote caller codes defined by USFM, `+` and\n`-` in order to display (or suppress display of) a meaningful caller in the context where this\nis being used."}}};const C=`<?xml version="1.0" encoding="utf-8"?>
<usx version="3.1">
  <note caller="+" style="f"><char style="fr" closed="false">1.11</char><char style="ft" closed="false">This is a simple footnote</char></note>
  <note caller="+" style="f"><char style="fr" closed="false">1.17</char><char style="fq" closed="false">generations</char><char style="ft" closed="false">Note missing space after 'generations'. Some manuscripts say </char><char style="fqa">epochs</char> or put the word in <char style="fv">18</char> for emphasis </note>
  <note caller="-" style="x"><char style="xo" closed="false">1:21 </char><char style="xt" closed="false">Sal. 130.8.</char></note>
  <note caller="+" style="f"><char style="fr" closed="false">1.34</char><char style="ft" closed="false">The auto-incremented caller for this note should be the third letter or symbol, not the fourth</char></note>
  <note caller="+" style="f"><char style="fr" closed="false">1.35 </char><char style="ft" closed="false">Or </char><char style="fqa" closed="false">before him in love, </char><char style="fv" closed="false">5</char><char style="fqa" closed="false">having predestined us</char></note>
  <note caller="+" style="f"><char style="fr" closed="false">1.46 </char><char style="fk" closed="false">Baptism: </char>Immersion in water</note>
  <note caller="+" style="f"><char style="fr" closed="false">1.47 </char>This is the first line of the footnote.<char style="fp" closed="false">This is <char style="fk" closed="false">unusual</char>.</char></note>
  <note caller="+" style="f">No target reference and the text is not marked with ft.</note>
</usx>
`,S=v(C).content.filter(e=>typeof e!="string");export{N as F,S as u};
