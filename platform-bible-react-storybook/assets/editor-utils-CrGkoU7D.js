import{j as n}from"./jsx-runtime-BCWqFc22.js";import{P as C,D as j,X as N,E as q,x as R,o as c,i as g,W as f,L as m,y as P,w as F,_ as $,a as I,n as A,b as M,r as z,J as B,f as D,c as L,$ as H,m as O,N as V,j as U,g as J}from"./LexicalTable.prod-CggRLs6Q.js";import{a as K}from"./tooltip-DU_h7wFC.js";import{r as l}from"./iframe-D4H6vy13.js";import{D as G,b as W,c as X,d as Q}from"./dialog-DxzRCa5q.js";import{T as Y,a as Z}from"./toggle-group-CIU_mkl9.js";import{B as ee,I as te,U as re}from"./underline-BGBtej7-.js";import{c as oe}from"./createLucideIcon-Sjh79QfM.js";const u={ltr:"tw-text-left",rtl:"tw-text-right",heading:{h1:"tw-scroll-m-20 tw-text-4xl tw-font-extrabold tw-tracking-tight lg:tw-text-5xl",h2:"tw-scroll-m-20 tw-border-b tw-pb-2 tw-text-3xl tw-font-semibold tw-tracking-tight first:tw-mt-0",h3:"tw-scroll-m-20 tw-text-2xl tw-font-semibold tw-tracking-tight",h4:"tw-scroll-m-20 tw-text-xl tw-font-semibold tw-tracking-tight",h5:"tw-scroll-m-20 tw-text-lg tw-font-semibold tw-tracking-tight",h6:"tw-scroll-m-20 tw-text-base tw-font-semibold tw-tracking-tight"},paragraph:"tw-outline-none",quote:"tw-mt-6 tw-border-l-2 tw-pl-6 tw-italic",link:"tw-text-blue-600 hover:tw-underline hover:tw-cursor-pointer",list:{checklist:"tw-relative",listitem:"tw-mx-8",listitemChecked:'tw-relative tw-mx-2 tw-px-6 tw-list-none tw-outline-none tw-line-through before:tw-content-[""] before:tw-w-4 before:tw-h-4 before:tw-top-0.5 before:tw-left-0 before:tw-cursor-pointer before:tw-block before:tw-bg-cover before:tw-absolute before:tw-border before:tw-border-primary before:tw-rounded before:tw-bg-primary before:tw-bg-no-repeat after:tw-content-[""] after:tw-cursor-pointer after:tw-border-white after:tw-border-solid after:tw-absolute after:tw-block after:tw-top-[6px] after:tw-w-[3px] after:tw-left-[7px] after:tw-right-[7px] after:tw-h-[6px] after:tw-rotate-45 after:tw-border-r-2 after:tw-border-b-2 after:tw-border-l-0 after:tw-border-t-0',listitemUnchecked:'tw-relative tw-mx-2 tw-px-6 tw-list-none tw-outline-none before:tw-content-[""] before:tw-w-4 before:tw-h-4 before:tw-top-0.5 before:tw-left-0 before:tw-cursor-pointer before:tw-block before:tw-bg-cover before:tw-absolute before:tw-border before:tw-border-primary before:tw-rounded',nested:{listitem:"tw-list-none before:tw-hidden after:tw-hidden"},ol:"tw-m-0 tw-p-0 tw-list-decimal [&>li]:tw-mt-2",olDepth:["tw-list-outside !tw-list-decimal","tw-list-outside !tw-list-[upper-roman]","tw-list-outside !tw-list-[lower-roman]","tw-list-outside !tw-list-[upper-alpha]","tw-list-outside !tw-list-[lower-alpha]"],ul:"tw-m-0 tw-p-0 tw-list-outside [&>li]:tw-mt-2",ulDepth:["tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc","tw-list-outside !tw-list-disc"]},hashtag:"tw-text-blue-600 tw-bg-blue-100 tw-rounded-md tw-px-1",text:{bold:"tw-font-bold",code:"tw-bg-gray-100 tw-p-1 tw-rounded-md",italic:"tw-italic",strikethrough:"tw-line-through",subscript:"tw-sub",superscript:"tw-sup",underline:"tw-underline",underlineStrikethrough:"tw-underline tw-line-through"},image:"tw-relative tw-inline-block tw-user-select-none tw-cursor-default editor-image",inlineImage:"tw-relative tw-inline-block tw-user-select-none tw-cursor-default inline-editor-image",keyword:"tw-text-purple-900 tw-font-bold",code:"EditorTheme__code",codeHighlight:{atrule:"EditorTheme__tokenAttr",attr:"EditorTheme__tokenAttr",boolean:"EditorTheme__tokenProperty",builtin:"EditorTheme__tokenSelector",cdata:"EditorTheme__tokenComment",char:"EditorTheme__tokenSelector",class:"EditorTheme__tokenFunction","class-name":"EditorTheme__tokenFunction",comment:"EditorTheme__tokenComment",constant:"EditorTheme__tokenProperty",deleted:"EditorTheme__tokenProperty",doctype:"EditorTheme__tokenComment",entity:"EditorTheme__tokenOperator",function:"EditorTheme__tokenFunction",important:"EditorTheme__tokenVariable",inserted:"EditorTheme__tokenSelector",keyword:"EditorTheme__tokenAttr",namespace:"EditorTheme__tokenVariable",number:"EditorTheme__tokenProperty",operator:"EditorTheme__tokenOperator",prolog:"EditorTheme__tokenComment",property:"EditorTheme__tokenProperty",punctuation:"EditorTheme__tokenPunctuation",regex:"EditorTheme__tokenVariable",selector:"EditorTheme__tokenSelector",string:"EditorTheme__tokenSelector",symbol:"EditorTheme__tokenProperty",tag:"EditorTheme__tokenProperty",url:"EditorTheme__tokenOperator",variable:"EditorTheme__tokenVariable"},characterLimit:"!tw-bg-destructive/50",table:"EditorTheme__table tw-w-fit tw-overflow-scroll tw-border-collapse",tableCell:"EditorTheme__tableCell tw-w-24 tw-relative tw-border tw-px-4 tw-py-2 tw-text-left [&[align=center]]:tw-text-center [&[align=right]]:tw-text-right",tableCellActionButton:"EditorTheme__tableCellActionButton tw-bg-background tw-block tw-border-0 tw-rounded-2xl tw-w-5 tw-h-5 tw-text-foreground tw-cursor-pointer",tableCellActionButtonContainer:"EditorTheme__tableCellActionButtonContainer tw-block tw-right-1 tw-top-1.5 tw-absolute tw-z-10 tw-w-5 tw-h-5",tableCellEditing:"EditorTheme__tableCellEditing tw-rounded-sm tw-shadow-sm",tableCellHeader:"EditorTheme__tableCellHeader tw-bg-muted tw-border tw-px-4 tw-py-2 tw-text-left tw-font-bold [&[align=center]]:tw-text-center [&[align=right]]:tw-text-right",tableCellPrimarySelected:"EditorTheme__tableCellPrimarySelected tw-border tw-border-primary tw-border-solid tw-block tw-h-[calc(100%-2px)] tw-w-[calc(100%-2px)] tw-absolute tw--left-[1px] tw--top-[1px] tw-z-10 ",tableCellResizer:"EditorTheme__tableCellResizer tw-absolute tw--right-1 tw-h-full tw-w-2 tw-cursor-ew-resize tw-z-10 tw-top-0",tableCellSelected:"EditorTheme__tableCellSelected tw-bg-muted",tableCellSortedIndicator:"EditorTheme__tableCellSortedIndicator tw-block tw-opacity-50 tw-absolute tw-bottom-0 tw-left-0 tw-w-full tw-h-1 tw-bg-muted",tableResizeRuler:"EditorTheme__tableCellResizeRuler tw-block tw-absolute tw-w-[1px] tw-h-full tw-bg-primary tw-top-0",tableRowStriping:"EditorTheme__tableRowStriping tw-m-0 tw-border-t tw-p-0 even:tw-bg-muted",tableSelected:"EditorTheme__tableSelected tw-ring-2 tw-ring-primary tw-ring-offset-2",tableSelection:"EditorTheme__tableSelection tw-bg-transparent",layoutItem:"tw-border tw-border-dashed tw-px-4 tw-py-2",layoutContainer:"tw-grid tw-gap-2.5 tw-my-2.5 tw-mx-0",autocomplete:"tw-text-muted-foreground",blockCursor:"",embedBlock:{base:"tw-user-select-none",focus:"tw-ring-2 tw-ring-primary tw-ring-offset-2"},hr:'tw-p-0.5 tw-border-none tw-my-1 tw-mx-0 tw-cursor-pointer after:tw-content-[""] after:tw-block after:tw-h-0.5 after:tw-bg-muted selected:tw-ring-2 selected:tw-ring-primary selected:tw-ring-offset-2 selected:tw-user-select-none',indent:"[--lexical-indent-base-value:40px]",mark:"",markOverlap:""},w=[C,j,N,q];function b({placeholder:e,className:r,placeholderClassName:t}){return n.jsx(R,{className:r??"ContentEditable__root tw-relative tw-block tw-min-h-11 tw-overflow-auto tw-px-3 tw-py-3 tw-text-sm tw-outline-none","aria-placeholder":e,placeholder:n.jsx("div",{className:t??"tw-pointer-events-none tw-absolute tw-top-0 tw-select-none tw-overflow-hidden tw-text-ellipsis tw-px-3 tw-py-3 tw-text-sm tw-text-muted-foreground",children:e})})}b.__docgenInfo={description:"",methods:[],displayName:"ContentEditable",props:{placeholder:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},placeholderClassName:{required:!1,tsType:{name:"string"},description:""}}};const h=l.createContext(void 0);function y({activeEditor:e,$updateToolbar:r,blockType:t,setBlockType:o,showModal:i,children:a}){const s=l.useMemo(()=>({activeEditor:e,$updateToolbar:r,blockType:t,setBlockType:o,showModal:i}),[e,r,t,o,i]);return n.jsx(h.Provider,{value:s,children:a})}function _(){const e=l.useContext(h);if(!e)throw new Error("useToolbarContext must be used within a ToolbarContext provider");return e}y.__docgenInfo={description:"",methods:[],displayName:"ToolbarContext",props:{activeEditor:{required:!0,tsType:{name:"LexicalEditor"},description:""},$updateToolbar:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},blockType:{required:!0,tsType:{name:"string"},description:""},setBlockType:{required:!0,tsType:{name:"signature",type:"function",raw:"(blockType: string) => void",signature:{arguments:[{type:{name:"string"},name:"blockType"}],return:{name:"void"}}},description:""},showModal:{required:!0,tsType:{name:"signature",type:"function",raw:"(title: string, showModal: (onClose: () => void) => ReactNode) => void",signature:{arguments:[{type:{name:"string"},name:"title"},{type:{name:"signature",type:"function",raw:"(onClose: () => void) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"onClose"}],return:{name:"ReactNode"}}},name:"showModal"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""}}};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],ie=oe("Strikethrough",ne);function ae(){const[e,r]=l.useState(void 0),t=l.useCallback(()=>{r(void 0)},[]),o=l.useMemo(()=>{if(e===void 0)return;const{title:a,content:s}=e;return n.jsx(G,{open:!0,onOpenChange:t,children:n.jsxs(W,{children:[n.jsx(X,{children:n.jsx(Q,{children:a})}),s]})})},[e,t]),i=l.useCallback((a,s,d=!1)=>{r({closeOnClickOutside:d,content:s(t),title:a})},[t]);return[o,i]}function E({children:e}){const[r]=c(),[t,o]=l.useState(r),[i,a]=l.useState("paragraph"),[s,d]=ae(),k=()=>{};return l.useEffect(()=>t.registerCommand(g,(ue,S)=>(o(S),!1),f),[t]),n.jsxs(y,{activeEditor:t,$updateToolbar:k,blockType:i,setBlockType:a,showModal:d,children:[s,e({blockType:i})]})}E.__docgenInfo={description:"",methods:[],displayName:"ToolbarPlugin",props:{children:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: { blockType: string }) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ blockType: string }",signature:{properties:[{key:"blockType",value:{name:"string",required:!0}}]}},name:"props"}],return:{name:"ReactNode"}}},description:""}}};function se(e){const[r]=c(),{activeEditor:t}=_();l.useEffect(()=>t.registerCommand(g,()=>{const o=m();return o&&e(o),!1},f),[r,e]),l.useEffect(()=>{t.getEditorState().read(()=>{const o=m();o&&e(o)})},[t,e])}const p=[{format:"bold",icon:ee,label:"Bold"},{format:"italic",icon:te,label:"Italic"},{format:"underline",icon:re,label:"Underline"},{format:"strikethrough",icon:ie,label:"Strikethrough"}];function x(){const{activeEditor:e}=_(),[r,t]=l.useState([]),o=l.useCallback(i=>{if(P(i)||F(i)){const a=[];p.forEach(({format:s})=>{i.hasFormat(s)&&a.push(s)}),t(s=>s.length!==a.length||!a.every(d=>s.includes(d))?a:s)}},[]);return se(o),n.jsx(Y,{type:"multiple",value:r,onValueChange:t,variant:"outline",size:"sm",children:p.map(({format:i,icon:a,label:s})=>n.jsx(Z,{value:i,"aria-label":s,onClick:()=>{e.dispatchCommand($,i)},children:n.jsx(a,{className:"tw-h-4 tw-w-4"})},i))})}x.__docgenInfo={description:"",methods:[],displayName:"FontFormatToolbarPlugin"};function le({onClear:e}){const[r]=c();l.useEffect(()=>{e&&e(()=>{r.dispatchCommand(B,void 0)})},[r,e])}function T({placeholder:e="Start typing ...",autoFocus:r=!1,onClear:t}){const[,o]=l.useState(void 0),i=a=>{a!==void 0&&o(a)};return n.jsxs("div",{className:"tw-relative",children:[n.jsx(E,{children:()=>n.jsx("div",{className:"tw-sticky tw-top-0 tw-z-10 tw-flex tw-gap-2 tw-overflow-auto tw-border-b tw-p-1",children:n.jsx(x,{})})}),n.jsxs("div",{className:"tw-relative",children:[n.jsx(I,{contentEditable:n.jsx("div",{ref:i,children:n.jsx(b,{placeholder:e})}),ErrorBoundary:A}),r&&n.jsx(M,{defaultSelection:"rootEnd"}),n.jsx(le,{onClear:t}),n.jsx(z,{})]})]})}T.__docgenInfo={description:"",methods:[],displayName:"Plugins",props:{placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Start typing ...'",computed:!1}},autoFocus:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"(clearFn: () => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"clearFn"}],return:{name:"void"}}},description:""}}};const de={namespace:"commentEditor",theme:u,nodes:w,onError:e=>{console.error(e)}};function ce({editorState:e,editorSerializedState:r,onChange:t,onSerializedChange:o,placeholder:i="Start typing…",autoFocus:a=!1,onClear:s}){return n.jsx("div",{className:"pr-twp tw-overflow-hidden tw-rounded-lg tw-border tw-bg-background tw-shadow",children:n.jsx(D,{initialConfig:{...de,...e?{editorState:e}:{},...r?{editorState:JSON.stringify(r)}:{}},children:n.jsxs(K,{children:[n.jsx(T,{placeholder:i,autoFocus:a,onClear:s}),n.jsx(L,{ignoreSelectionChange:!0,onChange:d=>{t==null||t(d),o==null||o(d.toJSON())}})]})})})}ce.__docgenInfo={description:`Shadcn UI based Lexical Editor component

Documentation: https://shadcn-editor.vercel.app/docs/`,methods:[],displayName:"Editor",props:{editorState:{required:!1,tsType:{name:"EditorState"},description:""},editorSerializedState:{required:!1,tsType:{name:"SerializedEditorState"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(editorState: EditorState) => void",signature:{arguments:[{type:{name:"EditorState"},name:"editorState"}],return:{name:"void"}}},description:""},onSerializedChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(editorSerializedState: SerializedEditorState) => void",signature:{arguments:[{type:{name:"SerializedEditorState"},name:"editorSerializedState"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Start typing…'",computed:!1}},autoFocus:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"(clearFn: () => void) => void",signature:{arguments:[{type:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},name:"clearFn"}],return:{name:"void"}}},description:""}}};function v(e){const r=H(e);return r._headless=!0,["registerDecoratorListener","registerRootListener","registerMutationListener","getRootElement","setRootElement","getElementByKey","focus","blur"].forEach(t=>{r[t]=()=>{throw new Error(`${t} is not supported in headless mode`)}}),r}function _e(e){const r=e.querySelector('[contenteditable="true"]');if(!r)return!1;r.focus();const t=window.getSelection(),o=document.createRange();return o.selectNodeContents(r),o.collapse(!1),t==null||t.removeAllRanges(),t==null||t.addRange(o),!0}function Ee(e){var r;return(r=e==null?void 0:e.root)!=null&&r.children?e.root.children.some(t=>t!=null&&t.children?t.children.some(o=>(o==null?void 0:o.text)&&o.text.trim().length>0):!1):!1}function xe(e){if(!e||e.trim()==="")throw new Error("Input HTML is empty");const r=e.replace(/<strikethrough>([\s\S]*?)<\/strikethrough>/gi,"<s>$1</s>").replace(/<color[^>]*>([\s\S]*?)<\/color>/gi,"$1").replace(/<language[^>]*>([\s\S]*?)<\/language>/gi,"$1"),t=v({namespace:"EditorUtils",theme:u,nodes:w,onError:i=>{console.error(i)}});let o;if(t.update(()=>{const a=new DOMParser().parseFromString(r,"text/html"),s=O(t,a);V().clear(),U(s)},{discrete:!0}),t.getEditorState().read(()=>{o=t.getEditorState().toJSON()}),!o)throw new Error("Failed to convert HTML to editor state");return o}function Te(e){const r=v({namespace:"EditorUtils",theme:u,nodes:w,onError:i=>{console.error(i)}}),t=r.parseEditorState(JSON.stringify(e));r.setEditorState(t);let o="";return r.getEditorState().read(()=>{o=J(r)}),o=o.replace(/\s+style="[^"]*"/g,"").replace(/\s+class="[^"]*"/g,"").replace(/<span>(.*?)<\/span>/g,"$1").replace(/<b><strong[^>]*>(.*?)<\/strong><\/b>/g,"<b>$1</b>").replace(/<strong><b[^>]*>(.*?)<\/b><\/strong>/g,"<b>$1</b>").replace(/<i><em[^>]*>(.*?)<\/em><\/i>/g,"<i>$1</i>").replace(/<em><i[^>]*>(.*?)<\/i><\/em>/g,"<i>$1</i>").replace(/<u><span[^>]*>(.*?)<\/span><\/u>/g,"<u>$1</u>").replace(/<s><span[^>]*>(.*?)<\/span><\/s>/g,"<s>$1</s>").replace(/<s>(.*?)<\/s>/g,"<strikethrough>$1</strikethrough>"),o}function ve(e){return["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"].includes(e.key)?(e.stopPropagation(),!0):!1}export{ce as E,Ee as a,ve as b,Te as e,_e as f,xe as h};
