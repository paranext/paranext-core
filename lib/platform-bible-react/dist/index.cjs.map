{"version":3,"file":"index.cjs","sources":["../src/utils/shadcn-ui.util.ts","../src/utils/dir-helper.util.ts","../src/components/shadcn-ui/dialog.tsx","../src/components/shadcn-ui/command.tsx","../../../node_modules/@sillsdev/scripture/dist/index.es.js","../src/components/shared/book.utils.ts","../src/components/shared/book-item.component.tsx","../src/components/shadcn-ui/button.tsx","../src/components/shadcn-ui/popover.tsx","../src/components/shared/book-item.utils.ts","../src/components/advanced/recent-searches.component.tsx","../src/components/advanced/book-chapter-control/book-chapter-control.utils.ts","../src/components/advanced/book-chapter-control/book-chapter-control.navigation.ts","../src/components/advanced/book-chapter-control/chapter-grid.component.tsx","../src/components/advanced/book-chapter-control/book-chapter-control.component.tsx","../src/components/advanced/book-chapter-control/book-chapter-control.types.ts","../src/components/shadcn-ui/label.tsx","../src/components/shadcn-ui/radio-group.tsx","../src/components/basics/combo-box.component.tsx","../src/components/basics/chapter-range-selector.component.tsx","../src/components/advanced/book-selector.component.tsx","../src/hooks/listbox-keyboard-navigation.hook.ts","../src/components/shadcn-ui/card.tsx","../src/components/shadcn-ui/separator.tsx","../src/components/shadcn-ui/badge.tsx","../../../node_modules/@lexical/react/LexicalComposerContext.prod.mjs","../../../node_modules/@lexical/react/LexicalComposer.prod.mjs","../../../node_modules/@lexical/react/LexicalOnChangePlugin.prod.mjs","../src/components/advanced/editor/themes/editor-theme.ts","../src/components/shadcn-ui/tooltip.tsx","../src/components/advanced/editor/nodes.ts","../../../node_modules/@lexical/react/LexicalErrorBoundary.prod.mjs","../../../node_modules/@lexical/react/useLexicalEditable.prod.mjs","../../../node_modules/@lexical/text/LexicalText.prod.mjs","../../../node_modules/@lexical/selection/LexicalSelection.prod.mjs","../../../node_modules/@lexical/utils/LexicalUtils.prod.mjs","../../../node_modules/@lexical/dragon/LexicalDragon.prod.mjs","../../../node_modules/@lexical/react/LexicalRichTextPlugin.prod.mjs","../../../node_modules/@lexical/react/LexicalAutoFocusPlugin.prod.mjs","../../../node_modules/@lexical/react/LexicalClearEditorPlugin.prod.mjs","../../../node_modules/@lexical/react/LexicalContentEditable.prod.mjs","../src/components/advanced/editor/editor-ui/content-editable.tsx","../src/components/advanced/editor/context/toolbar-context.tsx","../src/components/advanced/editor/editor-hooks/use-modal.tsx","../src/components/advanced/editor/plugins/toolbar/toolbar-plugin.tsx","../src/components/advanced/editor/editor-hooks/use-update-toolbar.ts","../src/components/shadcn-ui/toggle.tsx","../src/components/shadcn-ui/toggle-group.tsx","../src/components/advanced/editor/plugins/toolbar/font-format-toolbar-plugin.tsx","../src/components/advanced/editor/plugins.tsx","../src/components/advanced/editor/editor.tsx","../../../node_modules/@lexical/html/LexicalHtml.prod.mjs","../src/components/advanced/editor/editor-utils.ts","../src/components/shadcn-ui/avatar.tsx","../src/components/advanced/comment-list/comment-item.component.tsx","../src/components/advanced/comment-list/comment-thread.component.tsx","../src/components/advanced/comment-list/comment-list.component.tsx","../src/context/menu.context.ts","../src/components/shadcn-ui/dropdown-menu.tsx","../src/components/advanced/data-table/data-table-column-toggle.component.tsx","../src/components/shadcn-ui/select.tsx","../src/components/advanced/data-table/data-table-pagination.component.tsx","../src/utils/focus.util.ts","../src/components/shadcn-ui/table.tsx","../src/components/shadcn-ui/skeleton.tsx","../src/components/advanced/data-table/data-table.component.tsx","../src/components/advanced/extension-marketplace/markdown-renderer.component.tsx","../src/components/basics/error-dump.component.tsx","../src/components/advanced/error-popover.component.tsx","../src/components/advanced/extension-marketplace/filter-dropdown.component.tsx","../src/components/advanced/extension-marketplace/more-info.component.tsx","../src/components/advanced/extension-marketplace/version-history.component.tsx","../src/components/advanced/extension-marketplace/footer.component.tsx","../src/components/advanced/multi-select-combo-box.component.tsx","../src/components/advanced/filter.component.tsx","../../../node_modules/@eten-tech-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/conventions.js","../../../node_modules/@eten-tech-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/errors.js","../../../node_modules/@eten-tech-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/grammar.js","../../../node_modules/@eten-tech-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/dom.js","../../../node_modules/@eten-tech-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/entities.js","../../../node_modules/@eten-tech-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/sax.js","../../../node_modules/@eten-tech-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/dom-parser.js","../../../node_modules/@eten-tech-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/index.js","../../../node_modules/@eten-tech-foundation/scripture-utilities/dist/index.js","../../../node_modules/fast-diff/diff.js","../../../node_modules/lodash.clonedeep/index.js","../../../node_modules/lodash.isequal/index.js","../../../node_modules/quill-delta/dist/AttributeMap.js","../../../node_modules/quill-delta/dist/Op.js","../../../node_modules/quill-delta/dist/OpIterator.js","../../../node_modules/quill-delta/dist/Delta.js","../../../node_modules/fast-equals/dist/esm/index.mjs","../../../node_modules/@lexical/link/LexicalLink.prod.mjs","../../../node_modules/@lexical/mark/LexicalMark.prod.mjs","../../../node_modules/@lexical/devtools-core/LexicalDevtoolsCore.prod.mjs","../../../node_modules/@lexical/react/LexicalTreeView.prod.mjs","../../../node_modules/@lexical/react/LexicalEditorRefPlugin.prod.mjs","../../../node_modules/@lexical/history/LexicalHistory.prod.mjs","../../../node_modules/@lexical/react/LexicalHistoryPlugin.prod.mjs","../../../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","../../../node_modules/@floating-ui/core/dist/floating-ui.core.mjs","../../../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","../../../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","../../../node_modules/@lexical/react/LexicalContextMenuPlugin.prod.mjs","../../../node_modules/@lexical/react/LexicalCollaborationContext.prod.mjs","../../../node_modules/@lexical/clipboard/LexicalClipboard.prod.mjs","../../../node_modules/@lexical/plain-text/LexicalPlainText.prod.mjs","../../../node_modules/@lexical/react/LexicalPlainTextPlugin.prod.mjs","../../../node_modules/lib0/map.js","../../../node_modules/lib0/set.js","../../../node_modules/lib0/array.js","../../../node_modules/lib0/observable.js","../../../node_modules/lib0/math.js","../../../node_modules/lib0/binary.js","../../../node_modules/lib0/number.js","../../../node_modules/lib0/string.js","../../../node_modules/lib0/encoding.js","../../../node_modules/lib0/error.js","../../../node_modules/lib0/webcrypto.js","../../../node_modules/lib0/random.js","../../../node_modules/lib0/promise.js","../../../node_modules/lib0/conditions.js","../../../node_modules/lib0/storage.js","../../../node_modules/lib0/object.js","../../../node_modules/lib0/function.js","../../../node_modules/lib0/environment.js","../../../node_modules/lib0/pair.js","../../../node_modules/lib0/dom.js","../../../node_modules/lib0/symbol.js","../../../node_modules/lib0/logging.common.js","../../../node_modules/lib0/logging.js","../../../node_modules/lib0/iterator.js","../../../node_modules/yjs/dist/yjs.mjs","../../../node_modules/@lexical/yjs/LexicalYjs.prod.mjs","../node_modules/@eten-tech-foundation/platform-editor/dist/index.js","../src/components/advanced/footnotes/footnote-editor.component.tsx","../src/components/advanced/footnotes/footnote-item.component.tsx","../src/components/advanced/footnotes/footnote-list.component.tsx","../src/components/advanced/inventory/occurrences-table.component.tsx","../src/components/shadcn-ui/checkbox.tsx","../src/components/shadcn-ui/input.tsx","../src/components/advanced/inventory/inventory-columns.tsx","../src/components/advanced/inventory/inventory-utils.ts","../src/components/advanced/inventory/inventory.component.tsx","../src/components/shadcn-ui/sidebar.tsx","../src/components/advanced/settings-components/settings-sidebar.component.tsx","../src/components/basics/search-bar.component.tsx","../src/components/advanced/settings-components/settings-sidebar-content-search.component.tsx","../src/components/advanced/scripture-results-viewer/scripture-results-viewer.component.tsx","../src/components/advanced/scope-selector/scope-selector.utils.ts","../src/components/advanced/scope-selector/section-button.component.tsx","../src/components/advanced/scope-selector/book-selector.component.tsx","../src/components/advanced/scope-selector/scope-selector.component.tsx","../src/components/advanced/scroll-group-selector.component.tsx","../src/components/advanced/settings-components/settings-list.component.tsx","../src/components/advanced/menus/menu.util.ts","../src/components/advanced/menus/menu-icon.component.tsx","../src/components/advanced/menus/tab-dropdown-menu.component.tsx","../src/components/advanced/tab-toolbar/tab-toolbar-container.component.tsx","../src/components/advanced/tab-toolbar/tab-toolbar.component.tsx","../src/components/advanced/tab-toolbar/tab-floating-menu.component.tsx","../src/components/basics/tabs-vertical.tsx","../src/components/advanced/tab-navigation-content-search.component.tsx","../src/components/shadcn-ui/menubar.tsx","../src/components/advanced/menus/platform-menubar.component.tsx","../src/components/advanced/toolbar.component.tsx","../src/components/advanced/ui-language-selector.component.tsx","../src/components/basics/smart-label.component.tsx","../src/components/basics/checklist.component.tsx","../src/components/basics/results-card.component.tsx","../src/components/basics/spinner.component.tsx","../src/components/basics/text-field.component.tsx","../src/components/shadcn-ui/alert.tsx","../src/components/shadcn-ui/context-menu.tsx","../src/components/shadcn-ui/drawer.tsx","../src/components/shadcn-ui/progress.tsx","../src/components/shadcn-ui/resizable.tsx","../src/components/shadcn-ui/sonner.tsx","../src/components/shadcn-ui/slider.tsx","../src/components/shadcn-ui/switch.tsx","../src/components/shadcn-ui/tabs.tsx","../src/components/shadcn-ui/textarea.tsx","../src/hooks/use-event.hook.ts","../src/hooks/use-promise.hook.ts","../src/hooks/use-event-async.hook.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { extendTailwindMerge } from 'tailwind-merge';\n\nconst twMergeCustom = extendTailwindMerge({ prefix: 'tw-' });\n\n/**\n * Tailwind and CSS class application helper function. Uses\n * [`clsx`](https://www.npmjs.com/package/clsx) to make it easy to apply classes conditionally using\n * object syntax, and uses [`tailwind-merge`](https://www.npmjs.com/package/tailwind-merge) to make\n * it easy to merge/overwrite Tailwind classes in a programmer-logic-friendly way.\n *\n * Note: `tailwind-merge` is configured to use the prefix `tw-`, so you must use the same prefix\n * with any Tailwind classes you use with this function to successfully overwrite other Tailwind\n * classes. `platform-bible-react` is configured to use `tw-` as its Tailwind prefix, so any\n * Tailwind classes you pass into `platform-bible-react` components will be compared using the `tw-`\n * prefix.\n *\n * This function was popularized by\n * [shadcn/ui](https://ui.shadcn.com/docs/installation/manual#add-a-cn-helper). See [ByteGrad's\n * explanation video](https://www.youtube.com/watch?v=re2JFITR7TI) for more information.\n *\n * @example\n *\n * ```typescript\n * const borderShouldBeBlue = true;\n * const textShouldBeRed = true;\n * const heightShouldBe20 = false;\n * const classString = cn(\n *   'tw-bg-primary tw-h-10 tw-text-primary-foreground',\n *   'tw-bg-secondary',\n *   {\n *     'tw-border-blue-500': borderShouldBeBlue,\n *     'tw-text-red-500': textShouldBeRed,\n *     'tw-h-20': heightShouldBe20,\n *   },\n *   'some-class',\n * );\n * ```\n *\n * The resulting `classString` is `'tw-h-10 tw-bg-secondary tw-border-blue-500 tw-text-red-500\n * some-class'`\n *\n * - Notice that `'tw-bg-secondary'`, specified later, overwrote `'tw-bg-primary'`, specified earlier,\n *   because they are Tailwind classes that affect the same css property\n * - Notice that `'tw-text-red-500'`, specified later, overwrote `'tw-text-primary-foreground'`,\n *   specified earlier, because they are Tailwind classes that affect the same css property\n * - Notice that `'tw-h-20'`, specified later, did not overwrite `'tw-h-10'`, specified earlier,\n *   because `'tw-h-20'` is part of a conditional class object and its value evaluated to `false`;\n *   therefore it was not applied\n * - Notice that `'some-class'` was applied. This function is not limited only to Tailwind classes.\n *\n *\n * @param inputs Class strings or `clsx` conditional class objects to merge. Tailwind classes\n *   specified later in the arguments overwrite similar Tailwind classes specified earlier in the\n *   arguments\n * @returns Class string containing all applicable classes from the arguments based on the rules\n *   described above\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMergeCustom(clsx(inputs));\n}\n","/** Text and layout direction */\nexport type Direction = 'rtl' | 'ltr';\n\nconst STORAGE_KEY: string = 'layoutDirection';\n\n/** Read layout direction from localStorage or return 'ltr' */\nexport function readDirection(): Direction {\n  const retrieved = localStorage.getItem(STORAGE_KEY);\n  if (retrieved === 'rtl') {\n    return retrieved;\n  }\n  return 'ltr';\n}\n\n/** Write layout direction to localStorage */\nexport function persistDirection(dir: Direction): void {\n  localStorage.setItem(STORAGE_KEY, dir);\n}\n","import React from 'react';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\nimport { X } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { readDirection } from '@/utils/dir-helper.util';\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'tw-fixed tw-inset-0 tw-z-50 tw-bg-black/80 data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0',\n      className,\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => {\n  const dir = readDirection();\n  return (\n    <DialogPortal>\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        ref={ref}\n        className={cn(\n          'pr-twp tw-fixed tw-left-[50%] tw-top-[50%] tw-z-50 tw-grid tw-w-full tw-max-w-lg tw-translate-x-[-50%] tw-translate-y-[-50%] tw-gap-4 tw-border tw-bg-background tw-p-6 tw-shadow-lg tw-duration-200 data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[state=closed]:tw-slide-out-to-left-1/2 data-[state=closed]:tw-slide-out-to-top-[48%] data-[state=open]:tw-slide-in-from-left-1/2 data-[state=open]:tw-slide-in-from-top-[48%] sm:tw-rounded-lg',\n          className,\n        )}\n        {...props}\n        dir={dir}\n      >\n        {children}\n        <DialogPrimitive.Close\n          className={cn(\n            'tw-absolute tw-top-4 tw-rounded-sm tw-opacity-70 tw-ring-offset-background tw-transition-opacity hover:tw-opacity-100 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-2 disabled:tw-pointer-events-none data-[state=open]:tw-bg-accent data-[state=open]:tw-text-muted-foreground',\n            { 'tw-right-4': dir === 'ltr' },\n            { 'tw-left-4': dir === 'rtl' },\n          )}\n        >\n          <X className=\"tw-h-4 tw-w-4\" />\n          <span className=\"tw-sr-only\">Close</span>\n        </DialogPrimitive.Close>\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  );\n});\nDialogContent.displayName = DialogPrimitive.Content.displayName;\nfunction DialogHeader({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'tw-flex tw-flex-col tw-space-y-1.5 tw-text-center sm:tw-text-start',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\nDialogHeader.displayName = 'DialogHeader';\n\nfunction DialogFooter({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'tw-flex tw-flex-col-reverse sm:tw-flex-row sm:tw-justify-end sm:tw-space-x-2',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\nDialogFooter.displayName = 'DialogFooter';\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn('tw-text-lg tw-font-semibold tw-leading-none tw-tracking-tight', className)}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('tw-text-sm tw-text-muted-foreground', className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n","import React from 'react';\nimport { type DialogProps } from '@radix-ui/react-dialog';\nimport { Command as CommandPrimitive } from 'cmdk';\nimport { Search } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Dialog, DialogContent } from '@/components/shadcn-ui/dialog';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * Command menu for React. These components are built on cmdk and styled with Shadcn UI. See Shadcn\n * UI documentation: https://ui.shadcn.com/docs/components/command See cmdk documentation:\n * https://cmdk.paco.me/\n */\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      'tw-flex tw-h-full tw-w-full tw-flex-col tw-overflow-hidden tw-rounded-md tw-bg-popover tw-text-popover-foreground',\n      className,\n    )}\n    {...props}\n  />\n));\nCommand.displayName = CommandPrimitive.displayName;\n\ninterface CommandDialogProps extends DialogProps {}\n\n/** @inheritdoc Command */\nfunction CommandDialog({ children, ...props }: CommandDialogProps) {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"tw-overflow-hidden tw-p-0 tw-shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:tw-px-2 [&_[cmdk-group-heading]]:tw-font-medium [&_[cmdk-group-heading]]:tw-text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:tw-pt-0 [&_[cmdk-group]]:tw-px-2 [&_[cmdk-input-wrapper]_svg]:tw-h-5 [&_[cmdk-input-wrapper]_svg]:tw-w-5 [&_[cmdk-input]]:tw-h-12 [&_[cmdk-item]]:tw-px-2 [&_[cmdk-item]]:tw-py-3 [&_[cmdk-item]_svg]:tw-h-5 [&_[cmdk-item]_svg]:tw-w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n/** @inheritdoc Command */\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <div className=\"tw-flex tw-items-center tw-border-b tw-px-3\" dir={dir}>\n      <Search className=\"tw-me-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\" />\n      <CommandPrimitive.Input\n        ref={ref}\n        className={cn(\n          'tw-flex tw-h-11 tw-w-full tw-rounded-md tw-bg-transparent tw-py-3 tw-text-sm tw-outline-none placeholder:tw-text-muted-foreground disabled:tw-cursor-not-allowed disabled:tw-opacity-50',\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  );\n});\n\nCommandInput.displayName = CommandPrimitive.Input.displayName;\n\n/** @inheritdoc Command */\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn('tw-max-h-[300px] tw-overflow-y-auto tw-overflow-x-hidden', className)}\n    {...props}\n  />\n));\n\nCommandList.displayName = CommandPrimitive.List.displayName;\n\n/** @inheritdoc Command */\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty ref={ref} className=\"tw-py-6 tw-text-center tw-text-sm\" {...props} />\n));\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\n\n/** @inheritdoc Command */\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      'tw-overflow-hidden tw-p-1 tw-text-foreground [&_[cmdk-group-heading]]:tw-px-2 [&_[cmdk-group-heading]]:tw-py-1.5 [&_[cmdk-group-heading]]:tw-text-xs [&_[cmdk-group-heading]]:tw-font-medium [&_[cmdk-group-heading]]:tw-text-muted-foreground',\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\n\n/** @inheritdoc Command */\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-h-px tw-bg-border', className)}\n    {...props}\n  />\n));\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\n\n/** @inheritdoc Command */\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none data-[disabled=true]:tw-pointer-events-none data-[selected=true]:tw-bg-accent data-[selected=true]:tw-text-accent-foreground data-[disabled=true]:tw-opacity-50',\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandItem.displayName = CommandPrimitive.Item.displayName;\n\n/** @inheritdoc Command */\nfunction CommandShortcut({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) {\n  return (\n    <span\n      className={cn('tw-ms-auto tw-text-xs tw-tracking-widest tw-text-muted-foreground', className)}\n      {...props}\n    />\n  );\n}\nCommandShortcut.displayName = 'CommandShortcut';\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n};\n","var P = Object.defineProperty;\nvar R = (t, e, s) => e in t ? P(t, e, { enumerable: !0, configurable: !0, writable: !0, value: s }) : t[e] = s;\nvar n = (t, e, s) => R(t, typeof e != \"symbol\" ? e + \"\" : e, s);\nclass _ {\n  constructor() {\n    n(this, \"books\");\n    n(this, \"firstSelectedBookNum\");\n    n(this, \"lastSelectedBookNum\");\n    n(this, \"count\");\n    n(this, \"selectedBookNumbers\");\n    n(this, \"selectedBookIds\");\n  }\n}\nconst N = [\n  \"GEN\",\n  \"EXO\",\n  \"LEV\",\n  \"NUM\",\n  \"DEU\",\n  \"JOS\",\n  \"JDG\",\n  \"RUT\",\n  \"1SA\",\n  \"2SA\",\n  // 10\n  \"1KI\",\n  \"2KI\",\n  \"1CH\",\n  \"2CH\",\n  \"EZR\",\n  \"NEH\",\n  \"EST\",\n  \"JOB\",\n  \"PSA\",\n  \"PRO\",\n  // 20\n  \"ECC\",\n  \"SNG\",\n  \"ISA\",\n  \"JER\",\n  \"LAM\",\n  \"EZK\",\n  \"DAN\",\n  \"HOS\",\n  \"JOL\",\n  \"AMO\",\n  // 30\n  \"OBA\",\n  \"JON\",\n  \"MIC\",\n  \"NAM\",\n  \"HAB\",\n  \"ZEP\",\n  \"HAG\",\n  \"ZEC\",\n  \"MAL\",\n  \"MAT\",\n  // 40\n  \"MRK\",\n  \"LUK\",\n  \"JHN\",\n  \"ACT\",\n  \"ROM\",\n  \"1CO\",\n  \"2CO\",\n  \"GAL\",\n  \"EPH\",\n  \"PHP\",\n  // 50\n  \"COL\",\n  \"1TH\",\n  \"2TH\",\n  \"1TI\",\n  \"2TI\",\n  \"TIT\",\n  \"PHM\",\n  \"HEB\",\n  \"JAS\",\n  \"1PE\",\n  // 60\n  \"2PE\",\n  \"1JN\",\n  \"2JN\",\n  \"3JN\",\n  \"JUD\",\n  \"REV\",\n  \"TOB\",\n  \"JDT\",\n  \"ESG\",\n  \"WIS\",\n  // 70\n  \"SIR\",\n  \"BAR\",\n  \"LJE\",\n  \"S3Y\",\n  \"SUS\",\n  \"BEL\",\n  \"1MA\",\n  \"2MA\",\n  \"3MA\",\n  \"4MA\",\n  // 80\n  \"1ES\",\n  \"2ES\",\n  \"MAN\",\n  \"PS2\",\n  \"ODA\",\n  \"PSS\",\n  \"JSA\",\n  // actual variant text for JOS, now in LXA text\n  \"JDB\",\n  // actual variant text for JDG, now in LXA text\n  \"TBS\",\n  // actual variant text for TOB, now in LXA text\n  \"SST\",\n  // actual variant text for SUS, now in LXA text // 90\n  \"DNT\",\n  // actual variant text for DAN, now in LXA text\n  \"BLT\",\n  // actual variant text for BEL, now in LXA text\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\",\n  \"FRT\",\n  // 100\n  \"BAK\",\n  \"OTH\",\n  \"3ES\",\n  // Used previously but really should be 2ES\n  \"EZA\",\n  // Used to be called 4ES, but not actually in any known project\n  \"5EZ\",\n  // Used to be called 5ES, but not actually in any known project\n  \"6EZ\",\n  // Used to be called 6ES, but not actually in any known project\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  // 110\n  \"NDX\",\n  \"DAG\",\n  \"PS3\",\n  \"2BA\",\n  \"LBA\",\n  \"JUB\",\n  \"ENO\",\n  \"1MQ\",\n  \"2MQ\",\n  \"3MQ\",\n  // 120\n  \"REP\",\n  \"4BA\",\n  \"LAO\"\n], B = [\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\",\n  \"FRT\",\n  \"BAK\",\n  \"OTH\",\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  \"NDX\"\n], O = [\n  \"Genesis\",\n  \"Exodus\",\n  \"Leviticus\",\n  \"Numbers\",\n  \"Deuteronomy\",\n  \"Joshua\",\n  \"Judges\",\n  \"Ruth\",\n  \"1 Samuel\",\n  \"2 Samuel\",\n  \"1 Kings\",\n  \"2 Kings\",\n  \"1 Chronicles\",\n  \"2 Chronicles\",\n  \"Ezra\",\n  \"Nehemiah\",\n  \"Esther (Hebrew)\",\n  \"Job\",\n  \"Psalms\",\n  \"Proverbs\",\n  \"Ecclesiastes\",\n  \"Song of Songs\",\n  \"Isaiah\",\n  \"Jeremiah\",\n  \"Lamentations\",\n  \"Ezekiel\",\n  \"Daniel (Hebrew)\",\n  \"Hosea\",\n  \"Joel\",\n  \"Amos\",\n  \"Obadiah\",\n  \"Jonah\",\n  \"Micah\",\n  \"Nahum\",\n  \"Habakkuk\",\n  \"Zephaniah\",\n  \"Haggai\",\n  \"Zechariah\",\n  \"Malachi\",\n  \"Matthew\",\n  \"Mark\",\n  \"Luke\",\n  \"John\",\n  \"Acts\",\n  \"Romans\",\n  \"1 Corinthians\",\n  \"2 Corinthians\",\n  \"Galatians\",\n  \"Ephesians\",\n  \"Philippians\",\n  \"Colossians\",\n  \"1 Thessalonians\",\n  \"2 Thessalonians\",\n  \"1 Timothy\",\n  \"2 Timothy\",\n  \"Titus\",\n  \"Philemon\",\n  \"Hebrews\",\n  \"James\",\n  \"1 Peter\",\n  \"2 Peter\",\n  \"1 John\",\n  \"2 John\",\n  \"3 John\",\n  \"Jude\",\n  \"Revelation\",\n  \"Tobit\",\n  \"Judith\",\n  \"Esther Greek\",\n  \"Wisdom of Solomon\",\n  \"Sirach (Ecclesiasticus)\",\n  \"Baruch\",\n  \"Letter of Jeremiah\",\n  \"Song of 3 Young Men\",\n  \"Susanna\",\n  \"Bel and the Dragon\",\n  \"1 Maccabees\",\n  \"2 Maccabees\",\n  \"3 Maccabees\",\n  \"4 Maccabees\",\n  \"1 Esdras (Greek)\",\n  \"2 Esdras (Latin)\",\n  \"Prayer of Manasseh\",\n  \"Psalm 151\",\n  \"Odes\",\n  \"Psalms of Solomon\",\n  // WARNING, if you change the spelling of the *obsolete* tag be sure to update\n  // IsObsolete routine\n  \"Joshua A. *obsolete*\",\n  \"Judges B. *obsolete*\",\n  \"Tobit S. *obsolete*\",\n  \"Susanna Th. *obsolete*\",\n  \"Daniel Th. *obsolete*\",\n  \"Bel Th. *obsolete*\",\n  \"Extra A\",\n  \"Extra B\",\n  \"Extra C\",\n  \"Extra D\",\n  \"Extra E\",\n  \"Extra F\",\n  \"Extra G\",\n  \"Front Matter\",\n  \"Back Matter\",\n  \"Other Matter\",\n  \"3 Ezra *obsolete*\",\n  \"Apocalypse of Ezra\",\n  \"5 Ezra (Latin Prologue)\",\n  \"6 Ezra (Latin Epilogue)\",\n  \"Introduction\",\n  \"Concordance \",\n  \"Glossary \",\n  \"Topical Index\",\n  \"Names Index\",\n  \"Daniel Greek\",\n  \"Psalms 152-155\",\n  \"2 Baruch (Apocalypse)\",\n  \"Letter of Baruch\",\n  \"Jubilees\",\n  \"Enoch\",\n  \"1 Meqabyan\",\n  \"2 Meqabyan\",\n  \"3 Meqabyan\",\n  \"Reproof (Proverbs 25-31)\",\n  \"4 Baruch (Rest of Baruch)\",\n  \"Laodiceans\"\n], S = K();\nfunction g(t, e = !0) {\n  return e && (t = t.toUpperCase()), t in S ? S[t] : 0;\n}\nfunction k(t) {\n  return g(t) > 0;\n}\nfunction x(t) {\n  const e = typeof t == \"string\" ? g(t) : t;\n  return e >= 40 && e <= 66;\n}\nfunction T(t) {\n  return (typeof t == \"string\" ? g(t) : t) <= 39;\n}\nfunction X(t) {\n  return t <= 66;\n}\nfunction V(t) {\n  const e = typeof t == \"string\" ? g(t) : t;\n  return w(e) && !X(e);\n}\nfunction* L() {\n  for (let t = 1; t <= N.length; t++) yield t;\n}\nconst G = 1, A = N.length;\nfunction H() {\n  return [\"XXA\", \"XXB\", \"XXC\", \"XXD\", \"XXE\", \"XXF\", \"XXG\"];\n}\nfunction C(t, e = \"***\") {\n  const s = t - 1;\n  return s < 0 || s >= N.length ? e : N[s];\n}\nfunction I(t) {\n  return t <= 0 || t > A ? \"******\" : O[t - 1];\n}\nfunction y(t) {\n  return I(g(t));\n}\nfunction w(t) {\n  const e = typeof t == \"number\" ? C(t) : t;\n  return k(e) && !B.includes(e);\n}\nfunction q(t) {\n  const e = typeof t == \"number\" ? C(t) : t;\n  return k(e) && B.includes(e);\n}\nfunction U(t) {\n  return O[t - 1].includes(\"*obsolete*\");\n}\nfunction K() {\n  const t = {};\n  for (let e = 0; e < N.length; e++)\n    t[N[e]] = e + 1;\n  return t;\n}\nconst m = {\n  allBookIds: N,\n  nonCanonicalIds: B,\n  bookIdToNumber: g,\n  isBookIdValid: k,\n  isBookNT: x,\n  isBookOT: T,\n  isBookOTNT: X,\n  isBookDC: V,\n  allBookNumbers: L,\n  firstBook: G,\n  lastBook: A,\n  extraBooks: H,\n  bookNumberToId: C,\n  bookNumberToEnglishName: I,\n  bookIdToEnglishName: y,\n  isCanonical: w,\n  isExtraMaterial: q,\n  isObsolete: U\n};\nvar l = /* @__PURE__ */ ((t) => (t[t.Unknown = 0] = \"Unknown\", t[t.Original = 1] = \"Original\", t[t.Septuagint = 2] = \"Septuagint\", t[t.Vulgate = 3] = \"Vulgate\", t[t.English = 4] = \"English\", t[t.RussianProtestant = 5] = \"RussianProtestant\", t[t.RussianOrthodox = 6] = \"RussianOrthodox\", t))(l || {});\nconst h = class h {\n  // private versInfo: Versification;\n  constructor(e) {\n    n(this, \"name\");\n    n(this, \"fullPath\");\n    n(this, \"isPresent\");\n    n(this, \"hasVerseSegments\");\n    n(this, \"isCustomized\");\n    n(this, \"baseVersification\");\n    n(this, \"scriptureBooks\");\n    n(this, \"_type\");\n    if (e == null)\n      throw new Error(\"Argument undefined\");\n    typeof e == \"string\" ? (this.name = e, this._type = l[e]) : (this._type = e, this.name = l[e]);\n  }\n  get type() {\n    return this._type;\n  }\n  equals(e) {\n    return !e.type || !this.type ? !1 : e.type === this.type;\n  }\n};\nn(h, \"Original\", new h(l.Original)), n(h, \"Septuagint\", new h(l.Septuagint)), n(h, \"Vulgate\", new h(l.Vulgate)), n(h, \"English\", new h(l.English)), n(h, \"RussianProtestant\", new h(l.RussianProtestant)), n(h, \"RussianOrthodox\", new h(l.RussianOrthodox));\nlet c = h;\nfunction E(t, e) {\n  const s = e[0];\n  for (let r = 1; r < e.length; r++)\n    t = t.split(e[r]).join(s);\n  return t.split(s);\n}\nvar D = /* @__PURE__ */ ((t) => (t[t.Valid = 0] = \"Valid\", t[t.UnknownVersification = 1] = \"UnknownVersification\", t[t.OutOfRange = 2] = \"OutOfRange\", t[t.VerseOutOfOrder = 3] = \"VerseOutOfOrder\", t[t.VerseRepeated = 4] = \"VerseRepeated\", t))(D || {});\nconst i = class i {\n  constructor(e, s, r, a) {\n    /** Not yet implemented. */\n    n(this, \"firstChapter\");\n    /** Not yet implemented. */\n    n(this, \"lastChapter\");\n    /** Not yet implemented. */\n    n(this, \"lastVerse\");\n    /** Not yet implemented. */\n    n(this, \"hasSegmentsDefined\");\n    /** Not yet implemented. */\n    n(this, \"text\");\n    /** Not yet implemented. */\n    n(this, \"BBBCCCVVVS\");\n    /** Not yet implemented. */\n    n(this, \"longHashCode\");\n    /** The versification of the reference. */\n    n(this, \"versification\");\n    n(this, \"rtlMark\", \"â€\");\n    n(this, \"_bookNum\", 0);\n    n(this, \"_chapterNum\", 0);\n    n(this, \"_verseNum\", 0);\n    n(this, \"_verse\");\n    if (r == null && a == null)\n      if (e != null && typeof e == \"string\") {\n        const o = e, u = s != null && s instanceof c ? s : void 0;\n        this.setEmpty(u), this.parse(o);\n      } else if (e != null && typeof e == \"number\") {\n        const o = s != null && s instanceof c ? s : void 0;\n        this.setEmpty(o), this._verseNum = e % i.chapterDigitShifter, this._chapterNum = Math.floor(\n          e % i.bookDigitShifter / i.chapterDigitShifter\n        ), this._bookNum = Math.floor(e / i.bookDigitShifter);\n      } else if (s == null)\n        if (e != null && e instanceof i) {\n          const o = e;\n          this._bookNum = o.bookNum, this._chapterNum = o.chapterNum, this._verseNum = o.verseNum, this._verse = o.verse, this.versification = o.versification;\n        } else {\n          if (e == null) return;\n          const o = e instanceof c ? e : i.defaultVersification;\n          this.setEmpty(o);\n        }\n      else\n        throw new Error(\"VerseRef constructor not supported.\");\n    else if (e != null && s != null && r != null)\n      if (typeof e == \"string\" && typeof s == \"string\" && typeof r == \"string\")\n        this.setEmpty(a), this.updateInternal(e, s, r);\n      else if (typeof e == \"number\" && typeof s == \"number\" && typeof r == \"number\")\n        this._bookNum = e, this._chapterNum = s, this._verseNum = r, this.versification = a ?? i.defaultVersification;\n      else\n        throw new Error(\"VerseRef constructor not supported.\");\n    else\n      throw new Error(\"VerseRef constructor not supported.\");\n  }\n  /**\n   * Determines if the verse string is in a valid format (does not consider versification).\n   */\n  static isVerseParseable(e) {\n    return e.length > 0 && \"0123456789\".includes(e[0]) && !e.endsWith(this.verseRangeSeparator) && !e.endsWith(this.verseSequenceIndicator);\n  }\n  /**\n   * Tries to parse the specified string into a verse reference.\n   * @param str - The string to attempt to parse.\n   * @returns success: `true` if the specified string was successfully parsed, `false` otherwise.\n   * @returns verseRef: The result of the parse if successful, or empty VerseRef if it failed\n   */\n  static tryParse(e) {\n    let s;\n    try {\n      return s = new i(e), { success: !0, verseRef: s };\n    } catch (r) {\n      if (r instanceof v)\n        return s = new i(), { success: !1, verseRef: s };\n      throw r;\n    }\n  }\n  /**\n   * Gets the reference as a comparable integer where the book, chapter, and verse each occupy 3\n   * digits.\n   * @param bookNum - Book number (this is 1-based, not an index).\n   * @param chapterNum - Chapter number.\n   * @param verseNum - Verse number.\n   * @returns The reference as a comparable integer where the book, chapter, and verse each occupy 3\n   * digits.\n   */\n  static getBBBCCCVVV(e, s, r) {\n    return e % i.bcvMaxValue * i.bookDigitShifter + (s >= 0 ? s % i.bcvMaxValue * i.chapterDigitShifter : 0) + (r >= 0 ? r % i.bcvMaxValue : 0);\n  }\n  /**\n   * Deserializes a serialized VerseRef.\n   * @param serializedVerseRef - Serialized VerseRef to create from.\n   * @returns the deserialized VerseRef.\n   */\n  static fromJSON(e) {\n    const { book: s, chapterNum: r, verseNum: a, verse: o, versificationStr: u } = e, f = o || a.toString();\n    let d;\n    return u && (d = new c(u)), s ? new i(s, r.toString(), f, d) : new i();\n  }\n  /**\n   * Parses a verse string and gets the leading numeric portion as a number.\n   * @param verseStr - verse string to parse\n   * @returns true if the entire string could be parsed as a single, simple verse number (1-999);\n   *    false if the verse string represented a verse bridge, contained segment letters, or was invalid\n   */\n  static tryGetVerseNum(e) {\n    let s;\n    if (!e)\n      return s = -1, { success: !0, vNum: s };\n    s = 0;\n    let r;\n    for (let a = 0; a < e.length; a++) {\n      if (r = e[a], r < \"0\" || r > \"9\")\n        return a === 0 && (s = -1), { success: !1, vNum: s };\n      if (s = s * 10 + +r - 0, s > i.bcvMaxValue)\n        return s = -1, { success: !1, vNum: s };\n    }\n    return { success: !0, vNum: s };\n  }\n  /**\n   * Checks to see if a VerseRef hasn't been set - all values are the default.\n   */\n  get isDefault() {\n    return this.bookNum === 0 && this.chapterNum === 0 && this.verseNum === 0 && this.versification == null;\n  }\n  /**\n   * Gets whether the verse contains multiple verses.\n   */\n  get hasMultiple() {\n    return this._verse != null && (this._verse.includes(i.verseRangeSeparator) || this._verse.includes(i.verseSequenceIndicator));\n  }\n  /**\n   * Gets or sets the book of the reference. Book is the 3-letter abbreviation in capital letters,\n   * e.g. `'MAT'`.\n   */\n  get book() {\n    return m.bookNumberToId(this.bookNum, \"\");\n  }\n  set book(e) {\n    this.bookNum = m.bookIdToNumber(e);\n  }\n  /**\n   * Gets or sets the chapter of the reference,. e.g. `'3'`.\n   */\n  get chapter() {\n    return this.isDefault || this._chapterNum < 0 ? \"\" : this._chapterNum.toString();\n  }\n  set chapter(e) {\n    const s = +e;\n    this._chapterNum = Number.isInteger(s) ? s : -1;\n  }\n  /**\n   * Gets or sets the verse of the reference, including range, segments, and sequences, e.g. `'4'`,\n   * or `'4b-5a, 7'`.\n   */\n  get verse() {\n    return this._verse != null ? this._verse : this.isDefault || this._verseNum < 0 ? \"\" : this._verseNum.toString();\n  }\n  set verse(e) {\n    const { success: s, vNum: r } = i.tryGetVerseNum(e);\n    this._verse = s ? void 0 : e.replace(this.rtlMark, \"\"), this._verseNum = r, !(this._verseNum >= 0) && ({ vNum: this._verseNum } = i.tryGetVerseNum(this._verse));\n  }\n  /**\n   * Get or set Book based on book number, e.g. `42`.\n   */\n  get bookNum() {\n    return this._bookNum;\n  }\n  set bookNum(e) {\n    if (e <= 0 || e > m.lastBook)\n      throw new v(\n        \"BookNum must be greater than zero and less than or equal to last book\"\n      );\n    this._bookNum = e;\n  }\n  /**\n   * Gets or sets the chapter number, e.g. `3`. `-1` if not valid.\n   */\n  get chapterNum() {\n    return this._chapterNum;\n  }\n  set chapterNum(e) {\n    this.chapterNum = e;\n  }\n  /**\n   * Gets or sets verse start number, e.g. `4`. `-1` if not valid.\n   */\n  get verseNum() {\n    return this._verseNum;\n  }\n  set verseNum(e) {\n    this._verseNum = e;\n  }\n  /**\n   * String representing the versification (should ONLY be used for serialization/deserialization).\n   *\n   * @remarks This is for backwards compatibility when ScrVers was an enumeration.\n   */\n  get versificationStr() {\n    var e;\n    return (e = this.versification) == null ? void 0 : e.name;\n  }\n  set versificationStr(e) {\n    this.versification = this.versification != null ? new c(e) : void 0;\n  }\n  /**\n   * Determines if the reference is valid.\n   */\n  get valid() {\n    return this.validStatus === 0;\n  }\n  /**\n   * Get the valid status for this reference.\n   */\n  get validStatus() {\n    return this.validateVerse(i.verseRangeSeparators, i.verseSequenceIndicators);\n  }\n  /**\n   * Gets the reference as a comparable integer where the book,\n   * chapter, and verse each occupy three digits and the verse is 0.\n   */\n  get BBBCCC() {\n    return i.getBBBCCCVVV(this._bookNum, this._chapterNum, 0);\n  }\n  /**\n   * Gets the reference as a comparable integer where the book,\n   * chapter, and verse each occupy three digits. If verse is not null\n   * (i.e., this reference represents a complex reference with verse\n   * segments or bridge) this cannot be used for an exact comparison.\n   */\n  get BBBCCCVVV() {\n    return i.getBBBCCCVVV(this._bookNum, this._chapterNum, this._verseNum);\n  }\n  /**\n   * Gets whether the verse is defined as an excluded verse in the versification.\n   * Does not handle verse ranges.\n   */\n  // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n  get isExcluded() {\n    return !1;\n  }\n  /**\n   * Parses the reference in the specified string.\n   * Optionally versification can follow reference as in GEN 3:11/4\n   * Throw an exception if\n   * - invalid book name\n   * - chapter number is missing or not a number\n   * - verse number is missing or does not start with a number\n   * - versification is invalid\n   * @param verseStr - string to parse e.g. 'MAT 3:11'\n   */\n  parse(e) {\n    if (e = e.replace(this.rtlMark, \"\"), e.includes(\"/\")) {\n      const o = e.split(\"/\");\n      if (e = o[0], o.length > 1)\n        try {\n          const u = +o[1].trim();\n          this.versification = new c(l[u]);\n        } catch {\n          throw new v(\"Invalid reference : \" + e);\n        }\n    }\n    const s = e.trim().split(\" \");\n    if (s.length !== 2)\n      throw new v(\"Invalid reference : \" + e);\n    const r = s[1].split(\":\"), a = +r[0];\n    if (r.length !== 2 || m.bookIdToNumber(s[0]) === 0 || !Number.isInteger(a) || a < 0 || !i.isVerseParseable(r[1]))\n      throw new v(\"Invalid reference : \" + e);\n    this.updateInternal(s[0], r[0], r[1]);\n  }\n  /**\n   * Simplifies this verse ref so that it has no bridging of verses or\n   * verse segments like `'1a'`.\n   */\n  simplify() {\n    this._verse = void 0;\n  }\n  /**\n   * Makes a clone of the reference.\n   *\n   * @returns The cloned VerseRef.\n   */\n  clone() {\n    return new i(this);\n  }\n  toString() {\n    const e = this.book;\n    return e === \"\" ? \"\" : `${e} ${this.chapter}:${this.verse}`;\n  }\n  toJSON() {\n    let e = this.verse;\n    (e === \"\" || e === this.verseNum.toString()) && (e = void 0);\n    const s = {\n      book: this.book,\n      chapterNum: this.chapterNum,\n      verseNum: this.verseNum,\n      verse: e,\n      versificationStr: this.versificationStr\n    };\n    return e || delete s.verse, s;\n  }\n  /**\n   * Compares this `VerseRef` with supplied one.\n   * @param verseRef - object to compare this one to.\n   * @returns `true` if this `VerseRef` is equal to the supplied one, `false` otherwise.\n   */\n  equals(e) {\n    return e instanceof i ? e._bookNum === this._bookNum && e._chapterNum === this._chapterNum && e._verseNum === this._verseNum && e.verse === this.verse && (e.versification == null && this.versification == null || e.versification != null && this.versification != null && e.versification.equals(this.versification)) : !1;\n  }\n  /**\n   * Enumerate all individual verses contained in a VerseRef.\n   * Verse ranges are indicated by \"-\" and consecutive verses by \",\"s.\n   * Examples:\n   * GEN 1:2 returns GEN 1:2\n   * GEN 1:1a-3b,5 returns GEN 1:1a, GEN 1:2, GEN 1:3b, GEN 1:5\n   * GEN 1:2a-2c returns //! ??????\n   *\n   * @param specifiedVersesOnly - if set to <c>true</c> return only verses that are\n   * explicitly specified only, not verses within a range. Defaults to `false`.\n   * @param verseRangeSeparators - Verse range separators.\n   * Defaults to `VerseRef.verseRangeSeparators`.\n   * @param verseSequenceSeparators - Verse sequence separators.\n   * Defaults to `VerseRef.verseSequenceIndicators`.\n   * @returns An array of all single verse references in this VerseRef.\n   */\n  allVerses(e = !1, s = i.verseRangeSeparators, r = i.verseSequenceIndicators) {\n    if (this._verse == null || this.chapterNum <= 0)\n      return [this.clone()];\n    const a = [], o = E(this._verse, r);\n    for (const u of o.map((f) => E(f, s))) {\n      const f = this.clone();\n      f.verse = u[0];\n      const d = f.verseNum;\n      if (a.push(f), u.length > 1) {\n        const b = this.clone();\n        if (b.verse = u[1], !e)\n          for (let p = d + 1; p < b.verseNum; p++) {\n            const J = new i(\n              this._bookNum,\n              this._chapterNum,\n              p,\n              this.versification\n            );\n            this.isExcluded || a.push(J);\n          }\n        a.push(b);\n      }\n    }\n    return a;\n  }\n  /**\n   * Validates a verse number using the supplied separators rather than the defaults.\n   */\n  validateVerse(e, s) {\n    if (!this.verse)\n      return this.internalValid;\n    let r = 0;\n    for (const a of this.allVerses(!0, e, s)) {\n      const o = a.internalValid;\n      if (o !== 0)\n        return o;\n      const u = a.BBBCCCVVV;\n      if (r > u)\n        return 3;\n      if (r === u)\n        return 4;\n      r = u;\n    }\n    return 0;\n  }\n  /**\n   * Gets whether a single verse reference is valid.\n   */\n  get internalValid() {\n    return this.versification == null ? 1 : this._bookNum <= 0 || this._bookNum > m.lastBook ? 2 : (m.isCanonical(this._bookNum), 0);\n  }\n  setEmpty(e = i.defaultVersification) {\n    this._bookNum = 0, this._chapterNum = -1, this._verse = void 0, this.versification = e;\n  }\n  updateInternal(e, s, r) {\n    this.bookNum = m.bookIdToNumber(e), this.chapter = s, this.verse = r;\n  }\n};\nn(i, \"defaultVersification\", c.English), n(i, \"verseRangeSeparator\", \"-\"), n(i, \"verseSequenceIndicator\", \",\"), n(i, \"verseRangeSeparators\", [i.verseRangeSeparator]), n(i, \"verseSequenceIndicators\", [i.verseSequenceIndicator]), n(i, \"chapterDigitShifter\", 1e3), n(i, \"bookDigitShifter\", i.chapterDigitShifter * i.chapterDigitShifter), n(i, \"bcvMaxValue\", i.chapterDigitShifter - 1), /**\n * The valid status of the VerseRef.\n */\nn(i, \"ValidStatusType\", D);\nlet M = i;\nclass v extends Error {\n}\nexport {\n  _ as BookSet,\n  m as Canon,\n  c as ScrVers,\n  l as ScrVersType,\n  M as VerseRef,\n  v as VerseRefException\n};\n//# sourceMappingURL=index.es.js.map\n","import { Canon } from '@sillsdev/scripture';\nimport { includes, Section } from 'platform-bible-utils';\n\n/**\n * Gets the long name of a Bible section from its enum value\n *\n * @param section - The section enum value to get the name for\n * @param otLongName - Optional localized name for Old Testament section\n * @param ntLongName - Optional localized name for New Testament section\n * @param dcLongName - Optional localized name for Deuterocanonical section\n * @param extraLongName - Optional localized name for Extra Materials section\n * @returns {string} The human-readable localized name of the section. Defaults to English names\n * @throws {Error} When the section enum value is not recognized\n */\nexport const getSectionLongName = (\n  section: Section,\n  otLongName?: string,\n  ntLongName?: string,\n  dcLongName?: string,\n  extraLongName?: string,\n): string => {\n  switch (section) {\n    case Section.OT:\n      return otLongName ?? 'Old Testament';\n    case Section.NT:\n      return ntLongName ?? 'New Testament';\n    case Section.DC:\n      return dcLongName ?? 'Deuterocanon';\n    case Section.Extra:\n      return extraLongName ?? 'Extra Materials';\n    default:\n      throw new Error(`Unknown section: ${section}`);\n  }\n};\n\n/**\n * Gets the short name of a Bible section from its enum value\n *\n * @param section - The section enum value to get the short name for\n * @param otShortName - Optional localized short name for Old Testament section\n * @param ntShortName - Optional localized short name for New Testament section\n * @param dcShortName - Optional localized short name for Deuterocanonical section\n * @param extraShortName - Optional localized short name for Extra Materials section\n * @returns {string} The short name of the section. Defaults to English\n * @throws {Error} When the section enum value is not recognized\n */\nexport const getSectionShortName = (\n  section: Section,\n  otShortName?: string,\n  ntShortName?: string,\n  dcShortName?: string,\n  extraShortName?: string,\n): string => {\n  switch (section) {\n    case Section.OT:\n      return otShortName ?? 'OT';\n    case Section.NT:\n      return ntShortName ?? 'NT';\n    case Section.DC:\n      return dcShortName ?? 'DC';\n    case Section.Extra:\n      return extraShortName ?? 'Extra';\n    default:\n      throw new Error(`Unknown section: ${section}`);\n  }\n};\n\n/**\n * Gets the localized name for a book from the localized book names map, with fallback to English\n * name\n *\n * @param bookId - The book ID to get the localized name for\n * @param localizedBookNames - Optional map of localized book names\n * @returns The localized name, English name, or fallback value\n */\nexport function getLocalizedBookName(\n  bookId: string,\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>,\n): string {\n  const localizedName = localizedBookNames?.get(bookId)?.localizedName;\n  return localizedName ?? Canon.bookIdToEnglishName(bookId);\n}\n\n/**\n * Gets the localized ID for a book from the localized book names map, with fallback to uppercase\n * book ID\n *\n * @param bookId - The book ID to get the localized ID for\n * @param localizedBookNames - Optional map of localized book names\n * @returns The localized ID, uppercase book ID, or fallback value\n */\nexport function getLocalizedBookId(\n  bookId: string,\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>,\n): string {\n  const localizedId = localizedBookNames?.get(bookId)?.localizedId;\n  return localizedId ?? bookId.toUpperCase();\n}\n\n/** Book IDs for all books that are not considered obsolete in the SIL Canon library */\nexport const ALL_BOOK_IDS = Canon.allBookIds.filter(\n  (bookId) => !Canon.isObsolete(Canon.bookIdToNumber(bookId)),\n);\n\n/** English names for all books that are not considered obsolete in the SIL Canon library */\nexport const ALL_ENGLISH_BOOK_NAMES = Object.fromEntries(\n  ALL_BOOK_IDS.map((bookId) => [bookId, Canon.bookIdToEnglishName(bookId)]),\n);\n\n/**\n * Checks if a book matches a search query by comparing against English and localized book names/IDs\n *\n * @example\n *\n * ```typescript\n * // Optional localized names/IDs map\n * const localized = new Map<string, { localizedId: string; localizedName: string }>([\n *   ['GEN', { localizedId: 'GEN', localizedName: 'GÃªnesis' }],\n *   ['PSA', { localizedId: 'SAL', localizedName: 'Salmos' }],\n * ]);\n *\n * // Matches by English name (partial, case-insensitive)\n * doesBookMatchQuery('GEN', 'genes'); // true\n *\n * // Matches by 3-letter book ID (case-insensitive)\n * doesBookMatchQuery('PSA', 'PSA'); // true\n *\n * // Matches by localized name when provided\n * doesBookMatchQuery('GEN', 'gÃªn', localized); // true (The localized book name \"GÃªnesis\" includes \"gÃªn\")\n *\n * // Matches by localized ID when provided\n * doesBookMatchQuery('PSA', 'sal', localized); // true (The localized book ID is \"SAL\")\n *\n * // Leading/trailing whitespace is ignored\n * doesBookMatchQuery('PSA', '  psal  '); // true\n *\n * // Empty or whitespace-only queries don't match\n * doesBookMatchQuery('PSA', '   '); // false\n *\n * // No match example\n * doesBookMatchQuery('PSA', 'john'); // false\n * ```\n *\n * @param bookId - The book ID to check\n * @param query - The string search query\n * @param localizedBookNames - Optional map of localized book IDs/short names and full names. The\n *   key is the standard book ID (e.g., \"2CH\"), the value contains a localized version of the ID and\n *   related book name (e.g. { localizedId: '2CR', localizedName: '2 CrÃ³nicas' })\n * @returns True if the query (partially) matches one of the book's names or IDs, in either English\n *   or localized form\n */\nexport function doesBookMatchQuery(\n  bookId: string,\n  query: string,\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>,\n): boolean {\n  const normalizedQuery = query.trim().toLowerCase();\n  if (!normalizedQuery) return false;\n\n  const englishName = Canon.bookIdToEnglishName(bookId);\n  const localizedBook = localizedBookNames?.get(bookId);\n\n  // Check English name and ID\n  const matchesEnglishNameOrId =\n    includes(englishName.toLowerCase(), normalizedQuery) ||\n    includes(bookId.toLowerCase(), normalizedQuery);\n\n  if (matchesEnglishNameOrId) return true;\n\n  // Check localized name and ID if available\n\n  const matchesLocalizedNameOrId = localizedBook\n    ? includes(localizedBook.localizedName.toLowerCase(), normalizedQuery) ||\n      includes(localizedBook.localizedId.toLowerCase(), normalizedQuery)\n    : false;\n\n  if (matchesLocalizedNameOrId) return true;\n\n  return false;\n}\n","import { CommandItem } from '@/components/shadcn-ui/command';\nimport { getLocalizedBookId, getLocalizedBookName } from '@/components/shared/book.utils';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Canon } from '@sillsdev/scripture';\nimport { Check } from 'lucide-react';\nimport { Section } from 'platform-bible-utils';\nimport { forwardRef, MouseEvent, useMemo, useRef } from 'react';\n\ntype BookItemProps = {\n  /** The book ID (e.g., 'GEN', 'EXO') */\n  bookId: string;\n  /** Whether this book is currently selected */\n  isSelected?: boolean;\n  /** Callback function to handle book selection/deselection */\n  onSelect?: (bookId: string) => void;\n  /** Optional custom mouse down handler */\n  onMouseDown?: (e: MouseEvent) => void;\n  /** The section this book belongs to */\n  section: Section;\n  /** Additional CSS classes for the wrapper CommandItem */\n  className?: string;\n  /** Whether to show the check icon (for multiselect mode) */\n  showCheck?: boolean;\n  /**\n   * Optional map of localized book IDs/short names and full names. Key is the (English) book ID,\n   * value contains localized versions of the ID and full book name\n   */\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>;\n  /** Value to use for Command component matching */\n  commandValue?: string;\n};\n\n/**\n * A reusable component that represents a single book item in book selectors. The component shows\n * the book's localized name, its ID, and visually indicates its testament (OT/NT/DC/Extra) through\n * color coding.\n *\n * For simple selection, use the `onSelect` prop. For complex interactions (like shift-click range\n * selection), implement custom `onSelect` and `onMouseDown` handlers that manage the logic\n * externally.\n */\nexport const BookItem = forwardRef<HTMLDivElement, BookItemProps>(\n  (\n    {\n      bookId,\n      isSelected,\n      onSelect,\n      onMouseDown,\n      section,\n      className,\n      showCheck = false,\n      localizedBookNames,\n      commandValue,\n    },\n    ref,\n  ) => {\n    const isMouseClick = useRef(false);\n\n    const handleSelect = () => {\n      if (!isMouseClick.current) {\n        onSelect?.(bookId);\n      }\n      // Reset the mouse flag after a short delay\n      setTimeout(() => {\n        isMouseClick.current = false;\n      }, 100);\n    };\n\n    const handleMouseDown = (e: MouseEvent) => {\n      isMouseClick.current = true;\n\n      if (onMouseDown) {\n        onMouseDown(e);\n      } else {\n        // If no custom mouse handler, fall back to calling onSelect\n        onSelect?.(bookId);\n      }\n    };\n\n    const bookDisplayName = useMemo(\n      () => getLocalizedBookName(bookId, localizedBookNames),\n      [bookId, localizedBookNames],\n    );\n\n    const bookDisplayId = useMemo(\n      () => getLocalizedBookId(bookId, localizedBookNames),\n      [bookId, localizedBookNames],\n    );\n\n    return (\n      <div\n        className={cn(\n          'tw-mx-1 tw-my-1 tw-border-b-0 tw-border-e-0 tw-border-s-2 tw-border-t-0 tw-border-solid',\n          {\n            'tw-border-s-red-200': section === Section.OT,\n            'tw-border-s-purple-200': section === Section.NT,\n            'tw-border-s-indigo-200': section === Section.DC,\n            'tw-border-s-amber-200': section === Section.Extra,\n          },\n        )}\n      >\n        <CommandItem\n          ref={ref}\n          value={commandValue || `${bookId} ${Canon.bookIdToEnglishName(bookId)}`}\n          onSelect={handleSelect}\n          onMouseDown={handleMouseDown}\n          role=\"option\"\n          aria-selected={isSelected}\n          aria-label={`${Canon.bookIdToEnglishName(bookId)} (${bookId.toLocaleUpperCase()})`}\n          className={className}\n        >\n          {showCheck && (\n            <Check\n              className={cn(\n                'tw-me-2 tw-h-4 tw-w-4 tw-flex-shrink-0',\n                isSelected ? 'tw-opacity-100' : 'tw-opacity-0',\n              )}\n            />\n          )}\n          <span className=\"tw-min-w-0 tw-flex-1\">{bookDisplayName}</span>\n          <span className=\"tw-ms-2 tw-flex-shrink-0 tw-text-xs tw-text-muted-foreground\">\n            {bookDisplayId}\n          </span>\n        </CommandItem>\n      </div>\n    );\n  },\n);\n","import React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Style variants for the Button component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/button}\n */\nexport const buttonVariants = cva(\n  'pr-twp tw-inline-flex tw-items-center tw-justify-center tw-gap-2 tw-whitespace-nowrap tw-rounded-md tw-text-sm tw-font-medium tw-ring-offset-background tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50 [&_svg]:tw-pointer-events-none [&_svg]:tw-size-4 [&_svg]:tw-shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'tw-bg-primary tw-text-primary-foreground hover:tw-bg-primary/90',\n        destructive: 'tw-bg-destructive tw-text-destructive-foreground hover:tw-bg-destructive/90',\n        outline:\n          'tw-border tw-border-input tw-bg-background hover:tw-bg-accent hover:tw-text-accent-foreground',\n        secondary: 'tw-bg-secondary tw-text-secondary-foreground hover:tw-bg-secondary/80',\n        ghost: 'hover:tw-bg-accent hover:tw-text-accent-foreground',\n        link: 'tw-text-primary tw-underline-offset-4 hover:tw-underline',\n      },\n      size: {\n        default: 'tw-h-10 tw-px-4 tw-py-2',\n        sm: 'tw-h-9 tw-rounded-md tw-px-3',\n        lg: 'tw-h-11 tw-rounded-md tw-px-8',\n        icon: 'tw-h-10 tw-w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\n/**\n * Props for Button component\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/button}\n */\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\n/**\n * The Button component displays a button or a component that looks like a button. The component is\n * built and styled by Shadcn UI.\n *\n * @param ButtonProps\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/button}\n */\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button';\n    return (\n      <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />\n    );\n  },\n);\nButton.displayName = 'Button';\n","import React from 'react';\nimport * as PopoverPrimitive from '@radix-ui/react-popover';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * The Popover component displays rich content in a portal, triggered by a button. This popover is\n * built on Radix UI's Popover component and styled by Shadcn UI.\n *\n * See Shadcn UI Documentation https://ui.shadcn.com/docs/components/popover See Radix UI\n * Documentation https://www.radix-ui.com/docs/primitives/components/popover\n */\nconst Popover = PopoverPrimitive.Root;\n\n/** @inheritdoc Popover */\nconst PopoverTrigger = PopoverPrimitive.Trigger;\n\n/** @inheritdoc Popover */\nconst PopoverAnchor = PopoverPrimitive.Anchor;\n\n/** @inheritdoc Popover */\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = 'center', sideOffset = 4, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        ref={ref}\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          // CUSTOM Changed z-order from 50 to 250 to make them appear on floating tabs (200)\n          'tw-z-[250]',\n          'pr-twp tw-w-72 tw-rounded-md tw-border tw-bg-popover tw-p-4 tw-text-popover-foreground tw-shadow-md tw-outline-none data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n          className,\n        )}\n        {...props}\n        dir={dir}\n      />\n    </PopoverPrimitive.Portal>\n  );\n});\nPopoverContent.displayName = PopoverPrimitive.Content.displayName;\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor };\n","import {\n  ALL_ENGLISH_BOOK_NAMES,\n  getLocalizedBookId,\n  getLocalizedBookName,\n} from '@/components/shared/book.utils';\n\nexport function generateCommandValue(\n  bookId: string,\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>,\n  chapter?: number,\n): string {\n  return `${bookId} ${ALL_ENGLISH_BOOK_NAMES[bookId]}${localizedBookNames ? ` ${getLocalizedBookId(bookId, localizedBookNames)} ${getLocalizedBookName(bookId, localizedBookNames)}` : ''}${chapter ? ` ${chapter}` : ''}`;\n}\n","import { Clock } from 'lucide-react';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { Command, CommandGroup, CommandItem, CommandList } from '@/components/shadcn-ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/shadcn-ui/popover';\nimport { useState } from 'react';\n\nexport interface RecentSearchesProps<T> {\n  /** Array of recent search items */\n  recentSearches: T[];\n  /** Callback when a recent search item is selected */\n  onSearchItemSelect: (item: T) => void;\n  /** Function to render each search item as a string for display */\n  renderItem?: (item: T) => string;\n  /** Function to create a unique key for each item */\n  getItemKey?: (item: T) => string;\n  /** Aria label for the recent searches button */\n  ariaLabel?: string;\n  /** Heading text for the recent searches group */\n  groupHeading?: string;\n  /** Optional ID for the popover content for accessibility */\n  id?: string;\n}\n\n/**\n * Generic component that displays a button to show recent searches in a popover. Only renders if\n * there are recent searches available. Works with any data type T.\n */\nexport default function RecentSearches<T>({\n  recentSearches,\n  onSearchItemSelect,\n  renderItem = (item) => String(item),\n  getItemKey = (item) => String(item),\n  ariaLabel = 'Show recent searches',\n  groupHeading = 'Recent',\n  id,\n}: RecentSearchesProps<T>) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  if (recentSearches.length === 0) {\n    return undefined;\n  }\n\n  const handleSearchItemSelect = (item: T) => {\n    onSearchItemSelect(item);\n    setIsOpen(false);\n  };\n\n  return (\n    <Popover open={isOpen} onOpenChange={setIsOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"tw-absolute tw-right-0 tw-top-0 tw-h-full tw-px-3 tw-py-2\"\n          aria-label={ariaLabel}\n        >\n          <Clock className=\"tw-h-4 tw-w-4\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent id={id} className=\"tw-w-[300px] tw-p-0\" align=\"start\">\n        <Command>\n          <CommandList>\n            <CommandGroup heading={groupHeading}>\n              {recentSearches.map((item) => (\n                <CommandItem\n                  key={getItemKey(item)}\n                  onSelect={() => handleSearchItemSelect(item)}\n                  className=\"tw-flex tw-items-center\"\n                >\n                  <Clock className=\"tw-mr-2 tw-h-4 tw-w-4 tw-opacity-50\" />\n                  <span>{renderItem(item)}</span>\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\n/** Generic hook for managing recent searches state and operations. */\nexport function useRecentSearches<T>(\n  recentSearches: T[],\n  setRecentSearches: (items: T[]) => void,\n  areItemsEqual: (a: T, b: T) => boolean = (a, b) => a === b,\n  maxItems: number = 15,\n) {\n  return (item: T) => {\n    // Add the current item to recent searches, moving it to the top if it already exists\n    const recentSearchesWithoutCurrent = recentSearches.filter(\n      (existingItem) => !areItemsEqual(existingItem, item),\n    );\n    const updatedRecentSearches = [item, ...recentSearchesWithoutCurrent.slice(0, maxItems - 1)];\n    setRecentSearches(updatedRecentSearches);\n  };\n}\n","import { Canon } from '@sillsdev/scripture';\nimport { getChaptersForBook } from 'platform-bible-utils';\nimport { ALL_ENGLISH_BOOK_NAMES, doesBookMatchQuery } from '@/components/shared/book.utils';\nimport { BookWithOptionalChapterAndVerse } from './book-chapter-control.types';\n\n// Smart parsing regex patterns\nexport const SCRIPTURE_REGEX_PATTERNS = {\n  // Matches start of string (`^`), one or more non-colon/space words, optionally followed by space and more words (`([^:\\s]+(?:\\s+[^:\\s]+)*)`), end of string (`$`), case-insensitive (`i`)\n  BOOK_ONLY: /^([^:\\s]+(?:\\s+[^:\\s]+)*)$/i,\n  // Same as above, but followed by a space and a chapter number (`\\s+(\\d+)`)\n  BOOK_CHAPTER: /^([^:\\s]+(?:\\s+[^:\\s]+)*)\\s+(\\d+)$/i,\n  // Same as above, but followed by a colon and optionally a verse number (`:(\\d*)`)\n  BOOK_CHAPTER_VERSE: /^([^:\\s]+(?:\\s+[^:\\s]+)*)\\s+(\\d+):(\\d*)$/i,\n} as const;\n\nexport const SEARCH_QUERY_FORMATS = [\n  SCRIPTURE_REGEX_PATTERNS.BOOK_ONLY,\n  SCRIPTURE_REGEX_PATTERNS.BOOK_CHAPTER,\n  SCRIPTURE_REGEX_PATTERNS.BOOK_CHAPTER_VERSE,\n];\n\nexport function getKeyCharacterType(key: string) {\n  const isLetter = /^[a-zA-Z]$/.test(key);\n  const isDigit = /^[0-9]$/.test(key);\n  return { isLetter, isDigit };\n}\n\nexport function fetchEndChapter(bookId: string) {\n  // getChaptersForBook returns -1 if not found in scrBookData\n  // scrBookData only includes OT and NT, so all DC will return -1\n  return getChaptersForBook(Canon.bookIdToNumber(bookId));\n}\n\nexport function calculateTopMatch(\n  query: string,\n  availableBooks: string[],\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>,\n): BookWithOptionalChapterAndVerse | undefined {\n  if (!query.trim() || availableBooks.length === 0) return undefined;\n\n  // First try smart parsing with regex patterns\n  const topMatch = SEARCH_QUERY_FORMATS.reduce(\n    (result: BookWithOptionalChapterAndVerse | undefined, format) => {\n      if (result) return result;\n\n      const matches = format.exec(query.trim());\n      if (matches) {\n        const [book, chapter = undefined, verse = undefined] = matches.slice(1);\n\n        let validBookId: string | undefined;\n\n        // Match for partial book name or id\n\n        const allPotentialMatches = availableBooks.filter((bookId) => {\n          return doesBookMatchQuery(bookId, book, localizedBookNames);\n        });\n\n        // Only create a topMatch if exactly one book could match\n        if (allPotentialMatches.length === 1) {\n          [validBookId] = allPotentialMatches;\n        }\n\n        // Match for exact book id (English or localized)\n        // This is only performed when a chapter number is provided, to prevent edge cases where\n        // a search for e.g. `jud` would generate a top match for 'Jude', even though 'Judges' would\n        // also be a valid match\n        if (!validBookId && chapter) {\n          // Check exact English book ID\n          if (Canon.isBookIdValid(book)) {\n            const bookIdUpperCase = book.toUpperCase();\n            if (availableBooks.includes(bookIdUpperCase)) {\n              validBookId = bookIdUpperCase;\n            }\n          }\n\n          // Check exact localized book ID\n          if (!validBookId && localizedBookNames) {\n            const matchingLocalizedBookId = Array.from(localizedBookNames.entries()).find(\n              ([, localizedBook]) => localizedBook.localizedId.toLowerCase() === book.toLowerCase(),\n            );\n            if (matchingLocalizedBookId && availableBooks.includes(matchingLocalizedBookId[0])) {\n              [validBookId] = matchingLocalizedBookId;\n            }\n          }\n        }\n\n        // Match for exact full book name (English or localized)\n        // This is only performed when a chapter number is provided, to prevent edge cases where\n        // a search for e.g. `john` only matches `John` but not `1 John`, `2 John` and `3 John`\n        if (!validBookId && chapter) {\n          // Check exact English book name\n          const getBookIdFromEnglishName = (bookName: string): string | undefined => {\n            return Object.keys(ALL_ENGLISH_BOOK_NAMES).find(\n              (bookId) => ALL_ENGLISH_BOOK_NAMES[bookId].toLowerCase() === bookName.toLowerCase(),\n            );\n          };\n\n          const matchingBookIdForFullName = getBookIdFromEnglishName(book);\n          if (matchingBookIdForFullName && availableBooks.includes(matchingBookIdForFullName)) {\n            validBookId = matchingBookIdForFullName;\n          }\n\n          // Check exact localized book name\n          if (!validBookId && localizedBookNames) {\n            const matchingLocalizedBookName = Array.from(localizedBookNames.entries()).find(\n              ([, localizedBook]) =>\n                localizedBook.localizedName.toLowerCase() === book.toLowerCase(),\n            );\n            if (\n              matchingLocalizedBookName &&\n              availableBooks.includes(matchingLocalizedBookName[0])\n            ) {\n              [validBookId] = matchingLocalizedBookName;\n            }\n          }\n        }\n\n        if (validBookId) {\n          let chapterNum = chapter ? parseInt(chapter, 10) : undefined;\n          if (chapterNum && chapterNum > fetchEndChapter(validBookId))\n            chapterNum = Math.max(fetchEndChapter(validBookId), 1);\n          const verseNum = verse ? parseInt(verse, 10) : undefined;\n\n          return {\n            book: validBookId,\n            chapterNum,\n            verseNum,\n          };\n        }\n      }\n\n      return undefined;\n    },\n    undefined,\n  );\n\n  if (topMatch) return topMatch;\n\n  return undefined;\n}\n","import { Direction } from '@/utils/dir-helper.util';\nimport { SerializedVerseRef } from '@sillsdev/scripture';\nimport { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from 'lucide-react';\nimport { ComponentType, useCallback, useMemo } from 'react';\nimport { fetchEndChapter } from './book-chapter-control.utils';\n\nexport interface QuickNavButton {\n  onClick: () => void;\n  disabled?: boolean;\n  title: string;\n  icon: ComponentType<{ className?: string }>;\n}\n\nexport function useQuickNavButtons(\n  scrRef: SerializedVerseRef,\n  availableBooks: string[],\n  direction: Direction,\n  handleSubmit: (scrRef: SerializedVerseRef) => void,\n): QuickNavButton[] {\n  const handlePreviousChapter = useCallback(() => {\n    if (scrRef.chapterNum > 1) {\n      handleSubmit({\n        book: scrRef.book,\n        chapterNum: scrRef.chapterNum - 1,\n        verseNum: 1,\n      });\n    } else {\n      // Go to previous book's last chapter\n      const currentBookIndex = availableBooks.indexOf(scrRef.book);\n      if (currentBookIndex > 0) {\n        const previousBook = availableBooks[currentBookIndex - 1];\n        const lastChapter = Math.max(fetchEndChapter(previousBook), 1);\n        handleSubmit({\n          book: previousBook,\n          chapterNum: lastChapter,\n          verseNum: 1,\n        });\n      }\n    }\n  }, [scrRef, availableBooks, handleSubmit]);\n\n  const handleNextChapter = useCallback(() => {\n    const maxChapter = fetchEndChapter(scrRef.book);\n    if (scrRef.chapterNum < maxChapter) {\n      handleSubmit({\n        book: scrRef.book,\n        chapterNum: scrRef.chapterNum + 1,\n        verseNum: 1,\n      });\n    } else {\n      // Go to next book's first chapter\n      const currentBookIndex = availableBooks.indexOf(scrRef.book);\n      if (currentBookIndex < availableBooks.length - 1) {\n        const nextBook = availableBooks[currentBookIndex + 1];\n        handleSubmit({\n          book: nextBook,\n          chapterNum: 1,\n          verseNum: 1,\n        });\n      }\n    }\n  }, [scrRef, availableBooks, handleSubmit]);\n\n  const handlePreviousVerse = useCallback(() => {\n    handleSubmit({\n      book: scrRef.book,\n      chapterNum: scrRef.chapterNum,\n      verseNum: scrRef.verseNum > 1 ? scrRef.verseNum - 1 : 0,\n    });\n  }, [scrRef, handleSubmit]);\n\n  const handleNextVerse = useCallback(() => {\n    handleSubmit({\n      book: scrRef.book,\n      chapterNum: scrRef.chapterNum,\n      verseNum: scrRef.verseNum + 1,\n    });\n  }, [scrRef, handleSubmit]);\n\n  return useMemo(() => {\n    return [\n      {\n        onClick: handlePreviousChapter,\n        disabled:\n          availableBooks.length === 0 ||\n          (scrRef.chapterNum === 1 && availableBooks.indexOf(scrRef.book) === 0),\n        title: 'Previous chapter',\n        icon: direction === 'ltr' ? ChevronsLeft : ChevronsRight,\n      },\n      {\n        onClick: handlePreviousVerse,\n        disabled: availableBooks.length === 0 || scrRef.verseNum === 0,\n        title: 'Previous verse',\n        icon: direction === 'ltr' ? ChevronLeft : ChevronRight,\n      },\n      {\n        onClick: handleNextVerse,\n        disabled: availableBooks.length === 0,\n        title: 'Next verse',\n        icon: direction === 'ltr' ? ChevronRight : ChevronLeft,\n      },\n      {\n        onClick: handleNextChapter,\n        disabled:\n          availableBooks.length === 0 ||\n          ((scrRef.chapterNum === fetchEndChapter(scrRef.book) ||\n            fetchEndChapter(scrRef.book) === -1) &&\n            availableBooks.indexOf(scrRef.book) === availableBooks.length - 1),\n        title: 'Next chapter',\n        icon: direction === 'ltr' ? ChevronsRight : ChevronsLeft,\n      },\n    ];\n  }, [\n    scrRef,\n    availableBooks,\n    direction,\n    handlePreviousChapter,\n    handlePreviousVerse,\n    handleNextVerse,\n    handleNextChapter,\n  ]);\n}\n","import { CommandGroup, CommandItem } from '@/components/shadcn-ui/command';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { ALL_ENGLISH_BOOK_NAMES } from '@/components/shared/book.utils';\nimport { fetchEndChapter } from './book-chapter-control.utils';\n\nexport interface ChapterGridProps {\n  /** The book ID to render chapters for */\n  bookId: string;\n  /** Current scripture reference for highlighting */\n  scrRef: { book: string; chapterNum: number };\n  /** Callback when a chapter is selected */\n  onChapterSelect: (chapter: number) => void;\n  /** Function to set chapter refs for keyboard navigation */\n  setChapterRef: (chapter: number) => (element: HTMLDivElement | null) => void;\n  /** Optional function to determine if a chapter should be dimmed */\n  isChapterDimmed?: (chapter: number) => boolean;\n  /** Optional additional class name for styling */\n  className?: string;\n}\n\n/**\n * Renders a grid of chapter numbers for a given book, with highlighting for the current chapter and\n * optional dimmed chapters based on state logic.\n */\nexport function ChapterGrid({\n  bookId,\n  scrRef,\n  onChapterSelect,\n  setChapterRef,\n  isChapterDimmed,\n  className,\n}: ChapterGridProps) {\n  if (!bookId) return undefined;\n\n  return (\n    <CommandGroup>\n      <div className={cn('tw-grid tw-grid-cols-6 tw-gap-1', className)}>\n        {Array.from({ length: fetchEndChapter(bookId) }, (_, i) => i + 1).map((chapter) => (\n          <CommandItem\n            key={chapter}\n            value={`${bookId} ${ALL_ENGLISH_BOOK_NAMES[bookId] || ''} ${chapter}`}\n            onSelect={() => onChapterSelect(chapter)}\n            ref={setChapterRef(chapter)}\n            className={cn(\n              'tw-h-8 tw-w-8 tw-cursor-pointer tw-justify-center tw-rounded-md tw-text-center tw-text-sm',\n              {\n                'tw-bg-primary tw-text-primary-foreground':\n                  bookId === scrRef.book && chapter === scrRef.chapterNum,\n              },\n              {\n                'tw-bg-muted/50 tw-text-muted-foreground/50': isChapterDimmed?.(chapter) ?? false,\n              },\n            )}\n          >\n            {chapter}\n          </CommandItem>\n        ))}\n      </div>\n    </CommandGroup>\n  );\n}\n","import { BookItem } from '@/components/shared/book-item.component';\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  Command,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/shadcn-ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/shadcn-ui/popover';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Canon, SerializedVerseRef } from '@sillsdev/scripture';\nimport { ArrowLeft, ArrowRight } from 'lucide-react';\nimport { formatScrRef, getSectionForBook, Section } from 'platform-bible-utils';\nimport {\n  getSectionLongName,\n  getLocalizedBookName,\n  getLocalizedBookId,\n  ALL_BOOK_IDS,\n  ALL_ENGLISH_BOOK_NAMES,\n  doesBookMatchQuery,\n} from '@/components/shared/book.utils';\nimport { KeyboardEvent, useCallback, useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { generateCommandValue } from '@/components/shared/book-item.utils';\nimport RecentSearches from '../recent-searches.component';\nimport { useQuickNavButtons } from './book-chapter-control.navigation';\nimport { BookChapterControlProps, ViewMode } from './book-chapter-control.types';\nimport {\n  calculateTopMatch,\n  fetchEndChapter,\n  getKeyCharacterType,\n} from './book-chapter-control.utils';\nimport { ChapterGrid } from './chapter-grid.component';\n\n/**\n * `BookChapterControl` is a component that provides an interactive UI for selecting book chapters.\n * It allows users to input a search query to find specific books and chapters, navigate through\n * options with keyboard interactions, and submit selections. The component handles various\n * interactions such as opening and closing the dropdown menu, filtering book lists based on search\n * input, and managing highlighted selections. It also integrates with external handlers for\n * submitting selected references and retrieving active book IDs.\n */\nexport function BookChapterControl({\n  scrRef,\n  handleSubmit,\n  className,\n  getActiveBookIds,\n  localizedBookNames,\n  localizedStrings,\n  recentSearches,\n  onAddRecentSearch,\n  id,\n}: BookChapterControlProps) {\n  const direction: Direction = readDirection();\n\n  // Indicates if the Command popover is open or not\n  const [isCommandOpen, setIsCommandOpen] = useState(false);\n  // The value of the Command, mainly needed for reliable keyboard navigation\n  const [commandValue, setCommandValue] = useState('');\n  // The value of the Input inside the Command\n  const [inputValue, setInputValue] = useState('');\n  // The current view mode (books or chapters)\n  const [viewMode, setViewMode] = useState<ViewMode>('books');\n  // The book currently selected for chapter view, if any\n  const [selectedBookForChaptersView, setSelectedBookForChaptersView] = useState<\n    string | undefined\n  >(undefined);\n  const [isCommandListHidden, setIsCommandListHidden] = useState(false);\n\n  // Reference to the Command component\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const commandRef = useRef<HTMLDivElement>(undefined!);\n  // Reference to the Input component inside the Command\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const commandInputRef = useRef<HTMLInputElement>(undefined!);\n  // Reference to the CommandList inside the Command\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const commandListRef = useRef<HTMLDivElement>(undefined!);\n  // Reference to the selected book item in the CommandList\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const selectedBookItemRef = useRef<HTMLDivElement>(undefined!);\n  // References to the chapters that are shown as CommandItems\n  const chapterRefs = useRef<Record<number, HTMLDivElement | null>>({});\n\n  // Wrapper function to handle submit and add to recent searches\n  const handleSubmitAndAddToRecent = useCallback(\n    (newScrRef: SerializedVerseRef) => {\n      handleSubmit(newScrRef);\n      if (onAddRecentSearch) {\n        onAddRecentSearch(newScrRef);\n      }\n    },\n    [handleSubmit, onAddRecentSearch],\n  );\n\n  // #region Available books, filtering and top match logic\n\n  const activeBookIds = useMemo(() => {\n    return getActiveBookIds ? getActiveBookIds() : ALL_BOOK_IDS;\n  }, [getActiveBookIds]);\n\n  const availableBooksByType = useMemo(() => {\n    const grouped: Record<Section, string[]> = {\n      [Section.OT]: activeBookIds.filter((bookId) => Canon.isBookOT(bookId)),\n      [Section.NT]: activeBookIds.filter((bookId) => Canon.isBookNT(bookId)),\n      [Section.DC]: activeBookIds.filter((bookId) => Canon.isBookDC(bookId)),\n      [Section.Extra]: activeBookIds.filter((bookId) => Canon.extraBooks().includes(bookId)),\n    };\n    return grouped;\n  }, [activeBookIds]);\n\n  const availableBooks = useMemo(() => {\n    return Object.values(availableBooksByType).flat();\n  }, [availableBooksByType]);\n\n  // Filter books based on search input\n  const filteredBooksByType = useMemo(() => {\n    if (!inputValue.trim()) return availableBooksByType;\n\n    const filteredBooks: Record<Section, string[]> = {\n      [Section.OT]: [],\n      [Section.NT]: [],\n      [Section.DC]: [],\n      [Section.Extra]: [],\n    };\n\n    const bookTypes: Section[] = [Section.OT, Section.NT, Section.DC, Section.Extra];\n    bookTypes.forEach((type) => {\n      filteredBooks[type] = availableBooksByType[type].filter((bookId) => {\n        return doesBookMatchQuery(bookId, inputValue, localizedBookNames);\n      });\n    });\n\n    return filteredBooks;\n  }, [availableBooksByType, inputValue, localizedBookNames]);\n\n  // Get the current top match\n  const topMatch = useMemo(\n    () => calculateTopMatch(inputValue, availableBooks, localizedBookNames),\n    [inputValue, availableBooks, localizedBookNames],\n  );\n\n  // #endregion\n\n  // #region Submitting references\n\n  const handleTopMatchSelect = useCallback(() => {\n    // If we have a top match (smart parsed or single book filter), use its specific chapter/verse\n    if (topMatch) {\n      handleSubmitAndAddToRecent({\n        book: topMatch.book,\n        chapterNum: topMatch.chapterNum ?? 1,\n        verseNum: topMatch.verseNum ?? 1,\n      });\n      setIsCommandOpen(false);\n      setInputValue('');\n      setCommandValue(''); // Reset command value\n    }\n  }, [handleSubmitAndAddToRecent, topMatch]);\n\n  const handleBookSelect = useCallback(\n    (bookId: string) => {\n      // Check if book has chapters - if not, submit immediately\n      const endChapter = fetchEndChapter(bookId);\n      if (endChapter <= 1) {\n        handleSubmitAndAddToRecent({\n          book: bookId,\n          chapterNum: 1,\n          verseNum: 1,\n        });\n        setIsCommandOpen(false);\n        setInputValue('');\n        return;\n      }\n\n      // Book has multiple chapters - transition to chapter view\n      setSelectedBookForChaptersView(bookId);\n      setViewMode('chapters');\n    },\n    [handleSubmitAndAddToRecent],\n  );\n\n  const handleChapterSelect = useCallback(\n    (chapterNumber: number) => {\n      // Determine which book we're selecting a chapter for\n      const bookId = viewMode === 'chapters' ? selectedBookForChaptersView : topMatch?.book;\n      if (!bookId) return;\n\n      handleSubmitAndAddToRecent({\n        book: bookId,\n        chapterNum: chapterNumber,\n        verseNum: 1,\n      });\n      setIsCommandOpen(false);\n      setViewMode('books');\n      setSelectedBookForChaptersView(undefined);\n      setInputValue('');\n    },\n    [handleSubmitAndAddToRecent, viewMode, selectedBookForChaptersView, topMatch],\n  );\n\n  const handleRecentItemSelect = useCallback(\n    (item: SerializedVerseRef) => {\n      handleSubmitAndAddToRecent(item);\n      setIsCommandOpen(false);\n      setInputValue('');\n    },\n    [handleSubmitAndAddToRecent],\n  );\n\n  // #endregion\n\n  // #region Navigation and view changes\n\n  // Hook that provides navigation buttons for quick chapter/verse navigation\n  const quickNavButtons = useQuickNavButtons(scrRef, availableBooks, direction, handleSubmit);\n\n  const handleBackToBooks = useCallback(() => {\n    setViewMode('books');\n    setSelectedBookForChaptersView(undefined);\n\n    // Focus the search input when returning to book view\n    setTimeout(() => {\n      if (commandInputRef.current) {\n        commandInputRef.current.focus();\n      }\n    }, 0);\n  }, []);\n\n  // Reset view state when popover opens\n  const handleOpenChange = useCallback(\n    (shouldCommandBeOpen: boolean) => {\n      // If we're closing from chapter view, don't close popover but go back to books view instead\n      if (!shouldCommandBeOpen && viewMode === 'chapters') {\n        handleBackToBooks();\n        return;\n      }\n\n      setIsCommandOpen(shouldCommandBeOpen);\n\n      if (shouldCommandBeOpen) {\n        // Reset Command state when opening\n        setViewMode('books');\n        setSelectedBookForChaptersView(undefined);\n        setInputValue('');\n      }\n    },\n    [viewMode, handleBackToBooks],\n  );\n\n  // #endregion\n\n  // #region Helper functions and variables\n\n  const { otLong, ntLong, dcLong, extraLong } = {\n    otLong: localizedStrings?.['%scripture_section_ot_long%'],\n    ntLong: localizedStrings?.['%scripture_section_nt_long%'],\n    dcLong: localizedStrings?.['%scripture_section_dc_long%'],\n    extraLong: localizedStrings?.['%scripture_section_extra_long%'],\n  };\n\n  const getSectionLabel = useCallback(\n    (section: Section): string => {\n      return getSectionLongName(section, otLong, ntLong, dcLong, extraLong);\n    },\n    [otLong, ntLong, dcLong, extraLong],\n  );\n\n  const doesChapterMatch = useCallback(\n    (chapter: number) => {\n      if (!topMatch) return false;\n      return !!topMatch.chapterNum && !chapter.toString().includes(topMatch.chapterNum.toString());\n    },\n    [topMatch],\n  );\n\n  const currentDisplayValue = useMemo(\n    () =>\n      formatScrRef(\n        scrRef,\n        localizedBookNames ? getLocalizedBookName(scrRef.book, localizedBookNames) : 'English',\n      ),\n    [scrRef, localizedBookNames],\n  );\n\n  const setChapterRef = useCallback((chapter: number) => {\n    return (element: HTMLDivElement | null) => {\n      chapterRefs.current[chapter] = element;\n    };\n  }, []);\n\n  // #endregion\n\n  // #region Keyboard handling\n\n  // Handle keyboard navigation for CommandInput\n  const handleInputKeyDown = useCallback((event: KeyboardEvent<HTMLInputElement>) => {\n    // Override default Home and End key behavior to work normally for cursor movement.\n    // Default behavior was to jump to the start/end of the list of items in the Command\n    if (event.key === 'Home' || event.key === 'End') {\n      event.stopPropagation(); // Prevent Command component from handling these\n    }\n  }, []);\n\n  // Grid-aware keyboard navigation using Command's controlled value\n  const handleCommandKeyDown = useCallback(\n    (event: KeyboardEvent<HTMLDivElement | HTMLButtonElement>) => {\n      if (event.ctrlKey) return;\n\n      const { isLetter, isDigit } = getKeyCharacterType(event.key);\n\n      // Handle keypresses in chapter viewmode\n      if (viewMode === 'chapters') {\n        // Handle backspace for going back to books\n        if (event.key === 'Backspace') {\n          event.preventDefault();\n          event.stopPropagation();\n          handleBackToBooks();\n          return;\n        }\n\n        if (isLetter || isDigit) {\n          event.preventDefault();\n          event.stopPropagation();\n          setViewMode('books');\n          setSelectedBookForChaptersView(undefined);\n\n          if (isDigit && selectedBookForChaptersView) {\n            // Digit pressed: go back to book list and start search with current book name + digit\n            const currentBookName = ALL_ENGLISH_BOOK_NAMES[selectedBookForChaptersView];\n            setInputValue(`${currentBookName} ${event.key}`);\n          } else {\n            setInputValue(event.key);\n          }\n\n          setTimeout(() => {\n            if (commandInputRef.current) {\n              commandInputRef.current.focus();\n            }\n          }, 0);\n          return;\n        }\n      }\n\n      // Handle grid navigation for arrow keys in chapter views\n      if (\n        (viewMode === 'chapters' || (viewMode === 'books' && topMatch)) &&\n        ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)\n      ) {\n        // Extract current chapter from commandValue\n        const currentBookId =\n          viewMode === 'chapters' ? selectedBookForChaptersView : topMatch?.book;\n        if (!currentBookId) return;\n\n        // Parse chapter from current command value\n        const currentChapter = (() => {\n          if (!commandValue) return 1;\n          const match = commandValue.match(/(\\d+)$/);\n          return match ? parseInt(match[1], 10) : 0;\n        })();\n\n        const maxChapter = fetchEndChapter(currentBookId);\n\n        if (!maxChapter) return;\n\n        let targetChapter = currentChapter;\n        const GRID_COLS = 6;\n\n        switch (event.key) {\n          case 'ArrowLeft':\n            if (currentChapter !== 0)\n              targetChapter = currentChapter > 1 ? currentChapter - 1 : maxChapter;\n            break;\n          case 'ArrowRight':\n            if (currentChapter !== 0)\n              targetChapter = currentChapter < maxChapter ? currentChapter + 1 : 1;\n            break;\n          case 'ArrowUp':\n            targetChapter =\n              currentChapter === 0 ? maxChapter : Math.max(1, currentChapter - GRID_COLS);\n            break;\n          case 'ArrowDown':\n            targetChapter =\n              currentChapter === 0 ? 1 : Math.min(maxChapter, currentChapter + GRID_COLS);\n            break;\n          default:\n            return;\n        }\n\n        if (targetChapter !== currentChapter) {\n          event.preventDefault();\n          event.stopPropagation();\n\n          // Update the command value to the target chapter\n          setCommandValue(generateCommandValue(currentBookId, localizedBookNames, targetChapter));\n\n          // Scroll the target chapter into view using refs\n          setTimeout(() => {\n            const targetElement = chapterRefs.current[targetChapter];\n            if (targetElement) {\n              targetElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n            }\n          }, 0);\n        }\n      }\n    },\n    [\n      viewMode,\n      topMatch,\n      handleBackToBooks,\n      selectedBookForChaptersView,\n      commandValue,\n      localizedBookNames,\n    ],\n  );\n\n  const handleQuickNavButtonKeyDown = useCallback((event: KeyboardEvent<HTMLButtonElement>) => {\n    if (event.shiftKey || event.key === 'Tab' || event.key === ' ') return;\n\n    const { isLetter, isDigit } = getKeyCharacterType(event.key);\n\n    if (isLetter || isDigit) {\n      event.preventDefault();\n\n      setInputValue((prevValue) => prevValue + event.key);\n      commandInputRef.current.focus();\n\n      setIsCommandListHidden(false);\n    }\n  }, []);\n\n  // #endregion\n\n  // #region Auto-scroll\n\n  // Auto-scroll to currently selected book when dropdown opens in book view\n  useLayoutEffect(() => {\n    const scrollTimeout = setTimeout(() => {\n      if (\n        isCommandOpen &&\n        viewMode === 'books' &&\n        commandListRef.current &&\n        selectedBookItemRef.current\n      ) {\n        const listElement = commandListRef.current;\n        const itemElement = selectedBookItemRef.current;\n\n        // Calculate scroll position to center the selected item\n        const itemOffsetTop = itemElement.offsetTop;\n        const listHeight = listElement.clientHeight;\n        const itemHeight = itemElement.clientHeight;\n        const scrollPosition = itemOffsetTop - listHeight / 2 + itemHeight / 2;\n\n        listElement.scrollTo({\n          top: Math.max(0, scrollPosition),\n          behavior: 'smooth',\n        });\n\n        // Set the selected book as the active item for keyboard navigation\n        setCommandValue(generateCommandValue(scrRef.book));\n      }\n    }, 0);\n\n    return () => {\n      clearTimeout(scrollTimeout);\n    };\n  }, [isCommandOpen, viewMode, inputValue, topMatch, scrRef.book]);\n\n  // Auto-scroll to appropriate chapter\n  useLayoutEffect(() => {\n    if (viewMode === 'chapters' && selectedBookForChaptersView) {\n      // Check if we're entering chapter view for the currently selected book\n      const isCurrentlySelectedBook = selectedBookForChaptersView === scrRef.book;\n\n      // Reset scroll position to top, except when viewing the currently selected book\n      setTimeout(() => {\n        if (commandListRef.current) {\n          if (isCurrentlySelectedBook) {\n            // Scroll to the currently selected chapter\n            const targetElement = chapterRefs.current[scrRef.chapterNum];\n            if (targetElement) {\n              targetElement.scrollIntoView({ block: 'center', behavior: 'smooth' });\n            }\n          } else {\n            // Reset to top for other books\n            commandListRef.current.scrollTo({ top: 0 });\n          }\n        }\n\n        // Ensure Command component has focus for keyboard navigation\n        if (commandRef.current) {\n          commandRef.current.focus();\n        }\n      }, 0);\n    }\n  }, [viewMode, selectedBookForChaptersView, topMatch, scrRef.book, scrRef.chapterNum]);\n\n  // #endregion\n\n  return (\n    <Popover open={isCommandOpen} onOpenChange={handleOpenChange}>\n      <PopoverTrigger asChild>\n        <Button\n          aria-label=\"book-chapter-trigger\"\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={isCommandOpen}\n          className={cn(\n            'tw-h-8 tw-w-full tw-min-w-16 tw-max-w-48 tw-overflow-hidden tw-px-1',\n            className,\n          )}\n        >\n          <span className=\"tw-truncate\">{currentDisplayValue}</span>\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent id={id} forceMount className=\"tw-w-[280px] tw-p-0\" align=\"center\">\n        <Command\n          ref={commandRef}\n          onKeyDown={handleCommandKeyDown}\n          loop\n          value={commandValue}\n          onValueChange={setCommandValue}\n          shouldFilter={false}\n        >\n          {/* Header: Input (with quick nav buttons) for book view, fixed header for chapter view */}\n          {viewMode === 'books' ? (\n            <div className=\"tw-flex tw-items-end\">\n              <div className=\"tw-relative tw-flex-1\">\n                <CommandInput\n                  ref={commandInputRef}\n                  value={inputValue}\n                  onValueChange={setInputValue}\n                  onKeyDown={handleInputKeyDown}\n                  onFocus={() => setIsCommandListHidden(false)}\n                  className={recentSearches && recentSearches.length > 0 ? '!tw-pr-10' : ''}\n                />\n                {recentSearches && recentSearches.length > 0 && (\n                  <RecentSearches\n                    recentSearches={recentSearches}\n                    onSearchItemSelect={handleRecentItemSelect}\n                    renderItem={(verseRef) => formatScrRef(verseRef, 'English')}\n                    getItemKey={(verseRef) =>\n                      `${verseRef.book}-${verseRef.chapterNum}-${verseRef.verseNum}`\n                    }\n                    ariaLabel={localizedStrings?.['%history_recentSearches_ariaLabel%']}\n                    groupHeading={localizedStrings?.['%history_recent%']}\n                  />\n                )}\n              </div>\n              {/* Navigation buttons for previous/next chapter/book */}\n              <div className=\"tw-flex tw-items-center tw-gap-1 tw-border-b tw-pe-2\">\n                {quickNavButtons.map(({ onClick, disabled, title, icon: Icon }) => (\n                  <Button\n                    key={title}\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => {\n                      setIsCommandListHidden(true);\n                      onClick();\n                    }}\n                    disabled={disabled}\n                    className=\"tw-h-10 tw-w-4 tw-p-0\"\n                    title={title}\n                    onKeyDown={handleQuickNavButtonKeyDown}\n                  >\n                    <Icon />\n                  </Button>\n                ))}\n              </div>\n            </div>\n          ) : (\n            <div className=\"tw-flex tw-items-center tw-border-b tw-px-3 tw-py-2\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleBackToBooks}\n                className=\"tw-mr-2 tw-h-6 tw-w-6 tw-p-0\"\n                tabIndex={-1}\n              >\n                {direction === 'ltr' ? (\n                  <ArrowLeft className=\"tw-h-4 tw-w-4\" />\n                ) : (\n                  <ArrowRight className=\"tw-h-4 tw-w-4\" />\n                )}\n              </Button>\n              {selectedBookForChaptersView && (\n                <span tabIndex={-1} className=\"tw-text-sm tw-font-medium\">\n                  {getLocalizedBookName(selectedBookForChaptersView, localizedBookNames)}\n                </span>\n              )}\n            </div>\n          )}\n\n          {/** Body */}\n          {!isCommandListHidden && (\n            <CommandList ref={commandListRef}>\n              {/** Book list mode (also used in case of top matches) */}\n              {viewMode === 'books' && (\n                <>\n                  {/* Book List - Show when we don't have a top match */}\n                  {!topMatch &&\n                    Object.entries(filteredBooksByType).map(([type, books]) => {\n                      if (books.length === 0) return undefined;\n\n                      return (\n                        // We are mapping over filteredBooksByType, which uses Section as key type\n                        // eslint-disable-next-line no-type-assertion/no-type-assertion\n                        <CommandGroup key={type} heading={getSectionLabel(type as Section)}>\n                          {books.map((bookId) => (\n                            <BookItem\n                              key={bookId}\n                              bookId={bookId}\n                              onSelect={(selectedBookId: string) =>\n                                handleBookSelect(selectedBookId)\n                              }\n                              section={getSectionForBook(bookId)}\n                              commandValue={`${bookId} ${ALL_ENGLISH_BOOK_NAMES[bookId]}`}\n                              ref={bookId === scrRef.book ? selectedBookItemRef : undefined}\n                              localizedBookNames={localizedBookNames}\n                            />\n                          ))}\n                        </CommandGroup>\n                      );\n                    })}\n\n                  {/* Top match scripture reference */}\n                  {topMatch && (\n                    <CommandGroup>\n                      <CommandItem\n                        key=\"top-match\"\n                        value={`${topMatch.book} ${ALL_ENGLISH_BOOK_NAMES[topMatch.book]} ${\n                          topMatch.chapterNum || ''\n                        }:${topMatch.verseNum || ''})}`}\n                        onSelect={handleTopMatchSelect}\n                        className=\"tw-font-semibold tw-text-primary\"\n                      >\n                        {formatScrRef(\n                          {\n                            book: topMatch.book,\n                            chapterNum: topMatch.chapterNum ?? 1,\n                            verseNum: topMatch.verseNum ?? 1,\n                          },\n                          localizedBookNames\n                            ? getLocalizedBookId(topMatch.book, localizedBookNames)\n                            : undefined,\n                        )}\n                      </CommandItem>\n                    </CommandGroup>\n                  )}\n\n                  {/* Chapter Selector - Show when we have a top match */}\n                  {topMatch && fetchEndChapter(topMatch.book) > 1 && (\n                    <>\n                      <div className=\"tw-mb-2 tw-px-3 tw-text-sm tw-font-medium tw-text-muted-foreground\">\n                        {getLocalizedBookName(topMatch.book, localizedBookNames)}\n                      </div>\n                      <ChapterGrid\n                        bookId={topMatch.book}\n                        scrRef={scrRef}\n                        onChapterSelect={handleChapterSelect}\n                        setChapterRef={setChapterRef}\n                        isChapterDimmed={doesChapterMatch}\n                        className=\"tw-px-4 tw-pb-4\"\n                      />\n                    </>\n                  )}\n                </>\n              )}\n\n              {/* Basic chapter view mode */}\n              {viewMode === 'chapters' && selectedBookForChaptersView && (\n                <ChapterGrid\n                  bookId={selectedBookForChaptersView}\n                  scrRef={scrRef}\n                  onChapterSelect={handleChapterSelect}\n                  setChapterRef={setChapterRef}\n                  className=\"tw-p-4\"\n                />\n              )}\n            </CommandList>\n          )}\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport default BookChapterControl;\n","import { SerializedVerseRef } from '@sillsdev/scripture';\nimport { LanguageStrings } from 'platform-bible-utils';\n\n/**\n * Object containing all keys used for localization in the BookChapterControl component. If you're\n * using this component in an extension, you can pass it into the useLocalizedStrings hook to easily\n * obtain the localized strings and pass them into the localizedStrings prop of this component\n */\nexport const BOOK_CHAPTER_CONTROL_STRING_KEYS = Object.freeze([\n  '%scripture_section_ot_long%',\n  '%scripture_section_nt_long%',\n  '%scripture_section_dc_long%',\n  '%scripture_section_extra_long%',\n  '%history_recent%',\n  '%history_recentSearches_ariaLabel%',\n] as const);\n\n/** Type definition for the localized strings used in the BookChapterControl component */\nexport type BookChapterControlLocalizedStrings = {\n  [localizedKey in (typeof BOOK_CHAPTER_CONTROL_STRING_KEYS)[number]]?: string;\n};\n\nexport type BookWithOptionalChapterAndVerse = Omit<SerializedVerseRef, 'chapterNum' | 'verseNum'> &\n  Partial<Pick<SerializedVerseRef, 'chapterNum' | 'verseNum'>>;\n\nexport type ViewMode = 'books' | 'chapters';\n\nexport type BookChapterControlProps = {\n  /** The current scripture reference */\n  scrRef: SerializedVerseRef;\n  /** Callback to handle the submission of a selected reference */\n  handleSubmit: (scrRef: SerializedVerseRef) => void;\n  /** Optional additional class name for styling */\n  className?: string;\n  /** Callback to retrieve book IDs that are available in the current context */\n  getActiveBookIds?: () => string[];\n  /**\n   * Optional map of localized book IDs/short names and full names. The key is the standard book ID\n   * (e.g., \"2CH\"), the value contains a localized version of the ID and related book name (e.g. {\n   * localizedId: '2CR', localizedName: '2 CrÃ³nicas' })\n   */\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>;\n  /** Optional localized strings for the component */\n  localizedStrings?: LanguageStrings;\n  /** Array of recent scripture references for quick access */\n  recentSearches?: SerializedVerseRef[];\n  /** Callback to add a new recent scripture reference */\n  onAddRecentSearch?: (scrRef: SerializedVerseRef) => void;\n  /** Optional ID for the popover content for accessibility */\n  id?: string;\n};\n","import React from 'react';\nimport * as LabelPrimitive from '@radix-ui/react-label';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Style variants for the Label component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/label}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/label}\n */\nconst labelVariants = cva(\n  'tw-text-sm tw-font-medium tw-leading-none peer-disabled:tw-cursor-not-allowed peer-disabled:tw-opacity-70',\n);\n\n/**\n * The Label component renders an accessible label associated with controls. This components is\n * built on Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/label}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/label}\n */\nexport const Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root ref={ref} className={cn('pr-twp', labelVariants(), className)} {...props} />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n","import React from 'react';\nimport * as RadioGroupPrimitive from '@radix-ui/react-radio-group';\nimport { Circle } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * Radio Group components providing a set of checkable buttonsâ€”known as radio buttonsâ€”where no more\n * than one of the buttons can be checked at a time. These components are built on Radix UI\n * primitives and styled with Shadcn UI.\n *\n * See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/radio-group See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/radio-group\n */\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn('pr-twp tw-grid tw-gap-2', className)}\n      {...props}\n      ref={ref}\n      dir={dir}\n    />\n  );\n});\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName;\n\n/** @inheritdoc RadioGroup */\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        'pr-twp tw-aspect-square tw-h-4 tw-w-4 tw-rounded-full tw-border tw-border-primary tw-text-primary tw-ring-offset-background focus:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"tw-flex tw-items-center tw-justify-center\">\n        <Circle className=\"tw-h-2.5 tw-w-2.5 tw-fill-current tw-text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  );\n});\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName;\n\nexport { RadioGroup, RadioGroupItem };\n","import { ReactNode, useState } from 'react';\nimport { Check, ChevronDown } from 'lucide-react';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Button, ButtonProps } from '@/components/shadcn-ui/button';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/shadcn-ui/popover';\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/shadcn-ui/command';\nimport { PopoverProps } from '@radix-ui/react-popover';\n\nexport type ComboBoxLabelOption = { label: string; secondaryLabel?: string };\nexport type ComboBoxOption = string | number | ComboBoxLabelOption;\n\n/** Represents a group of options with an optional heading */\nexport type ComboBoxGroup<T> = {\n  /** The heading text for this group of options */\n  groupHeading: string;\n  /** The options within this group */\n  options: readonly T[];\n};\n\nexport type ComboBoxProps<T> = {\n  /** Optional unique identifier */\n  id?: string;\n  /**\n   * List of available options for the dropdown menu. Can be either:\n   *\n   * - A flat array of options (single group, no heading)\n   * - An array of group objects. Each group has a heading and an array of options\n   */\n  options?: readonly T[] | readonly ComboBoxGroup<T>[];\n  /** @deprecated 3 December 2024. Renamed to `buttonClassName` */\n  className?: string;\n  /** Additional css classes to help with unique styling of the combo box button */\n  buttonClassName?: string;\n  /** Additional css classes to help with unique styling of the combo box popover */\n  popoverContentClassName?: string;\n  /**\n   * The selected value that the combo box currently holds. Must be shallow equal to one of the\n   * options entries.\n   */\n  value?: T;\n  /** Triggers when content of textfield is changed */\n  onChange?: (newValue: T) => void;\n  /** Used to determine the string value for a given option. */\n  getOptionLabel?: (option: T) => string;\n  /**\n   * Used to determine the string value to display on the button for the selected value. If not\n   * provided, falls back to `getOptionLabel`.\n   */\n  getButtonLabel?: (option: T) => string;\n  /** Icon to be displayed on the trigger */\n  icon?: ReactNode;\n  /** Text displayed on button if `value` is undefined */\n  buttonPlaceholder?: string;\n  /** Placeholder text for text field */\n  textPlaceholder?: string;\n  /** Text to display when no options match input */\n  commandEmptyMessage?: string;\n  /** Variant of button */\n  buttonVariant?: ButtonProps['variant'];\n  /** Control how the popover menu should be aligned. Defaults to start */\n  alignDropDown?: 'start' | 'center' | 'end';\n  /** Optional boolean to set if trigger should be disabled */\n  isDisabled?: boolean;\n  /** Optional aria-label for the trigger button for accessibility */\n  ariaLabel?: string;\n} & PopoverProps;\n\nfunction getOptionLabelDefault(option: ComboBoxOption): string {\n  if (typeof option === 'string') {\n    return option;\n  }\n  if (typeof option === 'number') {\n    return option.toString();\n  }\n  return option.label;\n}\n\n/**\n * Autocomplete input and command palette with a list of suggestions.\n *\n * Thanks to Shadcn for heavy inspiration and documentation\n * https://ui.shadcn.com/docs/components/combobox\n */\nexport function ComboBox<T extends ComboBoxOption = ComboBoxOption>({\n  id,\n  options = [],\n  className,\n  buttonClassName,\n  popoverContentClassName,\n  value,\n  onChange = () => {},\n  getOptionLabel = getOptionLabelDefault,\n  getButtonLabel,\n  icon = undefined,\n  buttonPlaceholder = '',\n  textPlaceholder = '',\n  commandEmptyMessage = 'No option found',\n  buttonVariant = 'outline',\n  alignDropDown = 'start',\n  isDisabled = false,\n  ariaLabel,\n  ...props\n}: ComboBoxProps<T>) {\n  const [open, setOpen] = useState(false);\n\n  const buttonLabel = getButtonLabel ?? getOptionLabel;\n\n  const isGroupedOptions = (\n    groupOptions: readonly T[] | readonly ComboBoxGroup<T>[],\n  ): groupOptions is readonly ComboBoxGroup<T>[] => {\n    return Boolean(\n      groupOptions.length > 0 &&\n        typeof groupOptions[0] === 'object' &&\n        'options' in groupOptions[0],\n    );\n  };\n\n  const renderCommandItem = (option: T, groupHeading?: string) => {\n    const optionLabel = getOptionLabel(option);\n    const secondaryLabel =\n      typeof option === 'object' && 'secondaryLabel' in option ? option.secondaryLabel : undefined;\n\n    const key = `${groupHeading ?? ''}${optionLabel}${secondaryLabel ?? ''}`;\n\n    return (\n      <CommandItem\n        key={key}\n        value={optionLabel}\n        onSelect={() => {\n          onChange(option);\n          setOpen(false);\n        }}\n        className=\"tw-flex tw-items-center\"\n      >\n        <Check\n          className={cn('tw-me-2 tw-h-4 tw-w-4 tw-shrink-0', {\n            'tw-opacity-0': !value || getOptionLabel(value) !== optionLabel,\n          })}\n        />\n        <span className=\"tw-flex-1 tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap\">\n          {optionLabel}\n          {secondaryLabel && <span className=\"tw-text-muted-foreground\"> Â· {secondaryLabel}</span>}\n        </span>\n      </CommandItem>\n    );\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen} {...props}>\n      <PopoverTrigger asChild>\n        <Button\n          variant={buttonVariant}\n          role=\"combobox\"\n          aria-expanded={open}\n          aria-label={ariaLabel}\n          id={id}\n          className={cn(\n            'tw-flex tw-w-[200px] tw-items-center tw-justify-between tw-overflow-hidden',\n            buttonClassName ?? className,\n          )}\n          disabled={isDisabled}\n        >\n          <div className=\"tw-flex tw-min-w-0 tw-flex-1 tw-items-center tw-overflow-hidden\">\n            {icon && <div className=\"tw-shrink-0 tw-pe-2\">{icon}</div>}\n            <span\n              className={cn(\n                'tw-min-w-0 tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-text-start',\n              )}\n            >\n              {value ? buttonLabel(value) : buttonPlaceholder}\n            </span>\n          </div>\n\n          <ChevronDown className=\"tw-ms-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent\n        align={alignDropDown}\n        className={cn('tw-w-[200px] tw-p-0', popoverContentClassName)}\n      >\n        <Command>\n          <CommandInput placeholder={textPlaceholder} className=\"tw-text-inherit\" />\n          <CommandEmpty>{commandEmptyMessage}</CommandEmpty>\n          <CommandList>\n            {isGroupedOptions(options)\n              ? options.map((group) => (\n                  <CommandGroup key={group.groupHeading} heading={group.groupHeading}>\n                    {group.options.map((option) => renderCommandItem(option, group.groupHeading))}\n                  </CommandGroup>\n                ))\n              : options.map((option) => renderCommandItem(option))}\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport default ComboBox;\n","import { ComboBox } from '@/components/basics/combo-box.component';\nimport { Label } from '@/components/shadcn-ui/label';\nimport { useMemo } from 'react';\n\nexport type ChapterRangeSelectorProps = {\n  /** The selected start chapter */\n  startChapter: number;\n  /** The selected end chapter */\n  endChapter: number;\n  /** Callback function to handle the selection of the start chapter */\n  handleSelectStartChapter: (chapter: number) => void;\n  /** Callback function to handle the selection of the end chapter */\n  handleSelectEndChapter: (chapter: number) => void;\n  /** Flag to disable the component */\n  isDisabled?: boolean;\n  /** The total number of chapters available */\n  chapterCount: number;\n};\n\n/**\n * ChapterRangeSelector is a component that provides a UI for selecting a range of chapters. It\n * consists of two combo boxes for selecting the start and end chapters. The component ensures that\n * the selected start chapter is always less than or equal to the end chapter, and vice versa.\n *\n * @deprecated Jul 18 2025. This component is no longer supported or tested. Use of this component\n *   is discouraged and it may be removed in the future.\n * @param {ChapterRangeSelectorProps} props - The props for the component.\n */\n\nexport function ChapterRangeSelector({\n  startChapter,\n  endChapter,\n  handleSelectStartChapter,\n  handleSelectEndChapter,\n  isDisabled = false,\n  chapterCount,\n}: ChapterRangeSelectorProps) {\n  const chapterOptions = useMemo(\n    () => Array.from({ length: chapterCount }, (_, index) => index + 1),\n    [chapterCount],\n  );\n\n  const onChangeStartChapter = (value: number) => {\n    handleSelectStartChapter(value);\n    if (value > endChapter) {\n      handleSelectEndChapter(value);\n    }\n  };\n\n  const onChangeEndChapter = (value: number) => {\n    handleSelectEndChapter(value);\n    if (value < startChapter) {\n      handleSelectStartChapter(value);\n    }\n  };\n\n  return (\n    <>\n      <Label htmlFor=\"start-chapters-combobox\">Chapters</Label>\n      <ComboBox\n        isDisabled={isDisabled}\n        onChange={onChangeStartChapter}\n        buttonClassName=\"tw-me-2 tw-ms-2 tw-w-20\"\n        key=\"start chapter\"\n        options={chapterOptions}\n        getOptionLabel={(option) => option.toString()}\n        value={startChapter}\n      />\n\n      <Label htmlFor=\"end-chapters-combobox\">to</Label>\n      <ComboBox\n        isDisabled={isDisabled}\n        onChange={onChangeEndChapter}\n        buttonClassName=\"tw-ms-2 tw-w-20\"\n        key=\"end chapter\"\n        options={chapterOptions}\n        getOptionLabel={(option) => option.toString()}\n        value={endChapter}\n      />\n    </>\n  );\n}\n\nexport default ChapterRangeSelector;\n","import { Button } from '@/components/shadcn-ui/button';\nimport { Label } from '@/components/shadcn-ui/label';\nimport { RadioGroup, RadioGroupItem } from '@/components/shadcn-ui/radio-group';\nimport { Canon } from '@sillsdev/scripture';\nimport { LocalizedStringValue } from 'platform-bible-utils';\nimport { useState } from 'react';\nimport {\n  ChapterRangeSelector,\n  ChapterRangeSelectorProps,\n} from '../basics/chapter-range-selector.component';\n\n/** Enumeration of possible book selection modes */\nexport enum BookSelectionMode {\n  CURRENT_BOOK = 'current book',\n  CHOOSE_BOOKS = 'choose books',\n}\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const BOOK_SELECTOR_STRING_KEYS = Object.freeze([\n  '%webView_bookSelector_currentBook%',\n  '%webView_bookSelector_choose%',\n  '%webView_bookSelector_chooseBooks%',\n] as const);\n\nexport type BookSelectorLocalizedStrings = {\n  [localizedBookSelectorKey in (typeof BOOK_SELECTOR_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: BookSelectorLocalizedStrings,\n  key: keyof BookSelectorLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\ntype BookSelectorProps = ChapterRangeSelectorProps & {\n  handleBookSelectionModeChange: (newMode: BookSelectionMode) => void;\n  currentBookName: string;\n  onSelectBooks: () => void;\n  selectedBookIds: string[];\n  localizedStrings: BookSelectorLocalizedStrings;\n};\n\n/**\n * BookSelector is a component that provides an interactive UI for selecting books. It can be set to\n * either allow the user to select a single book or to choose multiple books. In the former case, it\n * will display the range of chapters in the selected book, and in the latter case it will display a\n * list of the selected books.\n *\n * @deprecated Jul 18 2025. This component is no longer supported or tested. Use of this component\n *   is discouraged and it may be removed in the future.\n * @param {BookSelectorProps} props\n * @param {function} props.handleBookSelectionModeChange - Callback function to handle changes in\n *   book selection mode.\n * @param {string} props.currentBookName - The name of the currently selected book.\n * @param {function} props.onSelectBooks - Callback function to handle book selection.\n * @param {string[]} props.selectedBookIds - An array of book IDs that have been selected.\n * @param {BookSelectorLocalizedStrings} props.localizedStrings - Object containing localized\n *   strings for the component.\n */\nexport function BookSelector({\n  handleBookSelectionModeChange,\n  currentBookName,\n  onSelectBooks,\n  selectedBookIds,\n  chapterCount,\n  endChapter,\n  handleSelectEndChapter,\n  startChapter,\n  handleSelectStartChapter,\n  localizedStrings,\n}: BookSelectorProps) {\n  const currentBookText = localizeString(localizedStrings, '%webView_bookSelector_currentBook%');\n  const chooseText = localizeString(localizedStrings, '%webView_bookSelector_choose%');\n  const chooseBooksText = localizeString(localizedStrings, '%webView_bookSelector_chooseBooks%');\n\n  const [bookSelectionMode, setBookSelectionMode] = useState<BookSelectionMode>(\n    BookSelectionMode.CURRENT_BOOK,\n  );\n\n  const onSelectionModeChange = (newMode: BookSelectionMode) => {\n    setBookSelectionMode(newMode);\n    handleBookSelectionModeChange(newMode);\n  };\n\n  return (\n    <RadioGroup\n      className=\"pr-twp tw-flex\"\n      value={bookSelectionMode}\n      // value is always a string but we need it to be BookSelectionMode\n      // eslint-disable-next-line no-type-assertion/no-type-assertion\n      onValueChange={(value: string) => onSelectionModeChange(value as BookSelectionMode)}\n    >\n      <div className=\"tw-flex tw-w-full tw-flex-col tw-gap-4\">\n        <div className=\"tw-grid tw-grid-cols-[25%,25%,50%]\">\n          <div className=\"tw-flex tw-items-center\">\n            <RadioGroupItem value={BookSelectionMode.CURRENT_BOOK} />\n            <Label className=\"tw-ms-1\">{currentBookText}</Label>\n          </div>\n          <Label className=\"tw-flex tw-items-center\">{currentBookName}</Label>\n          <div className=\"tw-flex tw-items-center tw-justify-end\">\n            <ChapterRangeSelector\n              isDisabled={bookSelectionMode === BookSelectionMode.CHOOSE_BOOKS}\n              handleSelectStartChapter={handleSelectStartChapter}\n              handleSelectEndChapter={handleSelectEndChapter}\n              chapterCount={chapterCount}\n              startChapter={startChapter}\n              endChapter={endChapter}\n            />\n          </div>\n        </div>\n        <div className=\"tw-grid tw-grid-cols-[25%,50%,25%]\">\n          <div className=\"tw-flex tw-items-center\">\n            <RadioGroupItem value={BookSelectionMode.CHOOSE_BOOKS} />\n            <Label className=\"tw-ms-1\">{chooseBooksText}</Label>\n          </div>\n          <Label className=\"tw-flex tw-items-center\">\n            {selectedBookIds.map((bookId: string) => Canon.bookIdToEnglishName(bookId)).join(', ')}\n          </Label>\n          <Button\n            disabled={bookSelectionMode === BookSelectionMode.CURRENT_BOOK}\n            onClick={() => onSelectBooks()}\n          >\n            {chooseText}\n          </Button>\n        </div>\n      </div>\n    </RadioGroup>\n  );\n}\n\nexport default BookSelector;\n","import React, { useCallback, useRef, useState } from 'react';\n\n/** Tags of interactive HTML elements to look for in the listbox */\nconst INTERACTIVE_ELEMENT_TAG_SELECTORS = ['input', 'select', 'textarea', 'button'];\n\n/** Roles of interactive HTML elements to look for in the listbox */\nconst INTERACTIVE_ELEMENT_ROLE_SELECTORS = ['button', 'textbox'];\n\n/** Properties of one option contained in a listbox */\nexport interface ListboxOption {\n  /** Unique identifier for the option */\n  id: string;\n}\n\n/** Props for the useListbox hook */\nexport interface UseListboxProps {\n  /** Array of options for the listbox */\n  options: ListboxOption[];\n  /** Callback when the focus changes to a different option */\n  onFocusChange?: (option: ListboxOption) => void;\n  /** Callback to toggle the selection of an option */\n  onOptionSelect?: (option: ListboxOption) => void;\n  /** Callback when a character key is pressed */\n  onCharacterPress?: (char: string) => void;\n}\n\n/**\n * Hook for handling keyboard navigation of a listbox.\n *\n * @param UseListboxProps - The properties for configuring the listbox behavior.\n * @returns An object containing:\n *\n *   - `listboxRef`: A ref to be attached to the listbox container element (e.g., `<ul>`), used for\n *       focus management.\n *   - `activeId`: The id of the currently focused (active) option, or `undefined` if none is focused.\n *   - `selectedId`: The id of the currently selected option, or `undefined` if none is selected.\n *   - `handleKeyDown`: A keyboard event handler to be attached to the listbox container for handling\n *       navigation and selection.\n *   - `focusOption`: A function to programmatically focus a specific option by id.\n */\nexport const useListbox = ({\n  options,\n  onFocusChange,\n  onOptionSelect,\n  onCharacterPress,\n}: UseListboxProps) => {\n  // ul/div ref property expects null and not undefined\n  // eslint-disable-next-line no-null/no-null\n  const listboxRef = useRef<HTMLElement>(null);\n  const [activeId, setActiveId] = useState<string | undefined>(undefined);\n  const [selectedId, setSelectedId] = useState<string | undefined>(undefined);\n\n  const focusOption = useCallback(\n    (id: string) => {\n      setActiveId(id);\n      const option = options.find((opt) => opt.id === id);\n      if (option) {\n        onFocusChange?.(option);\n      }\n\n      const element = document.getElementById(id);\n      if (element) {\n        element.scrollIntoView({ block: 'center' });\n        element.focus();\n      }\n\n      // Ensure aria-activedescendant is set on the listbox container for internal focus tracking\n      if (listboxRef.current) {\n        listboxRef.current.setAttribute('aria-activedescendant', id);\n      }\n    },\n    [onFocusChange, options],\n  );\n\n  const toggleSelectInternal = useCallback(\n    (id: string) => {\n      const option = options.find((opt) => opt.id === id);\n      if (!option) return;\n\n      setSelectedId((prev) => (prev === id ? undefined : id));\n      onOptionSelect?.(option);\n    },\n    [onOptionSelect, options],\n  );\n\n  // Detect if the key event originated from an interactive element inside the currently selected option\n  const isInteractiveElement = (element: HTMLElement | undefined) => {\n    if (!element) return false;\n    const tag = element.tagName.toLowerCase();\n    if (element.isContentEditable) return true;\n    if (INTERACTIVE_ELEMENT_TAG_SELECTORS.includes(tag)) return true;\n    const role = element.getAttribute('role');\n    if (role && INTERACTIVE_ELEMENT_ROLE_SELECTORS.includes(role)) return true;\n    const tabIndex = element.getAttribute('tabindex');\n    if (tabIndex !== undefined && tabIndex !== '-1') return true;\n    return false;\n  };\n\n  const handleKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLElement>) => {\n      // Need to cast event.target to HTMLElement because the keyboard navigation can be used with multiple types of elements\n      // eslint-disable-next-line no-type-assertion/no-type-assertion\n      const targetElement = event.target as HTMLElement;\n      const getElementById = (id?: string) => (id ? document.getElementById(id) : undefined);\n      const selectedElement = getElementById(selectedId);\n      const activeElement = getElementById(activeId);\n\n      // Check if the event target is inside the selected option\n      const isInsideSelected = !!(\n        selectedElement &&\n        targetElement &&\n        selectedElement.contains(targetElement) &&\n        targetElement !== selectedElement\n      );\n      const isInteractiveInsideSelected = isInsideSelected && isInteractiveElement(targetElement);\n\n      // When focus is inside a selected option, don't hijack typical keys; allow an escape hatch back to the option\n      if (isInteractiveInsideSelected) {\n        if (\n          event.key === 'Escape' ||\n          (event.key === 'ArrowLeft' && !targetElement.isContentEditable)\n        ) {\n          if (selectedId) {\n            // Return focus to the selected option root\n            event.preventDefault();\n            event.stopPropagation();\n            const opt = options.find((o) => o.id === selectedId);\n            if (opt) {\n              focusOption(opt.id);\n            }\n          }\n          return;\n        }\n\n        // Handle ArrowUp/ArrowDown to navigate between interactive elements within the selected option\n        if (event.key === 'ArrowDown' || event.key === 'ArrowUp') {\n          if (!selectedElement) return;\n\n          // Get all focusable elements within the selected option\n          const focusableElements = Array.from(\n            selectedElement.querySelectorAll<HTMLElement>(\n              'button:not([disabled]), input:not([disabled]):not([type=\"hidden\"]), textarea:not([disabled]), select:not([disabled]), [href], [tabindex]:not([tabindex=\"-1\"])',\n            ),\n          );\n\n          if (focusableElements.length === 0) return;\n\n          const currentIndex = focusableElements.findIndex((el) => el === targetElement);\n          if (currentIndex === -1) return;\n\n          let nextIndex: number;\n          if (event.key === 'ArrowDown') {\n            nextIndex = Math.min(currentIndex + 1, focusableElements.length - 1);\n          } else {\n            nextIndex = Math.max(currentIndex - 1, 0);\n          }\n\n          if (nextIndex !== currentIndex) {\n            event.preventDefault();\n            event.stopPropagation();\n            focusableElements[nextIndex]?.focus();\n          }\n          return;\n        }\n\n        return; // Do not handle other keys while interacting within the selected option\n      }\n\n      const currentIndex = options.findIndex((opt) => opt.id === activeId);\n      let nextIndex = currentIndex;\n\n      switch (event.key) {\n        case 'ArrowDown':\n          nextIndex = Math.min(currentIndex + 1, options.length - 1);\n          event.preventDefault();\n          break;\n        case 'ArrowUp':\n          nextIndex = Math.max(currentIndex - 1, 0);\n          event.preventDefault();\n          break;\n        case 'Home':\n          nextIndex = 0;\n          event.preventDefault();\n          break;\n        case 'End':\n          nextIndex = options.length - 1;\n          event.preventDefault();\n          break;\n        case ' ':\n        case 'Enter':\n          if (activeId) {\n            toggleSelectInternal(activeId);\n          }\n          event.preventDefault();\n          event.stopPropagation();\n          return;\n        case 'ArrowRight': {\n          // If on an option, try to move focus into its first focusable control\n          const container = activeElement;\n          if (container) {\n            const preferred = container.querySelector<HTMLElement>(\n              'input:not([disabled]):not([type=\"hidden\"]), textarea:not([disabled]), select:not([disabled])',\n            );\n            const fallback = container.querySelector<HTMLElement>(\n              'button:not([disabled]), [href], [tabindex]:not([tabindex=\"-1\"]), [contenteditable=\"true\"]',\n            );\n            const toFocus = preferred ?? fallback;\n            if (toFocus) {\n              event.preventDefault();\n              toFocus.focus();\n              return;\n            }\n          }\n          break;\n        }\n        default:\n          // Only handle character keys when not inside an interactive element\n          if (event.key.length === 1 && !event.metaKey && !event.ctrlKey && !event.altKey) {\n            // Don't intercept typing in interactive elements\n            const isInInteractiveElement = isInteractiveElement(targetElement);\n            if (!isInInteractiveElement) {\n              onCharacterPress?.(event.key);\n              event.preventDefault();\n            }\n          }\n          return;\n      }\n\n      const nextOption = options[nextIndex];\n      if (nextOption) focusOption(nextOption.id);\n    },\n    [options, focusOption, activeId, selectedId, toggleSelectInternal, onCharacterPress],\n  );\n\n  return {\n    listboxRef,\n    activeId,\n    selectedId,\n    /** Keyboard event handler for listbox navigation and selection */\n    handleKeyDown,\n    /** Focus an option by its ID */\n    focusOption,\n  };\n};\n","import React from 'react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * The Card component displays a card with header, content, and footer. This component is built and\n * styled with Shadcn UI. See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/card\n */\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        'pr-twp tw-rounded-lg tw-border tw-bg-card tw-text-card-foreground tw-shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nCard.displayName = 'Card';\n\n/** @inheritdoc Card */\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('pr-twp tw-flex tw-flex-col tw-space-y-1.5 tw-p-6', className)}\n      {...props}\n    />\n  ),\n);\nCardHeader.displayName = 'CardHeader';\n\n/** @inheritdoc Card */\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h3\n      ref={ref}\n      className={cn(\n        'pr-twp tw-text-2xl tw-font-semibold tw-leading-none tw-tracking-tight',\n        className,\n      )}\n      {...props}\n    >\n      {/* added because of https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/main/docs/rules/heading-has-content.md  */}\n      {props.children}\n    </h3>\n  ),\n);\nCardTitle.displayName = 'CardTitle';\n\n/** @inheritdoc Card */\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p ref={ref} className={cn('pr-twp tw-text-sm tw-text-muted-foreground', className)} {...props} />\n));\nCardDescription.displayName = 'CardDescription';\n\n/** @inheritdoc Card */\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('pr-twp tw-p-6 tw-pt-0', className)} {...props} />\n  ),\n);\nCardContent.displayName = 'CardContent';\n\n/** @inheritdoc Card */\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('pr-twp tw-flex tw-items-center tw-p-6 tw-pt-0', className)}\n      {...props}\n    />\n  ),\n);\nCardFooter.displayName = 'CardFooter';\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","import React from 'react';\nimport * as SeparatorPrimitive from '@radix-ui/react-separator';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * The Separator component visually or semantically separates content. This component is built on\n * Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/separator}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/separator}\n */\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(({ className, orientation = 'horizontal', decorative = true, ...props }, ref) => (\n  <SeparatorPrimitive.Root\n    ref={ref}\n    decorative={decorative}\n    orientation={orientation}\n    className={cn(\n      'pr-twp tw-shrink-0 tw-bg-border',\n      orientation === 'horizontal' ? 'tw-h-[1px] tw-w-full' : 'tw-h-full tw-w-[1px]',\n      className,\n    )}\n    {...props}\n  />\n));\nSeparator.displayName = SeparatorPrimitive.Root.displayName;\n\nexport { Separator };\n","import React from 'react';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Style variants for the Badge component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/badge}\n */\nconst badgeVariants = cva(\n  'pr-twp tw-inline-flex tw-items-center tw-rounded-full tw-px-2.5 tw-py-0.5 tw-text-xs tw-font-semibold tw-transition-colors focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-2',\n  {\n    variants: {\n      variant: {\n        default:\n          'tw-border tw-border-transparent tw-bg-primary tw-text-primary-foreground hover:tw-bg-primary/80',\n        secondary:\n          'tw-border tw-border-transparent tw-bg-secondary tw-text-secondary-foreground hover:tw-bg-secondary/80',\n        muted:\n          'tw-border tw-border-transparent tw-bg-muted tw-text-muted-foreground hover:tw-bg-muted/80',\n        destructive:\n          'tw-border tw-border-transparent tw-bg-destructive tw-text-destructive-foreground hover:tw-bg-destructive/80',\n        outline: 'tw-border tw-text-foreground',\n        blueIndicator: 'tw-w-[5px] tw-h-[5px] tw-bg-blue-400 tw-px-0',\n        mutedIndicator: 'tw-w-[5px] tw-h-[5px] tw-bg-zinc-400 tw-px-0',\n        ghost: 'hover:tw-bg-accent hover:tw-text-accent-foreground tw-text-mu',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n);\n\n/**\n * Props for the Badge component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/badge}\n */\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\n/**\n * The Badge component displays a badge or a component that looks like a badge. The component is\n * built and styled by Shadcn UI.\n *\n * @param BadgeProps\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/badge}\n */\nconst Badge = React.forwardRef<HTMLDivElement, BadgeProps>(\n  ({ className, variant, ...props }, ref) => {\n    return (\n      <div ref={ref} className={cn('pr-twp', badgeVariants({ variant }), className)} {...props} />\n    );\n  },\n);\n\nBadge.displayName = 'Badge';\n\nexport { Badge, badgeVariants };\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{createContext as n,useContext as e}from\"react\";const r=n(null);function t(n,e){let r=null;return null!=n&&(r=n[1]),{getTheme:function(){return null!=e?e:null!=r?r.getTheme():null}}}function o(){const n=e(r);return null==n&&function(n,...e){const r=new URL(\"https://lexical.dev/docs/error\"),t=new URLSearchParams;t.append(\"code\",n);for(const n of e)t.append(\"v\",n);throw r.search=t.toString(),Error(`Minified Lexical error #${n}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),n}export{r as LexicalComposerContext,t as createLexicalComposerContext,o as useLexicalComposerContext};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{createLexicalComposerContext as e,LexicalComposerContext as t}from\"@lexical/react/LexicalComposerContext\";import{createEditor as o,$getRoot as n,$createParagraphNode as i,$getSelection as r,HISTORY_MERGE_TAG as a}from\"lexical\";import{useLayoutEffect as c,useEffect as l,useMemo as d}from\"react\";import{jsx as s}from\"react/jsx-runtime\";const m=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,u=m?c:l,p={tag:a};function f({initialConfig:a,children:c}){const l=d((()=>{const{theme:t,namespace:c,nodes:l,onError:d,editorState:s,html:u}=a,f=e(null,t),E=o({editable:a.editable,html:u,namespace:c,nodes:l,onError:e=>d(e,E),theme:t});return function(e,t){if(null===t)return;if(void 0===t)e.update((()=>{const t=n();if(t.isEmpty()){const o=i();t.append(o);const n=m?document.activeElement:null;(null!==r()||null!==n&&n===e.getRootElement())&&o.select()}}),p);else if(null!==t)switch(typeof t){case\"string\":{const o=e.parseEditorState(t);e.setEditorState(o,p);break}case\"object\":e.setEditorState(t,p);break;case\"function\":e.update((()=>{n().isEmpty()&&t(e)}),p)}}(E,s),[E,f]}),[]);return u((()=>{const e=a.editable,[t]=l;t.setEditable(void 0===e||e)}),[]),s(t.Provider,{value:l,children:c})}export{f as LexicalComposer};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as e}from\"@lexical/react/LexicalComposerContext\";import{HISTORY_MERGE_TAG as t}from\"lexical\";import{useLayoutEffect as o,useEffect as i}from\"react\";const r=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o:i;function n({ignoreHistoryMergeTagChange:o=!0,ignoreSelectionChange:i=!1,onChange:n}){const[a]=e();return r((()=>{if(n)return a.registerUpdateListener((({editorState:e,dirtyElements:r,dirtyLeaves:d,prevEditorState:s,tags:c})=>{i&&0===r.size&&0===d.size||o&&c.has(t)||s.isEmpty()||n(e,a,c)}))}),[a,o,i,n]),null}export{n as OnChangePlugin};\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure. Also,\n * modifications have been made to integrate with our codebase.\n *\n * Original file location: src/components/editor/themes/editor-theme.ts\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n */\n\nimport { EditorThemeClasses } from 'lexical';\n\nimport './editor-theme.css';\n\nexport const editorTheme: EditorThemeClasses = {\n  ltr: 'tw-text-left',\n  rtl: 'tw-text-right',\n  heading: {\n    h1: 'tw-scroll-m-20 tw-text-4xl tw-font-extrabold tw-tracking-tight lg:tw-text-5xl',\n    h2: 'tw-scroll-m-20 tw-border-b tw-pb-2 tw-text-3xl tw-font-semibold tw-tracking-tight first:tw-mt-0',\n    h3: 'tw-scroll-m-20 tw-text-2xl tw-font-semibold tw-tracking-tight',\n    h4: 'tw-scroll-m-20 tw-text-xl tw-font-semibold tw-tracking-tight',\n    h5: 'tw-scroll-m-20 tw-text-lg tw-font-semibold tw-tracking-tight',\n    h6: 'tw-scroll-m-20 tw-text-base tw-font-semibold tw-tracking-tight',\n  },\n  paragraph: 'tw-outline-none',\n  quote: 'tw-mt-6 tw-border-l-2 tw-pl-6 tw-italic',\n  link: 'tw-text-blue-600 hover:tw-underline hover:tw-cursor-pointer',\n  list: {\n    checklist: 'tw-relative',\n    listitem: 'tw-mx-8',\n    listitemChecked:\n      'tw-relative tw-mx-2 tw-px-6 tw-list-none tw-outline-none tw-line-through before:tw-content-[\"\"] before:tw-w-4 before:tw-h-4 before:tw-top-0.5 before:tw-left-0 before:tw-cursor-pointer before:tw-block before:tw-bg-cover before:tw-absolute before:tw-border before:tw-border-primary before:tw-rounded before:tw-bg-primary before:tw-bg-no-repeat after:tw-content-[\"\"] after:tw-cursor-pointer after:tw-border-white after:tw-border-solid after:tw-absolute after:tw-block after:tw-top-[6px] after:tw-w-[3px] after:tw-left-[7px] after:tw-right-[7px] after:tw-h-[6px] after:tw-rotate-45 after:tw-border-r-2 after:tw-border-b-2 after:tw-border-l-0 after:tw-border-t-0',\n    listitemUnchecked:\n      'tw-relative tw-mx-2 tw-px-6 tw-list-none tw-outline-none before:tw-content-[\"\"] before:tw-w-4 before:tw-h-4 before:tw-top-0.5 before:tw-left-0 before:tw-cursor-pointer before:tw-block before:tw-bg-cover before:tw-absolute before:tw-border before:tw-border-primary before:tw-rounded',\n    nested: {\n      listitem: 'tw-list-none before:tw-hidden after:tw-hidden',\n    },\n    ol: 'tw-m-0 tw-p-0 tw-list-decimal [&>li]:tw-mt-2',\n    olDepth: [\n      'tw-list-outside !tw-list-decimal',\n      'tw-list-outside !tw-list-[upper-roman]',\n      'tw-list-outside !tw-list-[lower-roman]',\n      'tw-list-outside !tw-list-[upper-alpha]',\n      'tw-list-outside !tw-list-[lower-alpha]',\n    ],\n    ul: 'tw-m-0 tw-p-0 tw-list-outside [&>li]:tw-mt-2',\n    ulDepth: [\n      'tw-list-outside !tw-list-disc',\n      'tw-list-outside !tw-list-disc',\n      'tw-list-outside !tw-list-disc',\n      'tw-list-outside !tw-list-disc',\n      'tw-list-outside !tw-list-disc',\n    ],\n  },\n  hashtag: 'tw-text-blue-600 tw-bg-blue-100 tw-rounded-md tw-px-1',\n  text: {\n    bold: 'tw-font-bold',\n    code: 'tw-bg-gray-100 tw-p-1 tw-rounded-md',\n    italic: 'tw-italic',\n    strikethrough: 'tw-line-through',\n    subscript: 'tw-sub',\n    superscript: 'tw-sup',\n    underline: 'tw-underline',\n    underlineStrikethrough: 'tw-underline tw-line-through',\n  },\n  image: 'tw-relative tw-inline-block tw-user-select-none tw-cursor-default editor-image',\n  inlineImage:\n    'tw-relative tw-inline-block tw-user-select-none tw-cursor-default inline-editor-image',\n  keyword: 'tw-text-purple-900 tw-font-bold',\n  code: 'EditorTheme__code',\n  codeHighlight: {\n    atrule: 'EditorTheme__tokenAttr',\n    attr: 'EditorTheme__tokenAttr',\n    boolean: 'EditorTheme__tokenProperty',\n    builtin: 'EditorTheme__tokenSelector',\n    cdata: 'EditorTheme__tokenComment',\n    char: 'EditorTheme__tokenSelector',\n    class: 'EditorTheme__tokenFunction',\n    'class-name': 'EditorTheme__tokenFunction',\n    comment: 'EditorTheme__tokenComment',\n    constant: 'EditorTheme__tokenProperty',\n    deleted: 'EditorTheme__tokenProperty',\n    doctype: 'EditorTheme__tokenComment',\n    entity: 'EditorTheme__tokenOperator',\n    function: 'EditorTheme__tokenFunction',\n    important: 'EditorTheme__tokenVariable',\n    inserted: 'EditorTheme__tokenSelector',\n    keyword: 'EditorTheme__tokenAttr',\n    namespace: 'EditorTheme__tokenVariable',\n    number: 'EditorTheme__tokenProperty',\n    operator: 'EditorTheme__tokenOperator',\n    prolog: 'EditorTheme__tokenComment',\n    property: 'EditorTheme__tokenProperty',\n    punctuation: 'EditorTheme__tokenPunctuation',\n    regex: 'EditorTheme__tokenVariable',\n    selector: 'EditorTheme__tokenSelector',\n    string: 'EditorTheme__tokenSelector',\n    symbol: 'EditorTheme__tokenProperty',\n    tag: 'EditorTheme__tokenProperty',\n    url: 'EditorTheme__tokenOperator',\n    variable: 'EditorTheme__tokenVariable',\n  },\n  characterLimit: '!tw-bg-destructive/50',\n  table: 'EditorTheme__table tw-w-fit tw-overflow-scroll tw-border-collapse',\n  tableCell:\n    'EditorTheme__tableCell tw-w-24 tw-relative tw-border tw-px-4 tw-py-2 tw-text-left [&[align=center]]:tw-text-center [&[align=right]]:tw-text-right',\n  tableCellActionButton:\n    'EditorTheme__tableCellActionButton tw-bg-background tw-block tw-border-0 tw-rounded-2xl tw-w-5 tw-h-5 tw-text-foreground tw-cursor-pointer',\n  tableCellActionButtonContainer:\n    'EditorTheme__tableCellActionButtonContainer tw-block tw-right-1 tw-top-1.5 tw-absolute tw-z-10 tw-w-5 tw-h-5',\n  tableCellEditing: 'EditorTheme__tableCellEditing tw-rounded-sm tw-shadow-sm',\n  tableCellHeader:\n    'EditorTheme__tableCellHeader tw-bg-muted tw-border tw-px-4 tw-py-2 tw-text-left tw-font-bold [&[align=center]]:tw-text-center [&[align=right]]:tw-text-right',\n  tableCellPrimarySelected:\n    'EditorTheme__tableCellPrimarySelected tw-border tw-border-primary tw-border-solid tw-block tw-h-[calc(100%-2px)] tw-w-[calc(100%-2px)] tw-absolute tw--left-[1px] tw--top-[1px] tw-z-10 ',\n  tableCellResizer:\n    'EditorTheme__tableCellResizer tw-absolute tw--right-1 tw-h-full tw-w-2 tw-cursor-ew-resize tw-z-10 tw-top-0',\n  tableCellSelected: 'EditorTheme__tableCellSelected tw-bg-muted',\n  tableCellSortedIndicator:\n    'EditorTheme__tableCellSortedIndicator tw-block tw-opacity-50 tw-absolute tw-bottom-0 tw-left-0 tw-w-full tw-h-1 tw-bg-muted',\n  tableResizeRuler:\n    'EditorTheme__tableCellResizeRuler tw-block tw-absolute tw-w-[1px] tw-h-full tw-bg-primary tw-top-0',\n  tableRowStriping: 'EditorTheme__tableRowStriping tw-m-0 tw-border-t tw-p-0 even:tw-bg-muted',\n  tableSelected: 'EditorTheme__tableSelected tw-ring-2 tw-ring-primary tw-ring-offset-2',\n  tableSelection: 'EditorTheme__tableSelection tw-bg-transparent',\n  layoutItem: 'tw-border tw-border-dashed tw-px-4 tw-py-2',\n  layoutContainer: 'tw-grid tw-gap-2.5 tw-my-2.5 tw-mx-0',\n  autocomplete: 'tw-text-muted-foreground',\n  blockCursor: '',\n  embedBlock: {\n    base: 'tw-user-select-none',\n    focus: 'tw-ring-2 tw-ring-primary tw-ring-offset-2',\n  },\n  hr: 'tw-p-0.5 tw-border-none tw-my-1 tw-mx-0 tw-cursor-pointer after:tw-content-[\"\"] after:tw-block after:tw-h-0.5 after:tw-bg-muted selected:tw-ring-2 selected:tw-ring-primary selected:tw-ring-offset-2 selected:tw-user-select-none',\n  indent: '[--lexical-indent-base-value:40px]',\n  mark: '',\n  markOverlap: '',\n};\n","import React from 'react';\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/** @inheritdoc Tooltip */\nconst TooltipProvider = TooltipPrimitive.Provider;\n\n/**\n * Tooltip components provide a popover that displays information related to an element when hovered\n * or focused. These components are built on Radix UI primitives and styled with Shadcn UI. See\n * Shadcn UI Documentation: https://ui.shadcn.com/docs/components/tooltip See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/tooltip\n */\nconst Tooltip = TooltipPrimitive.Root;\n\n/** @inheritdoc Tooltip */\nconst TooltipTrigger = TooltipPrimitive.Trigger;\n\n/** @inheritdoc Tooltip */\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      'pr-twp tw-z-50 tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-px-3 tw-py-1.5 tw-text-sm tw-text-popover-foreground tw-shadow-md tw-animate-in tw-fade-in-0 tw-zoom-in-95 data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=closed]:tw-zoom-out-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nTooltipContent.displayName = TooltipPrimitive.Content.displayName;\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure.\n *\n * Original file location: src/components/blocks/editor-00/nodes.ts\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n */\n\nimport { HeadingNode, QuoteNode } from '@lexical/rich-text';\nimport { Klass, LexicalNode, LexicalNodeReplacement, ParagraphNode, TextNode } from 'lexical';\n\nexport const nodes: ReadonlyArray<Klass<LexicalNode> | LexicalNodeReplacement> = [\n  HeadingNode,\n  ParagraphNode,\n  TextNode,\n  QuoteNode,\n];\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport*as r from\"react\";import{jsx as e}from\"react/jsx-runtime\";function t(r,e){return t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},t(r,e)}var o={error:null},n=function(e){var n,a;function s(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(r=e.call.apply(e,[this].concat(n))||this).state=o,r.resetErrorBoundary=function(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];null==r.props.onReset||(e=r.props).onReset.apply(e,o),r.reset()},r}a=e,(n=s).prototype=Object.create(a.prototype),n.prototype.constructor=n,t(n,a),s.getDerivedStateFromError=function(r){return{error:r}};var i=s.prototype;return i.reset=function(){this.setState(o)},i.componentDidCatch=function(r,e){var t,o;null==(t=(o=this.props).onError)||t.call(o,r,e)},i.componentDidUpdate=function(r,e){var t,o,n,a,s=this.state.error,i=this.props.resetKeys;null!==s&&null!==e.error&&(void 0===(n=r.resetKeys)&&(n=[]),void 0===(a=i)&&(a=[]),n.length!==a.length||n.some((function(r,e){return!Object.is(r,a[e])})))&&(null==(t=(o=this.props).onResetKeysChange)||t.call(o,r.resetKeys,i),this.reset())},i.render=function(){var e=this.state.error,t=this.props,o=t.fallbackRender,n=t.FallbackComponent,a=t.fallback;if(null!==e){var s={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(a))return a;if(\"function\"==typeof o)return o(s);if(n)return r.createElement(n,s);throw new Error(\"react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop\")}return this.props.children},s}(r.Component);function a({children:r,onError:t}){return e(n,{fallback:e(\"div\",{style:{border:\"1px solid #f00\",color:\"#f00\",padding:\"8px\"},children:\"An error was thrown.\"}),onError:t,children:r})}export{a as LexicalErrorBoundary};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as e}from\"@lexical/react/LexicalComposerContext\";import{useLayoutEffect as n,useEffect as t,useMemo as i,useState as r,useRef as o}from\"react\";const c=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n:t;function u(e){return{initialValueFn:()=>e.isEditable(),subscribe:n=>e.registerEditableListener(n)}}function a(){return function(n){const[t]=e(),u=i((()=>n(t)),[t,n]),[a,l]=r((()=>u.initialValueFn())),d=o(a);return c((()=>{const{initialValueFn:e,subscribe:n}=u,t=e();return d.current!==t&&(d.current=t,l(t)),n((e=>{d.current=e,l(e)}))}),[u,n]),a}(u)}export{a as useLexicalEditable};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$getRoot as t,$isDecoratorNode as e,$isElementNode as n,$isParagraphNode as r,$isTextNode as i,TextNode as o,$createTextNode as l}from\"lexical\";function s(){return t().getTextContent()}function f(t,e=!0){if(t)return!1;let n=s();return e&&(n=n.trim()),\"\"===n}function u(t,e){return()=>f(t,e)}function c(o){if(!f(o,!1))return!1;const l=t().getChildren(),s=l.length;if(s>1)return!1;for(let t=0;t<s;t++){const o=l[t];if(e(o))return!1;if(n(o)){if(!r(o))return!1;if(0!==o.__indent)return!1;const e=o.getChildren(),n=e.length;for(let r=0;r<n;r++){const n=e[t];if(!i(n))return!1}}}return!0}function g(t){return()=>c(t)}function a(t,e){let r=t.getFirstChild(),o=0;t:for(;null!==r;){if(n(r)){const t=r.getFirstChild();if(null!==t){r=t;continue}}else if(i(r)){const t=r.getTextContentSize();if(o+t>e)return{node:r,offset:e-o};o+=t}const t=r.getNextSibling();if(null!==t){r=t;continue}let l=r.getParent();for(;null!==l;){const t=l.getNextSibling();if(null!==t){r=t;continue t}l=l.getParent()}break}return null}function d(t,...e){const n=new URL(\"https://lexical.dev/docs/error\"),r=new URLSearchParams;r.append(\"code\",t);for(const t of e)r.append(\"v\",t);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function x(t,e,n,r){const s=t=>t instanceof n,f=t=>{const e=l(t.getTextContent());e.setFormat(t.getFormat()),t.replace(e)};return[t.registerNodeTransform(o,(t=>{if(!t.isSimpleText())return;let n,o=t.getPreviousSibling(),l=t.getTextContent(),u=t;if(i(o)){const n=o.getTextContent(),r=e(n+l);if(s(o)){if(null===r||0!==(t=>t.getLatest().__mode)(o))return void f(o);{const e=r.end-n.length;if(e>0){const r=n+l.slice(0,e);if(o.select(),o.setTextContent(r),e===l.length)t.remove();else{const n=l.slice(e);t.setTextContent(n)}return}}}else if(null===r||r.start<n.length)return}let c=0;for(;;){n=e(l);let t,g=null===n?\"\":l.slice(n.end);if(l=g,\"\"===g){const t=u.getNextSibling();if(i(t)){g=u.getTextContent()+t.getTextContent();const n=e(g);if(null===n)return void(s(t)?f(t):t.markDirty());if(0!==n.start)return}}if(null===n)return;if(0===n.start&&i(o)&&o.isTextEntity()){c+=n.end;continue}0===n.start?[t,u]=u.splitText(n.end):[,t,u]=u.splitText(n.start+c,n.end+c),void 0===t&&d(165,\"nodeToReplace\");const a=r(t);if(a.setFormat(t.getFormat()),t.replace(a),null==u)return;c=0,o=a}})),t.registerNodeTransform(n,(t=>{const n=t.getTextContent(),r=e(n);if(null===r||0!==r.start)return void f(t);if(n.length>r.end)return void t.splitText(r.end);const o=t.getPreviousSibling();i(o)&&o.isTextEntity()&&(f(o),f(t));const l=t.getNextSibling();i(l)&&l.isTextEntity()&&(f(l),s(t)&&f(t))}))]}export{c as $canShowPlaceholder,g as $canShowPlaceholderCurry,a as $findTextIntersectionFromCharacters,f as $isRootTextContentEmpty,u as $isRootTextContentEmptyCurry,s as $rootTextContent,x as registerLexicalTextEntity};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$isTextNode as e,$isTokenOrSegmented as t,$getCharacterOffsets as n,$isElementNode as o,$isRootNode as l,$getNodeByKey as r,$getPreviousSelection as s,$createTextNode as i,$isRangeSelection as c,$getSelection as f,$caretRangeFromSelection as u,$createRangeSelection as g,INTERNAL_$isBlock as a,$setSelection as d,$isRootOrShadowRoot as p,$hasAncestor as h,$isLeafNode as y,$caretFromPoint as m,$isExtendableTextPointCaret as S,$extendCaretToRange as x,$isChildCaret as T,$isDecoratorNode as w,$getEditor as v}from\"lexical\";export{$cloneWithProperties,$selectAll}from\"lexical\";function N(e,...t){const n=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",e);for(const e of t)o.append(\"v\",e);throw n.search=o.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const C=new Map;function P(e){let t=e;for(;null!=t;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function K(e){const t=e.parentNode;if(null==t)throw new Error(\"Should never happen\");return[t,Array.from(t.childNodes).indexOf(e)]}function E(t,n,o,l,r){const s=n.getKey(),i=l.getKey(),c=document.createRange();let f=t.getElementByKey(s),u=t.getElementByKey(i),g=o,a=r;if(e(n)&&(f=P(f)),e(l)&&(u=P(u)),void 0===n||void 0===l||null===f||null===u)return null;\"BR\"===f.nodeName&&([f,g]=K(f)),\"BR\"===u.nodeName&&([u,a]=K(u));const d=f.firstChild;f===u&&null!=d&&\"BR\"===d.nodeName&&0===g&&0===a&&(a=1);try{c.setStart(f,g),c.setEnd(u,a)}catch(e){return null}return!c.collapsed||g===a&&s===i||(c.setStart(u,a),c.setEnd(f,g)),c}function k(e,t){const n=e.getRootElement();if(null===n)return[];const o=n.getBoundingClientRect(),l=getComputedStyle(n),r=parseFloat(l.paddingLeft)+parseFloat(l.paddingRight),s=Array.from(t.getClientRects());let i,c=s.length;s.sort(((e,t)=>{const n=e.top-t.top;return Math.abs(n)<=3?e.left-t.left:n}));for(let e=0;e<c;e++){const t=s[e],n=i&&i.top<=t.top&&i.top+i.height>t.top&&i.left+i.width>t.left,l=t.width+r===o.width;n||l?(s.splice(e--,1),c--):i=t}return s}function I(e){const t={};if(!e)return t;const n=e.split(\";\");for(const e of n)if(\"\"!==e){const[n,o]=e.split(/:([^]+)/);n&&o&&(t[n.trim()]=o.trim())}return t}function B(e){let t=C.get(e);return void 0===t&&(t=I(e),C.set(e,t)),t}function F(e){let t=\"\";for(const n in e)n&&(t+=`${n}: ${e[n]};`);return t}function b(e,o){const l=e.getStartEndPoints();if(o.isSelected(e)&&!t(o)&&null!==l){const[t,r]=l,s=e.isBackward(),i=t.getNode(),c=r.getNode(),f=o.is(i),u=o.is(c);if(f||u){const[t,l]=n(e),r=i.is(c),f=o.is(s?c:i),u=o.is(s?i:c);let g,a=0;if(r)a=t>l?l:t,g=t>l?t:l;else if(f){a=s?l:t,g=void 0}else if(u){a=0,g=s?t:l}o.__text=o.__text.slice(a,g)}}return o}function O(e){if(\"text\"===e.type)return e.offset===e.getNode().getTextContentSize();const t=e.getNode();return o(t)||N(177),e.offset===t.getChildrenSize()}function R(t,n,f){let u=n.getNode(),g=f;if(o(u)){const e=u.getDescendantByIndex(n.offset);null!==e&&(u=e)}for(;g>0&&null!==u;){if(o(u)){const e=u.getLastDescendant();null!==e&&(u=e)}let f=u.getPreviousSibling(),a=0;if(null===f){let e=u.getParentOrThrow(),t=e.getPreviousSibling();for(;null===t;){if(e=e.getParent(),null===e){f=null;break}t=e.getPreviousSibling()}null!==e&&(a=e.isInline()?0:2,f=t)}let d=u.getTextContent();\"\"===d&&o(u)&&!u.isInline()&&(d=\"\\n\\n\");const p=d.length;if(!e(u)||g>=p){const e=u.getParent();u.remove(),null==e||0!==e.getChildrenSize()||l(e)||e.remove(),g-=p+a,u=f}else{const o=u.getKey(),l=t.getEditorState().read((()=>{const t=r(o);return e(t)&&t.isSimpleText()?t.getTextContent():null})),f=p-g,a=d.slice(0,f);if(null!==l&&l!==d){const e=s();let t=u;if(u.isSimpleText())u.setTextContent(l);else{const e=i(l);u.replace(e),t=e}if(c(e)&&e.isCollapsed()){const n=e.anchor.offset;t.select(n,n)}}else if(u.isSimpleText()){const e=n.key===o;let t=n.offset;t<g&&(t=p);const l=e?t-g:0,r=e?t:f;if(e&&0===l){const[e]=u.splitText(l,r);e.remove()}else{const[,e]=u.splitText(l,r);e.remove()}}else{const e=i(a);u.replace(e)}g=0}}}function z(e){const t=e.getStyle(),n=I(t);C.set(t,n)}function A(t,n){(c(t)?t.isCollapsed():e(t)||o(t))||N(280);const l=B(c(t)?t.style:e(t)?t.getStyle():t.getTextStyle()),r=Object.entries(n).reduce(((e,[n,o])=>(\"function\"==typeof o?e[n]=o(l[n],t):null===o?delete e[n]:e[n]=o,e)),{...l}),s=F(r);c(t)||e(t)?t.setStyle(s):t.setTextStyle(s),C.set(s,r)}function M(e,t){if(c(e)&&e.isCollapsed()){A(e,t);const n=e.anchor.getNode();o(n)&&n.isEmpty()&&A(n,t)}L((e=>{A(e,t)}))}function L(n){const o=f();if(!o)return;const l=new Map;if(c(o))for(const e of u(o).getTextSlices())e&&l.set(e.caret.origin.getKey(),e.getSliceIndices());const r=o.getNodes();for(const o of r){if(!e(o)||!o.canHaveFormat())continue;const[r,i]=(s=o,l.get(s.getKey())||[0,s.getTextContentSize()]);if(i!==r)if(t(o)||0===r&&i===o.getTextContentSize())n(o);else{n(o.splitText(r,i)[0===r?0:1])}}var s;c(o)&&\"text\"===o.anchor.type&&\"text\"===o.focus.type&&o.anchor.key===o.focus.key&&$(o)}function $(e){if(e.isBackward()){const{anchor:t,focus:n}=e,{key:o,offset:l,type:r}=t;t.set(n.key,n.offset,n.type),n.set(o,l,r)}}function D(e,t){const n=e.getFormatType(),o=e.getIndent();n!==t.getFormatType()&&t.setFormat(n),o!==t.getIndent()&&t.setIndent(o)}function _(e,t,n=D){if(null===e)return;const l=e.getStartEndPoints(),r=new Map;let s=null;if(l){const[e,t]=l;s=g(),s.anchor.set(e.key,e.offset,e.type),s.focus.set(t.key,t.offset,t.type);const n=Z(e.getNode(),a),i=Z(t.getNode(),a);o(n)&&r.set(n.getKey(),n),o(i)&&r.set(i.getKey(),i)}for(const t of e.getNodes())if(o(t)&&a(t))r.set(t.getKey(),t);else if(null===l){const e=Z(t,a);o(e)&&r.set(e.getKey(),e)}for(const[e,o]of r){const l=t();n(o,l),o.replace(l,!0),s&&(e===s.anchor.key&&s.anchor.set(l.getKey(),s.anchor.offset,s.anchor.type),e===s.focus.key&&s.focus.set(l.getKey(),s.focus.offset,s.focus.type))}s&&e.is(f())&&d(s)}function U(e){return e.getNode().isAttached()}function j(e){let t=e;for(;null!==t&&!p(t);){const e=t.getLatest(),n=t.getParent();0===e.getChildrenSize()&&t.remove(!0),t=n}}function H(e,t,n=null){const o=e.getStartEndPoints(),l=o?o[0]:null,r=e.getNodes(),s=r.length;if(null!==l&&(0===s||1===s&&\"element\"===l.type&&0===l.getNode().getChildrenSize())){const e=\"text\"===l.type?l.getNode().getParentOrThrow():l.getNode(),o=e.getChildren();let r=t();return r.setFormat(e.getFormatType()),r.setIndent(e.getIndent()),o.forEach((e=>r.append(e))),n&&(r=n.append(r)),void e.replace(r)}let i=null,c=[];for(let o=0;o<s;o++){const l=r[o];p(l)?(V(e,c,c.length,t,n),c=[],i=l):null===i||null!==i&&h(l,i)?c.push(l):(V(e,c,c.length,t,n),c=[l])}V(e,c,c.length,t,n)}function V(e,t,n,l,r=null){if(0===t.length)return;const i=t[0],f=new Map,u=[];let g=o(i)?i:i.getParentOrThrow();g.isInline()&&(g=g.getParentOrThrow());let a=!1;for(;null!==g;){const e=g.getPreviousSibling();if(null!==e){g=e,a=!0;break}if(g=g.getParentOrThrow(),p(g))break}const h=new Set;for(let e=0;e<n;e++){const n=t[e];o(n)&&0===n.getChildrenSize()&&h.add(n.getKey())}const m=new Set;for(let e=0;e<n;e++){const n=t[e];let r=n.getParent();if(null!==r&&r.isInline()&&(r=r.getParent()),null!==r&&y(n)&&!m.has(n.getKey())){const e=r.getKey();if(void 0===f.get(e)){const t=l();t.setFormat(r.getFormatType()),t.setIndent(r.getIndent()),u.push(t),f.set(e,t),r.getChildren().forEach((e=>{t.append(e),m.add(e.getKey()),o(e)&&e.getChildrenKeys().forEach((e=>m.add(e)))})),j(r)}}else if(h.has(n.getKey())){o(n)||N(179);const e=l();e.setFormat(n.getFormatType()),e.setIndent(n.getIndent()),u.push(e),n.remove(!0)}}if(null!==r)for(let e=0;e<u.length;e++){const t=u[e];r.append(t)}let S=null;if(p(g))if(a)if(null!==r)g.insertAfter(r);else for(let e=u.length-1;e>=0;e--){const t=u[e];g.insertAfter(t)}else{const e=g.getFirstChild();if(o(e)&&(g=e),null===e)if(r)g.append(r);else for(let e=0;e<u.length;e++){const t=u[e];g.append(t),S=t}else if(null!==r)e.insertBefore(r);else for(let t=0;t<u.length;t++){const n=u[t];e.insertBefore(n),S=n}}else if(r)g.insertAfter(r);else for(let e=u.length-1;e>=0;e--){const t=u[e];g.insertAfter(t),S=t}const x=s();c(x)&&U(x.anchor)&&U(x.focus)?d(x.clone()):null!==S?S.selectEnd():e.dirty=!0}function W(e){const t=e.anchor.getNode(),n=l(t)?t:t.getParentOrThrow(),o=v().getElementByKey(n.getKey());if(null===o)return!1;const r=o.ownerDocument.defaultView;if(null===r)return!1;return\"vertical-rl\"===r.getComputedStyle(o).writingMode}function X(e,t){let n=W(e)?!t:t;G(e)&&(n=!n);const l=m(e.focus,n?\"previous\":\"next\");if(S(l))return!1;for(const e of x(l)){if(T(e))return!e.origin.isInline();if(!o(e.origin)){if(w(e.origin))return!0;break}}return!1}function q(e,t,n,o){e.modify(t?\"extend\":\"move\",n,o)}function G(e){const t=e.anchor.getNode();return\"rtl\"===(l(t)?t:t.getParentOrThrow()).getDirection()}function J(e,t,n){const o=G(e);let l;l=W(e)||o?!n:n,q(e,t,l,\"character\")}function Q(e,t,n){const o=B(e.getStyle());return null!==o&&o[t]||n}function Y(t,n,o=\"\"){let l=null;const r=t.getNodes(),s=t.anchor,i=t.focus,f=t.isBackward(),u=f?i.offset:s.offset,g=f?i.getNode():s.getNode();if(c(t)&&t.isCollapsed()&&\"\"!==t.style){const e=B(t.style);if(null!==e&&n in e)return e[n]}for(let t=0;t<r.length;t++){const s=r[t];if((0===t||0!==u||!s.is(g))&&e(s)){const e=Q(s,n,o);if(null===l)l=e;else if(l!==e){l=\"\";break}}}return null===l?o:l}function Z(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}const ee=R;export{z as $addNodeStyle,D as $copyBlockFormatIndent,$ as $ensureForwardRangeSelection,L as $forEachSelectedTextNode,Y as $getSelectionStyleValueForProperty,O as $isAtNodeEnd,G as $isParentElementRTL,q as $moveCaretSelection,J as $moveCharacter,M as $patchStyleText,_ as $setBlocksType,X as $shouldOverrideDefaultCharacterSelection,b as $sliceSelectedTextNodeContent,R as $trimTextContentFromAnchor,H as $wrapNodes,E as createDOMRange,k as createRectsFromDOMRange,F as getCSSFromStyleObject,B as getStyleObjectFromCSS,ee as trimTextContentFromAnchor};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{isHTMLElement as t,$getSelection as e,$isRangeSelection as n,$isElementNode as o,getDOMTextNode as r,$getRoot as i,$getChildCaret as l,$getSiblingCaret as u,$getAdjacentChildCaret as s,$getChildCaretOrSelf as c,makeStepwiseIterator as f,$isChildCaret as a,$cloneWithProperties as d,$setSelection as g,$getPreviousSelection as p,$caretFromPoint as m,$createParagraphNode as h,$normalizeCaret as v,$setSelectionFromCaretRange as y,$getCollapsedCaretRange as w,$getCaretInDirection as x,$splitAtPointCaretNext as E,$isTextPointCaret as S,$isSiblingCaret as A,$rewindSiblingCaret as C,$getState as L,$setState as P}from\"lexical\";export{$splitNode,isBlockDomNode,isHTMLAnchorElement,isHTMLElement,isInlineDomNode}from\"lexical\";import{createRectsFromDOMRange as b}from\"@lexical/selection\";function N(t,...e){const n=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",t);for(const t of e)o.append(\"v\",t);throw n.search=o.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const M=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,R=M&&\"documentMode\"in document?document.documentMode:null,T=M&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),B=M&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),_=!(!M||!(\"InputEvent\"in window)||R)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),k=M&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),K=M&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,H=M&&/Android/.test(navigator.userAgent),O=M&&/^(?=.*Chrome).*/i.test(navigator.userAgent),$=M&&H&&O,D=M&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&!O;function I(...t){const e=[];for(const n of t)if(n&&\"string\"==typeof n)for(const[t]of n.matchAll(/\\S+/g))e.push(t);return e}function j(...t){return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}function F(t){return`${t}px`}const U={attributes:!0,characterData:!0,childList:!0,subtree:!0};function z(e,n,o){let r=null,i=null,l=null,u=[];const s=document.createElement(\"div\");function c(){null===r&&N(182),null===i&&N(183);const{left:t,top:l}=i.getBoundingClientRect(),c=b(e,n);var f,a;s.isConnected||(a=s,(f=i).insertBefore(a,f.firstChild));let d=!1;for(let e=0;e<c.length;e++){const n=c[e],o=u[e]||document.createElement(\"div\"),r=o.style;\"absolute\"!==r.position&&(r.position=\"absolute\",d=!0);const i=F(n.left-t);r.left!==i&&(r.left=i,d=!0);const f=F(n.top-l);r.top!==f&&(o.style.top=f,d=!0);const a=F(n.width);r.width!==a&&(o.style.width=a,d=!0);const g=F(n.height);r.height!==g&&(o.style.height=g,d=!0),o.parentNode!==s&&(s.append(o),d=!0),u[e]=o}for(;u.length>c.length;)u.pop();d&&o(u)}function f(){i=null,r=null,null!==l&&l.disconnect(),l=null,s.remove();for(const t of u)t.remove();u=[]}s.style.position=\"relative\";const a=e.registerRootListener((function n(){const o=e.getRootElement();if(null===o)return f();const u=o.parentElement;if(!t(u))return f();f(),r=o,i=u,l=new MutationObserver((t=>{const o=e.getRootElement(),l=o&&o.parentElement;if(o!==r||l!==i)return n();for(const e of t)if(!s.contains(e.target))return c()})),l.observe(u,U),c()}));return()=>{a(),f()}}function V(t,e,n){if(\"text\"!==t.type&&o(e)){const o=e.getDOMSlot(n);return[o.element,o.getFirstChildOffset()+t.offset]}return[r(n)||n,t.offset]}function W(t,o){let r=null,i=null,l=null,u=null,s=null,c=null,f=()=>{};function a(a){a.read((()=>{const a=e();if(!n(a))return r=null,l=null,u=null,c=null,f(),void(f=()=>{});const[d,g]=function(t){const e=t.getStartEndPoints();return t.isBackward()?[e[1],e[0]]:e}(a),p=d.getNode(),m=p.getKey(),h=d.offset,v=g.getNode(),y=v.getKey(),w=g.offset,x=t.getElementByKey(m),E=t.getElementByKey(y),S=null===r||x!==i||h!==l||m!==r.getKey(),A=null===u||E!==s||w!==c||y!==u.getKey();if((S||A)&&null!==x&&null!==E){const e=function(t,e,n,o,r,i,l){const u=(t._window?t._window.document:document).createRange();return u.setStart(...V(e,n,o)),u.setEnd(...V(r,i,l)),u}(t,d,p,x,g,v,E);f(),f=z(t,e,(t=>{if(void 0===o)for(const e of t){const t=e.style;\"Highlight\"!==t.background&&(t.background=\"Highlight\"),\"HighlightText\"!==t.color&&(t.color=\"HighlightText\"),t.marginTop!==F(-1.5)&&(t.marginTop=F(-1.5)),t.paddingTop!==F(4)&&(t.paddingTop=F(4)),t.paddingBottom!==F(0)&&(t.paddingBottom=F(0))}else o(t)}))}r=p,i=x,l=h,u=v,s=E,c=w}))}return a(t.getEditorState()),j(t.registerUpdateListener((({editorState:t})=>a(t))),(()=>{f()}))}function G(t){let e=null;const n=()=>{const n=getSelection(),o=n&&n.anchorNode,r=t.getRootElement();null!==o&&null!==r&&r.contains(o)?null!==e&&(e(),e=null):null===e&&(e=W(t))};return document.addEventListener(\"selectionchange\",n),()=>{null!==e&&e(),document.removeEventListener(\"selectionchange\",n)}}const q=_,J=M,Q=H,X=$,Y=T,Z=D,tt=O,et=B,nt=K,ot=k;function rt(t,...e){const n=I(...e);n.length>0&&t.classList.add(...n)}function it(t,...e){const n=I(...e);n.length>0&&t.classList.remove(...n)}function lt(t,e){for(const n of e)if(t.type.startsWith(n))return!0;return!1}function ut(t,e){const n=t[Symbol.iterator]();return new Promise(((t,o)=>{const r=[],i=()=>{const{done:l,value:u}=n.next();if(l)return t(r);const s=new FileReader;s.addEventListener(\"error\",o),s.addEventListener(\"load\",(()=>{const t=s.result;\"string\"==typeof t&&r.push({file:u,result:t}),i()})),lt(u,e)?s.readAsDataURL(u):i()};i()}))}function st(t,e){return Array.from(at(t,e))}function ct(t){return t?t.getAdjacentCaret():null}function ft(t,e){return Array.from(ht(t,e))}function at(t,e){return dt(\"next\",t,e)}function dt(t,e,n){const r=i(),d=e||r,g=o(d)?l(d,t):u(d,t),p=pt(d),m=n?s(c(u(n,t))):function(t,e){const n=$t(u(t,e));return n&&n[0]}(d,t);let h=p;return f({hasNext:t=>null!==t,initial:g,map:t=>({depth:h,node:t.origin}),step:t=>{if(t.isSameNodeCaret(m))return null;a(t)&&h++;const e=$t(t);return!e||e[0].isSameNodeCaret(m)?null:(h+=e[1],e[0])}})}function gt(t){const e=$t(u(t,\"next\"));return e&&[e[0].origin,e[1]]}function pt(t){let e=-1;for(let n=t;null!==n;n=n.getParent())e++;return e}function mt(t){const e=$t(c(u(t,\"previous\")),\"root\");return e&&e[0].origin}function ht(t,e){return dt(\"previous\",t,e)}function vt(t,e){let n=t;for(;null!=n;){if(n instanceof e)return n;n=n.getParent()}return null}function yt(t){const e=wt(t,(t=>o(t)&&!t.isInline()));return o(e)||N(4,t.__key),e}const wt=(t,e)=>{let n=t;for(;n!==i()&&null!=n;){if(e(n))return n;n=n.getParent()}return null};function xt(t,e,n,o){const r=t=>t instanceof e;return t.registerNodeTransform(e,(t=>{const e=(t=>{const e=t.getChildren();for(let t=0;t<e.length;t++){const n=e[t];if(r(n))return null}let n=t,o=t;for(;null!==n;)if(o=n,n=n.getParent(),r(n))return{child:o,parent:n};return null})(t);if(null!==e){const{child:r,parent:i}=e;if(r.is(t)){o(i,t);const e=r.getNextSiblings(),l=e.length;if(i.insertAfter(r),0!==l){const t=n(i);r.insertAfter(t);for(let n=0;n<l;n++)t.append(e[n])}i.canBeEmpty()||0!==i.getChildrenSize()||i.remove()}}}))}function Et(t,e){const n=new Map,o=t._pendingEditorState;for(const[t,o]of e._nodeMap)n.set(t,d(o));o&&(o._nodeMap=n),t._dirtyType=2;const r=e._selection;g(null===r?null:r.clone())}function St(t){const o=e()||p();let r;if(n(o))r=m(o.focus,\"next\");else{if(null!=o){const t=o.getNodes(),e=t[t.length-1];e&&(r=u(e,\"next\"))}r=r||l(i(),\"previous\").getFlipped().insert(h())}const c=At(t,r),f=s(c),d=a(f)?v(f):c;return y(w(d)),t.getLatest()}function At(t,e,n){let o=x(e,\"next\");for(let t=o;t;t=E(t,n))o=t;return S(o)&&N(283),o.insert(t.isInline()?h().append(t):t),x(u(t.getLatest(),\"next\"),e.direction)}function Ct(t,e){const n=e();return t.replace(n),n.append(t),n}function Lt(t,e){return null!==t&&Object.getPrototypeOf(t).constructor.name===e.name}function Pt(t,e){const n=[];for(let o=0;o<t.length;o++){const r=e(t[o]);null!==r&&n.push(r)}return n}function bt(t,e){l(t,\"next\").insert(e)}let Nt=!(et||!J)&&void 0;function Mt(t){let e=1;if(function(){if(void 0===Nt){const t=document.createElement(\"div\");t.style.cssText=\"position: absolute; opacity: 0; width: 100px; left: -1000px;\",document.body.appendChild(t);const e=t.getBoundingClientRect();t.style.setProperty(\"zoom\",\"2\"),Nt=t.getBoundingClientRect().width===e.width,document.body.removeChild(t)}return Nt}())for(;t;)e*=Number(window.getComputedStyle(t).getPropertyValue(\"zoom\")),t=t.parentElement;return e}function Rt(t){return null!==t._parentEditor}function Tt(t,e){return Bt(t,e,null)}function Bt(t,e,n){let r=!1;for(const i of Kt(t))e(i)?null!==n&&n(i):(r=!0,o(i)&&Bt(i,e,n||(t=>i.insertAfter(t))),i.remove());return r}function _t(t,e){const n=[],r=Array.from(t).reverse();for(let t=r.pop();void 0!==t;t=r.pop())if(e(t))n.push(t);else if(o(t))for(const e of Kt(t))r.push(e);return n}function kt(t){return Ht(l(t,\"next\"))}function Kt(t){return Ht(l(t,\"previous\"))}function Ht(t){return f({hasNext:A,initial:t.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function Ot(t){C(u(t,\"next\")).splice(1,t.getChildren())}function $t(t,e=\"root\"){let n=0,o=t,r=s(o);for(;null===r;){if(n--,r=o.getParentCaret(e),!r)return null;o=r,r=s(o)}return r&&[r,n]}function Dt(t){const e=e=>L(e,t),n=(e,n)=>P(e,t,n);return{$get:e,$set:n,accessors:[e,n],makeGetterMethod:()=>function(){return e(this)},makeSetterMethod:()=>function(t){return n(this,t)},stateConfig:t}}export{_t as $descendantsMatching,st as $dfs,at as $dfsIterator,Pt as $filter,wt as $findMatchingParent,kt as $firstToLastIterator,ct as $getAdjacentCaret,$t as $getAdjacentSiblingOrParentSiblingCaret,pt as $getDepth,yt as $getNearestBlockElementAncestorOrThrow,vt as $getNearestNodeOfType,mt as $getNextRightPreorderNode,gt as $getNextSiblingOrParentSibling,bt as $insertFirst,St as $insertNodeToNearestRoot,At as $insertNodeToNearestRootAtCaret,Rt as $isEditorIsNestedEditor,Kt as $lastToFirstIterator,Et as $restoreEditorState,ft as $reverseDfs,ht as $reverseDfsIterator,Tt as $unwrapAndFilterDescendants,Ot as $unwrapNode,Ct as $wrapNodeInElement,q as CAN_USE_BEFORE_INPUT,J as CAN_USE_DOM,Q as IS_ANDROID,X as IS_ANDROID_CHROME,Y as IS_APPLE,Z as IS_APPLE_WEBKIT,tt as IS_CHROME,et as IS_FIREFOX,nt as IS_IOS,ot as IS_SAFARI,rt as addClassNamesToElement,Mt as calculateZoomLevel,lt as isMimeType,Dt as makeStateWrapper,W as markSelection,ut as mediaFileReader,j as mergeRegister,Lt as objectKlassEquals,z as positionNodeOnRange,xt as registerNestedElementResolver,it as removeClassNamesFromElement,G as selectionAlwaysOnDisplay};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$getSelection as e,$isRangeSelection as t,$isTextNode as n}from\"lexical\";function o(o){const i=window.location.origin,a=a=>{if(a.origin!==i)return;const r=o.getRootElement();if(document.activeElement!==r)return;const s=a.data;if(\"string\"==typeof s){let i;try{i=JSON.parse(s)}catch(e){return}if(i&&\"nuanria_messaging\"===i.protocol&&\"request\"===i.type){const r=i.payload;if(r&&\"makeChanges\"===r.functionId){const i=r.args;if(i){const[r,s,c,g,d,f]=i;o.update((()=>{const o=e();if(t(o)){const e=o.anchor;let t=e.getNode(),i=0,f=0;if(n(t)&&r>=0&&s>=0&&(i=r,f=r+s,o.setTextNodeRange(t,i,t,f)),i===f&&\"\"===c||(o.insertRawText(c),t=e.getNode()),n(t)){i=g,f=g+d;const e=t.getTextContentSize();i=i>e?e:i,f=f>e?e:f,o.setTextNodeRange(t,i,t,f)}a.stopImmediatePropagation()}}))}}}}};return window.addEventListener(\"message\",a,!0),()=>{window.removeEventListener(\"message\",a,!0)}}export{o as registerDragonSupport};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as t}from\"@lexical/react/LexicalComposerContext\";import{useLexicalEditable as e}from\"@lexical/react/useLexicalEditable\";import{$canShowPlaceholderCurry as r}from\"@lexical/text\";import{mergeRegister as o}from\"@lexical/utils\";import{useLayoutEffect as n,useEffect as i,useState as c,useMemo as l,Suspense as a}from\"react\";import{flushSync as u,createPortal as m}from\"react-dom\";import{jsx as s,jsxs as d,Fragment as f}from\"react/jsx-runtime\";import{registerDragonSupport as p}from\"@lexical/dragon\";import{registerRichText as x}from\"@lexical/rich-text\";const g=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n:i;function E(t){return t.getEditorState().read(r(t.isComposing()))}function h({contentEditable:e,placeholder:r=null,ErrorBoundary:n}){const[E]=t(),h=function(t,e){const[r,o]=c((()=>t.getDecorators()));return g((()=>t.registerDecoratorListener((t=>{u((()=>{o(t)}))}))),[t]),i((()=>{o(t.getDecorators())}),[t]),l((()=>{const o=[],n=Object.keys(r);for(let i=0;i<n.length;i++){const c=n[i],l=s(e,{onError:e=>t._onError(e),children:s(a,{fallback:null,children:r[c]})}),u=t.getElementByKey(c);null!==u&&o.push(m(l,u,c))}return o}),[e,r,t])}(E,n);return function(t){g((()=>o(x(t),p(t))),[t])}(E),d(f,{children:[e,s(w,{content:r}),h]})}function w({content:r}){const[n]=t(),i=function(t){const[e,r]=c((()=>E(t)));return g((()=>{function e(){const e=E(t);r(e)}return e(),o(t.registerUpdateListener((()=>{e()})),t.registerEditableListener((()=>{e()})))}),[t]),e}(n),l=e();return i?\"function\"==typeof r?r(l):r:null}export{h as RichTextPlugin};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as e}from\"@lexical/react/LexicalComposerContext\";import{useEffect as t}from\"react\";function o({defaultSelection:o}){const[l]=e();return t((()=>{l.focus((()=>{const e=document.activeElement,t=l.getRootElement();null===t||null!==e&&t.contains(e)||t.focus({preventScroll:!0})}),{defaultSelection:o})}),[o,l]),null}export{o as AutoFocusPlugin};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as e}from\"@lexical/react/LexicalComposerContext\";import{CLEAR_EDITOR_COMMAND as o,$getRoot as t,$getSelection as n,$createParagraphNode as r,$isRangeSelection as l,COMMAND_PRIORITY_EDITOR as i}from\"lexical\";import{useLayoutEffect as c,useEffect as m}from\"react\";const a=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?c:m;function d({onClear:c}){const[m]=e();return a((()=>m.registerCommand(o,(e=>(m.update((()=>{if(null==c){const e=t(),o=n(),i=r();e.clear(),e.append(i),null!==o&&i.select(),l(o)&&(o.format=0)}else c()})),!0)),i)),[m,c]),null}export{d as ClearEditorPlugin};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as e}from\"@lexical/react/LexicalComposerContext\";import{useLayoutEffect as t,useEffect as i,forwardRef as a,useState as r,useCallback as n,useMemo as o}from\"react\";import{jsx as l,jsxs as d,Fragment as c}from\"react/jsx-runtime\";import{$canShowPlaceholderCurry as s}from\"@lexical/text\";import{mergeRegister as u}from\"@lexical/utils\";const m=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t:i;function f({editor:e,ariaActiveDescendant:t,ariaAutoComplete:i,ariaControls:a,ariaDescribedBy:d,ariaErrorMessage:c,ariaExpanded:s,ariaInvalid:u,ariaLabel:f,ariaLabelledBy:b,ariaMultiline:p,ariaOwns:x,ariaRequired:E,autoCapitalize:v,className:w,id:y,role:C=\"textbox\",spellCheck:g=!0,style:h,tabIndex:L,\"data-testid\":D,...I},R){const[k,q]=r(e.isEditable()),z=n((t=>{t&&t.ownerDocument&&t.ownerDocument.defaultView?e.setRootElement(t):e.setRootElement(null)}),[e]),A=o((()=>function(...e){return t=>{e.forEach((e=>{\"function\"==typeof e?e(t):null!=e&&(e.current=t)}))}}(R,z)),[z,R]);return m((()=>(q(e.isEditable()),e.registerEditableListener((e=>{q(e)})))),[e]),l(\"div\",{\"aria-activedescendant\":k?t:void 0,\"aria-autocomplete\":k?i:\"none\",\"aria-controls\":k?a:void 0,\"aria-describedby\":d,...null!=c?{\"aria-errormessage\":c}:{},\"aria-expanded\":k&&\"combobox\"===C?!!s:void 0,...null!=u?{\"aria-invalid\":u}:{},\"aria-label\":f,\"aria-labelledby\":b,\"aria-multiline\":p,\"aria-owns\":k?x:void 0,\"aria-readonly\":!k||void 0,\"aria-required\":E,autoCapitalize:v,className:w,contentEditable:k,\"data-testid\":D,id:y,ref:A,role:C,spellCheck:g,style:h,tabIndex:L,...I})}const b=a(f);function p(e){return e.getEditorState().read(s(e.isComposing()))}const x=a(E);function E(t,i){const{placeholder:a,...r}=t,[n]=e();return d(c,{children:[l(b,{editor:n,...r,ref:i}),null!=a&&l(v,{editor:n,content:a})]})}function v({content:e,editor:i}){const a=function(e){const[t,i]=r((()=>p(e)));return m((()=>{function t(){const t=p(e);i(t)}return t(),u(e.registerUpdateListener((()=>{t()})),e.registerEditableListener((()=>{t()})))}),[e]),t}(i),[n,o]=r(i.isEditable());if(t((()=>(o(i.isEditable()),i.registerEditableListener((e=>{o(e)})))),[i]),!a)return null;let d=null;return\"function\"==typeof e?d=e(n):null!==e&&(d=e),null===d?null:l(\"div\",{\"aria-hidden\":!0,children:d})}export{x as ContentEditable,b as ContentEditableElement};\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure. Also,\n * modifications have been made to integrate with our codebase.\n *\n * Original file location: src/components/editor/editor-ui/content-editable.tsx\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n */\n\nimport { ReactNode } from 'react';\nimport { ContentEditable as LexicalContentEditable } from '@lexical/react/LexicalContentEditable';\n\ntype Props = {\n  placeholder: string;\n  className?: string;\n  placeholderClassName?: string;\n};\n\nexport function ContentEditable({\n  placeholder,\n  className,\n  placeholderClassName,\n}: Props): ReactNode {\n  return (\n    <LexicalContentEditable\n      className={\n        className ??\n        `ContentEditable__root tw-relative tw-block tw-min-h-11 tw-overflow-auto tw-px-3 tw-py-3 tw-text-sm tw-outline-none`\n      }\n      aria-placeholder={placeholder}\n      placeholder={\n        <div\n          className={\n            placeholderClassName ??\n            `tw-pointer-events-none tw-absolute tw-left-0 tw-top-0 tw-select-none tw-overflow-hidden tw-text-ellipsis tw-px-3 tw-py-3 tw-text-sm tw-text-muted-foreground`\n          }\n        >\n          {placeholder}\n        </div>\n      }\n    />\n  );\n}\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure.\n *\n * Original file location: src/components/editor/context/toolbar-context.tsx\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n */\n\n'use client';\n\nimport { createContext, ReactNode, useContext, useMemo } from 'react';\nimport { LexicalEditor } from 'lexical';\n\nconst Context = createContext<\n  | {\n      activeEditor: LexicalEditor;\n      $updateToolbar: () => void;\n      blockType: string;\n      setBlockType: (blockType: string) => void;\n      showModal: (title: string, showModal: (onClose: () => void) => ReactNode) => void;\n    }\n  | undefined\n>(undefined);\n\nexport function ToolbarContext({\n  activeEditor,\n  $updateToolbar,\n  blockType,\n  setBlockType,\n  showModal,\n  children,\n}: {\n  activeEditor: LexicalEditor;\n  $updateToolbar: () => void;\n  blockType: string;\n  setBlockType: (blockType: string) => void;\n  showModal: (title: string, showModal: (onClose: () => void) => ReactNode) => void;\n  children: ReactNode;\n}) {\n  const contextValue = useMemo(\n    () => ({\n      activeEditor,\n      $updateToolbar,\n      blockType,\n      setBlockType,\n      showModal,\n    }),\n    [activeEditor, $updateToolbar, blockType, setBlockType, showModal],\n  );\n\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>;\n}\n\nexport function useToolbarContext() {\n  const context = useContext(Context);\n  if (!context) {\n    throw new Error('useToolbarContext must be used within a ToolbarContext provider');\n  }\n  return context;\n}\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure.\n *\n * Original file location: src/components/editor/editor-hooks/use-modal.tsx\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n */\n\nimport { ReactNode, useCallback, useMemo, useState } from 'react';\n\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/shadcn-ui/dialog';\n\nexport function useEditorModal(): [\n  ReactNode | undefined,\n  (title: string, showModal: (onClose: () => void) => ReactNode) => void,\n] {\n  const [modalContent, setModalContent] = useState<\n    | {\n        closeOnClickOutside: boolean;\n        content: ReactNode;\n        title: string;\n      }\n    | undefined\n  >(undefined);\n\n  const onClose = useCallback(() => {\n    setModalContent(undefined);\n  }, []);\n\n  const modal = useMemo(() => {\n    if (modalContent === undefined) {\n      return undefined;\n    }\n    const { title, content } = modalContent;\n    return (\n      <Dialog open onOpenChange={onClose}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>{title}</DialogTitle>\n          </DialogHeader>\n          {content}\n        </DialogContent>\n      </Dialog>\n    );\n  }, [modalContent, onClose]);\n\n  const showModal = useCallback(\n    (\n      title: string,\n      getContent: (onClose: () => void) => ReactNode,\n      closeOnClickOutside = false,\n    ) => {\n      setModalContent({\n        closeOnClickOutside,\n        content: getContent(onClose),\n        title,\n      });\n    },\n    [onClose],\n  );\n\n  return [modal, showModal];\n}\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure.\n *\n * Original file location: src/components/editor/plugins/toolbar/toolbar-plugin.tsx\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n *\n * Documentation for the Toolbar Plugin-framework:\n * https://shadcn-editor.vercel.app/docs/plugins/toolbar\n */\n\nimport { ReactNode, useEffect, useState } from 'react';\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { COMMAND_PRIORITY_CRITICAL, SELECTION_CHANGE_COMMAND } from 'lexical';\n\nimport { ToolbarContext } from '@/components/advanced/editor/context/toolbar-context';\nimport { useEditorModal } from '@/components/advanced/editor/editor-hooks/use-modal';\n\nexport function ToolbarPlugin({\n  children,\n}: {\n  children: (props: { blockType: string }) => ReactNode;\n}) {\n  const [editor] = useLexicalComposerContext();\n\n  const [activeEditor, setActiveEditor] = useState(editor);\n  const [blockType, setBlockType] = useState<string>('paragraph');\n\n  const [modal, showModal] = useEditorModal();\n\n  const $updateToolbar = () => {};\n\n  useEffect(() => {\n    return activeEditor.registerCommand(\n      SELECTION_CHANGE_COMMAND,\n      (_payload, newEditor) => {\n        setActiveEditor(newEditor);\n        return false;\n      },\n      COMMAND_PRIORITY_CRITICAL,\n    );\n  }, [activeEditor]);\n\n  return (\n    <ToolbarContext\n      activeEditor={activeEditor}\n      $updateToolbar={$updateToolbar}\n      blockType={blockType}\n      setBlockType={setBlockType}\n      showModal={showModal}\n    >\n      {modal}\n\n      {children({ blockType })}\n    </ToolbarContext>\n  );\n}\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure.\n *\n * Original file location: src/components/editor/editor-hooks/use-update-toolbar.ts\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n */\n\nimport { useEffect } from 'react';\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport {\n  $getSelection,\n  BaseSelection,\n  COMMAND_PRIORITY_CRITICAL,\n  SELECTION_CHANGE_COMMAND,\n} from 'lexical';\n\nimport { useToolbarContext } from '@/components/advanced/editor/context/toolbar-context';\n\nexport function useUpdateToolbarHandler(callback: (selection: BaseSelection) => void) {\n  const [editor] = useLexicalComposerContext();\n  const { activeEditor } = useToolbarContext();\n\n  useEffect(() => {\n    return activeEditor.registerCommand(\n      SELECTION_CHANGE_COMMAND,\n      () => {\n        const selection = $getSelection();\n        if (selection) {\n          callback(selection);\n        }\n        return false;\n      },\n      COMMAND_PRIORITY_CRITICAL,\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editor, callback]);\n\n  useEffect(() => {\n    activeEditor.getEditorState().read(() => {\n      const selection = $getSelection();\n      if (selection) {\n        callback(selection);\n      }\n    });\n  }, [activeEditor, callback]);\n}\n","import React from 'react';\nimport * as TogglePrimitive from '@radix-ui/react-toggle';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\nconst toggleVariants = cva(\n  'pr-twp tw-inline-flex tw-items-center tw-justify-center tw-rounded-md tw-text-sm tw-font-medium tw-ring-offset-background tw-transition-colors hover:tw-bg-muted hover:tw-text-muted-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50 data-[state=on]:tw-bg-accent data-[state=on]:tw-text-accent-foreground',\n  {\n    variants: {\n      variant: {\n        default: 'tw-bg-transparent',\n        outline:\n          'tw-border tw-border-input tw-bg-transparent hover:tw-bg-accent hover:tw-text-accent-foreground',\n      },\n      size: {\n        default: 'tw-h-10 tw-px-3',\n        sm: 'tw-h-9 tw-px-2.5',\n        lg: 'tw-h-11 tw-px-5',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n));\n\nToggle.displayName = TogglePrimitive.Root.displayName;\n\nexport { Toggle, toggleVariants };\n","import React from 'react';\nimport * as ToggleGroupPrimitive from '@radix-ui/react-toggle-group';\nimport { type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { toggleVariants } from '@/components/shadcn-ui/toggle';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/** @inheritdoc ToggleGroup */\nconst ToggleGroupContext = React.createContext<VariantProps<typeof toggleVariants>>({\n  size: 'default',\n  variant: 'default',\n});\n\n/**\n * ToggleGroup components provide a set of two-state buttons that can be toggled on or off. These\n * components are built on Radix UI primitives and styled with Shadcn UI. See Shadcn UI\n * Documentation: https://ui.shadcn.com/docs/components/toggle-group See Radix UI Documentation:\n * https://www.radix-ui.com/primitives/docs/components/toggle-group\n */\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <ToggleGroupPrimitive.Root\n      ref={ref}\n      className={cn('pr-twp tw-flex tw-items-center tw-justify-center tw-gap-1', className)}\n      {...props}\n      dir={dir}\n    >\n      <ToggleGroupContext.Provider\n        // Suppress warning produced by imported shadcn code\n        // eslint-disable-next-line react/jsx-no-constructed-context-values\n        value={{ variant, size }}\n      >\n        {children}\n      </ToggleGroupContext.Provider>\n    </ToggleGroupPrimitive.Root>\n  );\n});\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName;\n\n/** @inheritdoc ToggleGroup */\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext);\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  );\n});\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName;\n\nexport { ToggleGroup, ToggleGroupItem };\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure.\n *\n * Original file location: src/components/editor/plugins/toolbar/font-format-toolbar-plugin.tsx\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n *\n * Documentation for this specific plugin:\n * https://shadcn-editor.vercel.app/docs/plugins/toolbar/font-format-toolbar\n */\n\nimport { useCallback, useState } from 'react';\nimport { $isTableSelection } from '@lexical/table';\nimport { $isRangeSelection, BaseSelection, FORMAT_TEXT_COMMAND } from 'lexical';\nimport { BoldIcon, ItalicIcon, StrikethroughIcon, UnderlineIcon } from 'lucide-react';\n\nimport { useToolbarContext } from '@/components/advanced/editor/context/toolbar-context';\nimport { useUpdateToolbarHandler } from '@/components/advanced/editor/editor-hooks/use-update-toolbar';\nimport { ToggleGroup, ToggleGroupItem } from '@/components/shadcn-ui/toggle-group';\n\nconst FORMATS = [\n  { format: 'bold', icon: BoldIcon, label: 'Bold' },\n  { format: 'italic', icon: ItalicIcon, label: 'Italic' },\n  { format: 'underline', icon: UnderlineIcon, label: 'Underline' },\n  { format: 'strikethrough', icon: StrikethroughIcon, label: 'Strikethrough' },\n] as const;\n\nexport function FontFormatToolbarPlugin() {\n  const { activeEditor } = useToolbarContext();\n  const [activeFormats, setActiveFormats] = useState<string[]>([]);\n\n  const $updateToolbar = useCallback((selection: BaseSelection) => {\n    if ($isRangeSelection(selection) || $isTableSelection(selection)) {\n      const formats: string[] = [];\n      FORMATS.forEach(({ format }) => {\n        if (selection.hasFormat(format)) {\n          formats.push(format);\n        }\n      });\n      setActiveFormats((prev) => {\n        // Only update if formats have changed\n        if (prev.length !== formats.length || !formats.every((f) => prev.includes(f))) {\n          return formats;\n        }\n        return prev;\n      });\n    }\n  }, []);\n\n  useUpdateToolbarHandler($updateToolbar);\n\n  return (\n    <ToggleGroup\n      type=\"multiple\"\n      value={activeFormats}\n      onValueChange={setActiveFormats}\n      variant=\"outline\"\n      size=\"sm\"\n    >\n      {FORMATS.map(({ format, icon: Icon, label }) => (\n        <ToggleGroupItem\n          key={format}\n          value={format}\n          aria-label={label}\n          onClick={() => {\n            activeEditor.dispatchCommand(FORMAT_TEXT_COMMAND, format);\n          }}\n        >\n          <Icon className=\"tw-h-4 tw-w-4\" />\n        </ToggleGroupItem>\n      ))}\n    </ToggleGroup>\n  );\n}\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure. Also,\n * modifications have been made to integrate with our codebase.\n *\n * Original file location: src/components/blocks/editor-00/plugins.tsx\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n */\n\nimport { useEffect, useState } from 'react';\nimport { LexicalErrorBoundary } from '@lexical/react/LexicalErrorBoundary';\nimport { RichTextPlugin } from '@lexical/react/LexicalRichTextPlugin';\nimport { AutoFocusPlugin } from '@lexical/react/LexicalAutoFocusPlugin';\nimport { ClearEditorPlugin } from '@lexical/react/LexicalClearEditorPlugin';\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { CLEAR_EDITOR_COMMAND } from 'lexical';\n\nimport { ContentEditable } from '@/components/advanced/editor/editor-ui/content-editable';\nimport { ToolbarPlugin } from '@/components/advanced/editor/plugins/toolbar/toolbar-plugin';\nimport { FontFormatToolbarPlugin } from '@/components/advanced/editor/plugins/toolbar/font-format-toolbar-plugin';\n\nfunction ClearEditorBridge({ onClear }: { onClear?: (clearFn: () => void) => void }) {\n  const [editor] = useLexicalComposerContext();\n\n  useEffect(() => {\n    if (onClear) {\n      onClear(() => {\n        editor.dispatchCommand(CLEAR_EDITOR_COMMAND, undefined);\n      });\n    }\n  }, [editor, onClear]);\n\n  return undefined;\n}\n\nexport function Plugins({\n  placeholder = 'Start typing ...',\n  autoFocus = false,\n  onClear,\n}: {\n  placeholder?: string;\n  autoFocus?: boolean;\n  onClear?: (clearFn: () => void) => void;\n}) {\n  const [, setFloatingAnchorElem] = useState<HTMLDivElement | undefined>(undefined);\n\n  const onRef = (_floatingAnchorElem: HTMLDivElement) => {\n    if (_floatingAnchorElem !== undefined) {\n      setFloatingAnchorElem(_floatingAnchorElem);\n    }\n  };\n\n  return (\n    <div className=\"tw-relative\">\n      {/* toolbar plugins */}\n      <ToolbarPlugin>\n        {() => (\n          <div className=\"tw-sticky tw-top-0 tw-z-10 tw-flex tw-gap-2 tw-overflow-auto tw-border-b tw-p-1\">\n            <FontFormatToolbarPlugin />\n          </div>\n        )}\n      </ToolbarPlugin>\n\n      <div className=\"tw-relative\">\n        <RichTextPlugin\n          contentEditable={\n            <div ref={onRef}>\n              <ContentEditable placeholder={placeholder} />\n            </div>\n          }\n          ErrorBoundary={LexicalErrorBoundary}\n        />\n        {autoFocus && <AutoFocusPlugin defaultSelection=\"rootStart\" />}\n\n        <ClearEditorBridge onClear={onClear} />\n        <ClearEditorPlugin />\n        {/* editor plugins */}\n      </div>\n      {/* actions plugins */}\n    </div>\n  );\n}\n","/**\n * This file was automatically generated on installation of the Shadcn/Lexical editor. The default\n * location of this file has been changed to integrate better with our project structure. Also,\n * modifications have been made to integrate with our codebase.\n *\n * Original file location: src/components/blocks/editor-00/editor.tsx\n *\n * Shadcn/Lexical Editor Documentation: https://shadcn-editor.vercel.app/docs/\n */\n\n'use client';\n\nimport { InitialConfigType, LexicalComposer } from '@lexical/react/LexicalComposer';\nimport { OnChangePlugin } from '@lexical/react/LexicalOnChangePlugin';\nimport { EditorState, SerializedEditorState } from 'lexical';\n\nimport { editorTheme } from '@/components/advanced/editor/themes/editor-theme';\nimport { TooltipProvider } from '@/components/shadcn-ui/tooltip';\n\nimport { nodes } from './nodes';\nimport { Plugins } from './plugins';\n\nconst editorConfig: InitialConfigType = {\n  namespace: 'Editor',\n  theme: editorTheme,\n  nodes,\n  onError: (error: Error) => {\n    console.error(error);\n  },\n};\n\n/**\n * Shadcn UI based Lexical Editor component\n *\n * Documentation: https://shadcn-editor.vercel.app/docs/\n */\nexport function Editor({\n  editorState,\n  editorSerializedState,\n  onChange,\n  onSerializedChange,\n  placeholder = 'Start typingâ€¦',\n  autoFocus = false,\n  onClear,\n}: {\n  editorState?: EditorState;\n  editorSerializedState?: SerializedEditorState;\n  onChange?: (editorState: EditorState) => void;\n  onSerializedChange?: (editorSerializedState: SerializedEditorState) => void;\n  placeholder?: string;\n  autoFocus?: boolean;\n  onClear?: (clearFn: () => void) => void;\n}) {\n  return (\n    <div className=\"pr-twp tw-overflow-hidden tw-rounded-lg tw-border tw-bg-background tw-shadow\">\n      <LexicalComposer\n        initialConfig={{\n          ...editorConfig,\n          ...(editorState ? { editorState } : {}),\n          ...(editorSerializedState ? { editorState: JSON.stringify(editorSerializedState) } : {}),\n        }}\n      >\n        <TooltipProvider>\n          <Plugins placeholder={placeholder} autoFocus={autoFocus} onClear={onClear} />\n\n          <OnChangePlugin\n            ignoreSelectionChange\n            onChange={(latestEditorState) => {\n              onChange?.(latestEditorState);\n              onSerializedChange?.(latestEditorState.toJSON());\n            }}\n          />\n        </TooltipProvider>\n      </LexicalComposer>\n    </div>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$sliceSelectedTextNodeContent as e}from\"@lexical/selection\";import{isHTMLElement as n,isBlockDomNode as t}from\"@lexical/utils\";import{$getRoot as o,$isElementNode as l,$cloneWithProperties as r,$isTextNode as i,getRegisteredNode as s,isDocumentFragment as c,$isRootOrShadowRoot as u,$isBlockElementNode as f,$createLineBreakNode as a,ArtificialNode__DO_NOT_USE as d,isInlineDomNode as p,$createParagraphNode as h}from\"lexical\";function m(e,n){const t=n.body?n.body.childNodes:[];let o=[];const l=[];for(let n=0;n<t.length;n++){const r=t[n];if(!y.has(r.nodeName)){const n=w(r,e,l,!1);null!==n&&(o=o.concat(n))}}return function(e){for(const n of e)n.getNextSibling()instanceof d&&n.insertAfter(a());for(const n of e){const e=n.getChildren();for(const t of e)n.insertBefore(t);n.remove()}}(l),o}function g(e,n){if(\"undefined\"==typeof document||\"undefined\"==typeof window&&void 0===global.window)throw new Error(\"To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.\");const t=document.createElement(\"div\"),l=o().getChildren();for(let o=0;o<l.length;o++){x(e,l[o],t,n)}return t.innerHTML}function x(t,o,u,f=null){let a=null===f||o.isSelected(f);const d=l(o)&&o.excludeFromCopy(\"html\");let p=o;if(null!==f){let n=r(o);n=i(n)&&null!==f?e(f,n):n,p=n}const h=l(p)?p.getChildren():[],m=s(t,p.getType());let g;g=m&&void 0!==m.exportDOM?m.exportDOM(t,p):p.exportDOM(t);const{element:y,after:w}=g;if(!y)return!1;const b=document.createDocumentFragment();for(let e=0;e<h.length;e++){const n=h[e],r=x(t,n,b,f);!a&&l(o)&&r&&o.extractWithChild(n,f,\"html\")&&(a=!0)}if(a&&!d){if((n(y)||c(y))&&y.append(b),u.append(y),w){const e=w.call(p,y);e&&(c(y)?y.replaceChildren(e):y.replaceWith(e))}}else u.append(b);return a}const y=new Set([\"STYLE\",\"SCRIPT\"]);function w(e,n,o,r,i=new Map,s){let c=[];if(y.has(e.nodeName))return c;let m=null;const g=function(e,n){const{nodeName:t}=e,o=n._htmlConversions.get(t.toLowerCase());let l=null;if(void 0!==o)for(const n of o){const t=n(e);null!==t&&(null===l||(l.priority||0)<=(t.priority||0))&&(l=t)}return null!==l?l.conversion:null}(e,n),x=g?g(e):null;let C=null;if(null!==x){C=x.after;const n=x.node;if(m=Array.isArray(n)?n[n.length-1]:n,null!==m){for(const[,e]of i)if(m=e(m,s),!m)break;m&&c.push(...Array.isArray(n)?n:[m])}null!=x.forChild&&i.set(e.nodeName,x.forChild)}const S=e.childNodes;let v=[];const N=(null==m||!u(m))&&(null!=m&&f(m)||r);for(let e=0;e<S.length;e++)v.push(...w(S[e],n,o,N,new Map(i),m));return null!=C&&(v=C(v)),t(e)&&(v=b(e,v,N?()=>{const e=new d;return o.push(e),e}:h)),null==m?v.length>0?c=c.concat(v):t(e)&&function(e){if(null==e.nextSibling||null==e.previousSibling)return!1;return p(e.nextSibling)&&p(e.previousSibling)}(e)&&(c=c.concat(a())):l(m)&&m.append(...v),c}function b(e,n,t){const o=e.style.textAlign,l=[];let r=[];for(let e=0;e<n.length;e++){const i=n[e];if(f(i))o&&!i.getFormat()&&i.setFormat(o),l.push(i);else if(r.push(i),e===n.length-1||e<n.length-1&&f(n[e+1])){const e=t();e.setFormat(o),e.append(...r),l.push(e),r=[]}}return l}export{g as $generateHtmlFromNodes,m as $generateNodesFromDOM};\n","import { editorTheme } from '@/components/advanced/editor/themes/editor-theme';\nimport { $generateHtmlFromNodes, $generateNodesFromDOM } from '@lexical/html';\nimport { $getRoot, $insertNodes, createEditor, SerializedEditorState } from 'lexical';\nimport { nodes } from './nodes';\n\n/**\n * Check if the editor state has any meaningful content\n *\n * @param editorState - SerializedEditorState to check\n * @returns True if the editor has content, false if it's empty\n */\nexport function hasEditorContent(editorState: SerializedEditorState | undefined): boolean {\n  if (!editorState?.root) return false;\n\n  // Traverse the serialized tree directly\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const hasText = (node: any): boolean => {\n    if (node.text && node.text.trim()) return true;\n    if (node.children) return node.children.some(hasText);\n    return false;\n  };\n\n  return hasText(editorState.root);\n}\n\n/**\n * Convert Paratext specific HTML string to Lexical SerializedEditorState\n *\n * @param html - HTML string to convert\n * @returns SerializedEditorState that can be used with the Editor component\n */\nexport function htmlToEditorState(html: string): SerializedEditorState {\n  if (!html || html.trim() === '') {\n    throw new Error('Input HTML is empty');\n  }\n\n  // Clean up the HTML to replace PT9-specific attributes and simplify structure\n  const cleanHtml = html\n    // Replace `<strikethrough>` with `<s>`\n    .replace(/<strikethrough>([\\s\\S]*?)<\\/strikethrough>/gi, '<s>$1</s>')\n    // Remove `<color>` tags but keep their content\n    // TODO: This needs to be revisited when we know how we want to handle the <color> tag\n    .replace(/<color[^>]*>([\\s\\S]*?)<\\/color>/gi, '$1')\n    // Remove `<language>` tags but keep their content\n    // TODO: This needs to be revisited when we know how we want to handle the <language> tag\n    .replace(/<language[^>]*>([\\s\\S]*?)<\\/language>/gi, '$1');\n\n  const editor = createEditor({\n    namespace: 'EditorUtils',\n    theme: editorTheme,\n    nodes,\n    onError: (error: Error) => {\n      console.error(error);\n    },\n  });\n\n  let serializedState: SerializedEditorState | undefined;\n\n  editor.update(\n    () => {\n      const parser = new DOMParser();\n      const dom = parser.parseFromString(cleanHtml, 'text/html');\n      const generatedNodes = $generateNodesFromDOM(editor, dom);\n\n      $getRoot().clear();\n      $insertNodes(generatedNodes);\n    },\n    {\n      discrete: true,\n    },\n  );\n\n  editor.getEditorState().read(() => {\n    serializedState = editor.getEditorState().toJSON();\n  });\n\n  if (!serializedState) {\n    throw new Error('Failed to convert HTML to editor state');\n  }\n\n  return serializedState;\n}\n\n/**\n * Convert Lexical SerializedEditorState to HTML string\n *\n * @param editorState - SerializedEditorState to convert\n * @returns HTML string\n */\nexport function editorStateToHtml(editorState: SerializedEditorState): string {\n  const editor = createEditor({\n    namespace: 'EditorUtils',\n    theme: editorTheme,\n    nodes,\n    onError: (error: Error) => {\n      console.error(error);\n    },\n  });\n\n  const parsedEditorState = editor.parseEditorState(JSON.stringify(editorState));\n  editor.setEditorState(parsedEditorState);\n\n  let html = '';\n\n  editor.getEditorState().read(() => {\n    html = $generateHtmlFromNodes(editor);\n  });\n\n  // Clean up the HTML to remove Shadcn/Lexical-specific attributes and simplify structure\n  html = html\n    // Remove style attributes\n    .replace(/\\s+style=\"[^\"]*\"/g, '')\n    // Remove all class attributes (including Tailwind classes)\n    .replace(/\\s+class=\"[^\"]*\"/g, '')\n    // Remove empty spans\n    .replace(/<span>(.*?)<\\/span>/g, '$1')\n    // Simplify nested bold tags (e.g., <b><strong>text</strong></b> -> <b>text</b>)\n    .replace(/<b><strong[^>]*>(.*?)<\\/strong><\\/b>/g, '<b>$1</b>')\n    .replace(/<strong><b[^>]*>(.*?)<\\/b><\\/strong>/g, '<b>$1</b>')\n    // Simplify nested italic tags (e.g., <i><em>text</em></i> -> <i>text</i>)\n    .replace(/<i><em[^>]*>(.*?)<\\/em><\\/i>/g, '<i>$1</i>')\n    .replace(/<em><i[^>]*>(.*?)<\\/i><\\/em>/g, '<i>$1</i>')\n    // Simplify nested underline tags (e.g., <u><span>text</span></u> -> <u>text</u>)\n    .replace(/<u><span[^>]*>(.*?)<\\/span><\\/u>/g, '<u>$1</u>')\n    // Simplify nested strikethrough tags (e.g., <s><span>text</span></s> -> <s>text</s>)\n    .replace(/<s><span[^>]*>(.*?)<\\/span><\\/s>/g, '<s>$1</s>')\n    // Convert <s> tags back to <strikethrough> for Paratext compatibility\n    .replace(/<s>(.*?)<\\/s>/g, '<strikethrough>$1</strikethrough>');\n\n  return html;\n}\n","import React from 'react';\nimport * as AvatarPrimitive from '@radix-ui/react-avatar';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * The Avatar component displays a user's profile picture or initials. The component is built and\n * styled by Shadcn UI. See Shadcn UI Documentation https://ui.shadcn.com/docs/components/avatar\n */\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      'pr-twp tw-relative tw-flex tw-h-10 tw-w-10 tw-shrink-0 tw-overflow-hidden tw-rounded-full',\n      className,\n    )}\n    {...props}\n  />\n));\nAvatar.displayName = AvatarPrimitive.Root.displayName;\n\n/** @inheritdoc Avatar */\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn('pr-twp tw-aspect-square tw-h-full tw-w-full', className)}\n    {...props}\n  />\n));\nAvatarImage.displayName = AvatarPrimitive.Image.displayName;\n\n/** @inheritdoc Avatar */\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      'pr-twp tw-flex tw-h-full tw-w-full tw-items-center tw-justify-center tw-rounded-full tw-bg-muted',\n      className,\n    )}\n    {...props}\n  />\n));\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName;\n\nexport { Avatar, AvatarImage, AvatarFallback };\n","import { Avatar, AvatarFallback } from '@/components/shadcn-ui/avatar';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport {\n  formatRelativeDate,\n  formatReplacementString,\n  parseParatextHtml,\n} from 'platform-bible-utils';\nimport { useMemo } from 'react';\nimport { CommentItemProps } from './comment-list.types';\n\n/**\n * A single comment item in the comment list.\n *\n * @param CommentItemProps The properties for the CommentItem component\n */\nexport function CommentItem({\n  comment,\n  isReply = false,\n  localizedStrings,\n  isThreadExpanded = false,\n}: CommentItemProps) {\n  const displayDate = useMemo(() => {\n    const date = new Date(comment.date);\n    const relativeDate = formatRelativeDate(\n      date,\n      localizedStrings['%comment_date_today%'],\n      localizedStrings['%comment_date_yesterday%'],\n    );\n    const time = date.toLocaleTimeString(undefined, {\n      hour: 'numeric',\n      minute: '2-digit',\n    });\n    return formatReplacementString(localizedStrings['%comment_dateAtTime%'], {\n      date: relativeDate,\n      time,\n    });\n  }, [comment.date, localizedStrings]);\n\n  const userLabel = useMemo(\n    () =>\n      !isReply && comment.assignedUser\n        ? formatReplacementString(localizedStrings['%comment_assigned_to%'], {\n            assignedUser: comment.assignedUser,\n          })\n        : comment.user,\n    [isReply, comment.assignedUser, comment.user, localizedStrings],\n  );\n\n  // Generate initials for avatar\n  const initials = useMemo(\n    () =>\n      comment.user\n        .split(' ')\n        .map((name) => name[0])\n        .join('')\n        .toUpperCase()\n        .slice(0, 2),\n    [comment.user],\n  );\n\n  return (\n    <div\n      className={cn('tw-flex tw-flex-row tw-items-baseline tw-gap-3 tw-space-y-3', {\n        'tw-text-sm': isReply,\n      })}\n    >\n      <Avatar className=\"tw-h-8 tw-w-8\">\n        <AvatarFallback className=\"tw-text-xs tw-font-medium\">{initials}</AvatarFallback>\n      </Avatar>\n      <div className=\"tw-flex tw-flex-1 tw-flex-col tw-gap-2\">\n        <div className=\"tw-flex tw-flex-row tw-flex-wrap tw-items-baseline tw-gap-x-2\">\n          <p className=\"tw-text-sm tw-font-medium\">{userLabel}</p>\n          <p className=\"tw-text-xs tw-font-normal tw-text-muted-foreground\">{displayDate}</p>\n        </div>\n        <div\n          className={cn(\n            'tw-prose tw-items-start tw-gap-2 tw-break-words tw-text-sm tw-font-normal tw-text-foreground',\n            {\n              'tw-line-clamp-3': !isThreadExpanded,\n            },\n          )}\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: parseParatextHtml(comment.contents) }}\n        />\n      </div>\n    </div>\n  );\n}\n","import { cn } from '@/utils/shadcn-ui.util';\nimport { formatReplacementString } from 'platform-bible-utils';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { ArrowUp, AtSign, Check, ChevronDown, ChevronUp } from 'lucide-react';\nimport { Card, CardContent } from '@/components/shadcn-ui/card';\nimport { Separator } from '@/components/shadcn-ui/separator';\nimport { Badge } from '@/components/shadcn-ui/badge';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { Editor } from '@/components/advanced/editor/editor';\nimport { editorStateToHtml, hasEditorContent } from '@/components/advanced/editor/editor-utils';\nimport { SerializedEditorState } from 'lexical';\nimport { CommentThreadProps } from './comment-list.types';\nimport { CommentItem } from './comment-item.component';\n\n// SerializedEditorState type is complex, so we use type assertion for the initial empty state.\n// This value is copied from the Shadcn-editor documentation at https://shadcn-editor.vercel.app/docs/installation.\n// eslint-disable-next-line no-type-assertion/no-type-assertion\nconst initialValue = {\n  root: {\n    children: [\n      {\n        children: [\n          {\n            detail: 0,\n            format: 0,\n            mode: 'normal',\n            style: '',\n            text: '',\n            type: 'text',\n            version: 1,\n          },\n        ],\n        direction: 'ltr',\n        format: '',\n        indent: 0,\n        type: 'paragraph',\n        version: 1,\n      },\n    ],\n    direction: 'ltr',\n    format: '',\n    indent: 0,\n    type: 'root',\n    version: 1,\n  },\n} as unknown as SerializedEditorState;\n\n/**\n * Represents a thread of comments\n *\n * @props CommentThreadProps\n */\nexport function CommentThread({\n  comments,\n  localizedStrings,\n  isSelected = false,\n  verseRef,\n  assignedUser,\n  handleSelectThread,\n  threadId,\n  threadStatus,\n  handleResolveCommentThread,\n  handleAddComment,\n}: CommentThreadProps) {\n  const [editorState, setEditorState] = useState<SerializedEditorState>(initialValue);\n  const [isVerseExpanded, setIsVerseExpanded] = useState<boolean>(false);\n  const [isVerseOverflowing, setIsVerseOverflowing] = useState<boolean>(false);\n  const [showAllReplies, setShowAllReplies] = useState<boolean>(false);\n\n  const firstComment = useMemo(() => comments[0], [comments]);\n\n  // </p> expects null and not undefined\n  // eslint-disable-next-line no-null/no-null\n  const verseTextRef = useRef<HTMLParagraphElement | null>(null);\n  const clearEditorRef = useRef<(() => void) | undefined>(undefined);\n\n  useEffect(() => {\n    const verseTextElement = verseTextRef.current;\n    if (!verseTextElement) return;\n\n    const checkOverflow = () => {\n      setIsVerseOverflowing(verseTextElement.scrollWidth > verseTextElement.clientWidth);\n    };\n\n    checkOverflow();\n    window.addEventListener('resize', checkOverflow);\n    return () => window.removeEventListener('resize', checkOverflow);\n  }, [firstComment.verse]);\n\n  useEffect(() => {\n    setShowAllReplies(false);\n  }, [isSelected]);\n\n  const localizedReplies = useMemo(\n    () => ({\n      singleReply: localizedStrings['%comment_thread_single_reply%'],\n      multipleReplies: localizedStrings['%comment_thread_multiple_replies%'],\n    }),\n    [localizedStrings],\n  );\n\n  const localizedAssignedToText = useMemo(\n    () =>\n      assignedUser\n        ? formatReplacementString(localizedStrings['%comment_assigned_to%'], { assignedUser })\n        : undefined,\n    [assignedUser, localizedStrings],\n  );\n\n  const replies = useMemo(() => comments.slice(1), [comments]);\n  const replyCount = useMemo(() => replies.length ?? 0, [replies.length]);\n  const hasReplies = useMemo(() => replyCount > 0, [replyCount]);\n\n  // For expanded threads with more than 2 replies, show only the last 2 replies\n  const visibleReplies = useMemo(() => {\n    if (showAllReplies || replyCount <= 2) {\n      return replies;\n    }\n    // Show only the last 2 replies\n    return replies.slice(-2);\n  }, [replies, replyCount, showAllReplies]);\n\n  const hiddenReplyCount = useMemo(() => {\n    if (showAllReplies || replyCount <= 2) {\n      return 0;\n    }\n    return replyCount - 2;\n  }, [replyCount, showAllReplies]);\n\n  const replyText = useMemo(\n    () =>\n      replyCount === 1\n        ? localizedReplies.singleReply\n        : formatReplacementString(localizedReplies.multipleReplies, { count: replyCount }),\n    [replyCount, localizedReplies],\n  );\n\n  const hiddenReplyText = useMemo(\n    () =>\n      hiddenReplyCount === 1\n        ? localizedReplies.singleReply\n        : formatReplacementString(localizedReplies.multipleReplies, { count: hiddenReplyCount }),\n    [hiddenReplyCount, localizedReplies],\n  );\n\n  const handleSubmitComment = useCallback(async () => {\n    const newCommentId = await handleAddComment(threadId, editorStateToHtml(editorState));\n    if (newCommentId) {\n      clearEditorRef.current?.();\n      setEditorState(initialValue);\n    }\n  }, [editorState, handleAddComment, threadId]);\n\n  return (\n    <Card\n      role=\"option\"\n      aria-selected={isSelected}\n      id={threadId}\n      className={cn(\n        'tw-w-full tw-rounded-none tw-border-none tw-p-4 tw-outline-none tw-transition-all tw-duration-200 focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-1 focus:tw-ring-offset-background',\n        {\n          'tw-cursor-pointer tw-bg-slate-50 hover:tw-shadow-md': !isSelected,\n        },\n        { 'tw-bg-background': isSelected },\n      )}\n      onClick={() => {\n        handleSelectThread(threadId);\n      }}\n      tabIndex={-1}\n    >\n      <CardContent className=\"tw-flex tw-flex-col tw-gap-2 tw-p-0\">\n        <div className=\"tw-flex tw-flex-col tw-content-center tw-items-start tw-gap-4\">\n          {localizedAssignedToText && (\n            <Badge className=\"tw-rounded-sm tw-bg-input tw-text-sm tw-font-normal tw-text-primary hover:tw-bg-input\">\n              {localizedAssignedToText}\n            </Badge>\n          )}\n          <div className=\"tw-flex tw-max-w-full tw-flex-wrap tw-items-baseline tw-gap-2\">\n            {/* Allow clicking to expand thread when collapsed, but allow text selection when expanded */}\n            {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions */}\n            <p\n              ref={verseTextRef}\n              className={cn(\n                'tw-flex-1 tw-overflow-hidden tw-text-ellipsis tw-text-sm tw-font-normal tw-text-muted-foreground',\n                {\n                  'tw-overflow-visible tw-text-clip tw-whitespace-normal tw-break-words':\n                    isVerseExpanded,\n                },\n                { 'tw-whitespace-nowrap': !isVerseExpanded },\n              )}\n            >\n              {verseRef} {firstComment.verse}\n            </p>\n            {isVerseOverflowing && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={(e) => {\n                  e.stopPropagation(); // Prevent triggering the expand/collapse of the thread\n                  setIsVerseExpanded(!isVerseExpanded);\n                }}\n                className=\"tw-text-muted-foreground tw-transition hover:tw-text-foreground\"\n                aria-label={isVerseExpanded ? 'Collapse text' : 'Expand text'}\n              >\n                {isVerseExpanded ? <ChevronUp /> : <ChevronDown />}\n              </Button>\n            )}\n          </div>\n          <div className=\"tw-flex tw-w-full tw-flex-row tw-items-baseline tw-gap-3\">\n            <div className=\"tw-flex-1\">\n              <CommentItem\n                comment={firstComment}\n                localizedStrings={localizedStrings}\n                isThreadExpanded={isSelected}\n              />\n            </div>\n            {isSelected && threadStatus !== 'Resolved' && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"tw-shrink-0\"\n                onClick={(e) => {\n                  e.stopPropagation(); // Prevent triggering the expand/collapse\n                  handleResolveCommentThread(threadId);\n                }}\n              >\n                <Check />\n              </Button>\n            )}\n          </div>\n        </div>\n        <>\n          {hasReplies && !isSelected && (\n            <div className=\"tw-flex tw-items-center tw-gap-5\">\n              <div className=\"tw-w-8\">\n                <Separator />\n              </div>\n              <p className=\"tw-text-sm tw-text-muted-foreground\">{replyText}</p>\n            </div>\n          )}\n          {/* Show Editor on an unselected thread when it has drafted content */}\n          {!isSelected && hasEditorContent(editorState) && (\n            <Editor\n              editorSerializedState={editorState}\n              onSerializedChange={(value) => setEditorState(value)}\n              placeholder={localizedStrings['%comment_replyOrAssign%']}\n            />\n          )}\n          {isSelected && (\n            <>\n              {/* Show \"hidden replies\" separator before the visible replies if there are hidden replies */}\n              {hiddenReplyCount > 0 && (\n                <div\n                  className=\"tw-flex tw-cursor-pointer tw-items-center tw-gap-5 tw-py-2\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setShowAllReplies(true);\n                  }}\n                  role=\"button\"\n                  tabIndex={0}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      setShowAllReplies(true);\n                    }\n                  }}\n                >\n                  <div className=\"tw-w-8\">\n                    <Separator />\n                  </div>\n                  <div className=\"tw-flex tw-items-center tw-gap-2\">\n                    <p className=\"tw-text-sm tw-text-muted-foreground\">{hiddenReplyText}</p>\n                    {showAllReplies ? <ChevronUp /> : <ChevronDown />}\n                  </div>\n                </div>\n              )}\n              {visibleReplies.map((reply) => (\n                <div key={reply.id}>\n                  <CommentItem\n                    comment={reply}\n                    localizedStrings={localizedStrings}\n                    isReply\n                    isThreadExpanded={isSelected}\n                  />\n                </div>\n              ))}\n\n              <div\n                role=\"textbox\"\n                tabIndex={-1}\n                className=\"tw-w-full tw-space-y-2\"\n                onClick={(e) => e.stopPropagation()}\n                onKeyDownCapture={(e) => {\n                  if (e.key === 'Enter' && e.shiftKey) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    if (hasEditorContent(editorState)) {\n                      handleSubmitComment();\n                    }\n                  }\n                }}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.stopPropagation();\n                  }\n                }}\n              >\n                <Editor\n                  editorSerializedState={editorState}\n                  onSerializedChange={(value) => setEditorState(value)}\n                  placeholder={localizedStrings['%comment_replyOrAssign%']}\n                  autoFocus\n                  onClear={(clearFn) => {\n                    clearEditorRef.current = clearFn;\n                  }}\n                />\n                <div className=\"tw-flex tw-flex-row tw-items-start tw-justify-end tw-gap-2\">\n                  <Button\n                    size=\"icon\"\n                    variant=\"outline\"\n                    className=\"tw-flex tw-items-center tw-justify-center tw-rounded-md\"\n                    disabled={!hasEditorContent(editorState)}\n                  >\n                    <AtSign />\n                  </Button>\n                  <Button\n                    size=\"icon\"\n                    onClick={handleSubmitComment}\n                    className=\"tw-flex tw-items-center tw-justify-center tw-rounded-md\"\n                    disabled={!hasEditorContent(editorState)}\n                  >\n                    <ArrowUp />\n                  </Button>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      </CardContent>\n    </Card>\n  );\n}\n","import { cn } from '@/utils/shadcn-ui.util';\nimport React, { RefObject, useCallback, useEffect, useState } from 'react';\nimport { ListboxOption, useListbox } from '@/hooks/listbox-keyboard-navigation.hook';\nimport { CommentListProps } from './comment-list.types';\nimport { CommentThread } from './comment-thread.component';\n\nconst getUniqueThreadId = (id: string) => `thread-${id}`;\n\n/**\n * Component for rendering a list of comment threads\n *\n * @param CommentListProps Props for the CommentList component\n */\nexport default function CommentList({\n  className = '',\n  threads,\n  localizedStrings,\n  handleAddComment,\n  handleResolveCommentThread,\n}: CommentListProps) {\n  const [selectedThreadId, setSelectedThreadId] = useState<string | undefined>();\n\n  const options: ListboxOption[] = threads.map((thread) => ({\n    id: getUniqueThreadId(thread.id),\n  }));\n\n  const handleKeyboardSelectThread = useCallback((option: ListboxOption) => {\n    setSelectedThreadId(option.id);\n  }, []);\n\n  const handleSelectThread = useCallback((threadId: string) => {\n    setSelectedThreadId(threadId);\n  }, []);\n\n  const { listboxRef, activeId, handleKeyDown } = useListbox({\n    options,\n    onOptionSelect: handleKeyboardSelectThread,\n  });\n\n  // Set selected thread id to undefined when Escape is pressed\n  const handleKeyDownWithEscape = useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (event.key === 'Escape') {\n        setSelectedThreadId(undefined);\n        event.preventDefault();\n        event.stopPropagation();\n      } else {\n        handleKeyDown(event);\n      }\n    },\n    [handleKeyDown],\n  );\n\n  // When a thread is expanded, focus the editor and place cursor at the end\n  useEffect(() => {\n    if (!selectedThreadId) return;\n\n    const container = document.getElementById(selectedThreadId);\n    if (!container) return;\n\n    const requestAnimationFrameScheduled = requestAnimationFrame(() => {\n      const requestAnimationFrameChangesRendered = requestAnimationFrame(() => {\n        const contentEditableField = container.querySelector<HTMLElement>(\n          '[contenteditable=\"true\"]',\n        );\n        const fallback = container.querySelector<HTMLElement>(\n          'textarea:not([disabled]), select:not([disabled]), button:not([disabled])',\n        );\n        const toFocus = contentEditableField ?? fallback;\n        if (toFocus) {\n          toFocus.focus();\n          // Move cursor to the end of the contentEditable element\n          if (contentEditableField && toFocus === contentEditableField) {\n            const selection = window.getSelection();\n            const range = document.createRange();\n            range.selectNodeContents(contentEditableField);\n            range.collapse(false); // false = collapse to end\n            selection?.removeAllRanges();\n            selection?.addRange(range);\n          }\n        }\n      });\n      return () => cancelAnimationFrame(requestAnimationFrameChangesRendered);\n    });\n    return () => cancelAnimationFrame(requestAnimationFrameScheduled);\n  }, [selectedThreadId]);\n\n  return (\n    <div\n      id=\"comment-list\"\n      role=\"listbox\"\n      tabIndex={0}\n      // The listboxRef is an HTMLElement so that the keyboard navigation can be used with multiple types of elements\n      // eslint-disable-next-line no-type-assertion/no-type-assertion\n      ref={listboxRef as RefObject<HTMLDivElement>}\n      aria-activedescendant={activeId ?? undefined}\n      aria-label=\"Comments\"\n      className={cn(\n        'tw-flex tw-w-full tw-max-w-screen-md tw-flex-col tw-space-y-3 tw-outline-none focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-1 focus:tw-ring-offset-background',\n        className,\n      )}\n      onKeyDown={handleKeyDownWithEscape}\n    >\n      {threads.map((thread) => (\n        <div key={getUniqueThreadId(thread.id)}>\n          <CommentThread\n            comments={thread.comments}\n            localizedStrings={localizedStrings}\n            verseRef={thread.verseRef}\n            handleSelectThread={handleSelectThread}\n            threadId={getUniqueThreadId(thread.id)}\n            isSelected={selectedThreadId === getUniqueThreadId(thread.id)}\n            assignedUser={thread.assignedUser}\n            threadStatus={thread.status}\n            handleAddComment={handleAddComment}\n            handleResolveCommentThread={handleResolveCommentThread}\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n","import { cva } from 'class-variance-authority';\nimport { createContext, useContext } from 'react';\n\nexport type MenuContextProps = {\n  variant?: 'default' | 'muted';\n};\n\nexport const MenuContext = createContext<MenuContextProps | undefined>(undefined);\n\nexport function useMenuContext() {\n  const context = useContext(MenuContext);\n  if (!context) {\n    throw new Error('useMenuContext must be used within a MenuContext.Provider.');\n  }\n\n  return context;\n}\n\nexport const menuVariants = cva('', {\n  variants: {\n    variant: {\n      default: '',\n      muted:\n        'hover:tw-bg-muted hover:tw-text-foreground focus:tw-bg-muted focus:tw-text-foreground data-[state=open]:tw-bg-muted data-[state=open]:tw-text-foreground',\n    },\n  },\n  defaultVariants: {\n    variant: 'default',\n  },\n});\n","import {\n  MenuContext,\n  MenuContextProps,\n  menuVariants,\n  useMenuContext,\n} from '@/context/menu.context';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\nimport React from 'react';\n\n/**\n * Dropdown Menu components providing accessible dropdown menus and submenus. These components are\n * built on Radix UI primitives and styled with Shadcn UI. See Shadcn UI Documentation:\n * https://ui.shadcn.com/docs/components/dropdown-menu See Radix UI Documentation:\n * https://www.radix-ui.com/primitives/docs/components/dropdown-menu\n */\n/* #region CUSTOM Add variant prop to support different styles */\nexport type DropdownMenuProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Root\n> & {\n  variant?: MenuContextProps['variant'];\n};\n/* #endregion CUSTOM */\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuSubTriggerProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.SubTrigger\n> & {\n  className?: string;\n  inset?: boolean;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuSubContentProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.SubContent\n> & {\n  className?: string;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuContentProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Content\n> & {\n  className?: string;\n  sideOffset?: number;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuItemProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Item\n> & {\n  className?: string;\n  inset?: boolean;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuCheckboxItemProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.CheckboxItem\n> & {\n  className?: string;\n  checked?: boolean;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuRadioItemProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.RadioItem\n> & {\n  className?: string;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuLabelProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Label\n> & {\n  className?: string;\n  inset?: boolean;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuSeparatorProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Separator\n> & {\n  className?: string;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuShortcutProps = React.HTMLAttributes<HTMLSpanElement> & {\n  className?: string;\n};\n\n/* #region CUSTOM Provide context to add variants */\n/** @inheritdoc DropdownMenuProps */\nexport function DropdownMenu({ variant = 'default', ...props }: DropdownMenuProps) {\n  const contextValue = React.useMemo<MenuContextProps>(\n    () => ({\n      variant,\n    }),\n    [variant],\n  );\n  return (\n    <MenuContext.Provider value={contextValue}>\n      <DropdownMenuPrimitive.Root {...props} />\n    </MenuContext.Provider>\n  );\n}\n/* #endregion CUSTOM */\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  DropdownMenuSubTriggerProps\n>(({ className, inset, children, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      ref={ref}\n      className={cn(\n        'tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-accent data-[state=open]:tw-bg-accent',\n        inset && 'tw-pl-8',\n        className,\n        menuVariants({ variant: context.variant }), // CUSTOM use context to add variants\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRight className=\"tw-ml-auto tw-h-4 tw-w-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  );\n});\nDropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  DropdownMenuSubContentProps\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      'pr-twp tw-z-50 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-lg data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;\n\n/* TODO: bug in shadcn component: DropdownMenuContent does not support a dir prop.\nFor the content we can work around this by adding a div with dir, but that would not cause\nthe scrollbar to appear left in an rtl layout (e.g. see book-chapter-control.component) */\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  DropdownMenuContentProps\n>(({ className, sideOffset = 4, children, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        ref={ref}\n        sideOffset={sideOffset}\n        className={cn(\n          /* adding pr-twp because the dropdown content is added to the dom as a sibling to the app root */\n          'pr-twp tw-z-50 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-md data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n          className,\n        )}\n        {...props}\n      >\n        <div dir={dir}>{children}</div>\n      </DropdownMenuPrimitive.Content>\n    </DropdownMenuPrimitive.Portal>\n  );\n});\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  DropdownMenuItemProps\n>(({ className, inset, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <DropdownMenuPrimitive.Item\n      ref={ref}\n      className={cn(\n        // removed: tw-relative focus:tw-text-accent-foreground\n        'tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-accent data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        inset && 'tw-pl-8',\n        className,\n        menuVariants({ variant: context.variant }), // CUSTOM use context to add variants\n      )}\n      {...props}\n      dir={dir}\n    />\n  );\n});\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  DropdownMenuCheckboxItemProps\n>(({ className, children, checked, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pe-2 tw-ps-8 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        className,\n        menuVariants({ variant: context.variant }), // CUSTOM use context to add variants\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"tw-absolute tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center ltr:tw-left-2 rtl:tw-right-2\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <Check className=\"tw-h-4 tw-w-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  );\n});\nDropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  DropdownMenuRadioItemProps\n>(({ className, children, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pe-2 tw-ps-8 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        className,\n        menuVariants({ variant: context.variant }), // CUSTOM use context to add variants\n      )}\n      {...props}\n    >\n      <span className=\"tw-absolute tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center ltr:tw-left-2 rtl:tw-right-2\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <Circle className=\"tw-h-2 tw-w-2 tw-fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  );\n});\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  DropdownMenuLabelProps\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn('tw-px-2 tw-py-1.5 tw-text-sm tw-font-semibold', inset && 'tw-pl-8', className)}\n    {...props}\n  />\n));\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  DropdownMenuSeparatorProps\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-my-1 tw-h-px tw-bg-muted', className)}\n    {...props}\n  />\n));\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport function DropdownMenuShortcut({ className, ...props }: DropdownMenuShortcutProps) {\n  return (\n    <span\n      className={cn('tw-ms-auto tw-text-xs tw-tracking-widest tw-opacity-60', className)}\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...props}\n    />\n  );\n}\nDropdownMenuShortcut.displayName = 'DropdownMenuShortcut';\n","import { DropdownMenuTrigger } from '@radix-ui/react-dropdown-menu';\nimport { FilterIcon } from 'lucide-react';\nimport { Table } from '@tanstack/react-table';\n\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuCheckboxItem,\n  DropdownMenuContent,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n} from '@/components/shadcn-ui/dropdown-menu';\n\ninterface DataTableViewOptionsProps<TData> {\n  table: Table<TData>;\n}\n\nexport function DataTableViewOptions<TData>({ table }: DataTableViewOptionsProps<TData>) {\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className=\"tw-ml-auto tw-hidden tw-h-8 lg:tw-flex\">\n          <FilterIcon className=\"tw-mr-2 tw-h-4 tw-w-4\" />\n          View\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"tw-w-[150px]\">\n        <DropdownMenuLabel>Toggle columns</DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        {table\n          .getAllColumns()\n          .filter((column) => column.getCanHide())\n          .map((column) => {\n            return (\n              <DropdownMenuCheckboxItem\n                key={column.id}\n                className=\"tw-capitalize\"\n                checked={column.getIsVisible()}\n                onCheckedChange={(value) => column.toggleVisibility(!!value)}\n              >\n                {column.id}\n              </DropdownMenuCheckboxItem>\n            );\n          })}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n\nexport default DataTableViewOptions;\n","import React from 'react';\nimport * as SelectPrimitive from '@radix-ui/react-select';\nimport { Check, ChevronDown, ChevronUp } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cva, VariantProps } from 'class-variance-authority';\n\n/**\n * Props for Select component\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/select}\n */\nexport interface SelectTriggerProps\n  extends React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>,\n    VariantProps<typeof selectTriggerVariants> {\n  asChild?: boolean;\n}\n\n/**\n * Select components display a list of options for the user to pick fromâ€”triggered by a button.\n * These components are built on Radix UI primitives and styled with Shadcn UI.\n *\n * See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/select See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/select\n */\nconst Select = SelectPrimitive.Root;\n\n/** @inheritdoc Select */\nconst SelectGroup = SelectPrimitive.Group;\n\n/** @inheritdoc Select */\nconst SelectValue = SelectPrimitive.Value;\n\n/**\n * Style variants for the Select Trigger component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/button}\n */\nexport const selectTriggerVariants = cva(\n  'tw-flex tw-h-10 tw-w-full tw-items-center tw-justify-between tw-rounded-md tw-border tw-border-input tw-bg-background tw-px-3 tw-py-2 tw-text-sm tw-ring-offset-background placeholder:tw-text-muted-foreground focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50 [&>span]:tw-line-clamp-1',\n  {\n    variants: {\n      size: {\n        default: 'tw-h-10 tw-px-4 tw-py-2',\n        sm: 'tw-h-8 tw-rounded-md tw-px-3',\n        lg: 'tw-h-11 tw-rounded-md tw-px-8',\n        icon: 'tw-h-10 tw-w-10',\n      },\n    },\n    defaultVariants: {\n      size: 'default',\n    },\n  },\n);\n\n/** @inheritdoc Select */\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  SelectTriggerProps\n>(({ className, children, size, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <SelectPrimitive.Trigger\n      className={cn(selectTriggerVariants({ size, className }))}\n      ref={ref}\n      {...props}\n      dir={dir}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDown className=\"tw-h-4 tw-w-4 tw-opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  );\n});\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\n/** @inheritdoc Select */\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn('tw-flex tw-cursor-default tw-items-center tw-justify-center tw-py-1', className)}\n    {...props}\n  >\n    <ChevronUp className=\"tw-h-4 tw-w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\n/** @inheritdoc Select */\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn('tw-flex tw-cursor-default tw-items-center tw-justify-center tw-py-1', className)}\n    {...props}\n  >\n    <ChevronDown className=\"tw-h-4 tw-w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\n\n/** @inheritdoc Select */\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = 'popper', ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        ref={ref}\n        className={cn(\n          'pr-twp tw-relative tw-z-50 tw-max-h-96 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-text-popover-foreground tw-shadow-md data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n          position === 'popper' &&\n            'data-[side=bottom]:tw-translate-y-1 data-[side=left]:tw--translate-x-1 data-[side=right]:tw-translate-x-1 data-[side=top]:tw--translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'tw-p-1',\n            position === 'popper' &&\n              'tw-h-[var(--radix-select-trigger-height)] tw-w-full tw-min-w-[var(--radix-select-trigger-width)]',\n          )}\n        >\n          <div dir={dir}>{children}</div>\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  );\n});\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\n/** @inheritdoc Select */\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn('tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-font-semibold', className)}\n    {...props}\n  />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\n/** @inheritdoc Select */\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      'tw-relative tw-flex tw-w-full tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pe-2 tw-ps-8 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"tw-absolute tw-start-2 tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"tw-h-4 tw-w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\n/** @inheritdoc Select */\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-my-1 tw-h-px tw-bg-muted', className)}\n    {...props}\n  />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n","import { ChevronLeftIcon, ChevronRightIcon, ArrowLeftIcon, ArrowRightIcon } from 'lucide-react';\nimport { Table } from '@tanstack/react-table';\n\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/shadcn-ui/select';\n\ninterface DataTablePaginationProps<TData> {\n  table: Table<TData>;\n}\n\nexport function DataTablePagination<TData>({ table }: DataTablePaginationProps<TData>) {\n  return (\n    <div className=\"tw-flex tw-items-center tw-justify-between tw-px-2 tw-pb-3 tw-pt-3\">\n      <div className=\"tw-flex tw-items-center tw-space-x-6 lg:tw-space-x-8\">\n        <div className=\"tw-flex-1 tw-text-sm tw-text-muted-foreground\">\n          {table.getFilteredSelectedRowModel().rows.length} of{' '}\n          {table.getFilteredRowModel().rows.length} row(s) selected\n        </div>\n        <div className=\"tw-flex tw-items-center tw-space-x-2\">\n          <p className=\"tw-text-nowrap tw-text-sm tw-font-medium\">Rows per page</p>\n          <Select\n            value={`${table.getState().pagination.pageSize}`}\n            onValueChange={(value) => {\n              table.setPageSize(Number(value));\n            }}\n          >\n            <SelectTrigger className=\"tw-h-8 tw-w-[70px]\">\n              <SelectValue placeholder={table.getState().pagination.pageSize} />\n            </SelectTrigger>\n            <SelectContent side=\"top\">\n              {[10, 20, 30, 40, 50].map((pageSize) => (\n                <SelectItem key={pageSize} value={`${pageSize}`}>\n                  {pageSize}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        <div className=\"tw-flex tw-w-[100px] tw-items-center tw-justify-center tw-text-sm tw-font-medium\">\n          Page {table.getState().pagination.pageIndex + 1} of {table.getPageCount()}\n        </div>\n        <div className=\"tw-flex tw-items-center tw-space-x-2\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className=\"tw-hidden tw-h-8 tw-w-8 tw-p-0 lg:tw-flex\"\n            onClick={() => table.setPageIndex(0)}\n            disabled={!table.getCanPreviousPage()}\n          >\n            <span className=\"tw-sr-only\">Go to first page</span>\n            <ArrowLeftIcon className=\"tw-h-4 tw-w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className=\"tw-h-8 tw-w-8 tw-p-0\"\n            onClick={() => table.previousPage()}\n            disabled={!table.getCanPreviousPage()}\n          >\n            <span className=\"tw-sr-only\">Go to previous page</span>\n            <ChevronLeftIcon className=\"tw-h-4 tw-w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className=\"tw-h-8 tw-w-8 tw-p-0\"\n            onClick={() => table.nextPage()}\n            disabled={!table.getCanNextPage()}\n          >\n            <span className=\"tw-sr-only\">Go to next page</span>\n            <ChevronRightIcon className=\"tw-h-4 tw-w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className=\"tw-hidden tw-h-8 tw-w-8 tw-p-0 lg:tw-flex\"\n            onClick={() => table.setPageIndex(table.getPageCount() - 1)}\n            disabled={!table.getCanNextPage()}\n          >\n            <span className=\"tw-sr-only\">Go to last page</span>\n            <ArrowRightIcon className=\"tw-h-4 tw-w-4\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default DataTablePagination;\n","/** Defines HTML elements that can be focusable by keyboard as a CSS selector string */\nconst FOCUSABLE_SELECTOR = `\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [contenteditable],\n  tr:not([disabled])\n`;\n\n/** Returns true if the element is visible in the DOM */\nfunction isVisible(el: HTMLElement): boolean {\n  return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n}\n\n/**\n * Finds all focusable elements in the given container. Focusable elements are all HTML elements\n * that can receive keyboard focus, and are not disabled or hidden from screen readers.\n *\n * @param container The container element to search for focusable elements.\n * @param uniqueQuerySelector An optional CSS selector to filter the focusable elements by.\n * @returns An array of focusable elements.\n */\nexport function getFocusableElements(\n  container: HTMLElement,\n  uniqueQuerySelector?: string,\n): HTMLElement[] {\n  const query = uniqueQuerySelector\n    ? `${FOCUSABLE_SELECTOR}, ${uniqueQuerySelector}`\n    : FOCUSABLE_SELECTOR;\n  return Array.from(container.querySelectorAll<HTMLElement>(query)).filter(\n    (el) => !el.hasAttribute('disabled') && !el.getAttribute('aria-hidden') && isVisible(el),\n  );\n}\n","import React from 'react';\nimport { getFocusableElements } from '@/utils/focus.util';\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Table components provide a responsive table. These components are built and styled with Shadcn\n * UI. See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/table\n */\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement> & { stickyHeader?: boolean }\n>(({ className, stickyHeader, ...props }, ref) => {\n  // CUSTOM: Use internal ref to manage keyboard navigation and Enter key behavior\n  // This ref gets passed into the table row ref property which expects null and not undefined\n  // eslint-disable-next-line no-null/no-null\n  const tableRef = React.useRef<HTMLTableElement>(null);\n\n  // CUSTOM: Assign internal ref to external ref if provided\n  React.useEffect(() => {\n    if (typeof ref === 'function') {\n      ref(tableRef.current);\n    } else if (ref && 'current' in ref) {\n      ref.current = tableRef.current;\n    }\n  }, [ref]);\n\n  // CUSTOM: Force tabindex -1 on all focusable elements within the table to prevent tab navigation\n  React.useEffect(() => {\n    const currentTable = tableRef.current;\n    if (!currentTable) return;\n\n    const setTabIndexes = () => {\n      requestAnimationFrame(() => {\n        const focusables = getFocusableElements(currentTable, `[tabindex]:not([tabindex=\"-1\"])`);\n        focusables.forEach((el) => {\n          el.setAttribute('tabindex', '-1');\n        });\n      });\n    };\n\n    setTabIndexes();\n\n    const observer = new MutationObserver(() => {\n      setTabIndexes();\n    });\n\n    observer.observe(currentTable, {\n      childList: true, // Watch for added/removed elements\n      subtree: true, // Include descendants\n      attributes: true,\n      attributeFilter: ['tabindex'], // Watch for tabindex changes\n    });\n\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n\n  // CUSTOM: Handle keydown events for the table\n  const handleKeyDownInTable = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    const { current: currentTable } = tableRef;\n    if (!currentTable) return;\n\n    if (e.key === 'ArrowDown') {\n      // Move focus to the first row in the table (header or body)\n      e.preventDefault();\n      const firstRow = getFocusableElements(currentTable)[0];\n      firstRow.focus();\n      return;\n    }\n    if (e.key === ' ' && document.activeElement === currentTable) {\n      e.preventDefault(); // Prevent scrolling\n    }\n  };\n\n  return (\n    <div className={cn('pr-twp tw-relative tw-w-full', { 'tw-p-1': stickyHeader })}>\n      {/* Table element is not interactive by default but we need to add a keydown handler */}\n      {/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */}\n      <table\n        // Need to add a keydown handler to the table to prevent default behavior of space, enter, and arrow down keys\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n        tabIndex={0} // CUSTOM: Make table tabbable\n        onKeyDown={handleKeyDownInTable} // CUSTOM: Enable keyboard behavior\n        ref={tableRef} // CUSTOM: Use internal ref to manage keyboard navigation\n        className={cn(\n          'tw-w-full tw-caption-bottom tw-text-sm tw-outline-none', // CUSTOM: Add outline-none to remove duplicate outline\n          'focus:tw-relative focus:tw-z-10 focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-1 focus:tw-ring-offset-background', // CUSTOM: Add focus styles\n          className,\n        )}\n        aria-label=\"Table\" // CUSTOM: Add aria-label for accessibility\n        aria-labelledby=\"table-label\" // CUSTOM: Add aria-labelledby for accessibility\n        {...props}\n      />\n    </div>\n  );\n});\nTable.displayName = 'Table';\n\n/** @inheritdoc Table */\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement> & { stickyHeader?: boolean }\n>(({ className, stickyHeader, ...props }, ref) => (\n  <thead\n    ref={ref}\n    className={cn(\n      {\n        'tw-sticky tw-top-[-1px] tw-z-20 tw-bg-background tw-drop-shadow-sm': stickyHeader,\n      },\n      '[&_tr]:tw-border-b',\n      className,\n    )}\n    {...props}\n  />\n));\nTableHeader.displayName = 'TableHeader';\n\n/** @inheritdoc Table */\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody ref={ref} className={cn('[&_tr:last-child]:tw-border-0', className)} {...props} />\n));\nTableBody.displayName = 'TableBody';\n\n/** @inheritdoc Table */\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn('tw-border-t tw-bg-muted/50 tw-font-medium [&>tr]:last:tw-border-b-0', className)}\n    {...props}\n  />\n));\nTableFooter.displayName = 'TableFooter';\n\n// CUSTOM: Manage keyboard navigation and Enter key behavior for focusable elements in a row\nfunction useFocusableInRowKeyboardNavigation(rowRef: React.RefObject<HTMLTableRowElement>) {\n  React.useEffect(() => {\n    const row = rowRef.current;\n    if (!row) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!row.contains(document.activeElement)) return;\n\n      if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {\n        e.preventDefault();\n        e.stopPropagation(); // Helps override internal widget handlers\n        const focusables = rowRef.current ? getFocusableElements(rowRef.current) : [];\n        // activeElement is generic Element, so we need to cast it to HTMLElement\n        // eslint-disable-next-line no-type-assertion/no-type-assertion\n        const index = focusables.indexOf(document.activeElement as HTMLElement);\n        const nextIndex = e.key === 'ArrowRight' ? index + 1 : index - 1;\n        if (nextIndex >= 0 && nextIndex < focusables.length) {\n          focusables[nextIndex].focus();\n        }\n      }\n\n      if (e.key === 'Escape') {\n        e.preventDefault();\n        row.focus();\n      }\n\n      if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n        e.preventDefault();\n      }\n    };\n\n    row.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      row.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [rowRef]);\n}\n\n// CUSTOM: Move focus left or right to adjacent focusable items in the same row\nfunction focusAdjacentFocusableElementInRow(\n  focusablesInRow: HTMLElement[],\n  currentIndexOfFocusables: number,\n  direction: 'ArrowLeft' | 'ArrowRight',\n) {\n  let nextFocusable: HTMLElement | undefined;\n  if (direction === 'ArrowLeft' && currentIndexOfFocusables > 0) {\n    nextFocusable = focusablesInRow[currentIndexOfFocusables - 1];\n  } else if (direction === 'ArrowRight' && currentIndexOfFocusables < focusablesInRow.length - 1) {\n    nextFocusable = focusablesInRow[currentIndexOfFocusables + 1];\n  }\n  if (nextFocusable) {\n    requestAnimationFrame(() => nextFocusable.focus());\n    return true;\n  }\n  return false;\n}\n\n// CUSTOM: Move focus up or down to adjacent rows in the same table\nfunction focusAdjacentRow(\n  rowsInTable: HTMLTableRowElement[],\n  currentRowIndex: number,\n  direction: 'ArrowDown' | 'ArrowUp',\n) {\n  let nextRow: HTMLTableRowElement | undefined;\n  if (direction === 'ArrowDown' && currentRowIndex < rowsInTable.length - 1) {\n    nextRow = rowsInTable[currentRowIndex + 1];\n  } else if (direction === 'ArrowUp' && currentRowIndex > 0) {\n    nextRow = rowsInTable[currentRowIndex - 1];\n  }\n  if (nextRow) {\n    requestAnimationFrame(() => nextRow.focus());\n    return true;\n  }\n  return false;\n}\n\n/** @inheritdoc Table */\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement> & { setFocusAlsoRunsSelect?: boolean }\n>(({ className, onKeyDown, onSelect, setFocusAlsoRunsSelect = false, ...props }, ref) => {\n  // CUSTOM: Use internal ref to manage keyboard navigation and Enter key behavior\n  // This ref gets passed into the table row ref property which expects null and not undefined\n  // eslint-disable-next-line no-null/no-null\n  const rowRef = React.useRef<HTMLTableRowElement>(null);\n\n  // CUSTOM: Assign internal ref to external ref if provided\n  React.useEffect(() => {\n    if (typeof ref === 'function') {\n      ref(rowRef.current);\n    } else if (ref && 'current' in ref) {\n      ref.current = rowRef.current;\n    }\n  }, [ref]);\n\n  // CUSTOM: Use internal ref to manage keyboard navigation and Enter key behavior\n  useFocusableInRowKeyboardNavigation(rowRef);\n\n  // CUSTOM: Get all focusable elements in the current row\n  const focusablesInRow = React.useMemo(\n    () => (rowRef.current ? getFocusableElements(rowRef.current) : []),\n    [rowRef],\n  );\n\n  // CUSTOM: Handle keydown events for keyboard navigation\n  const handleKeyDown = React.useCallback(\n    (e: React.KeyboardEvent<HTMLTableRowElement>) => {\n      const { current: currentRow } = rowRef;\n      if (!currentRow || !currentRow.parentElement) return;\n\n      const closestTable = currentRow.closest('table');\n      const rowsInTable = closestTable\n        ? // getFocusableElements returns an HTMLElement[] but we are filtering for HTMLTableRowElements\n          // eslint-disable-next-line no-type-assertion/no-type-assertion\n          (getFocusableElements(closestTable) as HTMLTableRowElement[]).filter(\n            (element) => element.tagName === 'TR',\n          )\n        : [];\n      const currentRowIndex = rowsInTable.indexOf(currentRow);\n      const currentIndexOfFocusables = focusablesInRow.indexOf(\n        // activeElement is generic Element, so we need to cast it to HTMLElement\n        // eslint-disable-next-line no-type-assertion/no-type-assertion\n        document.activeElement as HTMLElement,\n      );\n\n      if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n        e.preventDefault();\n        focusAdjacentRow(rowsInTable, currentRowIndex, e.key);\n      } else if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n        e.preventDefault();\n        focusAdjacentFocusableElementInRow(focusablesInRow, currentIndexOfFocusables, e.key);\n      } else if (e.key === 'Escape') {\n        e.preventDefault();\n        const table = currentRow.closest('table');\n        if (table) {\n          table.focus();\n        }\n      }\n\n      // Call user-defined onKeyDown handler if provided\n      onKeyDown?.(e);\n    },\n    [rowRef, focusablesInRow, onKeyDown],\n  );\n\n  const handleFocus = React.useCallback(\n    (e: React.FocusEvent<HTMLTableRowElement>) => {\n      if (setFocusAlsoRunsSelect) onSelect?.(e);\n    },\n    [setFocusAlsoRunsSelect, onSelect],\n  );\n\n  return (\n    <tr\n      ref={rowRef}\n      tabIndex={-1} // CUSTOM: Make row not tabbable\n      onKeyDown={handleKeyDown} // CUSTOM: Enable keyboard behavior\n      onFocus={handleFocus} // CUSTOM: Handle focus event\n      className={cn(\n        // CUSTOM: Add focus styles and add tw-outline-none so there isn't a duplicate outline\n        'tw-border-b tw-outline-none tw-transition-colors hover:tw-bg-muted/50',\n        'focus:tw-relative focus:tw-z-10 focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-1 focus:tw-ring-offset-background',\n        'data-[state=selected]:tw-bg-muted',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nTableRow.displayName = 'TableRow';\n\n/** @inheritdoc Table */\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      'tw-h-12 tw-px-4 tw-text-start tw-align-middle tw-font-medium tw-text-muted-foreground [&:has([role=checkbox])]:tw-pe-0',\n      className,\n    )}\n    {...props}\n  />\n));\nTableHead.displayName = 'TableHead';\n\n/** @inheritdoc Table */\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn('tw-p-4 tw-align-middle [&:has([role=checkbox])]:tw-pe-0', className)}\n    {...props}\n  />\n));\nTableCell.displayName = 'TableCell';\n\n/** @inheritdoc Table */\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn('tw-mt-4 tw-text-sm tw-text-muted-foreground', className)}\n    {...props}\n  />\n));\nTableCaption.displayName = 'TableCaption';\n\nexport { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };\n","import React from 'react';\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Use to show a placeholder while content is loading. This component is from Shadcn UI. See Shadcn\n * UI documentation: https://ui.shadcn.com/docs/components/skeleton\n */\nfunction Skeleton({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn('pr-twp tw-animate-pulse tw-rounded-md tw-bg-muted', className)}\n      {...props}\n    />\n  );\n}\n\nexport { Skeleton };\n","import React, { useMemo, useState } from 'react';\n\nimport {\n  ColumnFiltersState,\n  flexRender,\n  getCoreRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  SortingState,\n  ColumnDef as TSColumnDef,\n  Row as TSRow,\n  RowSelectionState as TSRowSelectionState,\n  SortDirection as TSSortDirection,\n  Table as TSTable,\n  useReactTable,\n  VisibilityState,\n} from '@tanstack/react-table';\n\nimport { DataTableViewOptions } from '@/components/advanced/data-table/data-table-column-toggle.component';\nimport { DataTablePagination } from '@/components/advanced/data-table/data-table-pagination.component';\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/shadcn-ui/table';\nimport { Skeleton } from '@/components/shadcn-ui/skeleton';\n\nexport type ColumnDef<TData, TValue = unknown> = TSColumnDef<TData, TValue>;\nexport type RowContents<TData> = TSRow<TData>;\nexport type TableContents<TData> = TSTable<TData>;\nexport type SortDirection = TSSortDirection;\nexport type RowSelectionState = TSRowSelectionState;\n\ninterface DataTableProps<TData, TValue> {\n  columns: ColumnDef<TData, TValue>[];\n  data: TData[] | undefined;\n  enablePagination?: boolean;\n  showPaginationControls?: boolean;\n  showColumnVisibilityControls?: boolean;\n  stickyHeader?: boolean;\n  onRowClickHandler?: (row: RowContents<TData>, table: TableContents<TData>) => void;\n  id?: string;\n  isLoading?: boolean;\n  noResultsMessage: string;\n}\n\n/**\n * Feature-rich table component that infuses our basic shadcn-based Table component with features\n * from TanStack's React Table library\n */\nexport function DataTable<TData, TValue>({\n  columns,\n  data,\n  enablePagination = false,\n  showPaginationControls = false,\n  showColumnVisibilityControls = false,\n  stickyHeader = false,\n  onRowClickHandler = () => {},\n  id,\n  isLoading = false,\n  noResultsMessage,\n}: DataTableProps<TData, TValue>) {\n  const [sorting, setSorting] = useState<SortingState>([]);\n  const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);\n  const [columnVisibility, setColumnVisibility] = useState<VisibilityState>({});\n  const [rowSelection, setRowSelection] = useState({});\n\n  const normalizedData = useMemo(() => data ?? [], [data]);\n\n  const table = useReactTable({\n    data: normalizedData,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    ...(enablePagination && { getPaginationRowModel: getPaginationRowModel() }),\n    onSortingChange: setSorting,\n    getSortedRowModel: getSortedRowModel(),\n    onColumnFiltersChange: setColumnFilters,\n    getFilteredRowModel: getFilteredRowModel(),\n    onColumnVisibilityChange: setColumnVisibility,\n    onRowSelectionChange: setRowSelection,\n    state: {\n      sorting,\n      columnFilters,\n      columnVisibility,\n      rowSelection,\n    },\n  });\n\n  const visibleColumns = table.getVisibleFlatColumns();\n  let bodyContent: React.ReactNode;\n\n  if (isLoading) {\n    const rowCount = 10;\n    const skeletonRowIds = Array.from({ length: rowCount }).map((_, idx) => `skeleton-row-${idx}`);\n    bodyContent = skeletonRowIds.map((rowId) => (\n      <TableRow key={rowId}>\n        <TableCell colSpan={visibleColumns.length ?? columns.length} className=\"tw-border-0 tw-p-0\">\n          <div className=\"tw-w-full tw-py-2\">\n            <Skeleton className=\"tw-h-14 tw-w-full tw-rounded-md\" />\n          </div>\n        </TableCell>\n      </TableRow>\n    ));\n  } else if (table.getRowModel().rows?.length > 0) {\n    bodyContent = table.getRowModel().rows.map((row) => (\n      <TableRow\n        onClick={() => onRowClickHandler(row, table)}\n        key={row.id}\n        data-state={row.getIsSelected() && 'selected'}\n      >\n        {row.getVisibleCells().map((cell) => (\n          <TableCell key={cell.id}>\n            {flexRender(cell.column.columnDef.cell, cell.getContext())}\n          </TableCell>\n        ))}\n      </TableRow>\n    ));\n  } else {\n    bodyContent = (\n      <TableRow>\n        <TableCell colSpan={columns.length} className=\"tw-h-24 tw-text-center\">\n          {noResultsMessage}\n        </TableCell>\n      </TableRow>\n    );\n  }\n\n  return (\n    <div className=\"pr-twp\" id={id}>\n      {showColumnVisibilityControls && <DataTableViewOptions table={table} />}\n      <Table stickyHeader={stickyHeader}>\n        <TableHeader stickyHeader={stickyHeader}>\n          {table.getHeaderGroups().map((headerGroup) => (\n            <TableRow key={headerGroup.id}>\n              {headerGroup.headers.map((header) => {\n                return (\n                  <TableHead key={header.id}>\n                    {header.isPlaceholder\n                      ? undefined\n                      : flexRender(header.column.columnDef.header, header.getContext())}\n                  </TableHead>\n                );\n              })}\n            </TableRow>\n          ))}\n        </TableHeader>\n        <TableBody>{bodyContent}</TableBody>\n      </Table>\n      {enablePagination && (\n        <div className=\"tw-flex tw-items-center tw-justify-end tw-space-x-2 tw-py-4\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => table.previousPage()}\n            disabled={!table.getCanPreviousPage()}\n          >\n            Previous\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => table.nextPage()}\n            disabled={!table.getCanNextPage()}\n          >\n            Next\n          </Button>\n        </div>\n      )}\n      {enablePagination && showPaginationControls && <DataTablePagination table={table} />}\n    </div>\n  );\n}\n\nexport default DataTable;\n","import { cn } from '@/utils/shadcn-ui.util';\nimport Markdown, { MarkdownToJSX } from 'markdown-to-jsx';\nimport { parseParatextHtml } from 'platform-bible-utils';\nimport { useMemo } from 'react';\n\ninterface MarkdownRendererProps {\n  /** Optional unique identifier */\n  id?: string;\n  /** The markdown string to render */\n  markdown: string;\n  className?: string;\n  /**\n   * The [`target` attribute for `a` html\n   * tags](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#target). Defaults to not\n   * adding a `target` to `a` tags\n   */\n  anchorTarget?: string;\n  /** Optional flag to truncate the content to 3 lines */\n  truncate?: boolean;\n}\n\n/**\n * Truncate markdown content to approximately 3 lines worth of text\n *\n * @param markdown - Markdown string to truncate\n * @returns Truncated markdown string\n */\nfunction truncateMarkdown(markdown: string): string {\n  // Remove markdown formatting to get plain text length\n  const plainText = markdown\n    .replace(/[#*_~`[\\]()]/g, '') // Remove markdown syntax characters\n    .replace(/<[^>]*>/g, '') // Remove HTML tags\n    .trim();\n\n  // Approximate character limit for 3 lines (assuming ~50 chars per line)\n  const charLimit = 150;\n\n  if (plainText.length <= charLimit) {\n    return markdown;\n  }\n\n  // Find a good breaking point (end of word, sentence, or paragraph)\n  let truncateAt = charLimit;\n  const breakPoints = ['. ', '! ', '? ', '\\n', ' '];\n\n  // Try to find a natural break point near the limit\n  const foundBreak = breakPoints.find((breakPoint) => {\n    const lastBreak = plainText.lastIndexOf(breakPoint, charLimit);\n    if (lastBreak > charLimit * 0.7) {\n      // Accept break if it's at least 70% of desired length\n      truncateAt = lastBreak + breakPoint.length;\n      return true;\n    }\n    return false;\n  });\n\n  // If we didn't find a good break point, truncateAt remains charLimit\n  if (!foundBreak) {\n    truncateAt = charLimit;\n  }\n\n  // Truncate the original markdown at approximately the same position\n  // This is approximate since markdown has formatting characters\n  return `${markdown.slice(0, truncateAt).trim()}...`;\n}\n\n/**\n * This component renders markdown content given a markdown string. It uses typography styles from\n * the platform.\n *\n * @param MarkdownRendererProps\n * @returns A div containing the rendered markdown content.\n */\nexport function MarkdownRenderer({\n  id,\n  markdown,\n  className,\n  anchorTarget,\n  truncate,\n}: MarkdownRendererProps) {\n  // Clean up Paratext-specific HTML before rendering\n  const cleanedMarkdown = useMemo(() => parseParatextHtml(markdown), [markdown]);\n\n  // Truncate content if needed\n  const processedMarkdown = useMemo(\n    () => (truncate ? truncateMarkdown(cleanedMarkdown) : cleanedMarkdown),\n    [cleanedMarkdown, truncate],\n  );\n\n  const options: MarkdownToJSX.Options = useMemo(\n    () => ({\n      overrides: {\n        a: {\n          props: {\n            target: anchorTarget,\n          },\n        },\n      },\n    }),\n    [anchorTarget],\n  );\n  return (\n    <div id={id} className={cn('pr-twp tw-prose', className)}>\n      <Markdown options={options}>{processedMarkdown}</Markdown>\n    </div>\n  );\n}\n\nexport default MarkdownRenderer;\n","import { Copy } from 'lucide-react';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { LocalizedStringValue } from 'platform-bible-utils';\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const ERROR_DUMP_STRING_KEYS = Object.freeze([\n  '%webView_error_dump_header%',\n  '%webView_error_dump_info_message%',\n] as const);\n\nexport type ErrorDumpLocalizedStrings = {\n  [localizedInventoryKey in (typeof ERROR_DUMP_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: ErrorDumpLocalizedStrings,\n  key: keyof ErrorDumpLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\n/** Interface to store the parameters for the ErrorDump component */\nexport interface ErrorDumpProps {\n  /** String containing the error details to show */\n  errorDetails: string;\n  /** Handler function to notify the frontend when the error is copied */\n  handleCopyNotify?: () => void;\n  /**\n   * List of localized strings to localize the strings in this component. Relevant keys can be found\n   * in `ERROR_DUMP_STRING_KEYS`\n   */\n  localizedStrings: ErrorDumpLocalizedStrings;\n  /** Optional id for the root element */\n  id?: string;\n}\n\n/** Component to render an error dump */\nexport function ErrorDump({\n  errorDetails,\n  handleCopyNotify,\n  localizedStrings,\n  id,\n}: ErrorDumpProps) {\n  const headerText = localizeString(localizedStrings, '%webView_error_dump_header%');\n  const infoMessage = localizeString(localizedStrings, '%webView_error_dump_info_message%');\n\n  function handleCopy() {\n    navigator.clipboard.writeText(errorDetails);\n    if (handleCopyNotify) {\n      handleCopyNotify();\n    }\n  }\n\n  return (\n    <div\n      id={id}\n      className=\"tw-inline-flex tw-w-full tw-flex-col tw-items-start tw-justify-start tw-gap-4\"\n    >\n      <div className=\"tw-inline-flex tw-items-start tw-justify-start tw-gap-4 tw-self-stretch\">\n        <div className=\"tw-inline-flex tw-flex-1 tw-flex-col tw-items-start tw-justify-start\">\n          <div className=\"tw-text-color-text tw-justify-center tw-text-center tw-text-lg tw-font-semibold tw-leading-loose\">\n            {headerText}\n          </div>\n          <div className=\"tw-justify-center tw-self-stretch tw-text-sm tw-font-normal tw-leading-tight tw-text-muted-foreground\">\n            {infoMessage}\n          </div>\n        </div>\n        <Button variant=\"secondary\" size=\"icon\" className=\"size-8\" onClick={() => handleCopy()}>\n          <Copy />\n        </Button>\n      </div>\n      <div className=\"tw-prose tw-w-full\">\n        <pre className=\"tw-text-xs\">{errorDetails}</pre>\n      </div>\n    </div>\n  );\n}\n","import { PropsWithChildren, useState } from 'react';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { ErrorDump, ErrorDumpProps, ERROR_DUMP_STRING_KEYS } from '../basics/error-dump.component';\nimport { Popover, PopoverContent, PopoverTrigger } from '../shadcn-ui/popover';\nimport { Label } from '../shadcn-ui/label';\n\n/**\n * Object containing all keys used for localization in the ErrorPopover component. This extends\n * ERROR_DUMP_STRING_KEYS with additional keys specific to the ErrorPopover. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const ERROR_POPOVER_STRING_KEYS = Object.freeze([\n  ...ERROR_DUMP_STRING_KEYS,\n  '%webView_error_dump_copied_message%',\n] as const);\n\nexport type ErrorPopoverLocalizedStrings = {\n  [localizedKey in (typeof ERROR_POPOVER_STRING_KEYS)[number]]?: string;\n};\n\n/** Interface to store the parameters for the ErrorPopover component */\nexport type ErrorPopoverProps = PropsWithChildren &\n  Omit<ErrorDumpProps, 'localizedStrings'> & {\n    /**\n     * List of localized strings to localize the strings in this component. Relevant keys can be\n     * found in `ERROR_POPOVER_STRING_KEYS`\n     */\n    localizedStrings: ErrorPopoverLocalizedStrings;\n    /** Optional CSS classes to insert into the `PopoverContent` */\n    className?: string;\n    /** Optional ID for the popover content for accessibility */\n    id?: string;\n  };\n\n/** A popover component that displays detailed error information using the ErrorDump component. */\nexport function ErrorPopover({\n  errorDetails,\n  handleCopyNotify,\n  localizedStrings,\n  children,\n  className,\n  id,\n}: ErrorPopoverProps) {\n  const [isCopySuccess, setIsCopySuccess] = useState<boolean>(false);\n\n  const handleCopyWithNotification = () => {\n    setIsCopySuccess(true);\n    if (handleCopyNotify) {\n      handleCopyNotify();\n    }\n  };\n\n  const handleOpenChange = (open: boolean) => {\n    if (!open) {\n      setIsCopySuccess(false);\n    }\n  };\n\n  return (\n    <Popover onOpenChange={handleOpenChange}>\n      <PopoverTrigger asChild>{children}</PopoverTrigger>\n      <PopoverContent id={id} className={cn('tw-min-w-80 tw-max-w-96', className)}>\n        {isCopySuccess && localizedStrings['%webView_error_dump_copied_message%'] && (\n          <Label>{localizedStrings['%webView_error_dump_copied_message%']}</Label>\n        )}\n        <ErrorDump\n          errorDetails={errorDetails}\n          handleCopyNotify={handleCopyWithNotification}\n          localizedStrings={localizedStrings}\n        />\n      </PopoverContent>\n    </Popover>\n  );\n}\n","import {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuLabel,\n  DropdownMenuGroup,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuRadioGroup,\n} from '@/components/shadcn-ui/dropdown-menu';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { ChevronDown, Filter } from 'lucide-react';\nimport { useState } from 'react';\n\n/** The DropdownMenuItemType enum is used to determine the type of the dropdown item */\nexport enum DropdownMenuItemType {\n  Check,\n  Radio,\n}\n\nexport type DropdownItem = {\n  /** Unique identifier for this dropdown */\n  id: string;\n  /** The label is the text that will be displayed on the dropdown item. */\n  label: string;\n  /** The onUpdate function is called when the state of a dropdown item is changed. */\n  onUpdate: (id: string, checked?: boolean) => void;\n};\n\nexport type DropdownGroup = {\n  /**\n   * The label is the text that will be displayed on the dropdown group. It is used to categorize\n   * the items in the group.\n   */\n  label: string;\n  /** The itemType determines the DropdownMenuItemType type as either Check or Radio. */\n  itemType: DropdownMenuItemType;\n  /** The items array contains the items that will be displayed in the dropdown group */\n  items: DropdownItem[];\n};\n\nexport type FilterDropdownProps = {\n  /** Object unique identifier */\n  id?: string;\n  /** Label for the trigger button */\n  label: string;\n  /** The groups array contains the groups that will be displayed in the dropdown */\n  groups: DropdownGroup[];\n}; // TODO: extend the props later\n\n/**\n * The FilterDropdown component is a dropdown designed for filtering content. It includes groups of\n * items that can be checkboxes or radio items.\n *\n * @param FilterDropdownProps\n * @returns A filter dropdown.\n */\nexport function FilterDropdown({ id, label, groups }: FilterDropdownProps) {\n  // Populates the boolean Arrays for the group indexes that are checkbox groups\n  const [checkedStates, setCheckedStates] = useState<Record<number, boolean[]>>(\n    Object.fromEntries(\n      groups\n        .map((group, index) =>\n          group.itemType === DropdownMenuItemType.Check ? [index, []] : undefined,\n        )\n        .filter((entry) => !!entry),\n    ),\n  );\n  const [radioStates, setRadioStates] = useState<Record<number, string>>({});\n\n  const handleCheckboxUpdate = (groupIndex: number, index: number) => {\n    const newCheckedState = !checkedStates[groupIndex][index];\n    // Update the checked state first\n    setCheckedStates((oldCheckedStates) => {\n      oldCheckedStates[groupIndex][index] = newCheckedState;\n      return { ...oldCheckedStates };\n    });\n\n    // Calls the `onUpdate()` handler function for the dropdown item\n    const item = groups[groupIndex].items[index];\n    item.onUpdate(item.id, newCheckedState);\n  };\n\n  const handleRadioUpdate = (groupIndex: number, value: string) => {\n    // Updates the radio state first\n    setRadioStates((oldRadioStates) => {\n      oldRadioStates[groupIndex] = value;\n      return { ...oldRadioStates };\n    });\n\n    // Calls the `onUpdate()` handler function for the dropdown item\n    const currentItem = groups[groupIndex].items.find((item) => item.id === value);\n    if (currentItem) {\n      currentItem.onUpdate(value);\n    } else {\n      console.error(`Could not find dropdown radio item with id '${value}'!`);\n    }\n  };\n\n  return (\n    <div id={id}>\n      {/* TODO: remove this once the DropDown Menu shadcn has an id prop */}\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"default\">\n            <Filter size={16} className=\"tw-mr-2 tw-h-4 tw-w-4\" />\n            {label}\n            <ChevronDown size={16} className=\"tw-ml-2 tw-h-4 tw-w-4\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent>\n          {groups.map((group, groupIndex) => (\n            <div key={group.label}>\n              <DropdownMenuLabel>{group.label}</DropdownMenuLabel>\n              <DropdownMenuGroup>\n                {group.itemType === DropdownMenuItemType.Check ? (\n                  <>\n                    {group.items.map((item, index) => (\n                      <div key={item.id}>\n                        <DropdownMenuCheckboxItem\n                          checked={checkedStates[groupIndex][index]}\n                          onCheckedChange={() => handleCheckboxUpdate(groupIndex, index)}\n                        >\n                          {item.label}\n                        </DropdownMenuCheckboxItem>\n                      </div>\n                    ))}\n                  </>\n                ) : (\n                  <DropdownMenuRadioGroup\n                    value={radioStates[groupIndex]}\n                    onValueChange={(value) => handleRadioUpdate(groupIndex, value)}\n                  >\n                    {group.items.map((item) => (\n                      <div key={item.id}>\n                        <DropdownMenuRadioItem value={item.id}>{item.label}</DropdownMenuRadioItem>\n                      </div>\n                    ))}\n                  </DropdownMenuRadioGroup>\n                )}\n              </DropdownMenuGroup>\n              <DropdownMenuSeparator />\n            </div>\n          ))}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  );\n}\n\nexport default FilterDropdown;\n","import { Button } from '@/components/shadcn-ui/button';\nimport { CircleHelp, Link as LucideLink, User } from 'lucide-react';\nimport { NumberFormat } from 'platform-bible-utils';\n\n/** Interface that stores the parameters passed to the More Info component */\ninterface MoreInfoProps {\n  /** Optional unique identifier */\n  id?: string;\n  /** The category of the extension */\n  category: string;\n  /** The number of downloads for the extension */\n  downloads: Record<string, number>;\n  /** The languages supported by the extension */\n  languages: string[];\n  /** The URL to the more info page of the extension */\n  moreInfoUrl: string;\n  /** Handler function triggered when the more info (Website) link is clicked */\n  handleMoreInfoLinkClick: () => void;\n  /** Optional URL to a website link to get support for the extension */\n  supportUrl: string;\n  /** Handler function triggered when the support link is clicked */\n  handleSupportLinkClick: () => void;\n}\n/**\n * This component displays the more info section of the extension which includes the category,\n * number of downloads, languages, and links to the website and support\n *\n * @param MoreInfoProps\n * @returns The more info component that displays the category, number of downloads, languages, and\n *   links to the website and support\n */\nexport function MoreInfo({\n  id,\n  category,\n  downloads,\n  languages,\n  moreInfoUrl,\n  handleMoreInfoLinkClick,\n  supportUrl,\n  handleSupportLinkClick,\n}: MoreInfoProps) {\n  /**\n   * This constant formats the number of downloads into a more readable format.\n   *\n   * @example 1000 -> 1K\n   *\n   * @example 1000000 -> 1M\n   *\n   * @returns The formatted number of downloads\n   */\n  const numberFormatted = new NumberFormat('en', {\n    notation: 'compact',\n    compactDisplay: 'short',\n  }).format(Object.values(downloads).reduce((a: number, b: number) => a + b, 0));\n\n  /** This function scrolls the window to the bottom of the page. */\n  const handleScrollToBottom = () => {\n    window.scrollTo(0, document.body.scrollHeight);\n  };\n\n  return (\n    <div\n      id={id}\n      className=\"pr-twp tw-flex tw-items-center tw-justify-center tw-gap-4 tw-divide-x tw-border-b tw-border-t tw-py-2 tw-text-center\"\n    >\n      {category && (\n        <div className=\"tw-flex tw-flex-col tw-items-center tw-gap-1\">\n          <div className=\"tw-flex\">\n            <span className=\"tw-text-xs tw-font-semibold tw-text-foreground\">{category}</span>\n          </div>\n          <span className=\"tw-text-xs tw-text-foreground\">CATEGORY</span>\n        </div>\n      )}\n      <div className=\"tw-flex tw-flex-col tw-items-center tw-gap-1 tw-ps-4\">\n        <div className=\"tw-flex tw-gap-1\">\n          <User className=\"tw-h-4 tw-w-4\" />\n          <span className=\"tw-text-xs tw-font-semibold tw-text-foreground\">{numberFormatted}</span>\n        </div>\n        <span className=\"tw-text-xs tw-text-foreground\">USERS</span>\n      </div>\n      <div className=\"tw-flex tw-flex-col tw-items-center tw-gap-1 tw-ps-4\">\n        <div className=\"tw-flex tw-gap-2\">\n          {languages.slice(0, 3).map((locale) => (\n            <span key={locale} className=\"tw-text-xs tw-font-semibold tw-text-foreground\">\n              {locale.toUpperCase()}\n            </span>\n          ))}\n        </div>\n        {languages.length > 3 && (\n          <button\n            type=\"button\"\n            onClick={() => handleScrollToBottom()}\n            className=\"tw-text-xs tw-text-foreground tw-underline\"\n          >\n            +{languages.length - 3} more languages\n          </button>\n        )}\n      </div>\n      {(moreInfoUrl || supportUrl) && (\n        <div className=\"tw-flex tw-flex-col tw-gap-1 tw-ps-4\">\n          {moreInfoUrl && (\n            <div className=\"tw-flex tw-gap-1\">\n              <Button\n                onClick={() => handleMoreInfoLinkClick()}\n                variant=\"link\"\n                className=\"tw-flex tw-h-auto tw-gap-1 tw-py-0 tw-text-xs tw-font-semibold tw-text-foreground\"\n              >\n                Website\n                <LucideLink className=\"tw-h-4 tw-w-4\" />\n              </Button>\n            </div>\n          )}\n          {supportUrl && (\n            <div className=\"tw-flex tw-gap-1\">\n              <Button\n                onClick={() => handleSupportLinkClick()}\n                variant=\"link\"\n                className=\"tw-flex tw-h-auto tw-gap-1 tw-py-0 tw-text-xs tw-font-semibold tw-text-foreground\"\n              >\n                Support\n                <CircleHelp className=\"tw-h-4 tw-w-4\" />\n              </Button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState } from 'react';\n\nexport type VersionInformation = {\n  /** Date the version was published */\n  date: string;\n  /** Description of the changes in the version */\n  description: string;\n};\n\n/** Type to store the version history information */\nexport type VersionHistoryType = Record<string, VersionInformation>;\n\n/** Interface that stores the parameters passed to the Version History component */\ninterface VersionHistoryProps {\n  /** Optional unique identifier */\n  id?: string;\n  /** Object containing the versions mapped with their information */\n  versionHistory: VersionHistoryType;\n}\n\n/**\n * Component to render the version history information shown in the footer component. Lists the 5\n * most recent versions, with the options to show all versions by pressing a button.\n *\n * @param VersionHistoryProps\n * @returns Rendered version history for the Footer component\n */\nexport function VersionHistory({ id, versionHistory }: VersionHistoryProps) {\n  const [showAllVersions, setShowAllVersions] = useState(false);\n  const currentDate = new Date();\n\n  /**\n   * Function to format the time string for the version history in the form of 'X year(s) ago'.\n   *\n   * @param dateString ISO Date string to determine the time string from\n   * @returns Formatted time string\n   */\n  function formatTimeString(dateString: string) {\n    const date = new Date(dateString);\n    const dateDiff = new Date(currentDate.getTime() - date.getTime());\n    const yearDiff = dateDiff.getUTCFullYear() - 1970;\n    const monthDiff = dateDiff.getUTCMonth();\n    const dayDiff = dateDiff.getUTCDate() - 1;\n\n    // Determines how long ago the version was published\n    let timeString = '';\n    if (yearDiff > 0) {\n      timeString = `${yearDiff.toString()} year${yearDiff === 1 ? '' : 's'} ago`;\n    } else if (monthDiff > 0) {\n      timeString = `${monthDiff.toString()} month${monthDiff === 1 ? '' : 's'} ago`;\n    } else if (dayDiff === 0) {\n      timeString = 'today';\n    } else {\n      timeString = `${dayDiff.toString()} day${dayDiff === 1 ? '' : 's'} ago`;\n    }\n\n    return timeString;\n  }\n\n  // Sorts the version history by version number\n  const sortedEntries = Object.entries(versionHistory).sort((a, b) => b[0].localeCompare(a[0]));\n\n  return (\n    <div className=\"pr-twp\" id={id}>\n      <h3 className=\"tw-text-md tw-font-semibold\">What`s New</h3>\n      <ul className=\"tw-list-disc tw-pl-5 tw-pr-4 tw-text-xs tw-text-foreground\">\n        {(showAllVersions ? sortedEntries : sortedEntries.slice(0, 5)).map((entry) => (\n          <div key={entry[0]} className=\"tw-mt-3 tw-flex tw-justify-between\">\n            <div className=\"tw-text-foreground\">\n              <li className=\"tw-prose tw-text-xs\">\n                <span>{entry[1].description}</span>\n              </li>\n            </div>\n            <div className=\"tw-justify-end tw-text-right\">\n              <div>Version {entry[0]}</div>\n              <div>{formatTimeString(entry[1].date)}</div>\n            </div>\n          </div>\n        ))}\n      </ul>\n      {sortedEntries.length > 5 && (\n        <button\n          type=\"button\"\n          onClick={() => setShowAllVersions(!showAllVersions)}\n          className=\"tw-text-xs tw-text-foreground tw-underline\"\n        >\n          {showAllVersions ? 'Show Less Version History' : 'Show All Version History'}\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default VersionHistory;\n","import { useMemo } from 'react';\nimport { formatBytes, getCurrentLocale } from 'platform-bible-utils';\nimport { VersionHistory, VersionHistoryType } from './version-history.component';\n\n/** Interface to store the parameters passed to the Footer component */\ninterface FooterProps {\n  /** Optional unique identifier */\n  id?: string;\n  /** Name of the publisher */\n  publisherDisplayName: string;\n  /** Size of the extension file in bytes */\n  fileSize: number;\n  /** List of language codes supported by the extension */\n  locales: string[];\n  /** Object containing the version history mapped with their information */\n  versionHistory: VersionHistoryType;\n  /** Current version of the extension */\n  currentVersion: string;\n}\n\n/**\n * Component to render the footer for the extension details which contains information on the\n * publisher, version history, languages, and file size.\n *\n * @param FooterProps\n * @returns The rendered Footer component\n */\nexport function Footer({\n  id,\n  publisherDisplayName,\n  fileSize,\n  locales,\n  versionHistory,\n  currentVersion,\n}: FooterProps) {\n  /** Formats the file size into a human-readable format */\n  const formattedFileSize = useMemo(() => formatBytes(fileSize), [fileSize]);\n\n  /**\n   * This function gets the display names of the languages based on the language codes.\n   *\n   * @param codes The list of language codes\n   * @returns The list of language names\n   */\n  const getLanguageNames = (codes: string[]) => {\n    const displayNames = new Intl.DisplayNames(getCurrentLocale(), { type: 'language' });\n    return codes.map((code) => displayNames.of(code));\n  };\n\n  const languageNames = getLanguageNames(locales);\n\n  return (\n    <div id={id} className=\"pr-twp tw-border-t tw-py-2\">\n      <div className=\"tw-flex tw-flex-col tw-gap-2 tw-divide-y\">\n        {Object.entries(versionHistory).length > 0 && (\n          <VersionHistory versionHistory={versionHistory} />\n        )}\n        <div className=\"tw-flex tw-flex-col tw-gap-2 tw-py-2\">\n          <h2 className=\"tw-text-md tw-font-semibold\">Information</h2>\n          <div className=\"tw-flex tw-items-start tw-justify-between tw-text-xs tw-text-foreground\">\n            <p className=\"tw-flex tw-flex-col tw-justify-start tw-gap-1\">\n              <span>Publisher</span>\n              <span className=\"tw-font-semibold\">{publisherDisplayName}</span>\n              <span>Size</span>\n              <span className=\"tw-font-semibold\">{formattedFileSize}</span>\n            </p>\n            <div className=\"tw-flex tw-w-3/4 tw-items-center tw-justify-between tw-text-xs tw-text-foreground\">\n              <p className=\"tw-flex tw-flex-col tw-justify-start tw-gap-1\">\n                <span>Version</span>\n                <span className=\"tw-font-semibold\">{currentVersion}</span>\n                <span>Languages</span>\n                <span className=\"tw-font-semibold\">{languageNames.join(', ')}</span>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Footer;\n","import { Button, buttonVariants } from '@/components/shadcn-ui/button';\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/shadcn-ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/shadcn-ui/popover';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Check, ChevronsUpDown, Star } from 'lucide-react';\nimport { ReactNode, useCallback, useMemo, useState } from 'react';\nimport { type VariantProps } from 'class-variance-authority';\n\nexport type MultiSelectComboBoxEntry = {\n  value: string;\n  label: string;\n  secondaryLabel?: string;\n  starred?: boolean;\n};\n\n/**\n * Props for MultiSelectComboBox component that provides a UI for selecting multiple items from a\n * list. It supports displaying a placeholder, custom selected text, and an optional icon. Users can\n * search through options and view starred items prominently.\n */\nexport interface MultiSelectComboBoxProps {\n  /** The list of entries to select from. */\n  entries: MultiSelectComboBoxEntry[];\n  /** The currently selected values. */\n  selected: string[];\n  /** Callback function to handle changes in selection. */\n  onChange: (values: string[]) => void;\n  /** Placeholder text when no items are selected. */\n  placeholder: string;\n  /** Whether to show select all/clear all buttons. */\n  hasToggleAllFeature?: boolean;\n  /** Text for the select all button. */\n  selectAllText?: string;\n  /** Text for the clear all button. */\n  clearAllText?: string;\n  /** Message displayed when no entries are found. */\n  commandEmptyMessage?: string;\n  /** Custom text to display when items are selected. */\n  customSelectedText?: string;\n  /** Whether the dropdown is open (for controlled usage). */\n  isOpen?: boolean;\n  /** Handler that is called when the dropdown's open state changes. */\n  onOpenChange?: (open: boolean) => void;\n  /** Flag to disable the component. */\n  isDisabled?: boolean;\n  /** Flag to sort selected items. */\n  sortSelected?: boolean;\n  /** Optional icon to display in the button. */\n  icon?: ReactNode;\n  /** Additional class names for styling. */\n  className?: string;\n  /** Button variant to use for the trigger button. */\n  variant?: VariantProps<typeof buttonVariants>['variant'];\n  /** Optional ID for the component. */\n  id?: string;\n}\n\n/** MultiSelectComboBox component for selecting multiple items from a list. */\nexport function MultiSelectComboBox({\n  entries,\n  selected,\n  onChange,\n  placeholder,\n  hasToggleAllFeature = false,\n  selectAllText = 'Select All',\n  clearAllText = 'Clear All',\n  commandEmptyMessage = 'No entries found',\n  customSelectedText,\n  isOpen = undefined,\n  onOpenChange = undefined,\n  isDisabled = false,\n  sortSelected = false,\n  icon = undefined,\n  className = undefined,\n  variant = 'ghost',\n  id,\n}: MultiSelectComboBoxProps) {\n  const [isOpenLocal, setIsOpenLocal] = useState(false);\n\n  const handleSelect = useCallback(\n    (label: string) => {\n      const value = entries.find((entry) => entry.label === label)?.value;\n      if (!value) return;\n      onChange(\n        selected.includes(value) ? selected.filter((item) => item !== value) : [...selected, value],\n      );\n    },\n    [entries, selected, onChange],\n  );\n\n  const getPlaceholderText = () => {\n    if (customSelectedText) return customSelectedText;\n    return placeholder;\n  };\n\n  const sortedOptions = useMemo(() => {\n    if (!sortSelected) return entries;\n\n    const starredItems = entries\n      .filter((opt) => opt.starred)\n      .sort((a, b) => a.label.localeCompare(b.label));\n    const nonStarredItems = entries\n      .filter((opt) => !opt.starred)\n      .sort((a, b) => {\n        const aSelected = selected.includes(a.value);\n        const bSelected = selected.includes(b.value);\n        if (aSelected && !bSelected) return -1;\n        if (!aSelected && bSelected) return 1;\n        return a.label.localeCompare(b.label);\n      });\n\n    return [...starredItems, ...nonStarredItems];\n  }, [entries, selected, sortSelected]);\n\n  const handleSelectAll = () => {\n    onChange(entries.map((entry) => entry.value));\n  };\n\n  const handleClearAll = () => {\n    onChange([]);\n  };\n\n  const actualIsOpen = isOpen ?? isOpenLocal;\n  const actualOnOpenChange = onOpenChange ?? setIsOpenLocal;\n\n  return (\n    <div id={id} className={className}>\n      <Popover open={actualIsOpen} onOpenChange={actualOnOpenChange}>\n        <PopoverTrigger asChild>\n          <Button\n            variant={variant}\n            role=\"combobox\"\n            aria-expanded={actualIsOpen}\n            className=\"tw-group tw-w-full tw-justify-between\"\n            disabled={isDisabled}\n          >\n            <div className=\"tw-flex tw-min-w-0 tw-flex-1 tw-items-center tw-gap-2\">\n              {icon && (\n                <div className=\"tw-ml-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\">\n                  <span className=\"tw-flex tw-h-full tw-w-full tw-items-center tw-justify-center\">\n                    {icon}\n                  </span>\n                </div>\n              )}\n              <span\n                className={cn(\n                  'tw-min-w-0 tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-text-start tw-font-normal',\n                )}\n              >\n                {getPlaceholderText()}\n              </span>\n            </div>\n            <ChevronsUpDown className=\"tw-ml-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\" />\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent align=\"start\" className=\"tw-w-full tw-p-0\">\n          <Command>\n            <CommandInput placeholder={`Search ${placeholder.toLowerCase()}...`} />\n            {hasToggleAllFeature && (\n              <div className=\"tw-flex tw-justify-between tw-border-b tw-p-2\">\n                <Button variant=\"ghost\" size=\"sm\" onClick={handleSelectAll}>\n                  {selectAllText}\n                </Button>\n                <Button variant=\"ghost\" size=\"sm\" onClick={handleClearAll}>\n                  {clearAllText}\n                </Button>\n              </div>\n            )}\n            <CommandList>\n              <CommandEmpty>{commandEmptyMessage}</CommandEmpty>\n              <CommandGroup>\n                {sortedOptions.map((option) => {\n                  return (\n                    <CommandItem\n                      key={option.label}\n                      value={option.label}\n                      onSelect={handleSelect}\n                      className=\"tw-flex tw-items-center tw-gap-2\"\n                    >\n                      <div className=\"w-4\">\n                        <Check\n                          className={cn(\n                            'tw-h-4 tw-w-4',\n                            selected.includes(option.value) ? 'tw-opacity-100' : 'tw-opacity-0',\n                          )}\n                        />\n                      </div>\n                      {option.starred && <Star className=\"tw-h-4 tw-w-4\" />}\n                      <div className=\"tw-flex-grow\">{option.label}</div>\n                      {option.secondaryLabel && (\n                        <div className=\"tw-text-end tw-text-muted-foreground\">\n                          {option.secondaryLabel}\n                        </div>\n                      )}\n                    </CommandItem>\n                  );\n                })}\n              </CommandGroup>\n            </CommandList>\n          </Command>\n        </PopoverContent>\n      </Popover>\n    </div>\n  );\n}\n\nexport default MultiSelectComboBox;\n","import { Badge } from '@/components/shadcn-ui/badge';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { Label } from '@/components/shadcn-ui/label';\nimport { X } from 'lucide-react';\nimport { MultiSelectComboBox, MultiSelectComboBoxProps } from './multi-select-combo-box.component';\n\ninterface FilterProps extends MultiSelectComboBoxProps {\n  /**\n   * Placeholder text that will be displayed when no items are selected. It will appear at the\n   * location where the badges would be if any items were selected.\n   */\n  badgesPlaceholder: string;\n  /** Optional id for the component */\n  id?: string;\n}\n\n/**\n * This is a variant of the {@link MultiSelectComboBox}, that shows a {@link Badge} component for each\n * selected item in the combo box. Clicking the 'X' icon on the badge will clear the item from the\n * selected options. A placeholder text must be provided through 'badgesPlaceholder'. This will be\n * displayed if no items are selected,\n */\nexport function Filter({\n  entries,\n  selected,\n  onChange,\n  placeholder,\n  commandEmptyMessage,\n  customSelectedText,\n  isDisabled,\n  sortSelected,\n  icon,\n  className,\n  badgesPlaceholder,\n  id,\n}: FilterProps) {\n  return (\n    <div id={id} className=\"tw-flex tw-items-center tw-gap-2\">\n      <MultiSelectComboBox\n        entries={entries}\n        selected={selected}\n        onChange={onChange}\n        placeholder={placeholder}\n        commandEmptyMessage={commandEmptyMessage}\n        customSelectedText={customSelectedText}\n        isDisabled={isDisabled}\n        sortSelected={sortSelected}\n        icon={icon}\n        className={className}\n      />\n      {selected.length > 0 ? (\n        <div className=\"tw-flex tw-flex-wrap tw-items-center tw-gap-2\">\n          {selected.map((type) => (\n            <Badge key={type} variant=\"muted\" className=\"tw-flex tw-items-center tw-gap-1\">\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"tw-h-4 tw-w-4 tw-p-0 hover:tw-bg-transparent\"\n                onClick={() => onChange(selected.filter((selectedType) => selectedType !== type))}\n              >\n                <X className=\"tw-h-3 tw-w-3\" />\n              </Button>\n              {entries.find((entry) => entry.value === type)?.label}\n            </Badge>\n          ))}\n        </div>\n      ) : (\n        <Label>{badgesPlaceholder}</Label>\n      )}\n    </div>\n  );\n}\n\nexport default Filter;\n","'use strict';\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties,\n * including NodeList.\n *\n * @param {T[] | { length: number; [number]: T }} list\n * @param {function (item: T, index: number, list:T[]):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac\n * Allows injecting a custom implementation in tests (`Array.prototype` by default).\n * @returns {T | undefined}\n * @template {unknown} T\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (hasOwn(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * If `Object.getOwnPropertyDescriptors` is available,\n * a new object with all properties of object but without any prototype is created and returned\n * after freezing it.\n *\n * @param {T} object\n * The object to freeze.\n * @param {Pick<ObjectConstructor, 'create' | 'freeze' | 'getOwnPropertyDescriptors'>} [oc=Object]\n * `Object` by default,\n * allows to inject custom object constructor for tests.\n * @returns {Readonly<T>}\n * @template {Object} T\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n * @prettierignore\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object;\n\t}\n\tif (oc && typeof oc.getOwnPropertyDescriptors === 'function') {\n\t\tobject = oc.create(null, oc.getOwnPropertyDescriptors(object));\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object;\n}\n\n/**\n * Implementation for `Object.hasOwn` but ES5 compatible.\n *\n * @param {any} object\n * @param {string | number} key\n * @returns {boolean}\n */\nfunction hasOwn(object, key) {\n\treturn Object.prototype.hasOwnProperty.call(object, key);\n}\n\n/**\n * Since xmldom can not rely on `Object.assign`,\n * it uses/provides a simplified version that is sufficient for its needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n * @returns {Object}\n * The target with the merged/overridden properties.\n * @throws {TypeError}\n * If target is not an object.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object');\n\t}\n\tfor (var key in source) {\n\t\tif (hasOwn(source, key)) {\n\t\t\ttarget[key] = source[key];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * A number of attributes are boolean attributes.\n * The presence of a boolean attribute on an element represents the `true` value,\n * and the absence of the attribute represents the `false` value.\n *\n * If the attribute is present, its value must either be the empty string, or a value that is\n * an ASCII case-insensitive match for the attribute's canonical name,\n * with no leading or trailing whitespace.\n *\n * Note: The values `\"true\"` and `\"false\"` are not allowed on boolean attributes.\n * To represent a `false` value, the attribute has to be omitted altogether.\n *\n * @see https://html.spec.whatwg.org/#boolean-attributes\n * @see https://html.spec.whatwg.org/#attributes-3\n */\nvar HTML_BOOLEAN_ATTRIBUTES = freeze({\n\tallowfullscreen: true,\n\tasync: true,\n\tautofocus: true,\n\tautoplay: true,\n\tchecked: true,\n\tcontrols: true,\n\tdefault: true,\n\tdefer: true,\n\tdisabled: true,\n\tformnovalidate: true,\n\thidden: true,\n\tismap: true,\n\titemscope: true,\n\tloop: true,\n\tmultiple: true,\n\tmuted: true,\n\tnomodule: true,\n\tnovalidate: true,\n\topen: true,\n\tplaysinline: true,\n\treadonly: true,\n\trequired: true,\n\treversed: true,\n\tselected: true,\n});\n\n/**\n * Check if `name` is matching one of the HTML boolean attribute names.\n * This method doesn't check if such attributes are allowed in the context of the current\n * document/parsing.\n *\n * @param {string} name\n * @returns {boolean}\n * @see {@link HTML_BOOLEAN_ATTRIBUTES}\n * @see https://html.spec.whatwg.org/#boolean-attributes\n * @see https://html.spec.whatwg.org/#attributes-3\n */\nfunction isHTMLBooleanAttribute(name) {\n\treturn hasOwn(HTML_BOOLEAN_ATTRIBUTES, name.toLowerCase());\n}\n\n/**\n * Void elements only have a start tag; end tags must not be specified for void elements.\n * These elements should be written as self-closing like this: `<area />`.\n * This should not be confused with optional tags that HTML allows to omit the end tag for\n * (like `li`, `tr` and others), which can have content after them,\n * so they can not be written as self-closing.\n * xmldom does not have any logic for optional end tags cases,\n * and will report them as a warning.\n * Content that would go into the unopened element,\n * will instead be added as a sibling text node.\n *\n * @type {Readonly<{\n * \tarea: boolean;\n * \tcol: boolean;\n * \timg: boolean;\n * \twbr: boolean;\n * \tlink: boolean;\n * \thr: boolean;\n * \tsource: boolean;\n * \tbr: boolean;\n * \tinput: boolean;\n * \tparam: boolean;\n * \tmeta: boolean;\n * \tembed: boolean;\n * \ttrack: boolean;\n * \tbase: boolean;\n * }>}\n * @see https://html.spec.whatwg.org/#void-elements\n * @see https://html.spec.whatwg.org/#optional-tags\n */\nvar HTML_VOID_ELEMENTS = freeze({\n\tarea: true,\n\tbase: true,\n\tbr: true,\n\tcol: true,\n\tembed: true,\n\thr: true,\n\timg: true,\n\tinput: true,\n\tlink: true,\n\tmeta: true,\n\tparam: true,\n\tsource: true,\n\ttrack: true,\n\twbr: true,\n});\n\n/**\n * Check if `tagName` is matching one of the HTML void element names.\n * This method doesn't check if such tags are allowed in the context of the current\n * document/parsing.\n *\n * @param {string} tagName\n * @returns {boolean}\n * @see {@link HTML_VOID_ELEMENTS}\n * @see https://html.spec.whatwg.org/#void-elements\n */\nfunction isHTMLVoidElement(tagName) {\n\treturn hasOwn(HTML_VOID_ELEMENTS, tagName.toLowerCase());\n}\n\n/**\n * Tag names that are raw text elements according to HTML spec.\n * The value denotes whether they are escapable or not.\n *\n * @see {@link isHTMLEscapableRawTextElement}\n * @see {@link isHTMLRawTextElement}\n * @see https://html.spec.whatwg.org/#raw-text-elements\n * @see https://html.spec.whatwg.org/#escapable-raw-text-elements\n */\nvar HTML_RAW_TEXT_ELEMENTS = freeze({\n\tscript: false,\n\tstyle: false,\n\ttextarea: true,\n\ttitle: true,\n});\n\n/**\n * Check if `tagName` is matching one of the HTML raw text element names.\n * This method doesn't check if such tags are allowed in the context of the current\n * document/parsing.\n *\n * @param {string} tagName\n * @returns {boolean}\n * @see {@link isHTMLEscapableRawTextElement}\n * @see {@link HTML_RAW_TEXT_ELEMENTS}\n * @see https://html.spec.whatwg.org/#raw-text-elements\n * @see https://html.spec.whatwg.org/#escapable-raw-text-elements\n */\nfunction isHTMLRawTextElement(tagName) {\n\tvar key = tagName.toLowerCase();\n\treturn hasOwn(HTML_RAW_TEXT_ELEMENTS, key) && !HTML_RAW_TEXT_ELEMENTS[key];\n}\n/**\n * Check if `tagName` is matching one of the HTML escapable raw text element names.\n * This method doesn't check if such tags are allowed in the context of the current\n * document/parsing.\n *\n * @param {string} tagName\n * @returns {boolean}\n * @see {@link isHTMLRawTextElement}\n * @see {@link HTML_RAW_TEXT_ELEMENTS}\n * @see https://html.spec.whatwg.org/#raw-text-elements\n * @see https://html.spec.whatwg.org/#escapable-raw-text-elements\n */\nfunction isHTMLEscapableRawTextElement(tagName) {\n\tvar key = tagName.toLowerCase();\n\treturn hasOwn(HTML_RAW_TEXT_ELEMENTS, key) && HTML_RAW_TEXT_ELEMENTS[key];\n}\n/**\n * Only returns true if `value` matches MIME_TYPE.HTML, which indicates an HTML document.\n *\n * @param {string} mimeType\n * @returns {mimeType is 'text/html'}\n * @see https://www.iana.org/assignments/media-types/text/html\n * @see https://en.wikipedia.org/wiki/HTML\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring\n */\nfunction isHTMLMimeType(mimeType) {\n\treturn mimeType === MIME_TYPE.HTML;\n}\n/**\n * For both the `text/html` and the `application/xhtml+xml` namespace the spec defines that the\n * HTML namespace is provided as the default.\n *\n * @param {string} mimeType\n * @returns {boolean}\n * @see https://dom.spec.whatwg.org/#dom-document-createelement\n * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument\n * @see https://dom.spec.whatwg.org/#dom-domimplementation-createhtmldocument\n */\nfunction hasDefaultHTMLNamespace(mimeType) {\n\treturn isHTMLMimeType(mimeType) || mimeType === MIME_TYPE.XML_XHTML_APPLICATION;\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02\n *      MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype\n *      WHATWG HTML Spec\n * @see {@link DOMParser.prototype.parseFromString}\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring\n\t *      WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType\n\t *      registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/xml`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType\n\t *      registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n});\n/**\n * @typedef {'application/xhtml+xml' | 'application/xml' | 'image/svg+xml' | 'text/html' | 'text/xml'}\n * MimeType\n */\n/**\n * @type {MimeType[]}\n * @private\n * Basically `Object.values`, which is not available in ES5.\n */\nvar _MIME_TYPES = Object.keys(MIME_TYPE).map(function (key) {\n\treturn MIME_TYPE[key];\n});\n\n/**\n * Only returns true if `mimeType` is one of the allowed values for\n * `DOMParser.parseFromString`.\n *\n * @param {string} mimeType\n * @returns {mimeType is 'application/xhtml+xml' | 'application/xml' | 'image/svg+xml' |  'text/html' | 'text/xml'}\n *\n */\nfunction isValidMimeType(mimeType) {\n\treturn _MIME_TYPES.indexOf(mimeType) > -1;\n}\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace.\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n});\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.HTML_BOOLEAN_ATTRIBUTES = HTML_BOOLEAN_ATTRIBUTES;\nexports.HTML_RAW_TEXT_ELEMENTS = HTML_RAW_TEXT_ELEMENTS;\nexports.HTML_VOID_ELEMENTS = HTML_VOID_ELEMENTS;\nexports.hasDefaultHTMLNamespace = hasDefaultHTMLNamespace;\nexports.hasOwn = hasOwn;\nexports.isHTMLBooleanAttribute = isHTMLBooleanAttribute;\nexports.isHTMLRawTextElement = isHTMLRawTextElement;\nexports.isHTMLEscapableRawTextElement = isHTMLEscapableRawTextElement;\nexports.isHTMLMimeType = isHTMLMimeType;\nexports.isHTMLVoidElement = isHTMLVoidElement;\nexports.isValidMimeType = isValidMimeType;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n","'use strict';\n\nvar conventions = require('./conventions');\n\nfunction extendError(constructor, writableName) {\n\tconstructor.prototype = Object.create(Error.prototype, {\n\t\tconstructor: { value: constructor },\n\t\tname: { value: constructor.name, enumerable: true, writable: writableName },\n\t});\n}\n\nvar DOMExceptionName = conventions.freeze({\n\t/**\n\t * the default value as defined by the spec\n\t */\n\tError: 'Error',\n\t/**\n\t * @deprecated\n\t * Use RangeError instead.\n\t */\n\tIndexSizeError: 'IndexSizeError',\n\t/**\n\t * @deprecated\n\t * Just to match the related static code, not part of the spec.\n\t */\n\tDomstringSizeError: 'DomstringSizeError',\n\tHierarchyRequestError: 'HierarchyRequestError',\n\tWrongDocumentError: 'WrongDocumentError',\n\tInvalidCharacterError: 'InvalidCharacterError',\n\t/**\n\t * @deprecated\n\t * Just to match the related static code, not part of the spec.\n\t */\n\tNoDataAllowedError: 'NoDataAllowedError',\n\tNoModificationAllowedError: 'NoModificationAllowedError',\n\tNotFoundError: 'NotFoundError',\n\tNotSupportedError: 'NotSupportedError',\n\tInUseAttributeError: 'InUseAttributeError',\n\tInvalidStateError: 'InvalidStateError',\n\tSyntaxError: 'SyntaxError',\n\tInvalidModificationError: 'InvalidModificationError',\n\tNamespaceError: 'NamespaceError',\n\t/**\n\t * @deprecated\n\t * Use TypeError for invalid arguments,\n\t * \"NotSupportedError\" DOMException for unsupported operations,\n\t * and \"NotAllowedError\" DOMException for denied requests instead.\n\t */\n\tInvalidAccessError: 'InvalidAccessError',\n\t/**\n\t * @deprecated\n\t * Just to match the related static code, not part of the spec.\n\t */\n\tValidationError: 'ValidationError',\n\t/**\n\t * @deprecated\n\t * Use TypeError instead.\n\t */\n\tTypeMismatchError: 'TypeMismatchError',\n\tSecurityError: 'SecurityError',\n\tNetworkError: 'NetworkError',\n\tAbortError: 'AbortError',\n\t/**\n\t * @deprecated\n\t * Just to match the related static code, not part of the spec.\n\t */\n\tURLMismatchError: 'URLMismatchError',\n\tQuotaExceededError: 'QuotaExceededError',\n\tTimeoutError: 'TimeoutError',\n\tInvalidNodeTypeError: 'InvalidNodeTypeError',\n\tDataCloneError: 'DataCloneError',\n\tEncodingError: 'EncodingError',\n\tNotReadableError: 'NotReadableError',\n\tUnknownError: 'UnknownError',\n\tConstraintError: 'ConstraintError',\n\tDataError: 'DataError',\n\tTransactionInactiveError: 'TransactionInactiveError',\n\tReadOnlyError: 'ReadOnlyError',\n\tVersionError: 'VersionError',\n\tOperationError: 'OperationError',\n\tNotAllowedError: 'NotAllowedError',\n\tOptOutError: 'OptOutError',\n});\nvar DOMExceptionNames = Object.keys(DOMExceptionName);\n\nfunction isValidDomExceptionCode(value) {\n\treturn typeof value === 'number' && value >= 1 && value <= 25;\n}\nfunction endsWithError(value) {\n\treturn typeof value === 'string' && value.substring(value.length - DOMExceptionName.Error.length) === DOMExceptionName.Error;\n}\n/**\n * DOM operations only raise exceptions in \"exceptional\" circumstances, i.e., when an operation\n * is impossible to perform (either for logical reasons, because data is lost, or because the\n * implementation has become unstable). In general, DOM methods return specific error values in\n * ordinary processing situations, such as out-of-bound errors when using NodeList.\n *\n * Implementations should raise other exceptions under other circumstances. For example,\n * implementations should raise an implementation-dependent exception if a null argument is\n * passed when null was not expected.\n *\n * This implementation supports the following usages:\n * 1. according to the living standard (both arguments are optional):\n * ```\n * new DOMException(\"message (can be empty)\", DOMExceptionNames.HierarchyRequestError)\n * ```\n * 2. according to previous xmldom implementation (only the first argument is required):\n * ```\n * new DOMException(DOMException.HIERARCHY_REQUEST_ERR, \"optional message\")\n * ```\n * both result in the proper name being set.\n *\n * @class DOMException\n * @param {number | string} messageOrCode\n * The reason why an operation is not acceptable.\n * If it is a number, it is used to determine the `name`, see\n * {@link https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-258A00AF ExceptionCode}\n * @param {string | keyof typeof DOMExceptionName | Error} [nameOrMessage]\n * The `name` to use for the error.\n * If `messageOrCode` is a number, this arguments is used as the `message` instead.\n * @augments Error\n * @see https://webidl.spec.whatwg.org/#idl-DOMException\n * @see https://webidl.spec.whatwg.org/#dfn-error-names-table\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-17189187\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(messageOrCode, nameOrMessage) {\n\t// support old way of passing arguments: first argument is a valid number\n\tif (isValidDomExceptionCode(messageOrCode)) {\n\t\tthis.name = DOMExceptionNames[messageOrCode];\n\t\tthis.message = nameOrMessage || '';\n\t} else {\n\t\tthis.message = messageOrCode;\n\t\tthis.name = endsWithError(nameOrMessage) ? nameOrMessage : DOMExceptionName.Error;\n\t}\n\tif (Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n}\nextendError(DOMException, true);\nObject.defineProperties(DOMException.prototype, {\n\tcode: {\n\t\tenumerable: true,\n\t\tget: function () {\n\t\t\tvar code = DOMExceptionNames.indexOf(this.name);\n\t\t\tif (isValidDomExceptionCode(code)) return code;\n\t\t\treturn 0;\n\t\t},\n\t},\n});\n\nvar ExceptionCode = {\n\tINDEX_SIZE_ERR: 1,\n\tDOMSTRING_SIZE_ERR: 2,\n\tHIERARCHY_REQUEST_ERR: 3,\n\tWRONG_DOCUMENT_ERR: 4,\n\tINVALID_CHARACTER_ERR: 5,\n\tNO_DATA_ALLOWED_ERR: 6,\n\tNO_MODIFICATION_ALLOWED_ERR: 7,\n\tNOT_FOUND_ERR: 8,\n\tNOT_SUPPORTED_ERR: 9,\n\tINUSE_ATTRIBUTE_ERR: 10,\n\tINVALID_STATE_ERR: 11,\n\tSYNTAX_ERR: 12,\n\tINVALID_MODIFICATION_ERR: 13,\n\tNAMESPACE_ERR: 14,\n\tINVALID_ACCESS_ERR: 15,\n\tVALIDATION_ERR: 16,\n\tTYPE_MISMATCH_ERR: 17,\n\tSECURITY_ERR: 18,\n\tNETWORK_ERR: 19,\n\tABORT_ERR: 20,\n\tURL_MISMATCH_ERR: 21,\n\tQUOTA_EXCEEDED_ERR: 22,\n\tTIMEOUT_ERR: 23,\n\tINVALID_NODE_TYPE_ERR: 24,\n\tDATA_CLONE_ERR: 25,\n};\n\nvar entries = Object.entries(ExceptionCode);\nfor (var i = 0; i < entries.length; i++) {\n\tvar key = entries[i][0];\n\tDOMException[key] = entries[i][1];\n}\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @class\n * @param {string} message\n * @param {any} [locator]\n */\nfunction ParseError(message, locator) {\n\tthis.message = message;\n\tthis.locator = locator;\n\tif (Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nextendError(ParseError);\n\nexports.DOMException = DOMException;\nexports.DOMExceptionName = DOMExceptionName;\nexports.ExceptionCode = ExceptionCode;\nexports.ParseError = ParseError;\n","'use strict';\n\n/**\n * Detects relevant unicode support for regular expressions in the runtime.\n * Should the runtime not accepts the flag `u` or unicode ranges,\n * character classes without unicode handling will be used.\n *\n * @param {typeof RegExp} [RegExpImpl=RegExp]\n * For testing: the RegExp class.\n * @returns {boolean}\n * @see https://node.green/#ES2015-syntax-RegExp--y--and--u--flags\n */\nfunction detectUnicodeSupport(RegExpImpl) {\n\ttry {\n\t\tif (typeof RegExpImpl !== 'function') {\n\t\t\tRegExpImpl = RegExp;\n\t\t}\n\t\t// eslint-disable-next-line es5/no-unicode-regex,es5/no-unicode-code-point-escape\n\t\tvar match = new RegExpImpl('\\u{1d306}', 'u').exec('ðŒ†');\n\t\treturn !!match && match[0].length === 2;\n\t} catch (error) {}\n\treturn false;\n}\nvar UNICODE_SUPPORT = detectUnicodeSupport();\n\n/**\n * Removes `[`, `]` and any trailing quantifiers from the source of a RegExp.\n *\n * @param {RegExp} regexp\n */\nfunction chars(regexp) {\n\tif (regexp.source[0] !== '[') {\n\t\tthrow new Error(regexp + ' can not be used with chars');\n\t}\n\treturn regexp.source.slice(1, regexp.source.lastIndexOf(']'));\n}\n\n/**\n * Creates a new character list regular expression,\n * by removing `search` from the source of `regexp`.\n *\n * @param {RegExp} regexp\n * @param {string} search\n * The character(s) to remove.\n * @returns {RegExp}\n */\nfunction chars_without(regexp, search) {\n\tif (regexp.source[0] !== '[') {\n\t\tthrow new Error('/' + regexp.source + '/ can not be used with chars_without');\n\t}\n\tif (!search || typeof search !== 'string') {\n\t\tthrow new Error(JSON.stringify(search) + ' is not a valid search');\n\t}\n\tif (regexp.source.indexOf(search) === -1) {\n\t\tthrow new Error('\"' + search + '\" is not is /' + regexp.source + '/');\n\t}\n\tif (search === '-' && regexp.source.indexOf(search) !== 1) {\n\t\tthrow new Error('\"' + search + '\" is not at the first postion of /' + regexp.source + '/');\n\t}\n\treturn new RegExp(regexp.source.replace(search, ''), UNICODE_SUPPORT ? 'u' : '');\n}\n\n/**\n * Combines and Regular expressions correctly by using `RegExp.source`.\n *\n * @param {...(RegExp | string)[]} args\n * @returns {RegExp}\n */\nfunction reg(args) {\n\tvar self = this;\n\treturn new RegExp(\n\t\tArray.prototype.slice\n\t\t\t.call(arguments)\n\t\t\t.map(function (part) {\n\t\t\t\tvar isStr = typeof part === 'string';\n\t\t\t\tif (isStr && self === undefined && part === '|') {\n\t\t\t\t\tthrow new Error('use regg instead of reg to wrap expressions with `|`!');\n\t\t\t\t}\n\t\t\t\treturn isStr ? part : part.source;\n\t\t\t})\n\t\t\t.join(''),\n\t\tUNICODE_SUPPORT ? 'mu' : 'm'\n\t);\n}\n\n/**\n * Like `reg` but wraps the expression in `(?:`,`)` to create a non tracking group.\n *\n * @param {...(RegExp | string)[]} args\n * @returns {RegExp}\n */\nfunction regg(args) {\n\tif (arguments.length === 0) {\n\t\tthrow new Error('no parameters provided');\n\t}\n\treturn reg.apply(regg, ['(?:'].concat(Array.prototype.slice.call(arguments), [')']));\n}\n\n// /**\n//  * Append ^ to the beginning of the expression.\n//  * @param {...(RegExp | string)[]} args\n//  * @returns {RegExp}\n//  */\n// function reg_start(args) {\n// \tif (arguments.length === 0) {\n// \t\tthrow new Error('no parameters provided');\n// \t}\n// \treturn reg.apply(reg_start, ['^'].concat(Array.prototype.slice.call(arguments)));\n// }\n\n// https://www.w3.org/TR/xml/#document\n// `[1] document ::= prolog element Misc*`\n// https://www.w3.org/TR/xml11/#NT-document\n// `[1] document ::= ( prolog element Misc* ) - ( Char* RestrictedChar Char* )`\n\n/**\n * A character usually appearing in wrongly converted strings.\n *\n * @type {string}\n * @see https://en.wikipedia.org/wiki/Specials_(Unicode_block)#Replacement_character\n * @see https://nodejs.dev/en/api/v18/buffer/#buffers-and-character-encodings\n * @see https://www.unicode.org/faq/utf_bom.html#BOM\n * @readonly\n */\nvar UNICODE_REPLACEMENT_CHARACTER = '\\uFFFD';\n// https://www.w3.org/TR/xml/#NT-Char\n// any Unicode character, excluding the surrogate blocks, FFFE, and FFFF.\n// `[2] Char ::= #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]`\n// https://www.w3.org/TR/xml11/#NT-Char\n// `[2] Char ::= [#x1-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]`\n// https://www.w3.org/TR/xml11/#NT-RestrictedChar\n// `[2a] RestrictedChar ::= [#x1-#x8] | [#xB-#xC] | [#xE-#x1F] | [#x7F-#x84] | [#x86-#x9F]`\n// https://www.w3.org/TR/xml11/#charsets\nvar Char = /[-\\x09\\x0A\\x0D\\x20-\\x2C\\x2E-\\uD7FF\\uE000-\\uFFFD]/; // without \\u10000-\\uEFFFF\nif (UNICODE_SUPPORT) {\n\t// eslint-disable-next-line es5/no-unicode-code-point-escape\n\tChar = reg('[', chars(Char), '\\\\u{10000}-\\\\u{10FFFF}', ']');\n}\n\nvar _SChar = /[\\x20\\x09\\x0D\\x0A]/;\nvar SChar_s = chars(_SChar);\n// https://www.w3.org/TR/xml11/#NT-S\n// `[3] S ::= (#x20 | #x9 | #xD | #xA)+`\nvar S = reg(_SChar, '+');\n// optional whitespace described as `S?` in the grammar,\n// simplified to 0-n occurrences of the character class\n// instead of 0-1 occurrences of a non-capturing group around S\nvar S_OPT = reg(_SChar, '*');\n\n// https://www.w3.org/TR/xml11/#NT-NameStartChar\n// `[4] NameStartChar ::= \":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]`\nvar NameStartChar =\n\t/[:_a-zA-Z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/; // without \\u10000-\\uEFFFF\nif (UNICODE_SUPPORT) {\n\t// eslint-disable-next-line es5/no-unicode-code-point-escape\n\tNameStartChar = reg('[', chars(NameStartChar), '\\\\u{10000}-\\\\u{10FFFF}', ']');\n}\nvar NameStartChar_s = chars(NameStartChar);\n\n// https://www.w3.org/TR/xml11/#NT-NameChar\n// `[4a] NameChar ::= NameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]`\nvar NameChar = reg('[', NameStartChar_s, chars(/[-.0-9\\xB7]/), chars(/[\\u0300-\\u036F\\u203F-\\u2040]/), ']');\n// https://www.w3.org/TR/xml11/#NT-Name\n// `[5] Name ::= NameStartChar (NameChar)*`\nvar Name = reg(NameStartChar, NameChar, '*');\n/*\nhttps://www.w3.org/TR/xml11/#NT-Names\n`[6] Names ::= Name (#x20 Name)*`\n*/\n\n// https://www.w3.org/TR/xml11/#NT-Nmtoken\n// `[7] Nmtoken ::= (NameChar)+`\nvar Nmtoken = reg(NameChar, '+');\n/*\nhttps://www.w3.org/TR/xml11/#NT-Nmtokens\n`[8] Nmtokens ::= Nmtoken (#x20 Nmtoken)*`\nvar Nmtokens = reg(Nmtoken, regg(/\\x20/, Nmtoken), '*');\n*/\n\n// https://www.w3.org/TR/xml11/#NT-EntityRef\n// `[68] EntityRef ::= '&' Name ';'` [WFC: Entity Declared] [VC: Entity Declared] [WFC: Parsed Entity] [WFC: No Recursion]\nvar EntityRef = reg('&', Name, ';');\n// https://www.w3.org/TR/xml11/#NT-CharRef\n// `[66] CharRef ::= '&#' [0-9]+ ';' | '&#x' [0-9a-fA-F]+ ';'` [WFC: Legal Character]\nvar CharRef = regg(/&#[0-9]+;|&#x[0-9a-fA-F]+;/);\n\n/*\nhttps://www.w3.org/TR/xml11/#NT-Reference\n- `[67] Reference ::= EntityRef | CharRef`\n- `[66] CharRef ::= '&#' [0-9]+ ';' | '&#x' [0-9a-fA-F]+ ';'` [WFC: Legal Character]\n- `[68] EntityRef ::= '&' Name ';'` [WFC: Entity Declared] [VC: Entity Declared] [WFC: Parsed Entity] [WFC: No Recursion]\n*/\nvar Reference = regg(EntityRef, '|', CharRef);\n\n// https://www.w3.org/TR/xml11/#NT-PEReference\n// `[69] PEReference ::= '%' Name ';'`\n// [VC: Entity Declared] [WFC: No Recursion] [WFC: In DTD]\nvar PEReference = reg('%', Name, ';');\n\n// https://www.w3.org/TR/xml11/#NT-EntityValue\n// `[9] EntityValue ::= '\"' ([^%&\"] | PEReference | Reference)* '\"' | \"'\" ([^%&'] | PEReference | Reference)* \"'\"`\nvar EntityValue = regg(\n\treg('\"', regg(/[^%&\"]/, '|', PEReference, '|', Reference), '*', '\"'),\n\t'|',\n\treg(\"'\", regg(/[^%&']/, '|', PEReference, '|', Reference), '*', \"'\")\n);\n\n// https://www.w3.org/TR/xml11/#NT-AttValue\n// `[10] AttValue ::= '\"' ([^<&\"] | Reference)* '\"' | \"'\" ([^<&'] | Reference)* \"'\"`\nvar AttValue = regg('\"', regg(/[^<&\"]/, '|', Reference), '*', '\"', '|', \"'\", regg(/[^<&']/, '|', Reference), '*', \"'\");\n\n// https://www.w3.org/TR/xml-names/#ns-decl\n// https://www.w3.org/TR/xml-names/#ns-qualnames\n// NameStartChar without \":\"\nvar NCNameStartChar = chars_without(NameStartChar, ':');\n// https://www.w3.org/TR/xml-names/#orphans\n// `[5] NCNameChar ::= NameChar - ':'`\n// An XML NameChar, minus the \":\"\nvar NCNameChar = chars_without(NameChar, ':');\n// https://www.w3.org/TR/xml-names/#NT-NCName\n// `[4] NCName ::= Name - (Char* ':' Char*)`\n// An XML Name, minus the \":\"\nvar NCName = reg(NCNameStartChar, NCNameChar, '*');\n\n/**\nhttps://www.w3.org/TR/xml-names/#ns-qualnames\n\n```\n[7] QName ::= PrefixedName | UnprefixedName\n\t\t\t\t  === (NCName ':' NCName) | NCName\n\t\t\t\t  === NCName (':' NCName)?\n[8] PrefixedName ::= Prefix ':' LocalPart\n\t\t\t\t\t\t\t\t === NCName ':' NCName\n[9] UnprefixedName ::= LocalPart\n\t\t\t\t\t\t\t\t\t === NCName\n[10] Prefix ::= NCName\n[11] LocalPart ::= NCName\n```\n*/\nvar QName = reg(NCName, regg(':', NCName), '?');\nvar QName_exact = reg('^', QName, '$');\nvar QName_group = reg('(', QName, ')');\n\n// https://www.w3.org/TR/xml11/#NT-SystemLiteral\n// `[11] SystemLiteral ::= ('\"' [^\"]* '\"') | (\"'\" [^']* \"'\")`\nvar SystemLiteral = regg(/\"[^\"]*\"|'[^']*'/);\n\n/*\n https://www.w3.org/TR/xml11/#NT-PI\n ```\n [17] PITarget    ::= Name - (('X' | 'x') ('M' | 'm') ('L' | 'l'))\n [16] PI    ::= '<?' PITarget (S (Char* - (Char* '?>' Char*)))? '?>'\n ```\n target /xml/i is not excluded!\n*/\nvar PI = reg(/^<\\?/, '(', Name, ')', regg(S, '(', Char, '*?)'), '?', /\\?>/);\n\n// https://www.w3.org/TR/xml11/#NT-PubidChar\n// `[13] PubidChar ::= #x20 | #xD | #xA | [a-zA-Z0-9] | [-'()+,./:=?;!*#@$_%]`\nvar PubidChar = /[\\x20\\x0D\\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/;\n\n// https://www.w3.org/TR/xml11/#NT-PubidLiteral\n// `[12] PubidLiteral ::= '\"' PubidChar* '\"' | \"'\" (PubidChar - \"'\")* \"'\"`\nvar PubidLiteral = regg('\"', PubidChar, '*\"', '|', \"'\", chars_without(PubidChar, \"'\"), \"*'\");\n\n// https://www.w3.org/TR/xml11/#NT-CharData\n// `[14] CharData    ::= [^<&]* - ([^<&]* ']]>' [^<&]*)`\n\nvar COMMENT_START = '<!--';\nvar COMMENT_END = '-->';\n// https://www.w3.org/TR/xml11/#NT-Comment\n// `[15] Comment ::= '<!--' ((Char - '-') | ('-' (Char - '-')))* '-->'`\nvar Comment = reg(COMMENT_START, regg(chars_without(Char, '-'), '|', reg('-', chars_without(Char, '-'))), '*', COMMENT_END);\n\nvar PCDATA = '#PCDATA';\n// https://www.w3.org/TR/xml11/#NT-Mixed\n// `[51] Mixed ::= '(' S? '#PCDATA' (S? '|' S? Name)* S? ')*' | '(' S? '#PCDATA' S? ')'`\n// https://www.w3.org/TR/xml-names/#NT-Mixed\n// `[51] Mixed ::= '(' S? '#PCDATA' (S? '|' S? QName)* S? ')*' | '(' S? '#PCDATA' S? ')'`\n// [VC: Proper Group/PE Nesting] [VC: No Duplicate Types]\nvar Mixed = regg(\n\treg(/\\(/, S_OPT, PCDATA, regg(S_OPT, /\\|/, S_OPT, QName), '*', S_OPT, /\\)\\*/),\n\t'|',\n\treg(/\\(/, S_OPT, PCDATA, S_OPT, /\\)/)\n);\n\nvar _children_quantity = /[?*+]?/;\n/*\n `[49] choice ::= '(' S? cp ( S? '|' S? cp )+ S? ')'` [VC: Proper Group/PE Nesting]\n `[50] seq ::= '(' S? cp ( S? ',' S? cp )* S? ')'` [VC: Proper Group/PE Nesting]\n simplification to solve circular referencing, but doesn't check validity constraint \"Proper Group/PE Nesting\"\n var _choice_or_seq = reg('[', NameChar_s, SChar_s, chars(_children_quantity), '()|,]*');\n ```\n [48] cp ::= (Name | choice | seq) ('?' | '*' | '+')?\n         === (Name | '(' S? cp ( S? '|' S? cp )+ S? ')' | '(' S? cp ( S? ',' S? cp )* S? ')') ('?' | '*' | '+')?\n         !== (Name | [_choice_or_seq]*) ('?' | '*' | '+')?\n ```\n simplification to solve circular referencing, but doesn't check validity constraint \"Proper Group/PE Nesting\"\n var cp = reg(regg(Name, '|', _choice_or_seq), _children_quantity);\n*/\n/*\nInefficient regular expression (High)\nThis part of the regular expression may cause exponential backtracking on strings starting with '(|' and containing many repetitions of '|'.\nhttps://github.com/xmldom/xmldom/security/code-scanning/91\nvar choice = regg(/\\(/, S_OPT, cp, regg(S_OPT, /\\|/, S_OPT, cp), '+', S_OPT, /\\)/);\n*/\n/*\nInefficient regular expression (High)\nThis part of the regular expression may cause exponential backtracking on strings starting with '(,' and containing many repetitions of ','.\nhttps://github.com/xmldom/xmldom/security/code-scanning/92\nvar seq = regg(/\\(/, S_OPT, cp, regg(S_OPT, /,/, S_OPT, cp), '*', S_OPT, /\\)/);\n*/\n\n// `[47] children ::= (choice | seq) ('?' | '*' | '+')?`\n// simplification to solve circular referencing, but doesn't check validity constraint \"Proper Group/PE Nesting\"\nvar children = reg(/\\([^>]+\\)/, _children_quantity /*regg(choice, '|', seq), _children_quantity*/);\n\n// https://www.w3.org/TR/xml11/#NT-contentspec\n// `[46] contentspec ::= 'EMPTY' | 'ANY' | Mixed | children`\nvar contentspec = regg('EMPTY', '|', 'ANY', '|', Mixed, '|', children);\n\nvar ELEMENTDECL_START = '<!ELEMENT';\n// https://www.w3.org/TR/xml11/#NT-elementdecl\n// `[45] elementdecl ::= '<!ELEMENT' S Name S contentspec S? '>'`\n// https://www.w3.org/TR/xml-names/#NT-elementdecl\n// `[17] elementdecl ::= '<!ELEMENT' S QName S contentspec S? '>'`\n// because of https://www.w3.org/TR/xml11/#NT-PEReference\n// since xmldom is not supporting replacements of PEReferences in the DTD\n// this also supports PEReference in the possible places\nvar elementdecl = reg(ELEMENTDECL_START, S, regg(QName, '|', PEReference), S, regg(contentspec, '|', PEReference), S_OPT, '>');\n\n// https://www.w3.org/TR/xml11/#NT-NotationType\n// `[58] NotationType ::= 'NOTATION' S '(' S? Name (S? '|' S? Name)* S? ')'`\n// [VC: Notation Attributes] [VC: One Notation Per Element Type] [VC: No Notation on Empty Element] [VC: No Duplicate Tokens]\nvar NotationType = reg('NOTATION', S, /\\(/, S_OPT, Name, regg(S_OPT, /\\|/, S_OPT, Name), '*', S_OPT, /\\)/);\n// https://www.w3.org/TR/xml11/#NT-Enumeration\n// `[59] Enumeration ::= '(' S? Nmtoken (S? '|' S? Nmtoken)* S? ')'`\n// [VC: Enumeration] [VC: No Duplicate Tokens]\nvar Enumeration = reg(/\\(/, S_OPT, Nmtoken, regg(S_OPT, /\\|/, S_OPT, Nmtoken), '*', S_OPT, /\\)/);\n\n// https://www.w3.org/TR/xml11/#NT-EnumeratedType\n// `[57] EnumeratedType ::= NotationType | Enumeration`\nvar EnumeratedType = regg(NotationType, '|', Enumeration);\n\n/*\n```\n[55] StringType ::= 'CDATA'\n[56] TokenizedType ::= 'ID' [VC: ID] [VC: One ID per Element Type] [VC: ID Attribute Default]\n   | 'IDREF' [VC: IDREF]\n   | 'IDREFS' [VC: IDREF]\n\t | 'ENTITY' [VC: Entity Name]\n\t | 'ENTITIES' [VC: Entity Name]\n\t | 'NMTOKEN' [VC: Name Token]\n\t | 'NMTOKENS' [VC: Name Token]\n [54] AttType ::= StringType | TokenizedType | EnumeratedType\n```*/\nvar AttType = regg(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/, '|', EnumeratedType);\n\n// `[60] DefaultDecl ::= '#REQUIRED' | '#IMPLIED' | (('#FIXED' S)? AttValue)`\n// [WFC: No < in Attribute Values] [WFC: No External Entity References]\n// [VC: Fixed Attribute Default] [VC: Required Attribute] [VC: Attribute Default Value Syntactically Correct]\nvar DefaultDecl = regg(/#REQUIRED|#IMPLIED/, '|', regg(regg('#FIXED', S), '?', AttValue));\n\n// https://www.w3.org/TR/xml11/#NT-AttDef\n// [53] AttDef ::= S Name S AttType S DefaultDecl\n// https://www.w3.org/TR/xml-names/#NT-AttDef\n// [1] NSAttName ::= PrefixedAttName | DefaultAttName\n// [2] PrefixedAttName ::= 'xmlns:' NCName [NSC: Reserved Prefixes and Namespace Names]\n// [3] DefaultAttName ::= 'xmlns'\n// [21] AttDef ::= S (QName | NSAttName) S AttType S DefaultDecl\n// \t\t\t\t\t\t === S Name S AttType S DefaultDecl\n// xmldom is not distinguishing between QName and NSAttName on this level\n// to support XML without namespaces in DTD we can not restrict it to QName\nvar AttDef = regg(S, Name, S, AttType, S, DefaultDecl);\n\nvar ATTLIST_DECL_START = '<!ATTLIST';\n// https://www.w3.org/TR/xml11/#NT-AttlistDecl\n// `[52] AttlistDecl ::= '<!ATTLIST' S Name AttDef* S? '>'`\n// https://www.w3.org/TR/xml-names/#NT-AttlistDecl\n// `[20] AttlistDecl ::= '<!ATTLIST' S QName AttDef* S? '>'`\n// to support XML without namespaces in DTD we can not restrict it to QName\nvar AttlistDecl = reg(ATTLIST_DECL_START, S, Name, AttDef, '*', S_OPT, '>');\n\n// https://html.spec.whatwg.org/multipage/urls-and-fetching.html#about:legacy-compat\nvar ABOUT_LEGACY_COMPAT = 'about:legacy-compat';\nvar ABOUT_LEGACY_COMPAT_SystemLiteral = regg('\"' + ABOUT_LEGACY_COMPAT + '\"', '|', \"'\" + ABOUT_LEGACY_COMPAT + \"'\");\nvar SYSTEM = 'SYSTEM';\nvar PUBLIC = 'PUBLIC';\n// https://www.w3.org/TR/xml11/#NT-ExternalID\n// `[75] ExternalID ::= 'SYSTEM' S SystemLiteral | 'PUBLIC' S PubidLiteral S SystemLiteral`\nvar ExternalID = regg(regg(SYSTEM, S, SystemLiteral), '|', regg(PUBLIC, S, PubidLiteral, S, SystemLiteral));\nvar ExternalID_match = reg(\n\t'^',\n\tregg(\n\t\tregg(SYSTEM, S, '(?<SystemLiteralOnly>', SystemLiteral, ')'),\n\t\t'|',\n\t\tregg(PUBLIC, S, '(?<PubidLiteral>', PubidLiteral, ')', S, '(?<SystemLiteral>', SystemLiteral, ')')\n\t)\n);\n\n// https://www.w3.org/TR/xml11/#NT-NDataDecl\n// `[76] NDataDecl ::= S 'NDATA' S Name` [VC: Notation Declared]\nvar NDataDecl = regg(S, 'NDATA', S, Name);\n\n// https://www.w3.org/TR/xml11/#NT-EntityDef\n// `[73] EntityDef ::= EntityValue | (ExternalID NDataDecl?)`\nvar EntityDef = regg(EntityValue, '|', regg(ExternalID, NDataDecl, '?'));\n\nvar ENTITY_DECL_START = '<!ENTITY';\n// https://www.w3.org/TR/xml11/#NT-GEDecl\n// `[71] GEDecl ::= '<!ENTITY' S Name S EntityDef S? '>'`\nvar GEDecl = reg(ENTITY_DECL_START, S, Name, S, EntityDef, S_OPT, '>');\n// https://www.w3.org/TR/xml11/#NT-PEDef\n// `[74] PEDef ::= EntityValue | ExternalID`\nvar PEDef = regg(EntityValue, '|', ExternalID);\n// https://www.w3.org/TR/xml11/#NT-PEDecl\n// `[72] PEDecl ::= '<!ENTITY' S '%' S Name S PEDef S? '>'`\nvar PEDecl = reg(ENTITY_DECL_START, S, '%', S, Name, S, PEDef, S_OPT, '>');\n// https://www.w3.org/TR/xml11/#NT-EntityDecl\n// `[70] EntityDecl ::= GEDecl | PEDecl`\nvar EntityDecl = regg(GEDecl, '|', PEDecl);\n\n// https://www.w3.org/TR/xml11/#NT-PublicID\n// `[83] PublicID    ::= 'PUBLIC' S PubidLiteral`\nvar PublicID = reg(PUBLIC, S, PubidLiteral);\n// https://www.w3.org/TR/xml11/#NT-NotationDecl\n// `[82] NotationDecl    ::= '<!NOTATION' S Name S (ExternalID | PublicID) S? '>'` [VC: Unique Notation Name]\nvar NotationDecl = reg('<!NOTATION', S, Name, S, regg(ExternalID, '|', PublicID), S_OPT, '>');\n\n// https://www.w3.org/TR/xml11/#NT-Eq\n// `[25] Eq ::= S? '=' S?`\nvar Eq = reg(S_OPT, '=', S_OPT);\n// https://www.w3.org/TR/xml/#NT-VersionNum\n// `[26] VersionNum ::= '1.' [0-9]+`\n// https://www.w3.org/TR/xml11/#NT-VersionNum\n// `[26] VersionNum ::= '1.1'`\nvar VersionNum = /1[.]\\d+/;\n// https://www.w3.org/TR/xml11/#NT-VersionInfo\n// `[24] VersionInfo ::= S 'version' Eq (\"'\" VersionNum \"'\" | '\"' VersionNum '\"')`\nvar VersionInfo = reg(S, 'version', Eq, regg(\"'\", VersionNum, \"'\", '|', '\"', VersionNum, '\"'));\n// https://www.w3.org/TR/xml11/#NT-EncName\n// `[81] EncName ::= [A-Za-z] ([A-Za-z0-9._] | '-')*`\nvar EncName = /[A-Za-z][-A-Za-z0-9._]*/;\n// https://www.w3.org/TR/xml11/#NT-EncDecl\n// `[80] EncodingDecl ::= S 'encoding' Eq ('\"' EncName '\"' | \"'\" EncName \"'\" )`\nvar EncodingDecl = regg(S, 'encoding', Eq, regg('\"', EncName, '\"', '|', \"'\", EncName, \"'\"));\n// https://www.w3.org/TR/xml11/#NT-SDDecl\n// `[32] SDDecl ::= S 'standalone' Eq ((\"'\" ('yes' | 'no') \"'\") | ('\"' ('yes' | 'no') '\"'))`\nvar SDDecl = regg(S, 'standalone', Eq, regg(\"'\", regg('yes', '|', 'no'), \"'\", '|', '\"', regg('yes', '|', 'no'), '\"'));\n// https://www.w3.org/TR/xml11/#NT-XMLDecl\n// [23] XMLDecl ::= '<?xml' VersionInfo EncodingDecl? SDDecl? S? '?>'\nvar XMLDecl = reg(/^<\\?xml/, VersionInfo, EncodingDecl, '?', SDDecl, '?', S_OPT, /\\?>/);\n\n/*\n https://www.w3.org/TR/xml/#NT-markupdecl\n https://www.w3.org/TR/xml11/#NT-markupdecl\n `[29] markupdecl ::= elementdecl | AttlistDecl | EntityDecl | NotationDecl | PI | Comment`\n var markupdecl = regg(elementdecl, '|', AttlistDecl, '|', EntityDecl, '|', NotationDecl, '|', PI_unsafe, '|', Comment);\n*/\n/*\n https://www.w3.org/TR/xml-names/#NT-doctypedecl\n`[28a] DeclSep   ::= PEReference | S`\n https://www.w3.org/TR/xml11/#NT-intSubset\n```\n [28b] intSubset ::= (markupdecl | DeclSep)*\n                 === (markupdecl | PEReference | S)*\n```\n [WFC: PE Between Declarations]\n var intSubset = reg(regg(markupdecl, '|', PEReference, '|', S), '*');\n*/\nvar DOCTYPE_DECL_START = '<!DOCTYPE';\n/*\n https://www.w3.org/TR/xml11/#NT-doctypedecl\n `[28] doctypedecl ::= '<!DOCTYPE' S Name (S ExternalID)? S? ('[' intSubset ']' S?)? '>'`\n https://www.afterwardsw3.org/TR/xml-names/#NT-doctypedecl\n `[16] doctypedecl ::= '<!DOCTYPE' S QName (S ExternalID)? S? ('[' (markupdecl | PEReference | S)* ']' S?)? '>'`\n var doctypedecl = reg('<!DOCTYPE', S, Name, regg(S, ExternalID), '?', S_OPT, regg(/\\[/, intSubset, /]/, S_OPT), '?', '>');\n*/\n\nvar CDATA_START = '<![CDATA[';\nvar CDATA_END = ']]>';\nvar CDStart = /<!\\[CDATA\\[/;\nvar CDEnd = /\\]\\]>/;\nvar CData = reg(Char, '*?', CDEnd);\n/*\n https://www.w3.org/TR/xml/#dt-cdsection\n `[18]   \tCDSect\t   ::=   \tCDStart CData CDEnd`\n `[19]   \tCDStart\t   ::=   \t'<![CDATA['`\n `[20]   \tCData\t   ::=   \t(Char* - (Char* ']]>' Char*))`\n `[21]   \tCDEnd\t   ::=   \t']]>'`\n*/\nvar CDSect = reg(CDStart, CData);\n\n// unit tested\nexports.chars = chars;\nexports.chars_without = chars_without;\nexports.detectUnicodeSupport = detectUnicodeSupport;\nexports.reg = reg;\nexports.regg = regg;\nexports.ABOUT_LEGACY_COMPAT = ABOUT_LEGACY_COMPAT;\nexports.ABOUT_LEGACY_COMPAT_SystemLiteral = ABOUT_LEGACY_COMPAT_SystemLiteral;\nexports.AttlistDecl = AttlistDecl;\nexports.CDATA_START = CDATA_START;\nexports.CDATA_END = CDATA_END;\nexports.CDSect = CDSect;\nexports.Char = Char;\nexports.Comment = Comment;\nexports.COMMENT_START = COMMENT_START;\nexports.COMMENT_END = COMMENT_END;\nexports.DOCTYPE_DECL_START = DOCTYPE_DECL_START;\nexports.elementdecl = elementdecl;\nexports.EntityDecl = EntityDecl;\nexports.EntityValue = EntityValue;\nexports.ExternalID = ExternalID;\nexports.ExternalID_match = ExternalID_match;\nexports.Name = Name;\nexports.NotationDecl = NotationDecl;\nexports.Reference = Reference;\nexports.PEReference = PEReference;\nexports.PI = PI;\nexports.PUBLIC = PUBLIC;\nexports.PubidLiteral = PubidLiteral;\nexports.QName = QName;\nexports.QName_exact = QName_exact;\nexports.QName_group = QName_group;\nexports.S = S;\nexports.SChar_s = SChar_s;\nexports.S_OPT = S_OPT;\nexports.SYSTEM = SYSTEM;\nexports.SystemLiteral = SystemLiteral;\nexports.UNICODE_REPLACEMENT_CHARACTER = UNICODE_REPLACEMENT_CHARACTER;\nexports.UNICODE_SUPPORT = UNICODE_SUPPORT;\nexports.XMLDecl = XMLDecl;\n","'use strict';\n\nvar conventions = require('./conventions');\nvar find = conventions.find;\nvar hasDefaultHTMLNamespace = conventions.hasDefaultHTMLNamespace;\nvar hasOwn = conventions.hasOwn;\nvar isHTMLMimeType = conventions.isHTMLMimeType;\nvar isHTMLRawTextElement = conventions.isHTMLRawTextElement;\nvar isHTMLVoidElement = conventions.isHTMLVoidElement;\nvar MIME_TYPE = conventions.MIME_TYPE;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * Private DOM Constructor symbol\n *\n * Internal symbol used for construction of all classes whose constructors should be private.\n * Currently used for checks in `Node`, `Document`, `Element`, `Attr`, `CharacterData`, `Text`, `Comment`,\n * `CDATASection`, `DocumentType`, `Notation`, `Entity`, `EntityReference`, `DocumentFragment`, `ProcessingInstruction`\n * so the constructor can't be used from outside the module.\n */\nvar PDC = Symbol();\n\nvar errors = require('./errors');\nvar DOMException = errors.DOMException;\nvar DOMExceptionName = errors.DOMExceptionName;\n\nvar g = require('./grammar');\n\n/**\n * Checks if the given symbol equals the Private DOM Constructor symbol (PDC)\n * and throws an Illegal constructor exception when the symbols don't match.\n * This ensures that the constructor remains private and can't be used outside this module.\n */\nfunction checkSymbol(symbol) {\n\tif (symbol !== PDC) {\n\t\tthrow new TypeError('Illegal constructor');\n\t}\n}\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty.\n *\n * @param {string} input\n * The string to be checked.\n * @returns {boolean}\n * Returns `true` if the input string is not empty, `false` otherwise.\n */\nfunction notEmptyString(input) {\n\treturn input !== '';\n}\n/**\n * Splits a string on ASCII whitespace characters (U+0009 TAB, U+000A LF, U+000C FF, U+000D CR,\n * U+0020 SPACE).\n * It follows the definition from the infra specification from WHATWG.\n *\n * @param {string} input\n * The string to be split.\n * @returns {string[]}\n * An array of the split strings. The array can be empty if the input string is empty or only\n * contains whitespace characters.\n * @see {@link https://infra.spec.whatwg.org/#split-on-ascii-whitespace}\n * @see {@link https://infra.spec.whatwg.org/#ascii-whitespace}\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : [];\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * The current record object to which the element will be added as a key.\n * The object's keys are string types and values are either boolean or undefined.\n * @param {string} element\n * The string to be added as a key to the current record.\n * @returns {Record<string, boolean | undefined>}\n * The updated record object after the addition of the new element.\n */\nfunction orderedSetReducer(current, element) {\n\tif (!hasOwn(current, element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * Converts a string into an ordered set by splitting the input on ASCII whitespace and\n * ensuring uniqueness of elements.\n * This follows the definition of an ordered set from the infra specification by WHATWG.\n *\n * @param {string} input\n * The input string to be transformed into an ordered set.\n * @returns {string[]}\n * An array of unique strings obtained from the input, preserving the original order.\n * The array can be empty if the input string is empty or only contains whitespace characters.\n * @see {@link https://infra.spec.whatwg.org/#ordered-set}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}));\n}\n\n/**\n * Uses `list.indexOf` to implement a function that behaves like `Array.prototype.includes`.\n * This function is used in environments where `Array.prototype.includes` may not be available.\n *\n * @param {any[]} list\n * The array in which to search for the element.\n * @returns {function(any): boolean}\n * A function that accepts an element and returns a boolean indicating whether the element is\n * included in the provided list.\n */\nfunction arrayIncludes(list) {\n\treturn function (element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t};\n}\n\n/**\n * Validates a qualified name based on the criteria provided in the DOM specification by\n * WHATWG.\n *\n * @param {string} qualifiedName\n * The qualified name to be validated.\n * @throws {DOMException}\n * With code {@link DOMException.INVALID_CHARACTER_ERR} if the qualified name contains an\n * invalid character.\n * @see {@link https://dom.spec.whatwg.org/#validate}\n */\nfunction validateQualifiedName(qualifiedName) {\n\tif (!g.QName_exact.test(qualifiedName)) {\n\t\tthrow new DOMException(DOMException.INVALID_CHARACTER_ERR, 'invalid character in qualified name \"' + qualifiedName + '\"');\n\t}\n}\n\n/**\n * Validates a qualified name and the namespace associated with it,\n * based on the criteria provided in the DOM specification by WHATWG.\n *\n * @param {string | null} namespace\n * The namespace to be validated. It can be a string or null.\n * @param {string} qualifiedName\n * The qualified name to be validated.\n * @returns {[namespace: string | null, prefix: string | null, localName: string]}\n * Returns a tuple with the namespace,\n * prefix and local name of the qualified name.\n * @throws {DOMException}\n * Throws a DOMException if the qualified name or the namespace is not valid.\n * @see {@link https://dom.spec.whatwg.org/#validate-and-extract}\n */\nfunction validateAndExtract(namespace, qualifiedName) {\n\tvalidateQualifiedName(qualifiedName);\n\tnamespace = namespace || null;\n\t/**\n\t * @type {string | null}\n\t */\n\tvar prefix = null;\n\tvar localName = qualifiedName;\n\tif (qualifiedName.indexOf(':') >= 0) {\n\t\tvar splitResult = qualifiedName.split(':');\n\t\tprefix = splitResult[0];\n\t\tlocalName = splitResult[1];\n\t}\n\tif (prefix !== null && namespace === null) {\n\t\tthrow new DOMException(DOMException.NAMESPACE_ERR, 'prefix is non-null and namespace is null');\n\t}\n\tif (prefix === 'xml' && namespace !== conventions.NAMESPACE.XML) {\n\t\tthrow new DOMException(DOMException.NAMESPACE_ERR, 'prefix is \"xml\" and namespace is not the XML namespace');\n\t}\n\tif ((prefix === 'xmlns' || qualifiedName === 'xmlns') && namespace !== conventions.NAMESPACE.XMLNS) {\n\t\tthrow new DOMException(\n\t\t\tDOMException.NAMESPACE_ERR,\n\t\t\t'either qualifiedName or prefix is \"xmlns\" and namespace is not the XMLNS namespace'\n\t\t);\n\t}\n\tif (namespace === conventions.NAMESPACE.XMLNS && prefix !== 'xmlns' && qualifiedName !== 'xmlns') {\n\t\tthrow new DOMException(\n\t\t\tDOMException.NAMESPACE_ERR,\n\t\t\t'namespace is the XMLNS namespace and neither qualifiedName nor prefix is \"xmlns\"'\n\t\t);\n\t}\n\treturn [namespace, prefix, localName];\n}\n\n/**\n * Copies properties from one object to another.\n * It only copies the object's own (not inherited) properties.\n *\n * @param {Object} src\n * The source object from which properties are copied.\n * @param {Object} dest\n * The destination object to which properties are copied.\n */\nfunction copy(src, dest) {\n\tfor (var p in src) {\n\t\tif (hasOwn(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n * Extends a class with the properties and methods of a super class.\n * It uses a form of prototypal inheritance, and establishes the `constructor` property\n * correctly(?).\n *\n * It is not clear to the current maintainers if this implementation is making sense,\n * since it creates an intermediate prototype function,\n * which all properties of `Super` are copied onto using `_copy`.\n *\n * @param {Object} Class\n * The class that is to be extended.\n * @param {Object} Super\n * The super class from which properties and methods are inherited.\n * @private\n */\nfunction _extends(Class, Super) {\n\tvar pt = Class.prototype;\n\tif (!(pt instanceof Super)) {\n\t\tfunction t() {}\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt, t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif (pt.constructor != Class) {\n\t\tif (typeof Class != 'function') {\n\t\t\tconsole.error('unknown Class:' + Class);\n\t\t}\n\t\tpt.constructor = Class;\n\t}\n}\n\nvar NodeType = {};\nvar ELEMENT_NODE = (NodeType.ELEMENT_NODE = 1);\nvar ATTRIBUTE_NODE = (NodeType.ATTRIBUTE_NODE = 2);\nvar TEXT_NODE = (NodeType.TEXT_NODE = 3);\nvar CDATA_SECTION_NODE = (NodeType.CDATA_SECTION_NODE = 4);\nvar ENTITY_REFERENCE_NODE = (NodeType.ENTITY_REFERENCE_NODE = 5);\nvar ENTITY_NODE = (NodeType.ENTITY_NODE = 6);\nvar PROCESSING_INSTRUCTION_NODE = (NodeType.PROCESSING_INSTRUCTION_NODE = 7);\nvar COMMENT_NODE = (NodeType.COMMENT_NODE = 8);\nvar DOCUMENT_NODE = (NodeType.DOCUMENT_NODE = 9);\nvar DOCUMENT_TYPE_NODE = (NodeType.DOCUMENT_TYPE_NODE = 10);\nvar DOCUMENT_FRAGMENT_NODE = (NodeType.DOCUMENT_FRAGMENT_NODE = 11);\nvar NOTATION_NODE = (NodeType.NOTATION_NODE = 12);\n\nvar DocumentPosition = conventions.freeze({\n\tDOCUMENT_POSITION_DISCONNECTED: 1,\n\tDOCUMENT_POSITION_PRECEDING: 2,\n\tDOCUMENT_POSITION_FOLLOWING: 4,\n\tDOCUMENT_POSITION_CONTAINS: 8,\n\tDOCUMENT_POSITION_CONTAINED_BY: 16,\n\tDOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC: 32,\n});\n\n//helper functions for compareDocumentPosition\n/**\n * Finds the common ancestor in two parent chains.\n *\n * @param {Node[]} a\n * The first parent chain.\n * @param {Node[]} b\n * The second parent chain.\n * @returns {Node}\n * The common ancestor node if it exists. If there is no common ancestor, the function will\n * return `null`.\n */\nfunction commonAncestor(a, b) {\n\tif (b.length < a.length) return commonAncestor(b, a);\n\tvar c = null;\n\tfor (var n in a) {\n\t\tif (a[n] !== b[n]) return c;\n\t\tc = a[n];\n\t}\n\treturn c;\n}\n\n/**\n * Assigns a unique identifier to a document to ensure consistency while comparing unrelated\n * nodes.\n *\n * @param {Document} doc\n * The document to which a unique identifier is to be assigned.\n * @returns {string}\n * The unique identifier of the document. If the document already had a unique identifier, the\n * function will return the existing one.\n */\nfunction docGUID(doc) {\n\tif (!doc.guid) doc.guid = Math.random();\n\treturn doc.guid;\n}\n//-- end of helper functions\n\n/**\n * The NodeList interface provides the abstraction of an ordered collection of nodes,\n * without defining or constraining how this collection is implemented.\n * NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n * You can also access the items of the NodeList with a `for...of` loop.\n *\n * @class NodeList\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * @constructs NodeList\n */\nfunction NodeList() {}\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1\n\t * inclusive.\n\t *\n\t * @type {number}\n\t */\n\tlength: 0,\n\t/**\n\t * Returns the item at `index`. If index is greater than or equal to the number of nodes in\n\t * the list, this returns null.\n\t *\n\t * @param index\n\t * Unsigned long Index into the collection.\n\t * @returns {Node | null}\n\t * The node at position `index` in the NodeList,\n\t * or null if that is not a valid index.\n\t */\n\titem: function (index) {\n\t\treturn index >= 0 && index < this.length ? this[index] : null;\n\t},\n\t/**\n\t * Returns a string representation of the NodeList.\n\t *\n\t * @param {unknown} nodeFilter\n\t * __A filter function? Not implemented according to the spec?__.\n\t * @returns {string}\n\t * A string representation of the NodeList.\n\t */\n\ttoString: function (nodeFilter) {\n\t\tfor (var buf = [], i = 0; i < this.length; i++) {\n\t\t\tserializeToString(this[i], buf, nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * Filters the NodeList based on a predicate.\n\t *\n\t * @param {function(Node): boolean} predicate\n\t * - A predicate function to filter the NodeList.\n\t * @returns {Node[]}\n\t * An array of nodes that satisfy the predicate.\n\t * @private\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * Returns the first index at which a given node can be found in the NodeList, or -1 if it is\n\t * not present.\n\t *\n\t * @param {Node} item\n\t * - The Node item to locate in the NodeList.\n\t * @returns {number}\n\t * The first index of the node in the NodeList; -1 if not found.\n\t * @private\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\nNodeList.prototype[Symbol.iterator] = function () {\n\tvar me = this;\n\tvar index = 0;\n\n\treturn {\n\t\tnext: function () {\n\t\t\tif (index < me.length) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: me[index++],\n\t\t\t\t\tdone: false,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tdone: true,\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\treturn: function () {\n\t\t\treturn {\n\t\t\t\tdone: true,\n\t\t\t};\n\t\t},\n\t};\n};\n\n/**\n * Represents a live collection of nodes that is automatically updated when its associated\n * document changes.\n *\n * @class LiveNodeList\n * @param {Node} node\n * The associated node.\n * @param {function} refresh\n * The function to refresh the live node list.\n * @augments NodeList\n * @constructs LiveNodeList\n */\nfunction LiveNodeList(node, refresh) {\n\tthis._node = node;\n\tthis._refresh = refresh;\n\t_updateLiveList(this);\n}\n/**\n * Updates the live node list.\n *\n * @param {LiveNodeList} list\n * The live node list to update.\n * @private\n */\nfunction _updateLiveList(list) {\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif (list._inc !== inc) {\n\t\tvar ls = list._refresh(list._node);\n\t\t__set__(list, 'length', ls.length);\n\t\tif (!list.$$length || ls.length < list.$$length) {\n\t\t\tfor (var i = ls.length; i in list; i++) {\n\t\t\t\tif (hasOwn(list, i)) {\n\t\t\t\t\tdelete list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcopy(ls, list);\n\t\tlist._inc = inc;\n\t}\n}\n/**\n * Returns the node at position `index` in the LiveNodeList, or null if that is not a valid\n * index.\n *\n * @param {number} i\n * Index into the collection.\n * @returns {Node | null}\n * The node at position `index` in the LiveNodeList, or null if that is not a valid index.\n */\nLiveNodeList.prototype.item = function (i) {\n\t_updateLiveList(this);\n\treturn this[i] || null;\n};\n\n_extends(LiveNodeList, NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes\n * that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal\n * index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n *\n * This implementation only supports property indices, but does not support named properties,\n * as specified in the living standard.\n *\n * @class NamedNodeMap\n * @see https://dom.spec.whatwg.org/#interface-namednodemap\n * @see https://webidl.spec.whatwg.org/#dfn-supported-property-names\n * @constructs NamedNodeMap\n */\nfunction NamedNodeMap() {}\n/**\n * Returns the index of a node within the list.\n *\n * @param {Array} list\n * The list of nodes.\n * @param {Node} node\n * The node to find.\n * @returns {number}\n * The index of the node within the list, or -1 if not found.\n * @private\n */\nfunction _findNodeIndex(list, node) {\n\tvar i = 0;\n\twhile (i < list.length) {\n\t\tif (list[i] === node) {\n\t\t\treturn i;\n\t\t}\n\t\ti++;\n\t}\n}\n/**\n * Adds a new attribute to the list and updates the owner element of the attribute.\n *\n * @param {Element} el\n * The element which will become the owner of the new attribute.\n * @param {NamedNodeMap} list\n * The list to which the new attribute will be added.\n * @param {Attr} newAttr\n * The new attribute to be added.\n * @param {Attr} oldAttr\n * The old attribute to be replaced, or null if no attribute is to be replaced.\n * @returns {void}\n * @private\n */\nfunction _addNamedNode(el, list, newAttr, oldAttr) {\n\tif (oldAttr) {\n\t\tlist[_findNodeIndex(list, oldAttr)] = newAttr;\n\t} else {\n\t\tlist[list.length] = newAttr;\n\t\tlist.length++;\n\t}\n\tif (el) {\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif (doc) {\n\t\t\toldAttr && _onRemoveAttribute(doc, el, oldAttr);\n\t\t\t_onAddAttribute(doc, el, newAttr);\n\t\t}\n\t}\n}\n/**\n * Removes an attribute from the list and updates the owner element of the attribute.\n *\n * @param {Element} el\n * The element which is the current owner of the attribute.\n * @param {NamedNodeMap} list\n * The list from which the attribute will be removed.\n * @param {Attr} attr\n * The attribute to be removed.\n * @returns {void}\n * @private\n */\nfunction _removeNamedNode(el, list, attr) {\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list, attr);\n\tif (i >= 0) {\n\t\tvar lastIndex = list.length - 1;\n\t\twhile (i <= lastIndex) {\n\t\t\tlist[i] = list[++i];\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif (el) {\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif (doc) {\n\t\t\t\t_onRemoveAttribute(doc, el, attr);\n\t\t\t}\n\t\t\tattr.ownerElement = null;\n\t\t}\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength: 0,\n\titem: NodeList.prototype.item,\n\n\t/**\n\t * Get an attribute by name. Note: Name is in lower case in case of HTML namespace and\n\t * document.\n\t *\n\t * @param {string} localName\n\t * The local name of the attribute.\n\t * @returns {Attr | null}\n\t * The attribute with the given local name, or null if no such attribute exists.\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-get-by-name\n\t */\n\tgetNamedItem: function (localName) {\n\t\tif (this._ownerElement && this._ownerElement._isInHTMLDocumentAndNamespace()) {\n\t\t\tlocalName = localName.toLowerCase();\n\t\t}\n\t\tvar i = 0;\n\t\twhile (i < this.length) {\n\t\t\tvar attr = this[i];\n\t\t\tif (attr.nodeName === localName) {\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t * Set an attribute.\n\t *\n\t * @param {Attr} attr\n\t * The attribute to set.\n\t * @returns {Attr | null}\n\t * The old attribute with the same local name and namespace URI as the new one, or null if no\n\t * such attribute exists.\n\t * @throws {DOMException}\n\t * With code:\n\t * - {@link INUSE_ATTRIBUTE_ERR} - If the attribute is already an attribute of another\n\t * element.\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-set\n\t */\n\tsetNamedItem: function (attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif (el && el !== this._ownerElement) {\n\t\t\tthrow new DOMException(DOMException.INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItemNS(attr.namespaceURI, attr.localName);\n\t\tif (oldAttr === attr) {\n\t\t\treturn attr;\n\t\t}\n\t\t_addNamedNode(this._ownerElement, this, attr, oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/**\n\t * Set an attribute, replacing an existing attribute with the same local name and namespace\n\t * URI if one exists.\n\t *\n\t * @param {Attr} attr\n\t * The attribute to set.\n\t * @returns {Attr | null}\n\t * The old attribute with the same local name and namespace URI as the new one, or null if no\n\t * such attribute exists.\n\t * @throws {DOMException}\n\t * Throws a DOMException with the name \"InUseAttributeError\" if the attribute is already an\n\t * attribute of another element.\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-set\n\t */\n\tsetNamedItemNS: function (attr) {\n\t\treturn this.setNamedItem(attr);\n\t},\n\n\t/**\n\t * Removes an attribute specified by the local name.\n\t *\n\t * @param {string} localName\n\t * The local name of the attribute to be removed.\n\t * @returns {Attr}\n\t * The attribute node that was removed.\n\t * @throws {DOMException}\n\t * With code:\n\t * - {@link DOMException.NOT_FOUND_ERR} if no attribute with the given name is found.\n\t * @see https://dom.spec.whatwg.org/#dom-namednodemap-removenameditem\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-remove-by-name\n\t */\n\tremoveNamedItem: function (localName) {\n\t\tvar attr = this.getNamedItem(localName);\n\t\tif (!attr) {\n\t\t\tthrow new DOMException(DOMException.NOT_FOUND_ERR, localName);\n\t\t}\n\t\t_removeNamedNode(this._ownerElement, this, attr);\n\t\treturn attr;\n\t},\n\n\t/**\n\t * Removes an attribute specified by the namespace and local name.\n\t *\n\t * @param {string | null} namespaceURI\n\t * The namespace URI of the attribute to be removed.\n\t * @param {string} localName\n\t * The local name of the attribute to be removed.\n\t * @returns {Attr}\n\t * The attribute node that was removed.\n\t * @throws {DOMException}\n\t * With code:\n\t * - {@link DOMException.NOT_FOUND_ERR} if no attribute with the given namespace URI and local\n\t * name is found.\n\t * @see https://dom.spec.whatwg.org/#dom-namednodemap-removenameditemns\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-remove-by-namespace\n\t */\n\tremoveNamedItemNS: function (namespaceURI, localName) {\n\t\tvar attr = this.getNamedItemNS(namespaceURI, localName);\n\t\tif (!attr) {\n\t\t\tthrow new DOMException(DOMException.NOT_FOUND_ERR, namespaceURI ? namespaceURI + ' : ' + localName : localName);\n\t\t}\n\t\t_removeNamedNode(this._ownerElement, this, attr);\n\t\treturn attr;\n\t},\n\n\t/**\n\t * Get an attribute by namespace and local name.\n\t *\n\t * @param {string | null} namespaceURI\n\t * The namespace URI of the attribute.\n\t * @param {string} localName\n\t * The local name of the attribute.\n\t * @returns {Attr | null}\n\t * The attribute with the given namespace URI and local name, or null if no such attribute\n\t * exists.\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-get-by-namespace\n\t */\n\tgetNamedItemNS: function (namespaceURI, localName) {\n\t\tif (!namespaceURI) {\n\t\t\tnamespaceURI = null;\n\t\t}\n\t\tvar i = 0;\n\t\twhile (i < this.length) {\n\t\t\tvar node = this[i];\n\t\t\tif (node.localName === localName && node.namespaceURI === namespaceURI) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t},\n};\nNamedNodeMap.prototype[Symbol.iterator] = function () {\n\tvar me = this;\n\tvar index = 0;\n\n\treturn {\n\t\tnext: function () {\n\t\t\tif (index < me.length) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: me[index++],\n\t\t\t\t\tdone: false,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tdone: true,\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\treturn: function () {\n\t\t\treturn {\n\t\t\t\tdone: true,\n\t\t\t};\n\t\t},\n\t};\n};\n\n/**\n * The DOMImplementation interface provides a number of methods for performing operations that\n * are independent of any particular instance of the document object model.\n *\n * The DOMImplementation interface represents an object providing methods which are not\n * dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * **The individual methods describe the differences compared to the specs**.\n *\n * @class DOMImplementation\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core\n *      (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n * @constructs DOMImplementation\n */\nfunction DOMImplementation() {}\n\nDOMImplementation.prototype = {\n\t/**\n\t * Test if the DOM implementation implements a specific feature and version, as specified in\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures DOM Features}.\n\t *\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given\n\t * feature is supported. The different implementations fairly diverged in what kind of\n\t * features were reported. The latest version of the spec settled to force this method to\n\t * always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated\n\t * It is deprecated and modern browsers return true in all cases.\n\t * @function DOMImplementation#hasFeature\n\t * @param {string} feature\n\t * The name of the feature to test.\n\t * @param {string} [version]\n\t * This is the version number of the feature to test.\n\t * @returns {boolean}\n\t * Always returns true.\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-5CED94D7 DOM Level 3 Core\n\t */\n\thasFeature: function (feature, version) {\n\t\treturn true;\n\t},\n\t/**\n\t * Creates a DOM Document object of the specified type with its document element. Note that\n\t * based on the {@link DocumentType}\n\t * given to create the document, the implementation may instantiate specialized\n\t * {@link Document} objects that support additional features than the \"Core\", such as \"HTML\"\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#DOM2HTML DOM Level 2 HTML}.\n\t * On the other hand, setting the {@link DocumentType} after the document was created makes\n\t * this very unlikely to happen. Alternatively, specialized {@link Document} creation methods,\n\t * such as createHTMLDocument\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#DOM2HTML DOM Level 2 HTML},\n\t * can be used to obtain specific types of {@link Document} objects.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document`\n\t * instance (with it's `type` set to `'xml'`).\n\t * - `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t *\n\t * @function DOMImplementation.createDocument\n\t * @param {string | null} namespaceURI\n\t * The\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-namespaceURI namespace URI}\n\t * of the document element to create or null.\n\t * @param {string | null} qualifiedName\n\t * The\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-qualifiedname qualified name}\n\t * of the document element to be created or null.\n\t * @param {DocumentType | null} [doctype=null]\n\t * The type of document to be created or null. When doctype is not null, its\n\t * {@link Node#ownerDocument} attribute is set to the document being created. Default is\n\t * `null`\n\t * @returns {Document}\n\t * A new {@link Document} object with its document element. If the NamespaceURI,\n\t * qualifiedName, and doctype are null, the returned {@link Document} is empty with no\n\t * document element.\n\t * @throws {DOMException}\n\t * With code:\n\t *\n\t * - `INVALID_CHARACTER_ERR`: Raised if the specified qualified name is not an XML name\n\t * according to {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#XML XML 1.0}.\n\t * - `NAMESPACE_ERR`: Raised if the qualifiedName is malformed, if the qualifiedName has a\n\t * prefix and the namespaceURI is null, or if the qualifiedName is null and the namespaceURI\n\t * is different from null, or if the qualifiedName has a prefix that is \"xml\" and the\n\t * namespaceURI is different from \"{@link http://www.w3.org/XML/1998/namespace}\"\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#Namespaces XML Namespaces},\n\t * or if the DOM implementation does not support the \"XML\" feature but a non-null namespace\n\t * URI was provided, since namespaces were defined by XML.\n\t * - `WRONG_DOCUMENT_ERR`: Raised if doctype has already been used with a different document\n\t * or was created from a different implementation.\n\t * - `NOT_SUPPORTED_ERR`: May be raised if the implementation does not support the feature\n\t * \"XML\" and the language exposed through the Document does not support XML Namespaces (such\n\t * as {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#HTML40 HTML 4.01}).\n\t * @since DOM Level 2.\n\t * @see {@link #createHTMLDocument}\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument DOM Living Standard\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Level-2-Core-DOM-createDocument DOM\n\t *      Level 3 Core\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM\n\t *      Level 2 Core (initial)\n\t */\n\tcreateDocument: function (namespaceURI, qualifiedName, doctype) {\n\t\tvar contentType = MIME_TYPE.XML_APPLICATION;\n\t\tif (namespaceURI === NAMESPACE.HTML) {\n\t\t\tcontentType = MIME_TYPE.XML_XHTML_APPLICATION;\n\t\t} else if (namespaceURI === NAMESPACE.SVG) {\n\t\t\tcontentType = MIME_TYPE.XML_SVG_IMAGE;\n\t\t}\n\t\tvar doc = new Document(PDC, { contentType: contentType });\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype) {\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName) {\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Creates an empty DocumentType node. Entity declarations and notations are not made\n\t * available. Entity reference expansions and default attribute additions do not occur.\n\t *\n\t * **This behavior is slightly different from the one in the specs**:\n\t * - `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - `publicId` and `systemId` contain the raw data including any possible quotes,\n\t *   so they can always be serialized back to the original value\n\t * - `internalSubset` contains the raw string between `[` and `]` if present,\n\t *   but is not parsed or validated in any form.\n\t *\n\t * @function DOMImplementation#createDocumentType\n\t * @param {string} qualifiedName\n\t * The {@link https://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-qualifiedname qualified\n\t * name} of the document type to be created.\n\t * @param {string} [publicId]\n\t * The external subset public identifier.\n\t * @param {string} [systemId]\n\t * The external subset system identifier.\n\t * @param {string} [internalSubset]\n\t * the internal subset or an empty string if it is not present\n\t * @returns {DocumentType}\n\t * A new {@link DocumentType} node with {@link Node#ownerDocument} set to null.\n\t * @throws {DOMException}\n\t * With code:\n\t *\n\t * - `INVALID_CHARACTER_ERR`: Raised if the specified qualified name is not an XML name\n\t * according to {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#XML XML 1.0}.\n\t * - `NAMESPACE_ERR`: Raised if the qualifiedName is malformed.\n\t * - `NOT_SUPPORTED_ERR`: May be raised if the implementation does not support the feature\n\t * \"XML\" and the language exposed through the Document does not support XML Namespaces (such\n\t * as {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#HTML40 HTML 4.01}).\n\t * @since DOM Level 2.\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType\n\t *      MDN\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living\n\t *      Standard\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Level-3-Core-DOM-createDocType DOM\n\t *      Level 3 Core\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM\n\t *      Level 2 Core\n\t * @see https://github.com/xmldom/xmldom/blob/master/CHANGELOG.md#050\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/#core-ID-Core-DocType-internalSubset\n\t * @prettierignore\n\t */\n\tcreateDocumentType: function (qualifiedName, publicId, systemId, internalSubset) {\n\t\tvalidateQualifiedName(qualifiedName);\n\t\tvar node = new DocumentType(PDC);\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\t\tnode.internalSubset = internalSubset || '';\n\t\tnode.childNodes = new NodeList();\n\n\t\treturn node;\n\t},\n\t/**\n\t * Returns an HTML document, that might already have a basic DOM structure.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - If the first argument is `false` no initial nodes are added (steps 3-7 in the specs are\n\t * omitted)\n\t * - `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t *\n\t * @param {string | false} [title]\n\t * A string containing the title to give the new HTML document.\n\t * @returns {Document}\n\t * The HTML document.\n\t * @since WHATWG Living Standard.\n\t * @see {@link #createDocument}\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createhtmldocument\n\t * @see https://dom.spec.whatwg.org/#html-document\n\t */\n\tcreateHTMLDocument: function (title) {\n\t\tvar doc = new Document(PDC, { contentType: MIME_TYPE.HTML });\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tif (title !== false) {\n\t\t\tdoc.doctype = this.createDocumentType('html');\n\t\t\tdoc.doctype.ownerDocument = doc;\n\t\t\tdoc.appendChild(doc.doctype);\n\t\t\tvar htmlNode = doc.createElement('html');\n\t\t\tdoc.appendChild(htmlNode);\n\t\t\tvar headNode = doc.createElement('head');\n\t\t\thtmlNode.appendChild(headNode);\n\t\t\tif (typeof title === 'string') {\n\t\t\t\tvar titleNode = doc.createElement('title');\n\t\t\t\ttitleNode.appendChild(doc.createTextNode(title));\n\t\t\t\theadNode.appendChild(titleNode);\n\t\t\t}\n\t\t\thtmlNode.appendChild(doc.createElement('body'));\n\t\t}\n\t\treturn doc;\n\t},\n};\n\n/**\n * The DOM Node interface is an abstract base class upon which many other DOM API objects are\n * based, thus letting those object types to be used similarly and often interchangeably. As an\n * abstract class, there is no such thing as a plain Node object. All objects that implement\n * Node functionality are based on one of its subclasses. Most notable are Document, Element,\n * and DocumentFragment.\n *\n * In addition, every kind of DOM node is represented by an interface based on Node. These\n * include Attr, CharacterData (which Text, Comment, CDATASection and ProcessingInstruction are\n * all based on), and DocumentType.\n *\n * In some cases, a particular feature of the base Node interface may not apply to one of its\n * child interfaces; in that case, the inheriting node may return null or throw an exception,\n * depending on circumstances. For example, attempting to add children to a node type that\n * cannot have children will throw an exception.\n *\n * **This behavior is slightly different from the in the specs**:\n * - unimplemented interfaces: `EventTarget`\n *\n * @class\n * @abstract\n * @param {Symbol} symbol\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n * @see https://dom.spec.whatwg.org/#node\n * @prettierignore\n */\nfunction Node(symbol) {\n\tcheckSymbol(symbol);\n}\n\nNode.prototype = {\n\t/**\n\t * The first child of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tfirstChild: null,\n\t/**\n\t * The last child of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tlastChild: null,\n\t/**\n\t * The previous sibling of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tpreviousSibling: null,\n\t/**\n\t * The next sibling of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tnextSibling: null,\n\t/**\n\t * The parent node of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tparentNode: null,\n\t/**\n\t * The parent element of this node.\n\t *\n\t * @type {Element | null}\n\t */\n\tget parentElement() {\n\t\treturn this.parentNode && this.parentNode.nodeType === this.ELEMENT_NODE ? this.parentNode : null;\n\t},\n\t/**\n\t * The child nodes of this node.\n\t *\n\t * @type {NodeList}\n\t */\n\tchildNodes: null,\n\t/**\n\t * The document object associated with this node.\n\t *\n\t * @type {Document | null}\n\t */\n\townerDocument: null,\n\t/**\n\t * The value of this node.\n\t *\n\t * @type {string | null}\n\t */\n\tnodeValue: null,\n\t/**\n\t * The namespace URI of this node.\n\t *\n\t * @type {string | null}\n\t */\n\tnamespaceURI: null,\n\t/**\n\t * The prefix of the namespace for this node.\n\t *\n\t * @type {string | null}\n\t */\n\tprefix: null,\n\t/**\n\t * The local part of the qualified name of this node.\n\t *\n\t * @type {string | null}\n\t */\n\tlocalName: null,\n\t/**\n\t * The baseURI is currently always `about:blank`,\n\t * since that's what happens when you create a document from scratch.\n\t *\n\t * @type {'about:blank'}\n\t */\n\tbaseURI: 'about:blank',\n\t/**\n\t * Is true if this node is part of a document.\n\t *\n\t * @type {boolean}\n\t */\n\tget isConnected() {\n\t\tvar rootNode = this.getRootNode();\n\t\treturn rootNode && rootNode.nodeType === rootNode.DOCUMENT_NODE;\n\t},\n\t/**\n\t * Checks whether `other` is an inclusive descendant of this node.\n\t *\n\t * @param {Node | null | undefined} other\n\t * The node to check.\n\t * @returns {boolean}\n\t * True if `other` is an inclusive descendant of this node; false otherwise.\n\t * @see https://dom.spec.whatwg.org/#dom-node-contains\n\t */\n\tcontains: function (other) {\n\t\tif (!other) return false;\n\t\tvar parent = other;\n\t\tdo {\n\t\t\tif (this === parent) return true;\n\t\t\tparent = other.parentNode;\n\t\t} while (parent);\n\t\treturn false;\n\t},\n\t/**\n\t * @typedef GetRootNodeOptions\n\t * @property {boolean} [composed=false]\n\t */\n\t/**\n\t * Searches for the root node of this node.\n\t *\n\t * **This behavior is slightly different from the in the specs**:\n\t * - ignores `options.composed`, since `ShadowRoot`s are unsupported, always returns root.\n\t *\n\t * @param {GetRootNodeOptions} [options]\n\t * @returns {Node}\n\t * Root node.\n\t * @see https://dom.spec.whatwg.org/#dom-node-getrootnode\n\t * @see https://dom.spec.whatwg.org/#concept-shadow-including-root\n\t */\n\tgetRootNode: function (options) {\n\t\tvar parent = this;\n\t\tdo {\n\t\t\tif (!parent.parentNode) {\n\t\t\t\treturn parent;\n\t\t\t}\n\t\t\tparent = parent.parentNode;\n\t\t} while (parent);\n\t},\n\t/**\n\t * Checks whether the given node is equal to this node.\n\t *\n\t * @param {Node} [otherNode]\n\t * @see https://dom.spec.whatwg.org/#concept-node-equals\n\t */\n\tisEqualNode: function (otherNode) {\n\t\tif (!otherNode) return false;\n\n\t\tif (this.nodeType !== otherNode.nodeType) return false;\n\n\t\tswitch (this.nodeType) {\n\t\t\tcase this.DOCUMENT_TYPE_NODE:\n\t\t\t\tif (this.name !== otherNode.name) return false;\n\t\t\t\tif (this.publicId !== otherNode.publicId) return false;\n\t\t\t\tif (this.systemId !== otherNode.systemId) return false;\n\t\t\t\tbreak;\n\t\t\tcase this.ELEMENT_NODE:\n\t\t\t\tif (this.namespaceURI !== otherNode.namespaceURI) return false;\n\t\t\t\tif (this.prefix !== otherNode.prefix) return false;\n\t\t\t\tif (this.localName !== otherNode.localName) return false;\n\t\t\t\tif (this.attributes.length !== otherNode.attributes.length) return false;\n\t\t\t\tfor (var i = 0; i < this.attributes.length; i++) {\n\t\t\t\t\tvar attr = this.attributes.item(i);\n\t\t\t\t\tif (!attr.isEqualNode(otherNode.getAttributeNodeNS(attr.namespaceURI, attr.localName))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase this.ATTRIBUTE_NODE:\n\t\t\t\tif (this.namespaceURI !== otherNode.namespaceURI) return false;\n\t\t\t\tif (this.localName !== otherNode.localName) return false;\n\t\t\t\tif (this.value !== otherNode.value) return false;\n\n\t\t\t\tbreak;\n\t\t\tcase this.PROCESSING_INSTRUCTION_NODE:\n\t\t\t\tif (this.target !== otherNode.target || this.data !== otherNode.data) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase this.TEXT_NODE:\n\t\t\tcase this.COMMENT_NODE:\n\t\t\t\tif (this.data !== otherNode.data) return false;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (this.childNodes.length !== otherNode.childNodes.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (var i = 0; i < this.childNodes.length; i++) {\n\t\t\tif (!this.childNodes[i].isEqualNode(otherNode.childNodes[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\t/**\n\t * Checks whether or not the given node is this node.\n\t *\n\t * @param {Node} [otherNode]\n\t */\n\tisSameNode: function (otherNode) {\n\t\treturn this === otherNode;\n\t},\n\t/**\n\t * Inserts a node before a reference node as a child of this node.\n\t *\n\t * @param {Node} newChild\n\t * The new child node to be inserted.\n\t * @param {Node | null} refChild\n\t * The reference node before which newChild will be inserted.\n\t * @returns {Node}\n\t * The new child node successfully inserted.\n\t * @throws {DOMException}\n\t * Throws a DOMException if inserting the node would result in a DOM tree that is not\n\t * well-formed, or if `child` is provided but is not a child of `parent`.\n\t * See {@link _insertBefore} for more details.\n\t * @since Modified in DOM L2\n\t */\n\tinsertBefore: function (newChild, refChild) {\n\t\treturn _insertBefore(this, newChild, refChild);\n\t},\n\t/**\n\t * Replaces an old child node with a new child node within this node.\n\t *\n\t * @param {Node} newChild\n\t * The new node that is to replace the old node.\n\t * If it already exists in the DOM, it is removed from its original position.\n\t * @param {Node} oldChild\n\t * The existing child node to be replaced.\n\t * @returns {Node}\n\t * Returns the replaced child node.\n\t * @throws {DOMException}\n\t * Throws a DOMException if replacing the node would result in a DOM tree that is not\n\t * well-formed, or if `oldChild` is not a child of `this`.\n\t * This can also occur if the pre-replacement validity assertion fails.\n\t * See {@link _insertBefore}, {@link Node.removeChild}, and\n\t * {@link assertPreReplacementValidityInDocument} for more details.\n\t * @see https://dom.spec.whatwg.org/#concept-node-replace\n\t */\n\treplaceChild: function (newChild, oldChild) {\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\t/**\n\t * Removes an existing child node from this node.\n\t *\n\t * @param {Node} oldChild\n\t * The child node to be removed.\n\t * @returns {Node}\n\t * Returns the removed child node.\n\t * @throws {DOMException}\n\t * Throws a DOMException if `oldChild` is not a child of `this`.\n\t * See {@link _removeChild} for more details.\n\t */\n\tremoveChild: function (oldChild) {\n\t\treturn _removeChild(this, oldChild);\n\t},\n\t/**\n\t * Appends a child node to this node.\n\t *\n\t * @param {Node} newChild\n\t * The child node to be appended to this node.\n\t * If it already exists in the DOM, it is removed from its original position.\n\t * @returns {Node}\n\t * Returns the appended child node.\n\t * @throws {DOMException}\n\t * Throws a DOMException if appending the node would result in a DOM tree that is not\n\t * well-formed, or if `newChild` is not a valid Node.\n\t * See {@link insertBefore} for more details.\n\t */\n\tappendChild: function (newChild) {\n\t\treturn this.insertBefore(newChild, null);\n\t},\n\t/**\n\t * Determines whether this node has any child nodes.\n\t *\n\t * @returns {boolean}\n\t * Returns true if this node has any child nodes, and false otherwise.\n\t */\n\thasChildNodes: function () {\n\t\treturn this.firstChild != null;\n\t},\n\t/**\n\t * Creates a copy of the calling node.\n\t *\n\t * @param {boolean} deep\n\t * If true, the contents of the node are recursively copied.\n\t * If false, only the node itself (and its attributes, if it is an element) are copied.\n\t * @returns {Node}\n\t * Returns the newly created copy of the node.\n\t * @throws {DOMException}\n\t * May throw a DOMException if operations within {@link Element#setAttributeNode} or\n\t * {@link Node#appendChild} (which are potentially invoked in this method) do not meet their\n\t * specific constraints.\n\t * @see {@link cloneNode}\n\t */\n\tcloneNode: function (deep) {\n\t\treturn cloneNode(this.ownerDocument || this, this, deep);\n\t},\n\t/**\n\t * Puts the specified node and all of its subtree into a \"normalized\" form. In a normalized\n\t * subtree, no text nodes in the subtree are empty and there are no adjacent text nodes.\n\t *\n\t * Specifically, this method merges any adjacent text nodes (i.e., nodes for which `nodeType`\n\t * is `TEXT_NODE`) into a single node with the combined data. It also removes any empty text\n\t * nodes.\n\t *\n\t * This method operates recursively, so it also normalizes any and all descendent nodes within\n\t * the subtree.\n\t *\n\t * @throws {DOMException}\n\t * May throw a DOMException if operations within removeChild or appendData (which are\n\t * potentially invoked in this method) do not meet their specific constraints.\n\t * @since Modified in DOM Level 2\n\t * @see {@link Node.removeChild}\n\t * @see {@link CharacterData.appendData}\n\t */\n\tnormalize: function () {\n\t\tvar child = this.firstChild;\n\t\twhile (child) {\n\t\t\tvar next = child.nextSibling;\n\t\t\tif (next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE) {\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t} else {\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Checks whether the DOM implementation implements a specific feature and its version.\n\t *\n\t * @deprecated\n\t * Since `DOMImplementation.hasFeature` is deprecated and always returns true.\n\t * @param {string} feature\n\t * The package name of the feature to test. This is the same name that can be passed to the\n\t * method `hasFeature` on `DOMImplementation`.\n\t * @param {string} version\n\t * This is the version number of the package name to test.\n\t * @returns {boolean}\n\t * Returns true in all cases in the current implementation.\n\t * @since Introduced in DOM Level 2\n\t * @see {@link DOMImplementation.hasFeature}\n\t */\n\tisSupported: function (feature, version) {\n\t\treturn this.ownerDocument.implementation.hasFeature(feature, version);\n\t},\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * **This behavior is different from the in the specs**:\n\t * - no node type specific handling\n\t * - uses the internal attribute _nsMap for resolving namespaces that is updated when changing attributes\n\t *\n\t * @param {string | null} namespaceURI\n\t * The namespace URI for which to find the associated prefix.\n\t * @returns {string | null}\n\t * The associated prefix, if found; otherwise, null.\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t * @prettierignore\n\t */\n\tlookupPrefix: function (namespaceURI) {\n\t\tvar el = this;\n\t\twhile (el) {\n\t\t\tvar map = el._nsMap;\n\t\t\t//console.dir(map)\n\t\t\tif (map) {\n\t\t\t\tfor (var n in map) {\n\t\t\t\t\tif (hasOwn(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\treturn n;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tel = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n\t\t}\n\t\treturn null;\n\t},\n\t/**\n\t * This function is used to look up the namespace URI associated with the given prefix,\n\t * starting from this node.\n\t *\n\t * **This behavior is different from the in the specs**:\n\t * - no node type specific handling\n\t * - uses the internal attribute _nsMap for resolving namespaces that is updated when changing attributes\n\t *\n\t * @param {string | null} prefix\n\t * The prefix for which to find the associated namespace URI.\n\t * @returns {string | null}\n\t * The associated namespace URI, if found; otherwise, null.\n\t * @since DOM Level 3\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupnamespaceuri\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespaceURI\n\t * @prettierignore\n\t */\n\tlookupNamespaceURI: function (prefix) {\n\t\tvar el = this;\n\t\twhile (el) {\n\t\t\tvar map = el._nsMap;\n\t\t\t//console.dir(map)\n\t\t\tif (map) {\n\t\t\t\tif (hasOwn(map, prefix)) {\n\t\t\t\t\treturn map[prefix];\n\t\t\t\t}\n\t\t\t}\n\t\t\tel = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n\t\t}\n\t\treturn null;\n\t},\n\t/**\n\t * Determines whether the given namespace URI is the default namespace.\n\t *\n\t * The function works by looking up the prefix associated with the given namespace URI. If no\n\t * prefix is found (i.e., the namespace URI is not registered in the namespace map of this\n\t * node or any of its ancestors), it returns `true`, implying the namespace URI is considered\n\t * the default.\n\t *\n\t * **This behavior is different from the in the specs**:\n\t * - no node type specific handling\n\t * - uses the internal attribute _nsMap for resolving namespaces that is updated when changing attributes\n\t *\n\t * @param {string | null} namespaceURI\n\t * The namespace URI to be checked.\n\t * @returns {boolean}\n\t * Returns true if the given namespace URI is the default namespace, false otherwise.\n\t * @since DOM Level 3\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isDefaultNamespace\n\t * @see https://dom.spec.whatwg.org/#dom-node-isdefaultnamespace\n\t * @prettierignore\n\t */\n\tisDefaultNamespace: function (namespaceURI) {\n\t\tvar prefix = this.lookupPrefix(namespaceURI);\n\t\treturn prefix == null;\n\t},\n\t/**\n\t * Compares the reference node with a node with regard to their position in the document and\n\t * according to the document order.\n\t *\n\t * @param {Node} other\n\t * The node to compare the reference node to.\n\t * @returns {number}\n\t * Returns how the node is positioned relatively to the reference node according to the\n\t * bitmask. 0 if reference node and given node are the same.\n\t * @since DOM Level 3\n\t * @see https://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Node3-compare\n\t * @see https://dom.spec.whatwg.org/#dom-node-comparedocumentposition\n\t */\n\tcompareDocumentPosition: function (other) {\n\t\tif (this === other) return 0;\n\t\tvar node1 = other;\n\t\tvar node2 = this;\n\t\tvar attr1 = null;\n\t\tvar attr2 = null;\n\t\tif (node1 instanceof Attr) {\n\t\t\tattr1 = node1;\n\t\t\tnode1 = attr1.ownerElement;\n\t\t}\n\t\tif (node2 instanceof Attr) {\n\t\t\tattr2 = node2;\n\t\t\tnode2 = attr2.ownerElement;\n\t\t\tif (attr1 && node1 && node2 === node1) {\n\t\t\t\tfor (var i = 0, attr; (attr = node2.attributes[i]); i++) {\n\t\t\t\t\tif (attr === attr1)\n\t\t\t\t\t\treturn DocumentPosition.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t\t\t\tif (attr === attr2)\n\t\t\t\t\t\treturn DocumentPosition.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!node1 || !node2 || node2.ownerDocument !== node1.ownerDocument) {\n\t\t\treturn (\n\t\t\t\tDocumentPosition.DOCUMENT_POSITION_DISCONNECTED +\n\t\t\t\tDocumentPosition.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC +\n\t\t\t\t(docGUID(node2.ownerDocument) > docGUID(node1.ownerDocument)\n\t\t\t\t\t? DocumentPosition.DOCUMENT_POSITION_FOLLOWING\n\t\t\t\t\t: DocumentPosition.DOCUMENT_POSITION_PRECEDING)\n\t\t\t);\n\t\t}\n\t\tif (attr2 && node1 === node2) {\n\t\t\treturn DocumentPosition.DOCUMENT_POSITION_CONTAINS + DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t}\n\t\tif (attr1 && node1 === node2) {\n\t\t\treturn DocumentPosition.DOCUMENT_POSITION_CONTAINED_BY + DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t}\n\n\t\tvar chain1 = [];\n\t\tvar ancestor1 = node1.parentNode;\n\t\twhile (ancestor1) {\n\t\t\tif (!attr2 && ancestor1 === node2) {\n\t\t\t\treturn DocumentPosition.DOCUMENT_POSITION_CONTAINED_BY + DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t\t}\n\t\t\tchain1.push(ancestor1);\n\t\t\tancestor1 = ancestor1.parentNode;\n\t\t}\n\t\tchain1.reverse();\n\n\t\tvar chain2 = [];\n\t\tvar ancestor2 = node2.parentNode;\n\t\twhile (ancestor2) {\n\t\t\tif (!attr1 && ancestor2 === node1) {\n\t\t\t\treturn DocumentPosition.DOCUMENT_POSITION_CONTAINS + DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t\t}\n\t\t\tchain2.push(ancestor2);\n\t\t\tancestor2 = ancestor2.parentNode;\n\t\t}\n\t\tchain2.reverse();\n\n\t\tvar ca = commonAncestor(chain1, chain2);\n\t\tfor (var n in ca.childNodes) {\n\t\t\tvar child = ca.childNodes[n];\n\t\t\tif (child === node2) return DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t\tif (child === node1) return DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t\tif (chain2.indexOf(child) >= 0) return DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t\tif (chain1.indexOf(child) >= 0) return DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t}\n\t\treturn 0;\n\t},\n};\n\n/**\n * Encodes special XML characters to their corresponding entities.\n *\n * @param {string} c\n * The character to be encoded.\n * @returns {string}\n * The encoded character.\n * @private\n */\nfunction _xmlEncoder(c) {\n\treturn (\n\t\t(c == '<' && '&lt;') || (c == '>' && '&gt;') || (c == '&' && '&amp;') || (c == '\"' && '&quot;') || '&#' + c.charCodeAt() + ';'\n\t);\n}\n\ncopy(NodeType, Node);\ncopy(NodeType, Node.prototype);\ncopy(DocumentPosition, Node);\ncopy(DocumentPosition, Node.prototype);\n\n/**\n * @param callback\n * Return true for continue,false for break.\n * @returns\n * boolean true: break visit;\n */\nfunction _visitNode(node, callback) {\n\tif (callback(node)) {\n\t\treturn true;\n\t}\n\tif ((node = node.firstChild)) {\n\t\tdo {\n\t\t\tif (_visitNode(node, callback)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} while ((node = node.nextSibling));\n\t}\n}\n\n/**\n * @typedef DocumentOptions\n * @property {string} [contentType=MIME_TYPE.XML_APPLICATION]\n */\n/**\n * The Document interface describes the common properties and methods for any kind of document.\n *\n * It should usually be created using `new DOMImplementation().createDocument(...)`\n * or `new DOMImplementation().createHTMLDocument(...)`.\n *\n * The constructor is considered a private API and offers to initially set the `contentType`\n * property via it's options parameter.\n *\n * @class\n * @param {Symbol} symbol\n * @param {DocumentOptions} [options]\n * @augments Node\n * @private\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document\n * @see https://dom.spec.whatwg.org/#interface-document\n */\nfunction Document(symbol, options) {\n\tcheckSymbol(symbol);\n\n\tvar opt = options || {};\n\tthis.ownerDocument = this;\n\t/**\n\t * The mime type of the document is determined at creation time and can not be modified.\n\t *\n\t * @type {string}\n\t * @see https://dom.spec.whatwg.org/#concept-document-content-type\n\t * @see {@link DOMImplementation}\n\t * @see {@link MIME_TYPE}\n\t * @readonly\n\t */\n\tthis.contentType = opt.contentType || MIME_TYPE.XML_APPLICATION;\n\t/**\n\t * @type {'html' | 'xml'}\n\t * @see https://dom.spec.whatwg.org/#concept-document-type\n\t * @see {@link DOMImplementation}\n\t * @readonly\n\t */\n\tthis.type = isHTMLMimeType(this.contentType) ? 'html' : 'xml';\n}\n\n/**\n * Updates the namespace mapping of an element when a new attribute is added.\n *\n * @param {Document} doc\n * The document that the element belongs to.\n * @param {Element} el\n * The element to which the attribute is being added.\n * @param {Attr} newAttr\n * The new attribute being added.\n * @private\n */\nfunction _onAddAttribute(doc, el, newAttr) {\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI;\n\tif (ns === NAMESPACE.XMLNS) {\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix ? newAttr.localName : ''] = newAttr.value;\n\t}\n}\n\n/**\n * Updates the namespace mapping of an element when an attribute is removed.\n *\n * @param {Document} doc\n * The document that the element belongs to.\n * @param {Element} el\n * The element from which the attribute is being removed.\n * @param {Attr} newAttr\n * The attribute being removed.\n * @param {boolean} remove\n * Indicates whether the attribute is to be removed.\n * @private\n */\nfunction _onRemoveAttribute(doc, el, newAttr, remove) {\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI;\n\tif (ns === NAMESPACE.XMLNS) {\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix ? newAttr.localName : ''];\n\t}\n}\n\n/**\n * Updates `parent.childNodes`, adjusting the indexed items and its `length`.\n * If `newChild` is provided and has no nextSibling, it will be appended.\n * Otherwise, it's assumed that an item has been removed or inserted,\n * and `parent.firstNode` and its `.nextSibling` to re-indexing all child nodes of `parent`.\n *\n * @param {Document} doc\n * The parent document of `el`.\n * @param {Node} parent\n * The parent node whose childNodes list needs to be updated.\n * @param {Node} [newChild]\n * The new child node to be appended. If not provided, the function assumes a node has been\n * removed.\n * @private\n */\nfunction _onUpdateChild(doc, parent, newChild) {\n\tif (doc && doc._inc) {\n\t\tdoc._inc++;\n\t\tvar childNodes = parent.childNodes;\n\t\t// assumes nextSibling and previousSibling were already configured upfront\n\t\tif (newChild && !newChild.nextSibling) {\n\t\t\t// if an item has been appended, we only need to update the last index and the length\n\t\t\tchildNodes[childNodes.length++] = newChild;\n\t\t} else {\n\t\t\t// otherwise we need to reindex all items,\n\t\t\t// which can take a while when processing nodes with a lot of children\n\t\t\tvar child = parent.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tchildNodes[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tchildNodes.length = i;\n\t\t\tdelete childNodes[childNodes.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @param {Node} parentNode\n * The parent node from which the child node is to be removed.\n * @param {Node} child\n * The child node to be removed from the parentNode.\n * @returns {Node}\n * Returns the child node that was removed.\n * @throws {DOMException}\n * With code:\n * - {@link DOMException.NOT_FOUND_ERR} If the parentNode is not the parent of the child node.\n * @private\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n */\nfunction _removeChild(parentNode, child) {\n\tif (parentNode !== child.parentNode) {\n\t\tthrow new DOMException(DOMException.NOT_FOUND_ERR, \"child's parent is not parent\");\n\t}\n\tvar oldPreviousSibling = child.previousSibling;\n\tvar oldNextSibling = child.nextSibling;\n\tif (oldPreviousSibling) {\n\t\toldPreviousSibling.nextSibling = oldNextSibling;\n\t} else {\n\t\tparentNode.firstChild = oldNextSibling;\n\t}\n\tif (oldNextSibling) {\n\t\toldNextSibling.previousSibling = oldPreviousSibling;\n\t} else {\n\t\tparentNode.lastChild = oldPreviousSibling;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.CDATA_SECTION_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.DOCUMENT_TYPE_NODE ||\n\t\t\tnode.nodeType === Node.ELEMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE ||\n\t\t\tnode.nodeType === Node.TEXT_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc\n * The document node.\n * @param {Node} child\n * The node that would become the nextSibling if the element would be inserted.\n * @returns {boolean}\n * `true` if an element can be inserted before child.\n * @private\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc\n * The document node.\n * @param {Node} child\n * The node that would become the nextSibling if the element would be inserted.\n * @returns {boolean}\n * `true` if an element can be inserted before child.\n * @private\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Asserts pre-insertion validity of a node into a parent before a child.\n * Throws errors for invalid node combinations that would result in an ill-formed DOM.\n *\n * @param {Node} parent\n * The parent node to insert `node` into.\n * @param {Node} node\n * The node to insert.\n * @param {Node | null} child\n * The node that should become the `nextSibling` of `node`. If null, no sibling is considered.\n * @throws {DOMException}\n * With code:\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `parent` is not a Document,\n * DocumentFragment, or Element node.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is a host-including inclusive\n * ancestor of `parent`. (Currently not implemented)\n * - {@link DOMException.NOT_FOUND_ERR} If `child` is non-null and its `parent` is not\n * `parent`.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is not a DocumentFragment,\n * DocumentType, Element, or CharacterData node.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If either `node` is a Text node and `parent` is\n * a document, or if `node` is a doctype and `parent` is not a document.\n * @private\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(DOMException.NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tDOMException.HIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * Asserts pre-insertion validity of a node into a document before a child.\n * Throws errors for invalid node combinations that would result in an ill-formed DOM.\n *\n * @param {Document} parent\n * The parent node to insert `node` into.\n * @param {Node} node\n * The node to insert.\n * @param {Node | undefined} child\n * The node that should become the `nextSibling` of `node`. If undefined, no sibling is\n * considered.\n * @returns {Node}\n * @throws {DOMException}\n * With code:\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is a DocumentFragment with more than\n * one element child or has a Text node child.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is a DocumentFragment with one\n * element child and either `parent` has an element child, `child` is a doctype, or `child` is\n * non-null and a doctype is following `child`.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is an Element and `parent` has an\n * element child, `child` is a doctype, or `child` is non-null and a doctype is following\n * `child`.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is a DocumentType and `parent` has a\n * doctype child, `child` is non-null and an element is preceding `child`, or `child` is null\n * and `parent` has an element child.\n * @private\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @param {Document} parent\n * The parent node to insert `node` into.\n * @param {Node} node\n * The node to insert.\n * @param {Node | undefined} child\n * the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws {DOMException}\n * For several node combinations that would create a DOM that is not well-formed.\n * @throws {DOMException}\n * If `child` is provided but is not a child of `parent`.\n * @private\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * Inserts a node into a parent node before a child node.\n *\n * @param {Node} parent\n * The parent node to insert the node into.\n * @param {Node} node\n * The node to insert into the parent.\n * @param {Node | null} child\n * The node that should become the next sibling of the node.\n * If null, the function inserts the node at the end of the children of the parent node.\n * @param {Function} [_inDocumentAssertion]\n * An optional function to check pre-insertion validity if parent is a document node.\n * Defaults to {@link assertPreInsertionValidityInDocument}\n * @returns {Node}\n * Returns the inserted node.\n * @throws {DOMException}\n * Throws a DOMException if inserting the node would result in a DOM tree that is not\n * well-formed. See {@link assertPreInsertionValidity1to5},\n * {@link assertPreInsertionValidityInDocument}.\n * @throws {DOMException}\n * Throws a DOMException if child is provided but is not a child of the parent. See\n * {@link Node.removeChild}\n * @private\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif (cp) {\n\t\tcp.removeChild(node); //remove and update\n\t}\n\tif (node.nodeType === DOCUMENT_FRAGMENT_NODE) {\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t} else {\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\tif (pre) {\n\t\tpre.nextSibling = newFirst;\n\t} else {\n\t\tparent.firstChild = newFirst;\n\t}\n\tif (child == null) {\n\t\tparent.lastChild = newLast;\n\t} else {\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo {\n\t\tnewFirst.parentNode = parent;\n\t} while (newFirst !== newLast && (newFirst = newFirst.nextSibling));\n\t_onUpdateChild(parent.ownerDocument || parent, parent, node);\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\n\treturn node;\n}\n\nDocument.prototype = {\n\t/**\n\t * The implementation that created this document.\n\t *\n\t * @type DOMImplementation\n\t * @readonly\n\t */\n\timplementation: null,\n\tnodeName: '#document',\n\tnodeType: DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @type DocumentType\n\t * @readonly\n\t */\n\tdoctype: null,\n\tdocumentElement: null,\n\t_inc: 1,\n\n\tinsertBefore: function (newChild, refChild) {\n\t\t//raises\n\t\tif (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile (child) {\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child, refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild: function (oldChild) {\n\t\tvar removed = _removeChild(this, oldChild);\n\t\tif (removed === this.documentElement) {\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn removed;\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode: function (importedNode, deep) {\n\t\treturn importNode(this, importedNode, deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById: function (id) {\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement, function (node) {\n\t\t\tif (node.nodeType == ELEMENT_NODE) {\n\t\t\t\tif (node.getAttribute('id') == id) {\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * Creates a new `Element` that is owned by this `Document`.\n\t * In HTML Documents `localName` is the lower cased `tagName`,\n\t * otherwise no transformation is being applied.\n\t * When `contentType` implies the HTML namespace, it will be set as `namespaceURI`.\n\t *\n\t * __This implementation differs from the specification:__ - The provided name is not checked\n\t * against the `Name` production,\n\t * so no related error will be thrown.\n\t * - There is no interface `HTMLElement`, it is always an `Element`.\n\t * - There is no support for a second argument to indicate using custom elements.\n\t *\n\t * @param {string} tagName\n\t * @returns {Element}\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement\n\t * @see https://dom.spec.whatwg.org/#dom-document-createelement\n\t * @see https://dom.spec.whatwg.org/#concept-create-element\n\t */\n\tcreateElement: function (tagName) {\n\t\tvar node = new Element(PDC);\n\t\tnode.ownerDocument = this;\n\t\tif (this.type === 'html') {\n\t\t\ttagName = tagName.toLowerCase();\n\t\t}\n\t\tif (hasDefaultHTMLNamespace(this.contentType)) {\n\t\t\tnode.namespaceURI = NAMESPACE.HTML;\n\t\t}\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs = (node.attributes = new NamedNodeMap());\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t/**\n\t * @returns {DocumentFragment}\n\t */\n\tcreateDocumentFragment: function () {\n\t\tvar node = new DocumentFragment(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\t/**\n\t * @param {string} data\n\t * @returns {Text}\n\t */\n\tcreateTextNode: function (data) {\n\t\tvar node = new Text(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\t/**\n\t * @param {string} data\n\t * @returns {Comment}\n\t */\n\tcreateComment: function (data) {\n\t\tvar node = new Comment(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\t/**\n\t * @param {string} data\n\t * @returns {CDATASection}\n\t */\n\tcreateCDATASection: function (data) {\n\t\tvar node = new CDATASection(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\t/**\n\t * @param {string} target\n\t * @param {string} data\n\t * @returns {ProcessingInstruction}\n\t */\n\tcreateProcessingInstruction: function (target, data) {\n\t\tvar node = new ProcessingInstruction(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.nodeName = node.target = target;\n\t\tnode.nodeValue = node.data = data;\n\t\treturn node;\n\t},\n\t/**\n\t * Creates an `Attr` node that is owned by this document.\n\t * In HTML Documents `localName` is the lower cased `name`,\n\t * otherwise no transformation is being applied.\n\t *\n\t * __This implementation differs from the specification:__ - The provided name is not checked\n\t * against the `Name` production,\n\t * so no related error will be thrown.\n\t *\n\t * @param {string} name\n\t * @returns {Attr}\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/createAttribute\n\t * @see https://dom.spec.whatwg.org/#dom-document-createattribute\n\t */\n\tcreateAttribute: function (name) {\n\t\tif (!g.QName_exact.test(name)) {\n\t\t\tthrow new DOMException(DOMException.INVALID_CHARACTER_ERR, 'invalid character in name \"' + name + '\"');\n\t\t}\n\t\tif (this.type === 'html') {\n\t\t\tname = name.toLowerCase();\n\t\t}\n\t\treturn this._createAttribute(name);\n\t},\n\t_createAttribute: function (name) {\n\t\tvar node = new Attr(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.name = name;\n\t\tnode.nodeName = name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\t/**\n\t * Creates an EntityReference object.\n\t * The current implementation does not fill the `childNodes` with those of the corresponding\n\t * `Entity`\n\t *\n\t * @deprecated\n\t * In DOM Level 4.\n\t * @param {string} name\n\t * The name of the entity to reference. No namespace well-formedness checks are performed.\n\t * @returns {EntityReference}\n\t * @throws {DOMException}\n\t * With code `INVALID_CHARACTER_ERR` when `name` is not valid.\n\t * @throws {DOMException}\n\t * with code `NOT_SUPPORTED_ERR` when the document is of type `html`\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-392B75AE\n\t */\n\tcreateEntityReference: function (name) {\n\t\tif (!g.Name.test(name)) {\n\t\t\tthrow new DOMException(DOMException.INVALID_CHARACTER_ERR, 'not a valid xml name \"' + name + '\"');\n\t\t}\n\t\tif (this.type === 'html') {\n\t\t\tthrow new DOMException('document is an html document', DOMExceptionName.NotSupportedError);\n\t\t}\n\n\t\tvar node = new EntityReference(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.nodeName = name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\t/**\n\t * @param {string} namespaceURI\n\t * @param {string} qualifiedName\n\t * @returns {Element}\n\t */\n\tcreateElementNS: function (namespaceURI, qualifiedName) {\n\t\tvar validated = validateAndExtract(namespaceURI, qualifiedName);\n\t\tvar node = new Element(PDC);\n\t\tvar attrs = (node.attributes = new NamedNodeMap());\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = validated[0];\n\t\tnode.prefix = validated[1];\n\t\tnode.localName = validated[2];\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\t/**\n\t * @param {string} namespaceURI\n\t * @param {string} qualifiedName\n\t * @returns {Attr}\n\t */\n\tcreateAttributeNS: function (namespaceURI, qualifiedName) {\n\t\tvar validated = validateAndExtract(namespaceURI, qualifiedName);\n\t\tvar node = new Attr(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.specified = true;\n\t\tnode.namespaceURI = validated[0];\n\t\tnode.prefix = validated[1];\n\t\tnode.localName = validated[2];\n\t\treturn node;\n\t},\n};\n_extends(Document, Node);\n\nfunction Element(symbol) {\n\tcheckSymbol(symbol);\n\n\tthis._nsMap = Object.create(null);\n}\nElement.prototype = {\n\tnodeType: ELEMENT_NODE,\n\t/**\n\t * The attributes of this element.\n\t *\n\t * @type {NamedNodeMap | null}\n\t */\n\tattributes: null,\n\tgetQualifiedName: function () {\n\t\treturn this.prefix ? this.prefix + ':' + this.localName : this.localName;\n\t},\n\t_isInHTMLDocumentAndNamespace: function () {\n\t\treturn this.ownerDocument.type === 'html' && this.namespaceURI === NAMESPACE.HTML;\n\t},\n\t/**\n\t * Implementaton of Level2 Core function hasAttributes.\n\t *\n\t * @returns {boolean}\n\t * True if attribute list is not empty.\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/#core-ID-NodeHasAttrs\n\t */\n\thasAttributes: function () {\n\t\treturn !!(this.attributes && this.attributes.length);\n\t},\n\thasAttribute: function (name) {\n\t\treturn !!this.getAttributeNode(name);\n\t},\n\t/**\n\t * Returns elementâ€™s first attribute whose qualified name is `name`, and `null`\n\t * if there is no such attribute.\n\t *\n\t * @param {string} name\n\t * @returns {string | null}\n\t */\n\tgetAttribute: function (name) {\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr ? attr.value : null;\n\t},\n\tgetAttributeNode: function (name) {\n\t\tif (this._isInHTMLDocumentAndNamespace()) {\n\t\t\tname = name.toLowerCase();\n\t\t}\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\t/**\n\t * Sets the value of elementâ€™s first attribute whose qualified name is qualifiedName to value.\n\t *\n\t * @param {string} name\n\t * @param {string} value\n\t */\n\tsetAttribute: function (name, value) {\n\t\tif (this._isInHTMLDocumentAndNamespace()) {\n\t\t\tname = name.toLowerCase();\n\t\t}\n\t\tvar attr = this.getAttributeNode(name);\n\t\tif (attr) {\n\t\t\tattr.value = attr.nodeValue = '' + value;\n\t\t} else {\n\t\t\tattr = this.ownerDocument._createAttribute(name);\n\t\t\tattr.value = attr.nodeValue = '' + value;\n\t\t\tthis.setAttributeNode(attr);\n\t\t}\n\t},\n\tremoveAttribute: function (name) {\n\t\tvar attr = this.getAttributeNode(name);\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\tsetAttributeNode: function (newAttr) {\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS: function (newAttr) {\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode: function (oldAttr) {\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS: function (namespaceURI, localName) {\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS: function (namespaceURI, localName) {\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName) != null;\n\t},\n\t/**\n\t * Returns elementâ€™s attribute whose namespace is `namespaceURI` and local name is\n\t * `localName`,\n\t * or `null` if there is no such attribute.\n\t *\n\t * @param {string} namespaceURI\n\t * @param {string} localName\n\t * @returns {string | null}\n\t */\n\tgetAttributeNS: function (namespaceURI, localName) {\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr ? attr.value : null;\n\t},\n\t/**\n\t * Sets the value of elementâ€™s attribute whose namespace is `namespaceURI` and local name is\n\t * `localName` to value.\n\t *\n\t * @param {string} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {string} value\n\t * @see https://dom.spec.whatwg.org/#dom-element-setattributens\n\t */\n\tsetAttributeNS: function (namespaceURI, qualifiedName, value) {\n\t\tvar validated = validateAndExtract(namespaceURI, qualifiedName);\n\t\tvar localName = validated[2];\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\tif (attr) {\n\t\t\tattr.value = attr.nodeValue = '' + value;\n\t\t} else {\n\t\t\tattr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\t\tattr.value = attr.nodeValue = '' + value;\n\t\t\tthis.setAttributeNode(attr);\n\t\t}\n\t},\n\tgetAttributeNodeNS: function (namespaceURI, localName) {\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\t/**\n\t * Returns a LiveNodeList of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classNames` is an empty string or only contains HTML white space\n\t * characters.\n\t *\n\t * Warning: This returns a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames\n\t * Is a string representing the class name(s) to match; multiple class names are separated by\n\t * (ASCII-)whitespace.\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function (classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames);\n\t\treturn new LiveNodeList(this, function (base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base, function (node) {\n\t\t\t\t\tif (node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class');\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames);\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t/**\n\t * Returns a LiveNodeList of elements with the given qualifiedName.\n\t * Searching for all descendants can be done by passing `*` as `qualifiedName`.\n\t *\n\t * All descendants of the specified element are searched, but not the element itself.\n\t * The returned list is live, which means it updates itself with the DOM tree automatically.\n\t * Therefore, there is no need to call `Element.getElementsByTagName()`\n\t * with the same element and arguments repeatedly if the DOM changes in between calls.\n\t *\n\t * When called on an HTML element in an HTML document,\n\t * `getElementsByTagName` lower-cases the argument before searching for it.\n\t * This is undesirable when trying to match camel-cased SVG elements (such as\n\t * `<linearGradient>`) in an HTML document.\n\t * Instead, use `Element.getElementsByTagNameNS()`,\n\t * which preserves the capitalization of the tag name.\n\t *\n\t * `Element.getElementsByTagName` is similar to `Document.getElementsByTagName()`,\n\t * except that it only searches for elements that are descendants of the specified element.\n\t *\n\t * @param {string} qualifiedName\n\t * @returns {LiveNodeList}\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbytagname\n\t */\n\tgetElementsByTagName: function (qualifiedName) {\n\t\tvar isHTMLDocument = (this.nodeType === DOCUMENT_NODE ? this : this.ownerDocument).type === 'html';\n\t\tvar lowerQualifiedName = qualifiedName.toLowerCase();\n\t\treturn new LiveNodeList(this, function (base) {\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base, function (node) {\n\t\t\t\tif (node === base || node.nodeType !== ELEMENT_NODE) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (qualifiedName === '*') {\n\t\t\t\t\tls.push(node);\n\t\t\t\t} else {\n\t\t\t\t\tvar nodeQualifiedName = node.getQualifiedName();\n\t\t\t\t\tvar matchingQName = isHTMLDocument && node.namespaceURI === NAMESPACE.HTML ? lowerQualifiedName : qualifiedName;\n\t\t\t\t\tif (nodeQualifiedName === matchingQName) {\n\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS: function (namespaceURI, localName) {\n\t\treturn new LiveNodeList(this, function (base) {\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base, function (node) {\n\t\t\t\tif (\n\t\t\t\t\tnode !== base &&\n\t\t\t\t\tnode.nodeType === ELEMENT_NODE &&\n\t\t\t\t\t(namespaceURI === '*' || node.namespaceURI === namespaceURI) &&\n\t\t\t\t\t(localName === '*' || node.localName == localName)\n\t\t\t\t) {\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n};\nDocument.prototype.getElementsByClassName = Element.prototype.getElementsByClassName;\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n_extends(Element, Node);\nfunction Attr(symbol) {\n\tcheckSymbol(symbol);\n\n\tthis.namespaceURI = null;\n\tthis.prefix = null;\n\tthis.ownerElement = null;\n}\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr, Node);\n\nfunction CharacterData(symbol) {\n\tcheckSymbol(symbol);\n}\nCharacterData.prototype = {\n\tdata: '',\n\tsubstringData: function (offset, count) {\n\t\treturn this.data.substring(offset, offset + count);\n\t},\n\tappendData: function (text) {\n\t\ttext = this.data + text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function (offset, text) {\n\t\tthis.replaceData(offset, 0, text);\n\t},\n\tdeleteData: function (offset, count) {\n\t\tthis.replaceData(offset, count, '');\n\t},\n\treplaceData: function (offset, count, text) {\n\t\tvar start = this.data.substring(0, offset);\n\t\tvar end = this.data.substring(offset + count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n};\n_extends(CharacterData, Node);\nfunction Text(symbol) {\n\tcheckSymbol(symbol);\n}\nText.prototype = {\n\tnodeName: '#text',\n\tnodeType: TEXT_NODE,\n\tsplitText: function (offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif (this.parentNode) {\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t},\n};\n_extends(Text, CharacterData);\nfunction Comment(symbol) {\n\tcheckSymbol(symbol);\n}\nComment.prototype = {\n\tnodeName: '#comment',\n\tnodeType: COMMENT_NODE,\n};\n_extends(Comment, CharacterData);\n\nfunction CDATASection(symbol) {\n\tcheckSymbol(symbol);\n}\nCDATASection.prototype = {\n\tnodeName: '#cdata-section',\n\tnodeType: CDATA_SECTION_NODE,\n};\n_extends(CDATASection, Text);\n\nfunction DocumentType(symbol) {\n\tcheckSymbol(symbol);\n}\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType, Node);\n\nfunction Notation(symbol) {\n\tcheckSymbol(symbol);\n}\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation, Node);\n\nfunction Entity(symbol) {\n\tcheckSymbol(symbol);\n}\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity, Node);\n\nfunction EntityReference(symbol) {\n\tcheckSymbol(symbol);\n}\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference, Node);\n\nfunction DocumentFragment(symbol) {\n\tcheckSymbol(symbol);\n}\nDocumentFragment.prototype.nodeName = '#document-fragment';\nDocumentFragment.prototype.nodeType = DOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment, Node);\n\nfunction ProcessingInstruction(symbol) {\n\tcheckSymbol(symbol);\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction, CharacterData);\nfunction XMLSerializer() {}\nXMLSerializer.prototype.serializeToString = function (node, nodeFilter) {\n\treturn nodeSerializeToString.call(node, nodeFilter);\n};\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(nodeFilter) {\n\tvar buf = [];\n\tvar refNode = (this.nodeType === DOCUMENT_NODE && this.documentElement) || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif (uri && prefix == null) {\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif (prefix == null) {\n\t\t\tvar visibleNamespaces = [\n\t\t\t\t{ namespace: uri, prefix: null },\n\t\t\t\t//{namespace:uri,prefix:''}\n\t\t\t];\n\t\t}\n\t}\n\tserializeToString(this, buf, nodeFilter, visibleNamespaces);\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif ((prefix === 'xml' && uri === NAMESPACE.XML) || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length;\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Literal whitespace other than space that appear in attribute values are serialized as\n * their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces).\n *\n * Well-formed constraint: No < in Attribute Values:\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n *\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n * @prettierignore\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"');\n}\n\nfunction serializeToString(node, buf, nodeFilter, visibleNamespaces) {\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\tvar doc = node.nodeType === DOCUMENT_NODE ? node : node.ownerDocument;\n\tvar isHTML = doc.type === 'html';\n\n\tif (nodeFilter) {\n\t\tnode = nodeFilter(node);\n\t\tif (node) {\n\t\t\tif (typeof node == 'string') {\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch (node.nodeType) {\n\t\tcase ELEMENT_NODE:\n\t\t\tvar attrs = node.attributes;\n\t\t\tvar len = attrs.length;\n\t\t\tvar child = node.firstChild;\n\t\t\tvar nodeName = node.tagName;\n\n\t\t\tvar prefixedNodeName = nodeName;\n\t\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\t\tvar defaultNS;\n\t\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\t\tdefaultNS = attrs.item(ai).value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!defaultNS) {\n\t\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\t\tvar namespace = visibleNamespaces[nsi];\n\t\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\t\tdefaultNS = namespace.namespace;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\t\tvar namespace = visibleNamespaces[nsi];\n\t\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbuf.push('<', prefixedNodeName);\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t// add namespaces for attributes\n\t\t\t\tvar attr = attrs.item(i);\n\t\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\t\tvisibleNamespaces.push({\n\t\t\t\t\t\tprefix: attr.localName,\n\t\t\t\t\t\tnamespace: attr.value,\n\t\t\t\t\t});\n\t\t\t\t} else if (attr.nodeName == 'xmlns') {\n\t\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar attr = attrs.item(i);\n\t\t\t\tif (needNamespaceDefine(attr, isHTML, visibleNamespaces)) {\n\t\t\t\t\tvar prefix = attr.prefix || '';\n\t\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : 'xmlns', uri);\n\t\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace: uri });\n\t\t\t\t}\n\t\t\t\tserializeToString(attr, buf, nodeFilter, visibleNamespaces);\n\t\t\t}\n\n\t\t\t// add namespace for current node\n\t\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = node.prefix || '';\n\t\t\t\tvar uri = node.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : 'xmlns', uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace: uri });\n\t\t\t}\n\t\t\t// in XML elements can be closed when they have no children\n\t\t\tvar canCloseTag = !child;\n\t\t\tif (canCloseTag && (isHTML || node.namespaceURI === NAMESPACE.HTML)) {\n\t\t\t\t// in HTML (doc or ns) only void elements can be closed right away\n\t\t\t\tcanCloseTag = isHTMLVoidElement(nodeName);\n\t\t\t}\n\t\t\tif (canCloseTag) {\n\t\t\t\tbuf.push('/>');\n\t\t\t} else {\n\t\t\t\tbuf.push('>');\n\t\t\t\t//if is cdata child node\n\t\t\t\tif (isHTML && isHTMLRawTextElement(nodeName)) {\n\t\t\t\t\twhile (child) {\n\t\t\t\t\t\tif (child.data) {\n\t\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tserializeToString(child, buf, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twhile (child) {\n\t\t\t\t\t\tserializeToString(child, buf, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbuf.push('</', prefixedNodeName, '>');\n\t\t\t}\n\t\t\t// remove added visible namespaces\n\t\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\t\treturn;\n\t\tcase DOCUMENT_NODE:\n\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\tvar child = node.firstChild;\n\t\t\twhile (child) {\n\t\t\t\tserializeToString(child, buf, nodeFilter, visibleNamespaces.slice());\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\treturn;\n\t\tcase ATTRIBUTE_NODE:\n\t\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\t\tcase TEXT_NODE:\n\t\t\t/*\n\t\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t\t * except when used as markup delimiters, or within a comment, a processing instruction,\n\t\t\t * or a CDATA section.\n\t\t\t * If they are needed elsewhere, they must be escaped using either numeric character\n\t\t\t * references or the strings `&amp;` and `&lt;` respectively.\n\t\t\t * The right angle bracket (>) may be represented using the string \" &gt; \",\n\t\t\t * and must, for compatibility, be escaped using either `&gt;`,\n\t\t\t * or a character reference when it appears in the string `]]>` in content,\n\t\t\t * when that string is not marking the end of a CDATA section.\n\t\t\t *\n\t\t\t * In the content of elements, character data is any string of characters which does not\n\t\t\t * contain the start-delimiter of any markup and does not include the CDATA-section-close\n\t\t\t * delimiter, `]]>`.\n\t\t\t *\n\t\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t\t */\n\t\t\treturn buf.push(node.data.replace(/[<&>]/g, _xmlEncoder));\n\t\tcase CDATA_SECTION_NODE:\n\t\t\treturn buf.push(g.CDATA_START, node.data, g.CDATA_END);\n\t\tcase COMMENT_NODE:\n\t\t\treturn buf.push(g.COMMENT_START, node.data, g.COMMENT_END);\n\t\tcase DOCUMENT_TYPE_NODE:\n\t\t\tvar pubid = node.publicId;\n\t\t\tvar sysid = node.systemId;\n\t\t\tbuf.push(g.DOCTYPE_DECL_START, ' ', node.name);\n\t\t\tif (pubid) {\n\t\t\t\tbuf.push(' ', g.PUBLIC, ' ', pubid);\n\t\t\t\tif (sysid && sysid !== '.') {\n\t\t\t\t\tbuf.push(' ', sysid);\n\t\t\t\t}\n\t\t\t} else if (sysid && sysid !== '.') {\n\t\t\t\tbuf.push(' ', g.SYSTEM, ' ', sysid);\n\t\t\t}\n\t\t\tif (node.internalSubset) {\n\t\t\t\tbuf.push(' [', node.internalSubset, ']');\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t\treturn;\n\t\tcase PROCESSING_INSTRUCTION_NODE:\n\t\t\treturn buf.push('<?', node.target, ' ', node.data, '?>');\n\t\tcase ENTITY_REFERENCE_NODE:\n\t\t\treturn buf.push('&', node.nodeName, ';');\n\t\t//case ENTITY_NODE:\n\t\t//case NOTATION_NODE:\n\t\tdefault:\n\t\t\tbuf.push('??', node.nodeName);\n\t}\n}\nfunction importNode(doc, node, deep) {\n\tvar node2;\n\tswitch (node.nodeType) {\n\t\tcase ELEMENT_NODE:\n\t\t\tnode2 = node.cloneNode(false);\n\t\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\tbreak;\n\t\tcase ATTRIBUTE_NODE:\n\t\t\tdeep = true;\n\t\t\tbreak;\n\t\t//case ENTITY_REFERENCE_NODE:\n\t\t//case PROCESSING_INSTRUCTION_NODE:\n\t\t////case TEXT_NODE:\n\t\t//case CDATA_SECTION_NODE:\n\t\t//case COMMENT_NODE:\n\t\t//\tdeep = false;\n\t\t//\tbreak;\n\t\t//case DOCUMENT_NODE:\n\t\t//case DOCUMENT_TYPE_NODE:\n\t\t//cannot be imported.\n\t\t//case ENTITY_NODE:\n\t\t//case NOTATION_NODEï¼š\n\t\t//can not hit in level3\n\t\t//default:throw e;\n\t}\n\tif (!node2) {\n\t\tnode2 = node.cloneNode(false); //false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif (deep) {\n\t\tvar child = node.firstChild;\n\t\twhile (child) {\n\t\t\tnode2.appendChild(importNode(doc, child, deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\n/**\n * Creates a copy of a node from an existing one.\n *\n * @param {Document} doc\n * The Document object representing the document that the new node will belong to.\n * @param {Node} node\n * The node to clone.\n * @param {boolean} deep\n * If true, the contents of the node are recursively copied.\n * If false, only the node itself (and its attributes, if it is an element) are copied.\n * @returns {Node}\n * Returns the newly created copy of the node.\n * @throws {DOMException}\n * May throw a DOMException if operations within setAttributeNode or appendChild (which are\n * potentially invoked in this function) do not meet their specific constraints.\n */\nfunction cloneNode(doc, node, deep) {\n\tvar node2 = new node.constructor(PDC);\n\tfor (var n in node) {\n\t\tif (hasOwn(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != 'object') {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (node.childNodes) {\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\t\tcase ELEMENT_NODE:\n\t\t\tvar attrs = node.attributes;\n\t\t\tvar attrs2 = (node2.attributes = new NamedNodeMap());\n\t\t\tvar len = attrs.length;\n\t\t\tattrs2._ownerElement = node2;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tnode2.setAttributeNode(cloneNode(doc, attrs.item(i), true));\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ATTRIBUTE_NODE:\n\t\t\tdeep = true;\n\t}\n\tif (deep) {\n\t\tvar child = node.firstChild;\n\t\twhile (child) {\n\t\t\tnode2.appendChild(cloneNode(doc, child, deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object, key, value) {\n\tobject[key] = value;\n}\n//do dynamic\ntry {\n\tif (Object.defineProperty) {\n\t\tObject.defineProperty(LiveNodeList.prototype, 'length', {\n\t\t\tget: function () {\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t},\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype, 'textContent', {\n\t\t\tget: function () {\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset: function (data) {\n\t\t\t\tswitch (this.nodeType) {\n\t\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\t\twhile (this.firstChild) {\n\t\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data || String(data)) {\n\t\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.data = data;\n\t\t\t\t\t\tthis.value = data;\n\t\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tfunction getTextContent(node) {\n\t\t\tswitch (node.nodeType) {\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\tvar buf = [];\n\t\t\t\t\tnode = node.firstChild;\n\t\t\t\t\twhile (node) {\n\t\t\t\t\t\tif (node.nodeType !== 7 && node.nodeType !== 8) {\n\t\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\treturn buf.join('');\n\t\t\t\tdefault:\n\t\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function (object, key, value) {\n\t\t\t//console.log(value)\n\t\t\tobject['$$' + key] = value;\n\t\t};\n\t}\n} catch (e) {\n\t//ie8\n}\n\nexports._updateLiveList = _updateLiveList;\nexports.Attr = Attr;\nexports.CDATASection = CDATASection;\nexports.CharacterData = CharacterData;\nexports.Comment = Comment;\nexports.Document = Document;\nexports.DocumentFragment = DocumentFragment;\nexports.DocumentType = DocumentType;\nexports.DOMImplementation = DOMImplementation;\nexports.Element = Element;\nexports.Entity = Entity;\nexports.EntityReference = EntityReference;\nexports.LiveNodeList = LiveNodeList;\nexports.NamedNodeMap = NamedNodeMap;\nexports.Node = Node;\nexports.NodeList = NodeList;\nexports.Notation = Notation;\nexports.Text = Text;\nexports.ProcessingInstruction = ProcessingInstruction;\nexports.XMLSerializer = XMLSerializer;\n","'use strict';\n\nvar freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML\n *      Wikipedia\n */\nexports.XML_ENTITIES = freeze({\n\tamp: '&',\n\tapos: \"'\",\n\tgt: '>',\n\tlt: '<',\n\tquot: '\"',\n});\n\n/**\n * A map of all entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see {@link XML_ENTITIES}\n * @see {@link DOMParser.parseFromString}\n * @see {@link DOMImplementation.prototype.createHTMLDocument}\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5)\n *      Spec\n * @see https://html.spec.whatwg.org/entities.json JSON\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML\n *      Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML\n *      Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n\tAacute: '\\u00C1',\n\taacute: '\\u00E1',\n\tAbreve: '\\u0102',\n\tabreve: '\\u0103',\n\tac: '\\u223E',\n\tacd: '\\u223F',\n\tacE: '\\u223E\\u0333',\n\tAcirc: '\\u00C2',\n\tacirc: '\\u00E2',\n\tacute: '\\u00B4',\n\tAcy: '\\u0410',\n\tacy: '\\u0430',\n\tAElig: '\\u00C6',\n\taelig: '\\u00E6',\n\taf: '\\u2061',\n\tAfr: '\\uD835\\uDD04',\n\tafr: '\\uD835\\uDD1E',\n\tAgrave: '\\u00C0',\n\tagrave: '\\u00E0',\n\talefsym: '\\u2135',\n\taleph: '\\u2135',\n\tAlpha: '\\u0391',\n\talpha: '\\u03B1',\n\tAmacr: '\\u0100',\n\tamacr: '\\u0101',\n\tamalg: '\\u2A3F',\n\tAMP: '\\u0026',\n\tamp: '\\u0026',\n\tAnd: '\\u2A53',\n\tand: '\\u2227',\n\tandand: '\\u2A55',\n\tandd: '\\u2A5C',\n\tandslope: '\\u2A58',\n\tandv: '\\u2A5A',\n\tang: '\\u2220',\n\tange: '\\u29A4',\n\tangle: '\\u2220',\n\tangmsd: '\\u2221',\n\tangmsdaa: '\\u29A8',\n\tangmsdab: '\\u29A9',\n\tangmsdac: '\\u29AA',\n\tangmsdad: '\\u29AB',\n\tangmsdae: '\\u29AC',\n\tangmsdaf: '\\u29AD',\n\tangmsdag: '\\u29AE',\n\tangmsdah: '\\u29AF',\n\tangrt: '\\u221F',\n\tangrtvb: '\\u22BE',\n\tangrtvbd: '\\u299D',\n\tangsph: '\\u2222',\n\tangst: '\\u00C5',\n\tangzarr: '\\u237C',\n\tAogon: '\\u0104',\n\taogon: '\\u0105',\n\tAopf: '\\uD835\\uDD38',\n\taopf: '\\uD835\\uDD52',\n\tap: '\\u2248',\n\tapacir: '\\u2A6F',\n\tapE: '\\u2A70',\n\tape: '\\u224A',\n\tapid: '\\u224B',\n\tapos: '\\u0027',\n\tApplyFunction: '\\u2061',\n\tapprox: '\\u2248',\n\tapproxeq: '\\u224A',\n\tAring: '\\u00C5',\n\taring: '\\u00E5',\n\tAscr: '\\uD835\\uDC9C',\n\tascr: '\\uD835\\uDCB6',\n\tAssign: '\\u2254',\n\tast: '\\u002A',\n\tasymp: '\\u2248',\n\tasympeq: '\\u224D',\n\tAtilde: '\\u00C3',\n\tatilde: '\\u00E3',\n\tAuml: '\\u00C4',\n\tauml: '\\u00E4',\n\tawconint: '\\u2233',\n\tawint: '\\u2A11',\n\tbackcong: '\\u224C',\n\tbackepsilon: '\\u03F6',\n\tbackprime: '\\u2035',\n\tbacksim: '\\u223D',\n\tbacksimeq: '\\u22CD',\n\tBackslash: '\\u2216',\n\tBarv: '\\u2AE7',\n\tbarvee: '\\u22BD',\n\tBarwed: '\\u2306',\n\tbarwed: '\\u2305',\n\tbarwedge: '\\u2305',\n\tbbrk: '\\u23B5',\n\tbbrktbrk: '\\u23B6',\n\tbcong: '\\u224C',\n\tBcy: '\\u0411',\n\tbcy: '\\u0431',\n\tbdquo: '\\u201E',\n\tbecaus: '\\u2235',\n\tBecause: '\\u2235',\n\tbecause: '\\u2235',\n\tbemptyv: '\\u29B0',\n\tbepsi: '\\u03F6',\n\tbernou: '\\u212C',\n\tBernoullis: '\\u212C',\n\tBeta: '\\u0392',\n\tbeta: '\\u03B2',\n\tbeth: '\\u2136',\n\tbetween: '\\u226C',\n\tBfr: '\\uD835\\uDD05',\n\tbfr: '\\uD835\\uDD1F',\n\tbigcap: '\\u22C2',\n\tbigcirc: '\\u25EF',\n\tbigcup: '\\u22C3',\n\tbigodot: '\\u2A00',\n\tbigoplus: '\\u2A01',\n\tbigotimes: '\\u2A02',\n\tbigsqcup: '\\u2A06',\n\tbigstar: '\\u2605',\n\tbigtriangledown: '\\u25BD',\n\tbigtriangleup: '\\u25B3',\n\tbiguplus: '\\u2A04',\n\tbigvee: '\\u22C1',\n\tbigwedge: '\\u22C0',\n\tbkarow: '\\u290D',\n\tblacklozenge: '\\u29EB',\n\tblacksquare: '\\u25AA',\n\tblacktriangle: '\\u25B4',\n\tblacktriangledown: '\\u25BE',\n\tblacktriangleleft: '\\u25C2',\n\tblacktriangleright: '\\u25B8',\n\tblank: '\\u2423',\n\tblk12: '\\u2592',\n\tblk14: '\\u2591',\n\tblk34: '\\u2593',\n\tblock: '\\u2588',\n\tbne: '\\u003D\\u20E5',\n\tbnequiv: '\\u2261\\u20E5',\n\tbNot: '\\u2AED',\n\tbnot: '\\u2310',\n\tBopf: '\\uD835\\uDD39',\n\tbopf: '\\uD835\\uDD53',\n\tbot: '\\u22A5',\n\tbottom: '\\u22A5',\n\tbowtie: '\\u22C8',\n\tboxbox: '\\u29C9',\n\tboxDL: '\\u2557',\n\tboxDl: '\\u2556',\n\tboxdL: '\\u2555',\n\tboxdl: '\\u2510',\n\tboxDR: '\\u2554',\n\tboxDr: '\\u2553',\n\tboxdR: '\\u2552',\n\tboxdr: '\\u250C',\n\tboxH: '\\u2550',\n\tboxh: '\\u2500',\n\tboxHD: '\\u2566',\n\tboxHd: '\\u2564',\n\tboxhD: '\\u2565',\n\tboxhd: '\\u252C',\n\tboxHU: '\\u2569',\n\tboxHu: '\\u2567',\n\tboxhU: '\\u2568',\n\tboxhu: '\\u2534',\n\tboxminus: '\\u229F',\n\tboxplus: '\\u229E',\n\tboxtimes: '\\u22A0',\n\tboxUL: '\\u255D',\n\tboxUl: '\\u255C',\n\tboxuL: '\\u255B',\n\tboxul: '\\u2518',\n\tboxUR: '\\u255A',\n\tboxUr: '\\u2559',\n\tboxuR: '\\u2558',\n\tboxur: '\\u2514',\n\tboxV: '\\u2551',\n\tboxv: '\\u2502',\n\tboxVH: '\\u256C',\n\tboxVh: '\\u256B',\n\tboxvH: '\\u256A',\n\tboxvh: '\\u253C',\n\tboxVL: '\\u2563',\n\tboxVl: '\\u2562',\n\tboxvL: '\\u2561',\n\tboxvl: '\\u2524',\n\tboxVR: '\\u2560',\n\tboxVr: '\\u255F',\n\tboxvR: '\\u255E',\n\tboxvr: '\\u251C',\n\tbprime: '\\u2035',\n\tBreve: '\\u02D8',\n\tbreve: '\\u02D8',\n\tbrvbar: '\\u00A6',\n\tBscr: '\\u212C',\n\tbscr: '\\uD835\\uDCB7',\n\tbsemi: '\\u204F',\n\tbsim: '\\u223D',\n\tbsime: '\\u22CD',\n\tbsol: '\\u005C',\n\tbsolb: '\\u29C5',\n\tbsolhsub: '\\u27C8',\n\tbull: '\\u2022',\n\tbullet: '\\u2022',\n\tbump: '\\u224E',\n\tbumpE: '\\u2AAE',\n\tbumpe: '\\u224F',\n\tBumpeq: '\\u224E',\n\tbumpeq: '\\u224F',\n\tCacute: '\\u0106',\n\tcacute: '\\u0107',\n\tCap: '\\u22D2',\n\tcap: '\\u2229',\n\tcapand: '\\u2A44',\n\tcapbrcup: '\\u2A49',\n\tcapcap: '\\u2A4B',\n\tcapcup: '\\u2A47',\n\tcapdot: '\\u2A40',\n\tCapitalDifferentialD: '\\u2145',\n\tcaps: '\\u2229\\uFE00',\n\tcaret: '\\u2041',\n\tcaron: '\\u02C7',\n\tCayleys: '\\u212D',\n\tccaps: '\\u2A4D',\n\tCcaron: '\\u010C',\n\tccaron: '\\u010D',\n\tCcedil: '\\u00C7',\n\tccedil: '\\u00E7',\n\tCcirc: '\\u0108',\n\tccirc: '\\u0109',\n\tCconint: '\\u2230',\n\tccups: '\\u2A4C',\n\tccupssm: '\\u2A50',\n\tCdot: '\\u010A',\n\tcdot: '\\u010B',\n\tcedil: '\\u00B8',\n\tCedilla: '\\u00B8',\n\tcemptyv: '\\u29B2',\n\tcent: '\\u00A2',\n\tCenterDot: '\\u00B7',\n\tcenterdot: '\\u00B7',\n\tCfr: '\\u212D',\n\tcfr: '\\uD835\\uDD20',\n\tCHcy: '\\u0427',\n\tchcy: '\\u0447',\n\tcheck: '\\u2713',\n\tcheckmark: '\\u2713',\n\tChi: '\\u03A7',\n\tchi: '\\u03C7',\n\tcir: '\\u25CB',\n\tcirc: '\\u02C6',\n\tcirceq: '\\u2257',\n\tcirclearrowleft: '\\u21BA',\n\tcirclearrowright: '\\u21BB',\n\tcircledast: '\\u229B',\n\tcircledcirc: '\\u229A',\n\tcircleddash: '\\u229D',\n\tCircleDot: '\\u2299',\n\tcircledR: '\\u00AE',\n\tcircledS: '\\u24C8',\n\tCircleMinus: '\\u2296',\n\tCirclePlus: '\\u2295',\n\tCircleTimes: '\\u2297',\n\tcirE: '\\u29C3',\n\tcire: '\\u2257',\n\tcirfnint: '\\u2A10',\n\tcirmid: '\\u2AEF',\n\tcirscir: '\\u29C2',\n\tClockwiseContourIntegral: '\\u2232',\n\tCloseCurlyDoubleQuote: '\\u201D',\n\tCloseCurlyQuote: '\\u2019',\n\tclubs: '\\u2663',\n\tclubsuit: '\\u2663',\n\tColon: '\\u2237',\n\tcolon: '\\u003A',\n\tColone: '\\u2A74',\n\tcolone: '\\u2254',\n\tcoloneq: '\\u2254',\n\tcomma: '\\u002C',\n\tcommat: '\\u0040',\n\tcomp: '\\u2201',\n\tcompfn: '\\u2218',\n\tcomplement: '\\u2201',\n\tcomplexes: '\\u2102',\n\tcong: '\\u2245',\n\tcongdot: '\\u2A6D',\n\tCongruent: '\\u2261',\n\tConint: '\\u222F',\n\tconint: '\\u222E',\n\tContourIntegral: '\\u222E',\n\tCopf: '\\u2102',\n\tcopf: '\\uD835\\uDD54',\n\tcoprod: '\\u2210',\n\tCoproduct: '\\u2210',\n\tCOPY: '\\u00A9',\n\tcopy: '\\u00A9',\n\tcopysr: '\\u2117',\n\tCounterClockwiseContourIntegral: '\\u2233',\n\tcrarr: '\\u21B5',\n\tCross: '\\u2A2F',\n\tcross: '\\u2717',\n\tCscr: '\\uD835\\uDC9E',\n\tcscr: '\\uD835\\uDCB8',\n\tcsub: '\\u2ACF',\n\tcsube: '\\u2AD1',\n\tcsup: '\\u2AD0',\n\tcsupe: '\\u2AD2',\n\tctdot: '\\u22EF',\n\tcudarrl: '\\u2938',\n\tcudarrr: '\\u2935',\n\tcuepr: '\\u22DE',\n\tcuesc: '\\u22DF',\n\tcularr: '\\u21B6',\n\tcularrp: '\\u293D',\n\tCup: '\\u22D3',\n\tcup: '\\u222A',\n\tcupbrcap: '\\u2A48',\n\tCupCap: '\\u224D',\n\tcupcap: '\\u2A46',\n\tcupcup: '\\u2A4A',\n\tcupdot: '\\u228D',\n\tcupor: '\\u2A45',\n\tcups: '\\u222A\\uFE00',\n\tcurarr: '\\u21B7',\n\tcurarrm: '\\u293C',\n\tcurlyeqprec: '\\u22DE',\n\tcurlyeqsucc: '\\u22DF',\n\tcurlyvee: '\\u22CE',\n\tcurlywedge: '\\u22CF',\n\tcurren: '\\u00A4',\n\tcurvearrowleft: '\\u21B6',\n\tcurvearrowright: '\\u21B7',\n\tcuvee: '\\u22CE',\n\tcuwed: '\\u22CF',\n\tcwconint: '\\u2232',\n\tcwint: '\\u2231',\n\tcylcty: '\\u232D',\n\tDagger: '\\u2021',\n\tdagger: '\\u2020',\n\tdaleth: '\\u2138',\n\tDarr: '\\u21A1',\n\tdArr: '\\u21D3',\n\tdarr: '\\u2193',\n\tdash: '\\u2010',\n\tDashv: '\\u2AE4',\n\tdashv: '\\u22A3',\n\tdbkarow: '\\u290F',\n\tdblac: '\\u02DD',\n\tDcaron: '\\u010E',\n\tdcaron: '\\u010F',\n\tDcy: '\\u0414',\n\tdcy: '\\u0434',\n\tDD: '\\u2145',\n\tdd: '\\u2146',\n\tddagger: '\\u2021',\n\tddarr: '\\u21CA',\n\tDDotrahd: '\\u2911',\n\tddotseq: '\\u2A77',\n\tdeg: '\\u00B0',\n\tDel: '\\u2207',\n\tDelta: '\\u0394',\n\tdelta: '\\u03B4',\n\tdemptyv: '\\u29B1',\n\tdfisht: '\\u297F',\n\tDfr: '\\uD835\\uDD07',\n\tdfr: '\\uD835\\uDD21',\n\tdHar: '\\u2965',\n\tdharl: '\\u21C3',\n\tdharr: '\\u21C2',\n\tDiacriticalAcute: '\\u00B4',\n\tDiacriticalDot: '\\u02D9',\n\tDiacriticalDoubleAcute: '\\u02DD',\n\tDiacriticalGrave: '\\u0060',\n\tDiacriticalTilde: '\\u02DC',\n\tdiam: '\\u22C4',\n\tDiamond: '\\u22C4',\n\tdiamond: '\\u22C4',\n\tdiamondsuit: '\\u2666',\n\tdiams: '\\u2666',\n\tdie: '\\u00A8',\n\tDifferentialD: '\\u2146',\n\tdigamma: '\\u03DD',\n\tdisin: '\\u22F2',\n\tdiv: '\\u00F7',\n\tdivide: '\\u00F7',\n\tdivideontimes: '\\u22C7',\n\tdivonx: '\\u22C7',\n\tDJcy: '\\u0402',\n\tdjcy: '\\u0452',\n\tdlcorn: '\\u231E',\n\tdlcrop: '\\u230D',\n\tdollar: '\\u0024',\n\tDopf: '\\uD835\\uDD3B',\n\tdopf: '\\uD835\\uDD55',\n\tDot: '\\u00A8',\n\tdot: '\\u02D9',\n\tDotDot: '\\u20DC',\n\tdoteq: '\\u2250',\n\tdoteqdot: '\\u2251',\n\tDotEqual: '\\u2250',\n\tdotminus: '\\u2238',\n\tdotplus: '\\u2214',\n\tdotsquare: '\\u22A1',\n\tdoublebarwedge: '\\u2306',\n\tDoubleContourIntegral: '\\u222F',\n\tDoubleDot: '\\u00A8',\n\tDoubleDownArrow: '\\u21D3',\n\tDoubleLeftArrow: '\\u21D0',\n\tDoubleLeftRightArrow: '\\u21D4',\n\tDoubleLeftTee: '\\u2AE4',\n\tDoubleLongLeftArrow: '\\u27F8',\n\tDoubleLongLeftRightArrow: '\\u27FA',\n\tDoubleLongRightArrow: '\\u27F9',\n\tDoubleRightArrow: '\\u21D2',\n\tDoubleRightTee: '\\u22A8',\n\tDoubleUpArrow: '\\u21D1',\n\tDoubleUpDownArrow: '\\u21D5',\n\tDoubleVerticalBar: '\\u2225',\n\tDownArrow: '\\u2193',\n\tDownarrow: '\\u21D3',\n\tdownarrow: '\\u2193',\n\tDownArrowBar: '\\u2913',\n\tDownArrowUpArrow: '\\u21F5',\n\tDownBreve: '\\u0311',\n\tdowndownarrows: '\\u21CA',\n\tdownharpoonleft: '\\u21C3',\n\tdownharpoonright: '\\u21C2',\n\tDownLeftRightVector: '\\u2950',\n\tDownLeftTeeVector: '\\u295E',\n\tDownLeftVector: '\\u21BD',\n\tDownLeftVectorBar: '\\u2956',\n\tDownRightTeeVector: '\\u295F',\n\tDownRightVector: '\\u21C1',\n\tDownRightVectorBar: '\\u2957',\n\tDownTee: '\\u22A4',\n\tDownTeeArrow: '\\u21A7',\n\tdrbkarow: '\\u2910',\n\tdrcorn: '\\u231F',\n\tdrcrop: '\\u230C',\n\tDscr: '\\uD835\\uDC9F',\n\tdscr: '\\uD835\\uDCB9',\n\tDScy: '\\u0405',\n\tdscy: '\\u0455',\n\tdsol: '\\u29F6',\n\tDstrok: '\\u0110',\n\tdstrok: '\\u0111',\n\tdtdot: '\\u22F1',\n\tdtri: '\\u25BF',\n\tdtrif: '\\u25BE',\n\tduarr: '\\u21F5',\n\tduhar: '\\u296F',\n\tdwangle: '\\u29A6',\n\tDZcy: '\\u040F',\n\tdzcy: '\\u045F',\n\tdzigrarr: '\\u27FF',\n\tEacute: '\\u00C9',\n\teacute: '\\u00E9',\n\teaster: '\\u2A6E',\n\tEcaron: '\\u011A',\n\tecaron: '\\u011B',\n\tecir: '\\u2256',\n\tEcirc: '\\u00CA',\n\tecirc: '\\u00EA',\n\tecolon: '\\u2255',\n\tEcy: '\\u042D',\n\tecy: '\\u044D',\n\teDDot: '\\u2A77',\n\tEdot: '\\u0116',\n\teDot: '\\u2251',\n\tedot: '\\u0117',\n\tee: '\\u2147',\n\tefDot: '\\u2252',\n\tEfr: '\\uD835\\uDD08',\n\tefr: '\\uD835\\uDD22',\n\teg: '\\u2A9A',\n\tEgrave: '\\u00C8',\n\tegrave: '\\u00E8',\n\tegs: '\\u2A96',\n\tegsdot: '\\u2A98',\n\tel: '\\u2A99',\n\tElement: '\\u2208',\n\telinters: '\\u23E7',\n\tell: '\\u2113',\n\tels: '\\u2A95',\n\telsdot: '\\u2A97',\n\tEmacr: '\\u0112',\n\temacr: '\\u0113',\n\tempty: '\\u2205',\n\temptyset: '\\u2205',\n\tEmptySmallSquare: '\\u25FB',\n\temptyv: '\\u2205',\n\tEmptyVerySmallSquare: '\\u25AB',\n\temsp: '\\u2003',\n\temsp13: '\\u2004',\n\temsp14: '\\u2005',\n\tENG: '\\u014A',\n\teng: '\\u014B',\n\tensp: '\\u2002',\n\tEogon: '\\u0118',\n\teogon: '\\u0119',\n\tEopf: '\\uD835\\uDD3C',\n\teopf: '\\uD835\\uDD56',\n\tepar: '\\u22D5',\n\teparsl: '\\u29E3',\n\teplus: '\\u2A71',\n\tepsi: '\\u03B5',\n\tEpsilon: '\\u0395',\n\tepsilon: '\\u03B5',\n\tepsiv: '\\u03F5',\n\teqcirc: '\\u2256',\n\teqcolon: '\\u2255',\n\teqsim: '\\u2242',\n\teqslantgtr: '\\u2A96',\n\teqslantless: '\\u2A95',\n\tEqual: '\\u2A75',\n\tequals: '\\u003D',\n\tEqualTilde: '\\u2242',\n\tequest: '\\u225F',\n\tEquilibrium: '\\u21CC',\n\tequiv: '\\u2261',\n\tequivDD: '\\u2A78',\n\teqvparsl: '\\u29E5',\n\terarr: '\\u2971',\n\terDot: '\\u2253',\n\tEscr: '\\u2130',\n\tescr: '\\u212F',\n\tesdot: '\\u2250',\n\tEsim: '\\u2A73',\n\tesim: '\\u2242',\n\tEta: '\\u0397',\n\teta: '\\u03B7',\n\tETH: '\\u00D0',\n\teth: '\\u00F0',\n\tEuml: '\\u00CB',\n\teuml: '\\u00EB',\n\teuro: '\\u20AC',\n\texcl: '\\u0021',\n\texist: '\\u2203',\n\tExists: '\\u2203',\n\texpectation: '\\u2130',\n\tExponentialE: '\\u2147',\n\texponentiale: '\\u2147',\n\tfallingdotseq: '\\u2252',\n\tFcy: '\\u0424',\n\tfcy: '\\u0444',\n\tfemale: '\\u2640',\n\tffilig: '\\uFB03',\n\tfflig: '\\uFB00',\n\tffllig: '\\uFB04',\n\tFfr: '\\uD835\\uDD09',\n\tffr: '\\uD835\\uDD23',\n\tfilig: '\\uFB01',\n\tFilledSmallSquare: '\\u25FC',\n\tFilledVerySmallSquare: '\\u25AA',\n\tfjlig: '\\u0066\\u006A',\n\tflat: '\\u266D',\n\tfllig: '\\uFB02',\n\tfltns: '\\u25B1',\n\tfnof: '\\u0192',\n\tFopf: '\\uD835\\uDD3D',\n\tfopf: '\\uD835\\uDD57',\n\tForAll: '\\u2200',\n\tforall: '\\u2200',\n\tfork: '\\u22D4',\n\tforkv: '\\u2AD9',\n\tFouriertrf: '\\u2131',\n\tfpartint: '\\u2A0D',\n\tfrac12: '\\u00BD',\n\tfrac13: '\\u2153',\n\tfrac14: '\\u00BC',\n\tfrac15: '\\u2155',\n\tfrac16: '\\u2159',\n\tfrac18: '\\u215B',\n\tfrac23: '\\u2154',\n\tfrac25: '\\u2156',\n\tfrac34: '\\u00BE',\n\tfrac35: '\\u2157',\n\tfrac38: '\\u215C',\n\tfrac45: '\\u2158',\n\tfrac56: '\\u215A',\n\tfrac58: '\\u215D',\n\tfrac78: '\\u215E',\n\tfrasl: '\\u2044',\n\tfrown: '\\u2322',\n\tFscr: '\\u2131',\n\tfscr: '\\uD835\\uDCBB',\n\tgacute: '\\u01F5',\n\tGamma: '\\u0393',\n\tgamma: '\\u03B3',\n\tGammad: '\\u03DC',\n\tgammad: '\\u03DD',\n\tgap: '\\u2A86',\n\tGbreve: '\\u011E',\n\tgbreve: '\\u011F',\n\tGcedil: '\\u0122',\n\tGcirc: '\\u011C',\n\tgcirc: '\\u011D',\n\tGcy: '\\u0413',\n\tgcy: '\\u0433',\n\tGdot: '\\u0120',\n\tgdot: '\\u0121',\n\tgE: '\\u2267',\n\tge: '\\u2265',\n\tgEl: '\\u2A8C',\n\tgel: '\\u22DB',\n\tgeq: '\\u2265',\n\tgeqq: '\\u2267',\n\tgeqslant: '\\u2A7E',\n\tges: '\\u2A7E',\n\tgescc: '\\u2AA9',\n\tgesdot: '\\u2A80',\n\tgesdoto: '\\u2A82',\n\tgesdotol: '\\u2A84',\n\tgesl: '\\u22DB\\uFE00',\n\tgesles: '\\u2A94',\n\tGfr: '\\uD835\\uDD0A',\n\tgfr: '\\uD835\\uDD24',\n\tGg: '\\u22D9',\n\tgg: '\\u226B',\n\tggg: '\\u22D9',\n\tgimel: '\\u2137',\n\tGJcy: '\\u0403',\n\tgjcy: '\\u0453',\n\tgl: '\\u2277',\n\tgla: '\\u2AA5',\n\tglE: '\\u2A92',\n\tglj: '\\u2AA4',\n\tgnap: '\\u2A8A',\n\tgnapprox: '\\u2A8A',\n\tgnE: '\\u2269',\n\tgne: '\\u2A88',\n\tgneq: '\\u2A88',\n\tgneqq: '\\u2269',\n\tgnsim: '\\u22E7',\n\tGopf: '\\uD835\\uDD3E',\n\tgopf: '\\uD835\\uDD58',\n\tgrave: '\\u0060',\n\tGreaterEqual: '\\u2265',\n\tGreaterEqualLess: '\\u22DB',\n\tGreaterFullEqual: '\\u2267',\n\tGreaterGreater: '\\u2AA2',\n\tGreaterLess: '\\u2277',\n\tGreaterSlantEqual: '\\u2A7E',\n\tGreaterTilde: '\\u2273',\n\tGscr: '\\uD835\\uDCA2',\n\tgscr: '\\u210A',\n\tgsim: '\\u2273',\n\tgsime: '\\u2A8E',\n\tgsiml: '\\u2A90',\n\tGt: '\\u226B',\n\tGT: '\\u003E',\n\tgt: '\\u003E',\n\tgtcc: '\\u2AA7',\n\tgtcir: '\\u2A7A',\n\tgtdot: '\\u22D7',\n\tgtlPar: '\\u2995',\n\tgtquest: '\\u2A7C',\n\tgtrapprox: '\\u2A86',\n\tgtrarr: '\\u2978',\n\tgtrdot: '\\u22D7',\n\tgtreqless: '\\u22DB',\n\tgtreqqless: '\\u2A8C',\n\tgtrless: '\\u2277',\n\tgtrsim: '\\u2273',\n\tgvertneqq: '\\u2269\\uFE00',\n\tgvnE: '\\u2269\\uFE00',\n\tHacek: '\\u02C7',\n\thairsp: '\\u200A',\n\thalf: '\\u00BD',\n\thamilt: '\\u210B',\n\tHARDcy: '\\u042A',\n\thardcy: '\\u044A',\n\thArr: '\\u21D4',\n\tharr: '\\u2194',\n\tharrcir: '\\u2948',\n\tharrw: '\\u21AD',\n\tHat: '\\u005E',\n\thbar: '\\u210F',\n\tHcirc: '\\u0124',\n\thcirc: '\\u0125',\n\thearts: '\\u2665',\n\theartsuit: '\\u2665',\n\thellip: '\\u2026',\n\thercon: '\\u22B9',\n\tHfr: '\\u210C',\n\thfr: '\\uD835\\uDD25',\n\tHilbertSpace: '\\u210B',\n\thksearow: '\\u2925',\n\thkswarow: '\\u2926',\n\thoarr: '\\u21FF',\n\thomtht: '\\u223B',\n\thookleftarrow: '\\u21A9',\n\thookrightarrow: '\\u21AA',\n\tHopf: '\\u210D',\n\thopf: '\\uD835\\uDD59',\n\thorbar: '\\u2015',\n\tHorizontalLine: '\\u2500',\n\tHscr: '\\u210B',\n\thscr: '\\uD835\\uDCBD',\n\thslash: '\\u210F',\n\tHstrok: '\\u0126',\n\thstrok: '\\u0127',\n\tHumpDownHump: '\\u224E',\n\tHumpEqual: '\\u224F',\n\thybull: '\\u2043',\n\thyphen: '\\u2010',\n\tIacute: '\\u00CD',\n\tiacute: '\\u00ED',\n\tic: '\\u2063',\n\tIcirc: '\\u00CE',\n\ticirc: '\\u00EE',\n\tIcy: '\\u0418',\n\ticy: '\\u0438',\n\tIdot: '\\u0130',\n\tIEcy: '\\u0415',\n\tiecy: '\\u0435',\n\tiexcl: '\\u00A1',\n\tiff: '\\u21D4',\n\tIfr: '\\u2111',\n\tifr: '\\uD835\\uDD26',\n\tIgrave: '\\u00CC',\n\tigrave: '\\u00EC',\n\tii: '\\u2148',\n\tiiiint: '\\u2A0C',\n\tiiint: '\\u222D',\n\tiinfin: '\\u29DC',\n\tiiota: '\\u2129',\n\tIJlig: '\\u0132',\n\tijlig: '\\u0133',\n\tIm: '\\u2111',\n\tImacr: '\\u012A',\n\timacr: '\\u012B',\n\timage: '\\u2111',\n\tImaginaryI: '\\u2148',\n\timagline: '\\u2110',\n\timagpart: '\\u2111',\n\timath: '\\u0131',\n\timof: '\\u22B7',\n\timped: '\\u01B5',\n\tImplies: '\\u21D2',\n\tin: '\\u2208',\n\tincare: '\\u2105',\n\tinfin: '\\u221E',\n\tinfintie: '\\u29DD',\n\tinodot: '\\u0131',\n\tInt: '\\u222C',\n\tint: '\\u222B',\n\tintcal: '\\u22BA',\n\tintegers: '\\u2124',\n\tIntegral: '\\u222B',\n\tintercal: '\\u22BA',\n\tIntersection: '\\u22C2',\n\tintlarhk: '\\u2A17',\n\tintprod: '\\u2A3C',\n\tInvisibleComma: '\\u2063',\n\tInvisibleTimes: '\\u2062',\n\tIOcy: '\\u0401',\n\tiocy: '\\u0451',\n\tIogon: '\\u012E',\n\tiogon: '\\u012F',\n\tIopf: '\\uD835\\uDD40',\n\tiopf: '\\uD835\\uDD5A',\n\tIota: '\\u0399',\n\tiota: '\\u03B9',\n\tiprod: '\\u2A3C',\n\tiquest: '\\u00BF',\n\tIscr: '\\u2110',\n\tiscr: '\\uD835\\uDCBE',\n\tisin: '\\u2208',\n\tisindot: '\\u22F5',\n\tisinE: '\\u22F9',\n\tisins: '\\u22F4',\n\tisinsv: '\\u22F3',\n\tisinv: '\\u2208',\n\tit: '\\u2062',\n\tItilde: '\\u0128',\n\titilde: '\\u0129',\n\tIukcy: '\\u0406',\n\tiukcy: '\\u0456',\n\tIuml: '\\u00CF',\n\tiuml: '\\u00EF',\n\tJcirc: '\\u0134',\n\tjcirc: '\\u0135',\n\tJcy: '\\u0419',\n\tjcy: '\\u0439',\n\tJfr: '\\uD835\\uDD0D',\n\tjfr: '\\uD835\\uDD27',\n\tjmath: '\\u0237',\n\tJopf: '\\uD835\\uDD41',\n\tjopf: '\\uD835\\uDD5B',\n\tJscr: '\\uD835\\uDCA5',\n\tjscr: '\\uD835\\uDCBF',\n\tJsercy: '\\u0408',\n\tjsercy: '\\u0458',\n\tJukcy: '\\u0404',\n\tjukcy: '\\u0454',\n\tKappa: '\\u039A',\n\tkappa: '\\u03BA',\n\tkappav: '\\u03F0',\n\tKcedil: '\\u0136',\n\tkcedil: '\\u0137',\n\tKcy: '\\u041A',\n\tkcy: '\\u043A',\n\tKfr: '\\uD835\\uDD0E',\n\tkfr: '\\uD835\\uDD28',\n\tkgreen: '\\u0138',\n\tKHcy: '\\u0425',\n\tkhcy: '\\u0445',\n\tKJcy: '\\u040C',\n\tkjcy: '\\u045C',\n\tKopf: '\\uD835\\uDD42',\n\tkopf: '\\uD835\\uDD5C',\n\tKscr: '\\uD835\\uDCA6',\n\tkscr: '\\uD835\\uDCC0',\n\tlAarr: '\\u21DA',\n\tLacute: '\\u0139',\n\tlacute: '\\u013A',\n\tlaemptyv: '\\u29B4',\n\tlagran: '\\u2112',\n\tLambda: '\\u039B',\n\tlambda: '\\u03BB',\n\tLang: '\\u27EA',\n\tlang: '\\u27E8',\n\tlangd: '\\u2991',\n\tlangle: '\\u27E8',\n\tlap: '\\u2A85',\n\tLaplacetrf: '\\u2112',\n\tlaquo: '\\u00AB',\n\tLarr: '\\u219E',\n\tlArr: '\\u21D0',\n\tlarr: '\\u2190',\n\tlarrb: '\\u21E4',\n\tlarrbfs: '\\u291F',\n\tlarrfs: '\\u291D',\n\tlarrhk: '\\u21A9',\n\tlarrlp: '\\u21AB',\n\tlarrpl: '\\u2939',\n\tlarrsim: '\\u2973',\n\tlarrtl: '\\u21A2',\n\tlat: '\\u2AAB',\n\tlAtail: '\\u291B',\n\tlatail: '\\u2919',\n\tlate: '\\u2AAD',\n\tlates: '\\u2AAD\\uFE00',\n\tlBarr: '\\u290E',\n\tlbarr: '\\u290C',\n\tlbbrk: '\\u2772',\n\tlbrace: '\\u007B',\n\tlbrack: '\\u005B',\n\tlbrke: '\\u298B',\n\tlbrksld: '\\u298F',\n\tlbrkslu: '\\u298D',\n\tLcaron: '\\u013D',\n\tlcaron: '\\u013E',\n\tLcedil: '\\u013B',\n\tlcedil: '\\u013C',\n\tlceil: '\\u2308',\n\tlcub: '\\u007B',\n\tLcy: '\\u041B',\n\tlcy: '\\u043B',\n\tldca: '\\u2936',\n\tldquo: '\\u201C',\n\tldquor: '\\u201E',\n\tldrdhar: '\\u2967',\n\tldrushar: '\\u294B',\n\tldsh: '\\u21B2',\n\tlE: '\\u2266',\n\tle: '\\u2264',\n\tLeftAngleBracket: '\\u27E8',\n\tLeftArrow: '\\u2190',\n\tLeftarrow: '\\u21D0',\n\tleftarrow: '\\u2190',\n\tLeftArrowBar: '\\u21E4',\n\tLeftArrowRightArrow: '\\u21C6',\n\tleftarrowtail: '\\u21A2',\n\tLeftCeiling: '\\u2308',\n\tLeftDoubleBracket: '\\u27E6',\n\tLeftDownTeeVector: '\\u2961',\n\tLeftDownVector: '\\u21C3',\n\tLeftDownVectorBar: '\\u2959',\n\tLeftFloor: '\\u230A',\n\tleftharpoondown: '\\u21BD',\n\tleftharpoonup: '\\u21BC',\n\tleftleftarrows: '\\u21C7',\n\tLeftRightArrow: '\\u2194',\n\tLeftrightarrow: '\\u21D4',\n\tleftrightarrow: '\\u2194',\n\tleftrightarrows: '\\u21C6',\n\tleftrightharpoons: '\\u21CB',\n\tleftrightsquigarrow: '\\u21AD',\n\tLeftRightVector: '\\u294E',\n\tLeftTee: '\\u22A3',\n\tLeftTeeArrow: '\\u21A4',\n\tLeftTeeVector: '\\u295A',\n\tleftthreetimes: '\\u22CB',\n\tLeftTriangle: '\\u22B2',\n\tLeftTriangleBar: '\\u29CF',\n\tLeftTriangleEqual: '\\u22B4',\n\tLeftUpDownVector: '\\u2951',\n\tLeftUpTeeVector: '\\u2960',\n\tLeftUpVector: '\\u21BF',\n\tLeftUpVectorBar: '\\u2958',\n\tLeftVector: '\\u21BC',\n\tLeftVectorBar: '\\u2952',\n\tlEg: '\\u2A8B',\n\tleg: '\\u22DA',\n\tleq: '\\u2264',\n\tleqq: '\\u2266',\n\tleqslant: '\\u2A7D',\n\tles: '\\u2A7D',\n\tlescc: '\\u2AA8',\n\tlesdot: '\\u2A7F',\n\tlesdoto: '\\u2A81',\n\tlesdotor: '\\u2A83',\n\tlesg: '\\u22DA\\uFE00',\n\tlesges: '\\u2A93',\n\tlessapprox: '\\u2A85',\n\tlessdot: '\\u22D6',\n\tlesseqgtr: '\\u22DA',\n\tlesseqqgtr: '\\u2A8B',\n\tLessEqualGreater: '\\u22DA',\n\tLessFullEqual: '\\u2266',\n\tLessGreater: '\\u2276',\n\tlessgtr: '\\u2276',\n\tLessLess: '\\u2AA1',\n\tlesssim: '\\u2272',\n\tLessSlantEqual: '\\u2A7D',\n\tLessTilde: '\\u2272',\n\tlfisht: '\\u297C',\n\tlfloor: '\\u230A',\n\tLfr: '\\uD835\\uDD0F',\n\tlfr: '\\uD835\\uDD29',\n\tlg: '\\u2276',\n\tlgE: '\\u2A91',\n\tlHar: '\\u2962',\n\tlhard: '\\u21BD',\n\tlharu: '\\u21BC',\n\tlharul: '\\u296A',\n\tlhblk: '\\u2584',\n\tLJcy: '\\u0409',\n\tljcy: '\\u0459',\n\tLl: '\\u22D8',\n\tll: '\\u226A',\n\tllarr: '\\u21C7',\n\tllcorner: '\\u231E',\n\tLleftarrow: '\\u21DA',\n\tllhard: '\\u296B',\n\tlltri: '\\u25FA',\n\tLmidot: '\\u013F',\n\tlmidot: '\\u0140',\n\tlmoust: '\\u23B0',\n\tlmoustache: '\\u23B0',\n\tlnap: '\\u2A89',\n\tlnapprox: '\\u2A89',\n\tlnE: '\\u2268',\n\tlne: '\\u2A87',\n\tlneq: '\\u2A87',\n\tlneqq: '\\u2268',\n\tlnsim: '\\u22E6',\n\tloang: '\\u27EC',\n\tloarr: '\\u21FD',\n\tlobrk: '\\u27E6',\n\tLongLeftArrow: '\\u27F5',\n\tLongleftarrow: '\\u27F8',\n\tlongleftarrow: '\\u27F5',\n\tLongLeftRightArrow: '\\u27F7',\n\tLongleftrightarrow: '\\u27FA',\n\tlongleftrightarrow: '\\u27F7',\n\tlongmapsto: '\\u27FC',\n\tLongRightArrow: '\\u27F6',\n\tLongrightarrow: '\\u27F9',\n\tlongrightarrow: '\\u27F6',\n\tlooparrowleft: '\\u21AB',\n\tlooparrowright: '\\u21AC',\n\tlopar: '\\u2985',\n\tLopf: '\\uD835\\uDD43',\n\tlopf: '\\uD835\\uDD5D',\n\tloplus: '\\u2A2D',\n\tlotimes: '\\u2A34',\n\tlowast: '\\u2217',\n\tlowbar: '\\u005F',\n\tLowerLeftArrow: '\\u2199',\n\tLowerRightArrow: '\\u2198',\n\tloz: '\\u25CA',\n\tlozenge: '\\u25CA',\n\tlozf: '\\u29EB',\n\tlpar: '\\u0028',\n\tlparlt: '\\u2993',\n\tlrarr: '\\u21C6',\n\tlrcorner: '\\u231F',\n\tlrhar: '\\u21CB',\n\tlrhard: '\\u296D',\n\tlrm: '\\u200E',\n\tlrtri: '\\u22BF',\n\tlsaquo: '\\u2039',\n\tLscr: '\\u2112',\n\tlscr: '\\uD835\\uDCC1',\n\tLsh: '\\u21B0',\n\tlsh: '\\u21B0',\n\tlsim: '\\u2272',\n\tlsime: '\\u2A8D',\n\tlsimg: '\\u2A8F',\n\tlsqb: '\\u005B',\n\tlsquo: '\\u2018',\n\tlsquor: '\\u201A',\n\tLstrok: '\\u0141',\n\tlstrok: '\\u0142',\n\tLt: '\\u226A',\n\tLT: '\\u003C',\n\tlt: '\\u003C',\n\tltcc: '\\u2AA6',\n\tltcir: '\\u2A79',\n\tltdot: '\\u22D6',\n\tlthree: '\\u22CB',\n\tltimes: '\\u22C9',\n\tltlarr: '\\u2976',\n\tltquest: '\\u2A7B',\n\tltri: '\\u25C3',\n\tltrie: '\\u22B4',\n\tltrif: '\\u25C2',\n\tltrPar: '\\u2996',\n\tlurdshar: '\\u294A',\n\tluruhar: '\\u2966',\n\tlvertneqq: '\\u2268\\uFE00',\n\tlvnE: '\\u2268\\uFE00',\n\tmacr: '\\u00AF',\n\tmale: '\\u2642',\n\tmalt: '\\u2720',\n\tmaltese: '\\u2720',\n\tMap: '\\u2905',\n\tmap: '\\u21A6',\n\tmapsto: '\\u21A6',\n\tmapstodown: '\\u21A7',\n\tmapstoleft: '\\u21A4',\n\tmapstoup: '\\u21A5',\n\tmarker: '\\u25AE',\n\tmcomma: '\\u2A29',\n\tMcy: '\\u041C',\n\tmcy: '\\u043C',\n\tmdash: '\\u2014',\n\tmDDot: '\\u223A',\n\tmeasuredangle: '\\u2221',\n\tMediumSpace: '\\u205F',\n\tMellintrf: '\\u2133',\n\tMfr: '\\uD835\\uDD10',\n\tmfr: '\\uD835\\uDD2A',\n\tmho: '\\u2127',\n\tmicro: '\\u00B5',\n\tmid: '\\u2223',\n\tmidast: '\\u002A',\n\tmidcir: '\\u2AF0',\n\tmiddot: '\\u00B7',\n\tminus: '\\u2212',\n\tminusb: '\\u229F',\n\tminusd: '\\u2238',\n\tminusdu: '\\u2A2A',\n\tMinusPlus: '\\u2213',\n\tmlcp: '\\u2ADB',\n\tmldr: '\\u2026',\n\tmnplus: '\\u2213',\n\tmodels: '\\u22A7',\n\tMopf: '\\uD835\\uDD44',\n\tmopf: '\\uD835\\uDD5E',\n\tmp: '\\u2213',\n\tMscr: '\\u2133',\n\tmscr: '\\uD835\\uDCC2',\n\tmstpos: '\\u223E',\n\tMu: '\\u039C',\n\tmu: '\\u03BC',\n\tmultimap: '\\u22B8',\n\tmumap: '\\u22B8',\n\tnabla: '\\u2207',\n\tNacute: '\\u0143',\n\tnacute: '\\u0144',\n\tnang: '\\u2220\\u20D2',\n\tnap: '\\u2249',\n\tnapE: '\\u2A70\\u0338',\n\tnapid: '\\u224B\\u0338',\n\tnapos: '\\u0149',\n\tnapprox: '\\u2249',\n\tnatur: '\\u266E',\n\tnatural: '\\u266E',\n\tnaturals: '\\u2115',\n\tnbsp: '\\u00A0',\n\tnbump: '\\u224E\\u0338',\n\tnbumpe: '\\u224F\\u0338',\n\tncap: '\\u2A43',\n\tNcaron: '\\u0147',\n\tncaron: '\\u0148',\n\tNcedil: '\\u0145',\n\tncedil: '\\u0146',\n\tncong: '\\u2247',\n\tncongdot: '\\u2A6D\\u0338',\n\tncup: '\\u2A42',\n\tNcy: '\\u041D',\n\tncy: '\\u043D',\n\tndash: '\\u2013',\n\tne: '\\u2260',\n\tnearhk: '\\u2924',\n\tneArr: '\\u21D7',\n\tnearr: '\\u2197',\n\tnearrow: '\\u2197',\n\tnedot: '\\u2250\\u0338',\n\tNegativeMediumSpace: '\\u200B',\n\tNegativeThickSpace: '\\u200B',\n\tNegativeThinSpace: '\\u200B',\n\tNegativeVeryThinSpace: '\\u200B',\n\tnequiv: '\\u2262',\n\tnesear: '\\u2928',\n\tnesim: '\\u2242\\u0338',\n\tNestedGreaterGreater: '\\u226B',\n\tNestedLessLess: '\\u226A',\n\tNewLine: '\\u000A',\n\tnexist: '\\u2204',\n\tnexists: '\\u2204',\n\tNfr: '\\uD835\\uDD11',\n\tnfr: '\\uD835\\uDD2B',\n\tngE: '\\u2267\\u0338',\n\tnge: '\\u2271',\n\tngeq: '\\u2271',\n\tngeqq: '\\u2267\\u0338',\n\tngeqslant: '\\u2A7E\\u0338',\n\tnges: '\\u2A7E\\u0338',\n\tnGg: '\\u22D9\\u0338',\n\tngsim: '\\u2275',\n\tnGt: '\\u226B\\u20D2',\n\tngt: '\\u226F',\n\tngtr: '\\u226F',\n\tnGtv: '\\u226B\\u0338',\n\tnhArr: '\\u21CE',\n\tnharr: '\\u21AE',\n\tnhpar: '\\u2AF2',\n\tni: '\\u220B',\n\tnis: '\\u22FC',\n\tnisd: '\\u22FA',\n\tniv: '\\u220B',\n\tNJcy: '\\u040A',\n\tnjcy: '\\u045A',\n\tnlArr: '\\u21CD',\n\tnlarr: '\\u219A',\n\tnldr: '\\u2025',\n\tnlE: '\\u2266\\u0338',\n\tnle: '\\u2270',\n\tnLeftarrow: '\\u21CD',\n\tnleftarrow: '\\u219A',\n\tnLeftrightarrow: '\\u21CE',\n\tnleftrightarrow: '\\u21AE',\n\tnleq: '\\u2270',\n\tnleqq: '\\u2266\\u0338',\n\tnleqslant: '\\u2A7D\\u0338',\n\tnles: '\\u2A7D\\u0338',\n\tnless: '\\u226E',\n\tnLl: '\\u22D8\\u0338',\n\tnlsim: '\\u2274',\n\tnLt: '\\u226A\\u20D2',\n\tnlt: '\\u226E',\n\tnltri: '\\u22EA',\n\tnltrie: '\\u22EC',\n\tnLtv: '\\u226A\\u0338',\n\tnmid: '\\u2224',\n\tNoBreak: '\\u2060',\n\tNonBreakingSpace: '\\u00A0',\n\tNopf: '\\u2115',\n\tnopf: '\\uD835\\uDD5F',\n\tNot: '\\u2AEC',\n\tnot: '\\u00AC',\n\tNotCongruent: '\\u2262',\n\tNotCupCap: '\\u226D',\n\tNotDoubleVerticalBar: '\\u2226',\n\tNotElement: '\\u2209',\n\tNotEqual: '\\u2260',\n\tNotEqualTilde: '\\u2242\\u0338',\n\tNotExists: '\\u2204',\n\tNotGreater: '\\u226F',\n\tNotGreaterEqual: '\\u2271',\n\tNotGreaterFullEqual: '\\u2267\\u0338',\n\tNotGreaterGreater: '\\u226B\\u0338',\n\tNotGreaterLess: '\\u2279',\n\tNotGreaterSlantEqual: '\\u2A7E\\u0338',\n\tNotGreaterTilde: '\\u2275',\n\tNotHumpDownHump: '\\u224E\\u0338',\n\tNotHumpEqual: '\\u224F\\u0338',\n\tnotin: '\\u2209',\n\tnotindot: '\\u22F5\\u0338',\n\tnotinE: '\\u22F9\\u0338',\n\tnotinva: '\\u2209',\n\tnotinvb: '\\u22F7',\n\tnotinvc: '\\u22F6',\n\tNotLeftTriangle: '\\u22EA',\n\tNotLeftTriangleBar: '\\u29CF\\u0338',\n\tNotLeftTriangleEqual: '\\u22EC',\n\tNotLess: '\\u226E',\n\tNotLessEqual: '\\u2270',\n\tNotLessGreater: '\\u2278',\n\tNotLessLess: '\\u226A\\u0338',\n\tNotLessSlantEqual: '\\u2A7D\\u0338',\n\tNotLessTilde: '\\u2274',\n\tNotNestedGreaterGreater: '\\u2AA2\\u0338',\n\tNotNestedLessLess: '\\u2AA1\\u0338',\n\tnotni: '\\u220C',\n\tnotniva: '\\u220C',\n\tnotnivb: '\\u22FE',\n\tnotnivc: '\\u22FD',\n\tNotPrecedes: '\\u2280',\n\tNotPrecedesEqual: '\\u2AAF\\u0338',\n\tNotPrecedesSlantEqual: '\\u22E0',\n\tNotReverseElement: '\\u220C',\n\tNotRightTriangle: '\\u22EB',\n\tNotRightTriangleBar: '\\u29D0\\u0338',\n\tNotRightTriangleEqual: '\\u22ED',\n\tNotSquareSubset: '\\u228F\\u0338',\n\tNotSquareSubsetEqual: '\\u22E2',\n\tNotSquareSuperset: '\\u2290\\u0338',\n\tNotSquareSupersetEqual: '\\u22E3',\n\tNotSubset: '\\u2282\\u20D2',\n\tNotSubsetEqual: '\\u2288',\n\tNotSucceeds: '\\u2281',\n\tNotSucceedsEqual: '\\u2AB0\\u0338',\n\tNotSucceedsSlantEqual: '\\u22E1',\n\tNotSucceedsTilde: '\\u227F\\u0338',\n\tNotSuperset: '\\u2283\\u20D2',\n\tNotSupersetEqual: '\\u2289',\n\tNotTilde: '\\u2241',\n\tNotTildeEqual: '\\u2244',\n\tNotTildeFullEqual: '\\u2247',\n\tNotTildeTilde: '\\u2249',\n\tNotVerticalBar: '\\u2224',\n\tnpar: '\\u2226',\n\tnparallel: '\\u2226',\n\tnparsl: '\\u2AFD\\u20E5',\n\tnpart: '\\u2202\\u0338',\n\tnpolint: '\\u2A14',\n\tnpr: '\\u2280',\n\tnprcue: '\\u22E0',\n\tnpre: '\\u2AAF\\u0338',\n\tnprec: '\\u2280',\n\tnpreceq: '\\u2AAF\\u0338',\n\tnrArr: '\\u21CF',\n\tnrarr: '\\u219B',\n\tnrarrc: '\\u2933\\u0338',\n\tnrarrw: '\\u219D\\u0338',\n\tnRightarrow: '\\u21CF',\n\tnrightarrow: '\\u219B',\n\tnrtri: '\\u22EB',\n\tnrtrie: '\\u22ED',\n\tnsc: '\\u2281',\n\tnsccue: '\\u22E1',\n\tnsce: '\\u2AB0\\u0338',\n\tNscr: '\\uD835\\uDCA9',\n\tnscr: '\\uD835\\uDCC3',\n\tnshortmid: '\\u2224',\n\tnshortparallel: '\\u2226',\n\tnsim: '\\u2241',\n\tnsime: '\\u2244',\n\tnsimeq: '\\u2244',\n\tnsmid: '\\u2224',\n\tnspar: '\\u2226',\n\tnsqsube: '\\u22E2',\n\tnsqsupe: '\\u22E3',\n\tnsub: '\\u2284',\n\tnsubE: '\\u2AC5\\u0338',\n\tnsube: '\\u2288',\n\tnsubset: '\\u2282\\u20D2',\n\tnsubseteq: '\\u2288',\n\tnsubseteqq: '\\u2AC5\\u0338',\n\tnsucc: '\\u2281',\n\tnsucceq: '\\u2AB0\\u0338',\n\tnsup: '\\u2285',\n\tnsupE: '\\u2AC6\\u0338',\n\tnsupe: '\\u2289',\n\tnsupset: '\\u2283\\u20D2',\n\tnsupseteq: '\\u2289',\n\tnsupseteqq: '\\u2AC6\\u0338',\n\tntgl: '\\u2279',\n\tNtilde: '\\u00D1',\n\tntilde: '\\u00F1',\n\tntlg: '\\u2278',\n\tntriangleleft: '\\u22EA',\n\tntrianglelefteq: '\\u22EC',\n\tntriangleright: '\\u22EB',\n\tntrianglerighteq: '\\u22ED',\n\tNu: '\\u039D',\n\tnu: '\\u03BD',\n\tnum: '\\u0023',\n\tnumero: '\\u2116',\n\tnumsp: '\\u2007',\n\tnvap: '\\u224D\\u20D2',\n\tnVDash: '\\u22AF',\n\tnVdash: '\\u22AE',\n\tnvDash: '\\u22AD',\n\tnvdash: '\\u22AC',\n\tnvge: '\\u2265\\u20D2',\n\tnvgt: '\\u003E\\u20D2',\n\tnvHarr: '\\u2904',\n\tnvinfin: '\\u29DE',\n\tnvlArr: '\\u2902',\n\tnvle: '\\u2264\\u20D2',\n\tnvlt: '\\u003C\\u20D2',\n\tnvltrie: '\\u22B4\\u20D2',\n\tnvrArr: '\\u2903',\n\tnvrtrie: '\\u22B5\\u20D2',\n\tnvsim: '\\u223C\\u20D2',\n\tnwarhk: '\\u2923',\n\tnwArr: '\\u21D6',\n\tnwarr: '\\u2196',\n\tnwarrow: '\\u2196',\n\tnwnear: '\\u2927',\n\tOacute: '\\u00D3',\n\toacute: '\\u00F3',\n\toast: '\\u229B',\n\tocir: '\\u229A',\n\tOcirc: '\\u00D4',\n\tocirc: '\\u00F4',\n\tOcy: '\\u041E',\n\tocy: '\\u043E',\n\todash: '\\u229D',\n\tOdblac: '\\u0150',\n\todblac: '\\u0151',\n\todiv: '\\u2A38',\n\todot: '\\u2299',\n\todsold: '\\u29BC',\n\tOElig: '\\u0152',\n\toelig: '\\u0153',\n\tofcir: '\\u29BF',\n\tOfr: '\\uD835\\uDD12',\n\tofr: '\\uD835\\uDD2C',\n\togon: '\\u02DB',\n\tOgrave: '\\u00D2',\n\tograve: '\\u00F2',\n\togt: '\\u29C1',\n\tohbar: '\\u29B5',\n\tohm: '\\u03A9',\n\toint: '\\u222E',\n\tolarr: '\\u21BA',\n\tolcir: '\\u29BE',\n\tolcross: '\\u29BB',\n\toline: '\\u203E',\n\tolt: '\\u29C0',\n\tOmacr: '\\u014C',\n\tomacr: '\\u014D',\n\tOmega: '\\u03A9',\n\tomega: '\\u03C9',\n\tOmicron: '\\u039F',\n\tomicron: '\\u03BF',\n\tomid: '\\u29B6',\n\tominus: '\\u2296',\n\tOopf: '\\uD835\\uDD46',\n\toopf: '\\uD835\\uDD60',\n\topar: '\\u29B7',\n\tOpenCurlyDoubleQuote: '\\u201C',\n\tOpenCurlyQuote: '\\u2018',\n\toperp: '\\u29B9',\n\toplus: '\\u2295',\n\tOr: '\\u2A54',\n\tor: '\\u2228',\n\torarr: '\\u21BB',\n\tord: '\\u2A5D',\n\torder: '\\u2134',\n\torderof: '\\u2134',\n\tordf: '\\u00AA',\n\tordm: '\\u00BA',\n\torigof: '\\u22B6',\n\toror: '\\u2A56',\n\torslope: '\\u2A57',\n\torv: '\\u2A5B',\n\toS: '\\u24C8',\n\tOscr: '\\uD835\\uDCAA',\n\toscr: '\\u2134',\n\tOslash: '\\u00D8',\n\toslash: '\\u00F8',\n\tosol: '\\u2298',\n\tOtilde: '\\u00D5',\n\totilde: '\\u00F5',\n\tOtimes: '\\u2A37',\n\totimes: '\\u2297',\n\totimesas: '\\u2A36',\n\tOuml: '\\u00D6',\n\touml: '\\u00F6',\n\tovbar: '\\u233D',\n\tOverBar: '\\u203E',\n\tOverBrace: '\\u23DE',\n\tOverBracket: '\\u23B4',\n\tOverParenthesis: '\\u23DC',\n\tpar: '\\u2225',\n\tpara: '\\u00B6',\n\tparallel: '\\u2225',\n\tparsim: '\\u2AF3',\n\tparsl: '\\u2AFD',\n\tpart: '\\u2202',\n\tPartialD: '\\u2202',\n\tPcy: '\\u041F',\n\tpcy: '\\u043F',\n\tpercnt: '\\u0025',\n\tperiod: '\\u002E',\n\tpermil: '\\u2030',\n\tperp: '\\u22A5',\n\tpertenk: '\\u2031',\n\tPfr: '\\uD835\\uDD13',\n\tpfr: '\\uD835\\uDD2D',\n\tPhi: '\\u03A6',\n\tphi: '\\u03C6',\n\tphiv: '\\u03D5',\n\tphmmat: '\\u2133',\n\tphone: '\\u260E',\n\tPi: '\\u03A0',\n\tpi: '\\u03C0',\n\tpitchfork: '\\u22D4',\n\tpiv: '\\u03D6',\n\tplanck: '\\u210F',\n\tplanckh: '\\u210E',\n\tplankv: '\\u210F',\n\tplus: '\\u002B',\n\tplusacir: '\\u2A23',\n\tplusb: '\\u229E',\n\tpluscir: '\\u2A22',\n\tplusdo: '\\u2214',\n\tplusdu: '\\u2A25',\n\tpluse: '\\u2A72',\n\tPlusMinus: '\\u00B1',\n\tplusmn: '\\u00B1',\n\tplussim: '\\u2A26',\n\tplustwo: '\\u2A27',\n\tpm: '\\u00B1',\n\tPoincareplane: '\\u210C',\n\tpointint: '\\u2A15',\n\tPopf: '\\u2119',\n\tpopf: '\\uD835\\uDD61',\n\tpound: '\\u00A3',\n\tPr: '\\u2ABB',\n\tpr: '\\u227A',\n\tprap: '\\u2AB7',\n\tprcue: '\\u227C',\n\tprE: '\\u2AB3',\n\tpre: '\\u2AAF',\n\tprec: '\\u227A',\n\tprecapprox: '\\u2AB7',\n\tpreccurlyeq: '\\u227C',\n\tPrecedes: '\\u227A',\n\tPrecedesEqual: '\\u2AAF',\n\tPrecedesSlantEqual: '\\u227C',\n\tPrecedesTilde: '\\u227E',\n\tpreceq: '\\u2AAF',\n\tprecnapprox: '\\u2AB9',\n\tprecneqq: '\\u2AB5',\n\tprecnsim: '\\u22E8',\n\tprecsim: '\\u227E',\n\tPrime: '\\u2033',\n\tprime: '\\u2032',\n\tprimes: '\\u2119',\n\tprnap: '\\u2AB9',\n\tprnE: '\\u2AB5',\n\tprnsim: '\\u22E8',\n\tprod: '\\u220F',\n\tProduct: '\\u220F',\n\tprofalar: '\\u232E',\n\tprofline: '\\u2312',\n\tprofsurf: '\\u2313',\n\tprop: '\\u221D',\n\tProportion: '\\u2237',\n\tProportional: '\\u221D',\n\tpropto: '\\u221D',\n\tprsim: '\\u227E',\n\tprurel: '\\u22B0',\n\tPscr: '\\uD835\\uDCAB',\n\tpscr: '\\uD835\\uDCC5',\n\tPsi: '\\u03A8',\n\tpsi: '\\u03C8',\n\tpuncsp: '\\u2008',\n\tQfr: '\\uD835\\uDD14',\n\tqfr: '\\uD835\\uDD2E',\n\tqint: '\\u2A0C',\n\tQopf: '\\u211A',\n\tqopf: '\\uD835\\uDD62',\n\tqprime: '\\u2057',\n\tQscr: '\\uD835\\uDCAC',\n\tqscr: '\\uD835\\uDCC6',\n\tquaternions: '\\u210D',\n\tquatint: '\\u2A16',\n\tquest: '\\u003F',\n\tquesteq: '\\u225F',\n\tQUOT: '\\u0022',\n\tquot: '\\u0022',\n\trAarr: '\\u21DB',\n\trace: '\\u223D\\u0331',\n\tRacute: '\\u0154',\n\tracute: '\\u0155',\n\tradic: '\\u221A',\n\traemptyv: '\\u29B3',\n\tRang: '\\u27EB',\n\trang: '\\u27E9',\n\trangd: '\\u2992',\n\trange: '\\u29A5',\n\trangle: '\\u27E9',\n\traquo: '\\u00BB',\n\tRarr: '\\u21A0',\n\trArr: '\\u21D2',\n\trarr: '\\u2192',\n\trarrap: '\\u2975',\n\trarrb: '\\u21E5',\n\trarrbfs: '\\u2920',\n\trarrc: '\\u2933',\n\trarrfs: '\\u291E',\n\trarrhk: '\\u21AA',\n\trarrlp: '\\u21AC',\n\trarrpl: '\\u2945',\n\trarrsim: '\\u2974',\n\tRarrtl: '\\u2916',\n\trarrtl: '\\u21A3',\n\trarrw: '\\u219D',\n\trAtail: '\\u291C',\n\tratail: '\\u291A',\n\tratio: '\\u2236',\n\trationals: '\\u211A',\n\tRBarr: '\\u2910',\n\trBarr: '\\u290F',\n\trbarr: '\\u290D',\n\trbbrk: '\\u2773',\n\trbrace: '\\u007D',\n\trbrack: '\\u005D',\n\trbrke: '\\u298C',\n\trbrksld: '\\u298E',\n\trbrkslu: '\\u2990',\n\tRcaron: '\\u0158',\n\trcaron: '\\u0159',\n\tRcedil: '\\u0156',\n\trcedil: '\\u0157',\n\trceil: '\\u2309',\n\trcub: '\\u007D',\n\tRcy: '\\u0420',\n\trcy: '\\u0440',\n\trdca: '\\u2937',\n\trdldhar: '\\u2969',\n\trdquo: '\\u201D',\n\trdquor: '\\u201D',\n\trdsh: '\\u21B3',\n\tRe: '\\u211C',\n\treal: '\\u211C',\n\trealine: '\\u211B',\n\trealpart: '\\u211C',\n\treals: '\\u211D',\n\trect: '\\u25AD',\n\tREG: '\\u00AE',\n\treg: '\\u00AE',\n\tReverseElement: '\\u220B',\n\tReverseEquilibrium: '\\u21CB',\n\tReverseUpEquilibrium: '\\u296F',\n\trfisht: '\\u297D',\n\trfloor: '\\u230B',\n\tRfr: '\\u211C',\n\trfr: '\\uD835\\uDD2F',\n\trHar: '\\u2964',\n\trhard: '\\u21C1',\n\trharu: '\\u21C0',\n\trharul: '\\u296C',\n\tRho: '\\u03A1',\n\trho: '\\u03C1',\n\trhov: '\\u03F1',\n\tRightAngleBracket: '\\u27E9',\n\tRightArrow: '\\u2192',\n\tRightarrow: '\\u21D2',\n\trightarrow: '\\u2192',\n\tRightArrowBar: '\\u21E5',\n\tRightArrowLeftArrow: '\\u21C4',\n\trightarrowtail: '\\u21A3',\n\tRightCeiling: '\\u2309',\n\tRightDoubleBracket: '\\u27E7',\n\tRightDownTeeVector: '\\u295D',\n\tRightDownVector: '\\u21C2',\n\tRightDownVectorBar: '\\u2955',\n\tRightFloor: '\\u230B',\n\trightharpoondown: '\\u21C1',\n\trightharpoonup: '\\u21C0',\n\trightleftarrows: '\\u21C4',\n\trightleftharpoons: '\\u21CC',\n\trightrightarrows: '\\u21C9',\n\trightsquigarrow: '\\u219D',\n\tRightTee: '\\u22A2',\n\tRightTeeArrow: '\\u21A6',\n\tRightTeeVector: '\\u295B',\n\trightthreetimes: '\\u22CC',\n\tRightTriangle: '\\u22B3',\n\tRightTriangleBar: '\\u29D0',\n\tRightTriangleEqual: '\\u22B5',\n\tRightUpDownVector: '\\u294F',\n\tRightUpTeeVector: '\\u295C',\n\tRightUpVector: '\\u21BE',\n\tRightUpVectorBar: '\\u2954',\n\tRightVector: '\\u21C0',\n\tRightVectorBar: '\\u2953',\n\tring: '\\u02DA',\n\trisingdotseq: '\\u2253',\n\trlarr: '\\u21C4',\n\trlhar: '\\u21CC',\n\trlm: '\\u200F',\n\trmoust: '\\u23B1',\n\trmoustache: '\\u23B1',\n\trnmid: '\\u2AEE',\n\troang: '\\u27ED',\n\troarr: '\\u21FE',\n\trobrk: '\\u27E7',\n\tropar: '\\u2986',\n\tRopf: '\\u211D',\n\tropf: '\\uD835\\uDD63',\n\troplus: '\\u2A2E',\n\trotimes: '\\u2A35',\n\tRoundImplies: '\\u2970',\n\trpar: '\\u0029',\n\trpargt: '\\u2994',\n\trppolint: '\\u2A12',\n\trrarr: '\\u21C9',\n\tRrightarrow: '\\u21DB',\n\trsaquo: '\\u203A',\n\tRscr: '\\u211B',\n\trscr: '\\uD835\\uDCC7',\n\tRsh: '\\u21B1',\n\trsh: '\\u21B1',\n\trsqb: '\\u005D',\n\trsquo: '\\u2019',\n\trsquor: '\\u2019',\n\trthree: '\\u22CC',\n\trtimes: '\\u22CA',\n\trtri: '\\u25B9',\n\trtrie: '\\u22B5',\n\trtrif: '\\u25B8',\n\trtriltri: '\\u29CE',\n\tRuleDelayed: '\\u29F4',\n\truluhar: '\\u2968',\n\trx: '\\u211E',\n\tSacute: '\\u015A',\n\tsacute: '\\u015B',\n\tsbquo: '\\u201A',\n\tSc: '\\u2ABC',\n\tsc: '\\u227B',\n\tscap: '\\u2AB8',\n\tScaron: '\\u0160',\n\tscaron: '\\u0161',\n\tsccue: '\\u227D',\n\tscE: '\\u2AB4',\n\tsce: '\\u2AB0',\n\tScedil: '\\u015E',\n\tscedil: '\\u015F',\n\tScirc: '\\u015C',\n\tscirc: '\\u015D',\n\tscnap: '\\u2ABA',\n\tscnE: '\\u2AB6',\n\tscnsim: '\\u22E9',\n\tscpolint: '\\u2A13',\n\tscsim: '\\u227F',\n\tScy: '\\u0421',\n\tscy: '\\u0441',\n\tsdot: '\\u22C5',\n\tsdotb: '\\u22A1',\n\tsdote: '\\u2A66',\n\tsearhk: '\\u2925',\n\tseArr: '\\u21D8',\n\tsearr: '\\u2198',\n\tsearrow: '\\u2198',\n\tsect: '\\u00A7',\n\tsemi: '\\u003B',\n\tseswar: '\\u2929',\n\tsetminus: '\\u2216',\n\tsetmn: '\\u2216',\n\tsext: '\\u2736',\n\tSfr: '\\uD835\\uDD16',\n\tsfr: '\\uD835\\uDD30',\n\tsfrown: '\\u2322',\n\tsharp: '\\u266F',\n\tSHCHcy: '\\u0429',\n\tshchcy: '\\u0449',\n\tSHcy: '\\u0428',\n\tshcy: '\\u0448',\n\tShortDownArrow: '\\u2193',\n\tShortLeftArrow: '\\u2190',\n\tshortmid: '\\u2223',\n\tshortparallel: '\\u2225',\n\tShortRightArrow: '\\u2192',\n\tShortUpArrow: '\\u2191',\n\tshy: '\\u00AD',\n\tSigma: '\\u03A3',\n\tsigma: '\\u03C3',\n\tsigmaf: '\\u03C2',\n\tsigmav: '\\u03C2',\n\tsim: '\\u223C',\n\tsimdot: '\\u2A6A',\n\tsime: '\\u2243',\n\tsimeq: '\\u2243',\n\tsimg: '\\u2A9E',\n\tsimgE: '\\u2AA0',\n\tsiml: '\\u2A9D',\n\tsimlE: '\\u2A9F',\n\tsimne: '\\u2246',\n\tsimplus: '\\u2A24',\n\tsimrarr: '\\u2972',\n\tslarr: '\\u2190',\n\tSmallCircle: '\\u2218',\n\tsmallsetminus: '\\u2216',\n\tsmashp: '\\u2A33',\n\tsmeparsl: '\\u29E4',\n\tsmid: '\\u2223',\n\tsmile: '\\u2323',\n\tsmt: '\\u2AAA',\n\tsmte: '\\u2AAC',\n\tsmtes: '\\u2AAC\\uFE00',\n\tSOFTcy: '\\u042C',\n\tsoftcy: '\\u044C',\n\tsol: '\\u002F',\n\tsolb: '\\u29C4',\n\tsolbar: '\\u233F',\n\tSopf: '\\uD835\\uDD4A',\n\tsopf: '\\uD835\\uDD64',\n\tspades: '\\u2660',\n\tspadesuit: '\\u2660',\n\tspar: '\\u2225',\n\tsqcap: '\\u2293',\n\tsqcaps: '\\u2293\\uFE00',\n\tsqcup: '\\u2294',\n\tsqcups: '\\u2294\\uFE00',\n\tSqrt: '\\u221A',\n\tsqsub: '\\u228F',\n\tsqsube: '\\u2291',\n\tsqsubset: '\\u228F',\n\tsqsubseteq: '\\u2291',\n\tsqsup: '\\u2290',\n\tsqsupe: '\\u2292',\n\tsqsupset: '\\u2290',\n\tsqsupseteq: '\\u2292',\n\tsqu: '\\u25A1',\n\tSquare: '\\u25A1',\n\tsquare: '\\u25A1',\n\tSquareIntersection: '\\u2293',\n\tSquareSubset: '\\u228F',\n\tSquareSubsetEqual: '\\u2291',\n\tSquareSuperset: '\\u2290',\n\tSquareSupersetEqual: '\\u2292',\n\tSquareUnion: '\\u2294',\n\tsquarf: '\\u25AA',\n\tsquf: '\\u25AA',\n\tsrarr: '\\u2192',\n\tSscr: '\\uD835\\uDCAE',\n\tsscr: '\\uD835\\uDCC8',\n\tssetmn: '\\u2216',\n\tssmile: '\\u2323',\n\tsstarf: '\\u22C6',\n\tStar: '\\u22C6',\n\tstar: '\\u2606',\n\tstarf: '\\u2605',\n\tstraightepsilon: '\\u03F5',\n\tstraightphi: '\\u03D5',\n\tstrns: '\\u00AF',\n\tSub: '\\u22D0',\n\tsub: '\\u2282',\n\tsubdot: '\\u2ABD',\n\tsubE: '\\u2AC5',\n\tsube: '\\u2286',\n\tsubedot: '\\u2AC3',\n\tsubmult: '\\u2AC1',\n\tsubnE: '\\u2ACB',\n\tsubne: '\\u228A',\n\tsubplus: '\\u2ABF',\n\tsubrarr: '\\u2979',\n\tSubset: '\\u22D0',\n\tsubset: '\\u2282',\n\tsubseteq: '\\u2286',\n\tsubseteqq: '\\u2AC5',\n\tSubsetEqual: '\\u2286',\n\tsubsetneq: '\\u228A',\n\tsubsetneqq: '\\u2ACB',\n\tsubsim: '\\u2AC7',\n\tsubsub: '\\u2AD5',\n\tsubsup: '\\u2AD3',\n\tsucc: '\\u227B',\n\tsuccapprox: '\\u2AB8',\n\tsucccurlyeq: '\\u227D',\n\tSucceeds: '\\u227B',\n\tSucceedsEqual: '\\u2AB0',\n\tSucceedsSlantEqual: '\\u227D',\n\tSucceedsTilde: '\\u227F',\n\tsucceq: '\\u2AB0',\n\tsuccnapprox: '\\u2ABA',\n\tsuccneqq: '\\u2AB6',\n\tsuccnsim: '\\u22E9',\n\tsuccsim: '\\u227F',\n\tSuchThat: '\\u220B',\n\tSum: '\\u2211',\n\tsum: '\\u2211',\n\tsung: '\\u266A',\n\tSup: '\\u22D1',\n\tsup: '\\u2283',\n\tsup1: '\\u00B9',\n\tsup2: '\\u00B2',\n\tsup3: '\\u00B3',\n\tsupdot: '\\u2ABE',\n\tsupdsub: '\\u2AD8',\n\tsupE: '\\u2AC6',\n\tsupe: '\\u2287',\n\tsupedot: '\\u2AC4',\n\tSuperset: '\\u2283',\n\tSupersetEqual: '\\u2287',\n\tsuphsol: '\\u27C9',\n\tsuphsub: '\\u2AD7',\n\tsuplarr: '\\u297B',\n\tsupmult: '\\u2AC2',\n\tsupnE: '\\u2ACC',\n\tsupne: '\\u228B',\n\tsupplus: '\\u2AC0',\n\tSupset: '\\u22D1',\n\tsupset: '\\u2283',\n\tsupseteq: '\\u2287',\n\tsupseteqq: '\\u2AC6',\n\tsupsetneq: '\\u228B',\n\tsupsetneqq: '\\u2ACC',\n\tsupsim: '\\u2AC8',\n\tsupsub: '\\u2AD4',\n\tsupsup: '\\u2AD6',\n\tswarhk: '\\u2926',\n\tswArr: '\\u21D9',\n\tswarr: '\\u2199',\n\tswarrow: '\\u2199',\n\tswnwar: '\\u292A',\n\tszlig: '\\u00DF',\n\tTab: '\\u0009',\n\ttarget: '\\u2316',\n\tTau: '\\u03A4',\n\ttau: '\\u03C4',\n\ttbrk: '\\u23B4',\n\tTcaron: '\\u0164',\n\ttcaron: '\\u0165',\n\tTcedil: '\\u0162',\n\ttcedil: '\\u0163',\n\tTcy: '\\u0422',\n\ttcy: '\\u0442',\n\ttdot: '\\u20DB',\n\ttelrec: '\\u2315',\n\tTfr: '\\uD835\\uDD17',\n\ttfr: '\\uD835\\uDD31',\n\tthere4: '\\u2234',\n\tTherefore: '\\u2234',\n\ttherefore: '\\u2234',\n\tTheta: '\\u0398',\n\ttheta: '\\u03B8',\n\tthetasym: '\\u03D1',\n\tthetav: '\\u03D1',\n\tthickapprox: '\\u2248',\n\tthicksim: '\\u223C',\n\tThickSpace: '\\u205F\\u200A',\n\tthinsp: '\\u2009',\n\tThinSpace: '\\u2009',\n\tthkap: '\\u2248',\n\tthksim: '\\u223C',\n\tTHORN: '\\u00DE',\n\tthorn: '\\u00FE',\n\tTilde: '\\u223C',\n\ttilde: '\\u02DC',\n\tTildeEqual: '\\u2243',\n\tTildeFullEqual: '\\u2245',\n\tTildeTilde: '\\u2248',\n\ttimes: '\\u00D7',\n\ttimesb: '\\u22A0',\n\ttimesbar: '\\u2A31',\n\ttimesd: '\\u2A30',\n\ttint: '\\u222D',\n\ttoea: '\\u2928',\n\ttop: '\\u22A4',\n\ttopbot: '\\u2336',\n\ttopcir: '\\u2AF1',\n\tTopf: '\\uD835\\uDD4B',\n\ttopf: '\\uD835\\uDD65',\n\ttopfork: '\\u2ADA',\n\ttosa: '\\u2929',\n\ttprime: '\\u2034',\n\tTRADE: '\\u2122',\n\ttrade: '\\u2122',\n\ttriangle: '\\u25B5',\n\ttriangledown: '\\u25BF',\n\ttriangleleft: '\\u25C3',\n\ttrianglelefteq: '\\u22B4',\n\ttriangleq: '\\u225C',\n\ttriangleright: '\\u25B9',\n\ttrianglerighteq: '\\u22B5',\n\ttridot: '\\u25EC',\n\ttrie: '\\u225C',\n\ttriminus: '\\u2A3A',\n\tTripleDot: '\\u20DB',\n\ttriplus: '\\u2A39',\n\ttrisb: '\\u29CD',\n\ttritime: '\\u2A3B',\n\ttrpezium: '\\u23E2',\n\tTscr: '\\uD835\\uDCAF',\n\ttscr: '\\uD835\\uDCC9',\n\tTScy: '\\u0426',\n\ttscy: '\\u0446',\n\tTSHcy: '\\u040B',\n\ttshcy: '\\u045B',\n\tTstrok: '\\u0166',\n\ttstrok: '\\u0167',\n\ttwixt: '\\u226C',\n\ttwoheadleftarrow: '\\u219E',\n\ttwoheadrightarrow: '\\u21A0',\n\tUacute: '\\u00DA',\n\tuacute: '\\u00FA',\n\tUarr: '\\u219F',\n\tuArr: '\\u21D1',\n\tuarr: '\\u2191',\n\tUarrocir: '\\u2949',\n\tUbrcy: '\\u040E',\n\tubrcy: '\\u045E',\n\tUbreve: '\\u016C',\n\tubreve: '\\u016D',\n\tUcirc: '\\u00DB',\n\tucirc: '\\u00FB',\n\tUcy: '\\u0423',\n\tucy: '\\u0443',\n\tudarr: '\\u21C5',\n\tUdblac: '\\u0170',\n\tudblac: '\\u0171',\n\tudhar: '\\u296E',\n\tufisht: '\\u297E',\n\tUfr: '\\uD835\\uDD18',\n\tufr: '\\uD835\\uDD32',\n\tUgrave: '\\u00D9',\n\tugrave: '\\u00F9',\n\tuHar: '\\u2963',\n\tuharl: '\\u21BF',\n\tuharr: '\\u21BE',\n\tuhblk: '\\u2580',\n\tulcorn: '\\u231C',\n\tulcorner: '\\u231C',\n\tulcrop: '\\u230F',\n\tultri: '\\u25F8',\n\tUmacr: '\\u016A',\n\tumacr: '\\u016B',\n\tuml: '\\u00A8',\n\tUnderBar: '\\u005F',\n\tUnderBrace: '\\u23DF',\n\tUnderBracket: '\\u23B5',\n\tUnderParenthesis: '\\u23DD',\n\tUnion: '\\u22C3',\n\tUnionPlus: '\\u228E',\n\tUogon: '\\u0172',\n\tuogon: '\\u0173',\n\tUopf: '\\uD835\\uDD4C',\n\tuopf: '\\uD835\\uDD66',\n\tUpArrow: '\\u2191',\n\tUparrow: '\\u21D1',\n\tuparrow: '\\u2191',\n\tUpArrowBar: '\\u2912',\n\tUpArrowDownArrow: '\\u21C5',\n\tUpDownArrow: '\\u2195',\n\tUpdownarrow: '\\u21D5',\n\tupdownarrow: '\\u2195',\n\tUpEquilibrium: '\\u296E',\n\tupharpoonleft: '\\u21BF',\n\tupharpoonright: '\\u21BE',\n\tuplus: '\\u228E',\n\tUpperLeftArrow: '\\u2196',\n\tUpperRightArrow: '\\u2197',\n\tUpsi: '\\u03D2',\n\tupsi: '\\u03C5',\n\tupsih: '\\u03D2',\n\tUpsilon: '\\u03A5',\n\tupsilon: '\\u03C5',\n\tUpTee: '\\u22A5',\n\tUpTeeArrow: '\\u21A5',\n\tupuparrows: '\\u21C8',\n\turcorn: '\\u231D',\n\turcorner: '\\u231D',\n\turcrop: '\\u230E',\n\tUring: '\\u016E',\n\turing: '\\u016F',\n\turtri: '\\u25F9',\n\tUscr: '\\uD835\\uDCB0',\n\tuscr: '\\uD835\\uDCCA',\n\tutdot: '\\u22F0',\n\tUtilde: '\\u0168',\n\tutilde: '\\u0169',\n\tutri: '\\u25B5',\n\tutrif: '\\u25B4',\n\tuuarr: '\\u21C8',\n\tUuml: '\\u00DC',\n\tuuml: '\\u00FC',\n\tuwangle: '\\u29A7',\n\tvangrt: '\\u299C',\n\tvarepsilon: '\\u03F5',\n\tvarkappa: '\\u03F0',\n\tvarnothing: '\\u2205',\n\tvarphi: '\\u03D5',\n\tvarpi: '\\u03D6',\n\tvarpropto: '\\u221D',\n\tvArr: '\\u21D5',\n\tvarr: '\\u2195',\n\tvarrho: '\\u03F1',\n\tvarsigma: '\\u03C2',\n\tvarsubsetneq: '\\u228A\\uFE00',\n\tvarsubsetneqq: '\\u2ACB\\uFE00',\n\tvarsupsetneq: '\\u228B\\uFE00',\n\tvarsupsetneqq: '\\u2ACC\\uFE00',\n\tvartheta: '\\u03D1',\n\tvartriangleleft: '\\u22B2',\n\tvartriangleright: '\\u22B3',\n\tVbar: '\\u2AEB',\n\tvBar: '\\u2AE8',\n\tvBarv: '\\u2AE9',\n\tVcy: '\\u0412',\n\tvcy: '\\u0432',\n\tVDash: '\\u22AB',\n\tVdash: '\\u22A9',\n\tvDash: '\\u22A8',\n\tvdash: '\\u22A2',\n\tVdashl: '\\u2AE6',\n\tVee: '\\u22C1',\n\tvee: '\\u2228',\n\tveebar: '\\u22BB',\n\tveeeq: '\\u225A',\n\tvellip: '\\u22EE',\n\tVerbar: '\\u2016',\n\tverbar: '\\u007C',\n\tVert: '\\u2016',\n\tvert: '\\u007C',\n\tVerticalBar: '\\u2223',\n\tVerticalLine: '\\u007C',\n\tVerticalSeparator: '\\u2758',\n\tVerticalTilde: '\\u2240',\n\tVeryThinSpace: '\\u200A',\n\tVfr: '\\uD835\\uDD19',\n\tvfr: '\\uD835\\uDD33',\n\tvltri: '\\u22B2',\n\tvnsub: '\\u2282\\u20D2',\n\tvnsup: '\\u2283\\u20D2',\n\tVopf: '\\uD835\\uDD4D',\n\tvopf: '\\uD835\\uDD67',\n\tvprop: '\\u221D',\n\tvrtri: '\\u22B3',\n\tVscr: '\\uD835\\uDCB1',\n\tvscr: '\\uD835\\uDCCB',\n\tvsubnE: '\\u2ACB\\uFE00',\n\tvsubne: '\\u228A\\uFE00',\n\tvsupnE: '\\u2ACC\\uFE00',\n\tvsupne: '\\u228B\\uFE00',\n\tVvdash: '\\u22AA',\n\tvzigzag: '\\u299A',\n\tWcirc: '\\u0174',\n\twcirc: '\\u0175',\n\twedbar: '\\u2A5F',\n\tWedge: '\\u22C0',\n\twedge: '\\u2227',\n\twedgeq: '\\u2259',\n\tweierp: '\\u2118',\n\tWfr: '\\uD835\\uDD1A',\n\twfr: '\\uD835\\uDD34',\n\tWopf: '\\uD835\\uDD4E',\n\twopf: '\\uD835\\uDD68',\n\twp: '\\u2118',\n\twr: '\\u2240',\n\twreath: '\\u2240',\n\tWscr: '\\uD835\\uDCB2',\n\twscr: '\\uD835\\uDCCC',\n\txcap: '\\u22C2',\n\txcirc: '\\u25EF',\n\txcup: '\\u22C3',\n\txdtri: '\\u25BD',\n\tXfr: '\\uD835\\uDD1B',\n\txfr: '\\uD835\\uDD35',\n\txhArr: '\\u27FA',\n\txharr: '\\u27F7',\n\tXi: '\\u039E',\n\txi: '\\u03BE',\n\txlArr: '\\u27F8',\n\txlarr: '\\u27F5',\n\txmap: '\\u27FC',\n\txnis: '\\u22FB',\n\txodot: '\\u2A00',\n\tXopf: '\\uD835\\uDD4F',\n\txopf: '\\uD835\\uDD69',\n\txoplus: '\\u2A01',\n\txotime: '\\u2A02',\n\txrArr: '\\u27F9',\n\txrarr: '\\u27F6',\n\tXscr: '\\uD835\\uDCB3',\n\txscr: '\\uD835\\uDCCD',\n\txsqcup: '\\u2A06',\n\txuplus: '\\u2A04',\n\txutri: '\\u25B3',\n\txvee: '\\u22C1',\n\txwedge: '\\u22C0',\n\tYacute: '\\u00DD',\n\tyacute: '\\u00FD',\n\tYAcy: '\\u042F',\n\tyacy: '\\u044F',\n\tYcirc: '\\u0176',\n\tycirc: '\\u0177',\n\tYcy: '\\u042B',\n\tycy: '\\u044B',\n\tyen: '\\u00A5',\n\tYfr: '\\uD835\\uDD1C',\n\tyfr: '\\uD835\\uDD36',\n\tYIcy: '\\u0407',\n\tyicy: '\\u0457',\n\tYopf: '\\uD835\\uDD50',\n\tyopf: '\\uD835\\uDD6A',\n\tYscr: '\\uD835\\uDCB4',\n\tyscr: '\\uD835\\uDCCE',\n\tYUcy: '\\u042E',\n\tyucy: '\\u044E',\n\tYuml: '\\u0178',\n\tyuml: '\\u00FF',\n\tZacute: '\\u0179',\n\tzacute: '\\u017A',\n\tZcaron: '\\u017D',\n\tzcaron: '\\u017E',\n\tZcy: '\\u0417',\n\tzcy: '\\u0437',\n\tZdot: '\\u017B',\n\tzdot: '\\u017C',\n\tzeetrf: '\\u2128',\n\tZeroWidthSpace: '\\u200B',\n\tZeta: '\\u0396',\n\tzeta: '\\u03B6',\n\tZfr: '\\u2128',\n\tzfr: '\\uD835\\uDD37',\n\tZHcy: '\\u0416',\n\tzhcy: '\\u0436',\n\tzigrarr: '\\u21DD',\n\tZopf: '\\u2124',\n\tzopf: '\\uD835\\uDD6B',\n\tZscr: '\\uD835\\uDCB5',\n\tzscr: '\\uD835\\uDCCF',\n\tzwj: '\\u200D',\n\tzwnj: '\\u200C',\n});\n\n/**\n * @deprecated\n * Use `HTML_ENTITIES` instead.\n * @see {@link HTML_ENTITIES}\n */\nexports.entityMap = exports.HTML_ENTITIES;\n","'use strict';\n\nvar conventions = require('./conventions');\nvar g = require('./grammar');\nvar errors = require('./errors');\n\nvar isHTMLEscapableRawTextElement = conventions.isHTMLEscapableRawTextElement;\nvar isHTMLMimeType = conventions.isHTMLMimeType;\nvar isHTMLRawTextElement = conventions.isHTMLRawTextElement;\nvar hasOwn = conventions.hasOwn;\nvar NAMESPACE = conventions.NAMESPACE;\nvar ParseError = errors.ParseError;\nvar DOMException = errors.DOMException;\n\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0; //tag name offerring\nvar S_ATTR = 1; //attr name offerring\nvar S_ATTR_SPACE = 2; //attr name end and space offer\nvar S_EQ = 3; //=space?\nvar S_ATTR_NOQUOT_VALUE = 4; //attr value(no quot value only)\nvar S_ATTR_END = 5; //attr value end and no space(quot end)\nvar S_TAG_SPACE = 6; //(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7; //closed el<el />\n\nfunction XMLReader() {}\n\nXMLReader.prototype = {\n\tparse: function (source, defaultNSMap, entityMap) {\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap, (defaultNSMap = Object.create(null)));\n\t\tparse(source, defaultNSMap, entityMap, domBuilder, this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t},\n};\n\n/**\n * Detecting everything that might be a reference,\n * including those without ending `;`, since those are allowed in HTML.\n * The entityReplacer takes care of verifying and transforming each occurrence,\n * and reports to the errorHandler on those that are not OK,\n * depending on the context.\n */\nvar ENTITY_REG = /&#?\\w+;?/g;\n\nfunction parse(source, defaultNSMapCopy, entityMap, domBuilder, errorHandler) {\n\tvar isHTML = isHTMLMimeType(domBuilder.mimeType);\n\tif (source.indexOf(g.UNICODE_REPLACEMENT_CHARACTER) >= 0) {\n\t\terrorHandler.warning('Unicode replacement character detected, source encoding issues?');\n\t}\n\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10),\n\t\t\t\tsurrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\n\tfunction entityReplacer(a) {\n\t\tvar complete = a[a.length - 1] === ';' ? a : a + ';';\n\t\tif (!isHTML && complete !== a) {\n\t\t\terrorHandler.error('EntityRef: expecting ;');\n\t\t\treturn a;\n\t\t}\n\t\tvar match = g.Reference.exec(complete);\n\t\tif (!match || match[0].length !== complete.length) {\n\t\t\terrorHandler.error('entity not matching Reference production: ' + a);\n\t\t\treturn a;\n\t\t}\n\t\tvar k = complete.slice(1, -1);\n\t\tif (hasOwn(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t} else if (k.charAt(0) === '#') {\n\t\t\treturn fixedFromCharCode(parseInt(k.substring(1).replace('x', '0x')));\n\t\t} else {\n\t\t\terrorHandler.error('entity not found:' + a);\n\t\t\treturn a;\n\t\t}\n\t}\n\n\tfunction appendText(end) {\n\t\t//has some bugs\n\t\tif (end > start) {\n\t\t\tvar xt = source.substring(start, end).replace(ENTITY_REG, entityReplacer);\n\t\t\tlocator && position(start);\n\t\t\tdomBuilder.characters(xt, 0, end - start);\n\t\t\tstart = end;\n\t\t}\n\t}\n\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /\\r\\n?|\\n|$/g;\n\tvar locator = domBuilder.locator;\n\n\tfunction position(p, m) {\n\t\twhile (p >= lineEnd && (m = linePattern.exec(source))) {\n\t\t\tlineStart = lineEnd;\n\t\t\tlineEnd = m.index + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t}\n\t\tlocator.columnNumber = p - lineStart + 1;\n\t}\n\n\tvar parseStack = [{ currentNSMap: defaultNSMapCopy }];\n\tvar unclosedTags = [];\n\tvar start = 0;\n\twhile (true) {\n\t\ttry {\n\t\t\tvar tagStart = source.indexOf('<', start);\n\t\t\tif (tagStart < 0) {\n\t\t\t\tif (!isHTML && unclosedTags.length > 0) {\n\t\t\t\t\treturn errorHandler.fatalError('unclosed xml tag(s): ' + unclosedTags.join(', '));\n\t\t\t\t}\n\t\t\t\tif (!source.substring(start).match(/^\\s*$/)) {\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t\t\t\t\tvar text = doc.createTextNode(source.substring(start));\n\t\t\t\t\tif (doc.documentElement) {\n\t\t\t\t\t\treturn errorHandler.error('Extra content at the end of the document');\n\t\t\t\t\t}\n\t\t\t\t\tdoc.appendChild(text);\n\t\t\t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (tagStart > start) {\n\t\t\t\tvar fromSource = source.substring(start, tagStart);\n\t\t\t\tif (!isHTML && unclosedTags.length === 0) {\n\t\t\t\t\tfromSource = fromSource.replace(new RegExp(g.S_OPT.source, 'g'), '');\n\t\t\t\t\tfromSource && errorHandler.error(\"Unexpected content outside root element: '\" + fromSource + \"'\");\n\t\t\t\t}\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch (source.charAt(tagStart + 1)) {\n\t\t\t\tcase '/':\n\t\t\t\t\tvar end = source.indexOf('>', tagStart + 2);\n\t\t\t\t\tvar tagNameRaw = source.substring(tagStart + 2, end > 0 ? end : undefined);\n\t\t\t\t\tif (!tagNameRaw) {\n\t\t\t\t\t\treturn errorHandler.fatalError('end tag name missing');\n\t\t\t\t\t}\n\t\t\t\t\tvar tagNameMatch = end > 0 && g.reg('^', g.QName_group, g.S_OPT, '$').exec(tagNameRaw);\n\t\t\t\t\tif (!tagNameMatch) {\n\t\t\t\t\t\treturn errorHandler.fatalError('end tag name contains invalid characters: \"' + tagNameRaw + '\"');\n\t\t\t\t\t}\n\t\t\t\t\tif (!domBuilder.currentElement && !domBuilder.doc.documentElement) {\n\t\t\t\t\t\t// not enough information to provide a helpful error message,\n\t\t\t\t\t\t// but parsing will throw since there is no root element\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar currentTagName =\n\t\t\t\t\t\tunclosedTags[unclosedTags.length - 1] ||\n\t\t\t\t\t\tdomBuilder.currentElement.tagName ||\n\t\t\t\t\t\tdomBuilder.doc.documentElement.tagName ||\n\t\t\t\t\t\t'';\n\t\t\t\t\tif (currentTagName !== tagNameMatch[1]) {\n\t\t\t\t\t\tvar tagNameLower = tagNameMatch[1].toLowerCase();\n\t\t\t\t\t\tif (!isHTML || currentTagName.toLowerCase() !== tagNameLower) {\n\t\t\t\t\t\t\treturn errorHandler.fatalError('Opening and ending tag mismatch: \"' + currentTagName + '\" != \"' + tagNameRaw + '\"');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar config = parseStack.pop();\n\t\t\t\t\tunclosedTags.pop();\n\t\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\t\tdomBuilder.endElement(config.uri, config.localName, currentTagName);\n\t\t\t\t\tif (localNSMap) {\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (hasOwn(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tend++;\n\t\t\t\t\tbreak;\n\t\t\t\t// end element\n\t\t\t\tcase '?': // <?...?>\n\t\t\t\t\tlocator && position(tagStart);\n\t\t\t\t\tend = parseProcessingInstruction(source, tagStart, domBuilder, errorHandler);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '!': // <!doctype,<![CDATA,<!--\n\t\t\t\t\tlocator && position(tagStart);\n\t\t\t\t\tend = parseDoctypeCommentOrCData(source, tagStart, domBuilder, errorHandler, isHTML);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlocator && position(tagStart);\n\t\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\t\tvar currentNSMap = parseStack[parseStack.length - 1].currentNSMap;\n\t\t\t\t\t//elStartEnd\n\t\t\t\t\tvar end = parseElementStartPart(source, tagStart, el, currentNSMap, entityReplacer, errorHandler, isHTML);\n\t\t\t\t\tvar len = el.length;\n\n\t\t\t\t\tif (!el.closed) {\n\t\t\t\t\t\tif (isHTML && conventions.isHTMLVoidElement(el.tagName)) {\n\t\t\t\t\t\t\tel.closed = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tunclosedTags.push(el.tagName);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (locator && len) {\n\t\t\t\t\t\tvar locator2 = copyLocator(locator, {});\n\t\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\t\ta.locator = copyLocator(locator, {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdomBuilder.locator = locator2;\n\t\t\t\t\t\tif (appendElement(el, domBuilder, currentNSMap)) {\n\t\t\t\t\t\t\tparseStack.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (appendElement(el, domBuilder, currentNSMap)) {\n\t\t\t\t\t\t\tparseStack.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isHTML && !el.closed) {\n\t\t\t\t\t\tend = parseHtmlSpecialContent(source, end, el.tagName, entityReplacer, domBuilder);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend++;\n\t\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t} else if (e instanceof DOMException) {\n\t\t\t\tthrow new ParseError(e.name + ': ' + e.message, domBuilder.locator, e);\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: ' + e);\n\t\t\tend = -1;\n\t\t}\n\t\tif (end > start) {\n\t\t\tstart = end;\n\t\t} else {\n\t\t\t//Possible sax fallback here, risk of positional error\n\t\t\tappendText(Math.max(tagStart, start) + 1);\n\t\t}\n\t}\n}\n\nfunction copyLocator(f, t) {\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @returns\n * end of the elementStartPart(end of elementEndPart for selfClosed el)\n * @see {@link #appendElement}\n */\nfunction parseElementStartPart(source, start, el, currentNSMap, entityReplacer, errorHandler, isHTML) {\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (hasOwn(el.attributeNames, qname)) {\n\t\t\treturn errorHandler.fatalError('Attribute ' + qname + ' redefined');\n\t\t}\n\t\tif (!isHTML && value.indexOf('<') >= 0) {\n\t\t\treturn errorHandler.fatalError(\"Unescaped '<' not allowed in attributes values\");\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(ENTITY_REG, entityReplacer),\n\t\t\tstartIndex\n\t\t);\n\t}\n\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG; //status\n\twhile (true) {\n\t\tvar c = source.charAt(p);\n\t\tswitch (c) {\n\t\t\tcase '=':\n\t\t\t\tif (s === S_ATTR) {\n\t\t\t\t\t//attrName\n\t\t\t\t\tattrName = source.slice(start, p);\n\t\t\t\t\ts = S_EQ;\n\t\t\t\t} else if (s === S_ATTR_SPACE) {\n\t\t\t\t\ts = S_EQ;\n\t\t\t\t} else {\n\t\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"'\":\n\t\t\tcase '\"':\n\t\t\t\tif (\n\t\t\t\t\ts === S_EQ ||\n\t\t\t\t\ts === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t) {\n\t\t\t\t\t//equal\n\t\t\t\t\tif (s === S_ATTR) {\n\t\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"');\n\t\t\t\t\t\tattrName = source.slice(start, p);\n\t\t\t\t\t}\n\t\t\t\t\tstart = p + 1;\n\t\t\t\t\tp = source.indexOf(c, start);\n\t\t\t\t\tif (p > 0) {\n\t\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\t\taddAttribute(attrName, value, start - 1);\n\t\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\t\tthrow new Error(\"attribute value no end '\" + c + \"' match\");\n\t\t\t\t\t}\n\t\t\t\t} else if (s == S_ATTR_NOQUOT_VALUE) {\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t\terrorHandler.warning('attribute \"' + attrName + '\" missed start quot(' + c + ')!!');\n\t\t\t\t\tstart = p + 1;\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t} else {\n\t\t\t\t\t//fatalError: no equal before\n\t\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase '/':\n\t\t\t\tswitch (s) {\n\t\t\t\t\tcase S_TAG:\n\t\t\t\t\t\tel.setTagName(source.slice(start, p));\n\t\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\t\ts = S_TAG_CLOSE;\n\t\t\t\t\t\tel.closed = true;\n\t\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tcase S_ATTR:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\t\tel.closed = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t//case S_EQ:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error(\"attribute invalid close char('/')\"); // No known test case\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase '': //end document\n\t\t\t\terrorHandler.error('unexpected end of input');\n\t\t\t\tif (s == S_TAG) {\n\t\t\t\t\tel.setTagName(source.slice(start, p));\n\t\t\t\t}\n\t\t\t\treturn p;\n\t\t\tcase '>':\n\t\t\t\tswitch (s) {\n\t\t\t\t\tcase S_TAG:\n\t\t\t\t\t\tel.setTagName(source.slice(start, p));\n\t\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\t\tbreak; //normal\n\t\t\t\t\tcase S_ATTR_NOQUOT_VALUE: //Compatible state\n\t\t\t\t\tcase S_ATTR:\n\t\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\t\tif (value.slice(-1) === '/') {\n\t\t\t\t\t\t\tel.closed = true;\n\t\t\t\t\t\t\tvalue = value.slice(0, -1);\n\t\t\t\t\t\t}\n\t\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\t\tif (s === S_ATTR_SPACE) {\n\t\t\t\t\t\t\tvalue = attrName;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (s == S_ATTR_NOQUOT_VALUE) {\n\t\t\t\t\t\t\terrorHandler.warning('attribute \"' + value + '\" missed quot(\")!');\n\t\t\t\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (!isHTML) {\n\t\t\t\t\t\t\t\terrorHandler.warning('attribute \"' + value + '\" missed value!! \"' + value + '\" instead!!');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taddAttribute(value, value, start);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase S_EQ:\n\t\t\t\t\t\tif (!isHTML) {\n\t\t\t\t\t\t\treturn errorHandler.fatalError('AttValue: \\' or \" expected');\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn p;\n\t\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\t\tcase '\\u0080':\n\t\t\t\tc = ' ';\n\t\t\tdefault:\n\t\t\t\tif (c <= ' ') {\n\t\t\t\t\t//space\n\t\t\t\t\tswitch (s) {\n\t\t\t\t\t\tcase S_TAG:\n\t\t\t\t\t\t\tel.setTagName(source.slice(start, p)); //tagName\n\t\t\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_ATTR:\n\t\t\t\t\t\t\tattrName = source.slice(start, p);\n\t\t\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\t\t\terrorHandler.warning('attribute \"' + value + '\" missed quot(\")!!');\n\t\t\t\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t\t\t//case S_EQ:\n\t\t\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t\t\t//\tvoid();break;\n\t\t\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t\t//ignore warning\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//not space\n\t\t\t\t\t//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n\t\t\t\t\t//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\t\tswitch (s) {\n\t\t\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\t\t\tif (!isHTML) {\n\t\t\t\t\t\t\t\terrorHandler.warning('attribute \"' + attrName + '\" missed value!! \"' + attrName + '\" instead2!!');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\t\t\tstart = p;\n\t\t\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\t\t\terrorHandler.warning('attribute space is required\"' + attrName + '\"!!');\n\t\t\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\t\t\tstart = p;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_EQ:\n\t\t\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\t\t\tstart = p;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t} //end outer switch\n\t\tp++;\n\t}\n}\n\n/**\n * @returns\n * `true` if a new namespace has been defined.\n */\nfunction appendElement(el, domBuilder, currentNSMap) {\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\tvar i = el.length;\n\twhile (i--) {\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif (nsp > 0) {\n\t\t\tvar prefix = (a.prefix = qName.slice(0, nsp));\n\t\t\tvar localName = qName.slice(nsp + 1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName;\n\t\t} else {\n\t\t\tlocalName = qName;\n\t\t\tprefix = null;\n\t\t\tnsPrefix = qName === 'xmlns' && '';\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif (nsPrefix !== false) {\n\t\t\t//hack!!\n\t\t\tif (localNSMap == null) {\n\t\t\t\tlocalNSMap = Object.create(null);\n\t\t\t\t_copy(currentNSMap, (currentNSMap = Object.create(null)));\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS;\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value);\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile (i--) {\n\t\ta = el[i];\n\t\tif (a.prefix) {\n\t\t\t//no prefix attribute has no namespace\n\t\t\tif (a.prefix === 'xml') {\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}\n\t\t\tif (a.prefix !== 'xmlns') {\n\t\t\t\ta.uri = currentNSMap[a.prefix];\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif (nsp > 0) {\n\t\tprefix = el.prefix = tagName.slice(0, nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp + 1);\n\t} else {\n\t\tprefix = null; //important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = (el.uri = currentNSMap[prefix || '']);\n\tdomBuilder.startElement(ns, localName, tagName, el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif (el.closed) {\n\t\tdomBuilder.endElement(ns, localName, tagName);\n\t\tif (localNSMap) {\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (hasOwn(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\n\nfunction parseHtmlSpecialContent(source, elStartEnd, tagName, entityReplacer, domBuilder) {\n\t// https://html.spec.whatwg.org/#raw-text-elements\n\t// https://html.spec.whatwg.org/#escapable-raw-text-elements\n\t// https://html.spec.whatwg.org/#cdata-rcdata-restrictions:raw-text-elements\n\t// TODO: https://html.spec.whatwg.org/#cdata-rcdata-restrictions\n\tvar isEscapableRaw = isHTMLEscapableRawTextElement(tagName);\n\tif (isEscapableRaw || isHTMLRawTextElement(tagName)) {\n\t\tvar elEndStart = source.indexOf('</' + tagName + '>', elStartEnd);\n\t\tvar text = source.substring(elStartEnd + 1, elEndStart);\n\n\t\tif (isEscapableRaw) {\n\t\t\ttext = text.replace(ENTITY_REG, entityReplacer);\n\t\t}\n\t\tdomBuilder.characters(text, 0, text.length);\n\t\treturn elEndStart;\n\t}\n\treturn elStartEnd + 1;\n}\n\nfunction _copy(source, target) {\n\tfor (var n in source) {\n\t\tif (hasOwn(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\n/**\n * @typedef ParseUtils\n * @property {function(relativeIndex: number?): string | undefined} char\n * Provides look ahead access to a singe character relative to the current index.\n * @property {function(): number} getIndex\n * Provides read-only access to the current index.\n * @property {function(reg: RegExp): string | null} getMatch\n * Applies the provided regular expression enforcing that it starts at the current index and\n * returns the complete matching string,\n * and moves the current index by the length of the matching string.\n * @property {function(): string} getSource\n * Provides read-only access to the complete source.\n * @property {function(places: number?): void} skip\n * moves the current index by places (defaults to 1)\n * @property {function(): number} skipBlanks\n * Moves the current index by the amount of white space that directly follows the current index\n * and returns the amount of whitespace chars skipped (0..n),\n * or -1 if the end of the source was reached.\n * @property {function(): string} substringFromIndex\n * creates a substring from the current index to the end of `source`\n * @property {function(compareWith: string): boolean} substringStartsWith\n * Checks if `source` contains `compareWith`, starting from the current index.\n * @property {function(compareWith: string): boolean} substringStartsWithCaseInsensitive\n * Checks if `source` contains `compareWith`, starting from the current index,\n * comparing the upper case of both sides.\n * @see {@link parseUtils}\n */\n\n/**\n * A temporary scope for parsing and look ahead operations in `source`,\n * starting from index `start`.\n *\n * Some operations move the current index by a number of positions,\n * after which `getIndex` returns the new index.\n *\n * @param {string} source\n * @param {number} start\n * @returns {ParseUtils}\n */\nfunction parseUtils(source, start) {\n\tvar index = start;\n\n\tfunction char(n) {\n\t\tn = n || 0;\n\t\treturn source.charAt(index + n);\n\t}\n\n\tfunction skip(n) {\n\t\tn = n || 1;\n\t\tindex += n;\n\t}\n\n\tfunction skipBlanks() {\n\t\tvar blanks = 0;\n\t\twhile (index < source.length) {\n\t\t\tvar c = char();\n\t\t\tif (c !== ' ' && c !== '\\n' && c !== '\\t' && c !== '\\r') {\n\t\t\t\treturn blanks;\n\t\t\t}\n\t\t\tblanks++;\n\t\t\tskip();\n\t\t}\n\t\treturn -1;\n\t}\n\tfunction substringFromIndex() {\n\t\treturn source.substring(index);\n\t}\n\tfunction substringStartsWith(text) {\n\t\treturn source.substring(index, index + text.length) === text;\n\t}\n\tfunction substringStartsWithCaseInsensitive(text) {\n\t\treturn source.substring(index, index + text.length).toUpperCase() === text.toUpperCase();\n\t}\n\n\tfunction getMatch(args) {\n\t\tvar expr = g.reg('^', args);\n\t\tvar match = expr.exec(substringFromIndex());\n\t\tif (match) {\n\t\t\tskip(match[0].length);\n\t\t\treturn match[0];\n\t\t}\n\t\treturn null;\n\t}\n\treturn {\n\t\tchar: char,\n\t\tgetIndex: function () {\n\t\t\treturn index;\n\t\t},\n\t\tgetMatch: getMatch,\n\t\tgetSource: function () {\n\t\t\treturn source;\n\t\t},\n\t\tskip: skip,\n\t\tskipBlanks: skipBlanks,\n\t\tsubstringFromIndex: substringFromIndex,\n\t\tsubstringStartsWith: substringStartsWith,\n\t\tsubstringStartsWithCaseInsensitive: substringStartsWithCaseInsensitive,\n\t};\n}\n\n/**\n * @param {ParseUtils} p\n * @param {DOMHandler} errorHandler\n * @returns {string}\n */\nfunction parseDoctypeInternalSubset(p, errorHandler) {\n\t/**\n\t * @param {ParseUtils} p\n\t * @param {DOMHandler} errorHandler\n\t * @returns {string}\n\t */\n\tfunction parsePI(p, errorHandler) {\n\t\tvar match = g.PI.exec(p.substringFromIndex());\n\t\tif (!match) {\n\t\t\treturn errorHandler.fatalError('processing instruction is not well-formed at position ' + p.getIndex());\n\t\t}\n\t\tif (match[1].toLowerCase() === 'xml') {\n\t\t\treturn errorHandler.fatalError(\n\t\t\t\t'xml declaration is only allowed at the start of the document, but found at position ' + p.getIndex()\n\t\t\t);\n\t\t}\n\t\tp.skip(match[0].length);\n\t\treturn match[0];\n\t}\n\t// Parse internal subset\n\tvar source = p.getSource();\n\tif (p.char() === '[') {\n\t\tp.skip(1);\n\t\tvar intSubsetStart = p.getIndex();\n\t\twhile (p.getIndex() < source.length) {\n\t\t\tp.skipBlanks();\n\t\t\tif (p.char() === ']') {\n\t\t\t\tvar internalSubset = source.substring(intSubsetStart, p.getIndex());\n\t\t\t\tp.skip(1);\n\t\t\t\treturn internalSubset;\n\t\t\t}\n\t\t\tvar current = null;\n\t\t\t// Only in external subset\n\t\t\t// if (char() === '<' && char(1) === '!' && char(2) === '[') {\n\t\t\t// \tparseConditionalSections(p, errorHandler);\n\t\t\t// } else\n\t\t\tif (p.char() === '<' && p.char(1) === '!') {\n\t\t\t\tswitch (p.char(2)) {\n\t\t\t\t\tcase 'E': // ELEMENT | ENTITY\n\t\t\t\t\t\tif (p.char(3) === 'L') {\n\t\t\t\t\t\t\tcurrent = p.getMatch(g.elementdecl);\n\t\t\t\t\t\t} else if (p.char(3) === 'N') {\n\t\t\t\t\t\t\tcurrent = p.getMatch(g.EntityDecl);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'A': // ATTRIBUTE\n\t\t\t\t\t\tcurrent = p.getMatch(g.AttlistDecl);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'N': // NOTATION\n\t\t\t\t\t\tcurrent = p.getMatch(g.NotationDecl);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '-': // COMMENT\n\t\t\t\t\t\tcurrent = p.getMatch(g.Comment);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (p.char() === '<' && p.char(1) === '?') {\n\t\t\t\tcurrent = parsePI(p, errorHandler);\n\t\t\t} else if (p.char() === '%') {\n\t\t\t\tcurrent = p.getMatch(g.PEReference);\n\t\t\t} else {\n\t\t\t\treturn errorHandler.fatalError('Error detected in Markup declaration');\n\t\t\t}\n\t\t\tif (!current) {\n\t\t\t\treturn errorHandler.fatalError('Error in internal subset at position ' + p.getIndex());\n\t\t\t}\n\t\t}\n\t\treturn errorHandler.fatalError('doctype internal subset is not well-formed, missing ]');\n\t}\n}\n\n/**\n * Called when the parser encounters an element starting with '<!'.\n *\n * @param {string} source\n * The xml.\n * @param {number} start\n * the start index of the '<!'\n * @param {DOMHandler} domBuilder\n * @param {DOMHandler} errorHandler\n * @param {boolean} isHTML\n * @returns {number | never}\n * The end index of the element.\n * @throws {ParseError}\n * In case the element is not well-formed.\n */\nfunction parseDoctypeCommentOrCData(source, start, domBuilder, errorHandler, isHTML) {\n\tvar p = parseUtils(source, start);\n\n\tswitch (isHTML ? p.char(2).toUpperCase() : p.char(2)) {\n\t\tcase '-':\n\t\t\t// should be a comment\n\t\t\tvar comment = p.getMatch(g.Comment);\n\t\t\tif (comment) {\n\t\t\t\tdomBuilder.comment(comment, g.COMMENT_START.length, comment.length - g.COMMENT_START.length - g.COMMENT_END.length);\n\t\t\t\treturn p.getIndex();\n\t\t\t} else {\n\t\t\t\treturn errorHandler.fatalError('comment is not well-formed at position ' + p.getIndex());\n\t\t\t}\n\t\tcase '[':\n\t\t\t// should be CDATA\n\t\t\tvar cdata = p.getMatch(g.CDSect);\n\t\t\tif (cdata) {\n\t\t\t\tif (!isHTML && !domBuilder.currentElement) {\n\t\t\t\t\treturn errorHandler.fatalError('CDATA outside of element');\n\t\t\t\t}\n\t\t\t\tdomBuilder.startCDATA();\n\t\t\t\tdomBuilder.characters(cdata, g.CDATA_START.length, cdata.length - g.CDATA_START.length - g.CDATA_END.length);\n\t\t\t\tdomBuilder.endCDATA();\n\t\t\t\treturn p.getIndex();\n\t\t\t} else {\n\t\t\t\treturn errorHandler.fatalError('Invalid CDATA starting at position ' + start);\n\t\t\t}\n\t\tcase 'D': {\n\t\t\t// should be DOCTYPE\n\t\t\tif (domBuilder.doc && domBuilder.doc.documentElement) {\n\t\t\t\treturn errorHandler.fatalError('Doctype not allowed inside or after documentElement at position ' + p.getIndex());\n\t\t\t}\n\t\t\tif (isHTML ? !p.substringStartsWithCaseInsensitive(g.DOCTYPE_DECL_START) : !p.substringStartsWith(g.DOCTYPE_DECL_START)) {\n\t\t\t\treturn errorHandler.fatalError('Expected ' + g.DOCTYPE_DECL_START + ' at position ' + p.getIndex());\n\t\t\t}\n\t\t\tp.skip(g.DOCTYPE_DECL_START.length);\n\t\t\tif (p.skipBlanks() < 1) {\n\t\t\t\treturn errorHandler.fatalError('Expected whitespace after ' + g.DOCTYPE_DECL_START + ' at position ' + p.getIndex());\n\t\t\t}\n\n\t\t\tvar doctype = {\n\t\t\t\tname: undefined,\n\t\t\t\tpublicId: undefined,\n\t\t\t\tsystemId: undefined,\n\t\t\t\tinternalSubset: undefined,\n\t\t\t};\n\t\t\t// Parse the DOCTYPE name\n\t\t\tdoctype.name = p.getMatch(g.Name);\n\t\t\tif (!doctype.name)\n\t\t\t\treturn errorHandler.fatalError('doctype name missing or contains unexpected characters at position ' + p.getIndex());\n\n\t\t\tif (isHTML && doctype.name.toLowerCase() !== 'html') {\n\t\t\t\terrorHandler.warning('Unexpected DOCTYPE in HTML document at position ' + p.getIndex());\n\t\t\t}\n\t\t\tp.skipBlanks();\n\n\t\t\t// Check for ExternalID\n\t\t\tif (p.substringStartsWith(g.PUBLIC) || p.substringStartsWith(g.SYSTEM)) {\n\t\t\t\tvar match = g.ExternalID_match.exec(p.substringFromIndex());\n\t\t\t\tif (!match) {\n\t\t\t\t\treturn errorHandler.fatalError('doctype external id is not well-formed at position ' + p.getIndex());\n\t\t\t\t}\n\t\t\t\tif (match.groups.SystemLiteralOnly !== undefined) {\n\t\t\t\t\tdoctype.systemId = match.groups.SystemLiteralOnly;\n\t\t\t\t} else {\n\t\t\t\t\tdoctype.systemId = match.groups.SystemLiteral;\n\t\t\t\t\tdoctype.publicId = match.groups.PubidLiteral;\n\t\t\t\t}\n\t\t\t\tp.skip(match[0].length);\n\t\t\t} else if (isHTML && p.substringStartsWithCaseInsensitive(g.SYSTEM)) {\n\t\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#doctype-legacy-string\n\t\t\t\tp.skip(g.SYSTEM.length);\n\t\t\t\tif (p.skipBlanks() < 1) {\n\t\t\t\t\treturn errorHandler.fatalError('Expected whitespace after ' + g.SYSTEM + ' at position ' + p.getIndex());\n\t\t\t\t}\n\t\t\t\tdoctype.systemId = p.getMatch(g.ABOUT_LEGACY_COMPAT_SystemLiteral);\n\t\t\t\tif (!doctype.systemId) {\n\t\t\t\t\treturn errorHandler.fatalError(\n\t\t\t\t\t\t'Expected ' + g.ABOUT_LEGACY_COMPAT + ' in single or double quotes after ' + g.SYSTEM + ' at position ' + p.getIndex()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isHTML && doctype.systemId && !g.ABOUT_LEGACY_COMPAT_SystemLiteral.test(doctype.systemId)) {\n\t\t\t\terrorHandler.warning('Unexpected doctype.systemId in HTML document at position ' + p.getIndex());\n\t\t\t}\n\t\t\tif (!isHTML) {\n\t\t\t\tp.skipBlanks();\n\t\t\t\tdoctype.internalSubset = parseDoctypeInternalSubset(p, errorHandler);\n\t\t\t}\n\t\t\tp.skipBlanks();\n\t\t\tif (p.char() !== '>') {\n\t\t\t\treturn errorHandler.fatalError('doctype not terminated with > at position ' + p.getIndex());\n\t\t\t}\n\t\t\tp.skip(1);\n\t\t\tdomBuilder.startDTD(doctype.name, doctype.publicId, doctype.systemId, doctype.internalSubset);\n\t\t\tdomBuilder.endDTD();\n\t\t\treturn p.getIndex();\n\t\t}\n\t\tdefault:\n\t\t\treturn errorHandler.fatalError('Not well-formed XML starting with \"<!\" at position ' + start);\n\t}\n}\n\nfunction parseProcessingInstruction(source, start, domBuilder, errorHandler) {\n\tvar match = source.substring(start).match(g.PI);\n\tif (!match) {\n\t\treturn errorHandler.fatalError('Invalid processing instruction starting at position ' + start);\n\t}\n\tif (match[1].toLowerCase() === 'xml') {\n\t\tif (start > 0) {\n\t\t\treturn errorHandler.fatalError(\n\t\t\t\t'processing instruction at position ' + start + ' is an xml declaration which is only at the start of the document'\n\t\t\t);\n\t\t}\n\t\tif (!g.XMLDecl.test(source.substring(start))) {\n\t\t\treturn errorHandler.fatalError('xml declaration is not well-formed');\n\t\t}\n\t}\n\tdomBuilder.processingInstruction(match[1], match[2]);\n\treturn start + match[0].length;\n}\n\nfunction ElementAttributes() {\n\tthis.attributeNames = Object.create(null);\n}\n\nElementAttributes.prototype = {\n\tsetTagName: function (tagName) {\n\t\tif (!g.QName_exact.test(tagName)) {\n\t\t\tthrow new Error('invalid tagName:' + tagName);\n\t\t}\n\t\tthis.tagName = tagName;\n\t},\n\taddValue: function (qName, value, offset) {\n\t\tif (!g.QName_exact.test(qName)) {\n\t\t\tthrow new Error('invalid attribute:' + qName);\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = { qName: qName, value: value, offset: offset };\n\t},\n\tlength: 0,\n\tgetLocalName: function (i) {\n\t\treturn this[i].localName;\n\t},\n\tgetLocator: function (i) {\n\t\treturn this[i].locator;\n\t},\n\tgetQName: function (i) {\n\t\treturn this[i].qName;\n\t},\n\tgetURI: function (i) {\n\t\treturn this[i].uri;\n\t},\n\tgetValue: function (i) {\n\t\treturn this[i].value;\n\t},\n\t//\t,getIndex:function(uri, localName)){\n\t//\t\tif(localName){\n\t//\n\t//\t\t}else{\n\t//\t\t\tvar qName = uri\n\t//\t\t}\n\t//\t},\n\t//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n\t//\tgetType:function(uri,localName){}\n\t//\tgetType:function(i){},\n};\n\nexports.XMLReader = XMLReader;\nexports.parseUtils = parseUtils;\nexports.parseDoctypeCommentOrCData = parseDoctypeCommentOrCData;\n","'use strict';\n\nvar conventions = require('./conventions');\nvar dom = require('./dom');\nvar errors = require('./errors');\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar hasDefaultHTMLNamespace = conventions.hasDefaultHTMLNamespace;\nvar isHTMLMimeType = conventions.isHTMLMimeType;\nvar isValidMimeType = conventions.isValidMimeType;\nvar MIME_TYPE = conventions.MIME_TYPE;\nvar NAMESPACE = conventions.NAMESPACE;\nvar ParseError = errors.ParseError;\n\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to <https://www.w3.org/TR/xml11/#sec-line-ends>,\n * including some Unicode \"newline\" characters:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA,\n * > 2. the two-character sequence #xD #x85,\n * > 3. the single character #x85,\n * > 4. the single character #x2028,\n * > 5. the single character #x2029,\n * > 6. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n * @prettierignore\n */\nfunction normalizeLineEndings(input) {\n\treturn input.replace(/\\r[\\n\\u0085]/g, '\\n').replace(/[\\r\\u0085\\u2028\\u2029]/g, '\\n');\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {typeof assign} [assign]\n * The method to use instead of `conventions.assign`, which is used to copy values from\n * `options` before they are used for parsing.\n * @property {typeof DOMHandler} [domHandler]\n * For internal testing: The class for creating an instance for handling events from the SAX\n * parser.\n * *****Warning: By configuring a faulty implementation, the specified behavior can completely\n * be broken.*****.\n * @property {Function} [errorHandler]\n * DEPRECATED! use `onError` instead.\n * @property {function(level:ErrorLevel, message:string, context: DOMHandler):void}\n * [onError]\n * A function invoked for every error that occurs during parsing.\n *\n * If it is not provided, all errors are reported to `console.error`\n * and only `fatalError`s are thrown as a `ParseError`,\n * which prevents any further processing.\n * If the provided method throws, a `ParserError` is thrown,\n * which prevents any further processing.\n *\n * Be aware that many `warning`s are considered an error that prevents further processing in\n * most implementations.\n * @property {boolean} [locator=true]\n * Configures if the nodes created during parsing will have a `lineNumber` and a `columnNumber`\n * attribute describing their location in the XML string.\n * Default is true.\n * @property {(string) => string} [normalizeLineEndings]\n * used to replace line endings before parsing, defaults to exported `normalizeLineEndings`,\n * which normalizes line endings according to <https://www.w3.org/TR/xml11/#sec-line-ends>,\n * including some Unicode \"newline\" characters.\n * @property {Object} [xmlns]\n * The XML namespaces that should be assumed when parsing.\n * The default namespace can be provided by the key that is the empty string.\n * When the `mimeType` for HTML, XHTML or SVG are passed to `parseFromString`,\n * the default namespace that will be used,\n * will be overridden according to the specification.\n * @see {@link normalizeLineEndings}\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code from a string\n * into a DOM `Document`.\n *\n * ***xmldom is different from the spec in that it allows an `options` parameter,\n * to control the behavior***.\n *\n * @class\n * @param {DOMParserOptions} [options]\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options) {\n\toptions = options || {};\n\tif (options.locator === undefined) {\n\t\toptions.locator = true;\n\t}\n\n\t/**\n\t * The method to use instead of `conventions.assign`, which is used to copy values from\n\t * `options`\n\t * before they are used for parsing.\n\t *\n\t * @type {conventions.assign}\n\t * @private\n\t * @see {@link conventions.assign}\n\t * @readonly\n\t */\n\tthis.assign = options.assign || conventions.assign;\n\n\t/**\n\t * For internal testing: The class for creating an instance for handling events from the SAX\n\t * parser.\n\t * *****Warning: By configuring a faulty implementation, the specified behavior can completely\n\t * be broken*****.\n\t *\n\t * @type {typeof DOMHandler}\n\t * @private\n\t * @readonly\n\t */\n\tthis.domHandler = options.domHandler || DOMHandler;\n\n\t/**\n\t * A function that is invoked for every error that occurs during parsing.\n\t *\n\t * If it is not provided, all errors are reported to `console.error`\n\t * and only `fatalError`s are thrown as a `ParseError`,\n\t * which prevents any further processing.\n\t * If the provided method throws, a `ParserError` is thrown,\n\t * which prevents any further processing.\n\t *\n\t * Be aware that many `warning`s are considered an error that prevents further processing in\n\t * most implementations.\n\t *\n\t * @type {function(level:ErrorLevel, message:string, context: DOMHandler):void}\n\t * @see {@link onErrorStopParsing}\n\t * @see {@link onWarningStopParsing}\n\t */\n\tthis.onError = options.onError || options.errorHandler;\n\tif (options.errorHandler && typeof options.errorHandler !== 'function') {\n\t\tthrow new TypeError('errorHandler object is no longer supported, switch to onError!');\n\t} else if (options.errorHandler) {\n\t\toptions.errorHandler('warning', 'The `errorHandler` option has been deprecated, use `onError` instead!', this);\n\t}\n\n\t/**\n\t * used to replace line endings before parsing, defaults to `normalizeLineEndings`\n\t *\n\t * @type {(string) => string}\n\t * @readonly\n\t */\n\tthis.normalizeLineEndings = options.normalizeLineEndings || normalizeLineEndings;\n\n\t/**\n\t * Configures if the nodes created during parsing will have a `lineNumber` and a\n\t * `columnNumber`\n\t * attribute describing their location in the XML string.\n\t * Default is true.\n\t *\n\t * @type {boolean}\n\t * @readonly\n\t */\n\tthis.locator = !!options.locator;\n\n\t/**\n\t * The default namespace can be provided by the key that is the empty string.\n\t * When the `mimeType` for HTML, XHTML or SVG are passed to `parseFromString`,\n\t * the default namespace that will be used,\n\t * will be overridden according to the specification.\n\t *\n\t * @type {Readonly<Object>}\n\t * @readonly\n\t */\n\tthis.xmlns = this.assign(Object.create(null), options.xmlns);\n}\n\n/**\n * Parses `source` using the options in the way configured by the `DOMParserOptions` of `this`\n * `DOMParser`. If `mimeType` is `text/html` an HTML `Document` is created,\n * otherwise an XML `Document` is created.\n *\n * __It behaves different from the description in the living standard__:\n * - Uses the `options` passed to the `DOMParser` constructor to modify the behavior.\n * - Any unexpected input is reported to `onError` with either a `warning`,\n * `error` or `fatalError` level.\n * - Any `fatalError` throws a `ParseError` which prevents further processing.\n * - Any error thrown by `onError` is converted to a `ParseError` which prevents further\n * processing - If no `Document` was created during parsing it is reported as a `fatalError`.\n * *****Warning: By configuring a faulty DOMHandler implementation,\n * the specified behavior can completely be broken*****.\n *\n * @param {string} source\n * The XML mime type only allows string input!\n * @param {string} [mimeType='application/xml']\n * the mimeType or contentType of the document to be created determines the `type` of document\n * created (XML or HTML)\n * @returns {Document}\n * The `Document` node.\n * @throws {ParseError}\n * for any `fatalError` or anything that is thrown by `onError`\n * @throws {TypeError}\n * for any invalid `mimeType`\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString\n * @see https://html.spec.whatwg.org/#dom-domparser-parsefromstring-dev\n */\nDOMParser.prototype.parseFromString = function (source, mimeType) {\n\tif (!isValidMimeType(mimeType)) {\n\t\tthrow new TypeError('DOMParser.parseFromString: the provided mimeType \"' + mimeType + '\" is not valid.');\n\t}\n\tvar defaultNSMap = this.assign(Object.create(null), this.xmlns);\n\tvar entityMap = entities.XML_ENTITIES;\n\tvar defaultNamespace = defaultNSMap[''] || null;\n\tif (hasDefaultHTMLNamespace(mimeType)) {\n\t\tentityMap = entities.HTML_ENTITIES;\n\t\tdefaultNamespace = NAMESPACE.HTML;\n\t} else if (mimeType === MIME_TYPE.XML_SVG_IMAGE) {\n\t\tdefaultNamespace = NAMESPACE.SVG;\n\t}\n\tdefaultNSMap[''] = defaultNamespace;\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\n\tvar domBuilder = new this.domHandler({\n\t\tmimeType: mimeType,\n\t\tdefaultNamespace: defaultNamespace,\n\t\tonError: this.onError,\n\t});\n\tvar locator = this.locator ? {} : undefined;\n\tif (this.locator) {\n\t\tdomBuilder.setDocumentLocator(locator);\n\t}\n\n\tvar sax = new XMLReader();\n\tsax.errorHandler = domBuilder;\n\tsax.domBuilder = domBuilder;\n\tvar isXml = !conventions.isHTMLMimeType(mimeType);\n\tif (isXml && typeof source !== 'string') {\n\t\tsax.errorHandler.fatalError('source is not a string');\n\t}\n\tsax.parse(this.normalizeLineEndings(String(source)), defaultNSMap, entityMap);\n\tif (!domBuilder.doc.documentElement) {\n\t\tsax.errorHandler.fatalError('missing root element');\n\t}\n\treturn domBuilder.doc;\n};\n\n/**\n * @typedef DOMHandlerOptions\n * @property {string} [mimeType=MIME_TYPE.XML_APPLICATION]\n * @property {string | null} [defaultNamespace=null]\n */\n/**\n * The class that is used to handle events from the SAX parser to create the related DOM\n * elements.\n *\n * Some methods are only implemented as an empty function,\n * since they are (at least currently) not relevant for xmldom.\n *\n * @class\n * @param {DOMHandlerOptions} [options]\n * @see http://www.saxproject.org/apidoc/org/xml/sax/ext/DefaultHandler2.html\n */\nfunction DOMHandler(options) {\n\tvar opt = options || {};\n\t/**\n\t * The mime type is used to determine if the DOM handler will create an XML or HTML document.\n\t * Only if it is set to `text/html` it will create an HTML document.\n\t * It defaults to MIME_TYPE.XML_APPLICATION.\n\t *\n\t * @type {string}\n\t * @see {@link MIME_TYPE}\n\t * @readonly\n\t */\n\tthis.mimeType = opt.mimeType || MIME_TYPE.XML_APPLICATION;\n\n\t/**\n\t * The namespace to use to create an XML document.\n\t * For the following reasons this is required:\n\t * - The SAX API for `startDocument` doesn't offer any way to pass a namespace,\n\t * since at that point there is no way for the parser to know what the default namespace from\n\t * the document will be.\n\t * - When creating using `DOMImplementation.createDocument` it is required to pass a\n\t * namespace,\n\t * to determine the correct `Document.contentType`, which should match `this.mimeType`.\n\t * - When parsing an XML document with the `application/xhtml+xml` mimeType,\n\t * the HTML namespace needs to be the default namespace.\n\t *\n\t * @type {string | null}\n\t * @private\n\t * @readonly\n\t */\n\tthis.defaultNamespace = opt.defaultNamespace || null;\n\n\t/**\n\t * @type {boolean}\n\t * @private\n\t */\n\tthis.cdata = false;\n\n\t/**\n\t * The last `Element` that was created by `startElement`.\n\t * `endElement` sets it to the `currentElement.parentNode`.\n\t *\n\t * Note: The sax parser currently sets it to white space text nodes between tags.\n\t *\n\t * @type {Element | Node | undefined}\n\t * @private\n\t */\n\tthis.currentElement = undefined;\n\n\t/**\n\t * The Document that is created as part of `startDocument`,\n\t * and returned by `DOMParser.parseFromString`.\n\t *\n\t * @type {Document | undefined}\n\t * @readonly\n\t */\n\tthis.doc = undefined;\n\n\t/**\n\t * The locator is stored as part of setDocumentLocator.\n\t * It is controlled and mutated by the SAX parser to store the current parsing position.\n\t * It is used by DOMHandler to set `columnNumber` and `lineNumber`\n\t * on the DOM nodes.\n\t *\n\t * @type {Readonly<Locator> | undefined}\n\t * @private\n\t * @readonly (the\n\t * sax parser currently sometimes set's it)\n\t */\n\tthis.locator = undefined;\n\t/**\n\t * @type {function (level:ErrorLevel ,message:string, context:DOMHandler):void}\n\t * @readonly\n\t */\n\tthis.onError = opt.onError;\n}\n\nfunction position(locator, node) {\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n\nDOMHandler.prototype = {\n\t/**\n\t * Either creates an XML or an HTML document and stores it under `this.doc`.\n\t * If it is an XML document, `this.defaultNamespace` is used to create it,\n\t * and it will not contain any `childNodes`.\n\t * If it is an HTML document, it will be created without any `childNodes`.\n\t *\n\t * @see http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n\t */\n\tstartDocument: function () {\n\t\tvar impl = new DOMImplementation();\n\t\tthis.doc = isHTMLMimeType(this.mimeType) ? impl.createHTMLDocument(false) : impl.createDocument(this.defaultNamespace, '');\n\t},\n\tstartElement: function (namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t\tvar el = doc.createElementNS(namespaceURI, qName || localName);\n\t\tvar len = attrs.length;\n\t\tappendElement(this, el);\n\t\tthis.currentElement = el;\n\n\t\tthis.locator && position(this.locator, el);\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar namespaceURI = attrs.getURI(i);\n\t\t\tvar value = attrs.getValue(i);\n\t\t\tvar qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator && position(attrs.getLocator(i), attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr);\n\t\t}\n\t},\n\tendElement: function (namespaceURI, localName, qName) {\n\t\tthis.currentElement = this.currentElement.parentNode;\n\t},\n\tstartPrefixMapping: function (prefix, uri) {},\n\tendPrefixMapping: function (prefix) {},\n\tprocessingInstruction: function (target, data) {\n\t\tvar ins = this.doc.createProcessingInstruction(target, data);\n\t\tthis.locator && position(this.locator, ins);\n\t\tappendElement(this, ins);\n\t},\n\tignorableWhitespace: function (ch, start, length) {},\n\tcharacters: function (chars, start, length) {\n\t\tchars = _toString.apply(this, arguments);\n\t\t//console.log(chars)\n\t\tif (chars) {\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif (this.currentElement) {\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t} else if (/^\\s*$/.test(chars)) {\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator, charNode);\n\t\t}\n\t},\n\tskippedEntity: function (name) {},\n\tendDocument: function () {\n\t\tthis.doc.normalize();\n\t},\n\t/**\n\t * Stores the locator to be able to set the `columnNumber` and `lineNumber`\n\t * on the created DOM nodes.\n\t *\n\t * @param {Locator} locator\n\t */\n\tsetDocumentLocator: function (locator) {\n\t\tif (locator) {\n\t\t\tlocator.lineNumber = 0;\n\t\t}\n\t\tthis.locator = locator;\n\t},\n\t//LexicalHandler\n\tcomment: function (chars, start, length) {\n\t\tchars = _toString.apply(this, arguments);\n\t\tvar comm = this.doc.createComment(chars);\n\t\tthis.locator && position(this.locator, comm);\n\t\tappendElement(this, comm);\n\t},\n\n\tstartCDATA: function () {\n\t\t//used in characters() methods\n\t\tthis.cdata = true;\n\t},\n\tendCDATA: function () {\n\t\tthis.cdata = false;\n\t},\n\n\tstartDTD: function (name, publicId, systemId, internalSubset) {\n\t\tvar impl = this.doc.implementation;\n\t\tif (impl && impl.createDocumentType) {\n\t\t\tvar dt = impl.createDocumentType(name, publicId, systemId, internalSubset);\n\t\t\tthis.locator && position(this.locator, dt);\n\t\t\tappendElement(this, dt);\n\t\t\tthis.doc.doctype = dt;\n\t\t}\n\t},\n\treportError: function (level, message) {\n\t\tif (typeof this.onError === 'function') {\n\t\t\ttry {\n\t\t\t\tthis.onError(level, message, this);\n\t\t\t} catch (e) {\n\t\t\t\tthrow new ParseError('Reporting ' + level + ' \"' + message + '\" caused ' + e, this.locator);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error('[xmldom ' + level + ']\\t' + message, _locator(this.locator));\n\t\t}\n\t},\n\t/**\n\t * @see http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning: function (message) {\n\t\tthis.reportError('warning', message);\n\t},\n\terror: function (message) {\n\t\tthis.reportError('error', message);\n\t},\n\t/**\n\t * This function reports a fatal error and throws a ParseError.\n\t *\n\t * @param {string} message\n\t * - The message to be used for reporting and throwing the error.\n\t * @returns {never}\n\t * This function always throws an error and never returns a value.\n\t * @throws {ParseError}\n\t * Always throws a ParseError with the provided message.\n\t */\n\tfatalError: function (message) {\n\t\tthis.reportError('fatalError', message);\n\t\tthrow new ParseError(message, this.locator);\n\t},\n};\n\nfunction _locator(l) {\n\tif (l) {\n\t\treturn '\\n@#[line:' + l.lineNumber + ',col:' + l.columnNumber + ']';\n\t}\n}\n\nfunction _toString(chars, start, length) {\n\tif (typeof chars == 'string') {\n\t\treturn chars.substr(start, length);\n\t} else {\n\t\t//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif (chars.length >= start + length || start) {\n\t\t\treturn new java.lang.String(chars, start, length) + '';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n'endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl'.replace(\n\t/\\w+/g,\n\tfunction (key) {\n\t\tDOMHandler.prototype[key] = function () {\n\t\t\treturn null;\n\t\t};\n\t}\n);\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement(handler, node) {\n\tif (!handler.currentElement) {\n\t\thandler.doc.appendChild(node);\n\t} else {\n\t\thandler.currentElement.appendChild(node);\n\t}\n}\n\n/**\n * A method that prevents any further parsing when an `error`\n * with level `error` is reported during parsing.\n *\n * @see {@link DOMParserOptions.onError}\n * @see {@link onWarningStopParsing}\n */\nfunction onErrorStopParsing(level) {\n\tif (level === 'error') throw 'onErrorStopParsing';\n}\n\n/**\n * A method that prevents any further parsing when any `error` is reported during parsing.\n *\n * @see {@link DOMParserOptions.onError}\n * @see {@link onErrorStopParsing}\n */\nfunction onWarningStopParsing() {\n\tthrow 'onWarningStopParsing';\n}\n\nexports.__DOMHandler = DOMHandler;\nexports.DOMParser = DOMParser;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.onErrorStopParsing = onErrorStopParsing;\nexports.onWarningStopParsing = onWarningStopParsing;\n","'use strict';\nvar conventions = require('./conventions');\nexports.assign = conventions.assign;\nexports.hasDefaultHTMLNamespace = conventions.hasDefaultHTMLNamespace;\nexports.isHTMLMimeType = conventions.isHTMLMimeType;\nexports.isValidMimeType = conventions.isValidMimeType;\nexports.MIME_TYPE = conventions.MIME_TYPE;\nexports.NAMESPACE = conventions.NAMESPACE;\n\nvar errors = require('./errors');\nexports.DOMException = errors.DOMException;\nexports.DOMExceptionName = errors.DOMExceptionName;\nexports.ExceptionCode = errors.ExceptionCode;\nexports.ParseError = errors.ParseError;\n\nvar dom = require('./dom');\nexports.Attr = dom.Attr;\nexports.CDATASection = dom.CDATASection;\nexports.CharacterData = dom.CharacterData;\nexports.Comment = dom.Comment;\nexports.Document = dom.Document;\nexports.DocumentFragment = dom.DocumentFragment;\nexports.DocumentType = dom.DocumentType;\nexports.DOMImplementation = dom.DOMImplementation;\nexports.Element = dom.Element;\nexports.Entity = dom.Entity;\nexports.EntityReference = dom.EntityReference;\nexports.LiveNodeList = dom.LiveNodeList;\nexports.NamedNodeMap = dom.NamedNodeMap;\nexports.Node = dom.Node;\nexports.NodeList = dom.NodeList;\nexports.Notation = dom.Notation;\nexports.ProcessingInstruction = dom.ProcessingInstruction;\nexports.Text = dom.Text;\nexports.XMLSerializer = dom.XMLSerializer;\n\nvar domParser = require('./dom-parser');\nexports.DOMParser = domParser.DOMParser;\nexports.normalizeLineEndings = domParser.normalizeLineEndings;\nexports.onErrorStopParsing = domParser.onErrorStopParsing;\nexports.onWarningStopParsing = domParser.onWarningStopParsing;\n","import { DOMParser as g, DOMImplementation as J } from \"@xmldom/xmldom\";\nconst p = \"USJ\", O = \"3.1\", _ = Object.freeze({ type: p, version: O, content: [] }), B = [\n  \"type\",\n  \"marker\",\n  \"content\",\n  \"sid\",\n  \"eid\",\n  \"number\",\n  \"code\",\n  \"altnumber\",\n  \"pubnumber\",\n  \"caller\",\n  \"align\",\n  \"category\"\n];\nfunction H(e) {\n  return M.includes(e);\n}\nconst M = [\n  // Old Testament\n  \"GEN\",\n  \"EXO\",\n  \"LEV\",\n  \"NUM\",\n  \"DEU\",\n  \"JOS\",\n  \"JDG\",\n  \"RUT\",\n  \"1SA\",\n  \"2SA\",\n  \"1KI\",\n  \"2KI\",\n  \"1CH\",\n  \"2CH\",\n  \"EZR\",\n  \"NEH\",\n  \"EST\",\n  \"JOB\",\n  \"PSA\",\n  \"PRO\",\n  \"ECC\",\n  \"SNG\",\n  \"ISA\",\n  \"JER\",\n  \"LAM\",\n  \"EZK\",\n  \"DAN\",\n  \"HOS\",\n  \"JOL\",\n  \"AMO\",\n  \"OBA\",\n  \"JON\",\n  \"MIC\",\n  \"NAM\",\n  \"HAB\",\n  \"ZEP\",\n  \"HAG\",\n  \"ZEC\",\n  \"MAL\",\n  // New Testament\n  \"MAT\",\n  \"MRK\",\n  \"LUK\",\n  \"JHN\",\n  \"ACT\",\n  \"ROM\",\n  \"1CO\",\n  \"2CO\",\n  \"GAL\",\n  \"EPH\",\n  \"PHP\",\n  \"COL\",\n  \"1TH\",\n  \"2TH\",\n  \"1TI\",\n  \"2TI\",\n  \"TIT\",\n  \"PHM\",\n  \"HEB\",\n  \"JAS\",\n  \"1PE\",\n  \"2PE\",\n  \"1JN\",\n  \"2JN\",\n  \"3JN\",\n  \"JUD\",\n  \"REV\",\n  // Deuterocanon\n  \"TOB\",\n  \"JDT\",\n  \"ESG\",\n  \"WIS\",\n  \"SIR\",\n  \"BAR\",\n  \"LJE\",\n  \"S3Y\",\n  \"SUS\",\n  \"BEL\",\n  \"1MA\",\n  \"2MA\",\n  \"3MA\",\n  \"4MA\",\n  \"1ES\",\n  \"2ES\",\n  \"MAN\",\n  \"PS2\",\n  \"ODA\",\n  \"PSS\",\n  \"EZA\",\n  \"5EZ\",\n  \"6EZ\",\n  \"DAG\",\n  \"PS3\",\n  \"2BA\",\n  \"LBA\",\n  \"JUB\",\n  \"ENO\",\n  \"1MQ\",\n  \"2MQ\",\n  \"3MQ\",\n  \"REP\",\n  \"4BA\",\n  \"LAO\",\n  // Non scripture\n  \"FRT\",\n  \"BAK\",\n  \"OTH\",\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  \"NDX\",\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\"\n], f = \"usx\", N = \"3.1\", I = `<${f} version=\"${N}\" />`;\nfunction V(e) {\n  const n = new g().parseFromString(e, \"text/xml\");\n  return m(n.documentElement);\n}\nfunction m(e) {\n  const [t] = e ? b(e) : [{ content: [] }];\n  return t.type = p, t.version = O, t;\n}\nfunction b(e) {\n  const t = {};\n  let n = e.tagName, o, s, c = \"append\";\n  if ([\"row\", \"cell\"].includes(n) && (n = \"table:\" + n), e.attributes)\n    for (const r of Array.from(e.attributes))\n      t[r.name] = r.value;\n  t.style && (o = t.style, delete t.style), t.vid && delete t.vid, t.status && delete t.status;\n  let i = { type: n };\n  o && (i.marker = o), i = { ...i, ...t }, e.firstChild && e.firstChild.nodeType === e.firstChild.TEXT_NODE && e.firstChild.nodeValue && E(e.firstChild.nodeValue) !== \"\" && (s = e.firstChild.nodeValue);\n  const l = Array.from(e.childNodes);\n  i.content = [], s && i.content.push(s);\n  for (const r of l) {\n    if (r.tagName === void 0)\n      continue;\n    const [u, S] = b(r);\n    switch (S) {\n      case \"append\":\n        i.content.push(u);\n        break;\n      case \"merge\":\n        i.content = i.content.concat(u);\n        break;\n    }\n    r.nextSibling && r.nextSibling.nodeType === r.nextSibling.TEXT_NODE && r.nextSibling.nodeValue && (E(r.nextSibling.nodeValue) !== \"\" || r.nextSibling.nodeValue === \" \") && i.content.push(r.nextSibling.nodeValue);\n  }\n  return i.content.length === 0 && i.type !== f && delete i.content, \"eid\" in i && [\"verse\", \"chapter\"].includes(n) && (c = \"ignore\"), [i, c];\n}\nfunction E(e) {\n  return e.replace(/(^[ \\t\\n\\r\\f\\v]+)|([ \\t\\n\\r\\f\\v]+$)/g, \"\");\n}\nlet d, a;\nfunction C(e) {\n  const t = new J().createDocument(\"\", f);\n  return t.documentElement && (t.documentElement.setAttribute(\"version\", N), y(e, t)), t.toString();\n}\nfunction y(e, t) {\n  if (t.documentElement) {\n    for (const [n, o] of e.content.entries()) {\n      const s = n === e.content.length - 1;\n      v(o, t.documentElement, t, s);\n    }\n    return t.documentElement ?? void 0;\n  }\n}\nfunction v(e, t, n, o) {\n  let s, c, i;\n  if (typeof e == \"string\") s = n.createTextNode(e);\n  else if (c = e.type.replace(\"table:\", \"\"), s = n.createElement(c), X(s, e), e.content)\n    for (const [r, u] of e.content.entries()) {\n      const S = r === e.content.length - 1;\n      v(u, s, n, S);\n    }\n  a && (c === \"verse\" || t.tagName === \"para\" && o) && (i = T(n, a), a = void 0), c === \"verse\" && typeof e != \"string\" && e.sid !== void 0 && (a = e.sid), d && (c === \"chapter\" || c === \"para\" && o) && (i = h(n, d), d = void 0), c === \"chapter\" && typeof e != \"string\" && e.sid !== void 0 && (d = e.sid);\n  const l = t.nodeName === f && (i == null ? void 0 : i.tagName) === \"verse\";\n  i && (!o || l) && t.appendChild(i), t.appendChild(s), i && o && !l && t.appendChild(i), o && t.nodeName === f && (a && t.appendChild(T(n, a)), d && t.appendChild(h(n, d)), a = void 0, d = void 0);\n}\nfunction X(e, t) {\n  t.marker && (t.type === \"unmatched\" ? e.setAttribute(\"marker\", t.marker) : e.setAttribute(\"style\", t.marker));\n  for (const [n, o] of Object.entries(t))\n    o && ![\"type\", \"marker\", \"content\"].includes(n) && e.setAttribute(n, o);\n}\nfunction T(e, t) {\n  const n = e.createElement(\"verse\");\n  return n.setAttribute(\"eid\", t), n;\n}\nfunction h(e, t) {\n  const n = e.createElement(\"chapter\");\n  return n.setAttribute(\"eid\", t), n;\n}\nconst A = \"$\", P = \".content[\";\nfunction D(e) {\n  const t = e.split(P);\n  if (t.shift() !== A)\n    throw new Error(`indexesFromJsonPath: jsonPath didn't start with '${A}'`);\n  return t.map((o) => parseInt(o, 10));\n}\nfunction U(e) {\n  return e.reduce((t, n) => `${t}${P}${n}]`, A);\n}\nexport {\n  _ as EMPTY_USJ,\n  I as EMPTY_USX,\n  B as MARKER_OBJECT_PROPS,\n  p as USJ_TYPE,\n  O as USJ_VERSION,\n  f as USX_TYPE,\n  N as USX_VERSION,\n  M as VALID_BOOK_CODES,\n  D as indexesFromUsjJsonPath,\n  H as isValidBookCode,\n  U as usjJsonPathFromIndexes,\n  C as usjToUsxString,\n  V as usxStringToUsj\n};\n//# sourceMappingURL=index.js.map\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @param {boolean} [cleanup] Apply semantic cleanup before returning.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, cleanup, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  if (cleanup) {\n    diff_cleanupSemantic(diffs);\n  }\n  return diffs;\n}\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n}\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 !== 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length &&\n        y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length &&\n        y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) ===\n          text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ];\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n}\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\nfunction diff_commonOverlap_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (\n      found == 0 ||\n      text1.substring(text_length - length) == text2.substring(0, length)\n    ) {\n      best = length;\n      length++;\n    }\n  }\n}\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = \"\";\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i),\n        shorttext.substring(j)\n      );\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i),\n        shorttext.substring(0, j)\n      );\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common =\n          shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a,\n        best_longtext_b,\n        best_shorttext_a,\n        best_shorttext_b,\n        best_common,\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 4)\n  );\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 2)\n  );\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n}\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemantic(diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastequality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastequality &&\n        lastequality.length <=\n          Math.max(length_insertions1, length_deletions1) &&\n        lastequality.length <= Math.max(length_insertions2, length_deletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [\n          DIFF_DELETE,\n          lastequality,\n        ]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n  diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (\n      diffs[pointer - 1][0] == DIFF_DELETE &&\n      diffs[pointer][0] == DIFF_INSERT\n    ) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (\n          overlap_length1 >= deletion.length / 2 ||\n          overlap_length1 >= insertion.length / 2\n        ) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            insertion.substring(0, overlap_length1),\n          ]);\n          diffs[pointer - 1][1] = deletion.substring(\n            0,\n            deletion.length - overlap_length1\n          );\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (\n          overlap_length2 >= deletion.length / 2 ||\n          overlap_length2 >= insertion.length / 2\n        ) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            deletion.substring(0, overlap_length2),\n          ]);\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(\n            0,\n            insertion.length - overlap_length2\n          );\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n}\n\nvar nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\nvar whitespaceRegex_ = /\\s/;\nvar linebreakRegex_ = /[\\r\\n]/;\nvar blanklineEndRegex_ = /\\n\\r?\\n$/;\nvar blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemanticLossless(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] == DIFF_EQUAL &&\n      diffs[pointer + 1][0] == DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore =\n        diff_cleanupSemanticScore_(equality1, edit) +\n        diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score =\n          diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, \"\"]); // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = \"\";\n  var text_insert = \"\";\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (\n            previous_equality >= 0 &&\n            ends_with_pair_start(diffs[previous_equality][1])\n          ) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(\n              0,\n              -1\n            );\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(\n                  0,\n                  commonlength\n                );\n              } else {\n                diffs.splice(0, 0, [\n                  DIFF_EQUAL,\n                  text_insert.substring(0, commonlength),\n                ]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) +\n                diffs[pointer][1];\n              text_insert = text_insert.substring(\n                0,\n                text_insert.length - commonlength\n              );\n              text_delete = text_delete.substring(\n                0,\n                text_delete.length - commonlength\n              );\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(\n              pointer - n,\n              n,\n              [DIFF_DELETE, text_delete],\n              [DIFF_INSERT, text_insert]\n            );\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = \"\";\n        text_insert = \"\";\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === \"\") {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(\n          diffs[pointer][1].length - diffs[pointer - 1][1].length\n        ) === diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(\n            0,\n            diffs[pointer][1].length - diffs[pointer - 1][1].length\n          );\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n}\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after],\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange =\n    typeof cursor_pos === \"number\"\n      ? { index: cursor_pos, length: 0 }\n      : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === \"number\" ? null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos, cleanup) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, cleanup, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cloneDeep = require(\"lodash.clonedeep\");\nconst isEqual = require(\"lodash.isequal\");\nvar AttributeMap;\n(function (AttributeMap) {\n    function compose(a = {}, b = {}, keepNull = false) {\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        let attributes = cloneDeep(b);\n        if (!keepNull) {\n            attributes = Object.keys(attributes).reduce((copy, key) => {\n                if (attributes[key] != null) {\n                    copy[key] = attributes[key];\n                }\n                return copy;\n            }, {});\n        }\n        for (const key in a) {\n            if (a[key] !== undefined && b[key] === undefined) {\n                attributes[key] = a[key];\n            }\n        }\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.compose = compose;\n    function diff(a = {}, b = {}) {\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        const attributes = Object.keys(a)\n            .concat(Object.keys(b))\n            .reduce((attrs, key) => {\n            if (!isEqual(a[key], b[key])) {\n                attrs[key] = b[key] === undefined ? null : b[key];\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.diff = diff;\n    function invert(attr = {}, base = {}) {\n        attr = attr || {};\n        const baseInverted = Object.keys(base).reduce((memo, key) => {\n            if (base[key] !== attr[key] && attr[key] !== undefined) {\n                memo[key] = base[key];\n            }\n            return memo;\n        }, {});\n        return Object.keys(attr).reduce((memo, key) => {\n            if (attr[key] !== base[key] && base[key] === undefined) {\n                memo[key] = null;\n            }\n            return memo;\n        }, baseInverted);\n    }\n    AttributeMap.invert = invert;\n    function transform(a, b, priority = false) {\n        if (typeof a !== 'object') {\n            return b;\n        }\n        if (typeof b !== 'object') {\n            return undefined;\n        }\n        if (!priority) {\n            return b; // b simply overwrites us without priority\n        }\n        const attributes = Object.keys(b).reduce((attrs, key) => {\n            if (a[key] === undefined) {\n                attrs[key] = b[key]; // null is a valid value\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;\n//# sourceMappingURL=AttributeMap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Op;\n(function (Op) {\n    function length(op) {\n        if (typeof op.delete === 'number') {\n            return op.delete;\n        }\n        else if (typeof op.retain === 'number') {\n            return op.retain;\n        }\n        else if (typeof op.retain === 'object' && op.retain !== null) {\n            return 1;\n        }\n        else {\n            return typeof op.insert === 'string' ? op.insert.length : 1;\n        }\n    }\n    Op.length = length;\n})(Op || (Op = {}));\nexports.default = Op;\n//# sourceMappingURL=Op.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Op_1 = require(\"./Op\");\nclass Iterator {\n    constructor(ops) {\n        this.ops = ops;\n        this.index = 0;\n        this.offset = 0;\n    }\n    hasNext() {\n        return this.peekLength() < Infinity;\n    }\n    next(length) {\n        if (!length) {\n            length = Infinity;\n        }\n        const nextOp = this.ops[this.index];\n        if (nextOp) {\n            const offset = this.offset;\n            const opLength = Op_1.default.length(nextOp);\n            if (length >= opLength - offset) {\n                length = opLength - offset;\n                this.index += 1;\n                this.offset = 0;\n            }\n            else {\n                this.offset += length;\n            }\n            if (typeof nextOp.delete === 'number') {\n                return { delete: length };\n            }\n            else {\n                const retOp = {};\n                if (nextOp.attributes) {\n                    retOp.attributes = nextOp.attributes;\n                }\n                if (typeof nextOp.retain === 'number') {\n                    retOp.retain = length;\n                }\n                else if (typeof nextOp.retain === 'object' &&\n                    nextOp.retain !== null) {\n                    // offset should === 0, length should === 1\n                    retOp.retain = nextOp.retain;\n                }\n                else if (typeof nextOp.insert === 'string') {\n                    retOp.insert = nextOp.insert.substr(offset, length);\n                }\n                else {\n                    // offset should === 0, length should === 1\n                    retOp.insert = nextOp.insert;\n                }\n                return retOp;\n            }\n        }\n        else {\n            return { retain: Infinity };\n        }\n    }\n    peek() {\n        return this.ops[this.index];\n    }\n    peekLength() {\n        if (this.ops[this.index]) {\n            // Should never return 0 if our index is being managed correctly\n            return Op_1.default.length(this.ops[this.index]) - this.offset;\n        }\n        else {\n            return Infinity;\n        }\n    }\n    peekType() {\n        const op = this.ops[this.index];\n        if (op) {\n            if (typeof op.delete === 'number') {\n                return 'delete';\n            }\n            else if (typeof op.retain === 'number' ||\n                (typeof op.retain === 'object' && op.retain !== null)) {\n                return 'retain';\n            }\n            else {\n                return 'insert';\n            }\n        }\n        return 'retain';\n    }\n    rest() {\n        if (!this.hasNext()) {\n            return [];\n        }\n        else if (this.offset === 0) {\n            return this.ops.slice(this.index);\n        }\n        else {\n            const offset = this.offset;\n            const index = this.index;\n            const next = this.next();\n            const rest = this.ops.slice(this.index);\n            this.offset = offset;\n            this.index = index;\n            return [next].concat(rest);\n        }\n    }\n}\nexports.default = Iterator;\n//# sourceMappingURL=OpIterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AttributeMap = exports.OpIterator = exports.Op = void 0;\nconst diff = require(\"fast-diff\");\nconst cloneDeep = require(\"lodash.clonedeep\");\nconst isEqual = require(\"lodash.isequal\");\nconst AttributeMap_1 = require(\"./AttributeMap\");\nexports.AttributeMap = AttributeMap_1.default;\nconst Op_1 = require(\"./Op\");\nexports.Op = Op_1.default;\nconst OpIterator_1 = require(\"./OpIterator\");\nexports.OpIterator = OpIterator_1.default;\nconst NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\nconst getEmbedTypeAndData = (a, b) => {\n    if (typeof a !== 'object' || a === null) {\n        throw new Error(`cannot retain a ${typeof a}`);\n    }\n    if (typeof b !== 'object' || b === null) {\n        throw new Error(`cannot retain a ${typeof b}`);\n    }\n    const embedType = Object.keys(a)[0];\n    if (!embedType || embedType !== Object.keys(b)[0]) {\n        throw new Error(`embed types not matched: ${embedType} != ${Object.keys(b)[0]}`);\n    }\n    return [embedType, a[embedType], b[embedType]];\n};\nclass Delta {\n    constructor(ops) {\n        // Assume we are given a well formed ops\n        if (Array.isArray(ops)) {\n            this.ops = ops;\n        }\n        else if (ops != null && Array.isArray(ops.ops)) {\n            this.ops = ops.ops;\n        }\n        else {\n            this.ops = [];\n        }\n    }\n    static registerEmbed(embedType, handler) {\n        this.handlers[embedType] = handler;\n    }\n    static unregisterEmbed(embedType) {\n        delete this.handlers[embedType];\n    }\n    static getHandler(embedType) {\n        const handler = this.handlers[embedType];\n        if (!handler) {\n            throw new Error(`no handlers for embed type \"${embedType}\"`);\n        }\n        return handler;\n    }\n    insert(arg, attributes) {\n        const newOp = {};\n        if (typeof arg === 'string' && arg.length === 0) {\n            return this;\n        }\n        newOp.insert = arg;\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    }\n    delete(length) {\n        if (length <= 0) {\n            return this;\n        }\n        return this.push({ delete: length });\n    }\n    retain(length, attributes) {\n        if (typeof length === 'number' && length <= 0) {\n            return this;\n        }\n        const newOp = { retain: length };\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    }\n    push(newOp) {\n        let index = this.ops.length;\n        let lastOp = this.ops[index - 1];\n        newOp = cloneDeep(newOp);\n        if (typeof lastOp === 'object') {\n            if (typeof newOp.delete === 'number' &&\n                typeof lastOp.delete === 'number') {\n                this.ops[index - 1] = { delete: lastOp.delete + newOp.delete };\n                return this;\n            }\n            // Since it does not matter if we insert before or after deleting at the same index,\n            // always prefer to insert first\n            if (typeof lastOp.delete === 'number' && newOp.insert != null) {\n                index -= 1;\n                lastOp = this.ops[index - 1];\n                if (typeof lastOp !== 'object') {\n                    this.ops.unshift(newOp);\n                    return this;\n                }\n            }\n            if (isEqual(newOp.attributes, lastOp.attributes)) {\n                if (typeof newOp.insert === 'string' &&\n                    typeof lastOp.insert === 'string') {\n                    this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n                else if (typeof newOp.retain === 'number' &&\n                    typeof lastOp.retain === 'number') {\n                    this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n            }\n        }\n        if (index === this.ops.length) {\n            this.ops.push(newOp);\n        }\n        else {\n            this.ops.splice(index, 0, newOp);\n        }\n        return this;\n    }\n    chop() {\n        const lastOp = this.ops[this.ops.length - 1];\n        if (lastOp && typeof lastOp.retain === 'number' && !lastOp.attributes) {\n            this.ops.pop();\n        }\n        return this;\n    }\n    filter(predicate) {\n        return this.ops.filter(predicate);\n    }\n    forEach(predicate) {\n        this.ops.forEach(predicate);\n    }\n    map(predicate) {\n        return this.ops.map(predicate);\n    }\n    partition(predicate) {\n        const passed = [];\n        const failed = [];\n        this.forEach((op) => {\n            const target = predicate(op) ? passed : failed;\n            target.push(op);\n        });\n        return [passed, failed];\n    }\n    reduce(predicate, initialValue) {\n        return this.ops.reduce(predicate, initialValue);\n    }\n    changeLength() {\n        return this.reduce((length, elem) => {\n            if (elem.insert) {\n                return length + Op_1.default.length(elem);\n            }\n            else if (elem.delete) {\n                return length - elem.delete;\n            }\n            return length;\n        }, 0);\n    }\n    length() {\n        return this.reduce((length, elem) => {\n            return length + Op_1.default.length(elem);\n        }, 0);\n    }\n    slice(start = 0, end = Infinity) {\n        const ops = [];\n        const iter = new OpIterator_1.default(this.ops);\n        let index = 0;\n        while (index < end && iter.hasNext()) {\n            let nextOp;\n            if (index < start) {\n                nextOp = iter.next(start - index);\n            }\n            else {\n                nextOp = iter.next(end - index);\n                ops.push(nextOp);\n            }\n            index += Op_1.default.length(nextOp);\n        }\n        return new Delta(ops);\n    }\n    compose(other) {\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        const ops = [];\n        const firstOther = otherIter.peek();\n        if (firstOther != null &&\n            typeof firstOther.retain === 'number' &&\n            firstOther.attributes == null) {\n            let firstLeft = firstOther.retain;\n            while (thisIter.peekType() === 'insert' &&\n                thisIter.peekLength() <= firstLeft) {\n                firstLeft -= thisIter.peekLength();\n                ops.push(thisIter.next());\n            }\n            if (firstOther.retain - firstLeft > 0) {\n                otherIter.next(firstOther.retain - firstLeft);\n            }\n        }\n        const delta = new Delta(ops);\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else if (thisIter.peekType() === 'delete') {\n                delta.push(thisIter.next());\n            }\n            else {\n                const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                const thisOp = thisIter.next(length);\n                const otherOp = otherIter.next(length);\n                if (otherOp.retain) {\n                    const newOp = {};\n                    if (typeof thisOp.retain === 'number') {\n                        newOp.retain =\n                            typeof otherOp.retain === 'number' ? length : otherOp.retain;\n                    }\n                    else {\n                        if (typeof otherOp.retain === 'number') {\n                            if (thisOp.retain == null) {\n                                newOp.insert = thisOp.insert;\n                            }\n                            else {\n                                newOp.retain = thisOp.retain;\n                            }\n                        }\n                        else {\n                            const action = thisOp.retain == null ? 'insert' : 'retain';\n                            const [embedType, thisData, otherData] = getEmbedTypeAndData(thisOp[action], otherOp.retain);\n                            const handler = Delta.getHandler(embedType);\n                            newOp[action] = {\n                                [embedType]: handler.compose(thisData, otherData, action === 'retain'),\n                            };\n                        }\n                    }\n                    // Preserve null when composing with a retain, otherwise remove it for inserts\n                    const attributes = AttributeMap_1.default.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n                    if (attributes) {\n                        newOp.attributes = attributes;\n                    }\n                    delta.push(newOp);\n                    // Optimization if rest of other is just retain\n                    if (!otherIter.hasNext() &&\n                        isEqual(delta.ops[delta.ops.length - 1], newOp)) {\n                        const rest = new Delta(thisIter.rest());\n                        return delta.concat(rest).chop();\n                    }\n                    // Other op should be delete, we could be an insert or retain\n                    // Insert + delete cancels out\n                }\n                else if (typeof otherOp.delete === 'number' &&\n                    (typeof thisOp.retain === 'number' ||\n                        (typeof thisOp.retain === 'object' && thisOp.retain !== null))) {\n                    delta.push(otherOp);\n                }\n            }\n        }\n        return delta.chop();\n    }\n    concat(other) {\n        const delta = new Delta(this.ops.slice());\n        if (other.ops.length > 0) {\n            delta.push(other.ops[0]);\n            delta.ops = delta.ops.concat(other.ops.slice(1));\n        }\n        return delta;\n    }\n    diff(other, cursor) {\n        if (this.ops === other.ops) {\n            return new Delta();\n        }\n        const strings = [this, other].map((delta) => {\n            return delta\n                .map((op) => {\n                if (op.insert != null) {\n                    return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n                }\n                const prep = delta === other ? 'on' : 'with';\n                throw new Error('diff() called ' + prep + ' non-document');\n            })\n                .join('');\n        });\n        const retDelta = new Delta();\n        const diffResult = diff(strings[0], strings[1], cursor, true);\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        diffResult.forEach((component) => {\n            let length = component[1].length;\n            while (length > 0) {\n                let opLength = 0;\n                switch (component[0]) {\n                    case diff.INSERT:\n                        opLength = Math.min(otherIter.peekLength(), length);\n                        retDelta.push(otherIter.next(opLength));\n                        break;\n                    case diff.DELETE:\n                        opLength = Math.min(length, thisIter.peekLength());\n                        thisIter.next(opLength);\n                        retDelta.delete(opLength);\n                        break;\n                    case diff.EQUAL:\n                        opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n                        const thisOp = thisIter.next(opLength);\n                        const otherOp = otherIter.next(opLength);\n                        if (isEqual(thisOp.insert, otherOp.insert)) {\n                            retDelta.retain(opLength, AttributeMap_1.default.diff(thisOp.attributes, otherOp.attributes));\n                        }\n                        else {\n                            retDelta.push(otherOp).delete(opLength);\n                        }\n                        break;\n                }\n                length -= opLength;\n            }\n        });\n        return retDelta.chop();\n    }\n    eachLine(predicate, newline = '\\n') {\n        const iter = new OpIterator_1.default(this.ops);\n        let line = new Delta();\n        let i = 0;\n        while (iter.hasNext()) {\n            if (iter.peekType() !== 'insert') {\n                return;\n            }\n            const thisOp = iter.peek();\n            const start = Op_1.default.length(thisOp) - iter.peekLength();\n            const index = typeof thisOp.insert === 'string'\n                ? thisOp.insert.indexOf(newline, start) - start\n                : -1;\n            if (index < 0) {\n                line.push(iter.next());\n            }\n            else if (index > 0) {\n                line.push(iter.next(index));\n            }\n            else {\n                if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n                    return;\n                }\n                i += 1;\n                line = new Delta();\n            }\n        }\n        if (line.length() > 0) {\n            predicate(line, {}, i);\n        }\n    }\n    invert(base) {\n        const inverted = new Delta();\n        this.reduce((baseIndex, op) => {\n            if (op.insert) {\n                inverted.delete(Op_1.default.length(op));\n            }\n            else if (typeof op.retain === 'number' && op.attributes == null) {\n                inverted.retain(op.retain);\n                return baseIndex + op.retain;\n            }\n            else if (op.delete || typeof op.retain === 'number') {\n                const length = (op.delete || op.retain);\n                const slice = base.slice(baseIndex, baseIndex + length);\n                slice.forEach((baseOp) => {\n                    if (op.delete) {\n                        inverted.push(baseOp);\n                    }\n                    else if (op.retain && op.attributes) {\n                        inverted.retain(Op_1.default.length(baseOp), AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                    }\n                });\n                return baseIndex + length;\n            }\n            else if (typeof op.retain === 'object' && op.retain !== null) {\n                const slice = base.slice(baseIndex, baseIndex + 1);\n                const baseOp = new OpIterator_1.default(slice.ops).next();\n                const [embedType, opData, baseOpData] = getEmbedTypeAndData(op.retain, baseOp.insert);\n                const handler = Delta.getHandler(embedType);\n                inverted.retain({ [embedType]: handler.invert(opData, baseOpData) }, AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                return baseIndex + 1;\n            }\n            return baseIndex;\n        }, 0);\n        return inverted.chop();\n    }\n    transform(arg, priority = false) {\n        priority = !!priority;\n        if (typeof arg === 'number') {\n            return this.transformPosition(arg, priority);\n        }\n        const other = arg;\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        const delta = new Delta();\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (thisIter.peekType() === 'insert' &&\n                (priority || otherIter.peekType() !== 'insert')) {\n                delta.retain(Op_1.default.length(thisIter.next()));\n            }\n            else if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else {\n                const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                const thisOp = thisIter.next(length);\n                const otherOp = otherIter.next(length);\n                if (thisOp.delete) {\n                    // Our delete either makes their delete redundant or removes their retain\n                    continue;\n                }\n                else if (otherOp.delete) {\n                    delta.push(otherOp);\n                }\n                else {\n                    const thisData = thisOp.retain;\n                    const otherData = otherOp.retain;\n                    let transformedData = typeof otherData === 'object' && otherData !== null\n                        ? otherData\n                        : length;\n                    if (typeof thisData === 'object' &&\n                        thisData !== null &&\n                        typeof otherData === 'object' &&\n                        otherData !== null) {\n                        const embedType = Object.keys(thisData)[0];\n                        if (embedType === Object.keys(otherData)[0]) {\n                            const handler = Delta.getHandler(embedType);\n                            if (handler) {\n                                transformedData = {\n                                    [embedType]: handler.transform(thisData[embedType], otherData[embedType], priority),\n                                };\n                            }\n                        }\n                    }\n                    // We retain either their retain or insert\n                    delta.retain(transformedData, AttributeMap_1.default.transform(thisOp.attributes, otherOp.attributes, priority));\n                }\n            }\n        }\n        return delta.chop();\n    }\n    transformPosition(index, priority = false) {\n        priority = !!priority;\n        const thisIter = new OpIterator_1.default(this.ops);\n        let offset = 0;\n        while (thisIter.hasNext() && offset <= index) {\n            const length = thisIter.peekLength();\n            const nextType = thisIter.peekType();\n            thisIter.next();\n            if (nextType === 'delete') {\n                index -= Math.min(length, index - offset);\n                continue;\n            }\n            else if (nextType === 'insert' && (offset < index || !priority)) {\n                index += length;\n            }\n            offset += length;\n        }\n        return index;\n    }\n}\nDelta.Op = Op_1.default;\nDelta.OpIterator = OpIterator_1.default;\nDelta.AttributeMap = AttributeMap_1.default;\nDelta.handlers = {};\nexports.default = Delta;\nif (typeof module === 'object') {\n    module.exports = Delta;\n    module.exports.default = Delta;\n}\n//# sourceMappingURL=Delta.js.map","var getOwnPropertyNames = Object.getOwnPropertyNames, getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Combine two comparators into a single comparators.\n */\nfunction combineComparators(comparatorA, comparatorB) {\n    return function isEqual(a, b, state) {\n        return comparatorA(a, b, state) && comparatorB(a, b, state);\n    };\n}\n/**\n * Wrap the provided `areItemsEqual` method to manage the circular state, allowing\n * for circular references to be safely included in the comparison without creating\n * stack overflows.\n */\nfunction createIsCircular(areItemsEqual) {\n    return function isCircular(a, b, state) {\n        if (!a || !b || typeof a !== 'object' || typeof b !== 'object') {\n            return areItemsEqual(a, b, state);\n        }\n        var cache = state.cache;\n        var cachedA = cache.get(a);\n        var cachedB = cache.get(b);\n        if (cachedA && cachedB) {\n            return cachedA === b && cachedB === a;\n        }\n        cache.set(a, b);\n        cache.set(b, a);\n        var result = areItemsEqual(a, b, state);\n        cache.delete(a);\n        cache.delete(b);\n        return result;\n    };\n}\n/**\n * Get the properties to strictly examine, which include both own properties that are\n * not enumerable and symbol properties.\n */\nfunction getStrictProperties(object) {\n    return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));\n}\n/**\n * Whether the object contains the property passed as an own property.\n */\nvar hasOwn = Object.hasOwn ||\n    (function (object, property) {\n        return hasOwnProperty.call(object, property);\n    });\n/**\n * Whether the values passed are strictly equal or both NaN.\n */\nfunction sameValueZeroEqual(a, b) {\n    return a === b || (!a && !b && a !== a && b !== b);\n}\n\nvar PREACT_VNODE = '__v';\nvar PREACT_OWNER = '__o';\nvar REACT_OWNER = '_owner';\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor, keys = Object.keys;\n/**\n * Whether the arrays are equal in value.\n */\nfunction areArraysEqual(a, b, state) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (!state.equals(a[index], b[index], index, index, a, b, state)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the dates passed are equal in value.\n */\nfunction areDatesEqual(a, b) {\n    return sameValueZeroEqual(a.getTime(), b.getTime());\n}\n/**\n * Whether the errors passed are equal in value.\n */\nfunction areErrorsEqual(a, b) {\n    return (a.name === b.name &&\n        a.message === b.message &&\n        a.cause === b.cause &&\n        a.stack === b.stack);\n}\n/**\n * Whether the functions passed are equal in value.\n */\nfunction areFunctionsEqual(a, b) {\n    return a === b;\n}\n/**\n * Whether the `Map`s are equal in value.\n */\nfunction areMapsEqual(a, b, state) {\n    var size = a.size;\n    if (size !== b.size) {\n        return false;\n    }\n    if (!size) {\n        return true;\n    }\n    var matchedIndices = new Array(size);\n    var aIterable = a.entries();\n    var aResult;\n    var bResult;\n    var index = 0;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.entries();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            if (matchedIndices[matchIndex]) {\n                matchIndex++;\n                continue;\n            }\n            var aEntry = aResult.value;\n            var bEntry = bResult.value;\n            if (state.equals(aEntry[0], bEntry[0], index, matchIndex, a, b, state) &&\n                state.equals(aEntry[1], bEntry[1], aEntry[0], bEntry[0], a, b, state)) {\n                hasMatch = matchedIndices[matchIndex] = true;\n                break;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n        index++;\n    }\n    return true;\n}\n/**\n * Whether the numbers are equal in value.\n */\nvar areNumbersEqual = sameValueZeroEqual;\n/**\n * Whether the objects are equal in value.\n */\nfunction areObjectsEqual(a, b, state) {\n    var properties = keys(a);\n    var index = properties.length;\n    if (keys(b).length !== index) {\n        return false;\n    }\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        if (!isPropertyEqual(a, b, state, properties[index])) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the objects are equal in value with strict property checking.\n */\nfunction areObjectsEqualStrict(a, b, state) {\n    var properties = getStrictProperties(a);\n    var index = properties.length;\n    if (getStrictProperties(b).length !== index) {\n        return false;\n    }\n    var property;\n    var descriptorA;\n    var descriptorB;\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        property = properties[index];\n        if (!isPropertyEqual(a, b, state, property)) {\n            return false;\n        }\n        descriptorA = getOwnPropertyDescriptor(a, property);\n        descriptorB = getOwnPropertyDescriptor(b, property);\n        if ((descriptorA || descriptorB) &&\n            (!descriptorA ||\n                !descriptorB ||\n                descriptorA.configurable !== descriptorB.configurable ||\n                descriptorA.enumerable !== descriptorB.enumerable ||\n                descriptorA.writable !== descriptorB.writable)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the primitive wrappers passed are equal in value.\n */\nfunction arePrimitiveWrappersEqual(a, b) {\n    return sameValueZeroEqual(a.valueOf(), b.valueOf());\n}\n/**\n * Whether the regexps passed are equal in value.\n */\nfunction areRegExpsEqual(a, b) {\n    return a.source === b.source && a.flags === b.flags;\n}\n/**\n * Whether the `Set`s are equal in value.\n */\nfunction areSetsEqual(a, b, state) {\n    var size = a.size;\n    if (size !== b.size) {\n        return false;\n    }\n    if (!size) {\n        return true;\n    }\n    var matchedIndices = new Array(size);\n    var aIterable = a.values();\n    var aResult;\n    var bResult;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.values();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            if (!matchedIndices[matchIndex] &&\n                state.equals(aResult.value, bResult.value, aResult.value, bResult.value, a, b, state)) {\n                hasMatch = matchedIndices[matchIndex] = true;\n                break;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the TypedArray instances are equal in value.\n */\nfunction areTypedArraysEqual(a, b) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (a[index] !== b[index]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the URL instances are equal in value.\n */\nfunction areUrlsEqual(a, b) {\n    return (a.hostname === b.hostname &&\n        a.pathname === b.pathname &&\n        a.protocol === b.protocol &&\n        a.port === b.port &&\n        a.hash === b.hash &&\n        a.username === b.username &&\n        a.password === b.password);\n}\nfunction isPropertyEqual(a, b, state, property) {\n    if ((property === REACT_OWNER ||\n        property === PREACT_OWNER ||\n        property === PREACT_VNODE) &&\n        (a.$$typeof || b.$$typeof)) {\n        return true;\n    }\n    return (hasOwn(b, property) &&\n        state.equals(a[property], b[property], property, property, a, b, state));\n}\n\nvar ARGUMENTS_TAG = '[object Arguments]';\nvar BOOLEAN_TAG = '[object Boolean]';\nvar DATE_TAG = '[object Date]';\nvar ERROR_TAG = '[object Error]';\nvar MAP_TAG = '[object Map]';\nvar NUMBER_TAG = '[object Number]';\nvar OBJECT_TAG = '[object Object]';\nvar REG_EXP_TAG = '[object RegExp]';\nvar SET_TAG = '[object Set]';\nvar STRING_TAG = '[object String]';\nvar URL_TAG = '[object URL]';\nvar isArray = Array.isArray;\nvar isTypedArray = typeof ArrayBuffer === 'function' && ArrayBuffer.isView\n    ? ArrayBuffer.isView\n    : null;\nvar assign = Object.assign;\nvar getTag = Object.prototype.toString.call.bind(Object.prototype.toString);\n/**\n * Create a comparator method based on the type-specific equality comparators passed.\n */\nfunction createEqualityComparator(_a) {\n    var areArraysEqual = _a.areArraysEqual, areDatesEqual = _a.areDatesEqual, areErrorsEqual = _a.areErrorsEqual, areFunctionsEqual = _a.areFunctionsEqual, areMapsEqual = _a.areMapsEqual, areNumbersEqual = _a.areNumbersEqual, areObjectsEqual = _a.areObjectsEqual, arePrimitiveWrappersEqual = _a.arePrimitiveWrappersEqual, areRegExpsEqual = _a.areRegExpsEqual, areSetsEqual = _a.areSetsEqual, areTypedArraysEqual = _a.areTypedArraysEqual, areUrlsEqual = _a.areUrlsEqual;\n    /**\n     * compare the value of the two objects and return true if they are equivalent in values\n     */\n    return function comparator(a, b, state) {\n        // If the items are strictly equal, no need to do a value comparison.\n        if (a === b) {\n            return true;\n        }\n        // If either of the items are nullish and fail the strictly equal check\n        // above, then they must be unequal.\n        if (a == null || b == null) {\n            return false;\n        }\n        var type = typeof a;\n        if (type !== typeof b) {\n            return false;\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                return areNumbersEqual(a, b, state);\n            }\n            if (type === 'function') {\n                return areFunctionsEqual(a, b, state);\n            }\n            // If a primitive value that is not strictly equal, it must be unequal.\n            return false;\n        }\n        var constructor = a.constructor;\n        // Checks are listed in order of commonality of use-case:\n        //   1. Common complex object types (plain object, array)\n        //   2. Common data values (date, regexp)\n        //   3. Less-common complex object types (map, set)\n        //   4. Less-common data values (promise, primitive wrappers)\n        // Inherently this is both subjective and assumptive, however\n        // when reviewing comparable libraries in the wild this order\n        // appears to be generally consistent.\n        // Constructors should match, otherwise there is potential for false positives\n        // between class and subclass or custom object and POJO.\n        if (constructor !== b.constructor) {\n            return false;\n        }\n        // `isPlainObject` only checks against the object's own realm. Cross-realm\n        // comparisons are rare, and will be handled in the ultimate fallback, so\n        // we can avoid capturing the string tag.\n        if (constructor === Object) {\n            return areObjectsEqual(a, b, state);\n        }\n        // `isArray()` works on subclasses and is cross-realm, so we can avoid capturing\n        // the string tag or doing an `instanceof` check.\n        if (isArray(a)) {\n            return areArraysEqual(a, b, state);\n        }\n        // `isTypedArray()` works on all possible TypedArray classes, so we can avoid\n        // capturing the string tag or comparing against all possible constructors.\n        if (isTypedArray != null && isTypedArray(a)) {\n            return areTypedArraysEqual(a, b, state);\n        }\n        // Try to fast-path equality checks for other complex object types in the\n        // same realm to avoid capturing the string tag. Strict equality is used\n        // instead of `instanceof` because it is more performant for the common\n        // use-case. If someone is subclassing a native class, it will be handled\n        // with the string tag comparison.\n        if (constructor === Date) {\n            return areDatesEqual(a, b, state);\n        }\n        if (constructor === RegExp) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (constructor === Map) {\n            return areMapsEqual(a, b, state);\n        }\n        if (constructor === Set) {\n            return areSetsEqual(a, b, state);\n        }\n        // Since this is a custom object, capture the string tag to determing its type.\n        // This is reasonably performant in modern environments like v8 and SpiderMonkey.\n        var tag = getTag(a);\n        if (tag === DATE_TAG) {\n            return areDatesEqual(a, b, state);\n        }\n        // For RegExp, the properties are not enumerable, and therefore will give false positives if\n        // tested like a standard object.\n        if (tag === REG_EXP_TAG) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (tag === MAP_TAG) {\n            return areMapsEqual(a, b, state);\n        }\n        if (tag === SET_TAG) {\n            return areSetsEqual(a, b, state);\n        }\n        if (tag === OBJECT_TAG) {\n            // The exception for value comparison is custom `Promise`-like class instances. These should\n            // be treated the same as standard `Promise` objects, which means strict equality, and if\n            // it reaches this point then that strict equality comparison has already failed.\n            return (typeof a.then !== 'function' &&\n                typeof b.then !== 'function' &&\n                areObjectsEqual(a, b, state));\n        }\n        // If a URL tag, it should be tested explicitly. Like RegExp, the properties are not\n        // enumerable, and therefore will give false positives if tested like a standard object.\n        if (tag === URL_TAG) {\n            return areUrlsEqual(a, b, state);\n        }\n        // If an error tag, it should be tested explicitly. Like RegExp, the properties are not\n        // enumerable, and therefore will give false positives if tested like a standard object.\n        if (tag === ERROR_TAG) {\n            return areErrorsEqual(a, b, state);\n        }\n        // If an arguments tag, it should be treated as a standard object.\n        if (tag === ARGUMENTS_TAG) {\n            return areObjectsEqual(a, b, state);\n        }\n        // As the penultimate fallback, check if the values passed are primitive wrappers. This\n        // is very rare in modern JS, which is why it is deprioritized compared to all other object\n        // types.\n        if (tag === BOOLEAN_TAG || tag === NUMBER_TAG || tag === STRING_TAG) {\n            return arePrimitiveWrappersEqual(a, b, state);\n        }\n        // If not matching any tags that require a specific type of comparison, then we hard-code false because\n        // the only thing remaining is strict equality, which has already been compared. This is for a few reasons:\n        //   - Certain types that cannot be introspected (e.g., `WeakMap`). For these types, this is the only\n        //     comparison that can be made.\n        //   - For types that can be introspected, but rarely have requirements to be compared\n        //     (`ArrayBuffer`, `DataView`, etc.), the cost is avoided to prioritize the common\n        //     use-cases (may be included in a future release, if requested enough).\n        //   - For types that can be introspected but do not have an objective definition of what\n        //     equality is (`Error`, etc.), the subjective decision is to be conservative and strictly compare.\n        // In all cases, these decisions should be reevaluated based on changes to the language and\n        // common development practices.\n        return false;\n    };\n}\n/**\n * Create the configuration object used for building comparators.\n */\nfunction createEqualityComparatorConfig(_a) {\n    var circular = _a.circular, createCustomConfig = _a.createCustomConfig, strict = _a.strict;\n    var config = {\n        areArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areArraysEqual,\n        areDatesEqual: areDatesEqual,\n        areErrorsEqual: areErrorsEqual,\n        areFunctionsEqual: areFunctionsEqual,\n        areMapsEqual: strict\n            ? combineComparators(areMapsEqual, areObjectsEqualStrict)\n            : areMapsEqual,\n        areNumbersEqual: areNumbersEqual,\n        areObjectsEqual: strict\n            ? areObjectsEqualStrict\n            : areObjectsEqual,\n        arePrimitiveWrappersEqual: arePrimitiveWrappersEqual,\n        areRegExpsEqual: areRegExpsEqual,\n        areSetsEqual: strict\n            ? combineComparators(areSetsEqual, areObjectsEqualStrict)\n            : areSetsEqual,\n        areTypedArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areTypedArraysEqual,\n        areUrlsEqual: areUrlsEqual,\n    };\n    if (createCustomConfig) {\n        config = assign({}, config, createCustomConfig(config));\n    }\n    if (circular) {\n        var areArraysEqual$1 = createIsCircular(config.areArraysEqual);\n        var areMapsEqual$1 = createIsCircular(config.areMapsEqual);\n        var areObjectsEqual$1 = createIsCircular(config.areObjectsEqual);\n        var areSetsEqual$1 = createIsCircular(config.areSetsEqual);\n        config = assign({}, config, {\n            areArraysEqual: areArraysEqual$1,\n            areMapsEqual: areMapsEqual$1,\n            areObjectsEqual: areObjectsEqual$1,\n            areSetsEqual: areSetsEqual$1,\n        });\n    }\n    return config;\n}\n/**\n * Default equality comparator pass-through, used as the standard `isEqual` creator for\n * use inside the built comparator.\n */\nfunction createInternalEqualityComparator(compare) {\n    return function (a, b, _indexOrKeyA, _indexOrKeyB, _parentA, _parentB, state) {\n        return compare(a, b, state);\n    };\n}\n/**\n * Create the `isEqual` function used by the consuming application.\n */\nfunction createIsEqual(_a) {\n    var circular = _a.circular, comparator = _a.comparator, createState = _a.createState, equals = _a.equals, strict = _a.strict;\n    if (createState) {\n        return function isEqual(a, b) {\n            var _a = createState(), _b = _a.cache, cache = _b === void 0 ? circular ? new WeakMap() : undefined : _b, meta = _a.meta;\n            return comparator(a, b, {\n                cache: cache,\n                equals: equals,\n                meta: meta,\n                strict: strict,\n            });\n        };\n    }\n    if (circular) {\n        return function isEqual(a, b) {\n            return comparator(a, b, {\n                cache: new WeakMap(),\n                equals: equals,\n                meta: undefined,\n                strict: strict,\n            });\n        };\n    }\n    var state = {\n        cache: undefined,\n        equals: equals,\n        meta: undefined,\n        strict: strict,\n    };\n    return function isEqual(a, b) {\n        return comparator(a, b, state);\n    };\n}\n\n/**\n * Whether the items passed are deeply-equal in value.\n */\nvar deepEqual = createCustomEqual();\n/**\n * Whether the items passed are deeply-equal in value based on strict comparison.\n */\nvar strictDeepEqual = createCustomEqual({ strict: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references.\n */\nvar circularDeepEqual = createCustomEqual({ circular: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularDeepEqual = createCustomEqual({\n    circular: true,\n    strict: true,\n});\n/**\n * Whether the items passed are shallowly-equal in value.\n */\nvar shallowEqual = createCustomEqual({\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value based on strict comparison\n */\nvar strictShallowEqual = createCustomEqual({\n    strict: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references.\n */\nvar circularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n    strict: true,\n});\n/**\n * Create a custom equality comparison method.\n *\n * This can be done to create very targeted comparisons in extreme hot-path scenarios\n * where the standard methods are not performant enough, but can also be used to provide\n * support for legacy environments that do not support expected features like\n * `RegExp.prototype.flags` out of the box.\n */\nfunction createCustomEqual(options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.circular, circular = _a === void 0 ? false : _a, createCustomInternalComparator = options.createInternalComparator, createState = options.createState, _b = options.strict, strict = _b === void 0 ? false : _b;\n    var config = createEqualityComparatorConfig(options);\n    var comparator = createEqualityComparator(config);\n    var equals = createCustomInternalComparator\n        ? createCustomInternalComparator(comparator)\n        : createInternalEqualityComparator(comparator);\n    return createIsEqual({ circular: circular, comparator: comparator, createState: createState, equals: equals, strict: strict });\n}\n\nexport { circularDeepEqual, circularShallowEqual, createCustomEqual, deepEqual, sameValueZeroEqual, shallowEqual, strictCircularDeepEqual, strictCircularShallowEqual, strictDeepEqual, strictShallowEqual };\n//# sourceMappingURL=index.mjs.map\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{addClassNamesToElement as t,isHTMLAnchorElement as e,$findMatchingParent as r}from\"@lexical/utils\";import{createCommand as n,ElementNode as i,$isRangeSelection as s,$applyNodeReplacement as l,$isElementNode as o,$getSelection as u,$isNodeSelection as a,$normalizeSelection__EXPERIMENTAL as c,$setSelection as _}from\"lexical\";const h=new Set([\"http:\",\"https:\",\"mailto:\",\"sms:\",\"tel:\"]);class g extends i{static getType(){return\"link\"}static clone(t){return new g(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t=\"\",e={},r){super(r);const{target:n=null,rel:i=null,title:s=null}=e;this.__url=t,this.__target=n,this.__rel=i,this.__title=s}createDOM(e){const r=document.createElement(\"a\");return this.updateLinkDOM(null,r,e),t(r,e.theme.link),r}updateLinkDOM(t,r,n){if(e(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const e of[\"target\",\"rel\",\"title\"]){const n=`__${e}`,i=this[n];t&&t[n]===i||(i?r[e]=i:r.removeAttribute(e))}}}updateDOM(t,e,r){return this.updateLinkDOM(t,e,r),!1}static importDOM(){return{a:t=>({conversion:f,priority:1})}}static importJSON(t){return d().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=S(t);try{const e=new URL(S(t));if(!h.has(e.protocol))return\"about:blank\"}catch(e){return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const e=this.getWritable();return e.__url=t,e}getTarget(){return this.getLatest().__target}setTarget(t){const e=this.getWritable();return e.__target=t,e}getRel(){return this.getLatest().__rel}setRel(t){const e=this.getWritable();return e.__rel=t,e}getTitle(){return this.getLatest().__title}setTitle(t){const e=this.getWritable();return e.__title=t,e}insertNewAfter(t,e=!0){const r=d(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,e),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,e,r){if(!s(e))return!1;const n=e.anchor.getNode(),i=e.focus.getNode();return this.isParentOf(n)&&this.isParentOf(i)&&e.getTextContent().length>0}isEmailURI(){return this.__url.startsWith(\"mailto:\")}isWebSiteURI(){return this.__url.startsWith(\"https://\")||this.__url.startsWith(\"http://\")}}function f(t){let r=null;if(e(t)){const e=t.textContent;(null!==e&&\"\"!==e||t.children.length>0)&&(r=d(t.getAttribute(\"href\")||\"\",{rel:t.getAttribute(\"rel\"),target:t.getAttribute(\"target\"),title:t.getAttribute(\"title\")}))}return{node:r}}function d(t=\"\",e){return l(new g(t,e))}function p(t){return t instanceof g}class m extends g{constructor(t=\"\",e={},r){super(t,e,r),this.__isUnlinked=void 0!==e.isUnlinked&&null!==e.isUnlinked&&e.isUnlinked}static getType(){return\"autolink\"}static clone(t){return new m(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const e=this.getWritable();return e.__isUnlinked=t,e}createDOM(t){return this.__isUnlinked?document.createElement(\"span\"):super.createDOM(t)}updateDOM(t,e,r){return super.updateDOM(t,e,r)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return U().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,e=!0){const r=this.getParentOrThrow().insertNewAfter(t,e);if(o(r)){const t=U(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(t),t}return null}}function U(t=\"\",e){return l(new m(t,e))}function O(t){return t instanceof m}const k=n(\"TOGGLE_LINK_COMMAND\");function N(t,e){if(\"element\"===t.type){const r=t.getNode();o(r)||function(t,...e){const r=new URL(\"https://lexical.dev/docs/error\"),n=new URLSearchParams;n.append(\"code\",t);for(const t of e)n.append(\"v\",t);throw r.search=n.toString(),Error(`Minified Lexical error #${t}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252);return r.getChildren()[t.offset+e]||null}return null}function v(t,e={}){const{target:n,title:i}=e,l=void 0===e.rel?\"noreferrer\":e.rel,h=u();if(null===h||!s(h)&&!a(h))return;if(a(h)){const e=h.getNodes();if(0===e.length)return;return void e.forEach((e=>{if(null===t){const t=r(e,(t=>!O(t)&&p(t)));t&&(t.insertBefore(e),0===t.getChildren().length&&t.remove())}else{const i=r(e,(t=>!O(t)&&p(t)));if(i)i.setURL(t),void 0!==n&&i.setTarget(n),void 0!==l&&i.setRel(l);else{const r=d(t,{rel:l,target:n});e.insertBefore(r),r.append(e)}}}))}const g=h.extract();if(null===t)return void g.forEach((t=>{const e=r(t,(t=>!O(t)&&p(t)));if(e){const t=e.getChildren();for(let r=0;r<t.length;r++)e.insertBefore(t[r]);e.remove()}}));const f=new Set,m=e=>{f.has(e.getKey())||(f.add(e.getKey()),e.setURL(t),void 0!==n&&e.setTarget(n),void 0!==l&&e.setRel(l),void 0!==i&&e.setTitle(i))};if(1===g.length){const t=x(g[0],p);if(null!==t)return m(t)}!function(t){const e=u();if(!s(e))return t();const r=c(e),n=r.isBackward(),i=N(r.anchor,n?-1:0),l=N(r.focus,n?0:-1),o=t();if(i||l){const t=u();if(s(t)){const e=t.clone();if(i){const t=i.getParent();t&&e.anchor.set(t.getKey(),i.getIndexWithinParent()+(n?1:0),\"element\")}if(l){const t=l.getParent();t&&e.focus.set(t.getKey(),l.getIndexWithinParent()+(n?0:1),\"element\")}_(c(e))}}}((()=>{let e=null;for(const r of g){if(!r.isAttached())continue;const s=x(r,p);if(s){m(s);continue}if(o(r)){if(!r.isInline())continue;if(p(r)){if(!(O(r)||null!==e&&e.getParentOrThrow().isParentOf(r))){m(r),e=r;continue}for(const t of r.getChildren())r.insertBefore(t);r.remove();continue}}const u=r.getPreviousSibling();p(u)&&u.is(e)?u.append(r):(e=d(t,{rel:l,target:n,title:i}),r.insertAfter(e),e.append(r))}}))}const T=v;function x(t,e){let r=t;for(;null!==r&&null!==r.getParent()&&!e(r);)r=r.getParentOrThrow();return e(r)?r:null}const L=/^\\+?[0-9\\s()-]{5,}$/;function S(t){return t.match(/^[a-z][a-z0-9+.-]*:/i)||t.match(/^[/#.]/)?t:t.includes(\"@\")?`mailto:${t}`:L.test(t)?`tel:${t}`:`https://${t}`}export{U as $createAutoLinkNode,d as $createLinkNode,O as $isAutoLinkNode,p as $isLinkNode,v as $toggleLink,m as AutoLinkNode,g as LinkNode,k as TOGGLE_LINK_COMMAND,S as formatUrl,T as toggleLink};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{ElementNode as t,$isRangeSelection as e,$applyNodeReplacement as r,$createRangeSelection as n,$isElementNode as s,$isTextNode as i,$isDecoratorNode as o}from\"lexical\";import{addClassNamesToElement as c,removeClassNamesFromElement as u}from\"@lexical/utils\";const l=[];class f extends t{static getType(){return\"mark\"}static clone(t){return new f(t.__ids,t.__key)}static importDOM(){return null}static importJSON(t){return a().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIDs(t.ids)}exportJSON(){return{...super.exportJSON(),ids:this.getIDs()}}constructor(t=l,e){super(e),this.__ids=t}createDOM(t){const e=document.createElement(\"mark\");return c(e,t.theme.mark),this.__ids.length>1&&c(e,t.theme.markOverlap),e}updateDOM(t,e,r){const n=t.__ids,s=this.__ids,i=n.length,o=s.length,l=r.theme.markOverlap;return i!==o&&(1===i?2===o&&c(e,l):1===o&&u(e,l)),!1}hasID(t){return this.getIDs().includes(t)}getIDs(){return Array.from(this.getLatest().__ids)}setIDs(t){const e=this.getWritable();return e.__ids=t,e}addID(t){const e=this.getWritable();return e.__ids.includes(t)?e:e.setIDs([...e.__ids,t])}deleteID(t){const e=this.getWritable(),r=e.__ids.indexOf(t);if(-1===r)return e;const n=Array.from(e.__ids);return n.splice(r,1),e.setIDs(n)}insertNewAfter(t,e=!0){const r=a(this.__ids);return this.insertAfter(r,e),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!e(r)||\"html\"===n)return!1;const s=r.anchor,i=r.focus,o=s.getNode(),c=i.getNode(),u=r.isBackward()?s.offset-i.offset:i.offset-s.offset;return this.isParentOf(o)&&this.isParentOf(c)&&this.getTextContent().length===u}excludeFromCopy(t){return\"clone\"!==t}}function a(t=l){return r(new f(t))}function d(t){return t instanceof f}function h(t){const e=t.getChildren();let r=null;for(let n=0;n<e.length;n++){const s=e[n];null===r?t.insertBefore(s):r.insertAfter(s),r=s}t.remove()}function _(t,e,r,c){const u=n(),[l,f]=t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus];let h,_;u.anchor.set(l.key,l.offset,l.type),u.focus.set(f.key,f.offset,f.type);const m=u.extract();for(const t of m){if(s(_)&&_.isParentOf(t))continue;let e=null;if(i(t))e=t;else{if(d(t))continue;(s(t)||o(t))&&t.isInline()&&(e=t)}if(null!==e){if(e&&e.is(h))continue;const t=e.getParent();if(null!=t&&t.is(h)||(_=void 0),h=t,void 0===_){_=(c||a)([r]),e.insertBefore(_)}_.append(e)}else h=void 0,_=void 0}s(_)&&(e?_.selectStart():_.selectEnd())}function m(t,e){let r=t;for(;null!==r;){if(d(r))return r.getIDs();if(i(r)&&e===r.getTextContentSize()){const t=r.getNextSibling();if(d(t))return t.getIDs()}r=r.getParent()}return null}export{a as $createMarkNode,m as $getMarkIDs,d as $isMarkNode,h as $unwrapMarkNode,_ as $wrapSelectionInMarkNode,f as MarkNode};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$generateHtmlFromNodes as e}from\"@lexical/html\";import{$isLinkNode as t}from\"@lexical/link\";import{$isMarkNode as n}from\"@lexical/mark\";import{$isTableSelection as r}from\"@lexical/table\";import{$getSelection as o,$getRoot as i,$isRangeSelection as l,$isNodeSelection as s,$isElementNode as a,$isTextNode as c,$isParagraphNode as u,COMMAND_PRIORITY_CRITICAL as f}from\"lexical\";import{forwardRef as d,useState as h,useRef as m,useCallback as g,useEffect as p,useMemo as y}from\"react\";import{jsxs as $,jsx as b}from\"react/jsx-runtime\";const x=Object.freeze({\"\\t\":\"\\\\t\",\"\\n\":\"\\\\n\"}),C=new RegExp(Object.keys(x).join(\"|\"),\"g\"),S=Object.freeze({ancestorHasNextSibling:\"|\",ancestorIsLastChild:\" \",hasNextSibling:\"â”œ\",isLastChild:\"â””\",selectedChar:\"^\",selectedLine:\">\"}),N=[e=>e.hasFormat(\"bold\")&&\"Bold\",e=>e.hasFormat(\"code\")&&\"Code\",e=>e.hasFormat(\"italic\")&&\"Italic\",e=>e.hasFormat(\"strikethrough\")&&\"Strikethrough\",e=>e.hasFormat(\"subscript\")&&\"Subscript\",e=>e.hasFormat(\"superscript\")&&\"Superscript\",e=>e.hasFormat(\"underline\")&&\"Underline\",e=>e.hasFormat(\"highlight\")&&\"Highlight\"],T=[e=>e.hasTextFormat(\"bold\")&&\"Bold\",e=>e.hasTextFormat(\"code\")&&\"Code\",e=>e.hasTextFormat(\"italic\")&&\"Italic\",e=>e.hasTextFormat(\"strikethrough\")&&\"Strikethrough\",e=>e.hasTextFormat(\"subscript\")&&\"Subscript\",e=>e.hasTextFormat(\"superscript\")&&\"Superscript\",e=>e.hasTextFormat(\"underline\")&&\"Underline\",e=>e.hasTextFormat(\"highlight\")&&\"Highlight\"],k=[e=>e.isDirectionless()&&\"Directionless\",e=>e.isUnmergeable()&&\"Unmergeable\"],j=[e=>e.isToken()&&\"Token\",e=>e.isSegmented()&&\"Segmented\"];function v(f,d,h,m,g=!1){const p=f.getEditorState(),y=f._config,$=f._compositionKey,b=f._editable;if(h){let t=\"\";return p.read((()=>{t=function(e){const t=document.createElement(\"div\");return t.innerHTML=e.trim(),K(t,0).innerHTML}(e(f))})),t}let x=\" root\\n\";const N=p.read((()=>{const e=o();return L(i(),((r,o)=>{const i=`(${r.getKey()})`,f=r.getType()||\"\",d=r.isSelected();x+=`${d?S.selectedLine:\" \"} ${o.join(\" \")} ${i} ${f} ${function(e,r,o=!1){const i=r?r(e,o):void 0;if(void 0!==i&&i.length>0)return i;if(c(e)){const t=e.getTextContent(),n=0===t.length?\"(empty)\":`\"${B(t,o)}\"`,r=function(e){return[w(e),E(e),F(e),H(e)].filter(Boolean).join(\", \")}(e);return[n,0!==r.length?`{ ${r} }`:null].filter(Boolean).join(\" \").trim()}if(t(e)){const t=e.getURL(),n=0===t.length?\"(empty)\":`\"${B(t,o)}\"`,r=function(e){return[_(e),D(e),O(e),H(e)].filter(Boolean).join(\", \")}(e);return[n,0!==r.length?`{ ${r} }`:null].filter(Boolean).join(\" \").trim()}if(n(e))return`ids: [ ${e.getIDs().join(\", \")} ]`;if(u(e)){const t=function(e){let t=T.map((t=>t(e))).filter(Boolean).join(\", \").toLocaleLowerCase();\"\"!==t&&(t=\"format: \"+t);return t}(e);let n=\"\"!==t?`{ ${t} }`:\"\";return n+=e.__style?`(${e.__style})`:\"\",n}return\"\"}(r,m,g)}\\n`,x+=function({indent:e,isSelected:t,node:n,nodeKeyDisplay:r,selection:o,typeDisplay:i}){if(!c(n)||!l(o)||!t||a(n))return\"\";const u=o.anchor,f=o.focus;if(\"\"===n.getTextContent()||u.getNode()===o.focus.getNode()&&u.offset===f.offset)return\"\";const[d,h]=function(e,t){const n=t.getStartEndPoints();if(s(t)||null===n)return[-1,-1];const[r,o]=n,i=e.getTextContent(),l=i.length;let a=-1,c=-1;if(\"text\"===r.type&&\"text\"===o.type){const t=r.getNode(),n=o.getNode();t===n&&e===t&&r.offset!==o.offset?[a,c]=r.offset<o.offset?[r.offset,o.offset]:[o.offset,r.offset]:[a,c]=e===t?t.isBefore(n)?[r.offset,l]:[0,r.offset]:e===n?n.isBefore(t)?[o.offset,l]:[0,o.offset]:[0,l]}const u=(i.slice(0,a).match(C)||[]).length,f=(i.slice(a,c).match(C)||[]).length;return[a+u,c+u+f]}(n,o);if(d===h)return\"\";const m=e[e.length-1]===S.hasNextSibling?S.ancestorHasNextSibling:S.ancestorIsLastChild,g=[...e.slice(0,e.length-1),m],p=Array(d+1).fill(\" \"),y=Array(h-d).fill(S.selectedChar),$=i.length+2,b=Array(r.length+$).fill(\" \");return[S.selectedLine,g.join(\" \"),[...b,...p,...y].join(\"\")].join(\" \")+\"\\n\"}({indent:o,isSelected:d,node:r,nodeKeyDisplay:i,selection:e,typeDisplay:f})})),null===e?\": null\":l(e)?function(e){let t=\"\";const n=w(e);t+=`: range ${\"\"!==n?`{ ${n} }`:\"\"} ${\"\"!==e.style?`{ style: ${e.style} } `:\"\"}`;const r=e.anchor,o=e.focus,i=r.offset,l=o.offset;return t+=`\\n  â”œ anchor { key: ${r.key}, offset: ${null===i?\"null\":i}, type: ${r.type} }`,t+=`\\n  â”” focus { key: ${o.key}, offset: ${null===l?\"null\":l}, type: ${o.type} }`,t}(e):r(e)?function(e){return`: table\\n  â”” { table: ${e.tableKey}, anchorCell: ${e.anchor.key}, focusCell: ${e.focus.key} }`}(e):function(e){if(!s(e))return\"\";return`: node\\n  â”” [${Array.from(e._nodes).join(\", \")}]`}(e)}));if(x+=\"\\n selection\"+N,x+=\"\\n\\n commands:\",d.length)for(const{index:e,type:t,payload:n}of d)x+=`\\n  â”” ${e}. { type: ${t}, payload: ${n instanceof Event?n.constructor.name:n} }`;else x+=\"\\n  â”” None dispatched.\";const{version:k}=f.constructor;return x+=`\\n\\n editor${k?` (v${k})`:\"\"}:`,x+=`\\n  â”” namespace ${y.namespace}`,null!==$&&(x+=`\\n  â”” compositionKey ${$}`),x+=`\\n  â”” editable ${String(b)}`,x}function L(e,t,n=[]){const r=e.getChildren(),o=r.length;r.forEach(((e,r)=>{t(e,n.concat(r===o-1?S.isLastChild:S.hasNextSibling)),a(e)&&L(e,t,n.concat(r===o-1?S.ancestorIsLastChild:S.ancestorHasNextSibling))}))}function B(e,t=!1){const n=Object.entries(x).reduce(((e,[t,n])=>e.replace(new RegExp(t,\"g\"),String(n))),e);return t?n.replace(/[^\\s]/g,\"*\"):n}function E(e){let t=k.map((t=>t(e))).filter(Boolean).join(\", \").toLocaleLowerCase();return\"\"!==t&&(t=\"detail: \"+t),t}function F(e){let t=j.map((t=>t(e))).filter(Boolean).join(\", \").toLocaleLowerCase();return\"\"!==t&&(t=\"mode: \"+t),t}function w(e){let t=N.map((t=>t(e))).filter(Boolean).join(\", \").toLocaleLowerCase();return\"\"!==t&&(t=\"format: \"+t),t}function _(e){let t=e.getTarget();return null!=t&&(t=\"target: \"+t),t}function D(e){let t=e.getRel();return null!=t&&(t=\"rel: \"+t),t}function O(e){let t=e.getTitle();return null!=t&&(t=\"title: \"+t),t}function H(e){if(!e.__state)return!1;const t=[];for(const[n,r]of e.__state.knownState.entries()){if(n.isEqual(r,n.defaultValue))continue;const e=JSON.stringify(n.unparse(r));t.push(`[${n.key}: ${e}]`)}let n=t.join(\",\");return\"\"!==n&&(n=\"state: \"+n),n}function K(e,t){const n=new Array(1+t++).join(\"  \"),r=new Array(t-1).join(\"  \");let o;for(let i=0;i<e.children.length;i++)o=document.createTextNode(\"\\n\"+n),e.insertBefore(o,e.children[i]),K(e.children[i],t),e.lastElementChild===e.children[i]&&(o=document.createTextNode(\"\\n\"+r),e.appendChild(o));return e}const A=d((function({treeTypeButtonClassName:e,timeTravelButtonClassName:t,timeTravelPanelSliderClassName:n,timeTravelPanelButtonClassName:r,viewClassName:o,timeTravelPanelClassName:i,editorState:l,setEditorState:s,setEditorReadOnly:a,generateContent:c,commandsLog:u=[]},f){const[d,y]=h([]),[x,C]=h(\"\"),[S,N]=h(!1),[T,k]=h(!1),j=m(0),v=m(null),[L,B]=h(!1),[E,F]=h(!1),[w,_]=h(!1),D=m(),O=m([]),H=m(0),K=g((e=>{const t=++H.current;c(e).then((e=>{t===H.current&&C(e)})).catch((e=>{t===H.current&&C(`Error rendering tree: ${e.message}\\n\\nStack:\\n${e.stack}`)}))}),[c]);p((()=>{if(!w&&l._nodeMap.size>1e3&&(F(!0),!w))return;if(D.current!==l||O.current!==u){const e=D.current!==l;D.current=l,O.current=u,K(T),!S&&e&&y((e=>[...e,[Date.now(),l]]))}}),[l,K,T,w,S,u]);const A=d.length;p((()=>{if(L){let e;const t=()=>{const n=j.current;if(n===A-1)return void B(!1);const r=d[n][0],o=d[n+1][0];e=setTimeout((()=>{j.current++;const e=j.current,n=v.current;null!==n&&(n.value=String(e)),s(d[e][1]),t()}),o-r)};return t(),()=>{clearTimeout(e)}}}),[d,L,A,s]);return $(\"div\",{className:o,children:[!w&&E?$(\"div\",{style:{padding:20},children:[b(\"span\",{style:{marginRight:20},children:\"Detected large EditorState, this can impact debugging performance.\"}),b(\"button\",{onClick:()=>{_(!0)},style:{background:\"transparent\",border:\"1px solid white\",color:\"white\",cursor:\"pointer\",padding:5},children:\"Show full tree\"})]}):null,w?null:b(\"button\",{onClick:()=>(K(!T),void k(!T)),className:e,type:\"button\",children:T?\"Tree\":\"Export DOM\"}),!S&&(w||!E)&&A>2&&b(\"button\",{onClick:()=>{a(!0),j.current=A-1,N(!0)},className:t,type:\"button\",children:\"Time Travel\"}),(w||!E)&&b(\"pre\",{ref:f,children:x}),S&&(w||!E)&&$(\"div\",{className:i,children:[b(\"button\",{className:r,onClick:()=>{j.current===A-1&&(j.current=1),B(!L)},type:\"button\",children:L?\"Pause\":\"Play\"}),b(\"input\",{className:n,ref:v,onChange:e=>{const t=Number(e.target.value),n=d[t];n&&(j.current=t,s(n[1]))},type:\"range\",min:\"1\",max:A-1}),b(\"button\",{className:r,onClick:()=>{a(!1);const e=d.length-1,t=d[e];s(t[1]);const n=v.current;null!==n&&(n.value=String(e)),N(!1),B(!1)},type:\"button\",children:\"Exit\"})]})]})}));function I(e,t){const n=new Set;let r=0;for(const[o]of e._commands)n.add(e.registerCommand(o,(e=>(t((t=>{r+=1;const n=[...t];return n.push({index:r,payload:e,type:o.type?o.type:\"UNKNOWN\"}),n.length>10&&n.shift(),n})),!1)),f));return()=>n.forEach((e=>e()))}function P(e){const[t,n]=h([]);return p((()=>I(e,n)),[e]),y((()=>t),[t])}export{A as TreeView,v as generateContent,I as registerLexicalCommandLogger,P as useLexicalCommandsLog};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalCommandsLog as e,TreeView as t,generateContent as a}from\"@lexical/devtools-core\";import{mergeRegister as r}from\"@lexical/utils\";import*as l from\"react\";import{useState as i,useEffect as o}from\"react\";import{jsx as s}from\"react/jsx-runtime\";function n({treeTypeButtonClassName:n,timeTravelButtonClassName:m,timeTravelPanelSliderClassName:c,timeTravelPanelButtonClassName:d,timeTravelPanelClassName:u,viewClassName:C,editor:N,customPrintNode:f}){const v=l.createRef(),[T,E]=i(N.getEditorState()),p=e(N);o((()=>r(N.registerUpdateListener((({editorState:e})=>{E(e)})),N.registerEditableListener((()=>{E(N.getEditorState())})))),[N]),o((()=>{const e=v.current;if(null!==e)return e.__lexicalEditor=N,()=>{e.__lexicalEditor=null}}),[N,v]);return s(t,{treeTypeButtonClassName:n,timeTravelButtonClassName:m,timeTravelPanelSliderClassName:c,timeTravelPanelButtonClassName:d,viewClassName:C,timeTravelPanelClassName:u,setEditorReadOnly:e=>{const t=N.getRootElement();null!=t&&(t.contentEditable=e?\"false\":\"true\")},editorState:T,setEditorState:e=>N.setEditorState(e),generateContent:async function(e){return a(N,p,e,f)},ref:v,commandsLog:p})}export{n as TreeView};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as t}from\"@lexical/react/LexicalComposerContext\";import*as e from\"react\";function o({editorRef:o}){const[r]=t();return e.useEffect((()=>{\"function\"==typeof o?o(r):\"object\"==typeof o&&(o.current=r)}),[r]),null}export{o as EditorRefPlugin};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{mergeRegister as t}from\"@lexical/utils\";import{UNDO_COMMAND as e,COMMAND_PRIORITY_EDITOR as n,REDO_COMMAND as r,CLEAR_EDITOR_COMMAND as o,CLEAR_HISTORY_COMMAND as i,CAN_REDO_COMMAND as c,CAN_UNDO_COMMAND as s,HISTORIC_TAG as a,HISTORY_PUSH_TAG as u,HISTORY_MERGE_TAG as d,$isRangeSelection as l,$isTextNode as f,$isRootNode as p}from\"lexical\";const m=0,h=1,_=2,g=0,S=1,k=2,y=3,C=4;function x(t,e,n,r,o){if(null===t||0===n.size&&0===r.size&&!o)return g;const i=e._selection,c=t._selection;if(o)return S;if(!(l(i)&&l(c)&&c.isCollapsed()&&i.isCollapsed()))return g;const s=function(t,e,n){const r=t._nodeMap,o=[];for(const t of e){const e=r.get(t);void 0!==e&&o.push(e)}for(const[t,e]of n){if(!e)continue;const n=r.get(t);void 0===n||p(n)||o.push(n)}return o}(e,n,r);if(0===s.length)return g;if(s.length>1){const n=e._nodeMap,r=n.get(i.anchor.key),o=n.get(c.anchor.key);return r&&o&&!t._nodeMap.has(r.__key)&&f(r)&&1===r.__text.length&&1===i.anchor.offset?k:g}const a=s[0],u=t._nodeMap.get(a.__key);if(!f(u)||!f(a)||u.__mode!==a.__mode)return g;const d=u.__text,m=a.__text;if(d===m)return g;const h=i.anchor,_=c.anchor;if(h.key!==_.key||\"text\"!==h.type)return g;const x=h.offset,M=_.offset,z=m.length-d.length;return 1===z&&M===x-1?k:-1===z&&M===x+1?y:-1===z&&M===x?C:g}function M(t,e){let n=Date.now(),r=g;return(o,i,c,s,p,S)=>{const k=Date.now();if(S.has(a))return r=g,n=k,_;const y=x(o,i,s,p,t.isComposing()),C=(()=>{const a=null===c||c.editor===t,C=S.has(u);if(!C&&a&&S.has(d))return m;if(null===o)return h;const x=i._selection;if(!(s.size>0||p.size>0))return null!==x?m:_;if(!1===C&&y!==g&&y===r&&k<n+e&&a)return m;if(1===s.size){if(function(t,e,n){const r=e._nodeMap.get(t),o=n._nodeMap.get(t),i=e._selection,c=n._selection;return!(l(i)&&l(c)&&\"element\"===i.anchor.type&&\"element\"===i.focus.type&&\"text\"===c.anchor.type&&\"text\"===c.focus.type||!f(r)||!f(o)||r.__parent!==o.__parent)&&JSON.stringify(e.read((()=>r.exportJSON())))===JSON.stringify(n.read((()=>o.exportJSON())))}(Array.from(s)[0],o,i))return m}return h})();return n=k,r=y,C}}function z(t){t.undoStack=[],t.redoStack=[],t.current=null}function v(u,d,l){const f=M(u,l),p=t(u.registerCommand(e,(()=>(function(t,e){const n=e.redoStack,r=e.undoStack;if(0!==r.length){const o=e.current,i=r.pop();null!==o&&(n.push(o),t.dispatchCommand(c,!0)),0===r.length&&t.dispatchCommand(s,!1),e.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:a})}}(u,d),!0)),n),u.registerCommand(r,(()=>(function(t,e){const n=e.redoStack,r=e.undoStack;if(0!==n.length){const o=e.current;null!==o&&(r.push(o),t.dispatchCommand(s,!0));const i=n.pop();0===n.length&&t.dispatchCommand(c,!1),e.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:a})}}(u,d),!0)),n),u.registerCommand(o,(()=>(z(d),!1)),n),u.registerCommand(i,(()=>(z(d),u.dispatchCommand(c,!1),u.dispatchCommand(s,!1),!0)),n),u.registerUpdateListener((({editorState:t,prevEditorState:e,dirtyLeaves:n,dirtyElements:r,tags:o})=>{const i=d.current,a=d.redoStack,l=d.undoStack,p=null===i?null:i.editorState;if(null!==i&&t===p)return;const m=f(e,t,i,n,r,o);if(m===h)0!==a.length&&(d.redoStack=[],u.dispatchCommand(c,!1)),null!==i&&(l.push({...i}),u.dispatchCommand(s,!0));else if(m===_)return;d.current={editor:u,editorState:t}})));return p}function E(){return{current:null,redoStack:[],undoStack:[]}}export{E as createEmptyHistoryState,v as registerHistory};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as t}from\"@lexical/react/LexicalComposerContext\";import{createEmptyHistoryState as o,registerHistory as r}from\"@lexical/history\";export{createEmptyHistoryState}from\"@lexical/history\";import{useMemo as e,useEffect as i}from\"react\";function a({delay:a,externalHistoryState:c}){const[l]=t();return function(t,a,c=1e3){const l=e((()=>a||o()),[a]);i((()=>r(t,l,c)),[c,t,l])}(l,c,a),null}export{a as HistoryPlugin};\n","/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nconst yAxisSides = /*#__PURE__*/new Set(['top', 'bottom']);\nfunction getSideAxis(placement) {\n  return yAxisSides.has(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nconst lrPlacement = ['left', 'right'];\nconst rlPlacement = ['right', 'left'];\nconst tbPlacement = ['top', 'bottom'];\nconst btPlacement = ['bottom', 'top'];\nfunction getSideList(side, isStart, rtl) {\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rlPlacement : lrPlacement;\n      return isStart ? lrPlacement : rlPlacement;\n    case 'left':\n    case 'right':\n      return isStart ? tbPlacement : btPlacement;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          const ignoreCrossAxisOverflow = checkCrossAxis === 'alignment' ? initialSideAxis !== getSideAxis(nextPlacement) : false;\n          if (!ignoreCrossAxisOverflow ||\n          // We leave the current main axis only if every placement on that axis\n          // overflows the main axis.\n          overflowsData.every(d => getSideAxis(d.placement) === initialSideAxis ? d.overflows[0] > 0 : true)) {\n            // Try next placement and re-run the lifecycle.\n            return {\n              data: {\n                index: nextIndex,\n                overflows: overflowsData\n              },\n              reset: {\n                placement: nextPlacement\n              }\n            };\n          }\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nconst originSides = /*#__PURE__*/new Set(['left', 'top']);\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = originSides.has(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = originSides.has(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element â€”\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n","function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nconst invalidOverflowDisplayValues = /*#__PURE__*/new Set(['inline', 'contents']);\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !invalidOverflowDisplayValues.has(display);\n}\nconst tableElements = /*#__PURE__*/new Set(['table', 'td', 'th']);\nfunction isTableElement(element) {\n  return tableElements.has(getNodeName(element));\n}\nconst topLayerSelectors = [':popover-open', ':modal'];\nfunction isTopLayer(element) {\n  return topLayerSelectors.some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (_e) {\n      return false;\n    }\n  });\n}\nconst transformProperties = ['transform', 'translate', 'scale', 'rotate', 'perspective'];\nconst willChangeValues = ['transform', 'translate', 'scale', 'rotate', 'perspective', 'filter'];\nconst containValues = ['paint', 'layout', 'strict', 'content'];\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  // https://drafts.csswg.org/css-transforms-2/#individual-transforms\n  return transformProperties.some(value => css[value] ? css[value] !== 'none' : false) || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || willChangeValues.some(value => (css.willChange || '').includes(value)) || containValues.some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nconst lastTraversableNodeNames = /*#__PURE__*/new Set(['html', 'body', '#document']);\nfunction isLastTraversableNode(node) {\n  return lastTraversableNodeNames.has(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n","import { rectToClientRect, arrow as arrow$1, autoPlacement as autoPlacement$1, detectOverflow as detectOverflow$1, flip as flip$1, hide as hide$1, inline as inline$1, limitShift as limitShift$1, offset as offset$1, shift as shift$1, size as size$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle as getComputedStyle$1, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getNodeScroll, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle$1(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle$1(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\nfunction getHTMLOffset(documentElement, scroll) {\n  const htmlRect = documentElement.getBoundingClientRect();\n  const x = htmlRect.left + scroll.scrollLeft - getWindowScrollBarX(documentElement, htmlRect);\n  const y = htmlRect.top + scroll.scrollTop;\n  return {\n    x,\n    y\n  };\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x + htmlOffset.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y + htmlOffset.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle$1(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Safety check: ensure the scrollbar space is reasonable in case this\n// calculation is affected by unusual styles.\n// Most scrollbars leave 15-18px of space.\nconst SCROLLBAR_MAX = 25;\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  const windowScrollbarX = getWindowScrollBarX(html);\n  // <html> `overflow: hidden` + `scrollbar-gutter: stable` reduces the\n  // visual width of the <html> but this is not considered in the size\n  // of `html.clientWidth`.\n  if (windowScrollbarX <= 0) {\n    const doc = html.ownerDocument;\n    const body = doc.body;\n    const bodyStyles = getComputedStyle(body);\n    const bodyMarginInline = doc.compatMode === 'CSS1Compat' ? parseFloat(bodyStyles.marginLeft) + parseFloat(bodyStyles.marginRight) || 0 : 0;\n    const clippingStableScrollbarWidth = Math.abs(html.clientWidth - body.clientWidth - bodyMarginInline);\n    if (clippingStableScrollbarWidth <= SCROLLBAR_MAX) {\n      width -= clippingStableScrollbarWidth;\n    }\n  } else if (windowScrollbarX <= SCROLLBAR_MAX) {\n    // If the <body> scrollbar is on the left, the width needs to be extended\n    // by the scrollbar amount so there isn't extra space on the right.\n    width += windowScrollbarX;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nconst absoluteOrFixed = /*#__PURE__*/new Set(['absolute', 'fixed']);\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y,\n      width: clippingAncestor.width,\n      height: clippingAncestor.height\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle$1(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle$1(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle$1(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && absoluteOrFixed.has(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n\n  // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n  // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n  function setLeftRTLScrollbarOffset() {\n    offsets.x = getWindowScrollBarX(documentElement);\n  }\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      setLeftRTLScrollbarOffset();\n    }\n  }\n  if (isFixed && !isOffsetParentAnElement && documentElement) {\n    setLeftRTLScrollbarOffset();\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlOffset.x;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlOffset.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle$1(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle$1(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle$1(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\nfunction rectsAreEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const elementRectForRootMargin = element.getBoundingClientRect();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = elementRectForRootMargin;\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      if (ratio === 1 && !rectsAreEqual(elementRectForRootMargin, element.getBoundingClientRect())) {\n        // It's possible that even though the ratio is reported as 1, the\n        // element is not actually fully within the IntersectionObserver's root\n        // area anymore. This can happen under performance constraints. This may\n        // be a bug in the browser's IntersectionObserver implementation. To\n        // work around this, we compare the element's bounding rect now with\n        // what it was at the time we created the IntersectionObserver. If they\n        // are not equal then the element moved, so we refresh.\n        refresh();\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (_e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && !rectsAreEqual(prevRefRect, nextRefRect)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element â€”\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as t}from\"@lexical/react/LexicalComposerContext\";import{mergeRegister as e,calculateZoomLevel as n}from\"@lexical/utils\";import{createCommand as o,KEY_ARROW_DOWN_COMMAND as l,KEY_ARROW_UP_COMMAND as r,KEY_ESCAPE_COMMAND as i,KEY_TAB_COMMAND as u,KEY_ENTER_COMMAND as c,COMMAND_PRIORITY_LOW as s,$getSelection as a,$isRangeSelection as m,isDOMNode as d}from\"lexical\";import*as p from\"react\";import{useLayoutEffect as f,useEffect as g,useState as h,useCallback as v,useMemo as w,useRef as y}from\"react\";import{jsx as b}from\"react/jsx-runtime\";const C=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,E=C?f:g;class R{constructor(t){this.key=t,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(t){this.ref={current:t}}}const x=t=>{const e=document.getElementById(\"typeahead-menu\");if(!e)return;const n=e.getBoundingClientRect();n.top+n.height>window.innerHeight&&e.scrollIntoView({block:\"center\"}),n.top<0&&e.scrollIntoView({block:\"center\"}),t.scrollIntoView({block:\"nearest\"})};function O(t,e){const n=t.getBoundingClientRect(),o=e.getBoundingClientRect();return n.top>o.top&&n.top<o.bottom}function I(e,n,o,l){const[r]=t();g((()=>{if(null!=n&&null!=e){const t=r.getRootElement(),e=null!=t?function(t,e){let n=getComputedStyle(t);const o=\"absolute\"===n.position,l=/(auto|scroll)/;if(\"fixed\"===n.position)return document.body;for(let e=t;e=e.parentElement;)if(n=getComputedStyle(e),(!o||\"static\"!==n.position)&&l.test(n.overflow+n.overflowY+n.overflowX))return e;return document.body}(t):document.body;let i=!1,u=O(n,e);const c=function(){i||(window.requestAnimationFrame((function(){o(),i=!1})),i=!0);const t=O(n,e);t!==u&&(u=t,null!=l&&l(t))},s=new ResizeObserver(o);return window.addEventListener(\"resize\",o),document.addEventListener(\"scroll\",c,{capture:!0,passive:!0}),s.observe(n),()=>{s.unobserve(n),window.removeEventListener(\"resize\",o),document.removeEventListener(\"scroll\",c,!0)}}}),[n,r,l,o,e])}const A=o(\"SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND\");function S({close:t,editor:n,anchorElementRef:o,resolution:d,options:p,menuRenderFn:f,onSelectOption:y,shouldSplitNodeWithQuery:b=!1,commandPriority:C=s,preselectFirstItem:R=!0}){const[O,I]=h(null),S=d.match&&d.match.matchingString;g((()=>{R&&I(0)}),[S,R]);const L=v((e=>{n.update((()=>{const n=null!=d.match&&b?function(t){const e=a();if(!m(e)||!e.isCollapsed())return null;const n=e.anchor;if(\"text\"!==n.type)return null;const o=n.getNode();if(!o.isSimpleText())return null;const l=n.offset,r=o.getTextContent().slice(0,l),i=t.replaceableString.length,u=l-function(t,e,n){let o=n;for(let n=o;n<=e.length;n++)t.slice(-n)===e.substring(0,n)&&(o=n);return o}(r,t.matchingString,i);if(u<0)return null;let c;return 0===u?[c]=o.splitText(l):[,c]=o.splitText(u,l),c}(d.match):null;y(e,n,t,d.match?d.match.matchingString:\"\")}))}),[n,b,d.match,y,t]),P=v((t=>{const e=n.getRootElement();null!==e&&(e.setAttribute(\"aria-activedescendant\",\"typeahead-item-\"+t),I(t))}),[n]);g((()=>()=>{const t=n.getRootElement();null!==t&&t.removeAttribute(\"aria-activedescendant\")}),[n]),E((()=>{null===p?I(null):null===O&&R&&P(0)}),[p,O,P,R]),g((()=>e(n.registerCommand(A,(({option:t})=>!(!t.ref||null==t.ref.current)&&(x(t.ref.current),!0)),C))),[n,P,C]),g((()=>e(n.registerCommand(l,(t=>{const e=t;if(null!==p&&p.length){const t=null===O?0:O!==p.length-1?O+1:0;P(t);const o=p[t];null!=o.ref&&o.ref.current&&n.dispatchCommand(A,{index:t,option:o}),e.preventDefault(),e.stopImmediatePropagation()}return!0}),C),n.registerCommand(r,(t=>{const e=t;if(null!==p&&p.length){const t=null===O?p.length-1:0!==O?O-1:p.length-1;P(t);const n=p[t];null!=n.ref&&n.ref.current&&x(n.ref.current),e.preventDefault(),e.stopImmediatePropagation()}return!0}),C),n.registerCommand(i,(e=>{const n=e;return n.preventDefault(),n.stopImmediatePropagation(),t(),!0}),C),n.registerCommand(u,(t=>{const e=t;return null!==p&&null!==O&&null!=p[O]&&(e.preventDefault(),e.stopImmediatePropagation(),L(p[O]),!0)}),C),n.registerCommand(c,(t=>null!==p&&null!==O&&null!=p[O]&&(null!==t&&(t.preventDefault(),t.stopImmediatePropagation()),L(p[O]),!0)),C))),[L,t,n,p,O,P,C]);return f(o,w((()=>({options:p,selectOptionAndCleanUp:L,selectedIndex:O,setHighlightedIndex:I})),[L,O,p]),d.match?d.match.matchingString:\"\")}function L(t,e){null!=e&&(t.className=e),t.setAttribute(\"aria-label\",\"Typeahead menu\"),t.setAttribute(\"role\",\"listbox\"),t.style.display=\"block\",t.style.position=\"absolute\"}function P({options:e,onWillOpen:o,onClose:l,onOpen:r,onSelectOption:i,menuRenderFn:u,anchorClassName:c,commandPriority:a=s,parent:m}){const[f]=t(),[w,E]=h(null),R=p.useRef(null),x=function(e,n,o,l=(C?document.body:void 0),r=!0){const[i]=t(),u=C?document.createElement(\"div\"):null,c=y(u),s=v((()=>{if(null===c.current||void 0===l)return;c.current.style.top=c.current.style.bottom;const t=i.getRootElement(),n=c.current,u=n.firstChild;if(null!==t&&null!==e){const{left:i,top:s,width:a,height:m}=e.getRect(),d=c.current.offsetHeight;if(n.style.top=`${s+d+3+(r?window.pageYOffset:0)}px`,n.style.left=`${i+window.pageXOffset}px`,n.style.height=`${m}px`,n.style.width=`${a}px`,null!==u){u.style.top=`${s}`;const e=u.getBoundingClientRect(),o=e.height,l=e.width,c=t.getBoundingClientRect();i+l>c.right&&(n.style.left=`${c.right-l+window.pageXOffset}px`),(s+o>window.innerHeight||s+o>c.bottom)&&s-c.top>o+m&&(n.style.top=`${s-o-m+(r?window.pageYOffset:0)}px`)}n.isConnected||(L(n,o),l.append(n)),n.setAttribute(\"id\",\"typeahead-menu\"),t.setAttribute(\"aria-controls\",\"typeahead-menu\")}}),[i,e,r,o,l]);g((()=>{const t=i.getRootElement();return null!==e&&s(),()=>{null!==t&&t.removeAttribute(\"aria-controls\");const e=c.current;null!==e&&e.isConnected&&(e.remove(),e.removeAttribute(\"id\"))}}),[i,s,e]);const a=v((t=>{null!==e&&(t||n(null))}),[e,n]);return I(e,c.current,s,a),null!=u&&u===c.current&&(L(u,o),null!=l&&l.append(u)),c}(w,E,c,m),O=v((()=>{E(null),null!=l&&null!==w&&l()}),[l,w]),A=v((t=>{E(t),null!=r&&null===w&&r(t)}),[r,w]),P=v((t=>{t.preventDefault(),null!=o&&o(t);const e=n(t.target);A({getRect:()=>new DOMRect(t.clientX/e,t.clientY/e,1,1)})}),[A,o]),D=v((t=>{null!==w&&null!=R.current&&null!=t.target&&d(t.target)&&!R.current.contains(t.target)&&O()}),[O,w]);return g((()=>{const t=f.getRootElement();if(t)return t.addEventListener(\"contextmenu\",P),()=>t.removeEventListener(\"contextmenu\",P)}),[f,P]),g((()=>(document.addEventListener(\"click\",D),()=>document.removeEventListener(\"click\",D))),[f,D]),null===x.current||null===w||null===f?null:b(S,{close:O,resolution:w,editor:f,anchorElementRef:x,options:e,menuRenderFn:(t,e)=>u(t,e,{setMenuRef:t=>{R.current=t}}),onSelectOption:i,commandPriority:a})}export{P as LexicalContextMenuPlugin,R as MenuOption};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{createContext as r,useContext as g}from\"react\";const o=[[\"Cat\",\"rgb(125, 50, 0)\"],[\"Dog\",\"rgb(100, 0, 0)\"],[\"Rabbit\",\"rgb(150, 0, 0)\"],[\"Frog\",\"rgb(200, 0, 0)\"],[\"Fox\",\"rgb(200, 75, 0)\"],[\"Hedgehog\",\"rgb(0, 75, 0)\"],[\"Pigeon\",\"rgb(0, 125, 0)\"],[\"Squirrel\",\"rgb(75, 100, 0)\"],[\"Bear\",\"rgb(125, 100, 0)\"],[\"Tiger\",\"rgb(0, 0, 150)\"],[\"Leopard\",\"rgb(0, 0, 200)\"],[\"Zebra\",\"rgb(0, 0, 250)\"],[\"Wolf\",\"rgb(0, 100, 150)\"],[\"Owl\",\"rgb(0, 100, 100)\"],[\"Gull\",\"rgb(100, 0, 100)\"],[\"Squid\",\"rgb(150, 0, 150)\"]],b=o[Math.floor(Math.random()*o.length)],e=r({clientID:0,color:b[1],isCollabActive:!1,name:b[0],yjsDocMap:new Map});function l(r,o){const b=g(e);return null!=r&&(b.name=r),null!=o&&(b.color=o),b}export{e as CollaborationContext,l as useCollaborationContext};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$generateHtmlFromNodes as t,$generateNodesFromDOM as e}from\"@lexical/html\";import{$addNodeStyle as n,$sliceSelectedTextNodeContent as o}from\"@lexical/selection\";import{objectKlassEquals as r}from\"@lexical/utils\";import{$isRangeSelection as i,$getSelection as l,$createTabNode as s,SELECTION_INSERT_CLIPBOARD_NODES_COMMAND as c,$caretFromPoint as a,$isTextPointCaret as u,$getCaretRange as f,$getChildCaret as d,$getRoot as p,$isTextNode as g,$isElementNode as m,$parseSerializedNode as h,getDOMSelection as x,COPY_COMMAND as w,COMMAND_PRIORITY_CRITICAL as y,isSelectionWithinEditor as T,$getEditor as v,$cloneWithProperties as C}from\"lexical\";function D(t,...e){const n=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",t);for(const t of e)o.append(\"v\",t);throw n.search=o.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function N(e,n=l()){return null==n&&D(166),i(n)&&n.isCollapsed()||0===n.getNodes().length?\"\":t(e,n)}function S(t,e=l()){return null==e&&D(166),i(e)&&e.isCollapsed()||0===e.getNodes().length?null:JSON.stringify(E(t,e))}function R(t,e){const n=t.getData(\"text/plain\")||t.getData(\"text/uri-list\");null!=n&&e.insertRawText(n)}function A(t,n,o){const r=t.getData(\"application/x-lexical-editor\");if(r)try{const t=JSON.parse(r);if(t.namespace===o._config.namespace&&Array.isArray(t.nodes)){return P(o,L(t.nodes),n)}}catch(t){}const c=t.getData(\"text/html\"),a=t.getData(\"text/plain\");if(c&&a!==c)try{const t=(new DOMParser).parseFromString(function(t){if(window.trustedTypes&&window.trustedTypes.createPolicy){return window.trustedTypes.createPolicy(\"lexical\",{createHTML:t=>t}).createHTML(t)}return t}(c),\"text/html\");return P(o,e(o,t),n)}catch(t){}const u=a||t.getData(\"text/uri-list\");if(null!=u)if(i(n)){const t=u.split(/(\\r?\\n|\\t)/);\"\"===t[t.length-1]&&t.pop();for(let e=0;e<t.length;e++){const n=l();if(i(n)){const o=t[e];\"\\n\"===o||\"\\r\\n\"===o?n.insertParagraph():\"\\t\"===o?n.insertNodes([s()]):n.insertText(o)}}}else n.insertRawText(u)}function P(t,e,n){t.dispatchCommand(c,{nodes:e,selection:n})||(n.insertNodes(e),function(t){if(i(t)&&t.isCollapsed()){const e=t.anchor;let n=null;const o=a(e,\"previous\");if(o)if(u(o))n=o.origin;else{const t=f(o,d(p(),\"next\").getFlipped());for(const e of t){if(g(e.origin)){n=e.origin;break}if(m(e.origin)&&!e.origin.isInline())break}}if(n&&g(n)){const e=n.getFormat(),o=n.getStyle();t.format===e&&t.style===o||(t.format=e,t.style=o,t.dirty=!0)}}}(n))}function _(t,e,n,r=[]){let i=null===e||n.isSelected(e);const l=m(n)&&n.excludeFromCopy(\"html\");let s=n;if(null!==e){let t=C(n);t=g(t)&&null!==e?o(e,t):t,s=t}const c=m(s)?s.getChildren():[],a=function(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&D(58,n.name),m(t)){const t=e.children;Array.isArray(t)||D(59,n.name)}return e}(s);if(g(s)){const t=s.__text;t.length>0?a.text=t:i=!1}for(let o=0;o<c.length;o++){const r=c[o],l=_(t,e,r,a.children);!i&&m(n)&&l&&n.extractWithChild(r,e,\"clone\")&&(i=!0)}if(i&&!l)r.push(a);else if(Array.isArray(a.children))for(let t=0;t<a.children.length;t++){const e=a.children[t];r.push(e)}return i}function E(t,e){const n=[],o=p().getChildren();for(let r=0;r<o.length;r++){_(t,e,o[r],n)}return{namespace:t._config.namespace,nodes:n}}function L(t){const e=[];for(let o=0;o<t.length;o++){const r=t[o],i=h(r);g(i)&&n(i),e.push(i)}return e}let b=null;async function F(t,e,n){if(null!==b)return!1;if(null!==e)return new Promise(((o,r)=>{t.update((()=>{o(M(t,e,n))}))}));const o=t.getRootElement(),i=t._window||window,l=window.document,s=x(i);if(null===o||null===s)return!1;const c=l.createElement(\"span\");c.style.cssText=\"position: fixed; top: -1000px;\",c.append(l.createTextNode(\"#\")),o.append(c);const a=new Range;return a.setStart(c,0),a.setEnd(c,1),s.removeAllRanges(),s.addRange(a),new Promise(((e,o)=>{const i=t.registerCommand(w,(o=>(r(o,ClipboardEvent)&&(i(),null!==b&&(window.clearTimeout(b),b=null),e(M(t,o,n))),!0)),y);b=window.setTimeout((()=>{i(),b=null,e(!1)}),50),l.execCommand(\"copy\"),c.remove()}))}function M(t,e,n){if(void 0===n){const e=x(t._window);if(!e)return!1;const o=e.anchorNode,r=e.focusNode;if(null!==o&&null!==r&&!T(t,o,r))return!1;const i=l();if(null===i)return!1;n=J(i)}e.preventDefault();const o=e.clipboardData;return null!==o&&(k(o,n),!0)}const O=[[\"text/html\",N],[\"application/x-lexical-editor\",S]];function J(t=l()){const e={\"text/plain\":t?t.getTextContent():\"\"};if(t){const n=v();for(const[o,r]of O){const i=r(n,t);null!==i&&(e[o]=i)}}return e}function k(t,e){for(const n in e){const o=e[n];void 0!==o&&t.setData(n,o)}}export{E as $generateJSONFromSelectedNodes,L as $generateNodesFromSerializedNodes,J as $getClipboardDataFromSelection,N as $getHtmlContent,S as $getLexicalContent,R as $insertDataTransferForPlainText,A as $insertDataTransferForRichText,P as $insertGeneratedNodes,F as copyToClipboard,k as setLexicalClipboardDataTransfer};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$insertDataTransferForPlainText as e,$getHtmlContent as t}from\"@lexical/clipboard\";import{$shouldOverrideDefaultCharacterSelection as n,$moveCharacter as r}from\"@lexical/selection\";import{mergeRegister as o,objectKlassEquals as i}from\"@lexical/utils\";import{DELETE_CHARACTER_COMMAND as a,$getSelection as s,$isRangeSelection as u,COMMAND_PRIORITY_EDITOR as m,DELETE_WORD_COMMAND as d,DELETE_LINE_COMMAND as l,CONTROLLED_TEXT_INSERTION_COMMAND as c,REMOVE_TEXT_COMMAND as g,INSERT_LINE_BREAK_COMMAND as f,INSERT_PARAGRAPH_COMMAND as p,KEY_ARROW_LEFT_COMMAND as C,KEY_ARROW_RIGHT_COMMAND as v,KEY_BACKSPACE_COMMAND as w,KEY_DELETE_COMMAND as D,KEY_ENTER_COMMAND as x,SELECT_ALL_COMMAND as h,$selectAll as T,COPY_COMMAND as b,CUT_COMMAND as y,PASTE_COMMAND as A,DROP_COMMAND as E,DRAGSTART_COMMAND as K,PASTE_TAG as k}from\"lexical\";const L=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,M=L&&\"documentMode\"in document?document.documentMode:null,P=!(!L||!(\"InputEvent\"in window)||M)&&\"getTargetRanges\"in new window.InputEvent(\"input\"),S=L&&/Version\\/[\\d.]+.*Safari/.test(navigator.userAgent),B=L&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,I=L&&/^(?=.*Chrome).*/i.test(navigator.userAgent),R=L&&/AppleWebKit\\/[\\d.]+/.test(navigator.userAgent)&&!I;function W(e,n){n.update((()=>{if(null!==e){const r=i(e,KeyboardEvent)?null:e.clipboardData,o=s();if(null!==o&&null!=r){e.preventDefault();const i=t(n);null!==i&&r.setData(\"text/html\",i),r.setData(\"text/plain\",o.getTextContent())}}}))}function V(t){return o(t.registerCommand(a,(e=>{const t=s();return!!u(t)&&(t.deleteCharacter(e),!0)}),m),t.registerCommand(d,(e=>{const t=s();return!!u(t)&&(t.deleteWord(e),!0)}),m),t.registerCommand(l,(e=>{const t=s();return!!u(t)&&(t.deleteLine(e),!0)}),m),t.registerCommand(c,(t=>{const n=s();if(!u(n))return!1;if(\"string\"==typeof t)n.insertText(t);else{const r=t.dataTransfer;if(null!=r)e(r,n);else{const e=t.data;e&&n.insertText(e)}}return!0}),m),t.registerCommand(g,(()=>{const e=s();return!!u(e)&&(e.removeText(),!0)}),m),t.registerCommand(f,(e=>{const t=s();return!!u(t)&&(t.insertLineBreak(e),!0)}),m),t.registerCommand(p,(()=>{const e=s();return!!u(e)&&(e.insertLineBreak(),!0)}),m),t.registerCommand(C,(e=>{const t=s();if(!u(t))return!1;const o=e,i=o.shiftKey;return!!n(t,!0)&&(o.preventDefault(),r(t,i,!0),!0)}),m),t.registerCommand(v,(e=>{const t=s();if(!u(t))return!1;const o=e,i=o.shiftKey;return!!n(t,!1)&&(o.preventDefault(),r(t,i,!1),!0)}),m),t.registerCommand(w,(e=>{const n=s();return!!u(n)&&((!B||\"ko-KR\"!==navigator.language)&&(e.preventDefault(),t.dispatchCommand(a,!0)))}),m),t.registerCommand(D,(e=>{const n=s();return!!u(n)&&(e.preventDefault(),t.dispatchCommand(a,!1))}),m),t.registerCommand(x,(e=>{const n=s();if(!u(n))return!1;if(null!==e){if((B||S||R)&&P)return!1;e.preventDefault()}return t.dispatchCommand(f,!1)}),m),t.registerCommand(h,(()=>(T(),!0)),m),t.registerCommand(b,(e=>{const n=s();return!!u(n)&&(W(e,t),!0)}),m),t.registerCommand(y,(e=>{const n=s();return!!u(n)&&(function(e,t){W(e,t),t.update((()=>{const e=s();u(e)&&e.removeText()}))}(e,t),!0)}),m),t.registerCommand(A,(n=>{const r=s();return!!u(r)&&(function(t,n){t.preventDefault(),n.update((()=>{const n=s(),r=i(t,ClipboardEvent)?t.clipboardData:null;null!=r&&u(n)&&e(r,n)}),{tag:k})}(n,t),!0)}),m),t.registerCommand(E,(e=>{const t=s();return!!u(t)&&(e.preventDefault(),!0)}),m),t.registerCommand(K,(e=>{const t=s();return!!u(t)&&(e.preventDefault(),!0)}),m))}export{V as registerPlainText};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useLexicalComposerContext as t}from\"@lexical/react/LexicalComposerContext\";import{useLexicalEditable as e}from\"@lexical/react/useLexicalEditable\";import{$canShowPlaceholderCurry as r}from\"@lexical/text\";import{mergeRegister as o}from\"@lexical/utils\";import{useLayoutEffect as n,useEffect as i,useState as c,useMemo as l,Suspense as a}from\"react\";import{flushSync as u,createPortal as m}from\"react-dom\";import{jsx as s,jsxs as d,Fragment as f}from\"react/jsx-runtime\";import{registerDragonSupport as p}from\"@lexical/dragon\";import{registerPlainText as x}from\"@lexical/plain-text\";const g=\"undefined\"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n:i;function E(t){return t.getEditorState().read(r(t.isComposing()))}function h({contentEditable:e,placeholder:r=null,ErrorBoundary:n}){const[E]=t(),h=function(t,e){const[r,o]=c((()=>t.getDecorators()));return g((()=>t.registerDecoratorListener((t=>{u((()=>{o(t)}))}))),[t]),i((()=>{o(t.getDecorators())}),[t]),l((()=>{const o=[],n=Object.keys(r);for(let i=0;i<n.length;i++){const c=n[i],l=s(e,{onError:e=>t._onError(e),children:s(a,{fallback:null,children:r[c]})}),u=t.getElementByKey(c);null!==u&&o.push(m(l,u,c))}return o}),[e,r,t])}(E,n);return function(t){g((()=>o(x(t),p(t))),[t])}(E),d(f,{children:[e,s(w,{content:r}),h]})}function w({content:r}){const[n]=t(),i=function(t){const[e,r]=c((()=>E(t)));return g((()=>{function e(){const e=E(t);r(e)}return e(),o(t.registerUpdateListener((()=>{e()})),t.registerEditableListener((()=>{e()})))}),[t]),e}(n),l=e();return i?\"function\"==typeof r?r(l):r:null}export{h as PlainTextPlugin};\n","/**\n * Utility module to work with key-value stores.\n *\n * @module map\n */\n\n/**\n * Creates a new Map instance.\n *\n * @function\n * @return {Map<any, any>}\n *\n * @function\n */\nexport const create = () => new Map()\n\n/**\n * Copy a Map object into a fresh Map object.\n *\n * @function\n * @template K,V\n * @param {Map<K,V>} m\n * @return {Map<K,V>}\n */\nexport const copy = m => {\n  const r = create()\n  m.forEach((v, k) => { r.set(k, v) })\n  return r\n}\n\n/**\n * Get map property. Create T if property is undefined and set T on map.\n *\n * ```js\n * const listeners = map.setIfUndefined(events, 'eventName', set.create)\n * listeners.add(listener)\n * ```\n *\n * @function\n * @template {Map<any, any>} MAP\n * @template {MAP extends Map<any,infer V> ? function():V : unknown} CF\n * @param {MAP} map\n * @param {MAP extends Map<infer K,any> ? K : unknown} key\n * @param {CF} createT\n * @return {ReturnType<CF>}\n */\nexport const setIfUndefined = (map, key, createT) => {\n  let set = map.get(key)\n  if (set === undefined) {\n    map.set(key, set = createT())\n  }\n  return set\n}\n\n/**\n * Creates an Array and populates it with the content of all key-value pairs using the `f(value, key)` function.\n *\n * @function\n * @template K\n * @template V\n * @template R\n * @param {Map<K,V>} m\n * @param {function(V,K):R} f\n * @return {Array<R>}\n */\nexport const map = (m, f) => {\n  const res = []\n  for (const [key, value] of m) {\n    res.push(f(value, key))\n  }\n  return res\n}\n\n/**\n * Tests whether any key-value pairs pass the test implemented by `f(value, key)`.\n *\n * @todo should rename to some - similarly to Array.some\n *\n * @function\n * @template K\n * @template V\n * @param {Map<K,V>} m\n * @param {function(V,K):boolean} f\n * @return {boolean}\n */\nexport const any = (m, f) => {\n  for (const [key, value] of m) {\n    if (f(value, key)) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * Tests whether all key-value pairs pass the test implemented by `f(value, key)`.\n *\n * @function\n * @template K\n * @template V\n * @param {Map<K,V>} m\n * @param {function(V,K):boolean} f\n * @return {boolean}\n */\nexport const all = (m, f) => {\n  for (const [key, value] of m) {\n    if (!f(value, key)) {\n      return false\n    }\n  }\n  return true\n}\n","/**\n * Utility module to work with sets.\n *\n * @module set\n */\n\nexport const create = () => new Set()\n\n/**\n * @template T\n * @param {Set<T>} set\n * @return {Array<T>}\n */\nexport const toArray = set => Array.from(set)\n\n/**\n * @template T\n * @param {Set<T>} set\n * @return {T|undefined}\n */\nexport const first = set => set.values().next().value\n\n/**\n * @template T\n * @param {Iterable<T>} entries\n * @return {Set<T>}\n */\nexport const from = entries => new Set(entries)\n","/**\n * Utility module to work with Arrays.\n *\n * @module array\n */\n\nimport * as set from './set.js'\n\n/**\n * Return the last element of an array. The element must exist\n *\n * @template L\n * @param {ArrayLike<L>} arr\n * @return {L}\n */\nexport const last = arr => arr[arr.length - 1]\n\n/**\n * @template C\n * @return {Array<C>}\n */\nexport const create = () => /** @type {Array<C>} */ ([])\n\n/**\n * @template D\n * @param {Array<D>} a\n * @return {Array<D>}\n */\nexport const copy = a => /** @type {Array<D>} */ (a.slice())\n\n/**\n * Append elements from src to dest\n *\n * @template M\n * @param {Array<M>} dest\n * @param {Array<M>} src\n */\nexport const appendTo = (dest, src) => {\n  for (let i = 0; i < src.length; i++) {\n    dest.push(src[i])\n  }\n}\n\n/**\n * Transforms something array-like to an actual Array.\n *\n * @function\n * @template T\n * @param {ArrayLike<T>|Iterable<T>} arraylike\n * @return {T}\n */\nexport const from = Array.from\n\n/**\n * True iff condition holds on every element in the Array.\n *\n * @function\n * @template {ArrayLike<any>} ARR\n *\n * @param {ARR} arr\n * @param {ARR extends ArrayLike<infer S> ? ((value:S, index:number, arr:ARR) => boolean) : any} f\n * @return {boolean}\n */\nexport const every = (arr, f) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (!f(arr[i], i, arr)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * True iff condition holds on some element in the Array.\n *\n * @function\n * @template {ArrayLike<any>} ARR\n *\n * @param {ARR} arr\n * @param {ARR extends ArrayLike<infer S> ? ((value:S, index:number, arr:ARR) => boolean) : never} f\n * @return {boolean}\n */\nexport const some = (arr, f) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (f(arr[i], i, arr)) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * @template ELEM\n *\n * @param {ArrayLike<ELEM>} a\n * @param {ArrayLike<ELEM>} b\n * @return {boolean}\n */\nexport const equalFlat = (a, b) => a.length === b.length && every(a, (item, index) => item === b[index])\n\n/**\n * @template ELEM\n * @param {Array<Array<ELEM>>} arr\n * @return {Array<ELEM>}\n */\nexport const flatten = arr => fold(arr, /** @type {Array<ELEM>} */ ([]), (acc, val) => acc.concat(val))\n\n/**\n * @template T\n * @param {number} len\n * @param {function(number, Array<T>):T} f\n * @return {Array<T>}\n */\nexport const unfold = (len, f) => {\n  const array = new Array(len)\n  for (let i = 0; i < len; i++) {\n    array[i] = f(i, array)\n  }\n  return array\n}\n\n/**\n * @template T\n * @template RESULT\n * @param {Array<T>} arr\n * @param {RESULT} seed\n * @param {function(RESULT, T, number):RESULT} folder\n */\nexport const fold = (arr, seed, folder) => arr.reduce(folder, seed)\n\nexport const isArray = Array.isArray\n\n/**\n * @template T\n * @param {Array<T>} arr\n * @return {Array<T>}\n */\nexport const unique = arr => from(set.from(arr))\n\n/**\n * @template T\n * @template M\n * @param {ArrayLike<T>} arr\n * @param {function(T):M} mapper\n * @return {Array<T>}\n */\nexport const uniqueBy = (arr, mapper) => {\n  /**\n   * @type {Set<M>}\n   */\n  const happened = set.create()\n  /**\n   * @type {Array<T>}\n   */\n  const result = []\n  for (let i = 0; i < arr.length; i++) {\n    const el = arr[i]\n    const mapped = mapper(el)\n    if (!happened.has(mapped)) {\n      happened.add(mapped)\n      result.push(el)\n    }\n  }\n  return result\n}\n\n/**\n * @template {ArrayLike<any>} ARR\n * @template {function(ARR extends ArrayLike<infer T> ? T : never, number, ARR):any} MAPPER\n * @param {ARR} arr\n * @param {MAPPER} mapper\n * @return {Array<MAPPER extends function(...any): infer M ? M : never>}\n */\nexport const map = (arr, mapper) => {\n  /**\n   * @type {Array<any>}\n   */\n  const res = Array(arr.length)\n  for (let i = 0; i < arr.length; i++) {\n    res[i] = mapper(/** @type {any} */ (arr[i]), i, /** @type {any} */ (arr))\n  }\n  return /** @type {any} */ (res)\n}\n\n/**\n * This function bubble-sorts a single item to the correct position. The sort happens in-place and\n * might be useful to ensure that a single item is at the correct position in an otherwise sorted\n * array.\n *\n * @example\n *  const arr = [3, 2, 5]\n *  arr.sort((a, b) => a - b)\n *  arr // => [2, 3, 5]\n *  arr.splice(1, 0, 7)\n *  array.bubbleSortItem(arr, 1, (a, b) => a - b)\n *  arr // => [2, 3, 5, 7]\n *\n * @template T\n * @param {Array<T>} arr\n * @param {number} i\n * @param {(a:T,b:T) => number} compareFn\n */\nexport const bubblesortItem = (arr, i, compareFn) => {\n  const n = arr[i]\n  let j = i\n  // try to sort to the right\n  while (j + 1 < arr.length && compareFn(n, arr[j + 1]) > 0) {\n    arr[j] = arr[j + 1]\n    arr[++j] = n\n  }\n  if (i === j && j > 0) { // no change yet\n    // sort to the left\n    while (j > 0 && compareFn(arr[j - 1], n) > 0) {\n      arr[j] = arr[j - 1]\n      arr[--j] = n\n    }\n  }\n  return j\n}\n","/**\n * Observable class prototype.\n *\n * @module observable\n */\n\nimport * as map from './map.js'\nimport * as set from './set.js'\nimport * as array from './array.js'\n\n/**\n * Handles named events.\n * @experimental\n *\n * This is basically a (better typed) duplicate of Observable, which will replace Observable in the\n * next release.\n *\n * @template {{[key in keyof EVENTS]: function(...any):void}} EVENTS\n */\nexport class ObservableV2 {\n  constructor () {\n    /**\n     * Some desc.\n     * @type {Map<string, Set<any>>}\n     */\n    this._observers = map.create()\n  }\n\n  /**\n   * @template {keyof EVENTS & string} NAME\n   * @param {NAME} name\n   * @param {EVENTS[NAME]} f\n   */\n  on (name, f) {\n    map.setIfUndefined(this._observers, /** @type {string} */ (name), set.create).add(f)\n    return f\n  }\n\n  /**\n   * @template {keyof EVENTS & string} NAME\n   * @param {NAME} name\n   * @param {EVENTS[NAME]} f\n   */\n  once (name, f) {\n    /**\n     * @param  {...any} args\n     */\n    const _f = (...args) => {\n      this.off(name, /** @type {any} */ (_f))\n      f(...args)\n    }\n    this.on(name, /** @type {any} */ (_f))\n  }\n\n  /**\n   * @template {keyof EVENTS & string} NAME\n   * @param {NAME} name\n   * @param {EVENTS[NAME]} f\n   */\n  off (name, f) {\n    const observers = this._observers.get(name)\n    if (observers !== undefined) {\n      observers.delete(f)\n      if (observers.size === 0) {\n        this._observers.delete(name)\n      }\n    }\n  }\n\n  /**\n   * Emit a named event. All registered event listeners that listen to the\n   * specified name will receive the event.\n   *\n   * @todo This should catch exceptions\n   *\n   * @template {keyof EVENTS & string} NAME\n   * @param {NAME} name The event name.\n   * @param {Parameters<EVENTS[NAME]>} args The arguments that are applied to the event listener.\n   */\n  emit (name, args) {\n    // copy all listeners to an array first to make sure that no event is emitted to listeners that are subscribed while the event handler is called.\n    return array.from((this._observers.get(name) || map.create()).values()).forEach(f => f(...args))\n  }\n\n  destroy () {\n    this._observers = map.create()\n  }\n}\n\n/* c8 ignore start */\n/**\n * Handles named events.\n *\n * @deprecated\n * @template N\n */\nexport class Observable {\n  constructor () {\n    /**\n     * Some desc.\n     * @type {Map<N, any>}\n     */\n    this._observers = map.create()\n  }\n\n  /**\n   * @param {N} name\n   * @param {function} f\n   */\n  on (name, f) {\n    map.setIfUndefined(this._observers, name, set.create).add(f)\n  }\n\n  /**\n   * @param {N} name\n   * @param {function} f\n   */\n  once (name, f) {\n    /**\n     * @param  {...any} args\n     */\n    const _f = (...args) => {\n      this.off(name, _f)\n      f(...args)\n    }\n    this.on(name, _f)\n  }\n\n  /**\n   * @param {N} name\n   * @param {function} f\n   */\n  off (name, f) {\n    const observers = this._observers.get(name)\n    if (observers !== undefined) {\n      observers.delete(f)\n      if (observers.size === 0) {\n        this._observers.delete(name)\n      }\n    }\n  }\n\n  /**\n   * Emit a named event. All registered event listeners that listen to the\n   * specified name will receive the event.\n   *\n   * @todo This should catch exceptions\n   *\n   * @param {N} name The event name.\n   * @param {Array<any>} args The arguments that are applied to the event listener.\n   */\n  emit (name, args) {\n    // copy all listeners to an array first to make sure that no event is emitted to listeners that are subscribed while the event handler is called.\n    return array.from((this._observers.get(name) || map.create()).values()).forEach(f => f(...args))\n  }\n\n  destroy () {\n    this._observers = map.create()\n  }\n}\n/* c8 ignore end */\n","/**\n * Common Math expressions.\n *\n * @module math\n */\n\nexport const floor = Math.floor\nexport const ceil = Math.ceil\nexport const abs = Math.abs\nexport const imul = Math.imul\nexport const round = Math.round\nexport const log10 = Math.log10\nexport const log2 = Math.log2\nexport const log = Math.log\nexport const sqrt = Math.sqrt\n\n/**\n * @function\n * @param {number} a\n * @param {number} b\n * @return {number} The sum of a and b\n */\nexport const add = (a, b) => a + b\n\n/**\n * @function\n * @param {number} a\n * @param {number} b\n * @return {number} The smaller element of a and b\n */\nexport const min = (a, b) => a < b ? a : b\n\n/**\n * @function\n * @param {number} a\n * @param {number} b\n * @return {number} The bigger element of a and b\n */\nexport const max = (a, b) => a > b ? a : b\n\nexport const isNaN = Number.isNaN\n\nexport const pow = Math.pow\n/**\n * Base 10 exponential function. Returns the value of 10 raised to the power of pow.\n *\n * @param {number} exp\n * @return {number}\n */\nexport const exp10 = exp => Math.pow(10, exp)\n\nexport const sign = Math.sign\n\n/**\n * @param {number} n\n * @return {boolean} Wether n is negative. This function also differentiates between -0 and +0\n */\nexport const isNegativeZero = n => n !== 0 ? n < 0 : 1 / n < 0\n","/* eslint-env browser */\n\n/**\n * Binary data constants.\n *\n * @module binary\n */\n\n/**\n * n-th bit activated.\n *\n * @type {number}\n */\nexport const BIT1 = 1\nexport const BIT2 = 2\nexport const BIT3 = 4\nexport const BIT4 = 8\nexport const BIT5 = 16\nexport const BIT6 = 32\nexport const BIT7 = 64\nexport const BIT8 = 128\nexport const BIT9 = 256\nexport const BIT10 = 512\nexport const BIT11 = 1024\nexport const BIT12 = 2048\nexport const BIT13 = 4096\nexport const BIT14 = 8192\nexport const BIT15 = 16384\nexport const BIT16 = 32768\nexport const BIT17 = 65536\nexport const BIT18 = 1 << 17\nexport const BIT19 = 1 << 18\nexport const BIT20 = 1 << 19\nexport const BIT21 = 1 << 20\nexport const BIT22 = 1 << 21\nexport const BIT23 = 1 << 22\nexport const BIT24 = 1 << 23\nexport const BIT25 = 1 << 24\nexport const BIT26 = 1 << 25\nexport const BIT27 = 1 << 26\nexport const BIT28 = 1 << 27\nexport const BIT29 = 1 << 28\nexport const BIT30 = 1 << 29\nexport const BIT31 = 1 << 30\nexport const BIT32 = 1 << 31\n\n/**\n * First n bits activated.\n *\n * @type {number}\n */\nexport const BITS0 = 0\nexport const BITS1 = 1\nexport const BITS2 = 3\nexport const BITS3 = 7\nexport const BITS4 = 15\nexport const BITS5 = 31\nexport const BITS6 = 63\nexport const BITS7 = 127\nexport const BITS8 = 255\nexport const BITS9 = 511\nexport const BITS10 = 1023\nexport const BITS11 = 2047\nexport const BITS12 = 4095\nexport const BITS13 = 8191\nexport const BITS14 = 16383\nexport const BITS15 = 32767\nexport const BITS16 = 65535\nexport const BITS17 = BIT18 - 1\nexport const BITS18 = BIT19 - 1\nexport const BITS19 = BIT20 - 1\nexport const BITS20 = BIT21 - 1\nexport const BITS21 = BIT22 - 1\nexport const BITS22 = BIT23 - 1\nexport const BITS23 = BIT24 - 1\nexport const BITS24 = BIT25 - 1\nexport const BITS25 = BIT26 - 1\nexport const BITS26 = BIT27 - 1\nexport const BITS27 = BIT28 - 1\nexport const BITS28 = BIT29 - 1\nexport const BITS29 = BIT30 - 1\nexport const BITS30 = BIT31 - 1\n/**\n * @type {number}\n */\nexport const BITS31 = 0x7FFFFFFF\n/**\n * @type {number}\n */\nexport const BITS32 = 0xFFFFFFFF\n","/**\n * Utility helpers for working with numbers.\n *\n * @module number\n */\n\nimport * as math from './math.js'\nimport * as binary from './binary.js'\n\nexport const MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER\nexport const MIN_SAFE_INTEGER = Number.MIN_SAFE_INTEGER\n\nexport const LOWEST_INT32 = 1 << 31\nexport const HIGHEST_INT32 = binary.BITS31\nexport const HIGHEST_UINT32 = binary.BITS32\n\n/* c8 ignore next */\nexport const isInteger = Number.isInteger || (num => typeof num === 'number' && isFinite(num) && math.floor(num) === num)\nexport const isNaN = Number.isNaN\nexport const parseInt = Number.parseInt\n\n/**\n * Count the number of \"1\" bits in an unsigned 32bit number.\n *\n * Super fun bitcount algorithm by Brian Kernighan.\n *\n * @param {number} n\n */\nexport const countBits = n => {\n  n &= binary.BITS32\n  let count = 0\n  while (n) {\n    n &= (n - 1)\n    count++\n  }\n  return count\n}\n","import * as array from './array.js'\n\n/**\n * Utility module to work with strings.\n *\n * @module string\n */\n\nexport const fromCharCode = String.fromCharCode\nexport const fromCodePoint = String.fromCodePoint\n\n/**\n * The largest utf16 character.\n * Corresponds to Uint8Array([255, 255]) or charcodeof(2x2^8)\n */\nexport const MAX_UTF16_CHARACTER = fromCharCode(65535)\n\n/**\n * @param {string} s\n * @return {string}\n */\nconst toLowerCase = s => s.toLowerCase()\n\nconst trimLeftRegex = /^\\s*/g\n\n/**\n * @param {string} s\n * @return {string}\n */\nexport const trimLeft = s => s.replace(trimLeftRegex, '')\n\nconst fromCamelCaseRegex = /([A-Z])/g\n\n/**\n * @param {string} s\n * @param {string} separator\n * @return {string}\n */\nexport const fromCamelCase = (s, separator) => trimLeft(s.replace(fromCamelCaseRegex, match => `${separator}${toLowerCase(match)}`))\n\n/**\n * Compute the utf8ByteLength\n * @param {string} str\n * @return {number}\n */\nexport const utf8ByteLength = str => unescape(encodeURIComponent(str)).length\n\n/**\n * @param {string} str\n * @return {Uint8Array}\n */\nexport const _encodeUtf8Polyfill = str => {\n  const encodedString = unescape(encodeURIComponent(str))\n  const len = encodedString.length\n  const buf = new Uint8Array(len)\n  for (let i = 0; i < len; i++) {\n    buf[i] = /** @type {number} */ (encodedString.codePointAt(i))\n  }\n  return buf\n}\n\n/* c8 ignore next */\nexport const utf8TextEncoder = /** @type {TextEncoder} */ (typeof TextEncoder !== 'undefined' ? new TextEncoder() : null)\n\n/**\n * @param {string} str\n * @return {Uint8Array}\n */\nexport const _encodeUtf8Native = str => utf8TextEncoder.encode(str)\n\n/**\n * @param {string} str\n * @return {Uint8Array}\n */\n/* c8 ignore next */\nexport const encodeUtf8 = utf8TextEncoder ? _encodeUtf8Native : _encodeUtf8Polyfill\n\n/**\n * @param {Uint8Array} buf\n * @return {string}\n */\nexport const _decodeUtf8Polyfill = buf => {\n  let remainingLen = buf.length\n  let encodedString = ''\n  let bufPos = 0\n  while (remainingLen > 0) {\n    const nextLen = remainingLen < 10000 ? remainingLen : 10000\n    const bytes = buf.subarray(bufPos, bufPos + nextLen)\n    bufPos += nextLen\n    // Starting with ES5.1 we can supply a generic array-like object as arguments\n    encodedString += String.fromCodePoint.apply(null, /** @type {any} */ (bytes))\n    remainingLen -= nextLen\n  }\n  return decodeURIComponent(escape(encodedString))\n}\n\n/* c8 ignore next */\nexport let utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf-8', { fatal: true, ignoreBOM: true })\n\n/* c8 ignore start */\nif (utf8TextDecoder && utf8TextDecoder.decode(new Uint8Array()).length === 1) {\n  // Safari doesn't handle BOM correctly.\n  // This fixes a bug in Safari 13.0.5 where it produces a BOM the first time it is called.\n  // utf8TextDecoder.decode(new Uint8Array()).length === 1 on the first call and\n  // utf8TextDecoder.decode(new Uint8Array()).length === 1 on the second call\n  // Another issue is that from then on no BOM chars are recognized anymore\n  /* c8 ignore next */\n  utf8TextDecoder = null\n}\n/* c8 ignore stop */\n\n/**\n * @param {Uint8Array} buf\n * @return {string}\n */\nexport const _decodeUtf8Native = buf => /** @type {TextDecoder} */ (utf8TextDecoder).decode(buf)\n\n/**\n * @param {Uint8Array} buf\n * @return {string}\n */\n/* c8 ignore next */\nexport const decodeUtf8 = utf8TextDecoder ? _decodeUtf8Native : _decodeUtf8Polyfill\n\n/**\n * @param {string} str The initial string\n * @param {number} index Starting position\n * @param {number} remove Number of characters to remove\n * @param {string} insert New content to insert\n */\nexport const splice = (str, index, remove, insert = '') => str.slice(0, index) + insert + str.slice(index + remove)\n\n/**\n * @param {string} source\n * @param {number} n\n */\nexport const repeat = (source, n) => array.unfold(n, () => source).join('')\n\n/**\n * Escape HTML characters &,<,>,',\" to their respective HTML entities &amp;,&lt;,&gt;,&#39;,&quot;\n *\n * @param {string} str\n */\nexport const escapeHTML = str =>\n  str.replace(/[&<>'\"]/g, r => /** @type {string} */ ({\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    \"'\": '&#39;',\n    '\"': '&quot;'\n  }[r]))\n\n/**\n * Reverse of `escapeHTML`\n *\n * @param {string} str\n */\nexport const unescapeHTML = str =>\n  str.replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g, r => /** @type {string} */ ({\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&#39;': \"'\",\n    '&quot;': '\"'\n  }[r]))\n","/**\n * Efficient schema-less binary encoding with support for variable length encoding.\n *\n * Use [lib0/encoding] with [lib0/decoding]. Every encoding function has a corresponding decoding function.\n *\n * Encodes numbers in little-endian order (least to most significant byte order)\n * and is compatible with Golang's binary encoding (https://golang.org/pkg/encoding/binary/)\n * which is also used in Protocol Buffers.\n *\n * ```js\n * // encoding step\n * const encoder = encoding.createEncoder()\n * encoding.writeVarUint(encoder, 256)\n * encoding.writeVarString(encoder, 'Hello world!')\n * const buf = encoding.toUint8Array(encoder)\n * ```\n *\n * ```js\n * // decoding step\n * const decoder = decoding.createDecoder(buf)\n * decoding.readVarUint(decoder) // => 256\n * decoding.readVarString(decoder) // => 'Hello world!'\n * decoding.hasContent(decoder) // => false - all data is read\n * ```\n *\n * @module encoding\n */\n\nimport * as math from './math.js'\nimport * as number from './number.js'\nimport * as binary from './binary.js'\nimport * as string from './string.js'\nimport * as array from './array.js'\n\n/**\n * A BinaryEncoder handles the encoding to an Uint8Array.\n */\nexport class Encoder {\n  constructor () {\n    this.cpos = 0\n    this.cbuf = new Uint8Array(100)\n    /**\n     * @type {Array<Uint8Array>}\n     */\n    this.bufs = []\n  }\n}\n\n/**\n * @function\n * @return {Encoder}\n */\nexport const createEncoder = () => new Encoder()\n\n/**\n * @param {function(Encoder):void} f\n */\nexport const encode = (f) => {\n  const encoder = createEncoder()\n  f(encoder)\n  return toUint8Array(encoder)\n}\n\n/**\n * The current length of the encoded data.\n *\n * @function\n * @param {Encoder} encoder\n * @return {number}\n */\nexport const length = encoder => {\n  let len = encoder.cpos\n  for (let i = 0; i < encoder.bufs.length; i++) {\n    len += encoder.bufs[i].length\n  }\n  return len\n}\n\n/**\n * Check whether encoder is empty.\n *\n * @function\n * @param {Encoder} encoder\n * @return {boolean}\n */\nexport const hasContent = encoder => encoder.cpos > 0 || encoder.bufs.length > 0\n\n/**\n * Transform to Uint8Array.\n *\n * @function\n * @param {Encoder} encoder\n * @return {Uint8Array} The created ArrayBuffer.\n */\nexport const toUint8Array = encoder => {\n  const uint8arr = new Uint8Array(length(encoder))\n  let curPos = 0\n  for (let i = 0; i < encoder.bufs.length; i++) {\n    const d = encoder.bufs[i]\n    uint8arr.set(d, curPos)\n    curPos += d.length\n  }\n  uint8arr.set(new Uint8Array(encoder.cbuf.buffer, 0, encoder.cpos), curPos)\n  return uint8arr\n}\n\n/**\n * Verify that it is possible to write `len` bytes wtihout checking. If\n * necessary, a new Buffer with the required length is attached.\n *\n * @param {Encoder} encoder\n * @param {number} len\n */\nexport const verifyLen = (encoder, len) => {\n  const bufferLen = encoder.cbuf.length\n  if (bufferLen - encoder.cpos < len) {\n    encoder.bufs.push(new Uint8Array(encoder.cbuf.buffer, 0, encoder.cpos))\n    encoder.cbuf = new Uint8Array(math.max(bufferLen, len) * 2)\n    encoder.cpos = 0\n  }\n}\n\n/**\n * Write one byte to the encoder.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The byte that is to be encoded.\n */\nexport const write = (encoder, num) => {\n  const bufferLen = encoder.cbuf.length\n  if (encoder.cpos === bufferLen) {\n    encoder.bufs.push(encoder.cbuf)\n    encoder.cbuf = new Uint8Array(bufferLen * 2)\n    encoder.cpos = 0\n  }\n  encoder.cbuf[encoder.cpos++] = num\n}\n\n/**\n * Write one byte at a specific position.\n * Position must already be written (i.e. encoder.length > pos)\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} pos Position to which to write data\n * @param {number} num Unsigned 8-bit integer\n */\nexport const set = (encoder, pos, num) => {\n  let buffer = null\n  // iterate all buffers and adjust position\n  for (let i = 0; i < encoder.bufs.length && buffer === null; i++) {\n    const b = encoder.bufs[i]\n    if (pos < b.length) {\n      buffer = b // found buffer\n    } else {\n      pos -= b.length\n    }\n  }\n  if (buffer === null) {\n    // use current buffer\n    buffer = encoder.cbuf\n  }\n  buffer[pos] = num\n}\n\n/**\n * Write one byte as an unsigned integer.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeUint8 = write\n\n/**\n * Write one byte as an unsigned Integer at a specific location.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} pos The location where the data will be written.\n * @param {number} num The number that is to be encoded.\n */\nexport const setUint8 = set\n\n/**\n * Write two bytes as an unsigned integer.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeUint16 = (encoder, num) => {\n  write(encoder, num & binary.BITS8)\n  write(encoder, (num >>> 8) & binary.BITS8)\n}\n/**\n * Write two bytes as an unsigned integer at a specific location.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} pos The location where the data will be written.\n * @param {number} num The number that is to be encoded.\n */\nexport const setUint16 = (encoder, pos, num) => {\n  set(encoder, pos, num & binary.BITS8)\n  set(encoder, pos + 1, (num >>> 8) & binary.BITS8)\n}\n\n/**\n * Write two bytes as an unsigned integer\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeUint32 = (encoder, num) => {\n  for (let i = 0; i < 4; i++) {\n    write(encoder, num & binary.BITS8)\n    num >>>= 8\n  }\n}\n\n/**\n * Write two bytes as an unsigned integer in big endian order.\n * (most significant byte first)\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeUint32BigEndian = (encoder, num) => {\n  for (let i = 3; i >= 0; i--) {\n    write(encoder, (num >>> (8 * i)) & binary.BITS8)\n  }\n}\n\n/**\n * Write two bytes as an unsigned integer at a specific location.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} pos The location where the data will be written.\n * @param {number} num The number that is to be encoded.\n */\nexport const setUint32 = (encoder, pos, num) => {\n  for (let i = 0; i < 4; i++) {\n    set(encoder, pos + i, num & binary.BITS8)\n    num >>>= 8\n  }\n}\n\n/**\n * Write a variable length unsigned integer. Max encodable integer is 2^53.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeVarUint = (encoder, num) => {\n  while (num > binary.BITS7) {\n    write(encoder, binary.BIT8 | (binary.BITS7 & num))\n    num = math.floor(num / 128) // shift >>> 7\n  }\n  write(encoder, binary.BITS7 & num)\n}\n\n/**\n * Write a variable length integer.\n *\n * We use the 7th bit instead for signaling that this is a negative number.\n *\n * @function\n * @param {Encoder} encoder\n * @param {number} num The number that is to be encoded.\n */\nexport const writeVarInt = (encoder, num) => {\n  const isNegative = math.isNegativeZero(num)\n  if (isNegative) {\n    num = -num\n  }\n  //             |- whether to continue reading         |- whether is negative     |- number\n  write(encoder, (num > binary.BITS6 ? binary.BIT8 : 0) | (isNegative ? binary.BIT7 : 0) | (binary.BITS6 & num))\n  num = math.floor(num / 64) // shift >>> 6\n  // We don't need to consider the case of num === 0 so we can use a different\n  // pattern here than above.\n  while (num > 0) {\n    write(encoder, (num > binary.BITS7 ? binary.BIT8 : 0) | (binary.BITS7 & num))\n    num = math.floor(num / 128) // shift >>> 7\n  }\n}\n\n/**\n * A cache to store strings temporarily\n */\nconst _strBuffer = new Uint8Array(30000)\nconst _maxStrBSize = _strBuffer.length / 3\n\n/**\n * Write a variable length string.\n *\n * @function\n * @param {Encoder} encoder\n * @param {String} str The string that is to be encoded.\n */\nexport const _writeVarStringNative = (encoder, str) => {\n  if (str.length < _maxStrBSize) {\n    // We can encode the string into the existing buffer\n    /* c8 ignore next */\n    const written = string.utf8TextEncoder.encodeInto(str, _strBuffer).written || 0\n    writeVarUint(encoder, written)\n    for (let i = 0; i < written; i++) {\n      write(encoder, _strBuffer[i])\n    }\n  } else {\n    writeVarUint8Array(encoder, string.encodeUtf8(str))\n  }\n}\n\n/**\n * Write a variable length string.\n *\n * @function\n * @param {Encoder} encoder\n * @param {String} str The string that is to be encoded.\n */\nexport const _writeVarStringPolyfill = (encoder, str) => {\n  const encodedString = unescape(encodeURIComponent(str))\n  const len = encodedString.length\n  writeVarUint(encoder, len)\n  for (let i = 0; i < len; i++) {\n    write(encoder, /** @type {number} */ (encodedString.codePointAt(i)))\n  }\n}\n\n/**\n * Write a variable length string.\n *\n * @function\n * @param {Encoder} encoder\n * @param {String} str The string that is to be encoded.\n */\n/* c8 ignore next */\nexport const writeVarString = (string.utf8TextEncoder && /** @type {any} */ (string.utf8TextEncoder).encodeInto) ? _writeVarStringNative : _writeVarStringPolyfill\n\n/**\n * Write a string terminated by a special byte sequence. This is not very performant and is\n * generally discouraged. However, the resulting byte arrays are lexiographically ordered which\n * makes this a nice feature for databases.\n *\n * The string will be encoded using utf8 and then terminated and escaped using writeTerminatingUint8Array.\n *\n * @function\n * @param {Encoder} encoder\n * @param {String} str The string that is to be encoded.\n */\nexport const writeTerminatedString = (encoder, str) =>\n  writeTerminatedUint8Array(encoder, string.encodeUtf8(str))\n\n/**\n * Write a terminating Uint8Array. Note that this is not performant and is generally\n * discouraged. There are few situations when this is needed.\n *\n * We use 0x0 as a terminating character. 0x1 serves as an escape character for 0x0 and 0x1.\n *\n * Example: [0,1,2] is encoded to [1,0,1,1,2,0]. 0x0, and 0x1 needed to be escaped using 0x1. Then\n * the result is terminated using the 0x0 character.\n *\n * This is basically how many systems implement null terminated strings. However, we use an escape\n * character 0x1 to avoid issues and potenial attacks on our database (if this is used as a key\n * encoder for NoSql databases).\n *\n * @function\n * @param {Encoder} encoder\n * @param {Uint8Array} buf The string that is to be encoded.\n */\nexport const writeTerminatedUint8Array = (encoder, buf) => {\n  for (let i = 0; i < buf.length; i++) {\n    const b = buf[i]\n    if (b === 0 || b === 1) {\n      write(encoder, 1)\n    }\n    write(encoder, buf[i])\n  }\n  write(encoder, 0)\n}\n\n/**\n * Write the content of another Encoder.\n *\n * @TODO: can be improved!\n *        - Note: Should consider that when appending a lot of small Encoders, we should rather clone than referencing the old structure.\n *                Encoders start with a rather big initial buffer.\n *\n * @function\n * @param {Encoder} encoder The enUint8Arr\n * @param {Encoder} append The BinaryEncoder to be written.\n */\nexport const writeBinaryEncoder = (encoder, append) => writeUint8Array(encoder, toUint8Array(append))\n\n/**\n * Append fixed-length Uint8Array to the encoder.\n *\n * @function\n * @param {Encoder} encoder\n * @param {Uint8Array} uint8Array\n */\nexport const writeUint8Array = (encoder, uint8Array) => {\n  const bufferLen = encoder.cbuf.length\n  const cpos = encoder.cpos\n  const leftCopyLen = math.min(bufferLen - cpos, uint8Array.length)\n  const rightCopyLen = uint8Array.length - leftCopyLen\n  encoder.cbuf.set(uint8Array.subarray(0, leftCopyLen), cpos)\n  encoder.cpos += leftCopyLen\n  if (rightCopyLen > 0) {\n    // Still something to write, write right half..\n    // Append new buffer\n    encoder.bufs.push(encoder.cbuf)\n    // must have at least size of remaining buffer\n    encoder.cbuf = new Uint8Array(math.max(bufferLen * 2, rightCopyLen))\n    // copy array\n    encoder.cbuf.set(uint8Array.subarray(leftCopyLen))\n    encoder.cpos = rightCopyLen\n  }\n}\n\n/**\n * Append an Uint8Array to Encoder.\n *\n * @function\n * @param {Encoder} encoder\n * @param {Uint8Array} uint8Array\n */\nexport const writeVarUint8Array = (encoder, uint8Array) => {\n  writeVarUint(encoder, uint8Array.byteLength)\n  writeUint8Array(encoder, uint8Array)\n}\n\n/**\n * Create an DataView of the next `len` bytes. Use it to write data after\n * calling this function.\n *\n * ```js\n * // write float32 using DataView\n * const dv = writeOnDataView(encoder, 4)\n * dv.setFloat32(0, 1.1)\n * // read float32 using DataView\n * const dv = readFromDataView(encoder, 4)\n * dv.getFloat32(0) // => 1.100000023841858 (leaving it to the reader to find out why this is the correct result)\n * ```\n *\n * @param {Encoder} encoder\n * @param {number} len\n * @return {DataView}\n */\nexport const writeOnDataView = (encoder, len) => {\n  verifyLen(encoder, len)\n  const dview = new DataView(encoder.cbuf.buffer, encoder.cpos, len)\n  encoder.cpos += len\n  return dview\n}\n\n/**\n * @param {Encoder} encoder\n * @param {number} num\n */\nexport const writeFloat32 = (encoder, num) => writeOnDataView(encoder, 4).setFloat32(0, num, false)\n\n/**\n * @param {Encoder} encoder\n * @param {number} num\n */\nexport const writeFloat64 = (encoder, num) => writeOnDataView(encoder, 8).setFloat64(0, num, false)\n\n/**\n * @param {Encoder} encoder\n * @param {bigint} num\n */\nexport const writeBigInt64 = (encoder, num) => /** @type {any} */ (writeOnDataView(encoder, 8)).setBigInt64(0, num, false)\n\n/**\n * @param {Encoder} encoder\n * @param {bigint} num\n */\nexport const writeBigUint64 = (encoder, num) => /** @type {any} */ (writeOnDataView(encoder, 8)).setBigUint64(0, num, false)\n\nconst floatTestBed = new DataView(new ArrayBuffer(4))\n/**\n * Check if a number can be encoded as a 32 bit float.\n *\n * @param {number} num\n * @return {boolean}\n */\nconst isFloat32 = num => {\n  floatTestBed.setFloat32(0, num)\n  return floatTestBed.getFloat32(0) === num\n}\n\n/**\n * Encode data with efficient binary format.\n *\n * Differences to JSON:\n * â€¢ Transforms data to a binary format (not to a string)\n * â€¢ Encodes undefined, NaN, and ArrayBuffer (these can't be represented in JSON)\n * â€¢ Numbers are efficiently encoded either as a variable length integer, as a\n *   32 bit float, as a 64 bit float, or as a 64 bit bigint.\n *\n * Encoding table:\n *\n * | Data Type           | Prefix   | Encoding Method    | Comment |\n * | ------------------- | -------- | ------------------ | ------- |\n * | undefined           | 127      |                    | Functions, symbol, and everything that cannot be identified is encoded as undefined |\n * | null                | 126      |                    | |\n * | integer             | 125      | writeVarInt        | Only encodes 32 bit signed integers |\n * | float32             | 124      | writeFloat32       | |\n * | float64             | 123      | writeFloat64       | |\n * | bigint              | 122      | writeBigInt64      | |\n * | boolean (false)     | 121      |                    | True and false are different data types so we save the following byte |\n * | boolean (true)      | 120      |                    | - 0b01111000 so the last bit determines whether true or false |\n * | string              | 119      | writeVarString     | |\n * | object<string,any>  | 118      | custom             | Writes {length} then {length} key-value pairs |\n * | array<any>          | 117      | custom             | Writes {length} then {length} json values |\n * | Uint8Array          | 116      | writeVarUint8Array | We use Uint8Array for any kind of binary data |\n *\n * Reasons for the decreasing prefix:\n * We need the first bit for extendability (later we may want to encode the\n * prefix with writeVarUint). The remaining 7 bits are divided as follows:\n * [0-30]   the beginning of the data range is used for custom purposes\n *          (defined by the function that uses this library)\n * [31-127] the end of the data range is used for data encoding by\n *          lib0/encoding.js\n *\n * @param {Encoder} encoder\n * @param {undefined|null|number|bigint|boolean|string|Object<string,any>|Array<any>|Uint8Array} data\n */\nexport const writeAny = (encoder, data) => {\n  switch (typeof data) {\n    case 'string':\n      // TYPE 119: STRING\n      write(encoder, 119)\n      writeVarString(encoder, data)\n      break\n    case 'number':\n      if (number.isInteger(data) && math.abs(data) <= binary.BITS31) {\n        // TYPE 125: INTEGER\n        write(encoder, 125)\n        writeVarInt(encoder, data)\n      } else if (isFloat32(data)) {\n        // TYPE 124: FLOAT32\n        write(encoder, 124)\n        writeFloat32(encoder, data)\n      } else {\n        // TYPE 123: FLOAT64\n        write(encoder, 123)\n        writeFloat64(encoder, data)\n      }\n      break\n    case 'bigint':\n      // TYPE 122: BigInt\n      write(encoder, 122)\n      writeBigInt64(encoder, data)\n      break\n    case 'object':\n      if (data === null) {\n        // TYPE 126: null\n        write(encoder, 126)\n      } else if (array.isArray(data)) {\n        // TYPE 117: Array\n        write(encoder, 117)\n        writeVarUint(encoder, data.length)\n        for (let i = 0; i < data.length; i++) {\n          writeAny(encoder, data[i])\n        }\n      } else if (data instanceof Uint8Array) {\n        // TYPE 116: ArrayBuffer\n        write(encoder, 116)\n        writeVarUint8Array(encoder, data)\n      } else {\n        // TYPE 118: Object\n        write(encoder, 118)\n        const keys = Object.keys(data)\n        writeVarUint(encoder, keys.length)\n        for (let i = 0; i < keys.length; i++) {\n          const key = keys[i]\n          writeVarString(encoder, key)\n          writeAny(encoder, data[key])\n        }\n      }\n      break\n    case 'boolean':\n      // TYPE 120/121: boolean (true/false)\n      write(encoder, data ? 120 : 121)\n      break\n    default:\n      // TYPE 127: undefined\n      write(encoder, 127)\n  }\n}\n\n/**\n * Now come a few stateful encoder that have their own classes.\n */\n\n/**\n * Basic Run Length Encoder - a basic compression implementation.\n *\n * Encodes [1,1,1,7] to [1,3,7,1] (3 times 1, 1 time 7). This encoder might do more harm than good if there are a lot of values that are not repeated.\n *\n * It was originally used for image compression. Cool .. article http://csbruce.com/cbm/transactor/pdfs/trans_v7_i06.pdf\n *\n * @note T must not be null!\n *\n * @template T\n */\nexport class RleEncoder extends Encoder {\n  /**\n   * @param {function(Encoder, T):void} writer\n   */\n  constructor (writer) {\n    super()\n    /**\n     * The writer\n     */\n    this.w = writer\n    /**\n     * Current state\n     * @type {T|null}\n     */\n    this.s = null\n    this.count = 0\n  }\n\n  /**\n   * @param {T} v\n   */\n  write (v) {\n    if (this.s === v) {\n      this.count++\n    } else {\n      if (this.count > 0) {\n        // flush counter, unless this is the first value (count = 0)\n        writeVarUint(this, this.count - 1) // since count is always > 0, we can decrement by one. non-standard encoding ftw\n      }\n      this.count = 1\n      // write first value\n      this.w(this, v)\n      this.s = v\n    }\n  }\n}\n\n/**\n * Basic diff decoder using variable length encoding.\n *\n * Encodes the values [3, 1100, 1101, 1050, 0] to [3, 1097, 1, -51, -1050] using writeVarInt.\n */\nexport class IntDiffEncoder extends Encoder {\n  /**\n   * @param {number} start\n   */\n  constructor (start) {\n    super()\n    /**\n     * Current state\n     * @type {number}\n     */\n    this.s = start\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    writeVarInt(this, v - this.s)\n    this.s = v\n  }\n}\n\n/**\n * A combination of IntDiffEncoder and RleEncoder.\n *\n * Basically first writes the IntDiffEncoder and then counts duplicate diffs using RleEncoding.\n *\n * Encodes the values [1,1,1,2,3,4,5,6] as [1,1,0,2,1,5] (RLE([1,0,0,1,1,1,1,1]) â‡’ RleIntDiff[1,1,0,2,1,5])\n */\nexport class RleIntDiffEncoder extends Encoder {\n  /**\n   * @param {number} start\n   */\n  constructor (start) {\n    super()\n    /**\n     * Current state\n     * @type {number}\n     */\n    this.s = start\n    this.count = 0\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    if (this.s === v && this.count > 0) {\n      this.count++\n    } else {\n      if (this.count > 0) {\n        // flush counter, unless this is the first value (count = 0)\n        writeVarUint(this, this.count - 1) // since count is always > 0, we can decrement by one. non-standard encoding ftw\n      }\n      this.count = 1\n      // write first value\n      writeVarInt(this, v - this.s)\n      this.s = v\n    }\n  }\n}\n\n/**\n * @param {UintOptRleEncoder} encoder\n */\nconst flushUintOptRleEncoder = encoder => {\n  if (encoder.count > 0) {\n    // flush counter, unless this is the first value (count = 0)\n    // case 1: just a single value. set sign to positive\n    // case 2: write several values. set sign to negative to indicate that there is a length coming\n    writeVarInt(encoder.encoder, encoder.count === 1 ? encoder.s : -encoder.s)\n    if (encoder.count > 1) {\n      writeVarUint(encoder.encoder, encoder.count - 2) // since count is always > 1, we can decrement by one. non-standard encoding ftw\n    }\n  }\n}\n\n/**\n * Optimized Rle encoder that does not suffer from the mentioned problem of the basic Rle encoder.\n *\n * Internally uses VarInt encoder to write unsigned integers. If the input occurs multiple times, we write\n * write it as a negative number. The UintOptRleDecoder then understands that it needs to read a count.\n *\n * Encodes [1,2,3,3,3] as [1,2,-3,3] (once 1, once 2, three times 3)\n */\nexport class UintOptRleEncoder {\n  constructor () {\n    this.encoder = new Encoder()\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    if (this.s === v) {\n      this.count++\n    } else {\n      flushUintOptRleEncoder(this)\n      this.count = 1\n      this.s = v\n    }\n  }\n\n  /**\n   * Flush the encoded state and transform this to a Uint8Array.\n   *\n   * Note that this should only be called once.\n   */\n  toUint8Array () {\n    flushUintOptRleEncoder(this)\n    return toUint8Array(this.encoder)\n  }\n}\n\n/**\n * Increasing Uint Optimized RLE Encoder\n *\n * The RLE encoder counts the number of same occurences of the same value.\n * The IncUintOptRle encoder counts if the value increases.\n * I.e. 7, 8, 9, 10 will be encoded as [-7, 4]. 1, 3, 5 will be encoded\n * as [1, 3, 5].\n */\nexport class IncUintOptRleEncoder {\n  constructor () {\n    this.encoder = new Encoder()\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    if (this.s + this.count === v) {\n      this.count++\n    } else {\n      flushUintOptRleEncoder(this)\n      this.count = 1\n      this.s = v\n    }\n  }\n\n  /**\n   * Flush the encoded state and transform this to a Uint8Array.\n   *\n   * Note that this should only be called once.\n   */\n  toUint8Array () {\n    flushUintOptRleEncoder(this)\n    return toUint8Array(this.encoder)\n  }\n}\n\n/**\n * @param {IntDiffOptRleEncoder} encoder\n */\nconst flushIntDiffOptRleEncoder = encoder => {\n  if (encoder.count > 0) {\n    //          31 bit making up the diff | wether to write the counter\n    // const encodedDiff = encoder.diff << 1 | (encoder.count === 1 ? 0 : 1)\n    const encodedDiff = encoder.diff * 2 + (encoder.count === 1 ? 0 : 1)\n    // flush counter, unless this is the first value (count = 0)\n    // case 1: just a single value. set first bit to positive\n    // case 2: write several values. set first bit to negative to indicate that there is a length coming\n    writeVarInt(encoder.encoder, encodedDiff)\n    if (encoder.count > 1) {\n      writeVarUint(encoder.encoder, encoder.count - 2) // since count is always > 1, we can decrement by one. non-standard encoding ftw\n    }\n  }\n}\n\n/**\n * A combination of the IntDiffEncoder and the UintOptRleEncoder.\n *\n * The count approach is similar to the UintDiffOptRleEncoder, but instead of using the negative bitflag, it encodes\n * in the LSB whether a count is to be read. Therefore this Encoder only supports 31 bit integers!\n *\n * Encodes [1, 2, 3, 2] as [3, 1, 6, -1] (more specifically [(1 << 1) | 1, (3 << 0) | 0, -1])\n *\n * Internally uses variable length encoding. Contrary to normal UintVar encoding, the first byte contains:\n * * 1 bit that denotes whether the next value is a count (LSB)\n * * 1 bit that denotes whether this value is negative (MSB - 1)\n * * 1 bit that denotes whether to continue reading the variable length integer (MSB)\n *\n * Therefore, only five bits remain to encode diff ranges.\n *\n * Use this Encoder only when appropriate. In most cases, this is probably a bad idea.\n */\nexport class IntDiffOptRleEncoder {\n  constructor () {\n    this.encoder = new Encoder()\n    /**\n     * @type {number}\n     */\n    this.s = 0\n    this.count = 0\n    this.diff = 0\n  }\n\n  /**\n   * @param {number} v\n   */\n  write (v) {\n    if (this.diff === v - this.s) {\n      this.s = v\n      this.count++\n    } else {\n      flushIntDiffOptRleEncoder(this)\n      this.count = 1\n      this.diff = v - this.s\n      this.s = v\n    }\n  }\n\n  /**\n   * Flush the encoded state and transform this to a Uint8Array.\n   *\n   * Note that this should only be called once.\n   */\n  toUint8Array () {\n    flushIntDiffOptRleEncoder(this)\n    return toUint8Array(this.encoder)\n  }\n}\n\n/**\n * Optimized String Encoder.\n *\n * Encoding many small strings in a simple Encoder is not very efficient. The function call to decode a string takes some time and creates references that must be eventually deleted.\n * In practice, when decoding several million small strings, the GC will kick in more and more often to collect orphaned string objects (or maybe there is another reason?).\n *\n * This string encoder solves the above problem. All strings are concatenated and written as a single string using a single encoding call.\n *\n * The lengths are encoded using a UintOptRleEncoder.\n */\nexport class StringEncoder {\n  constructor () {\n    /**\n     * @type {Array<string>}\n     */\n    this.sarr = []\n    this.s = ''\n    this.lensE = new UintOptRleEncoder()\n  }\n\n  /**\n   * @param {string} string\n   */\n  write (string) {\n    this.s += string\n    if (this.s.length > 19) {\n      this.sarr.push(this.s)\n      this.s = ''\n    }\n    this.lensE.write(string.length)\n  }\n\n  toUint8Array () {\n    const encoder = new Encoder()\n    this.sarr.push(this.s)\n    this.s = ''\n    writeVarString(encoder, this.sarr.join(''))\n    writeUint8Array(encoder, this.lensE.toUint8Array())\n    return toUint8Array(encoder)\n  }\n}\n","/**\n * Error helpers.\n *\n * @module error\n */\n\n/**\n * @param {string} s\n * @return {Error}\n */\n/* c8 ignore next */\nexport const create = s => new Error(s)\n\n/**\n * @throws {Error}\n * @return {never}\n */\n/* c8 ignore next 3 */\nexport const methodUnimplemented = () => {\n  throw create('Method unimplemented')\n}\n\n/**\n * @throws {Error}\n * @return {never}\n */\n/* c8 ignore next 3 */\nexport const unexpectedCase = () => {\n  throw create('Unexpected case')\n}\n","/* eslint-env browser */\n\nexport const subtle = crypto.subtle\nexport const getRandomValues = crypto.getRandomValues.bind(crypto)\n","/**\n * Isomorphic module for true random numbers / buffers / uuids.\n *\n * Attention: falls back to Math.random if the browser does not support crypto.\n *\n * @module random\n */\n\nimport * as math from './math.js'\nimport * as binary from './binary.js'\nimport { getRandomValues } from 'lib0/webcrypto'\n\nexport const rand = Math.random\n\nexport const uint32 = () => getRandomValues(new Uint32Array(1))[0]\n\nexport const uint53 = () => {\n  const arr = getRandomValues(new Uint32Array(8))\n  return (arr[0] & binary.BITS21) * (binary.BITS32 + 1) + (arr[1] >>> 0)\n}\n\n/**\n * @template T\n * @param {Array<T>} arr\n * @return {T}\n */\nexport const oneOf = arr => arr[math.floor(rand() * arr.length)]\n\n// @ts-ignore\nconst uuidv4Template = [1e7] + -1e3 + -4e3 + -8e3 + -1e11\n\n/**\n * @return {string}\n */\nexport const uuidv4 = () => uuidv4Template.replace(/[018]/g, /** @param {number} c */ c =>\n  (c ^ uint32() & 15 >> c / 4).toString(16)\n)\n","/**\n * Utility helpers to work with promises.\n *\n * @module promise\n */\n\nimport * as time from './time.js'\n\n/**\n * @template T\n * @callback PromiseResolve\n * @param {T|PromiseLike<T>} [result]\n */\n\n/**\n * @template T\n * @param {function(PromiseResolve<T>,function(Error):void):any} f\n * @return {Promise<T>}\n */\nexport const create = f => /** @type {Promise<T>} */ (new Promise(f))\n\n/**\n * @param {function(function():void,function(Error):void):void} f\n * @return {Promise<void>}\n */\nexport const createEmpty = f => new Promise(f)\n\n/**\n * `Promise.all` wait for all promises in the array to resolve and return the result\n * @template {unknown[] | []} PS\n *\n * @param {PS} ps\n * @return {Promise<{ -readonly [P in keyof PS]: Awaited<PS[P]> }>}\n */\nexport const all = Promise.all.bind(Promise)\n\n/**\n * @param {Error} [reason]\n * @return {Promise<never>}\n */\nexport const reject = reason => Promise.reject(reason)\n\n/**\n * @template T\n * @param {T|void} res\n * @return {Promise<T|void>}\n */\nexport const resolve = res => Promise.resolve(res)\n\n/**\n * @template T\n * @param {T} res\n * @return {Promise<T>}\n */\nexport const resolveWith = res => Promise.resolve(res)\n\n/**\n * @todo Next version, reorder parameters: check, [timeout, [intervalResolution]]\n * @deprecated use untilAsync instead\n *\n * @param {number} timeout\n * @param {function():boolean} check\n * @param {number} [intervalResolution]\n * @return {Promise<void>}\n */\nexport const until = (timeout, check, intervalResolution = 10) => create((resolve, reject) => {\n  const startTime = time.getUnixTime()\n  const hasTimeout = timeout > 0\n  const untilInterval = () => {\n    if (check()) {\n      clearInterval(intervalHandle)\n      resolve()\n    } else if (hasTimeout) {\n      /* c8 ignore else */\n      if (time.getUnixTime() - startTime > timeout) {\n        clearInterval(intervalHandle)\n        reject(new Error('Timeout'))\n      }\n    }\n  }\n  const intervalHandle = setInterval(untilInterval, intervalResolution)\n})\n\n/**\n * @param {()=>Promise<boolean>|boolean} check\n * @param {number} timeout\n * @param {number} intervalResolution\n * @return {Promise<void>}\n */\nexport const untilAsync = async (check, timeout = 0, intervalResolution = 10) => {\n  const startTime = time.getUnixTime()\n  const noTimeout = timeout <= 0\n  // eslint-disable-next-line no-unmodified-loop-condition\n  while (noTimeout || time.getUnixTime() - startTime <= timeout) {\n    if (await check()) return\n    await wait(intervalResolution)\n  }\n  throw new Error('Timeout')\n}\n\n/**\n * @param {number} timeout\n * @return {Promise<undefined>}\n */\nexport const wait = timeout => create((resolve, _reject) => setTimeout(resolve, timeout))\n\n/**\n * Checks if an object is a promise using ducktyping.\n *\n * Promises are often polyfilled, so it makes sense to add some additional guarantees if the user of this\n * library has some insane environment where global Promise objects are overwritten.\n *\n * @param {any} p\n * @return {boolean}\n */\nexport const isPromise = p => p instanceof Promise || (p && p.then && p.catch && p.finally)\n","/**\n * Often used conditions.\n *\n * @module conditions\n */\n\n/**\n * @template T\n * @param {T|null|undefined} v\n * @return {T|null}\n */\n/* c8 ignore next */\nexport const undefinedToNull = v => v === undefined ? null : v\n","/* eslint-env browser */\n\n/**\n * Isomorphic variable storage.\n *\n * Uses LocalStorage in the browser and falls back to in-memory storage.\n *\n * @module storage\n */\n\n/* c8 ignore start */\nclass VarStoragePolyfill {\n  constructor () {\n    this.map = new Map()\n  }\n\n  /**\n   * @param {string} key\n   * @param {any} newValue\n   */\n  setItem (key, newValue) {\n    this.map.set(key, newValue)\n  }\n\n  /**\n   * @param {string} key\n   */\n  getItem (key) {\n    return this.map.get(key)\n  }\n}\n/* c8 ignore stop */\n\n/**\n * @type {any}\n */\nlet _localStorage = new VarStoragePolyfill()\nlet usePolyfill = true\n\n/* c8 ignore start */\ntry {\n  // if the same-origin rule is violated, accessing localStorage might thrown an error\n  if (typeof localStorage !== 'undefined' && localStorage) {\n    _localStorage = localStorage\n    usePolyfill = false\n  }\n} catch (e) { }\n/* c8 ignore stop */\n\n/**\n * This is basically localStorage in browser, or a polyfill in nodejs\n */\n/* c8 ignore next */\nexport const varStorage = _localStorage\n\n/**\n * A polyfill for `addEventListener('storage', event => {..})` that does nothing if the polyfill is being used.\n *\n * @param {function({ key: string, newValue: string, oldValue: string }): void} eventHandler\n * @function\n */\n/* c8 ignore next */\nexport const onChange = eventHandler => usePolyfill || addEventListener('storage', /** @type {any} */ (eventHandler))\n\n/**\n * A polyfill for `removeEventListener('storage', event => {..})` that does nothing if the polyfill is being used.\n *\n * @param {function({ key: string, newValue: string, oldValue: string }): void} eventHandler\n * @function\n */\n/* c8 ignore next */\nexport const offChange = eventHandler => usePolyfill || removeEventListener('storage', /** @type {any} */ (eventHandler))\n","/**\n * Utility functions for working with EcmaScript objects.\n *\n * @module object\n */\n\n/**\n * @return {Object<string,any>} obj\n */\nexport const create = () => Object.create(null)\n\n/**\n * Object.assign\n */\nexport const assign = Object.assign\n\n/**\n * @param {Object<string,any>} obj\n */\nexport const keys = Object.keys\n\n/**\n * @template V\n * @param {{[key:string]: V}} obj\n * @return {Array<V>}\n */\nexport const values = Object.values\n\n/**\n * @template V\n * @param {{[k:string]:V}} obj\n * @param {function(V,string):any} f\n */\nexport const forEach = (obj, f) => {\n  for (const key in obj) {\n    f(obj[key], key)\n  }\n}\n\n/**\n * @todo implement mapToArray & map\n *\n * @template R\n * @param {Object<string,any>} obj\n * @param {function(any,string):R} f\n * @return {Array<R>}\n */\nexport const map = (obj, f) => {\n  const results = []\n  for (const key in obj) {\n    results.push(f(obj[key], key))\n  }\n  return results\n}\n\n/**\n * @deprecated use object.size instead\n * @param {Object<string,any>} obj\n * @return {number}\n */\nexport const length = obj => keys(obj).length\n\n/**\n * @param {Object<string,any>} obj\n * @return {number}\n */\nexport const size = obj => keys(obj).length\n\n/**\n * @template {{ [key:string|number|symbol]: any }} T\n * @param {T} obj\n * @param {(v:T[keyof T],k:keyof T)=>boolean} f\n * @return {boolean}\n */\nexport const some = (obj, f) => {\n  for (const key in obj) {\n    if (f(obj[key], key)) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * @param {Object|null|undefined} obj\n */\nexport const isEmpty = obj => {\n  // eslint-disable-next-line no-unreachable-loop\n  for (const _k in obj) {\n    return false\n  }\n  return true\n}\n\n/**\n * @template {{ [key:string|number|symbol]: any }} T\n * @param {T} obj\n * @param {(v:T[keyof T],k:keyof T)=>boolean} f\n * @return {boolean}\n */\nexport const every = (obj, f) => {\n  for (const key in obj) {\n    if (!f(obj[key], key)) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * Calls `Object.prototype.hasOwnProperty`.\n *\n * @param {any} obj\n * @param {string|number|symbol} key\n * @return {boolean}\n */\nexport const hasProperty = (obj, key) => Object.prototype.hasOwnProperty.call(obj, key)\n\n/**\n * @param {Object<string,any>} a\n * @param {Object<string,any>} b\n * @return {boolean}\n */\nexport const equalFlat = (a, b) => a === b || (size(a) === size(b) && every(a, (val, key) => (val !== undefined || hasProperty(b, key)) && b[key] === val))\n\n/**\n * Make an object immutable. This hurts performance and is usually not needed if you perform good\n * coding practices.\n */\nexport const freeze = Object.freeze\n\n/**\n * Make an object and all its children immutable.\n * This *really* hurts performance and is usually not needed if you perform good coding practices.\n *\n * @template {any} T\n * @param {T} o\n * @return {Readonly<T>}\n */\nexport const deepFreeze = (o) => {\n  for (const key in o) {\n    const c = o[key]\n    if (typeof c === 'object' || typeof c === 'function') {\n      deepFreeze(o[key])\n    }\n  }\n  return freeze(o)\n}\n\n/**\n * Get object property. Create T if property is undefined and set T on object.\n *\n * @function\n * @template {object} KV\n * @template {keyof KV} [K=keyof KV]\n * @param {KV} o\n * @param {K} key\n * @param {() => KV[K]} createT\n * @return {KV[K]}\n */\nexport const setIfUndefined = (o, key, createT) => hasProperty(o, key) ? o[key] : (o[key] = createT())\n","/**\n * Common functions and function call helpers.\n *\n * @module function\n */\n\nimport * as array from './array.js'\nimport * as object from './object.js'\nimport * as traits from './traits.js'\n\n/**\n * Calls all functions in `fs` with args. Only throws after all functions were called.\n *\n * @param {Array<function>} fs\n * @param {Array<any>} args\n */\nexport const callAll = (fs, args, i = 0) => {\n  try {\n    for (; i < fs.length; i++) {\n      fs[i](...args)\n    }\n  } finally {\n    if (i < fs.length) {\n      callAll(fs, args, i + 1)\n    }\n  }\n}\n\nexport const nop = () => {}\n\n/**\n * @template T\n * @param {function():T} f\n * @return {T}\n */\nexport const apply = f => f()\n\n/**\n * @template A\n *\n * @param {A} a\n * @return {A}\n */\nexport const id = a => a\n\n/**\n * @template T\n *\n * @param {T} a\n * @param {T} b\n * @return {boolean}\n */\nexport const equalityStrict = (a, b) => a === b\n\n/**\n * @template T\n *\n * @param {Array<T>|object} a\n * @param {Array<T>|object} b\n * @return {boolean}\n */\nexport const equalityFlat = (a, b) => a === b || (a != null && b != null && a.constructor === b.constructor && ((array.isArray(a) && array.equalFlat(a, /** @type {Array<T>} */ (b))) || (typeof a === 'object' && object.equalFlat(a, b))))\n\n/* c8 ignore start */\n\n/**\n * @param {any} a\n * @param {any} b\n * @return {boolean}\n */\nexport const equalityDeep = (a, b) => {\n  if (a === b) {\n    return true\n  }\n  if (a == null || b == null || a.constructor !== b.constructor) {\n    return false\n  }\n  if (a[traits.EqualityTraitSymbol] != null) {\n    return a[traits.EqualityTraitSymbol](b)\n  }\n  switch (a.constructor) {\n    case ArrayBuffer:\n      a = new Uint8Array(a)\n      b = new Uint8Array(b)\n    // eslint-disable-next-line no-fallthrough\n    case Uint8Array: {\n      if (a.byteLength !== b.byteLength) {\n        return false\n      }\n      for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) {\n          return false\n        }\n      }\n      break\n    }\n    case Set: {\n      if (a.size !== b.size) {\n        return false\n      }\n      for (const value of a) {\n        if (!b.has(value)) {\n          return false\n        }\n      }\n      break\n    }\n    case Map: {\n      if (a.size !== b.size) {\n        return false\n      }\n      for (const key of a.keys()) {\n        if (!b.has(key) || !equalityDeep(a.get(key), b.get(key))) {\n          return false\n        }\n      }\n      break\n    }\n    case Object:\n      if (object.length(a) !== object.length(b)) {\n        return false\n      }\n      for (const key in a) {\n        if (!object.hasProperty(a, key) || !equalityDeep(a[key], b[key])) {\n          return false\n        }\n      }\n      break\n    case Array:\n      if (a.length !== b.length) {\n        return false\n      }\n      for (let i = 0; i < a.length; i++) {\n        if (!equalityDeep(a[i], b[i])) {\n          return false\n        }\n      }\n      break\n    default:\n      return false\n  }\n  return true\n}\n\n/**\n * @template V\n * @template {V} OPTS\n *\n * @param {V} value\n * @param {Array<OPTS>} options\n */\n// @ts-ignore\nexport const isOneOf = (value, options) => options.includes(value)\n/* c8 ignore stop */\n\nexport const isArray = array.isArray\n\n/**\n * @param {any} s\n * @return {s is String}\n */\nexport const isString = (s) => s && s.constructor === String\n\n/**\n * @param {any} n\n * @return {n is Number}\n */\nexport const isNumber = n => n != null && n.constructor === Number\n\n/**\n * @template {abstract new (...args: any) => any} TYPE\n * @param {any} n\n * @param {TYPE} T\n * @return {n is InstanceType<TYPE>}\n */\nexport const is = (n, T) => n && n.constructor === T\n\n/**\n * @template {abstract new (...args: any) => any} TYPE\n * @param {TYPE} T\n */\nexport const isTemplate = (T) =>\n  /**\n   * @param {any} n\n   * @return {n is InstanceType<TYPE>}\n   **/\n  n => n && n.constructor === T\n","/**\n * Isomorphic module to work access the environment (query params, env variables).\n *\n * @module environment\n */\n\nimport * as map from './map.js'\nimport * as string from './string.js'\nimport * as conditions from './conditions.js'\nimport * as storage from './storage.js'\nimport * as f from './function.js'\n\n/* c8 ignore next 2 */\n// @ts-ignore\nexport const isNode = typeof process !== 'undefined' && process.release && /node|io\\.js/.test(process.release.name) && Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]'\n\n/* c8 ignore next */\nexport const isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && !isNode\n/* c8 ignore next 3 */\nexport const isMac = typeof navigator !== 'undefined'\n  ? /Mac/.test(navigator.platform)\n  : false\n\n/**\n * @type {Map<string,string>}\n */\nlet params\nconst args = []\n\n/* c8 ignore start */\nconst computeParams = () => {\n  if (params === undefined) {\n    if (isNode) {\n      params = map.create()\n      const pargs = process.argv\n      let currParamName = null\n      for (let i = 0; i < pargs.length; i++) {\n        const parg = pargs[i]\n        if (parg[0] === '-') {\n          if (currParamName !== null) {\n            params.set(currParamName, '')\n          }\n          currParamName = parg\n        } else {\n          if (currParamName !== null) {\n            params.set(currParamName, parg)\n            currParamName = null\n          } else {\n            args.push(parg)\n          }\n        }\n      }\n      if (currParamName !== null) {\n        params.set(currParamName, '')\n      }\n      // in ReactNative for example this would not be true (unless connected to the Remote Debugger)\n    } else if (typeof location === 'object') {\n      params = map.create(); // eslint-disable-next-line no-undef\n      (location.search || '?').slice(1).split('&').forEach((kv) => {\n        if (kv.length !== 0) {\n          const [key, value] = kv.split('=')\n          params.set(`--${string.fromCamelCase(key, '-')}`, value)\n          params.set(`-${string.fromCamelCase(key, '-')}`, value)\n        }\n      })\n    } else {\n      params = map.create()\n    }\n  }\n  return params\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} name\n * @return {boolean}\n */\n/* c8 ignore next */\nexport const hasParam = (name) => computeParams().has(name)\n\n/**\n * @param {string} name\n * @param {string} defaultVal\n * @return {string}\n */\n/* c8 ignore next 2 */\nexport const getParam = (name, defaultVal) =>\n  computeParams().get(name) || defaultVal\n\n/**\n * @param {string} name\n * @return {string|null}\n */\n/* c8 ignore next 4 */\nexport const getVariable = (name) =>\n  isNode\n    ? conditions.undefinedToNull(process.env[name.toUpperCase().replaceAll('-', '_')])\n    : conditions.undefinedToNull(storage.varStorage.getItem(name))\n\n/**\n * @param {string} name\n * @return {string|null}\n */\n/* c8 ignore next 2 */\nexport const getConf = (name) =>\n  computeParams().get('--' + name) || getVariable(name)\n\n/**\n * @param {string} name\n * @return {string}\n */\n/* c8 ignore next 5 */\nexport const ensureConf = (name) => {\n  const c = getConf(name)\n  if (c == null) throw new Error(`Expected configuration \"${name.toUpperCase().replaceAll('-', '_')}\"`)\n  return c\n}\n\n/**\n * @param {string} name\n * @return {boolean}\n */\n/* c8 ignore next 2 */\nexport const hasConf = (name) =>\n  hasParam('--' + name) || getVariable(name) !== null\n\n/* c8 ignore next */\nexport const production = hasConf('production')\n\n/* c8 ignore next 2 */\nconst forceColor = isNode &&\n  f.isOneOf(process.env.FORCE_COLOR, ['true', '1', '2'])\n\n/* c8 ignore start */\n/**\n * Color is enabled by default if the terminal supports it.\n *\n * Explicitly enable color using `--color` parameter\n * Disable color using `--no-color` parameter or using `NO_COLOR=1` environment variable.\n * `FORCE_COLOR=1` enables color and takes precedence over all.\n */\nexport const supportsColor = forceColor || (\n  !hasParam('--no-colors') && // @todo deprecate --no-colors\n  !hasConf('no-color') &&\n  (!isNode || process.stdout.isTTY) && (\n    !isNode ||\n    hasParam('--color') ||\n    getVariable('COLORTERM') !== null ||\n    (getVariable('TERM') || '').includes('color')\n  )\n)\n/* c8 ignore stop */\n","/**\n * Working with value pairs.\n *\n * @module pair\n */\n\n/**\n * @template L,R\n */\nexport class Pair {\n  /**\n   * @param {L} left\n   * @param {R} right\n   */\n  constructor (left, right) {\n    this.left = left\n    this.right = right\n  }\n}\n\n/**\n * @template L,R\n * @param {L} left\n * @param {R} right\n * @return {Pair<L,R>}\n */\nexport const create = (left, right) => new Pair(left, right)\n\n/**\n * @template L,R\n * @param {R} right\n * @param {L} left\n * @return {Pair<L,R>}\n */\nexport const createReversed = (right, left) => new Pair(left, right)\n\n/**\n * @template L,R\n * @param {Array<Pair<L,R>>} arr\n * @param {function(L, R):any} f\n */\nexport const forEach = (arr, f) => arr.forEach(p => f(p.left, p.right))\n\n/**\n * @template L,R,X\n * @param {Array<Pair<L,R>>} arr\n * @param {function(L, R):X} f\n * @return {Array<X>}\n */\nexport const map = (arr, f) => arr.map(p => f(p.left, p.right))\n","/* eslint-env browser */\n\n/**\n * Utility module to work with the DOM.\n *\n * @module dom\n */\n\nimport * as pair from './pair.js'\nimport * as map from './map.js'\n\n/* c8 ignore start */\n/**\n * @type {Document}\n */\nexport const doc = /** @type {Document} */ (typeof document !== 'undefined' ? document : {})\n\n/**\n * @param {string} name\n * @return {HTMLElement}\n */\nexport const createElement = name => doc.createElement(name)\n\n/**\n * @return {DocumentFragment}\n */\nexport const createDocumentFragment = () => doc.createDocumentFragment()\n\n/**\n * @param {string} text\n * @return {Text}\n */\nexport const createTextNode = text => doc.createTextNode(text)\n\nexport const domParser = /** @type {DOMParser} */ (typeof DOMParser !== 'undefined' ? new DOMParser() : null)\n\n/**\n * @param {HTMLElement} el\n * @param {string} name\n * @param {Object} opts\n */\nexport const emitCustomEvent = (el, name, opts) => el.dispatchEvent(new CustomEvent(name, opts))\n\n/**\n * @param {Element} el\n * @param {Array<pair.Pair<string,string|boolean>>} attrs Array of key-value pairs\n * @return {Element}\n */\nexport const setAttributes = (el, attrs) => {\n  pair.forEach(attrs, (key, value) => {\n    if (value === false) {\n      el.removeAttribute(key)\n    } else if (value === true) {\n      el.setAttribute(key, '')\n    } else {\n      // @ts-ignore\n      el.setAttribute(key, value)\n    }\n  })\n  return el\n}\n\n/**\n * @param {Element} el\n * @param {Map<string, string>} attrs Array of key-value pairs\n * @return {Element}\n */\nexport const setAttributesMap = (el, attrs) => {\n  attrs.forEach((value, key) => { el.setAttribute(key, value) })\n  return el\n}\n\n/**\n * @param {Array<Node>|HTMLCollection} children\n * @return {DocumentFragment}\n */\nexport const fragment = children => {\n  const fragment = createDocumentFragment()\n  for (let i = 0; i < children.length; i++) {\n    appendChild(fragment, children[i])\n  }\n  return fragment\n}\n\n/**\n * @param {Element} parent\n * @param {Array<Node>} nodes\n * @return {Element}\n */\nexport const append = (parent, nodes) => {\n  appendChild(parent, fragment(nodes))\n  return parent\n}\n\n/**\n * @param {HTMLElement} el\n */\nexport const remove = el => el.remove()\n\n/**\n * @param {EventTarget} el\n * @param {string} name\n * @param {EventListener} f\n */\nexport const addEventListener = (el, name, f) => el.addEventListener(name, f)\n\n/**\n * @param {EventTarget} el\n * @param {string} name\n * @param {EventListener} f\n */\nexport const removeEventListener = (el, name, f) => el.removeEventListener(name, f)\n\n/**\n * @param {Node} node\n * @param {Array<pair.Pair<string,EventListener>>} listeners\n * @return {Node}\n */\nexport const addEventListeners = (node, listeners) => {\n  pair.forEach(listeners, (name, f) => addEventListener(node, name, f))\n  return node\n}\n\n/**\n * @param {Node} node\n * @param {Array<pair.Pair<string,EventListener>>} listeners\n * @return {Node}\n */\nexport const removeEventListeners = (node, listeners) => {\n  pair.forEach(listeners, (name, f) => removeEventListener(node, name, f))\n  return node\n}\n\n/**\n * @param {string} name\n * @param {Array<pair.Pair<string,string>|pair.Pair<string,boolean>>} attrs Array of key-value pairs\n * @param {Array<Node>} children\n * @return {Element}\n */\nexport const element = (name, attrs = [], children = []) =>\n  append(setAttributes(createElement(name), attrs), children)\n\n/**\n * @param {number} width\n * @param {number} height\n */\nexport const canvas = (width, height) => {\n  const c = /** @type {HTMLCanvasElement} */ (createElement('canvas'))\n  c.height = height\n  c.width = width\n  return c\n}\n\n/**\n * @param {string} t\n * @return {Text}\n */\nexport const text = createTextNode\n\n/**\n * @param {pair.Pair<string,string>} pair\n */\nexport const pairToStyleString = pair => `${pair.left}:${pair.right};`\n\n/**\n * @param {Array<pair.Pair<string,string>>} pairs\n * @return {string}\n */\nexport const pairsToStyleString = pairs => pairs.map(pairToStyleString).join('')\n\n/**\n * @param {Map<string,string>} m\n * @return {string}\n */\nexport const mapToStyleString = m => map.map(m, (value, key) => `${key}:${value};`).join('')\n\n/**\n * @todo should always query on a dom element\n *\n * @param {HTMLElement|ShadowRoot} el\n * @param {string} query\n * @return {HTMLElement | null}\n */\nexport const querySelector = (el, query) => el.querySelector(query)\n\n/**\n * @param {HTMLElement|ShadowRoot} el\n * @param {string} query\n * @return {NodeListOf<HTMLElement>}\n */\nexport const querySelectorAll = (el, query) => el.querySelectorAll(query)\n\n/**\n * @param {string} id\n * @return {HTMLElement}\n */\nexport const getElementById = id => /** @type {HTMLElement} */ (doc.getElementById(id))\n\n/**\n * @param {string} html\n * @return {HTMLElement}\n */\nconst _parse = html => domParser.parseFromString(`<html><body>${html}</body></html>`, 'text/html').body\n\n/**\n * @param {string} html\n * @return {DocumentFragment}\n */\nexport const parseFragment = html => fragment(/** @type {any} */ (_parse(html).childNodes))\n\n/**\n * @param {string} html\n * @return {HTMLElement}\n */\nexport const parseElement = html => /** @type HTMLElement */ (_parse(html).firstElementChild)\n\n/**\n * @param {HTMLElement} oldEl\n * @param {HTMLElement|DocumentFragment} newEl\n */\nexport const replaceWith = (oldEl, newEl) => oldEl.replaceWith(newEl)\n\n/**\n * @param {HTMLElement} parent\n * @param {HTMLElement} el\n * @param {Node|null} ref\n * @return {HTMLElement}\n */\nexport const insertBefore = (parent, el, ref) => parent.insertBefore(el, ref)\n\n/**\n * @param {Node} parent\n * @param {Node} child\n * @return {Node}\n */\nexport const appendChild = (parent, child) => parent.appendChild(child)\n\nexport const ELEMENT_NODE = doc.ELEMENT_NODE\nexport const TEXT_NODE = doc.TEXT_NODE\nexport const CDATA_SECTION_NODE = doc.CDATA_SECTION_NODE\nexport const COMMENT_NODE = doc.COMMENT_NODE\nexport const DOCUMENT_NODE = doc.DOCUMENT_NODE\nexport const DOCUMENT_TYPE_NODE = doc.DOCUMENT_TYPE_NODE\nexport const DOCUMENT_FRAGMENT_NODE = doc.DOCUMENT_FRAGMENT_NODE\n\n/**\n * @param {any} node\n * @param {number} type\n */\nexport const checkNodeType = (node, type) => node.nodeType === type\n\n/**\n * @param {Node} parent\n * @param {HTMLElement} child\n */\nexport const isParentOf = (parent, child) => {\n  let p = child.parentNode\n  while (p && p !== parent) {\n    p = p.parentNode\n  }\n  return p === parent\n}\n/* c8 ignore stop */\n","/**\n * Utility module to work with EcmaScript Symbols.\n *\n * @module symbol\n */\n\n/**\n * Return fresh symbol.\n */\nexport const create = Symbol\n\n/**\n * @param {any} s\n * @return {boolean}\n */\nexport const isSymbol = s => typeof s === 'symbol'\n","import * as symbol from './symbol.js'\nimport * as time from './time.js'\nimport * as env from './environment.js'\nimport * as func from './function.js'\nimport * as json from './json.js'\n\nexport const BOLD = symbol.create()\nexport const UNBOLD = symbol.create()\nexport const BLUE = symbol.create()\nexport const GREY = symbol.create()\nexport const GREEN = symbol.create()\nexport const RED = symbol.create()\nexport const PURPLE = symbol.create()\nexport const ORANGE = symbol.create()\nexport const UNCOLOR = symbol.create()\n\n/* c8 ignore start */\n/**\n * @param {Array<undefined|string|Symbol|Object|number|function():any>} args\n * @return {Array<string|object|number|undefined>}\n */\nexport const computeNoColorLoggingArgs = args => {\n  if (args.length === 1 && args[0]?.constructor === Function) {\n    args = /** @type {Array<string|Symbol|Object|number>} */ (/** @type {[function]} */ (args)[0]())\n  }\n  const strBuilder = []\n  const logArgs = []\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (arg === undefined) {\n      break\n    } else if (arg.constructor === String || arg.constructor === Number) {\n      strBuilder.push(arg)\n    } else if (arg.constructor === Object) {\n      break\n    }\n  }\n  if (i > 0) {\n    // create logArgs with what we have so far\n    logArgs.push(strBuilder.join(''))\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg)\n    }\n  }\n  return logArgs\n}\n/* c8 ignore stop */\n\nconst loggingColors = [GREEN, PURPLE, ORANGE, BLUE]\nlet nextColor = 0\nlet lastLoggingTime = time.getUnixTime()\n\n/* c8 ignore start */\n/**\n * @param {function(...any):void} _print\n * @param {string} moduleName\n * @return {function(...any):void}\n */\nexport const createModuleLogger = (_print, moduleName) => {\n  const color = loggingColors[nextColor]\n  const debugRegexVar = env.getVariable('log')\n  const doLogging = debugRegexVar !== null &&\n    (debugRegexVar === '*' || debugRegexVar === 'true' ||\n      new RegExp(debugRegexVar, 'gi').test(moduleName))\n  nextColor = (nextColor + 1) % loggingColors.length\n  moduleName += ': '\n  return !doLogging\n    ? func.nop\n    : (...args) => {\n        if (args.length === 1 && args[0]?.constructor === Function) {\n          args = args[0]()\n        }\n        const timeNow = time.getUnixTime()\n        const timeDiff = timeNow - lastLoggingTime\n        lastLoggingTime = timeNow\n        _print(\n          color,\n          moduleName,\n          UNCOLOR,\n          ...args.map((arg) => {\n            if (arg != null && arg.constructor === Uint8Array) {\n              arg = Array.from(arg)\n            }\n            const t = typeof arg\n            switch (t) {\n              case 'string':\n              case 'symbol':\n                return arg\n              default: {\n                return json.stringify(arg)\n              }\n            }\n          }),\n          color,\n          ' +' + timeDiff + 'ms'\n        )\n      }\n}\n/* c8 ignore stop */\n","/**\n * Isomorphic logging module with support for colors!\n *\n * @module logging\n */\n\nimport * as env from './environment.js'\nimport * as set from './set.js'\nimport * as pair from './pair.js'\nimport * as dom from './dom.js'\nimport * as json from './json.js'\nimport * as map from './map.js'\nimport * as eventloop from './eventloop.js'\nimport * as math from './math.js'\nimport * as common from './logging.common.js'\n\nexport { BOLD, UNBOLD, BLUE, GREY, GREEN, RED, PURPLE, ORANGE, UNCOLOR } from './logging.common.js'\n\n/**\n * @type {Object<Symbol,pair.Pair<string,string>>}\n */\nconst _browserStyleMap = {\n  [common.BOLD]: pair.create('font-weight', 'bold'),\n  [common.UNBOLD]: pair.create('font-weight', 'normal'),\n  [common.BLUE]: pair.create('color', 'blue'),\n  [common.GREEN]: pair.create('color', 'green'),\n  [common.GREY]: pair.create('color', 'grey'),\n  [common.RED]: pair.create('color', 'red'),\n  [common.PURPLE]: pair.create('color', 'purple'),\n  [common.ORANGE]: pair.create('color', 'orange'), // not well supported in chrome when debugging node with inspector - TODO: deprecate\n  [common.UNCOLOR]: pair.create('color', 'black')\n}\n\n/**\n * @param {Array<string|Symbol|Object|number|function():any>} args\n * @return {Array<string|object|number>}\n */\n/* c8 ignore start */\nconst computeBrowserLoggingArgs = (args) => {\n  if (args.length === 1 && args[0]?.constructor === Function) {\n    args = /** @type {Array<string|Symbol|Object|number>} */ (/** @type {[function]} */ (args)[0]())\n  }\n  const strBuilder = []\n  const styles = []\n  const currentStyle = map.create()\n  /**\n   * @type {Array<string|Object|number>}\n   */\n  let logArgs = []\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    // @ts-ignore\n    const style = _browserStyleMap[arg]\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right)\n    } else {\n      if (arg === undefined) {\n        break\n      }\n      if (arg.constructor === String || arg.constructor === Number) {\n        const style = dom.mapToStyleString(currentStyle)\n        if (i > 0 || style.length > 0) {\n          strBuilder.push('%c' + arg)\n          styles.push(style)\n        } else {\n          strBuilder.push(arg)\n        }\n      } else {\n        break\n      }\n    }\n  }\n  if (i > 0) {\n    // create logArgs with what we have so far\n    logArgs = styles\n    logArgs.unshift(strBuilder.join(''))\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    const arg = args[i]\n    if (!(arg instanceof Symbol)) {\n      logArgs.push(arg)\n    }\n  }\n  return logArgs\n}\n/* c8 ignore stop */\n\n/* c8 ignore start */\nconst computeLoggingArgs = env.supportsColor\n  ? computeBrowserLoggingArgs\n  : common.computeNoColorLoggingArgs\n/* c8 ignore stop */\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const print = (...args) => {\n  console.log(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.print(args))\n}\n\n/* c8 ignore start */\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const warn = (...args) => {\n  console.warn(...computeLoggingArgs(args))\n  args.unshift(common.ORANGE)\n  vconsoles.forEach((vc) => vc.print(args))\n}\n/* c8 ignore stop */\n\n/**\n * @param {Error} err\n */\n/* c8 ignore start */\nexport const printError = (err) => {\n  console.error(err)\n  vconsoles.forEach((vc) => vc.printError(err))\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} url image location\n * @param {number} height height of the image in pixel\n */\n/* c8 ignore start */\nexport const printImg = (url, height) => {\n  if (env.isBrowser) {\n    console.log(\n      '%c                      ',\n      `font-size: ${height}px; background-size: contain; background-repeat: no-repeat; background-image: url(${url})`\n    )\n    // console.log('%c                ', `font-size: ${height}x; background: url(${url}) no-repeat;`)\n  }\n  vconsoles.forEach((vc) => vc.printImg(url, height))\n}\n/* c8 ignore stop */\n\n/**\n * @param {string} base64\n * @param {number} height\n */\n/* c8 ignore next 2 */\nexport const printImgBase64 = (base64, height) =>\n  printImg(`data:image/gif;base64,${base64}`, height)\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const group = (...args) => {\n  console.group(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.group(args))\n}\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n */\nexport const groupCollapsed = (...args) => {\n  console.groupCollapsed(...computeLoggingArgs(args))\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.groupCollapsed(args))\n}\n\nexport const groupEnd = () => {\n  console.groupEnd()\n  /* c8 ignore next */\n  vconsoles.forEach((vc) => vc.groupEnd())\n}\n\n/**\n * @param {function():Node} createNode\n */\n/* c8 ignore next 2 */\nexport const printDom = (createNode) =>\n  vconsoles.forEach((vc) => vc.printDom(createNode()))\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {number} height\n */\n/* c8 ignore next 2 */\nexport const printCanvas = (canvas, height) =>\n  printImg(canvas.toDataURL(), height)\n\nexport const vconsoles = set.create()\n\n/**\n * @param {Array<string|Symbol|Object|number>} args\n * @return {Array<Element>}\n */\n/* c8 ignore start */\nconst _computeLineSpans = (args) => {\n  const spans = []\n  const currentStyle = new Map()\n  // try with formatting until we find something unsupported\n  let i = 0\n  for (; i < args.length; i++) {\n    let arg = args[i]\n    // @ts-ignore\n    const style = _browserStyleMap[arg]\n    if (style !== undefined) {\n      currentStyle.set(style.left, style.right)\n    } else {\n      if (arg === undefined) {\n        arg = 'undefined '\n      }\n      if (arg.constructor === String || arg.constructor === Number) {\n        // @ts-ignore\n        const span = dom.element('span', [\n          pair.create('style', dom.mapToStyleString(currentStyle))\n        ], [dom.text(arg.toString())])\n        if (span.innerHTML === '') {\n          span.innerHTML = '&nbsp;'\n        }\n        spans.push(span)\n      } else {\n        break\n      }\n    }\n  }\n  // append the rest\n  for (; i < args.length; i++) {\n    let content = args[i]\n    if (!(content instanceof Symbol)) {\n      if (content.constructor !== String && content.constructor !== Number) {\n        content = ' ' + json.stringify(content) + ' '\n      }\n      spans.push(\n        dom.element('span', [], [dom.text(/** @type {string} */ (content))])\n      )\n    }\n  }\n  return spans\n}\n/* c8 ignore stop */\n\nconst lineStyle =\n  'font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;'\n\n/* c8 ignore start */\nexport class VConsole {\n  /**\n   * @param {Element} dom\n   */\n  constructor (dom) {\n    this.dom = dom\n    /**\n     * @type {Element}\n     */\n    this.ccontainer = this.dom\n    this.depth = 0\n    vconsoles.add(this)\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   * @param {boolean} collapsed\n   */\n  group (args, collapsed = false) {\n    eventloop.enqueue(() => {\n      const triangleDown = dom.element('span', [\n        pair.create('hidden', collapsed),\n        pair.create('style', 'color:grey;font-size:120%;')\n      ], [dom.text('â–¼')])\n      const triangleRight = dom.element('span', [\n        pair.create('hidden', !collapsed),\n        pair.create('style', 'color:grey;font-size:125%;')\n      ], [dom.text('â–¶')])\n      const content = dom.element(\n        'div',\n        [pair.create(\n          'style',\n          `${lineStyle};padding-left:${this.depth * 10}px`\n        )],\n        [triangleDown, triangleRight, dom.text(' ')].concat(\n          _computeLineSpans(args)\n        )\n      )\n      const nextContainer = dom.element('div', [\n        pair.create('hidden', collapsed)\n      ])\n      const nextLine = dom.element('div', [], [content, nextContainer])\n      dom.append(this.ccontainer, [nextLine])\n      this.ccontainer = nextContainer\n      this.depth++\n      // when header is clicked, collapse/uncollapse container\n      dom.addEventListener(content, 'click', (_event) => {\n        nextContainer.toggleAttribute('hidden')\n        triangleDown.toggleAttribute('hidden')\n        triangleRight.toggleAttribute('hidden')\n      })\n    })\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  groupCollapsed (args) {\n    this.group(args, true)\n  }\n\n  groupEnd () {\n    eventloop.enqueue(() => {\n      if (this.depth > 0) {\n        this.depth--\n        // @ts-ignore\n        this.ccontainer = this.ccontainer.parentElement.parentElement\n      }\n    })\n  }\n\n  /**\n   * @param {Array<string|Symbol|Object|number>} args\n   */\n  print (args) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [\n        dom.element('div', [\n          pair.create(\n            'style',\n            `${lineStyle};padding-left:${this.depth * 10}px`\n          )\n        ], _computeLineSpans(args))\n      ])\n    })\n  }\n\n  /**\n   * @param {Error} err\n   */\n  printError (err) {\n    this.print([common.RED, common.BOLD, err.toString()])\n  }\n\n  /**\n   * @param {string} url\n   * @param {number} height\n   */\n  printImg (url, height) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [\n        dom.element('img', [\n          pair.create('src', url),\n          pair.create('height', `${math.round(height * 1.5)}px`)\n        ])\n      ])\n    })\n  }\n\n  /**\n   * @param {Node} node\n   */\n  printDom (node) {\n    eventloop.enqueue(() => {\n      dom.append(this.ccontainer, [node])\n    })\n  }\n\n  destroy () {\n    eventloop.enqueue(() => {\n      vconsoles.delete(this)\n    })\n  }\n}\n/* c8 ignore stop */\n\n/**\n * @param {Element} dom\n */\n/* c8 ignore next */\nexport const createVConsole = (dom) => new VConsole(dom)\n\n/**\n * @param {string} moduleName\n * @return {function(...any):void}\n */\nexport const createModuleLogger = (moduleName) => common.createModuleLogger(print, moduleName)\n","/**\n * Utility module to create and manipulate Iterators.\n *\n * @module iterator\n */\n\n/**\n * @template T,R\n * @param {Iterator<T>} iterator\n * @param {function(T):R} f\n * @return {IterableIterator<R>}\n */\nexport const mapIterator = (iterator, f) => ({\n  [Symbol.iterator] () {\n    return this\n  },\n  // @ts-ignore\n  next () {\n    const r = iterator.next()\n    return { value: r.done ? undefined : f(r.value), done: r.done }\n  }\n})\n\n/**\n * @template T\n * @param {function():IteratorResult<T>} next\n * @return {IterableIterator<T>}\n */\nexport const createIterator = next => ({\n  /**\n   * @return {IterableIterator<T>}\n   */\n  [Symbol.iterator] () {\n    return this\n  },\n  // @ts-ignore\n  next\n})\n\n/**\n * @template T\n * @param {Iterator<T>} iterator\n * @param {function(T):boolean} filter\n */\nexport const iteratorFilter = (iterator, filter) => createIterator(() => {\n  let res\n  do {\n    res = iterator.next()\n  } while (!res.done && !filter(res.value))\n  return res\n})\n\n/**\n * @template T,M\n * @param {Iterator<T>} iterator\n * @param {function(T):M} fmap\n */\nexport const iteratorMap = (iterator, fmap) => createIterator(() => {\n  const { done, value } = iterator.next()\n  return { done, value: done ? undefined : fmap(value) }\n})\n","import { ObservableV2 } from 'lib0/observable';\nimport * as array from 'lib0/array';\nimport * as math from 'lib0/math';\nimport * as map from 'lib0/map';\nimport * as encoding from 'lib0/encoding';\nimport * as decoding from 'lib0/decoding';\nimport * as random from 'lib0/random';\nimport * as promise from 'lib0/promise';\nimport * as buffer from 'lib0/buffer';\nimport * as error from 'lib0/error';\nimport * as binary from 'lib0/binary';\nimport * as f from 'lib0/function';\nimport { callAll } from 'lib0/function';\nimport * as set from 'lib0/set';\nimport * as logging from 'lib0/logging';\nimport * as time from 'lib0/time';\nimport * as string from 'lib0/string';\nimport * as iterator from 'lib0/iterator';\nimport * as object from 'lib0/object';\nimport * as env from 'lib0/environment';\n\n/**\n * This is an abstract interface that all Connectors should implement to keep them interchangeable.\n *\n * @note This interface is experimental and it is not advised to actually inherit this class.\n *       It just serves as typing information.\n *\n * @extends {ObservableV2<any>}\n */\nclass AbstractConnector extends ObservableV2 {\n  /**\n   * @param {Doc} ydoc\n   * @param {any} awareness\n   */\n  constructor (ydoc, awareness) {\n    super();\n    this.doc = ydoc;\n    this.awareness = awareness;\n  }\n}\n\nclass DeleteItem {\n  /**\n   * @param {number} clock\n   * @param {number} len\n   */\n  constructor (clock, len) {\n    /**\n     * @type {number}\n     */\n    this.clock = clock;\n    /**\n     * @type {number}\n     */\n    this.len = len;\n  }\n}\n\n/**\n * We no longer maintain a DeleteStore. DeleteSet is a temporary object that is created when needed.\n * - When created in a transaction, it must only be accessed after sorting, and merging\n *   - This DeleteSet is send to other clients\n * - We do not create a DeleteSet when we send a sync message. The DeleteSet message is created directly from StructStore\n * - We read a DeleteSet as part of a sync/update message. In this case the DeleteSet is already sorted and merged.\n */\nclass DeleteSet {\n  constructor () {\n    /**\n     * @type {Map<number,Array<DeleteItem>>}\n     */\n    this.clients = new Map();\n  }\n}\n\n/**\n * Iterate over all structs that the DeleteSet gc's.\n *\n * @param {Transaction} transaction\n * @param {DeleteSet} ds\n * @param {function(GC|Item):void} f\n *\n * @function\n */\nconst iterateDeletedStructs = (transaction, ds, f) =>\n  ds.clients.forEach((deletes, clientid) => {\n    const structs = /** @type {Array<GC|Item>} */ (transaction.doc.store.clients.get(clientid));\n    if (structs != null) {\n      const lastStruct = structs[structs.length - 1];\n      const clockState = lastStruct.id.clock + lastStruct.length;\n      for (let i = 0, del = deletes[i]; i < deletes.length && del.clock < clockState; del = deletes[++i]) {\n        iterateStructs(transaction, structs, del.clock, del.len, f);\n      }\n    }\n  });\n\n/**\n * @param {Array<DeleteItem>} dis\n * @param {number} clock\n * @return {number|null}\n *\n * @private\n * @function\n */\nconst findIndexDS = (dis, clock) => {\n  let left = 0;\n  let right = dis.length - 1;\n  while (left <= right) {\n    const midindex = math.floor((left + right) / 2);\n    const mid = dis[midindex];\n    const midclock = mid.clock;\n    if (midclock <= clock) {\n      if (clock < midclock + mid.len) {\n        return midindex\n      }\n      left = midindex + 1;\n    } else {\n      right = midindex - 1;\n    }\n  }\n  return null\n};\n\n/**\n * @param {DeleteSet} ds\n * @param {ID} id\n * @return {boolean}\n *\n * @private\n * @function\n */\nconst isDeleted = (ds, id) => {\n  const dis = ds.clients.get(id.client);\n  return dis !== undefined && findIndexDS(dis, id.clock) !== null\n};\n\n/**\n * @param {DeleteSet} ds\n *\n * @private\n * @function\n */\nconst sortAndMergeDeleteSet = ds => {\n  ds.clients.forEach(dels => {\n    dels.sort((a, b) => a.clock - b.clock);\n    // merge items without filtering or splicing the array\n    // i is the current pointer\n    // j refers to the current insert position for the pointed item\n    // try to merge dels[i] into dels[j-1] or set dels[j]=dels[i]\n    let i, j;\n    for (i = 1, j = 1; i < dels.length; i++) {\n      const left = dels[j - 1];\n      const right = dels[i];\n      if (left.clock + left.len >= right.clock) {\n        left.len = math.max(left.len, right.clock + right.len - left.clock);\n      } else {\n        if (j < i) {\n          dels[j] = right;\n        }\n        j++;\n      }\n    }\n    dels.length = j;\n  });\n};\n\n/**\n * @param {Array<DeleteSet>} dss\n * @return {DeleteSet} A fresh DeleteSet\n */\nconst mergeDeleteSets = dss => {\n  const merged = new DeleteSet();\n  for (let dssI = 0; dssI < dss.length; dssI++) {\n    dss[dssI].clients.forEach((delsLeft, client) => {\n      if (!merged.clients.has(client)) {\n        // Write all missing keys from current ds and all following.\n        // If merged already contains `client` current ds has already been added.\n        /**\n         * @type {Array<DeleteItem>}\n         */\n        const dels = delsLeft.slice();\n        for (let i = dssI + 1; i < dss.length; i++) {\n          array.appendTo(dels, dss[i].clients.get(client) || []);\n        }\n        merged.clients.set(client, dels);\n      }\n    });\n  }\n  sortAndMergeDeleteSet(merged);\n  return merged\n};\n\n/**\n * @param {DeleteSet} ds\n * @param {number} client\n * @param {number} clock\n * @param {number} length\n *\n * @private\n * @function\n */\nconst addToDeleteSet = (ds, client, clock, length) => {\n  map.setIfUndefined(ds.clients, client, () => /** @type {Array<DeleteItem>} */ ([])).push(new DeleteItem(clock, length));\n};\n\nconst createDeleteSet = () => new DeleteSet();\n\n/**\n * @param {StructStore} ss\n * @return {DeleteSet} Merged and sorted DeleteSet\n *\n * @private\n * @function\n */\nconst createDeleteSetFromStructStore = ss => {\n  const ds = createDeleteSet();\n  ss.clients.forEach((structs, client) => {\n    /**\n     * @type {Array<DeleteItem>}\n     */\n    const dsitems = [];\n    for (let i = 0; i < structs.length; i++) {\n      const struct = structs[i];\n      if (struct.deleted) {\n        const clock = struct.id.clock;\n        let len = struct.length;\n        if (i + 1 < structs.length) {\n          for (let next = structs[i + 1]; i + 1 < structs.length && next.deleted; next = structs[++i + 1]) {\n            len += next.length;\n          }\n        }\n        dsitems.push(new DeleteItem(clock, len));\n      }\n    }\n    if (dsitems.length > 0) {\n      ds.clients.set(client, dsitems);\n    }\n  });\n  return ds\n};\n\n/**\n * @param {DSEncoderV1 | DSEncoderV2} encoder\n * @param {DeleteSet} ds\n *\n * @private\n * @function\n */\nconst writeDeleteSet = (encoder, ds) => {\n  encoding.writeVarUint(encoder.restEncoder, ds.clients.size);\n\n  // Ensure that the delete set is written in a deterministic order\n  array.from(ds.clients.entries())\n    .sort((a, b) => b[0] - a[0])\n    .forEach(([client, dsitems]) => {\n      encoder.resetDsCurVal();\n      encoding.writeVarUint(encoder.restEncoder, client);\n      const len = dsitems.length;\n      encoding.writeVarUint(encoder.restEncoder, len);\n      for (let i = 0; i < len; i++) {\n        const item = dsitems[i];\n        encoder.writeDsClock(item.clock);\n        encoder.writeDsLen(item.len);\n      }\n    });\n};\n\n/**\n * @param {DSDecoderV1 | DSDecoderV2} decoder\n * @return {DeleteSet}\n *\n * @private\n * @function\n */\nconst readDeleteSet = decoder => {\n  const ds = new DeleteSet();\n  const numClients = decoding.readVarUint(decoder.restDecoder);\n  for (let i = 0; i < numClients; i++) {\n    decoder.resetDsCurVal();\n    const client = decoding.readVarUint(decoder.restDecoder);\n    const numberOfDeletes = decoding.readVarUint(decoder.restDecoder);\n    if (numberOfDeletes > 0) {\n      const dsField = map.setIfUndefined(ds.clients, client, () => /** @type {Array<DeleteItem>} */ ([]));\n      for (let i = 0; i < numberOfDeletes; i++) {\n        dsField.push(new DeleteItem(decoder.readDsClock(), decoder.readDsLen()));\n      }\n    }\n  }\n  return ds\n};\n\n/**\n * @todo YDecoder also contains references to String and other Decoders. Would make sense to exchange YDecoder.toUint8Array for YDecoder.DsToUint8Array()..\n */\n\n/**\n * @param {DSDecoderV1 | DSDecoderV2} decoder\n * @param {Transaction} transaction\n * @param {StructStore} store\n * @return {Uint8Array|null} Returns a v2 update containing all deletes that couldn't be applied yet; or null if all deletes were applied successfully.\n *\n * @private\n * @function\n */\nconst readAndApplyDeleteSet = (decoder, transaction, store) => {\n  const unappliedDS = new DeleteSet();\n  const numClients = decoding.readVarUint(decoder.restDecoder);\n  for (let i = 0; i < numClients; i++) {\n    decoder.resetDsCurVal();\n    const client = decoding.readVarUint(decoder.restDecoder);\n    const numberOfDeletes = decoding.readVarUint(decoder.restDecoder);\n    const structs = store.clients.get(client) || [];\n    const state = getState(store, client);\n    for (let i = 0; i < numberOfDeletes; i++) {\n      const clock = decoder.readDsClock();\n      const clockEnd = clock + decoder.readDsLen();\n      if (clock < state) {\n        if (state < clockEnd) {\n          addToDeleteSet(unappliedDS, client, state, clockEnd - state);\n        }\n        let index = findIndexSS(structs, clock);\n        /**\n         * We can ignore the case of GC and Delete structs, because we are going to skip them\n         * @type {Item}\n         */\n        // @ts-ignore\n        let struct = structs[index];\n        // split the first item if necessary\n        if (!struct.deleted && struct.id.clock < clock) {\n          structs.splice(index + 1, 0, splitItem(transaction, struct, clock - struct.id.clock));\n          index++; // increase we now want to use the next struct\n        }\n        while (index < structs.length) {\n          // @ts-ignore\n          struct = structs[index++];\n          if (struct.id.clock < clockEnd) {\n            if (!struct.deleted) {\n              if (clockEnd < struct.id.clock + struct.length) {\n                structs.splice(index, 0, splitItem(transaction, struct, clockEnd - struct.id.clock));\n              }\n              struct.delete(transaction);\n            }\n          } else {\n            break\n          }\n        }\n      } else {\n        addToDeleteSet(unappliedDS, client, clock, clockEnd - clock);\n      }\n    }\n  }\n  if (unappliedDS.clients.size > 0) {\n    const ds = new UpdateEncoderV2();\n    encoding.writeVarUint(ds.restEncoder, 0); // encode 0 structs\n    writeDeleteSet(ds, unappliedDS);\n    return ds.toUint8Array()\n  }\n  return null\n};\n\n/**\n * @param {DeleteSet} ds1\n * @param {DeleteSet} ds2\n */\nconst equalDeleteSets = (ds1, ds2) => {\n  if (ds1.clients.size !== ds2.clients.size) return false\n  for (const [client, deleteItems1] of ds1.clients.entries()) {\n    const deleteItems2 = /** @type {Array<import('../internals.js').DeleteItem>} */ (ds2.clients.get(client));\n    if (deleteItems2 === undefined || deleteItems1.length !== deleteItems2.length) return false\n    for (let i = 0; i < deleteItems1.length; i++) {\n      const di1 = deleteItems1[i];\n      const di2 = deleteItems2[i];\n      if (di1.clock !== di2.clock || di1.len !== di2.len) {\n        return false\n      }\n    }\n  }\n  return true\n};\n\n/**\n * @module Y\n */\n\n\nconst generateNewClientId = random.uint32;\n\n/**\n * @typedef {Object} DocOpts\n * @property {boolean} [DocOpts.gc=true] Disable garbage collection (default: gc=true)\n * @property {function(Item):boolean} [DocOpts.gcFilter] Will be called before an Item is garbage collected. Return false to keep the Item.\n * @property {string} [DocOpts.guid] Define a globally unique identifier for this document\n * @property {string | null} [DocOpts.collectionid] Associate this document with a collection. This only plays a role if your provider has a concept of collection.\n * @property {any} [DocOpts.meta] Any kind of meta information you want to associate with this document. If this is a subdocument, remote peers will store the meta information as well.\n * @property {boolean} [DocOpts.autoLoad] If a subdocument, automatically load document. If this is a subdocument, remote peers will load the document as well automatically.\n * @property {boolean} [DocOpts.shouldLoad] Whether the document should be synced by the provider now. This is toggled to true when you call ydoc.load()\n */\n\n/**\n * @typedef {Object} DocEvents\n * @property {function(Doc):void} DocEvents.destroy\n * @property {function(Doc):void} DocEvents.load\n * @property {function(boolean, Doc):void} DocEvents.sync\n * @property {function(Uint8Array, any, Doc, Transaction):void} DocEvents.update\n * @property {function(Uint8Array, any, Doc, Transaction):void} DocEvents.updateV2\n * @property {function(Doc):void} DocEvents.beforeAllTransactions\n * @property {function(Transaction, Doc):void} DocEvents.beforeTransaction\n * @property {function(Transaction, Doc):void} DocEvents.beforeObserverCalls\n * @property {function(Transaction, Doc):void} DocEvents.afterTransaction\n * @property {function(Transaction, Doc):void} DocEvents.afterTransactionCleanup\n * @property {function(Doc, Array<Transaction>):void} DocEvents.afterAllTransactions\n * @property {function({ loaded: Set<Doc>, added: Set<Doc>, removed: Set<Doc> }, Doc, Transaction):void} DocEvents.subdocs\n */\n\n/**\n * A Yjs instance handles the state of shared data.\n * @extends ObservableV2<DocEvents>\n */\nclass Doc extends ObservableV2 {\n  /**\n   * @param {DocOpts} opts configuration\n   */\n  constructor ({ guid = random.uuidv4(), collectionid = null, gc = true, gcFilter = () => true, meta = null, autoLoad = false, shouldLoad = true } = {}) {\n    super();\n    this.gc = gc;\n    this.gcFilter = gcFilter;\n    this.clientID = generateNewClientId();\n    this.guid = guid;\n    this.collectionid = collectionid;\n    /**\n     * @type {Map<string, AbstractType<YEvent<any>>>}\n     */\n    this.share = new Map();\n    this.store = new StructStore();\n    /**\n     * @type {Transaction | null}\n     */\n    this._transaction = null;\n    /**\n     * @type {Array<Transaction>}\n     */\n    this._transactionCleanups = [];\n    /**\n     * @type {Set<Doc>}\n     */\n    this.subdocs = new Set();\n    /**\n     * If this document is a subdocument - a document integrated into another document - then _item is defined.\n     * @type {Item?}\n     */\n    this._item = null;\n    this.shouldLoad = shouldLoad;\n    this.autoLoad = autoLoad;\n    this.meta = meta;\n    /**\n     * This is set to true when the persistence provider loaded the document from the database or when the `sync` event fires.\n     * Note that not all providers implement this feature. Provider authors are encouraged to fire the `load` event when the doc content is loaded from the database.\n     *\n     * @type {boolean}\n     */\n    this.isLoaded = false;\n    /**\n     * This is set to true when the connection provider has successfully synced with a backend.\n     * Note that when using peer-to-peer providers this event may not provide very useful.\n     * Also note that not all providers implement this feature. Provider authors are encouraged to fire\n     * the `sync` event when the doc has been synced (with `true` as a parameter) or if connection is\n     * lost (with false as a parameter).\n     */\n    this.isSynced = false;\n    this.isDestroyed = false;\n    /**\n     * Promise that resolves once the document has been loaded from a persistence provider.\n     */\n    this.whenLoaded = promise.create(resolve => {\n      this.on('load', () => {\n        this.isLoaded = true;\n        resolve(this);\n      });\n    });\n    const provideSyncedPromise = () => promise.create(resolve => {\n      /**\n       * @param {boolean} isSynced\n       */\n      const eventHandler = (isSynced) => {\n        if (isSynced === undefined || isSynced === true) {\n          this.off('sync', eventHandler);\n          resolve();\n        }\n      };\n      this.on('sync', eventHandler);\n    });\n    this.on('sync', isSynced => {\n      if (isSynced === false && this.isSynced) {\n        this.whenSynced = provideSyncedPromise();\n      }\n      this.isSynced = isSynced === undefined || isSynced === true;\n      if (this.isSynced && !this.isLoaded) {\n        this.emit('load', [this]);\n      }\n    });\n    /**\n     * Promise that resolves once the document has been synced with a backend.\n     * This promise is recreated when the connection is lost.\n     * Note the documentation about the `isSynced` property.\n     */\n    this.whenSynced = provideSyncedPromise();\n  }\n\n  /**\n   * Notify the parent document that you request to load data into this subdocument (if it is a subdocument).\n   *\n   * `load()` might be used in the future to request any provider to load the most current data.\n   *\n   * It is safe to call `load()` multiple times.\n   */\n  load () {\n    const item = this._item;\n    if (item !== null && !this.shouldLoad) {\n      transact(/** @type {any} */ (item.parent).doc, transaction => {\n        transaction.subdocsLoaded.add(this);\n      }, null, true);\n    }\n    this.shouldLoad = true;\n  }\n\n  getSubdocs () {\n    return this.subdocs\n  }\n\n  getSubdocGuids () {\n    return new Set(array.from(this.subdocs).map(doc => doc.guid))\n  }\n\n  /**\n   * Changes that happen inside of a transaction are bundled. This means that\n   * the observer fires _after_ the transaction is finished and that all changes\n   * that happened inside of the transaction are sent as one message to the\n   * other peers.\n   *\n   * @template T\n   * @param {function(Transaction):T} f The function that should be executed as a transaction\n   * @param {any} [origin] Origin of who started the transaction. Will be stored on transaction.origin\n   * @return T\n   *\n   * @public\n   */\n  transact (f, origin = null) {\n    return transact(this, f, origin)\n  }\n\n  /**\n   * Define a shared data type.\n   *\n   * Multiple calls of `ydoc.get(name, TypeConstructor)` yield the same result\n   * and do not overwrite each other. I.e.\n   * `ydoc.get(name, Y.Array) === ydoc.get(name, Y.Array)`\n   *\n   * After this method is called, the type is also available on `ydoc.share.get(name)`.\n   *\n   * *Best Practices:*\n   * Define all types right after the Y.Doc instance is created and store them in a separate object.\n   * Also use the typed methods `getText(name)`, `getArray(name)`, ..\n   *\n   * @template {typeof AbstractType<any>} Type\n   * @example\n   *   const ydoc = new Y.Doc(..)\n   *   const appState = {\n   *     document: ydoc.getText('document')\n   *     comments: ydoc.getArray('comments')\n   *   }\n   *\n   * @param {string} name\n   * @param {Type} TypeConstructor The constructor of the type definition. E.g. Y.Text, Y.Array, Y.Map, ...\n   * @return {InstanceType<Type>} The created type. Constructed with TypeConstructor\n   *\n   * @public\n   */\n  get (name, TypeConstructor = /** @type {any} */ (AbstractType)) {\n    const type = map.setIfUndefined(this.share, name, () => {\n      // @ts-ignore\n      const t = new TypeConstructor();\n      t._integrate(this, null);\n      return t\n    });\n    const Constr = type.constructor;\n    if (TypeConstructor !== AbstractType && Constr !== TypeConstructor) {\n      if (Constr === AbstractType) {\n        // @ts-ignore\n        const t = new TypeConstructor();\n        t._map = type._map;\n        type._map.forEach(/** @param {Item?} n */ n => {\n          for (; n !== null; n = n.left) {\n            // @ts-ignore\n            n.parent = t;\n          }\n        });\n        t._start = type._start;\n        for (let n = t._start; n !== null; n = n.right) {\n          n.parent = t;\n        }\n        t._length = type._length;\n        this.share.set(name, t);\n        t._integrate(this, null);\n        return /** @type {InstanceType<Type>} */ (t)\n      } else {\n        throw new Error(`Type with the name ${name} has already been defined with a different constructor`)\n      }\n    }\n    return /** @type {InstanceType<Type>} */ (type)\n  }\n\n  /**\n   * @template T\n   * @param {string} [name]\n   * @return {YArray<T>}\n   *\n   * @public\n   */\n  getArray (name = '') {\n    return /** @type {YArray<T>} */ (this.get(name, YArray))\n  }\n\n  /**\n   * @param {string} [name]\n   * @return {YText}\n   *\n   * @public\n   */\n  getText (name = '') {\n    return this.get(name, YText)\n  }\n\n  /**\n   * @template T\n   * @param {string} [name]\n   * @return {YMap<T>}\n   *\n   * @public\n   */\n  getMap (name = '') {\n    return /** @type {YMap<T>} */ (this.get(name, YMap))\n  }\n\n  /**\n   * @param {string} [name]\n   * @return {YXmlElement}\n   *\n   * @public\n   */\n  getXmlElement (name = '') {\n    return /** @type {YXmlElement<{[key:string]:string}>} */ (this.get(name, YXmlElement))\n  }\n\n  /**\n   * @param {string} [name]\n   * @return {YXmlFragment}\n   *\n   * @public\n   */\n  getXmlFragment (name = '') {\n    return this.get(name, YXmlFragment)\n  }\n\n  /**\n   * Converts the entire document into a js object, recursively traversing each yjs type\n   * Doesn't log types that have not been defined (using ydoc.getType(..)).\n   *\n   * @deprecated Do not use this method and rather call toJSON directly on the shared types.\n   *\n   * @return {Object<string, any>}\n   */\n  toJSON () {\n    /**\n     * @type {Object<string, any>}\n     */\n    const doc = {};\n\n    this.share.forEach((value, key) => {\n      doc[key] = value.toJSON();\n    });\n\n    return doc\n  }\n\n  /**\n   * Emit `destroy` event and unregister all event handlers.\n   */\n  destroy () {\n    this.isDestroyed = true;\n    array.from(this.subdocs).forEach(subdoc => subdoc.destroy());\n    const item = this._item;\n    if (item !== null) {\n      this._item = null;\n      const content = /** @type {ContentDoc} */ (item.content);\n      content.doc = new Doc({ guid: this.guid, ...content.opts, shouldLoad: false });\n      content.doc._item = item;\n      transact(/** @type {any} */ (item).parent.doc, transaction => {\n        const doc = content.doc;\n        if (!item.deleted) {\n          transaction.subdocsAdded.add(doc);\n        }\n        transaction.subdocsRemoved.add(this);\n      }, null, true);\n    }\n    // @ts-ignore\n    this.emit('destroyed', [true]); // DEPRECATED!\n    this.emit('destroy', [this]);\n    super.destroy();\n  }\n}\n\nclass DSDecoderV1 {\n  /**\n   * @param {decoding.Decoder} decoder\n   */\n  constructor (decoder) {\n    this.restDecoder = decoder;\n  }\n\n  resetDsCurVal () {\n    // nop\n  }\n\n  /**\n   * @return {number}\n   */\n  readDsClock () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n\n  /**\n   * @return {number}\n   */\n  readDsLen () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n}\n\nclass UpdateDecoderV1 extends DSDecoderV1 {\n  /**\n   * @return {ID}\n   */\n  readLeftID () {\n    return createID(decoding.readVarUint(this.restDecoder), decoding.readVarUint(this.restDecoder))\n  }\n\n  /**\n   * @return {ID}\n   */\n  readRightID () {\n    return createID(decoding.readVarUint(this.restDecoder), decoding.readVarUint(this.restDecoder))\n  }\n\n  /**\n   * Read the next client id.\n   * Use this in favor of readID whenever possible to reduce the number of objects created.\n   */\n  readClient () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n\n  /**\n   * @return {number} info An unsigned 8-bit integer\n   */\n  readInfo () {\n    return decoding.readUint8(this.restDecoder)\n  }\n\n  /**\n   * @return {string}\n   */\n  readString () {\n    return decoding.readVarString(this.restDecoder)\n  }\n\n  /**\n   * @return {boolean} isKey\n   */\n  readParentInfo () {\n    return decoding.readVarUint(this.restDecoder) === 1\n  }\n\n  /**\n   * @return {number} info An unsigned 8-bit integer\n   */\n  readTypeRef () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n\n  /**\n   * Write len of a struct - well suited for Opt RLE encoder.\n   *\n   * @return {number} len\n   */\n  readLen () {\n    return decoding.readVarUint(this.restDecoder)\n  }\n\n  /**\n   * @return {any}\n   */\n  readAny () {\n    return decoding.readAny(this.restDecoder)\n  }\n\n  /**\n   * @return {Uint8Array}\n   */\n  readBuf () {\n    return buffer.copyUint8Array(decoding.readVarUint8Array(this.restDecoder))\n  }\n\n  /**\n   * Legacy implementation uses JSON parse. We use any-decoding in v2.\n   *\n   * @return {any}\n   */\n  readJSON () {\n    return JSON.parse(decoding.readVarString(this.restDecoder))\n  }\n\n  /**\n   * @return {string}\n   */\n  readKey () {\n    return decoding.readVarString(this.restDecoder)\n  }\n}\n\nclass DSDecoderV2 {\n  /**\n   * @param {decoding.Decoder} decoder\n   */\n  constructor (decoder) {\n    /**\n     * @private\n     */\n    this.dsCurrVal = 0;\n    this.restDecoder = decoder;\n  }\n\n  resetDsCurVal () {\n    this.dsCurrVal = 0;\n  }\n\n  /**\n   * @return {number}\n   */\n  readDsClock () {\n    this.dsCurrVal += decoding.readVarUint(this.restDecoder);\n    return this.dsCurrVal\n  }\n\n  /**\n   * @return {number}\n   */\n  readDsLen () {\n    const diff = decoding.readVarUint(this.restDecoder) + 1;\n    this.dsCurrVal += diff;\n    return diff\n  }\n}\n\nclass UpdateDecoderV2 extends DSDecoderV2 {\n  /**\n   * @param {decoding.Decoder} decoder\n   */\n  constructor (decoder) {\n    super(decoder);\n    /**\n     * List of cached keys. If the keys[id] does not exist, we read a new key\n     * from stringEncoder and push it to keys.\n     *\n     * @type {Array<string>}\n     */\n    this.keys = [];\n    decoding.readVarUint(decoder); // read feature flag - currently unused\n    this.keyClockDecoder = new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(decoder));\n    this.clientDecoder = new decoding.UintOptRleDecoder(decoding.readVarUint8Array(decoder));\n    this.leftClockDecoder = new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(decoder));\n    this.rightClockDecoder = new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(decoder));\n    this.infoDecoder = new decoding.RleDecoder(decoding.readVarUint8Array(decoder), decoding.readUint8);\n    this.stringDecoder = new decoding.StringDecoder(decoding.readVarUint8Array(decoder));\n    this.parentInfoDecoder = new decoding.RleDecoder(decoding.readVarUint8Array(decoder), decoding.readUint8);\n    this.typeRefDecoder = new decoding.UintOptRleDecoder(decoding.readVarUint8Array(decoder));\n    this.lenDecoder = new decoding.UintOptRleDecoder(decoding.readVarUint8Array(decoder));\n  }\n\n  /**\n   * @return {ID}\n   */\n  readLeftID () {\n    return new ID(this.clientDecoder.read(), this.leftClockDecoder.read())\n  }\n\n  /**\n   * @return {ID}\n   */\n  readRightID () {\n    return new ID(this.clientDecoder.read(), this.rightClockDecoder.read())\n  }\n\n  /**\n   * Read the next client id.\n   * Use this in favor of readID whenever possible to reduce the number of objects created.\n   */\n  readClient () {\n    return this.clientDecoder.read()\n  }\n\n  /**\n   * @return {number} info An unsigned 8-bit integer\n   */\n  readInfo () {\n    return /** @type {number} */ (this.infoDecoder.read())\n  }\n\n  /**\n   * @return {string}\n   */\n  readString () {\n    return this.stringDecoder.read()\n  }\n\n  /**\n   * @return {boolean}\n   */\n  readParentInfo () {\n    return this.parentInfoDecoder.read() === 1\n  }\n\n  /**\n   * @return {number} An unsigned 8-bit integer\n   */\n  readTypeRef () {\n    return this.typeRefDecoder.read()\n  }\n\n  /**\n   * Write len of a struct - well suited for Opt RLE encoder.\n   *\n   * @return {number}\n   */\n  readLen () {\n    return this.lenDecoder.read()\n  }\n\n  /**\n   * @return {any}\n   */\n  readAny () {\n    return decoding.readAny(this.restDecoder)\n  }\n\n  /**\n   * @return {Uint8Array}\n   */\n  readBuf () {\n    return decoding.readVarUint8Array(this.restDecoder)\n  }\n\n  /**\n   * This is mainly here for legacy purposes.\n   *\n   * Initial we incoded objects using JSON. Now we use the much faster lib0/any-encoder. This method mainly exists for legacy purposes for the v1 encoder.\n   *\n   * @return {any}\n   */\n  readJSON () {\n    return decoding.readAny(this.restDecoder)\n  }\n\n  /**\n   * @return {string}\n   */\n  readKey () {\n    const keyClock = this.keyClockDecoder.read();\n    if (keyClock < this.keys.length) {\n      return this.keys[keyClock]\n    } else {\n      const key = this.stringDecoder.read();\n      this.keys.push(key);\n      return key\n    }\n  }\n}\n\nclass DSEncoderV1 {\n  constructor () {\n    this.restEncoder = encoding.createEncoder();\n  }\n\n  toUint8Array () {\n    return encoding.toUint8Array(this.restEncoder)\n  }\n\n  resetDsCurVal () {\n    // nop\n  }\n\n  /**\n   * @param {number} clock\n   */\n  writeDsClock (clock) {\n    encoding.writeVarUint(this.restEncoder, clock);\n  }\n\n  /**\n   * @param {number} len\n   */\n  writeDsLen (len) {\n    encoding.writeVarUint(this.restEncoder, len);\n  }\n}\n\nclass UpdateEncoderV1 extends DSEncoderV1 {\n  /**\n   * @param {ID} id\n   */\n  writeLeftID (id) {\n    encoding.writeVarUint(this.restEncoder, id.client);\n    encoding.writeVarUint(this.restEncoder, id.clock);\n  }\n\n  /**\n   * @param {ID} id\n   */\n  writeRightID (id) {\n    encoding.writeVarUint(this.restEncoder, id.client);\n    encoding.writeVarUint(this.restEncoder, id.clock);\n  }\n\n  /**\n   * Use writeClient and writeClock instead of writeID if possible.\n   * @param {number} client\n   */\n  writeClient (client) {\n    encoding.writeVarUint(this.restEncoder, client);\n  }\n\n  /**\n   * @param {number} info An unsigned 8-bit integer\n   */\n  writeInfo (info) {\n    encoding.writeUint8(this.restEncoder, info);\n  }\n\n  /**\n   * @param {string} s\n   */\n  writeString (s) {\n    encoding.writeVarString(this.restEncoder, s);\n  }\n\n  /**\n   * @param {boolean} isYKey\n   */\n  writeParentInfo (isYKey) {\n    encoding.writeVarUint(this.restEncoder, isYKey ? 1 : 0);\n  }\n\n  /**\n   * @param {number} info An unsigned 8-bit integer\n   */\n  writeTypeRef (info) {\n    encoding.writeVarUint(this.restEncoder, info);\n  }\n\n  /**\n   * Write len of a struct - well suited for Opt RLE encoder.\n   *\n   * @param {number} len\n   */\n  writeLen (len) {\n    encoding.writeVarUint(this.restEncoder, len);\n  }\n\n  /**\n   * @param {any} any\n   */\n  writeAny (any) {\n    encoding.writeAny(this.restEncoder, any);\n  }\n\n  /**\n   * @param {Uint8Array} buf\n   */\n  writeBuf (buf) {\n    encoding.writeVarUint8Array(this.restEncoder, buf);\n  }\n\n  /**\n   * @param {any} embed\n   */\n  writeJSON (embed) {\n    encoding.writeVarString(this.restEncoder, JSON.stringify(embed));\n  }\n\n  /**\n   * @param {string} key\n   */\n  writeKey (key) {\n    encoding.writeVarString(this.restEncoder, key);\n  }\n}\n\nclass DSEncoderV2 {\n  constructor () {\n    this.restEncoder = encoding.createEncoder(); // encodes all the rest / non-optimized\n    this.dsCurrVal = 0;\n  }\n\n  toUint8Array () {\n    return encoding.toUint8Array(this.restEncoder)\n  }\n\n  resetDsCurVal () {\n    this.dsCurrVal = 0;\n  }\n\n  /**\n   * @param {number} clock\n   */\n  writeDsClock (clock) {\n    const diff = clock - this.dsCurrVal;\n    this.dsCurrVal = clock;\n    encoding.writeVarUint(this.restEncoder, diff);\n  }\n\n  /**\n   * @param {number} len\n   */\n  writeDsLen (len) {\n    if (len === 0) {\n      error.unexpectedCase();\n    }\n    encoding.writeVarUint(this.restEncoder, len - 1);\n    this.dsCurrVal += len;\n  }\n}\n\nclass UpdateEncoderV2 extends DSEncoderV2 {\n  constructor () {\n    super();\n    /**\n     * @type {Map<string,number>}\n     */\n    this.keyMap = new Map();\n    /**\n     * Refers to the next unique key-identifier to me used.\n     * See writeKey method for more information.\n     *\n     * @type {number}\n     */\n    this.keyClock = 0;\n    this.keyClockEncoder = new encoding.IntDiffOptRleEncoder();\n    this.clientEncoder = new encoding.UintOptRleEncoder();\n    this.leftClockEncoder = new encoding.IntDiffOptRleEncoder();\n    this.rightClockEncoder = new encoding.IntDiffOptRleEncoder();\n    this.infoEncoder = new encoding.RleEncoder(encoding.writeUint8);\n    this.stringEncoder = new encoding.StringEncoder();\n    this.parentInfoEncoder = new encoding.RleEncoder(encoding.writeUint8);\n    this.typeRefEncoder = new encoding.UintOptRleEncoder();\n    this.lenEncoder = new encoding.UintOptRleEncoder();\n  }\n\n  toUint8Array () {\n    const encoder = encoding.createEncoder();\n    encoding.writeVarUint(encoder, 0); // this is a feature flag that we might use in the future\n    encoding.writeVarUint8Array(encoder, this.keyClockEncoder.toUint8Array());\n    encoding.writeVarUint8Array(encoder, this.clientEncoder.toUint8Array());\n    encoding.writeVarUint8Array(encoder, this.leftClockEncoder.toUint8Array());\n    encoding.writeVarUint8Array(encoder, this.rightClockEncoder.toUint8Array());\n    encoding.writeVarUint8Array(encoder, encoding.toUint8Array(this.infoEncoder));\n    encoding.writeVarUint8Array(encoder, this.stringEncoder.toUint8Array());\n    encoding.writeVarUint8Array(encoder, encoding.toUint8Array(this.parentInfoEncoder));\n    encoding.writeVarUint8Array(encoder, this.typeRefEncoder.toUint8Array());\n    encoding.writeVarUint8Array(encoder, this.lenEncoder.toUint8Array());\n    // @note The rest encoder is appended! (note the missing var)\n    encoding.writeUint8Array(encoder, encoding.toUint8Array(this.restEncoder));\n    return encoding.toUint8Array(encoder)\n  }\n\n  /**\n   * @param {ID} id\n   */\n  writeLeftID (id) {\n    this.clientEncoder.write(id.client);\n    this.leftClockEncoder.write(id.clock);\n  }\n\n  /**\n   * @param {ID} id\n   */\n  writeRightID (id) {\n    this.clientEncoder.write(id.client);\n    this.rightClockEncoder.write(id.clock);\n  }\n\n  /**\n   * @param {number} client\n   */\n  writeClient (client) {\n    this.clientEncoder.write(client);\n  }\n\n  /**\n   * @param {number} info An unsigned 8-bit integer\n   */\n  writeInfo (info) {\n    this.infoEncoder.write(info);\n  }\n\n  /**\n   * @param {string} s\n   */\n  writeString (s) {\n    this.stringEncoder.write(s);\n  }\n\n  /**\n   * @param {boolean} isYKey\n   */\n  writeParentInfo (isYKey) {\n    this.parentInfoEncoder.write(isYKey ? 1 : 0);\n  }\n\n  /**\n   * @param {number} info An unsigned 8-bit integer\n   */\n  writeTypeRef (info) {\n    this.typeRefEncoder.write(info);\n  }\n\n  /**\n   * Write len of a struct - well suited for Opt RLE encoder.\n   *\n   * @param {number} len\n   */\n  writeLen (len) {\n    this.lenEncoder.write(len);\n  }\n\n  /**\n   * @param {any} any\n   */\n  writeAny (any) {\n    encoding.writeAny(this.restEncoder, any);\n  }\n\n  /**\n   * @param {Uint8Array} buf\n   */\n  writeBuf (buf) {\n    encoding.writeVarUint8Array(this.restEncoder, buf);\n  }\n\n  /**\n   * This is mainly here for legacy purposes.\n   *\n   * Initial we incoded objects using JSON. Now we use the much faster lib0/any-encoder. This method mainly exists for legacy purposes for the v1 encoder.\n   *\n   * @param {any} embed\n   */\n  writeJSON (embed) {\n    encoding.writeAny(this.restEncoder, embed);\n  }\n\n  /**\n   * Property keys are often reused. For example, in y-prosemirror the key `bold` might\n   * occur very often. For a 3d application, the key `position` might occur very often.\n   *\n   * We cache these keys in a Map and refer to them via a unique number.\n   *\n   * @param {string} key\n   */\n  writeKey (key) {\n    const clock = this.keyMap.get(key);\n    if (clock === undefined) {\n      /**\n       * @todo uncomment to introduce this feature finally\n       *\n       * Background. The ContentFormat object was always encoded using writeKey, but the decoder used to use readString.\n       * Furthermore, I forgot to set the keyclock. So everything was working fine.\n       *\n       * However, this feature here is basically useless as it is not being used (it actually only consumes extra memory).\n       *\n       * I don't know yet how to reintroduce this feature..\n       *\n       * Older clients won't be able to read updates when we reintroduce this feature. So this should probably be done using a flag.\n       *\n       */\n      // this.keyMap.set(key, this.keyClock)\n      this.keyClockEncoder.write(this.keyClock++);\n      this.stringEncoder.write(key);\n    } else {\n      this.keyClockEncoder.write(clock);\n    }\n  }\n}\n\n/**\n * @module encoding\n */\n/*\n * We use the first five bits in the info flag for determining the type of the struct.\n *\n * 0: GC\n * 1: Item with Deleted content\n * 2: Item with JSON content\n * 3: Item with Binary content\n * 4: Item with String content\n * 5: Item with Embed content (for richtext content)\n * 6: Item with Format content (a formatting marker for richtext content)\n * 7: Item with Type\n */\n\n\n/**\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {Array<GC|Item>} structs All structs by `client`\n * @param {number} client\n * @param {number} clock write structs starting with `ID(client,clock)`\n *\n * @function\n */\nconst writeStructs = (encoder, structs, client, clock) => {\n  // write first id\n  clock = math.max(clock, structs[0].id.clock); // make sure the first id exists\n  const startNewStructs = findIndexSS(structs, clock);\n  // write # encoded structs\n  encoding.writeVarUint(encoder.restEncoder, structs.length - startNewStructs);\n  encoder.writeClient(client);\n  encoding.writeVarUint(encoder.restEncoder, clock);\n  const firstStruct = structs[startNewStructs];\n  // write first struct with an offset\n  firstStruct.write(encoder, clock - firstStruct.id.clock);\n  for (let i = startNewStructs + 1; i < structs.length; i++) {\n    structs[i].write(encoder, 0);\n  }\n};\n\n/**\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {StructStore} store\n * @param {Map<number,number>} _sm\n *\n * @private\n * @function\n */\nconst writeClientsStructs = (encoder, store, _sm) => {\n  // we filter all valid _sm entries into sm\n  const sm = new Map();\n  _sm.forEach((clock, client) => {\n    // only write if new structs are available\n    if (getState(store, client) > clock) {\n      sm.set(client, clock);\n    }\n  });\n  getStateVector(store).forEach((_clock, client) => {\n    if (!_sm.has(client)) {\n      sm.set(client, 0);\n    }\n  });\n  // write # states that were updated\n  encoding.writeVarUint(encoder.restEncoder, sm.size);\n  // Write items with higher client ids first\n  // This heavily improves the conflict algorithm.\n  array.from(sm.entries()).sort((a, b) => b[0] - a[0]).forEach(([client, clock]) => {\n    writeStructs(encoder, /** @type {Array<GC|Item>} */ (store.clients.get(client)), client, clock);\n  });\n};\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder The decoder object to read data from.\n * @param {Doc} doc\n * @return {Map<number, { i: number, refs: Array<Item | GC> }>}\n *\n * @private\n * @function\n */\nconst readClientsStructRefs = (decoder, doc) => {\n  /**\n   * @type {Map<number, { i: number, refs: Array<Item | GC> }>}\n   */\n  const clientRefs = map.create();\n  const numOfStateUpdates = decoding.readVarUint(decoder.restDecoder);\n  for (let i = 0; i < numOfStateUpdates; i++) {\n    const numberOfStructs = decoding.readVarUint(decoder.restDecoder);\n    /**\n     * @type {Array<GC|Item>}\n     */\n    const refs = new Array(numberOfStructs);\n    const client = decoder.readClient();\n    let clock = decoding.readVarUint(decoder.restDecoder);\n    // const start = performance.now()\n    clientRefs.set(client, { i: 0, refs });\n    for (let i = 0; i < numberOfStructs; i++) {\n      const info = decoder.readInfo();\n      switch (binary.BITS5 & info) {\n        case 0: { // GC\n          const len = decoder.readLen();\n          refs[i] = new GC(createID(client, clock), len);\n          clock += len;\n          break\n        }\n        case 10: { // Skip Struct (nothing to apply)\n          // @todo we could reduce the amount of checks by adding Skip struct to clientRefs so we know that something is missing.\n          const len = decoding.readVarUint(decoder.restDecoder);\n          refs[i] = new Skip(createID(client, clock), len);\n          clock += len;\n          break\n        }\n        default: { // Item with content\n          /**\n           * The optimized implementation doesn't use any variables because inlining variables is faster.\n           * Below a non-optimized version is shown that implements the basic algorithm with\n           * a few comments\n           */\n          const cantCopyParentInfo = (info & (binary.BIT7 | binary.BIT8)) === 0;\n          // If parent = null and neither left nor right are defined, then we know that `parent` is child of `y`\n          // and we read the next string as parentYKey.\n          // It indicates how we store/retrieve parent from `y.share`\n          // @type {string|null}\n          const struct = new Item(\n            createID(client, clock),\n            null, // left\n            (info & binary.BIT8) === binary.BIT8 ? decoder.readLeftID() : null, // origin\n            null, // right\n            (info & binary.BIT7) === binary.BIT7 ? decoder.readRightID() : null, // right origin\n            cantCopyParentInfo ? (decoder.readParentInfo() ? doc.get(decoder.readString()) : decoder.readLeftID()) : null, // parent\n            cantCopyParentInfo && (info & binary.BIT6) === binary.BIT6 ? decoder.readString() : null, // parentSub\n            readItemContent(decoder, info) // item content\n          );\n          /* A non-optimized implementation of the above algorithm:\n\n          // The item that was originally to the left of this item.\n          const origin = (info & binary.BIT8) === binary.BIT8 ? decoder.readLeftID() : null\n          // The item that was originally to the right of this item.\n          const rightOrigin = (info & binary.BIT7) === binary.BIT7 ? decoder.readRightID() : null\n          const cantCopyParentInfo = (info & (binary.BIT7 | binary.BIT8)) === 0\n          const hasParentYKey = cantCopyParentInfo ? decoder.readParentInfo() : false\n          // If parent = null and neither left nor right are defined, then we know that `parent` is child of `y`\n          // and we read the next string as parentYKey.\n          // It indicates how we store/retrieve parent from `y.share`\n          // @type {string|null}\n          const parentYKey = cantCopyParentInfo && hasParentYKey ? decoder.readString() : null\n\n          const struct = new Item(\n            createID(client, clock),\n            null, // left\n            origin, // origin\n            null, // right\n            rightOrigin, // right origin\n            cantCopyParentInfo && !hasParentYKey ? decoder.readLeftID() : (parentYKey !== null ? doc.get(parentYKey) : null), // parent\n            cantCopyParentInfo && (info & binary.BIT6) === binary.BIT6 ? decoder.readString() : null, // parentSub\n            readItemContent(decoder, info) // item content\n          )\n          */\n          refs[i] = struct;\n          clock += struct.length;\n        }\n      }\n    }\n    // console.log('time to read: ', performance.now() - start) // @todo remove\n  }\n  return clientRefs\n};\n\n/**\n * Resume computing structs generated by struct readers.\n *\n * While there is something to do, we integrate structs in this order\n * 1. top element on stack, if stack is not empty\n * 2. next element from current struct reader (if empty, use next struct reader)\n *\n * If struct causally depends on another struct (ref.missing), we put next reader of\n * `ref.id.client` on top of stack.\n *\n * At some point we find a struct that has no causal dependencies,\n * then we start emptying the stack.\n *\n * It is not possible to have circles: i.e. struct1 (from client1) depends on struct2 (from client2)\n * depends on struct3 (from client1). Therefore the max stack size is equal to `structReaders.length`.\n *\n * This method is implemented in a way so that we can resume computation if this update\n * causally depends on another update.\n *\n * @param {Transaction} transaction\n * @param {StructStore} store\n * @param {Map<number, { i: number, refs: (GC | Item)[] }>} clientsStructRefs\n * @return { null | { update: Uint8Array, missing: Map<number,number> } }\n *\n * @private\n * @function\n */\nconst integrateStructs = (transaction, store, clientsStructRefs) => {\n  /**\n   * @type {Array<Item | GC>}\n   */\n  const stack = [];\n  // sort them so that we take the higher id first, in case of conflicts the lower id will probably not conflict with the id from the higher user.\n  let clientsStructRefsIds = array.from(clientsStructRefs.keys()).sort((a, b) => a - b);\n  if (clientsStructRefsIds.length === 0) {\n    return null\n  }\n  const getNextStructTarget = () => {\n    if (clientsStructRefsIds.length === 0) {\n      return null\n    }\n    let nextStructsTarget = /** @type {{i:number,refs:Array<GC|Item>}} */ (clientsStructRefs.get(clientsStructRefsIds[clientsStructRefsIds.length - 1]));\n    while (nextStructsTarget.refs.length === nextStructsTarget.i) {\n      clientsStructRefsIds.pop();\n      if (clientsStructRefsIds.length > 0) {\n        nextStructsTarget = /** @type {{i:number,refs:Array<GC|Item>}} */ (clientsStructRefs.get(clientsStructRefsIds[clientsStructRefsIds.length - 1]));\n      } else {\n        return null\n      }\n    }\n    return nextStructsTarget\n  };\n  let curStructsTarget = getNextStructTarget();\n  if (curStructsTarget === null) {\n    return null\n  }\n\n  /**\n   * @type {StructStore}\n   */\n  const restStructs = new StructStore();\n  const missingSV = new Map();\n  /**\n   * @param {number} client\n   * @param {number} clock\n   */\n  const updateMissingSv = (client, clock) => {\n    const mclock = missingSV.get(client);\n    if (mclock == null || mclock > clock) {\n      missingSV.set(client, clock);\n    }\n  };\n  /**\n   * @type {GC|Item}\n   */\n  let stackHead = /** @type {any} */ (curStructsTarget).refs[/** @type {any} */ (curStructsTarget).i++];\n  // caching the state because it is used very often\n  const state = new Map();\n\n  const addStackToRestSS = () => {\n    for (const item of stack) {\n      const client = item.id.client;\n      const inapplicableItems = clientsStructRefs.get(client);\n      if (inapplicableItems) {\n        // decrement because we weren't able to apply previous operation\n        inapplicableItems.i--;\n        restStructs.clients.set(client, inapplicableItems.refs.slice(inapplicableItems.i));\n        clientsStructRefs.delete(client);\n        inapplicableItems.i = 0;\n        inapplicableItems.refs = [];\n      } else {\n        // item was the last item on clientsStructRefs and the field was already cleared. Add item to restStructs and continue\n        restStructs.clients.set(client, [item]);\n      }\n      // remove client from clientsStructRefsIds to prevent users from applying the same update again\n      clientsStructRefsIds = clientsStructRefsIds.filter(c => c !== client);\n    }\n    stack.length = 0;\n  };\n\n  // iterate over all struct readers until we are done\n  while (true) {\n    if (stackHead.constructor !== Skip) {\n      const localClock = map.setIfUndefined(state, stackHead.id.client, () => getState(store, stackHead.id.client));\n      const offset = localClock - stackHead.id.clock;\n      if (offset < 0) {\n        // update from the same client is missing\n        stack.push(stackHead);\n        updateMissingSv(stackHead.id.client, stackHead.id.clock - 1);\n        // hid a dead wall, add all items from stack to restSS\n        addStackToRestSS();\n      } else {\n        const missing = stackHead.getMissing(transaction, store);\n        if (missing !== null) {\n          stack.push(stackHead);\n          // get the struct reader that has the missing struct\n          /**\n           * @type {{ refs: Array<GC|Item>, i: number }}\n           */\n          const structRefs = clientsStructRefs.get(/** @type {number} */ (missing)) || { refs: [], i: 0 };\n          if (structRefs.refs.length === structRefs.i) {\n            // This update message causally depends on another update message that doesn't exist yet\n            updateMissingSv(/** @type {number} */ (missing), getState(store, missing));\n            addStackToRestSS();\n          } else {\n            stackHead = structRefs.refs[structRefs.i++];\n            continue\n          }\n        } else if (offset === 0 || offset < stackHead.length) {\n          // all fine, apply the stackhead\n          stackHead.integrate(transaction, offset);\n          state.set(stackHead.id.client, stackHead.id.clock + stackHead.length);\n        }\n      }\n    }\n    // iterate to next stackHead\n    if (stack.length > 0) {\n      stackHead = /** @type {GC|Item} */ (stack.pop());\n    } else if (curStructsTarget !== null && curStructsTarget.i < curStructsTarget.refs.length) {\n      stackHead = /** @type {GC|Item} */ (curStructsTarget.refs[curStructsTarget.i++]);\n    } else {\n      curStructsTarget = getNextStructTarget();\n      if (curStructsTarget === null) {\n        // we are done!\n        break\n      } else {\n        stackHead = /** @type {GC|Item} */ (curStructsTarget.refs[curStructsTarget.i++]);\n      }\n    }\n  }\n  if (restStructs.clients.size > 0) {\n    const encoder = new UpdateEncoderV2();\n    writeClientsStructs(encoder, restStructs, new Map());\n    // write empty deleteset\n    // writeDeleteSet(encoder, new DeleteSet())\n    encoding.writeVarUint(encoder.restEncoder, 0); // => no need for an extra function call, just write 0 deletes\n    return { missing: missingSV, update: encoder.toUint8Array() }\n  }\n  return null\n};\n\n/**\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {Transaction} transaction\n *\n * @private\n * @function\n */\nconst writeStructsFromTransaction = (encoder, transaction) => writeClientsStructs(encoder, transaction.doc.store, transaction.beforeState);\n\n/**\n * Read and apply a document update.\n *\n * This function has the same effect as `applyUpdate` but accepts a decoder.\n *\n * @param {decoding.Decoder} decoder\n * @param {Doc} ydoc\n * @param {any} [transactionOrigin] This will be stored on `transaction.origin` and `.on('update', (update, origin))`\n * @param {UpdateDecoderV1 | UpdateDecoderV2} [structDecoder]\n *\n * @function\n */\nconst readUpdateV2 = (decoder, ydoc, transactionOrigin, structDecoder = new UpdateDecoderV2(decoder)) =>\n  transact(ydoc, transaction => {\n    // force that transaction.local is set to non-local\n    transaction.local = false;\n    let retry = false;\n    const doc = transaction.doc;\n    const store = doc.store;\n    // let start = performance.now()\n    const ss = readClientsStructRefs(structDecoder, doc);\n    // console.log('time to read structs: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n    // console.log('time to merge: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n    const restStructs = integrateStructs(transaction, store, ss);\n    const pending = store.pendingStructs;\n    if (pending) {\n      // check if we can apply something\n      for (const [client, clock] of pending.missing) {\n        if (clock < getState(store, client)) {\n          retry = true;\n          break\n        }\n      }\n      if (restStructs) {\n        // merge restStructs into store.pending\n        for (const [client, clock] of restStructs.missing) {\n          const mclock = pending.missing.get(client);\n          if (mclock == null || mclock > clock) {\n            pending.missing.set(client, clock);\n          }\n        }\n        pending.update = mergeUpdatesV2([pending.update, restStructs.update]);\n      }\n    } else {\n      store.pendingStructs = restStructs;\n    }\n    // console.log('time to integrate: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n    const dsRest = readAndApplyDeleteSet(structDecoder, transaction, store);\n    if (store.pendingDs) {\n      // @todo we could make a lower-bound state-vector check as we do above\n      const pendingDSUpdate = new UpdateDecoderV2(decoding.createDecoder(store.pendingDs));\n      decoding.readVarUint(pendingDSUpdate.restDecoder); // read 0 structs, because we only encode deletes in pendingdsupdate\n      const dsRest2 = readAndApplyDeleteSet(pendingDSUpdate, transaction, store);\n      if (dsRest && dsRest2) {\n        // case 1: ds1 != null && ds2 != null\n        store.pendingDs = mergeUpdatesV2([dsRest, dsRest2]);\n      } else {\n        // case 2: ds1 != null\n        // case 3: ds2 != null\n        // case 4: ds1 == null && ds2 == null\n        store.pendingDs = dsRest || dsRest2;\n      }\n    } else {\n      // Either dsRest == null && pendingDs == null OR dsRest != null\n      store.pendingDs = dsRest;\n    }\n    // console.log('time to cleanup: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n\n    // console.log('time to resume delete readers: ', performance.now() - start) // @todo remove\n    // start = performance.now()\n    if (retry) {\n      const update = /** @type {{update: Uint8Array}} */ (store.pendingStructs).update;\n      store.pendingStructs = null;\n      applyUpdateV2(transaction.doc, update);\n    }\n  }, transactionOrigin, false);\n\n/**\n * Read and apply a document update.\n *\n * This function has the same effect as `applyUpdate` but accepts a decoder.\n *\n * @param {decoding.Decoder} decoder\n * @param {Doc} ydoc\n * @param {any} [transactionOrigin] This will be stored on `transaction.origin` and `.on('update', (update, origin))`\n *\n * @function\n */\nconst readUpdate = (decoder, ydoc, transactionOrigin) => readUpdateV2(decoder, ydoc, transactionOrigin, new UpdateDecoderV1(decoder));\n\n/**\n * Apply a document update created by, for example, `y.on('update', update => ..)` or `update = encodeStateAsUpdate()`.\n *\n * This function has the same effect as `readUpdate` but accepts an Uint8Array instead of a Decoder.\n *\n * @param {Doc} ydoc\n * @param {Uint8Array} update\n * @param {any} [transactionOrigin] This will be stored on `transaction.origin` and `.on('update', (update, origin))`\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} [YDecoder]\n *\n * @function\n */\nconst applyUpdateV2 = (ydoc, update, transactionOrigin, YDecoder = UpdateDecoderV2) => {\n  const decoder = decoding.createDecoder(update);\n  readUpdateV2(decoder, ydoc, transactionOrigin, new YDecoder(decoder));\n};\n\n/**\n * Apply a document update created by, for example, `y.on('update', update => ..)` or `update = encodeStateAsUpdate()`.\n *\n * This function has the same effect as `readUpdate` but accepts an Uint8Array instead of a Decoder.\n *\n * @param {Doc} ydoc\n * @param {Uint8Array} update\n * @param {any} [transactionOrigin] This will be stored on `transaction.origin` and `.on('update', (update, origin))`\n *\n * @function\n */\nconst applyUpdate = (ydoc, update, transactionOrigin) => applyUpdateV2(ydoc, update, transactionOrigin, UpdateDecoderV1);\n\n/**\n * Write all the document as a single update message. If you specify the state of the remote client (`targetStateVector`) it will\n * only write the operations that are missing.\n *\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {Doc} doc\n * @param {Map<number,number>} [targetStateVector] The state of the target that receives the update. Leave empty to write all known structs\n *\n * @function\n */\nconst writeStateAsUpdate = (encoder, doc, targetStateVector = new Map()) => {\n  writeClientsStructs(encoder, doc.store, targetStateVector);\n  writeDeleteSet(encoder, createDeleteSetFromStructStore(doc.store));\n};\n\n/**\n * Write all the document as a single update message that can be applied on the remote document. If you specify the state of the remote client (`targetState`) it will\n * only write the operations that are missing.\n *\n * Use `writeStateAsUpdate` instead if you are working with lib0/encoding.js#Encoder\n *\n * @param {Doc} doc\n * @param {Uint8Array} [encodedTargetStateVector] The state of the target that receives the update. Leave empty to write all known structs\n * @param {UpdateEncoderV1 | UpdateEncoderV2} [encoder]\n * @return {Uint8Array}\n *\n * @function\n */\nconst encodeStateAsUpdateV2 = (doc, encodedTargetStateVector = new Uint8Array([0]), encoder = new UpdateEncoderV2()) => {\n  const targetStateVector = decodeStateVector(encodedTargetStateVector);\n  writeStateAsUpdate(encoder, doc, targetStateVector);\n  const updates = [encoder.toUint8Array()];\n  // also add the pending updates (if there are any)\n  if (doc.store.pendingDs) {\n    updates.push(doc.store.pendingDs);\n  }\n  if (doc.store.pendingStructs) {\n    updates.push(diffUpdateV2(doc.store.pendingStructs.update, encodedTargetStateVector));\n  }\n  if (updates.length > 1) {\n    if (encoder.constructor === UpdateEncoderV1) {\n      return mergeUpdates(updates.map((update, i) => i === 0 ? update : convertUpdateFormatV2ToV1(update)))\n    } else if (encoder.constructor === UpdateEncoderV2) {\n      return mergeUpdatesV2(updates)\n    }\n  }\n  return updates[0]\n};\n\n/**\n * Write all the document as a single update message that can be applied on the remote document. If you specify the state of the remote client (`targetState`) it will\n * only write the operations that are missing.\n *\n * Use `writeStateAsUpdate` instead if you are working with lib0/encoding.js#Encoder\n *\n * @param {Doc} doc\n * @param {Uint8Array} [encodedTargetStateVector] The state of the target that receives the update. Leave empty to write all known structs\n * @return {Uint8Array}\n *\n * @function\n */\nconst encodeStateAsUpdate = (doc, encodedTargetStateVector) => encodeStateAsUpdateV2(doc, encodedTargetStateVector, new UpdateEncoderV1());\n\n/**\n * Read state vector from Decoder and return as Map\n *\n * @param {DSDecoderV1 | DSDecoderV2} decoder\n * @return {Map<number,number>} Maps `client` to the number next expected `clock` from that client.\n *\n * @function\n */\nconst readStateVector = decoder => {\n  const ss = new Map();\n  const ssLength = decoding.readVarUint(decoder.restDecoder);\n  for (let i = 0; i < ssLength; i++) {\n    const client = decoding.readVarUint(decoder.restDecoder);\n    const clock = decoding.readVarUint(decoder.restDecoder);\n    ss.set(client, clock);\n  }\n  return ss\n};\n\n/**\n * Read decodedState and return State as Map.\n *\n * @param {Uint8Array} decodedState\n * @return {Map<number,number>} Maps `client` to the number next expected `clock` from that client.\n *\n * @function\n */\n// export const decodeStateVectorV2 = decodedState => readStateVector(new DSDecoderV2(decoding.createDecoder(decodedState)))\n\n/**\n * Read decodedState and return State as Map.\n *\n * @param {Uint8Array} decodedState\n * @return {Map<number,number>} Maps `client` to the number next expected `clock` from that client.\n *\n * @function\n */\nconst decodeStateVector = decodedState => readStateVector(new DSDecoderV1(decoding.createDecoder(decodedState)));\n\n/**\n * @param {DSEncoderV1 | DSEncoderV2} encoder\n * @param {Map<number,number>} sv\n * @function\n */\nconst writeStateVector = (encoder, sv) => {\n  encoding.writeVarUint(encoder.restEncoder, sv.size);\n  array.from(sv.entries()).sort((a, b) => b[0] - a[0]).forEach(([client, clock]) => {\n    encoding.writeVarUint(encoder.restEncoder, client); // @todo use a special client decoder that is based on mapping\n    encoding.writeVarUint(encoder.restEncoder, clock);\n  });\n  return encoder\n};\n\n/**\n * @param {DSEncoderV1 | DSEncoderV2} encoder\n * @param {Doc} doc\n *\n * @function\n */\nconst writeDocumentStateVector = (encoder, doc) => writeStateVector(encoder, getStateVector(doc.store));\n\n/**\n * Encode State as Uint8Array.\n *\n * @param {Doc|Map<number,number>} doc\n * @param {DSEncoderV1 | DSEncoderV2} [encoder]\n * @return {Uint8Array}\n *\n * @function\n */\nconst encodeStateVectorV2 = (doc, encoder = new DSEncoderV2()) => {\n  if (doc instanceof Map) {\n    writeStateVector(encoder, doc);\n  } else {\n    writeDocumentStateVector(encoder, doc);\n  }\n  return encoder.toUint8Array()\n};\n\n/**\n * Encode State as Uint8Array.\n *\n * @param {Doc|Map<number,number>} doc\n * @return {Uint8Array}\n *\n * @function\n */\nconst encodeStateVector = doc => encodeStateVectorV2(doc, new DSEncoderV1());\n\n/**\n * General event handler implementation.\n *\n * @template ARG0, ARG1\n *\n * @private\n */\nclass EventHandler {\n  constructor () {\n    /**\n     * @type {Array<function(ARG0, ARG1):void>}\n     */\n    this.l = [];\n  }\n}\n\n/**\n * @template ARG0,ARG1\n * @returns {EventHandler<ARG0,ARG1>}\n *\n * @private\n * @function\n */\nconst createEventHandler = () => new EventHandler();\n\n/**\n * Adds an event listener that is called when\n * {@link EventHandler#callEventListeners} is called.\n *\n * @template ARG0,ARG1\n * @param {EventHandler<ARG0,ARG1>} eventHandler\n * @param {function(ARG0,ARG1):void} f The event handler.\n *\n * @private\n * @function\n */\nconst addEventHandlerListener = (eventHandler, f) =>\n  eventHandler.l.push(f);\n\n/**\n * Removes an event listener.\n *\n * @template ARG0,ARG1\n * @param {EventHandler<ARG0,ARG1>} eventHandler\n * @param {function(ARG0,ARG1):void} f The event handler that was added with\n *                     {@link EventHandler#addEventListener}\n *\n * @private\n * @function\n */\nconst removeEventHandlerListener = (eventHandler, f) => {\n  const l = eventHandler.l;\n  const len = l.length;\n  eventHandler.l = l.filter(g => f !== g);\n  if (len === eventHandler.l.length) {\n    console.error('[yjs] Tried to remove event handler that doesn\\'t exist.');\n  }\n};\n\n/**\n * Call all event listeners that were added via\n * {@link EventHandler#addEventListener}.\n *\n * @template ARG0,ARG1\n * @param {EventHandler<ARG0,ARG1>} eventHandler\n * @param {ARG0} arg0\n * @param {ARG1} arg1\n *\n * @private\n * @function\n */\nconst callEventHandlerListeners = (eventHandler, arg0, arg1) =>\n  f.callAll(eventHandler.l, [arg0, arg1]);\n\nclass ID {\n  /**\n   * @param {number} client client id\n   * @param {number} clock unique per client id, continuous number\n   */\n  constructor (client, clock) {\n    /**\n     * Client id\n     * @type {number}\n     */\n    this.client = client;\n    /**\n     * unique per client id, continuous number\n     * @type {number}\n     */\n    this.clock = clock;\n  }\n}\n\n/**\n * @param {ID | null} a\n * @param {ID | null} b\n * @return {boolean}\n *\n * @function\n */\nconst compareIDs = (a, b) => a === b || (a !== null && b !== null && a.client === b.client && a.clock === b.clock);\n\n/**\n * @param {number} client\n * @param {number} clock\n *\n * @private\n * @function\n */\nconst createID = (client, clock) => new ID(client, clock);\n\n/**\n * @param {encoding.Encoder} encoder\n * @param {ID} id\n *\n * @private\n * @function\n */\nconst writeID = (encoder, id) => {\n  encoding.writeVarUint(encoder, id.client);\n  encoding.writeVarUint(encoder, id.clock);\n};\n\n/**\n * Read ID.\n * * If first varUint read is 0xFFFFFF a RootID is returned.\n * * Otherwise an ID is returned\n *\n * @param {decoding.Decoder} decoder\n * @return {ID}\n *\n * @private\n * @function\n */\nconst readID = decoder =>\n  createID(decoding.readVarUint(decoder), decoding.readVarUint(decoder));\n\n/**\n * The top types are mapped from y.share.get(keyname) => type.\n * `type` does not store any information about the `keyname`.\n * This function finds the correct `keyname` for `type` and throws otherwise.\n *\n * @param {AbstractType<any>} type\n * @return {string}\n *\n * @private\n * @function\n */\nconst findRootTypeKey = type => {\n  // @ts-ignore _y must be defined, otherwise unexpected case\n  for (const [key, value] of type.doc.share.entries()) {\n    if (value === type) {\n      return key\n    }\n  }\n  throw error.unexpectedCase()\n};\n\n/**\n * Check if `parent` is a parent of `child`.\n *\n * @param {AbstractType<any>} parent\n * @param {Item|null} child\n * @return {Boolean} Whether `parent` is a parent of `child`.\n *\n * @private\n * @function\n */\nconst isParentOf = (parent, child) => {\n  while (child !== null) {\n    if (child.parent === parent) {\n      return true\n    }\n    child = /** @type {AbstractType<any>} */ (child.parent)._item;\n  }\n  return false\n};\n\n/**\n * Convenient helper to log type information.\n *\n * Do not use in productive systems as the output can be immense!\n *\n * @param {AbstractType<any>} type\n */\nconst logType = type => {\n  const res = [];\n  let n = type._start;\n  while (n) {\n    res.push(n);\n    n = n.right;\n  }\n  console.log('Children: ', res);\n  console.log('Children content: ', res.filter(m => !m.deleted).map(m => m.content));\n};\n\nclass PermanentUserData {\n  /**\n   * @param {Doc} doc\n   * @param {YMap<any>} [storeType]\n   */\n  constructor (doc, storeType = doc.getMap('users')) {\n    /**\n     * @type {Map<string,DeleteSet>}\n     */\n    const dss = new Map();\n    this.yusers = storeType;\n    this.doc = doc;\n    /**\n     * Maps from clientid to userDescription\n     *\n     * @type {Map<number,string>}\n     */\n    this.clients = new Map();\n    this.dss = dss;\n    /**\n     * @param {YMap<any>} user\n     * @param {string} userDescription\n     */\n    const initUser = (user, userDescription) => {\n      /**\n       * @type {YArray<Uint8Array>}\n       */\n      const ds = user.get('ds');\n      const ids = user.get('ids');\n      const addClientId = /** @param {number} clientid */ clientid => this.clients.set(clientid, userDescription);\n      ds.observe(/** @param {YArrayEvent<any>} event */ event => {\n        event.changes.added.forEach(item => {\n          item.content.getContent().forEach(encodedDs => {\n            if (encodedDs instanceof Uint8Array) {\n              this.dss.set(userDescription, mergeDeleteSets([this.dss.get(userDescription) || createDeleteSet(), readDeleteSet(new DSDecoderV1(decoding.createDecoder(encodedDs)))]));\n            }\n          });\n        });\n      });\n      this.dss.set(userDescription, mergeDeleteSets(ds.map(encodedDs => readDeleteSet(new DSDecoderV1(decoding.createDecoder(encodedDs))))));\n      ids.observe(/** @param {YArrayEvent<any>} event */ event =>\n        event.changes.added.forEach(item => item.content.getContent().forEach(addClientId))\n      );\n      ids.forEach(addClientId);\n    };\n    // observe users\n    storeType.observe(event => {\n      event.keysChanged.forEach(userDescription =>\n        initUser(storeType.get(userDescription), userDescription)\n      );\n    });\n    // add initial data\n    storeType.forEach(initUser);\n  }\n\n  /**\n   * @param {Doc} doc\n   * @param {number} clientid\n   * @param {string} userDescription\n   * @param {Object} conf\n   * @param {function(Transaction, DeleteSet):boolean} [conf.filter]\n   */\n  setUserMapping (doc, clientid, userDescription, { filter = () => true } = {}) {\n    const users = this.yusers;\n    let user = users.get(userDescription);\n    if (!user) {\n      user = new YMap();\n      user.set('ids', new YArray());\n      user.set('ds', new YArray());\n      users.set(userDescription, user);\n    }\n    user.get('ids').push([clientid]);\n    users.observe(_event => {\n      setTimeout(() => {\n        const userOverwrite = users.get(userDescription);\n        if (userOverwrite !== user) {\n          // user was overwritten, port all data over to the next user object\n          // @todo Experiment with Y.Sets here\n          user = userOverwrite;\n          // @todo iterate over old type\n          this.clients.forEach((_userDescription, clientid) => {\n            if (userDescription === _userDescription) {\n              user.get('ids').push([clientid]);\n            }\n          });\n          const encoder = new DSEncoderV1();\n          const ds = this.dss.get(userDescription);\n          if (ds) {\n            writeDeleteSet(encoder, ds);\n            user.get('ds').push([encoder.toUint8Array()]);\n          }\n        }\n      }, 0);\n    });\n    doc.on('afterTransaction', /** @param {Transaction} transaction */ transaction => {\n      setTimeout(() => {\n        const yds = user.get('ds');\n        const ds = transaction.deleteSet;\n        if (transaction.local && ds.clients.size > 0 && filter(transaction, ds)) {\n          const encoder = new DSEncoderV1();\n          writeDeleteSet(encoder, ds);\n          yds.push([encoder.toUint8Array()]);\n        }\n      });\n    });\n  }\n\n  /**\n   * @param {number} clientid\n   * @return {any}\n   */\n  getUserByClientId (clientid) {\n    return this.clients.get(clientid) || null\n  }\n\n  /**\n   * @param {ID} id\n   * @return {string | null}\n   */\n  getUserByDeletedId (id) {\n    for (const [userDescription, ds] of this.dss.entries()) {\n      if (isDeleted(ds, id)) {\n        return userDescription\n      }\n    }\n    return null\n  }\n}\n\n/**\n * A relative position is based on the Yjs model and is not affected by document changes.\n * E.g. If you place a relative position before a certain character, it will always point to this character.\n * If you place a relative position at the end of a type, it will always point to the end of the type.\n *\n * A numeric position is often unsuited for user selections, because it does not change when content is inserted\n * before or after.\n *\n * ```Insert(0, 'x')('a|bc') = 'xa|bc'``` Where | is the relative position.\n *\n * One of the properties must be defined.\n *\n * @example\n *   // Current cursor position is at position 10\n *   const relativePosition = createRelativePositionFromIndex(yText, 10)\n *   // modify yText\n *   yText.insert(0, 'abc')\n *   yText.delete(3, 10)\n *   // Compute the cursor position\n *   const absolutePosition = createAbsolutePositionFromRelativePosition(y, relativePosition)\n *   absolutePosition.type === yText // => true\n *   console.log('cursor location is ' + absolutePosition.index) // => cursor location is 3\n *\n */\nclass RelativePosition {\n  /**\n   * @param {ID|null} type\n   * @param {string|null} tname\n   * @param {ID|null} item\n   * @param {number} assoc\n   */\n  constructor (type, tname, item, assoc = 0) {\n    /**\n     * @type {ID|null}\n     */\n    this.type = type;\n    /**\n     * @type {string|null}\n     */\n    this.tname = tname;\n    /**\n     * @type {ID | null}\n     */\n    this.item = item;\n    /**\n     * A relative position is associated to a specific character. By default\n     * assoc >= 0, the relative position is associated to the character\n     * after the meant position.\n     * I.e. position 1 in 'ab' is associated to character 'b'.\n     *\n     * If assoc < 0, then the relative position is associated to the character\n     * before the meant position.\n     *\n     * @type {number}\n     */\n    this.assoc = assoc;\n  }\n}\n\n/**\n * @param {RelativePosition} rpos\n * @return {any}\n */\nconst relativePositionToJSON = rpos => {\n  const json = {};\n  if (rpos.type) {\n    json.type = rpos.type;\n  }\n  if (rpos.tname) {\n    json.tname = rpos.tname;\n  }\n  if (rpos.item) {\n    json.item = rpos.item;\n  }\n  if (rpos.assoc != null) {\n    json.assoc = rpos.assoc;\n  }\n  return json\n};\n\n/**\n * @param {any} json\n * @return {RelativePosition}\n *\n * @function\n */\nconst createRelativePositionFromJSON = json => new RelativePosition(json.type == null ? null : createID(json.type.client, json.type.clock), json.tname ?? null, json.item == null ? null : createID(json.item.client, json.item.clock), json.assoc == null ? 0 : json.assoc);\n\nclass AbsolutePosition {\n  /**\n   * @param {AbstractType<any>} type\n   * @param {number} index\n   * @param {number} [assoc]\n   */\n  constructor (type, index, assoc = 0) {\n    /**\n     * @type {AbstractType<any>}\n     */\n    this.type = type;\n    /**\n     * @type {number}\n     */\n    this.index = index;\n    this.assoc = assoc;\n  }\n}\n\n/**\n * @param {AbstractType<any>} type\n * @param {number} index\n * @param {number} [assoc]\n *\n * @function\n */\nconst createAbsolutePosition = (type, index, assoc = 0) => new AbsolutePosition(type, index, assoc);\n\n/**\n * @param {AbstractType<any>} type\n * @param {ID|null} item\n * @param {number} [assoc]\n *\n * @function\n */\nconst createRelativePosition = (type, item, assoc) => {\n  let typeid = null;\n  let tname = null;\n  if (type._item === null) {\n    tname = findRootTypeKey(type);\n  } else {\n    typeid = createID(type._item.id.client, type._item.id.clock);\n  }\n  return new RelativePosition(typeid, tname, item, assoc)\n};\n\n/**\n * Create a relativePosition based on a absolute position.\n *\n * @param {AbstractType<any>} type The base type (e.g. YText or YArray).\n * @param {number} index The absolute position.\n * @param {number} [assoc]\n * @return {RelativePosition}\n *\n * @function\n */\nconst createRelativePositionFromTypeIndex = (type, index, assoc = 0) => {\n  let t = type._start;\n  if (assoc < 0) {\n    // associated to the left character or the beginning of a type, increment index if possible.\n    if (index === 0) {\n      return createRelativePosition(type, null, assoc)\n    }\n    index--;\n  }\n  while (t !== null) {\n    if (!t.deleted && t.countable) {\n      if (t.length > index) {\n        // case 1: found position somewhere in the linked list\n        return createRelativePosition(type, createID(t.id.client, t.id.clock + index), assoc)\n      }\n      index -= t.length;\n    }\n    if (t.right === null && assoc < 0) {\n      // left-associated position, return last available id\n      return createRelativePosition(type, t.lastId, assoc)\n    }\n    t = t.right;\n  }\n  return createRelativePosition(type, null, assoc)\n};\n\n/**\n * @param {encoding.Encoder} encoder\n * @param {RelativePosition} rpos\n *\n * @function\n */\nconst writeRelativePosition = (encoder, rpos) => {\n  const { type, tname, item, assoc } = rpos;\n  if (item !== null) {\n    encoding.writeVarUint(encoder, 0);\n    writeID(encoder, item);\n  } else if (tname !== null) {\n    // case 2: found position at the end of the list and type is stored in y.share\n    encoding.writeUint8(encoder, 1);\n    encoding.writeVarString(encoder, tname);\n  } else if (type !== null) {\n    // case 3: found position at the end of the list and type is attached to an item\n    encoding.writeUint8(encoder, 2);\n    writeID(encoder, type);\n  } else {\n    throw error.unexpectedCase()\n  }\n  encoding.writeVarInt(encoder, assoc);\n  return encoder\n};\n\n/**\n * @param {RelativePosition} rpos\n * @return {Uint8Array}\n */\nconst encodeRelativePosition = rpos => {\n  const encoder = encoding.createEncoder();\n  writeRelativePosition(encoder, rpos);\n  return encoding.toUint8Array(encoder)\n};\n\n/**\n * @param {decoding.Decoder} decoder\n * @return {RelativePosition}\n *\n * @function\n */\nconst readRelativePosition = decoder => {\n  let type = null;\n  let tname = null;\n  let itemID = null;\n  switch (decoding.readVarUint(decoder)) {\n    case 0:\n      // case 1: found position somewhere in the linked list\n      itemID = readID(decoder);\n      break\n    case 1:\n      // case 2: found position at the end of the list and type is stored in y.share\n      tname = decoding.readVarString(decoder);\n      break\n    case 2: {\n      // case 3: found position at the end of the list and type is attached to an item\n      type = readID(decoder);\n    }\n  }\n  const assoc = decoding.hasContent(decoder) ? decoding.readVarInt(decoder) : 0;\n  return new RelativePosition(type, tname, itemID, assoc)\n};\n\n/**\n * @param {Uint8Array} uint8Array\n * @return {RelativePosition}\n */\nconst decodeRelativePosition = uint8Array => readRelativePosition(decoding.createDecoder(uint8Array));\n\n/**\n * @param {StructStore} store\n * @param {ID} id\n */\nconst getItemWithOffset = (store, id) => {\n  const item = getItem(store, id);\n  const diff = id.clock - item.id.clock;\n  return {\n    item, diff\n  }\n};\n\n/**\n * Transform a relative position to an absolute position.\n *\n * If you want to share the relative position with other users, you should set\n * `followUndoneDeletions` to false to get consistent results across all clients.\n *\n * When calculating the absolute position, we try to follow the \"undone deletions\". This yields\n * better results for the user who performed undo. However, only the user who performed the undo\n * will get the better results, the other users don't know which operations recreated a deleted\n * range of content. There is more information in this ticket: https://github.com/yjs/yjs/issues/638\n *\n * @param {RelativePosition} rpos\n * @param {Doc} doc\n * @param {boolean} followUndoneDeletions - whether to follow undone deletions - see https://github.com/yjs/yjs/issues/638\n * @return {AbsolutePosition|null}\n *\n * @function\n */\nconst createAbsolutePositionFromRelativePosition = (rpos, doc, followUndoneDeletions = true) => {\n  const store = doc.store;\n  const rightID = rpos.item;\n  const typeID = rpos.type;\n  const tname = rpos.tname;\n  const assoc = rpos.assoc;\n  let type = null;\n  let index = 0;\n  if (rightID !== null) {\n    if (getState(store, rightID.client) <= rightID.clock) {\n      return null\n    }\n    const res = followUndoneDeletions ? followRedone(store, rightID) : getItemWithOffset(store, rightID);\n    const right = res.item;\n    if (!(right instanceof Item)) {\n      return null\n    }\n    type = /** @type {AbstractType<any>} */ (right.parent);\n    if (type._item === null || !type._item.deleted) {\n      index = (right.deleted || !right.countable) ? 0 : (res.diff + (assoc >= 0 ? 0 : 1)); // adjust position based on left association if necessary\n      let n = right.left;\n      while (n !== null) {\n        if (!n.deleted && n.countable) {\n          index += n.length;\n        }\n        n = n.left;\n      }\n    }\n  } else {\n    if (tname !== null) {\n      type = doc.get(tname);\n    } else if (typeID !== null) {\n      if (getState(store, typeID.client) <= typeID.clock) {\n        // type does not exist yet\n        return null\n      }\n      const { item } = followUndoneDeletions ? followRedone(store, typeID) : { item: getItem(store, typeID) };\n      if (item instanceof Item && item.content instanceof ContentType) {\n        type = item.content.type;\n      } else {\n        // struct is garbage collected\n        return null\n      }\n    } else {\n      throw error.unexpectedCase()\n    }\n    if (assoc >= 0) {\n      index = type._length;\n    } else {\n      index = 0;\n    }\n  }\n  return createAbsolutePosition(type, index, rpos.assoc)\n};\n\n/**\n * @param {RelativePosition|null} a\n * @param {RelativePosition|null} b\n * @return {boolean}\n *\n * @function\n */\nconst compareRelativePositions = (a, b) => a === b || (\n  a !== null && b !== null && a.tname === b.tname && compareIDs(a.item, b.item) && compareIDs(a.type, b.type) && a.assoc === b.assoc\n);\n\nclass Snapshot {\n  /**\n   * @param {DeleteSet} ds\n   * @param {Map<number,number>} sv state map\n   */\n  constructor (ds, sv) {\n    /**\n     * @type {DeleteSet}\n     */\n    this.ds = ds;\n    /**\n     * State Map\n     * @type {Map<number,number>}\n     */\n    this.sv = sv;\n  }\n}\n\n/**\n * @param {Snapshot} snap1\n * @param {Snapshot} snap2\n * @return {boolean}\n */\nconst equalSnapshots = (snap1, snap2) => {\n  const ds1 = snap1.ds.clients;\n  const ds2 = snap2.ds.clients;\n  const sv1 = snap1.sv;\n  const sv2 = snap2.sv;\n  if (sv1.size !== sv2.size || ds1.size !== ds2.size) {\n    return false\n  }\n  for (const [key, value] of sv1.entries()) {\n    if (sv2.get(key) !== value) {\n      return false\n    }\n  }\n  for (const [client, dsitems1] of ds1.entries()) {\n    const dsitems2 = ds2.get(client) || [];\n    if (dsitems1.length !== dsitems2.length) {\n      return false\n    }\n    for (let i = 0; i < dsitems1.length; i++) {\n      const dsitem1 = dsitems1[i];\n      const dsitem2 = dsitems2[i];\n      if (dsitem1.clock !== dsitem2.clock || dsitem1.len !== dsitem2.len) {\n        return false\n      }\n    }\n  }\n  return true\n};\n\n/**\n * @param {Snapshot} snapshot\n * @param {DSEncoderV1 | DSEncoderV2} [encoder]\n * @return {Uint8Array}\n */\nconst encodeSnapshotV2 = (snapshot, encoder = new DSEncoderV2()) => {\n  writeDeleteSet(encoder, snapshot.ds);\n  writeStateVector(encoder, snapshot.sv);\n  return encoder.toUint8Array()\n};\n\n/**\n * @param {Snapshot} snapshot\n * @return {Uint8Array}\n */\nconst encodeSnapshot = snapshot => encodeSnapshotV2(snapshot, new DSEncoderV1());\n\n/**\n * @param {Uint8Array} buf\n * @param {DSDecoderV1 | DSDecoderV2} [decoder]\n * @return {Snapshot}\n */\nconst decodeSnapshotV2 = (buf, decoder = new DSDecoderV2(decoding.createDecoder(buf))) => {\n  return new Snapshot(readDeleteSet(decoder), readStateVector(decoder))\n};\n\n/**\n * @param {Uint8Array} buf\n * @return {Snapshot}\n */\nconst decodeSnapshot = buf => decodeSnapshotV2(buf, new DSDecoderV1(decoding.createDecoder(buf)));\n\n/**\n * @param {DeleteSet} ds\n * @param {Map<number,number>} sm\n * @return {Snapshot}\n */\nconst createSnapshot = (ds, sm) => new Snapshot(ds, sm);\n\nconst emptySnapshot = createSnapshot(createDeleteSet(), new Map());\n\n/**\n * @param {Doc} doc\n * @return {Snapshot}\n */\nconst snapshot = doc => createSnapshot(createDeleteSetFromStructStore(doc.store), getStateVector(doc.store));\n\n/**\n * @param {Item} item\n * @param {Snapshot|undefined} snapshot\n *\n * @protected\n * @function\n */\nconst isVisible = (item, snapshot) => snapshot === undefined\n  ? !item.deleted\n  : snapshot.sv.has(item.id.client) && (snapshot.sv.get(item.id.client) || 0) > item.id.clock && !isDeleted(snapshot.ds, item.id);\n\n/**\n * @param {Transaction} transaction\n * @param {Snapshot} snapshot\n */\nconst splitSnapshotAffectedStructs = (transaction, snapshot) => {\n  const meta = map.setIfUndefined(transaction.meta, splitSnapshotAffectedStructs, set.create);\n  const store = transaction.doc.store;\n  // check if we already split for this snapshot\n  if (!meta.has(snapshot)) {\n    snapshot.sv.forEach((clock, client) => {\n      if (clock < getState(store, client)) {\n        getItemCleanStart(transaction, createID(client, clock));\n      }\n    });\n    iterateDeletedStructs(transaction, snapshot.ds, _item => {});\n    meta.add(snapshot);\n  }\n};\n\n/**\n * @example\n *  const ydoc = new Y.Doc({ gc: false })\n *  ydoc.getText().insert(0, 'world!')\n *  const snapshot = Y.snapshot(ydoc)\n *  ydoc.getText().insert(0, 'hello ')\n *  const restored = Y.createDocFromSnapshot(ydoc, snapshot)\n *  assert(restored.getText().toString() === 'world!')\n *\n * @param {Doc} originDoc\n * @param {Snapshot} snapshot\n * @param {Doc} [newDoc] Optionally, you may define the Yjs document that receives the data from originDoc\n * @return {Doc}\n */\nconst createDocFromSnapshot = (originDoc, snapshot, newDoc = new Doc()) => {\n  if (originDoc.gc) {\n    // we should not try to restore a GC-ed document, because some of the restored items might have their content deleted\n    throw new Error('Garbage-collection must be disabled in `originDoc`!')\n  }\n  const { sv, ds } = snapshot;\n\n  const encoder = new UpdateEncoderV2();\n  originDoc.transact(transaction => {\n    let size = 0;\n    sv.forEach(clock => {\n      if (clock > 0) {\n        size++;\n      }\n    });\n    encoding.writeVarUint(encoder.restEncoder, size);\n    // splitting the structs before writing them to the encoder\n    for (const [client, clock] of sv) {\n      if (clock === 0) {\n        continue\n      }\n      if (clock < getState(originDoc.store, client)) {\n        getItemCleanStart(transaction, createID(client, clock));\n      }\n      const structs = originDoc.store.clients.get(client) || [];\n      const lastStructIndex = findIndexSS(structs, clock - 1);\n      // write # encoded structs\n      encoding.writeVarUint(encoder.restEncoder, lastStructIndex + 1);\n      encoder.writeClient(client);\n      // first clock written is 0\n      encoding.writeVarUint(encoder.restEncoder, 0);\n      for (let i = 0; i <= lastStructIndex; i++) {\n        structs[i].write(encoder, 0);\n      }\n    }\n    writeDeleteSet(encoder, ds);\n  });\n\n  applyUpdateV2(newDoc, encoder.toUint8Array(), 'snapshot');\n  return newDoc\n};\n\n/**\n * @param {Snapshot} snapshot\n * @param {Uint8Array} update\n * @param {typeof UpdateDecoderV2 | typeof UpdateDecoderV1} [YDecoder]\n */\nconst snapshotContainsUpdateV2 = (snapshot, update, YDecoder = UpdateDecoderV2) => {\n  const updateDecoder = new YDecoder(decoding.createDecoder(update));\n  const lazyDecoder = new LazyStructReader(updateDecoder, false);\n  for (let curr = lazyDecoder.curr; curr !== null; curr = lazyDecoder.next()) {\n    if ((snapshot.sv.get(curr.id.client) || 0) < curr.id.clock + curr.length) {\n      return false\n    }\n  }\n  const mergedDS = mergeDeleteSets([snapshot.ds, readDeleteSet(updateDecoder)]);\n  return equalDeleteSets(snapshot.ds, mergedDS)\n};\n\n/**\n * @param {Snapshot} snapshot\n * @param {Uint8Array} update\n */\nconst snapshotContainsUpdate = (snapshot, update) => snapshotContainsUpdateV2(snapshot, update, UpdateDecoderV1);\n\nclass StructStore {\n  constructor () {\n    /**\n     * @type {Map<number,Array<GC|Item>>}\n     */\n    this.clients = new Map();\n    /**\n     * @type {null | { missing: Map<number, number>, update: Uint8Array }}\n     */\n    this.pendingStructs = null;\n    /**\n     * @type {null | Uint8Array}\n     */\n    this.pendingDs = null;\n  }\n}\n\n/**\n * Return the states as a Map<client,clock>.\n * Note that clock refers to the next expected clock id.\n *\n * @param {StructStore} store\n * @return {Map<number,number>}\n *\n * @public\n * @function\n */\nconst getStateVector = store => {\n  const sm = new Map();\n  store.clients.forEach((structs, client) => {\n    const struct = structs[structs.length - 1];\n    sm.set(client, struct.id.clock + struct.length);\n  });\n  return sm\n};\n\n/**\n * @param {StructStore} store\n * @param {number} client\n * @return {number}\n *\n * @public\n * @function\n */\nconst getState = (store, client) => {\n  const structs = store.clients.get(client);\n  if (structs === undefined) {\n    return 0\n  }\n  const lastStruct = structs[structs.length - 1];\n  return lastStruct.id.clock + lastStruct.length\n};\n\n/**\n * @param {StructStore} store\n * @param {GC|Item} struct\n *\n * @private\n * @function\n */\nconst addStruct = (store, struct) => {\n  let structs = store.clients.get(struct.id.client);\n  if (structs === undefined) {\n    structs = [];\n    store.clients.set(struct.id.client, structs);\n  } else {\n    const lastStruct = structs[structs.length - 1];\n    if (lastStruct.id.clock + lastStruct.length !== struct.id.clock) {\n      throw error.unexpectedCase()\n    }\n  }\n  structs.push(struct);\n};\n\n/**\n * Perform a binary search on a sorted array\n * @param {Array<Item|GC>} structs\n * @param {number} clock\n * @return {number}\n *\n * @private\n * @function\n */\nconst findIndexSS = (structs, clock) => {\n  let left = 0;\n  let right = structs.length - 1;\n  let mid = structs[right];\n  let midclock = mid.id.clock;\n  if (midclock === clock) {\n    return right\n  }\n  // @todo does it even make sense to pivot the search?\n  // If a good split misses, it might actually increase the time to find the correct item.\n  // Currently, the only advantage is that search with pivoting might find the item on the first try.\n  let midindex = math.floor((clock / (midclock + mid.length - 1)) * right); // pivoting the search\n  while (left <= right) {\n    mid = structs[midindex];\n    midclock = mid.id.clock;\n    if (midclock <= clock) {\n      if (clock < midclock + mid.length) {\n        return midindex\n      }\n      left = midindex + 1;\n    } else {\n      right = midindex - 1;\n    }\n    midindex = math.floor((left + right) / 2);\n  }\n  // Always check state before looking for a struct in StructStore\n  // Therefore the case of not finding a struct is unexpected\n  throw error.unexpectedCase()\n};\n\n/**\n * Expects that id is actually in store. This function throws or is an infinite loop otherwise.\n *\n * @param {StructStore} store\n * @param {ID} id\n * @return {GC|Item}\n *\n * @private\n * @function\n */\nconst find = (store, id) => {\n  /**\n   * @type {Array<GC|Item>}\n   */\n  // @ts-ignore\n  const structs = store.clients.get(id.client);\n  return structs[findIndexSS(structs, id.clock)]\n};\n\n/**\n * Expects that id is actually in store. This function throws or is an infinite loop otherwise.\n * @private\n * @function\n */\nconst getItem = /** @type {function(StructStore,ID):Item} */ (find);\n\n/**\n * @param {Transaction} transaction\n * @param {Array<Item|GC>} structs\n * @param {number} clock\n */\nconst findIndexCleanStart = (transaction, structs, clock) => {\n  const index = findIndexSS(structs, clock);\n  const struct = structs[index];\n  if (struct.id.clock < clock && struct instanceof Item) {\n    structs.splice(index + 1, 0, splitItem(transaction, struct, clock - struct.id.clock));\n    return index + 1\n  }\n  return index\n};\n\n/**\n * Expects that id is actually in store. This function throws or is an infinite loop otherwise.\n *\n * @param {Transaction} transaction\n * @param {ID} id\n * @return {Item}\n *\n * @private\n * @function\n */\nconst getItemCleanStart = (transaction, id) => {\n  const structs = /** @type {Array<Item>} */ (transaction.doc.store.clients.get(id.client));\n  return structs[findIndexCleanStart(transaction, structs, id.clock)]\n};\n\n/**\n * Expects that id is actually in store. This function throws or is an infinite loop otherwise.\n *\n * @param {Transaction} transaction\n * @param {StructStore} store\n * @param {ID} id\n * @return {Item}\n *\n * @private\n * @function\n */\nconst getItemCleanEnd = (transaction, store, id) => {\n  /**\n   * @type {Array<Item>}\n   */\n  // @ts-ignore\n  const structs = store.clients.get(id.client);\n  const index = findIndexSS(structs, id.clock);\n  const struct = structs[index];\n  if (id.clock !== struct.id.clock + struct.length - 1 && struct.constructor !== GC) {\n    structs.splice(index + 1, 0, splitItem(transaction, struct, id.clock - struct.id.clock + 1));\n  }\n  return struct\n};\n\n/**\n * Replace `item` with `newitem` in store\n * @param {StructStore} store\n * @param {GC|Item} struct\n * @param {GC|Item} newStruct\n *\n * @private\n * @function\n */\nconst replaceStruct = (store, struct, newStruct) => {\n  const structs = /** @type {Array<GC|Item>} */ (store.clients.get(struct.id.client));\n  structs[findIndexSS(structs, struct.id.clock)] = newStruct;\n};\n\n/**\n * Iterate over a range of structs\n *\n * @param {Transaction} transaction\n * @param {Array<Item|GC>} structs\n * @param {number} clockStart Inclusive start\n * @param {number} len\n * @param {function(GC|Item):void} f\n *\n * @function\n */\nconst iterateStructs = (transaction, structs, clockStart, len, f) => {\n  if (len === 0) {\n    return\n  }\n  const clockEnd = clockStart + len;\n  let index = findIndexCleanStart(transaction, structs, clockStart);\n  let struct;\n  do {\n    struct = structs[index++];\n    if (clockEnd < struct.id.clock + struct.length) {\n      findIndexCleanStart(transaction, structs, clockEnd);\n    }\n    f(struct);\n  } while (index < structs.length && structs[index].id.clock < clockEnd)\n};\n\n/**\n * A transaction is created for every change on the Yjs model. It is possible\n * to bundle changes on the Yjs model in a single transaction to\n * minimize the number on messages sent and the number of observer calls.\n * If possible the user of this library should bundle as many changes as\n * possible. Here is an example to illustrate the advantages of bundling:\n *\n * @example\n * const ydoc = new Y.Doc()\n * const map = ydoc.getMap('map')\n * // Log content when change is triggered\n * map.observe(() => {\n *   console.log('change triggered')\n * })\n * // Each change on the map type triggers a log message:\n * map.set('a', 0) // => \"change triggered\"\n * map.set('b', 0) // => \"change triggered\"\n * // When put in a transaction, it will trigger the log after the transaction:\n * ydoc.transact(() => {\n *   map.set('a', 1)\n *   map.set('b', 1)\n * }) // => \"change triggered\"\n *\n * @public\n */\nclass Transaction {\n  /**\n   * @param {Doc} doc\n   * @param {any} origin\n   * @param {boolean} local\n   */\n  constructor (doc, origin, local) {\n    /**\n     * The Yjs instance.\n     * @type {Doc}\n     */\n    this.doc = doc;\n    /**\n     * Describes the set of deleted items by ids\n     * @type {DeleteSet}\n     */\n    this.deleteSet = new DeleteSet();\n    /**\n     * Holds the state before the transaction started.\n     * @type {Map<Number,Number>}\n     */\n    this.beforeState = getStateVector(doc.store);\n    /**\n     * Holds the state after the transaction.\n     * @type {Map<Number,Number>}\n     */\n    this.afterState = new Map();\n    /**\n     * All types that were directly modified (property added or child\n     * inserted/deleted). New types are not included in this Set.\n     * Maps from type to parentSubs (`item.parentSub = null` for YArray)\n     * @type {Map<AbstractType<YEvent<any>>,Set<String|null>>}\n     */\n    this.changed = new Map();\n    /**\n     * Stores the events for the types that observe also child elements.\n     * It is mainly used by `observeDeep`.\n     * @type {Map<AbstractType<YEvent<any>>,Array<YEvent<any>>>}\n     */\n    this.changedParentTypes = new Map();\n    /**\n     * @type {Array<AbstractStruct>}\n     */\n    this._mergeStructs = [];\n    /**\n     * @type {any}\n     */\n    this.origin = origin;\n    /**\n     * Stores meta information on the transaction\n     * @type {Map<any,any>}\n     */\n    this.meta = new Map();\n    /**\n     * Whether this change originates from this doc.\n     * @type {boolean}\n     */\n    this.local = local;\n    /**\n     * @type {Set<Doc>}\n     */\n    this.subdocsAdded = new Set();\n    /**\n     * @type {Set<Doc>}\n     */\n    this.subdocsRemoved = new Set();\n    /**\n     * @type {Set<Doc>}\n     */\n    this.subdocsLoaded = new Set();\n    /**\n     * @type {boolean}\n     */\n    this._needFormattingCleanup = false;\n  }\n}\n\n/**\n * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n * @param {Transaction} transaction\n * @return {boolean} Whether data was written.\n */\nconst writeUpdateMessageFromTransaction = (encoder, transaction) => {\n  if (transaction.deleteSet.clients.size === 0 && !map.any(transaction.afterState, (clock, client) => transaction.beforeState.get(client) !== clock)) {\n    return false\n  }\n  sortAndMergeDeleteSet(transaction.deleteSet);\n  writeStructsFromTransaction(encoder, transaction);\n  writeDeleteSet(encoder, transaction.deleteSet);\n  return true\n};\n\n/**\n * If `type.parent` was added in current transaction, `type` technically\n * did not change, it was just added and we should not fire events for `type`.\n *\n * @param {Transaction} transaction\n * @param {AbstractType<YEvent<any>>} type\n * @param {string|null} parentSub\n */\nconst addChangedTypeToTransaction = (transaction, type, parentSub) => {\n  const item = type._item;\n  if (item === null || (item.id.clock < (transaction.beforeState.get(item.id.client) || 0) && !item.deleted)) {\n    map.setIfUndefined(transaction.changed, type, set.create).add(parentSub);\n  }\n};\n\n/**\n * @param {Array<AbstractStruct>} structs\n * @param {number} pos\n * @return {number} # of merged structs\n */\nconst tryToMergeWithLefts = (structs, pos) => {\n  let right = structs[pos];\n  let left = structs[pos - 1];\n  let i = pos;\n  for (; i > 0; right = left, left = structs[--i - 1]) {\n    if (left.deleted === right.deleted && left.constructor === right.constructor) {\n      if (left.mergeWith(right)) {\n        if (right instanceof Item && right.parentSub !== null && /** @type {AbstractType<any>} */ (right.parent)._map.get(right.parentSub) === right) {\n          /** @type {AbstractType<any>} */ (right.parent)._map.set(right.parentSub, /** @type {Item} */ (left));\n        }\n        continue\n      }\n    }\n    break\n  }\n  const merged = pos - i;\n  if (merged) {\n    // remove all merged structs from the array\n    structs.splice(pos + 1 - merged, merged);\n  }\n  return merged\n};\n\n/**\n * @param {DeleteSet} ds\n * @param {StructStore} store\n * @param {function(Item):boolean} gcFilter\n */\nconst tryGcDeleteSet = (ds, store, gcFilter) => {\n  for (const [client, deleteItems] of ds.clients.entries()) {\n    const structs = /** @type {Array<GC|Item>} */ (store.clients.get(client));\n    for (let di = deleteItems.length - 1; di >= 0; di--) {\n      const deleteItem = deleteItems[di];\n      const endDeleteItemClock = deleteItem.clock + deleteItem.len;\n      for (\n        let si = findIndexSS(structs, deleteItem.clock), struct = structs[si];\n        si < structs.length && struct.id.clock < endDeleteItemClock;\n        struct = structs[++si]\n      ) {\n        const struct = structs[si];\n        if (deleteItem.clock + deleteItem.len <= struct.id.clock) {\n          break\n        }\n        if (struct instanceof Item && struct.deleted && !struct.keep && gcFilter(struct)) {\n          struct.gc(store, false);\n        }\n      }\n    }\n  }\n};\n\n/**\n * @param {DeleteSet} ds\n * @param {StructStore} store\n */\nconst tryMergeDeleteSet = (ds, store) => {\n  // try to merge deleted / gc'd items\n  // merge from right to left for better efficiency and so we don't miss any merge targets\n  ds.clients.forEach((deleteItems, client) => {\n    const structs = /** @type {Array<GC|Item>} */ (store.clients.get(client));\n    for (let di = deleteItems.length - 1; di >= 0; di--) {\n      const deleteItem = deleteItems[di];\n      // start with merging the item next to the last deleted item\n      const mostRightIndexToCheck = math.min(structs.length - 1, 1 + findIndexSS(structs, deleteItem.clock + deleteItem.len - 1));\n      for (\n        let si = mostRightIndexToCheck, struct = structs[si];\n        si > 0 && struct.id.clock >= deleteItem.clock;\n        struct = structs[si]\n      ) {\n        si -= 1 + tryToMergeWithLefts(structs, si);\n      }\n    }\n  });\n};\n\n/**\n * @param {DeleteSet} ds\n * @param {StructStore} store\n * @param {function(Item):boolean} gcFilter\n */\nconst tryGc = (ds, store, gcFilter) => {\n  tryGcDeleteSet(ds, store, gcFilter);\n  tryMergeDeleteSet(ds, store);\n};\n\n/**\n * @param {Array<Transaction>} transactionCleanups\n * @param {number} i\n */\nconst cleanupTransactions = (transactionCleanups, i) => {\n  if (i < transactionCleanups.length) {\n    const transaction = transactionCleanups[i];\n    const doc = transaction.doc;\n    const store = doc.store;\n    const ds = transaction.deleteSet;\n    const mergeStructs = transaction._mergeStructs;\n    try {\n      sortAndMergeDeleteSet(ds);\n      transaction.afterState = getStateVector(transaction.doc.store);\n      doc.emit('beforeObserverCalls', [transaction, doc]);\n      /**\n       * An array of event callbacks.\n       *\n       * Each callback is called even if the other ones throw errors.\n       *\n       * @type {Array<function():void>}\n       */\n      const fs = [];\n      // observe events on changed types\n      transaction.changed.forEach((subs, itemtype) =>\n        fs.push(() => {\n          if (itemtype._item === null || !itemtype._item.deleted) {\n            itemtype._callObserver(transaction, subs);\n          }\n        })\n      );\n      fs.push(() => {\n        // deep observe events\n        transaction.changedParentTypes.forEach((events, type) => {\n          // We need to think about the possibility that the user transforms the\n          // Y.Doc in the event.\n          if (type._dEH.l.length > 0 && (type._item === null || !type._item.deleted)) {\n            events = events\n              .filter(event =>\n                event.target._item === null || !event.target._item.deleted\n              );\n            events\n              .forEach(event => {\n                event.currentTarget = type;\n                // path is relative to the current target\n                event._path = null;\n              });\n            // sort events by path length so that top-level events are fired first.\n            events\n              .sort((event1, event2) => event1.path.length - event2.path.length);\n            // We don't need to check for events.length\n            // because we know it has at least one element\n            callEventHandlerListeners(type._dEH, events, transaction);\n          }\n        });\n      });\n      fs.push(() => doc.emit('afterTransaction', [transaction, doc]));\n      callAll(fs, []);\n      if (transaction._needFormattingCleanup) {\n        cleanupYTextAfterTransaction(transaction);\n      }\n    } finally {\n      // Replace deleted items with ItemDeleted / GC.\n      // This is where content is actually remove from the Yjs Doc.\n      if (doc.gc) {\n        tryGcDeleteSet(ds, store, doc.gcFilter);\n      }\n      tryMergeDeleteSet(ds, store);\n\n      // on all affected store.clients props, try to merge\n      transaction.afterState.forEach((clock, client) => {\n        const beforeClock = transaction.beforeState.get(client) || 0;\n        if (beforeClock !== clock) {\n          const structs = /** @type {Array<GC|Item>} */ (store.clients.get(client));\n          // we iterate from right to left so we can safely remove entries\n          const firstChangePos = math.max(findIndexSS(structs, beforeClock), 1);\n          for (let i = structs.length - 1; i >= firstChangePos;) {\n            i -= 1 + tryToMergeWithLefts(structs, i);\n          }\n        }\n      });\n      // try to merge mergeStructs\n      // @todo: it makes more sense to transform mergeStructs to a DS, sort it, and merge from right to left\n      //        but at the moment DS does not handle duplicates\n      for (let i = mergeStructs.length - 1; i >= 0; i--) {\n        const { client, clock } = mergeStructs[i].id;\n        const structs = /** @type {Array<GC|Item>} */ (store.clients.get(client));\n        const replacedStructPos = findIndexSS(structs, clock);\n        if (replacedStructPos + 1 < structs.length) {\n          if (tryToMergeWithLefts(structs, replacedStructPos + 1) > 1) {\n            continue // no need to perform next check, both are already merged\n          }\n        }\n        if (replacedStructPos > 0) {\n          tryToMergeWithLefts(structs, replacedStructPos);\n        }\n      }\n      if (!transaction.local && transaction.afterState.get(doc.clientID) !== transaction.beforeState.get(doc.clientID)) {\n        logging.print(logging.ORANGE, logging.BOLD, '[yjs] ', logging.UNBOLD, logging.RED, 'Changed the client-id because another client seems to be using it.');\n        doc.clientID = generateNewClientId();\n      }\n      // @todo Merge all the transactions into one and provide send the data as a single update message\n      doc.emit('afterTransactionCleanup', [transaction, doc]);\n      if (doc._observers.has('update')) {\n        const encoder = new UpdateEncoderV1();\n        const hasContent = writeUpdateMessageFromTransaction(encoder, transaction);\n        if (hasContent) {\n          doc.emit('update', [encoder.toUint8Array(), transaction.origin, doc, transaction]);\n        }\n      }\n      if (doc._observers.has('updateV2')) {\n        const encoder = new UpdateEncoderV2();\n        const hasContent = writeUpdateMessageFromTransaction(encoder, transaction);\n        if (hasContent) {\n          doc.emit('updateV2', [encoder.toUint8Array(), transaction.origin, doc, transaction]);\n        }\n      }\n      const { subdocsAdded, subdocsLoaded, subdocsRemoved } = transaction;\n      if (subdocsAdded.size > 0 || subdocsRemoved.size > 0 || subdocsLoaded.size > 0) {\n        subdocsAdded.forEach(subdoc => {\n          subdoc.clientID = doc.clientID;\n          if (subdoc.collectionid == null) {\n            subdoc.collectionid = doc.collectionid;\n          }\n          doc.subdocs.add(subdoc);\n        });\n        subdocsRemoved.forEach(subdoc => doc.subdocs.delete(subdoc));\n        doc.emit('subdocs', [{ loaded: subdocsLoaded, added: subdocsAdded, removed: subdocsRemoved }, doc, transaction]);\n        subdocsRemoved.forEach(subdoc => subdoc.destroy());\n      }\n\n      if (transactionCleanups.length <= i + 1) {\n        doc._transactionCleanups = [];\n        doc.emit('afterAllTransactions', [doc, transactionCleanups]);\n      } else {\n        cleanupTransactions(transactionCleanups, i + 1);\n      }\n    }\n  }\n};\n\n/**\n * Implements the functionality of `y.transact(()=>{..})`\n *\n * @template T\n * @param {Doc} doc\n * @param {function(Transaction):T} f\n * @param {any} [origin=true]\n * @return {T}\n *\n * @function\n */\nconst transact = (doc, f, origin = null, local = true) => {\n  const transactionCleanups = doc._transactionCleanups;\n  let initialCall = false;\n  /**\n   * @type {any}\n   */\n  let result = null;\n  if (doc._transaction === null) {\n    initialCall = true;\n    doc._transaction = new Transaction(doc, origin, local);\n    transactionCleanups.push(doc._transaction);\n    if (transactionCleanups.length === 1) {\n      doc.emit('beforeAllTransactions', [doc]);\n    }\n    doc.emit('beforeTransaction', [doc._transaction, doc]);\n  }\n  try {\n    result = f(doc._transaction);\n  } finally {\n    if (initialCall) {\n      const finishCleanup = doc._transaction === transactionCleanups[0];\n      doc._transaction = null;\n      if (finishCleanup) {\n        // The first transaction ended, now process observer calls.\n        // Observer call may create new transactions for which we need to call the observers and do cleanup.\n        // We don't want to nest these calls, so we execute these calls one after\n        // another.\n        // Also we need to ensure that all cleanups are called, even if the\n        // observes throw errors.\n        // This file is full of hacky try {} finally {} blocks to ensure that an\n        // event can throw errors and also that the cleanup is called.\n        cleanupTransactions(transactionCleanups, 0);\n      }\n    }\n  }\n  return result\n};\n\nclass StackItem {\n  /**\n   * @param {DeleteSet} deletions\n   * @param {DeleteSet} insertions\n   */\n  constructor (deletions, insertions) {\n    this.insertions = insertions;\n    this.deletions = deletions;\n    /**\n     * Use this to save and restore metadata like selection range\n     */\n    this.meta = new Map();\n  }\n}\n/**\n * @param {Transaction} tr\n * @param {UndoManager} um\n * @param {StackItem} stackItem\n */\nconst clearUndoManagerStackItem = (tr, um, stackItem) => {\n  iterateDeletedStructs(tr, stackItem.deletions, item => {\n    if (item instanceof Item && um.scope.some(type => type === tr.doc || isParentOf(/** @type {AbstractType<any>} */ (type), item))) {\n      keepItem(item, false);\n    }\n  });\n};\n\n/**\n * @param {UndoManager} undoManager\n * @param {Array<StackItem>} stack\n * @param {'undo'|'redo'} eventType\n * @return {StackItem?}\n */\nconst popStackItem = (undoManager, stack, eventType) => {\n  /**\n   * Keep a reference to the transaction so we can fire the event with the changedParentTypes\n   * @type {any}\n   */\n  let _tr = null;\n  const doc = undoManager.doc;\n  const scope = undoManager.scope;\n  transact(doc, transaction => {\n    while (stack.length > 0 && undoManager.currStackItem === null) {\n      const store = doc.store;\n      const stackItem = /** @type {StackItem} */ (stack.pop());\n      /**\n       * @type {Set<Item>}\n       */\n      const itemsToRedo = new Set();\n      /**\n       * @type {Array<Item>}\n       */\n      const itemsToDelete = [];\n      let performedChange = false;\n      iterateDeletedStructs(transaction, stackItem.insertions, struct => {\n        if (struct instanceof Item) {\n          if (struct.redone !== null) {\n            let { item, diff } = followRedone(store, struct.id);\n            if (diff > 0) {\n              item = getItemCleanStart(transaction, createID(item.id.client, item.id.clock + diff));\n            }\n            struct = item;\n          }\n          if (!struct.deleted && scope.some(type => type === transaction.doc || isParentOf(/** @type {AbstractType<any>} */ (type), /** @type {Item} */ (struct)))) {\n            itemsToDelete.push(struct);\n          }\n        }\n      });\n      iterateDeletedStructs(transaction, stackItem.deletions, struct => {\n        if (\n          struct instanceof Item &&\n          scope.some(type => type === transaction.doc || isParentOf(/** @type {AbstractType<any>} */ (type), struct)) &&\n          // Never redo structs in stackItem.insertions because they were created and deleted in the same capture interval.\n          !isDeleted(stackItem.insertions, struct.id)\n        ) {\n          itemsToRedo.add(struct);\n        }\n      });\n      itemsToRedo.forEach(struct => {\n        performedChange = redoItem(transaction, struct, itemsToRedo, stackItem.insertions, undoManager.ignoreRemoteMapChanges, undoManager) !== null || performedChange;\n      });\n      // We want to delete in reverse order so that children are deleted before\n      // parents, so we have more information available when items are filtered.\n      for (let i = itemsToDelete.length - 1; i >= 0; i--) {\n        const item = itemsToDelete[i];\n        if (undoManager.deleteFilter(item)) {\n          item.delete(transaction);\n          performedChange = true;\n        }\n      }\n      undoManager.currStackItem = performedChange ? stackItem : null;\n    }\n    transaction.changed.forEach((subProps, type) => {\n      // destroy search marker if necessary\n      if (subProps.has(null) && type._searchMarker) {\n        type._searchMarker.length = 0;\n      }\n    });\n    _tr = transaction;\n  }, undoManager);\n  const res = undoManager.currStackItem;\n  if (res != null) {\n    const changedParentTypes = _tr.changedParentTypes;\n    undoManager.emit('stack-item-popped', [{ stackItem: res, type: eventType, changedParentTypes, origin: undoManager }, undoManager]);\n    undoManager.currStackItem = null;\n  }\n  return res\n};\n\n/**\n * @typedef {Object} UndoManagerOptions\n * @property {number} [UndoManagerOptions.captureTimeout=500]\n * @property {function(Transaction):boolean} [UndoManagerOptions.captureTransaction] Do not capture changes of a Transaction if result false.\n * @property {function(Item):boolean} [UndoManagerOptions.deleteFilter=()=>true] Sometimes\n * it is necessary to filter what an Undo/Redo operation can delete. If this\n * filter returns false, the type/item won't be deleted even it is in the\n * undo/redo scope.\n * @property {Set<any>} [UndoManagerOptions.trackedOrigins=new Set([null])]\n * @property {boolean} [ignoreRemoteMapChanges] Experimental. By default, the UndoManager will never overwrite remote changes. Enable this property to enable overwriting remote changes on key-value changes (Y.Map, properties on Y.Xml, etc..).\n * @property {Doc} [doc] The document that this UndoManager operates on. Only needed if typeScope is empty.\n */\n\n/**\n * @typedef {Object} StackItemEvent\n * @property {StackItem} StackItemEvent.stackItem\n * @property {any} StackItemEvent.origin\n * @property {'undo'|'redo'} StackItemEvent.type\n * @property {Map<AbstractType<YEvent<any>>,Array<YEvent<any>>>} StackItemEvent.changedParentTypes\n */\n\n/**\n * Fires 'stack-item-added' event when a stack item was added to either the undo- or\n * the redo-stack. You may store additional stack information via the\n * metadata property on `event.stackItem.meta` (it is a `Map` of metadata properties).\n * Fires 'stack-item-popped' event when a stack item was popped from either the\n * undo- or the redo-stack. You may restore the saved stack information from `event.stackItem.meta`.\n *\n * @extends {ObservableV2<{'stack-item-added':function(StackItemEvent, UndoManager):void, 'stack-item-popped': function(StackItemEvent, UndoManager):void, 'stack-cleared': function({ undoStackCleared: boolean, redoStackCleared: boolean }):void, 'stack-item-updated': function(StackItemEvent, UndoManager):void }>}\n */\nclass UndoManager extends ObservableV2 {\n  /**\n   * @param {Doc|AbstractType<any>|Array<AbstractType<any>>} typeScope Limits the scope of the UndoManager. If this is set to a ydoc instance, all changes on that ydoc will be undone. If set to a specific type, only changes on that type or its children will be undone. Also accepts an array of types.\n   * @param {UndoManagerOptions} options\n   */\n  constructor (typeScope, {\n    captureTimeout = 500,\n    captureTransaction = _tr => true,\n    deleteFilter = () => true,\n    trackedOrigins = new Set([null]),\n    ignoreRemoteMapChanges = false,\n    doc = /** @type {Doc} */ (array.isArray(typeScope) ? typeScope[0].doc : typeScope instanceof Doc ? typeScope : typeScope.doc)\n  } = {}) {\n    super();\n    /**\n     * @type {Array<AbstractType<any> | Doc>}\n     */\n    this.scope = [];\n    this.doc = doc;\n    this.addToScope(typeScope);\n    this.deleteFilter = deleteFilter;\n    trackedOrigins.add(this);\n    this.trackedOrigins = trackedOrigins;\n    this.captureTransaction = captureTransaction;\n    /**\n     * @type {Array<StackItem>}\n     */\n    this.undoStack = [];\n    /**\n     * @type {Array<StackItem>}\n     */\n    this.redoStack = [];\n    /**\n     * Whether the client is currently undoing (calling UndoManager.undo)\n     *\n     * @type {boolean}\n     */\n    this.undoing = false;\n    this.redoing = false;\n    /**\n     * The currently popped stack item if UndoManager.undoing or UndoManager.redoing\n     *\n     * @type {StackItem|null}\n     */\n    this.currStackItem = null;\n    this.lastChange = 0;\n    this.ignoreRemoteMapChanges = ignoreRemoteMapChanges;\n    this.captureTimeout = captureTimeout;\n    /**\n     * @param {Transaction} transaction\n     */\n    this.afterTransactionHandler = transaction => {\n      // Only track certain transactions\n      if (\n        !this.captureTransaction(transaction) ||\n        !this.scope.some(type => transaction.changedParentTypes.has(/** @type {AbstractType<any>} */ (type)) || type === this.doc) ||\n        (!this.trackedOrigins.has(transaction.origin) && (!transaction.origin || !this.trackedOrigins.has(transaction.origin.constructor)))\n      ) {\n        return\n      }\n      const undoing = this.undoing;\n      const redoing = this.redoing;\n      const stack = undoing ? this.redoStack : this.undoStack;\n      if (undoing) {\n        this.stopCapturing(); // next undo should not be appended to last stack item\n      } else if (!redoing) {\n        // neither undoing nor redoing: delete redoStack\n        this.clear(false, true);\n      }\n      const insertions = new DeleteSet();\n      transaction.afterState.forEach((endClock, client) => {\n        const startClock = transaction.beforeState.get(client) || 0;\n        const len = endClock - startClock;\n        if (len > 0) {\n          addToDeleteSet(insertions, client, startClock, len);\n        }\n      });\n      const now = time.getUnixTime();\n      let didAdd = false;\n      if (this.lastChange > 0 && now - this.lastChange < this.captureTimeout && stack.length > 0 && !undoing && !redoing) {\n        // append change to last stack op\n        const lastOp = stack[stack.length - 1];\n        lastOp.deletions = mergeDeleteSets([lastOp.deletions, transaction.deleteSet]);\n        lastOp.insertions = mergeDeleteSets([lastOp.insertions, insertions]);\n      } else {\n        // create a new stack op\n        stack.push(new StackItem(transaction.deleteSet, insertions));\n        didAdd = true;\n      }\n      if (!undoing && !redoing) {\n        this.lastChange = now;\n      }\n      // make sure that deleted structs are not gc'd\n      iterateDeletedStructs(transaction, transaction.deleteSet, /** @param {Item|GC} item */ item => {\n        if (item instanceof Item && this.scope.some(type => type === transaction.doc || isParentOf(/** @type {AbstractType<any>} */ (type), item))) {\n          keepItem(item, true);\n        }\n      });\n      /**\n       * @type {[StackItemEvent, UndoManager]}\n       */\n      const changeEvent = [{ stackItem: stack[stack.length - 1], origin: transaction.origin, type: undoing ? 'redo' : 'undo', changedParentTypes: transaction.changedParentTypes }, this];\n      if (didAdd) {\n        this.emit('stack-item-added', changeEvent);\n      } else {\n        this.emit('stack-item-updated', changeEvent);\n      }\n    };\n    this.doc.on('afterTransaction', this.afterTransactionHandler);\n    this.doc.on('destroy', () => {\n      this.destroy();\n    });\n  }\n\n  /**\n   * Extend the scope.\n   *\n   * @param {Array<AbstractType<any> | Doc> | AbstractType<any> | Doc} ytypes\n   */\n  addToScope (ytypes) {\n    const tmpSet = new Set(this.scope);\n    ytypes = array.isArray(ytypes) ? ytypes : [ytypes];\n    ytypes.forEach(ytype => {\n      if (!tmpSet.has(ytype)) {\n        tmpSet.add(ytype);\n        if (ytype instanceof AbstractType ? ytype.doc !== this.doc : ytype !== this.doc) logging.warn('[yjs#509] Not same Y.Doc'); // use MultiDocUndoManager instead. also see https://github.com/yjs/yjs/issues/509\n        this.scope.push(ytype);\n      }\n    });\n  }\n\n  /**\n   * @param {any} origin\n   */\n  addTrackedOrigin (origin) {\n    this.trackedOrigins.add(origin);\n  }\n\n  /**\n   * @param {any} origin\n   */\n  removeTrackedOrigin (origin) {\n    this.trackedOrigins.delete(origin);\n  }\n\n  clear (clearUndoStack = true, clearRedoStack = true) {\n    if ((clearUndoStack && this.canUndo()) || (clearRedoStack && this.canRedo())) {\n      this.doc.transact(tr => {\n        if (clearUndoStack) {\n          this.undoStack.forEach(item => clearUndoManagerStackItem(tr, this, item));\n          this.undoStack = [];\n        }\n        if (clearRedoStack) {\n          this.redoStack.forEach(item => clearUndoManagerStackItem(tr, this, item));\n          this.redoStack = [];\n        }\n        this.emit('stack-cleared', [{ undoStackCleared: clearUndoStack, redoStackCleared: clearRedoStack }]);\n      });\n    }\n  }\n\n  /**\n   * UndoManager merges Undo-StackItem if they are created within time-gap\n   * smaller than `options.captureTimeout`. Call `um.stopCapturing()` so that the next\n   * StackItem won't be merged.\n   *\n   *\n   * @example\n   *     // without stopCapturing\n   *     ytext.insert(0, 'a')\n   *     ytext.insert(1, 'b')\n   *     um.undo()\n   *     ytext.toString() // => '' (note that 'ab' was removed)\n   *     // with stopCapturing\n   *     ytext.insert(0, 'a')\n   *     um.stopCapturing()\n   *     ytext.insert(0, 'b')\n   *     um.undo()\n   *     ytext.toString() // => 'a' (note that only 'b' was removed)\n   *\n   */\n  stopCapturing () {\n    this.lastChange = 0;\n  }\n\n  /**\n   * Undo last changes on type.\n   *\n   * @return {StackItem?} Returns StackItem if a change was applied\n   */\n  undo () {\n    this.undoing = true;\n    let res;\n    try {\n      res = popStackItem(this, this.undoStack, 'undo');\n    } finally {\n      this.undoing = false;\n    }\n    return res\n  }\n\n  /**\n   * Redo last undo operation.\n   *\n   * @return {StackItem?} Returns StackItem if a change was applied\n   */\n  redo () {\n    this.redoing = true;\n    let res;\n    try {\n      res = popStackItem(this, this.redoStack, 'redo');\n    } finally {\n      this.redoing = false;\n    }\n    return res\n  }\n\n  /**\n   * Are undo steps available?\n   *\n   * @return {boolean} `true` if undo is possible\n   */\n  canUndo () {\n    return this.undoStack.length > 0\n  }\n\n  /**\n   * Are redo steps available?\n   *\n   * @return {boolean} `true` if redo is possible\n   */\n  canRedo () {\n    return this.redoStack.length > 0\n  }\n\n  destroy () {\n    this.trackedOrigins.delete(this);\n    this.doc.off('afterTransaction', this.afterTransactionHandler);\n    super.destroy();\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n */\nfunction * lazyStructReaderGenerator (decoder) {\n  const numOfStateUpdates = decoding.readVarUint(decoder.restDecoder);\n  for (let i = 0; i < numOfStateUpdates; i++) {\n    const numberOfStructs = decoding.readVarUint(decoder.restDecoder);\n    const client = decoder.readClient();\n    let clock = decoding.readVarUint(decoder.restDecoder);\n    for (let i = 0; i < numberOfStructs; i++) {\n      const info = decoder.readInfo();\n      // @todo use switch instead of ifs\n      if (info === 10) {\n        const len = decoding.readVarUint(decoder.restDecoder);\n        yield new Skip(createID(client, clock), len);\n        clock += len;\n      } else if ((binary.BITS5 & info) !== 0) {\n        const cantCopyParentInfo = (info & (binary.BIT7 | binary.BIT8)) === 0;\n        // If parent = null and neither left nor right are defined, then we know that `parent` is child of `y`\n        // and we read the next string as parentYKey.\n        // It indicates how we store/retrieve parent from `y.share`\n        // @type {string|null}\n        const struct = new Item(\n          createID(client, clock),\n          null, // left\n          (info & binary.BIT8) === binary.BIT8 ? decoder.readLeftID() : null, // origin\n          null, // right\n          (info & binary.BIT7) === binary.BIT7 ? decoder.readRightID() : null, // right origin\n          // @ts-ignore Force writing a string here.\n          cantCopyParentInfo ? (decoder.readParentInfo() ? decoder.readString() : decoder.readLeftID()) : null, // parent\n          cantCopyParentInfo && (info & binary.BIT6) === binary.BIT6 ? decoder.readString() : null, // parentSub\n          readItemContent(decoder, info) // item content\n        );\n        yield struct;\n        clock += struct.length;\n      } else {\n        const len = decoder.readLen();\n        yield new GC(createID(client, clock), len);\n        clock += len;\n      }\n    }\n  }\n}\n\nclass LazyStructReader {\n  /**\n   * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n   * @param {boolean} filterSkips\n   */\n  constructor (decoder, filterSkips) {\n    this.gen = lazyStructReaderGenerator(decoder);\n    /**\n     * @type {null | Item | Skip | GC}\n     */\n    this.curr = null;\n    this.done = false;\n    this.filterSkips = filterSkips;\n    this.next();\n  }\n\n  /**\n   * @return {Item | GC | Skip |null}\n   */\n  next () {\n    // ignore \"Skip\" structs\n    do {\n      this.curr = this.gen.next().value || null;\n    } while (this.filterSkips && this.curr !== null && this.curr.constructor === Skip)\n    return this.curr\n  }\n}\n\n/**\n * @param {Uint8Array} update\n *\n */\nconst logUpdate = update => logUpdateV2(update, UpdateDecoderV1);\n\n/**\n * @param {Uint8Array} update\n * @param {typeof UpdateDecoderV2 | typeof UpdateDecoderV1} [YDecoder]\n *\n */\nconst logUpdateV2 = (update, YDecoder = UpdateDecoderV2) => {\n  const structs = [];\n  const updateDecoder = new YDecoder(decoding.createDecoder(update));\n  const lazyDecoder = new LazyStructReader(updateDecoder, false);\n  for (let curr = lazyDecoder.curr; curr !== null; curr = lazyDecoder.next()) {\n    structs.push(curr);\n  }\n  logging.print('Structs: ', structs);\n  const ds = readDeleteSet(updateDecoder);\n  logging.print('DeleteSet: ', ds);\n};\n\n/**\n * @param {Uint8Array} update\n *\n */\nconst decodeUpdate = (update) => decodeUpdateV2(update, UpdateDecoderV1);\n\n/**\n * @param {Uint8Array} update\n * @param {typeof UpdateDecoderV2 | typeof UpdateDecoderV1} [YDecoder]\n *\n */\nconst decodeUpdateV2 = (update, YDecoder = UpdateDecoderV2) => {\n  const structs = [];\n  const updateDecoder = new YDecoder(decoding.createDecoder(update));\n  const lazyDecoder = new LazyStructReader(updateDecoder, false);\n  for (let curr = lazyDecoder.curr; curr !== null; curr = lazyDecoder.next()) {\n    structs.push(curr);\n  }\n  return {\n    structs,\n    ds: readDeleteSet(updateDecoder)\n  }\n};\n\nclass LazyStructWriter {\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  constructor (encoder) {\n    this.currClient = 0;\n    this.startClock = 0;\n    this.written = 0;\n    this.encoder = encoder;\n    /**\n     * We want to write operations lazily, but also we need to know beforehand how many operations we want to write for each client.\n     *\n     * This kind of meta-information (#clients, #structs-per-client-written) is written to the restEncoder.\n     *\n     * We fragment the restEncoder and store a slice of it per-client until we know how many clients there are.\n     * When we flush (toUint8Array) we write the restEncoder using the fragments and the meta-information.\n     *\n     * @type {Array<{ written: number, restEncoder: Uint8Array }>}\n     */\n    this.clientStructs = [];\n  }\n}\n\n/**\n * @param {Array<Uint8Array>} updates\n * @return {Uint8Array}\n */\nconst mergeUpdates = updates => mergeUpdatesV2(updates, UpdateDecoderV1, UpdateEncoderV1);\n\n/**\n * @param {Uint8Array} update\n * @param {typeof DSEncoderV1 | typeof DSEncoderV2} YEncoder\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} YDecoder\n * @return {Uint8Array}\n */\nconst encodeStateVectorFromUpdateV2 = (update, YEncoder = DSEncoderV2, YDecoder = UpdateDecoderV2) => {\n  const encoder = new YEncoder();\n  const updateDecoder = new LazyStructReader(new YDecoder(decoding.createDecoder(update)), false);\n  let curr = updateDecoder.curr;\n  if (curr !== null) {\n    let size = 0;\n    let currClient = curr.id.client;\n    let stopCounting = curr.id.clock !== 0; // must start at 0\n    let currClock = stopCounting ? 0 : curr.id.clock + curr.length;\n    for (; curr !== null; curr = updateDecoder.next()) {\n      if (currClient !== curr.id.client) {\n        if (currClock !== 0) {\n          size++;\n          // We found a new client\n          // write what we have to the encoder\n          encoding.writeVarUint(encoder.restEncoder, currClient);\n          encoding.writeVarUint(encoder.restEncoder, currClock);\n        }\n        currClient = curr.id.client;\n        currClock = 0;\n        stopCounting = curr.id.clock !== 0;\n      }\n      // we ignore skips\n      if (curr.constructor === Skip) {\n        stopCounting = true;\n      }\n      if (!stopCounting) {\n        currClock = curr.id.clock + curr.length;\n      }\n    }\n    // write what we have\n    if (currClock !== 0) {\n      size++;\n      encoding.writeVarUint(encoder.restEncoder, currClient);\n      encoding.writeVarUint(encoder.restEncoder, currClock);\n    }\n    // prepend the size of the state vector\n    const enc = encoding.createEncoder();\n    encoding.writeVarUint(enc, size);\n    encoding.writeBinaryEncoder(enc, encoder.restEncoder);\n    encoder.restEncoder = enc;\n    return encoder.toUint8Array()\n  } else {\n    encoding.writeVarUint(encoder.restEncoder, 0);\n    return encoder.toUint8Array()\n  }\n};\n\n/**\n * @param {Uint8Array} update\n * @return {Uint8Array}\n */\nconst encodeStateVectorFromUpdate = update => encodeStateVectorFromUpdateV2(update, DSEncoderV1, UpdateDecoderV1);\n\n/**\n * @param {Uint8Array} update\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} YDecoder\n * @return {{ from: Map<number,number>, to: Map<number,number> }}\n */\nconst parseUpdateMetaV2 = (update, YDecoder = UpdateDecoderV2) => {\n  /**\n   * @type {Map<number, number>}\n   */\n  const from = new Map();\n  /**\n   * @type {Map<number, number>}\n   */\n  const to = new Map();\n  const updateDecoder = new LazyStructReader(new YDecoder(decoding.createDecoder(update)), false);\n  let curr = updateDecoder.curr;\n  if (curr !== null) {\n    let currClient = curr.id.client;\n    let currClock = curr.id.clock;\n    // write the beginning to `from`\n    from.set(currClient, currClock);\n    for (; curr !== null; curr = updateDecoder.next()) {\n      if (currClient !== curr.id.client) {\n        // We found a new client\n        // write the end to `to`\n        to.set(currClient, currClock);\n        // write the beginning to `from`\n        from.set(curr.id.client, curr.id.clock);\n        // update currClient\n        currClient = curr.id.client;\n      }\n      currClock = curr.id.clock + curr.length;\n    }\n    // write the end to `to`\n    to.set(currClient, currClock);\n  }\n  return { from, to }\n};\n\n/**\n * @param {Uint8Array} update\n * @return {{ from: Map<number,number>, to: Map<number,number> }}\n */\nconst parseUpdateMeta = update => parseUpdateMetaV2(update, UpdateDecoderV1);\n\n/**\n * This method is intended to slice any kind of struct and retrieve the right part.\n * It does not handle side-effects, so it should only be used by the lazy-encoder.\n *\n * @param {Item | GC | Skip} left\n * @param {number} diff\n * @return {Item | GC}\n */\nconst sliceStruct = (left, diff) => {\n  if (left.constructor === GC) {\n    const { client, clock } = left.id;\n    return new GC(createID(client, clock + diff), left.length - diff)\n  } else if (left.constructor === Skip) {\n    const { client, clock } = left.id;\n    return new Skip(createID(client, clock + diff), left.length - diff)\n  } else {\n    const leftItem = /** @type {Item} */ (left);\n    const { client, clock } = leftItem.id;\n    return new Item(\n      createID(client, clock + diff),\n      null,\n      createID(client, clock + diff - 1),\n      null,\n      leftItem.rightOrigin,\n      leftItem.parent,\n      leftItem.parentSub,\n      leftItem.content.splice(diff)\n    )\n  }\n};\n\n/**\n *\n * This function works similarly to `readUpdateV2`.\n *\n * @param {Array<Uint8Array>} updates\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} [YDecoder]\n * @param {typeof UpdateEncoderV1 | typeof UpdateEncoderV2} [YEncoder]\n * @return {Uint8Array}\n */\nconst mergeUpdatesV2 = (updates, YDecoder = UpdateDecoderV2, YEncoder = UpdateEncoderV2) => {\n  if (updates.length === 1) {\n    return updates[0]\n  }\n  const updateDecoders = updates.map(update => new YDecoder(decoding.createDecoder(update)));\n  let lazyStructDecoders = updateDecoders.map(decoder => new LazyStructReader(decoder, true));\n\n  /**\n   * @todo we don't need offset because we always slice before\n   * @type {null | { struct: Item | GC | Skip, offset: number }}\n   */\n  let currWrite = null;\n\n  const updateEncoder = new YEncoder();\n  // write structs lazily\n  const lazyStructEncoder = new LazyStructWriter(updateEncoder);\n\n  // Note: We need to ensure that all lazyStructDecoders are fully consumed\n  // Note: Should merge document updates whenever possible - even from different updates\n  // Note: Should handle that some operations cannot be applied yet ()\n\n  while (true) {\n    // Write higher clients first â‡’ sort by clientID & clock and remove decoders without content\n    lazyStructDecoders = lazyStructDecoders.filter(dec => dec.curr !== null);\n    lazyStructDecoders.sort(\n      /** @type {function(any,any):number} */ (dec1, dec2) => {\n        if (dec1.curr.id.client === dec2.curr.id.client) {\n          const clockDiff = dec1.curr.id.clock - dec2.curr.id.clock;\n          if (clockDiff === 0) {\n            // @todo remove references to skip since the structDecoders must filter Skips.\n            return dec1.curr.constructor === dec2.curr.constructor\n              ? 0\n              : dec1.curr.constructor === Skip ? 1 : -1 // we are filtering skips anyway.\n          } else {\n            return clockDiff\n          }\n        } else {\n          return dec2.curr.id.client - dec1.curr.id.client\n        }\n      }\n    );\n    if (lazyStructDecoders.length === 0) {\n      break\n    }\n    const currDecoder = lazyStructDecoders[0];\n    // write from currDecoder until the next operation is from another client or if filler-struct\n    // then we need to reorder the decoders and find the next operation to write\n    const firstClient = /** @type {Item | GC} */ (currDecoder.curr).id.client;\n\n    if (currWrite !== null) {\n      let curr = /** @type {Item | GC | null} */ (currDecoder.curr);\n      let iterated = false;\n\n      // iterate until we find something that we haven't written already\n      // remember: first the high client-ids are written\n      while (curr !== null && curr.id.clock + curr.length <= currWrite.struct.id.clock + currWrite.struct.length && curr.id.client >= currWrite.struct.id.client) {\n        curr = currDecoder.next();\n        iterated = true;\n      }\n      if (\n        curr === null || // current decoder is empty\n        curr.id.client !== firstClient || // check whether there is another decoder that has has updates from `firstClient`\n        (iterated && curr.id.clock > currWrite.struct.id.clock + currWrite.struct.length) // the above while loop was used and we are potentially missing updates\n      ) {\n        continue\n      }\n\n      if (firstClient !== currWrite.struct.id.client) {\n        writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset);\n        currWrite = { struct: curr, offset: 0 };\n        currDecoder.next();\n      } else {\n        if (currWrite.struct.id.clock + currWrite.struct.length < curr.id.clock) {\n          // @todo write currStruct & set currStruct = Skip(clock = currStruct.id.clock + currStruct.length, length = curr.id.clock - self.clock)\n          if (currWrite.struct.constructor === Skip) {\n            // extend existing skip\n            currWrite.struct.length = curr.id.clock + curr.length - currWrite.struct.id.clock;\n          } else {\n            writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset);\n            const diff = curr.id.clock - currWrite.struct.id.clock - currWrite.struct.length;\n            /**\n             * @type {Skip}\n             */\n            const struct = new Skip(createID(firstClient, currWrite.struct.id.clock + currWrite.struct.length), diff);\n            currWrite = { struct, offset: 0 };\n          }\n        } else { // if (currWrite.struct.id.clock + currWrite.struct.length >= curr.id.clock) {\n          const diff = currWrite.struct.id.clock + currWrite.struct.length - curr.id.clock;\n          if (diff > 0) {\n            if (currWrite.struct.constructor === Skip) {\n              // prefer to slice Skip because the other struct might contain more information\n              currWrite.struct.length -= diff;\n            } else {\n              curr = sliceStruct(curr, diff);\n            }\n          }\n          if (!currWrite.struct.mergeWith(/** @type {any} */ (curr))) {\n            writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset);\n            currWrite = { struct: curr, offset: 0 };\n            currDecoder.next();\n          }\n        }\n      }\n    } else {\n      currWrite = { struct: /** @type {Item | GC} */ (currDecoder.curr), offset: 0 };\n      currDecoder.next();\n    }\n    for (\n      let next = currDecoder.curr;\n      next !== null && next.id.client === firstClient && next.id.clock === currWrite.struct.id.clock + currWrite.struct.length && next.constructor !== Skip;\n      next = currDecoder.next()\n    ) {\n      writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset);\n      currWrite = { struct: next, offset: 0 };\n    }\n  }\n  if (currWrite !== null) {\n    writeStructToLazyStructWriter(lazyStructEncoder, currWrite.struct, currWrite.offset);\n    currWrite = null;\n  }\n  finishLazyStructWriting(lazyStructEncoder);\n\n  const dss = updateDecoders.map(decoder => readDeleteSet(decoder));\n  const ds = mergeDeleteSets(dss);\n  writeDeleteSet(updateEncoder, ds);\n  return updateEncoder.toUint8Array()\n};\n\n/**\n * @param {Uint8Array} update\n * @param {Uint8Array} sv\n * @param {typeof UpdateDecoderV1 | typeof UpdateDecoderV2} [YDecoder]\n * @param {typeof UpdateEncoderV1 | typeof UpdateEncoderV2} [YEncoder]\n */\nconst diffUpdateV2 = (update, sv, YDecoder = UpdateDecoderV2, YEncoder = UpdateEncoderV2) => {\n  const state = decodeStateVector(sv);\n  const encoder = new YEncoder();\n  const lazyStructWriter = new LazyStructWriter(encoder);\n  const decoder = new YDecoder(decoding.createDecoder(update));\n  const reader = new LazyStructReader(decoder, false);\n  while (reader.curr) {\n    const curr = reader.curr;\n    const currClient = curr.id.client;\n    const svClock = state.get(currClient) || 0;\n    if (reader.curr.constructor === Skip) {\n      // the first written struct shouldn't be a skip\n      reader.next();\n      continue\n    }\n    if (curr.id.clock + curr.length > svClock) {\n      writeStructToLazyStructWriter(lazyStructWriter, curr, math.max(svClock - curr.id.clock, 0));\n      reader.next();\n      while (reader.curr && reader.curr.id.client === currClient) {\n        writeStructToLazyStructWriter(lazyStructWriter, reader.curr, 0);\n        reader.next();\n      }\n    } else {\n      // read until something new comes up\n      while (reader.curr && reader.curr.id.client === currClient && reader.curr.id.clock + reader.curr.length <= svClock) {\n        reader.next();\n      }\n    }\n  }\n  finishLazyStructWriting(lazyStructWriter);\n  // write ds\n  const ds = readDeleteSet(decoder);\n  writeDeleteSet(encoder, ds);\n  return encoder.toUint8Array()\n};\n\n/**\n * @param {Uint8Array} update\n * @param {Uint8Array} sv\n */\nconst diffUpdate = (update, sv) => diffUpdateV2(update, sv, UpdateDecoderV1, UpdateEncoderV1);\n\n/**\n * @param {LazyStructWriter} lazyWriter\n */\nconst flushLazyStructWriter = lazyWriter => {\n  if (lazyWriter.written > 0) {\n    lazyWriter.clientStructs.push({ written: lazyWriter.written, restEncoder: encoding.toUint8Array(lazyWriter.encoder.restEncoder) });\n    lazyWriter.encoder.restEncoder = encoding.createEncoder();\n    lazyWriter.written = 0;\n  }\n};\n\n/**\n * @param {LazyStructWriter} lazyWriter\n * @param {Item | GC} struct\n * @param {number} offset\n */\nconst writeStructToLazyStructWriter = (lazyWriter, struct, offset) => {\n  // flush curr if we start another client\n  if (lazyWriter.written > 0 && lazyWriter.currClient !== struct.id.client) {\n    flushLazyStructWriter(lazyWriter);\n  }\n  if (lazyWriter.written === 0) {\n    lazyWriter.currClient = struct.id.client;\n    // write next client\n    lazyWriter.encoder.writeClient(struct.id.client);\n    // write startClock\n    encoding.writeVarUint(lazyWriter.encoder.restEncoder, struct.id.clock + offset);\n  }\n  struct.write(lazyWriter.encoder, offset);\n  lazyWriter.written++;\n};\n/**\n * Call this function when we collected all parts and want to\n * put all the parts together. After calling this method,\n * you can continue using the UpdateEncoder.\n *\n * @param {LazyStructWriter} lazyWriter\n */\nconst finishLazyStructWriting = (lazyWriter) => {\n  flushLazyStructWriter(lazyWriter);\n\n  // this is a fresh encoder because we called flushCurr\n  const restEncoder = lazyWriter.encoder.restEncoder;\n\n  /**\n   * Now we put all the fragments together.\n   * This works similarly to `writeClientsStructs`\n   */\n\n  // write # states that were updated - i.e. the clients\n  encoding.writeVarUint(restEncoder, lazyWriter.clientStructs.length);\n\n  for (let i = 0; i < lazyWriter.clientStructs.length; i++) {\n    const partStructs = lazyWriter.clientStructs[i];\n    /**\n     * Works similarly to `writeStructs`\n     */\n    // write # encoded structs\n    encoding.writeVarUint(restEncoder, partStructs.written);\n    // write the rest of the fragment\n    encoding.writeUint8Array(restEncoder, partStructs.restEncoder);\n  }\n};\n\n/**\n * @param {Uint8Array} update\n * @param {function(Item|GC|Skip):Item|GC|Skip} blockTransformer\n * @param {typeof UpdateDecoderV2 | typeof UpdateDecoderV1} YDecoder\n * @param {typeof UpdateEncoderV2 | typeof UpdateEncoderV1 } YEncoder\n */\nconst convertUpdateFormat = (update, blockTransformer, YDecoder, YEncoder) => {\n  const updateDecoder = new YDecoder(decoding.createDecoder(update));\n  const lazyDecoder = new LazyStructReader(updateDecoder, false);\n  const updateEncoder = new YEncoder();\n  const lazyWriter = new LazyStructWriter(updateEncoder);\n  for (let curr = lazyDecoder.curr; curr !== null; curr = lazyDecoder.next()) {\n    writeStructToLazyStructWriter(lazyWriter, blockTransformer(curr), 0);\n  }\n  finishLazyStructWriting(lazyWriter);\n  const ds = readDeleteSet(updateDecoder);\n  writeDeleteSet(updateEncoder, ds);\n  return updateEncoder.toUint8Array()\n};\n\n/**\n * @typedef {Object} ObfuscatorOptions\n * @property {boolean} [ObfuscatorOptions.formatting=true]\n * @property {boolean} [ObfuscatorOptions.subdocs=true]\n * @property {boolean} [ObfuscatorOptions.yxml=true] Whether to obfuscate nodeName / hookName\n */\n\n/**\n * @param {ObfuscatorOptions} obfuscator\n */\nconst createObfuscator = ({ formatting = true, subdocs = true, yxml = true } = {}) => {\n  let i = 0;\n  const mapKeyCache = map.create();\n  const nodeNameCache = map.create();\n  const formattingKeyCache = map.create();\n  const formattingValueCache = map.create();\n  formattingValueCache.set(null, null); // end of a formatting range should always be the end of a formatting range\n  /**\n   * @param {Item|GC|Skip} block\n   * @return {Item|GC|Skip}\n   */\n  return block => {\n    switch (block.constructor) {\n      case GC:\n      case Skip:\n        return block\n      case Item: {\n        const item = /** @type {Item} */ (block);\n        const content = item.content;\n        switch (content.constructor) {\n          case ContentDeleted:\n            break\n          case ContentType: {\n            if (yxml) {\n              const type = /** @type {ContentType} */ (content).type;\n              if (type instanceof YXmlElement) {\n                type.nodeName = map.setIfUndefined(nodeNameCache, type.nodeName, () => 'node-' + i);\n              }\n              if (type instanceof YXmlHook) {\n                type.hookName = map.setIfUndefined(nodeNameCache, type.hookName, () => 'hook-' + i);\n              }\n            }\n            break\n          }\n          case ContentAny: {\n            const c = /** @type {ContentAny} */ (content);\n            c.arr = c.arr.map(() => i);\n            break\n          }\n          case ContentBinary: {\n            const c = /** @type {ContentBinary} */ (content);\n            c.content = new Uint8Array([i]);\n            break\n          }\n          case ContentDoc: {\n            const c = /** @type {ContentDoc} */ (content);\n            if (subdocs) {\n              c.opts = {};\n              c.doc.guid = i + '';\n            }\n            break\n          }\n          case ContentEmbed: {\n            const c = /** @type {ContentEmbed} */ (content);\n            c.embed = {};\n            break\n          }\n          case ContentFormat: {\n            const c = /** @type {ContentFormat} */ (content);\n            if (formatting) {\n              c.key = map.setIfUndefined(formattingKeyCache, c.key, () => i + '');\n              c.value = map.setIfUndefined(formattingValueCache, c.value, () => ({ i }));\n            }\n            break\n          }\n          case ContentJSON: {\n            const c = /** @type {ContentJSON} */ (content);\n            c.arr = c.arr.map(() => i);\n            break\n          }\n          case ContentString: {\n            const c = /** @type {ContentString} */ (content);\n            c.str = string.repeat((i % 10) + '', c.str.length);\n            break\n          }\n          default:\n            // unknown content type\n            error.unexpectedCase();\n        }\n        if (item.parentSub) {\n          item.parentSub = map.setIfUndefined(mapKeyCache, item.parentSub, () => i + '');\n        }\n        i++;\n        return block\n      }\n      default:\n        // unknown block-type\n        error.unexpectedCase();\n    }\n  }\n};\n\n/**\n * This function obfuscates the content of a Yjs update. This is useful to share\n * buggy Yjs documents while significantly limiting the possibility that a\n * developer can on the user. Note that it might still be possible to deduce\n * some information by analyzing the \"structure\" of the document or by analyzing\n * the typing behavior using the CRDT-related metadata that is still kept fully\n * intact.\n *\n * @param {Uint8Array} update\n * @param {ObfuscatorOptions} [opts]\n */\nconst obfuscateUpdate = (update, opts) => convertUpdateFormat(update, createObfuscator(opts), UpdateDecoderV1, UpdateEncoderV1);\n\n/**\n * @param {Uint8Array} update\n * @param {ObfuscatorOptions} [opts]\n */\nconst obfuscateUpdateV2 = (update, opts) => convertUpdateFormat(update, createObfuscator(opts), UpdateDecoderV2, UpdateEncoderV2);\n\n/**\n * @param {Uint8Array} update\n */\nconst convertUpdateFormatV1ToV2 = update => convertUpdateFormat(update, f.id, UpdateDecoderV1, UpdateEncoderV2);\n\n/**\n * @param {Uint8Array} update\n */\nconst convertUpdateFormatV2ToV1 = update => convertUpdateFormat(update, f.id, UpdateDecoderV2, UpdateEncoderV1);\n\nconst errorComputeChanges = 'You must not compute changes after the event-handler fired.';\n\n/**\n * @template {AbstractType<any>} T\n * YEvent describes the changes on a YType.\n */\nclass YEvent {\n  /**\n   * @param {T} target The changed type.\n   * @param {Transaction} transaction\n   */\n  constructor (target, transaction) {\n    /**\n     * The type on which this event was created on.\n     * @type {T}\n     */\n    this.target = target;\n    /**\n     * The current target on which the observe callback is called.\n     * @type {AbstractType<any>}\n     */\n    this.currentTarget = target;\n    /**\n     * The transaction that triggered this event.\n     * @type {Transaction}\n     */\n    this.transaction = transaction;\n    /**\n     * @type {Object|null}\n     */\n    this._changes = null;\n    /**\n     * @type {null | Map<string, { action: 'add' | 'update' | 'delete', oldValue: any, newValue: any }>}\n     */\n    this._keys = null;\n    /**\n     * @type {null | Array<{ insert?: string | Array<any> | object | AbstractType<any>, retain?: number, delete?: number, attributes?: Object<string, any> }>}\n     */\n    this._delta = null;\n    /**\n     * @type {Array<string|number>|null}\n     */\n    this._path = null;\n  }\n\n  /**\n   * Computes the path from `y` to the changed type.\n   *\n   * @todo v14 should standardize on path: Array<{parent, index}> because that is easier to work with.\n   *\n   * The following property holds:\n   * @example\n   *   let type = y\n   *   event.path.forEach(dir => {\n   *     type = type.get(dir)\n   *   })\n   *   type === event.target // => true\n   */\n  get path () {\n    return this._path || (this._path = getPathTo(this.currentTarget, this.target))\n  }\n\n  /**\n   * Check if a struct is deleted by this event.\n   *\n   * In contrast to change.deleted, this method also returns true if the struct was added and then deleted.\n   *\n   * @param {AbstractStruct} struct\n   * @return {boolean}\n   */\n  deletes (struct) {\n    return isDeleted(this.transaction.deleteSet, struct.id)\n  }\n\n  /**\n   * @type {Map<string, { action: 'add' | 'update' | 'delete', oldValue: any, newValue: any }>}\n   */\n  get keys () {\n    if (this._keys === null) {\n      if (this.transaction.doc._transactionCleanups.length === 0) {\n        throw error.create(errorComputeChanges)\n      }\n      const keys = new Map();\n      const target = this.target;\n      const changed = /** @type Set<string|null> */ (this.transaction.changed.get(target));\n      changed.forEach(key => {\n        if (key !== null) {\n          const item = /** @type {Item} */ (target._map.get(key));\n          /**\n           * @type {'delete' | 'add' | 'update'}\n           */\n          let action;\n          let oldValue;\n          if (this.adds(item)) {\n            let prev = item.left;\n            while (prev !== null && this.adds(prev)) {\n              prev = prev.left;\n            }\n            if (this.deletes(item)) {\n              if (prev !== null && this.deletes(prev)) {\n                action = 'delete';\n                oldValue = array.last(prev.content.getContent());\n              } else {\n                return\n              }\n            } else {\n              if (prev !== null && this.deletes(prev)) {\n                action = 'update';\n                oldValue = array.last(prev.content.getContent());\n              } else {\n                action = 'add';\n                oldValue = undefined;\n              }\n            }\n          } else {\n            if (this.deletes(item)) {\n              action = 'delete';\n              oldValue = array.last(/** @type {Item} */ item.content.getContent());\n            } else {\n              return // nop\n            }\n          }\n          keys.set(key, { action, oldValue });\n        }\n      });\n      this._keys = keys;\n    }\n    return this._keys\n  }\n\n  /**\n   * This is a computed property. Note that this can only be safely computed during the\n   * event call. Computing this property after other changes happened might result in\n   * unexpected behavior (incorrect computation of deltas). A safe way to collect changes\n   * is to store the `changes` or the `delta` object. Avoid storing the `transaction` object.\n   *\n   * @type {Array<{insert?: string | Array<any> | object | AbstractType<any>, retain?: number, delete?: number, attributes?: Object<string, any>}>}\n   */\n  get delta () {\n    return this.changes.delta\n  }\n\n  /**\n   * Check if a struct is added by this event.\n   *\n   * In contrast to change.deleted, this method also returns true if the struct was added and then deleted.\n   *\n   * @param {AbstractStruct} struct\n   * @return {boolean}\n   */\n  adds (struct) {\n    return struct.id.clock >= (this.transaction.beforeState.get(struct.id.client) || 0)\n  }\n\n  /**\n   * This is a computed property. Note that this can only be safely computed during the\n   * event call. Computing this property after other changes happened might result in\n   * unexpected behavior (incorrect computation of deltas). A safe way to collect changes\n   * is to store the `changes` or the `delta` object. Avoid storing the `transaction` object.\n   *\n   * @type {{added:Set<Item>,deleted:Set<Item>,keys:Map<string,{action:'add'|'update'|'delete',oldValue:any}>,delta:Array<{insert?:Array<any>|string, delete?:number, retain?:number}>}}\n   */\n  get changes () {\n    let changes = this._changes;\n    if (changes === null) {\n      if (this.transaction.doc._transactionCleanups.length === 0) {\n        throw error.create(errorComputeChanges)\n      }\n      const target = this.target;\n      const added = set.create();\n      const deleted = set.create();\n      /**\n       * @type {Array<{insert:Array<any>}|{delete:number}|{retain:number}>}\n       */\n      const delta = [];\n      changes = {\n        added,\n        deleted,\n        delta,\n        keys: this.keys\n      };\n      const changed = /** @type Set<string|null> */ (this.transaction.changed.get(target));\n      if (changed.has(null)) {\n        /**\n         * @type {any}\n         */\n        let lastOp = null;\n        const packOp = () => {\n          if (lastOp) {\n            delta.push(lastOp);\n          }\n        };\n        for (let item = target._start; item !== null; item = item.right) {\n          if (item.deleted) {\n            if (this.deletes(item) && !this.adds(item)) {\n              if (lastOp === null || lastOp.delete === undefined) {\n                packOp();\n                lastOp = { delete: 0 };\n              }\n              lastOp.delete += item.length;\n              deleted.add(item);\n            } // else nop\n          } else {\n            if (this.adds(item)) {\n              if (lastOp === null || lastOp.insert === undefined) {\n                packOp();\n                lastOp = { insert: [] };\n              }\n              lastOp.insert = lastOp.insert.concat(item.content.getContent());\n              added.add(item);\n            } else {\n              if (lastOp === null || lastOp.retain === undefined) {\n                packOp();\n                lastOp = { retain: 0 };\n              }\n              lastOp.retain += item.length;\n            }\n          }\n        }\n        if (lastOp !== null && lastOp.retain === undefined) {\n          packOp();\n        }\n      }\n      this._changes = changes;\n    }\n    return /** @type {any} */ (changes)\n  }\n}\n\n/**\n * Compute the path from this type to the specified target.\n *\n * @example\n *   // `child` should be accessible via `type.get(path[0]).get(path[1])..`\n *   const path = type.getPathTo(child)\n *   // assuming `type instanceof YArray`\n *   console.log(path) // might look like => [2, 'key1']\n *   child === type.get(path[0]).get(path[1])\n *\n * @param {AbstractType<any>} parent\n * @param {AbstractType<any>} child target\n * @return {Array<string|number>} Path to the target\n *\n * @private\n * @function\n */\nconst getPathTo = (parent, child) => {\n  const path = [];\n  while (child._item !== null && child !== parent) {\n    if (child._item.parentSub !== null) {\n      // parent is map-ish\n      path.unshift(child._item.parentSub);\n    } else {\n      // parent is array-ish\n      let i = 0;\n      let c = /** @type {AbstractType<any>} */ (child._item.parent)._start;\n      while (c !== child._item && c !== null) {\n        if (!c.deleted && c.countable) {\n          i += c.length;\n        }\n        c = c.right;\n      }\n      path.unshift(i);\n    }\n    child = /** @type {AbstractType<any>} */ (child._item.parent);\n  }\n  return path\n};\n\n/**\n * https://docs.yjs.dev/getting-started/working-with-shared-types#caveats\n */\nconst warnPrematureAccess = () => { logging.warn('Invalid access: Add Yjs type to a document before reading data.'); };\n\nconst maxSearchMarker = 80;\n\n/**\n * A unique timestamp that identifies each marker.\n *\n * Time is relative,.. this is more like an ever-increasing clock.\n *\n * @type {number}\n */\nlet globalSearchMarkerTimestamp = 0;\n\nclass ArraySearchMarker {\n  /**\n   * @param {Item} p\n   * @param {number} index\n   */\n  constructor (p, index) {\n    p.marker = true;\n    this.p = p;\n    this.index = index;\n    this.timestamp = globalSearchMarkerTimestamp++;\n  }\n}\n\n/**\n * @param {ArraySearchMarker} marker\n */\nconst refreshMarkerTimestamp = marker => { marker.timestamp = globalSearchMarkerTimestamp++; };\n\n/**\n * This is rather complex so this function is the only thing that should overwrite a marker\n *\n * @param {ArraySearchMarker} marker\n * @param {Item} p\n * @param {number} index\n */\nconst overwriteMarker = (marker, p, index) => {\n  marker.p.marker = false;\n  marker.p = p;\n  p.marker = true;\n  marker.index = index;\n  marker.timestamp = globalSearchMarkerTimestamp++;\n};\n\n/**\n * @param {Array<ArraySearchMarker>} searchMarker\n * @param {Item} p\n * @param {number} index\n */\nconst markPosition = (searchMarker, p, index) => {\n  if (searchMarker.length >= maxSearchMarker) {\n    // override oldest marker (we don't want to create more objects)\n    const marker = searchMarker.reduce((a, b) => a.timestamp < b.timestamp ? a : b);\n    overwriteMarker(marker, p, index);\n    return marker\n  } else {\n    // create new marker\n    const pm = new ArraySearchMarker(p, index);\n    searchMarker.push(pm);\n    return pm\n  }\n};\n\n/**\n * Search marker help us to find positions in the associative array faster.\n *\n * They speed up the process of finding a position without much bookkeeping.\n *\n * A maximum of `maxSearchMarker` objects are created.\n *\n * This function always returns a refreshed marker (updated timestamp)\n *\n * @param {AbstractType<any>} yarray\n * @param {number} index\n */\nconst findMarker = (yarray, index) => {\n  if (yarray._start === null || index === 0 || yarray._searchMarker === null) {\n    return null\n  }\n  const marker = yarray._searchMarker.length === 0 ? null : yarray._searchMarker.reduce((a, b) => math.abs(index - a.index) < math.abs(index - b.index) ? a : b);\n  let p = yarray._start;\n  let pindex = 0;\n  if (marker !== null) {\n    p = marker.p;\n    pindex = marker.index;\n    refreshMarkerTimestamp(marker); // we used it, we might need to use it again\n  }\n  // iterate to right if possible\n  while (p.right !== null && pindex < index) {\n    if (!p.deleted && p.countable) {\n      if (index < pindex + p.length) {\n        break\n      }\n      pindex += p.length;\n    }\n    p = p.right;\n  }\n  // iterate to left if necessary (might be that pindex > index)\n  while (p.left !== null && pindex > index) {\n    p = p.left;\n    if (!p.deleted && p.countable) {\n      pindex -= p.length;\n    }\n  }\n  // we want to make sure that p can't be merged with left, because that would screw up everything\n  // in that cas just return what we have (it is most likely the best marker anyway)\n  // iterate to left until p can't be merged with left\n  while (p.left !== null && p.left.id.client === p.id.client && p.left.id.clock + p.left.length === p.id.clock) {\n    p = p.left;\n    if (!p.deleted && p.countable) {\n      pindex -= p.length;\n    }\n  }\n\n  // @todo remove!\n  // assure position\n  // {\n  //   let start = yarray._start\n  //   let pos = 0\n  //   while (start !== p) {\n  //     if (!start.deleted && start.countable) {\n  //       pos += start.length\n  //     }\n  //     start = /** @type {Item} */ (start.right)\n  //   }\n  //   if (pos !== pindex) {\n  //     debugger\n  //     throw new Error('Gotcha position fail!')\n  //   }\n  // }\n  // if (marker) {\n  //   if (window.lengths == null) {\n  //     window.lengths = []\n  //     window.getLengths = () => window.lengths.sort((a, b) => a - b)\n  //   }\n  //   window.lengths.push(marker.index - pindex)\n  //   console.log('distance', marker.index - pindex, 'len', p && p.parent.length)\n  // }\n  if (marker !== null && math.abs(marker.index - pindex) < /** @type {YText|YArray<any>} */ (p.parent).length / maxSearchMarker) {\n    // adjust existing marker\n    overwriteMarker(marker, p, pindex);\n    return marker\n  } else {\n    // create new marker\n    return markPosition(yarray._searchMarker, p, pindex)\n  }\n};\n\n/**\n * Update markers when a change happened.\n *\n * This should be called before doing a deletion!\n *\n * @param {Array<ArraySearchMarker>} searchMarker\n * @param {number} index\n * @param {number} len If insertion, len is positive. If deletion, len is negative.\n */\nconst updateMarkerChanges = (searchMarker, index, len) => {\n  for (let i = searchMarker.length - 1; i >= 0; i--) {\n    const m = searchMarker[i];\n    if (len > 0) {\n      /**\n       * @type {Item|null}\n       */\n      let p = m.p;\n      p.marker = false;\n      // Ideally we just want to do a simple position comparison, but this will only work if\n      // search markers don't point to deleted items for formats.\n      // Iterate marker to prev undeleted countable position so we know what to do when updating a position\n      while (p && (p.deleted || !p.countable)) {\n        p = p.left;\n        if (p && !p.deleted && p.countable) {\n          // adjust position. the loop should break now\n          m.index -= p.length;\n        }\n      }\n      if (p === null || p.marker === true) {\n        // remove search marker if updated position is null or if position is already marked\n        searchMarker.splice(i, 1);\n        continue\n      }\n      m.p = p;\n      p.marker = true;\n    }\n    if (index < m.index || (len > 0 && index === m.index)) { // a simple index <= m.index check would actually suffice\n      m.index = math.max(index, m.index + len);\n    }\n  }\n};\n\n/**\n * Accumulate all (list) children of a type and return them as an Array.\n *\n * @param {AbstractType<any>} t\n * @return {Array<Item>}\n */\nconst getTypeChildren = t => {\n  t.doc ?? warnPrematureAccess();\n  let s = t._start;\n  const arr = [];\n  while (s) {\n    arr.push(s);\n    s = s.right;\n  }\n  return arr\n};\n\n/**\n * Call event listeners with an event. This will also add an event to all\n * parents (for `.observeDeep` handlers).\n *\n * @template EventType\n * @param {AbstractType<EventType>} type\n * @param {Transaction} transaction\n * @param {EventType} event\n */\nconst callTypeObservers = (type, transaction, event) => {\n  const changedType = type;\n  const changedParentTypes = transaction.changedParentTypes;\n  while (true) {\n    // @ts-ignore\n    map.setIfUndefined(changedParentTypes, type, () => []).push(event);\n    if (type._item === null) {\n      break\n    }\n    type = /** @type {AbstractType<any>} */ (type._item.parent);\n  }\n  callEventHandlerListeners(changedType._eH, event, transaction);\n};\n\n/**\n * @template EventType\n * Abstract Yjs Type class\n */\nclass AbstractType {\n  constructor () {\n    /**\n     * @type {Item|null}\n     */\n    this._item = null;\n    /**\n     * @type {Map<string,Item>}\n     */\n    this._map = new Map();\n    /**\n     * @type {Item|null}\n     */\n    this._start = null;\n    /**\n     * @type {Doc|null}\n     */\n    this.doc = null;\n    this._length = 0;\n    /**\n     * Event handlers\n     * @type {EventHandler<EventType,Transaction>}\n     */\n    this._eH = createEventHandler();\n    /**\n     * Deep event handlers\n     * @type {EventHandler<Array<YEvent<any>>,Transaction>}\n     */\n    this._dEH = createEventHandler();\n    /**\n     * @type {null | Array<ArraySearchMarker>}\n     */\n    this._searchMarker = null;\n  }\n\n  /**\n   * @return {AbstractType<any>|null}\n   */\n  get parent () {\n    return this._item ? /** @type {AbstractType<any>} */ (this._item.parent) : null\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item|null} item\n   */\n  _integrate (y, item) {\n    this.doc = y;\n    this._item = item;\n  }\n\n  /**\n   * @return {AbstractType<EventType>}\n   */\n  _copy () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * Makes a copy of this data type that can be included somewhere else.\n   *\n   * Note that the content is only readable _after_ it has been included somewhere in the Ydoc.\n   *\n   * @return {AbstractType<EventType>}\n   */\n  clone () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} _encoder\n   */\n  _write (_encoder) { }\n\n  /**\n   * The first non-deleted item\n   */\n  get _first () {\n    let n = this._start;\n    while (n !== null && n.deleted) {\n      n = n.right;\n    }\n    return n\n  }\n\n  /**\n   * Creates YEvent and calls all type observers.\n   * Must be implemented by each type.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} _parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, _parentSubs) {\n    if (!transaction.local && this._searchMarker) {\n      this._searchMarker.length = 0;\n    }\n  }\n\n  /**\n   * Observe all events that are created on this type.\n   *\n   * @param {function(EventType, Transaction):void} f Observer function\n   */\n  observe (f) {\n    addEventHandlerListener(this._eH, f);\n  }\n\n  /**\n   * Observe all events that are created by this type and its children.\n   *\n   * @param {function(Array<YEvent<any>>,Transaction):void} f Observer function\n   */\n  observeDeep (f) {\n    addEventHandlerListener(this._dEH, f);\n  }\n\n  /**\n   * Unregister an observer function.\n   *\n   * @param {function(EventType,Transaction):void} f Observer function\n   */\n  unobserve (f) {\n    removeEventHandlerListener(this._eH, f);\n  }\n\n  /**\n   * Unregister an observer function.\n   *\n   * @param {function(Array<YEvent<any>>,Transaction):void} f Observer function\n   */\n  unobserveDeep (f) {\n    removeEventHandlerListener(this._dEH, f);\n  }\n\n  /**\n   * @abstract\n   * @return {any}\n   */\n  toJSON () {}\n}\n\n/**\n * @param {AbstractType<any>} type\n * @param {number} start\n * @param {number} end\n * @return {Array<any>}\n *\n * @private\n * @function\n */\nconst typeListSlice = (type, start, end) => {\n  type.doc ?? warnPrematureAccess();\n  if (start < 0) {\n    start = type._length + start;\n  }\n  if (end < 0) {\n    end = type._length + end;\n  }\n  let len = end - start;\n  const cs = [];\n  let n = type._start;\n  while (n !== null && len > 0) {\n    if (n.countable && !n.deleted) {\n      const c = n.content.getContent();\n      if (c.length <= start) {\n        start -= c.length;\n      } else {\n        for (let i = start; i < c.length && len > 0; i++) {\n          cs.push(c[i]);\n          len--;\n        }\n        start = 0;\n      }\n    }\n    n = n.right;\n  }\n  return cs\n};\n\n/**\n * @param {AbstractType<any>} type\n * @return {Array<any>}\n *\n * @private\n * @function\n */\nconst typeListToArray = type => {\n  type.doc ?? warnPrematureAccess();\n  const cs = [];\n  let n = type._start;\n  while (n !== null) {\n    if (n.countable && !n.deleted) {\n      const c = n.content.getContent();\n      for (let i = 0; i < c.length; i++) {\n        cs.push(c[i]);\n      }\n    }\n    n = n.right;\n  }\n  return cs\n};\n\n/**\n * @param {AbstractType<any>} type\n * @param {Snapshot} snapshot\n * @return {Array<any>}\n *\n * @private\n * @function\n */\nconst typeListToArraySnapshot = (type, snapshot) => {\n  const cs = [];\n  let n = type._start;\n  while (n !== null) {\n    if (n.countable && isVisible(n, snapshot)) {\n      const c = n.content.getContent();\n      for (let i = 0; i < c.length; i++) {\n        cs.push(c[i]);\n      }\n    }\n    n = n.right;\n  }\n  return cs\n};\n\n/**\n * Executes a provided function on once on every element of this YArray.\n *\n * @param {AbstractType<any>} type\n * @param {function(any,number,any):void} f A function to execute on every element of this YArray.\n *\n * @private\n * @function\n */\nconst typeListForEach = (type, f) => {\n  let index = 0;\n  let n = type._start;\n  type.doc ?? warnPrematureAccess();\n  while (n !== null) {\n    if (n.countable && !n.deleted) {\n      const c = n.content.getContent();\n      for (let i = 0; i < c.length; i++) {\n        f(c[i], index++, type);\n      }\n    }\n    n = n.right;\n  }\n};\n\n/**\n * @template C,R\n * @param {AbstractType<any>} type\n * @param {function(C,number,AbstractType<any>):R} f\n * @return {Array<R>}\n *\n * @private\n * @function\n */\nconst typeListMap = (type, f) => {\n  /**\n   * @type {Array<any>}\n   */\n  const result = [];\n  typeListForEach(type, (c, i) => {\n    result.push(f(c, i, type));\n  });\n  return result\n};\n\n/**\n * @param {AbstractType<any>} type\n * @return {IterableIterator<any>}\n *\n * @private\n * @function\n */\nconst typeListCreateIterator = type => {\n  let n = type._start;\n  /**\n   * @type {Array<any>|null}\n   */\n  let currentContent = null;\n  let currentContentIndex = 0;\n  return {\n    [Symbol.iterator] () {\n      return this\n    },\n    next: () => {\n      // find some content\n      if (currentContent === null) {\n        while (n !== null && n.deleted) {\n          n = n.right;\n        }\n        // check if we reached the end, no need to check currentContent, because it does not exist\n        if (n === null) {\n          return {\n            done: true,\n            value: undefined\n          }\n        }\n        // we found n, so we can set currentContent\n        currentContent = n.content.getContent();\n        currentContentIndex = 0;\n        n = n.right; // we used the content of n, now iterate to next\n      }\n      const value = currentContent[currentContentIndex++];\n      // check if we need to empty currentContent\n      if (currentContent.length <= currentContentIndex) {\n        currentContent = null;\n      }\n      return {\n        done: false,\n        value\n      }\n    }\n  }\n};\n\n/**\n * @param {AbstractType<any>} type\n * @param {number} index\n * @return {any}\n *\n * @private\n * @function\n */\nconst typeListGet = (type, index) => {\n  type.doc ?? warnPrematureAccess();\n  const marker = findMarker(type, index);\n  let n = type._start;\n  if (marker !== null) {\n    n = marker.p;\n    index -= marker.index;\n  }\n  for (; n !== null; n = n.right) {\n    if (!n.deleted && n.countable) {\n      if (index < n.length) {\n        return n.content.getContent()[index]\n      }\n      index -= n.length;\n    }\n  }\n};\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {Item?} referenceItem\n * @param {Array<Object<string,any>|Array<any>|boolean|number|null|string|Uint8Array>} content\n *\n * @private\n * @function\n */\nconst typeListInsertGenericsAfter = (transaction, parent, referenceItem, content) => {\n  let left = referenceItem;\n  const doc = transaction.doc;\n  const ownClientId = doc.clientID;\n  const store = doc.store;\n  const right = referenceItem === null ? parent._start : referenceItem.right;\n  /**\n   * @type {Array<Object|Array<any>|number|null>}\n   */\n  let jsonContent = [];\n  const packJsonContent = () => {\n    if (jsonContent.length > 0) {\n      left = new Item(createID(ownClientId, getState(store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentAny(jsonContent));\n      left.integrate(transaction, 0);\n      jsonContent = [];\n    }\n  };\n  content.forEach(c => {\n    if (c === null) {\n      jsonContent.push(c);\n    } else {\n      switch (c.constructor) {\n        case Number:\n        case Object:\n        case Boolean:\n        case Array:\n        case String:\n          jsonContent.push(c);\n          break\n        default:\n          packJsonContent();\n          switch (c.constructor) {\n            case Uint8Array:\n            case ArrayBuffer:\n              left = new Item(createID(ownClientId, getState(store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentBinary(new Uint8Array(/** @type {Uint8Array} */ (c))));\n              left.integrate(transaction, 0);\n              break\n            case Doc:\n              left = new Item(createID(ownClientId, getState(store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentDoc(/** @type {Doc} */ (c)));\n              left.integrate(transaction, 0);\n              break\n            default:\n              if (c instanceof AbstractType) {\n                left = new Item(createID(ownClientId, getState(store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentType(c));\n                left.integrate(transaction, 0);\n              } else {\n                throw new Error('Unexpected content type in insert operation')\n              }\n          }\n      }\n    }\n  });\n  packJsonContent();\n};\n\nconst lengthExceeded = () => error.create('Length exceeded!');\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {number} index\n * @param {Array<Object<string,any>|Array<any>|number|null|string|Uint8Array>} content\n *\n * @private\n * @function\n */\nconst typeListInsertGenerics = (transaction, parent, index, content) => {\n  if (index > parent._length) {\n    throw lengthExceeded()\n  }\n  if (index === 0) {\n    if (parent._searchMarker) {\n      updateMarkerChanges(parent._searchMarker, index, content.length);\n    }\n    return typeListInsertGenericsAfter(transaction, parent, null, content)\n  }\n  const startIndex = index;\n  const marker = findMarker(parent, index);\n  let n = parent._start;\n  if (marker !== null) {\n    n = marker.p;\n    index -= marker.index;\n    // we need to iterate one to the left so that the algorithm works\n    if (index === 0) {\n      // @todo refactor this as it actually doesn't consider formats\n      n = n.prev; // important! get the left undeleted item so that we can actually decrease index\n      index += (n && n.countable && !n.deleted) ? n.length : 0;\n    }\n  }\n  for (; n !== null; n = n.right) {\n    if (!n.deleted && n.countable) {\n      if (index <= n.length) {\n        if (index < n.length) {\n          // insert in-between\n          getItemCleanStart(transaction, createID(n.id.client, n.id.clock + index));\n        }\n        break\n      }\n      index -= n.length;\n    }\n  }\n  if (parent._searchMarker) {\n    updateMarkerChanges(parent._searchMarker, startIndex, content.length);\n  }\n  return typeListInsertGenericsAfter(transaction, parent, n, content)\n};\n\n/**\n * Pushing content is special as we generally want to push after the last item. So we don't have to update\n * the search marker.\n *\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {Array<Object<string,any>|Array<any>|number|null|string|Uint8Array>} content\n *\n * @private\n * @function\n */\nconst typeListPushGenerics = (transaction, parent, content) => {\n  // Use the marker with the highest index and iterate to the right.\n  const marker = (parent._searchMarker || []).reduce((maxMarker, currMarker) => currMarker.index > maxMarker.index ? currMarker : maxMarker, { index: 0, p: parent._start });\n  let n = marker.p;\n  if (n) {\n    while (n.right) {\n      n = n.right;\n    }\n  }\n  return typeListInsertGenericsAfter(transaction, parent, n, content)\n};\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {number} index\n * @param {number} length\n *\n * @private\n * @function\n */\nconst typeListDelete = (transaction, parent, index, length) => {\n  if (length === 0) { return }\n  const startIndex = index;\n  const startLength = length;\n  const marker = findMarker(parent, index);\n  let n = parent._start;\n  if (marker !== null) {\n    n = marker.p;\n    index -= marker.index;\n  }\n  // compute the first item to be deleted\n  for (; n !== null && index > 0; n = n.right) {\n    if (!n.deleted && n.countable) {\n      if (index < n.length) {\n        getItemCleanStart(transaction, createID(n.id.client, n.id.clock + index));\n      }\n      index -= n.length;\n    }\n  }\n  // delete all items until done\n  while (length > 0 && n !== null) {\n    if (!n.deleted) {\n      if (length < n.length) {\n        getItemCleanStart(transaction, createID(n.id.client, n.id.clock + length));\n      }\n      n.delete(transaction);\n      length -= n.length;\n    }\n    n = n.right;\n  }\n  if (length > 0) {\n    throw lengthExceeded()\n  }\n  if (parent._searchMarker) {\n    updateMarkerChanges(parent._searchMarker, startIndex, -startLength + length /* in case we remove the above exception */);\n  }\n};\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {string} key\n *\n * @private\n * @function\n */\nconst typeMapDelete = (transaction, parent, key) => {\n  const c = parent._map.get(key);\n  if (c !== undefined) {\n    c.delete(transaction);\n  }\n};\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {string} key\n * @param {Object|number|null|Array<any>|string|Uint8Array|AbstractType<any>} value\n *\n * @private\n * @function\n */\nconst typeMapSet = (transaction, parent, key, value) => {\n  const left = parent._map.get(key) || null;\n  const doc = transaction.doc;\n  const ownClientId = doc.clientID;\n  let content;\n  if (value == null) {\n    content = new ContentAny([value]);\n  } else {\n    switch (value.constructor) {\n      case Number:\n      case Object:\n      case Boolean:\n      case Array:\n      case String:\n      case Date:\n      case BigInt:\n        content = new ContentAny([value]);\n        break\n      case Uint8Array:\n        content = new ContentBinary(/** @type {Uint8Array} */ (value));\n        break\n      case Doc:\n        content = new ContentDoc(/** @type {Doc} */ (value));\n        break\n      default:\n        if (value instanceof AbstractType) {\n          content = new ContentType(value);\n        } else {\n          throw new Error('Unexpected content type')\n        }\n    }\n  }\n  new Item(createID(ownClientId, getState(doc.store, ownClientId)), left, left && left.lastId, null, null, parent, key, content).integrate(transaction, 0);\n};\n\n/**\n * @param {AbstractType<any>} parent\n * @param {string} key\n * @return {Object<string,any>|number|null|Array<any>|string|Uint8Array|AbstractType<any>|undefined}\n *\n * @private\n * @function\n */\nconst typeMapGet = (parent, key) => {\n  parent.doc ?? warnPrematureAccess();\n  const val = parent._map.get(key);\n  return val !== undefined && !val.deleted ? val.content.getContent()[val.length - 1] : undefined\n};\n\n/**\n * @param {AbstractType<any>} parent\n * @return {Object<string,Object<string,any>|number|null|Array<any>|string|Uint8Array|AbstractType<any>|undefined>}\n *\n * @private\n * @function\n */\nconst typeMapGetAll = (parent) => {\n  /**\n   * @type {Object<string,any>}\n   */\n  const res = {};\n  parent.doc ?? warnPrematureAccess();\n  parent._map.forEach((value, key) => {\n    if (!value.deleted) {\n      res[key] = value.content.getContent()[value.length - 1];\n    }\n  });\n  return res\n};\n\n/**\n * @param {AbstractType<any>} parent\n * @param {string} key\n * @return {boolean}\n *\n * @private\n * @function\n */\nconst typeMapHas = (parent, key) => {\n  parent.doc ?? warnPrematureAccess();\n  const val = parent._map.get(key);\n  return val !== undefined && !val.deleted\n};\n\n/**\n * @param {AbstractType<any>} parent\n * @param {string} key\n * @param {Snapshot} snapshot\n * @return {Object<string,any>|number|null|Array<any>|string|Uint8Array|AbstractType<any>|undefined}\n *\n * @private\n * @function\n */\nconst typeMapGetSnapshot = (parent, key, snapshot) => {\n  let v = parent._map.get(key) || null;\n  while (v !== null && (!snapshot.sv.has(v.id.client) || v.id.clock >= (snapshot.sv.get(v.id.client) || 0))) {\n    v = v.left;\n  }\n  return v !== null && isVisible(v, snapshot) ? v.content.getContent()[v.length - 1] : undefined\n};\n\n/**\n * @param {AbstractType<any>} parent\n * @param {Snapshot} snapshot\n * @return {Object<string,Object<string,any>|number|null|Array<any>|string|Uint8Array|AbstractType<any>|undefined>}\n *\n * @private\n * @function\n */\nconst typeMapGetAllSnapshot = (parent, snapshot) => {\n  /**\n   * @type {Object<string,any>}\n   */\n  const res = {};\n  parent._map.forEach((value, key) => {\n    /**\n     * @type {Item|null}\n     */\n    let v = value;\n    while (v !== null && (!snapshot.sv.has(v.id.client) || v.id.clock >= (snapshot.sv.get(v.id.client) || 0))) {\n      v = v.left;\n    }\n    if (v !== null && isVisible(v, snapshot)) {\n      res[key] = v.content.getContent()[v.length - 1];\n    }\n  });\n  return res\n};\n\n/**\n * @param {AbstractType<any> & { _map: Map<string, Item> }} type\n * @return {IterableIterator<Array<any>>}\n *\n * @private\n * @function\n */\nconst createMapIterator = type => {\n  type.doc ?? warnPrematureAccess();\n  return iterator.iteratorFilter(type._map.entries(), /** @param {any} entry */ entry => !entry[1].deleted)\n};\n\n/**\n * @module YArray\n */\n\n\n/**\n * Event that describes the changes on a YArray\n * @template T\n * @extends YEvent<YArray<T>>\n */\nclass YArrayEvent extends YEvent {}\n\n/**\n * A shared Array implementation.\n * @template T\n * @extends AbstractType<YArrayEvent<T>>\n * @implements {Iterable<T>}\n */\nclass YArray extends AbstractType {\n  constructor () {\n    super();\n    /**\n     * @type {Array<any>?}\n     * @private\n     */\n    this._prelimContent = [];\n    /**\n     * @type {Array<ArraySearchMarker>}\n     */\n    this._searchMarker = [];\n  }\n\n  /**\n   * Construct a new YArray containing the specified items.\n   * @template {Object<string,any>|Array<any>|number|null|string|Uint8Array} T\n   * @param {Array<T>} items\n   * @return {YArray<T>}\n   */\n  static from (items) {\n    /**\n     * @type {YArray<T>}\n     */\n    const a = new YArray();\n    a.push(items);\n    return a\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item);\n    this.insert(0, /** @type {Array<any>} */ (this._prelimContent));\n    this._prelimContent = null;\n  }\n\n  /**\n   * @return {YArray<T>}\n   */\n  _copy () {\n    return new YArray()\n  }\n\n  /**\n   * Makes a copy of this data type that can be included somewhere else.\n   *\n   * Note that the content is only readable _after_ it has been included somewhere in the Ydoc.\n   *\n   * @return {YArray<T>}\n   */\n  clone () {\n    /**\n     * @type {YArray<T>}\n     */\n    const arr = new YArray();\n    arr.insert(0, this.toArray().map(el =>\n      el instanceof AbstractType ? /** @type {typeof el} */ (el.clone()) : el\n    ));\n    return arr\n  }\n\n  get length () {\n    this.doc ?? warnPrematureAccess();\n    return this._length\n  }\n\n  /**\n   * Creates YArrayEvent and calls observers.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, parentSubs) {\n    super._callObserver(transaction, parentSubs);\n    callTypeObservers(this, transaction, new YArrayEvent(this, transaction));\n  }\n\n  /**\n   * Inserts new content at an index.\n   *\n   * Important: This function expects an array of content. Not just a content\n   * object. The reason for this \"weirdness\" is that inserting several elements\n   * is very efficient when it is done as a single operation.\n   *\n   * @example\n   *  // Insert character 'a' at position 0\n   *  yarray.insert(0, ['a'])\n   *  // Insert numbers 1, 2 at position 1\n   *  yarray.insert(1, [1, 2])\n   *\n   * @param {number} index The index to insert content at.\n   * @param {Array<T>} content The array of content\n   */\n  insert (index, content) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListInsertGenerics(transaction, this, index, /** @type {any} */ (content));\n      });\n    } else {\n      /** @type {Array<any>} */ (this._prelimContent).splice(index, 0, ...content);\n    }\n  }\n\n  /**\n   * Appends content to this YArray.\n   *\n   * @param {Array<T>} content Array of content to append.\n   *\n   * @todo Use the following implementation in all types.\n   */\n  push (content) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListPushGenerics(transaction, this, /** @type {any} */ (content));\n      });\n    } else {\n      /** @type {Array<any>} */ (this._prelimContent).push(...content);\n    }\n  }\n\n  /**\n   * Prepends content to this YArray.\n   *\n   * @param {Array<T>} content Array of content to prepend.\n   */\n  unshift (content) {\n    this.insert(0, content);\n  }\n\n  /**\n   * Deletes elements starting from an index.\n   *\n   * @param {number} index Index at which to start deleting elements\n   * @param {number} length The number of elements to remove. Defaults to 1.\n   */\n  delete (index, length = 1) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListDelete(transaction, this, index, length);\n      });\n    } else {\n      /** @type {Array<any>} */ (this._prelimContent).splice(index, length);\n    }\n  }\n\n  /**\n   * Returns the i-th element from a YArray.\n   *\n   * @param {number} index The index of the element to return from the YArray\n   * @return {T}\n   */\n  get (index) {\n    return typeListGet(this, index)\n  }\n\n  /**\n   * Transforms this YArray to a JavaScript Array.\n   *\n   * @return {Array<T>}\n   */\n  toArray () {\n    return typeListToArray(this)\n  }\n\n  /**\n   * Returns a portion of this YArray into a JavaScript Array selected\n   * from start to end (end not included).\n   *\n   * @param {number} [start]\n   * @param {number} [end]\n   * @return {Array<T>}\n   */\n  slice (start = 0, end = this.length) {\n    return typeListSlice(this, start, end)\n  }\n\n  /**\n   * Transforms this Shared Type to a JSON object.\n   *\n   * @return {Array<any>}\n   */\n  toJSON () {\n    return this.map(c => c instanceof AbstractType ? c.toJSON() : c)\n  }\n\n  /**\n   * Returns an Array with the result of calling a provided function on every\n   * element of this YArray.\n   *\n   * @template M\n   * @param {function(T,number,YArray<T>):M} f Function that produces an element of the new Array\n   * @return {Array<M>} A new array with each element being the result of the\n   *                 callback function\n   */\n  map (f) {\n    return typeListMap(this, /** @type {any} */ (f))\n  }\n\n  /**\n   * Executes a provided function once on every element of this YArray.\n   *\n   * @param {function(T,number,YArray<T>):void} f A function to execute on every element of this YArray.\n   */\n  forEach (f) {\n    typeListForEach(this, f);\n  }\n\n  /**\n   * @return {IterableIterator<T>}\n   */\n  [Symbol.iterator] () {\n    return typeListCreateIterator(this)\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YArrayRefID);\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} _decoder\n *\n * @private\n * @function\n */\nconst readYArray = _decoder => new YArray();\n\n/**\n * @module YMap\n */\n\n\n/**\n * @template T\n * @extends YEvent<YMap<T>>\n * Event that describes the changes on a YMap.\n */\nclass YMapEvent extends YEvent {\n  /**\n   * @param {YMap<T>} ymap The YArray that changed.\n   * @param {Transaction} transaction\n   * @param {Set<any>} subs The keys that changed.\n   */\n  constructor (ymap, transaction, subs) {\n    super(ymap, transaction);\n    this.keysChanged = subs;\n  }\n}\n\n/**\n * @template MapType\n * A shared Map implementation.\n *\n * @extends AbstractType<YMapEvent<MapType>>\n * @implements {Iterable<[string, MapType]>}\n */\nclass YMap extends AbstractType {\n  /**\n   *\n   * @param {Iterable<readonly [string, any]>=} entries - an optional iterable to initialize the YMap\n   */\n  constructor (entries) {\n    super();\n    /**\n     * @type {Map<string,any>?}\n     * @private\n     */\n    this._prelimContent = null;\n\n    if (entries === undefined) {\n      this._prelimContent = new Map();\n    } else {\n      this._prelimContent = new Map(entries);\n    }\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item)\n    ;/** @type {Map<string, any>} */ (this._prelimContent).forEach((value, key) => {\n      this.set(key, value);\n    });\n    this._prelimContent = null;\n  }\n\n  /**\n   * @return {YMap<MapType>}\n   */\n  _copy () {\n    return new YMap()\n  }\n\n  /**\n   * Makes a copy of this data type that can be included somewhere else.\n   *\n   * Note that the content is only readable _after_ it has been included somewhere in the Ydoc.\n   *\n   * @return {YMap<MapType>}\n   */\n  clone () {\n    /**\n     * @type {YMap<MapType>}\n     */\n    const map = new YMap();\n    this.forEach((value, key) => {\n      map.set(key, value instanceof AbstractType ? /** @type {typeof value} */ (value.clone()) : value);\n    });\n    return map\n  }\n\n  /**\n   * Creates YMapEvent and calls observers.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, parentSubs) {\n    callTypeObservers(this, transaction, new YMapEvent(this, transaction, parentSubs));\n  }\n\n  /**\n   * Transforms this Shared Type to a JSON object.\n   *\n   * @return {Object<string,any>}\n   */\n  toJSON () {\n    this.doc ?? warnPrematureAccess();\n    /**\n     * @type {Object<string,MapType>}\n     */\n    const map = {};\n    this._map.forEach((item, key) => {\n      if (!item.deleted) {\n        const v = item.content.getContent()[item.length - 1];\n        map[key] = v instanceof AbstractType ? v.toJSON() : v;\n      }\n    });\n    return map\n  }\n\n  /**\n   * Returns the size of the YMap (count of key/value pairs)\n   *\n   * @return {number}\n   */\n  get size () {\n    return [...createMapIterator(this)].length\n  }\n\n  /**\n   * Returns the keys for each element in the YMap Type.\n   *\n   * @return {IterableIterator<string>}\n   */\n  keys () {\n    return iterator.iteratorMap(createMapIterator(this), /** @param {any} v */ v => v[0])\n  }\n\n  /**\n   * Returns the values for each element in the YMap Type.\n   *\n   * @return {IterableIterator<MapType>}\n   */\n  values () {\n    return iterator.iteratorMap(createMapIterator(this), /** @param {any} v */ v => v[1].content.getContent()[v[1].length - 1])\n  }\n\n  /**\n   * Returns an Iterator of [key, value] pairs\n   *\n   * @return {IterableIterator<[string, MapType]>}\n   */\n  entries () {\n    return iterator.iteratorMap(createMapIterator(this), /** @param {any} v */ v => /** @type {any} */ ([v[0], v[1].content.getContent()[v[1].length - 1]]))\n  }\n\n  /**\n   * Executes a provided function on once on every key-value pair.\n   *\n   * @param {function(MapType,string,YMap<MapType>):void} f A function to execute on every element of this YArray.\n   */\n  forEach (f) {\n    this.doc ?? warnPrematureAccess();\n    this._map.forEach((item, key) => {\n      if (!item.deleted) {\n        f(item.content.getContent()[item.length - 1], key, this);\n      }\n    });\n  }\n\n  /**\n   * Returns an Iterator of [key, value] pairs\n   *\n   * @return {IterableIterator<[string, MapType]>}\n   */\n  [Symbol.iterator] () {\n    return this.entries()\n  }\n\n  /**\n   * Remove a specified element from this YMap.\n   *\n   * @param {string} key The key of the element to remove.\n   */\n  delete (key) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapDelete(transaction, this, key);\n      });\n    } else {\n      /** @type {Map<string, any>} */ (this._prelimContent).delete(key);\n    }\n  }\n\n  /**\n   * Adds or updates an element with a specified key and value.\n   * @template {MapType} VAL\n   *\n   * @param {string} key The key of the element to add to this YMap\n   * @param {VAL} value The value of the element to add\n   * @return {VAL}\n   */\n  set (key, value) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapSet(transaction, this, key, /** @type {any} */ (value));\n      });\n    } else {\n      /** @type {Map<string, any>} */ (this._prelimContent).set(key, value);\n    }\n    return value\n  }\n\n  /**\n   * Returns a specified element from this YMap.\n   *\n   * @param {string} key\n   * @return {MapType|undefined}\n   */\n  get (key) {\n    return /** @type {any} */ (typeMapGet(this, key))\n  }\n\n  /**\n   * Returns a boolean indicating whether the specified key exists or not.\n   *\n   * @param {string} key The key to test.\n   * @return {boolean}\n   */\n  has (key) {\n    return typeMapHas(this, key)\n  }\n\n  /**\n   * Removes all elements from this YMap.\n   */\n  clear () {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        this.forEach(function (_value, key, map) {\n          typeMapDelete(transaction, map, key);\n        });\n      });\n    } else {\n      /** @type {Map<string, any>} */ (this._prelimContent).clear();\n    }\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YMapRefID);\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} _decoder\n *\n * @private\n * @function\n */\nconst readYMap = _decoder => new YMap();\n\n/**\n * @module YText\n */\n\n\n/**\n * @param {any} a\n * @param {any} b\n * @return {boolean}\n */\nconst equalAttrs = (a, b) => a === b || (typeof a === 'object' && typeof b === 'object' && a && b && object.equalFlat(a, b));\n\nclass ItemTextListPosition {\n  /**\n   * @param {Item|null} left\n   * @param {Item|null} right\n   * @param {number} index\n   * @param {Map<string,any>} currentAttributes\n   */\n  constructor (left, right, index, currentAttributes) {\n    this.left = left;\n    this.right = right;\n    this.index = index;\n    this.currentAttributes = currentAttributes;\n  }\n\n  /**\n   * Only call this if you know that this.right is defined\n   */\n  forward () {\n    if (this.right === null) {\n      error.unexpectedCase();\n    }\n    switch (this.right.content.constructor) {\n      case ContentFormat:\n        if (!this.right.deleted) {\n          updateCurrentAttributes(this.currentAttributes, /** @type {ContentFormat} */ (this.right.content));\n        }\n        break\n      default:\n        if (!this.right.deleted) {\n          this.index += this.right.length;\n        }\n        break\n    }\n    this.left = this.right;\n    this.right = this.right.right;\n  }\n}\n\n/**\n * @param {Transaction} transaction\n * @param {ItemTextListPosition} pos\n * @param {number} count steps to move forward\n * @return {ItemTextListPosition}\n *\n * @private\n * @function\n */\nconst findNextPosition = (transaction, pos, count) => {\n  while (pos.right !== null && count > 0) {\n    switch (pos.right.content.constructor) {\n      case ContentFormat:\n        if (!pos.right.deleted) {\n          updateCurrentAttributes(pos.currentAttributes, /** @type {ContentFormat} */ (pos.right.content));\n        }\n        break\n      default:\n        if (!pos.right.deleted) {\n          if (count < pos.right.length) {\n            // split right\n            getItemCleanStart(transaction, createID(pos.right.id.client, pos.right.id.clock + count));\n          }\n          pos.index += pos.right.length;\n          count -= pos.right.length;\n        }\n        break\n    }\n    pos.left = pos.right;\n    pos.right = pos.right.right;\n    // pos.forward() - we don't forward because that would halve the performance because we already do the checks above\n  }\n  return pos\n};\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {number} index\n * @param {boolean} useSearchMarker\n * @return {ItemTextListPosition}\n *\n * @private\n * @function\n */\nconst findPosition = (transaction, parent, index, useSearchMarker) => {\n  const currentAttributes = new Map();\n  const marker = useSearchMarker ? findMarker(parent, index) : null;\n  if (marker) {\n    const pos = new ItemTextListPosition(marker.p.left, marker.p, marker.index, currentAttributes);\n    return findNextPosition(transaction, pos, index - marker.index)\n  } else {\n    const pos = new ItemTextListPosition(null, parent._start, 0, currentAttributes);\n    return findNextPosition(transaction, pos, index)\n  }\n};\n\n/**\n * Negate applied formats\n *\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {ItemTextListPosition} currPos\n * @param {Map<string,any>} negatedAttributes\n *\n * @private\n * @function\n */\nconst insertNegatedAttributes = (transaction, parent, currPos, negatedAttributes) => {\n  // check if we really need to remove attributes\n  while (\n    currPos.right !== null && (\n      currPos.right.deleted === true || (\n        currPos.right.content.constructor === ContentFormat &&\n        equalAttrs(negatedAttributes.get(/** @type {ContentFormat} */ (currPos.right.content).key), /** @type {ContentFormat} */ (currPos.right.content).value)\n      )\n    )\n  ) {\n    if (!currPos.right.deleted) {\n      negatedAttributes.delete(/** @type {ContentFormat} */ (currPos.right.content).key);\n    }\n    currPos.forward();\n  }\n  const doc = transaction.doc;\n  const ownClientId = doc.clientID;\n  negatedAttributes.forEach((val, key) => {\n    const left = currPos.left;\n    const right = currPos.right;\n    const nextFormat = new Item(createID(ownClientId, getState(doc.store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentFormat(key, val));\n    nextFormat.integrate(transaction, 0);\n    currPos.right = nextFormat;\n    currPos.forward();\n  });\n};\n\n/**\n * @param {Map<string,any>} currentAttributes\n * @param {ContentFormat} format\n *\n * @private\n * @function\n */\nconst updateCurrentAttributes = (currentAttributes, format) => {\n  const { key, value } = format;\n  if (value === null) {\n    currentAttributes.delete(key);\n  } else {\n    currentAttributes.set(key, value);\n  }\n};\n\n/**\n * @param {ItemTextListPosition} currPos\n * @param {Object<string,any>} attributes\n *\n * @private\n * @function\n */\nconst minimizeAttributeChanges = (currPos, attributes) => {\n  // go right while attributes[right.key] === right.value (or right is deleted)\n  while (true) {\n    if (currPos.right === null) {\n      break\n    } else if (currPos.right.deleted || (currPos.right.content.constructor === ContentFormat && equalAttrs(attributes[(/** @type {ContentFormat} */ (currPos.right.content)).key] ?? null, /** @type {ContentFormat} */ (currPos.right.content).value))) ; else {\n      break\n    }\n    currPos.forward();\n  }\n};\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {ItemTextListPosition} currPos\n * @param {Object<string,any>} attributes\n * @return {Map<string,any>}\n *\n * @private\n * @function\n **/\nconst insertAttributes = (transaction, parent, currPos, attributes) => {\n  const doc = transaction.doc;\n  const ownClientId = doc.clientID;\n  const negatedAttributes = new Map();\n  // insert format-start items\n  for (const key in attributes) {\n    const val = attributes[key];\n    const currentVal = currPos.currentAttributes.get(key) ?? null;\n    if (!equalAttrs(currentVal, val)) {\n      // save negated attribute (set null if currentVal undefined)\n      negatedAttributes.set(key, currentVal);\n      const { left, right } = currPos;\n      currPos.right = new Item(createID(ownClientId, getState(doc.store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, new ContentFormat(key, val));\n      currPos.right.integrate(transaction, 0);\n      currPos.forward();\n    }\n  }\n  return negatedAttributes\n};\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {ItemTextListPosition} currPos\n * @param {string|object|AbstractType<any>} text\n * @param {Object<string,any>} attributes\n *\n * @private\n * @function\n **/\nconst insertText = (transaction, parent, currPos, text, attributes) => {\n  currPos.currentAttributes.forEach((_val, key) => {\n    if (attributes[key] === undefined) {\n      attributes[key] = null;\n    }\n  });\n  const doc = transaction.doc;\n  const ownClientId = doc.clientID;\n  minimizeAttributeChanges(currPos, attributes);\n  const negatedAttributes = insertAttributes(transaction, parent, currPos, attributes);\n  // insert content\n  const content = text.constructor === String ? new ContentString(/** @type {string} */ (text)) : (text instanceof AbstractType ? new ContentType(text) : new ContentEmbed(text));\n  let { left, right, index } = currPos;\n  if (parent._searchMarker) {\n    updateMarkerChanges(parent._searchMarker, currPos.index, content.getLength());\n  }\n  right = new Item(createID(ownClientId, getState(doc.store, ownClientId)), left, left && left.lastId, right, right && right.id, parent, null, content);\n  right.integrate(transaction, 0);\n  currPos.right = right;\n  currPos.index = index;\n  currPos.forward();\n  insertNegatedAttributes(transaction, parent, currPos, negatedAttributes);\n};\n\n/**\n * @param {Transaction} transaction\n * @param {AbstractType<any>} parent\n * @param {ItemTextListPosition} currPos\n * @param {number} length\n * @param {Object<string,any>} attributes\n *\n * @private\n * @function\n */\nconst formatText = (transaction, parent, currPos, length, attributes) => {\n  const doc = transaction.doc;\n  const ownClientId = doc.clientID;\n  minimizeAttributeChanges(currPos, attributes);\n  const negatedAttributes = insertAttributes(transaction, parent, currPos, attributes);\n  // iterate until first non-format or null is found\n  // delete all formats with attributes[format.key] != null\n  // also check the attributes after the first non-format as we do not want to insert redundant negated attributes there\n  // eslint-disable-next-line no-labels\n  iterationLoop: while (\n    currPos.right !== null &&\n    (length > 0 ||\n      (\n        negatedAttributes.size > 0 &&\n        (currPos.right.deleted || currPos.right.content.constructor === ContentFormat)\n      )\n    )\n  ) {\n    if (!currPos.right.deleted) {\n      switch (currPos.right.content.constructor) {\n        case ContentFormat: {\n          const { key, value } = /** @type {ContentFormat} */ (currPos.right.content);\n          const attr = attributes[key];\n          if (attr !== undefined) {\n            if (equalAttrs(attr, value)) {\n              negatedAttributes.delete(key);\n            } else {\n              if (length === 0) {\n                // no need to further extend negatedAttributes\n                // eslint-disable-next-line no-labels\n                break iterationLoop\n              }\n              negatedAttributes.set(key, value);\n            }\n            currPos.right.delete(transaction);\n          } else {\n            currPos.currentAttributes.set(key, value);\n          }\n          break\n        }\n        default:\n          if (length < currPos.right.length) {\n            getItemCleanStart(transaction, createID(currPos.right.id.client, currPos.right.id.clock + length));\n          }\n          length -= currPos.right.length;\n          break\n      }\n    }\n    currPos.forward();\n  }\n  // Quill just assumes that the editor starts with a newline and that it always\n  // ends with a newline. We only insert that newline when a new newline is\n  // inserted - i.e when length is bigger than type.length\n  if (length > 0) {\n    let newlines = '';\n    for (; length > 0; length--) {\n      newlines += '\\n';\n    }\n    currPos.right = new Item(createID(ownClientId, getState(doc.store, ownClientId)), currPos.left, currPos.left && currPos.left.lastId, currPos.right, currPos.right && currPos.right.id, parent, null, new ContentString(newlines));\n    currPos.right.integrate(transaction, 0);\n    currPos.forward();\n  }\n  insertNegatedAttributes(transaction, parent, currPos, negatedAttributes);\n};\n\n/**\n * Call this function after string content has been deleted in order to\n * clean up formatting Items.\n *\n * @param {Transaction} transaction\n * @param {Item} start\n * @param {Item|null} curr exclusive end, automatically iterates to the next Content Item\n * @param {Map<string,any>} startAttributes\n * @param {Map<string,any>} currAttributes\n * @return {number} The amount of formatting Items deleted.\n *\n * @function\n */\nconst cleanupFormattingGap = (transaction, start, curr, startAttributes, currAttributes) => {\n  /**\n   * @type {Item|null}\n   */\n  let end = start;\n  /**\n   * @type {Map<string,ContentFormat>}\n   */\n  const endFormats = map.create();\n  while (end && (!end.countable || end.deleted)) {\n    if (!end.deleted && end.content.constructor === ContentFormat) {\n      const cf = /** @type {ContentFormat} */ (end.content);\n      endFormats.set(cf.key, cf);\n    }\n    end = end.right;\n  }\n  let cleanups = 0;\n  let reachedCurr = false;\n  while (start !== end) {\n    if (curr === start) {\n      reachedCurr = true;\n    }\n    if (!start.deleted) {\n      const content = start.content;\n      switch (content.constructor) {\n        case ContentFormat: {\n          const { key, value } = /** @type {ContentFormat} */ (content);\n          const startAttrValue = startAttributes.get(key) ?? null;\n          if (endFormats.get(key) !== content || startAttrValue === value) {\n            // Either this format is overwritten or it is not necessary because the attribute already existed.\n            start.delete(transaction);\n            cleanups++;\n            if (!reachedCurr && (currAttributes.get(key) ?? null) === value && startAttrValue !== value) {\n              if (startAttrValue === null) {\n                currAttributes.delete(key);\n              } else {\n                currAttributes.set(key, startAttrValue);\n              }\n            }\n          }\n          if (!reachedCurr && !start.deleted) {\n            updateCurrentAttributes(currAttributes, /** @type {ContentFormat} */ (content));\n          }\n          break\n        }\n      }\n    }\n    start = /** @type {Item} */ (start.right);\n  }\n  return cleanups\n};\n\n/**\n * @param {Transaction} transaction\n * @param {Item | null} item\n */\nconst cleanupContextlessFormattingGap = (transaction, item) => {\n  // iterate until item.right is null or content\n  while (item && item.right && (item.right.deleted || !item.right.countable)) {\n    item = item.right;\n  }\n  const attrs = new Set();\n  // iterate back until a content item is found\n  while (item && (item.deleted || !item.countable)) {\n    if (!item.deleted && item.content.constructor === ContentFormat) {\n      const key = /** @type {ContentFormat} */ (item.content).key;\n      if (attrs.has(key)) {\n        item.delete(transaction);\n      } else {\n        attrs.add(key);\n      }\n    }\n    item = item.left;\n  }\n};\n\n/**\n * This function is experimental and subject to change / be removed.\n *\n * Ideally, we don't need this function at all. Formatting attributes should be cleaned up\n * automatically after each change. This function iterates twice over the complete YText type\n * and removes unnecessary formatting attributes. This is also helpful for testing.\n *\n * This function won't be exported anymore as soon as there is confidence that the YText type works as intended.\n *\n * @param {YText} type\n * @return {number} How many formatting attributes have been cleaned up.\n */\nconst cleanupYTextFormatting = type => {\n  let res = 0;\n  transact(/** @type {Doc} */ (type.doc), transaction => {\n    let start = /** @type {Item} */ (type._start);\n    let end = type._start;\n    let startAttributes = map.create();\n    const currentAttributes = map.copy(startAttributes);\n    while (end) {\n      if (end.deleted === false) {\n        switch (end.content.constructor) {\n          case ContentFormat:\n            updateCurrentAttributes(currentAttributes, /** @type {ContentFormat} */ (end.content));\n            break\n          default:\n            res += cleanupFormattingGap(transaction, start, end, startAttributes, currentAttributes);\n            startAttributes = map.copy(currentAttributes);\n            start = end;\n            break\n        }\n      }\n      end = end.right;\n    }\n  });\n  return res\n};\n\n/**\n * This will be called by the transaction once the event handlers are called to potentially cleanup\n * formatting attributes.\n *\n * @param {Transaction} transaction\n */\nconst cleanupYTextAfterTransaction = transaction => {\n  /**\n   * @type {Set<YText>}\n   */\n  const needFullCleanup = new Set();\n  // check if another formatting item was inserted\n  const doc = transaction.doc;\n  for (const [client, afterClock] of transaction.afterState.entries()) {\n    const clock = transaction.beforeState.get(client) || 0;\n    if (afterClock === clock) {\n      continue\n    }\n    iterateStructs(transaction, /** @type {Array<Item|GC>} */ (doc.store.clients.get(client)), clock, afterClock, item => {\n      if (\n        !item.deleted && /** @type {Item} */ (item).content.constructor === ContentFormat && item.constructor !== GC\n      ) {\n        needFullCleanup.add(/** @type {any} */ (item).parent);\n      }\n    });\n  }\n  // cleanup in a new transaction\n  transact(doc, (t) => {\n    iterateDeletedStructs(transaction, transaction.deleteSet, item => {\n      if (item instanceof GC || !(/** @type {YText} */ (item.parent)._hasFormatting) || needFullCleanup.has(/** @type {YText} */ (item.parent))) {\n        return\n      }\n      const parent = /** @type {YText} */ (item.parent);\n      if (item.content.constructor === ContentFormat) {\n        needFullCleanup.add(parent);\n      } else {\n        // If no formatting attribute was inserted or deleted, we can make due with contextless\n        // formatting cleanups.\n        // Contextless: it is not necessary to compute currentAttributes for the affected position.\n        cleanupContextlessFormattingGap(t, item);\n      }\n    });\n    // If a formatting item was inserted, we simply clean the whole type.\n    // We need to compute currentAttributes for the current position anyway.\n    for (const yText of needFullCleanup) {\n      cleanupYTextFormatting(yText);\n    }\n  });\n};\n\n/**\n * @param {Transaction} transaction\n * @param {ItemTextListPosition} currPos\n * @param {number} length\n * @return {ItemTextListPosition}\n *\n * @private\n * @function\n */\nconst deleteText = (transaction, currPos, length) => {\n  const startLength = length;\n  const startAttrs = map.copy(currPos.currentAttributes);\n  const start = currPos.right;\n  while (length > 0 && currPos.right !== null) {\n    if (currPos.right.deleted === false) {\n      switch (currPos.right.content.constructor) {\n        case ContentType:\n        case ContentEmbed:\n        case ContentString:\n          if (length < currPos.right.length) {\n            getItemCleanStart(transaction, createID(currPos.right.id.client, currPos.right.id.clock + length));\n          }\n          length -= currPos.right.length;\n          currPos.right.delete(transaction);\n          break\n      }\n    }\n    currPos.forward();\n  }\n  if (start) {\n    cleanupFormattingGap(transaction, start, currPos.right, startAttrs, currPos.currentAttributes);\n  }\n  const parent = /** @type {AbstractType<any>} */ (/** @type {Item} */ (currPos.left || currPos.right).parent);\n  if (parent._searchMarker) {\n    updateMarkerChanges(parent._searchMarker, currPos.index, -startLength + length);\n  }\n  return currPos\n};\n\n/**\n * The Quill Delta format represents changes on a text document with\n * formatting information. For more information visit {@link https://quilljs.com/docs/delta/|Quill Delta}\n *\n * @example\n *   {\n *     ops: [\n *       { insert: 'Gandalf', attributes: { bold: true } },\n *       { insert: ' the ' },\n *       { insert: 'Grey', attributes: { color: '#cccccc' } }\n *     ]\n *   }\n *\n */\n\n/**\n  * Attributes that can be assigned to a selection of text.\n  *\n  * @example\n  *   {\n  *     bold: true,\n  *     font-size: '40px'\n  *   }\n  *\n  * @typedef {Object} TextAttributes\n  */\n\n/**\n * @extends YEvent<YText>\n * Event that describes the changes on a YText type.\n */\nclass YTextEvent extends YEvent {\n  /**\n   * @param {YText} ytext\n   * @param {Transaction} transaction\n   * @param {Set<any>} subs The keys that changed\n   */\n  constructor (ytext, transaction, subs) {\n    super(ytext, transaction);\n    /**\n     * Whether the children changed.\n     * @type {Boolean}\n     * @private\n     */\n    this.childListChanged = false;\n    /**\n     * Set of all changed attributes.\n     * @type {Set<string>}\n     */\n    this.keysChanged = new Set();\n    subs.forEach((sub) => {\n      if (sub === null) {\n        this.childListChanged = true;\n      } else {\n        this.keysChanged.add(sub);\n      }\n    });\n  }\n\n  /**\n   * @type {{added:Set<Item>,deleted:Set<Item>,keys:Map<string,{action:'add'|'update'|'delete',oldValue:any}>,delta:Array<{insert?:Array<any>|string, delete?:number, retain?:number}>}}\n   */\n  get changes () {\n    if (this._changes === null) {\n      /**\n       * @type {{added:Set<Item>,deleted:Set<Item>,keys:Map<string,{action:'add'|'update'|'delete',oldValue:any}>,delta:Array<{insert?:Array<any>|string|AbstractType<any>|object, delete?:number, retain?:number}>}}\n       */\n      const changes = {\n        keys: this.keys,\n        delta: this.delta,\n        added: new Set(),\n        deleted: new Set()\n      };\n      this._changes = changes;\n    }\n    return /** @type {any} */ (this._changes)\n  }\n\n  /**\n   * Compute the changes in the delta format.\n   * A {@link https://quilljs.com/docs/delta/|Quill Delta}) that represents the changes on the document.\n   *\n   * @type {Array<{insert?:string|object|AbstractType<any>, delete?:number, retain?:number, attributes?: Object<string,any>}>}\n   *\n   * @public\n   */\n  get delta () {\n    if (this._delta === null) {\n      const y = /** @type {Doc} */ (this.target.doc);\n      /**\n       * @type {Array<{insert?:string|object|AbstractType<any>, delete?:number, retain?:number, attributes?: Object<string,any>}>}\n       */\n      const delta = [];\n      transact(y, transaction => {\n        const currentAttributes = new Map(); // saves all current attributes for insert\n        const oldAttributes = new Map();\n        let item = this.target._start;\n        /**\n         * @type {string?}\n         */\n        let action = null;\n        /**\n         * @type {Object<string,any>}\n         */\n        const attributes = {}; // counts added or removed new attributes for retain\n        /**\n         * @type {string|object}\n         */\n        let insert = '';\n        let retain = 0;\n        let deleteLen = 0;\n        const addOp = () => {\n          if (action !== null) {\n            /**\n             * @type {any}\n             */\n            let op = null;\n            switch (action) {\n              case 'delete':\n                if (deleteLen > 0) {\n                  op = { delete: deleteLen };\n                }\n                deleteLen = 0;\n                break\n              case 'insert':\n                if (typeof insert === 'object' || insert.length > 0) {\n                  op = { insert };\n                  if (currentAttributes.size > 0) {\n                    op.attributes = {};\n                    currentAttributes.forEach((value, key) => {\n                      if (value !== null) {\n                        op.attributes[key] = value;\n                      }\n                    });\n                  }\n                }\n                insert = '';\n                break\n              case 'retain':\n                if (retain > 0) {\n                  op = { retain };\n                  if (!object.isEmpty(attributes)) {\n                    op.attributes = object.assign({}, attributes);\n                  }\n                }\n                retain = 0;\n                break\n            }\n            if (op) delta.push(op);\n            action = null;\n          }\n        };\n        while (item !== null) {\n          switch (item.content.constructor) {\n            case ContentType:\n            case ContentEmbed:\n              if (this.adds(item)) {\n                if (!this.deletes(item)) {\n                  addOp();\n                  action = 'insert';\n                  insert = item.content.getContent()[0];\n                  addOp();\n                }\n              } else if (this.deletes(item)) {\n                if (action !== 'delete') {\n                  addOp();\n                  action = 'delete';\n                }\n                deleteLen += 1;\n              } else if (!item.deleted) {\n                if (action !== 'retain') {\n                  addOp();\n                  action = 'retain';\n                }\n                retain += 1;\n              }\n              break\n            case ContentString:\n              if (this.adds(item)) {\n                if (!this.deletes(item)) {\n                  if (action !== 'insert') {\n                    addOp();\n                    action = 'insert';\n                  }\n                  insert += /** @type {ContentString} */ (item.content).str;\n                }\n              } else if (this.deletes(item)) {\n                if (action !== 'delete') {\n                  addOp();\n                  action = 'delete';\n                }\n                deleteLen += item.length;\n              } else if (!item.deleted) {\n                if (action !== 'retain') {\n                  addOp();\n                  action = 'retain';\n                }\n                retain += item.length;\n              }\n              break\n            case ContentFormat: {\n              const { key, value } = /** @type {ContentFormat} */ (item.content);\n              if (this.adds(item)) {\n                if (!this.deletes(item)) {\n                  const curVal = currentAttributes.get(key) ?? null;\n                  if (!equalAttrs(curVal, value)) {\n                    if (action === 'retain') {\n                      addOp();\n                    }\n                    if (equalAttrs(value, (oldAttributes.get(key) ?? null))) {\n                      delete attributes[key];\n                    } else {\n                      attributes[key] = value;\n                    }\n                  } else if (value !== null) {\n                    item.delete(transaction);\n                  }\n                }\n              } else if (this.deletes(item)) {\n                oldAttributes.set(key, value);\n                const curVal = currentAttributes.get(key) ?? null;\n                if (!equalAttrs(curVal, value)) {\n                  if (action === 'retain') {\n                    addOp();\n                  }\n                  attributes[key] = curVal;\n                }\n              } else if (!item.deleted) {\n                oldAttributes.set(key, value);\n                const attr = attributes[key];\n                if (attr !== undefined) {\n                  if (!equalAttrs(attr, value)) {\n                    if (action === 'retain') {\n                      addOp();\n                    }\n                    if (value === null) {\n                      delete attributes[key];\n                    } else {\n                      attributes[key] = value;\n                    }\n                  } else if (attr !== null) { // this will be cleaned up automatically by the contextless cleanup function\n                    item.delete(transaction);\n                  }\n                }\n              }\n              if (!item.deleted) {\n                if (action === 'insert') {\n                  addOp();\n                }\n                updateCurrentAttributes(currentAttributes, /** @type {ContentFormat} */ (item.content));\n              }\n              break\n            }\n          }\n          item = item.right;\n        }\n        addOp();\n        while (delta.length > 0) {\n          const lastOp = delta[delta.length - 1];\n          if (lastOp.retain !== undefined && lastOp.attributes === undefined) {\n            // retain delta's if they don't assign attributes\n            delta.pop();\n          } else {\n            break\n          }\n        }\n      });\n      this._delta = delta;\n    }\n    return /** @type {any} */ (this._delta)\n  }\n}\n\n/**\n * Type that represents text with formatting information.\n *\n * This type replaces y-richtext as this implementation is able to handle\n * block formats (format information on a paragraph), embeds (complex elements\n * like pictures and videos), and text formats (**bold**, *italic*).\n *\n * @extends AbstractType<YTextEvent>\n */\nclass YText extends AbstractType {\n  /**\n   * @param {String} [string] The initial value of the YText.\n   */\n  constructor (string) {\n    super();\n    /**\n     * Array of pending operations on this type\n     * @type {Array<function():void>?}\n     */\n    this._pending = string !== undefined ? [() => this.insert(0, string)] : [];\n    /**\n     * @type {Array<ArraySearchMarker>|null}\n     */\n    this._searchMarker = [];\n    /**\n     * Whether this YText contains formatting attributes.\n     * This flag is updated when a formatting item is integrated (see ContentFormat.integrate)\n     */\n    this._hasFormatting = false;\n  }\n\n  /**\n   * Number of characters of this text type.\n   *\n   * @type {number}\n   */\n  get length () {\n    this.doc ?? warnPrematureAccess();\n    return this._length\n  }\n\n  /**\n   * @param {Doc} y\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item);\n    try {\n      /** @type {Array<function>} */ (this._pending).forEach(f => f());\n    } catch (e) {\n      console.error(e);\n    }\n    this._pending = null;\n  }\n\n  _copy () {\n    return new YText()\n  }\n\n  /**\n   * Makes a copy of this data type that can be included somewhere else.\n   *\n   * Note that the content is only readable _after_ it has been included somewhere in the Ydoc.\n   *\n   * @return {YText}\n   */\n  clone () {\n    const text = new YText();\n    text.applyDelta(this.toDelta());\n    return text\n  }\n\n  /**\n   * Creates YTextEvent and calls observers.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, parentSubs) {\n    super._callObserver(transaction, parentSubs);\n    const event = new YTextEvent(this, transaction, parentSubs);\n    callTypeObservers(this, transaction, event);\n    // If a remote change happened, we try to cleanup potential formatting duplicates.\n    if (!transaction.local && this._hasFormatting) {\n      transaction._needFormattingCleanup = true;\n    }\n  }\n\n  /**\n   * Returns the unformatted string representation of this YText type.\n   *\n   * @public\n   */\n  toString () {\n    this.doc ?? warnPrematureAccess();\n    let str = '';\n    /**\n     * @type {Item|null}\n     */\n    let n = this._start;\n    while (n !== null) {\n      if (!n.deleted && n.countable && n.content.constructor === ContentString) {\n        str += /** @type {ContentString} */ (n.content).str;\n      }\n      n = n.right;\n    }\n    return str\n  }\n\n  /**\n   * Returns the unformatted string representation of this YText type.\n   *\n   * @return {string}\n   * @public\n   */\n  toJSON () {\n    return this.toString()\n  }\n\n  /**\n   * Apply a {@link Delta} on this shared YText type.\n   *\n   * @param {Array<any>} delta The changes to apply on this element.\n   * @param {object}  opts\n   * @param {boolean} [opts.sanitize] Sanitize input delta. Removes ending newlines if set to true.\n   *\n   *\n   * @public\n   */\n  applyDelta (delta, { sanitize = true } = {}) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        const currPos = new ItemTextListPosition(null, this._start, 0, new Map());\n        for (let i = 0; i < delta.length; i++) {\n          const op = delta[i];\n          if (op.insert !== undefined) {\n            // Quill assumes that the content starts with an empty paragraph.\n            // Yjs/Y.Text assumes that it starts empty. We always hide that\n            // there is a newline at the end of the content.\n            // If we omit this step, clients will see a different number of\n            // paragraphs, but nothing bad will happen.\n            const ins = (!sanitize && typeof op.insert === 'string' && i === delta.length - 1 && currPos.right === null && op.insert.slice(-1) === '\\n') ? op.insert.slice(0, -1) : op.insert;\n            if (typeof ins !== 'string' || ins.length > 0) {\n              insertText(transaction, this, currPos, ins, op.attributes || {});\n            }\n          } else if (op.retain !== undefined) {\n            formatText(transaction, this, currPos, op.retain, op.attributes || {});\n          } else if (op.delete !== undefined) {\n            deleteText(transaction, currPos, op.delete);\n          }\n        }\n      });\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.applyDelta(delta));\n    }\n  }\n\n  /**\n   * Returns the Delta representation of this YText type.\n   *\n   * @param {Snapshot} [snapshot]\n   * @param {Snapshot} [prevSnapshot]\n   * @param {function('removed' | 'added', ID):any} [computeYChange]\n   * @return {any} The Delta representation of this type.\n   *\n   * @public\n   */\n  toDelta (snapshot, prevSnapshot, computeYChange) {\n    this.doc ?? warnPrematureAccess();\n    /**\n     * @type{Array<any>}\n     */\n    const ops = [];\n    const currentAttributes = new Map();\n    const doc = /** @type {Doc} */ (this.doc);\n    let str = '';\n    let n = this._start;\n    function packStr () {\n      if (str.length > 0) {\n        // pack str with attributes to ops\n        /**\n         * @type {Object<string,any>}\n         */\n        const attributes = {};\n        let addAttributes = false;\n        currentAttributes.forEach((value, key) => {\n          addAttributes = true;\n          attributes[key] = value;\n        });\n        /**\n         * @type {Object<string,any>}\n         */\n        const op = { insert: str };\n        if (addAttributes) {\n          op.attributes = attributes;\n        }\n        ops.push(op);\n        str = '';\n      }\n    }\n    const computeDelta = () => {\n      while (n !== null) {\n        if (isVisible(n, snapshot) || (prevSnapshot !== undefined && isVisible(n, prevSnapshot))) {\n          switch (n.content.constructor) {\n            case ContentString: {\n              const cur = currentAttributes.get('ychange');\n              if (snapshot !== undefined && !isVisible(n, snapshot)) {\n                if (cur === undefined || cur.user !== n.id.client || cur.type !== 'removed') {\n                  packStr();\n                  currentAttributes.set('ychange', computeYChange ? computeYChange('removed', n.id) : { type: 'removed' });\n                }\n              } else if (prevSnapshot !== undefined && !isVisible(n, prevSnapshot)) {\n                if (cur === undefined || cur.user !== n.id.client || cur.type !== 'added') {\n                  packStr();\n                  currentAttributes.set('ychange', computeYChange ? computeYChange('added', n.id) : { type: 'added' });\n                }\n              } else if (cur !== undefined) {\n                packStr();\n                currentAttributes.delete('ychange');\n              }\n              str += /** @type {ContentString} */ (n.content).str;\n              break\n            }\n            case ContentType:\n            case ContentEmbed: {\n              packStr();\n              /**\n               * @type {Object<string,any>}\n               */\n              const op = {\n                insert: n.content.getContent()[0]\n              };\n              if (currentAttributes.size > 0) {\n                const attrs = /** @type {Object<string,any>} */ ({});\n                op.attributes = attrs;\n                currentAttributes.forEach((value, key) => {\n                  attrs[key] = value;\n                });\n              }\n              ops.push(op);\n              break\n            }\n            case ContentFormat:\n              if (isVisible(n, snapshot)) {\n                packStr();\n                updateCurrentAttributes(currentAttributes, /** @type {ContentFormat} */ (n.content));\n              }\n              break\n          }\n        }\n        n = n.right;\n      }\n      packStr();\n    };\n    if (snapshot || prevSnapshot) {\n      // snapshots are merged again after the transaction, so we need to keep the\n      // transaction alive until we are done\n      transact(doc, transaction => {\n        if (snapshot) {\n          splitSnapshotAffectedStructs(transaction, snapshot);\n        }\n        if (prevSnapshot) {\n          splitSnapshotAffectedStructs(transaction, prevSnapshot);\n        }\n        computeDelta();\n      }, 'cleanup');\n    } else {\n      computeDelta();\n    }\n    return ops\n  }\n\n  /**\n   * Insert text at a given index.\n   *\n   * @param {number} index The index at which to start inserting.\n   * @param {String} text The text to insert at the specified position.\n   * @param {TextAttributes} [attributes] Optionally define some formatting\n   *                                    information to apply on the inserted\n   *                                    Text.\n   * @public\n   */\n  insert (index, text, attributes) {\n    if (text.length <= 0) {\n      return\n    }\n    const y = this.doc;\n    if (y !== null) {\n      transact(y, transaction => {\n        const pos = findPosition(transaction, this, index, !attributes);\n        if (!attributes) {\n          attributes = {};\n          // @ts-ignore\n          pos.currentAttributes.forEach((v, k) => { attributes[k] = v; });\n        }\n        insertText(transaction, this, pos, text, attributes);\n      });\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.insert(index, text, attributes));\n    }\n  }\n\n  /**\n   * Inserts an embed at a index.\n   *\n   * @param {number} index The index to insert the embed at.\n   * @param {Object | AbstractType<any>} embed The Object that represents the embed.\n   * @param {TextAttributes} [attributes] Attribute information to apply on the\n   *                                    embed\n   *\n   * @public\n   */\n  insertEmbed (index, embed, attributes) {\n    const y = this.doc;\n    if (y !== null) {\n      transact(y, transaction => {\n        const pos = findPosition(transaction, this, index, !attributes);\n        insertText(transaction, this, pos, embed, attributes || {});\n      });\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.insertEmbed(index, embed, attributes || {}));\n    }\n  }\n\n  /**\n   * Deletes text starting from an index.\n   *\n   * @param {number} index Index at which to start deleting.\n   * @param {number} length The number of characters to remove. Defaults to 1.\n   *\n   * @public\n   */\n  delete (index, length) {\n    if (length === 0) {\n      return\n    }\n    const y = this.doc;\n    if (y !== null) {\n      transact(y, transaction => {\n        deleteText(transaction, findPosition(transaction, this, index, true), length);\n      });\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.delete(index, length));\n    }\n  }\n\n  /**\n   * Assigns properties to a range of text.\n   *\n   * @param {number} index The position where to start formatting.\n   * @param {number} length The amount of characters to assign properties to.\n   * @param {TextAttributes} attributes Attribute information to apply on the\n   *                                    text.\n   *\n   * @public\n   */\n  format (index, length, attributes) {\n    if (length === 0) {\n      return\n    }\n    const y = this.doc;\n    if (y !== null) {\n      transact(y, transaction => {\n        const pos = findPosition(transaction, this, index, false);\n        if (pos.right === null) {\n          return\n        }\n        formatText(transaction, this, pos, length, attributes);\n      });\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.format(index, length, attributes));\n    }\n  }\n\n  /**\n   * Removes an attribute.\n   *\n   * @note Xml-Text nodes don't have attributes. You can use this feature to assign properties to complete text-blocks.\n   *\n   * @param {String} attributeName The attribute name that is to be removed.\n   *\n   * @public\n   */\n  removeAttribute (attributeName) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapDelete(transaction, this, attributeName);\n      });\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.removeAttribute(attributeName));\n    }\n  }\n\n  /**\n   * Sets or updates an attribute.\n   *\n   * @note Xml-Text nodes don't have attributes. You can use this feature to assign properties to complete text-blocks.\n   *\n   * @param {String} attributeName The attribute name that is to be set.\n   * @param {any} attributeValue The attribute value that is to be set.\n   *\n   * @public\n   */\n  setAttribute (attributeName, attributeValue) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapSet(transaction, this, attributeName, attributeValue);\n      });\n    } else {\n      /** @type {Array<function>} */ (this._pending).push(() => this.setAttribute(attributeName, attributeValue));\n    }\n  }\n\n  /**\n   * Returns an attribute value that belongs to the attribute name.\n   *\n   * @note Xml-Text nodes don't have attributes. You can use this feature to assign properties to complete text-blocks.\n   *\n   * @param {String} attributeName The attribute name that identifies the\n   *                               queried value.\n   * @return {any} The queried attribute value.\n   *\n   * @public\n   */\n  getAttribute (attributeName) {\n    return /** @type {any} */ (typeMapGet(this, attributeName))\n  }\n\n  /**\n   * Returns all attribute name/value pairs in a JSON Object.\n   *\n   * @note Xml-Text nodes don't have attributes. You can use this feature to assign properties to complete text-blocks.\n   *\n   * @return {Object<string, any>} A JSON Object that describes the attributes.\n   *\n   * @public\n   */\n  getAttributes () {\n    return typeMapGetAll(this)\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YTextRefID);\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} _decoder\n * @return {YText}\n *\n * @private\n * @function\n */\nconst readYText = _decoder => new YText();\n\n/**\n * @module YXml\n */\n\n\n/**\n * Define the elements to which a set of CSS queries apply.\n * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors|CSS_Selectors}\n *\n * @example\n *   query = '.classSelector'\n *   query = 'nodeSelector'\n *   query = '#idSelector'\n *\n * @typedef {string} CSS_Selector\n */\n\n/**\n * Dom filter function.\n *\n * @callback domFilter\n * @param {string} nodeName The nodeName of the element\n * @param {Map} attributes The map of attributes.\n * @return {boolean} Whether to include the Dom node in the YXmlElement.\n */\n\n/**\n * Represents a subset of the nodes of a YXmlElement / YXmlFragment and a\n * position within them.\n *\n * Can be created with {@link YXmlFragment#createTreeWalker}\n *\n * @public\n * @implements {Iterable<YXmlElement|YXmlText|YXmlElement|YXmlHook>}\n */\nclass YXmlTreeWalker {\n  /**\n   * @param {YXmlFragment | YXmlElement} root\n   * @param {function(AbstractType<any>):boolean} [f]\n   */\n  constructor (root, f = () => true) {\n    this._filter = f;\n    this._root = root;\n    /**\n     * @type {Item}\n     */\n    this._currentNode = /** @type {Item} */ (root._start);\n    this._firstCall = true;\n    root.doc ?? warnPrematureAccess();\n  }\n\n  [Symbol.iterator] () {\n    return this\n  }\n\n  /**\n   * Get the next node.\n   *\n   * @return {IteratorResult<YXmlElement|YXmlText|YXmlHook>} The next node.\n   *\n   * @public\n   */\n  next () {\n    /**\n     * @type {Item|null}\n     */\n    let n = this._currentNode;\n    let type = n && n.content && /** @type {any} */ (n.content).type;\n    if (n !== null && (!this._firstCall || n.deleted || !this._filter(type))) { // if first call, we check if we can use the first item\n      do {\n        type = /** @type {any} */ (n.content).type;\n        if (!n.deleted && (type.constructor === YXmlElement || type.constructor === YXmlFragment) && type._start !== null) {\n          // walk down in the tree\n          n = type._start;\n        } else {\n          // walk right or up in the tree\n          while (n !== null) {\n            /**\n             * @type {Item | null}\n             */\n            const nxt = n.next;\n            if (nxt !== null) {\n              n = nxt;\n              break\n            } else if (n.parent === this._root) {\n              n = null;\n            } else {\n              n = /** @type {AbstractType<any>} */ (n.parent)._item;\n            }\n          }\n        }\n      } while (n !== null && (n.deleted || !this._filter(/** @type {ContentType} */ (n.content).type)))\n    }\n    this._firstCall = false;\n    if (n === null) {\n      // @ts-ignore\n      return { value: undefined, done: true }\n    }\n    this._currentNode = n;\n    return { value: /** @type {any} */ (n.content).type, done: false }\n  }\n}\n\n/**\n * Represents a list of {@link YXmlElement}.and {@link YXmlText} types.\n * A YxmlFragment is similar to a {@link YXmlElement}, but it does not have a\n * nodeName and it does not have attributes. Though it can be bound to a DOM\n * element - in this case the attributes and the nodeName are not shared.\n *\n * @public\n * @extends AbstractType<YXmlEvent>\n */\nclass YXmlFragment extends AbstractType {\n  constructor () {\n    super();\n    /**\n     * @type {Array<any>|null}\n     */\n    this._prelimContent = [];\n  }\n\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get firstChild () {\n    const first = this._first;\n    return first ? first.content.getContent()[0] : null\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item);\n    this.insert(0, /** @type {Array<any>} */ (this._prelimContent));\n    this._prelimContent = null;\n  }\n\n  _copy () {\n    return new YXmlFragment()\n  }\n\n  /**\n   * Makes a copy of this data type that can be included somewhere else.\n   *\n   * Note that the content is only readable _after_ it has been included somewhere in the Ydoc.\n   *\n   * @return {YXmlFragment}\n   */\n  clone () {\n    const el = new YXmlFragment();\n    // @ts-ignore\n    el.insert(0, this.toArray().map(item => item instanceof AbstractType ? item.clone() : item));\n    return el\n  }\n\n  get length () {\n    this.doc ?? warnPrematureAccess();\n    return this._prelimContent === null ? this._length : this._prelimContent.length\n  }\n\n  /**\n   * Create a subtree of childNodes.\n   *\n   * @example\n   * const walker = elem.createTreeWalker(dom => dom.nodeName === 'div')\n   * for (let node in walker) {\n   *   // `node` is a div node\n   *   nop(node)\n   * }\n   *\n   * @param {function(AbstractType<any>):boolean} filter Function that is called on each child element and\n   *                          returns a Boolean indicating whether the child\n   *                          is to be included in the subtree.\n   * @return {YXmlTreeWalker} A subtree and a position within it.\n   *\n   * @public\n   */\n  createTreeWalker (filter) {\n    return new YXmlTreeWalker(this, filter)\n  }\n\n  /**\n   * Returns the first YXmlElement that matches the query.\n   * Similar to DOM's {@link querySelector}.\n   *\n   * Query support:\n   *   - tagname\n   * TODO:\n   *   - id\n   *   - attribute\n   *\n   * @param {CSS_Selector} query The query on the children.\n   * @return {YXmlElement|YXmlText|YXmlHook|null} The first element that matches the query or null.\n   *\n   * @public\n   */\n  querySelector (query) {\n    query = query.toUpperCase();\n    // @ts-ignore\n    const iterator = new YXmlTreeWalker(this, element => element.nodeName && element.nodeName.toUpperCase() === query);\n    const next = iterator.next();\n    if (next.done) {\n      return null\n    } else {\n      return next.value\n    }\n  }\n\n  /**\n   * Returns all YXmlElements that match the query.\n   * Similar to Dom's {@link querySelectorAll}.\n   *\n   * @todo Does not yet support all queries. Currently only query by tagName.\n   *\n   * @param {CSS_Selector} query The query on the children\n   * @return {Array<YXmlElement|YXmlText|YXmlHook|null>} The elements that match this query.\n   *\n   * @public\n   */\n  querySelectorAll (query) {\n    query = query.toUpperCase();\n    // @ts-ignore\n    return array.from(new YXmlTreeWalker(this, element => element.nodeName && element.nodeName.toUpperCase() === query))\n  }\n\n  /**\n   * Creates YXmlEvent and calls observers.\n   *\n   * @param {Transaction} transaction\n   * @param {Set<null|string>} parentSubs Keys changed on this type. `null` if list was modified.\n   */\n  _callObserver (transaction, parentSubs) {\n    callTypeObservers(this, transaction, new YXmlEvent(this, parentSubs, transaction));\n  }\n\n  /**\n   * Get the string representation of all the children of this YXmlFragment.\n   *\n   * @return {string} The string representation of all children.\n   */\n  toString () {\n    return typeListMap(this, xml => xml.toString()).join('')\n  }\n\n  /**\n   * @return {string}\n   */\n  toJSON () {\n    return this.toString()\n  }\n\n  /**\n   * Creates a Dom Element that mirrors this YXmlElement.\n   *\n   * @param {Document} [_document=document] The document object (you must define\n   *                                        this when calling this method in\n   *                                        nodejs)\n   * @param {Object<string, any>} [hooks={}] Optional property to customize how hooks\n   *                                             are presented in the DOM\n   * @param {any} [binding] You should not set this property. This is\n   *                               used if DomBinding wants to create a\n   *                               association to the created DOM type.\n   * @return {Node} The {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}\n   *\n   * @public\n   */\n  toDOM (_document = document, hooks = {}, binding) {\n    const fragment = _document.createDocumentFragment();\n    if (binding !== undefined) {\n      binding._createAssociation(fragment, this);\n    }\n    typeListForEach(this, xmlType => {\n      fragment.insertBefore(xmlType.toDOM(_document, hooks, binding), null);\n    });\n    return fragment\n  }\n\n  /**\n   * Inserts new content at an index.\n   *\n   * @example\n   *  // Insert character 'a' at position 0\n   *  xml.insert(0, [new Y.XmlText('text')])\n   *\n   * @param {number} index The index to insert content at\n   * @param {Array<YXmlElement|YXmlText>} content The array of content\n   */\n  insert (index, content) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListInsertGenerics(transaction, this, index, content);\n      });\n    } else {\n      // @ts-ignore _prelimContent is defined because this is not yet integrated\n      this._prelimContent.splice(index, 0, ...content);\n    }\n  }\n\n  /**\n   * Inserts new content at an index.\n   *\n   * @example\n   *  // Insert character 'a' at position 0\n   *  xml.insert(0, [new Y.XmlText('text')])\n   *\n   * @param {null|Item|YXmlElement|YXmlText} ref The index to insert content at\n   * @param {Array<YXmlElement|YXmlText>} content The array of content\n   */\n  insertAfter (ref, content) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        const refItem = (ref && ref instanceof AbstractType) ? ref._item : ref;\n        typeListInsertGenericsAfter(transaction, this, refItem, content);\n      });\n    } else {\n      const pc = /** @type {Array<any>} */ (this._prelimContent);\n      const index = ref === null ? 0 : pc.findIndex(el => el === ref) + 1;\n      if (index === 0 && ref !== null) {\n        throw error.create('Reference item not found')\n      }\n      pc.splice(index, 0, ...content);\n    }\n  }\n\n  /**\n   * Deletes elements starting from an index.\n   *\n   * @param {number} index Index at which to start deleting elements\n   * @param {number} [length=1] The number of elements to remove. Defaults to 1.\n   */\n  delete (index, length = 1) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeListDelete(transaction, this, index, length);\n      });\n    } else {\n      // @ts-ignore _prelimContent is defined because this is not yet integrated\n      this._prelimContent.splice(index, length);\n    }\n  }\n\n  /**\n   * Transforms this YArray to a JavaScript Array.\n   *\n   * @return {Array<YXmlElement|YXmlText|YXmlHook>}\n   */\n  toArray () {\n    return typeListToArray(this)\n  }\n\n  /**\n   * Appends content to this YArray.\n   *\n   * @param {Array<YXmlElement|YXmlText>} content Array of content to append.\n   */\n  push (content) {\n    this.insert(this.length, content);\n  }\n\n  /**\n   * Prepends content to this YArray.\n   *\n   * @param {Array<YXmlElement|YXmlText>} content Array of content to prepend.\n   */\n  unshift (content) {\n    this.insert(0, content);\n  }\n\n  /**\n   * Returns the i-th element from a YArray.\n   *\n   * @param {number} index The index of the element to return from the YArray\n   * @return {YXmlElement|YXmlText}\n   */\n  get (index) {\n    return typeListGet(this, index)\n  }\n\n  /**\n   * Returns a portion of this YXmlFragment into a JavaScript Array selected\n   * from start to end (end not included).\n   *\n   * @param {number} [start]\n   * @param {number} [end]\n   * @return {Array<YXmlElement|YXmlText>}\n   */\n  slice (start = 0, end = this.length) {\n    return typeListSlice(this, start, end)\n  }\n\n  /**\n   * Executes a provided function on once on every child element.\n   *\n   * @param {function(YXmlElement|YXmlText,number, typeof self):void} f A function to execute on every element of this YArray.\n   */\n  forEach (f) {\n    typeListForEach(this, f);\n  }\n\n  /**\n   * Transform the properties of this type to binary and write it to an\n   * BinaryEncoder.\n   *\n   * This is called when this Item is sent to a remote peer.\n   *\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YXmlFragmentRefID);\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} _decoder\n * @return {YXmlFragment}\n *\n * @private\n * @function\n */\nconst readYXmlFragment = _decoder => new YXmlFragment();\n\n/**\n * @typedef {Object|number|null|Array<any>|string|Uint8Array|AbstractType<any>} ValueTypes\n */\n\n/**\n * An YXmlElement imitates the behavior of a\n * https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element\n *\n * * An YXmlElement has attributes (key value pairs)\n * * An YXmlElement has childElements that must inherit from YXmlElement\n *\n * @template {{ [key: string]: ValueTypes }} [KV={ [key: string]: string }]\n */\nclass YXmlElement extends YXmlFragment {\n  constructor (nodeName = 'UNDEFINED') {\n    super();\n    this.nodeName = nodeName;\n    /**\n     * @type {Map<string, any>|null}\n     */\n    this._prelimAttrs = new Map();\n  }\n\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get nextSibling () {\n    const n = this._item ? this._item.next : null;\n    return n ? /** @type {YXmlElement|YXmlText} */ (/** @type {ContentType} */ (n.content).type) : null\n  }\n\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get prevSibling () {\n    const n = this._item ? this._item.prev : null;\n    return n ? /** @type {YXmlElement|YXmlText} */ (/** @type {ContentType} */ (n.content).type) : null\n  }\n\n  /**\n   * Integrate this type into the Yjs instance.\n   *\n   * * Save this struct in the os\n   * * This type is sent to other client\n   * * Observer functions are fired\n   *\n   * @param {Doc} y The Yjs instance\n   * @param {Item} item\n   */\n  _integrate (y, item) {\n    super._integrate(y, item)\n    ;(/** @type {Map<string, any>} */ (this._prelimAttrs)).forEach((value, key) => {\n      this.setAttribute(key, value);\n    });\n    this._prelimAttrs = null;\n  }\n\n  /**\n   * Creates an Item with the same effect as this Item (without position effect)\n   *\n   * @return {YXmlElement}\n   */\n  _copy () {\n    return new YXmlElement(this.nodeName)\n  }\n\n  /**\n   * Makes a copy of this data type that can be included somewhere else.\n   *\n   * Note that the content is only readable _after_ it has been included somewhere in the Ydoc.\n   *\n   * @return {YXmlElement<KV>}\n   */\n  clone () {\n    /**\n     * @type {YXmlElement<KV>}\n     */\n    const el = new YXmlElement(this.nodeName);\n    const attrs = this.getAttributes();\n    object.forEach(attrs, (value, key) => {\n      if (typeof value === 'string') {\n        el.setAttribute(key, value);\n      }\n    });\n    // @ts-ignore\n    el.insert(0, this.toArray().map(item => item instanceof AbstractType ? item.clone() : item));\n    return el\n  }\n\n  /**\n   * Returns the XML serialization of this YXmlElement.\n   * The attributes are ordered by attribute-name, so you can easily use this\n   * method to compare YXmlElements\n   *\n   * @return {string} The string representation of this type.\n   *\n   * @public\n   */\n  toString () {\n    const attrs = this.getAttributes();\n    const stringBuilder = [];\n    const keys = [];\n    for (const key in attrs) {\n      keys.push(key);\n    }\n    keys.sort();\n    const keysLen = keys.length;\n    for (let i = 0; i < keysLen; i++) {\n      const key = keys[i];\n      stringBuilder.push(key + '=\"' + attrs[key] + '\"');\n    }\n    const nodeName = this.nodeName.toLocaleLowerCase();\n    const attrsString = stringBuilder.length > 0 ? ' ' + stringBuilder.join(' ') : '';\n    return `<${nodeName}${attrsString}>${super.toString()}</${nodeName}>`\n  }\n\n  /**\n   * Removes an attribute from this YXmlElement.\n   *\n   * @param {string} attributeName The attribute name that is to be removed.\n   *\n   * @public\n   */\n  removeAttribute (attributeName) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapDelete(transaction, this, attributeName);\n      });\n    } else {\n      /** @type {Map<string,any>} */ (this._prelimAttrs).delete(attributeName);\n    }\n  }\n\n  /**\n   * Sets or updates an attribute.\n   *\n   * @template {keyof KV & string} KEY\n   *\n   * @param {KEY} attributeName The attribute name that is to be set.\n   * @param {KV[KEY]} attributeValue The attribute value that is to be set.\n   *\n   * @public\n   */\n  setAttribute (attributeName, attributeValue) {\n    if (this.doc !== null) {\n      transact(this.doc, transaction => {\n        typeMapSet(transaction, this, attributeName, attributeValue);\n      });\n    } else {\n      /** @type {Map<string, any>} */ (this._prelimAttrs).set(attributeName, attributeValue);\n    }\n  }\n\n  /**\n   * Returns an attribute value that belongs to the attribute name.\n   *\n   * @template {keyof KV & string} KEY\n   *\n   * @param {KEY} attributeName The attribute name that identifies the\n   *                               queried value.\n   * @return {KV[KEY]|undefined} The queried attribute value.\n   *\n   * @public\n   */\n  getAttribute (attributeName) {\n    return /** @type {any} */ (typeMapGet(this, attributeName))\n  }\n\n  /**\n   * Returns whether an attribute exists\n   *\n   * @param {string} attributeName The attribute name to check for existence.\n   * @return {boolean} whether the attribute exists.\n   *\n   * @public\n   */\n  hasAttribute (attributeName) {\n    return /** @type {any} */ (typeMapHas(this, attributeName))\n  }\n\n  /**\n   * Returns all attribute name/value pairs in a JSON Object.\n   *\n   * @param {Snapshot} [snapshot]\n   * @return {{ [Key in Extract<keyof KV,string>]?: KV[Key]}} A JSON Object that describes the attributes.\n   *\n   * @public\n   */\n  getAttributes (snapshot) {\n    return /** @type {any} */ (snapshot ? typeMapGetAllSnapshot(this, snapshot) : typeMapGetAll(this))\n  }\n\n  /**\n   * Creates a Dom Element that mirrors this YXmlElement.\n   *\n   * @param {Document} [_document=document] The document object (you must define\n   *                                        this when calling this method in\n   *                                        nodejs)\n   * @param {Object<string, any>} [hooks={}] Optional property to customize how hooks\n   *                                             are presented in the DOM\n   * @param {any} [binding] You should not set this property. This is\n   *                               used if DomBinding wants to create a\n   *                               association to the created DOM type.\n   * @return {Node} The {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}\n   *\n   * @public\n   */\n  toDOM (_document = document, hooks = {}, binding) {\n    const dom = _document.createElement(this.nodeName);\n    const attrs = this.getAttributes();\n    for (const key in attrs) {\n      const value = attrs[key];\n      if (typeof value === 'string') {\n        dom.setAttribute(key, value);\n      }\n    }\n    typeListForEach(this, yxml => {\n      dom.appendChild(yxml.toDOM(_document, hooks, binding));\n    });\n    if (binding !== undefined) {\n      binding._createAssociation(dom, this);\n    }\n    return dom\n  }\n\n  /**\n   * Transform the properties of this type to binary and write it to an\n   * BinaryEncoder.\n   *\n   * This is called when this Item is sent to a remote peer.\n   *\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YXmlElementRefID);\n    encoder.writeKey(this.nodeName);\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {YXmlElement}\n *\n * @function\n */\nconst readYXmlElement = decoder => new YXmlElement(decoder.readKey());\n\n/**\n * @extends YEvent<YXmlElement|YXmlText|YXmlFragment>\n * An Event that describes changes on a YXml Element or Yxml Fragment\n */\nclass YXmlEvent extends YEvent {\n  /**\n   * @param {YXmlElement|YXmlText|YXmlFragment} target The target on which the event is created.\n   * @param {Set<string|null>} subs The set of changed attributes. `null` is included if the\n   *                   child list changed.\n   * @param {Transaction} transaction The transaction instance with which the\n   *                                  change was created.\n   */\n  constructor (target, subs, transaction) {\n    super(target, transaction);\n    /**\n     * Whether the children changed.\n     * @type {Boolean}\n     * @private\n     */\n    this.childListChanged = false;\n    /**\n     * Set of all changed attributes.\n     * @type {Set<string>}\n     */\n    this.attributesChanged = new Set();\n    subs.forEach((sub) => {\n      if (sub === null) {\n        this.childListChanged = true;\n      } else {\n        this.attributesChanged.add(sub);\n      }\n    });\n  }\n}\n\n/**\n * You can manage binding to a custom type with YXmlHook.\n *\n * @extends {YMap<any>}\n */\nclass YXmlHook extends YMap {\n  /**\n   * @param {string} hookName nodeName of the Dom Node.\n   */\n  constructor (hookName) {\n    super();\n    /**\n     * @type {string}\n     */\n    this.hookName = hookName;\n  }\n\n  /**\n   * Creates an Item with the same effect as this Item (without position effect)\n   */\n  _copy () {\n    return new YXmlHook(this.hookName)\n  }\n\n  /**\n   * Makes a copy of this data type that can be included somewhere else.\n   *\n   * Note that the content is only readable _after_ it has been included somewhere in the Ydoc.\n   *\n   * @return {YXmlHook}\n   */\n  clone () {\n    const el = new YXmlHook(this.hookName);\n    this.forEach((value, key) => {\n      el.set(key, value);\n    });\n    return el\n  }\n\n  /**\n   * Creates a Dom Element that mirrors this YXmlElement.\n   *\n   * @param {Document} [_document=document] The document object (you must define\n   *                                        this when calling this method in\n   *                                        nodejs)\n   * @param {Object.<string, any>} [hooks] Optional property to customize how hooks\n   *                                             are presented in the DOM\n   * @param {any} [binding] You should not set this property. This is\n   *                               used if DomBinding wants to create a\n   *                               association to the created DOM type\n   * @return {Element} The {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}\n   *\n   * @public\n   */\n  toDOM (_document = document, hooks = {}, binding) {\n    const hook = hooks[this.hookName];\n    let dom;\n    if (hook !== undefined) {\n      dom = hook.createDom(this);\n    } else {\n      dom = document.createElement(this.hookName);\n    }\n    dom.setAttribute('data-yjs-hook', this.hookName);\n    if (binding !== undefined) {\n      binding._createAssociation(dom, this);\n    }\n    return dom\n  }\n\n  /**\n   * Transform the properties of this type to binary and write it to an\n   * BinaryEncoder.\n   *\n   * This is called when this Item is sent to a remote peer.\n   *\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YXmlHookRefID);\n    encoder.writeKey(this.hookName);\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {YXmlHook}\n *\n * @private\n * @function\n */\nconst readYXmlHook = decoder =>\n  new YXmlHook(decoder.readKey());\n\n/**\n * Represents text in a Dom Element. In the future this type will also handle\n * simple formatting information like bold and italic.\n */\nclass YXmlText extends YText {\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get nextSibling () {\n    const n = this._item ? this._item.next : null;\n    return n ? /** @type {YXmlElement|YXmlText} */ (/** @type {ContentType} */ (n.content).type) : null\n  }\n\n  /**\n   * @type {YXmlElement|YXmlText|null}\n   */\n  get prevSibling () {\n    const n = this._item ? this._item.prev : null;\n    return n ? /** @type {YXmlElement|YXmlText} */ (/** @type {ContentType} */ (n.content).type) : null\n  }\n\n  _copy () {\n    return new YXmlText()\n  }\n\n  /**\n   * Makes a copy of this data type that can be included somewhere else.\n   *\n   * Note that the content is only readable _after_ it has been included somewhere in the Ydoc.\n   *\n   * @return {YXmlText}\n   */\n  clone () {\n    const text = new YXmlText();\n    text.applyDelta(this.toDelta());\n    return text\n  }\n\n  /**\n   * Creates a Dom Element that mirrors this YXmlText.\n   *\n   * @param {Document} [_document=document] The document object (you must define\n   *                                        this when calling this method in\n   *                                        nodejs)\n   * @param {Object<string, any>} [hooks] Optional property to customize how hooks\n   *                                             are presented in the DOM\n   * @param {any} [binding] You should not set this property. This is\n   *                               used if DomBinding wants to create a\n   *                               association to the created DOM type.\n   * @return {Text} The {@link https://developer.mozilla.org/en-US/docs/Web/API/Element|Dom Element}\n   *\n   * @public\n   */\n  toDOM (_document = document, hooks, binding) {\n    const dom = _document.createTextNode(this.toString());\n    if (binding !== undefined) {\n      binding._createAssociation(dom, this);\n    }\n    return dom\n  }\n\n  toString () {\n    // @ts-ignore\n    return this.toDelta().map(delta => {\n      const nestedNodes = [];\n      for (const nodeName in delta.attributes) {\n        const attrs = [];\n        for (const key in delta.attributes[nodeName]) {\n          attrs.push({ key, value: delta.attributes[nodeName][key] });\n        }\n        // sort attributes to get a unique order\n        attrs.sort((a, b) => a.key < b.key ? -1 : 1);\n        nestedNodes.push({ nodeName, attrs });\n      }\n      // sort node order to get a unique order\n      nestedNodes.sort((a, b) => a.nodeName < b.nodeName ? -1 : 1);\n      // now convert to dom string\n      let str = '';\n      for (let i = 0; i < nestedNodes.length; i++) {\n        const node = nestedNodes[i];\n        str += `<${node.nodeName}`;\n        for (let j = 0; j < node.attrs.length; j++) {\n          const attr = node.attrs[j];\n          str += ` ${attr.key}=\"${attr.value}\"`;\n        }\n        str += '>';\n      }\n      str += delta.insert;\n      for (let i = nestedNodes.length - 1; i >= 0; i--) {\n        str += `</${nestedNodes[i].nodeName}>`;\n      }\n      return str\n    }).join('')\n  }\n\n  /**\n   * @return {string}\n   */\n  toJSON () {\n    return this.toString()\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   */\n  _write (encoder) {\n    encoder.writeTypeRef(YXmlTextRefID);\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {YXmlText}\n *\n * @private\n * @function\n */\nconst readYXmlText = decoder => new YXmlText();\n\nclass AbstractStruct {\n  /**\n   * @param {ID} id\n   * @param {number} length\n   */\n  constructor (id, length) {\n    this.id = id;\n    this.length = length;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get deleted () {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * Merge this struct with the item to the right.\n   * This method is already assuming that `this.id.clock + this.length === this.id.clock`.\n   * Also this method does *not* remove right from StructStore!\n   * @param {AbstractStruct} right\n   * @return {boolean} whether this merged with right\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   * @param {number} offset\n   * @param {number} encodingRef\n   */\n  write (encoder, offset, encodingRef) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {number} offset\n   */\n  integrate (transaction, offset) {\n    throw error.methodUnimplemented()\n  }\n}\n\nconst structGCRefNumber = 0;\n\n/**\n * @private\n */\nclass GC extends AbstractStruct {\n  get deleted () {\n    return true\n  }\n\n  delete () {}\n\n  /**\n   * @param {GC} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    if (this.constructor !== right.constructor) {\n      return false\n    }\n    this.length += right.length;\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {number} offset\n   */\n  integrate (transaction, offset) {\n    if (offset > 0) {\n      this.id.clock += offset;\n      this.length -= offset;\n    }\n    addStruct(transaction.doc.store, this);\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeInfo(structGCRefNumber);\n    encoder.writeLen(this.length - offset);\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {StructStore} store\n   * @return {null | number}\n   */\n  getMissing (transaction, store) {\n    return null\n  }\n}\n\nclass ContentBinary {\n  /**\n   * @param {Uint8Array} content\n   */\n  constructor (content) {\n    this.content = content;\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return [this.content]\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentBinary}\n   */\n  copy () {\n    return new ContentBinary(this.content)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentBinary}\n   */\n  splice (offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentBinary} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeBuf(this.content);\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 3\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2 } decoder\n * @return {ContentBinary}\n */\nconst readContentBinary = decoder => new ContentBinary(decoder.readBuf());\n\nclass ContentDeleted {\n  /**\n   * @param {number} len\n   */\n  constructor (len) {\n    this.len = len;\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return this.len\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return []\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return false\n  }\n\n  /**\n   * @return {ContentDeleted}\n   */\n  copy () {\n    return new ContentDeleted(this.len)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentDeleted}\n   */\n  splice (offset) {\n    const right = new ContentDeleted(this.len - offset);\n    this.len = offset;\n    return right\n  }\n\n  /**\n   * @param {ContentDeleted} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    this.len += right.len;\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {\n    addToDeleteSet(transaction.deleteSet, item.id.client, item.id.clock, this.len);\n    item.markDeleted();\n  }\n\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeLen(this.len - offset);\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 1\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2 } decoder\n * @return {ContentDeleted}\n */\nconst readContentDeleted = decoder => new ContentDeleted(decoder.readLen());\n\n/**\n * @param {string} guid\n * @param {Object<string, any>} opts\n */\nconst createDocFromOpts = (guid, opts) => new Doc({ guid, ...opts, shouldLoad: opts.shouldLoad || opts.autoLoad || false });\n\n/**\n * @private\n */\nclass ContentDoc {\n  /**\n   * @param {Doc} doc\n   */\n  constructor (doc) {\n    if (doc._item) {\n      console.error('This document was already integrated as a sub-document. You should create a second instance instead with the same guid.');\n    }\n    /**\n     * @type {Doc}\n     */\n    this.doc = doc;\n    /**\n     * @type {any}\n     */\n    const opts = {};\n    this.opts = opts;\n    if (!doc.gc) {\n      opts.gc = false;\n    }\n    if (doc.autoLoad) {\n      opts.autoLoad = true;\n    }\n    if (doc.meta !== null) {\n      opts.meta = doc.meta;\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return [this.doc]\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentDoc}\n   */\n  copy () {\n    return new ContentDoc(createDocFromOpts(this.doc.guid, this.opts))\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentDoc}\n   */\n  splice (offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentDoc} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {\n    // this needs to be reflected in doc.destroy as well\n    this.doc._item = item;\n    transaction.subdocsAdded.add(this.doc);\n    if (this.doc.shouldLoad) {\n      transaction.subdocsLoaded.add(this.doc);\n    }\n  }\n\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {\n    if (transaction.subdocsAdded.has(this.doc)) {\n      transaction.subdocsAdded.delete(this.doc);\n    } else {\n      transaction.subdocsRemoved.add(this.doc);\n    }\n  }\n\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) { }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeString(this.doc.guid);\n    encoder.writeAny(this.opts);\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 9\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentDoc}\n */\nconst readContentDoc = decoder => new ContentDoc(createDocFromOpts(decoder.readString(), decoder.readAny()));\n\n/**\n * @private\n */\nclass ContentEmbed {\n  /**\n   * @param {Object} embed\n   */\n  constructor (embed) {\n    this.embed = embed;\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return [this.embed]\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentEmbed}\n   */\n  copy () {\n    return new ContentEmbed(this.embed)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentEmbed}\n   */\n  splice (offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentEmbed} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeJSON(this.embed);\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 5\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentEmbed}\n */\nconst readContentEmbed = decoder => new ContentEmbed(decoder.readJSON());\n\n/**\n * @private\n */\nclass ContentFormat {\n  /**\n   * @param {string} key\n   * @param {Object} value\n   */\n  constructor (key, value) {\n    this.key = key;\n    this.value = value;\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return []\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return false\n  }\n\n  /**\n   * @return {ContentFormat}\n   */\n  copy () {\n    return new ContentFormat(this.key, this.value)\n  }\n\n  /**\n   * @param {number} _offset\n   * @return {ContentFormat}\n   */\n  splice (_offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentFormat} _right\n   * @return {boolean}\n   */\n  mergeWith (_right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} _transaction\n   * @param {Item} item\n   */\n  integrate (_transaction, item) {\n    // @todo searchmarker are currently unsupported for rich text documents\n    const p = /** @type {YText} */ (item.parent);\n    p._searchMarker = null;\n    p._hasFormatting = true;\n  }\n\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeKey(this.key);\n    encoder.writeJSON(this.value);\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 6\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentFormat}\n */\nconst readContentFormat = decoder => new ContentFormat(decoder.readKey(), decoder.readJSON());\n\n/**\n * @private\n */\nclass ContentJSON {\n  /**\n   * @param {Array<any>} arr\n   */\n  constructor (arr) {\n    /**\n     * @type {Array<any>}\n     */\n    this.arr = arr;\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return this.arr.length\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return this.arr\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentJSON}\n   */\n  copy () {\n    return new ContentJSON(this.arr)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentJSON}\n   */\n  splice (offset) {\n    const right = new ContentJSON(this.arr.slice(offset));\n    this.arr = this.arr.slice(0, offset);\n    return right\n  }\n\n  /**\n   * @param {ContentJSON} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    this.arr = this.arr.concat(right.arr);\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    const len = this.arr.length;\n    encoder.writeLen(len - offset);\n    for (let i = offset; i < len; i++) {\n      const c = this.arr[i];\n      encoder.writeString(c === undefined ? 'undefined' : JSON.stringify(c));\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 2\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentJSON}\n */\nconst readContentJSON = decoder => {\n  const len = decoder.readLen();\n  const cs = [];\n  for (let i = 0; i < len; i++) {\n    const c = decoder.readString();\n    if (c === 'undefined') {\n      cs.push(undefined);\n    } else {\n      cs.push(JSON.parse(c));\n    }\n  }\n  return new ContentJSON(cs)\n};\n\nconst isDevMode = env.getVariable('node_env') === 'development';\n\nclass ContentAny {\n  /**\n   * @param {Array<any>} arr\n   */\n  constructor (arr) {\n    /**\n     * @type {Array<any>}\n     */\n    this.arr = arr;\n    isDevMode && object.deepFreeze(arr);\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return this.arr.length\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return this.arr\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentAny}\n   */\n  copy () {\n    return new ContentAny(this.arr)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentAny}\n   */\n  splice (offset) {\n    const right = new ContentAny(this.arr.slice(offset));\n    this.arr = this.arr.slice(0, offset);\n    return right\n  }\n\n  /**\n   * @param {ContentAny} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    this.arr = this.arr.concat(right.arr);\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    const len = this.arr.length;\n    encoder.writeLen(len - offset);\n    for (let i = offset; i < len; i++) {\n      const c = this.arr[i];\n      encoder.writeAny(c);\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 8\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentAny}\n */\nconst readContentAny = decoder => {\n  const len = decoder.readLen();\n  const cs = [];\n  for (let i = 0; i < len; i++) {\n    cs.push(decoder.readAny());\n  }\n  return new ContentAny(cs)\n};\n\n/**\n * @private\n */\nclass ContentString {\n  /**\n   * @param {string} str\n   */\n  constructor (str) {\n    /**\n     * @type {string}\n     */\n    this.str = str;\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return this.str.length\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return this.str.split('')\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentString}\n   */\n  copy () {\n    return new ContentString(this.str)\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentString}\n   */\n  splice (offset) {\n    const right = new ContentString(this.str.slice(offset));\n    this.str = this.str.slice(0, offset);\n\n    // Prevent encoding invalid documents because of splitting of surrogate pairs: https://github.com/yjs/yjs/issues/248\n    const firstCharCode = this.str.charCodeAt(offset - 1);\n    if (firstCharCode >= 0xD800 && firstCharCode <= 0xDBFF) {\n      // Last character of the left split is the start of a surrogate utf16/ucs2 pair.\n      // We don't support splitting of surrogate pairs because this may lead to invalid documents.\n      // Replace the invalid character with a unicode replacement character (ï¿½ / U+FFFD)\n      this.str = this.str.slice(0, offset - 1) + 'ï¿½';\n      // replace right as well\n      right.str = 'ï¿½' + right.str.slice(1);\n    }\n    return right\n  }\n\n  /**\n   * @param {ContentString} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    this.str += right.str;\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {}\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {}\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {}\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeString(offset === 0 ? this.str : this.str.slice(offset));\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 4\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentString}\n */\nconst readContentString = decoder => new ContentString(decoder.readString());\n\n/**\n * @type {Array<function(UpdateDecoderV1 | UpdateDecoderV2):AbstractType<any>>}\n * @private\n */\nconst typeRefs = [\n  readYArray,\n  readYMap,\n  readYText,\n  readYXmlElement,\n  readYXmlFragment,\n  readYXmlHook,\n  readYXmlText\n];\n\nconst YArrayRefID = 0;\nconst YMapRefID = 1;\nconst YTextRefID = 2;\nconst YXmlElementRefID = 3;\nconst YXmlFragmentRefID = 4;\nconst YXmlHookRefID = 5;\nconst YXmlTextRefID = 6;\n\n/**\n * @private\n */\nclass ContentType {\n  /**\n   * @param {AbstractType<any>} type\n   */\n  constructor (type) {\n    /**\n     * @type {AbstractType<any>}\n     */\n    this.type = type;\n  }\n\n  /**\n   * @return {number}\n   */\n  getLength () {\n    return 1\n  }\n\n  /**\n   * @return {Array<any>}\n   */\n  getContent () {\n    return [this.type]\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCountable () {\n    return true\n  }\n\n  /**\n   * @return {ContentType}\n   */\n  copy () {\n    return new ContentType(this.type._copy())\n  }\n\n  /**\n   * @param {number} offset\n   * @return {ContentType}\n   */\n  splice (offset) {\n    throw error.methodUnimplemented()\n  }\n\n  /**\n   * @param {ContentType} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    return false\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {Item} item\n   */\n  integrate (transaction, item) {\n    this.type._integrate(transaction.doc, item);\n  }\n\n  /**\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {\n    let item = this.type._start;\n    while (item !== null) {\n      if (!item.deleted) {\n        item.delete(transaction);\n      } else if (item.id.clock < (transaction.beforeState.get(item.id.client) || 0)) {\n        // This will be gc'd later and we want to merge it if possible\n        // We try to merge all deleted items after each transaction,\n        // but we have no knowledge about that this needs to be merged\n        // since it is not in transaction.ds. Hence we add it to transaction._mergeStructs\n        transaction._mergeStructs.push(item);\n      }\n      item = item.right;\n    }\n    this.type._map.forEach(item => {\n      if (!item.deleted) {\n        item.delete(transaction);\n      } else if (item.id.clock < (transaction.beforeState.get(item.id.client) || 0)) {\n        // same as above\n        transaction._mergeStructs.push(item);\n      }\n    });\n    transaction.changed.delete(this.type);\n  }\n\n  /**\n   * @param {StructStore} store\n   */\n  gc (store) {\n    let item = this.type._start;\n    while (item !== null) {\n      item.gc(store, true);\n      item = item.right;\n    }\n    this.type._start = null;\n    this.type._map.forEach(/** @param {Item | null} item */ (item) => {\n      while (item !== null) {\n        item.gc(store, true);\n        item = item.left;\n      }\n    });\n    this.type._map = new Map();\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    this.type._write(encoder);\n  }\n\n  /**\n   * @return {number}\n   */\n  getRef () {\n    return 7\n  }\n}\n\n/**\n * @private\n *\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @return {ContentType}\n */\nconst readContentType = decoder => new ContentType(typeRefs[decoder.readTypeRef()](decoder));\n\n/**\n * @todo This should return several items\n *\n * @param {StructStore} store\n * @param {ID} id\n * @return {{item:Item, diff:number}}\n */\nconst followRedone = (store, id) => {\n  /**\n   * @type {ID|null}\n   */\n  let nextID = id;\n  let diff = 0;\n  let item;\n  do {\n    if (diff > 0) {\n      nextID = createID(nextID.client, nextID.clock + diff);\n    }\n    item = getItem(store, nextID);\n    diff = nextID.clock - item.id.clock;\n    nextID = item.redone;\n  } while (nextID !== null && item instanceof Item)\n  return {\n    item, diff\n  }\n};\n\n/**\n * Make sure that neither item nor any of its parents is ever deleted.\n *\n * This property does not persist when storing it into a database or when\n * sending it to other peers\n *\n * @param {Item|null} item\n * @param {boolean} keep\n */\nconst keepItem = (item, keep) => {\n  while (item !== null && item.keep !== keep) {\n    item.keep = keep;\n    item = /** @type {AbstractType<any>} */ (item.parent)._item;\n  }\n};\n\n/**\n * Split leftItem into two items\n * @param {Transaction} transaction\n * @param {Item} leftItem\n * @param {number} diff\n * @return {Item}\n *\n * @function\n * @private\n */\nconst splitItem = (transaction, leftItem, diff) => {\n  // create rightItem\n  const { client, clock } = leftItem.id;\n  const rightItem = new Item(\n    createID(client, clock + diff),\n    leftItem,\n    createID(client, clock + diff - 1),\n    leftItem.right,\n    leftItem.rightOrigin,\n    leftItem.parent,\n    leftItem.parentSub,\n    leftItem.content.splice(diff)\n  );\n  if (leftItem.deleted) {\n    rightItem.markDeleted();\n  }\n  if (leftItem.keep) {\n    rightItem.keep = true;\n  }\n  if (leftItem.redone !== null) {\n    rightItem.redone = createID(leftItem.redone.client, leftItem.redone.clock + diff);\n  }\n  // update left (do not set leftItem.rightOrigin as it will lead to problems when syncing)\n  leftItem.right = rightItem;\n  // update right\n  if (rightItem.right !== null) {\n    rightItem.right.left = rightItem;\n  }\n  // right is more specific.\n  transaction._mergeStructs.push(rightItem);\n  // update parent._map\n  if (rightItem.parentSub !== null && rightItem.right === null) {\n    /** @type {AbstractType<any>} */ (rightItem.parent)._map.set(rightItem.parentSub, rightItem);\n  }\n  leftItem.length = diff;\n  return rightItem\n};\n\n/**\n * @param {Array<StackItem>} stack\n * @param {ID} id\n */\nconst isDeletedByUndoStack = (stack, id) => array.some(stack, /** @param {StackItem} s */ s => isDeleted(s.deletions, id));\n\n/**\n * Redoes the effect of this operation.\n *\n * @param {Transaction} transaction The Yjs instance.\n * @param {Item} item\n * @param {Set<Item>} redoitems\n * @param {DeleteSet} itemsToDelete\n * @param {boolean} ignoreRemoteMapChanges\n * @param {import('../utils/UndoManager.js').UndoManager} um\n *\n * @return {Item|null}\n *\n * @private\n */\nconst redoItem = (transaction, item, redoitems, itemsToDelete, ignoreRemoteMapChanges, um) => {\n  const doc = transaction.doc;\n  const store = doc.store;\n  const ownClientID = doc.clientID;\n  const redone = item.redone;\n  if (redone !== null) {\n    return getItemCleanStart(transaction, redone)\n  }\n  let parentItem = /** @type {AbstractType<any>} */ (item.parent)._item;\n  /**\n   * @type {Item|null}\n   */\n  let left = null;\n  /**\n   * @type {Item|null}\n   */\n  let right;\n  // make sure that parent is redone\n  if (parentItem !== null && parentItem.deleted === true) {\n    // try to undo parent if it will be undone anyway\n    if (parentItem.redone === null && (!redoitems.has(parentItem) || redoItem(transaction, parentItem, redoitems, itemsToDelete, ignoreRemoteMapChanges, um) === null)) {\n      return null\n    }\n    while (parentItem.redone !== null) {\n      parentItem = getItemCleanStart(transaction, parentItem.redone);\n    }\n  }\n  const parentType = parentItem === null ? /** @type {AbstractType<any>} */ (item.parent) : /** @type {ContentType} */ (parentItem.content).type;\n\n  if (item.parentSub === null) {\n    // Is an array item. Insert at the old position\n    left = item.left;\n    right = item;\n    // find next cloned_redo items\n    while (left !== null) {\n      /**\n       * @type {Item|null}\n       */\n      let leftTrace = left;\n      // trace redone until parent matches\n      while (leftTrace !== null && /** @type {AbstractType<any>} */ (leftTrace.parent)._item !== parentItem) {\n        leftTrace = leftTrace.redone === null ? null : getItemCleanStart(transaction, leftTrace.redone);\n      }\n      if (leftTrace !== null && /** @type {AbstractType<any>} */ (leftTrace.parent)._item === parentItem) {\n        left = leftTrace;\n        break\n      }\n      left = left.left;\n    }\n    while (right !== null) {\n      /**\n       * @type {Item|null}\n       */\n      let rightTrace = right;\n      // trace redone until parent matches\n      while (rightTrace !== null && /** @type {AbstractType<any>} */ (rightTrace.parent)._item !== parentItem) {\n        rightTrace = rightTrace.redone === null ? null : getItemCleanStart(transaction, rightTrace.redone);\n      }\n      if (rightTrace !== null && /** @type {AbstractType<any>} */ (rightTrace.parent)._item === parentItem) {\n        right = rightTrace;\n        break\n      }\n      right = right.right;\n    }\n  } else {\n    right = null;\n    if (item.right && !ignoreRemoteMapChanges) {\n      left = item;\n      // Iterate right while right is in itemsToDelete\n      // If it is intended to delete right while item is redone, we can expect that item should replace right.\n      while (left !== null && left.right !== null && (left.right.redone || isDeleted(itemsToDelete, left.right.id) || isDeletedByUndoStack(um.undoStack, left.right.id) || isDeletedByUndoStack(um.redoStack, left.right.id))) {\n        left = left.right;\n        // follow redone\n        while (left.redone) left = getItemCleanStart(transaction, left.redone);\n      }\n      if (left && left.right !== null) {\n        // It is not possible to redo this item because it conflicts with a\n        // change from another client\n        return null\n      }\n    } else {\n      left = parentType._map.get(item.parentSub) || null;\n    }\n  }\n  const nextClock = getState(store, ownClientID);\n  const nextId = createID(ownClientID, nextClock);\n  const redoneItem = new Item(\n    nextId,\n    left, left && left.lastId,\n    right, right && right.id,\n    parentType,\n    item.parentSub,\n    item.content.copy()\n  );\n  item.redone = nextId;\n  keepItem(redoneItem, true);\n  redoneItem.integrate(transaction, 0);\n  return redoneItem\n};\n\n/**\n * Abstract class that represents any content.\n */\nclass Item extends AbstractStruct {\n  /**\n   * @param {ID} id\n   * @param {Item | null} left\n   * @param {ID | null} origin\n   * @param {Item | null} right\n   * @param {ID | null} rightOrigin\n   * @param {AbstractType<any>|ID|null} parent Is a type if integrated, is null if it is possible to copy parent from left or right, is ID before integration to search for it.\n   * @param {string | null} parentSub\n   * @param {AbstractContent} content\n   */\n  constructor (id, left, origin, right, rightOrigin, parent, parentSub, content) {\n    super(id, content.getLength());\n    /**\n     * The item that was originally to the left of this item.\n     * @type {ID | null}\n     */\n    this.origin = origin;\n    /**\n     * The item that is currently to the left of this item.\n     * @type {Item | null}\n     */\n    this.left = left;\n    /**\n     * The item that is currently to the right of this item.\n     * @type {Item | null}\n     */\n    this.right = right;\n    /**\n     * The item that was originally to the right of this item.\n     * @type {ID | null}\n     */\n    this.rightOrigin = rightOrigin;\n    /**\n     * @type {AbstractType<any>|ID|null}\n     */\n    this.parent = parent;\n    /**\n     * If the parent refers to this item with some kind of key (e.g. YMap, the\n     * key is specified here. The key is then used to refer to the list in which\n     * to insert this item. If `parentSub = null` type._start is the list in\n     * which to insert to. Otherwise it is `parent._map`.\n     * @type {String | null}\n     */\n    this.parentSub = parentSub;\n    /**\n     * If this type's effect is redone this type refers to the type that undid\n     * this operation.\n     * @type {ID | null}\n     */\n    this.redone = null;\n    /**\n     * @type {AbstractContent}\n     */\n    this.content = content;\n    /**\n     * bit1: keep\n     * bit2: countable\n     * bit3: deleted\n     * bit4: mark - mark node as fast-search-marker\n     * @type {number} byte\n     */\n    this.info = this.content.isCountable() ? binary.BIT2 : 0;\n  }\n\n  /**\n   * This is used to mark the item as an indexed fast-search marker\n   *\n   * @type {boolean}\n   */\n  set marker (isMarked) {\n    if (((this.info & binary.BIT4) > 0) !== isMarked) {\n      this.info ^= binary.BIT4;\n    }\n  }\n\n  get marker () {\n    return (this.info & binary.BIT4) > 0\n  }\n\n  /**\n   * If true, do not garbage collect this Item.\n   */\n  get keep () {\n    return (this.info & binary.BIT1) > 0\n  }\n\n  set keep (doKeep) {\n    if (this.keep !== doKeep) {\n      this.info ^= binary.BIT1;\n    }\n  }\n\n  get countable () {\n    return (this.info & binary.BIT2) > 0\n  }\n\n  /**\n   * Whether this item was deleted or not.\n   * @type {Boolean}\n   */\n  get deleted () {\n    return (this.info & binary.BIT3) > 0\n  }\n\n  set deleted (doDelete) {\n    if (this.deleted !== doDelete) {\n      this.info ^= binary.BIT3;\n    }\n  }\n\n  markDeleted () {\n    this.info |= binary.BIT3;\n  }\n\n  /**\n   * Return the creator clientID of the missing op or define missing items and return null.\n   *\n   * @param {Transaction} transaction\n   * @param {StructStore} store\n   * @return {null | number}\n   */\n  getMissing (transaction, store) {\n    if (this.origin && this.origin.client !== this.id.client && this.origin.clock >= getState(store, this.origin.client)) {\n      return this.origin.client\n    }\n    if (this.rightOrigin && this.rightOrigin.client !== this.id.client && this.rightOrigin.clock >= getState(store, this.rightOrigin.client)) {\n      return this.rightOrigin.client\n    }\n    if (this.parent && this.parent.constructor === ID && this.id.client !== this.parent.client && this.parent.clock >= getState(store, this.parent.client)) {\n      return this.parent.client\n    }\n\n    // We have all missing ids, now find the items\n\n    if (this.origin) {\n      this.left = getItemCleanEnd(transaction, store, this.origin);\n      this.origin = this.left.lastId;\n    }\n    if (this.rightOrigin) {\n      this.right = getItemCleanStart(transaction, this.rightOrigin);\n      this.rightOrigin = this.right.id;\n    }\n    if ((this.left && this.left.constructor === GC) || (this.right && this.right.constructor === GC)) {\n      this.parent = null;\n    } else if (!this.parent) {\n      // only set parent if this shouldn't be garbage collected\n      if (this.left && this.left.constructor === Item) {\n        this.parent = this.left.parent;\n        this.parentSub = this.left.parentSub;\n      } else if (this.right && this.right.constructor === Item) {\n        this.parent = this.right.parent;\n        this.parentSub = this.right.parentSub;\n      }\n    } else if (this.parent.constructor === ID) {\n      const parentItem = getItem(store, this.parent);\n      if (parentItem.constructor === GC) {\n        this.parent = null;\n      } else {\n        this.parent = /** @type {ContentType} */ (parentItem.content).type;\n      }\n    }\n    return null\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {number} offset\n   */\n  integrate (transaction, offset) {\n    if (offset > 0) {\n      this.id.clock += offset;\n      this.left = getItemCleanEnd(transaction, transaction.doc.store, createID(this.id.client, this.id.clock - 1));\n      this.origin = this.left.lastId;\n      this.content = this.content.splice(offset);\n      this.length -= offset;\n    }\n\n    if (this.parent) {\n      if ((!this.left && (!this.right || this.right.left !== null)) || (this.left && this.left.right !== this.right)) {\n        /**\n         * @type {Item|null}\n         */\n        let left = this.left;\n\n        /**\n         * @type {Item|null}\n         */\n        let o;\n        // set o to the first conflicting item\n        if (left !== null) {\n          o = left.right;\n        } else if (this.parentSub !== null) {\n          o = /** @type {AbstractType<any>} */ (this.parent)._map.get(this.parentSub) || null;\n          while (o !== null && o.left !== null) {\n            o = o.left;\n          }\n        } else {\n          o = /** @type {AbstractType<any>} */ (this.parent)._start;\n        }\n        // TODO: use something like DeleteSet here (a tree implementation would be best)\n        // @todo use global set definitions\n        /**\n         * @type {Set<Item>}\n         */\n        const conflictingItems = new Set();\n        /**\n         * @type {Set<Item>}\n         */\n        const itemsBeforeOrigin = new Set();\n        // Let c in conflictingItems, b in itemsBeforeOrigin\n        // ***{origin}bbbb{this}{c,b}{c,b}{o}***\n        // Note that conflictingItems is a subset of itemsBeforeOrigin\n        while (o !== null && o !== this.right) {\n          itemsBeforeOrigin.add(o);\n          conflictingItems.add(o);\n          if (compareIDs(this.origin, o.origin)) {\n            // case 1\n            if (o.id.client < this.id.client) {\n              left = o;\n              conflictingItems.clear();\n            } else if (compareIDs(this.rightOrigin, o.rightOrigin)) {\n              // this and o are conflicting and point to the same integration points. The id decides which item comes first.\n              // Since this is to the left of o, we can break here\n              break\n            } // else, o might be integrated before an item that this conflicts with. If so, we will find it in the next iterations\n          } else if (o.origin !== null && itemsBeforeOrigin.has(getItem(transaction.doc.store, o.origin))) { // use getItem instead of getItemCleanEnd because we don't want / need to split items.\n            // case 2\n            if (!conflictingItems.has(getItem(transaction.doc.store, o.origin))) {\n              left = o;\n              conflictingItems.clear();\n            }\n          } else {\n            break\n          }\n          o = o.right;\n        }\n        this.left = left;\n      }\n      // reconnect left/right + update parent map/start if necessary\n      if (this.left !== null) {\n        const right = this.left.right;\n        this.right = right;\n        this.left.right = this;\n      } else {\n        let r;\n        if (this.parentSub !== null) {\n          r = /** @type {AbstractType<any>} */ (this.parent)._map.get(this.parentSub) || null;\n          while (r !== null && r.left !== null) {\n            r = r.left;\n          }\n        } else {\n          r = /** @type {AbstractType<any>} */ (this.parent)._start\n          ;/** @type {AbstractType<any>} */ (this.parent)._start = this;\n        }\n        this.right = r;\n      }\n      if (this.right !== null) {\n        this.right.left = this;\n      } else if (this.parentSub !== null) {\n        // set as current parent value if right === null and this is parentSub\n        /** @type {AbstractType<any>} */ (this.parent)._map.set(this.parentSub, this);\n        if (this.left !== null) {\n          // this is the current attribute value of parent. delete right\n          this.left.delete(transaction);\n        }\n      }\n      // adjust length of parent\n      if (this.parentSub === null && this.countable && !this.deleted) {\n        /** @type {AbstractType<any>} */ (this.parent)._length += this.length;\n      }\n      addStruct(transaction.doc.store, this);\n      this.content.integrate(transaction, this);\n      // add parent to transaction.changed\n      addChangedTypeToTransaction(transaction, /** @type {AbstractType<any>} */ (this.parent), this.parentSub);\n      if ((/** @type {AbstractType<any>} */ (this.parent)._item !== null && /** @type {AbstractType<any>} */ (this.parent)._item.deleted) || (this.parentSub !== null && this.right !== null)) {\n        // delete if parent is deleted or if this is not the current attribute value of parent\n        this.delete(transaction);\n      }\n    } else {\n      // parent is not defined. Integrate GC struct instead\n      new GC(this.id, this.length).integrate(transaction, 0);\n    }\n  }\n\n  /**\n   * Returns the next non-deleted item\n   */\n  get next () {\n    let n = this.right;\n    while (n !== null && n.deleted) {\n      n = n.right;\n    }\n    return n\n  }\n\n  /**\n   * Returns the previous non-deleted item\n   */\n  get prev () {\n    let n = this.left;\n    while (n !== null && n.deleted) {\n      n = n.left;\n    }\n    return n\n  }\n\n  /**\n   * Computes the last content address of this Item.\n   */\n  get lastId () {\n    // allocating ids is pretty costly because of the amount of ids created, so we try to reuse whenever possible\n    return this.length === 1 ? this.id : createID(this.id.client, this.id.clock + this.length - 1)\n  }\n\n  /**\n   * Try to merge two items\n   *\n   * @param {Item} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    if (\n      this.constructor === right.constructor &&\n      compareIDs(right.origin, this.lastId) &&\n      this.right === right &&\n      compareIDs(this.rightOrigin, right.rightOrigin) &&\n      this.id.client === right.id.client &&\n      this.id.clock + this.length === right.id.clock &&\n      this.deleted === right.deleted &&\n      this.redone === null &&\n      right.redone === null &&\n      this.content.constructor === right.content.constructor &&\n      this.content.mergeWith(right.content)\n    ) {\n      const searchMarker = /** @type {AbstractType<any>} */ (this.parent)._searchMarker;\n      if (searchMarker) {\n        searchMarker.forEach(marker => {\n          if (marker.p === right) {\n            // right is going to be \"forgotten\" so we need to update the marker\n            marker.p = this;\n            // adjust marker index\n            if (!this.deleted && this.countable) {\n              marker.index -= this.length;\n            }\n          }\n        });\n      }\n      if (right.keep) {\n        this.keep = true;\n      }\n      this.right = right.right;\n      if (this.right !== null) {\n        this.right.left = this;\n      }\n      this.length += right.length;\n      return true\n    }\n    return false\n  }\n\n  /**\n   * Mark this Item as deleted.\n   *\n   * @param {Transaction} transaction\n   */\n  delete (transaction) {\n    if (!this.deleted) {\n      const parent = /** @type {AbstractType<any>} */ (this.parent);\n      // adjust the length of parent\n      if (this.countable && this.parentSub === null) {\n        parent._length -= this.length;\n      }\n      this.markDeleted();\n      addToDeleteSet(transaction.deleteSet, this.id.client, this.id.clock, this.length);\n      addChangedTypeToTransaction(transaction, parent, this.parentSub);\n      this.content.delete(transaction);\n    }\n  }\n\n  /**\n   * @param {StructStore} store\n   * @param {boolean} parentGCd\n   */\n  gc (store, parentGCd) {\n    if (!this.deleted) {\n      throw error.unexpectedCase()\n    }\n    this.content.gc(store);\n    if (parentGCd) {\n      replaceStruct(store, this, new GC(this.id, this.length));\n    } else {\n      this.content = new ContentDeleted(this.length);\n    }\n  }\n\n  /**\n   * Transform the properties of this type to binary and write it to an\n   * BinaryEncoder.\n   *\n   * This is called when this Item is sent to a remote peer.\n   *\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder The encoder to write data to.\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    const origin = offset > 0 ? createID(this.id.client, this.id.clock + offset - 1) : this.origin;\n    const rightOrigin = this.rightOrigin;\n    const parentSub = this.parentSub;\n    const info = (this.content.getRef() & binary.BITS5) |\n      (origin === null ? 0 : binary.BIT8) | // origin is defined\n      (rightOrigin === null ? 0 : binary.BIT7) | // right origin is defined\n      (parentSub === null ? 0 : binary.BIT6); // parentSub is non-null\n    encoder.writeInfo(info);\n    if (origin !== null) {\n      encoder.writeLeftID(origin);\n    }\n    if (rightOrigin !== null) {\n      encoder.writeRightID(rightOrigin);\n    }\n    if (origin === null && rightOrigin === null) {\n      const parent = /** @type {AbstractType<any>} */ (this.parent);\n      if (parent._item !== undefined) {\n        const parentItem = parent._item;\n        if (parentItem === null) {\n          // parent type on y._map\n          // find the correct key\n          const ykey = findRootTypeKey(parent);\n          encoder.writeParentInfo(true); // write parentYKey\n          encoder.writeString(ykey);\n        } else {\n          encoder.writeParentInfo(false); // write parent id\n          encoder.writeLeftID(parentItem.id);\n        }\n      } else if (parent.constructor === String) { // this edge case was added by differential updates\n        encoder.writeParentInfo(true); // write parentYKey\n        encoder.writeString(parent);\n      } else if (parent.constructor === ID) {\n        encoder.writeParentInfo(false); // write parent id\n        encoder.writeLeftID(parent);\n      } else {\n        error.unexpectedCase();\n      }\n      if (parentSub !== null) {\n        encoder.writeString(parentSub);\n      }\n    }\n    this.content.write(encoder, offset);\n  }\n}\n\n/**\n * @param {UpdateDecoderV1 | UpdateDecoderV2} decoder\n * @param {number} info\n */\nconst readItemContent = (decoder, info) => contentRefs[info & binary.BITS5](decoder);\n\n/**\n * A lookup map for reading Item content.\n *\n * @type {Array<function(UpdateDecoderV1 | UpdateDecoderV2):AbstractContent>}\n */\nconst contentRefs = [\n  () => { error.unexpectedCase(); }, // GC is not ItemContent\n  readContentDeleted, // 1\n  readContentJSON, // 2\n  readContentBinary, // 3\n  readContentString, // 4\n  readContentEmbed, // 5\n  readContentFormat, // 6\n  readContentType, // 7\n  readContentAny, // 8\n  readContentDoc, // 9\n  () => { error.unexpectedCase(); } // 10 - Skip is not ItemContent\n];\n\nconst structSkipRefNumber = 10;\n\n/**\n * @private\n */\nclass Skip extends AbstractStruct {\n  get deleted () {\n    return true\n  }\n\n  delete () {}\n\n  /**\n   * @param {Skip} right\n   * @return {boolean}\n   */\n  mergeWith (right) {\n    if (this.constructor !== right.constructor) {\n      return false\n    }\n    this.length += right.length;\n    return true\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {number} offset\n   */\n  integrate (transaction, offset) {\n    // skip structs cannot be integrated\n    error.unexpectedCase();\n  }\n\n  /**\n   * @param {UpdateEncoderV1 | UpdateEncoderV2} encoder\n   * @param {number} offset\n   */\n  write (encoder, offset) {\n    encoder.writeInfo(structSkipRefNumber);\n    // write as VarUint because Skips can't make use of predictable length-encoding\n    encoding.writeVarUint(encoder.restEncoder, this.length - offset);\n  }\n\n  /**\n   * @param {Transaction} transaction\n   * @param {StructStore} store\n   * @return {null | number}\n   */\n  getMissing (transaction, store) {\n    return null\n  }\n}\n\n/** eslint-env browser */\n\n\nconst glo = /** @type {any} */ (typeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof window !== 'undefined'\n    ? window\n    // @ts-ignore\n    : typeof global !== 'undefined' ? global : {});\n\nconst importIdentifier = '__ $YJS$ __';\n\nif (glo[importIdentifier] === true) {\n  /**\n   * Dear reader of this message. Please take this seriously.\n   *\n   * If you see this message, make sure that you only import one version of Yjs. In many cases,\n   * your package manager installs two versions of Yjs that are used by different packages within your project.\n   * Another reason for this message is that some parts of your project use the commonjs version of Yjs\n   * and others use the EcmaScript version of Yjs.\n   *\n   * This often leads to issues that are hard to debug. We often need to perform constructor checks,\n   * e.g. `struct instanceof GC`. If you imported different versions of Yjs, it is impossible for us to\n   * do the constructor checks anymore - which might break the CRDT algorithm.\n   *\n   * https://github.com/yjs/yjs/issues/438\n   */\n  console.error('Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438');\n}\nglo[importIdentifier] = true;\n\nexport { AbsolutePosition, AbstractConnector, AbstractStruct, AbstractType, YArray as Array, ContentAny, ContentBinary, ContentDeleted, ContentDoc, ContentEmbed, ContentFormat, ContentJSON, ContentString, ContentType, Doc, GC, ID, Item, YMap as Map, PermanentUserData, RelativePosition, Skip, Snapshot, YText as Text, Transaction, UndoManager, UpdateDecoderV1, UpdateDecoderV2, UpdateEncoderV1, UpdateEncoderV2, YXmlElement as XmlElement, YXmlFragment as XmlFragment, YXmlHook as XmlHook, YXmlText as XmlText, YArrayEvent, YEvent, YMapEvent, YTextEvent, YXmlEvent, applyUpdate, applyUpdateV2, cleanupYTextFormatting, compareIDs, compareRelativePositions, convertUpdateFormatV1ToV2, convertUpdateFormatV2ToV1, createAbsolutePositionFromRelativePosition, createDeleteSet, createDeleteSetFromStructStore, createDocFromSnapshot, createID, createRelativePositionFromJSON, createRelativePositionFromTypeIndex, createSnapshot, decodeRelativePosition, decodeSnapshot, decodeSnapshotV2, decodeStateVector, decodeUpdate, decodeUpdateV2, diffUpdate, diffUpdateV2, emptySnapshot, encodeRelativePosition, encodeSnapshot, encodeSnapshotV2, encodeStateAsUpdate, encodeStateAsUpdateV2, encodeStateVector, encodeStateVectorFromUpdate, encodeStateVectorFromUpdateV2, equalDeleteSets, equalSnapshots, findIndexSS, findRootTypeKey, getItem, getItemCleanEnd, getItemCleanStart, getState, getTypeChildren, isDeleted, isParentOf, iterateDeletedStructs, logType, logUpdate, logUpdateV2, mergeDeleteSets, mergeUpdates, mergeUpdatesV2, obfuscateUpdate, obfuscateUpdateV2, parseUpdateMeta, parseUpdateMetaV2, readUpdate, readUpdateV2, relativePositionToJSON, snapshot, snapshotContainsUpdate, transact, tryGc, typeListToArraySnapshot, typeMapGetAllSnapshot, typeMapGetSnapshot };\n//# sourceMappingURL=yjs.mjs.map\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{$getNodeByKey as e,$isLineBreakNode as t,$isTextNode as n,$getSelection as o,$isRangeSelection as s,$isElementNode as i,$isDecoratorNode as l,createEditor as r,$getWritableNodeState as c,$getRoot as f,$isRootNode as a,$getNodeByKeyOrThrow as u,removeFromParent as d,$addUpdateTag as h,SKIP_SCROLL_INTO_VIEW_TAG as _,$createParagraphNode as p,HISTORIC_TAG as g,COLLABORATION_TAG as y,createCommand as x}from\"lexical\";import{XmlText as m,Map as k,XmlElement as b,Doc as C,createAbsolutePositionFromRelativePosition as N,createRelativePositionFromTypeIndex as v,compareRelativePositions as w,YMapEvent as S,YTextEvent as T,YXmlEvent as P,UndoManager as F}from\"yjs\";import{$createChildrenArray as O}from\"@lexical/offset\";import{createDOMRange as E,createRectsFromDOMRange as M}from\"@lexical/selection\";function L(e,...t){const n=new URL(\"https://lexical.dev/docs/error\"),o=new URLSearchParams;o.append(\"code\",e);for(const e of t)o.append(\"v\",e);throw n.search=o.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class z{constructor(e,t){this._key=\"\",this._map=e,this._parent=t,this._type=\"linebreak\"}getNode(){const n=e(this._key);return t(n)?n:null}getKey(){return this._key}getSharedType(){return this._map}getType(){return this._type}getSize(){return 1}getOffset(){return this._parent.getChildOffset(this)}destroy(e){const t=e.collabNodeMap;t.get(this._key)===this&&t.delete(this._key)}}function j(e,t){const n=new z(e,t);return e._collabNode=n,n}class A{constructor(e,t,n,o){this._key=\"\",this._map=e,this._parent=n,this._text=t,this._type=o,this._normalized=!1}getPrevNode(e){if(null===e)return null;const t=e.get(this._key);return n(t)?t:null}getNode(){const t=e(this._key);return n(t)?t:null}getSharedType(){return this._map}getType(){return this._type}getKey(){return this._key}getSize(){return this._text.length+(this._normalized?0:1)}getOffset(){return this._parent.getChildOffset(this)}spliceText(e,t,n){const o=this._parent._xmlText,s=this.getOffset()+1+e;0!==t&&o.delete(s,t),\"\"!==n&&o.insert(s,n)}syncPropertiesAndTextFromLexical(e,t,n){const i=this.getPrevNode(n),l=t.__text;if(V(e,this._map,i,t),null!==i){const e=i.__text;if(e!==l){!function(e,t,n,i){const l=o();let r=i.length;if(s(l)&&l.isCollapsed()){const e=l.anchor;e.key===t&&(r=e.offset)}const c=function(e,t,n){const o=e.length,s=t.length;let i=0,l=0;for(;i<o&&i<s&&e[i]===t[i]&&i<n;)i++;for(;l+i<o&&l+i<s&&e[o-l-1]===t[s-l-1];)l++;for(;l+i<o&&l+i<s&&e[i]===t[i];)i++;return{index:i,insert:t.slice(i,s-l),remove:o-i-l}}(n,i,r);e.spliceText(c.index,c.remove,c.insert)}(this,t.__key,e,l),this._text=l}}}syncPropertiesAndTextFromYjs(e,t){const n=this.getNode();null===n&&L(84),J(e,this._map,n,t);const o=this._text;n.__text!==o&&n.setTextContent(o)}destroy(e){const t=e.collabNodeMap;t.get(this._key)===this&&t.delete(this._key)}}function Y(e,t,n,o){const s=new A(e,t,n,o);return e._collabNode=s,s}const D=new Set([\"__key\",\"__parent\",\"__next\",\"__prev\",\"__state\"]),I=new Set([\"__first\",\"__last\",\"__size\",\"__dir\"]),K=new Set([\"__cachedText\"]),$=new Set([\"__text\"]);function W(e,t,o){if(D.has(e)||\"function\"==typeof t[e])return!0;if(n(t)){if($.has(e))return!0}else if(i(t)&&(I.has(e)||a(t)&&K.has(e)))return!0;const s=t.constructor,l=o.excludedProperties.get(s);return null!=l&&l.has(e)}function R(e,o,s){const r=o.__type;let c;if(i(o)){c=ie(new m,s,r),c.syncPropertiesFromLexical(e,o,null),c.syncChildrenFromLexical(e,o,null,null,null)}else if(n(o)){c=Y(new k,o.__text,s,r),c.syncPropertiesAndTextFromLexical(e,o,null)}else if(t(o)){const e=new k;e.set(\"__type\",\"linebreak\"),c=j(e,s)}else if(l(o)){c=oe(new b,s,r),c.syncPropertiesFromLexical(e,o,null)}else L(86);return c._key=o.__key,c}function U(e){const t=q(e,\"__type\");return\"string\"!=typeof t&&void 0!==t&&L(87),t}function B(e,t,n){const o=t._collabNode;if(void 0===o){const o=e.editor._nodes,s=U(t);\"string\"!=typeof s&&L(87);void 0===o.get(s)&&L(88,s);const i=t.parent,l=void 0===n&&null!==i?B(e,i):n||null;if(l instanceof se||L(89),t instanceof m)return ie(t,l,s);if(t instanceof k)return\"linebreak\"===s?j(t,l):Y(t,\"\",l,s);if(t instanceof b)return oe(t,l,s)}return o}function G(e,t,n){const o=t.getType(),s=e.editor._nodes.get(o);void 0===s&&L(88,o);const i=new s.klass;if(i.__parent=n,t._key=i.__key,t instanceof se){const n=t._xmlText;t.syncPropertiesFromYjs(e,null),t.applyChildrenYjsDelta(e,n.toDelta()),t.syncChildrenFromYjs(e)}else t instanceof A?t.syncPropertiesAndTextFromYjs(e,null):t instanceof ne&&t.syncPropertiesFromYjs(e,null);return e.collabNodeMap.set(i.__key,t),i}function J(e,t,n,o){const s=null===o?t instanceof k?Array.from(t.keys()):Object.keys(t.getAttributes()):Array.from(o);let i;for(let o=0;o<s.length;o++){const l=s[o];if(W(l,n,e)){\"__state\"===l&&(i||(i=n.getWritable()),Q(e,t,i));continue}const c=n[l];let f=q(t,l);if(c!==f){if(f instanceof C){const t=e.docMap;c instanceof C&&t.delete(c.guid);const n=r(),o=f.guid;n._key=o,t.set(o,f),f=n}void 0===i&&(i=n.getWritable()),i[l]=f}}}function q(e,t){return e instanceof k?e.get(t):e.getAttribute(t)}function H(e,t,n){e instanceof k?e.set(t,n):e.setAttribute(t,n)}function Q(e,t,n){const o=q(t,\"__state\");o instanceof k&&c(n).updateFromJSON(o.toJSON())}function V(e,t,n,o){const s=o.__type,i=e.nodeProperties;let l=i.get(s);void 0===l&&(l=Object.keys(o).filter((t=>!W(t,o,e))),i.set(s,l));const r=e.editor.constructor;!function(e,t,n,o){const s=o.__state,i=q(t,\"__state\");if(!s)return;const[l,r]=s.getInternalState(),c=n&&n.__state,f=i instanceof k?i:new k;if(c===s)return;const[a,u]=c&&f.doc?c.getInternalState():[void 0,new Map];if(l)for(const[e,t]of Object.entries(l))a&&t!==a[e]&&f.set(e,t);for(const[e,t]of r)u.get(e)!==t&&f.set(e.key,e.unparse(t));i||H(t,\"__state\",f)}(0,t,n,o);for(let s=0;s<l.length;s++){const i=l[s],c=null===n?void 0:n[i];let f=o[i];if(c!==f){if(f instanceof r){const t=e.docMap;let n;if(c instanceof r){const e=c._key;n=t.get(e),t.delete(e)}const s=n||new C,i=s.guid;f._key=i,t.set(i,s),f=s,e.editor.update((()=>{o.markDirty()}))}H(t,i,f)}}}function X(e,t,n,o){return e.slice(0,t)+o+e.slice(t+n)}function Z(e,t,n){let o=0,s=0;const i=e._children,l=i.length;for(;s<l;s++){const e=i[s],r=o;o+=e.getSize();if((n?o>=t:o>t)&&e instanceof A){let n=t-r-1;n<0&&(n=0);return{length:o-t,node:e,nodeIndex:s,offset:n}}if(o>t)return{length:0,node:e,nodeIndex:s,offset:r};if(s===l-1)return{length:0,node:null,nodeIndex:s+1,offset:r+1}}return{length:0,node:null,nodeIndex:0,offset:0}}function ee(e){const t=e.anchor,o=e.focus;let s=!1;try{const e=t.getNode(),i=o.getNode();(!e.isAttached()||!i.isAttached()||n(e)&&t.offset>e.getTextContentSize()||n(i)&&o.offset>i.getTextContentSize())&&(s=!0)}catch(e){s=!0}return s}function te(t,n){const o=n._nodeMap.get(t);if(!o)return void f().selectStart();const s=o.__prev;let i=null;s&&(i=e(s)),null===i&&null!==o.__parent&&(i=e(o.__parent)),null!==i?null!==i&&i.isAttached()?i.selectEnd():te(i.__key,n):f().selectStart()}class ne{constructor(e,t,n){this._key=\"\",this._xmlElem=e,this._parent=t,this._type=n}getPrevNode(e){if(null===e)return null;const t=e.get(this._key);return l(t)?t:null}getNode(){const t=e(this._key);return l(t)?t:null}getSharedType(){return this._xmlElem}getType(){return this._type}getKey(){return this._key}getSize(){return 1}getOffset(){return this._parent.getChildOffset(this)}syncPropertiesFromLexical(e,t,n){const o=this.getPrevNode(n);V(e,this._xmlElem,o,t)}syncPropertiesFromYjs(e,t){const n=this.getNode();null===n&&L(83);J(e,this._xmlElem,n,t)}destroy(e){const t=e.collabNodeMap;t.get(this._key)===this&&t.delete(this._key)}}function oe(e,t,n){const o=new ne(e,t,n);return e._collabNode=o,o}class se{constructor(e,t,n){this._key=\"\",this._children=[],this._xmlText=e,this._type=n,this._parent=t}getPrevNode(e){if(null===e)return null;const t=e.get(this._key);return i(t)?t:null}getNode(){const t=e(this._key);return i(t)?t:null}getSharedType(){return this._xmlText}getType(){return this._type}getKey(){return this._key}isEmpty(){return 0===this._children.length}getSize(){return 1}getOffset(){const e=this._parent;return null===e&&L(90),e.getChildOffset(this)}syncPropertiesFromYjs(e,t){const n=this.getNode();null===n&&L(91),J(e,this._xmlText,n,t)}applyChildrenYjsDelta(e,t){const n=this._children;let o=0,s=null;for(let i=0;i<t.length;i++){const l=t[i],r=l.insert,c=l.delete;if(null!=l.retain)o+=l.retain;else if(\"number\"==typeof c){let e=c;for(;e>0;){const{node:t,nodeIndex:s,offset:i,length:l}=Z(this,o,!1);if(t instanceof se||t instanceof z||t instanceof ne)n.splice(s,1),e-=1;else{if(!(t instanceof A))break;{const o=Math.min(e,l),r=0!==s?n[s-1]:null,c=t.getSize();if(0===i&&l===c){n.splice(s,1);const e=X(t._text,i,o-1,\"\");e.length>0&&(r instanceof A?r._text+=e:this._xmlText.delete(i,e.length))}else t._text=X(t._text,i,o,\"\");e-=o}}}}else{if(null==r)throw new Error(\"Unexpected delta format\");if(\"string\"==typeof r){const{node:e,offset:t}=Z(this,o,!0);e instanceof A?e._text=X(e._text,t,0,r):this._xmlText.delete(t,r.length),o+=r.length}else{const t=r,{node:i,nodeIndex:l,length:c}=Z(this,o,!1),f=B(e,t,this);if(i instanceof A&&c>0&&c<i._text.length){const e=i._text,t=e.length-c;i._text=X(e,t,c,\"\"),n.splice(l+1,0,f),s=X(e,0,t,\"\")}else n.splice(l,0,f);null!==s&&f instanceof A&&(f._text=s+f._text,s=null),o+=1}}}}syncChildrenFromYjs(e){const t=this.getNode();null===t&&L(92);const o=t.__key,s=O(t,null),i=s.length,l=this._children,r=l.length,c=e.collabNodeMap,f=new Set;let a,h,_=0,p=null;r!==i&&(h=t.getWritable());for(let i=0;i<r;i++){const g=s[_],y=l[i],x=y.getNode(),m=y._key;if(null!==x&&g===m){const t=n(x);if(f.add(g),t)if(y._key=g,y instanceof se){const t=y._xmlText;y.syncPropertiesFromYjs(e,null),y.applyChildrenYjsDelta(e,t.toDelta()),y.syncChildrenFromYjs(e)}else y instanceof A?y.syncPropertiesAndTextFromYjs(e,null):y instanceof ne?y.syncPropertiesFromYjs(e,null):y instanceof z||L(93);p=x,_++}else{if(void 0===a){a=new Set;for(let e=0;e<r;e++){const t=l[e]._key;\"\"!==t&&a.add(t)}}if(null!==x&&void 0!==g&&!a.has(g)){const e=u(g);d(e),i--,_++;continue}h=t.getWritable();const n=G(e,y,o),s=n.__key;if(c.set(s,y),null===p){const e=h.getFirstChild();if(h.__first=s,null!==e){const t=e.getWritable();t.__prev=s,n.__next=t.__key}}else{const e=p.getWritable(),t=p.getNextSibling();if(e.__next=s,n.__prev=p.__key,null!==t){const e=t.getWritable();e.__prev=s,n.__next=e.__key}}i===r-1&&(h.__last=s),h.__size++,p=n}}for(let t=0;t<i;t++){const n=s[t];if(!f.has(n)){const t=u(n),o=e.collabNodeMap.get(n);void 0!==o&&o.destroy(e),d(t)}}}syncPropertiesFromLexical(e,t,n){V(e,this._xmlText,this.getPrevNode(n),t)}_syncChildFromLexical(e,t,o,s,r,c){const f=this._children[t],a=u(o);f instanceof se&&i(a)?(f.syncPropertiesFromLexical(e,a,s),f.syncChildrenFromLexical(e,a,s,r,c)):f instanceof A&&n(a)?f.syncPropertiesAndTextFromLexical(e,a,s):f instanceof ne&&l(a)&&f.syncPropertiesFromLexical(e,a,s)}syncChildrenFromLexical(e,t,n,o,s){const i=this.getPrevNode(n),l=null===i?[]:O(i,n),r=O(t,null),c=l.length-1,f=r.length-1,a=e.collabNodeMap;let d,h,_=0,p=0;for(;_<=c&&p<=f;){const t=l[_],i=r[p];if(t===i)this._syncChildFromLexical(e,p,i,n,o,s),_++,p++;else{void 0===d&&(d=new Set(l)),void 0===h&&(h=new Set(r));const n=h.has(t),o=d.has(i);if(n){const t=R(e,u(i),this);a.set(i,t),o?(this.splice(e,p,1,t),_++,p++):(this.splice(e,p,0,t),p++)}else this.splice(e,p,1),_++}}const g=_>c,y=p>f;if(g&&!y)for(;p<=f;++p){const t=r[p],n=R(e,u(t),this);this.append(n),a.set(t,n)}else if(y&&!g)for(let t=this._children.length-1;t>=p;t--)this.splice(e,t,1)}append(e){const t=this._xmlText,n=this._children,o=n[n.length-1],s=void 0!==o?o.getOffset()+o.getSize():0;if(e instanceof se)t.insertEmbed(s,e._xmlText);else if(e instanceof A){const n=e._map;null===n.parent&&t.insertEmbed(s,n),t.insert(s+1,e._text)}else e instanceof z?t.insertEmbed(s,e._map):e instanceof ne&&t.insertEmbed(s,e._xmlElem);this._children.push(e)}splice(e,t,n,o){const s=this._children,i=s[t];if(void 0===i)return void 0===o&&L(94),void this.append(o);const l=i.getOffset();-1===l&&L(95);const r=this._xmlText;if(0!==n&&r.delete(l,i.getSize()),o instanceof se)r.insertEmbed(l,o._xmlText);else if(o instanceof A){const e=o._map;null===e.parent&&r.insertEmbed(l,e),r.insert(l+1,o._text)}else o instanceof z?r.insertEmbed(l,o._map):o instanceof ne&&r.insertEmbed(l,o._xmlElem);if(0!==n){const o=s.slice(t,t+n);for(let t=0;t<o.length;t++)o[t].destroy(e)}void 0!==o?s.splice(t,n,o):s.splice(t,n)}getChildOffset(e){let t=0;const n=this._children;for(let o=0;o<n.length;o++){const s=n[o];if(s===e)return t;t+=s.getSize()}return-1}destroy(e){const t=e.collabNodeMap,n=this._children;for(let t=0;t<n.length;t++)n[t].destroy(e);t.get(this._key)===this&&t.delete(this._key)}}function ie(e,t,n){const o=new se(e,t,n);return e._collabNode=o,o}function le(e,t,n,o,s,i){null==o&&L(81);const l=ie(o.get(\"root\",m),null,\"root\");return l._key=\"root\",{clientID:o.clientID,collabNodeMap:new Map,cursors:new Map,cursorsContainer:null,doc:o,docMap:s,editor:e,excludedProperties:i||new Map,id:n,nodeProperties:new Map,root:l}}function re(e,t){const o=t.collabNodeMap.get(e.key);if(void 0===o)return null;let s=e.offset,l=o.getSharedType();if(o instanceof A){l=o._parent._xmlText;const e=o.getOffset();if(-1===e)return null;s=e+1+s}else if(o instanceof se&&\"element\"===e.type){const t=e.getNode();i(t)||L(184);let o=0,l=0,r=t.getFirstChild();for(;null!==r&&l++<s;)n(r)?o+=r.getTextContentSize()+1:o++,r=r.getNextSibling();s=o}return v(l,s)}function ce(e,t){return N(e,t.doc)}function fe(e,t){if(null==e){if(null!=t)return!0}else if(null==t||!w(e,t))return!0;return!1}function ae(e,t){return{color:t,name:e,selection:null}}function ue(e,t){const n=e.cursorsContainer;if(null!==n){const e=t.selections,o=e.length;for(let t=0;t<o;t++)n.removeChild(e[t])}}function de(e,t){const n=t.selection;null!==n&&ue(e,n)}function he(e,t,n,o,s){const i=e.color,l=document.createElement(\"span\");l.style.cssText=`position:absolute;top:0;bottom:0;right:-1px;width:1px;background-color:${i};z-index:10;`;const r=document.createElement(\"span\");return r.textContent=e.name,r.style.cssText=`position:absolute;left:-2px;top:-16px;background-color:${i};color:#fff;line-height:12px;font-size:12px;padding:2px;font-family:Arial;font-weight:bold;white-space:nowrap;`,l.appendChild(r),{anchor:{key:t,offset:n},caret:l,color:i,focus:{key:o,offset:s},name:r,selections:[]}}function _e(e,n,o,s){const i=e.editor,l=i.getRootElement(),r=e.cursorsContainer;if(null===r||null===l)return;const c=r.offsetParent;if(null===c)return;const f=c.getBoundingClientRect(),a=n.selection;if(null===o)return null===a?void 0:(n.selection=null,void ue(e,a));n.selection=o;const u=o.caret,d=o.color,h=o.selections,_=o.anchor,p=o.focus,g=_.key,y=p.key,x=s.get(g),m=s.get(y);if(null==x||null==m)return;let k;if(x===m&&t(x)){k=[i.getElementByKey(g).getBoundingClientRect()]}else{const e=E(i,x,_.offset,m,p.offset);if(null===e)return;k=M(i,e)}const b=h.length,C=k.length;for(let e=0;e<C;e++){const t=k[e];let n=h[e];if(void 0===n){n=document.createElement(\"span\"),h[e]=n;const t=document.createElement(\"span\");n.appendChild(t),r.appendChild(n)}const o=`position:absolute;top:${t.top-f.top}px;left:${t.left-f.left}px;height:${t.height}px;width:${t.width}px;pointer-events:none;z-index:5;`;n.style.cssText=o,n.firstChild.style.cssText=`${o}left:0;top:0;background-color:${d};opacity:0.3;`,e===C-1&&u.parentNode!==n&&n.appendChild(u)}for(let e=b-1;e>=C;e--){const t=h[e];r.removeChild(t),h.pop()}}function pe(e,t){const{anchorPos:n,focusPos:o}=t;let s=null,i=0,l=null,r=0;if(null!==n&&null!==o){const t=ce(n,e),c=ce(o,e);null!==t&&null!==c&&([s,i]=xe(t.type,t.index),[l,r]=xe(c.type,c.index))}return{anchorCollabNode:s,anchorOffset:i,focusCollabNode:l,focusOffset:r}}function ge(e,t){const n=t.awareness.getLocalState();if(null===n)return;const{anchorCollabNode:i,anchorOffset:l,focusCollabNode:r,focusOffset:c}=pe(e,n);if(null!==i&&null!==r){const e=i.getKey(),t=r.getKey(),n=o();if(!s(n))return;ye(n.anchor,e,l),ye(n.focus,t,c)}}function ye(t,o,s){if(t.key!==o||t.offset!==s){let l=e(o);if(null!==l&&!i(l)&&!n(l)){const e=l.getParentOrThrow();o=e.getKey(),s=l.getIndexWithinParent(),l=e}t.set(o,s,i(l)?\"element\":\"text\")}}function xe(e,t){const n=e._collabNode;if(void 0===n)return[null,0];if(n instanceof se){const{node:e,offset:o}=Z(n,t,!0);return null===e?[n,0]:[e,o]}return[null,0]}function me(e,t){return t.awareness.getStates()}function ke(e,t,n){const{getAwarenessStates:o=me}=n??{},s=Array.from(o(e,t)),i=e.clientID,l=e.cursors,r=e.editor._editorState._nodeMap,c=new Set;for(let t=0;t<s.length;t++){const n=s[t],[o,f]=n;if(o!==i){c.add(o);const{name:t,color:n,focusing:s}=f;let i=null,a=l.get(o);if(void 0===a&&(a=ae(t,n),l.set(o,a)),s){const{anchorCollabNode:t,anchorOffset:n,focusCollabNode:o,focusOffset:s}=pe(e,f);if(null!==t&&null!==o){const e=t.getKey(),l=o.getKey();if(i=a.selection,null===i)i=he(a,e,n,l,s);else{const t=i.anchor,o=i.focus;t.key=e,t.offset=n,o.key=l,o.offset=s}}}_e(e,a,i,r)}}const f=Array.from(l.keys());for(let t=0;t<f.length;t++){const n=f[t];if(!c.has(n)){const t=l.get(n);void 0!==t&&(de(e,t),l.delete(n))}}}function be(e,t,n,o){const i=t.awareness,l=i.getLocalState();if(null===l)return;const{anchorPos:r,focusPos:c,name:f,color:a,focusing:u,awarenessData:d}=l;let h=null,_=null;(null!==o&&(null===r||o.is(n))||null!==n)&&(s(o)&&(h=re(o.anchor,e),_=re(o.focus,e)),(fe(r,h)||fe(c,_))&&i.setLocalState({...l,anchorPos:h,awarenessData:d,color:a,focusPos:_,focusing:u,name:f}))}function Ce(e,t){if(t instanceof S&&function(e,t){const{target:n}=t;if(!n._item||\"__state\"!==n._item.parentSub||void 0!==U(n)||!(n.parent instanceof m||n.parent instanceof b||n.parent instanceof k))return!1;const o=B(e,n.parent).getNode();if(o){const e=c(o.getWritable());for(const o of t.keysChanged)e.updateFromUnknown(o,n.get(o))}return!0}(e,t))return;const{target:n}=t,o=B(e,n);if(o instanceof se&&t instanceof T){const{keysChanged:n,childListChanged:s,delta:i}=t;n.size>0&&o.syncPropertiesFromYjs(e,n),s&&(o.applyChildrenYjsDelta(e,i),o.syncChildrenFromYjs(e))}else if(o instanceof A&&t instanceof S){const{keysChanged:n}=t;n.size>0&&o.syncPropertiesAndTextFromYjs(e,n)}else if(o instanceof ne&&t instanceof P){const{attributesChanged:n}=t;n.size>0&&o.syncPropertiesFromYjs(e,n)}else L(82)}function Ne(e,t,n,i,l=ke){const r=e.editor,c=r._editorState;n.forEach((e=>e.delta)),r.update((()=>{for(let t=0;t<n.length;t++){const o=n[t];Ce(e,o)}const l=o();if(s(l))if(ee(l)){const n=c._selection;if(s(n)&&(ge(e,t),ee(l))){te(l.anchor.key,c)}be(e,t,n,o())}else ge(e,t);i||h(_)}),{onUpdate:()=>{l(e,t),r.update((()=>{0===f().getChildrenSize()&&f().append(p())}))},skipTransforms:!0,tag:i?g:y})}function ve(t,s,i,l,r,c,a,u){!function(e,t){e.doc.transact(t,e)}(t,(()=>{l.read((()=>{if(u.has(y)||u.has(g))return void(a.size>0&&function(t,o){const s=Array.from(o),i=t.collabNodeMap,l=[],r=[];for(let t=0;t<s.length;t++){const o=s[t],c=e(o),f=i.get(o);if(f instanceof A)if(n(c))l.push([f,c.__text]);else{const e=f.getOffset();if(-1===e)continue;const t=f._parent;f._normalized=!0,t._xmlText.delete(e,1),r.push(f)}}for(let e=0;e<r.length;e++){const t=r[e],n=t.getKey();i.delete(n);const o=t._parent._children,s=o.indexOf(t);o.splice(s,1)}for(let e=0;e<l.length;e++){const[t,n]=l[e];t._text=n}}(t,a));if(r.has(\"root\")){const e=i._nodeMap,n=f(),o=t.root;o.syncPropertiesFromLexical(t,n,e),o.syncChildrenFromLexical(t,n,e,r,c)}const l=o(),d=i._selection;be(t,s,d,l)}))}))}const we=x(\"CONNECTED_COMMAND\"),Se=x(\"TOGGLE_CONNECT_COMMAND\");function Te(e,t){return new F(t,{trackedOrigins:new Set([e,null])})}function Pe(e,t,n,o,s){e.awareness.setLocalState({anchorPos:null,awarenessData:s,color:n,focusPos:null,focusing:o,name:t})}function Fe(e,t,n,o,s){const{awareness:i}=e;let l=i.getLocalState();null===l&&(l={anchorPos:null,awarenessData:s,color:n,focusPos:null,focusing:o,name:t}),l.focusing=o,i.setLocalState(l)}export{we as CONNECTED_COMMAND,Se as TOGGLE_CONNECT_COMMAND,le as createBinding,Te as createUndoManager,pe as getAnchorAndFocusCollabNodesForUserState,Pe as initLocalState,Fe as setLocalStateFocus,ke as syncCursorPositions,ve as syncLexicalUpdateToYjs,Ne as syncYjsChangesToLexical};\n","var ki = Object.defineProperty;\nvar _i = (t, r, e) => r in t ? ki(t, r, { enumerable: !0, configurable: !0, writable: !0, value: e }) : t[r] = e;\nvar S = (t, r, e) => _i(t, typeof r != \"symbol\" ? r + \"\" : r, e);\nimport { jsx as g, jsxs as U, Fragment as je } from \"react/jsx-runtime\";\nimport { forwardRef as Qe, useState as D, useRef as O, useCallback as j, useEffect as A, useMemo as ce, memo as Ci, createContext as Qr, useContext as Zr, Children as xi, isValidElement as Mi, cloneElement as Ti, useImperativeHandle as Pn, useLayoutEffect as tn } from \"react\";\nimport { isValidBookCode as Si, MARKER_OBJECT_PROPS as Ei, USJ_VERSION as Kt, USJ_TYPE as Jt, indexesFromUsjJsonPath as Ni, usjJsonPathFromIndexes as Ai, EMPTY_USJ as es } from \"@eten-tech-foundation/scripture-utilities\";\nimport { $applyNodeReplacement as ae, $parseSerializedNode as wi, createState as ts, ElementNode as ct, isHTMLElement as Oe, DecoratorNode as lt, ParagraphNode as vn, TextNode as Ae, $isElementNode as z, $getCommonAncestor as Pi, $getState as bt, $isRangeSelection as Z, $isTextNode as q, $createRangeSelection as ns, $createPoint as lr, $getSelection as ie, $getRoot as Pe, $getNodeByKey as K, $createTextNode as J, $setState as Ne, KEY_DOWN_COMMAND as Et, COMMAND_PRIORITY_HIGH as nn, HISTORY_MERGE_TAG as vi, PASTE_COMMAND as $n, COPY_COMMAND as In, CUT_COMMAND as qn, COMMAND_PRIORITY_NORMAL as Ft, DROP_COMMAND as $i, CLEAR_HISTORY_COMMAND as Ii, SELECTION_CHANGE_COMMAND as dt, COMMAND_PRIORITY_LOW as Nt, $setSelection as rs, $isRootOrShadowRoot as qi, COMMAND_PRIORITY_CRITICAL as Ut, CAN_UNDO_COMMAND as Ri, CAN_REDO_COMMAND as Li, $hasUpdateTag as Oi, LineBreakNode as ss, UNDO_COMMAND as is, REDO_COMMAND as as, $addUpdateTag as Di, createCommand as Fi, COMMAND_PRIORITY_EDITOR as Ui, KEY_ESCAPE_COMMAND as Bi, CLEAR_EDITOR_COMMAND as Hi } from \"lexical\";\nimport { addClassNamesToElement as Rt, removeClassNamesFromElement as dr, $dfs as At, mergeRegister as Ze, registerNestedElementResolver as os, $unwrapNode as ur, $findMatchingParent as kt, IS_APPLE as mn } from \"@lexical/utils\";\nimport ht from \"quill-delta\";\nimport { deepEqual as Ee } from \"fast-equals\";\nimport { useLexicalComposerContext as V } from \"@lexical/react/LexicalComposerContext\";\nimport { TreeView as Vi } from \"@lexical/react/LexicalTreeView\";\nimport * as ji from \"react-dom\";\nimport { createPortal as Ve } from \"react-dom\";\nimport { LexicalComposer as cs } from \"@lexical/react/LexicalComposer\";\nimport { ContentEditable as ls } from \"@lexical/react/LexicalContentEditable\";\nimport { EditorRefPlugin as ds } from \"@lexical/react/LexicalEditorRefPlugin\";\nimport { LexicalErrorBoundary as us } from \"@lexical/react/LexicalErrorBoundary\";\nimport { HistoryPlugin as fs } from \"@lexical/react/LexicalHistoryPlugin\";\nimport { RichTextPlugin as Ki } from \"@lexical/react/LexicalRichTextPlugin\";\nimport { $setBlocksType as Ji, createDOMRange as Wi, createRectsFromDOMRange as zi } from \"@lexical/selection\";\nimport { autoUpdate as Gi, computePosition as Yi, shift as Xi, flip as Qi } from \"@floating-ui/dom\";\nimport { LexicalContextMenuPlugin as Zi, MenuOption as ea } from \"@lexical/react/LexicalContextMenuPlugin\";\nimport { AutoFocusPlugin as ta } from \"@lexical/react/LexicalAutoFocusPlugin\";\nimport { ClearEditorPlugin as na } from \"@lexical/react/LexicalClearEditorPlugin\";\nimport { useCollaborationContext as ps } from \"@lexical/react/LexicalCollaborationContext\";\nimport { OnChangePlugin as ra } from \"@lexical/react/LexicalOnChangePlugin\";\nimport { PlainTextPlugin as sa } from \"@lexical/react/LexicalPlainTextPlugin\";\nimport { $rootTextContent as ia, $isRootTextContentEmpty as aa } from \"@lexical/text\";\nimport { TOGGLE_CONNECT_COMMAND as oa } from \"@lexical/yjs\";\nimport { Array as fr, Map as pr, YArrayEvent as ca } from \"yjs\";\nconst cn = (t) => ae(wi(t)), Ke = ts(\"cid\", {\n  parse: (t) => typeof t == \"string\" ? t : void 0\n}), Je = ts(\"segment\", {\n  parse: (t) => typeof t == \"string\" ? t : void 0\n}), gn = \"unknown\", hs = 1;\nclass et extends ct {\n  constructor(e = \"\", n, s, i) {\n    super(i);\n    S(this, \"__tag\");\n    S(this, \"__marker\");\n    S(this, \"__unknownAttributes\");\n    this.__tag = e, this.__marker = n, this.__unknownAttributes = s;\n  }\n  static getType() {\n    return \"unknown\";\n  }\n  static clone(e) {\n    const { __tag: n, __marker: s, __unknownAttributes: i, __key: a } = e;\n    return new et(n, s, i, a);\n  }\n  static importDOM() {\n    return {\n      [gn]: (e) => da(e) ? {\n        conversion: la,\n        priority: 1\n      } : null\n    };\n  }\n  static importJSON(e) {\n    return ms().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setTag(e.tag).setMarker(e.marker).setUnknownAttributes(e.unknownAttributes);\n  }\n  setTag(e) {\n    if (this.__tag === e)\n      return this;\n    const n = this.getWritable();\n    return n.__tag = e, n;\n  }\n  getTag() {\n    return this.getLatest().__tag;\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(gn);\n    return e.style.display = \"none\", e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  exportDOM() {\n    return { element: null };\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      tag: this.getTag(),\n      marker: this.getMarker(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: hs\n    };\n  }\n  // Mutation\n  canBeEmpty() {\n    return !0;\n  }\n  isInline() {\n    return !0;\n  }\n  extractWithChild() {\n    return !1;\n  }\n  excludeFromCopy(e) {\n    return e !== \"clone\";\n  }\n}\nfunction la(t) {\n  const r = t.getAttribute(\"data-tag\") ?? \"\", e = t.getAttribute(\"data-marker\") ?? \"\";\n  return { node: ms(r, e) };\n}\nfunction ms(t, r, e) {\n  return ae(new et(t, r, e));\n}\nfunction da(t) {\n  return (t == null ? void 0 : t.tagName) === gn;\n}\nfunction wt(t) {\n  return t instanceof et;\n}\nconst _t = \"id\", gs = 1;\nclass ge extends ct {\n  constructor(e = \"\", n, s) {\n    super(s);\n    S(this, \"__marker\", _t);\n    S(this, \"__code\");\n    S(this, \"__unknownAttributes\");\n    this.__code = e, this.__unknownAttributes = n;\n  }\n  static getType() {\n    return \"book\";\n  }\n  static clone(e) {\n    const { __code: n, __unknownAttributes: s, __key: i } = e;\n    return new ge(n, s, i);\n  }\n  static importJSON(e) {\n    const { code: n } = e;\n    return ys(n).updateFromJSON(e);\n  }\n  static isValidBookCode(e) {\n    return Si(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setCode(e.code).setUnknownAttributes(e.unknownAttributes);\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setCode(e) {\n    if (this.__code === e)\n      return this;\n    const n = this.getWritable();\n    return n.__code = e, n;\n  }\n  /**\n   * Get the book code (ID).\n   * @returns the book code (ID).\n   */\n  getCode() {\n    return this.getLatest().__code;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(\"p\");\n    return e.setAttribute(\"data-marker\", this.__marker), e.classList.add(this.__type, `usfm_${this.__marker}`), e.setAttribute(\"data-code\", this.__code), e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      marker: this.getMarker(),\n      code: this.getCode(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: gs\n    };\n  }\n}\nfunction ys(t, r) {\n  return ae(new ge(t, r));\n}\nfunction Te(t) {\n  return t instanceof ge;\n}\nfunction ua(t) {\n  return (t == null ? void 0 : t.type) === ge.getType();\n}\nconst B = \"Â \", yn = \"â€‹\", Rn = `${B}|`, rn = \"p\", Ct = \"+\", bs = \"-\", Wt = \"chapter\", bn = \"verse\", hr = \"invalid\", fa = \"text-spacing\", pa = \"formatted-font\", ha = \"marker-\", Ln = \"external-usj-mutation\", ks = \"selection-change\", kn = \"cursor-change\", _n = \"annotation-change\", Cn = \"delta-change\", ma = [\n  Ln,\n  ks,\n  kn,\n  _n,\n  Cn\n], zt = \"c\", _s = 1;\nclass xe extends ct {\n  constructor(e = \"\", n, s, i, a, o) {\n    super(o);\n    S(this, \"__marker\");\n    S(this, \"__number\");\n    S(this, \"__sid\");\n    S(this, \"__altnumber\");\n    S(this, \"__pubnumber\");\n    S(this, \"__unknownAttributes\");\n    this.__marker = zt, this.__number = e, this.__sid = n, this.__altnumber = s, this.__pubnumber = i, this.__unknownAttributes = a;\n  }\n  static getType() {\n    return \"chapter\";\n  }\n  static clone(e) {\n    const { __number: n, __sid: s, __altnumber: i, __pubnumber: a, __unknownAttributes: o, __key: c } = e;\n    return new xe(n, s, i, a, o, c);\n  }\n  static importJSON(e) {\n    return Cs().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker).setNumber(e.number).setSid(e.sid).setAltnumber(e.altnumber).setPubnumber(e.pubnumber).setUnknownAttributes(e.unknownAttributes);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setNumber(e) {\n    if (this.__number === e)\n      return this;\n    const n = this.getWritable();\n    return n.__number = e, n;\n  }\n  getNumber() {\n    return this.getLatest().__number;\n  }\n  setSid(e) {\n    if (this.__sid === e)\n      return this;\n    const n = this.getWritable();\n    return n.__sid = e, n;\n  }\n  getSid() {\n    return this.getLatest().__sid;\n  }\n  setAltnumber(e) {\n    if (this.__altnumber === e)\n      return this;\n    const n = this.getWritable();\n    return n.__altnumber = e, n;\n  }\n  getAltnumber() {\n    return this.getLatest().__altnumber;\n  }\n  setPubnumber(e) {\n    if (this.__pubnumber === e)\n      return this;\n    const n = this.getWritable();\n    return n.__pubnumber = e, n;\n  }\n  getPubnumber() {\n    return this.getLatest().__pubnumber;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(\"p\");\n    return e.setAttribute(\"data-marker\", this.__marker), e.classList.add(Wt, `usfm_${this.__marker}`), e.setAttribute(\"data-number\", this.__number), e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      marker: this.getMarker(),\n      number: this.getNumber(),\n      sid: this.getSid(),\n      altnumber: this.getAltnumber(),\n      pubnumber: this.getPubnumber(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: _s\n    };\n  }\n}\nfunction Cs(t, r, e, n, s) {\n  return ae(new xe(t, r, e, n, s));\n}\nfunction On(t) {\n  return t instanceof xe;\n}\nfunction ga(t) {\n  return (t == null ? void 0 : t.type) === xe.getType();\n}\nconst xs = [\n  \"fr\",\n  \"fq\",\n  \"fqa\",\n  \"fk\",\n  \"ft\",\n  \"fl\",\n  \"fw\",\n  \"fp\",\n  \"fv\",\n  \"fdc\",\n  \"fm\"\n], Ms = [\n  \"xo\",\n  \"xop\",\n  \"xk\",\n  \"xq\",\n  \"xt\",\n  \"xta\",\n  \"xot\",\n  \"xnt\",\n  \"xdc\"\n], ya = [\n  // Chapter & Verse\n  \"ca\",\n  \"cp\",\n  \"va\",\n  \"vp\",\n  // Text Features\n  \"add\",\n  \"bk\",\n  \"dc\",\n  \"em\",\n  \"jmp\",\n  \"k\",\n  \"nd\",\n  \"ord\",\n  \"pn\",\n  \"png\",\n  \"qt\",\n  \"rb\",\n  \"rq\",\n  // \"ref\", // This has its own tag and is not a Char\n  \"sig\",\n  \"sls\",\n  \"tl\",\n  \"w\",\n  \"wa\",\n  \"wg\",\n  \"wh\",\n  \"wj\",\n  // Note there are 2 deprecated markers intentionally not listed here: \"addpn\", \"pro\"\n  // Text Formatting\n  \"bd\",\n  \"it\",\n  \"bdit\",\n  \"no\",\n  \"sc\",\n  \"sup\",\n  // Introductions\n  \"ior\",\n  \"iqt\",\n  // Poetry\n  \"qac\",\n  \"qs\",\n  // Lists\n  \"litl\",\n  \"lik\",\n  \"liv\",\n  \"liv1\",\n  \"liv2\",\n  \"liv3\",\n  \"liv4\",\n  \"liv5\",\n  ...xs,\n  ...Ms\n], Ts = 1;\nclass W extends ct {\n  constructor(e = \"\", n, s) {\n    super(s);\n    S(this, \"__marker\");\n    S(this, \"__unknownAttributes\");\n    this.__marker = e, this.__unknownAttributes = n;\n  }\n  static getType() {\n    return \"char\";\n  }\n  static clone(e) {\n    const { __marker: n, __unknownAttributes: s, __key: i } = e;\n    return new W(n, s, i);\n  }\n  static isValidMarker(e) {\n    return e !== void 0 && ya.includes(e);\n  }\n  static isValidFootnoteMarker(e) {\n    return e !== void 0 && xs.includes(e);\n  }\n  static isValidCrossReferenceMarker(e) {\n    return e !== void 0 && Ms.includes(e);\n  }\n  static importDOM() {\n    return {\n      span: (e) => ka(e) ? {\n        conversion: ba,\n        priority: 1\n      } : null\n    };\n  }\n  static importJSON(e) {\n    return Me().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker).setUnknownAttributes(e.unknownAttributes);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(\"span\");\n    return e.setAttribute(\"data-marker\", this.__marker), e.setAttribute(\"title\", this.__marker), e.classList.add(this.__type, `usfm_${this.__marker}`), e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  exportDOM(e) {\n    const { element: n } = super.exportDOM(e);\n    return n && Oe(n) && (n.setAttribute(\"data-marker\", this.getMarker()), n.classList.add(this.getType(), `usfm_${this.getMarker()}`)), { element: n };\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      marker: this.getMarker(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: Ts\n    };\n  }\n  // Mutation\n  insertNewAfter(e, n) {\n    const s = Me(this.getMarker());\n    return s.setTextFormat(e.format), s.setTextStyle(e.style), s.setDirection(this.getDirection()), s.setFormat(this.getFormatType()), s.setStyle(this.getTextStyle()), this.insertAfter(s, n), s;\n  }\n  canBeEmpty() {\n    return !1;\n  }\n  isInline() {\n    return !0;\n  }\n}\nfunction ba(t) {\n  const r = t.getAttribute(\"data-marker\") ?? \"f\";\n  return { node: Me(r) };\n}\nfunction Me(t, r) {\n  return ae(new W(t, r));\n}\nfunction ka(t) {\n  if (!t)\n    return !1;\n  const r = t.getAttribute(\"data-marker\") ?? \"\";\n  return W.isValidMarker(r) && t.classList.contains(W.getType());\n}\nfunction H(t) {\n  return t instanceof W;\n}\nfunction _a(t) {\n  return (t == null ? void 0 : t.type) === W.getType();\n}\nconst Ss = 1, Ca = \"c\", Es = \"span\";\nclass ve extends lt {\n  constructor(e = \"\", n = !1, s, i, a, o, c) {\n    super(c);\n    S(this, \"__marker\");\n    S(this, \"__number\");\n    S(this, \"__showMarker\");\n    S(this, \"__sid\");\n    S(this, \"__altnumber\");\n    S(this, \"__pubnumber\");\n    S(this, \"__unknownAttributes\");\n    this.__marker = Ca, this.__number = e, this.__showMarker = n, this.__sid = s, this.__altnumber = i, this.__pubnumber = a, this.__unknownAttributes = o;\n  }\n  static getType() {\n    return \"immutable-chapter\";\n  }\n  static clone(e) {\n    const { __number: n, __showMarker: s, __sid: i, __altnumber: a, __pubnumber: o, __unknownAttributes: c, __key: l } = e;\n    return new ve(n, s, i, a, o, c, l);\n  }\n  static importDOM() {\n    return {\n      span: (e) => Ns(e) ? {\n        conversion: xa,\n        priority: 1\n      } : null\n    };\n  }\n  static importJSON(e) {\n    return Dn().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker).setNumber(e.number).setShowMarker(e.showMarker).setSid(e.sid).setAltnumber(e.altnumber).setPubnumber(e.pubnumber).setUnknownAttributes(e.unknownAttributes);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setNumber(e) {\n    if (this.__number === e)\n      return this;\n    const n = this.getWritable();\n    return n.__number = e, n;\n  }\n  getNumber() {\n    return this.getLatest().__number;\n  }\n  setShowMarker(e = !1) {\n    if (this.__showMarker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__showMarker = e, n;\n  }\n  getShowMarker() {\n    return this.getLatest().__showMarker;\n  }\n  setSid(e) {\n    if (this.__sid === e)\n      return this;\n    const n = this.getWritable();\n    return n.__sid = e, n;\n  }\n  getSid() {\n    return this.getLatest().__sid;\n  }\n  setAltnumber(e) {\n    if (this.__altnumber === e)\n      return this;\n    const n = this.getWritable();\n    return n.__altnumber = e, n;\n  }\n  getAltnumber() {\n    return this.getLatest().__altnumber;\n  }\n  setPubnumber(e) {\n    if (this.__pubnumber === e)\n      return this;\n    const n = this.getWritable();\n    return n.__pubnumber = e, n;\n  }\n  getPubnumber() {\n    return this.getLatest().__pubnumber;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(Es);\n    return e.setAttribute(\"data-marker\", this.__marker), e.classList.add(Wt, `usfm_${this.__marker}`), this.__showMarker && e.classList.add(\"marker\"), e.setAttribute(\"data-number\", this.__number), e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  exportDOM(e) {\n    const { element: n } = super.exportDOM(e);\n    return n && Oe(n) && (n.setAttribute(\"data-marker\", this.getMarker()), n.classList.add(Wt, `usfm_${this.getMarker()}`), n.setAttribute(\"data-number\", this.getNumber())), { element: n };\n  }\n  decorate() {\n    return this.getShowMarker() ? vt(this.getMarker(), this.getNumber()) : this.getNumber();\n  }\n  exportJSON() {\n    return {\n      type: this.getType(),\n      marker: this.getMarker(),\n      number: this.getNumber(),\n      showMarker: this.getShowMarker(),\n      sid: this.getSid(),\n      altnumber: this.getAltnumber(),\n      pubnumber: this.getPubnumber(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: Ss\n    };\n  }\n  // Mutation\n  isInline() {\n    return !1;\n  }\n  isKeyboardSelectable() {\n    return !1;\n  }\n}\nfunction xa(t) {\n  const r = t.getAttribute(\"data-number\") ?? \"0\";\n  return { node: Dn(r) };\n}\nfunction Dn(t, r, e, n, s, i) {\n  return ae(new ve(t, r, e, n, s, i));\n}\nfunction Ns(t) {\n  return t ? t.classList.contains(Wt) && t.tagName.toLowerCase() === Es : !1;\n}\nfunction Pt(t) {\n  return t instanceof ve;\n}\nfunction Ma(t) {\n  return (t == null ? void 0 : t.type) === ve.getType();\n}\nconst As = 1;\nclass Re extends vn {\n  static getType() {\n    return \"implied-para\";\n  }\n  static clone(r) {\n    return new Re(r.__key);\n  }\n  static importJSON(r) {\n    return ke().updateFromJSON(r);\n  }\n  getMarker() {\n    return rn;\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      version: As\n    };\n  }\n  // Mutation\n  insertNewAfter(r, e) {\n    const n = ke();\n    return n.setTextFormat(r.format), n.setTextStyle(r.style), n.setDirection(this.getDirection()), n.setFormat(this.getFormatType()), n.setStyle(this.getTextStyle()), this.insertAfter(n, e), n;\n  }\n}\nfunction ke() {\n  return ae(new Re());\n}\nfunction we(t) {\n  return t instanceof Re;\n}\nfunction Fn(t) {\n  return (t == null ? void 0 : t.type) === Re.getType();\n}\nconst We = \"zmsc-s\", rt = \"zmsc-e\", Ta = [We, rt], Sa = [\n  \"ts-s\",\n  \"ts-e\",\n  \"t-s\",\n  \"t-e\",\n  \"ts\",\n  \"qt1-s\",\n  \"qt1-e\",\n  \"qt2-s\",\n  \"qt2-e\",\n  \"qt3-s\",\n  \"qt3-e\",\n  \"qt4-s\",\n  \"qt4-e\",\n  \"qt5-s\",\n  \"qt5-e\",\n  \"qt-s\",\n  \"qt-e\",\n  // custom markers used for annotations\n  We,\n  rt\n], ws = 1;\nclass Se extends lt {\n  constructor(e = \"\", n, s, i, a) {\n    super(a);\n    S(this, \"__marker\");\n    S(this, \"__sid\");\n    S(this, \"__eid\");\n    S(this, \"__unknownAttributes\");\n    this.__marker = e, this.__sid = n, this.__eid = s, this.__unknownAttributes = i;\n  }\n  static getType() {\n    return \"ms\";\n  }\n  static clone(e) {\n    const { __marker: n, __sid: s, __eid: i, __unknownAttributes: a, __key: o } = e;\n    return new Se(n, s, i, a, o);\n  }\n  static importJSON(e) {\n    return Ps().updateFromJSON(e);\n  }\n  static isValidMarker(e) {\n    return e !== void 0 && (Sa.includes(e) || e.startsWith(\"z\"));\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker).setSid(e.sid).setEid(e.eid).setUnknownAttributes(e.unknownAttributes);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setSid(e) {\n    if (this.__sid === e)\n      return this;\n    const n = this.getWritable();\n    return n.__sid = e, n;\n  }\n  getSid() {\n    return this.getLatest().__sid;\n  }\n  setEid(e) {\n    if (this.__eid === e)\n      return this;\n    const n = this.getWritable();\n    return n.__eid = e, n;\n  }\n  getEid() {\n    return this.getLatest().__eid;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(\"span\");\n    return e.setAttribute(\"data-marker\", this.__marker), e.classList.add(this.__type, `usfm_${this.__marker}`), e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  decorate() {\n    return \"\";\n  }\n  exportJSON() {\n    return {\n      type: this.getType(),\n      marker: this.getMarker(),\n      sid: this.getSid(),\n      eid: this.getEid(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: ws\n    };\n  }\n  // Mutation\n  isKeyboardSelectable() {\n    return !1;\n  }\n}\nfunction Ea(t) {\n  return Ta.includes(t);\n}\nfunction Ps(t, r, e, n) {\n  return ae(new Se(t, r, e, n));\n}\nfunction sn(t) {\n  return t instanceof Se;\n}\nconst Un = \"f\", Na = [\n  // Footnote\n  Un,\n  \"fe\",\n  \"ef\",\n  \"efe\",\n  // Cross Reference\n  \"x\",\n  \"ex\"\n], vs = 1;\nclass ee extends ct {\n  constructor(e = Un, n, s = !0, i, a, o) {\n    super(o);\n    S(this, \"__marker\");\n    S(this, \"__caller\");\n    S(this, \"__isCollapsed\");\n    S(this, \"__category\");\n    S(this, \"__unknownAttributes\");\n    this.__marker = e, this.__caller = n ?? (e === \"x\" || e === \"ex\" ? bs : Ct), this.__isCollapsed = s, this.__category = i, this.__unknownAttributes = a;\n  }\n  static getType() {\n    return \"note\";\n  }\n  static clone(e) {\n    const { __marker: n, __caller: s, __isCollapsed: i, __category: a, __unknownAttributes: o, __key: c } = e;\n    return new ee(n, s, i, a, o, c);\n  }\n  static importDOM() {\n    return {\n      span: (e) => wa(e) ? {\n        conversion: Aa,\n        priority: 1\n      } : null\n    };\n  }\n  static importJSON(e) {\n    return Bn().updateFromJSON(e);\n  }\n  static isValidMarker(e) {\n    return e !== void 0 && Na.includes(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker).setCaller(e.caller).setIsCollapsed(e.isCollapsed).setCategory(e.category).setUnknownAttributes(e.unknownAttributes);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setCaller(e) {\n    if (this.__caller === e)\n      return this;\n    const n = this.getWritable();\n    return n.__caller = e, n;\n  }\n  getCaller() {\n    return this.getLatest().__caller;\n  }\n  setIsCollapsed(e) {\n    if (this.__isCollapsed === e)\n      return this;\n    const n = this.getWritable();\n    return n.__isCollapsed = e, n;\n  }\n  toggleIsCollapsed() {\n    const e = this.getWritable();\n    return e.__isCollapsed = !e.__isCollapsed, e;\n  }\n  getIsCollapsed() {\n    return this.getLatest().__isCollapsed;\n  }\n  setCategory(e) {\n    if (this.__category === e)\n      return this;\n    const n = this.getWritable();\n    return n.__category = e, n;\n  }\n  getCategory() {\n    return this.getLatest().__category;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(\"span\");\n    return e.setAttribute(\"data-marker\", this.__marker), e.classList.add(this.__type, `usfm_${this.__marker}`, this.__isCollapsed ? \"collapsed\" : \"expanded\"), e.setAttribute(\"data-caller\", this.__caller), e;\n  }\n  updateDOM(e) {\n    return e.__isCollapsed !== this.__isCollapsed;\n  }\n  exportDOM(e) {\n    const { element: n } = super.exportDOM(e);\n    return n && Oe(n) && (n.setAttribute(\"data-marker\", this.getMarker()), n.classList.add(this.getType(), `usfm_${this.getMarker()}`, this.getIsCollapsed() ? \"collapsed\" : \"expanded\"), n.setAttribute(\"data-caller\", this.getCaller())), { element: n };\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      marker: this.getMarker(),\n      caller: this.getCaller(),\n      isCollapsed: this.getIsCollapsed(),\n      category: this.getCategory(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: vs\n    };\n  }\n  // Mutation\n  canBeEmpty() {\n    return !1;\n  }\n  isInline() {\n    return !0;\n  }\n}\nfunction Aa(t) {\n  const r = t.getAttribute(\"data-marker\") ?? \"f\", e = t.getAttribute(\"data-caller\") ?? \"\", n = t.classList.contains(\"collapsed\");\n  return { node: Bn(r, e, n) };\n}\nfunction Bn(t, r, e, n, s) {\n  return ae(new ee(t, r, e, n, s));\n}\nfunction wa(t) {\n  if (!t)\n    return !1;\n  const r = t.getAttribute(\"data-marker\") ?? \"\";\n  return ee.isValidMarker(r) && t.classList.contains(ee.getType());\n}\nfunction I(t) {\n  return t instanceof ee;\n}\nconst Pa = [\n  // Identification\n  \"ide\",\n  \"sts\",\n  \"rem\",\n  \"h\",\n  \"toc1\",\n  \"toc2\",\n  \"toc3\",\n  \"toca1\",\n  \"toca2\",\n  \"toca3\",\n  // Introductions\n  \"imt\",\n  \"imt1\",\n  \"imt2\",\n  \"imt3\",\n  \"imt4\",\n  \"is\",\n  \"is1\",\n  \"is2\",\n  \"ip\",\n  \"ipi\",\n  \"im\",\n  \"imi\",\n  \"ipq\",\n  \"imq\",\n  \"ipr\",\n  \"iq\",\n  \"iq1\",\n  \"iq2\",\n  \"iq3\",\n  \"ili\",\n  \"ili1\",\n  \"ili2\",\n  \"ib\",\n  \"iot\",\n  \"io\",\n  \"io1\",\n  \"io2\",\n  \"io3\",\n  \"io4\",\n  \"iex\",\n  \"imte\",\n  \"imte1\",\n  \"imte2\",\n  \"ie\",\n  // Titles and Headings\n  \"mt\",\n  \"mt1\",\n  \"mt2\",\n  \"mt3\",\n  \"mt4\",\n  \"mte\",\n  \"mte1\",\n  \"mte2\",\n  \"cl\",\n  \"cd\",\n  \"ms\",\n  \"ms1\",\n  \"ms2\",\n  \"ms3\",\n  \"mr\",\n  \"s\",\n  \"s1\",\n  \"s2\",\n  \"s3\",\n  \"s4\",\n  \"sr\",\n  \"r\",\n  \"d\",\n  \"sp\",\n  \"sd\",\n  \"sd1\",\n  \"sd2\",\n  \"sd3\",\n  \"sd4\",\n  // Body Paragraphs\n  rn,\n  \"m\",\n  \"po\",\n  \"cls\",\n  \"pr\",\n  \"pc\",\n  \"pm\",\n  \"pmo\",\n  \"pmc\",\n  \"pmr\",\n  \"pi\",\n  \"pi1\",\n  \"pi2\",\n  \"pi3\",\n  \"mi\",\n  \"lit\",\n  \"nb\",\n  // Note there is 1 deprecated marker not listed here: \"ph#\"\n  // Poetry\n  \"q\",\n  \"q1\",\n  \"q2\",\n  \"q3\",\n  \"q4\",\n  \"qr\",\n  \"qc\",\n  \"qa\",\n  \"qm\",\n  \"qm1\",\n  \"qm2\",\n  \"qm3\",\n  \"qd\",\n  \"b\",\n  // Lists\n  \"lh\",\n  \"li\",\n  \"li1\",\n  \"li2\",\n  \"li3\",\n  \"li4\",\n  \"lf\",\n  \"lim\",\n  \"lim1\",\n  \"lim2\",\n  \"lim3\",\n  \"lim4\",\n  // Breaks - see https://docs.usfm.bible/usfm/3.1/char/breaks/pb.html\n  \"pb\"\n], $s = 1;\nclass fe extends vn {\n  constructor(e = rn, n, s) {\n    super(s);\n    S(this, \"__marker\");\n    S(this, \"__unknownAttributes\");\n    this.__marker = e, this.__unknownAttributes = n;\n  }\n  static getType() {\n    return \"para\";\n  }\n  static clone(e) {\n    const { __marker: n, __unknownAttributes: s, __key: i } = e;\n    return new fe(n, s, i);\n  }\n  static isValidMarker(e) {\n    return e !== void 0 && Pa.includes(e);\n  }\n  static importDOM() {\n    return {\n      p: () => ({\n        conversion: va,\n        priority: 1\n      })\n    };\n  }\n  static importJSON(e) {\n    return xt().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker).setUnknownAttributes(e.unknownAttributes);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(\"p\");\n    return e.setAttribute(\"data-marker\", this.__marker), e.classList.add(this.__type, `usfm_${this.__marker}`), e;\n  }\n  exportDOM(e) {\n    const { element: n } = super.exportDOM(e);\n    return n && Oe(n) && (n.setAttribute(\"data-marker\", this.getMarker()), n.classList.add(this.getType(), `usfm_${this.getMarker()}`)), { element: n };\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      marker: this.getMarker(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: $s\n    };\n  }\n  // Mutation\n  insertNewAfter(e, n) {\n    const s = xt(this.getMarker());\n    return s.setTextFormat(e.format), s.setTextStyle(e.style), s.setDirection(this.getDirection()), s.setFormat(this.getFormatType()), s.setStyle(this.getTextStyle()), this.insertAfter(s, n), s;\n  }\n}\nfunction va(t) {\n  const r = t.getAttribute(\"data-marker\") ?? void 0, e = xt(r);\n  if (t.style) {\n    e.setFormat(t.style.textAlign);\n    const n = parseInt(t.style.textIndent, 10) / 20;\n    n > 0 && e.setIndent(n);\n  }\n  return { node: e };\n}\nfunction xt(t, r) {\n  return ae(new fe(t, r));\n}\nfunction oe(t) {\n  return t instanceof fe;\n}\nfunction $a(t) {\n  return (t == null ? void 0 : t.type) === fe.getType();\n}\nconst Gt = \"v\", Is = 1;\nclass le extends Ae {\n  constructor(e = \"\", n, s, i, a, o, c) {\n    super(n ?? e, c);\n    S(this, \"__marker\");\n    S(this, \"__number\");\n    S(this, \"__sid\");\n    S(this, \"__altnumber\");\n    S(this, \"__pubnumber\");\n    S(this, \"__unknownAttributes\");\n    this.__marker = Gt, this.__number = e, this.__sid = s, this.__altnumber = i, this.__pubnumber = a, this.__unknownAttributes = o;\n  }\n  static getType() {\n    return \"verse\";\n  }\n  static clone(e) {\n    const { __number: n, __text: s, __sid: i, __altnumber: a, __pubnumber: o, __unknownAttributes: c, __key: l } = e;\n    return new le(n, s, i, a, o, c, l);\n  }\n  static importJSON(e) {\n    return qs().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker).setNumber(e.number).setSid(e.sid).setAltnumber(e.altnumber).setPubnumber(e.pubnumber).setUnknownAttributes(e.unknownAttributes);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setNumber(e) {\n    if (this.__number === e)\n      return this;\n    const n = this.getWritable();\n    return n.__number = e, n;\n  }\n  getNumber() {\n    return this.getLatest().__number;\n  }\n  setSid(e) {\n    if (this.__sid === e)\n      return this;\n    const n = this.getWritable();\n    return n.__sid = e, n;\n  }\n  getSid() {\n    return this.getLatest().__sid;\n  }\n  setAltnumber(e) {\n    if (this.__altnumber === e)\n      return this;\n    const n = this.getWritable();\n    return n.__altnumber = e, n;\n  }\n  getAltnumber() {\n    return this.getLatest().__altnumber;\n  }\n  setPubnumber(e) {\n    if (this.__pubnumber === e)\n      return this;\n    const n = this.getWritable();\n    return n.__pubnumber = e, n;\n  }\n  getPubnumber() {\n    return this.getLatest().__pubnumber;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM(e) {\n    const n = super.createDOM(e);\n    return n.setAttribute(\"data-marker\", this.__marker), n.classList.add(bn, `usfm_${this.__marker}`), n.setAttribute(\"data-number\", this.__number), n;\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      marker: this.getMarker(),\n      number: this.getNumber(),\n      sid: this.getSid(),\n      altnumber: this.getAltnumber(),\n      pubnumber: this.getPubnumber(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: Is\n    };\n  }\n}\nfunction qs(t, r, e, n, s, i) {\n  return ae(new le(t, r, e, n, s, i));\n}\nfunction Hn(t) {\n  return t instanceof le;\n}\nfunction Ia(t) {\n  return (t == null ? void 0 : t.type) === le.getType();\n}\nfunction qa(t) {\n  return ga(t) || Ma(t);\n}\nfunction he(t) {\n  return On(t) || Pt(t);\n}\nfunction Ra(t, r) {\n  return t.find((e) => he(e) && e.getNumber() === r.toString());\n}\nfunction La(t, r = !1) {\n  return t.find((e, n) => (!r || n > 0) && he(e));\n}\nfunction Vn(t) {\n  var e;\n  if (!t)\n    return;\n  if (he(t))\n    return t;\n  let r = (e = t.getTopLevelElement()) == null ? void 0 : e.getPreviousSibling();\n  for (; r && !he(r); )\n    r = r.getPreviousSibling();\n  if (r && he(r))\n    return r;\n}\nfunction Rs(t) {\n  let r = t;\n  for (; r !== null; ) {\n    if (I(r))\n      return r;\n    r = r.getParent();\n  }\n}\nfunction Oa(t) {\n  return Te(t) || On(t) || H(t) || Pt(t) || we(t) || sn(t) || oe(t) || I(t) || Hn(t) || wt(t);\n}\nfunction Da(t) {\n  var e;\n  if (t.anchor.type === \"element\") {\n    const n = t.anchor.getNode(), s = t.anchor.offset;\n    if (s < n.getChildrenSize())\n      return n.getChildAtIndex(s);\n  }\n  const r = t.anchor.getNode();\n  return r.getNextSibling() ?? ((e = r.getParent()) == null ? void 0 : e.getNextSibling()) ?? null;\n}\nfunction Fa(t) {\n  var n;\n  const r = t.anchor.offset;\n  if (t.anchor.type === \"element\" && r > 0)\n    return t.anchor.getNode().getChildAtIndex(r - 1);\n  const e = t.anchor.getNode();\n  return e.getPreviousSibling() ?? ((n = e.getParent()) == null ? void 0 : n.getPreviousSibling()) ?? null;\n}\nfunction be(t) {\n  return oe(t) || we(t);\n}\nfunction Ua(t, r) {\n  let e = t.getParent();\n  for (; e; ) {\n    if (e.getKey() === r)\n      return !0;\n    e = e.getParent();\n  }\n  return !1;\n}\nfunction ze(t, r) {\n  const e = bt(r, Ke), n = !!(t.cid && e), s = !t.cid && !e;\n  return t.style === r.getMarker() && (s || n && t.cid === e);\n}\nfunction Ba(t, r) {\n  const e = z(t) ? t : t.getParent(), n = z(r) ? r : r.getParent(), s = e && n ? Pi(e, n) : void 0;\n  return s ? s.commonAncestor : void 0;\n}\nfunction Ha(t) {\n  const r = t.getStartEndPoints();\n  if (!r)\n    return;\n  const [e, n] = r, s = t.isBackward() ? e : n;\n  t.focus.set(s.key, s.offset, s.type), t.anchor.set(s.key, s.offset, s.type);\n}\nfunction jn(t) {\n  return (t == null ? void 0 : t.type) === Ae.getType();\n}\nfunction Va(t, r) {\n  if (!r)\n    return;\n  const e = t.findIndex((n) => n === r);\n  e && (t.length = e);\n}\nfunction ja(t, r) {\n  if (!r)\n    return t;\n  const e = r.getIndexWithinParent();\n  return t.splice(e + 1, t.length - e - 1);\n}\nfunction $e(t) {\n  return `\\\\${t}`;\n}\nfunction st(t) {\n  return `\\\\${t}*`;\n}\nfunction Ls(t, r, e) {\n  const n = $e(t);\n  if (r != null && r.startsWith(n)) {\n    const s = parseInt(r.slice(n.length), 10);\n    isNaN(s) || (e = s.toString());\n  }\n  return e;\n}\nfunction vt(t, r) {\n  let e = $e(t);\n  return r && (e += `${B}${r}`), e += \" \", e;\n}\nfunction Os(t) {\n  return jn(t) ? t.text : _a(t) ? t.children.map((r) => Os(r)).join(\"\") : \"\";\n}\nfunction Ka(t) {\n  return t.map((e) => Os(e)).join(\" \").trim();\n}\nfunction Kn(t) {\n  return B + t + \" \";\n}\nfunction Jn(t) {\n  return t.reduce((e, n) => e + (H(n) ? ` ${n.getTextContent()}` : \"\"), \"\").trim();\n}\nfunction te(t, r = Ei) {\n  const e = { ...t };\n  return r.forEach((n) => {\n    Reflect.deleteProperty(e, n);\n  }), Object.keys(e).length === 0 ? void 0 : e;\n}\nfunction Ja(t, r) {\n  const e = r.getElementByKey(t.getKey());\n  return e ? e.tagName.toLowerCase() : void 0;\n}\nfunction X(t) {\n  return Object.fromEntries(Object.entries(t).filter(([, r]) => r !== void 0));\n}\nfunction Ds(t) {\n  if (!t)\n    return;\n  const r = t.getNodes();\n  if (r.length > 0)\n    return t.isBackward() ? r[r.length - 1] : r[0];\n}\nfunction xn(t, r) {\n  if (!r)\n    return (t + 1).toString();\n  const e = r.split(\"-\");\n  if (e.length === 2)\n    return parseInt(e[1]) ? `${parseInt(e[1]) + 1}` : `${parseInt(e[0]) + 1}`;\n  const n = RegExp(/^(\\d+)([a-yA-Y]{1,3})$/).exec(r);\n  if (!n)\n    return (parseInt(r) + 1).toString();\n  const s = String.fromCharCode(n[2].charCodeAt(0) + 1);\n  return `${n[1]}${s}`;\n}\nfunction Wn(t, r) {\n  if (!r)\n    return !1;\n  const e = r.split(\"-\").map((n) => parseInt(n));\n  if (e.length < 1 || e.length > 2 || e[0] > e[1])\n    throw new Error(\"isVerseInRange: invalid range\");\n  return e.length === 1 ? t === e[0] : e.length === 2 && isNaN(e[1]) ? t >= e[0] : (e.length === 2 && isNaN(e[0]) || t >= e[0]) && t <= e[1];\n}\nfunction Wa(t) {\n  return !!t && t.includes(\"-\");\n}\nconst za = 1;\nclass tt extends Ae {\n  constructor(e = \"\", n = \"opening\", s) {\n    super(ln(e, n), s);\n    S(this, \"__marker\");\n    S(this, \"__markerSyntax\");\n    this.__marker = e, this.__markerSyntax = n;\n  }\n  static getType() {\n    return \"marker\";\n  }\n  static clone(e) {\n    return new tt(e.__marker, e.__markerSyntax, e.__key);\n  }\n  static importJSON(e) {\n    return it().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    const { marker: n, markerSyntax: s = \"opening\" } = e;\n    return super.updateFromJSON(e).setMarker(n).setMarkerSyntax(s);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n.__text = ln(e, n.__markerSyntax), n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setMarkerSyntax(e) {\n    if (this.__markerSyntax === e)\n      return this;\n    const n = this.getWritable();\n    return n.__markerSyntax = e, n.__text = ln(n.__marker, e), n;\n  }\n  getMarkerSyntax() {\n    return this.getLatest().__markerSyntax;\n  }\n  createDOM(e) {\n    const n = super.createDOM(e);\n    return n.setAttribute(\"data-marker\", this.__marker), n.classList.add(this.__markerSyntax), n;\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      text: this.getTextContent(),\n      marker: this.getMarker(),\n      markerSyntax: this.getMarkerSyntax(),\n      version: za\n    };\n  }\n}\nfunction it(t, r) {\n  return ae(new tt(t, r));\n}\nfunction $t(t) {\n  return t instanceof tt;\n}\nfunction ln(t, r) {\n  return r === \"closing\" ? st(t) : r === \"selfClosing\" ? st(\"\") : $e(t);\n}\nconst qe = \"internal-comment\", Ga = [qe], Ya = {}, Xa = 1;\nclass re extends ct {\n  constructor(e = Ya, n) {\n    super(n);\n    /** @internal */\n    S(this, \"__typedIDs\");\n    this.__typedIDs = e;\n  }\n  static getType() {\n    return \"typed-mark\";\n  }\n  static clone(e) {\n    const n = JSON.parse(JSON.stringify(e.__typedIDs));\n    return new re(n, e.__key);\n  }\n  static isReservedType(e) {\n    return Ga.includes(e);\n  }\n  static importDOM() {\n    return null;\n  }\n  static importJSON(e) {\n    return Mt().updateFromJSON(e);\n  }\n  exportJSON() {\n    return {\n      ...super.exportJSON(),\n      type: this.getType(),\n      typedIDs: this.getTypedIDs(),\n      version: Xa\n    };\n  }\n  createDOM(e) {\n    const n = document.createElement(\"mark\");\n    for (const [s, i] of Object.entries(this.__typedIDs))\n      Rt(n, Lt(e.theme.typedMark, s)), i.length > 1 && Rt(n, Lt(e.theme.typedMarkOverlap, s));\n    return n;\n  }\n  updateDOM(e, n, s) {\n    for (const [i, a] of Object.entries(this.__typedIDs)) {\n      const c = e.__typedIDs[i].length, l = a.length, d = Lt(s.theme.typedMark, i), u = Lt(s.theme.typedMarkOverlap, i);\n      c !== l && (c === 0 ? l === 1 && Rt(n, d) : l === 0 && dr(n, d), c === 1 ? l === 2 && Rt(n, u) : l === 1 && dr(n, u));\n    }\n    return !1;\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setTypedIDs(e.typedIDs);\n  }\n  hasID(e, n) {\n    const i = this.getTypedIDs()[e];\n    if (!i)\n      return !1;\n    for (const a of i)\n      if (n === a)\n        return !0;\n    return !1;\n  }\n  getTypedIDs() {\n    const e = this.getLatest();\n    return se(e) ? e.__typedIDs : {};\n  }\n  setTypedIDs(e) {\n    const n = this.getWritable();\n    return n.__typedIDs = e, n;\n  }\n  addID(e, n) {\n    const s = this.getWritable();\n    if (!se(s))\n      return;\n    const i = s.__typedIDs[e] ?? [];\n    s.__typedIDs[e] = i;\n    for (const a of i)\n      if (n === a)\n        return;\n    i.push(n);\n  }\n  deleteID(e, n) {\n    const s = this.getWritable();\n    if (!se(s))\n      return;\n    const i = s.__typedIDs[e];\n    for (let a = 0; a < i.length; a++)\n      if (n === i[a]) {\n        i.splice(a, 1);\n        return;\n      }\n  }\n  hasNoIDsForEveryType() {\n    return Object.values(this.getTypedIDs()).every((e) => e === void 0 || e.length === 0);\n  }\n  insertNewAfter(e, n = !0) {\n    const s = Mt(this.__typedIDs);\n    return this.insertAfter(s, n), s;\n  }\n  canInsertTextBefore() {\n    return !1;\n  }\n  canInsertTextAfter() {\n    return !1;\n  }\n  canBeEmpty() {\n    return !1;\n  }\n  isInline() {\n    return !0;\n  }\n  extractWithChild(e, n, s) {\n    if (!Z(n) || s === \"html\")\n      return !1;\n    const i = n.anchor, a = n.focus, o = i.getNode(), c = a.getNode(), d = n.isBackward() ? i.offset - a.offset : a.offset - i.offset;\n    return this.isParentOf(o) && this.isParentOf(c) && this.getTextContent().length === d;\n  }\n  excludeFromCopy(e) {\n    return e !== \"clone\";\n  }\n}\nfunction Lt(t, r) {\n  return `${t}-${r}`;\n}\nfunction Mt(t) {\n  return ae(new re(t));\n}\nfunction se(t) {\n  return t instanceof re;\n}\nfunction Qa(t) {\n  return (t == null ? void 0 : t.type) === re.getType();\n}\nfunction Fs(t) {\n  const r = t.getChildren();\n  let e = null;\n  for (const n of r)\n    e === null ? t.insertBefore(n) : e.insertAfter(n), e = n;\n  t.remove();\n}\nfunction Us(t, r, e, n) {\n  const s = t.getNodes(), i = t.anchor.offset, a = t.focus.offset, o = s.length, c = t.isBackward(), l = c ? a : i, d = c ? i : a;\n  let u, h;\n  for (let y = 0; y < o; y++) {\n    const m = s[y];\n    if (z(h) && h.isParentOf(m))\n      continue;\n    const b = y === 0, C = y === o - 1;\n    let x = null;\n    if (q(m)) {\n      const k = m.getTextContentSize(), _ = b ? l : 0, E = C ? d : k;\n      if (_ === 0 && E === 0)\n        continue;\n      const L = m.splitText(_, E);\n      x = L.length > 1 && (L.length === 3 || b && !C || E === k) ? L[1] : L[0];\n    } else {\n      if (se(m))\n        continue;\n      z(m) && m.isInline() && (x = m);\n    }\n    if (x !== null) {\n      if (x && x.is(u))\n        continue;\n      const k = x.getParent();\n      (k == null || !k.is(u)) && (h = void 0), u = k, h === void 0 && (h = Mt({ [r]: [e] }), x.insertBefore(h)), h.append(x);\n    } else\n      u = void 0, h = void 0;\n  }\n  r === qe && z(h) && (c ? h.selectStart() : h.selectEnd());\n}\nfunction Za(t, r, e) {\n  let n = t;\n  for (; n !== null; ) {\n    if (se(n))\n      return n.getTypedIDs()[r];\n    if (q(n) && e === n.getTextContentSize()) {\n      const s = n.getNextSibling();\n      if (se(s))\n        return s.getTypedIDs()[r];\n    }\n    n = n.getParent();\n  }\n}\nfunction mr(t) {\n  return `external-${t}`;\n}\nconst Bs = 1;\nclass De extends lt {\n  constructor(e = \"\", n = \"\", s) {\n    super(s);\n    S(this, \"__textType\");\n    S(this, \"__text\");\n    this.__textType = e, this.__text = n;\n  }\n  static getType() {\n    return \"immutable-typed-text\";\n  }\n  static clone(e) {\n    const { __textType: n, __text: s, __key: i } = e;\n    return new De(n, s, i);\n  }\n  static importDOM() {\n    return {\n      span: (e) => to(e) ? {\n        conversion: eo,\n        priority: 1\n      } : null\n    };\n  }\n  static importJSON(e) {\n    return at().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setTextType(e.textType).setTextContent(e.text);\n  }\n  setTextType(e) {\n    if (this.__textType === e)\n      return this;\n    const n = this.getWritable();\n    return n.__textType = e, n;\n  }\n  getTextType() {\n    return this.getLatest().__textType;\n  }\n  setTextContent(e) {\n    if (this.__text === e)\n      return this;\n    const n = this.getWritable();\n    return n.__text = e, n;\n  }\n  getTextContent() {\n    return this.getLatest().__text;\n  }\n  createDOM() {\n    const e = document.createElement(\"span\");\n    return e.setAttribute(\"data-text-type\", this.__textType), e.classList.add(this.__textType), e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  exportDOM(e) {\n    const { element: n } = super.exportDOM(e);\n    return n && Oe(n) && n.setAttribute(\"data-text-type\", this.getTextType()), { element: n };\n  }\n  decorate() {\n    return this.getTextContent();\n  }\n  exportJSON() {\n    return {\n      type: this.getType(),\n      textType: this.getTextType(),\n      text: this.getTextContent(),\n      version: Bs\n    };\n  }\n  // Mutation\n  isKeyboardSelectable() {\n    return !1;\n  }\n}\nfunction eo(t) {\n  const r = t.getAttribute(\"data-text-type\") ?? \"\", e = t.textContent ?? \"\";\n  return { node: at(r, e) };\n}\nfunction at(t, r) {\n  return ae(new De(t, r));\n}\nfunction to(t) {\n  return (t == null ? void 0 : t.tagName) === \"span\";\n}\nfunction Yt(t) {\n  return t instanceof De;\n}\nfunction no(t) {\n  return (t == null ? void 0 : t.type) === De.getType();\n}\nconst Xt = \"unmatched\", Hs = 1;\nclass Fe extends lt {\n  constructor(e = \"\", n) {\n    super(n);\n    S(this, \"__marker\");\n    this.__marker = e;\n  }\n  static getType() {\n    return \"unmatched\";\n  }\n  static clone(e) {\n    const { __marker: n, __key: s } = e;\n    return new Fe(n, s);\n  }\n  static importDOM() {\n    return {\n      [Xt]: (e) => so(e) ? {\n        conversion: ro,\n        priority: 1\n      } : null\n    };\n  }\n  static importJSON(e) {\n    return zn().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  createDOM() {\n    const e = document.createElement(Xt);\n    e.setAttribute(\"data-marker\", this.__marker), e.classList.add(hr);\n    const n = this.__marker.endsWith(\"*\");\n    return e.title = n ? \"This closing marker has no matching opening marker!\" : \"This opening marker has no matching closing marker!\", e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  exportDOM(e) {\n    const { element: n } = super.exportDOM(e);\n    return n && Oe(n) && (n.setAttribute(\"data-marker\", this.getMarker()), n.classList.add(hr)), { element: n };\n  }\n  decorate() {\n    return `\\\\${this.getMarker()}${yn}`;\n  }\n  exportJSON() {\n    return {\n      type: this.getType(),\n      marker: this.getMarker(),\n      version: Hs\n    };\n  }\n  // Mutation\n  isKeyboardSelectable() {\n    return !1;\n  }\n}\nfunction ro(t) {\n  const r = t.getAttribute(\"data-marker\") ?? \"\";\n  return { node: zn(r) };\n}\nfunction zn(t) {\n  return ae(new Fe(t));\n}\nfunction so(t) {\n  return (t == null ? void 0 : t.tagName) === Xt;\n}\nfunction Vs(t) {\n  return t instanceof Fe;\n}\nconst io = [\n  ge,\n  ve,\n  xe,\n  le,\n  W,\n  ee,\n  Se,\n  tt,\n  et,\n  De,\n  Fe,\n  fe,\n  Re,\n  {\n    replace: vn,\n    with: () => ke(),\n    withKlass: Re\n  }\n];\nvar p;\n(function(t) {\n  t.FileIdentification = \"FileIdentification\", t.Headers = \"Headers\", t.Remarks = \"Remarks\", t.Introduction = \"Introduction\", t.DivisionMarks = \"DivisionMarks\", t.Paragraphs = \"Paragraphs\", t.Poetry = \"Poetry\", t.TitlesHeadings = \"TitlesHeadings\", t.Tables = \"Tables\", t.CenterTables = \"CenterTables\", t.RightTables = \"RightTables\", t.Lists = \"Lists\", t.Footnotes = \"Footnotes\", t.CrossReferences = \"CrossReferences\", t.SpecialText = \"SpecialText\", t.CharacterStyling = \"CharacterStyling\", t.Breaks = \"Breaks\", t.SpecialFeatures = \"SpecialFeatures\", t.PeripheralReferences = \"PeripheralReferences\", t.PeripheralMaterials = \"PeripheralMaterials\", t.Uncategorized = \"Uncategorized\";\n})(p || (p = {}));\nvar f;\n(function(t) {\n  t.Paragraph = \"Paragraph\", t.Character = \"Character\", t.Note = \"Note\", t.Unknown = \"Unknown\";\n})(f || (f = {}));\nconst ao = {\n  id: {\n    category: p.FileIdentification,\n    type: f.Paragraph,\n    description: \"File identification information (BOOKID, FILENAME, EDITOR, MODIFICATION DATE)\",\n    hasEndMarker: !1,\n    children: {\n      FileIdentification: [\"usfm\", \"ide\"],\n      Headers: [\"h\", \"h1\", \"h2\", \"h3\", \"toc1\", \"toc2\", \"toc3\"],\n      Remarks: [\"rem\", \"sts\", \"restore\"],\n      Introduction: [\n        \"imt\",\n        \"imt1\",\n        \"imt2\",\n        \"imt3\",\n        \"imt4\",\n        \"imte\",\n        \"imte1\",\n        \"imte2\",\n        \"is\",\n        \"is1\",\n        \"is2\",\n        \"iot\",\n        \"io\",\n        \"io1\",\n        \"io2\",\n        \"io3\",\n        \"io4\",\n        \"ior\",\n        \"ip\",\n        \"im\",\n        \"ipi\",\n        \"imi\",\n        \"ili\",\n        \"ili1\",\n        \"ili2\",\n        \"ipq\",\n        \"imq\",\n        \"ipr\",\n        \"ib\",\n        \"iq\",\n        \"iq1\",\n        \"iq2\",\n        \"iq3\",\n        \"iex\",\n        \"ie\"\n      ],\n      DivisionMarks: [\"c\", \"cl\"],\n      TitlesHeadings: [\"mt\", \"mt1\", \"mt2\", \"mt3\", \"mt4\"]\n    }\n  },\n  usfm: {\n    category: p.FileIdentification,\n    type: f.Paragraph,\n    description: \"File markup version information\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  ide: {\n    category: p.FileIdentification,\n    type: f.Paragraph,\n    description: \"File encoding information\",\n    hasEndMarker: !1,\n    children: {\n      Remarks: [\"rem\", \"sts\"]\n    }\n  },\n  h: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Running header text for a book (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Headers: [\"toc1\", \"toc2\", \"toc3\", \"toca1\", \"toca2\", \"toca3\"]\n    }\n  },\n  h1: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Running header text\",\n    hasEndMarker: !1,\n    children: {\n      Headers: [\"toc1\", \"toc2\", \"toc3\", \"toca1\", \"toca2\", \"toca3\"]\n    }\n  },\n  h2: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Running header text, left side of page\",\n    hasEndMarker: !1,\n    children: {\n      Headers: [\"toc1\", \"toc2\", \"toc3\", \"toca1\", \"toca2\", \"toca3\"]\n    }\n  },\n  h3: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Running header text, right side of page\",\n    hasEndMarker: !1,\n    children: {\n      Headers: [\"toc1\", \"toc2\", \"toc3\", \"toca1\", \"toca2\", \"toca3\"]\n    }\n  },\n  toc1: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Long table of contents text\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  toc2: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Short table of contents text\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  toc3: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Book Abbreviation\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  toca1: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Alternative language long table of contents text\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  toca2: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Alternative language short table of contents text\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  toca3: {\n    category: p.Headers,\n    type: f.Paragraph,\n    description: \"Alternative language book Abbreviation\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  rem: {\n    category: p.Remarks,\n    type: f.Paragraph,\n    description: \"Comments and remarks\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  sts: {\n    category: p.Remarks,\n    type: f.Paragraph,\n    description: \"Status of this file\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  restore: {\n    category: p.Remarks,\n    type: f.Paragraph,\n    description: \"Project restore information\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  imt: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction major title, level 1 (if single level) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  imt1: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction major title, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  imt2: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction major title, level 2\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  imt3: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction major title, level 3\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  imt4: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction major title, level 4 (usually within parenthesis)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  imte: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction major title at introduction end, level 1 (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  imte1: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction major title at introduction end, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  imte2: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction major title at introduction end, level 2\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  is: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction section heading, level 1 (if single level) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"],\n      CharacterStyling: [\"no\"]\n    }\n  },\n  is1: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction section heading, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  is2: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction section heading, level 2\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      SpecialText: [\"bk\"]\n    }\n  },\n  iot: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction outline title (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CharacterStyling: [\"no\"]\n    }\n  },\n  io: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction outline text, level 1 (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"ior\", \"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  io1: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction outline text, level 1 (if multiple levels) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"ior\", \"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  io2: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction outline text, level 2\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"ior\", \"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  io3: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction outline text, level 3\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"ior\", \"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  io4: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction outline text, level 4\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"ior\", \"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ior: {\n    category: p.Introduction,\n    type: f.Character,\n    description: \"Introduction references range for outline entry; for marking references separately\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  ip: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction prose paragraph (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  im: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction prose paragraph, with no first line indent (may occur after poetry)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ipi: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction prose paragraph, indented, with first line indent\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  imi: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction prose paragraph text, indented, with no first line indent\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ili: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"A list entry, level 1 (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ili1: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"A list entry, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ili2: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"A list entry, level 2\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ipq: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction prose paragraph, quote from the body text\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  imq: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction prose paragraph, quote from the body text, with no first line indent\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ipr: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction prose paragraph, right aligned\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ib: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction blank line\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"]\n    }\n  },\n  iq: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction poetry text, level 1 (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  iq1: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction poetry text, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  iq2: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction poetry text, level 2\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  iq3: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction poetry text, level 3\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  iex: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction explanatory or bridge text (e.g. explanation of missing book in Short Old Testament)\",\n    hasEndMarker: !1,\n    children: {\n      Introduction: [\"iqt\"],\n      CharacterStyling: [\"no\"]\n    }\n  },\n  iqt: {\n    category: p.Introduction,\n    type: f.Character,\n    description: \"For quoted scripture text appearing in the introduction\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  ie: {\n    category: p.Introduction,\n    type: f.Paragraph,\n    description: \"Introduction ending marker\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  c: {\n    category: p.DivisionMarks,\n    type: f.Paragraph,\n    description: \"Chapter number\",\n    hasEndMarker: !1,\n    children: {\n      DivisionMarks: [\"ca\", \"cp\", \"cl\", \"cd\"],\n      Paragraphs: [\"p\", \"m\", \"po\", \"pr\", \"cls\", \"pi\", \"pi1\", \"pi2\", \"pi3\", \"pc\", \"mi\", \"nb\"],\n      Poetry: [\"q\", \"q1\", \"q2\", \"q3\", \"q4\", \"qc\", \"qr\", \"qa\", \"qd\", \"b\"],\n      TitlesHeadings: [\n        \"mte\",\n        \"ms\",\n        \"ms1\",\n        \"ms2\",\n        \"ms3\",\n        \"s\",\n        \"s1\",\n        \"s2\",\n        \"s3\",\n        \"s4\",\n        \"r\",\n        \"sp\",\n        \"d\",\n        \"sd\",\n        \"sd1\",\n        \"sd2\",\n        \"sd3\",\n        \"sd4\"\n      ],\n      Lists: [\"lh\", \"li\", \"li1\", \"li2\", \"li3\", \"li4\", \"lf\", \"lim\", \"lim1\", \"lim2\", \"lim3\", \"lim4\"],\n      Footnotes: [\"f\", \"fe\"],\n      SpecialText: [\"lit\"],\n      Breaks: [\"pb\"]\n    }\n  },\n  ca: {\n    category: p.DivisionMarks,\n    type: f.Character,\n    description: \"Second (alternate) chapter number (for coding dual versification; useful for places where different traditions of chapter breaks need to be supported in the same translation)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  cp: {\n    category: p.DivisionMarks,\n    type: f.Paragraph,\n    description: \"Published chapter number (chapter string that should appear in the published text)\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\"]\n    }\n  },\n  cl: {\n    category: p.DivisionMarks,\n    type: f.Paragraph,\n    description: \"Chapter label used for translations that add a word such as 'Chapter' before chapter numbers (e.g. Psalms). The subsequent text is the chapter label.\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  cd: {\n    category: p.DivisionMarks,\n    type: f.Paragraph,\n    description: \"Chapter Description (Publishing option D, e.g. in Russian Bibles)\",\n    hasEndMarker: !1,\n    children: {\n      DivisionMarks: [\"vp\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  v: {\n    category: p.DivisionMarks,\n    type: f.Character,\n    description: \"A verse number\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  va: {\n    category: p.DivisionMarks,\n    type: f.Character,\n    description: \"Second (alternate) verse number (for coding dual numeration in Psalms; see also NRSV Exo 22.1-4)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  vp: {\n    category: p.DivisionMarks,\n    type: f.Character,\n    description: \"Published verse marker (verse string that should appear in the published text)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  p: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, with first line indent (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Paragraphs: [\"pmo\", \"pm\", \"pmc\", \"pmr\"],\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  m: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, with no first line indent (may occur after poetry) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Paragraphs: [\"pmo\", \"pm\", \"pmc\", \"pmr\"],\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  po: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Letter opening\",\n    hasEndMarker: !1,\n    children: {\n      Paragraphs: [\"pmo\", \"pm\", \"pmc\", \"pmr\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pr: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Text refrain (paragraph text, right aligned)\",\n    hasEndMarker: !1,\n    children: {\n      Paragraphs: [\"pmo\", \"pm\", \"pmc\", \"pmr\"],\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  cls: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Letter Closing\",\n    hasEndMarker: !1,\n    children: {\n      SpecialText: [\"tl\", \"sig\", \"pn\", \"png\", \"addpn\", \"add\"]\n    }\n  },\n  pmo: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Embedded text opening\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pm: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Embedded text paragraph\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pmc: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Embedded text closing\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pmr: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Embedded text refrain (e.g. Then all the people shall say, 'Amen!')\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pi: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, level 1 indent (if single level), with first line indent; often used for discourse (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pi1: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, level 1 indent (if multiple levels), with first line indent; often used for discourse\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pi2: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, level 2 indent, with first line indent; often used for discourse\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pi3: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, level 3 indent, with first line indent; often used for discourse\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  pc: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, centered (for Inscription)\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  mi: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, indented, with no first line indent; often used for discourse\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  nb: {\n    category: p.Paragraphs,\n    type: f.Paragraph,\n    description: \"Paragraph text, with no break from previous paragraph text (at chapter boundary) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  q: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, level 1 indent (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qs\", \"qac\", \"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  q1: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, level 1 indent (if multiple levels) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qs\", \"qac\", \"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  q2: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, level 2 indent (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qs\", \"qac\", \"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  q3: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, level 3 indent\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qs\", \"qac\", \"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  q4: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, level 4 indent\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qs\", \"qac\", \"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  qc: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, centered\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qs\", \"qac\", \"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  qr: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, Right Aligned\",\n    hasEndMarker: !1,\n    children: {\n      Poetry: [\"qs\", \"qac\", \"qm\", \"qm1\", \"qm2\", \"qm3\"],\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  qs: {\n    category: p.Poetry,\n    type: f.Character,\n    description: \"Poetry text, Selah\",\n    hasEndMarker: !0,\n    children: {\n      Footnotes: [\"f\"],\n      CrossReferences: [\"x\"]\n    }\n  },\n  qa: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, Acrostic marker/heading\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  qac: {\n    category: p.Poetry,\n    type: f.Character,\n    description: \"Poetry text, Acrostic markup of the first character of a line of acrostic poetry\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  qm: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, embedded, level 1 indent (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  qm1: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, embedded, level 1 indent (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  qm2: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, embedded, level 2 indent\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  qm3: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text, embedded, level 3 indent\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  qd: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"A Hebrew musical performance annotation, similar in content to Hebrew descriptive title.\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte1\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  b: {\n    category: p.Poetry,\n    type: f.Paragraph,\n    description: \"Poetry text stanza break (e.g. stanza break) (basic)\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  mt: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"The main title of the book (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\"],\n      CrossReferences: [\"x\"]\n    }\n  },\n  mt1: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"The main title of the book (if multiple levels) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\"],\n      CrossReferences: [\"x\"]\n    }\n  },\n  mt2: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A secondary title usually occurring before the main title (basic)\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\"],\n      CrossReferences: [\"x\"]\n    }\n  },\n  mt3: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A secondary title occurring after the main title\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\"],\n      CrossReferences: [\"x\"]\n    }\n  },\n  mt4: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A small secondary title sometimes occurring within parentheses\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  mte: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"The main title of the book repeated at the end of the book, level 1 (if single level)\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  mte1: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"The main title of the book repeated at the end of the book, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mte2\"]\n    }\n  },\n  mte2: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A secondary title occurring before or after the 'ending' main title\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  ms: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A major section division heading, level 1 (if single level) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mr\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ms1: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A major section division heading, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mr\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ms2: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A major section division heading, level 2\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mr\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  ms3: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A major section division heading, level 3\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"mr\"],\n      Footnotes: [\"f\", \"fe\"]\n    }\n  },\n  mr: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A major section division references range heading (basic)\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  s: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A section heading, level 1 (if single level) (basic)\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"sr\", \"r\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  s1: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A section heading, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"sr\", \"r\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  s2: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A section heading, level 2 (e.g. Proverbs 22-24)\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"sr\", \"r\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  s3: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A section heading, level 3 (e.g. Genesis 'The First Day')\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"sr\", \"r\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"no\", \"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  s4: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A section heading, level 4\",\n    hasEndMarker: !1,\n    children: {\n      TitlesHeadings: [\"sr\", \"r\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  sr: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A section division references range heading\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  r: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"Parallel reference(s) (basic)\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  sp: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A heading, to identify the speaker (e.g. Job)\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  d: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"A Hebrew text heading, to provide description (e.g. Psalms)\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  sd: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"Vertical space used to divide the text into sections, level 1 (if single level)\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  sd1: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"Vertical space used to divide the text into sections, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  sd2: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"Vertical space used to divide the text into sections, level 2\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  sd3: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"Vertical space used to divide the text into sections, level 3\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  sd4: {\n    category: p.TitlesHeadings,\n    type: f.Paragraph,\n    description: \"Vertical space used to divide the text into sections, level 4\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  lh: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"List header (introductory remark)\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  li: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"A list entry, level 1 (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  li1: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"A list entry, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  li2: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"A list entry, level 2\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  li3: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"A list entry, level 3\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  li4: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"A list entry, level 4\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  lf: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"List footer (concluding remark)\",\n    hasEndMarker: !1,\n    children: {\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  lim: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"An embedded list entry, level 1 (if single level)\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  lim1: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"An embedded list entry, level 1 (if multiple levels)\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  lim2: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"An embedded list entry, level 2\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  lim3: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"An embedded list item, level 3\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  lim4: {\n    category: p.Lists,\n    type: f.Paragraph,\n    description: \"An embedded list entry, level 4\",\n    hasEndMarker: !1,\n    children: {\n      Lists: [\"litl\", \"lik\", \"liv\", \"liv1\", \"liv2\", \"liv3\", \"liv4\", \"liv5\"],\n      Footnotes: [\"f\", \"fe\", \"fm\"],\n      CrossReferences: [\"x\", \"xt\", \"rq\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  litl: {\n    category: p.Lists,\n    type: f.Character,\n    description: \"List entry total text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  lik: {\n    category: p.Lists,\n    type: f.Character,\n    description: \"Structured list entry key text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  liv: {\n    category: p.Lists,\n    type: f.Character,\n    description: \"Structured list entry value 1 content (if single value)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  liv1: {\n    category: p.Lists,\n    type: f.Character,\n    description: \"Structured list entry value 1 content (if multiple values)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  liv2: {\n    category: p.Lists,\n    type: f.Character,\n    description: \"Structured list entry value 2 content\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  liv3: {\n    category: p.Lists,\n    type: f.Character,\n    description: \"Structured list entry value 3 content\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  liv4: {\n    category: p.Lists,\n    type: f.Character,\n    description: \"Structured list entry value 4 content\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  liv5: {\n    category: p.Lists,\n    type: f.Character,\n    description: \"Structured list entry value 5 content\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  f: {\n    category: p.Footnotes,\n    type: f.Note,\n    description: \"A Footnote text item (basic)\",\n    hasEndMarker: !0,\n    children: {\n      Footnotes: [\"fr\", \"ft\", \"fk\", \"fq\", \"fqa\", \"fl\", \"fw\", \"fp\", \"fv\", \"fdc\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  fe: {\n    category: p.Footnotes,\n    type: f.Note,\n    description: \"An Endnote text item\",\n    hasEndMarker: !0,\n    children: {\n      Footnotes: [\"fr\", \"ft\", \"fk\", \"fq\", \"fqa\", \"fl\", \"fw\", \"fp\", \"fv\", \"fdc\"],\n      CrossReferences: [\"xt\"],\n      SpecialText: [\n        \"qt\",\n        \"nd\",\n        \"tl\",\n        \"dc\",\n        \"bk\",\n        \"sig\",\n        \"pn\",\n        \"png\",\n        \"addpn\",\n        \"wj\",\n        \"k\",\n        \"sls\",\n        \"ord\",\n        \"add\"\n      ],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  fr: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"The origin reference for the footnote (basic)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  ft: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"Footnote text, Protocanon (basic)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fk: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"A footnote keyword (basic)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fq: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"A footnote scripture quote or alternate rendering (basic)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fqa: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"A footnote alternate rendering for a portion of scripture text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fl: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"A footnote label text item, for marking or 'labelling' the type or alternate translation being provided in the note.\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fw: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"A footnote witness list, for distinguishing a list of sigla representing witnesses in critical editions.\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fp: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"A Footnote additional paragraph marker\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fv: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"A verse number within the footnote text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fdc: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"Footnote text, applies to Deuterocanon only\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  fm: {\n    category: p.Footnotes,\n    type: f.Character,\n    description: \"An additional footnote marker location for a previous footnote\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  x: {\n    category: p.CrossReferences,\n    type: f.Note,\n    description: \"A list of cross references (basic)\",\n    hasEndMarker: !0,\n    children: {\n      CrossReferences: [\"xo\", \"xop\", \"xt\", \"xta\", \"xk\", \"xq\", \"xot\", \"xnt\", \"xdc\"],\n      CharacterStyling: [\"it\", \"bd\", \"bdit\", \"em\", \"sc\", \"sup\"]\n    }\n  },\n  xo: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"The cross reference origin reference (basic)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  xop: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"Published cross reference origin reference (origin reference that should appear in the published text)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  xt: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"The cross reference target reference(s), protocanon only (basic)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  xta: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"Cross reference target references added text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  xk: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"A cross reference keyword\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  xq: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"A cross-reference quotation from the scripture text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  xot: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"Cross-reference target reference(s), Old Testament only\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  xnt: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"Cross-reference target reference(s), New Testament only\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  xdc: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"Cross-reference target reference(s), Deuterocanon only\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  rq: {\n    category: p.CrossReferences,\n    type: f.Character,\n    description: \"A cross-reference indicating the source text for the preceding quotation.\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  qt: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For Old Testament quoted text appearing in the New Testament (basic)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  nd: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For name of deity (basic)\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  tl: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For transliterated words\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  dc: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"Deuterocanonical/LXX additions or insertions in the Protocanonical text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  bk: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For the quoted name of a book\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  sig: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For the signature of the author of an Epistle\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  pn: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For a proper name\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  png: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For a geographic proper name\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  addpn: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For chinese words to be dot underline & underline\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  wj: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For marking the words of Jesus\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  k: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For a keyword\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  sls: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"To represent where the original text is in a secondary language or from an alternate text source\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  ord: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For the text portion of an ordinal number\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  add: {\n    category: p.SpecialText,\n    type: f.Character,\n    description: \"For a translational addition to the text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  lit: {\n    category: p.SpecialText,\n    type: f.Paragraph,\n    description: \"For a comment or note inserted for liturgical use\",\n    hasEndMarker: !1,\n    children: void 0\n  },\n  no: {\n    category: p.CharacterStyling,\n    type: f.Character,\n    description: \"A character style, use normal text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  it: {\n    category: p.CharacterStyling,\n    type: f.Character,\n    description: \"A character style, use italic text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  bd: {\n    category: p.CharacterStyling,\n    type: f.Character,\n    description: \"A character style, use bold text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  bdit: {\n    category: p.CharacterStyling,\n    type: f.Character,\n    description: \"A character style, use bold + italic text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  em: {\n    category: p.CharacterStyling,\n    type: f.Character,\n    description: \"A character style, use emphasized text style\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  sc: {\n    category: p.CharacterStyling,\n    type: f.Character,\n    description: \"A character style, for small capitalization text\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  sup: {\n    category: p.CharacterStyling,\n    type: f.Character,\n    description: \"A character style, for superscript text. Typically for use in critical edition footnotes.\",\n    hasEndMarker: !0,\n    children: void 0\n  },\n  pb: {\n    category: p.Breaks,\n    type: f.Paragraph,\n    description: \"Page Break used for new reader portions and children's bibles where content is controlled by the page\",\n    hasEndMarker: !1,\n    children: void 0\n  }\n}, He = {\n  DivisionMarks: { add: [\"v\", \"c\"], remove: [] },\n  Paragraphs: { add: [\"p\"], remove: [] },\n  Poetry: { add: [\"q\", \"q1\", \"q2\", \"q3\", \"q4\", \"b\"], remove: [] },\n  TitlesHeadings: {\n    add: [\n      \"mte\",\n      \"ms\",\n      \"ms1\",\n      \"ms2\",\n      \"ms3\",\n      \"s\",\n      \"s1\",\n      \"s2\",\n      \"s3\",\n      \"s4\",\n      \"r\",\n      \"sp\",\n      \"d\",\n      \"sd\",\n      \"sd1\",\n      \"sd2\",\n      \"sd3\",\n      \"sd4\"\n    ],\n    remove: []\n  }\n}, oo = {\n  p: { children: He },\n  q: { children: He },\n  q1: { children: He },\n  q2: { children: He },\n  q3: { children: He },\n  q4: { children: He },\n  b: { children: He },\n  qm: {\n    children: {\n      Paragraphs: { add: [\"p\"], remove: [] }\n    }\n  },\n  c: {\n    type: f.Paragraph,\n    children: null\n  },\n  v: {\n    children: null\n  }\n};\nfunction gr(t) {\n  const r = ao[t], e = oo[t];\n  if (!r)\n    return;\n  if (!e)\n    return r;\n  let n = r.children ? { ...r.children } : void 0;\n  if (e.children === null && (n = void 0), e.children) {\n    n = n || {};\n    for (const [s, i] of Object.entries(e.children)) {\n      const a = s;\n      if (i === null)\n        Reflect.deleteProperty(n, a);\n      else {\n        let o = n[a] || [];\n        i.remove && (o = o.filter((c) => !i.remove.includes(c))), i.add && (o = [.../* @__PURE__ */ new Set([...o, ...i.add])]), o.length > 0 ? n[a] = o : Reflect.deleteProperty(n, a);\n      }\n    }\n    Object.keys(n).length === 0 && (n = void 0);\n  }\n  return {\n    ...r,\n    ...e,\n    children: n\n  };\n}\nfunction yr(t, r, e) {\n  const n = {\n    type: Jt,\n    version: Kt,\n    content: t\n  }, s = r.serializeEditorState(n, e);\n  return Fn(s.root.children[0]) ? s.root.children[0].children[0] : s.root.children[0];\n}\nfunction Mn(t, r) {\n  if (!t || !q(t))\n    return [void 0, void 0];\n  const e = t.getTextContent();\n  if (r >= 0 && r < e.length)\n    return [t, r];\n  let n = t.getNextSibling();\n  if (!n) {\n    const i = t.getParent();\n    se(i) && (n = i.getNextSibling());\n  }\n  if (!n || !se(n) && !q(n))\n    return [void 0, void 0];\n  const s = r - e.length;\n  return n && q(n) ? Mn(n, s) : Mn(n.getFirstChild() ?? void 0, s);\n}\nfunction br(t) {\n  const r = Ni(t.jsonPath);\n  let e = Pe();\n  for (const n of r) {\n    if (!e || !z(e))\n      return [void 0, void 0];\n    e = e.getChildAtIndex(n) ?? void 0;\n  }\n  return Mn(e, t.offset);\n}\nfunction kr(t) {\n  return z(t) ? \"element\" : \"text\";\n}\nfunction Gn(t) {\n  const { start: r } = t;\n  let { end: e } = t;\n  e === void 0 && (e = r);\n  const [n, s] = br(r), [i, a] = br(e);\n  if (!n || !i || s === void 0 || a === void 0)\n    return;\n  const o = ns();\n  return o.anchor = lr(n.getKey(), s, kr(n)), o.focus = lr(i.getKey(), a, kr(i)), o;\n}\nfunction _r(t, r) {\n  const e = [];\n  let n = t;\n  for (; n != null && n.getParent(); ) {\n    const s = n.getParent();\n    if (s) {\n      const i = s == null ? void 0 : s.getChildren().indexOf(n);\n      i >= 0 && e.unshift(i);\n    }\n    n = s;\n  }\n  return { jsonPath: Ai(e), offset: r };\n}\nfunction js() {\n  const t = ie();\n  if (!t || !Z(t))\n    return;\n  const r = t.isBackward() ? t.focus.getNode() : t.anchor.getNode(), e = t.isBackward() ? t.focus.offset : t.anchor.offset, n = _r(r, e);\n  if (t.isCollapsed())\n    return { start: n };\n  const s = t.isBackward() ? t.anchor.getNode() : t.focus.getNode(), i = t.isBackward() ? t.anchor.offset : t.focus.offset, a = _r(s, i);\n  return { start: n, end: a };\n}\nconst Ks = \"v\", Js = 1;\nclass de extends lt {\n  constructor(e = \"\", n = !1, s, i, a, o, c) {\n    super(c);\n    S(this, \"__marker\");\n    S(this, \"__number\");\n    S(this, \"__showMarker\");\n    S(this, \"__sid\");\n    S(this, \"__altnumber\");\n    S(this, \"__pubnumber\");\n    S(this, \"__unknownAttributes\");\n    this.__marker = Ks, this.__number = e, this.__showMarker = n, this.__sid = s, this.__altnumber = i, this.__pubnumber = a, this.__unknownAttributes = o;\n  }\n  static getType() {\n    return \"immutable-verse\";\n  }\n  static clone(e) {\n    const { __number: n, __showMarker: s, __sid: i, __altnumber: a, __pubnumber: o, __unknownAttributes: c, __key: l } = e;\n    return new de(n, s, i, a, o, c, l);\n  }\n  static importDOM() {\n    return {\n      span: (e) => lo(e) ? {\n        conversion: co,\n        priority: 1\n      } : null\n    };\n  }\n  static importJSON(e) {\n    return Yn().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setMarker(e.marker).setNumber(e.number).setShowMarker(e.showMarker).setSid(e.sid).setAltnumber(e.altnumber).setPubnumber(e.pubnumber).setUnknownAttributes(e.unknownAttributes);\n  }\n  setMarker(e) {\n    if (this.__marker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__marker = e, n;\n  }\n  getMarker() {\n    return this.getLatest().__marker;\n  }\n  setNumber(e) {\n    if (this.__number === e)\n      return this;\n    const n = this.getWritable();\n    return n.__number = e, n;\n  }\n  getNumber() {\n    return this.getLatest().__number;\n  }\n  setShowMarker(e = !1) {\n    if (this.__showMarker === e)\n      return this;\n    const n = this.getWritable();\n    return n.__showMarker = e, n;\n  }\n  getShowMarker() {\n    return this.getLatest().__showMarker;\n  }\n  setSid(e) {\n    if (this.__sid === e)\n      return this;\n    const n = this.getWritable();\n    return n.__sid = e, n;\n  }\n  getSid() {\n    return this.getLatest().__sid;\n  }\n  setAltnumber(e) {\n    if (this.__altnumber === e)\n      return this;\n    const n = this.getWritable();\n    return n.__altnumber = e, n;\n  }\n  getAltnumber() {\n    return this.getLatest().__altnumber;\n  }\n  setPubnumber(e) {\n    if (this.__pubnumber === e)\n      return this;\n    const n = this.getWritable();\n    return n.__pubnumber = e, n;\n  }\n  getPubnumber() {\n    return this.getLatest().__pubnumber;\n  }\n  setUnknownAttributes(e) {\n    const n = this.getWritable();\n    return n.__unknownAttributes = e, n;\n  }\n  getUnknownAttributes() {\n    return this.getLatest().__unknownAttributes;\n  }\n  createDOM() {\n    const e = document.createElement(\"span\");\n    return e.setAttribute(\"data-marker\", this.__marker), e.classList.add(bn, `usfm_${this.__marker}`), this.__showMarker && e.classList.add(\"marker\"), e.setAttribute(\"data-number\", this.__number), e;\n  }\n  updateDOM() {\n    return !1;\n  }\n  exportDOM(e) {\n    const { element: n } = super.exportDOM(e);\n    return n && Oe(n) && (n.setAttribute(\"data-marker\", this.getMarker()), n.classList.add(bn, `usfm_${this.getMarker()}`), n.setAttribute(\"data-number\", this.getNumber())), { element: n };\n  }\n  decorate() {\n    return g(\"span\", { children: this.getShowMarker() ? vt(this.getMarker(), this.getNumber()) : (\n      // ZWSP added so double click word selection works without including this number.\n      yn + this.getNumber() + yn\n    ) });\n  }\n  exportJSON() {\n    return {\n      type: this.getType(),\n      marker: this.getMarker(),\n      number: this.getNumber(),\n      showMarker: this.getShowMarker(),\n      sid: this.getSid(),\n      altnumber: this.getAltnumber(),\n      pubnumber: this.getPubnumber(),\n      unknownAttributes: this.getUnknownAttributes(),\n      version: Js\n    };\n  }\n  // Mutation\n  isKeyboardSelectable() {\n    return !1;\n  }\n}\nfunction co(t) {\n  const r = t.getAttribute(\"data-number\") ?? \"0\";\n  return { node: Yn(r) };\n}\nfunction Yn(t, r, e, n, s, i) {\n  return ae(new de(t, r, e, n, s, i));\n}\nfunction lo(t) {\n  return ((t == null ? void 0 : t.getAttribute(\"data-marker\")) ?? void 0) === Ks;\n}\nfunction ut(t) {\n  return t instanceof de;\n}\nfunction uo(t) {\n  return (t == null ? void 0 : t.type) === de.getType();\n}\nfunction me(t) {\n  return Hn(t) || ut(t);\n}\nfunction fo(t) {\n  return Ia(t) || uo(t);\n}\nfunction po(t, r, e, n, s, i, a) {\n  if (!ee.isValidMarker(t))\n    throw new Error(`$insertNote: Invalid note marker '${t}'`);\n  const o = e ? Gn(e) : ie();\n  if (!Z(o))\n    return;\n  const c = ho(o, t, n, a);\n  if (c === void 0)\n    return;\n  const l = zs(t, r, c, s, i);\n  return Ws(l, o, s), l;\n}\nfunction Ws(t, r, e) {\n  const n = (e == null ? void 0 : e.noteMode) === \"collapsed\";\n  if (t.setIsCollapsed(n), r.isCollapsed() || Ha(r), r.insertNodes([t]), !n) {\n    const s = t.getChildren().reverse().find(H);\n    s == null || s.selectEnd();\n  }\n}\nfunction ho(t, r, e, n) {\n  const s = [], { chapterNum: i, verseNum: a } = e ?? {};\n  switch (r) {\n    case \"f\":\n    case \"fe\":\n    case \"ef\":\n    case \"efe\":\n      if (i !== void 0 && a !== void 0 && s.push(Me(\"fr\").append(J(`${i}:${a}`))), !t.isCollapsed()) {\n        const o = t.getTextContent().trim();\n        if (o.length > 0) {\n          const c = Me(\"fq\");\n          c.append(J(o)), s.push(c);\n        }\n      }\n      s.push(Me(\"ft\").append(J(\"-\")));\n      break;\n    case \"x\":\n    case \"ex\":\n      i !== void 0 && a !== void 0 && s.push(Me(\"xo\").append(J(`${i}:${a}`))), s.push(Me(\"xt\").append(J(\"-\")));\n      break;\n    default:\n      n == null || n.warn(`$createNoteChildren: Unsupported note marker '${r}'`);\n      return;\n  }\n  return s;\n}\nfunction zs(t, r, e, n, s, i) {\n  const a = (n == null ? void 0 : n.noteMode) !== \"expanded\", o = Bn(t, r, a);\n  i && Ne(o, Je, () => i);\n  let c, l;\n  (n == null ? void 0 : n.markerMode) === \"editable\" ? (c = it(t), l = it(t, \"closing\")) : (n == null ? void 0 : n.markerMode) === \"visible\" && (c = at(\"marker\", $e(t) + B), l = at(\"marker\", st(t) + B));\n  let d;\n  if (c && o.append(c), (n == null ? void 0 : n.markerMode) === \"editable\")\n    r === \"\" ? o.append(...e) : (d = J(Kn(o.__caller)), o.append(d, ...e));\n  else {\n    const u = () => J(B), h = e.flatMap(go(u));\n    if (r === \"\")\n      o.append(...h);\n    else {\n      const y = Jn(e);\n      let m = () => {\n      };\n      s != null && s.noteCallerOnClick && (m = s.noteCallerOnClick), d = er(o.__caller, y, m), o.append(d, u(), ...h);\n    }\n  }\n  return l && o.append(l), o;\n}\nfunction Cr(t) {\n  var s;\n  if (typeof t == \"string\") {\n    const i = K(t);\n    return I(i) ? i : void 0;\n  }\n  const r = At();\n  if (r.length <= 0)\n    return;\n  const n = (s = r.filter((i) => I(i.node))[t]) == null ? void 0 : s.node;\n  if (I(n))\n    return n;\n}\nfunction mo(t, r) {\n  const e = (r == null ? void 0 : r.noteMode) === \"collapsed\";\n  if (t.setIsCollapsed(e), e) {\n    const n = t.getPreviousSibling();\n    if (ut(n) || !n) {\n      const s = t.getParent();\n      if (s) {\n        const i = t.getIndexWithinParent();\n        s.select(i, i);\n      }\n    } else\n      n.selectEnd();\n  } else {\n    const n = t.getChildren().reverse().find(H);\n    n == null || n.selectEnd();\n  }\n}\nfunction go(t) {\n  return (r) => Yt(r) ? [r] : [r, t()];\n}\nfunction yo(t) {\n  return t.find((r) => oe(r));\n}\nfunction bo(t, r) {\n  return z(t) ? t.getChildren().find((s) => me(s) && Wn(r, s.getNumber())) : void 0;\n}\nfunction ko(t, r) {\n  return r === 0 ? yo(t) : t.map((e) => bo(e, r)).filter((e) => e)[0];\n}\nfunction xr(t) {\n  return !t || !z(t) ? void 0 : t.getChildren().findLast((n) => me(n));\n}\nfunction Gs(t) {\n  var a, o;\n  if (!t || he(t))\n    return;\n  if (me(t))\n    return t;\n  let e = se(t.getParent()) ? (a = t.getParent()) == null ? void 0 : a.getPreviousSibling() : t.getPreviousSibling();\n  for (; e && !me(e) && !he(e); )\n    e = e.getPreviousSibling();\n  if (e && me(e))\n    return e;\n  let n = (o = t.getTopLevelElement()) == null ? void 0 : o.getPreviousSibling(), s = xr(n), i = s;\n  for (; n && !s && !he(n); )\n    s = i, n = n.getPreviousSibling(), i = xr(n);\n  if (!(!s && he(n)))\n    return s;\n}\nfunction _o(t) {\n  return Oa(t) || ut(t);\n}\nfunction Xn(t) {\n  if (q(t)) {\n    const r = t.getTextContent();\n    !r.endsWith(\" \") && !r.endsWith(B) && t.setTextContent(`${r} `);\n  }\n}\nfunction Ys(t) {\n  if (q(t)) {\n    const r = t.getTextContent();\n    r.startsWith(\" \") && t.setTextContent(r.trimStart());\n  }\n}\nfunction Qn(t, r) {\n  return t.getEditorState().read(() => !K(r));\n}\nconst Co = [\"style\"], xo = [\"style\", \"code\"], Qt = [\"style\", \"cid\"], Mo = [\n  \"style\",\n  \"number\",\n  \"sid\",\n  \"altnumber\",\n  \"pubnumber\"\n], To = [\n  \"style\",\n  \"number\",\n  \"sid\",\n  \"altnumber\",\n  \"pubnumber\"\n], So = [\"style\", \"sid\", \"eid\"], Eo = [\"style\", \"caller\", \"category\", \"contents\"], No = [\n  \"chapter\",\n  \"immutable-chapter\",\n  \"verse\",\n  \"immutable-verse\",\n  \"ms\",\n  \"note\",\n  \"unmatched\"\n], Tt = `\n`;\nfunction Ao(t, r) {\n  const e = K(t);\n  if (!Ce(e))\n    return;\n  const n = Xs(e);\n  return n === void 0 ? void 0 : [{ retain: n }, ...r, { delete: 1 }];\n}\nfunction Xs(t) {\n  if (!t)\n    return;\n  const r = At();\n  let e = 0;\n  const n = [];\n  let s, i;\n  const a = t.getKey();\n  let o;\n  for (const c of r) {\n    const l = c.node;\n    for (let d = n.length - 1; d >= 0; d--)\n      if (St(n[d], c)) {\n        const u = n[d];\n        if (n.splice(d, 1), e += 1, o && u.getKey() === o.getKey())\n          return e - 1;\n      }\n    if (s && St(s, c) && (s = void 0, i = void 0), s) {\n      if (l.getKey() === a)\n        return i;\n      continue;\n    }\n    if (l.getKey() === a) {\n      if (q(l) || Ce(l))\n        return e;\n      ye(l) && (o = l);\n    }\n    if (ye(l) && (n.includes(l) || n.push(l)), I(l)) {\n      s = l, i = e, e += 1;\n      continue;\n    }\n    e += Qs(l);\n  }\n  if (o)\n    return e;\n}\nfunction Mr(t, r) {\n  if (t.length < 2 || !vo(t[0]) || !Po(t[1]))\n    return;\n  const e = t[0].retain;\n  return r.read(() => {\n    const n = wo(e);\n    return n == null ? void 0 : n.getKey();\n  });\n}\nfunction wo(t) {\n  const r = At();\n  let e = 0;\n  const n = [];\n  let s, i;\n  for (const a of r) {\n    const o = a.node;\n    for (let l = n.length - 1; l >= 0; l--)\n      if (St(n[l], a)) {\n        const d = n[l];\n        if (n.splice(l, 1), e === t)\n          return d;\n        e += 1;\n      }\n    if (s && St(s, a) && (s = void 0, i = void 0), s) {\n      if (i === t)\n        return s;\n      continue;\n    }\n    if (ye(o) && (n.includes(o) || n.push(o)), I(o)) {\n      if (s = o, i = e, e === t)\n        return o;\n      e += 1;\n      continue;\n    }\n    const c = Qs(o);\n    if (q(o) && c > 0 && t >= e && t < e + c || Ce(o) && e === t)\n      return o;\n    e += c;\n  }\n  for (const a of n) {\n    if (e === t)\n      return a;\n    e += 1;\n  }\n}\nfunction St(t, r) {\n  return t ? r ? !Ua(r.node, t.getKey()) : !0 : !1;\n}\nfunction Ce(t) {\n  return he(t) || me(t) || sn(t) || I(t) || Vs(t);\n}\nfunction ye(t) {\n  return be(t) || Te(t);\n}\nfunction ft(t, r) {\n  return r.insert != null && typeof r.insert == \"object\" && t in r.insert;\n}\nfunction Po(t) {\n  if (t.insert == null || typeof t.insert != \"object\")\n    return !1;\n  const r = Object.keys(t.insert)[0];\n  return t.insert != null && typeof t.insert == \"object\" && r in t.insert && No.includes(r);\n}\nfunction vo(t) {\n  return t.retain != null && typeof t.retain == \"number\";\n}\nfunction Qs(t) {\n  return q(t) ? t.getTextContentSize() : Ce(t) ? 1 : 0;\n}\nfunction Tn(t, r) {\n  const e = { insert: t.__text }, n = bt(t, Je);\n  if (n && (e.attributes = { segment: n }), r && r.length > 0) {\n    let s = r.map((i) => {\n      const a = { style: i.__marker }, o = bt(i, Ke);\n      o && (a.cid = o);\n      const c = i.getUnknownAttributes();\n      return c && Object.keys(c).length > 0 && Object.assign(a, c), a;\n    });\n    s.length === 1 && (s = s[0]), e.attributes = {\n      ...e.attributes,\n      char: s\n    };\n  }\n  return e;\n}\nfunction Tr(t) {\n  const r = new ht();\n  return t.isEmpty() || t.read(() => {\n    const e = Pe();\n    if (!e || e.isEmpty())\n      return;\n    const n = e.getChildren();\n    if (n.length === 1 && we(n[0]) && (!n[0].getChildren() || n[0].getChildrenSize() === 0))\n      return;\n    const s = $o();\n    for (const i of s)\n      r.push(i);\n  }), r;\n}\nfunction Zn(t, r) {\n  const e = [], n = At(t, r), s = [], i = [], a = { children: [], contentsOps: [] };\n  for (let o = 0; o < n.length; o++) {\n    const c = n[o].node;\n    e.push(...Sr(c, o, n, s, i, a));\n  }\n  for (const o of s)\n    e.push(...Sr(o, n.length, n, s, i, a));\n  return e;\n}\nfunction $o() {\n  return Zn();\n}\nfunction Sr(t, r, e, n, s, i) {\n  if (!t)\n    return [];\n  const a = [];\n  return Io(t, a, n), qo(t, a, s, i), Ro(t, r, e, s), he(t) && a.push(Do(t)), me(t) && a.push(Uo(t)), sn(t) && a.push(Bo(t)), Vs(t) && a.push(Ho(t)), Lo(t, a, i), a;\n}\nfunction Io(t, r, e) {\n  if (!t.isInline()) {\n    const n = e.pop();\n    Te(n) ? r.push(Oo(n)) : oe(n) ? r.push(Fo(n)) : we(n) && r.push({ insert: Tt });\n  }\n  ye(t) && (e.includes(t) || e.push(t));\n}\nfunction qo(t, r, e, n) {\n  var a;\n  if (!q(t))\n    return;\n  const s = t.getParent();\n  if (I(s) && s.getFirstChild() === t)\n    return;\n  const i = Tn(t, e);\n  if (n.children.includes(t)) {\n    const o = t.getTextContent();\n    if (!o || o === B || o.startsWith(Rn))\n      return;\n    (a = n.contentsOps) == null || a.push(i);\n  } else\n    r.push(i);\n}\nfunction Ro(t, r, e, n) {\n  H(t) && !n.includes(t) && n.push(t);\n  const s = e[r + 1];\n  for (const i of n.toReversed())\n    St(i, s) && n.pop();\n}\nfunction Lo(t, r, e) {\n  var s, i;\n  if (!I(t))\n    return;\n  At(t).forEach((a) => e.children.push(a.node));\n  const n = Vo(t);\n  e.contentsOps = (i = (s = n.insert.note) == null ? void 0 : s.contents) == null ? void 0 : i.ops, r.push(n);\n}\nfunction Oo(t) {\n  const r = { style: _t, code: t.__code };\n  return { insert: Tt, attributes: { book: r } };\n}\nfunction Do(t) {\n  const r = { style: zt, number: t.__number };\n  return t.__sid && (r.sid = t.__sid), t.__altnumber && (r.altnumber = t.__altnumber), t.__pubnumber && (r.pubnumber = t.__pubnumber), { insert: { chapter: r } };\n}\nfunction Fo(t) {\n  const r = { style: t.__marker };\n  return { insert: Tt, attributes: { para: r } };\n}\nfunction Uo(t) {\n  const r = { style: Gt, number: t.__number };\n  return t.__sid && (r.sid = t.__sid), t.__altnumber && (r.altnumber = t.__altnumber), t.__pubnumber && (r.pubnumber = t.__pubnumber), { insert: { verse: r } };\n}\nfunction Bo(t) {\n  const r = { style: t.__marker };\n  return t.__sid && (r.sid = t.__sid), t.__eid && (r.eid = t.__eid), { insert: { milestone: r } };\n}\nfunction Ho(t) {\n  return { insert: { unmatched: { marker: t.__marker } } };\n}\nfunction Vo(t) {\n  const r = {\n    style: t.__marker,\n    caller: t.__caller\n  };\n  t.__category && (r.category = t.__category), t.getChildrenSize() > 1 && (r.contents = { ops: [] });\n  const e = { insert: { note: r } }, n = bt(t, Je);\n  return n && (e.attributes = { segment: n }), e;\n}\nconst Zs = 1;\nclass _e extends lt {\n  constructor(e = Ct, n = \"\", s, i) {\n    super(i);\n    S(this, \"__caller\");\n    S(this, \"__previewText\");\n    S(this, \"__onClick\");\n    this.__caller = e, this.__previewText = n, this.__onClick = s ?? (() => {\n    });\n  }\n  static getType() {\n    return \"immutable-note-caller\";\n  }\n  static clone(e) {\n    const { __caller: n, __previewText: s, __onClick: i, __key: a } = e;\n    return new _e(n, s, i, a);\n  }\n  static importDOM() {\n    return {\n      span: (e) => Ko(e) ? {\n        conversion: jo,\n        priority: 1\n      } : null\n    };\n  }\n  static importJSON(e) {\n    return er().updateFromJSON(e);\n  }\n  updateFromJSON(e) {\n    return super.updateFromJSON(e).setCaller(e.caller).setPreviewText(e.previewText).setOnClick(e.onClick);\n  }\n  setCaller(e) {\n    if (this.__caller === e)\n      return this;\n    const n = this.getWritable();\n    return n.__caller = e, n;\n  }\n  getCaller() {\n    return this.getLatest().__caller;\n  }\n  setPreviewText(e) {\n    if (this.__previewText === e)\n      return this;\n    const n = this.getWritable();\n    return n.__previewText = e, n;\n  }\n  getPreviewText() {\n    return this.getLatest().__previewText;\n  }\n  setOnClick(e) {\n    if (this.__onClick === e)\n      return this;\n    const n = this.getWritable();\n    return n.__onClick = e, n;\n  }\n  getOnClick() {\n    return this.getLatest().__onClick;\n  }\n  createDOM() {\n    const e = document.createElement(\"span\");\n    return e.classList.add(this.__type), e.setAttribute(\"data-caller\", this.__caller), e.setAttribute(\"data-preview-text\", this.__previewText), e;\n  }\n  updateDOM(e) {\n    return e.__caller !== this.__caller;\n  }\n  exportDOM(e) {\n    const { element: n } = super.exportDOM(e);\n    return n && Oe(n) && (n.classList.add(this.getType()), n.setAttribute(\"data-caller\", this.getCaller()), n.setAttribute(\"data-preview-text\", this.getPreviewText())), { element: n };\n  }\n  decorate(e) {\n    const n = this.getParent();\n    if (!n)\n      return null;\n    const s = n.getKey(), i = n.getIsCollapsed(), a = this.__key, o = (l) => {\n      var d;\n      return (d = this.__onClick) == null ? void 0 : d.call(this, l, s, i, () => Jo(e, s), (u) => Wo(e, s, a, u), () => zo(e, s));\n    }, c = `${this.__caller}_${this.__previewText}}`.replace(/\\s+/g, \"\").substring(0, 25);\n    return g(\"button\", { onClick: o, title: this.__previewText, \"data-caller-id\": c, children: this.__caller === Ct && i ? (\n      // Caller is generated by CSS\n      \"\"\n    ) : this.__caller });\n  }\n  exportJSON() {\n    return {\n      type: this.getType(),\n      caller: this.getCaller(),\n      previewText: this.getPreviewText(),\n      onClick: this.getOnClick(),\n      version: Zs\n    };\n  }\n  // Mutation\n  isKeyboardSelectable() {\n    return !1;\n  }\n}\nfunction jo(t) {\n  const r = t.getAttribute(\"data-caller\") ?? \"\", e = t.getAttribute(\"data-preview-text\") ?? \"\";\n  return { node: er(r, e) };\n}\nfunction er(t, r, e) {\n  return ae(new _e(t, r, e));\n}\nfunction Ko(t) {\n  return t ? t.classList.contains(_e.getType()) : !1;\n}\nfunction Ue(t) {\n  return t instanceof _e;\n}\nfunction Jo(t, r) {\n  return t.read(() => {\n    const e = K(r);\n    if (!I(e))\n      throw new Error(`getNoteCaller: Note node not found: ${r}`);\n    return e.getCaller();\n  });\n}\nfunction Wo(t, r, e, n) {\n  t.update(() => {\n    const s = K(r);\n    if (!I(s))\n      throw new Error(`setNoteCaller: Note node not found: ${r}`);\n    s.setCaller(n);\n    const i = K(e);\n    if (!Ue(i))\n      throw new Error(`setNoteCaller: Caller node not found: ${e}`);\n    i.setCaller(n);\n  });\n}\nfunction zo(t, r) {\n  return t.read(() => {\n    const e = K(r);\n    if (!I(e))\n      throw new Error(`getNoteOps: Note node not found: ${r}`);\n    return Zn(e);\n  });\n}\nconst Go = [\n  \"a\",\n  \"b\",\n  \"c\",\n  \"d\",\n  \"e\",\n  \"f\",\n  \"g\",\n  \"h\",\n  \"i\",\n  \"j\",\n  \"k\",\n  \"l\",\n  \"m\",\n  \"n\",\n  \"o\",\n  \"p\",\n  \"q\",\n  \"r\",\n  \"s\",\n  \"t\",\n  \"u\",\n  \"v\",\n  \"w\",\n  \"x\",\n  \"y\",\n  \"z\"\n], Yo = [\n  _e,\n  de,\n  ...io\n], Xo = Qe((t, r) => {\n  const { coords: e, children: n, style: s, ...i } = t, a = e !== void 0;\n  return g(\"div\", { ref: r, className: \"floating-box\", \"aria-hidden\": !a, style: {\n    ...s,\n    position: \"absolute\",\n    zIndex: 1e3,\n    top: e == null ? void 0 : e.y,\n    left: e == null ? void 0 : e.x,\n    visibility: a ? \"visible\" : \"hidden\",\n    opacity: a ? 1 : 0\n  }, ...i, children: n });\n});\nfunction Qo() {\n  const [t, r] = D(void 0), [e, n] = D(), s = O(null), i = j((o, c) => {\n    s.current && s.current();\n    const l = o.commonAncestorContainer.nodeType === o.commonAncestorContainer.TEXT_NODE ? o : o.commonAncestorContainer;\n    s.current = Gi(l, c, () => {\n      Yi(l, c, {\n        placement: \"bottom-start\",\n        middleware: [Xi(), Qi()]\n      }).then((d) => {\n        n(d.placement), r((u) => (u == null ? void 0 : u.x) === d.x && (u == null ? void 0 : u.y) === d.y ? u : { x: d.x, y: d.y });\n      }).catch(() => {\n        r(void 0);\n      });\n    });\n  }, []), a = j(() => {\n    s.current && (r(void 0), s.current(), s.current = null);\n  }, []);\n  return A(() => a, [a]), { coords: t, placement: e, updatePosition: i, cleanup: a };\n}\nfunction Zo({ isOpen: t, floatingBoxRef: r }) {\n  const { coords: e, updatePosition: n, cleanup: s, placement: i } = Qo();\n  return A(() => {\n    var o;\n    if (!t || !r.current) {\n      s();\n      return;\n    }\n    const a = (o = window.getSelection()) == null ? void 0 : o.getRangeAt(0);\n    if (!a) {\n      s();\n      return;\n    }\n    return n(a, r.current), s;\n  }, [s, t, r, n]), { coords: e, placement: i };\n}\nconst ec = document.body, tc = Ci(Xo);\nfunction nc({ isOpen: t = !1, children: r }) {\n  const e = O(null), { coords: n, placement: s } = Zo({ isOpen: t, floatingBoxRef: e }), i = ce(() => n ? typeof r == \"function\" ? r : () => r : () => null, [r, n]);\n  return Ve(g(tc, { ref: e, coords: n, style: n ? void 0 : { display: \"none\" }, children: i({ isOpen: t, placement: s }) }), ec);\n}\nconst ei = Qr(void 0);\nfunction tr() {\n  const t = Zr(ei);\n  if (!t)\n    throw new Error(\"useMenuContext must be used within a MenuProvider\");\n  return t;\n}\nfunction rc(t, r) {\n  const [e, n] = D(0), [s, i] = D(-1), a = ce(() => t ?? [], [t]), o = {\n    menuItems: a,\n    activeIndex: e,\n    selectedIndex: s,\n    onSelectOption: r ?? (() => {\n    })\n  }, c = j(() => {\n    n((u) => {\n      const h = a.length;\n      return h ? (u - 1 + h) % h : 0;\n    });\n  }, [a.length]), l = j(() => {\n    n((u) => {\n      const h = a.length;\n      return h ? (u + 1) % h : 0;\n    });\n  }, [a.length]), d = j(() => {\n    const u = a.length;\n    if (e >= 0 && e < u) {\n      const h = a[e];\n      r == null || r(h), i(e);\n    }\n  }, [e, a, r]);\n  return {\n    state: o,\n    moveUp: c,\n    moveDown: l,\n    select: d,\n    setActiveIndex: n,\n    setSelectedIndex: i\n  };\n}\nfunction sc({ children: t, menuItems: r, onSelectOption: e, ...n }) {\n  const s = rc(r, e);\n  return g(ei.Provider, { value: s, children: g(\"div\", { ...n, children: t }) });\n}\nconst ti = Qe(({ index: t, children: r, onMouseEnter: e, onClick: n, ...s }, i) => {\n  const { state: { activeIndex: a }, setActiveIndex: o, setSelectedIndex: c, select: l } = tr(), d = j((h) => {\n    l(), c(-1), n == null || n(h);\n  }, [n, l, c]), u = j((h) => {\n    o(t), e == null || e(h);\n  }, [t, o, e]);\n  return g(\"button\", { ref: i, role: \"menuitem\", ...s, onClick: d, onMouseEnter: u, \"aria-selected\": t !== void 0 && a === t ? \"true\" : void 0, tabIndex: -1, children: r });\n});\nfunction ic({ children: t, autoIndex: r = !0, ...e }) {\n  const n = O(null), { state: { activeIndex: s, menuItems: i } } = tr(), a = ce(() => i ? typeof t == \"function\" ? t : () => t : () => null, [t, i]), o = ce(() => {\n    const c = a(i);\n    return r ? xi.map(c, (l, d) => Mi(l) && l.type === ti && l.props.index === void 0 ? Ti(l, { index: d }) : l) : c;\n  }, [a, r, i]);\n  return A(() => {\n    if (n.current) {\n      const c = n.current, l = c.children[s];\n      if (l) {\n        const d = c.getBoundingClientRect(), u = l.getBoundingClientRect();\n        u.bottom > d.bottom ? c.scrollTop += u.bottom - d.bottom : u.top < d.top && (c.scrollTop -= d.top - u.top);\n      }\n    }\n  }, [s]), g(\"div\", { ref: n, role: \"menu\", ...e, children: o });\n}\nconst dn = {\n  Root: sc,\n  Options: ic,\n  Option: ti\n}, ac = (t, r, e) => Bt(t, e).toLowerCase().includes(r.toLowerCase()), Er = (t) => Object.keys(t).find((r) => typeof t[r] == \"string\") || \"\", Bt = (t, r) => {\n  const e = t[r];\n  return typeof e == \"string\" ? e : String(e);\n};\nfunction oc(t) {\n  const { query: r, items: e, filterBy: n, filter: s, sortBy: i, sortingOptions: a } = t, { caseSensitive: o = !1, priorityOrder: c = [\"exact\", \"startsWith\", \"contains\"] } = a || {}, l = o ? r : r.toLowerCase();\n  let d, u;\n  s ? (u = s, d = e.length > 0 ? Er(e[0]) : \"\") : (d = n || (e.length > 0 ? Er(e[0]) : \"\"), u = (m, b) => ac(m, b, d));\n  const h = i || d, y = /* @__PURE__ */ new Map();\n  return e.filter((m) => {\n    try {\n      return u(m, r);\n    } catch (b) {\n      return console.warn(\"Error filtering item:\", m, b), !1;\n    }\n  }).sort((m, b) => {\n    const C = (_) => (y.has(_) || y.set(_, Bt(_, h).toLowerCase()), y.get(_) ?? \"\"), x = o ? Bt(m, h) : C(m), k = o ? Bt(b, h) : C(b);\n    for (const _ of c)\n      switch (_) {\n        case \"exact\":\n          if (x === l && k !== l)\n            return -1;\n          if (k === l && x !== l)\n            return 1;\n          break;\n        case \"startsWith\":\n          if (x.startsWith(l) && !k.startsWith(l))\n            return -1;\n          if (k.startsWith(l) && !x.startsWith(l))\n            return 1;\n          break;\n        case \"contains\": {\n          const E = x.indexOf(l), L = k.indexOf(l);\n          if (E !== -1 && L === -1)\n            return -1;\n          if (L !== -1 && E === -1)\n            return 1;\n          if (E !== -1 && L !== -1)\n            return E - L;\n          break;\n        }\n      }\n    return x.localeCompare(k);\n  });\n}\nfunction cc(t) {\n  const { query: r, items: e, filterBy: n, filter: s, sortBy: i, sortingOptions: a } = t;\n  return ce(() => oc({\n    query: r,\n    items: e,\n    filterBy: n,\n    filter: s,\n    sortBy: i,\n    sortingOptions: a\n  }), [r, e, n, s, i, a]);\n}\nfunction lc() {\n  const { moveUp: t, moveDown: r, select: e } = tr();\n  return ce(() => ({\n    moveUp: t,\n    moveDown: r,\n    select: e\n  }), [t, r, e]);\n}\nconst dc = () => {\n  const t = lc(), [r] = V();\n  A(() => {\n    const e = (n) => {\n      const i = {\n        ArrowDown: () => t == null ? void 0 : t.moveDown(),\n        ArrowUp: () => t == null ? void 0 : t.moveUp(),\n        Enter: () => t == null ? void 0 : t.select(),\n        Tab: () => t == null ? void 0 : t.select()\n      }[n.key];\n      return i ? (i(), n.preventDefault(), n.stopPropagation(), !0) : !1;\n    };\n    return r.registerCommand(Et, e, nn);\n  }, [r, t]);\n};\nfunction uc() {\n  return dc(), null;\n}\nfunction fc(t) {\n  const { options: r, onSelectOption: e, onClose: n, inverse: s, query: i, menuOpenKey: a } = t, [o] = V(), c = i !== void 0, [l, d] = D(\"\"), u = c ? i ?? \"\" : l, h = cc({ query: u, items: r, filterBy: \"name\" }), y = (m) => {\n    n == null || n(), e ? e(m) : m.action(o);\n  };\n  return A(() => o.registerCommand(Et, (m) => {\n    if (c)\n      return !1;\n    const C = {\n      Escape: () => n == null ? void 0 : n(),\n      Backspace: () => {\n        u.length === 0 ? n == null || n() : d((x) => x.slice(0, -1));\n      }\n    }[m.key];\n    return C ? (m.stopPropagation(), m.preventDefault(), C(), !0) : m.key.length === 1 ? (m.stopPropagation(), m.preventDefault(), m.key !== a && d((x) => x + m.key), !0) : !1;\n  }, nn), [o, c, u, a, n]), U(dn.Root, { className: `autocomplete-menu-container ${s ? \"inverse\" : \"\"}`, menuItems: h, onSelectOption: (m) => y(m), children: [!c && g(\"input\", { value: u, type: \"text\", disabled: !0 }), g(uc, {}), g(dn.Options, { className: \"autocomplete-menu-options\", autoIndex: !1, children: (m) => m.map((C, x) => U(dn.Option, { index: x, children: [g(\"span\", { className: \"label\", children: C.label ?? C.name }), g(\"span\", { className: \"description\", children: C.description })] }, C.name)) })] });\n}\nfunction pc({ trigger: t, items: r }) {\n  const [e] = V(), [n, s] = D(!1), i = j((a) => {\n    a.key === \"Escape\" && n ? (s(!1), e.focus()) : a.key === t && !n && (a.preventDefault(), s(!0));\n  }, [e, t, n]);\n  return A(() => e.registerRootListener((a) => {\n    if (a)\n      return a.addEventListener(\"keydown\", i), () => {\n        a.removeEventListener(\"keydown\", i);\n      };\n  }), [e, i]), A(() => e.registerUpdateListener(({ prevEditorState: a, editorState: o }) => {\n    const c = a.read(() => {\n      const l = ie();\n      if (Z(l))\n        return l;\n    });\n    o.read(() => {\n      const l = ie();\n      !Z(l) || c != null && c.is(l) || s(!1);\n    });\n  }), [e]), r && g(nc, { isOpen: n, children: ({ placement: a }) => g(fc, { options: r, onClose: () => s(!1), inverse: a === \"top-start\", menuOpenKey: t }) });\n}\nfunction hc({ scriptureReference: t, contextMarker: r, getMarkerAction: e }) {\n  return { markersMenuItems: ce(() => {\n    if (!r || !t)\n      return;\n    const s = gr(r);\n    if (s != null && s.children)\n      return Object.values(s.children).flatMap((i) => i.map((a) => {\n        const o = gr(a), { action: c } = e(a, o);\n        return {\n          name: a,\n          label: a,\n          description: (o == null ? void 0 : o.description) ?? \"\",\n          action: (l) => {\n            c({ editor: l, reference: t });\n          }\n        };\n      }));\n  }, [r, e, t]) };\n}\nfunction Ht(t, r) {\n  return `${t}:${r}`;\n}\nfunction mc(t, r) {\n  A(() => {\n    if (!t.hasNodes([re]))\n      throw new Error(\"AnnotationPlugin: TypedMarkNode not registered on editor!\");\n    const e = /* @__PURE__ */ new Map();\n    return Ze(os(t, re, (n) => Mt(n.getTypedIDs()), (n, s) => {\n      for (const [i, a] of Object.entries(n.getTypedIDs()))\n        a.forEach((o) => {\n          s.addID(i, o);\n        });\n    }), t.registerMutationListener(re, (n) => {\n      t.getEditorState().read(() => {\n        for (const [s, i] of n) {\n          const a = K(s);\n          let o = {};\n          i === \"destroyed\" ? o = e.get(s) ?? {} : se(a) && (o = a.getTypedIDs());\n          for (const [c, l] of Object.entries(o))\n            if (!re.isReservedType(c))\n              for (const d of l) {\n                let u = r.get(Ht(c, d));\n                o[c] = l, e.set(s, o), i === \"destroyed\" ? u !== void 0 && (u.delete(s), u.size === 0 && r.delete(Ht(c, d))) : (u === void 0 && (u = /* @__PURE__ */ new Set(), r.set(Ht(c, d), u)), u.has(s) || u.add(s));\n              }\n        }\n      });\n    }, { skipInitialization: !0 }));\n  }, [t, r]);\n}\nconst gc = Qe(function({ logger: r }, e) {\n  const [n] = V(), s = ce(() => /* @__PURE__ */ new Map(), []);\n  return mc(n, s), Pn(e, () => ({\n    addAnnotation(i, a, o) {\n      if (re.isReservedType(a))\n        throw new Error(`addAnnotation: Can't directly add this reserved annotation type '${a}'. Use the appropriate plugin instead.`);\n      n.update(() => {\n        const c = Gn(i);\n        if (c === void 0) {\n          r == null || r.error(\"Failed to find start or end node of the annotation.\");\n          return;\n        }\n        Us(c, a, o);\n      }, { tag: _n });\n    },\n    removeAnnotation(i, a) {\n      if (re.isReservedType(i))\n        throw new Error(`removeAnnotation: Can't directly remove this reserved annotation type '${i}'. Use the appropriate plugin instead.`);\n      const o = s.get(Ht(i, a));\n      o !== void 0 && setTimeout(() => {\n        n.update(() => {\n          for (const c of o) {\n            const l = K(c);\n            se(l) && (l.deleteID(i, a), l.hasNoIDsForEveryType() && Fs(l));\n          }\n        }, { tag: _n });\n      });\n    }\n  })), null;\n});\nfunction yc({ ignoreHistoryMergeTagChange: t = !0, ignoreSelectionChange: r = !1, onChange: e }) {\n  const [n] = V();\n  return tn(() => {\n    if (e)\n      return n.registerUpdateListener((s) => {\n        const { editorState: i, dirtyElements: a, dirtyLeaves: o, prevEditorState: c, tags: l } = s;\n        if (r && a.size === 0 && o.size === 0 || t && l.has(vi) || c.isEmpty())\n          return;\n        const d = bc(n, s);\n        d.length !== 0 && e(i, n, l, d);\n      });\n  }, [n, t, r, e]), null;\n}\nfunction bc(t, { dirtyLeaves: r, prevEditorState: e }) {\n  let n = new ht();\n  return t.getEditorState().read(() => {\n    const s = r.values().next().value ?? \"\";\n    if (r.size === 1 && q(K(s))) {\n      const i = K(s), a = Xs(i);\n      if (q(i) && a !== void 0) {\n        const o = e.read(() => {\n          const d = K(s);\n          return new ht([q(d) ? Tn(d) : { insert: \"\" }]);\n        }), c = new ht([Tn(i)]), l = new ht(a > 0 ? [{ retain: a }] : []);\n        n = n.concat(l).concat(o.diff(c));\n      }\n    } else {\n      const i = Tr(e), a = Tr(t.getEditorState());\n      n = i.diff(a);\n    }\n  }), n.ops;\n}\nfunction kc(t, r, e, n) {\n  let s = 0;\n  t.forEach((i) => {\n    if (\"retain\" in i)\n      s += _c(i, s, r, n);\n    else if (\"delete\" in i) {\n      if (typeof i.delete != \"number\" || i.delete <= 0) {\n        n == null || n.error(`Invalid delete operation: ${JSON.stringify(i)}`);\n        return;\n      }\n      n == null || n.debug(`Delete: ${i.delete}`), xc(s, i.delete, n);\n    } else \"insert\" in i ? typeof i.insert == \"string\" ? (n == null || n.debug(`Insert: '${i.insert}'`), s += Mc(s, i.insert, i.attributes, r, n)) : typeof i.insert == \"object\" && i.insert !== null ? (n == null || n.debug(`Insert embed: ${JSON.stringify(i.insert)}`), Sc(s, i, r, e, n) ? s += 1 : n == null || n.error(`Failed to process insert embed operation: ${JSON.stringify(i.insert)} at index ${s}. Document may be inconsistent.`)) : n == null || n.error(`Insert of unknown type: ${JSON.stringify(i.insert)}`) : n == null || n.error(`Unknown operation: ${JSON.stringify(i)}`);\n  });\n}\nfunction _c(t, r, e, n) {\n  return typeof t.retain != \"number\" || t.retain < 0 ? (n == null || n.error(`Invalid retain operation: ${JSON.stringify(t)}`), 0) : (n == null || n.debug(`Retain: ${t.retain}`), t.attributes && (n == null || n.debug(`Retain attributes: ${JSON.stringify(t.attributes)}`), Cc(r, t.retain, t.attributes, e, n)), t.retain);\n}\nfunction Cc(t, r, e, n, s) {\n  s == null || s.debug(`Applying attributes for range [${t}, ${t + r - 1}] with attributes: ${JSON.stringify(e)}`);\n  let i = r, a = 0, o = -1;\n  const c = Pe();\n  function l(d) {\n    if (i <= 0)\n      return !0;\n    if (q(d)) {\n      const u = d.getTextContentSize();\n      if (t < a + u && a < t + r) {\n        const h = Math.max(0, t - a), y = u - h, m = Math.min(i, y);\n        if (m > 0) {\n          let b = d;\n          const C = h > 0, x = m < u - h;\n          if (C && x) {\n            const [, k] = d.splitText(h);\n            [b] = k.splitText(m);\n          } else C ? [, b] = d.splitText(h) : x && ([b] = d.splitText(m));\n          if (Ge(e)) {\n            const k = b.getParent();\n            if (H(k)) {\n              const _ = e.char;\n              let E;\n              Array.isArray(_) ? o >= 0 && o <= _.length - 1 && (E = _[o]) : o === 0 && (E = _);\n              const L = E ? ze(E, k) : !1;\n              if (L && Array.isArray(_) && _.length > 1) {\n                const G = J(\"\");\n                b.replace(G);\n                const ne = typeof e.segment == \"string\" ? e.segment : void 0, P = It(_.slice(1), n, b, ne);\n                let v = G;\n                for (const R of P)\n                  v.insertAfter(R), v = R;\n                G.remove(), pe(e, b);\n              } else if (L)\n                pe(e, b);\n              else {\n                b.remove();\n                const G = Nr(b, e, n, s);\n                if (G && G.length > 0) {\n                  let ne = k;\n                  for (const P of G)\n                    ne.insertAfter(P), ne = P;\n                }\n              }\n            } else {\n              const _ = J(\"\");\n              b.replace(_);\n              const E = Nr(b, e, n, s);\n              if (E && E.length > 0) {\n                let L = _;\n                for (const G of E)\n                  L.insertAfter(G), L = G;\n                _.remove();\n              } else\n                _.replace(b);\n            }\n          } else\n            pe(e, b);\n          i -= m;\n        }\n      }\n      a += u;\n    } else if (Ce(d))\n      t <= a && a < t + r && i > 0 && (Ar(d, e), i -= 1), a += 1;\n    else if (H(d)) {\n      o += 1;\n      let u = !1;\n      if (t <= a && a < t + r && i > 0)\n        if (Ge(e)) {\n          const h = e.char;\n          let y;\n          if (Array.isArray(h) ? o >= 0 && o <= h.length - 1 && (y = h[o]) : o === 0 && (y = h), y) {\n            d.setMarker(y.style), typeof y.cid == \"string\" && Ne(d, Ke, () => y.cid);\n            const m = te(y, Qt);\n            m && Object.keys(m).length > 0 ? d.setUnknownAttributes({\n              ...d.getUnknownAttributes() ?? {},\n              ...m\n            }) : d.setUnknownAttributes(void 0);\n          }\n        } else (e.char === !1 || e.char === null || Ic(e.char)) && (u = !0);\n      if (i > 0) {\n        const h = d.getChildren();\n        for (const y of h) {\n          if (i <= 0)\n            break;\n          if (l(y) && i <= 0)\n            return u && ur(d), !0;\n        }\n      }\n      u && ur(d), o -= 1;\n    } else if (ye(d)) {\n      const u = d.getChildren();\n      for (const y of u) {\n        if (i <= 0)\n          break;\n        if (l(y) && i <= 0)\n          return !0;\n      }\n      const h = 1;\n      if (t <= a && a < t + i && i > 0) {\n        if (!we(d))\n          Ar(d, e);\n        else if (nr(e)) {\n          const y = ri(e.para);\n          y && d.replace(y, !0);\n        }\n        i -= h;\n      }\n      a += h;\n    } else if (z(d)) {\n      const u = d.getChildren();\n      for (const h of u) {\n        if (i <= 0)\n          break;\n        if (l(h) && i <= 0)\n          return !0;\n      }\n    }\n    return i <= 0;\n  }\n  l(c), i > 0 && (s == null || s.warn(`$applyAttributes: Not all characters in the retain operation (length ${r}) could be processed. Remaining: ${i}. targetIndex: ${t}, final currentIndex: ${a}`));\n}\nfunction Nr(t, r, e, n) {\n  var d;\n  const s = typeof r.segment == \"string\" ? r.segment : void 0, i = It(r.char, e, t, s), a = i.find(H);\n  if (!a) {\n    n == null || n.error(`Failed to create CharNode for text transformation. Style: ${Array.isArray(r.char) ? r.char[0].style : (d = r.char) == null ? void 0 : d.style}. Falling back to standard text attributes.`), pe(r, t);\n    return;\n  }\n  const o = {};\n  si.forEach((u) => {\n    t.hasFormat(u) && (o[u] = \"true\");\n  });\n  const c = {};\n  Object.entries(r).forEach(([u, h]) => {\n    u === \"segment\" || u === \"char\" || (typeof h == \"string\" ? c[u] = h : h === !0 ? c[u] = \"true\" : h === !1 && (c[u] = \"false\"));\n  });\n  const l = {\n    ...a.getUnknownAttributes() ?? {},\n    ...o,\n    ...c\n  };\n  return Object.keys(l).length > 0 && a.setUnknownAttributes(l), pe(r, t), i;\n}\nfunction Ar(t, r) {\n  for (const e of Object.keys(r)) {\n    const n = r[e];\n    if (e === \"char\" && H(t) && Ge(r)) {\n      const s = n;\n      if (t.setMarker(s.style), typeof s.cid == \"string\") {\n        const a = s.cid;\n        Ne(t, Ke, () => a);\n      }\n      const i = te(s, Qt);\n      i && Object.keys(i).length > 0 && t.setUnknownAttributes({\n        ...t.getUnknownAttributes() ?? {},\n        ...i\n      });\n      continue;\n    }\n    typeof n == \"string\" && (he(t) || me(t) || sn(t) || I(t) || wt(t) ? t.setUnknownAttributes({\n      ...t.getUnknownAttributes() ?? {},\n      [e]: n\n    }) : (Te(t) || oe(t) || H(t)) && (e === \"style\" && !Te(t) ? t.setMarker(n) : e === \"code\" && Te(t) ? t.setCode(n) : t.setUnknownAttributes({\n      ...t.getUnknownAttributes() ?? {},\n      [e]: n\n    })), e === \"segment\" && Ne(t, Je, () => n));\n  }\n}\nfunction xc(t, r, e) {\n  if (r <= 0)\n    return;\n  const n = Pe();\n  let s = 0, i = r;\n  function a(o) {\n    if (i <= 0)\n      return !0;\n    if (q(o)) {\n      let c = o.getTextContentSize();\n      if (t < s + c && s < t + i) {\n        const l = Math.max(0, t - s), d = c - l, u = Math.min(i, d);\n        u > 0 && (o.spliceText(l, u, \"\"), o.getTextContentSize() === 0 && o.remove(), e == null || e.debug(`Deleted ${u} length from TextNode (key: ${o.getKey()}) at nodeOffset ${l}. Original targetIndex: ${t}, current currentIndex: ${s}.`), i -= u, c -= u);\n      }\n      s += c;\n    } else if (Ce(o))\n      t <= s && s < t + i ? (o.remove(), e == null || e.debug(`Deleted embed node (key: ${o.getKey()}) at currentIndex: ${s}. Original targetIndex: ${t}, remainingToDelete: ${i}.`), i -= 1) : s += 1;\n    else if (ye(o)) {\n      const c = o.getChildren().slice(), l = o.getChildren();\n      for (const d of l) {\n        if (i <= 0)\n          break;\n        if (a(d) && i <= 0)\n          return !0;\n      }\n      if (t <= s && s < t + i && ye(o)) {\n        i -= 1;\n        const d = o.getChildren().length;\n        if (c.length > 0 && d === 0) {\n          const y = o.getParent();\n          ((y == null ? void 0 : y.getChildren()) ?? []).length > 1 ? (o.remove(), e == null || e.debug(`Removed entire ParaNode that had all its content deleted at currentIndex: ${s}. Original targetIndex: ${t}, remainingToDelete: ${i}.`)) : (o.replace(ke(), !0), e == null || e.debug(`Replaced last ParaNode with ImpliedParaNode at currentIndex: ${s}. Original targetIndex: ${t}, remainingToDelete: ${i}.`));\n        } else if (i > 0) {\n          const y = o.getNextSibling();\n          if (y && be(y)) {\n            let m = s + 1;\n            const b = y.getChildren();\n            for (const x of b) {\n              if (i <= 0)\n                break;\n              const k = s;\n              if (s = m, a(x)) {\n                s = k;\n                break;\n              }\n              q(x) ? m += x.getTextContentSize() : Ce(x) && (m += 1), s = k;\n            }\n            const C = y.getChildren();\n            for (const x of C)\n              x.remove(), o.append(x);\n            y.remove(), e == null || e.debug(`Merged next paragraph into current one after deleting symbolic close at currentIndex: ${s}. Original targetIndex: ${t}, remainingToDelete: ${i}.`);\n          } else\n            o.replace(ke(), !0);\n        } else oe(o) ? o.replace(ke(), !0) : o.remove();\n      }\n      s += 1;\n    } else if (z(o)) {\n      const c = o.getChildren();\n      for (const l of c) {\n        if (i <= 0)\n          break;\n        if (a(l) && i <= 0)\n          return !0;\n      }\n    }\n    return i <= 0;\n  }\n  a(n), i > 0 && (e == null || e.warn(`Delete operation could not remove all requested characters. Remaining to delete: ${i}. Original targetIndex: ${t}, OT length: ${r}. Final currentIndex: ${s}`));\n}\nfunction Mc(t, r, e, n, s) {\n  if (r === Tt)\n    return wr(t, e, s);\n  if (r.endsWith(Tt) && !nr(e)) {\n    const i = r.slice(0, -1);\n    let a = 0;\n    if (i.length > 0) {\n      if (Ge(e))\n        throw new Error(\"Text + LF should not have char attributes\");\n      a += Zt(t, i, e, s);\n    }\n    return a += wr(t + a, e, s), a;\n  } else return Ge(e) ? Tc(t, r, e, n, s) : Zt(t, r, e, s);\n}\nfunction Tc(t, r, e, n, s) {\n  s == null || s.debug(`Attempting to insert CharNode with text \"${r}\" and attributes ${JSON.stringify(e.char)} at index ${t}`);\n  const i = J(r);\n  pe(e, i);\n  let a;\n  {\n    let C = function(x) {\n      if (q(x)) {\n        const k = x.getTextContentSize();\n        if (t >= b && t < b + k) {\n          const _ = x.getParent();\n          return H(_) && (a = _), !0;\n        }\n        b += k;\n      } else if (Ce(x))\n        b += 1;\n      else if (H(x)) {\n        const k = x.getChildren();\n        for (const _ of k)\n          if (C(_))\n            return !0;\n      } else if (z(x)) {\n        const k = x.getChildren();\n        for (const _ of k)\n          if (C(_))\n            return !0;\n        ye(x) && (b += 1);\n      }\n      return !1;\n    };\n    const m = Pe();\n    let b = 0;\n    C(m);\n  }\n  let o = e.char;\n  if (Array.isArray(o)) {\n    if (a) {\n      const m = o[0];\n      m && ze(m, a) ? (o = o.slice(1), o.length === 1 && (o = o[0])) : a = void 0;\n    }\n  } else a && (ze(o, a) || (a = void 0));\n  const c = typeof e.segment == \"string\" ? e.segment : void 0, d = It(o, n, i, c, a ? [a] : void 0);\n  if (d.length === 0)\n    return r.length;\n  const u = d.find(H);\n  if (!u)\n    return s == null || s.error(`CharNode style is missing for text \"${r}\". Attributes: ${JSON.stringify(e.char)}. Falling back to rich text insertion.`), Zt(t, r, void 0, s);\n  const h = {};\n  for (const [m, b] of Object.entries(e))\n    m !== \"char\" && m !== \"segment\" && typeof b == \"string\" && (h[m] = b);\n  Object.keys(h).length > 0 && u.setUnknownAttributes(h);\n  let y = !0;\n  for (const m of d)\n    if (!ni(t, m, s)) {\n      y = !1;\n      break;\n    }\n  return y ? r.length : (s == null || s.error(`Failed to insert CharNode with text \"${r}\" at index ${t}. Falling back to rich text.`), Zt(t, r, void 0, s));\n}\nfunction Zt(t, r, e, n) {\n  if (r.length <= 0)\n    return n == null || n.debug(\"Attempted to insert empty string. No action taken.\"), 0;\n  const s = Pe();\n  let i = 0, a = !1;\n  function o(c) {\n    if (a)\n      return !0;\n    if (q(c)) {\n      const l = c.getTextContentSize();\n      if (t >= i && t <= i + l) {\n        const d = t - i, u = J(r);\n        if (pe(e, u), d === 0)\n          c.insertBefore(u);\n        else if (d === l) {\n          const h = c.getParent();\n          H(h) && !Ge(e) ? h.insertAfter(u) : c.insertAfter(u);\n        } else {\n          const [, h] = c.splitText(d);\n          h.insertBefore(u);\n        }\n        return n == null || n.debug(`Inserted text \"${r}\" in/around TextNode (key: ${c.getKey()}) at nodeOffset ${d}. Original targetIndex: ${t}, currentIndex at node start: ${i}.`), a = !0, !0;\n      }\n      i += l;\n    } else if (Ce(c))\n      i += 1;\n    else if (H(c)) {\n      if (!a && t === i) {\n        const u = J(r);\n        pe(e, u);\n        const h = c.getFirstChild();\n        return h ? h.insertBefore(u) : c.append(u), n == null || n.debug(`Inserted text \"${r}\" at beginning of CharNode ${c.getType()} (key: ${c.getKey()}).`), a = !0, !0;\n      }\n      const d = c.getChildren();\n      for (const u of d) {\n        if (o(u))\n          return !0;\n        if (a)\n          break;\n      }\n      if (!a && t === i) {\n        const u = J(r);\n        return pe(e, u), c.append(u), n == null || n.debug(`Appended text \"${r}\" to end of CharNode ${c.getType()} (key: ${c.getKey()}).`), a = !0, !0;\n      }\n    } else if (ye(c)) {\n      if (!a && t === i) {\n        const u = J(r);\n        pe(e, u);\n        const h = c.getFirstChild();\n        return h ? h.insertBefore(u) : c.append(u), n == null || n.debug(`Inserted text \"${r}\" at beginning of container ${c.getType()} (key: ${c.getKey()}).`), a = !0, !0;\n      }\n      const d = c.getChildren();\n      for (const u of d) {\n        if (o(u))\n          return !0;\n        if (a)\n          break;\n      }\n      if (!a && t === i) {\n        const u = J(r);\n        return pe(e, u), c.append(u), n == null || n.debug(`Appended text \"${r}\" to end of container ${c.getType()} (key: ${c.getKey()}).`), a = !0, !0;\n      }\n      i += 1;\n    } else if (z(c)) {\n      const l = c.getChildren();\n      for (const d of l) {\n        if (o(d))\n          return !0;\n        if (a)\n          break;\n      }\n    }\n    return a;\n  }\n  if (o(s), !a && t === i) {\n    n == null || n.debug(`Insertion point matches end of document (targetIndex: ${t}, final currentIndex: ${i}). Appending text to new ParaNode.`);\n    const c = J(r);\n    pe(e, c);\n    const l = ke().append(c);\n    s.append(l), a = !0;\n  }\n  return a ? r.length : (n == null || n.warn(`$insertRichText: Could not find insertion point for text \"${r}\" at targetIndex ${t}. Final currentIndex: ${i}. Text not inserted.`), 0);\n}\nfunction ni(t, r, e) {\n  const n = Pe();\n  let s = 0, i = !1;\n  function a(o) {\n    if (i)\n      return !0;\n    if (o === n && t === 0 && !n.getFirstChild())\n      return r.isInline() ? (e == null || e.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${r.getType()} into empty root, wrapped in ImpliedParaNode. targetIndex: ${t}`), n.append(ke().append(r))) : (e == null || e.debug(`$insertNodeAtCharacterOffset: Inserting block node ${r.getType()} directly into empty root. targetIndex: ${t}`), n.append(r)), i = !0, !0;\n    if (!z(o))\n      return !1;\n    const c = o.getChildren();\n    for (const l of c) {\n      if (t === s && !i) {\n        if (o === n && r.isInline())\n          if (be(l)) {\n            e == null || e.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${r.getType()} into existing ${l.getType()} at beginning. targetIndex: ${t}`);\n            const d = l.getFirstChild();\n            d ? d.insertBefore(r) : l.append(r);\n          } else\n            e == null || e.debug(`$insertNodeAtCharacterOffset: Inserting inline node ${r.getType()} into root before ${l.getType()}, wrapping in ImpliedParaNode. targetIndex: ${t}`), l.insertBefore(ke().append(r));\n        else\n          l.insertBefore(r), e == null || e.debug(`$insertNodeAtCharacterOffset: Inserted node ${r.getType()} (key: ${r.getKey()}) before child ${l.getType()} (key: ${l.getKey()}) in ${o.getType()} (key: ${o.getKey()}). targetIndex: ${t}, currentIndex: ${s}`);\n        return i = !0, !0;\n      }\n      if (q(l)) {\n        const d = l.getTextContentSize();\n        if (!i && t > s && t < s + d) {\n          const u = t - s, [h] = l.splitText(u);\n          return h.insertAfter(r), e == null || e.debug(`$insertNodeAtCharacterOffset: Inserted node ${r.getType()} (key: ${r.getKey()}) by splitting TextNode (key: ${l.getKey()}) at offset ${u}. targetIndex: ${t}, currentIndex at node start: ${s}`), i = !0, !0;\n        }\n        s += d;\n      } else if (Ce(l))\n        s += 1;\n      else if (H(l)) {\n        if (a(l))\n          return !0;\n      } else if (ye(l)) {\n        const d = l;\n        if (a(d))\n          return !0;\n        const u = s;\n        if (we(d) && ye(r) && // Target is at the ImpliedPara's implicit newline\n        t === u && !i)\n          return e == null || e.debug(`$insertNodeAtCharacterOffset: Replacing ImpliedParaNode (key: ${d.getKey()}) with block node '${r.getType()}' (key: ${r.getKey()}) at OT index ${t}.`), l.replace(r, !0), s = u + 1, i = !0, !0;\n        s += 1;\n      } else if (z(l) && a(l))\n        return !0;\n      if (i)\n        return !0;\n    }\n    return z(o) && !i && (t === s || o === n && t > s) ? o === n ? (r.isInline() ? (e == null || e.debug(`$insertNodeAtCharacterOffset: Appending inline node ${r.getType()} to root. Wrapping in new ImpliedParaNode. targetIndex: ${t}, current document OT length: ${s}.`), n.append(ke().append(r))) : (e == null || e.debug(`$insertNodeAtCharacterOffset: Appending block node ${r.getType()} to root. targetIndex: ${t}, current document OT length: ${s}.`), n.append(r)), i = !0, !0) : (\n      // Appending to an existing container (ParaNode, ImpliedParaNode)\n      // currentNode here is the container itself. currentIndex is at the point of currentNode's\n      // closing marker. targetIndex === currentIndex means we are inserting at the conceptual end\n      // of this container.\n      be(o) ? we(o) && oe(r) && t === s ? (e == null || e.debug(`$insertNodeAtCharacterOffset: Replacing ImpliedParaNode container (key: ${o.getKey()}) with ParaNode ${r.getType()} (key: ${r.getKey()}) via append logic. targetIndex: ${t}`), o.replace(r, !0), i = !0, !0) : r.isInline() || !be(r) ? (e == null || e.debug(`$insertNodeAtCharacterOffset: Appending node ${r.getType()} to existing container ${o.getType()} (key: ${o.getKey()}). targetIndex: ${t}, container end OT index: ${s}.`), o.append(r), i = !0, !0) : (e == null || e.debug(`$insertNodeAtCharacterOffset: Inserting block node ${r.getType()} after container ${o.getType()} (key: ${o.getKey()}). targetIndex: ${t}, container end OT index: ${s}.`), o.insertAfter(r), i = !0, !0) : (H(o) ? (e == null || e.debug(`$insertNodeAtCharacterOffset: Inserting node ${r.getType()} after CharNode (key: ${o.getKey()}). targetIndex: ${t}, element end OT index: ${s}.`), o.insertAfter(r)) : r.isInline() || !be(r) ? (e == null || e.debug(`$insertNodeAtCharacterOffset: Appending node ${r.getType()} to generic element ${o.getType()} (key: ${o.getKey()}). targetIndex: ${t}, element end OT index: ${s}.`), o.append(r)) : (e == null || e.debug(`$insertNodeAtCharacterOffset: Inserting block node ${r.getType()} after generic element ${o.getType()} (key: ${o.getKey()}). targetIndex: ${t}, element end OT index: ${s}.`), o.insertAfter(r)), i = !0, !0)\n    ) : i;\n  }\n  return a(n), i || e == null || e.warn(`$insertNodeAtCharacterOffset: Could not find insertion point for node ${r.getType()} (key: ${r.getKey()}) at targetIndex ${t}. Final currentIndex: ${s}. Node not inserted.`), i;\n}\nfunction Sc(t, r, e, n, s) {\n  let i;\n  return ft(\"chapter\", r) ? i = Ec(r.insert.chapter, e) : ft(\"verse\", r) ? i = Nc(r.insert.verse, e) : ft(\"ms\", r) ? i = Ac(r.insert.ms) : ft(\"unmatched\", r) ? i = wc(r.insert.unmatched) : ft(\"note\", r) && (i = Pc(r, e, n, s)), i ? ni(t, i, s) : (s == null || s.error(`$insertEmbedAtCurrentIndex: Cannot create LexicalNode for embed object: ${JSON.stringify(r.insert)}`), !1);\n}\nfunction wr(t, r, e) {\n  let n;\n  nr(r) ? n = ri(r.para) : $c(r) && (n = vc(r.book)), n ?? (n = ke());\n  const s = n, i = oe(s), a = we(s);\n  let o = 0, c = !1;\n  function l(d) {\n    if (c)\n      return !0;\n    if (q(d)) {\n      const u = d.getTextContentSize();\n      if (t >= o && t <= o + u) {\n        const h = d.getParent();\n        if (oe(h) && (i || a)) {\n          e == null || e.debug(`Splitting ParaNode (marker: ${h.getMarker()}) with LF attributes at targetIndex ${t}`);\n          const y = t - o, [m] = y > 0 ? d.splitText(y) : [void 0];\n          let b = m == null ? void 0 : m.getPreviousSibling();\n          for (; b; ) {\n            const C = b;\n            b = b.getPreviousSibling();\n            const x = s.getFirstChild();\n            x ? x.insertBefore(C) : s.append(C);\n          }\n          return m && s.append(m), h.insertBefore(s), c = !0, !0;\n        }\n      }\n      o += u;\n    } else if (Ce(d))\n      o += 1;\n    else if (ye(d)) {\n      const u = d.getChildren();\n      for (const h of u) {\n        if (l(h))\n          return !0;\n        if (c)\n          break;\n      }\n      if (t === o) {\n        if (we(d) && s)\n          return e == null || e.debug(`Replacing ImpliedParaNode (key: ${d.getKey()}) with ParaNode at targetIndex ${t}`), d.replace(s, !0), c = !0, !0;\n        if (oe(d) && s) {\n          const h = d;\n          return e == null || e.debug(`Creating new block node with LF attributes after existing ParaNode (marker: ${h.getMarker()}) at targetIndex ${t}`), h.insertAfter(s), c = !0, !0;\n        }\n      }\n      if (o += 1, t === o && oe(d) && s)\n        return e == null || e.debug(`Creating new block node after existing ParaNode (marker: ${d.getMarker()}) at targetIndex ${t}`), d.insertAfter(s), c = !0, !0;\n    } else if (z(d)) {\n      const u = d.getChildren();\n      for (const h of u) {\n        if (l(h))\n          return !0;\n        if (c)\n          break;\n      }\n    }\n    return c;\n  }\n  return l(Pe()), c || e == null || e.warn(`Could not find location to handle newline with para attributes at targetIndex ${t}. Final currentIndex: ${o}.`), 1;\n}\nfunction Ec(t, r) {\n  if (!t)\n    return;\n  const { number: e, sid: n, altnumber: s, pubnumber: i } = t;\n  if (!e)\n    return;\n  const a = te(t, Mo);\n  let o;\n  if (r.markerMode === \"editable\")\n    o = Cs(e, n, s, i, a);\n  else {\n    const c = r.markerMode === \"visible\";\n    o = Dn(e, c, n, s, i, a);\n  }\n  return o;\n}\nfunction Nc(t, r) {\n  if (!t)\n    return;\n  const { style: e, number: n, sid: s, altnumber: i, pubnumber: a } = t;\n  if (!n)\n    return;\n  const o = te(t, To);\n  let c;\n  if (r.markerMode === \"editable\") {\n    if (!e)\n      return;\n    const l = vt(e, n);\n    c = qs(n, l, s, i, a, o);\n  } else {\n    const l = r.markerMode === \"visible\";\n    c = Yn(n, l, s, i, a, o);\n  }\n  return c;\n}\nfunction Ac(t) {\n  if (!t)\n    return;\n  const { style: r, sid: e, eid: n } = t;\n  if (!r)\n    return;\n  const s = te(t, So);\n  return Ps(r, e, n, s);\n}\nfunction wc(t) {\n  if (!t)\n    return;\n  const { marker: r } = t;\n  if (r)\n    return zn(r);\n}\nfunction Pc(t, r, e, n) {\n  var m;\n  const s = t.insert;\n  if (!s.note)\n    return;\n  const { style: i, caller: a, category: o, contents: c } = s.note;\n  if (!i || a == null)\n    return;\n  a === \"\" && (n == null || n.warn(\"Note has empty caller. Only use for note editing.\"));\n  const l = te(s.note, Eo), d = (m = t.attributes) == null ? void 0 : m.segment;\n  let u;\n  d && typeof d == \"string\" && (u = d);\n  const h = [];\n  for (const b of (c == null ? void 0 : c.ops) ?? [])\n    if (typeof b.insert == \"string\")\n      if (Ge(b.attributes)) {\n        const C = It(b.attributes.char, r, J(b.insert), void 0, h);\n        h.push(...C);\n      } else\n        h.push(J(b.insert));\n  return zs(i, a, h, r, e, u).setCategory(o).setUnknownAttributes(l);\n}\nfunction vc(t) {\n  const { style: r, code: e } = t;\n  if (!r || r !== _t || !e || !ge.isValidBookCode(e))\n    return;\n  const n = te(t, xo);\n  return ys(e, n);\n}\nfunction ri(t) {\n  const { style: r } = t;\n  if (!r)\n    return;\n  const e = te(t, Co);\n  return xt(r, e);\n}\nfunction It(t, r, e, n, s) {\n  if (Array.isArray(t)) {\n    if (t.length === 0)\n      throw new Error(\"Empty charAttr array\");\n    const i = t[0], a = s == null ? void 0 : s[s.length - 1];\n    if (H(a) && ze(i, a))\n      return t.length > 1 ? It(t.slice(1), r, e).forEach((u) => a.append(u)) : e && a.append(e), [];\n    const o = t.reduceRight((d, u, h) => {\n      const y = Me(u.style, te(u, Qt));\n      if (typeof u.cid == \"string\" && Ne(y, Ke, () => u.cid), n && h === t.length - 1 && Ne(y, Je, () => n), d)\n        if (H(d)) {\n          const m = d.getMarker(), b = [];\n          un(m, b, r), b.forEach((x) => y.append(x)), y.append(d);\n          const C = [];\n          fn(m, C, r), C.forEach((x) => y.append(x));\n        } else\n          y.append(d);\n      return y;\n    }, e), c = [], l = t[0];\n    return un(l.style, c, r), c.push(o), fn(l.style, c, r), c;\n  } else {\n    const i = s == null ? void 0 : s[s.length - 1];\n    if (H(i) && ze(t, i))\n      return e && i.append(e), [];\n    const a = [];\n    un(t.style, a, r);\n    const o = Me(t.style, te(t, Qt));\n    return typeof t.cid == \"string\" && Ne(o, Ke, () => t.cid), n && Ne(o, Je, () => n), e && o.append(e), a.push(o), fn(t.style, a, r), a;\n  }\n}\nfunction un(t, r, e) {\n  (e == null ? void 0 : e.markerMode) === \"editable\" ? r.push(it(t)) : (e == null ? void 0 : e.markerMode) === \"visible\" && r.push(at(\"marker\", $e(t)));\n}\nfunction fn(t, r, e, n = !1) {\n  W.isValidFootnoteMarker(t) || W.isValidCrossReferenceMarker(t) || ((e == null ? void 0 : e.markerMode) === \"editable\" ? n ? r.push(it(\"\", \"selfClosing\")) : r.push(it(t, \"closing\")) : (e == null ? void 0 : e.markerMode) === \"visible\" && r.push(at(\"marker\", st(n ? \"\" : t))));\n}\nfunction $c(t) {\n  return !!t && !!t.book && typeof t.book == \"object\" && t.book !== null && \"style\" in t.book && typeof t.book.style == \"string\" && \"code\" in t.book && typeof t.book.code == \"string\";\n}\nfunction nr(t) {\n  return !!t && !!t.para && typeof t.para == \"object\" && t.para !== null && \"style\" in t.para && typeof t.para.style == \"string\";\n}\nfunction Ge(t) {\n  return !!t && !!t.char && typeof t.char == \"object\" && t.char !== null && (!Array.isArray(t.char) && \"style\" in t.char && typeof t.char.style == \"string\" || Array.isArray(t.char) && t.char.length > 0 && \"style\" in t.char[0] && typeof t.char[0].style == \"string\");\n}\nfunction Ic(t) {\n  return typeof t == \"object\" && t !== null && !Array.isArray(t) && Object.keys(t).length === 0;\n}\nfunction pe(t, r) {\n  if (t)\n    for (const e of Object.keys(t)) {\n      if (e === \"segment\" && typeof t[e] == \"string\") {\n        const n = t[e];\n        Ne(r, Je, () => n);\n        continue;\n      }\n      if (qc(e)) {\n        const n = !!t[e], s = e, i = r.hasFormat(s);\n        (n && !i || !n && i) && r.toggleFormat(s);\n      }\n    }\n}\nconst si = [\n  \"bold\",\n  \"underline\",\n  \"strikethrough\",\n  \"italic\",\n  \"highlight\",\n  \"code\",\n  \"subscript\",\n  \"superscript\",\n  \"lowercase\",\n  \"uppercase\",\n  \"capitalize\"\n];\nfunction qc(t) {\n  return si.includes(t);\n}\nfunction Rc({ viewOptions: t }) {\n  const [r] = V();\n  return Lc(r, t), null;\n}\nfunction Lc(t, r) {\n  A(() => {\n    if (!t.hasNodes([ve, de, ee]))\n      throw new Error(\"ArrowNavigationPlugin: ImmutableChapterNode, ImmutableVerseNode or NoteNode not registered on editor!\");\n    const e = (n) => {\n      if (n.key !== \"ArrowLeft\" && n.key !== \"ArrowRight\")\n        return !1;\n      const s = ie();\n      if (!Z(s) || !s.isCollapsed())\n        return !1;\n      const i = t.getRootElement();\n      if (!i)\n        return !1;\n      const a = i.dir || \"ltr\";\n      let o = !1;\n      return Oc(a, n.key) ? o = Fc(s) : Dc(a, n.key) && (o = Uc(s, r)), o && n.preventDefault(), o;\n    };\n    return t.registerCommand(Et, e, nn);\n  }, [t, r]);\n}\nfunction Oc(t, r) {\n  return t === \"ltr\" && r === \"ArrowRight\" || t === \"rtl\" && r === \"ArrowLeft\";\n}\nfunction Dc(t, r) {\n  return t === \"ltr\" && r === \"ArrowLeft\" || t === \"rtl\" && r === \"ArrowRight\";\n}\nfunction Fc(t) {\n  var s, i, a;\n  const r = t.anchor.getNode(), e = Da(t);\n  if (I(e) && !$t(e.getFirstChild())) {\n    if (be(r)) {\n      if (t.anchor.offset === r.getChildrenSize())\n        return !1;\n    } else if (!(t.anchor.offset === r.getTextContentSize()))\n      return !1;\n    if (e.getIsCollapsed()) {\n      if (e.is((s = e.getParent()) == null ? void 0 : s.getLastChild()))\n        return (a = (i = e.getParent()) == null ? void 0 : i.getNextSibling()) == null || a.selectStart(), !0;\n    } else return Yt(e.getFirstChild()) ? e.select(2, 2) : e.select(1, 1), !0;\n  }\n  if (be(r) && I(e) && e.getIsCollapsed()) {\n    const o = e.getNextSibling();\n    return o ? o.selectStart() : e.selectEnd(), !0;\n  }\n  const n = e == null ? void 0 : e.getParent();\n  if (Yt(e) && I(n) && e.is(n == null ? void 0 : n.getLastChild())) {\n    const o = n.getNextSibling();\n    return o ? o.selectStart() : n.selectEnd(), !0;\n  }\n  return !1;\n}\nfunction Uc(t, r) {\n  const e = Fa(t);\n  if (Pt(e) && !e.getPreviousSibling())\n    return !0;\n  if (!(t.anchor.offset === 0))\n    return !1;\n  const s = t.anchor.getNode();\n  if (Te(s.getParent()))\n    return !0;\n  if (I(e) && e.getIsCollapsed()) {\n    const a = e.getPreviousSibling();\n    if (!ut(a))\n      return !1;\n    const o = e.getParent();\n    if (!o)\n      return !1;\n    const c = e.getIndexWithinParent();\n    return o.select(c, c), !0;\n  }\n  if (be(e) && (r == null ? void 0 : r.noteMode) === \"collapsed\") {\n    const a = e.getLastChild();\n    if (!a)\n      return !1;\n    const o = kt(a, (c) => I(c));\n    if (I(o) && o.getIsCollapsed()) {\n      const c = o.getParent();\n      if (!c)\n        return !1;\n      const l = o.getIndexWithinParent();\n      return c.select(l, l), !0;\n    }\n  }\n  const i = Rs(s);\n  if (!i || i.getIsCollapsed())\n    return !1;\n  if (Ue(e)) {\n    const a = i.getParent();\n    if (!a)\n      return !1;\n    const o = i.getIndexWithinParent();\n    return a.select(o, o), !0;\n  }\n  return !1;\n}\nfunction Bc() {\n  const [t] = V();\n  return Hc(t), null;\n}\nfunction Hc(t) {\n  A(() => {\n    if (!t.hasNodes([W]))\n      throw new Error(\"CharNodePlugin: CharNode not registered on editor!\");\n    return t.registerNodeTransform(W, Vc);\n  }, [t]);\n}\nfunction Vc(t) {\n  if (!H(t))\n    return;\n  if (t.isEmpty()) {\n    t.remove();\n    return;\n  }\n  const r = t.getMarker(), e = bt(t, Ke), n = t.getUnknownAttributes(), s = t.getNextSibling();\n  H(s) && ze({ style: r, cid: e }, s) && Ee(n, s.getUnknownAttributes()) && (t.append(...s.getChildren()), s.remove());\n  const i = t.getPreviousSibling();\n  H(i) && ze({ style: r, cid: e }, i) && Ee(n, i.getUnknownAttributes()) && (i.append(...t.getChildren()), t.remove());\n}\nfunction ii(t) {\n  return t.replaceAll(\"\t\", \" \");\n}\nconst rr = (t) => {\n  navigator.clipboard.read().then(async (r) => {\n    if ((await navigator.permissions.query({\n      // @ts-expect-error These types are incorrect.\n      name: \"clipboard-read\"\n    })).state === \"denied\") {\n      alert(\"Not allowed to paste from clipboard.\");\n      return;\n    }\n    const n = new DataTransfer(), s = r[0];\n    for (const a of s.types) {\n      const o = await (await s.getType(a)).text();\n      n.setData(a, ii(o));\n    }\n    const i = new ClipboardEvent(\"paste\", {\n      clipboardData: n\n    });\n    t.dispatchCommand($n, i);\n  });\n}, sr = (t) => {\n  navigator.clipboard.read().then(async () => {\n    if ((await navigator.permissions.query({\n      // @ts-expect-error These types are incorrect.\n      name: \"clipboard-read\"\n    })).state === \"denied\") {\n      alert(\"Not allowed to paste from clipboard.\");\n      return;\n    }\n    const e = new DataTransfer(), n = await navigator.clipboard.readText();\n    e.setData(\"text/plain\", ii(n));\n    const s = new ClipboardEvent(\"paste\", {\n      clipboardData: e\n    });\n    t.dispatchCommand($n, s);\n  });\n};\nfunction jc() {\n  const [t] = V();\n  return A(() => {\n    const r = (e) => {\n      const { key: n, shiftKey: s, metaKey: i, ctrlKey: a, altKey: o } = e;\n      !(mn ? i : a) || o || (!s && n.toLowerCase() === \"c\" ? (e.preventDefault(), t.dispatchCommand(In, null)) : !s && n.toLowerCase() === \"x\" ? (e.preventDefault(), t.dispatchCommand(qn, null)) : n.toLowerCase() === \"v\" && (e.preventDefault(), s ? sr(t) : rr(t)));\n    };\n    return t.registerRootListener((e, n) => {\n      n !== null && n.removeEventListener(\"keydown\", r), e !== null && e.addEventListener(\"keydown\", r);\n    });\n  }, [t]), null;\n}\nfunction Kc({ logger: t }) {\n  const [r] = V();\n  return A(() => Ze(\n    // When the backslash or forward slash key is typed.\n    r.registerCommand(Et, (e) => e.key !== \"\\\\\" && e.key !== \"/\" ? !1 : (e.preventDefault(), !0), Ft),\n    // When the backslash or forward slash character is pasted into the editor.\n    r.registerCommand($n, (e) => {\n      var s;\n      const n = (s = e.clipboardData) == null ? void 0 : s.getData(\"text/plain\");\n      return !n || !n.includes(\"\\\\\") && !n.includes(\"/\") ? !1 : (t == null || t.info(\"CommandMenuPlugin: paste containing backslash or forward slash ignored.\"), e.preventDefault(), !0);\n    }, Ft),\n    // When the backslash or forward slash character is dragged into the editor.\n    r.registerCommand($i, (e) => {\n      var s;\n      const n = (s = e.dataTransfer) == null ? void 0 : s.getData(\"text/plain\");\n      return !n || !n.includes(\"\\\\\") && !n.includes(\"/\") ? !1 : (t == null || t.info(\"CommandMenuPlugin: drag containing backslash or forward slash ignored.\"), e.preventDefault(), !0);\n    }, Ft)\n  ), [r, t]), null;\n}\nfunction Jc({ index: t, isSelected: r, onClick: e, onMouseEnter: n, option: s }) {\n  let i = \"item\";\n  return r && (i += \" selected\"), s.isDisabled && (i += \" disabled\"), g(\"li\", { tabIndex: -1, className: i, ref: s.setRefElement, role: \"option\", \"aria-selected\": r, \"aria-disabled\": s.isDisabled, id: \"typeahead-item-\" + t, onMouseEnter: n, onClick: s.isDisabled ? void 0 : e, children: g(\"span\", { className: \"text\", children: s.title }) }, s.key);\n}\nfunction Wc({ options: t, selectedItemIndex: r, onOptionClick: e, onOptionMouseEnter: n }) {\n  return g(\"div\", { className: \"typeahead-popover\", children: g(\"ul\", { children: t.map((s, i) => g(Jc, { index: i, isSelected: r === i, onClick: () => e(s, i), onMouseEnter: () => n(i), option: s }, s.key)) }) });\n}\nclass Ot extends ea {\n  constructor(e, n) {\n    super(e);\n    S(this, \"title\");\n    S(this, \"onSelect\");\n    S(this, \"isDisabled\");\n    this.title = e, this.onSelect = n.onSelect.bind(this), this.isDisabled = n.isDisabled || !1;\n  }\n}\nfunction zc(t, r = \"editor-input\") {\n  return t ? t.classList.contains(r) : !1;\n}\nfunction Gc() {\n  const [t] = V(), [r, e] = D(() => !t.isEditable()), n = O(void 0), s = O(void 0), i = O(void 0), a = ce(() => [\n    new Ot(\"Cut\", {\n      onSelect: () => {\n        t.dispatchCommand(qn, null);\n      },\n      isDisabled: r\n    }),\n    new Ot(\"Copy\", {\n      onSelect: () => {\n        t.dispatchCommand(In, null);\n      }\n    }),\n    new Ot(\"Paste\", {\n      onSelect: () => {\n        rr(t);\n      },\n      isDisabled: r\n    }),\n    new Ot(\"Paste as Plain Text\", {\n      onSelect: () => {\n        sr(t);\n      },\n      isDisabled: r\n    })\n  ], [t, r]), o = j((c, l, d) => {\n    t.update(() => {\n      c == null || c.onSelect(l), d();\n    });\n  }, [t]);\n  return A(() => {\n    var c;\n    s.current = ((c = t.getRootElement()) == null ? void 0 : c.className) ?? \"\";\n  }, [t]), A(() => {\n    const c = () => {\n      var l;\n      (l = i.current) == null || l.call(i);\n    };\n    return window.addEventListener(\"scroll\", c, !0), () => {\n      window.removeEventListener(\"scroll\", c, !0);\n    };\n  }, []), A(() => t.registerEditableListener((c) => {\n    e(!c);\n  }), [t]), g(Zi, { options: a, onSelectOption: o, onWillOpen: (c) => {\n    n.current = c.target;\n  }, menuRenderFn: (c, { selectedIndex: l, options: d, selectOptionAndCleanUp: u, setHighlightedIndex: h }, { setMenuRef: y }) => (i.current = () => u(void 0), c.current && !zc(n.current, s.current) && !Ns(n.current) ? ji.createPortal(g(\"div\", { className: \"typeahead-popover auto-embed-menu\", style: {\n    marginLeft: c.current.style.width,\n    userSelect: \"none\",\n    width: 200\n  }, ref: y, children: g(Wc, { options: a, selectedItemIndex: l, onOptionClick: (m, b) => {\n    m.isDisabled || (h(b), u(m));\n  }, onOptionMouseEnter: (m) => {\n    h(m);\n  } }) }), c.current) : null) });\n}\nfunction Yc({ isEditable: t }) {\n  const [r] = V();\n  return tn(() => {\n    r.setEditable(t);\n  }, [r, t]), null;\n}\nfunction Xc({ scripture: t, nodeOptions: r, editorAdaptor: e, viewOptions: n, logger: s }) {\n  const [i] = V();\n  return A(() => {\n    var a;\n    (a = e.initialize) == null || a.call(e, r, s);\n  }, [e, s, r]), A(() => {\n    var o;\n    (o = e.reset) == null || o.call(e);\n    const a = e.serializeEditorState(t, n);\n    if (a == null) {\n      s == null || s.warn(\"LoadStatePlugin: serializedEditorState was null or undefined. Skipping editor update.\");\n      return;\n    }\n    try {\n      const c = i.parseEditorState(a);\n      queueMicrotask(() => {\n        i.update(() => {\n          i.setEditorState(c), i.dispatchCommand(Ii, void 0);\n        }, { tag: Ln });\n      });\n    } catch {\n      s == null || s.error(\"LoadStatePlugin: error parsing or setting editor state.\");\n    }\n  }, [i, e, s, t, n]), null;\n}\nfunction Qc({ expandedNoteKeyRef: t, nodeOptions: r, viewOptions: e, logger: n }) {\n  const [s] = V();\n  return Zc(r, n), el(s, t, e, n), null;\n}\nfunction Zc(t, r) {\n  const e = O(void 0), n = t.noteCallers;\n  A(() => {\n    let s = n;\n    (!s || s.length <= 0) && (s = Go), e.current !== s && (e.current = s, cl(\"note-callers\", s, r));\n  }, [r, n]);\n}\nfunction el(t, r, e, n) {\n  A(() => {\n    if (!t.hasNodes([W, ee, _e]))\n      throw new Error(\"NoteNodePlugin: CharNode, NoteNode or ImmutableNoteCallerNode not registered on editor!\");\n    const s = (i) => t.update(() => ol(i));\n    return Ze(\n      // Remove NoteNode if it doesn't contain a caller node and ensure typed text goes before it.\n      t.registerNodeTransform(ee, (i) => tl(i, e)),\n      // Update NoteNodeCaller preview text when NoteNode children text is changed.\n      t.registerNodeTransform(W, nl),\n      t.registerNodeTransform(Ae, rl),\n      // Ensure NBSP after caller.\n      t.registerNodeTransform(_e, sl),\n      // Re-generate all note callers when a note is removed.\n      t.registerMutationListener(_e, (i, { prevEditorState: a }) => il(i, a)),\n      // Handle the cursor moving next to a NoteNode. NoteNode arrow key navigation when note is\n      // after a verse node is handled in the ArrowNavigationPlugin.\n      t.registerCommand(dt, () => al(t, r, e, n), Nt),\n      // Handle double-click of a word immediately following a NoteNode (no space between).\n      t.registerRootListener((i, a) => {\n        a !== null && a.removeEventListener(\"dblclick\", s), i !== null && i.addEventListener(\"dblclick\", s);\n      })\n    );\n  }, [t, r, n, e]);\n}\nfunction tl(t, r) {\n  const e = t.getChildren();\n  if (!e.some((s) => Ue(s)) && (r == null ? void 0 : r.markerMode) !== \"editable\" && t.getCaller() !== \"\" && t.remove(), e.length > 0) {\n    const s = e[0];\n    q(s) && !$t(s) && t.insertBefore(s);\n  }\n}\nfunction nl(t) {\n  const r = t.getParentOrThrow(), e = r.getChildren(), n = e.find((a) => Ue(a));\n  if (!H(t) || !I(r) || !n)\n    return;\n  const s = Jn(e);\n  n.getPreviewText() !== s && n.setPreviewText(s);\n  const i = t.getNextSibling();\n  q(i) ? i.getTextContent() !== B && i.setTextContent(B) : t.insertAfter(J(B));\n}\nfunction rl(t) {\n  const r = Rs(t), e = r == null ? void 0 : r.getChildren(), n = e == null ? void 0 : e.find((i) => Ue(i));\n  if (!q(t) || !I(r) || !n || !e)\n    return;\n  const s = Jn(e);\n  n.getPreviewText() !== s && n.setPreviewText(s), !($t(t) || !I(t.getParent())) && t.getTextContent() !== B && (t.setTextContent(B), t.selectEnd());\n}\nfunction sl(t) {\n  if (!Ue(t))\n    return;\n  const r = t.getNextSibling();\n  !q(r) || $t(r) ? t.insertAfter(J(B)) : r.getTextContent() !== B && r.setTextContent(B);\n}\nfunction il(t, r) {\n  for (const [e, n] of t) {\n    if (n !== \"destroyed\")\n      continue;\n    const s = r.read(() => {\n      const a = K(e), o = a == null ? void 0 : a.getParent();\n      return Ue(a) && I(o) && o.getCaller() === Ct;\n    }), i = document.querySelector(\".editor-input\");\n    !s || !i || (i.classList.add(\"reset-counters\"), i.offsetHeight, i.classList.remove(\"reset-counters\"));\n  }\n}\nfunction al(t, r, e, n) {\n  var o;\n  if ((e == null ? void 0 : e.noteMode) !== \"expandInline\")\n    return !1;\n  const s = ie();\n  if (!Z(s) || !s.isCollapsed())\n    return !1;\n  const i = s.anchor, a = i.getNode();\n  if (r.current) {\n    const c = kt(a, (l) => I(l));\n    if (c)\n      r.current !== c.getKey() && (r.current = c.getKey());\n    else {\n      const l = K(r.current);\n      l && !l.getIsCollapsed() && (n == null || n.debug(\"Cursor moved away from NoteNode, collapsing it\"), pt(t, r.current, n)), r.current = void 0;\n    }\n  }\n  if (i.offset === 0) {\n    const c = a.getPreviousSibling();\n    if (I(c)) {\n      n == null || n.debug(\"Cursor is just after a NoteNode\");\n      const l = c.getKey();\n      c.getIsCollapsed() ? r.current = l : r.current = void 0, pt(t, l, n);\n    }\n  }\n  if (i.offset === a.getTextContentSize()) {\n    const c = a.getNextSibling();\n    if (I(c)) {\n      n == null || n.debug(\"Cursor is just before a NoteNode\");\n      const l = c.getKey();\n      c.getIsCollapsed() ? r.current = l : r.current = void 0, pt(t, l, n);\n    } else if (!c) {\n      const l = kt(a, (d) => I(d));\n      if (l && l.getIsCollapsed() && be(l.getParent()) && l.is((o = l.getParent()) == null ? void 0 : o.getLastChild())) {\n        n == null || n.debug(\"Cursor is at end of note at end of para\");\n        const d = l.getKey();\n        r.current = d, pt(t, d, n);\n      }\n    }\n  }\n  if (be(a)) {\n    const c = a.getChildAtIndex(i.offset), l = c == null ? void 0 : c.getPreviousSibling();\n    if (ut(l) && I(c)) {\n      n == null || n.debug(\"Cursor is between verse and NoteNode\");\n      const d = c.getKey();\n      c.getIsCollapsed() ? r.current = d : r.current = void 0, pt(t, d, n);\n    }\n  }\n  return !1;\n}\nfunction pt(t, r, e) {\n  const n = K(r);\n  try {\n    n == null || n.toggleIsCollapsed();\n  } catch (s) {\n    if (s instanceof Error && s.message.includes(\"read only\"))\n      e == null || e.warn(\"Fallback triggered after stabilization - edge case\"), setTimeout(() => {\n        t.update(() => {\n          n == null || n.toggleIsCollapsed();\n        });\n      }, 0);\n    else\n      throw s;\n  }\n}\nfunction ol(t) {\n  const r = ie();\n  if (!Z(r))\n    return;\n  const e = r.anchor, n = r.focus, s = e.getNode(), i = n.getNode();\n  if (I(s) && q(i)) {\n    t.preventDefault();\n    const a = ns();\n    a.anchor.set(i.getKey(), 0, \"text\"), a.focus.set(i.getKey(), n.offset, \"text\"), rs(a);\n  }\n}\nfunction cl(t, r, e) {\n  for (const n of document.styleSheets)\n    try {\n      const s = n.cssRules || n.rules;\n      for (const i of s)\n        if (ll(i, t)) {\n          const a = r.map((o) => `\"${o}\"`).join(\" \");\n          i.symbols = a;\n          return;\n        }\n    } catch {\n      continue;\n    }\n  e == null || e.warn(`Editor: counter style \"${t}\" not found.`);\n}\nfunction ll(t, r) {\n  return (\n    // This check could be simpler but as is also works for test mocks.\n    typeof t == \"object\" && t !== null && \"name\" in t && t.name === r && \"symbols\" in t && typeof t.symbols == \"string\"\n  );\n}\nfunction dl({ onChange: t }) {\n  const [r] = V();\n  return A(() => r.registerCommand(dt, () => {\n    const e = r.read(() => js());\n    return t == null || t(e), !1;\n  }, Nt), [r, t]), null;\n}\nfunction ul() {\n  const [t] = V();\n  return fl(t), null;\n}\nfunction fl(t) {\n  A(() => {\n    if (!t.hasNodes([fe]))\n      throw new Error(\"ParaNodePlugin: ParaNode not registered on editor!\");\n    return t.registerNodeTransform(fe, (r) => pl(r, t));\n  }, [t]);\n}\nfunction pl(t, r) {\n  Qn(r, t.getKey()) && Ys(t.getFirstChild()), !(!oe(t) || t.getMarker() !== \"b\" || t.isEmpty() || !r.getEditorState().read(() => {\n    const s = K(t.getKey());\n    return oe(s) && ((s == null ? void 0 : s.isEmpty()) ?? !1);\n  })) && t.clear();\n}\nfunction ai({ onStateChange: t }) {\n  const [r] = V(), [e, n] = D(r), s = O(!1), i = O(!1), a = O(), o = j(() => {\n    const c = ie();\n    if (Z(c)) {\n      const l = c.anchor.getNode();\n      let d = l.getKey() === \"root\" ? l : kt(l, (y) => {\n        const m = y.getParent();\n        return m !== null && qi(m);\n      });\n      d === null && (d = l.getTopLevelElementOrThrow());\n      const u = d.getKey();\n      e.getElementByKey(u) !== null && (oe(d) || Te(d) || Pt(d)) && (a.current = d.getMarker(), t == null || t(s.current, i.current, a.current));\n    }\n  }, [e, t]);\n  return A(() => r.registerCommand(dt, (c, l) => (o(), n(l), !1), Ut), [r, o]), A(() => Ze(e.registerUpdateListener(({ editorState: c }) => {\n    c.read(() => {\n      o();\n    });\n  }), e.registerCommand(Ri, (c) => (s.current = c, t == null || t(s.current, i.current, a.current), !1), Ut), e.registerCommand(Li, (c) => (i.current = c, t == null || t(s.current, i.current, a.current), !1), Ut)), [o, e, t]), null;\n}\nconst vu = {\n  ltr: \"Left-to-right\",\n  rtl: \"Right-to-left\",\n  auto: \"Automatic\"\n};\nfunction hl({ textDirection: t }) {\n  const [r] = V();\n  return ml(r, t), gl(r), null;\n}\nfunction ml(t, r) {\n  A(() => {\n    function e() {\n      const n = t.getRootElement();\n      if (!n || r === \"auto\")\n        return;\n      n.dir = r;\n      const s = t._config.theme.placeholder, i = document.getElementsByClassName(s)[0];\n      i && (i.dir = r);\n    }\n    return e(), t.registerUpdateListener(({ dirtyElements: n }) => {\n      n.size > 0 && e();\n    });\n  }, [t, r]);\n}\nfunction gl(t) {\n  A(() => {\n    const r = (e) => {\n      if (e.key !== \"ArrowLeft\" && e.key !== \"ArrowRight\")\n        return !1;\n      const n = ie();\n      if (!Z(n))\n        return !1;\n      const s = n.anchor.getNode(), i = kt(s, (u) => Ja(u, t) === \"p\");\n      if (!i)\n        return !1;\n      const a = t.getElementByKey(i.getKey());\n      if (!a)\n        return !1;\n      const o = a.parentElement, c = a.dir || \"ltr\", l = ((o == null ? void 0 : o.dir) ?? \"\") || \"ltr\";\n      if (!o || c === l)\n        return !1;\n      const d = o.dir === \"rtl\" && e.key === \"ArrowLeft\" || o.dir === \"ltr\" && e.key === \"ArrowRight\";\n      return n.modify(\"move\", d, \"character\"), e.preventDefault(), !0;\n    };\n    return t.registerCommand(Et, r, nn);\n  }, [t]);\n}\nfunction yl() {\n  const [t] = V();\n  return bl(t), null;\n}\nfunction bl(t) {\n  A(() => {\n    if (!t.hasNodes([W, de, ee, Ae, le]))\n      throw new Error(\"TextSpacingPlugin: CharNode, ImmutableVerseNode, NoteNode, TextNode or VerseNode not registered on editor!\");\n    return Ze(t.registerNodeTransform(Ae, kl), t.registerNodeTransform(Ae, (r) => _l(r, t)), t.registerNodeTransform(le, Pr), t.registerNodeTransform(de, Pr));\n  }, [t]);\n}\nfunction kl(t) {\n  if (!t.isAttached())\n    return;\n  const r = t.getTextContent(), e = t.getNextSibling(), n = t.getParent();\n  t.getMode() !== \"normal\" || r.endsWith(\" \") && r.length > 1 || I(e) || H(n) || se(n) || wt(n) || (r === \" \" && !me(e) ? t.setTextContent(\"\") : Xn(t));\n}\nfunction _l(t, r) {\n  const e = t.getParent();\n  !wt(e) || !t.isAttached() || Qn(r, t.getKey()) && e.insertAfter(t);\n}\nfunction Pr(t) {\n  if (!t.isAttached())\n    return;\n  const r = t.getPreviousSibling();\n  r && !me(r) && !q(r) && !wt(r) && t.insertBefore(J(\" \"));\n}\nfunction Cl({ trigger: t, scriptureReference: r, contextMarker: e, getMarkerAction: n }) {\n  const { markersMenuItems: s } = hc({\n    scriptureReference: r,\n    contextMarker: e,\n    getMarkerAction: n\n  });\n  return g(pc, { trigger: t, items: s });\n}\nfunction xl({ trigger: t, scrRef: r, getMarkerAction: e }) {\n  const { book: n, chapterNum: s, verseNum: i, verse: a } = r, o = ce(() => r, [n, s, i, a]), [c] = V(), [l] = Ml(c);\n  return Tl(c), g(Cl, { trigger: t, scriptureReference: o, contextMarker: l, getMarkerAction: e });\n}\nfunction Ml(t) {\n  const [r, e] = D();\n  return A(() => t.registerCommand(dt, () => (t.read(() => {\n    const n = ie();\n    if (!Z(n)) {\n      r && e(void 0);\n      return;\n    }\n    const s = K(n.anchor.key), i = K(n.focus.key);\n    if (!s || !i) {\n      r && e(void 0);\n      return;\n    }\n    const a = Ba(s, i);\n    if (!a || !_o(a)) {\n      r && e(void 0);\n      return;\n    }\n    const o = a.getMarker();\n    r !== o && e(o);\n  }), !1), Nt), [r, t]), [r];\n}\nfunction Tl(t) {\n  A(() => {\n    if (!t.hasNodes([le, de]))\n      throw new Error(\"UsjNodesMenuPlugin: VerseNode or ImmutableVerseNode not registered on editor!\");\n    const r = {}, e = {};\n    return Ze(t.registerNodeTransform(de, (n) => vr(n, t, r)), t.registerNodeTransform(le, (n) => vr(n, t, r)), t.registerMutationListener(de, (n) => Rr(n, t, r, e)), t.registerMutationListener(le, (n) => Rr(n, t, r, e)));\n  }, [t]);\n}\nfunction vr(t, r, e) {\n  if (Oi(Ln))\n    return;\n  Qn(r, t.getKey()) && Nl(t, e);\n}\nfunction $r(t) {\n  return RegExp(/(\\d+)([a-zA-Z]+)?(-(\\d+)([a-zA-Z]+)?)?/).exec(t);\n}\nconst Ir = 2, Sl = 3, qr = 4, El = 5;\nfunction Nl(t, r) {\n  var o;\n  const e = Vn(t), n = e == null ? void 0 : e.getNumber();\n  if (!n)\n    return;\n  const s = r[n];\n  if (!s)\n    return;\n  let i = parseInt(t.getNumber()), a = ((o = $r(t.getNumber())) == null ? void 0 : o[Ir]) ?? \"\";\n  s.forEach((c) => {\n    const l = K(c);\n    if (!l)\n      return;\n    const d = l.getNumber(), u = parseInt(d), h = $r(d), y = !!(h != null && h[Sl]), m = y ? parseInt(h[qr]) : u;\n    if (m < i || // e.g. insert 3b before 4 => 4\n    u > i || // e.g. insert 3 before 3a => 4a\n    m === i && a)\n      return;\n    const b = (h == null ? void 0 : h[Ir]) ?? \"\", C = (h == null ? void 0 : h[El]) ?? \"\", x = y ? xn(parseInt(h[qr]), void 0) : \"\";\n    let k = `${b}`;\n    k += y ? `-${x}${C}` : \"\";\n    const _ = xn(u, void 0);\n    l.setNumber(`${_}${k}`), i = parseInt(y ? x : _), a = y ? C : b;\n  });\n}\nfunction Rr(t, r, e, n) {\n  r.getEditorState().read(() => {\n    for (const [s, i] of t) {\n      const a = K(s);\n      if (me(a)) {\n        if (i === \"created\") {\n          const o = Vn(a);\n          if (!o)\n            continue;\n          const c = o.getNumber();\n          e[c] || (e[c] = []), e[c].push(s), n[s] = c;\n        } else if (i === \"destroyed\") {\n          const o = n[s], c = e[o];\n          if (!c)\n            continue;\n          const l = c.findIndex((d) => d === s);\n          if (l === -1)\n            continue;\n          c.splice(l, 1), Reflect.deleteProperty(n, s);\n        }\n      }\n    }\n  });\n}\nconst an = \"formatted\", ir = \"unformatted\", $u = {\n  [an]: \"Formatted\",\n  [ir]: \"Unformatted\"\n};\nlet ar, or;\nfunction Al(t) {\n  const r = wl(t);\n  if (!r)\n    throw new Error(`Invalid view mode: ${t}`);\n  ar = t, or = r;\n}\nAl(an);\nconst Iu = () => ar, cr = () => or;\nfunction wl(t) {\n  let r;\n  switch (t ?? ar) {\n    case an:\n      r = {\n        markerMode: \"hidden\",\n        noteMode: \"collapsed\",\n        hasSpacing: !0,\n        isFormattedFont: !0\n      };\n      break;\n    case ir:\n      r = {\n        markerMode: \"editable\",\n        noteMode: \"expanded\",\n        hasSpacing: !1,\n        isFormattedFont: !1\n      };\n      break;\n  }\n  return r;\n}\nfunction qu(t) {\n  if (!t)\n    return;\n  const { markerMode: r, hasSpacing: e, isFormattedFont: n } = t;\n  if (r === \"hidden\" && e && n)\n    return an;\n  if (r === \"editable\" && !e && !n)\n    return ir;\n}\nfunction Pl(t) {\n  if (t)\n    return t.markerMode === \"editable\" ? le : de;\n}\nfunction vl(t) {\n  const r = [], e = t ?? or;\n  return e && (r.push(`${ha}${e.markerMode}`), e.hasSpacing && r.push(fa), e.isFormattedFont && r.push(pa)), r;\n}\nlet Vt;\nfunction $l(t) {\n  t && (Vt = t);\n}\nfunction Il(t) {\n  return t.isEmpty() ? es : ql(t.toJSON());\n}\nfunction ql(t) {\n  if (!t.root || !t.root.children) return;\n  const r = t.root.children;\n  if (r.length === 1 && Fn(r[0]) && (!r[0].children || r[0].children.length === 0))\n    return es;\n  const e = oi(r), n = Ie(e);\n  return n ? { type: Jt, version: Kt, content: n } : void 0;\n}\nfunction Rl(t, r) {\n  const { type: e, marker: n, unknownAttributes: s } = t;\n  let i;\n  return t.code !== \"\" && (i = t.code), X({\n    type: e,\n    marker: n,\n    code: i,\n    ...s,\n    content: r\n  });\n}\nfunction Ll(t) {\n  const { marker: r, number: e, sid: n, altnumber: s, pubnumber: i, unknownAttributes: a } = t;\n  return X({\n    type: xe.getType(),\n    marker: r,\n    number: e,\n    sid: n,\n    altnumber: s,\n    pubnumber: i,\n    ...a\n  });\n}\nfunction Ol(t, r) {\n  const { marker: e, sid: n, altnumber: s, pubnumber: i, unknownAttributes: a } = t, o = r && typeof r[0] == \"string\" ? r[0] : void 0;\n  let { number: c } = t;\n  return c = Ls(e, o, c), X({\n    type: xe.getType(),\n    marker: e,\n    number: c,\n    sid: n,\n    altnumber: s,\n    pubnumber: i,\n    ...a\n  });\n}\nfunction Dl(t) {\n  const { marker: r, sid: e, altnumber: n, pubnumber: s, unknownAttributes: i } = t, { text: a } = t;\n  let { number: o } = t;\n  return o = Ls(r, a, o), X({\n    type: le.getType(),\n    marker: r,\n    number: o,\n    sid: e,\n    altnumber: n,\n    pubnumber: s,\n    ...i\n  });\n}\nfunction Fl(t, r) {\n  const { type: e, marker: n, unknownAttributes: s } = t, i = n === \"\" ? void 0 : n;\n  return r == null || r.forEach((a, o) => {\n    typeof a == \"string\" && a.startsWith(B) && (r[o] = a.slice(1));\n  }), X({\n    type: e,\n    marker: i,\n    ...s,\n    content: r\n  });\n}\nfunction Ul(t, r) {\n  const { type: e, marker: n, unknownAttributes: s } = t;\n  return X({\n    type: e,\n    marker: n,\n    ...s,\n    content: r\n  });\n}\nfunction Bl(t, r) {\n  const { type: e, marker: n, caller: s, category: i, unknownAttributes: a } = t;\n  return X({\n    type: e,\n    marker: n,\n    caller: s,\n    category: i,\n    ...a,\n    content: r\n  });\n}\nfunction nt(t) {\n  const { type: r, marker: e, sid: n, eid: s, unknownAttributes: i } = t;\n  return X({\n    type: r,\n    marker: e === \"\" ? void 0 : e,\n    sid: n,\n    eid: s,\n    ...i\n  });\n}\nfunction Hl(t) {\n  return t.text;\n}\nfunction Vl(t, r) {\n  const { tag: e, marker: n, unknownAttributes: s } = t;\n  return X({\n    type: e,\n    marker: n,\n    ...s,\n    content: r\n  });\n}\nfunction jl(t) {\n  const { marker: r } = t;\n  return {\n    type: Xt,\n    marker: r === \"\" ? void 0 : r\n  };\n}\nfunction Lr(t, r) {\n  const e = t[t.length - 1];\n  e && typeof e == \"string\" ? t[t.length - 1] = e + r : t.push(r);\n}\nfunction Kl(t, r, e, n, s) {\n  const i = Se.getType(), a = r.filter((l) => !e.includes(l));\n  if (e.filter((l) => !r.includes(l)).forEach((l) => {\n    const d = nt({\n      type: i,\n      marker: rt,\n      eid: l\n    });\n    s.push(d);\n  }), a.forEach((l) => {\n    const d = nt({\n      type: i,\n      marker: We,\n      sid: l\n    });\n    s.push(d);\n  }), r.length === 0) {\n    const l = nt({\n      type: i,\n      marker: We\n    });\n    s.push(l);\n  }\n  if (s.push(...t), r.length === 0) {\n    const l = nt({\n      type: i,\n      marker: rt\n    });\n    s.push(l);\n  }\n  (!n || !Qa(n)) && r.forEach((l) => {\n    const d = nt({\n      type: i,\n      marker: rt,\n      eid: l\n    });\n    s.push(d);\n  });\n}\nfunction Ie(t, r) {\n  const e = [];\n  let n, s = [];\n  return t.forEach((i, a) => {\n    const o = i, c = i, l = i, d = i, u = i, h = i, y = i, m = i;\n    switch (i.type) {\n      case ge.getType():\n        e.push(\n          Rl(o, Ie(o.children))\n        );\n        break;\n      case ve.getType():\n        e.push(Ll(i));\n        break;\n      case xe.getType():\n        e.push(\n          Ol(c, Ie(c.children))\n        );\n        break;\n      case de.getType():\n      case le.getType():\n        e.push(Dl(i));\n        break;\n      case W.getType():\n        e.push(\n          Fl(l, Ie(l.children))\n        );\n        break;\n      case fe.getType():\n        e.push(\n          Ul(d, Ie(d.children))\n        );\n        break;\n      case ee.getType():\n        e.push(\n          Bl(\n            u,\n            Ie(u.children, u.caller)\n          )\n        );\n        break;\n      case De.getType():\n      case _e.getType():\n      case ss.getType():\n      case tt.getType():\n        break;\n      case re.getType():\n        if (n = Ie(y.children), n) {\n          const b = y.typedIDs[qe];\n          if (b)\n            Kl(n, b, s, t[a + 1], e), s = b;\n          else {\n            const C = n.shift();\n            C && (typeof C == \"string\" ? Lr(e, C) : e.push(C)), n.length > 0 && e.push(...n);\n          }\n        }\n        break;\n      case Se.getType():\n        e.push(nt(i));\n        break;\n      case Ae.getType():\n        h.text && h.text !== B && !h.text.startsWith(Rn) && (!r || h.text !== Kn(r)) && Lr(e, Hl(h));\n        break;\n      case et.getType():\n        e.push(\n          Vl(m, Ie(m.children))\n        );\n        break;\n      case Fe.getType():\n        e.push(jl(i));\n        break;\n      default:\n        Vt == null || Vt.error(`Unexpected node type '${i.type}'!`);\n    }\n  }), e && e.length > 0 ? e : void 0;\n}\nfunction oi(t) {\n  const r = t.findIndex((e) => Fn(e));\n  if (r >= 0) {\n    const e = t.slice(0, r), n = t[r].children, s = oi(t.slice(r + 1));\n    t = [...e, ...n, ...s];\n  }\n  return t;\n}\nconst pn = {\n  initialize: $l,\n  deserializeEditorState: Il\n}, Or = ci([]), Jl = {\n  type: ss.getType(),\n  version: 1\n};\nlet yt = [], T, mt, jt, $;\nfunction Wl(t, r) {\n  yt = [], Yl(t), Xl(r);\n}\nfunction zl(t = 0) {\n}\nfunction Gl(t, r) {\n  T = r ?? cr();\n  let e;\n  return t ? (t.type !== Jt && ($ == null || $.warn(`This USJ type '${t.type}' didn't match the expected type '${Jt}'.`)), t.version !== Kt && ($ == null || $.warn(\n    `This USJ version '${t.version}' didn't match the expected version '${Kt}'.`\n  )), t.content.length > 0 ? e = En(gt(t.content)) : e = [Or]) : e = [Or], jt == null || jt(yt), {\n    root: {\n      children: e,\n      direction: null,\n      format: \"\",\n      indent: 0,\n      type: \"root\",\n      version: 1\n    }\n  };\n}\nfunction Yl(t) {\n  t && (mt = t), t != null && t.addMissingComments && (jt = t.addMissingComments);\n}\nfunction Xl(t) {\n  t && ($ = t);\n}\nfunction Ql(t) {\n  return !t || t.length !== 1 || typeof t[0] != \"string\" ? \"\" : t[0];\n}\nfunction Zl(t) {\n  let { marker: r } = t;\n  r !== _t && ($ == null || $.warn(`Unexpected book marker '${r}'!`)), r = r ?? _t;\n  const { code: e } = t;\n  (!e || !ge.isValidBookCode(e)) && ($ == null || $.warn(`Unexpected book code '${e}'!`));\n  const n = [];\n  ((T == null ? void 0 : T.markerMode) === \"editable\" || (T == null ? void 0 : T.markerMode) === \"visible\") && n.push(\n    Xe(\"marker\", $e(r) + \" \" + e + B)\n  );\n  const s = Ql(t.content);\n  s && n.push(Ye(s));\n  const i = te(t);\n  return X({\n    type: ge.getType(),\n    marker: r,\n    code: e ?? \"\",\n    unknownAttributes: i,\n    children: n,\n    direction: null,\n    format: \"\",\n    indent: 0,\n    version: gs\n  });\n}\nfunction ed(t) {\n  let { marker: r } = t;\n  r !== zt && ($ == null || $.warn(`Unexpected chapter marker '${r}'!`)), r = r ?? zt;\n  const { number: e, sid: n, altnumber: s, pubnumber: i } = t, a = te(t);\n  let o;\n  return (T == null ? void 0 : T.markerMode) === \"visible\" && (o = !0), (T == null ? void 0 : T.markerMode) === \"editable\" ? X({\n    type: xe.getType(),\n    marker: r,\n    number: e ?? \"\",\n    sid: n,\n    altnumber: s,\n    pubnumber: i,\n    unknownAttributes: a,\n    children: [Ye(vt(r, e) ?? \"\")],\n    direction: null,\n    format: \"\",\n    indent: 0,\n    version: _s\n  }) : X({\n    type: ve.getType(),\n    marker: r,\n    number: e ?? \"\",\n    showMarker: o,\n    sid: n,\n    altnumber: s,\n    pubnumber: i,\n    unknownAttributes: a,\n    version: Ss\n  });\n}\nfunction td(t) {\n  let { marker: r } = t;\n  r !== Gt && ($ == null || $.warn(`Unexpected verse marker '${r}'!`)), r = r ?? Gt;\n  const { number: e, sid: n, altnumber: s, pubnumber: i } = t, o = (Pl(T) ?? de).getType(), c = (T == null ? void 0 : T.markerMode) === \"editable\" ? Is : Js;\n  let l, d;\n  (T == null ? void 0 : T.markerMode) === \"editable\" ? l = vt(r, e) : (T == null ? void 0 : T.markerMode) === \"visible\" && (d = !0);\n  const u = te(t);\n  return X({\n    type: o,\n    text: l,\n    marker: r,\n    number: e ?? \"\",\n    sid: n,\n    altnumber: s,\n    pubnumber: i,\n    showMarker: d,\n    unknownAttributes: u,\n    version: c\n  });\n}\nfunction nd(t, r = []) {\n  let { marker: e } = t;\n  W.isValidMarker(e) || $ == null || $.warn(`Unexpected char marker '${e}'!`), e = e ?? \"\", (T == null ? void 0 : T.markerMode) === \"editable\" && r.forEach((s) => {\n    jn(s) && (s.text = B + s.text);\n  });\n  const n = te(t);\n  return X({\n    type: W.getType(),\n    marker: e,\n    unknownAttributes: n,\n    children: [...r],\n    direction: null,\n    format: \"\",\n    indent: 0,\n    textFormat: 0,\n    textStyle: \"\",\n    version: Ts\n  });\n}\nfunction ci(t) {\n  return {\n    type: Re.getType(),\n    children: t,\n    direction: null,\n    format: \"\",\n    indent: 0,\n    textFormat: 0,\n    textStyle: \"\",\n    version: As\n  };\n}\nfunction rd(t, r = []) {\n  let { marker: e } = t;\n  fe.isValidMarker(e) || $ == null || $.warn(`Unexpected para marker '${e}'!`), e = e ?? rn;\n  const n = [];\n  (T == null ? void 0 : T.markerMode) === \"editable\" ? n.push(ot(e), Ye(B)) : (T == null ? void 0 : T.markerMode) === \"visible\" && n.push(Xe(\"marker\", $e(e) + B)), n.push(...r);\n  const s = te(t);\n  return X({\n    type: fe.getType(),\n    marker: e,\n    unknownAttributes: s,\n    children: n,\n    direction: null,\n    format: \"\",\n    indent: 0,\n    textFormat: 0,\n    textStyle: \"\",\n    version: $s\n  });\n}\nfunction sd(t, r) {\n  const e = Ka(r);\n  let n = () => {\n  };\n  return mt != null && mt.noteCallerOnClick && (n = mt.noteCallerOnClick), X({\n    type: _e.getType(),\n    caller: t,\n    previewText: e,\n    onClick: n,\n    version: Zs\n  });\n}\nfunction id(t, r) {\n  let { marker: e } = t;\n  ee.isValidMarker(e) || $ == null || $.warn(`Unexpected note marker '${e}'!`), e = e ?? Un;\n  const { category: n } = t, s = t.caller ?? \"*\", i = (T == null ? void 0 : T.noteMode) !== \"expanded\", a = te(t);\n  let o, c;\n  (T == null ? void 0 : T.markerMode) === \"editable\" ? (o = ot(e), c = ot(e, \"closing\")) : (T == null ? void 0 : T.markerMode) === \"visible\" && (o = Xe(\"marker\", $e(e) + B), c = Xe(\"marker\", st(e) + B));\n  const l = [];\n  let d;\n  if (o && l.push(o), (T == null ? void 0 : T.markerMode) === \"editable\")\n    d = Ye(Kn(s)), l.push(d, ...r);\n  else {\n    const u = Ye(B);\n    d = sd(s, r), l.push(d, u, ...r.flatMap(ad(u)));\n  }\n  return c && l.push(c), X({\n    type: ee.getType(),\n    marker: e,\n    caller: s,\n    isCollapsed: i,\n    category: n,\n    unknownAttributes: a,\n    children: l,\n    direction: null,\n    format: \"\",\n    indent: 0,\n    version: vs\n  });\n}\nfunction ad(t) {\n  return (r) => no(r) ? [r] : [r, t];\n}\nfunction od(t) {\n  let { marker: r } = t;\n  (!r || !Se.isValidMarker(r)) && ($ == null || $.warn(`Unexpected milestone marker '${r}'!`)), r = r ?? \"\";\n  const { sid: e, eid: n } = t, s = te(t);\n  return X({\n    type: Se.getType(),\n    marker: r,\n    sid: e,\n    eid: n,\n    unknownAttributes: s,\n    version: ws\n  });\n}\nfunction Dr(t, r = []) {\n  return {\n    type: re.getType(),\n    typedIDs: { [qe]: r },\n    children: t,\n    direction: null,\n    format: \"\",\n    indent: 0,\n    version: 1\n  };\n}\nfunction cd(t, r) {\n  const { marker: e } = t, n = t.type, s = te(t), i = [...r];\n  return i.forEach((a) => {\n    jn(a) && (a.mode = \"token\");\n  }), X({\n    type: et.getType(),\n    tag: n,\n    marker: e,\n    unknownAttributes: s,\n    children: i,\n    direction: null,\n    format: \"\",\n    indent: 0,\n    version: hs\n  });\n}\nfunction ld(t) {\n  return {\n    type: Fe.getType(),\n    marker: t,\n    version: Hs\n  };\n}\nfunction ot(t, r = \"opening\") {\n  return {\n    type: tt.getType(),\n    marker: t,\n    markerSyntax: r,\n    text: \"\",\n    detail: 0,\n    format: 0,\n    mode: \"normal\",\n    style: \"\",\n    version: 1\n  };\n}\nfunction Ye(t, r = \"normal\") {\n  return {\n    type: Ae.getType(),\n    text: t,\n    detail: 0,\n    format: 0,\n    mode: r,\n    style: \"\",\n    version: 1\n  };\n}\nfunction Xe(t, r) {\n  return {\n    type: De.getType(),\n    text: r,\n    textType: t,\n    version: Bs\n  };\n}\nfunction Fr(t, r) {\n  (T == null ? void 0 : T.markerMode) === \"editable\" ? r.push(ot(t)) : (T == null ? void 0 : T.markerMode) === \"visible\" && r.push(Xe(\"marker\", $e(t)));\n}\nfunction Ur(t, r, e = !1) {\n  W.isValidFootnoteMarker(t) || W.isValidCrossReferenceMarker(t) || ((T == null ? void 0 : T.markerMode) === \"editable\" ? e ? r.push(ot(\"\", \"selfClosing\")) : r.push(ot(t, \"closing\")) : (T == null ? void 0 : T.markerMode) === \"visible\" && r.push(Xe(\"marker\", st(e ? \"\" : t))));\n}\nfunction dd(t, r) {\n  if (t.type !== \"ms\") return;\n  const e = [];\n  if (t.sid && e.push(`sid=\"${t.sid}\"`), t.eid && e.push(`eid=\"${t.eid}\"`), e.length <= 0) return;\n  const n = Rn + e.join(\" \");\n  (T == null ? void 0 : T.markerMode) === \"editable\" ? r.push(Ye(n)) : (T == null ? void 0 : T.markerMode) === \"visible\" && r.push(Xe(\"attribute\", n));\n}\nfunction Br(t, r) {\n  return t.length <= 0 || r === 0 ? t : t.map((e) => e - r);\n}\nfunction ud(t, r) {\n  const e = t.indexOf(r, 0);\n  e > -1 && t.splice(e, 1);\n}\nfunction Hr(t, r) {\n  r.marker === We && r.sid !== void 0 && t.push(r.sid), r.marker === rt && r.eid !== void 0 && ud(t, r.eid);\n}\nfunction Sn(t, r, e = !1, n = []) {\n  if (r.length <= 0 || r[0] >= t.length) return t;\n  const s = r.shift(), i = r.length > 0 ? r.shift() : t.length - 1;\n  if (s === void 0 || i === void 0 || i >= t.length || t.length <= 0)\n    return t;\n  const a = t.slice(0, s), o = e ? [Dr(a, [...n])] : a, c = t[s];\n  Hr(n, c);\n  const l = Sn(\n    t.slice(s + 1, i),\n    Br(r, s + 1),\n    c.marker === We,\n    n\n  ), d = Dr(l, [...n]), u = t[i];\n  Hr(n, u);\n  const h = Sn(\n    t.slice(i + 1),\n    Br(r, i + 1),\n    u.marker === We,\n    n\n  );\n  return [...o, d, ...h];\n}\nfunction gt(t) {\n  const r = [], e = [];\n  return t == null || t.forEach((n) => {\n    if (typeof n == \"string\")\n      n && e.push(Ye(n));\n    else if (!n.type)\n      $ == null || $.error(\"Marker type is missing!\");\n    else\n      switch (n.type) {\n        case ge.getType():\n          e.push(Zl(n));\n          break;\n        case xe.getType():\n          e.push(ed(n));\n          break;\n        case le.getType():\n          T != null && T.hasSpacing || e.push(Jl), e.push(td(n));\n          break;\n        case W.getType():\n          Fr(n.marker ?? \"\", e), e.push(nd(n, gt(n.content))), Ur(n.marker ?? \"\", e);\n          break;\n        case fe.getType():\n          e.push(rd(n, gt(n.content)));\n          break;\n        case ee.getType():\n          e.push(id(n, gt(n.content)));\n          break;\n        case Se.getType():\n          Ea(n.marker ?? \"\") && (r.push(e.length), n.sid !== void 0 && (yt == null || yt.push(n.sid))), e.push(od(n)), Fr(n.marker ?? \"\", e), dd(n, e), Ur(n.marker ?? \"\", e, !0);\n          break;\n        case Fe.getType():\n          e.push(ld(n.marker ?? \"\"));\n          break;\n        default:\n          $ == null || $.warn(`Unknown type-marker '${n.type}-${n.marker}'!`), e.push(cd(n, gt(n.content)));\n      }\n  }), Sn(e, r);\n}\nfunction En(t) {\n  const r = t.findIndex(\n    (n) => ua(n) || qa(n) || $a(n)\n  );\n  if (r >= 0) {\n    const n = En(t.slice(0, r)), s = t[r], i = En(t.slice(r + 1));\n    return [...n, s, ...i];\n  } else if (t.some((n) => \"text\" in n && \"mode\" in n || fo(n)))\n    return [ci(t)];\n  return t;\n}\nconst Nn = {\n  initialize: Wl,\n  reset: zl,\n  serializeEditorState: Gl\n}, Dt = (t) => {\n  if (!ee.isValidMarker(t) || !t.includes(\"f\"))\n    throw new Error(`Invalid footnote marker '${t}'`);\n  return {\n    action: (r) => {\n      const { chapterNum: e, verseNum: n } = r.reference, s = [];\n      return e !== void 0 && n !== void 0 && s.push({\n        type: \"char\",\n        marker: \"fr\",\n        content: [`${e}:${n}`]\n      }), r.noteText && s.push({\n        type: \"char\",\n        marker: \"fq\",\n        content: [r.noteText]\n      }), s.push({ type: \"char\", marker: \"ft\", content: [\"-\"] }), [{\n        type: \"note\",\n        marker: t,\n        caller: Ct,\n        content: s\n      }];\n    }\n  };\n}, Vr = (t) => {\n  if (!ee.isValidMarker(t) || !t.includes(\"x\"))\n    throw new Error(`Invalid cross-reference marker '${t}'`);\n  return {\n    action: (r) => {\n      const { chapterNum: e, verseNum: n } = r.reference, s = [];\n      return e !== void 0 && n !== void 0 && s.push({\n        type: \"char\",\n        marker: \"xo\",\n        content: [`${e}:${n}`]\n      }), s.push({ type: \"char\", marker: \"xt\", content: [\"-\"] }), [{\n        type: \"note\",\n        marker: t,\n        caller: bs,\n        content: s\n      }];\n    }\n  };\n}, fd = {\n  c: {\n    action: (t) => {\n      const { chapterNum: r } = t.reference;\n      return [{\n        type: \"chapter\",\n        marker: \"c\",\n        number: `${r + 1}`\n      }];\n    }\n  },\n  v: {\n    action: (t) => {\n      const { verseNum: r, verse: e } = t.reference;\n      return [{\n        type: \"verse\",\n        marker: \"v\",\n        number: `${xn(r, e)}`\n      }];\n    }\n  },\n  f: Dt(\"f\"),\n  fe: Dt(\"fe\"),\n  ef: Dt(\"ef\"),\n  efe: Dt(\"efe\"),\n  x: Vr(\"x\"),\n  ex: Vr(\"ex\")\n};\nfunction pd(t, r, e, n, s) {\n  const i = hd(t);\n  return { action: (o) => {\n    o.editor.update(() => {\n      var h;\n      const c = ie();\n      Z(c) && (o.noteText = c.getTextContent());\n      const l = (h = i == null ? void 0 : i.action) == null ? void 0 : h.call(i, o);\n      if (!l) return;\n      const d = yr(l, Nn, n), u = cn(d);\n      if (Z(c)) {\n        const y = c.anchor.getNode();\n        if (I(u))\n          Ws(u, c, n), u.getIsCollapsed() || (r.current = u.getKey());\n        else if (c.getTextContent().length > 0)\n          md(\n            c,\n            () => cn(d)\n          );\n        else if (z(u) && !u.isInline()) {\n          const m = c.insertParagraph();\n          if (m) {\n            const b = m.getChildren();\n            u.append(...b), m.replace(u), u.selectStart();\n          }\n        } else if (q(y) && !$t(y) && I(y.getParent()) && c.isCollapsed()) {\n          let m = y.insertAfter(u);\n          if (Yt(u)) {\n            const b = {\n              ...n || cr(),\n              markerMode: \"hidden\"\n            }, C = yr(\n              l,\n              Nn,\n              b\n            ), x = cn(C);\n            m = m.insertAfter(x);\n          }\n          m.insertAfter(J(B));\n        } else {\n          c.insertNodes([u]), _d(u);\n          const m = u.getNextSibling();\n          m ? m.selectStart() : u.selectStart();\n        }\n      } else\n        c == null || c.insertNodes([u]);\n    }, s);\n  }, label: i == null ? void 0 : i.label };\n}\nfunction hd(t) {\n  let r = fd[t];\n  return r || (fe.isValidMarker(t) ? r = {\n    action: () => [{\n      type: fe.getType(),\n      marker: t,\n      content: []\n    }]\n  } : W.isValidMarker(t) && (r = {\n    action: () => [{\n      type: W.getType(),\n      marker: t,\n      content: [\"-\"]\n    }]\n  })), r;\n}\nfunction md(t, r) {\n  const e = t.getNodes(), [n, s] = gd(t);\n  let i;\n  e.forEach((a, o) => {\n    if (z(i) && i.isParentOf(a))\n      return;\n    const c = yd(\n      a,\n      o === 0,\n      o === e.length - 1,\n      n,\n      s\n    );\n    if (!c) {\n      i = void 0;\n      return;\n    }\n    i || (i = r(), c.insertBefore(i)), kd(c, i);\n  }), (q(i) || z(i)) && i.selectEnd();\n}\nfunction gd(t) {\n  const r = t.anchor.offset, e = t.focus.offset;\n  return t.isBackward() ? [e, r] : [r, e];\n}\nfunction yd(t, r, e, n, s) {\n  if (!(se(t) || I(t) || I(t.getParent()))) {\n    if (q(t))\n      return bd(t, r, e, n, s);\n    if (z(t) && t.isInline())\n      return t;\n  }\n}\nfunction bd(t, r, e, n, s) {\n  const i = t.getTextContentSize(), a = r ? n : 0, o = e ? s : i;\n  if (a === 0 && o === 0) return;\n  const c = t.splitText(a, o);\n  return c.length === 1 ? c[0] : c.length === 3 || o === i ? c[1] : c[0];\n}\nfunction kd(t, r) {\n  var e;\n  if (q(r)) {\n    const n = jr(t, r);\n    r.setTextContent(n), t.remove();\n  } else if (z(r)) {\n    const n = r.getChildrenSize();\n    r.append(t);\n    for (let s = 0; s < n; s++) (e = r.getFirstChild()) == null || e.remove();\n    jr(t, r);\n  }\n}\nfunction jr(t, r) {\n  let e = t.getTextContent();\n  if (q(t) && r.isInline() && e.startsWith(\" \")) {\n    e = e.trimStart(), t.setTextContent(e);\n    const n = r.getPreviousSibling();\n    Xn(n), q(n) || r.insertBefore(J(\" \"));\n  }\n  return e;\n}\nfunction _d(t) {\n  me(t) && (Xn(t.getPreviousSibling()), Ys(t.getNextSibling()));\n}\nconst li = {\n  chapter: \"chapter\",\n  verse: \"verse\",\n  char: \"char\",\n  para: \"para\",\n  typedMark: \"editor-typed-mark\",\n  typedMarkOverlap: \"editor-typed-markOverlap\",\n  mark: \"editor-mark\",\n  markOverlap: \"editor-markOverlap\",\n  placeholder: \"editor-placeholder\",\n  paragraph: \"editor-paragraph\",\n  quote: \"editor-quote\",\n  heading: {\n    h1: \"editor-heading-h1\",\n    h2: \"editor-heading-h2\",\n    h3: \"editor-heading-h3\",\n    h4: \"editor-heading-h4\",\n    h5: \"editor-heading-h5\"\n  },\n  list: {\n    nested: {\n      listitem: \"editor-nested-listitem\"\n    },\n    ol: \"editor-list-ol\",\n    ul: \"editor-list-ul\",\n    listitem: \"editor-listitem\"\n  },\n  image: \"editor-image\",\n  link: \"editor-link\",\n  text: {\n    bold: \"editor-text-bold\",\n    italic: \"editor-text-italic\",\n    overflowed: \"editor-text-overflowed\",\n    hashtag: \"editor-text-hashtag\",\n    underline: \"editor-text-underline\",\n    strikethrough: \"editor-text-strikethrough\",\n    underlineStrikethrough: \"editor-text-underlineStrikethrough\"\n  }\n};\nfunction Cd({\n  options: t,\n  editedUsjRef: r,\n  usj: e,\n  setUsj: n\n}) {\n  const { view: s, nodes: i } = t || {}, { hasSpacing: a, isFormattedFont: o, markerMode: c } = s || {};\n  return A(() => {\n    r.current && !Ee(r.current, e) && n(r.current);\n  }, [r, a, o, c, i, n, e]), null;\n}\nfunction xd({\n  scrRef: t,\n  onScrRefChange: r\n}) {\n  const [e] = V(), n = O(!1), s = O(!1), { book: i, chapterNum: a, verseNum: o } = t;\n  return A(\n    () => e.registerMutationListener(\n      ge,\n      (c) => {\n        e.update(\n          () => {\n            for (const [l, d] of c) {\n              const u = K(l);\n              u && Te(u) && d === \"created\" && Kr(a, o, s);\n            }\n          },\n          { tag: kn }\n        );\n      },\n      { skipInitialization: !0 }\n    ),\n    [e, a, o]\n  ), A(() => {\n    n.current ? n.current = !1 : e.update(() => Kr(a, o, s), {\n      tag: kn\n    });\n  }, [e, a, o]), A(\n    () => e.registerCommand(\n      dt,\n      () => (s.current ? s.current = !1 : Md(\n        i,\n        a,\n        o,\n        r,\n        n\n      ), !1),\n      Nt\n    ),\n    [e, i, a, o, r]\n  ), null;\n}\nfunction Kr(t, r, e) {\n  var d;\n  const n = Ds(ie()), s = (d = Gs(n)) == null ? void 0 : d.getNumber();\n  if (Wa(s) && Wn(r, s)) return;\n  const i = Pe().getChildren(), a = Ra(i, t), o = ja(i, a), c = La(o, !!a);\n  if (c && !a || !a) return;\n  Va(o, c);\n  const l = ko(o, r);\n  if (l) {\n    if (oe(l)) {\n      const u = l.getFirstChild();\n      q(u) ? u.select(0, 0) : l.select(0, 0);\n    } else l.selectNext(0, 0);\n    e.current = !0;\n  }\n}\nfunction Md(t, r, e, n, s) {\n  const i = Ds(ie());\n  if (!i) return;\n  const a = Vn(i), o = parseInt((a == null ? void 0 : a.getNumber()) ?? \"1\", 10), c = Gs(i), l = c == null ? void 0 : c.getNumber(), d = parseInt(l ?? \"0\", 10), u = l ? Wn(e, l) : e === d;\n  if (s.current = !!(a && o !== r || !u), s.current) {\n    const h = {\n      book: t,\n      chapterNum: o,\n      verseNum: d\n    };\n    l != null && d.toString() !== l && (h.verse = l), n(h);\n  }\n}\nfunction Td(t) {\n  return Te(t) ? `${t.__code}` : On(t) ? `${t.__marker} \"${t.__number}\"` : H(t) ? `${t.__marker}` : Pt(t) ? `${t.__marker} \"${t.__number}\"` : Ue(t) ? `${t.__caller}` : ut(t) ? `${t.__marker} \"${t.__number}\"` : I(t) ? `${t.__marker} \"${t.__caller}\"` + (t.__isCollapsed ? \" (collapsed)\" : \" (expanded)\") : oe(t) ? `${t.__marker}` : se(t) ? `ids: [ ${JSON.stringify(t.getTypedIDs())} ]` : Hn(t) ? `${t.__marker} \"${t.__number}\"` : \"\";\n}\nfunction Sd() {\n  const [t] = V();\n  return /* @__PURE__ */ g(\n    Vi,\n    {\n      viewClassName: \"tree-view-output\",\n      treeTypeButtonClassName: \"debug-treetype-button\",\n      timeTravelPanelClassName: \"debug-timetravel-panel\",\n      timeTravelButtonClassName: \"debug-timetravel-button\",\n      timeTravelPanelSliderClassName: \"debug-timetravel-panel-slider\",\n      timeTravelPanelButtonClassName: \"debug-timetravel-panel-button\",\n      customPrintNode: Td,\n      editor: t\n    }\n  );\n}\nconst di = Qr(null), Jr = 4;\nfunction Ed({\n  children: t,\n  className: r,\n  onClick: e,\n  title: n\n}) {\n  const s = O(null), i = Zr(di);\n  if (i === null)\n    throw new Error(\"DropDownItem must be used within a DropDown\");\n  const { registerItem: a } = i;\n  return A(() => {\n    s && s.current && a(s);\n  }, [s, a]), /* @__PURE__ */ g(\"button\", { className: r, onClick: e, ref: s, title: n, type: \"button\", children: t });\n}\nfunction Nd({\n  children: t,\n  dropDownRef: r,\n  onClose: e\n}) {\n  const [n, s] = D(), [i, a] = D(), o = j(\n    (d) => {\n      s((u) => u ? [...u, d] : [d]);\n    },\n    [s]\n  ), c = (d) => {\n    if (!n) return;\n    const u = d.key;\n    [\"Escape\", \"ArrowUp\", \"ArrowDown\", \"Tab\"].includes(u) && d.preventDefault(), u === \"Escape\" || u === \"Tab\" ? e() : u === \"ArrowUp\" ? a((h) => {\n      if (!h) return n[0];\n      const y = n.indexOf(h) - 1;\n      return n[y === -1 ? n.length - 1 : y];\n    }) : u === \"ArrowDown\" && a((h) => h ? n[n.indexOf(h) + 1] : n[0]);\n  }, l = ce(\n    () => ({\n      registerItem: o\n    }),\n    [o]\n  );\n  return A(() => {\n    n && !i && a(n[0]), i && i.current && i.current.focus();\n  }, [n, i]), /* @__PURE__ */ g(di.Provider, { value: l, children: /* @__PURE__ */ g(\"div\", { className: \"dropdown\", ref: r, onKeyDown: c, children: t }) });\n}\nfunction Ad({\n  disabled: t = !1,\n  buttonLabel: r,\n  buttonAriaLabel: e,\n  buttonClassName: n,\n  buttonIconClassName: s,\n  children: i,\n  stopCloseOnClickSelf: a\n}) {\n  const o = O(null), c = O(null), [l, d] = D(!1), u = () => {\n    d(!1), c && c.current && c.current.focus();\n  };\n  return A(() => {\n    const h = c.current, y = o.current;\n    if (l && h !== null && y !== null) {\n      const { top: m, left: b } = h.getBoundingClientRect();\n      y.style.top = `${m + h.offsetHeight + Jr}px`, y.style.left = `${Math.min(b, window.innerWidth - y.offsetWidth - 20)}px`;\n    }\n  }, [o, c, l]), A(() => {\n    const h = c.current;\n    if (h !== null && l) {\n      const y = (m) => {\n        const b = m.target;\n        a && o.current && o.current.contains(b) || h.contains(b) || d(!1);\n      };\n      return document.addEventListener(\"click\", y), () => {\n        document.removeEventListener(\"click\", y);\n      };\n    }\n    return () => {\n    };\n  }, [o, c, l, a]), A(() => {\n    const h = () => {\n      if (l) {\n        const y = c.current, m = o.current;\n        if (y !== null && m !== null) {\n          const { top: b } = y.getBoundingClientRect(), C = b + y.offsetHeight + Jr;\n          C !== m.getBoundingClientRect().top && (m.style.top = `${C}px`);\n        }\n      }\n    };\n    return document.addEventListener(\"scroll\", h), () => {\n      document.removeEventListener(\"scroll\", h);\n    };\n  }, [c, o, l]), /* @__PURE__ */ U(je, { children: [\n    /* @__PURE__ */ U(\n      \"button\",\n      {\n        type: \"button\",\n        disabled: t,\n        \"aria-label\": e || r,\n        className: n,\n        onClick: () => d(!l),\n        ref: c,\n        children: [\n          s && /* @__PURE__ */ g(\"span\", { className: s }),\n          r && /* @__PURE__ */ g(\"span\", { className: \"text dropdown-button-text\", children: r }),\n          /* @__PURE__ */ g(\"i\", { className: \"chevron-down\" })\n        ]\n      }\n    ),\n    l && Ve(\n      /* @__PURE__ */ g(Nd, { dropDownRef: o, onClose: u, children: i }),\n      document.body\n    )\n  ] });\n}\nconst An = {\n  m: \"m - Paragraph - Margin - No First Line Indent\",\n  ms: \"ms - Heading - Major Section Level 1\",\n  nb: \"nb - Paragraph - No Break with Previous Paragraph\",\n  p: \"p - Paragraph - Normal - First Line Indent\",\n  pi: \"pi - Paragraph - Indented - Level 1 - First Line Indent\",\n  q1: \"q1 - Poetry - Indent Level 1\",\n  q2: \"q2 - Poetry - Indent Level 2\",\n  r: \"r - Heading - Parallel References\",\n  s: \"s - Heading - Section Level 1\"\n  // do not allow `b - Poetry - Stanza Break (Blank Line)` here to avoid a USFM validity issue.\n}, wn = {\n  ...An,\n  ide: \"ide - File - Encoding\",\n  h: \"h - File - Header\",\n  h1: \"h1 - File - Header\",\n  h2: \"h2 - File - Left Header\",\n  h3: \"h3 - File - Right Header\",\n  toc1: \"toc1 - File - Long Table of Contents Text\",\n  toc2: \"toc2 - File - Short Table of Contents Text\",\n  toc3: \"toc3 - File - Book Abbreviation\",\n  cl: \"cl - Chapter - Publishing Label\",\n  mt: \"mt - Title - Major Title Level 1\",\n  mt1: \"mt1 - Title - Major Title Level 1\",\n  mt2: \"mt2 - Title - Major Title Level 2\",\n  mt3: \"mt3 - Title - Major Title Level 3\",\n  mt4: \"mt4 - Title - Major Title Level 4\",\n  ms1: \"ms1 - Heading - Major Section Level 1\",\n  ms2: \"ms2 - Heading - Major Section Level 2\",\n  ms3: \"ms3 - Heading - Major Section Level 3\",\n  b: \"b - Poetry - Stanza Break (Blank Line)\"\n};\nfunction wd({\n  editorRef: t,\n  blockMarker: r,\n  disabled: e = !1\n}) {\n  return /* @__PURE__ */ g(\n    Ad,\n    {\n      disabled: e,\n      buttonClassName: \"toolbar-item block-controls\",\n      buttonIconClassName: \"icon block-marker \" + Pd(r),\n      buttonLabel: vd(r),\n      buttonAriaLabel: \"Formatting options for block type\",\n      children: Object.keys(An).map((n) => /* @__PURE__ */ U(\n        Ed,\n        {\n          className: \"item block-marker \" + $d(r === n),\n          onClick: () => {\n            var s;\n            return (s = t.current) == null ? void 0 : s.formatPara(n);\n          },\n          children: [\n            /* @__PURE__ */ g(\"i\", { className: \"icon block-marker \" + n }),\n            /* @__PURE__ */ g(\"span\", { className: \"text usfm_\" + n, children: An[n] })\n          ]\n        },\n        n\n      ))\n    }\n  );\n}\nfunction Pd(t) {\n  return t && t in wn ? t : \"ban\";\n}\nfunction vd(t) {\n  return t && t in wn ? wn[t] : \"No Style\";\n}\nfunction $d(t) {\n  return t ? \"active dropdown-item-active\" : \"\";\n}\nfunction Wr() {\n  return /* @__PURE__ */ g(\"div\", { className: \"divider\" });\n}\nconst Id = Qe(function({ editorRef: r, isReadonly: e = !1, onStateChange: n }, s) {\n  const [i] = V(), [a, o] = D(i), [c, l] = D(), [d, u] = D(!1), [h, y] = D(!1), m = j(\n    (b, C, x) => {\n      u(b), y(C), l(x), n == null || n(b, C, x);\n    },\n    [n]\n  );\n  return A(() => i.registerCommand(\n    dt,\n    (b, C) => (o(C), !1),\n    Ut\n  ), [i]), /* @__PURE__ */ U(je, { children: [\n    /* @__PURE__ */ g(ai, { onStateChange: m }),\n    /* @__PURE__ */ U(\"div\", { className: \"toolbar\", children: [\n      /* @__PURE__ */ g(\n        \"button\",\n        {\n          disabled: !d || e,\n          onClick: () => {\n            a.dispatchCommand(is, void 0);\n          },\n          title: mn ? \"Undo (âŒ˜Z)\" : \"Undo (Ctrl+Z)\",\n          type: \"button\",\n          className: \"toolbar-item spaced\",\n          \"aria-label\": \"Undo\",\n          children: /* @__PURE__ */ g(\"i\", { className: \"format undo\" })\n        }\n      ),\n      /* @__PURE__ */ g(\n        \"button\",\n        {\n          disabled: !h || e,\n          onClick: () => {\n            a.dispatchCommand(as, void 0);\n          },\n          title: mn ? \"Redo (âŒ˜Y)\" : \"Redo (Ctrl+Y)\",\n          type: \"button\",\n          className: \"toolbar-item\",\n          \"aria-label\": \"Redo\",\n          children: /* @__PURE__ */ g(\"i\", { className: \"format redo\" })\n        }\n      ),\n      /* @__PURE__ */ g(Wr, {}),\n      a === i && /* @__PURE__ */ U(je, { children: [\n        /* @__PURE__ */ g(\n          wd,\n          {\n            editorRef: r,\n            blockMarker: c,\n            disabled: e\n          }\n        ),\n        /* @__PURE__ */ g(Wr, {})\n      ] }),\n      /* @__PURE__ */ g(\"div\", { ref: s, className: \"end-container\" })\n    ] })\n  ] });\n}), zr = {\n  namespace: \"platformEditor\",\n  theme: li,\n  editable: !0,\n  editorState: void 0,\n  // Handling of errors during update\n  onError(t) {\n    throw t;\n  },\n  nodes: [re, ...Yo]\n}, qd = cr(), Rd = {}, Ld = {};\nfunction Od() {\n  return /* @__PURE__ */ g(\"div\", { className: \"editor-placeholder\", children: \"Enter some Scripture...\" });\n}\nconst ui = Qe(function({\n  defaultUsj: r,\n  scrRef: e,\n  onScrRefChange: n,\n  onSelectionChange: s,\n  onUsjChange: i,\n  onStateChange: a,\n  options: o,\n  logger: c,\n  children: l\n}, d) {\n  const u = O(null), h = O(null), y = O(null), m = O(r), b = O(), [C, x] = D(r), [k, _] = D(0), {\n    isReadonly: E = !1,\n    hasExternalUI: L = !1,\n    hasSpellCheck: G = !1,\n    textDirection: ne = \"ltr\",\n    markerMenuTrigger: P = \"\\\\\",\n    view: v = qd,\n    nodes: R = Rd,\n    debug: F = !1\n  } = o ?? Ld;\n  zr.editable = !E, pn.initialize(c), Pn(d, () => ({\n    focus() {\n      var M;\n      (M = u.current) == null || M.focus();\n    },\n    undo() {\n      var M;\n      (M = u.current) == null || M.dispatchCommand(is, void 0);\n    },\n    redo() {\n      var M;\n      (M = u.current) == null || M.dispatchCommand(as, void 0);\n    },\n    cut() {\n      var M;\n      (M = u.current) == null || M.dispatchCommand(qn, null);\n    },\n    copy() {\n      var M;\n      (M = u.current) == null || M.dispatchCommand(In, null);\n    },\n    paste() {\n      u.current && rr(u.current);\n    },\n    pastePlainText() {\n      u.current && sr(u.current);\n    },\n    getUsj() {\n      return m.current;\n    },\n    setUsj(M) {\n      if (!Ee(m.current, M)) {\n        m.current = M;\n        const w = Ee(C, M);\n        x(M), w && _((N) => N + 1);\n      }\n    },\n    applyUpdate(M, w = \"remote\") {\n      var ue, Be;\n      (ue = u.current) == null || ue.update(\n        () => {\n          w === \"remote\" && Di(Cn), kc(M, v, R, c);\n        },\n        { discrete: !0 }\n      );\n      const N = (Be = u.current) == null ? void 0 : Be.getEditorState();\n      if (!N) return;\n      const Q = pn.deserializeEditorState(N);\n      if (Q) {\n        const qt = !Ee(m.current, Q);\n        if (qt && (m.current = Q), qt || !Ee(C, Q)) {\n          const on = Mr(M, N);\n          i == null || i(Q, M, w, on);\n        }\n      }\n    },\n    replaceEmbedUpdate(M, w) {\n      var Q;\n      const N = (Q = u.current) == null ? void 0 : Q.read(() => Ao(M, w));\n      N && this.applyUpdate(N);\n    },\n    getSelection() {\n      var M;\n      return (M = u.current) == null ? void 0 : M.read(js);\n    },\n    setSelection(M) {\n      var w;\n      (w = u.current) == null || w.update(\n        () => {\n          const N = Gn(M);\n          N !== void 0 && rs(N);\n        },\n        { tag: ks }\n      );\n    },\n    addAnnotation(M, w, N) {\n      var Q;\n      (Q = h.current) == null || Q.addAnnotation(M, mr(w), N);\n    },\n    removeAnnotation(M, w) {\n      var N;\n      (N = h.current) == null || N.removeAnnotation(mr(M), w);\n    },\n    formatPara(M) {\n      var w;\n      (w = u.current) == null || w.update(() => {\n        const N = ie();\n        Z(N) && Ji(N, () => xt(M));\n      });\n    },\n    getElementByKey(M) {\n      var w;\n      return (w = u.current) == null ? void 0 : w.read(\n        () => {\n          var N;\n          return ((N = u.current) == null ? void 0 : N.getElementByKey(M)) ?? void 0;\n        }\n      );\n    },\n    insertNote(M, w, N) {\n      var Q;\n      (Q = u.current) == null || Q.update(() => {\n        const ue = po(\n          M,\n          w,\n          N,\n          e,\n          v,\n          R,\n          c\n        );\n        ue && !ue.getIsCollapsed() && (b.current = ue.getKey());\n      });\n    },\n    selectNote(M) {\n      var w;\n      (w = u.current) == null || w.update(() => {\n        const N = Cr(M);\n        N && (mo(N, v), N.getIsCollapsed() || (b.current = N.getKey()));\n      });\n    },\n    getNoteOps(M) {\n      var w;\n      return (w = u.current) == null ? void 0 : w.read(() => {\n        const N = Cr(M);\n        if (N)\n          return Zn(N);\n      });\n    },\n    get toolbarEndRef() {\n      return y;\n    }\n  }));\n  const Y = j(\n    (M, w, N, Q) => {\n      if (ma.some((Be) => N.has(Be))) return;\n      const ue = pn.deserializeEditorState(M);\n      if (ue) {\n        const Be = !Ee(m.current, ue);\n        if (Be && (m.current = ue), Be || !Ee(C, ue)) {\n          const qt = N.has(Cn) ? \"remote\" : \"local\", on = Mr(Q, M);\n          i == null || i(ue, Q, qt, on);\n        }\n      }\n    },\n    [C, i]\n  );\n  return /* @__PURE__ */ U(cs, { initialConfig: zr, children: [\n    /* @__PURE__ */ g(Yc, { isEditable: !E }),\n    /* @__PURE__ */ U(\"div\", { className: \"editor-container\", children: [\n      L ? /* @__PURE__ */ g(ai, { onStateChange: a }) : /* @__PURE__ */ g(\"div\", { className: \"editor-toolbar-container\" + (E ? \"-readonly\" : \"-editable\"), children: /* @__PURE__ */ g(\n        Id,\n        {\n          ref: y,\n          editorRef: d,\n          isReadonly: E,\n          onStateChange: a\n        }\n      ) }),\n      /* @__PURE__ */ U(\"div\", { className: \"editor-inner\", children: [\n        /* @__PURE__ */ g(ds, { editorRef: u }),\n        /* @__PURE__ */ g(\n          Ki,\n          {\n            contentEditable: /* @__PURE__ */ g(\n              ls,\n              {\n                className: `editor-input usfm ${vl(v).join(\" \")}`,\n                spellCheck: G\n              }\n            ),\n            placeholder: /* @__PURE__ */ g(Od, {}),\n            ErrorBoundary: us\n          }\n        ),\n        /* @__PURE__ */ g(fs, {}),\n        e && n && /* @__PURE__ */ g(xd, { scrRef: e, onScrRefChange: n }),\n        e && /* @__PURE__ */ g(\n          xl,\n          {\n            trigger: P,\n            scrRef: e,\n            getMarkerAction: (M, w) => pd(M, b, w, v)\n          }\n        ),\n        /* @__PURE__ */ g(\n          Cd,\n          {\n            options: { view: v, nodes: R },\n            editedUsjRef: m,\n            usj: C,\n            setUsj: x\n          }\n        ),\n        /* @__PURE__ */ g(\n          Xc,\n          {\n            scripture: C,\n            nodeOptions: R,\n            editorAdaptor: Nn,\n            viewOptions: v,\n            logger: c\n          },\n          k\n        ),\n        /* @__PURE__ */ g(dl, { onChange: s }),\n        /* @__PURE__ */ g(\n          yc,\n          {\n            onChange: Y,\n            ignoreSelectionChange: !0,\n            ignoreHistoryMergeTagChange: !0\n          }\n        ),\n        /* @__PURE__ */ g(gc, { ref: h, logger: c }),\n        /* @__PURE__ */ g(Rc, { viewOptions: v }),\n        /* @__PURE__ */ g(Bc, {}),\n        /* @__PURE__ */ g(jc, {}),\n        /* @__PURE__ */ g(Kc, { logger: c }),\n        /* @__PURE__ */ g(Gc, {}),\n        /* @__PURE__ */ g(\n          Qc,\n          {\n            expandedNoteKeyRef: b,\n            nodeOptions: R,\n            viewOptions: v,\n            logger: c\n          }\n        ),\n        /* @__PURE__ */ g(ul, {}),\n        /* @__PURE__ */ g(hl, { textDirection: ne }),\n        /* @__PURE__ */ g(yl, {}),\n        l\n      ] }),\n      F && /* @__PURE__ */ g(Sd, {})\n    ] })\n  ] });\n}), Ru = Qe(function(r, e) {\n  const { children: n, ...s } = r;\n  return /* @__PURE__ */ g(ui, { ref: e, ...s });\n});\nfunction fi() {\n  return Math.random().toString(36).replace(/[^a-z]+/g, \"\").substr(0, 5);\n}\nfunction en(t, r, e, n, s) {\n  return {\n    author: r,\n    content: t,\n    deleted: s === void 0 ? !1 : s,\n    id: e === void 0 ? fi() : e,\n    timeStamp: n === void 0 ? performance.timeOrigin + performance.now() : n,\n    type: \"comment\"\n  };\n}\nfunction pi(t, r, e) {\n  return {\n    comments: r,\n    id: e === void 0 ? fi() : e,\n    quote: t,\n    type: \"thread\"\n  };\n}\nfunction Gr(t) {\n  return {\n    comments: Array.from(t.comments),\n    id: t.id,\n    quote: t.quote,\n    type: \"thread\"\n  };\n}\nfunction Dd(t) {\n  return {\n    author: t.author,\n    content: \"[Deleted Comment]\",\n    deleted: !0,\n    id: t.id,\n    timeStamp: t.timeStamp,\n    type: \"comment\"\n  };\n}\nfunction hn(t) {\n  const r = t._changeListeners;\n  for (const e of r)\n    e();\n}\nclass Fd {\n  /**\n   * Creates a new CommentStore instance.\n   *\n   * @param editor - The LexicalEditor instance.\n   * @param logger - Optional logger instance.\n   */\n  constructor(r, e) {\n    S(this, \"_editor\");\n    S(this, \"_comments\");\n    S(this, \"_changeListeners\");\n    S(this, \"_collabProvider\");\n    S(this, \"logger\");\n    this._comments = [], this._editor = r, this.logger = e, this._collabProvider = null, this._changeListeners = /* @__PURE__ */ new Set();\n  }\n  /**\n   * Checks if collaborative editing is enabled.\n   *\n   * @returns True if collaborative editing is enabled, false otherwise.\n   */\n  isCollaborative() {\n    return this._collabProvider !== null;\n  }\n  /**\n   * Gets the current list of comments and threads.\n   *\n   * @returns The Comments array.\n   */\n  getComments() {\n    return this._comments;\n  }\n  /**\n   * Sets the list of comments and threads.\n   *\n   * @param comments - The new Comments array.\n   */\n  setComments(r) {\n    this._comments = r, hn(this);\n  }\n  /**\n   * Adds a comment or thread to the store.\n   *\n   * @param commentOrThread - The comment or thread to add.\n   * @param thread - Optional parent thread to add the comment to.\n   * @param offset - Optional offset for insertion.\n   */\n  addComment(r, e, n) {\n    const s = Array.from(this._comments), i = this._getCollabComments();\n    if (e !== void 0 && r.type === \"comment\")\n      for (let a = 0; a < s.length; a++) {\n        const o = s[a];\n        if (o.type === \"thread\" && o.id === e.id) {\n          const c = Gr(o);\n          s.splice(a, 1, c);\n          const l = n !== void 0 ? n : c.comments.length;\n          if (this.isCollaborative() && i !== null) {\n            const d = i.get(a).get(\"comments\");\n            this._withRemoteTransaction(() => {\n              const u = this._createCollabSharedMap(r);\n              d.insert(l, [u]);\n            });\n          }\n          c.comments.splice(l, 0, r);\n          break;\n        }\n      }\n    else {\n      const a = n !== void 0 ? n : s.length;\n      this.isCollaborative() && i !== null && this._withRemoteTransaction(() => {\n        const o = this._createCollabSharedMap(r);\n        i.insert(a, [o]);\n      }), s.splice(a, 0, r);\n    }\n    this._comments = s, hn(this);\n  }\n  /**\n   * Deletes a comment or thread from the store.\n   *\n   * @param commentOrThread - The comment or thread to delete.\n   * @param thread - Optional parent thread if deleting a comment within a thread.\n   * @returns An object containing the marked comment and its index, or null.\n   */\n  deleteCommentOrThread(r, e) {\n    const n = Array.from(this._comments), s = this._getCollabComments();\n    let i = null;\n    if (e !== void 0)\n      for (let a = 0; a < n.length; a++) {\n        const o = n[a];\n        if (o.type === \"thread\" && o.id === e.id) {\n          const c = Gr(o);\n          n.splice(a, 1, c);\n          const l = c.comments;\n          if (i = l.indexOf(r), this.isCollaborative() && s !== null) {\n            const d = s.get(a).get(\"comments\"), u = i;\n            this._withRemoteTransaction(() => {\n              d.delete(u);\n            });\n          }\n          l.splice(i, 1);\n          break;\n        }\n      }\n    else\n      i = n.indexOf(r), this.isCollaborative() && s !== null && this._withRemoteTransaction(() => {\n        s.delete(i);\n      }), n.splice(i, 1);\n    return this._comments = n, hn(this), r.type === \"comment\" ? {\n      index: i,\n      markedComment: Dd(r)\n    } : null;\n  }\n  /**\n   * Registers a callback to be called when the comments change.\n   *\n   * @param onChange - The callback function.\n   * @returns A function to unregister the callback.\n   */\n  registerOnChange(r) {\n    const e = this._changeListeners;\n    return e.add(r), () => {\n      e.delete(r);\n    };\n  }\n  _withRemoteTransaction(r) {\n    const e = this._collabProvider;\n    e !== null && e.doc.transact(r, this);\n  }\n  _withLocalTransaction(r) {\n    const e = this._collabProvider;\n    try {\n      this._collabProvider = null, r();\n    } finally {\n      this._collabProvider = e;\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _getCollabComments() {\n    const r = this._collabProvider;\n    return r !== null ? r.doc.get(\"comments\", fr) : null;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _createCollabSharedMap(r) {\n    const e = new pr(), n = r.type, s = r.id;\n    if (e.set(\"type\", n), e.set(\"id\", s), n === \"comment\")\n      e.set(\"author\", r.author), e.set(\"content\", r.content), e.set(\"deleted\", r.deleted), e.set(\"timeStamp\", r.timeStamp);\n    else {\n      e.set(\"quote\", r.quote);\n      const i = new fr();\n      r.comments.forEach((a, o) => {\n        const c = this._createCollabSharedMap(a);\n        i.insert(o, [c]);\n      }), e.set(\"comments\", i);\n    }\n    return e;\n  }\n  /**\n   * Registers collaborative editing support using a Yjs provider.\n   *\n   * @param provider - The Yjs Provider instance.\n   * @returns A function to unregister collaboration and cleanup.\n   */\n  registerCollaboration(r) {\n    this._collabProvider = r;\n    const e = this._getCollabComments(), n = () => {\n      r.connect();\n    }, s = () => {\n      try {\n        r.disconnect();\n      } catch {\n      }\n    }, i = this._editor.registerCommand(\n      oa,\n      (o) => {\n        var c, l;\n        return n !== void 0 && s !== void 0 && (o ? ((c = this.logger) == null || c.info(\"Comments connected!\"), n()) : ((l = this.logger) == null || l.info(\"Comments disconnected!\"), s())), !1;\n      },\n      Nt\n    ), a = (o, c) => {\n      if (c.origin !== this) {\n        for (const l of o)\n          if (l instanceof ca) {\n            const d = l.target, u = l.delta;\n            let h = 0;\n            for (const y of u) {\n              const m = y.insert, b = y.retain, C = y.delete, x = d.parent, k = d === e ? void 0 : x instanceof pr && this._comments.find((_) => _.id === x.get(\"id\"));\n              if (Array.isArray(m)) {\n                const _ = h;\n                m.slice().reverse().forEach((E) => {\n                  const L = E.get(\"id\"), ne = E.get(\"type\") === \"thread\" ? pi(\n                    E.get(\"quote\"),\n                    E.get(\"comments\").toArray().map(\n                      (P) => en(\n                        P.get(\"content\"),\n                        P.get(\"author\"),\n                        P.get(\"id\"),\n                        P.get(\"timeStamp\"),\n                        P.get(\"deleted\")\n                      )\n                    ),\n                    L\n                  ) : en(\n                    E.get(\"content\"),\n                    E.get(\"author\"),\n                    L,\n                    E.get(\"timeStamp\"),\n                    E.get(\"deleted\")\n                  );\n                  this._withLocalTransaction(() => {\n                    this.addComment(ne, k, _);\n                  });\n                });\n              } else if (typeof b == \"number\")\n                h += b;\n              else if (typeof C == \"number\")\n                for (let _ = 0; _ < C; _++) {\n                  const E = k === void 0 || k === !1 ? this._comments[h] : k.comments[h];\n                  this._withLocalTransaction(() => {\n                    this.deleteCommentOrThread(E, k);\n                  }), h++;\n                }\n            }\n          }\n      }\n    };\n    return e === null ? () => null : (e.observeDeep(a), n(), () => {\n      e.unobserveDeep(a), i(), this._collabProvider = null;\n    });\n  }\n}\nfunction Ud(t) {\n  const [r, e] = D(t.getComments());\n  return A(() => t.registerOnChange(() => {\n    e(t.getComments());\n  }), [t]), r;\n}\nfunction Bd({\n  onClose: t,\n  children: r,\n  title: e,\n  closeOnClickOutside: n\n}) {\n  const s = O(null);\n  return A(() => {\n    s.current !== null && s.current.focus();\n  }, []), A(() => {\n    let i = null;\n    const a = (l) => {\n      l.key === \"Escape\" && t();\n    }, o = (l) => {\n      const d = l.target;\n      s.current !== null && !s.current.contains(d) && n && t();\n    }, c = s.current;\n    return c !== null && (i = c.parentElement, i !== null && i.addEventListener(\"click\", o)), window.addEventListener(\"keydown\", a), () => {\n      window.removeEventListener(\"keydown\", a), i !== null && (i == null || i.removeEventListener(\"click\", o));\n    };\n  }, [n, t]), /* @__PURE__ */ g(\"div\", { className: \"Modal__overlay\", role: \"dialog\", children: /* @__PURE__ */ U(\"div\", { className: \"Modal__modal\", tabIndex: -1, ref: s, children: [\n    /* @__PURE__ */ g(\"h2\", { className: \"Modal__title\", children: e }),\n    /* @__PURE__ */ g(\n      \"button\",\n      {\n        className: \"Modal__closeButton\",\n        \"aria-label\": \"Close modal\",\n        type: \"button\",\n        onClick: t,\n        children: \"X\"\n      }\n    ),\n    /* @__PURE__ */ g(\"div\", { className: \"Modal__content\", children: r })\n  ] }) });\n}\nfunction Hd({\n  onClose: t,\n  children: r,\n  title: e,\n  closeOnClickOutside: n = !1\n}) {\n  return Ve(\n    /* @__PURE__ */ g(Bd, { onClose: t, title: e, closeOnClickOutside: n, children: r }),\n    document.body\n  );\n}\nfunction hi() {\n  const [t, r] = D(null), e = j(() => {\n    r(null);\n  }, []), n = ce(() => {\n    if (t === null)\n      return null;\n    const { title: i, content: a, closeOnClickOutside: o } = t;\n    return /* @__PURE__ */ g(Hd, { onClose: e, title: i, closeOnClickOutside: o, children: a });\n  }, [t, e]), s = j(\n    (i, a, o = !1) => {\n      r({\n        closeOnClickOutside: o,\n        content: a(e),\n        title: i\n      });\n    },\n    [e]\n  );\n  return [n, s];\n}\nconst Vd = {\n  ...li,\n  paragraph: \"CommentEditorTheme__paragraph\"\n};\nfunction jd(...t) {\n  return t.filter(Boolean).join(\" \");\n}\nfunction Le({\n  \"data-test-id\": t,\n  children: r,\n  className: e,\n  onClick: n,\n  disabled: s,\n  small: i,\n  title: a\n}) {\n  return /* @__PURE__ */ g(\n    \"button\",\n    {\n      disabled: s,\n      className: jd(\n        \"Button__root\",\n        s && \"Button__disabled\",\n        i && \"Button__small\",\n        e\n      ),\n      onClick: n,\n      title: a,\n      \"aria-label\": a,\n      ...t && { \"data-test-id\": t },\n      children: r\n    }\n  );\n}\nfunction Kd({\n  className: t\n}) {\n  return /* @__PURE__ */ g(ls, { className: t || \"ContentEditable__root\" });\n}\nfunction Jd({\n  children: t,\n  className: r\n}) {\n  return /* @__PURE__ */ g(\"div\", { className: r || \"Placeholder__root\", children: t });\n}\nconst Yr = Fi(\"INSERT_INLINE_COMMAND\");\nfunction Wd({\n  anchorKey: t,\n  editor: r,\n  showComments: e,\n  onAddComment: n\n}) {\n  const s = O(null), i = j(() => {\n    const a = s.current, o = r.getRootElement(), c = r.getElementByKey(t);\n    if (a !== null && o !== null && c !== null) {\n      const { right: l } = o.getBoundingClientRect(), { top: d } = c.getBoundingClientRect();\n      a.style.left = `${l - 20}px`, a.style.top = `${d - 30}px`;\n    }\n  }, [t, r]);\n  return A(() => (window.addEventListener(\"resize\", i), () => {\n    window.removeEventListener(\"resize\", i);\n  }), [r, i]), tn(() => {\n    i();\n  }, [t, r, e, i]), /* @__PURE__ */ g(\"div\", { className: \"CommentPlugin_AddCommentBox\", ref: s, children: /* @__PURE__ */ g(\"button\", { className: \"CommentPlugin_AddCommentBox_button\", onClick: n, children: /* @__PURE__ */ g(\"i\", { className: \"icon add-comment\" }) }) });\n}\nfunction zd({ onEscape: t }) {\n  const [r] = V();\n  return A(() => r.registerCommand(\n    Bi,\n    (e) => t(e),\n    Ft\n  ), [r, t]), null;\n}\nfunction mi({\n  className: t,\n  autoFocus: r,\n  onEscape: e,\n  onChange: n,\n  editorRef: s,\n  placeholder: i = \"Type a comment...\"\n}) {\n  return /* @__PURE__ */ g(cs, { initialConfig: {\n    namespace: \"Commenting\",\n    nodes: [],\n    onError: (o) => {\n      throw o;\n    },\n    theme: Vd\n  }, children: /* @__PURE__ */ U(\"div\", { className: \"CommentPlugin_CommentInputBox_EditorContainer\", children: [\n    /* @__PURE__ */ g(\n      sa,\n      {\n        contentEditable: /* @__PURE__ */ g(Kd, { className: t }),\n        placeholder: /* @__PURE__ */ g(Jd, { children: i }),\n        ErrorBoundary: us\n      }\n    ),\n    /* @__PURE__ */ g(ra, { onChange: n }),\n    /* @__PURE__ */ g(fs, {}),\n    r !== !1 && /* @__PURE__ */ g(ta, {}),\n    /* @__PURE__ */ g(zd, { onEscape: e }),\n    /* @__PURE__ */ g(na, {}),\n    s !== void 0 && /* @__PURE__ */ g(ds, { editorRef: s })\n  ] }) });\n}\nfunction gi(t, r) {\n  return j(\n    (e, n) => {\n      e.read(() => {\n        t(ia()), r(!aa(n.isComposing(), !0));\n      });\n    },\n    [r, t]\n  );\n}\nfunction Gd({\n  editor: t,\n  cancelAddComment: r,\n  submitAddComment: e\n}) {\n  const [n, s] = D(\"\"), [i, a] = D(!1), o = O(null), c = ce(\n    () => ({\n      container: document.createElement(\"div\"),\n      elements: []\n    }),\n    []\n  ), l = O(null), d = bi(), u = j(() => {\n    t.getEditorState().read(() => {\n      const b = ie();\n      if (Z(b)) {\n        l.current = b.clone();\n        const C = b.anchor, x = b.focus, k = Wi(\n          t,\n          C.getNode(),\n          C.offset,\n          x.getNode(),\n          x.offset\n        ), _ = o.current;\n        if (k !== null && _ !== null) {\n          const { left: E, bottom: L, width: G } = k.getBoundingClientRect(), ne = zi(t, k);\n          let P = ne.length === 1 ? E + G / 2 - 125 : E - 125;\n          P < 10 && (P = 10), _.style.left = `${P}px`, _.style.top = `${L + 20 + (window.pageYOffset || document.documentElement.scrollTop)}px`;\n          const v = ne.length, { container: R } = c, F = c.elements, Y = F.length;\n          for (let M = 0; M < v; M++) {\n            const w = ne[M];\n            let N = F[M];\n            N === void 0 && (N = document.createElement(\"span\"), F[M] = N, R.appendChild(N));\n            const ue = `position:absolute;top:${w.top + (window.pageYOffset || document.documentElement.scrollTop)}px;left:${w.left}px;height:${w.height}px;width:${w.width}px;background-color:rgba(255, 212, 0, 0.3);pointer-events:none;z-index:5;`;\n            N.style.cssText = ue;\n          }\n          for (let M = Y - 1; M >= v; M--) {\n            const w = F[M];\n            R.removeChild(w), F.pop();\n          }\n        }\n      }\n    });\n  }, [t, c]);\n  tn(() => {\n    u();\n    const b = c.container, C = document.body;\n    return C !== null ? (C.appendChild(b), () => {\n      C.removeChild(b);\n    }) : () => {\n    };\n  }, [c.container, u]), A(() => (window.addEventListener(\"resize\", u), () => {\n    window.removeEventListener(\"resize\", u);\n  }), [u]);\n  const h = (b) => (b.preventDefault(), r(), !0), y = () => {\n    if (i) {\n      let b = t.getEditorState().read(() => {\n        const C = l.current;\n        return C ? C.getTextContent() : \"\";\n      });\n      b.length > 100 && (b = b.slice(0, 99) + \"â€¦\"), e(\n        pi(b, [en(n, d)]),\n        !0,\n        void 0,\n        l.current\n      ), l.current = null;\n    }\n  }, m = gi(s, a);\n  return /* @__PURE__ */ U(\"div\", { className: \"CommentPlugin_CommentInputBox\", ref: o, children: [\n    /* @__PURE__ */ g(\n      mi,\n      {\n        className: \"CommentPlugin_CommentInputBox_Editor\",\n        onEscape: h,\n        onChange: m\n      }\n    ),\n    /* @__PURE__ */ U(\"div\", { className: \"CommentPlugin_CommentInputBox_Buttons\", children: [\n      /* @__PURE__ */ g(Le, { onClick: r, className: \"CommentPlugin_CommentInputBox_Button\", children: \"Cancel\" }),\n      /* @__PURE__ */ g(\n        Le,\n        {\n          onClick: y,\n          disabled: !i,\n          className: \"CommentPlugin_CommentInputBox_Button primary\",\n          children: \"Comment\"\n        }\n      )\n    ] })\n  ] });\n}\nfunction Yd({\n  submitAddComment: t,\n  thread: r,\n  placeholder: e\n}) {\n  const [n, s] = D(\"\"), [i, a] = D(!1), o = O(null), c = bi(), l = gi(s, a);\n  return /* @__PURE__ */ U(je, { children: [\n    /* @__PURE__ */ g(\n      mi,\n      {\n        className: \"CommentPlugin_CommentsPanel_Editor\",\n        autoFocus: !1,\n        onEscape: () => !0,\n        onChange: l,\n        editorRef: o,\n        placeholder: e\n      }\n    ),\n    /* @__PURE__ */ g(\n      Le,\n      {\n        className: \"CommentPlugin_CommentsPanel_SendButton\",\n        onClick: () => {\n          if (i) {\n            t(en(n, c), !1, r);\n            const u = o.current;\n            u !== null && u.dispatchCommand(Hi, void 0);\n          }\n        },\n        disabled: !i,\n        children: /* @__PURE__ */ g(\"i\", { className: \"send\" })\n      }\n    )\n  ] });\n}\nfunction yi({\n  commentOrThread: t,\n  deleteCommentOrThread: r,\n  onClose: e,\n  thread: n = void 0\n}) {\n  return /* @__PURE__ */ U(je, { children: [\n    \"Are you sure you want to delete this \",\n    t.type,\n    \"?\",\n    /* @__PURE__ */ U(\"div\", { className: \"Modal__content\", children: [\n      /* @__PURE__ */ g(\n        Le,\n        {\n          onClick: () => {\n            r(t, n), e();\n          },\n          children: \"Delete\"\n        }\n      ),\n      \" \",\n      /* @__PURE__ */ g(\n        Le,\n        {\n          onClick: () => {\n            e();\n          },\n          children: \"Cancel\"\n        }\n      )\n    ] })\n  ] });\n}\nfunction Xr({\n  comment: t,\n  deleteComment: r,\n  thread: e,\n  rtf: n\n}) {\n  const s = Math.round(\n    (t.timeStamp - (performance.timeOrigin + performance.now())) / 1e3\n  ), i = Math.round(s / 60), [a, o] = hi();\n  return /* @__PURE__ */ U(\"li\", { className: \"CommentPlugin_CommentsPanel_List_Comment\", children: [\n    /* @__PURE__ */ U(\"div\", { className: \"CommentPlugin_CommentsPanel_List_Details\", children: [\n      /* @__PURE__ */ g(\"span\", { className: \"CommentPlugin_CommentsPanel_List_Comment_Author\", children: t.author }),\n      /* @__PURE__ */ U(\"span\", { className: \"CommentPlugin_CommentsPanel_List_Comment_Time\", children: [\n        \"Â· \",\n        s > -10 ? \"Just now\" : n.format(i, \"minute\")\n      ] })\n    ] }),\n    /* @__PURE__ */ g(\"p\", { className: t.deleted ? \"CommentPlugin_CommentsPanel_DeletedComment\" : \"\", children: t.content }),\n    !t.deleted && /* @__PURE__ */ U(je, { children: [\n      /* @__PURE__ */ g(\n        Le,\n        {\n          onClick: () => {\n            o(\"Delete Comment\", (c) => /* @__PURE__ */ g(\n              yi,\n              {\n                commentOrThread: t,\n                deleteCommentOrThread: r,\n                thread: e,\n                onClose: c\n              }\n            ));\n          },\n          className: \"CommentPlugin_CommentsPanel_List_DeleteButton\",\n          children: /* @__PURE__ */ g(\"i\", { className: \"delete\" })\n        }\n      ),\n      a\n    ] })\n  ] });\n}\nfunction Xd({\n  activeIDs: t,\n  comments: r,\n  deleteCommentOrThread: e,\n  listRef: n,\n  submitAddComment: s,\n  markNodeMap: i\n}) {\n  const [a] = V(), [o, c] = D(0), [l, d] = hi(), u = ce(\n    () => new Intl.RelativeTimeFormat(\"en\", {\n      localeMatcher: \"best fit\",\n      numeric: \"auto\",\n      style: \"short\"\n    }),\n    []\n  );\n  return A(() => {\n    const h = setTimeout(() => {\n      c(o + 1);\n    }, 1e4);\n    return () => {\n      clearTimeout(h);\n    };\n  }, [o]), /* @__PURE__ */ g(\"ul\", { className: \"CommentPlugin_CommentsPanel_List\", ref: n, children: r.map((h) => {\n    const y = h.id;\n    return h.type === \"thread\" ? /* @__PURE__ */ U(\n      \"li\",\n      {\n        onClick: () => {\n          const b = i.get(y);\n          if (b !== void 0 && (t === null || t.indexOf(y) === -1)) {\n            const C = document.activeElement;\n            a.update(\n              () => {\n                const x = Array.from(b)[0], k = K(x);\n                se(k) && k.selectStart();\n              },\n              {\n                onUpdate() {\n                  C !== null && C.focus();\n                }\n              }\n            );\n          }\n        },\n        className: `CommentPlugin_CommentsPanel_List_Thread ${i.has(y) ? \"interactive\" : \"\"} ${t.indexOf(y) === -1 ? \"\" : \"active\"}`,\n        children: [\n          /* @__PURE__ */ U(\"div\", { className: \"CommentPlugin_CommentsPanel_List_Thread_QuoteBox\", children: [\n            /* @__PURE__ */ U(\"blockquote\", { className: \"CommentPlugin_CommentsPanel_List_Thread_Quote\", children: [\n              \"> \",\n              /* @__PURE__ */ g(\"span\", { children: h.quote })\n            ] }),\n            /* @__PURE__ */ g(\n              Le,\n              {\n                onClick: () => {\n                  d(\"Delete Thread\", (b) => /* @__PURE__ */ g(\n                    yi,\n                    {\n                      commentOrThread: h,\n                      deleteCommentOrThread: e,\n                      onClose: b\n                    }\n                  ));\n                },\n                className: \"CommentPlugin_CommentsPanel_List_DeleteButton\",\n                children: /* @__PURE__ */ g(\"i\", { className: \"delete\" })\n              }\n            ),\n            l\n          ] }),\n          /* @__PURE__ */ g(\"ul\", { className: \"CommentPlugin_CommentsPanel_List_Thread_Comments\", children: h.comments.map((b) => /* @__PURE__ */ g(\n            Xr,\n            {\n              comment: b,\n              deleteComment: e,\n              thread: h,\n              rtf: u\n            },\n            b.id\n          )) }),\n          /* @__PURE__ */ g(\"div\", { className: \"CommentPlugin_CommentsPanel_List_Thread_Editor\", children: /* @__PURE__ */ g(\n            Yd,\n            {\n              submitAddComment: s,\n              thread: h,\n              placeholder: \"Reply to comment...\"\n            }\n          ) })\n        ]\n      },\n      y\n    ) : /* @__PURE__ */ g(\n      Xr,\n      {\n        comment: h,\n        deleteComment: e,\n        rtf: u\n      },\n      y\n    );\n  }) });\n}\nfunction Qd({\n  activeIDs: t,\n  deleteCommentOrThread: r,\n  comments: e,\n  submitAddComment: n,\n  markNodeMap: s\n}) {\n  const i = O(null), a = e.length === 0;\n  return /* @__PURE__ */ U(\"div\", { className: \"CommentPlugin_CommentsPanel\", children: [\n    /* @__PURE__ */ g(\"h2\", { className: \"CommentPlugin_CommentsPanel_Heading\", children: \"Comments\" }),\n    a ? /* @__PURE__ */ g(\"div\", { className: \"CommentPlugin_CommentsPanel_Empty\", children: \"No Comments\" }) : /* @__PURE__ */ g(\n      Xd,\n      {\n        activeIDs: t,\n        comments: e,\n        deleteCommentOrThread: r,\n        listRef: i,\n        submitAddComment: n,\n        markNodeMap: s\n      }\n    )\n  ] });\n}\nfunction bi() {\n  const t = ps(), { yjsDocMap: r, name: e } = t;\n  return r.has(\"comments\") ? e : \"Scripture User\";\n}\nfunction Zd({\n  providerFactory: t,\n  setCommentStore: r,\n  onChange: e,\n  showCommentsContainerRef: n,\n  commentContainerRef: s,\n  logger: i\n}) {\n  const a = ps(), [o] = V(), c = ce(() => {\n    const P = new Fd(o, i);\n    return e && P.registerOnChange(e), r == null || r(P), P;\n  }, [o, i, e, r]), l = Ud(c), d = ce(() => /* @__PURE__ */ new Map(), []), [u, h] = D(), [y, m] = D([]), [b, C] = D(!1), [x, k] = D(!1), { yjsDocMap: _ } = a;\n  A(() => {\n    if (t) {\n      const P = t(\"comments\", _);\n      return c.registerCollaboration(P);\n    }\n    return () => {\n    };\n  }, [c, t, _]);\n  const E = j(() => {\n    o.update(() => {\n      const P = ie();\n      P !== null && (P.dirty = !0);\n    }), C(!1);\n  }, [o]), L = j(\n    (P, v) => {\n      if (P.type === \"comment\") {\n        const R = c.deleteCommentOrThread(P, v);\n        if (!R)\n          return;\n        const { markedComment: F, index: Y } = R;\n        c.addComment(F, v, Y);\n      } else {\n        c.deleteCommentOrThread(P);\n        const R = v !== void 0 ? v.id : P.id, F = d.get(R);\n        F !== void 0 && setTimeout(() => {\n          o.update(() => {\n            for (const Y of F) {\n              const M = K(Y);\n              se(M) && (M.deleteID(qe, R), M.hasNoIDsForEveryType() && Fs(M));\n            }\n          });\n        });\n      }\n    },\n    [c, o, d]\n  ), G = j(\n    (P, v, R, F) => {\n      c.addComment(P, R), v && (o.update(() => {\n        Z(F) && Us(F, qe, P.id);\n      }), C(!1));\n    },\n    [c, o]\n  );\n  A(() => {\n    const P = [];\n    for (const v of y) {\n      const R = d.get(v);\n      if (R !== void 0)\n        for (const F of R) {\n          const Y = o.getElementByKey(F);\n          Y !== null && (Y.classList.add(\"selected\"), P.push(Y), k(!0));\n        }\n    }\n    return () => {\n      for (const v of P)\n        v.classList.remove(\"selected\");\n    };\n  }, [y, o, d]), A(() => {\n    if (!o.hasNodes([re]))\n      throw new Error(\"CommentPlugin: TypedMarkNode not registered on editor!\");\n    const P = /* @__PURE__ */ new Map();\n    return Ze(\n      os(\n        o,\n        re,\n        (v) => Mt(v.getTypedIDs()),\n        (v, R) => {\n          for (const [F, Y] of Object.entries(v.getTypedIDs()))\n            Y.forEach((M) => {\n              R.addID(F, M);\n            });\n        }\n      ),\n      o.registerMutationListener(\n        re,\n        (v) => {\n          o.getEditorState().read(() => {\n            for (const [R, F] of v) {\n              const Y = K(R);\n              let M = [];\n              F === \"destroyed\" ? M = P.get(R) ?? [] : se(Y) && (M = Y.getTypedIDs()[qe] ?? []);\n              for (const w of M) {\n                let N = d.get(w);\n                P.set(R, M), F === \"destroyed\" ? N !== void 0 && (N.delete(R), N.size === 0 && d.delete(w)) : (N === void 0 && (N = /* @__PURE__ */ new Set(), d.set(w, N)), N.has(R) || N.add(R));\n              }\n            }\n          });\n        },\n        { skipInitialization: !1 }\n      ),\n      o.registerUpdateListener(({ editorState: v, tags: R }) => {\n        v.read(() => {\n          const F = ie();\n          let Y = !1, M = !1;\n          if (Z(F)) {\n            const w = F.anchor.getNode();\n            if (q(w)) {\n              const N = Za(w, qe, F.anchor.offset) ?? [];\n              N !== null && (m(N), Y = !0), F.isCollapsed() || (h(w.getKey()), M = !0);\n            }\n          }\n          Y || m((w) => w.length === 0 ? w : []), M || h(null), !R.has(\"collaboration\") && Z(F) && C(!1);\n        });\n      }),\n      o.registerCommand(\n        Yr,\n        () => {\n          const v = window.getSelection();\n          return v !== null && v.removeAllRanges(), C(!0), !0;\n        },\n        Ui\n      )\n    );\n  }, [o, d]);\n  const ne = () => {\n    o.dispatchCommand(Yr, void 0);\n  };\n  return /* @__PURE__ */ U(je, { children: [\n    b && Ve(\n      /* @__PURE__ */ g(\n        Gd,\n        {\n          editor: o,\n          cancelAddComment: E,\n          submitAddComment: G\n        }\n      ),\n      document.body\n    ),\n    u != null && !b && Ve(\n      /* @__PURE__ */ g(\n        Wd,\n        {\n          anchorKey: u,\n          editor: o,\n          showComments: x,\n          onAddComment: ne\n        }\n      ),\n      document.body\n    ),\n    n !== null && Ve(\n      /* @__PURE__ */ g(\n        Le,\n        {\n          className: `CommentPlugin_ShowCommentsButton ${x ? \"active\" : \"\"}`,\n          onClick: () => k(!x),\n          title: x ? \"Hide Comments\" : \"Show Comments\",\n          children: /* @__PURE__ */ g(\"i\", { className: \"comments\" })\n        }\n      ),\n      (n == null ? void 0 : n.current) ?? document.body\n    ),\n    x && Ve(\n      /* @__PURE__ */ g(\n        Qd,\n        {\n          comments: l,\n          submitAddComment: G,\n          deleteCommentOrThread: L,\n          activeIDs: y,\n          markNodeMap: d\n        }\n      ),\n      (s == null ? void 0 : s.current) ?? document.body\n    )\n  ] });\n}\nfunction eu() {\n  const t = O(void 0), r = j((e) => {\n    t.current = e;\n  }, []);\n  return [t, r];\n}\nfunction tu(t, r) {\n  var i, a;\n  const e = ((i = r.current) == null ? void 0 : i.getComments()) ?? [], n = e == null ? void 0 : e.map((o) => o.id), s = t.map((o) => {\n    const c = n.findIndex((l) => l === o);\n    return c !== void 0 && c >= 0 ? e[c] : {\n      comments: [\n        {\n          author: \"unknown\",\n          content: \"Comment not found\",\n          deleted: !1,\n          id: \"\",\n          timeStamp: 0,\n          type: \"comment\"\n        }\n      ],\n      id: o,\n      quote: \"\",\n      type: \"thread\"\n    };\n  });\n  e.forEach((o) => {\n    t.includes(o.id) || s.push(o);\n  }), s && ((a = r.current) == null || a.setComments(s));\n}\nfunction nu(t, r) {\n  A(() => {\n    var e;\n    t.options ?? (t.options = {}), (e = t.options).nodes ?? (e.nodes = {}), t.options.nodes.addMissingComments = (n) => {\n      tu(n, r);\n    };\n  }, [r, t]);\n}\nconst Lu = Qe(function(r, e) {\n  const n = O(null), s = O(!0), i = O(null), [a, o] = D(null), { children: c, onCommentChange: l, onUsjChange: d, showCommentsContainerRef: u, ...h } = r, { options: { isReadonly: y } = {} } = r, [m, b] = eu();\n  nu(h, m), Pn(e, () => ({\n    focus() {\n      var k;\n      (k = n.current) == null || k.focus();\n    },\n    undo() {\n      var k;\n      (k = n.current) == null || k.undo();\n    },\n    redo() {\n      var k;\n      (k = n.current) == null || k.redo();\n    },\n    cut() {\n      var k;\n      (k = n.current) == null || k.cut();\n    },\n    copy() {\n      var k;\n      (k = n.current) == null || k.copy();\n    },\n    paste() {\n      var k;\n      (k = n.current) == null || k.paste();\n    },\n    pastePlainText() {\n      var k;\n      (k = n.current) == null || k.pastePlainText();\n    },\n    getUsj() {\n      var k;\n      return (k = n.current) == null ? void 0 : k.getUsj();\n    },\n    setUsj(k) {\n      var _;\n      (_ = n.current) == null || _.setUsj(k);\n    },\n    applyUpdate(k, _) {\n      var E;\n      (E = n.current) == null || E.applyUpdate(k, _);\n    },\n    replaceEmbedUpdate(k, _) {\n      var E;\n      return (E = n.current) == null ? void 0 : E.replaceEmbedUpdate(k, _);\n    },\n    getSelection() {\n      var k;\n      return (k = n.current) == null ? void 0 : k.getSelection();\n    },\n    setSelection(k) {\n      var _;\n      (_ = n.current) == null || _.setSelection(k);\n    },\n    addAnnotation(k, _, E) {\n      var L;\n      (L = n.current) == null || L.addAnnotation(k, _, E);\n    },\n    removeAnnotation(k, _) {\n      var E;\n      (E = n.current) == null || E.removeAnnotation(k, _);\n    },\n    formatPara(k) {\n      var _;\n      (_ = n.current) == null || _.formatPara(k);\n    },\n    getElementByKey(k) {\n      var _;\n      return (_ = n.current) == null ? void 0 : _.getElementByKey(k);\n    },\n    insertNote(k, _, E) {\n      var L;\n      (L = n.current) == null || L.insertNote(k, _, E);\n    },\n    selectNote(k) {\n      var _;\n      (_ = n.current) == null || _.selectNote(k);\n    },\n    getNoteOps(k) {\n      var _;\n      return (_ = n.current) == null ? void 0 : _.getNoteOps(k);\n    },\n    setComments(k) {\n      var _;\n      (_ = m.current) == null || _.setComments(k), s.current = !0;\n    },\n    get toolbarEndRef() {\n      return a;\n    }\n  }));\n  const C = j(\n    (k, _, E, L) => {\n      var ne;\n      if (!d) return;\n      const G = (ne = m.current) == null ? void 0 : ne.getComments();\n      d(k, G, _, E, L);\n    },\n    [m, d]\n  ), x = j(() => {\n    var _;\n    if (!l || s.current) {\n      s.current = !1;\n      return;\n    }\n    const k = (_ = m.current) == null ? void 0 : _.getComments();\n    l(k);\n  }, [m, s, l]);\n  return A(() => {\n    var k;\n    return o(((k = n.current) == null ? void 0 : k.toolbarEndRef) ?? null), () => o(null);\n  }, []), /* @__PURE__ */ U(ui, { ref: n, onUsjChange: C, ...h, children: [\n    /* @__PURE__ */ g(\n      Zd,\n      {\n        setCommentStore: b,\n        onChange: x,\n        showCommentsContainerRef: y ? null : u ?? a,\n        commentContainerRef: i,\n        logger: h.logger\n      }\n    ),\n    /* @__PURE__ */ g(\"div\", { ref: i, className: \"comment-container\" })\n  ] });\n});\nexport {\n  Ru as Editorial,\n  Ct as GENERATOR_NOTE_CALLER,\n  bs as HIDDEN_NOTE_CALLER,\n  Lu as Marginal,\n  vu as directionToNames,\n  Iu as getDefaultViewMode,\n  cr as getDefaultViewOptions,\n  qu as getViewMode,\n  wl as getViewOptions,\n  ft as isInsertEmbedOpOfType,\n  $u as viewModeToViewNames\n};\n//# sourceMappingURL=index.js.map\n","import { Button } from '@/components/shadcn-ui/button';\nimport {\n  DeltaOp,\n  Editorial,\n  EditorOptions,\n  EditorRef,\n  GENERATOR_NOTE_CALLER,\n  HIDDEN_NOTE_CALLER,\n  ViewOptions,\n} from '@eten-tech-foundation/platform-editor';\nimport { EMPTY_USJ } from '@eten-tech-foundation/scripture-utilities';\nimport { Check, Copy, X } from 'lucide-react';\nimport { createRef, useEffect, useMemo, useRef } from 'react';\nimport '@/components/advanced/footnotes/editor-overrides.css';\nimport { SerializedVerseRef } from '@sillsdev/scripture';\n\n/** Interface containing the types of the properties that are passed to the `FootnoteEditor` */\nexport interface FootnoteEditorProps {\n  /** Delta ops for the current note being edited that are applied to the note editorial */\n  noteOps: DeltaOp[] | undefined;\n  /** External function to handle saving changes to the footnote */\n  onSave: (noteOps: DeltaOp[]) => void;\n  /**\n   * External function to handle closing the footnote editor. Gets called when the editor is closed\n   * without saving changes\n   */\n  onClose: () => void;\n  /** The scripture reference for the parent editor */\n  scrRef: SerializedVerseRef;\n  /** The unique note key to identify the note being edited used to apply changes to the note */\n  noteKey: string | undefined;\n  /** View options of the parent editor */\n  viewOptions: ViewOptions;\n}\n\n/**\n * Component to edit footnotes from within the editor component\n *\n * @param usj The raw usj of the footnote to edit\n * @param parentRef The ref of the parent editor component\n * @returns\n */\nexport default function FootnoteEditor({\n  noteOps,\n  onSave,\n  onClose,\n  scrRef,\n  noteKey,\n  viewOptions,\n}: FootnoteEditorProps) {\n  // The editor ref component must be this\n  // eslint-disable-next-line no-null/no-null\n  const editorRef = useRef<EditorRef | null>(null);\n  const editorParentRef = createRef<HTMLDivElement>();\n\n  // Options for the editorial component\n  const options = useMemo<EditorOptions>(\n    () => ({\n      isReadonly: false,\n      hasSpellCheck: false,\n      hasExternalUI: true,\n      // Might need to change this later\n      textDirection: 'auto',\n      nodes: {\n        noteCallerOnClick: (_event, _noteNodeKey, isCollapsed, getCaller, setCaller) => {\n          if (isCollapsed) return;\n\n          if (getCaller() === GENERATOR_NOTE_CALLER) setCaller(HIDDEN_NOTE_CALLER);\n          else setCaller(GENERATOR_NOTE_CALLER);\n        },\n      },\n      view: { ...viewOptions, noteMode: 'expanded' },\n    }),\n    [viewOptions],\n  );\n\n  // When the component loads, applies the note ops to the current editor, gets the note ref and caller\n  useEffect(() => {\n    let timeout: ReturnType<typeof setTimeout>;\n    if (noteOps && !editorRef.current?.getUsj()?.content) {\n      // Temporary fix to fix flushSync error in the console\n      timeout = setTimeout(() => {\n        editorRef.current?.setUsj(EMPTY_USJ);\n        editorRef.current?.applyUpdate(noteOps);\n      }, 0);\n    }\n\n    return () => {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    };\n  }, [noteOps, noteKey]);\n\n  const handleSave = () => {\n    const newNoteOps = editorRef.current?.getNoteOps(0);\n    if (newNoteOps) {\n      onSave(newNoteOps);\n    }\n  };\n\n  const handleCopy = () => {\n    const editorInput = editorParentRef.current?.getElementsByClassName('editor-input')[0];\n    if (editorInput?.textContent) {\n      navigator.clipboard.writeText(editorInput.textContent);\n    }\n  };\n\n  return (\n    <div className=\"footnote-editor tw-grid tw-gap-[12px]\">\n      <div className=\"tw-flex tw-w-full tw-justify-end tw-gap-4\">\n        <Button onClick={onClose} className=\"tw-h-6 tw-w-6\" size=\"icon\" variant=\"secondary\">\n          <X />\n        </Button>\n        <Button onClick={handleSave} className=\"tw-h-6 tw-w-6\" size=\"icon\" variant=\"default\">\n          <Check />\n        </Button>\n      </div>\n      <div\n        ref={editorParentRef}\n        className=\"tw-relative tw-rounded-[6px] tw-border-2 tw-border-ring\"\n      >\n        <Editorial options={options} onScrRefChange={() => {}} scrRef={scrRef} ref={editorRef} />\n        <div className=\"tw-absolute tw-bottom-0 tw-right-0\">\n          <Button onClick={handleCopy} className=\"tw-h-6 tw-w-6\" variant=\"ghost\" size=\"icon\">\n            <Copy />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { MarkerContent, MarkerObject } from '@eten-tech-foundation/scripture-utilities';\nimport { AlertCircle } from 'lucide-react';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { FootnoteItemProps } from './footnotes.types';\n\nfunction makeKey(parentMarker: string | undefined, content?: MarkerContent[]): string {\n  if (!content || content.length === 0) return parentMarker ?? 'empty';\n\n  const firstString = content.find((part) => typeof part === 'string');\n  if (firstString) {\n    return `key-${parentMarker ?? 'unknown'}-${firstString.slice(0, 10)}`;\n  }\n\n  // Fallback: combine markers\n  const firstMarker =\n    typeof content[0] === 'string' ? 'impossible' : (content[0].marker ?? 'unknown');\n  return `key-${parentMarker ?? 'unknown'}-${firstMarker}`;\n}\n\nfunction renderParagraphs(\n  parentMarker: string | undefined,\n  content?: MarkerContent[],\n  showMarkers = true,\n  footnoteClosing: React.ReactNode | undefined = undefined,\n): React.ReactNode {\n  if (!content || content.length === 0) return undefined;\n\n  const markerHierarchy: string[] = [];\n\n  const paragraphs: MarkerContent[][] = [];\n  let current: MarkerContent[] = [];\n\n  content.forEach((part) => {\n    if (typeof part !== 'string' && part.marker === 'fp') {\n      // End current paragraph before starting new one\n      if (current.length > 0) paragraphs.push(current);\n\n      // Start new paragraph that *includes* the fp marker itself\n      current = [part];\n    } else {\n      current.push(part);\n    }\n  });\n\n  if (current.length > 0) paragraphs.push(current);\n\n  return paragraphs.map((para, i) => {\n    const isLast = i === paragraphs.length - 1;\n    return (\n      <p key={makeKey(parentMarker, para)} className=\"tw-mb-2\">\n        {renderContent(parentMarker, para, showMarkers, true, markerHierarchy)}\n        {isLast && footnoteClosing}\n      </p>\n    );\n  });\n}\n\nfunction renderContent(\n  parentMarker: string | undefined,\n  content?: MarkerContent[],\n  showMarkers = true,\n  allowUnmarkedText = true,\n  markerHierarchy: string[] = [],\n): React.ReactNode {\n  if (!content || content.length === 0) return undefined;\n\n  return content.map((footnotePart) => {\n    if (typeof footnotePart === 'string') {\n      // Build a key based on the hierarchy and text\n      const key = `${parentMarker}-text-${footnotePart.slice(0, 10)}`;\n      if (allowUnmarkedText) {\n        const classes = cn(`usfm_${parentMarker}`);\n        return (\n          <span key={key} className={classes}>\n            {footnotePart}\n          </span>\n        );\n      }\n      return (\n        <span\n          key={key}\n          className=\"tw-inline-flex tw-items-center tw-gap-1 tw-underline tw-decoration-destructive\"\n        >\n          <AlertCircle className=\"tw-h-4 tw-w-4 tw-fill-destructive\" />\n          <span>{footnotePart}</span>\n          <AlertCircle className=\"tw-h-4 tw-w-4 tw-fill-destructive\" />\n        </span>\n      );\n    }\n\n    return renderMarkerObject(\n      footnotePart,\n      makeKey(`${parentMarker}\\\\${footnotePart.marker}`, [footnotePart]),\n      showMarkers,\n      [...markerHierarchy, parentMarker ?? 'unknown'],\n    );\n  });\n}\n\nfunction renderMarkerObject(\n  markerObj: MarkerObject,\n  key: React.Key,\n  showMarkers: boolean,\n  markerHierarchy: string[] = [],\n): React.ReactNode {\n  const { marker } = markerObj;\n\n  return (\n    <span key={key}>\n      {marker ? (\n        showMarkers && <span className=\"marker\">{`\\\\${marker} `}</span>\n      ) : (\n        <AlertCircle\n          className=\"tw-text-error tw-mr-1 tw-inline-block tw-h-4 tw-w-4\"\n          aria-label=\"Missing marker\"\n        />\n      )}\n      {renderContent(marker, markerObj.content, showMarkers, true, [\n        ...markerHierarchy,\n        marker ?? 'unknown',\n      ])}\n    </span>\n  );\n}\n\n/** `FootnoteItem` is a component that provides a read-only display of a single USFM/JSX footnote. */\nexport function FootnoteItem({\n  footnote,\n  layout = 'horizontal',\n  formatCaller,\n  showMarkers = true,\n}: FootnoteItemProps) {\n  const caller = formatCaller ? formatCaller(footnote.caller) : footnote.caller;\n  const isCallerFormatted = caller !== footnote.caller;\n\n  // Split out target reference (first top-level fr/xo, if any)\n  let targetRef: MarkerContent | undefined;\n  let remainingContent = footnote.content;\n\n  if (\n    Array.isArray(footnote.content) &&\n    footnote.content.length > 0 &&\n    typeof footnote.content[0] !== 'string' &&\n    (footnote.content[0].marker === 'fr' || footnote.content[0].marker === 'xo')\n  ) {\n    [targetRef, ...remainingContent] = footnote.content;\n  }\n\n  const footnoteOpening = showMarkers ? (\n    <span className=\"marker\">{`\\\\${footnote.marker} `}</span>\n  ) : undefined;\n\n  const footnoteClosing = showMarkers ? (\n    <span className=\"marker\">{` \\\\${footnote.marker}*`}</span>\n  ) : undefined;\n\n  const header = (\n    <>\n      {caller && (\n        // USFM does not specify a marker for caller, so instead of a usfm_* class, we use a\n        // specific class name in case styling is needed.\n        <span className={cn('note-caller', { formatted: isCallerFormatted })}>{caller} </span>\n      )}\n      {targetRef && <>{renderContent(footnote.marker, [targetRef], showMarkers, false)} </>}\n    </>\n  );\n\n  const layoutClass = layout === 'horizontal' ? 'horizontal tw-table-cell' : 'vertical';\n  const markerClass = showMarkers ? 'marker-visible' : '';\n  const baseClasses = cn(layoutClass, markerClass);\n\n  return (\n    <>\n      <div className={cn('textual-note-header tw-text-nowrap tw-pr-2', baseClasses)}>\n        {footnoteOpening}\n        {header}\n      </div>\n      <div className={cn('textual-note-body tw-pr-0.5', baseClasses)}>\n        {remainingContent && remainingContent.length > 0 && (\n          <>{renderParagraphs(footnote.marker, remainingContent, showMarkers, footnoteClosing)}</>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default FootnoteItem;\n","import { MarkerObject } from '@eten-tech-foundation/scripture-utilities';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Card } from '@/components/shadcn-ui/card';\nimport { Separator } from '@/components/shadcn-ui/separator';\nimport { getFormatCallerFunction, LocalizedStringValue, LocalizeKey } from 'platform-bible-utils';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { FootnoteItem } from './footnote-item.component';\nimport { FootnoteListProps } from './footnotes.types';\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const FOOTNOTE_LIST_STRING_KEYS: LocalizeKey[] = ['%webView_footnoteList_header%'];\n\nexport type FootnoteListLocalizedStrings = {\n  [localizedFootnoteListKey in (typeof FOOTNOTE_LIST_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: FootnoteListLocalizedStrings,\n  key: keyof FootnoteListLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\n/** `FootnoteList` is a component that provides a read-only display of a list of USFM/JSX footnote. */\nexport function FootnoteList({\n  className,\n  classNameForItems,\n  footnotes,\n  layout = 'horizontal',\n  listId,\n  selectedFootnote,\n  showMarkers = true,\n  suppressFormatting = false,\n  formatCaller,\n  onFootnoteSelected,\n  localizedStrings,\n}: FootnoteListProps & { localizedStrings?: FootnoteListLocalizedStrings }) {\n  const headerText = localizedStrings\n    ? localizeString(localizedStrings, '%webView_footnoteList_header%')\n    : 'Footnotes';\n  const handleFormatCaller = formatCaller ?? getFormatCallerFunction(footnotes, undefined);\n  const handleFootnoteClick = (footnote: MarkerObject, index: number) => {\n    onFootnoteSelected?.(footnote, index, listId);\n  };\n  const initialFocusedIndex = selectedFootnote\n    ? footnotes.findIndex((f) => f === selectedFootnote)\n    : 0;\n\n  const [focusedIndex, setFocusedIndex] = useState<number>(initialFocusedIndex);\n\n  const handleListKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (!footnotes.length) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setFocusedIndex((prev) => Math.min(prev + 1, footnotes.length - 1));\n        break;\n\n      case 'ArrowUp':\n        e.preventDefault();\n        setFocusedIndex((prev) => Math.max(prev - 1, 0));\n        break;\n\n      case 'Enter':\n      case ' ':\n        e.preventDefault();\n        onFootnoteSelected?.(footnotes[focusedIndex], focusedIndex, listId);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const rowRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n  useEffect(() => {\n    if (focusedIndex >= 0 && focusedIndex < rowRefs.current.length) {\n      rowRefs.current[focusedIndex]?.focus();\n    }\n  }, [focusedIndex]);\n\n  return (\n    <>\n      {layout === 'vertical' && <h2 className=\"tw-mb-1 tw-font-semibold\">{headerText}</h2>}\n      <div\n        role=\"listbox\"\n        aria-label=\"Footnotes\"\n        tabIndex={0}\n        className={cn('tw-h-full tw-overflow-y-auto', className)}\n        onKeyDown={handleListKeyDown}\n      >\n        <div\n          className={cn(\n            'tw-p-0.5 tw-pt-1' /* Added top padding to prevent focus ring clipping in P.B app */,\n            layout === 'horizontal' ? 'tw-table tw-min-w-full' : 'tw-flex tw-flex-col tw-gap-0.5',\n            !suppressFormatting && 'formatted-font',\n          )}\n        >\n          {footnotes.map((footnote, idx) => {\n            const isSelected = footnote === selectedFootnote;\n            const key = `${listId}-${idx}`;\n            return (\n              <>\n                <Card\n                  ref={(el) => {\n                    rowRefs.current[idx] = el;\n                  }}\n                  role=\"option\"\n                  aria-selected={isSelected}\n                  key={key}\n                  data-marker={footnote.marker}\n                  data-state={isSelected ? 'selected' : undefined}\n                  tabIndex={-1}\n                  className={cn(\n                    'data-[state=selected]:tw-bg-muted',\n                    onFootnoteSelected && 'hover:tw-bg-muted/50',\n                    'tw-w-full tw-rounded-sm tw-border-0 tw-bg-transparent tw-shadow-none',\n                    'focus:tw-outline-none focus-visible:tw-outline-none',\n                    /* ENHANCE: After considerable fiddling, this set of styles makes a focus ring\n                     that looks great in Storybook. However, the left edge of the ring is clipped in\n                     P.B app. These are similar, but not identical to, the customizations made in\n                     our shadcn table component.\n                  */\n                    'focus-visible:tw-ring-offset-0.5 focus-visible:tw-relative focus-visible:tw-z-10 focus-visible:tw-ring-2 focus-visible:tw-ring-ring',\n                    layout === 'horizontal'\n                      ? 'horizontal tw-table-row'\n                      : 'vertical tw-block tw-text-sm',\n                    classNameForItems,\n                  )}\n                  onClick={() => handleFootnoteClick(footnote, idx)}\n                >\n                  <FootnoteItem\n                    footnote={footnote}\n                    layout={layout}\n                    formatCaller={() => handleFormatCaller(footnote.caller, idx)}\n                    showMarkers={showMarkers}\n                  />\n                </Card>\n\n                {/* Only render separator if not the last item */}\n                {idx < footnotes.length - 1 && layout === 'vertical' && <Separator />}\n              </>\n            );\n          })}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default FootnoteList;\n","import {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/shadcn-ui/table';\nimport { Canon, SerializedVerseRef } from '@sillsdev/scripture';\nimport { deepEqual, LanguageStrings } from 'platform-bible-utils';\nimport { useMemo } from 'react';\nimport { InventoryItemOccurrence } from './inventory-utils';\n\n/** Props for the OccurrencesTable component */\ntype OccurrencesTableProps = {\n  /** Data that contains scriptures references and snippets of scripture */\n  occurrenceData: InventoryItemOccurrence[];\n  /** Callback function that is executed when the scripture reference is changed */\n  setScriptureReference: (scriptureReference: SerializedVerseRef) => void;\n  /**\n   * Object with all localized strings that the OccurrencesTable needs to work well across multiple\n   * languages\n   */\n  localizedStrings: LanguageStrings;\n};\n\n/**\n * Table that shows occurrences of specified inventory item(s). The first column shows the related\n * scripture reference. The second column shows the snippet of scripture that contains the specified\n * inventory item\n */\nexport function OccurrencesTable({\n  occurrenceData,\n  setScriptureReference,\n  localizedStrings,\n}: OccurrencesTableProps) {\n  const referenceHeaderText =\n    localizedStrings['%webView_inventory_occurrences_table_header_reference%'];\n  const occurrenceHeaderText =\n    localizedStrings['%webView_inventory_occurrences_table_header_occurrence%'];\n\n  const occurrences: InventoryItemOccurrence[] = useMemo(() => {\n    const uniqueOccurrences: InventoryItemOccurrence[] = [];\n\n    occurrenceData.forEach((occurrence) => {\n      if (!uniqueOccurrences.some((uniqueOccurrence) => deepEqual(uniqueOccurrence, occurrence))) {\n        uniqueOccurrences.push(occurrence);\n      }\n    });\n\n    return uniqueOccurrences;\n  }, [occurrenceData]);\n\n  return (\n    <Table stickyHeader>\n      <TableHeader stickyHeader>\n        <TableRow>\n          <TableHead>{referenceHeaderText}</TableHead>\n          <TableHead>{occurrenceHeaderText}</TableHead>\n        </TableRow>\n      </TableHeader>\n      <TableBody>\n        {occurrences.length > 0 &&\n          occurrences.map((occurrence) => (\n            <TableRow\n              key={`${occurrence.reference.book} ${occurrence.reference.chapterNum}:${\n                occurrence.reference.verseNum\n              }-${occurrence.text}`}\n              onClick={() => {\n                setScriptureReference(occurrence.reference);\n              }}\n            >\n              <TableCell>{`${Canon.bookIdToEnglishName(occurrence.reference.book)} ${occurrence.reference.chapterNum}:${occurrence.reference.verseNum}`}</TableCell>\n              <TableCell>{occurrence.text}</TableCell>\n            </TableRow>\n          ))}\n      </TableBody>\n    </Table>\n  );\n}\n\nexport default OccurrencesTable;\n","import React from 'react';\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox';\nimport { Check } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Checkbox component provides a control that allows the user to toggle between checked and not\n * checked. This components is built on Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/checkbox}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/checkbox}\n */\nexport const Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      'tw-peer pr-twp tw-h-4 tw-w-4 tw-shrink-0 tw-rounded-sm tw-border tw-border-primary tw-ring-offset-background focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50 data-[state=checked]:tw-bg-primary data-[state=checked]:tw-text-primary-foreground',\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn('tw-flex tw-items-center tw-justify-center tw-text-current')}\n    >\n      <Check className=\"tw-h-4 tw-w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n));\nCheckbox.displayName = CheckboxPrimitive.Root.displayName;\n\nexport default Checkbox;\n","import React from 'react';\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Props for Input component\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/input}\n */\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\n/**\n * Input component displays a form input field or a component that looks like an input field. This\n * components is built and styled with Shadcn UI.\n *\n * @param InputProps\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/input}\n */\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'pr-twp tw-flex tw-h-10 tw-rounded-md tw-border tw-border-input tw-bg-background tw-px-3 tw-py-2 tw-text-sm tw-ring-offset-background file:tw-border-0 file:tw-bg-transparent file:tw-text-sm file:tw-font-medium file:tw-text-foreground placeholder:tw-text-muted-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50',\n          className,\n        )}\n        ref={ref}\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = 'Input';\n","import { ColumnDef, SortDirection } from '@/components/advanced/data-table/data-table.component';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { ToggleGroup, ToggleGroupItem } from '@/components/shadcn-ui/toggle-group';\nimport {\n  ArrowDownIcon,\n  ArrowUpDownIcon,\n  ArrowUpIcon,\n  CircleCheckIcon,\n  CircleHelpIcon,\n  CircleXIcon,\n} from 'lucide-react';\nimport { ReactNode } from 'react';\nimport { InventoryTableData, Status } from './inventory-utils';\n\n/**\n * Gets an icon that indicates the current sorting direction based on the provided input\n *\n * @param sortDirection Sorting direction. Can be ascending ('asc'), descending ('desc') or false (\n *   i.e. not sorted)\n * @returns The appropriate sorting icon for the provided sorting direction\n */\nconst getSortingIcon = (sortDirection: false | SortDirection): ReactNode => {\n  if (sortDirection === 'asc') {\n    return <ArrowUpIcon className=\"tw-ms-2 tw-h-4 tw-w-4\" />;\n  }\n  if (sortDirection === 'desc') {\n    return <ArrowDownIcon className=\"tw-ms-2 tw-h-4 tw-w-4\" />;\n  }\n  return <ArrowUpDownIcon className=\"tw-ms-2 tw-h-4 tw-w-4\" />;\n};\n\n/**\n * Function that creates the item column for inventories\n *\n * @param itemLabel Localized label for the item column (e.g. 'Character', 'Repeated Word', etc.)\n * @returns Column that shows the inventory items. Should be used with the DataTable component\n */\nexport const inventoryItemColumn = (itemLabel: string): ColumnDef<InventoryTableData> => {\n  return {\n    accessorKey: 'item',\n    accessorFn: (row: InventoryTableData) => row.items[0],\n    header: ({ column }) => (\n      <Button variant=\"ghost\" onClick={() => column.toggleSorting(undefined)}>\n        {itemLabel}\n        {getSortingIcon(column.getIsSorted())}\n      </Button>\n    ),\n  };\n};\n\n/**\n * Function that creates the additional item columns for inventories\n *\n * @param additionalItemLabel Localized label for the additional item column (e.g. 'Preceding\n *   Marker')\n * @param additionalItemIndex Index that locates the desired item in the items array of the\n *   inventory\n * @returns Column that shows additional inventory items. Should be used with the DataTable\n *   component\n */\nexport const inventoryAdditionalItemColumn = (\n  additionalItemLabel: string,\n  additionalItemIndex: number,\n): ColumnDef<InventoryTableData> => {\n  return {\n    accessorKey: `item${additionalItemIndex}`,\n    accessorFn: (row: InventoryTableData) => row.items[additionalItemIndex],\n    header: ({ column }) => (\n      <Button variant=\"ghost\" onClick={() => column.toggleSorting(undefined)}>\n        {additionalItemLabel}\n        {getSortingIcon(column.getIsSorted())}\n      </Button>\n    ),\n  };\n};\n\n/**\n * Function that creates the count column for inventories. Should be used with the DataTable\n * component.\n *\n * @param countLabel Localized label for the count column\n * @returns Column that shows the number of occurrences of the related inventory items\n */\nexport const inventoryCountColumn = (countLabel: string): ColumnDef<InventoryTableData> => {\n  return {\n    accessorKey: 'count',\n    header: ({ column }) => (\n      <div className=\"tw-flex tw-justify-end tw-tabular-nums\">\n        <Button variant=\"ghost\" onClick={() => column.toggleSorting(undefined)}>\n          {countLabel}\n          {getSortingIcon(column.getIsSorted())}\n        </Button>\n      </div>\n    ),\n    cell: ({ row }) => <div className=\"tw-flex tw-justify-end\">{row.getValue('count')}</div>,\n  };\n};\n\n/**\n * Function that updates project settings when status for item(s) changes\n *\n * @param changedItems Array of items for which the status is being updated\n * @param newStatus The status that the items are being given\n * @param approvedItems Array of currently approved items\n * @param onApprovedItemsChange Callback function that stores the updated list of approved items\n * @param unapprovedItems Array of currently unapproved items\n * @param onUnapprovedItemsChange Callback function that stores the updated list of unapproved items\n */\nconst statusChangeHandler = (\n  changedItems: string[],\n  newStatus: Status,\n  approvedItems: string[],\n  onApprovedItemsChange: (items: string[]) => void,\n  unapprovedItems: string[],\n  onUnapprovedItemsChange: (items: string[]) => void,\n) => {\n  let newApprovedItems: string[] = [...approvedItems];\n  changedItems.forEach((item) => {\n    if (newStatus === 'approved') {\n      if (!newApprovedItems.includes(item)) {\n        newApprovedItems.push(item);\n      }\n    } else {\n      newApprovedItems = newApprovedItems.filter((validItem) => validItem !== item);\n    }\n  });\n  onApprovedItemsChange(newApprovedItems);\n\n  let newUnapprovedItems: string[] = [...unapprovedItems];\n  changedItems.forEach((item) => {\n    if (newStatus === 'unapproved') {\n      if (!newUnapprovedItems.includes(item)) {\n        newUnapprovedItems.push(item);\n      }\n    } else {\n      newUnapprovedItems = newUnapprovedItems.filter((unapprovedItem) => unapprovedItem !== item);\n    }\n  });\n  onUnapprovedItemsChange(newUnapprovedItems);\n};\n\n/**\n * Function that creates the status column for inventories. Should be used with the DataTable\n * component.\n *\n * @param statusLabel Localized label for the status column\n * @param approvedItems Array of approved items, typically as defined in `Settings.xml`\n * @param onApprovedItemsChange Callback function that stores the updated list of approved items\n * @param unapprovedItems Array of unapproved items, typically as defined in `Settings.xml`\n * @param onUnapprovedItemsChange Callback function that stores the updated list of unapproved items\n * @returns Column that shows the status buttons for the related inventory item. The button for the\n *   current status of the item is selected\n */\nexport const inventoryStatusColumn = (\n  statusLabel: string,\n  approvedItems: string[],\n  onApprovedItemsChange: (items: string[]) => void,\n  unapprovedItems: string[],\n  onUnapprovedItemsChange: (items: string[]) => void,\n): ColumnDef<InventoryTableData> => {\n  return {\n    accessorKey: 'status',\n    header: ({ column }) => {\n      return (\n        <div className=\"tw-flex tw-justify-center\">\n          <Button variant=\"ghost\" onClick={() => column.toggleSorting(undefined)}>\n            {statusLabel}\n            {getSortingIcon(column.getIsSorted())}\n          </Button>\n        </div>\n      );\n    },\n    cell: ({ row }) => {\n      const status: Status = row.getValue('status');\n      const item: string = row.getValue('item');\n      return (\n        <ToggleGroup value={status} variant=\"outline\" type=\"single\">\n          <ToggleGroupItem\n            onClick={(event) => {\n              event.stopPropagation();\n              statusChangeHandler(\n                [item],\n                'approved',\n                approvedItems,\n                onApprovedItemsChange,\n                unapprovedItems,\n                onUnapprovedItemsChange,\n              );\n            }}\n            value=\"approved\"\n          >\n            <CircleCheckIcon />\n          </ToggleGroupItem>\n          <ToggleGroupItem\n            onClick={(event) => {\n              event.stopPropagation();\n              statusChangeHandler(\n                [item],\n                'unapproved',\n                approvedItems,\n                onApprovedItemsChange,\n                unapprovedItems,\n                onUnapprovedItemsChange,\n              );\n            }}\n            value=\"unapproved\"\n          >\n            <CircleXIcon />\n          </ToggleGroupItem>\n          <ToggleGroupItem\n            onClick={(event) => {\n              event.stopPropagation();\n              statusChangeHandler(\n                [item],\n                'unknown',\n                approvedItems,\n                onApprovedItemsChange,\n                unapprovedItems,\n                onUnapprovedItemsChange,\n              );\n            }}\n            value=\"unknown\"\n          >\n            <CircleHelpIcon />\n          </ToggleGroupItem>\n        </ToggleGroup>\n      );\n    },\n  };\n};\n","import { SerializedVerseRef } from '@sillsdev/scripture';\n\n/* #region Types */\n\n/**\n * Status of items that appear in inventories. 'approved' and 'unapproved' items are defined in the\n * project's `Settings.xml`. All other items are defined as 'unknown'\n */\nexport type Status = 'approved' | 'unapproved' | 'unknown';\n\n/** Occurrence of item in inventory. Primarily used by table that shows occurrences */\nexport type InventoryItemOccurrence = {\n  /** Reference to scripture where the item appears */\n  reference: SerializedVerseRef;\n  /** Snippet of scripture that contains the occurrence */\n  text: string;\n};\n\n/** Data structure that contains all information on an item that is shown in an inventory */\nexport type InventoryTableData = {\n  /**\n   * The item (e.g. a character in the characters inventory, a marker in the marker inventory) In\n   * most cases the array will only have one element. In case of additional items (e.g. the\n   * preceding marker in the markers check), the primary item should be stored in the first index.\n   * To show additional items in the inventory, make sure to configure the `additionalItemsLabels`\n   * prop for the Inventory component\n   */\n  items: string[];\n  /** The number of times this item occurs in the selected scope */\n  count: number;\n  /** The status of this item (see documentation for `Status` type for more information) */\n  status: Status;\n  /** Occurrences of this item in the scripture text for the selected scope */\n  occurrences: InventoryItemOccurrence[];\n};\n\n/* #endregion */\n\n/* #region Functions */\n\n/**\n * Splits USFM string into shorter line-like segments\n *\n * @param text A single (likely very large) USFM string\n * @returns An array containing the input text, split into shorter segments\n */\nexport const getLinesFromUSFM = (text: string) => {\n  // Splits on (CR)LF, CR, \\v, \\c and \\id\n  return text.split(/(?:\\r?\\n|\\r)|(?=(?:\\\\(?:v|c|id)))/g);\n};\n\n/**\n * Extracts chapter or verse number from USFM strings that start with a \\c or \\v marker\n *\n * @param text USFM string that is expected to start with \\c or \\v marker\n * @returns Chapter or verse number if one is found. Else returns 0.\n */\nexport const getNumberFromUSFM = (text: string): number | undefined => {\n  // Captures all digits that follow \\v or \\c markers followed by whitespace located at the start of a string\n  const regex = /^\\\\[vc]\\s+(\\d+)/;\n  const match = text.match(regex);\n\n  if (match) {\n    return +match[1];\n  }\n  return undefined;\n};\n\n/**\n * Gets book ID from USFM string that starts with the \\id marker, and returns book number for it\n *\n * @param text USFM string that is expected to start with \\id marker\n * @returns Book number corresponding to the \\id marker in the input text. Returns 0 if no marker is\n *   found or the marker is not valid\n */\nexport const getBookIdFromUSFM = (text: string): string => {\n  // Captures all digits that follow an \\id marker followed by whitespace located at the start of a string\n  const match = text.match(/^\\\\id\\s+([A-Za-z]+)/);\n  if (match) {\n    return match[1];\n  }\n  return '';\n};\n\n/**\n * Gets the status for an item, typically used in the Inventory component\n *\n * @param item The item for which the status is being requested\n * @param approvedItems Array of approved items, typically as defined in `Settings.xml`\n * @param unapprovedItems Array of unapproved items, typically as defined in `Settings.xml`\n * @returns The status for the specified item\n */\nexport const getStatusForItem = (\n  item: string,\n  approvedItems: string[],\n  unapprovedItems: string[],\n): Status => {\n  if (unapprovedItems.includes(item)) return 'unapproved';\n  if (approvedItems.includes(item)) return 'approved';\n  return 'unknown';\n};\n\n/* #endregion */\n","import {\n  ColumnDef,\n  DataTable,\n  RowContents,\n  RowSelectionState,\n  TableContents,\n} from '@/components/advanced/data-table/data-table.component';\nimport { OccurrencesTable } from '@/components/advanced/inventory/occurrences-table.component';\nimport { Checkbox } from '@/components/shadcn-ui/checkbox';\nimport { Input } from '@/components/shadcn-ui/input';\nimport { Label } from '@/components/shadcn-ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/shadcn-ui/select';\nimport { Scope } from '@/components/utils/scripture.util';\nimport { SerializedVerseRef } from '@sillsdev/scripture';\nimport { deepEqual, isString, LocalizedStringValue } from 'platform-bible-utils';\nimport { useEffect, useMemo, useState } from 'react';\nimport { inventoryAdditionalItemColumn } from './inventory-columns';\nimport {\n  getStatusForItem,\n  InventoryItemOccurrence,\n  InventoryTableData,\n  Status,\n} from './inventory-utils';\n\n/** Represents an item in the inventory with associated text and verse reference. */\nexport type InventoryItem = {\n  /**\n   * The label by which the item is shown in the inventory (e.g. the word that is repeated in case\n   * of the Repeated Words check). It serves as a unique identifier for the item. It usually is a\n   * string, but can be a string[] when there are multiple defining attributes (e.g. when 'show\n   * preceding marker' is enabled for the Markers Inventory, the preceding marker will be stored as\n   * the second item in the array)\n   */\n  inventoryText: string | string[];\n  /** The snippet of scripture where this occurrence of the `inventoryItem` is found */\n  verse: string;\n  /** The reference to the location where the `verse` can be found in scripture */\n  verseRef: SerializedVerseRef;\n  /**\n   * Offset used to locate the `inventoryText` (or inventoryText[0] in case of an array) in the\n   * `verse` string\n   */\n  offset: number;\n};\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const INVENTORY_STRING_KEYS = Object.freeze([\n  '%webView_inventory_all%',\n  '%webView_inventory_approved%',\n  '%webView_inventory_unapproved%',\n  '%webView_inventory_unknown%',\n  '%webView_inventory_scope_currentBook%',\n  '%webView_inventory_scope_chapter%',\n  '%webView_inventory_scope_verse%',\n  '%webView_inventory_filter_text%',\n  '%webView_inventory_show_additional_items%',\n  '%webView_inventory_occurrences_table_header_reference%',\n  '%webView_inventory_occurrences_table_header_occurrence%',\n  '%webView_inventory_no_results%',\n] as const);\n\nexport type InventoryLocalizedStrings = {\n  [localizedInventoryKey in (typeof INVENTORY_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/** Status values that the status filter can select from */\ntype StatusFilter = Status | 'all';\n\n/** Text labels for the inventory columns and the control components of additional inventory items */\ntype AdditionalItemsLabels = {\n  checkboxText?: string;\n  tableHeaders?: string[];\n};\n\n/**\n * Filters data that is shown in the DataTable section of the Inventory\n *\n * @param itemData All inventory items and their related information\n * @param statusFilter Allows filtering by status (i.e. show all items, or only items that are\n *   'approved', 'unapproved' or 'unknown')\n * @param textFilter Allows filtering by text. All items that include the filter text will be\n *   selected.\n * @returns Array of items and their related information that are matched by the specified filters\n */\nconst filterItemData = (\n  itemData: InventoryTableData[],\n  statusFilter: StatusFilter,\n  textFilter: string,\n): InventoryTableData[] => {\n  let filteredItemData: InventoryTableData[] = itemData;\n\n  if (statusFilter !== 'all') {\n    filteredItemData = filteredItemData.filter(\n      (item) =>\n        (statusFilter === 'approved' && item.status === 'approved') ||\n        (statusFilter === 'unapproved' && item.status === 'unapproved') ||\n        (statusFilter === 'unknown' && item.status === 'unknown'),\n    );\n  }\n\n  if (textFilter !== '')\n    filteredItemData = filteredItemData.filter((item) => item.items[0].includes(textFilter));\n\n  return filteredItemData;\n};\n\n/**\n * Turns array of strings into array of inventory items, along with their count and status. The\n * approvedItems and unapprovedItems arrays are used to determine the status of each item, by\n * matching them to the `inventoryText` of the InventoryItem.\n *\n * @param inventoryItems Detailed information on the items that are to be shown in the inventory\n * @param approvedItems Array of approved items, typically as defined in `Settings.xml`\n * @param unapprovedItems Array of unapproved items, typically as defined in `Settings.xml`\n * @returns Array of inventory items, along with their count and status\n */\nconst processInventoryItems = (\n  inventoryItems: InventoryItem[],\n  approvedItems: string[],\n  unapprovedItems: string[],\n): InventoryTableData[] => {\n  const tableData: InventoryTableData[] = [];\n\n  inventoryItems.forEach((item) => {\n    const existingItem = tableData.find((tableEntry) =>\n      deepEqual(\n        tableEntry.items,\n        isString(item.inventoryText) ? [item.inventoryText] : item.inventoryText,\n      ),\n    );\n\n    if (existingItem) {\n      existingItem.count += 1;\n      existingItem.occurrences.push({\n        reference: item.verseRef,\n        text: item.verse,\n      });\n    } else {\n      const newItem: InventoryTableData = {\n        items: isString(item.inventoryText) ? [item.inventoryText] : item.inventoryText,\n        count: 1,\n        status: getStatusForItem(\n          isString(item.inventoryText) ? item.inventoryText : item.inventoryText[0],\n          approvedItems,\n          unapprovedItems,\n        ),\n        occurrences: [\n          {\n            reference: item.verseRef,\n            text: item.verse,\n          },\n        ],\n      };\n      tableData.push(newItem);\n    }\n  });\n\n  return tableData;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: InventoryLocalizedStrings,\n  key: keyof InventoryLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\n/** Props for the Inventory component */\ntype InventoryProps = {\n  /** The inventory items that the inventory should be populated with */\n  inventoryItems: InventoryItem[] | undefined;\n  /** Callback function that is executed when the scripture reference is changed */\n  setVerseRef: (scriptureReference: SerializedVerseRef) => void;\n  /**\n   * Object with all localized strings that the Inventory needs to work well across multiple\n   * languages. When using this component with Platform.Bible, you can import\n   * `INVENTORY_STRING_KEYS` from this library, pass it in to the Platform's localization hook, and\n   * pass the localized keys that are returned by the hook into this prop.\n   */\n  localizedStrings: InventoryLocalizedStrings;\n  /**\n   * Text labels for control elements and additional column headers in case your Inventory has more\n   * than one item to show (e.g. The 'Preceding Marker' in the Markers Inventory)\n   */\n  additionalItemsLabels?: AdditionalItemsLabels;\n  /** Array of approved items, typically as defined in `Settings.xml` */\n  approvedItems: string[];\n  /** Array of unapproved items, typically as defined in `Settings.xml` */\n  unapprovedItems: string[];\n  /** Scope of scripture that the inventory will operate on */\n  scope: Scope;\n  /** Callback function that is executed when the scope is changed from the Inventory */\n  onScopeChange: (scope: Scope) => void;\n  /**\n   * Column definitions for the Inventory data table. The most commonly used column definitions are\n   * pre-configured for your convenience and can be imported (e.g. inventoryItemColumn,\n   * inventoryAdditionalItemColumn inventoryCountColumn, and inventoryStatusColumn). If you need any\n   * other columns you can add these yourself\n   */\n  columns: ColumnDef<InventoryTableData>[];\n  /** Unique identifier for the Inventory component */\n  id?: string;\n  /** Whether the inventory items are still loading */\n  areInventoryItemsLoading?: boolean;\n};\n\n/** Inventory component that is used to view and control the status of provided project settings */\nexport function Inventory({\n  inventoryItems,\n  setVerseRef,\n  localizedStrings,\n  additionalItemsLabels,\n  approvedItems,\n  unapprovedItems,\n  scope,\n  onScopeChange,\n  columns,\n  id,\n  areInventoryItemsLoading = false,\n}: InventoryProps) {\n  const allItemsText = localizeString(localizedStrings, '%webView_inventory_all%');\n  const approvedItemsText = localizeString(localizedStrings, '%webView_inventory_approved%');\n  const unapprovedItemsText = localizeString(localizedStrings, '%webView_inventory_unapproved%');\n  const unknownItemsText = localizeString(localizedStrings, '%webView_inventory_unknown%');\n  const scopeBookText = localizeString(localizedStrings, '%webView_inventory_scope_currentBook%');\n  const scopeChapterText = localizeString(localizedStrings, '%webView_inventory_scope_chapter%');\n  const scopeVerseText = localizeString(localizedStrings, '%webView_inventory_scope_verse%');\n  const filterText = localizeString(localizedStrings, '%webView_inventory_filter_text%');\n  const showAdditionalItemsText = localizeString(\n    localizedStrings,\n    '%webView_inventory_show_additional_items%',\n  );\n  const noResultsText = localizeString(localizedStrings, '%webView_inventory_no_results%');\n\n  const [showAdditionalItems, setShowAdditionalItems] = useState<boolean>(false);\n  const [statusFilter, setStatusFilter] = useState<StatusFilter>('all');\n  const [textFilter, setTextFilter] = useState<string>('');\n  const [selectedItem, setSelectedItem] = useState<string[]>([]);\n\n  const tableData: InventoryTableData[] = useMemo(() => {\n    const safeInventoryItems = inventoryItems ?? [];\n    if (safeInventoryItems.length === 0) return [];\n    return processInventoryItems(safeInventoryItems, approvedItems, unapprovedItems);\n  }, [inventoryItems, approvedItems, unapprovedItems]);\n\n  const reducedTableData: InventoryTableData[] = useMemo(() => {\n    if (showAdditionalItems) return tableData;\n\n    const newTableData: InventoryTableData[] = [];\n\n    tableData.forEach((tableEntry) => {\n      const firstItem = tableEntry.items[0];\n\n      const existingEntry = newTableData.find(\n        (newTableEntry) => newTableEntry.items[0] === firstItem,\n      );\n\n      if (existingEntry) {\n        existingEntry.count += tableEntry.count;\n        existingEntry.occurrences = existingEntry.occurrences.concat(tableEntry.occurrences);\n      } else {\n        newTableData.push({\n          items: [firstItem],\n          count: tableEntry.count,\n          occurrences: tableEntry.occurrences,\n          status: tableEntry.status,\n        });\n      }\n    });\n\n    return newTableData;\n  }, [showAdditionalItems, tableData]);\n\n  const filteredTableData: InventoryTableData[] = useMemo(() => {\n    if (reducedTableData.length === 0) return [];\n    return filterItemData(reducedTableData, statusFilter, textFilter);\n  }, [reducedTableData, statusFilter, textFilter]);\n\n  const allColumns: ColumnDef<InventoryTableData>[] = useMemo(() => {\n    if (!showAdditionalItems) return columns;\n\n    const numberOfAdditionalItems = additionalItemsLabels?.tableHeaders?.length;\n    if (!numberOfAdditionalItems) return columns;\n\n    const additionalColumns: ColumnDef<InventoryTableData>[] = [];\n\n    for (let index = 0; index < numberOfAdditionalItems; index++) {\n      additionalColumns.push(\n        inventoryAdditionalItemColumn(\n          additionalItemsLabels?.tableHeaders?.[index] || 'Additional Item',\n          index + 1,\n        ),\n      );\n    }\n\n    return [...additionalColumns, ...columns];\n  }, [additionalItemsLabels?.tableHeaders, columns, showAdditionalItems]);\n\n  useEffect(() => {\n    if (filteredTableData.length === 0) {\n      setSelectedItem([]);\n    } else if (filteredTableData.length === 1) {\n      setSelectedItem(filteredTableData[0].items);\n    }\n  }, [filteredTableData]);\n\n  const rowClickHandler = (\n    row: RowContents<InventoryTableData>,\n    table: TableContents<InventoryTableData>,\n  ) => {\n    table.setRowSelection(() => {\n      const newSelection: RowSelectionState = {};\n      newSelection[row.index] = true;\n      return newSelection;\n    });\n\n    setSelectedItem(row.original.items);\n  };\n\n  const handleScopeChange = (value: string) => {\n    if (value === 'book' || value === 'chapter' || value === 'verse') {\n      onScopeChange(value);\n    } else {\n      throw new Error(`Invalid scope value: ${value}`);\n    }\n  };\n\n  const handleStatusFilterChange = (value: string) => {\n    if (value === 'all' || value === 'approved' || value === 'unapproved' || value === 'unknown') {\n      setStatusFilter(value);\n    } else {\n      throw new Error(`Invalid status filter value: ${value}`);\n    }\n  };\n\n  const occurrenceData: InventoryItemOccurrence[] = useMemo(() => {\n    if (reducedTableData.length === 0 || selectedItem.length === 0) return [];\n    const occurrence = reducedTableData.filter((tableEntry: InventoryTableData) => {\n      return deepEqual(\n        showAdditionalItems ? tableEntry.items : [tableEntry.items[0]],\n        selectedItem,\n      );\n    });\n    if (occurrence.length > 1) throw new Error('Selected item is not unique');\n    if (occurrence.length === 0) return [];\n    return occurrence[0].occurrences;\n  }, [selectedItem, showAdditionalItems, reducedTableData]);\n\n  return (\n    <div id={id} className=\"pr-twp tw-flex tw-h-full tw-flex-col\">\n      <div className=\"tw-flex tw-items-stretch\">\n        <Select\n          onValueChange={(value) => handleStatusFilterChange(value)}\n          defaultValue={statusFilter}\n        >\n          <SelectTrigger className=\"tw-m-1\">\n            <SelectValue placeholder=\"Select filter\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">{allItemsText}</SelectItem>\n            <SelectItem value=\"approved\">{approvedItemsText}</SelectItem>\n            <SelectItem value=\"unapproved\">{unapprovedItemsText}</SelectItem>\n            <SelectItem value=\"unknown\">{unknownItemsText}</SelectItem>\n          </SelectContent>\n        </Select>\n        <Select onValueChange={(value) => handleScopeChange(value)} defaultValue={scope}>\n          <SelectTrigger className=\"tw-m-1\">\n            <SelectValue placeholder=\"Select scope\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"book\">{scopeBookText}</SelectItem>\n            <SelectItem value=\"chapter\">{scopeChapterText}</SelectItem>\n            <SelectItem value=\"verse\">{scopeVerseText}</SelectItem>\n          </SelectContent>\n        </Select>\n        <Input\n          className=\"tw-m-1 tw-rounded-md tw-border\"\n          placeholder={filterText}\n          value={textFilter}\n          onChange={(event) => {\n            setTextFilter(event.target.value);\n          }}\n        />\n        {additionalItemsLabels && (\n          <div className=\"tw-m-1 tw-flex tw-items-center tw-rounded-md tw-border\">\n            <Checkbox\n              className=\"tw-m-1\"\n              checked={showAdditionalItems}\n              onCheckedChange={(checked: boolean) => {\n                setShowAdditionalItems(checked);\n              }}\n            />\n            <Label className=\"tw-m-1 tw-flex-shrink-0 tw-whitespace-nowrap\">\n              {additionalItemsLabels?.checkboxText ?? showAdditionalItemsText}\n            </Label>\n          </div>\n        )}\n      </div>\n      <div className=\"tw-m-1 tw-flex-1 tw-overflow-auto tw-rounded-md tw-border\">\n        <DataTable\n          columns={allColumns}\n          data={filteredTableData}\n          onRowClickHandler={rowClickHandler}\n          stickyHeader\n          isLoading={areInventoryItemsLoading}\n          noResultsMessage={noResultsText}\n        />\n      </div>\n      {occurrenceData.length > 0 && (\n        <div className=\"tw-m-1 tw-flex-1 tw-overflow-auto tw-rounded-md tw-border\">\n          <OccurrencesTable\n            occurrenceData={occurrenceData}\n            setScriptureReference={setVerseRef}\n            localizedStrings={localizedStrings}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Inventory;\n","import React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { VariantProps, cva } from 'class-variance-authority';\nimport { PanelLeft, PanelRight } from 'lucide-react';\n\nimport { Button } from '@/components/shadcn-ui/button';\nimport { Input } from '@/components/shadcn-ui/input';\nimport { Separator } from '@/components/shadcn-ui/separator';\nimport { Skeleton } from '@/components/shadcn-ui/skeleton';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/shadcn-ui/tooltip';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * CUSTOM: Changes from the original code from Shadcn- Removed uses of useIsMobile, Sheet, and\n * SheetContent. Also removed the parts setting COOKIES.\n */\n\nconst SIDEBAR_WIDTH = '16rem';\nconst SIDEBAR_WIDTH_ICON = '3rem';\n// CUSTOM: Commented this out pending a discussion with UX about keyboard shortcuts\n// const SIDEBAR_KEYBOARD_SHORTCUT = 'b';\n\ntype Side = 'primary' | 'secondary';\n\ntype SidebarContextProps = {\n  state: 'expanded' | 'collapsed';\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  toggleSidebar: () => void;\n  // CUSTOM: this was moved from Sidebar to SidebarProvider to also be able to flip the icon based on the side\n  side: Side;\n};\n\nconst SidebarContext = React.createContext<SidebarContextProps | undefined>(undefined);\n\n/** @inheritdoc SidebarProvider */\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error('useSidebar must be used within a SidebarProvider.');\n  }\n\n  return context;\n}\n\n/**\n * Sidebar components providing an accessible sidebar along with all the sub components that can be\n * used to populate and style it. These components are adapted from Shadcn UI. See Shadcn UI\n * Documentation: https://ui.shadcn.com/docs/components/sidebar\n */\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & {\n    defaultOpen?: boolean;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n    side?: Side;\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      side = 'primary',\n      ...props\n    },\n    ref,\n  ) => {\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const [_open, _setOpen] = React.useState(defaultOpen);\n    const isOpen = openProp ?? _open;\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === 'function' ? value(isOpen) : value;\n        if (setOpenProp) {\n          setOpenProp(openState);\n        } else {\n          _setOpen(openState);\n        }\n      },\n      [setOpenProp, isOpen],\n    );\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return setOpen((open) => !open);\n    }, [setOpen]);\n\n    // CUSTOM: Commented this out pending a discussion with UX about keyboard shortcuts\n    // Adds a keyboard shortcut to toggle the sidebar.\n    // React.useEffect(() => {\n    //   const handleKeyDown = (event: KeyboardEvent) => {\n    //     if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\n    //       event.preventDefault();\n    //       toggleSidebar();\n    //     }\n    //   };\n\n    //   window.addEventListener('keydown', handleKeyDown);\n    //   return () => window.removeEventListener('keydown', handleKeyDown);\n    // }, [toggleSidebar]);\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = isOpen ? 'expanded' : 'collapsed';\n\n    const dir: Direction = readDirection();\n    const oppositeSide: Side = side === 'primary' ? 'secondary' : 'primary';\n    const directionAwareSide = dir === 'ltr' ? side : oppositeSide;\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open: isOpen,\n        setOpen,\n        toggleSidebar,\n        side: directionAwareSide,\n      }),\n      [state, isOpen, setOpen, toggleSidebar, directionAwareSide],\n    );\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              // eslint-disable-next-line no-type-assertion/no-type-assertion\n              {\n                '--sidebar-width': SIDEBAR_WIDTH,\n                '--sidebar-width-icon': SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              // Removed tw-min-h-svh\n              'tw-group/sidebar-wrapper pr-twp tw-flex tw-w-full has-[[data-variant=inset]]:tw-bg-sidebar',\n              className,\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    );\n  },\n);\nSidebarProvider.displayName = 'SidebarProvider';\n\n/** @inheritdoc SidebarProvider */\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & {\n    variant?: 'sidebar' | 'floating' | 'inset';\n    collapsible?: 'offcanvas' | 'icon' | 'none';\n  }\n>(({ variant = 'sidebar', collapsible = 'offcanvas', className, children, ...props }, ref) => {\n  const context = useSidebar();\n\n  if (collapsible === 'none') {\n    return (\n      <div\n        className={cn(\n          'tw-flex tw-h-full tw-w-[--sidebar-width] tw-flex-col tw-bg-sidebar tw-text-sidebar-foreground',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={ref}\n      className=\"tw-group tw-peer tw-hidden tw-text-sidebar-foreground md:tw-block\"\n      data-state={context.state}\n      data-collapsible={context.state === 'collapsed' ? collapsible : ''}\n      data-variant={variant}\n      data-side={context.side}\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        className={cn(\n          'tw-relative tw-h-svh tw-w-[--sidebar-width] tw-bg-transparent tw-transition-[width] tw-duration-200 tw-ease-linear',\n          'group-data-[collapsible=offcanvas]:tw-w-0',\n          'group-data-[side=secondary]:tw-rotate-180',\n          variant === 'floating' || variant === 'inset'\n            ? 'group-data-[collapsible=icon]:tw-w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]'\n            : 'group-data-[collapsible=icon]:tw-w-[--sidebar-width-icon]',\n        )}\n      />\n      <div\n        className={cn(\n          // CUSTOM: Switched tw-fixed to tw-absolute here to scope the sidebar inside of it's container\n          'tw-absolute tw-inset-y-0 tw-z-10 tw-hidden tw-h-svh tw-w-[--sidebar-width] tw-transition-[left,right,width] tw-duration-200 tw-ease-linear md:tw-flex',\n          context.side === 'primary'\n            ? 'tw-left-0 group-data-[collapsible=offcanvas]:tw-left-[calc(var(--sidebar-width)*-1)]'\n            : 'tw-right-0 group-data-[collapsible=offcanvas]:tw-right-[calc(var(--sidebar-width)*-1)]',\n          // Adjust the padding for floating and inset variants.\n          variant === 'floating' || variant === 'inset'\n            ? 'tw-p-2 group-data-[collapsible=icon]:tw-w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]'\n            : 'group-data-[collapsible=icon]:tw-w-[--sidebar-width-icon] group-data-[side=primary]:tw-border-r group-data-[side=secondary]:tw-border-l',\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          className=\"tw-flex tw-h-full tw-w-full tw-flex-col tw-bg-sidebar group-data-[variant=floating]:tw-rounded-lg group-data-[variant=floating]:tw-border group-data-[variant=floating]:tw-border-sidebar-border group-data-[variant=floating]:tw-shadow\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n});\nSidebar.displayName = 'Sidebar';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const context = useSidebar();\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn('tw-h-7 tw-w-7', className)}\n      onClick={(event) => {\n        onClick?.(event);\n        context.toggleSidebar();\n      }}\n      {...props}\n    >\n      {context.side === 'primary' ? <PanelLeft /> : <PanelRight />}\n      <span className=\"tw-sr-only\">Toggle Sidebar</span>\n    </Button>\n  );\n});\nSidebarTrigger.displayName = 'SidebarTrigger';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n  ({ className, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <button\n        type=\"button\"\n        ref={ref}\n        data-sidebar=\"rail\"\n        aria-label=\"Toggle Sidebar\"\n        tabIndex={-1}\n        onClick={toggleSidebar}\n        title=\"Toggle Sidebar\"\n        className={cn(\n          'tw-absolute tw-inset-y-0 tw-z-20 tw-hidden tw-w-4 tw--translate-x-1/2 tw-transition-all tw-ease-linear after:tw-absolute after:tw-inset-y-0 after:tw-left-1/2 after:tw-w-[2px] hover:after:tw-bg-sidebar-border group-data-[side=primary]:tw--right-4 group-data-[side=secondary]:tw-left-0 sm:tw-flex',\n          '[[data-side=secondary]_&]:tw-cursor-e-resize [[data-side=secondary]_&]:tw-cursor-w-resize',\n          '[[data-side=primary][data-state=collapsed]_&]:tw-cursor-e-resize [[data-side=secondary][data-state=collapsed]_&]:tw-cursor-w-resize',\n          'group-data-[collapsible=offcanvas]:tw-translate-x-0 group-data-[collapsible=offcanvas]:after:tw-left-full group-data-[collapsible=offcanvas]:hover:tw-bg-sidebar',\n          '[[data-side=primary][data-collapsible=offcanvas]_&]:tw--right-2',\n          '[[data-side=secondary][data-collapsible=offcanvas]_&]:tw--left-2',\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarRail.displayName = 'SidebarRail';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<'main'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <main\n        ref={ref}\n        className={cn(\n          // CUSTOM: Removed tw-min-h-svh\n          'tw-relative tw-flex tw-flex-1 tw-flex-col tw-bg-background',\n          'peer-data-[variant=inset]:tw-min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:tw-m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:tw-ml-2 md:peer-data-[variant=inset]:tw-ml-0 md:peer-data-[variant=inset]:tw-rounded-xl md:peer-data-[variant=inset]:tw-shadow',\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarInset.displayName = 'SidebarInset';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        'tw-h-8 tw-w-full tw-bg-background tw-shadow-none focus-visible:tw-ring-2 focus-visible:tw-ring-sidebar-ring',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarInput.displayName = 'SidebarInput';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        data-sidebar=\"header\"\n        className={cn('tw-flex tw-flex-col tw-gap-2 tw-p-2', className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarHeader.displayName = 'SidebarHeader';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        data-sidebar=\"footer\"\n        className={cn('tw-flex tw-flex-col tw-gap-2 tw-p-2', className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarFooter.displayName = 'SidebarFooter';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn('tw-mx-2 tw-w-auto tw-bg-sidebar-border', className)}\n      {...props}\n    />\n  );\n});\nSidebarSeparator.displayName = 'SidebarSeparator';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        data-sidebar=\"content\"\n        className={cn(\n          'tw-flex tw-min-h-0 tw-flex-1 tw-flex-col tw-gap-2 tw-overflow-auto group-data-[collapsible=icon]:tw-overflow-hidden',\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarContent.displayName = 'SidebarContent';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        data-sidebar=\"group\"\n        className={cn('tw-relative tw-flex tw-w-full tw-min-w-0 tw-flex-col tw-p-2', className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroup.displayName = 'SidebarGroup';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'div';\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        'tw-flex tw-h-8 tw-shrink-0 tw-items-center tw-rounded-md tw-px-2 tw-text-xs tw-font-medium tw-text-sidebar-foreground/70 tw-outline-none tw-ring-sidebar-ring tw-transition-[margin,opa] tw-duration-200 tw-ease-linear focus-visible:tw-ring-2 [&>svg]:tw-size-4 [&>svg]:tw-shrink-0',\n        'group-data-[collapsible=icon]:tw--mt-8 group-data-[collapsible=icon]:tw-opacity-0',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarGroupLabel.displayName = 'SidebarGroupLabel';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<'button'> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'button';\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        'tw-absolute tw-right-3 tw-top-3.5 tw-flex tw-aspect-square tw-w-5 tw-items-center tw-justify-center tw-rounded-md tw-p-0 tw-text-sidebar-foreground tw-outline-none tw-ring-sidebar-ring tw-transition-transform hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground focus-visible:tw-ring-2 [&>svg]:tw-size-4 [&>svg]:tw-shrink-0',\n        // Increases the hit area of the button on mobile.\n        'after:tw-absolute after:tw--inset-2 after:md:tw-hidden',\n        'group-data-[collapsible=icon]:tw-hidden',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarGroupAction.displayName = 'SidebarGroupAction';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      data-sidebar=\"group-content\"\n      className={cn('tw-w-full tw-text-sm', className)}\n      {...props}\n    />\n  ),\n);\nSidebarGroupContent.displayName = 'SidebarGroupContent';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<'ul'>>(\n  ({ className, ...props }, ref) => (\n    <ul\n      ref={ref}\n      data-sidebar=\"menu\"\n      className={cn('tw-flex tw-w-full tw-min-w-0 tw-flex-col tw-gap-1', className)}\n      {...props}\n    />\n  ),\n);\nSidebarMenu.displayName = 'SidebarMenu';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<'li'>>(\n  ({ className, ...props }, ref) => (\n    <li\n      ref={ref}\n      data-sidebar=\"menu-item\"\n      className={cn('tw-group/menu-item tw-relative', className)}\n      {...props}\n    />\n  ),\n);\nSidebarMenuItem.displayName = 'SidebarMenuItem';\n\nconst sidebarMenuButtonVariants = cva(\n  'tw-peer/menu-button tw-flex tw-w-full tw-items-center tw-gap-2 tw-overflow-hidden tw-rounded-md tw-p-2 tw-text-left tw-text-sm tw-outline-none tw-ring-sidebar-ring tw-transition-[width,height,padding] hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground focus-visible:tw-ring-2 active:tw-bg-sidebar-accent active:tw-text-sidebar-accent-foreground disabled:tw-pointer-events-none disabled:tw-opacity-50 tw-group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:tw-pointer-events-none aria-disabled:tw-opacity-50 data-[active=true]:tw-font-medium data-[active=true]:tw-text-sidebar-accent-foreground data-[active=true]:tw-bg-sidebar-accent data-[state=open]:hover:tw-bg-sidebar-accent data-[state=open]:hover:tw-text-sidebar-accent-foreground group-data-[collapsible=icon]:tw-!size-8 group-data-[collapsible=icon]:tw-!p-2 [&>span:last-child]:tw-truncate [&>svg]:tw-size-4 [&>svg]:tw-shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground',\n        outline:\n          'tw-bg-background tw-shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground hover:tw-shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]',\n      },\n      size: {\n        default: 'tw-h-8 tw-text-sm',\n        sm: 'tw-h-7 tw-text-xs',\n        lg: 'tw-h-12 tw-text-sm group-data-[collapsible=icon]:tw-!p-0',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<'button'> & {\n    asChild?: boolean;\n    isActive?: boolean;\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = 'default',\n      size = 'default',\n      tooltip,\n      className,\n      ...props\n    },\n    ref,\n  ) => {\n    const Comp = asChild ? Slot : 'button';\n    const { state } = useSidebar();\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    );\n\n    if (!tooltip) {\n      return button;\n    }\n\n    if (typeof tooltip === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      tooltip = {\n        children: tooltip,\n      };\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent side=\"right\" align=\"center\" hidden={state !== 'collapsed'} {...tooltip} />\n      </Tooltip>\n    );\n  },\n);\nSidebarMenuButton.displayName = 'SidebarMenuButton';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<'button'> & {\n    asChild?: boolean;\n    showOnHover?: boolean;\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'button';\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        'tw-peer-hover/menu-button:text-sidebar-accent-foreground tw-absolute tw-right-1 tw-top-1.5 tw-flex tw-aspect-square tw-w-5 tw-items-center tw-justify-center tw-rounded-md tw-p-0 tw-text-sidebar-foreground tw-outline-none tw-ring-sidebar-ring tw-transition-transform hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground focus-visible:tw-ring-2 [&>svg]:tw-size-4 [&>svg]:tw-shrink-0',\n        // Increases the hit area of the button on mobile.\n        'after:tw-absolute after:tw--inset-2 after:md:tw-hidden',\n        'tw-peer-data-[size=sm]/menu-button:top-1',\n        'tw-peer-data-[size=default]/menu-button:top-1.5',\n        'tw-peer-data-[size=lg]/menu-button:top-2.5',\n        'group-data-[collapsible=icon]:tw-hidden',\n        showOnHover &&\n          'tw-group-focus-within/menu-item:opacity-100 tw-group-hover/menu-item:opacity-100 tw-peer-data-[active=true]/menu-button:text-sidebar-accent-foreground data-[state=open]:tw-opacity-100 md:tw-opacity-0',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuAction.displayName = 'SidebarMenuAction';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        'tw-pointer-events-none tw-absolute tw-right-1 tw-flex tw-h-5 tw-min-w-5 tw-select-none tw-items-center tw-justify-center tw-rounded-md tw-px-1 tw-text-xs tw-font-medium tw-tabular-nums tw-text-sidebar-foreground',\n        'tw-peer-hover/menu-button:text-sidebar-accent-foreground tw-peer-data-[active=true]/menu-button:text-sidebar-accent-foreground',\n        'tw-peer-data-[size=sm]/menu-button:top-1',\n        'tw-peer-data-[size=default]/menu-button:top-1.5',\n        'tw-peer-data-[size=lg]/menu-button:top-2.5',\n        'group-data-[collapsible=icon]:tw-hidden',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuBadge.displayName = 'SidebarMenuBadge';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & {\n    showIcon?: boolean;\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn('tw-flex tw-h-8 tw-items-center tw-gap-2 tw-rounded-md tw-px-2', className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton className=\"tw-size-4 tw-rounded-md\" data-sidebar=\"menu-skeleton-icon\" />\n      )}\n      <Skeleton\n        className=\"tw-h-4 tw-max-w-[--skeleton-width] tw-flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          // eslint-disable-next-line no-type-assertion/no-type-assertion\n          {\n            '--skeleton-width': width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n});\nSidebarMenuSkeleton.displayName = 'SidebarMenuSkeleton';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<'ul'>>(\n  ({ className, ...props }, ref) => (\n    <ul\n      ref={ref}\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        'tw-mx-3.5 tw-flex tw-min-w-0 tw-translate-x-px tw-flex-col tw-gap-1 tw-border-l tw-border-sidebar-border tw-px-2.5 tw-py-0.5',\n        'group-data-[collapsible=icon]:tw-hidden',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuSub.displayName = 'SidebarMenuSub';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<'li'>>(\n  ({ ...props }, ref) => <li ref={ref} {...props} />,\n);\nSidebarMenuSubItem.displayName = 'SidebarMenuSubItem';\n\n/** @inheritdoc SidebarProvider */\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<'a'> & {\n    asChild?: boolean;\n    size?: 'sm' | 'md';\n    isActive?: boolean;\n  }\n>(({ asChild = false, size = 'md', isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'a';\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        'tw-flex tw-h-7 tw-min-w-0 tw--translate-x-px tw-items-center tw-gap-2 tw-overflow-hidden tw-rounded-md tw-px-2 tw-text-sidebar-foreground tw-outline-none tw-ring-sidebar-ring hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground focus-visible:tw-ring-2 active:tw-bg-sidebar-accent active:tw-text-sidebar-accent-foreground disabled:tw-pointer-events-none disabled:tw-opacity-50 aria-disabled:tw-pointer-events-none aria-disabled:tw-opacity-50 [&>span:last-child]:tw-truncate [&>svg]:tw-size-4 [&>svg]:tw-shrink-0 [&>svg]:tw-text-sidebar-accent-foreground',\n        'data-[active=true]:tw-bg-sidebar-accent data-[active=true]:tw-text-sidebar-accent-foreground',\n        size === 'sm' && 'tw-text-xs',\n        size === 'md' && 'tw-text-sm',\n        'group-data-[collapsible=icon]:tw-hidden',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuSubButton.displayName = 'SidebarMenuSubButton';\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","import { ComboBox } from '@/components/basics/combo-box.component';\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupLabel,\n  SidebarGroupContent,\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n} from '@/components/shadcn-ui/sidebar';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { ScrollText } from 'lucide-react';\nimport { useCallback } from 'react';\n\nexport type SelectedSettingsSidebarItem = {\n  label: string;\n  projectId?: string;\n};\n\nexport type ProjectInfo = { projectId: string; projectName: string };\n\nexport type SettingsSidebarProps = {\n  /** Optional id for testing */\n  id?: string;\n\n  /** Extension labels from contribution */\n  extensionLabels: Record<string, string>;\n\n  /** Project names and ids */\n  projectInfo: ProjectInfo[];\n\n  /** Handler for selecting a sidebar item */\n  handleSelectSidebarItem: (key: string, projectId?: string) => void;\n\n  /** The current selected value in the sidebar */\n  selectedSidebarItem: SelectedSettingsSidebarItem;\n\n  /** Label for the group of extensions setting groups */\n  extensionsSidebarGroupLabel: string;\n\n  /** Label for the group of projects settings */\n  projectsSidebarGroupLabel: string;\n\n  /** Placeholder text for the button */\n  buttonPlaceholderText: string;\n\n  /** Additional css classes to help with unique styling of the sidebar */\n  className?: string;\n};\n\n/**\n * The SettingsSidebar component is a sidebar that displays a list of extension settings and project\n * settings. It can be used to navigate to different settings pages. Must be wrapped in a\n * SidebarProvider component otherwise produces errors.\n *\n * @param props - {@link SettingsSidebarProps} The props for the component.\n */\nexport function SettingsSidebar({\n  id,\n  extensionLabels,\n  projectInfo,\n  handleSelectSidebarItem,\n  selectedSidebarItem,\n  extensionsSidebarGroupLabel,\n  projectsSidebarGroupLabel,\n  buttonPlaceholderText,\n  className,\n}: SettingsSidebarProps) {\n  const handleSelectItem = useCallback(\n    (item: string, projectId?: string) => {\n      handleSelectSidebarItem(item, projectId);\n    },\n    [handleSelectSidebarItem],\n  );\n\n  const getProjectNameFromProjectId = useCallback(\n    (projectId: string) => {\n      const project = projectInfo.find((info) => info.projectId === projectId);\n      return project ? project.projectName : projectId;\n    },\n    [projectInfo],\n  );\n\n  const getIsActive: (label: string) => boolean = useCallback(\n    (label: string) => !selectedSidebarItem.projectId && label === selectedSidebarItem.label,\n    [selectedSidebarItem],\n  );\n\n  return (\n    <Sidebar\n      id={id}\n      collapsible=\"none\"\n      variant=\"inset\"\n      className={cn('tw-w-96 tw-gap-2 tw-overflow-y-auto', className)}\n    >\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"tw-text-sm\">\n            {extensionsSidebarGroupLabel}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {Object.entries(extensionLabels).map(([key, label]) => (\n                <SidebarMenuItem key={key}>\n                  <SidebarMenuButton\n                    onClick={() => handleSelectItem(key)}\n                    isActive={getIsActive(key)}\n                  >\n                    <span className=\"tw-pl-3\">{label}</span>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"tw-text-sm\">{projectsSidebarGroupLabel}</SidebarGroupLabel>\n          <SidebarGroupContent className=\"tw-pl-3\">\n            <ComboBox\n              buttonVariant=\"ghost\"\n              buttonClassName={cn('tw-w-full', {\n                'tw-bg-sidebar-accent tw-text-sidebar-accent-foreground':\n                  selectedSidebarItem?.projectId,\n              })}\n              popoverContentClassName=\"tw-z-[1000]\"\n              options={projectInfo.flatMap((info) => info.projectId)}\n              getOptionLabel={getProjectNameFromProjectId}\n              buttonPlaceholder={buttonPlaceholderText}\n              onChange={(projectId: string) => {\n                const selectedProjectName = getProjectNameFromProjectId(projectId);\n                handleSelectItem(selectedProjectName, projectId);\n              }}\n              value={selectedSidebarItem?.projectId ?? undefined}\n              icon={<ScrollText />}\n            />\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n    </Sidebar>\n  );\n}\n\nexport default SettingsSidebar;\n","import { Button } from '@/components/shadcn-ui/button';\nimport { Input } from '@/components/shadcn-ui/input';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Search, X } from 'lucide-react';\nimport { forwardRef } from 'react';\n\n/** Props for the SearchBar component. */\nexport type SearchBarProps = {\n  /** Search query for the search bar */\n  value: string;\n  /**\n   * Callback fired to handle the search query is updated\n   *\n   * @param searchQuery\n   */\n  onSearch: (searchQuery: string) => void;\n\n  /** Optional string that appears in the search bar without a search string */\n  placeholder?: string;\n\n  /** Optional boolean to set the input base to full width */\n  isFullWidth?: boolean;\n\n  /** Additional css classes to help with unique styling of the search bar */\n  className?: string;\n\n  /** Optional boolean to disable the search bar */\n  isDisabled?: boolean;\n\n  /** Optional id for the root element */\n  id?: string;\n};\n\n/**\n * A search bar component with a search icon and a clear button when the search query is not empty.\n *\n * @param {SearchBarProps} props - The props for the component.\n * @param {string} props.value - The search query for the search bar\n * @param {(searchQuery: string) => void} props.onSearch - Callback fired to handle the search query\n *   is updated\n * @param {string} [props.placeholder] - Optional string that appears in the search bar without a\n *   search string\n * @param {boolean} [props.isFullWidth] - Optional boolean to set the input base to full width\n * @param {string} [props.className] - Additional css classes to help with unique styling of the\n *   search bar\n * @param {boolean} [props.isDisabled] - Optional boolean to disable the search bar\n * @param {string} [props.id] - Optional id for the root element\n */\nexport const SearchBar = forwardRef<HTMLInputElement, SearchBarProps>(\n  ({ value, onSearch, placeholder, isFullWidth, className, isDisabled = false, id }, inputRef) => {\n    const dir: Direction = readDirection();\n\n    return (\n      <div id={id} className={cn('tw-relative', { 'tw-w-full': isFullWidth }, className)}>\n        <Search\n          className={cn(\n            'tw-absolute tw-top-1/2 tw-h-4 tw-w-4 tw--translate-y-1/2 tw-transform tw-opacity-50',\n            { 'tw-right-3': dir === 'rtl' },\n            { 'tw-left-3': dir === 'ltr' },\n          )}\n        />\n        <Input\n          ref={inputRef}\n          className=\"tw-w-full tw-text-ellipsis tw-pe-9 tw-ps-9\"\n          placeholder={placeholder}\n          value={value}\n          onChange={(e) => onSearch(e.target.value)}\n          disabled={isDisabled}\n        />\n        {value && (\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className={cn(\n              'tw-absolute tw-top-1/2 tw-h-7 tw--translate-y-1/2 tw-transform hover:tw-bg-transparent',\n              { 'tw-left-0': dir === 'rtl' },\n              { 'tw-right-0': dir === 'ltr' },\n            )}\n            onClick={() => {\n              onSearch('');\n            }}\n          >\n            <X className=\"tw-h-4 tw-w-4\" />\n            <span className=\"tw-sr-only\">Clear</span>\n          </Button>\n        )}\n      </div>\n    );\n  },\n);\n\nSearchBar.displayName = 'SearchBar';\n\nexport default SearchBar;\n","import { SidebarInset, SidebarProvider } from '@/components/shadcn-ui/sidebar';\nimport { PropsWithChildren } from 'react';\nimport { SearchBar } from '@/components/basics/search-bar.component';\nimport { SettingsSidebar, SettingsSidebarProps } from './settings-sidebar.component';\n\nexport type SettingsSidebarContentSearchProps = SettingsSidebarProps &\n  PropsWithChildren & {\n    /** The search query in the search bar */\n    searchValue: string;\n\n    /** Handler to run when the value of the search bar changes */\n    onSearch: (searchQuery: string) => void;\n  };\n\n/**\n * A component that wraps a search bar and a settings sidebar, providing a way to search and\n * navigate to different settings pages.\n *\n * @param {SettingsSidebarContentSearchProps} props - The props for the component.\n * @param {string} props.id - The id of the sidebar.\n */\nexport function SettingsSidebarContentSearch({\n  id,\n  extensionLabels,\n  projectInfo,\n  children,\n  handleSelectSidebarItem,\n  selectedSidebarItem,\n  searchValue,\n  onSearch,\n  extensionsSidebarGroupLabel,\n  projectsSidebarGroupLabel,\n  buttonPlaceholderText,\n}: SettingsSidebarContentSearchProps) {\n  return (\n    <div className=\"tw-box-border tw-flex tw-h-full tw-flex-col\">\n      <div className=\"tw-box-border tw-flex tw-items-center tw-justify-center tw-py-4\">\n        <SearchBar\n          className=\"tw-w-9/12\"\n          value={searchValue}\n          onSearch={onSearch}\n          placeholder=\"Search app settings, extension settings, and project settings\"\n        />\n      </div>\n      <SidebarProvider\n        id={id}\n        className=\"tw-h-full tw-flex-1 tw-gap-4 tw-overflow-auto tw-border-t\"\n      >\n        <SettingsSidebar\n          className=\"tw-w-1/2 tw-min-w-[140px] tw-max-w-[220px] tw-border-e\"\n          extensionLabels={extensionLabels}\n          projectInfo={projectInfo}\n          handleSelectSidebarItem={handleSelectSidebarItem}\n          selectedSidebarItem={selectedSidebarItem}\n          extensionsSidebarGroupLabel={extensionsSidebarGroupLabel}\n          projectsSidebarGroupLabel={projectsSidebarGroupLabel}\n          buttonPlaceholderText={buttonPlaceholderText}\n        />\n        <SidebarInset className=\"tw-min-w-[215px]\">{children}</SidebarInset>\n      </SidebarProvider>\n    </div>\n  );\n}\n\nexport default SettingsSidebarContentSearch;\n","import { Button } from '@/components/shadcn-ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/shadcn-ui/select';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/shadcn-ui/table';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Canon } from '@sillsdev/scripture';\nimport {\n  Cell,\n  ColumnDef,\n  flexRender,\n  getCoreRowModel,\n  getExpandedRowModel,\n  getGroupedRowModel,\n  getSortedRowModel,\n  GroupingState,\n  Row,\n  RowSelectionState,\n  SortingState,\n  useReactTable,\n} from '@tanstack/react-table';\nimport '@/components/advanced/scripture-results-viewer/scripture-results-viewer.component.css';\nimport {\n  compareScrRefs,\n  formatScrRef,\n  ScriptureSelection,\n  scrRefToBBBCCCVVV,\n} from 'platform-bible-utils';\nimport { MouseEvent, useEffect, useMemo, useState } from 'react';\nimport { ChevronDown, ChevronLeft, ChevronRight } from 'lucide-react';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * Information (e.g., a checking error or some other type of \"transient\" annotation) about something\n * noteworthy at a specific place in an instance of the Scriptures.\n */\nexport type ScriptureItemDetail = ScriptureSelection & {\n  /**\n   * Text of the error, note, etc. In the future, we might want to support something more than just\n   * text so that a JSX element could be provided with a link or some other controls related to the\n   * issue being reported.\n   */\n  detail: string;\n};\n\n/**\n * A uniquely identifiable source of results that can be displayed in the ScriptureResultsViewer.\n * Generally, the source will be a particular Scripture check, but there may be other types of\n * sources.\n */\nexport type ResultsSource = {\n  /**\n   * Uniquely identifies the source.\n   *\n   * @type {string}\n   */\n  id: string;\n\n  /**\n   * Name (potentially localized) of the source, suitable for display in the UI.\n   *\n   * @type {string}\n   */\n  displayName: string;\n};\n\nexport type ScriptureSrcItemDetail = ScriptureItemDetail & {\n  /** Source/type of detail. Can be used for grouping. */\n  source: ResultsSource;\n};\n\n/**\n * Represents a set of results keyed by Scripture reference. Generally, the source will be a\n * particular Scripture check, but this type also allows for other types of uniquely identifiable\n * sources.\n */\nexport type ResultsSet = {\n  /**\n   * The backing source associated with this set of results.\n   *\n   * @type {ResultsSource}\n   */\n  source: ResultsSource;\n\n  /**\n   * Array of Scripture item details (messages keyed by Scripture reference).\n   *\n   * @type {ScriptureItemDetail[]}\n   */\n  data: ScriptureItemDetail[];\n};\n\nconst scrBookColId = 'scrBook';\nconst scrRefColId = 'scrRef';\nconst typeColId = 'source';\nconst detailsColId = 'details';\n\nconst defaultScrRefColumnName = 'Scripture Reference';\nconst defaultScrBookGroupName = 'Scripture Book';\nconst defaultTypeColumnName = 'Type';\nconst defaultDetailsColumnName = 'Details';\n\nexport type ScriptureResultsViewerColumnInfo = {\n  /** Optional header to display for the Reference column. Default value: 'Scripture Reference'. */\n  scriptureReferenceColumnName?: string;\n\n  /** Optional text to display to refer to the Scripture book group. Default value: 'Scripture Book'. */\n  scriptureBookGroupName?: string;\n\n  /** Optional header to display for the Type column. Default value: 'Type'. */\n  typeColumnName?: string;\n\n  /** Optional header to display for the Details column. Default value: 'Details' */\n  detailsColumnName?: string;\n};\n\nexport type ScriptureResultsViewerProps = ScriptureResultsViewerColumnInfo & {\n  /** Groups of ScriptureItemDetail objects from particular sources (e.g., Scripture checks) */\n  sources: ResultsSet[];\n\n  /** Flag indicating whether to display column headers. Default is false. */\n  showColumnHeaders?: boolean;\n\n  /** Flag indicating whether to display source column. Default is false. */\n  showSourceColumn?: boolean;\n\n  /** Callback function to notify when a row is selected */\n  onRowSelected?: (selectedRow: ScriptureSrcItemDetail | undefined) => void;\n\n  /** Optional id attribute for the outermost element */\n  id?: string;\n};\n\nfunction getColumns(\n  colInfo?: ScriptureResultsViewerColumnInfo,\n  showSourceColumn?: boolean,\n): ColumnDef<ScriptureSrcItemDetail>[] {\n  const showSrcCol = showSourceColumn ?? false;\n  return [\n    {\n      accessorFn: (row) => `${row.start.book} ${row.start.chapterNum}:${row.start.verseNum}`,\n      id: scrBookColId,\n      header: colInfo?.scriptureReferenceColumnName ?? defaultScrRefColumnName,\n      cell: (info) => {\n        const row = info.row.original;\n        if (info.row.getIsGrouped()) {\n          return Canon.bookIdToEnglishName(row.start.book);\n        }\n        return info.row.groupingColumnId === scrBookColId ? formatScrRef(row.start) : undefined;\n      },\n      getGroupingValue: (row) => Canon.bookIdToNumber(row.start.book),\n      sortingFn: (a, b) => {\n        return compareScrRefs(a.original.start, b.original.start);\n      },\n      enableGrouping: true,\n    },\n    {\n      accessorFn: (row) => formatScrRef(row.start),\n      id: scrRefColId,\n      header: undefined,\n      cell: (info) => {\n        const row = info.row.original;\n        return info.row.getIsGrouped() ? undefined : formatScrRef(row.start);\n      },\n      sortingFn: (a, b) => {\n        return compareScrRefs(a.original.start, b.original.start);\n      },\n      enableGrouping: false,\n    },\n    {\n      accessorFn: (row) => row.source.displayName,\n      id: typeColId,\n      header: showSrcCol ? (colInfo?.typeColumnName ?? defaultTypeColumnName) : undefined,\n      cell: (info) => (showSrcCol || info.row.getIsGrouped() ? info.getValue() : undefined),\n      getGroupingValue: (row) => row.source.id,\n      sortingFn: (a, b) =>\n        a.original.source.displayName.localeCompare(b.original.source.displayName),\n      enableGrouping: true,\n    },\n    {\n      accessorFn: (row) => row.detail,\n      id: detailsColId,\n      header: colInfo?.detailsColumnName ?? defaultDetailsColumnName,\n      cell: (info) => info.getValue(),\n      enableGrouping: false,\n    },\n  ];\n}\n\nconst toRefOrRange = (scriptureSelection: ScriptureSelection) => {\n  if (!('offset' in scriptureSelection.start))\n    throw new Error('No offset available in range start');\n  if (scriptureSelection.end && !('offset' in scriptureSelection.end))\n    throw new Error('No offset available in range end');\n  const { offset: offsetStart } = scriptureSelection.start;\n  let offsetEnd: number = 0;\n  if (scriptureSelection.end) ({ offset: offsetEnd } = scriptureSelection.end);\n  if (\n    !scriptureSelection.end ||\n    compareScrRefs(scriptureSelection.start, scriptureSelection.end) === 0\n  )\n    return `${scrRefToBBBCCCVVV(scriptureSelection.start)}+${offsetStart}`;\n  return `${scrRefToBBBCCCVVV(scriptureSelection.start)}+${offsetStart}-${scrRefToBBBCCCVVV(scriptureSelection.end)}+${offsetEnd}`;\n};\n\nconst getRowKey = (row: ScriptureSrcItemDetail) =>\n  `${toRefOrRange({ start: row.start, end: row.end })} ${row.source.displayName} ${row.detail}`;\n\n/**\n * Component to display a combined list of detailed items from one or more sources, where the items\n * are keyed primarily by Scripture reference. This is particularly useful for displaying a list of\n * results from Scripture checks, but more generally could be used to display any \"results\" from any\n * source(s). The component allows for grouping by Scripture book, source, or both. By default, it\n * displays somewhat \"tree-like\" which allows it to be more horizontally compact and intuitive. But\n * it also has the option of displaying as a traditional table with column headings (with or without\n * the source column showing).\n */\nexport function ScriptureResultsViewer({\n  sources,\n  showColumnHeaders = false,\n  showSourceColumn = false,\n  scriptureReferenceColumnName,\n  scriptureBookGroupName,\n  typeColumnName,\n  detailsColumnName,\n  onRowSelected,\n  id,\n}: ScriptureResultsViewerProps) {\n  const [grouping, setGrouping] = useState<GroupingState>([]);\n  const [sorting, setSorting] = useState<SortingState>([{ id: scrBookColId, desc: false }]);\n  const [rowSelection, setRowSelection] = useState<RowSelectionState>({});\n\n  const scriptureResults = useMemo(\n    () =>\n      sources.flatMap((source) => {\n        return source.data.map((item) => ({\n          ...item,\n          source: source.source,\n        }));\n      }),\n    [sources],\n  );\n\n  const columns = useMemo(\n    () =>\n      getColumns(\n        {\n          scriptureReferenceColumnName,\n          typeColumnName,\n          detailsColumnName,\n        },\n        showSourceColumn,\n      ),\n    [scriptureReferenceColumnName, typeColumnName, detailsColumnName, showSourceColumn],\n  );\n\n  useEffect(() => {\n    // Ensure sorting is applied correctly when grouped by type\n    if (grouping.includes(typeColId)) {\n      setSorting([\n        { id: typeColId, desc: false },\n        { id: scrBookColId, desc: false },\n      ]);\n    } else {\n      setSorting([{ id: scrBookColId, desc: false }]);\n    }\n  }, [grouping]);\n\n  const table = useReactTable({\n    data: scriptureResults,\n    columns,\n    state: {\n      grouping,\n      sorting,\n      rowSelection,\n    },\n    onGroupingChange: setGrouping,\n    onSortingChange: setSorting,\n    onRowSelectionChange: setRowSelection,\n    getExpandedRowModel: getExpandedRowModel(),\n    getGroupedRowModel: getGroupedRowModel(),\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getRowId: getRowKey,\n    autoResetExpanded: false,\n    enableMultiRowSelection: false,\n    enableSubRowSelection: false,\n  });\n\n  useEffect(() => {\n    if (onRowSelected) {\n      const selectedRows = table.getSelectedRowModel().rowsById;\n      const keys = Object.keys(selectedRows);\n      if (keys.length === 1) {\n        const selectedRow = scriptureResults.find((row) => getRowKey(row) === keys[0]) || undefined;\n        if (selectedRow) onRowSelected(selectedRow);\n      }\n    }\n  }, [rowSelection, scriptureResults, onRowSelected, table]);\n\n  // Define possible grouping options\n  const scrBookGroupName = scriptureBookGroupName ?? defaultScrBookGroupName;\n  const typeGroupName = typeColumnName ?? defaultTypeColumnName;\n\n  const groupingOptions = [\n    { label: 'No Grouping', value: [] },\n    { label: `Group by ${scrBookGroupName}`, value: [scrBookColId] },\n    { label: `Group by ${typeGroupName}`, value: [typeColId] },\n    {\n      label: `Group by ${scrBookGroupName} and ${typeGroupName}`,\n      value: [scrBookColId, typeColId],\n    },\n    {\n      label: `Group by ${typeGroupName} and ${scrBookGroupName}`,\n      value: [typeColId, scrBookColId],\n    },\n  ];\n\n  const handleSelectChange = (selectedGrouping: string) => {\n    setGrouping(JSON.parse(selectedGrouping));\n  };\n\n  const handleRowClick = (row: Row<ScriptureSrcItemDetail>, event: MouseEvent) => {\n    if (!row.getIsGrouped() && !row.getIsSelected()) {\n      row.getToggleSelectedHandler()(event);\n    }\n  };\n\n  const getEvenOrOddBandingStyle = (row: Row<ScriptureSrcItemDetail>, index: number) => {\n    if (row.getIsGrouped()) return '';\n    // UX has now said they don't think they want banding. I'm leaving in the code to\n    // set even and odd styles, but there's nothing in the CSS to style them differently.\n    // The \"even\" style used to also have  tw-bg-neutral-300 (along with even) to create\n    // a visual banding effect. That could be added back in if UX changes the decision.\n    return cn('banded-row', index % 2 === 0 ? 'even' : 'odd');\n  };\n\n  const getIndent = (\n    groupingState: GroupingState,\n    row: Row<ScriptureSrcItemDetail>,\n    cell: Cell<ScriptureSrcItemDetail, unknown>,\n  ) => {\n    if (groupingState?.length === 0 || row.depth < cell.column.getGroupedIndex()) return undefined;\n    if (row.getIsGrouped()) {\n      switch (row.depth) {\n        case 1:\n          return 'tw-ps-4';\n        default:\n          return undefined;\n      }\n    }\n    switch (row.depth) {\n      case 1:\n        return 'tw-ps-8';\n      case 2:\n        return 'tw-ps-12';\n      default:\n        return undefined;\n    }\n  };\n\n  return (\n    <div id={id} className=\"pr-twp tw-flex tw-h-full tw-w-full tw-flex-col\">\n      {!showColumnHeaders && (\n        <Select\n          value={JSON.stringify(grouping)}\n          onValueChange={(value) => {\n            handleSelectChange(value);\n          }}\n        >\n          <SelectTrigger className=\"tw-mb-1 tw-mt-2\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent position=\"item-aligned\">\n            <SelectGroup>\n              {groupingOptions.map((option) => (\n                <SelectItem key={option.label} value={JSON.stringify(option.value)}>\n                  {option.label}\n                </SelectItem>\n              ))}\n            </SelectGroup>\n          </SelectContent>\n        </Select>\n      )}\n      <Table className=\"tw-relative tw-flex tw-flex-col tw-overflow-y-auto tw-p-0\">\n        {showColumnHeaders && (\n          <TableHeader>\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers\n                  .filter((h) => h.column.columnDef.header)\n                  .map((header) => (\n                    /* For sticky column headers to work, we probably need to change the default definition of the shadcn Table component. See https://github.com/shadcn-ui/ui/issues/1151 */\n                    <TableHead key={header.id} colSpan={header.colSpan} className=\"top-0 tw-sticky\">\n                      {header.isPlaceholder ? undefined : (\n                        <div>\n                          {header.column.getCanGroup() ? (\n                            <Button\n                              variant=\"ghost\"\n                              title={`Toggle grouping by ${header.column.columnDef.header}`}\n                              onClick={header.column.getToggleGroupingHandler()}\n                              type=\"button\"\n                            >\n                              {header.column.getIsGrouped() ? `ðŸ›‘` : `ðŸ‘Š `}\n                            </Button>\n                          ) : undefined}{' '}\n                          {flexRender(header.column.columnDef.header, header.getContext())}\n                        </div>\n                      )}\n                    </TableHead>\n                  ))}\n              </TableRow>\n            ))}\n          </TableHeader>\n        )}\n        <TableBody>\n          {table.getRowModel().rows.map((row, rowIndex) => {\n            const dir: Direction = readDirection();\n            return (\n              <TableRow\n                data-state={row.getIsSelected() ? 'selected' : ''}\n                key={row.id}\n                className={cn(getEvenOrOddBandingStyle(row, rowIndex))}\n                onClick={(event) => handleRowClick(row, event)}\n              >\n                {row.getVisibleCells().map((cell) => {\n                  if (\n                    cell.getIsPlaceholder() ||\n                    (cell.column.columnDef.enableGrouping &&\n                      !cell.getIsGrouped() &&\n                      (cell.column.columnDef.id !== typeColId || !showSourceColumn))\n                  )\n                    return undefined;\n                  return (\n                    <TableCell\n                      key={cell.id}\n                      // It seems like a hack to use tw-p-[1px] to override the \"built in\" tw-p-4\n                      // that comes in with the shadcn TableCell class. I could just remove it from\n                      // that class, but it's not clear that that is desirable. I'm not even 100%\n                      // sure I know what padding value to use here, but the problem with 4 (the\n                      // default) is that is prevents the nested indentation when grouping.\n                      className={cn(\n                        cell.column.columnDef.id,\n                        'tw-p-[1px]',\n                        getIndent(grouping, row, cell),\n                      )}\n                    >\n                      {(() => {\n                        if (cell.getIsGrouped()) {\n                          return (\n                            <Button\n                              variant=\"link\"\n                              onClick={row.getToggleExpandedHandler()}\n                              type=\"button\"\n                            >\n                              {row.getIsExpanded() && <ChevronDown />}\n                              {!row.getIsExpanded() &&\n                                (dir === 'ltr' ? <ChevronRight /> : <ChevronLeft />)}{' '}\n                              {flexRender(cell.column.columnDef.cell, cell.getContext())} (\n                              {row.subRows.length})\n                            </Button>\n                          );\n                        }\n\n                        // if (cell.getIsAggregated()) {\n                        //   flexRender(\n                        //     cell.column.columnDef.aggregatedCell ?? cell.column.columnDef.cell,\n                        //     cell.getContext(),\n                        //   );\n                        // }\n\n                        return flexRender(cell.column.columnDef.cell, cell.getContext());\n                      })()}\n                    </TableCell>\n                  );\n                })}\n              </TableRow>\n            );\n          })}\n        </TableBody>\n      </Table>\n    </div>\n  );\n}\n\nexport default ScriptureResultsViewer;\n","import { getSectionForBook, Section } from 'platform-bible-utils';\n\n/**\n * Filters an array of book IDs to only include books from a specific section\n *\n * @param bookIds Array of book IDs to filter\n * @param section The section to filter by\n * @returns Array of book IDs that belong to the specified section\n */\nexport const getBooksForSection = (bookIds: string[], section: Section) => {\n  return bookIds.filter((bookId) => {\n    try {\n      return getSectionForBook(bookId) === section;\n    } catch {\n      return false;\n    }\n  });\n};\n\n/**\n * Checks if all books in a given section are included in the selectedBookIds array\n *\n * @param bookIds Array of all available book IDs\n * @param section The section to check\n * @param selectedBookIds Array of currently selected book IDs\n * @returns True if all books from the specified section are selected, false otherwise\n */\nexport const isSectionFullySelected = (\n  bookIds: string[],\n  section: Section,\n  selectedBookIds: string[],\n) => getBooksForSection(bookIds, section).every((bookId) => selectedBookIds.includes(bookId));\n","import { Button } from '@/components/shadcn-ui/button';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { LanguageStrings, Section } from 'platform-bible-utils';\nimport { getSectionShortName } from '@/components/shared/book.utils';\nimport { getBooksForSection, isSectionFullySelected } from './scope-selector.utils';\n\n/**\n * A button component that represents a scripture section (testament) in the book selector. The\n * button shows a different state when all books in its section are selected and becomes disabled\n * when no books are available in its section.\n */\nfunction SectionButton({\n  section,\n  availableBookIds,\n  selectedBookIds,\n  onToggle,\n  localizedStrings,\n}: {\n  section: Section;\n  availableBookIds: string[];\n  selectedBookIds: string[];\n  onToggle: (section: Section) => void;\n  localizedStrings: LanguageStrings;\n}) {\n  const isDisabled = getBooksForSection(availableBookIds, section).length === 0;\n\n  const sectionOtShortText = localizedStrings['%scripture_section_ot_short%'];\n  const sectionNtShortText = localizedStrings['%scripture_section_nt_short%'];\n  const sectionDcShortText = localizedStrings['%scripture_section_dc_short%'];\n  const sectionExtraShortText = localizedStrings['%scripture_section_extra_short%'];\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"sm\"\n      onClick={() => onToggle(section)}\n      className={cn(\n        isSectionFullySelected(availableBookIds, section, selectedBookIds) &&\n          !isDisabled &&\n          'tw-bg-primary tw-text-primary-foreground hover:tw-bg-primary/70 hover:tw-text-primary-foreground',\n      )}\n      disabled={isDisabled}\n    >\n      {getSectionShortName(\n        section,\n        sectionOtShortText,\n        sectionNtShortText,\n        sectionDcShortText,\n        sectionExtraShortText,\n      )}\n    </Button>\n  );\n}\n\nexport default SectionButton;\n","import { BookItem } from '@/components/shared/book-item.component';\nimport { Badge } from '@/components/shadcn-ui/badge';\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandList,\n  CommandSeparator,\n} from '@/components/shadcn-ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/shadcn-ui/popover';\nimport { Canon } from '@sillsdev/scripture';\nimport { ChevronsUpDown } from 'lucide-react';\nimport { getSectionForBook, LanguageStrings, Section } from 'platform-bible-utils';\nimport {\n  getSectionLongName,\n  getLocalizedBookName,\n  doesBookMatchQuery,\n} from '@/components/shared/book.utils';\nimport { Fragment, MouseEvent, useCallback, useMemo, useRef, useState } from 'react';\nimport { generateCommandValue } from '@/components/shared/book-item.utils';\nimport { getBooksForSection, isSectionFullySelected } from './scope-selector.utils';\nimport SectionButton from './section-button.component';\n\n/** Maximum number of badges to show before collapsing into a \"+X more\" badge */\nconst VISIBLE_BADGES_COUNT = 5;\n/** Maximum number of badges that can be shown without triggering the collapse */\nconst MAX_VISIBLE_BADGES = 6;\n\ntype BookSelectorProps = {\n  /**\n   * Information about available books, formatted as a 123 character long string as defined in a\n   * projects BooksPresent setting\n   */\n  availableBookInfo: string;\n  /** Array of currently selected book IDs */\n  selectedBookIds: string[];\n  /** Callback function that is executed when the book selection changes */\n  onChangeSelectedBookIds: (books: string[]) => void;\n  /** Object containing the localized strings for the component */\n  localizedStrings: LanguageStrings;\n  /**\n   * Optional map of localized book IDs/short names and full names. Key is the (English) book ID,\n   * value contains localized versions of the ID and full book name\n   */\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>;\n};\n\n/**\n * A component for selecting multiple books from the Bible canon. It provides:\n *\n * - Quick selection buttons for major sections (OT, NT, DC, Extra)\n * - A searchable dropdown with all available books\n * - Support for shift-click range selection\n * - Visual feedback with badges showing selected books\n */\nexport function BookSelector({\n  availableBookInfo,\n  selectedBookIds,\n  onChangeSelectedBookIds,\n  localizedStrings,\n  localizedBookNames,\n}: BookSelectorProps) {\n  const booksSelectedText = localizedStrings['%webView_book_selector_books_selected%'];\n  const selectBooksText = localizedStrings['%webView_book_selector_select_books%'];\n  const searchBooksText = localizedStrings['%webView_book_selector_search_books%'];\n  const selectAllText = localizedStrings['%webView_book_selector_select_all%'];\n  const clearAllText = localizedStrings['%webView_book_selector_clear_all%'];\n  const noBookFoundText = localizedStrings['%webView_book_selector_no_book_found%'];\n  const moreText = localizedStrings['%webView_book_selector_more%'];\n\n  const { otLong, ntLong, dcLong, extraLong } = {\n    otLong: localizedStrings?.['%scripture_section_ot_long%'],\n    ntLong: localizedStrings?.['%scripture_section_nt_long%'],\n    dcLong: localizedStrings?.['%scripture_section_dc_long%'],\n    extraLong: localizedStrings?.['%scripture_section_extra_long%'],\n  };\n\n  const [isBooksSelectorOpen, setIsBooksSelectorOpen] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n  const lastSelectedBookRef = useRef<string | undefined>(undefined);\n  const lastKeyEventShiftKey = useRef(false);\n\n  if (availableBookInfo.length !== Canon.allBookIds.length) {\n    throw new Error('availableBookInfo length must match Canon.allBookIds length');\n  }\n\n  const availableBooksIds = useMemo(() => {\n    return Canon.allBookIds.filter(\n      (bookId, index) =>\n        availableBookInfo[index] === '1' && !Canon.isObsolete(Canon.bookIdToNumber(bookId)),\n    );\n  }, [availableBookInfo]);\n\n  const filteredBooksBySection = useMemo(() => {\n    if (!inputValue.trim()) {\n      const allBooks: Record<Section, string[]> = {\n        [Section.OT]: [],\n        [Section.NT]: [],\n        [Section.DC]: [],\n        [Section.Extra]: [],\n      };\n\n      availableBooksIds.forEach((bookId) => {\n        const section = getSectionForBook(bookId);\n        allBooks[section].push(bookId);\n      });\n\n      return allBooks;\n    }\n\n    const filteredBooks = availableBooksIds.filter((bookId) =>\n      doesBookMatchQuery(bookId, inputValue, localizedBookNames),\n    );\n\n    const matchingBooks: Record<Section, string[]> = {\n      [Section.OT]: [],\n      [Section.NT]: [],\n      [Section.DC]: [],\n      [Section.Extra]: [],\n    };\n\n    filteredBooks.forEach((bookId) => {\n      const section = getSectionForBook(bookId);\n      matchingBooks[section].push(bookId);\n    });\n\n    return matchingBooks;\n  }, [availableBooksIds, inputValue, localizedBookNames]);\n\n  const toggleBook = useCallback(\n    (bookId: string, shiftKey = false) => {\n      if (!shiftKey || !lastSelectedBookRef.current) {\n        onChangeSelectedBookIds(\n          selectedBookIds.includes(bookId)\n            ? selectedBookIds.filter((id) => id !== bookId)\n            : [...selectedBookIds, bookId],\n        );\n        lastSelectedBookRef.current = bookId;\n        return;\n      }\n\n      const lastIndex = availableBooksIds.findIndex((id) => id === lastSelectedBookRef.current);\n      const currentIndex = availableBooksIds.findIndex((id) => id === bookId);\n\n      if (lastIndex === -1 || currentIndex === -1) return;\n\n      const [startIndex, endIndex] = [\n        Math.min(lastIndex, currentIndex),\n        Math.max(lastIndex, currentIndex),\n      ];\n      const booksInRange = availableBooksIds.slice(startIndex, endIndex + 1).map((id) => id);\n\n      onChangeSelectedBookIds(\n        selectedBookIds.includes(bookId)\n          ? selectedBookIds.filter((shortname) => !booksInRange.includes(shortname))\n          : [...new Set([...selectedBookIds, ...booksInRange])],\n      );\n    },\n    [selectedBookIds, onChangeSelectedBookIds, availableBooksIds],\n  );\n\n  const handleKeyboardSelect = (bookId: string) => {\n    toggleBook(bookId, lastKeyEventShiftKey.current);\n    lastKeyEventShiftKey.current = false;\n  };\n\n  const handleMouseDown = (event: MouseEvent, bookId: string) => {\n    event.preventDefault();\n    toggleBook(bookId, event.shiftKey);\n  };\n\n  const toggleSection = useCallback(\n    (section: Section) => {\n      const sectionBooks = getBooksForSection(availableBooksIds, section).map((bookId) => bookId);\n      onChangeSelectedBookIds(\n        isSectionFullySelected(availableBooksIds, section, selectedBookIds)\n          ? selectedBookIds.filter((shortname) => !sectionBooks.includes(shortname))\n          : [...new Set([...selectedBookIds, ...sectionBooks])],\n      );\n    },\n    [selectedBookIds, onChangeSelectedBookIds, availableBooksIds],\n  );\n\n  const handleSelectAll = () => {\n    onChangeSelectedBookIds(availableBooksIds.map((bookId) => bookId));\n  };\n\n  const handleClearAll = () => {\n    onChangeSelectedBookIds([]);\n  };\n\n  return (\n    <div className=\"tw-space-y-2\">\n      <div className=\"tw-flex tw-flex-wrap tw-gap-2\">\n        {Object.values(Section).map((section) => {\n          return (\n            <SectionButton\n              key={section}\n              section={section}\n              availableBookIds={availableBooksIds}\n              selectedBookIds={selectedBookIds}\n              onToggle={toggleSection}\n              localizedStrings={localizedStrings}\n            />\n          );\n        })}\n      </div>\n\n      <Popover\n        open={isBooksSelectorOpen}\n        onOpenChange={(open) => {\n          setIsBooksSelectorOpen(open);\n          if (!open) {\n            setInputValue(''); // Reset search when closing\n          }\n        }}\n      >\n        <PopoverTrigger asChild>\n          <Button\n            variant=\"outline\"\n            role=\"combobox\"\n            aria-expanded={isBooksSelectorOpen}\n            className=\"tw-max-w-64 tw-justify-between\"\n          >\n            {selectedBookIds.length > 0\n              ? `${booksSelectedText}: ${selectedBookIds.length}`\n              : selectBooksText}\n            <ChevronsUpDown className=\"tw-ml-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\" />\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"tw-w-full tw-p-0\" align=\"start\">\n          <Command\n            shouldFilter={false}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') {\n                // Store shift state in a ref that will be used by onSelect\n                lastKeyEventShiftKey.current = e.shiftKey;\n              }\n            }}\n          >\n            <CommandInput\n              placeholder={searchBooksText}\n              value={inputValue}\n              onValueChange={setInputValue}\n            />\n            <div className=\"tw-flex tw-justify-between tw-border-b tw-p-2\">\n              <Button variant=\"ghost\" size=\"sm\" onClick={handleSelectAll}>\n                {selectAllText}\n              </Button>\n              <Button variant=\"ghost\" size=\"sm\" onClick={handleClearAll}>\n                {clearAllText}\n              </Button>\n            </div>\n            <CommandList>\n              <CommandEmpty>{noBookFoundText}</CommandEmpty>\n              {Object.values(Section).map((section, index) => {\n                const sectionBooks = filteredBooksBySection[section];\n\n                if (sectionBooks.length === 0) return undefined;\n\n                return (\n                  <Fragment key={section}>\n                    <CommandGroup\n                      heading={getSectionLongName(section, otLong, ntLong, dcLong, extraLong)}\n                    >\n                      {sectionBooks.map((bookId) => (\n                        <BookItem\n                          key={bookId}\n                          bookId={bookId}\n                          isSelected={selectedBookIds.includes(bookId)}\n                          onSelect={() => handleKeyboardSelect(bookId)}\n                          onMouseDown={(event) => handleMouseDown(event, bookId)}\n                          section={getSectionForBook(bookId)}\n                          showCheck\n                          localizedBookNames={localizedBookNames}\n                          commandValue={generateCommandValue(bookId, localizedBookNames)}\n                          className=\"tw-flex tw-items-center\"\n                        />\n                      ))}\n                    </CommandGroup>\n                    {index < Object.values(Section).length - 1 && <CommandSeparator />}\n                  </Fragment>\n                );\n              })}\n            </CommandList>\n          </Command>\n        </PopoverContent>\n      </Popover>\n\n      {selectedBookIds.length > 0 && (\n        <div className=\"tw-mt-2 tw-flex tw-flex-wrap tw-gap-1\">\n          {selectedBookIds\n            .slice(\n              0,\n              selectedBookIds.length === MAX_VISIBLE_BADGES\n                ? MAX_VISIBLE_BADGES\n                : VISIBLE_BADGES_COUNT,\n            )\n            .map((bookId) => (\n              <Badge className=\"hover:tw-bg-secondary\" key={bookId} variant=\"secondary\">\n                {getLocalizedBookName(bookId, localizedBookNames)}\n              </Badge>\n            ))}\n          {selectedBookIds.length > MAX_VISIBLE_BADGES && (\n            <Badge\n              className=\"hover:tw-bg-secondary\"\n              variant=\"secondary\"\n            >{`+${selectedBookIds.length - VISIBLE_BADGES_COUNT} ${moreText}`}</Badge>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { BookSelector } from '@/components/advanced/scope-selector/book-selector.component';\nimport { Label } from '@/components/shadcn-ui/label';\nimport { RadioGroup, RadioGroupItem } from '@/components/shadcn-ui/radio-group';\nimport { Scope } from '@/components/utils/scripture.util';\nimport { LocalizedStringValue } from 'platform-bible-utils';\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const SCOPE_SELECTOR_STRING_KEYS = Object.freeze([\n  '%webView_scope_selector_selected_text%',\n  '%webView_scope_selector_current_verse%',\n  '%webView_scope_selector_current_chapter%',\n  '%webView_scope_selector_current_book%',\n  '%webView_scope_selector_choose_books%',\n  '%webView_scope_selector_scope%',\n  '%webView_scope_selector_select_books%',\n  '%webView_book_selector_books_selected%',\n  '%webView_book_selector_select_books%',\n  '%webView_book_selector_search_books%',\n  '%webView_book_selector_select_all%',\n  '%webView_book_selector_clear_all%',\n  '%webView_book_selector_no_book_found%',\n  '%webView_book_selector_more%',\n  '%scripture_section_ot_long%',\n  '%scripture_section_ot_short%',\n  '%scripture_section_nt_long%',\n  '%scripture_section_nt_short%',\n  '%scripture_section_dc_long%',\n  '%scripture_section_dc_short%',\n  '%scripture_section_extra_long%',\n  '%scripture_section_extra_short%',\n] as const);\n\n/** Type definition for the localized strings used in this component */\nexport type ScopeSelectorLocalizedStrings = {\n  [localizedInventoryKey in (typeof SCOPE_SELECTOR_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: ScopeSelectorLocalizedStrings,\n  key: keyof ScopeSelectorLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\n/** Props for configuring the ScopeSelector component */\ninterface ScopeSelectorProps {\n  /** The current scope selection */\n  scope: Scope;\n\n  /**\n   * Optional array of scopes that should be available in the selector. If not provided, all scopes\n   * will be shown as defined in the Scope type\n   */\n  availableScopes?: Scope[];\n\n  /** Callback function that is executed when the user changes the scope selection */\n  onScopeChange: (scope: Scope) => void;\n\n  /**\n   * Information about available books, formatted as a 123 character long string as defined in a\n   * projects BooksPresent setting\n   */\n  availableBookInfo: string;\n\n  /** Array of currently selected book IDs */\n  selectedBookIds: string[];\n\n  /** Callback function that is executed when the user changes the book selection */\n  onSelectedBookIdsChange: (books: string[]) => void;\n\n  /**\n   * Object with all localized strings that the component needs to work well across multiple\n   * languages. When using this component with Platform.Bible, you can import\n   * `SCOPE_SELECTOR_STRING_KEYS` from this library, pass it in to the Platform's localization hook,\n   * and pass the localized keys that are returned by the hook into this prop.\n   */\n  localizedStrings: ScopeSelectorLocalizedStrings;\n  /**\n   * Optional map of localized book IDs/short names and full names. Key is the (English) book ID,\n   * value contains localized versions of the ID and full book name\n   */\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>;\n  /** Optional ID that is applied to the root element of this component */\n  id?: string;\n}\n\n/**\n * A component that allows users to select the scope of their search or operation. Available scopes\n * are defined in the Scope type. When 'selectedBooks' is chosen as the scope, a BookSelector\n * component is displayed to allow users to choose specific books.\n */\nexport function ScopeSelector({\n  scope,\n  availableScopes,\n  onScopeChange,\n  availableBookInfo,\n  selectedBookIds,\n  onSelectedBookIdsChange,\n  localizedStrings,\n  localizedBookNames,\n  id,\n}: ScopeSelectorProps) {\n  const selectedTextText = localizeString(\n    localizedStrings,\n    '%webView_scope_selector_selected_text%',\n  );\n  const currentVerseText = localizeString(\n    localizedStrings,\n    '%webView_scope_selector_current_verse%',\n  );\n  const currentChapterText = localizeString(\n    localizedStrings,\n    '%webView_scope_selector_current_chapter%',\n  );\n  const currentBookText = localizeString(localizedStrings, '%webView_scope_selector_current_book%');\n  const chooseBooksText = localizeString(localizedStrings, '%webView_scope_selector_choose_books%');\n  const scopeText = localizeString(localizedStrings, '%webView_scope_selector_scope%');\n  const selectBooksText = localizeString(localizedStrings, '%webView_scope_selector_select_books%');\n\n  const SCOPE_OPTIONS: Array<{ value: Scope; label: string; id: string }> = [\n    { value: 'selectedText', label: selectedTextText, id: 'scope-selected-text' },\n    { value: 'verse', label: currentVerseText, id: 'scope-verse' },\n    { value: 'chapter', label: currentChapterText, id: 'scope-chapter' },\n    { value: 'book', label: currentBookText, id: 'scope-book' },\n    { value: 'selectedBooks', label: chooseBooksText, id: 'scope-selected' },\n  ];\n\n  const displayedScopes = availableScopes\n    ? SCOPE_OPTIONS.filter((option) => availableScopes.includes(option.value))\n    : SCOPE_OPTIONS;\n\n  return (\n    <div id={id} className=\"tw-grid tw-gap-4\">\n      <div className=\"tw-grid tw-gap-2\">\n        <Label>{scopeText}</Label>\n        <RadioGroup\n          value={scope}\n          onValueChange={onScopeChange}\n          className=\"tw-flex tw-flex-col tw-space-y-1\"\n        >\n          {displayedScopes.map(({ value, label, id: scopeId }) => (\n            <div key={scopeId} className=\"tw-flex tw-items-center\">\n              <RadioGroupItem className=\"tw-me-2\" value={value} id={scopeId} />\n              <Label htmlFor={scopeId}>{label}</Label>\n            </div>\n          ))}\n        </RadioGroup>\n      </div>\n\n      {scope === 'selectedBooks' && (\n        <div className=\"tw-grid tw-gap-2\">\n          <Label>{selectBooksText}</Label>\n          <BookSelector\n            availableBookInfo={availableBookInfo}\n            selectedBookIds={selectedBookIds}\n            onChangeSelectedBookIds={onSelectedBookIdsChange}\n            localizedStrings={localizedStrings}\n            localizedBookNames={localizedBookNames}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default ScopeSelector;\n","import {\n  getLocalizeKeyForScrollGroupId,\n  LanguageStrings,\n  ScrollGroupId,\n} from 'platform-bible-utils';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/shadcn-ui/select';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\n\nconst DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS = {\n  [getLocalizeKeyForScrollGroupId('undefined')]: 'Ã˜',\n  [getLocalizeKeyForScrollGroupId(0)]: 'A',\n  [getLocalizeKeyForScrollGroupId(1)]: 'B',\n  [getLocalizeKeyForScrollGroupId(2)]: 'C',\n  [getLocalizeKeyForScrollGroupId(3)]: 'D',\n  [getLocalizeKeyForScrollGroupId(4)]: 'E',\n  [getLocalizeKeyForScrollGroupId(5)]: 'F',\n  [getLocalizeKeyForScrollGroupId(6)]: 'G',\n  [getLocalizeKeyForScrollGroupId(7)]: 'H',\n  [getLocalizeKeyForScrollGroupId(8)]: 'I',\n  [getLocalizeKeyForScrollGroupId(9)]: 'J',\n  [getLocalizeKeyForScrollGroupId(10)]: 'K',\n  [getLocalizeKeyForScrollGroupId(11)]: 'L',\n  [getLocalizeKeyForScrollGroupId(12)]: 'M',\n  [getLocalizeKeyForScrollGroupId(13)]: 'N',\n  [getLocalizeKeyForScrollGroupId(14)]: 'O',\n  [getLocalizeKeyForScrollGroupId(15)]: 'P',\n  [getLocalizeKeyForScrollGroupId(16)]: 'Q',\n  [getLocalizeKeyForScrollGroupId(17)]: 'R',\n  [getLocalizeKeyForScrollGroupId(18)]: 'S',\n  [getLocalizeKeyForScrollGroupId(19)]: 'T',\n  [getLocalizeKeyForScrollGroupId(20)]: 'U',\n  [getLocalizeKeyForScrollGroupId(21)]: 'V',\n  [getLocalizeKeyForScrollGroupId(22)]: 'W',\n  [getLocalizeKeyForScrollGroupId(23)]: 'X',\n  [getLocalizeKeyForScrollGroupId(24)]: 'Y',\n  [getLocalizeKeyForScrollGroupId(25)]: 'Z',\n};\n\nexport type ScrollGroupSelectorProps = {\n  /**\n   * List of scroll group ids to show to the user. Either a `ScrollGroupId` or `undefined` for no\n   * scroll group\n   */\n  availableScrollGroupIds: (ScrollGroupId | undefined)[];\n  /** Currently selected scroll group id. `undefined` for no scroll group */\n  scrollGroupId: ScrollGroupId | undefined;\n  /** Callback function run when the user tries to change the scroll group id */\n  onChangeScrollGroupId: (newScrollGroupId: ScrollGroupId | undefined) => void;\n  /**\n   * Localized strings to use for displaying scroll group ids. Must be an object whose keys are\n   * `getLocalizeKeyForScrollGroupId(scrollGroupId)` for all scroll group ids (and `undefined` if\n   * included) in {@link ScrollGroupSelectorProps.availableScrollGroupIds} and whose values are the\n   * localized strings to use for those scroll group ids.\n   *\n   * Defaults to English localizations of English alphabet for scroll groups 0-25 (e.g. 0 is A) and\n   * Ã˜ for `undefined`. Will fill in any that are not provided with these English localizations.\n   * Also, if any values match the keys, the English localization will be used. This is useful in\n   * case you want to pass in a temporary version of the localized strings while your localized\n   * strings load.\n   *\n   * @example\n   *\n   * ```typescript\n   * const myScrollGroupIdLocalizedStrings = {\n   *   [getLocalizeKeyForScrollGroupId('undefined')]: 'Ã˜',\n   *   [getLocalizeKeyForScrollGroupId(0)]: 'A',\n   *   [getLocalizeKeyForScrollGroupId(1)]: 'B',\n   *   [getLocalizeKeyForScrollGroupId(2)]: 'C',\n   *   [getLocalizeKeyForScrollGroupId(3)]: 'D',\n   *   [getLocalizeKeyForScrollGroupId(4)]: 'E',\n   * };\n   * ```\n   *\n   * @example\n   *\n   * ```tsx\n   * const availableScrollGroupIds = [undefined, 0, 1, 2, 3, 4];\n   *\n   * const localizeKeys = getLocalizeKeysForScrollGroupIds();\n   *\n   * const [localizedStrings] = useLocalizedStrings(localizeKeys);\n   *\n   * ...\n   *\n   * <ScrollGroupSelector localizedStrings={localizedStrings} />\n   * ```\n   */\n  localizedStrings?: LanguageStrings;\n\n  /** Size of the scroll group dropdown button. Defaults to 'sm' */\n  size?: 'default' | 'sm' | 'lg' | 'icon';\n\n  /** Additional css classes to help with unique styling */\n  className?: string;\n\n  /** Optional id for the select element */\n  id?: string;\n};\n\n/** Selector component for choosing a scroll group */\nexport function ScrollGroupSelector({\n  availableScrollGroupIds,\n  scrollGroupId,\n  onChangeScrollGroupId,\n  localizedStrings = {},\n  size = 'sm',\n  className,\n  id,\n}: ScrollGroupSelectorProps) {\n  const localizedStringsDefaulted = {\n    ...DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS,\n    ...Object.fromEntries(\n      Object.entries(localizedStrings).map(\n        ([localizedStringKey, localizedStringValue]: [string, string]) => [\n          localizedStringKey,\n          localizedStringKey === localizedStringValue &&\n          localizedStringKey in DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS\n            ? DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS[localizedStringKey]\n            : localizedStringValue,\n        ],\n      ),\n    ),\n  };\n\n  const dir: Direction = readDirection();\n\n  return (\n    <Select\n      value={`${scrollGroupId}`}\n      onValueChange={(newScrollGroupString) =>\n        onChangeScrollGroupId(\n          newScrollGroupString === 'undefined' ? undefined : parseInt(newScrollGroupString, 10),\n        )\n      }\n    >\n      <SelectTrigger size={size} className={cn('pr-twp tw-w-auto', className)}>\n        <SelectValue\n          placeholder={\n            localizedStringsDefaulted[getLocalizeKeyForScrollGroupId(scrollGroupId)] ??\n            scrollGroupId\n          }\n        />\n      </SelectTrigger>\n      <SelectContent\n        id={id}\n        align={dir === 'rtl' ? 'end' : 'start'}\n        // Need to get over the floating web view z-index 200\n        style={{ zIndex: 250 }}\n      >\n        {availableScrollGroupIds.map((scrollGroupOptionId) => (\n          <SelectItem key={`${scrollGroupOptionId}`} value={`${scrollGroupOptionId}`}>\n            {localizedStringsDefaulted[getLocalizeKeyForScrollGroupId(scrollGroupOptionId)]}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n}\n\nexport default ScrollGroupSelector;\n","import { PropsWithChildren } from 'react';\nimport { Separator } from '@/components/shadcn-ui/separator';\n\n/** Props for the SettingsList component, currently just children */\ntype SettingsListProps = PropsWithChildren;\n\n/**\n * SettingsList component is a wrapper for list items. Rendered with a formatted div\n *\n * @deprecated Jul 18 2025. This component is no longer supported or tested. Use of this component\n *   is discouraged and it may be removed in the future.\n * @param children To populate the list with\n * @returns Formatted div encompassing the children\n */\nexport function SettingsList({ children }: SettingsListProps) {\n  return <div className=\"pr-twp tw-grid\">{children}</div>;\n}\n\n/** Props for SettingsListItem component */\ntype SettingsListItemProps = PropsWithChildren & {\n  /** Primary text of the list item */\n  primary: string;\n\n  /** Optional text of the list item */\n  secondary?: string | undefined;\n\n  /** Optional boolean to display a message if the children aren't loaded yet. Defaults to false */\n  isLoading?: boolean;\n\n  /** Optional message to display if isLoading */\n  loadingMessage?: string;\n};\n\n/**\n * SettingsListItem component is a common list item. Rendered with a formatted div\n *\n * @deprecated Jul 18 2025. This component is no longer supported or tested. Use of this component\n *   is discouraged and it may be removed in the future.\n * @param SettingsListItemProps\n * @returns Formatted div encompassing the list item content\n */\nexport function SettingsListItem({\n  primary,\n  secondary,\n  children,\n  isLoading = false,\n  loadingMessage,\n}: SettingsListItemProps) {\n  return (\n    <div className=\"tw-flex tw-items-center tw-justify-between tw-space-x-4 tw-py-2\">\n      <div>\n        <p className=\"tw-text-sm tw-font-medium tw-leading-none\">{primary}</p>\n        <p className=\"tw-whitespace-normal tw-break-words tw-text-sm tw-text-muted-foreground\">\n          {secondary}\n        </p>\n      </div>\n\n      {isLoading ? (\n        <p className=\"tw-text-sm tw-text-muted-foreground\">{loadingMessage}</p>\n      ) : (\n        <div>{children}</div>\n      )}\n    </div>\n  );\n}\n\n/** Props for SettingsListHeader component */\ntype SettingsListHeaderProps = {\n  /** The primary text of the list header */\n  primary: string;\n\n  /** Optional secondary text of the list header */\n  secondary?: string | undefined;\n\n  /** Optional boolean to include a separator underneath the secondary text. Defaults to false */\n  includeSeparator?: boolean;\n};\n\n/**\n * SettingsListHeader component displays text above the list\n *\n * @deprecated Jul 18 2025. This component is no longer supported or tested. Use of this component\n *   is discouraged and it may be removed in the future.\n * @param SettingsListHeaderProps\n * @returns Formatted div with list header content\n */\nexport function SettingsListHeader({\n  primary,\n  secondary,\n  includeSeparator = false,\n}: SettingsListHeaderProps) {\n  return (\n    <div className=\"tw-space-y-4 tw-py-2\">\n      <div>\n        <h3 className=\"tw-text-lg tw-font-medium\">{primary}</h3>\n        <p className=\"tw-text-sm tw-text-muted-foreground\">{secondary}</p>\n      </div>\n      {includeSeparator ? <Separator /> : ''}\n    </div>\n  );\n}\n","import { GroupsInMultiColumnMenu, Localized } from 'platform-bible-utils';\n\n/**\n * Function that looks up the key of a sub-menu group using the value of it's `menuItem` property.\n *\n * @example\n *\n * ```ts\n * const groups = {\n *   'platform.subMenu': { menuItem: 'platform.subMenuId', order: 1 },\n *   'platform.subSubMenu': { menuItem: 'platform.subSubMenuId', order: 2 },\n * };\n * const id = 'platform.subMenuId';\n * const groupKey = getSubMenuGroupKeyForMenuItemId(groups, id);\n * console.log(groupKey); // Output: 'platform.subMenu'\n * ```\n *\n * @param groups The JSON Object containing the group definitions\n * @param id The value of the `menuItem` property of the group to look up\n * @returns The key of the group that has the `menuItem` property with the value of `id` or\n *   `undefined` if no such group exists.\n */\nexport function getSubMenuGroupKeyForMenuItemId(\n  groups: Localized<GroupsInMultiColumnMenu>,\n  id: string,\n): string | undefined {\n  return Object.entries(groups).find(\n    ([, value]) => 'menuItem' in value && value.menuItem === id,\n  )?.[0];\n}\n","import { cn } from '@/utils/shadcn-ui.util';\n\ntype MenuItemIconProps = {\n  /** The icon to display */\n  icon: string;\n  /** The label of the menu item */\n  menuLabel: string;\n  /** Whether the icon is leading or trailing */\n  leading?: boolean;\n};\n\nfunction MenuItemIcon({ icon, menuLabel, leading }: MenuItemIconProps) {\n  return icon ? (\n    <img\n      className={cn('tw-max-h-5 tw-max-w-5', leading ? 'tw-me-2' : 'tw-ms-2')}\n      src={icon}\n      alt={`${leading ? 'Leading' : 'Trailing'} icon for ${menuLabel}`}\n    />\n  ) : undefined;\n}\n\nexport default MenuItemIcon;\n","import {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuItem,\n  DropdownMenuPortal,\n  DropdownMenuSeparator,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuTrigger,\n} from '@/components/shadcn-ui/dropdown-menu';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/shadcn-ui/tooltip';\nimport { MenuIcon } from 'lucide-react';\nimport {\n  GroupsInMultiColumnMenu,\n  Localized,\n  MenuItemContainingCommand,\n  MenuItemContainingSubmenu,\n  MultiColumnMenu,\n} from 'platform-bible-utils';\nimport { Fragment, ReactNode } from 'react';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { getSubMenuGroupKeyForMenuItemId } from './menu.util';\nimport { SelectMenuItemHandler } from './platform-menubar.component';\nimport MenuItemIcon from './menu-icon.component';\n\nconst getGroupContent = (\n  groups: Localized<GroupsInMultiColumnMenu>,\n  items: Localized<(MenuItemContainingCommand | MenuItemContainingSubmenu)[]>,\n  columnOrSubMenuKey: string | undefined,\n  onSelectMenuItem: SelectMenuItemHandler,\n) => {\n  if (!columnOrSubMenuKey) return undefined;\n\n  const sortedGroupsForColumn = Object.entries(groups)\n    .filter(\n      ([key, group]) =>\n        ('column' in group && group.column === columnOrSubMenuKey) || key === columnOrSubMenuKey,\n    )\n    .sort(([, a], [, b]) => a.order - b.order);\n\n  return sortedGroupsForColumn.flatMap(([groupKey]) => {\n    const groupItems = items\n      .filter((item) => item.group === groupKey)\n      .sort((a, b) => a.order - b.order)\n      .map((item: Localized<MenuItemContainingCommand | MenuItemContainingSubmenu>) => {\n        return (\n          <Tooltip key={`tooltip-${item.label}-${'command' in item ? item.command : item.id}`}>\n            <TooltipTrigger asChild>\n              {'command' in item ? (\n                <DropdownMenuItem\n                  key={`dropdown-menu-item-${item.label}-${item.command}`}\n                  onClick={() => {\n                    // Since the item has a command, we know it is a MenuItemContainingCommand.\n                    // eslint-disable-next-line no-type-assertion/no-type-assertion\n                    onSelectMenuItem(item as MenuItemContainingCommand);\n                  }}\n                >\n                  {item.iconPathBefore && (\n                    <MenuItemIcon icon={item.iconPathBefore} menuLabel={item.label} leading />\n                  )}\n                  {item.label}\n                  {item.iconPathAfter && (\n                    <MenuItemIcon icon={item.iconPathAfter} menuLabel={item.label} />\n                  )}\n                </DropdownMenuItem>\n              ) : (\n                <DropdownMenuSub key={`dropdown-menu-sub-${item.label}-${item.id}`}>\n                  <DropdownMenuSubTrigger>{item.label}</DropdownMenuSubTrigger>\n\n                  <DropdownMenuPortal>\n                    <DropdownMenuSubContent>\n                      {getGroupContent(\n                        groups,\n                        items,\n                        getSubMenuGroupKeyForMenuItemId(groups, item.id),\n                        onSelectMenuItem,\n                      )}\n                    </DropdownMenuSubContent>\n                  </DropdownMenuPortal>\n                </DropdownMenuSub>\n              )}\n            </TooltipTrigger>\n            {item.tooltip && <TooltipContent>{item.tooltip}</TooltipContent>}\n          </Tooltip>\n        );\n      });\n\n    return groupItems;\n  });\n};\n\nexport type TabDropdownMenuProps = {\n  /** The handler to use for menu commands */\n  onSelectMenuItem: SelectMenuItemHandler;\n\n  /** The menu data to show on the dropdown menu */\n  menuData: Localized<MultiColumnMenu>;\n\n  /** Defines a string value that labels the current element */\n  tabLabel: string;\n\n  /** Optional icon for the dropdown menu trigger. Defaults to hamburger icon. */\n  icon?: ReactNode;\n\n  /** Additional css class(es) to help with unique styling of the tab dropdown menu */\n  className?: string;\n\n  /** Style variant for the app menubar component. */\n  variant?: 'default' | 'muted';\n\n  buttonVariant?: 'default' | 'ghost' | 'outline' | 'secondary';\n\n  /** Optional unique identifier */\n  id?: string;\n};\n\n/**\n * Dropdown menu designed to be used with Platform.Bible menu data. Column headers are ignored.\n * Column data is separated by a horizontal divider, so groups are not distinguishable. Tooltips are\n * displayed on hovering over menu items, if a tooltip is defined for them.\n *\n * A child component can be passed in to show as an icon on the menu trigger button.\n */\nexport default function TabDropdownMenu({\n  onSelectMenuItem,\n  menuData,\n  tabLabel,\n  icon,\n  className,\n  variant,\n  buttonVariant = 'ghost',\n  id,\n}: TabDropdownMenuProps) {\n  return (\n    <DropdownMenu variant={variant}>\n      <DropdownMenuTrigger aria-label={tabLabel} className={className} asChild id={id}>\n        <Button variant={buttonVariant} size=\"icon\">\n          {icon ?? <MenuIcon />}\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"start\" className=\"tw-z-[250]\">\n        {Object.entries(menuData.columns)\n          .filter(([, column]) => typeof column === 'object')\n          .sort(([, a], [, b]) => {\n            if (typeof a === 'boolean' || typeof b === 'boolean') return 0;\n            return a.order - b.order;\n          })\n          .map(([columnKey], index, array) => (\n            <Fragment key={columnKey}>\n              <DropdownMenuGroup>\n                <TooltipProvider>\n                  {getGroupContent(menuData.groups, menuData.items, columnKey, onSelectMenuItem)}\n                </TooltipProvider>\n              </DropdownMenuGroup>\n\n              {index < array.length - 1 && <DropdownMenuSeparator />}\n            </Fragment>\n          ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","import { Localized, MultiColumnMenu } from 'platform-bible-utils';\nimport React, { PropsWithChildren, ReactNode } from 'react';\nimport { SelectMenuItemHandler } from '../menus/platform-menubar.component';\n\nexport type TabToolbarCommonProps = {\n  /**\n   * The handler to use for toolbar item commands related to the project menu. Here is a basic\n   * example of how to create this:\n   *\n   * @example\n   *\n   * ```tsx\n   * const projectMenuCommandHandler: SelectMenuItemHandler = async (selectedMenuItem) => {\n   *   const commandName = selectedMenuItem.command;\n   *   try {\n   *     // Assert the more specific type. Assert the more specific type. The menu data should\n   *     // specify a valid command name here. If not, the error will be caught.\n   *     // eslint-disable-next-line no-type-assertion/no-type-assertion\n   *     await papi.commands.sendCommand(commandName as CommandNames);\n   *   } catch (e) {\n   *     throw new Error(\n   *       `handleMenuCommand error: command: ${commandName}. ${JSON.stringify(e)}`,\n   *     );\n   *   }\n   * };\n   * ```\n   */\n  onSelectProjectMenuItem: SelectMenuItemHandler;\n\n  /**\n   * Menu data that is used to populate the Menubar component for the project menu. In an extension,\n   * the menu data comes from menus.json in the contributions folder. To access that info, use\n   * useMemo to get the WebViewMenu.\n   */\n  projectMenuData?: Localized<MultiColumnMenu>;\n\n  /** Optional unique identifier */\n  id?: string;\n\n  /** Additional css classes to help with unique styling of the extensible toolbar */\n  className?: string;\n\n  /** Icon that will be displayed on the Menu Button. Defaults to the hamburger menu icon. */\n  menuButtonIcon?: ReactNode;\n};\n\nexport type TabToolbarContainerProps = PropsWithChildren<{\n  /** Optional unique identifier */\n  id?: string;\n  /** Additional css classes to help with unique styling of the extensible toolbar */\n  className?: string;\n}>;\n\n/** Wrapper that allows consistent styling for both TabToolbar and TabFloatingMenu. */\nexport const TabToolbarContainer = React.forwardRef<HTMLDivElement, TabToolbarContainerProps>(\n  ({ id, className, children }, ref) => (\n    <div\n      ref={ref}\n      className={`tw-sticky tw-top-0 tw-box-border tw-flex tw-h-14 tw-flex-row tw-items-center tw-justify-between tw-gap-2 tw-overflow-clip tw-px-4 tw-py-2 tw-text-foreground tw-@container/toolbar ${className}`}\n      id={id}\n    >\n      {children}\n    </div>\n  ),\n);\n\nexport default TabToolbarContainer;\n","import { ReactNode } from 'react';\nimport { Localized, MultiColumnMenu } from 'platform-bible-utils';\nimport { Menu, EllipsisVertical } from 'lucide-react';\nimport TabDropdownMenu from '../menus/tab-dropdown-menu.component';\nimport { SelectMenuItemHandler } from '../menus/platform-menubar.component';\nimport { TabToolbarCommonProps, TabToolbarContainer } from './tab-toolbar-container.component';\n\nexport type TabToolbarProps = TabToolbarCommonProps & {\n  /**\n   * The handler to use for toolbar item commands related to the tab view menu. Here is a basic\n   * example of how to create this from the hello-rock3 extension:\n   *\n   * @example\n   *\n   * ```tsx\n   * const projectMenuCommandHandler: SelectMenuItemHandler = async (selectedMenuItem) => {\n   *   const commandName = selectedMenuItem.command;\n   *   try {\n   *     // Assert the more specific type. Assert the more specific type. The menu data should\n   *     // specify a valid command name here. If not, the error will be caught.\n   *     // eslint-disable-next-line no-type-assertion/no-type-assertion\n   *     await papi.commands.sendCommand(commandName as CommandNames);\n   *   } catch (e) {\n   *     throw new Error(\n   *       `handleMenuCommand error: command: ${commandName}. ${JSON.stringify(e)}`,\n   *     );\n   *   }\n   * };\n   * ```\n   */\n  onSelectViewInfoMenuItem: SelectMenuItemHandler;\n\n  /** Menu data that is used to populate the Menubar component for the view info menu */\n  tabViewMenuData?: Localized<MultiColumnMenu>;\n\n  /**\n   * Toolbar children to be put at the start of the the toolbar after the project menu icon (left\n   * side in ltr, right side in rtl). Recommended for inner navigation.\n   */\n  startAreaChildren?: ReactNode;\n\n  /** Toolbar children to be put in the center area of the the toolbar. Recommended for tools. */\n  centerAreaChildren?: ReactNode;\n\n  /**\n   * Toolbar children to be put at the end of the the toolbar before the tab view menu icon (right\n   * side in ltr, left side in rtl). Recommended for secondary tools and view options.\n   */\n  endAreaChildren?: ReactNode;\n};\n\n/**\n * Toolbar that holds the project menu icon on one side followed by three different areas/categories\n * for toolbar icons followed by an optional view info menu icon. See the Tab Floating Menu Button\n * component for a menu component that takes up less screen real estate yet is always visible.\n */\nexport function TabToolbar({\n  onSelectProjectMenuItem,\n  onSelectViewInfoMenuItem,\n  projectMenuData,\n  tabViewMenuData,\n  id,\n  className,\n  startAreaChildren,\n  centerAreaChildren,\n  endAreaChildren,\n  menuButtonIcon,\n}: TabToolbarProps) {\n  return (\n    <TabToolbarContainer className={`tw-w-full tw-border ${className}`} id={id}>\n      {projectMenuData && (\n        <TabDropdownMenu\n          onSelectMenuItem={onSelectProjectMenuItem}\n          menuData={projectMenuData}\n          tabLabel=\"Project\"\n          icon={menuButtonIcon ?? <Menu />}\n          buttonVariant=\"ghost\"\n        />\n      )}\n      {startAreaChildren && (\n        <div className=\"tw-flex tw-h-full tw-shrink tw-grow-[2] tw-flex-row tw-flex-wrap tw-items-start tw-gap-2 tw-overflow-clip tw-@container/tab-toolbar-start\">\n          {startAreaChildren}\n        </div>\n      )}\n      {centerAreaChildren && (\n        <div className=\"tw-flex tw-h-full tw-shrink tw-basis-0 tw-flex-row tw-flex-wrap tw-items-start tw-justify-center tw-gap-2 tw-overflow-clip tw-@container/tab-toolbar-center @sm:tw-grow @sm:tw-basis-auto\">\n          {centerAreaChildren}\n        </div>\n      )}\n      <div className=\"tw-flex tw-h-full tw-shrink tw-grow-[2] tw-flex-row-reverse tw-flex-wrap tw-items-start tw-gap-2 tw-overflow-clip tw-@container/tab-toolbar-end\">\n        {tabViewMenuData && (\n          <TabDropdownMenu\n            onSelectMenuItem={onSelectViewInfoMenuItem}\n            menuData={tabViewMenuData}\n            tabLabel=\"View Info\"\n            icon={<EllipsisVertical />}\n            className=\"tw-h-full\"\n          />\n        )}\n        {endAreaChildren}\n      </div>\n    </TabToolbarContainer>\n  );\n}\n\nexport default TabToolbar;\n","import TabDropdownMenu from '../menus/tab-dropdown-menu.component';\nimport { TabToolbarCommonProps, TabToolbarContainer } from './tab-toolbar-container.component';\n\n/**\n * Renders a TabDropdownMenu with a trigger button that looks like the menuButtonIcon or like the\n * default of three stacked horizontal lines (aka the hamburger). The menu \"floats\" over the content\n * so it is always visible. When clicked, it displays a dropdown menu with the projectMenuData.\n */\nexport function TabFloatingMenu({\n  onSelectProjectMenuItem,\n  projectMenuData,\n  id,\n  className,\n  menuButtonIcon,\n}: TabToolbarCommonProps) {\n  return (\n    <TabToolbarContainer className=\"tw-pointer-events-none\" id={id}>\n      {projectMenuData && (\n        <TabDropdownMenu\n          onSelectMenuItem={onSelectProjectMenuItem}\n          menuData={projectMenuData}\n          tabLabel=\"Project\"\n          icon={menuButtonIcon}\n          className={`tw-pointer-events-auto tw-shadow-lg ${className}`}\n          buttonVariant=\"outline\"\n        />\n      )}\n    </TabToolbarContainer>\n  );\n}\n\nexport default TabFloatingMenu;\n","// adapted from: https://github.com/shadcn-ui/ui/discussions/752\n\n'use client';\n\nimport { TabsContentProps, TabsListProps, TabsTriggerProps } from '@/components/shadcn-ui/tabs';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport * as TabsPrimitive from '@radix-ui/react-tabs';\nimport React from 'react';\n\nexport type VerticalTabsProps = React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root> & {\n  className?: string;\n};\n\nexport type LeftTabsTriggerProps = TabsTriggerProps & {\n  value: string;\n  ref?: React.Ref<HTMLButtonElement>;\n};\n\n/**\n * Tabs components provide a set of layered sections of contentâ€”known as tab panelsâ€“that are\n * displayed one at a time. These components are built on Radix UI primitives and styled with Shadcn\n * UI. See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/tabs See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/tabs\n */\nexport const VerticalTabs = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Root>,\n  VerticalTabsProps\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <TabsPrimitive.Root\n      orientation=\"vertical\"\n      ref={ref}\n      className={cn('tw-flex tw-gap-1 tw-rounded-md tw-text-muted-foreground', className)}\n      {...props}\n      dir={dir}\n    />\n  );\n});\n\nVerticalTabs.displayName = TabsPrimitive.List.displayName;\n\n/** @inheritdoc VerticalTabs */\nexport const VerticalTabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  TabsListProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      'tw-flex-fit tw-mlk-items-center tw-w-[124px] tw-justify-center tw-rounded-md tw-bg-muted tw-p-1 tw-text-muted-foreground',\n      className,\n    )}\n    {...props}\n  />\n));\nVerticalTabsList.displayName = TabsPrimitive.List.displayName;\n\n/** @inheritdoc VerticalTabs */\nexport const VerticalTabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  LeftTabsTriggerProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    {...props}\n    className={cn(\n      'overflow-clip tw-inline-flex tw-w-[116px] tw-cursor-pointer tw-items-center tw-justify-center tw-break-words tw-rounded-sm tw-border-0 tw-bg-muted tw-px-3 tw-py-1.5 tw-text-sm tw-font-medium tw-text-inherit tw-ring-offset-background tw-transition-all hover:tw-text-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50 data-[state=active]:tw-bg-background data-[state=active]:tw-text-foreground data-[state=active]:tw-shadow-sm',\n      className,\n    )}\n  />\n));\n\n/** @inheritdoc VerticalTabs */\nexport const VerticalTabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  TabsContentProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      // Removed tw-mt-2 because Sebastian said so\n      'tw-ms-5 tw-flex-grow tw-text-foreground tw-ring-offset-background focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2',\n      className,\n    )}\n    {...props}\n  />\n));\nVerticalTabsContent.displayName = TabsPrimitive.Content.displayName;\n","import { SearchBar } from '@/components/basics/search-bar.component';\nimport {\n  VerticalTabs,\n  VerticalTabsContent,\n  VerticalTabsList,\n  VerticalTabsTrigger,\n} from '@/components/basics/tabs-vertical';\nimport { ReactNode } from 'react';\n\nexport type TabKeyValueContent = {\n  key: string;\n  value: string;\n  content: ReactNode;\n};\n\nexport type TabNavigationContentSearchProps = {\n  /** List of values and keys for each tab this component should provide */\n  tabList: TabKeyValueContent[];\n\n  /** The search query in the search bar */\n  searchValue: string;\n\n  /** Handler to run when the value of the search bar changes */\n  onSearch: (searchQuery: string) => void;\n\n  /** Optional placeholder for the search bar */\n  searchPlaceholder?: string;\n\n  /** Optional title to include in the header */\n  headerTitle?: string;\n\n  /** Optional className to modify the search input */\n  searchClassName?: string;\n\n  /** Optional id for the root element */\n  id?: string;\n};\n\n/**\n * TabNavigationContentSearch component provides a vertical tab navigation interface with a search\n * bar at the top. This component allows users to filter content within tabs based on a search\n * query.\n *\n * @param {TabNavigationContentSearchProps} props\n * @param {TabKeyValueContent[]} props.tabList - List of objects containing keys, values, and\n *   content for each tab to be displayed.\n * @param {string} props.searchValue - The current value of the search input.\n * @param {function} props.onSearch - Callback function called when the search input changes;\n *   receives the new search query as an argument.\n * @param {string} [props.searchPlaceholder] - Optional placeholder text for the search input.\n * @param {string} [props.headerTitle] - Optional title to display above the search input.\n * @param {string} [props.searchClassName] - Optional CSS class name to apply custom styles to the\n *   search input.\n * @param {string} [props.id] - Optional id for the root element.\n */\nexport function TabNavigationContentSearch({\n  tabList,\n  searchValue,\n  onSearch,\n  searchPlaceholder,\n  headerTitle,\n  searchClassName,\n  id,\n}: TabNavigationContentSearchProps) {\n  return (\n    <div id={id} className=\"pr-twp\">\n      <div className=\"tw-sticky tw-top-0 tw-space-y-2 tw-pb-2\">\n        {headerTitle ? <h1>{headerTitle}</h1> : ''}\n        <SearchBar\n          className={searchClassName}\n          value={searchValue}\n          onSearch={onSearch}\n          placeholder={searchPlaceholder}\n        />\n      </div>\n      <VerticalTabs>\n        <VerticalTabsList>\n          {tabList.map((tab) => (\n            <VerticalTabsTrigger key={tab.key} value={tab.value}>\n              {tab.value}\n            </VerticalTabsTrigger>\n          ))}\n        </VerticalTabsList>\n        {tabList.map((tab) => (\n          <VerticalTabsContent key={tab.key} value={tab.value}>\n            {tab.content}\n          </VerticalTabsContent>\n        ))}\n      </VerticalTabs>\n    </div>\n  );\n}\n\nexport default TabNavigationContentSearch;\n","import {\n  MenuContext,\n  MenuContextProps,\n  menuVariants,\n  useMenuContext,\n} from '@/context/menu.context';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport * as MenubarPrimitive from '@radix-ui/react-menubar';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\nimport React from 'react';\n\nfunction MenubarMenu({ ...props }: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />;\n}\n\nfunction MenubarGroup({ ...props }: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />;\n}\n\nfunction MenubarPortal({ ...props }: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />;\n}\n\nfunction MenubarRadioGroup({ ...props }: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />;\n}\n\nfunction MenubarSub({ ...props }: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />;\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root> & {\n    variant?: MenuContextProps['variant'];\n  }\n>(({ className, variant = 'default', ...props }, ref) => {\n  /* #region CUSTOM provide context to add variants */\n  const contextValue = React.useMemo<MenuContextProps>(\n    () => ({\n      variant,\n    }),\n    [variant],\n  );\n  return (\n    <MenuContext.Provider value={contextValue}>\n      {/* #endregion CUSTOM */}\n      <MenubarPrimitive.Root\n        ref={ref}\n        className={cn(\n          'tw-flex tw-h-10 tw-items-center tw-space-x-1 tw-rounded-md tw-border tw-bg-background tw-p-1',\n          className,\n        )}\n        {...props}\n      />\n    </MenuContext.Provider>\n  );\n});\nMenubar.displayName = MenubarPrimitive.Root.displayName;\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        'tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-3 tw-py-1.5 tw-text-sm tw-font-medium tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[state=open]:tw-bg-accent data-[state=open]:tw-text-accent-foreground',\n        // CUSTOM\n        'pr-twp',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n      )}\n      {...props}\n    />\n  );\n});\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName;\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean;\n  }\n>(({ className, inset, children, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.SubTrigger\n      ref={ref}\n      className={cn(\n        'tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[state=open]:tw-bg-accent data-[state=open]:tw-text-accent-foreground',\n        inset && 'tw-pl-8',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRight className=\"tw-ml-auto tw-h-4 tw-w-4\" />\n    </MenubarPrimitive.SubTrigger>\n  );\n});\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName;\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.SubContent\n      ref={ref}\n      className={cn(\n        'tw-z-50 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n        // CUSTOM use context to add variants\n        {\n          'tw-bg-popover': context.variant === 'muted',\n        },\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName;\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(({ className, align = 'start', alignOffset = -4, sideOffset = 8, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          'tw-z-50 tw-min-w-[12rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-md data-[state=open]:tw-animate-in data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n          // CUSTOM reset styles so that only shadcn styles are applied\n          'pr-twp',\n          // CUSTOM use context to add variants\n          {\n            'tw-bg-popover': context.variant === 'muted',\n          },\n          className,\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  );\n});\nMenubarContent.displayName = MenubarPrimitive.Content.displayName;\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.Item\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        inset && 'tw-pl-8',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nMenubarItem.displayName = MenubarPrimitive.Item.displayName;\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.CheckboxItem\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"tw-absolute tw-left-2 tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center\">\n        <MenubarPrimitive.ItemIndicator>\n          <Check className=\"tw-h-4 tw-w-4\" />\n        </MenubarPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </MenubarPrimitive.CheckboxItem>\n  );\n});\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName;\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.RadioItem\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"tw-absolute tw-left-2 tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center\">\n        <MenubarPrimitive.ItemIndicator>\n          <Circle className=\"tw-h-2 tw-w-2 tw-fill-current\" />\n        </MenubarPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </MenubarPrimitive.RadioItem>\n  );\n});\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName;\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn('tw-px-2 tw-py-1.5 tw-text-sm tw-font-semibold', inset && 'tw-pl-8', className)}\n    {...props}\n  />\n));\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName;\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-my-1 tw-h-px tw-bg-muted', className)}\n    {...props}\n  />\n));\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName;\n\nfunction MenubarShortcut({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) {\n  return (\n    <span\n      className={cn('tw-ml-auto tw-text-xs tw-tracking-widest tw-text-muted-foreground', className)}\n      {...props}\n    />\n  );\n}\nMenubarShortcut.displayname = 'MenubarShortcut';\n\nexport {\n  Menubar,\n  MenubarCheckboxItem,\n  MenubarContent,\n  MenubarGroup,\n  MenubarItem,\n  MenubarLabel,\n  MenubarMenu,\n  MenubarPortal,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarSeparator,\n  MenubarShortcut,\n  MenubarSub,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarTrigger,\n};\n","import {\n  Menubar,\n  MenubarContent,\n  MenubarItem,\n  MenubarMenu,\n  MenubarSeparator,\n  MenubarSub,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarTrigger,\n} from '@/components/shadcn-ui/menubar';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/shadcn-ui/tooltip';\nimport {\n  GroupsInMultiColumnMenu,\n  Localized,\n  MenuItemContainingCommand,\n  MenuItemContainingSubmenu,\n  MultiColumnMenu,\n} from 'platform-bible-utils';\nimport { RefObject, useEffect, useRef } from 'react';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { getSubMenuGroupKeyForMenuItemId } from './menu.util';\nimport MenuItemIcon from './menu-icon.component';\n\n/**\n * Callback function that is invoked when a user selects a menu item. Receives the full\n * `MenuItemContainingCommand` object as an argument.\n */\nexport interface SelectMenuItemHandler {\n  (selectedMenuItem: MenuItemContainingCommand): void;\n}\n\nconst simulateKeyPress = (ref: RefObject<HTMLButtonElement>, keys: KeyboardEventInit[]) => {\n  setTimeout(() => {\n    keys.forEach((key) => {\n      ref.current?.dispatchEvent(new KeyboardEvent('keydown', key));\n    });\n  }, 0);\n};\n\nconst getMenubarContent = (\n  groups: Localized<GroupsInMultiColumnMenu>,\n  items: Localized<(MenuItemContainingCommand | MenuItemContainingSubmenu)[]>,\n  columnOrSubMenuKey: string | undefined,\n  onSelectMenuItem: SelectMenuItemHandler,\n) => {\n  if (!columnOrSubMenuKey) return undefined;\n\n  const sortedGroupsForColumn = Object.entries(groups)\n    .filter(\n      ([key, group]) =>\n        ('column' in group && group.column === columnOrSubMenuKey) || key === columnOrSubMenuKey,\n    )\n    .sort(([, a], [, b]) => a.order - b.order);\n\n  return sortedGroupsForColumn.flatMap(([groupKey], index) => {\n    const groupItems = items\n      .filter((item) => item.group === groupKey)\n      .sort((a, b) => a.order - b.order)\n      .map((item: Localized<MenuItemContainingCommand | MenuItemContainingSubmenu>) => {\n        return (\n          <Tooltip key={`tooltip-${item.label}-${'command' in item ? item.command : item.id}`}>\n            <TooltipTrigger asChild>\n              {'command' in item ? (\n                <MenubarItem\n                  key={`menubar-item-${item.label}-${item.command}`}\n                  onClick={() => {\n                    // Since the item has a command, we know it is a MenuItemContainingCommand.\n                    // eslint-disable-next-line no-type-assertion/no-type-assertion\n                    onSelectMenuItem(item as MenuItemContainingCommand);\n                  }}\n                >\n                  {item.iconPathBefore && (\n                    <MenuItemIcon icon={item.iconPathBefore} menuLabel={item.label} leading />\n                  )}\n                  {item.label}\n                  {item.iconPathAfter && (\n                    <MenuItemIcon icon={item.iconPathAfter} menuLabel={item.label} />\n                  )}\n                </MenubarItem>\n              ) : (\n                <MenubarSub key={`menubar-sub-${item.label}-${item.id}`}>\n                  <MenubarSubTrigger>{item.label}</MenubarSubTrigger>\n                  <MenubarSubContent>\n                    {getMenubarContent(\n                      groups,\n                      items,\n                      getSubMenuGroupKeyForMenuItemId(groups, item.id),\n                      onSelectMenuItem,\n                    )}\n                  </MenubarSubContent>\n                </MenubarSub>\n              )}\n            </TooltipTrigger>\n            {item.tooltip && <TooltipContent>{item.tooltip}</TooltipContent>}\n          </Tooltip>\n        );\n      });\n\n    const itemsWithSeparator = [...groupItems];\n    if (groupItems.length > 0 && index < sortedGroupsForColumn.length - 1) {\n      itemsWithSeparator.push(<MenubarSeparator key={`separator-${groupKey}`} />);\n    }\n\n    return itemsWithSeparator;\n  });\n};\n\ntype PlatformMenubarProps = {\n  /** Menu data that is used to populate the Menubar component. */\n  menuData: Localized<MultiColumnMenu>;\n\n  /** The handler to use for menu commands. */\n  onSelectMenuItem: SelectMenuItemHandler;\n\n  /**\n   * Optional callback function that is executed whenever a menu on the Menubar is opened or closed.\n   * Helpful for handling updates to the menu, as changing menu data when the menu is opened is not\n   * desirable.\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n\n  /** Style variant for the app menubar component. */\n  variant?: 'default' | 'muted';\n};\n\n/** Menubar component tailored to work with Platform.Bible menu data */\nexport function PlatformMenubar({\n  menuData,\n  onSelectMenuItem,\n  onOpenChange,\n  variant,\n}: PlatformMenubarProps) {\n  // These refs will always be defined\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const menubarRef = useRef<HTMLDivElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const projectMenuRef = useRef<HTMLButtonElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const windowMenuRef = useRef<HTMLButtonElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const layoutMenuRef = useRef<HTMLButtonElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const helpMenuRef = useRef<HTMLButtonElement>(undefined!);\n\n  const getRefForColumn = (columnKey: string) => {\n    switch (columnKey) {\n      case 'platform.app':\n        return projectMenuRef;\n      case 'platform.window':\n        return windowMenuRef;\n      case 'platform.layout':\n        return layoutMenuRef;\n      case 'platform.help':\n        return helpMenuRef;\n      default:\n        return undefined;\n    }\n  };\n\n  // This is a quick and dirty way to implement some shortcuts by simulating key presses\n  useHotkeys(['alt', 'alt+p', 'alt+l', 'alt+n', 'alt+h'], (event, handler) => {\n    event.preventDefault();\n\n    const escKey: KeyboardEventInit = { key: 'Escape', code: 'Escape', keyCode: 27, bubbles: true };\n    const spaceKey: KeyboardEventInit = { key: ' ', code: 'Space', keyCode: 32, bubbles: true };\n\n    switch (handler.hotkey) {\n      case 'alt':\n        simulateKeyPress(projectMenuRef, [escKey]);\n        break;\n      case 'alt+p':\n        projectMenuRef.current?.focus();\n        simulateKeyPress(projectMenuRef, [escKey, spaceKey]);\n        break;\n      case 'alt+l':\n        windowMenuRef.current?.focus();\n        simulateKeyPress(windowMenuRef, [escKey, spaceKey]);\n        break;\n      case 'alt+n':\n        layoutMenuRef.current?.focus();\n        simulateKeyPress(layoutMenuRef, [escKey, spaceKey]);\n        break;\n      case 'alt+h':\n        helpMenuRef.current?.focus();\n        simulateKeyPress(helpMenuRef, [escKey, spaceKey]);\n        break;\n      default:\n        break;\n    }\n  });\n\n  useEffect(() => {\n    if (!onOpenChange || !menubarRef.current) return;\n\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.attributeName === 'data-state' && mutation.target instanceof HTMLElement) {\n          const state = mutation.target.getAttribute('data-state');\n\n          if (state === 'open') {\n            onOpenChange(true);\n          } else {\n            onOpenChange(false);\n          }\n        }\n      });\n    });\n\n    const menubarElement = menubarRef.current;\n    const dataStateAttributes = menubarElement.querySelectorAll('[data-state]');\n\n    dataStateAttributes.forEach((element) => {\n      observer.observe(element, { attributes: true });\n    });\n\n    return () => observer.disconnect();\n  }, [onOpenChange]);\n\n  if (!menuData) return undefined;\n\n  return (\n    <Menubar ref={menubarRef} className=\"pr-twp tw-border-0 tw-bg-transparent\" variant={variant}>\n      {Object.entries(menuData.columns)\n        .filter(([, column]) => typeof column === 'object')\n        .sort(([, a], [, b]) => {\n          if (typeof a === 'boolean' || typeof b === 'boolean') return 0;\n          return a.order - b.order;\n        })\n        .map(([columnKey, column]) => (\n          <MenubarMenu key={columnKey}>\n            <MenubarTrigger ref={getRefForColumn(columnKey)}>\n              {typeof column === 'object' && 'label' in column && column.label}\n            </MenubarTrigger>\n            <MenubarContent\n              className=\"tw-z-[250]\" // Need to get over the floating web view z-index 200\n            >\n              <TooltipProvider>\n                {getMenubarContent(menuData.groups, menuData.items, columnKey, onSelectMenuItem)}\n              </TooltipProvider>\n            </MenubarContent>\n          </MenubarMenu>\n        ))}\n    </Menubar>\n  );\n}\n\nexport default PlatformMenubar;\n","import {\n  SelectMenuItemHandler,\n  PlatformMenubar,\n} from '@/components/advanced/menus/platform-menubar.component';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Localized, MultiColumnMenu } from 'platform-bible-utils';\nimport { PropsWithChildren, ReactNode, useRef } from 'react';\n\nexport type ToolbarProps = PropsWithChildren<{\n  /** The handler to use for menu commands (and eventually toolbar commands). */\n  onSelectMenuItem: SelectMenuItemHandler;\n\n  /**\n   * Menu data that is used to populate the Menubar component. If empty object, no menus will be\n   * shown on the App Menubar\n   */\n  menuData?: Localized<MultiColumnMenu>;\n\n  /**\n   * Optional callback function that is executed whenever a menu on the App Menubar is opened or\n   * closed. Helpful for handling updates to the menu, as changing menu data when the menu is opened\n   * is not desirable.\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n\n  /** Optional unique identifier */\n  id?: string;\n\n  /** Additional css classes to help with unique styling of the toolbar */\n  className?: string;\n\n  /**\n   * Whether the toolbar should be used as a draggable area for moving the application. This will\n   * add an electron specific style `WebkitAppRegion: 'drag'` to the toolbar in order to make it\n   * draggable. See:\n   * https://www.electronjs.org/docs/latest/tutorial/custom-title-bar#create-a-custom-title-bar\n   */\n  shouldUseAsAppDragArea?: boolean;\n\n  /** Toolbar children to be put at the start of the toolbar (left side in ltr, right side in rtl) */\n  appMenuAreaChildren?: ReactNode;\n\n  /** Toolbar children to be put at the end of the toolbar (right side in ltr, left side in rtl) */\n  configAreaChildren?: ReactNode;\n\n  /** Variant of the menubar */\n  menubarVariant?: 'default' | 'muted';\n}>;\n\n/**\n * Get tailwind class for reserved space for the window controls / macos \"traffic lights\". Passing\n * 'darwin' will reserve the necessary space for macos traffic lights at the start, otherwise a\n * different amount of space at the end for the window controls.\n *\n * Apply to the toolbar like: `<Toolbar className={cn('tw-h-8 tw-bg-background',\n * getToolbarOSReservedSpaceClassName('darwin'))}>` or `<Toolbar\n * className={getToolbarOSReservedSpaceClassName('linux')}>`\n *\n * @param operatingSystem The os platform: 'darwin' (macos) | anything else\n * @returns The class name to apply to the toolbar if os specific space should be reserved\n */\nexport function getToolbarOSReservedSpaceClassName(\n  operatingSystem: string | undefined,\n): string | undefined {\n  switch (operatingSystem) {\n    case undefined:\n      return undefined;\n    case 'darwin':\n      return 'tw-ps-[85px]';\n    default:\n      return 'tw-pe-[calc(138px+1rem)]';\n  }\n}\n\n/**\n * A customizable toolbar component with a menubar, content area, and configure area.\n *\n * This component is designed to be used in the window title bar of an electron application.\n *\n * @param {ToolbarProps} props - The props for the component.\n */\nexport function Toolbar({\n  menuData,\n  onOpenChange,\n  onSelectMenuItem,\n  className,\n  id,\n  children,\n  appMenuAreaChildren,\n  configAreaChildren,\n  shouldUseAsAppDragArea,\n  menubarVariant = 'default',\n}: ToolbarProps) {\n  // This ref will always be defined\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const containerRef = useRef<HTMLDivElement>(undefined!);\n\n  return (\n    <div\n      className={cn('tw-border tw-px-4 tw-text-foreground', className)}\n      ref={containerRef}\n      style={{ position: 'relative' }}\n      id={id}\n    >\n      <div\n        className=\"tw-flex tw-h-full tw-w-full tw-justify-between tw-overflow-hidden\"\n        /* @ts-ignore Electron-only property */\n        style={shouldUseAsAppDragArea ? { WebkitAppRegion: 'drag' } : undefined}\n      >\n        {/* App Menu area */}\n        <div className=\"tw-flex tw-grow tw-basis-0\">\n          <div\n            className=\"tw-flex tw-items-center tw-gap-2\"\n            /* @ts-ignore Electron-only property */\n            style={shouldUseAsAppDragArea ? { WebkitAppRegion: 'no-drag' } : undefined}\n          >\n            {appMenuAreaChildren}\n\n            {menuData && (\n              <PlatformMenubar\n                menuData={menuData}\n                onOpenChange={onOpenChange}\n                onSelectMenuItem={onSelectMenuItem}\n                variant={menubarVariant}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Content area */}\n        <div\n          className=\"tw-flex tw-items-center tw-gap-2 tw-px-2\"\n          /* @ts-ignore Electron-only property */\n          style={shouldUseAsAppDragArea ? { WebkitAppRegion: 'no-drag' } : undefined}\n        >\n          {children}\n        </div>\n\n        {/* Configure area */}\n        <div className=\"tw-flex tw-min-w-0 tw-grow tw-basis-0 tw-justify-end\">\n          <div\n            className=\"tw-flex tw-min-w-0 tw-items-center tw-gap-2 tw-pe-1\"\n            /* @ts-ignore Electron-only property */\n            style={shouldUseAsAppDragArea ? { WebkitAppRegion: 'no-drag' } : undefined}\n          >\n            {configAreaChildren}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Toolbar;\n","import { useState } from 'react';\nimport { LocalizedStringValue, formatReplacementString } from 'platform-bible-utils';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../shadcn-ui/select';\nimport { Label } from '../shadcn-ui/label';\n\n/**\n * Immutable array containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const UI_LANGUAGE_SELECTOR_STRING_KEYS = Object.freeze([\n  '%settings_uiLanguageSelector_fallbackLanguages%',\n] as const);\n\nexport type UiLanguageSelectorLocalizedStrings = {\n  [localizedUiLanguageSelectorKey in (typeof UI_LANGUAGE_SELECTOR_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: UiLanguageSelectorLocalizedStrings,\n  key: keyof UiLanguageSelectorLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\nexport type LanguageInfo = {\n  /** The name of the language to be displayed (in its native script) */\n  autonym: string;\n  /**\n   * The name of the language in other languages, so that the language can also be displayed in the\n   * current UI language, if known.\n   */\n  uiNames?: Record<string, string>;\n  /**\n   * Other known names of the language (for searching). This can include pejorative names and should\n   * never be displayed unless typed by the user.\n   */\n  otherNames?: string[];\n};\n\nexport type UiLanguageSelectorProps = {\n  /** Full set of known languages to display. The keys are valid BCP-47 tags. */\n  knownUiLanguages: Record<string, LanguageInfo>;\n  /** IETF BCP-47 language tag of the current primary UI language. `undefined` => 'en' */\n  primaryLanguage: string;\n  /**\n   * Ordered list of fallback language tags to use if the localization key can't be found in the\n   * current primary UI language. This list never contains English ('en') because it is the ultimate\n   * fallback.\n   */\n  fallbackLanguages: string[] | undefined;\n  /**\n   * Handler for when either the primary or the fallback languages change (or both). For this\n   * handler, the primary UI language is the first one in the array, followed by the fallback\n   * languages in order of decreasing preference.\n   */\n  onLanguagesChange?: (newUiLanguages: string[]) => void;\n  /** Handler for the primary language changes. */\n  onPrimaryLanguageChange?: (newPrimaryUiLanguage: string) => void;\n  /**\n   * Handler for when the fallback languages change. The array contains the fallback languages in\n   * order of decreasing preference.\n   */\n  onFallbackLanguagesChange?: (newFallbackLanguages: string[]) => void;\n  /**\n   * Map whose keys are localized string keys as contained in UI_LANGUAGE_SELECTOR_STRING_KEYS and\n   * whose values are the localized strings (in the current UI language).\n   */\n  localizedStrings: UiLanguageSelectorLocalizedStrings;\n  /** Additional css classes to help with unique styling of the control */\n  className?: string;\n  /** Optional id for the root element */\n  id?: string;\n};\n\n/**\n * A component for selecting the user interface language and managing fallback languages. Allows\n * users to choose a primary UI language and optionally select fallback languages.\n *\n * @param {UiLanguageSelectorProps} props - The props for the component.\n */\nexport function UiLanguageSelector({\n  knownUiLanguages,\n  primaryLanguage = 'en',\n  fallbackLanguages = [],\n  onLanguagesChange,\n  onPrimaryLanguageChange,\n  onFallbackLanguagesChange,\n  localizedStrings,\n  className,\n  id,\n}: UiLanguageSelectorProps) {\n  const fallbackLanguagesText = localizeString(\n    localizedStrings,\n    '%settings_uiLanguageSelector_fallbackLanguages%',\n  );\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleLanguageChange = (code: string) => {\n    if (onPrimaryLanguageChange) onPrimaryLanguageChange(code);\n    // REVIEW: Should fallback languages be preserved when primary language changes?\n    if (onLanguagesChange)\n      onLanguagesChange([code, ...fallbackLanguages.filter((lang) => lang !== code)]);\n    if (onFallbackLanguagesChange && fallbackLanguages.find((l) => l === code))\n      onFallbackLanguagesChange([...fallbackLanguages.filter((lang) => lang !== code)]);\n    setIsOpen(false); // Close the dropdown when a selection is made\n  };\n\n  /**\n   * Gets the display name for the given language. This will typically include the autonym (in the\n   * native script), along with the name of the language in the current UI locale if known, with a\n   * fallback to the English name (if known).\n   *\n   * @param {string} lang - The BCP-47 code of the language whose display name is being requested.\n   * @param {string} uiLang - The BCP-47 code of the current user-interface language used used to\n   *   try to look up the name of the language in a form that is likely to be helpful to the user if\n   *   they do not recognize the autonym.\n   * @returns {string} The display name of the language.\n   */\n  const getLanguageDisplayName = (lang: string, uiLang: string) => {\n    const altName =\n      uiLang !== lang\n        ? (knownUiLanguages[lang]?.uiNames?.[uiLang] ?? knownUiLanguages[lang]?.uiNames?.en)\n        : undefined;\n\n    return altName\n      ? `${knownUiLanguages[lang]?.autonym} (${altName})`\n      : knownUiLanguages[lang]?.autonym;\n  };\n\n  return (\n    <div id={id} className={cn('pr-twp tw-max-w-sm', className)}>\n      {/* Language Selector */}\n      <Select\n        name=\"uiLanguage\"\n        value={primaryLanguage}\n        onValueChange={handleLanguageChange}\n        open={isOpen}\n        onOpenChange={(open) => setIsOpen(open)}\n      >\n        <SelectTrigger>\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent\n          className=\"tw-z-[250]\" // Need to get over the floating web view z-index 200\n        >\n          {Object.keys(knownUiLanguages).map((key) => {\n            return (\n              <SelectItem key={key} value={key}>\n                {getLanguageDisplayName(key, primaryLanguage)}\n              </SelectItem>\n            );\n          })}\n        </SelectContent>\n      </Select>\n\n      {/* Fallback Language Button */}\n      {primaryLanguage !== 'en' && (\n        <div className=\"tw-pt-3\">\n          <Label className=\"tw-font-normal tw-text-muted-foreground\">\n            {formatReplacementString(fallbackLanguagesText, {\n              fallbackLanguages:\n                fallbackLanguages?.length > 0\n                  ? fallbackLanguages\n                      .map((f) => getLanguageDisplayName(f, primaryLanguage))\n                      .join(', ')\n                  : knownUiLanguages.en.autonym,\n            })}\n          </Label>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default UiLanguageSelector;\n","import { Label } from '@/components/shadcn-ui/label';\nimport { ReactNode } from 'react';\n\ntype SmartLabelProps = {\n  item: string;\n  createLabel?: (item: string) => string;\n  createComplexLabel?: (item: string) => ReactNode;\n};\n\n/** Create labels with text, react elements (e.g. links), or text + react elements */\nfunction SmartLabel({ item, createLabel, createComplexLabel }: SmartLabelProps): ReactNode {\n  if (createLabel) {\n    return <Label>{createLabel(item)}</Label>;\n  }\n  if (createComplexLabel) {\n    return <Label>{createComplexLabel(item)}</Label>;\n  }\n  return <Label>{item}</Label>;\n}\n\nexport default SmartLabel;\n","import { Checkbox } from '@/components/shadcn-ui/checkbox';\nimport { ReactNode } from 'react';\nimport SmartLabel from './smart-label.component';\n\nexport type ChecklistProps = {\n  /** Optional string representing the id attribute of the Checklist */\n  id?: string;\n  /** Optional string representing CSS class name(s) for styling */\n  className?: string;\n  /** Array of strings representing the checkable items */\n  listItems: string[];\n  /** Array of strings representing the checked items */\n  selectedListItems: string[];\n  /**\n   * Function that is called when a checkbox item is selected or deselected\n   *\n   * @param item The string description for this item\n   * @param selected True if selected, false if not selected\n   */\n  handleSelectListItem: (item: string, selected: boolean) => void;\n\n  /**\n   * Optional function creates a label for a provided checkable item\n   *\n   * @param item The item for which a label is to be created\n   * @returns A string representing the label text for the checkbox associated with that item\n   */\n  createLabel?: (item: string) => string;\n\n  /**\n   * Optional function creates a label for a provided checkable item\n   *\n   * @param item The item for which a label is to be created, including text and any additional\n   *   elements (e.g. links)\n   * @returns A react node representing the label text and any additional elements (e.g. links) for\n   *   the checkbox associated with that item\n   */\n  createComplexLabel?: (item: string) => ReactNode;\n};\n\n/** Renders a list of checkboxes. Each checkbox corresponds to an item from the `listItems` array. */\nexport function Checklist({\n  id,\n  className,\n  listItems,\n  selectedListItems,\n  handleSelectListItem,\n  createLabel,\n  createComplexLabel,\n}: ChecklistProps) {\n  return (\n    <div id={id} className={className}>\n      {listItems.map((item) => (\n        <div key={item} className=\"tw-m-2 tw-flex tw-items-center\">\n          <Checkbox\n            className=\"tw-me-2 tw-align-middle\"\n            checked={selectedListItems.includes(item)}\n            onCheckedChange={(value: boolean) => handleSelectListItem(item, value)}\n          />\n          <SmartLabel\n            item={item}\n            createLabel={createLabel}\n            createComplexLabel={createComplexLabel}\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default Checklist;\n","import { cn } from '@/utils/shadcn-ui.util';\nimport { MoreHorizontal } from 'lucide-react';\nimport React, { ReactNode } from 'react';\nimport { Button } from '../shadcn-ui/button';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuTrigger } from '../shadcn-ui/dropdown-menu';\n\n/** Props interface for the ResultsCard base component */\nexport interface ResultsCardProps {\n  /** Unique key for the card */\n  cardKey: string;\n  /** Whether this card is currently selected/focused */\n  isSelected: boolean;\n  /** Callback function called when the card is clicked */\n  onSelect: () => void;\n  /** Whether the content of this card are in a denied state */\n  isDenied?: boolean;\n  /** Whether the card should be hidden */\n  isHidden?: boolean;\n  /** Additional CSS classes to apply to the card */\n  className?: string;\n  /** Main content to display on the card */\n  children: ReactNode;\n  /** Content to show in the dropdown menu when selected */\n  dropdownContent?: ReactNode;\n  /** Additional content to show below the main content when selected */\n  additionalSelectedContent?: ReactNode;\n  /** Color to use for the card's accent border */\n  accentColor?: string;\n}\n\n/**\n * ResultsCard is a base component for displaying scripture-related results in a card format, even\n * though it is not based on the Card component. It provides common functionality like selection\n * state, dropdown menus, and expandable content.\n */\nexport function ResultsCard({\n  cardKey,\n  isSelected,\n  onSelect,\n  isDenied,\n  isHidden = false,\n  className,\n  children,\n  dropdownContent,\n  additionalSelectedContent,\n  accentColor,\n}: ResultsCardProps) {\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      event.preventDefault();\n      onSelect();\n    }\n  };\n\n  return (\n    <div\n      hidden={isHidden}\n      key={cardKey}\n      onClick={onSelect}\n      onKeyDown={handleKeyDown}\n      role=\"button\"\n      tabIndex={0}\n      aria-pressed={isSelected}\n      className={cn(\n        'tw-relative tw-min-w-36 tw-rounded-xl tw-border tw-shadow-none hover:tw-bg-muted/50',\n        { 'tw-opacity-50 hover:tw-opacity-100': isDenied && !isSelected },\n        { 'tw-bg-accent': isSelected },\n        { 'tw-bg-transparent': !isSelected },\n        className,\n      )}\n    >\n      <div className=\"tw-flex tw-flex-col tw-gap-2 tw-p-4\">\n        <div className=\"tw-flex tw-justify-between tw-overflow-hidden\">\n          <div className=\"tw-min-w-0 tw-flex-1\">{children}</div>\n          {isSelected && dropdownContent && (\n            <DropdownMenu>\n              <DropdownMenuTrigger className={cn(accentColor && 'tw-me-1')} asChild>\n                <Button className=\"tw-m-1 tw-h-6 tw-w-6\" variant=\"ghost\" size=\"icon\">\n                  <MoreHorizontal />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">{dropdownContent}</DropdownMenuContent>\n            </DropdownMenu>\n          )}\n        </div>\n        {isSelected && additionalSelectedContent && (\n          <div className=\"tw-w-fit tw-min-w-0 tw-max-w-full tw-overflow-hidden\">\n            {additionalSelectedContent}\n          </div>\n        )}\n      </div>\n      {accentColor && (\n        <div\n          className={`tw-absolute tw-right-0 tw-top-0 tw-h-full tw-w-2 tw-rounded-r-xl ${accentColor}`}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default ResultsCard;\n","import { cn } from '@/utils/shadcn-ui.util';\nimport { LoaderCircle, LucideProps } from 'lucide-react';\nimport { forwardRef } from 'react';\n\nexport type SpinnerProps = LucideProps;\n\n/**\n * A spinner component that uses the LoaderCircle icon from lucide-react to indicate loading states.\n * The spinner rotates to indicate that a process is ongoing.\n */\nexport const Spinner = forwardRef<SVGSVGElement, SpinnerProps>(({ className, ...props }, ref) => {\n  return (\n    <LoaderCircle size={35} className={cn('tw-animate-spin', className)} {...props} ref={ref} />\n  );\n});\n\nSpinner.displayName = 'Spinner';\n\nexport default Spinner;\n","import { Input as ShadInput } from '@/components/shadcn-ui/input';\nimport { Label as ShadLabel } from '@/components/shadcn-ui/label';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { ChangeEventHandler, FocusEventHandler } from 'react';\n\nexport type TextFieldProps = {\n  /** Optional unique identifier */\n  id?: string;\n  /**\n   * If `true`, the component is disabled.\n   *\n   * @default false\n   */\n  isDisabled?: boolean;\n  /**\n   * If `true`, the label is displayed in an error state.\n   *\n   * @default false\n   */\n  hasError?: boolean;\n  /**\n   * If `true`, the input will take up the full width of its container.\n   *\n   * @default false\n   */\n  isFullWidth?: boolean;\n  /** Text that gives the user instructions on what contents the TextField expects */\n  helperText?: string;\n  /** The title of the TextField */\n  label?: string;\n  /** The short hint displayed in the `input` before the user enters a value. */\n  placeholder?: string;\n  /**\n   * If `true`, the label is displayed as required and the `input` element is required.\n   *\n   * @default false\n   */\n  isRequired?: boolean;\n  /** Additional css classes to help with unique styling of the text field */\n  className?: string;\n  /** Starting value for the text field if it is not controlled */\n  defaultValue?: string | number;\n  /** Value of the text field if controlled */\n  value?: string | number;\n  /** Triggers when content of textfield is changed */\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n  /** Triggers when textfield gets focus */\n  onFocus?: FocusEventHandler<HTMLInputElement>;\n  /** Triggers when textfield loses focus */\n  onBlur?: FocusEventHandler<HTMLInputElement>;\n};\n\n/**\n * Text input field\n *\n * Thanks to Shadcn for heavy inspiration and documentation\n * https://ui.shadcn.com/docs/components/input#with-label\n */\nexport function TextField({\n  id,\n  isDisabled = false,\n  hasError = false,\n  isFullWidth = false,\n  helperText,\n  label,\n  placeholder,\n  isRequired = false,\n  className,\n  defaultValue,\n  value,\n  onChange,\n  onFocus,\n  onBlur,\n}: TextFieldProps) {\n  return (\n    <div className={cn('tw-inline-grid tw-items-center tw-gap-1.5', { 'tw-w-full': isFullWidth })}>\n      <ShadLabel\n        htmlFor={id}\n        className={cn({\n          'tw-text-red-600': hasError,\n          'tw-hidden': !label,\n        })}\n      >{`${label}${isRequired ? '*' : ''}`}</ShadLabel>\n      <ShadInput\n        id={id}\n        disabled={isDisabled}\n        placeholder={placeholder}\n        required={isRequired}\n        className={cn(className, { 'tw-border-red-600': hasError })}\n        defaultValue={defaultValue}\n        value={value}\n        onChange={onChange}\n        onFocus={onFocus}\n        onBlur={onBlur}\n      />\n      <p className={cn({ 'tw-hidden': !helperText })}>{helperText}</p>\n    </div>\n  );\n}\n\nexport default TextField;\n","import React from 'react';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\nconst alertVariants = cva(\n  // CUSTOM: Copied all `svg` arbitrary selector variant classes as `img` variants so we can use\n  // images (or svgs from file) as icons\n  // Implemented by TJ Couch\n  // Approved by Alex Mercado\n  // 20 February 2025\n  'tw-relative tw-w-full tw-rounded-lg tw-border tw-p-4 [&>svg~*]:tw-pl-7 [&>svg+div]:tw-translate-y-[-3px] [&>svg]:tw-absolute [&>svg]:tw-left-4 [&>svg]:tw-top-4 [&>svg]:tw-text-foreground [&>img~*]:tw-pl-7 [&>img+div]:tw-translate-y-[-3px] [&>img]:tw-absolute [&>img]:tw-left-4 [&>img]:tw-top-4 [&>img]:tw-text-foreground',\n  {\n    variants: {\n      variant: {\n        default: 'tw-bg-background tw-text-foreground',\n        destructive:\n          // CUSTOM: Copied all `svg` arbitrary selector variant classes as `img` variants so we can\n          // use images (or svgs from file) as icons\n          // Implemented by TJ Couch\n          // Approved by Alex Mercado\n          // 20 February 2025\n          'tw-border-destructive/50 tw-text-destructive dark:tw-border-destructive [&>svg]:tw-text-destructive [&>img]:tw-text-destructive',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n);\n\n/**\n * The Alert displays a callout for user attention. The component is built and styled by Shadcn UI.\n * See Shadcn UI Documentation https://ui.shadcn.com/docs/components/alert\n */\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(\n      // CUSTOM\n      'pr-twp',\n      alertVariants({ variant }),\n      className,\n    )}\n    {...props}\n  />\n));\nAlert.displayName = 'Alert';\n\n/** @inheritdoc Alert */\nconst AlertTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h5\n      ref={ref}\n      className={cn('tw-mb-1 tw-font-medium tw-leading-none tw-tracking-tight', className)}\n      {...props}\n    >\n      {/* added because of https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/main/docs/rules/heading-has-content.md  */}\n      {props.children}{' '}\n    </h5>\n  ),\n);\nAlertTitle.displayName = 'AlertTitle';\n\n/** @inheritdoc Alert */\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('tw-text-sm [&_p]:tw-leading-relaxed', className)} {...props} />\n));\nAlertDescription.displayName = 'AlertDescription';\n\nexport { Alert, AlertTitle, AlertDescription };\n","import React from 'react';\nimport * as ContextMenuPrimitive from '@radix-ui/react-context-menu';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Context Menu component displays a menu to the user â€” such as a set of actions or functions,\n * triggered by a button.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/context-menu}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/context-menu}\n */\nconst ContextMenu = ContextMenuPrimitive.Root;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuGroup = ContextMenuPrimitive.Group;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuPortal = ContextMenuPrimitive.Portal;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuSub = ContextMenuPrimitive.Sub;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean;\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      'pr-twp tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[state=open]:tw-bg-accent data-[state=open]:tw-text-accent-foreground',\n      inset && 'tw-pl-8',\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"tw-ml-auto tw-h-4 tw-w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n));\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      'pr-twp tw-z-50 tw-min-w-[8rem] tw-origin-[--radix-context-menu-content-transform-origin] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-md data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        'pr-twp tw-z-50 tw-max-h-[--radix-context-menu-content-available-height] tw-min-w-[8rem] tw-origin-[--radix-context-menu-content-transform-origin] tw-overflow-y-auto tw-overflow-x-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-md tw-animate-in tw-fade-in-80 data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n        className,\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n));\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      'pr-twp tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n      inset && 'tw-pl-8',\n      className,\n    )}\n    {...props}\n  />\n));\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n      className,\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"tw-absolute tw-left-2 tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"tw-h-4 tw-w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n));\nContextMenuCheckboxItem.displayName = ContextMenuPrimitive.CheckboxItem.displayName;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"tw-absolute tw-left-2 tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"tw-h-2 tw-w-2 tw-fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n));\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      'tw-px-2 tw-py-1.5 tw-text-sm tw-font-semibold tw-text-foreground',\n      inset && 'tw-pl-8',\n      className,\n    )}\n    {...props}\n  />\n));\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName;\n\n/** @inheritdoc ContextMenu */\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-my-1 tw-h-px tw-bg-border', className)}\n    {...props}\n  />\n));\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName;\n\n/** @inheritdoc ContextMenu */\nfunction ContextMenuShortcut({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) {\n  return (\n    <span\n      className={cn('tw-ml-auto tw-text-xs tw-tracking-widest tw-text-muted-foreground', className)}\n      {...props}\n    />\n  );\n}\nContextMenuShortcut.displayName = 'ContextMenuShortcut';\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n};\n","import React from 'react';\nimport { Drawer as DrawerPrimitive } from 'vaul';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n// CUSTOM: Added context to manage drawer direction\nconst DrawerContext = React.createContext<{\n  direction?: 'top' | 'bottom' | 'left' | 'right';\n}>({\n  direction: 'bottom',\n});\n\n/**\n * A drawer component for React. These components are built on Vaul and styled with Shadcn UI. See\n * Shadcn UI Documentation: https://ui.shadcn.com/docs/components/drawer See Vaul Documentation:\n * https://vaul.emilkowal.ski/getting-started\n */\nfunction Drawer({\n  shouldScaleBackground = true,\n  direction = 'bottom',\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) {\n  // CUSTOM: Use context to provide direction to child components\n  const contextValue = React.useMemo(() => ({ direction }), [direction]);\n  return (\n    <DrawerContext.Provider value={contextValue}>\n      <DrawerPrimitive.Root\n        shouldScaleBackground={shouldScaleBackground}\n        direction={direction}\n        {...props}\n      />\n    </DrawerContext.Provider>\n  );\n}\nDrawer.displayName = 'Drawer';\n\n/** @inheritdoc Drawer */\nconst DrawerTrigger = DrawerPrimitive.Trigger;\n\n/** @inheritdoc Drawer */\nconst DrawerPortal = DrawerPrimitive.Portal;\n\n/** @inheritdoc Drawer */\nconst DrawerClose = DrawerPrimitive.Close;\n\n/** @inheritdoc Drawer */\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn('tw-fixed tw-inset-0 tw-z-50 tw-bg-black/80', className)}\n    {...props}\n  />\n));\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName;\n\n/* CUSTOM: Extend DrawerPrimitive.Content with additional props */\ninterface DrawerContentProps\n  extends React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content> {\n  /** Optionally hide the drawer handle */\n  hideDrawerHandle?: boolean;\n}\n\n/** @inheritdoc Drawer */\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  DrawerContentProps\n>(({ className, children, hideDrawerHandle = false, ...props }, ref) => {\n  // CUSTOM: Use context to provide direction to child components\n  const { direction = 'bottom' } = React.useContext(DrawerContext);\n\n  // CUSTOM: Define positioning and styling based on direction\n  const directionStyles = {\n    bottom: 'tw-inset-x-0 tw-bottom-0 tw-mt-24 tw-rounded-t-[10px]',\n    top: 'tw-inset-x-0 tw-top-0 tw-mb-24 tw-rounded-b-[10px]',\n    left: 'tw-inset-y-0 tw-left-0 tw-mr-24 tw-rounded-r-[10px] tw-w-auto tw-max-w-sm',\n    right: 'tw-inset-y-0 tw-right-0 tw-ml-24 tw-rounded-l-[10px] tw-w-auto tw-max-w-sm',\n  };\n\n  // CUSTOM: Define handle styles for each direction\n  const handleStyles = {\n    bottom: 'tw-mx-auto tw-mt-4 tw-h-2 tw-w-[100px] tw-rounded-full tw-bg-muted',\n    top: 'tw-mx-auto tw-mb-4 tw-h-2 tw-w-[100px] tw-rounded-full tw-bg-muted',\n    left: 'tw-my-auto tw-mr-4 tw-w-2 tw-h-[100px] tw-rounded-full tw-bg-muted',\n    right: 'tw-my-auto tw-ml-4 tw-w-2 tw-h-[100px] tw-rounded-full tw-bg-muted',\n  };\n\n  return (\n    <DrawerPortal>\n      <DrawerOverlay />\n      <DrawerPrimitive.Content\n        ref={ref}\n        className={cn(\n          // CUSTOM: Change Tailwind CSS classes for styling\n          // Removed tw-inset-x-0 tw-bottom-0 tw-mt-24 tw-rounded-t-[10px] tw-flex-col\n          'pr-twp tw-fixed tw-z-50 tw-flex tw-h-auto tw-border tw-bg-background',\n          direction === 'bottom' || direction === 'top' ? 'tw-flex-col' : 'tw-flex-row',\n          directionStyles[direction],\n          className,\n        )}\n        {...props}\n      >\n        {/* CUSTOM: Render handles and children based on direction and if the drawer handle is hidden */}\n        {!hideDrawerHandle && (direction === 'bottom' || direction === 'right') && (\n          <div className={handleStyles[direction]} />\n        )}\n        <div className=\"tw-flex tw-flex-col\">{children}</div>\n        {!hideDrawerHandle && (direction === 'top' || direction === 'left') && (\n          <div className={handleStyles[direction]} />\n        )}\n      </DrawerPrimitive.Content>\n    </DrawerPortal>\n  );\n});\nDrawerContent.displayName = 'DrawerContent';\n\n/** @inheritdoc Drawer */\nfunction DrawerHeader({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn('tw-grid tw-gap-1.5 tw-p-4 tw-text-center sm:tw-text-left', className)}\n      {...props}\n    />\n  );\n}\nDrawerHeader.displayName = 'DrawerHeader';\n\n/** @inheritdoc Drawer */\nfunction DrawerFooter({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div className={cn('tw-mt-auto tw-flex tw-flex-col tw-gap-2 tw-p-4', className)} {...props} />\n  );\n}\nDrawerFooter.displayName = 'DrawerFooter';\n\n/** @inheritdoc Drawer */\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn('tw-text-lg tw-font-semibold tw-leading-none tw-tracking-tight', className)}\n    {...props}\n  />\n));\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName;\n\n/** @inheritdoc Drawer */\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn('tw-text-sm tw-text-muted-foreground', className)}\n    {...props}\n  />\n));\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName;\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n};\n","import React from 'react';\nimport * as ProgressPrimitive from '@radix-ui/react-progress';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Displays an indicator showing the completion progress of a task, typically displayed as a\n * progress bar. This component is built on Radix UI primitives and styled with Shadcn UI. See\n * Shadcn UI documentation: https://ui.shadcn.com/docs/components/progress See Radix UI\n * documentation: https://www.radix-ui.com/primitives/docs/components/progress#api-reference\n */\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      'pr-twp tw-relative tw-h-4 tw-w-full tw-overflow-hidden tw-rounded-full tw-bg-secondary',\n      className,\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"tw-h-full tw-w-full tw-flex-1 tw-bg-primary tw-transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n","import React from 'react';\nimport { GripVertical } from 'lucide-react';\nimport * as ResizablePrimitive from 'react-resizable-panels';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\nfunction ResizablePanelGroup({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) {\n  return (\n    <ResizablePrimitive.PanelGroup\n      className={cn(\n        'tw-flex tw-h-full tw-w-full data-[panel-group-direction=vertical]:tw-flex-col',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\n\nconst ResizablePanel = ResizablePrimitive.Panel;\n\nfunction ResizableHandle({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean;\n}) {\n  return (\n    <ResizablePrimitive.PanelResizeHandle\n      className={cn(\n        'tw-relative tw-flex tw-w-px tw-items-center tw-justify-center tw-bg-border after:tw-absolute after:tw-inset-y-0 after:tw-left-1/2 after:tw-w-1 after:tw--translate-x-1/2 focus-visible:tw-outline-none focus-visible:tw-ring-1 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-1 data-[panel-group-direction=vertical]:tw-h-px data-[panel-group-direction=vertical]:tw-w-full data-[panel-group-direction=vertical]:after:tw-left-0 data-[panel-group-direction=vertical]:after:tw-h-1 data-[panel-group-direction=vertical]:after:tw-w-full data-[panel-group-direction=vertical]:after:tw--translate-y-1/2 data-[panel-group-direction=vertical]:after:tw-translate-x-0 [&[data-panel-group-direction=vertical]>div]:tw-rotate-90',\n        className,\n      )}\n      {...props}\n    >\n      {withHandle && (\n        <div className=\"tw-z-10 tw-flex tw-h-4 tw-w-3 tw-items-center tw-justify-center tw-rounded-sm tw-border tw-bg-border\">\n          <GripVertical className=\"tw-h-2.5 tw-w-2.5\" />\n        </div>\n      )}\n    </ResizablePrimitive.PanelResizeHandle>\n  );\n}\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle };\n","import { ComponentProps } from 'react';\nimport { toast as sonner, Toaster } from 'sonner';\n\n/**\n * Props for Sonner component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/sonner}\n * @see Sonner Documentation: {@link https://sonner.emilkowal.ski}\n */\ntype SonnerProps = ComponentProps<typeof Toaster>;\n\n/**\n * The Sonner component is an opinionated toast component for React. It is built on Sonner and\n * styled with Shadcn UI.\n *\n * @param SonnerProps\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/sonner}\n * @see Sonner Documentation: {@link https://sonner.emilkowal.ski}\n */\nfunction Sonner({ ...props }: SonnerProps) {\n  return (\n    <Toaster\n      className=\"tw-toaster tw-group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            'group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg',\n          description: 'group-[.toast]:text-muted-foreground',\n          actionButton: 'group-[.toast]:bg-primary group-[.toast]:text-primary-foreground',\n          cancelButton: 'group-[.toast]:bg-muted group-[.toast]:text-muted-foreground',\n        },\n      }}\n      {...props}\n    />\n  );\n}\n\n// The re-export of the sonner function was added manually\nexport { Sonner, sonner };\n","import React from 'react';\nimport * as SliderPrimitive from '@radix-ui/react-slider';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * The Slider component is an input where the user selects a value from within a given range. This\n * component is built on Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/slider}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/slider}\n */\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <SliderPrimitive.Root\n      ref={ref}\n      className={cn(\n        'pr-twp tw-relative tw-flex tw-w-full tw-touch-none tw-select-none tw-items-center',\n        className,\n      )}\n      {...props}\n      dir={dir}\n    >\n      <SliderPrimitive.Track className=\"tw-relative tw-h-2 tw-w-full tw-grow tw-overflow-hidden tw-rounded-full tw-bg-secondary\">\n        <SliderPrimitive.Range className=\"tw-absolute tw-h-full tw-bg-primary\" />\n      </SliderPrimitive.Track>\n      <SliderPrimitive.Thumb className=\"tw-block tw-h-5 tw-w-5 tw-rounded-full tw-border-2 tw-border-primary tw-bg-background tw-ring-offset-background tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50\" />\n    </SliderPrimitive.Root>\n  );\n});\nSlider.displayName = SliderPrimitive.Root.displayName;\n\nexport { Slider };\n","import * as SwitchPrimitives from '@radix-ui/react-switch';\nimport React from 'react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * The Switch component is a control that allows the user to toggle between checked and not checked.\n * This component is built on Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/switch}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/switch}\n */\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <SwitchPrimitives.Root\n      className={cn(\n        'tw-peer pr-twp tw-inline-flex tw-h-6 tw-w-11 tw-shrink-0 tw-cursor-pointer tw-items-center tw-rounded-full tw-border-2 tw-border-transparent tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 focus-visible:tw-ring-offset-background disabled:tw-cursor-not-allowed disabled:tw-opacity-50 data-[state=checked]:tw-bg-primary data-[state=unchecked]:tw-bg-input',\n        className,\n      )}\n      {...props}\n      ref={ref}\n    >\n      <SwitchPrimitives.Thumb\n        className={cn(\n          'pr-twp tw-pointer-events-none tw-block tw-h-5 tw-w-5 tw-rounded-full tw-bg-background tw-shadow-lg tw-ring-0 tw-transition-transform',\n          {\n            'data-[state=checked]:tw-translate-x-5 data-[state=unchecked]:tw-translate-x-0':\n              dir === 'ltr',\n          },\n          {\n            'data-[state=checked]:tw-translate-x-[-20px] data-[state=unchecked]:tw-translate-x-0':\n              dir === 'rtl',\n          },\n        )}\n      />\n    </SwitchPrimitives.Root>\n  );\n});\nSwitch.displayName = SwitchPrimitives.Root.displayName;\n\nexport { Switch };\n","import React from 'react';\nimport * as TabsPrimitive from '@radix-ui/react-tabs';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * Tabs components provide a set of layered sections of contentâ€”known as tab panelsâ€“that are\n * displayed one at a time. These components are built on Radix UI primitives and styled with Shadcn\n * UI. See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/tabs See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/tabs\n */\nexport const Tabs = TabsPrimitive.Root;\n\n/** @inheritdoc Tabs */\nexport type TabsListProps = React.ComponentPropsWithoutRef<typeof TabsPrimitive.List> & {\n  className?: string;\n};\n\n/** @inheritdoc Tabs */\nexport type TabsTriggerProps = React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger> & {\n  className?: string;\n};\n\n/** @inheritdoc Tabs */\nexport type TabsContentProps = React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content> & {\n  className?: string;\n};\n\n/** @inheritdoc Tabs */\nexport const TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  TabsListProps\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <TabsPrimitive.List\n      ref={ref}\n      className={cn(\n        'pr-twp tw-inline-flex tw-h-10 tw-items-center tw-justify-center tw-rounded-md tw-bg-muted tw-p-1 tw-text-muted-foreground',\n        className,\n      )}\n      {...props}\n      dir={dir}\n    />\n  );\n});\nTabsList.displayName = TabsPrimitive.List.displayName;\n\n/** @inheritdoc Tabs */\nexport const TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  TabsTriggerProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'pr-twp tw-inline-flex tw-items-center tw-justify-center tw-whitespace-nowrap tw-rounded-sm tw-px-3 tw-py-1.5 tw-text-sm tw-font-medium tw-ring-offset-background tw-transition-all hover:tw-text-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50 data-[state=active]:tw-bg-background data-[state=active]:tw-text-foreground data-[state=active]:tw-shadow-sm',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\n\n/** @inheritdoc Tabs */\nexport const TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  TabsContentProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      'pr-twp tw-mt-2 tw-ring-offset-background focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsContent.displayName = TabsPrimitive.Content.displayName;\n","import React from 'react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Displays a form textarea or a component that looks like a textarea. This component is from Shadcn\n * UI. See Shadcn UI documentation: https://ui.shadcn.com/docs/components/textarea\n */\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'pr-twp tw-flex tw-min-h-[80px] tw-w-full tw-rounded-md tw-border tw-border-input tw-bg-background tw-px-3 tw-py-2 tw-text-base tw-ring-offset-background placeholder:tw-text-muted-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50 md:tw-text-sm',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nTextarea.displayName = 'Textarea';\n\nexport { Textarea };\n","import { PlatformEvent, PlatformEventHandler } from 'platform-bible-utils';\nimport { useEffect } from 'react';\n\n/**\n * Adds an event handler to an event so the event handler runs when the event is emitted. Use\n * `papi.network.getNetworkEvent` to use a networked event with this hook.\n *\n * @param event The event to subscribe to.\n *\n *   - If event is a `PlatformEvent`, that event will be used\n *   - If event is undefined, the callback will not be subscribed. Useful if the event is not yet\n *       available for example\n *\n * @param eventHandler The callback to run when the event is emitted\n *\n *   WARNING: MUST BE STABLE - const or wrapped in useCallback. The reference must not be updated\n *   every render\n */\nexport const useEvent = <T>(\n  event: PlatformEvent<T> | undefined,\n  eventHandler: PlatformEventHandler<T>,\n) => {\n  useEffect(() => {\n    // Do nothing if the event is not provided (in case the event is not yet available, for example)\n    if (!event) return () => {};\n\n    const unsubscriber = event(eventHandler);\n    return () => {\n      unsubscriber();\n    };\n  }, [event, eventHandler]);\n};\nexport default useEvent;\n","import { useEffect, useRef, useState } from 'react';\n\nexport type UsePromiseOptions = {\n  /**\n   * Whether to leave the value as the most recent resolved promise value or set it back to\n   * defaultValue while running the promise again. Defaults to true\n   */\n  preserveValue?: boolean;\n};\n\n/** Set up defaults for options for usePromise hook */\nfunction getUsePromiseOptionsDefaults(options: UsePromiseOptions): UsePromiseOptions {\n  return {\n    preserveValue: true,\n    ...options,\n  };\n}\n\n/**\n * Awaits a promise and returns a loading value while the promise is unresolved\n *\n * @param promiseFactoryCallback A function that returns the promise to await. If this callback is\n *   undefined, the current value will be returned (defaultValue unless it was previously changed\n *   and `options.preserveValue` is true), and there will be no loading.\n *\n *   WARNING: MUST BE STABLE - const or wrapped in useCallback. The reference must not be updated\n *   every render\n * @param defaultValue The initial value to return while first awaiting the promise. If\n *   `options.preserveValue` is false, this value is also shown while awaiting the promise on\n *   subsequent calls.\n *\n *   Note: this parameter is internally assigned to a `ref`, so changing it will not cause any hooks\n *   to re-run with its new value. This means that, if the `promiseFactoryCallback` changes and\n *   `options.preserveValue` is `false`, the returned value will be set to the current\n *   `defaultValue`. However, the returned value will not be updated if`defaultValue` changes.\n * @param options Various options for adjusting how this hook runs the `promiseFactoryCallback`\n *\n *   Note: this parameter is internally assigned to a `ref`, so changing it will not cause any hooks\n *   to re-run with its new value. However, the latest `options.preserveValue` will always be used\n *   appropriately to determine whether to preserve the returned value when changing the\n *   `promiseFactoryCallback`\n * @returns `[value, isLoading]`\n *\n *   - `value`: the current value for the promise, either the defaultValue or the resolved promise value\n *   - `isLoading`: whether the promise is waiting to be resolved\n */\nexport const usePromise = <T>(\n  promiseFactoryCallback: (() => Promise<T>) | undefined,\n  defaultValue: T,\n  options: UsePromiseOptions = {},\n): [value: T, isLoading: boolean] => {\n  // Use defaultValue as a ref so it doesn't update dependency arrays\n  const defaultValueRef = useRef(defaultValue);\n  defaultValueRef.current = defaultValue;\n  // Use options as a ref so it doesn't update dependency arrays\n  const optionsDefaultedRef = useRef(options);\n  optionsDefaultedRef.current = getUsePromiseOptionsDefaults(optionsDefaultedRef.current);\n\n  const [value, setValue] = useState<T>(() => defaultValueRef.current);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  useEffect(() => {\n    let promiseIsCurrent = true;\n    // If a promiseFactoryCallback was provided, we are loading. Otherwise, there is no loading to do\n    setIsLoading(!!promiseFactoryCallback);\n    (async () => {\n      // If there is a callback to run, run it\n      if (promiseFactoryCallback) {\n        const result = await promiseFactoryCallback();\n        // If the promise was not already replaced, update the value\n        if (promiseIsCurrent) {\n          setValue(() => result);\n          setIsLoading(false);\n        }\n      }\n    })();\n\n    return () => {\n      // Mark this promise as old and not to be used\n      promiseIsCurrent = false;\n      if (!optionsDefaultedRef.current.preserveValue) setValue(() => defaultValueRef.current);\n    };\n  }, [promiseFactoryCallback]);\n\n  return [value, isLoading];\n};\nexport default usePromise;\n","import { useCallback, useEffect } from 'react';\nimport { PlatformEvent, PlatformEventAsync, PlatformEventHandler } from 'platform-bible-utils';\nimport { usePromise } from './use-promise.hook';\n\nconst noopUnsubscriber = () => false;\n\n/**\n * Adds an event handler to an asynchronously subscribing/unsubscribing event so the event handler\n * runs when the event is emitted. Use `papi.network.getNetworkEvent` to use a networked event with\n * this hook.\n *\n * @param event The asynchronously (un)subscribing event to subscribe to.\n *\n *   - If event is a `PlatformEvent` or `PlatformEventAsync`, that event will be used\n *   - If event is undefined, the callback will not be subscribed. Useful if the event is not yet\n *       available for example\n *\n * @param eventHandler The callback to run when the event is emitted\n *\n *   WARNING: MUST BE STABLE - const or wrapped in useCallback. The reference must not be updated\n *   every render\n */\nexport const useEventAsync = <T>(\n  event: PlatformEvent<T> | PlatformEventAsync<T> | undefined,\n  eventHandler: PlatformEventHandler<T>,\n) => {\n  // Subscribe to the event asynchronously\n  const [unsubscribe] = usePromise(\n    useCallback(async () => {\n      // Do nothing if the event is not provided (in case the event is not yet available, for example)\n      if (!event) return noopUnsubscriber;\n\n      // Wrap subscribe and unsubscribe in promises to allow normal events to be used as well\n      const unsub = await Promise.resolve(event(eventHandler));\n      return async () => unsub();\n    }, [eventHandler, event]),\n    noopUnsubscriber,\n    // We want the unsubscriber to return to default value immediately upon changing subscription\n    // So the useEffect below will unsubscribe asap\n    { preserveValue: false },\n  );\n\n  // Unsubscribe from the event asynchronously (but we aren't awaiting the unsub)\n  useEffect(() => {\n    return () => {\n      if (unsubscribe !== noopUnsubscriber) {\n        unsubscribe();\n      }\n    };\n  }, [unsubscribe]);\n};\n\nexport default useEventAsync;\n"],"names":["twMergeCustom","extendTailwindMerge","cn","inputs","clsx","STORAGE_KEY","readDirection","retrieved","Dialog","DialogPrimitive","DialogPortal","DialogOverlay","React","className","props","ref","jsx","DialogContent","children","dir","jsxs","X","DialogHeader","DialogTitle","DialogDescription","Command","CommandPrimitive","CommandInput","Search","CommandList","CommandEmpty","CommandGroup","CommandSeparator","CommandItem","P","R","s","n","N","B","O","S","K","g","k","x","T","V","w","L","G","A","H","C","I","y","q","U","m","l","h","c","E","D","i","a","o","u","v","f","d","b","p","J","getSectionLongName","section","otLongName","ntLongName","dcLongName","extraLongName","Section","getSectionShortName","otShortName","ntShortName","dcShortName","extraShortName","getLocalizedBookName","bookId","localizedBookNames","_a","Canon","getLocalizedBookId","ALL_BOOK_IDS","ALL_ENGLISH_BOOK_NAMES","doesBookMatchQuery","query","normalizedQuery","englishName","localizedBook","includes","BookItem","forwardRef","isSelected","onSelect","onMouseDown","showCheck","commandValue","isMouseClick","useRef","handleSelect","handleMouseDown","e","bookDisplayName","useMemo","bookDisplayId","Check","buttonVariants","cva","Button","variant","size","asChild","Comp","Slot","Popover","PopoverPrimitive","PopoverTrigger","PopoverAnchor","PopoverContent","align","sideOffset","generateCommandValue","chapter","RecentSearches","recentSearches","onSearchItemSelect","renderItem","item","getItemKey","ariaLabel","groupHeading","id","isOpen","setIsOpen","useState","handleSearchItemSelect","Clock","useRecentSearches","setRecentSearches","areItemsEqual","maxItems","recentSearchesWithoutCurrent","existingItem","updatedRecentSearches","SCRIPTURE_REGEX_PATTERNS","SEARCH_QUERY_FORMATS","getKeyCharacterType","key","isLetter","isDigit","fetchEndChapter","getChaptersForBook","calculateTopMatch","availableBooks","topMatch","result","format","matches","book","verse","validBookId","allPotentialMatches","bookIdUpperCase","matchingLocalizedBookId","matchingBookIdForFullName","bookName","matchingLocalizedBookName","chapterNum","verseNum","useQuickNavButtons","scrRef","direction","handleSubmit","handlePreviousChapter","useCallback","currentBookIndex","previousBook","lastChapter","handleNextChapter","maxChapter","nextBook","handlePreviousVerse","handleNextVerse","ChevronsLeft","ChevronsRight","ChevronLeft","ChevronRight","ChapterGrid","onChapterSelect","setChapterRef","isChapterDimmed","_","BookChapterControl","getActiveBookIds","localizedStrings","onAddRecentSearch","isCommandOpen","setIsCommandOpen","setCommandValue","inputValue","setInputValue","viewMode","setViewMode","selectedBookForChaptersView","setSelectedBookForChaptersView","isCommandListHidden","setIsCommandListHidden","commandRef","commandInputRef","commandListRef","selectedBookItemRef","chapterRefs","handleSubmitAndAddToRecent","newScrRef","activeBookIds","availableBooksByType","filteredBooksByType","filteredBooks","type","handleTopMatchSelect","handleBookSelect","handleChapterSelect","chapterNumber","handleRecentItemSelect","quickNavButtons","handleBackToBooks","handleOpenChange","shouldCommandBeOpen","otLong","ntLong","dcLong","extraLong","getSectionLabel","doesChapterMatch","currentDisplayValue","formatScrRef","element","handleInputKeyDown","event","handleCommandKeyDown","currentBookName","currentBookId","currentChapter","match","targetChapter","GRID_COLS","targetElement","handleQuickNavButtonKeyDown","prevValue","useLayoutEffect","scrollTimeout","listElement","itemElement","itemOffsetTop","listHeight","itemHeight","scrollPosition","isCurrentlySelectedBook","verseRef","onClick","disabled","title","Icon","ArrowLeft","ArrowRight","Fragment","books","selectedBookId","getSectionForBook","BOOK_CHAPTER_CONTROL_STRING_KEYS","labelVariants","Label","LabelPrimitive","RadioGroup","RadioGroupPrimitive","RadioGroupItem","Circle","getOptionLabelDefault","option","ComboBox","options","buttonClassName","popoverContentClassName","value","onChange","getOptionLabel","getButtonLabel","icon","buttonPlaceholder","textPlaceholder","commandEmptyMessage","buttonVariant","alignDropDown","isDisabled","open","setOpen","buttonLabel","isGroupedOptions","groupOptions","renderCommandItem","optionLabel","secondaryLabel","ChevronDown","group","ChapterRangeSelector","startChapter","endChapter","handleSelectStartChapter","handleSelectEndChapter","chapterCount","chapterOptions","index","onChangeStartChapter","onChangeEndChapter","BookSelectionMode","BOOK_SELECTOR_STRING_KEYS","localizeString","strings","BookSelector","handleBookSelectionModeChange","onSelectBooks","selectedBookIds","currentBookText","chooseText","chooseBooksText","bookSelectionMode","setBookSelectionMode","onSelectionModeChange","newMode","INTERACTIVE_ELEMENT_TAG_SELECTORS","INTERACTIVE_ELEMENT_ROLE_SELECTORS","useListbox","onFocusChange","onOptionSelect","onCharacterPress","listboxRef","activeId","setActiveId","selectedId","setSelectedId","focusOption","opt","toggleSelectInternal","prev","isInteractiveElement","tag","role","tabIndex","handleKeyDown","getElementById","selectedElement","activeElement","focusableElements","currentIndex","el","nextIndex","container","preferred","fallback","toFocus","nextOption","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","Separator","orientation","decorative","SeparatorPrimitive","badgeVariants","Badge","r","t","editorTheme","TooltipProvider","TooltipPrimitive","Tooltip","TooltipTrigger","TooltipContent","nodes","HeadingNode","ParagraphNode","TextNode","QuoteNode","Z","W","M","j","Y","et","rt","it","st","at","dt","pt","$t","wt","xt","Lt","Nt","Mt","Ot","z","ContentEditable","placeholder","placeholderClassName","LexicalContentEditable","Context","createContext","ToolbarContext","activeEditor","$updateToolbar","blockType","setBlockType","showModal","contextValue","useToolbarContext","context","useContext","useEditorModal","modalContent","setModalContent","onClose","modal","content","getContent","closeOnClickOutside","ToolbarPlugin","editor","useLexicalComposerContext","setActiveEditor","useEffect","SELECTION_CHANGE_COMMAND","_payload","newEditor","COMMAND_PRIORITY_CRITICAL","useUpdateToolbarHandler","callback","selection","$getSelection","toggleVariants","Toggle","TogglePrimitive","ToggleGroupContext","ToggleGroup","ToggleGroupPrimitive","ToggleGroupItem","FORMATS","BoldIcon","ItalicIcon","UnderlineIcon","StrikethroughIcon","FontFormatToolbarPlugin","activeFormats","setActiveFormats","$isRangeSelection","$isTableSelection","formats","label","FORMAT_TEXT_COMMAND","ClearEditorBridge","onClear","CLEAR_EDITOR_COMMAND","Plugins","autoFocus","setFloatingAnchorElem","onRef","_floatingAnchorElem","RichTextPlugin","LexicalErrorBoundary","AutoFocusPlugin","ClearEditorPlugin","editorConfig","error","Editor","editorState","editorSerializedState","onSerializedChange","LexicalComposer","OnChangePlugin","latestEditorState","hasEditorContent","hasText","node","editorStateToHtml","createEditor","parsedEditorState","html","$generateHtmlFromNodes","Avatar","AvatarPrimitive","AvatarImage","AvatarFallback","CommentItem","comment","isReply","isThreadExpanded","displayDate","date","relativeDate","formatRelativeDate","time","formatReplacementString","userLabel","initials","name","parseParatextHtml","initialValue","CommentThread","comments","assignedUser","handleSelectThread","threadId","threadStatus","handleResolveCommentThread","handleAddComment","setEditorState","isVerseExpanded","setIsVerseExpanded","isVerseOverflowing","setIsVerseOverflowing","showAllReplies","setShowAllReplies","firstComment","verseTextRef","clearEditorRef","verseTextElement","checkOverflow","localizedReplies","localizedAssignedToText","replies","replyCount","hasReplies","visibleReplies","hiddenReplyCount","replyText","hiddenReplyText","handleSubmitComment","ChevronUp","reply","clearFn","AtSign","ArrowUp","getUniqueThreadId","CommentList","threads","selectedThreadId","setSelectedThreadId","thread","handleKeyboardSelectThread","handleKeyDownWithEscape","requestAnimationFrameScheduled","requestAnimationFrameChangesRendered","contentEditableField","range","MenuContext","useMenuContext","menuVariants","DropdownMenuTrigger","DropdownMenuPrimitive","DropdownMenuGroup","DropdownMenuPortal","DropdownMenuSub","DropdownMenuRadioGroup","DropdownMenu","DropdownMenuSubTrigger","inset","DropdownMenuSubContent","DropdownMenuContent","DropdownMenuItem","DropdownMenuCheckboxItem","checked","DropdownMenuRadioItem","DropdownMenuLabel","DropdownMenuSeparator","DropdownMenuShortcut","DataTableViewOptions","table","FilterIcon","column","Select","SelectPrimitive","SelectGroup","SelectValue","selectTriggerVariants","SelectTrigger","SelectScrollUpButton","SelectScrollDownButton","SelectContent","position","SelectLabel","SelectItem","SelectSeparator","DataTablePagination","pageSize","ArrowLeftIcon","ChevronLeftIcon","ChevronRightIcon","ArrowRightIcon","FOCUSABLE_SELECTOR","isVisible","getFocusableElements","uniqueQuerySelector","Table","stickyHeader","tableRef","currentTable","setTabIndexes","observer","handleKeyDownInTable","TableHeader","TableBody","TableFooter","useFocusableInRowKeyboardNavigation","rowRef","row","focusables","focusAdjacentFocusableElementInRow","focusablesInRow","currentIndexOfFocusables","nextFocusable","focusAdjacentRow","rowsInTable","currentRowIndex","nextRow","TableRow","onKeyDown","setFocusAlsoRunsSelect","currentRow","closestTable","handleFocus","TableHead","TableCell","TableCaption","Skeleton","DataTable","columns","data","enablePagination","showPaginationControls","showColumnVisibilityControls","onRowClickHandler","isLoading","noResultsMessage","sorting","setSorting","columnFilters","setColumnFilters","columnVisibility","setColumnVisibility","rowSelection","setRowSelection","normalizedData","useReactTable","getCoreRowModel","getPaginationRowModel","getSortedRowModel","getFilteredRowModel","visibleColumns","bodyContent","idx","rowId","cell","flexRender","headerGroup","header","truncateMarkdown","markdown","plainText","charLimit","truncateAt","breakPoint","lastBreak","MarkdownRenderer","anchorTarget","truncate","cleanedMarkdown","processedMarkdown","Markdown","ERROR_DUMP_STRING_KEYS","ErrorDump","errorDetails","handleCopyNotify","headerText","infoMessage","handleCopy","Copy","ERROR_POPOVER_STRING_KEYS","ErrorPopover","isCopySuccess","setIsCopySuccess","handleCopyWithNotification","DropdownMenuItemType","DropdownMenuItemType2","FilterDropdown","groups","checkedStates","setCheckedStates","entry","radioStates","setRadioStates","handleCheckboxUpdate","groupIndex","newCheckedState","oldCheckedStates","handleRadioUpdate","oldRadioStates","currentItem","Filter","MoreInfo","category","downloads","languages","moreInfoUrl","handleMoreInfoLinkClick","supportUrl","handleSupportLinkClick","numberFormatted","NumberFormat","handleScrollToBottom","User","locale","LucideLink","CircleHelp","VersionHistory","versionHistory","showAllVersions","setShowAllVersions","currentDate","formatTimeString","dateString","dateDiff","yearDiff","monthDiff","dayDiff","timeString","sortedEntries","Footer","publisherDisplayName","fileSize","locales","currentVersion","formattedFileSize","formatBytes","languageNames","codes","displayNames","getCurrentLocale","code","MultiSelectComboBox","entries","selected","hasToggleAllFeature","selectAllText","clearAllText","customSelectedText","onOpenChange","sortSelected","isOpenLocal","setIsOpenLocal","getPlaceholderText","sortedOptions","starredItems","nonStarredItems","aSelected","bSelected","handleSelectAll","handleClearAll","actualIsOpen","actualOnOpenChange","ChevronsUpDown","Star","badgesPlaceholder","selectedType","find","list","predicate","ac","hasOwn","freeze","object","oc","assign","target","source","HTML_BOOLEAN_ATTRIBUTES","isHTMLBooleanAttribute","HTML_VOID_ELEMENTS","isHTMLVoidElement","tagName","HTML_RAW_TEXT_ELEMENTS","isHTMLRawTextElement","isHTMLEscapableRawTextElement","isHTMLMimeType","mimeType","MIME_TYPE","hasDefaultHTMLNamespace","_MIME_TYPES","isValidMimeType","NAMESPACE","conventions","require$$0","extendError","constructor","writableName","DOMExceptionName","DOMExceptionNames","isValidDomExceptionCode","endsWithError","DOMException","messageOrCode","nameOrMessage","ExceptionCode","ParseError","message","locator","errors","detectUnicodeSupport","RegExpImpl","UNICODE_SUPPORT","chars","regexp","chars_without","search","reg","args","self","part","isStr","regg","UNICODE_REPLACEMENT_CHARACTER","Char","_SChar","SChar_s","S_OPT","NameStartChar","NameStartChar_s","NameChar","Name","Nmtoken","EntityRef","CharRef","Reference","PEReference","EntityValue","AttValue","NCNameStartChar","NCNameChar","NCName","QName","QName_exact","QName_group","SystemLiteral","PI","PubidChar","PubidLiteral","COMMENT_START","COMMENT_END","Comment","PCDATA","Mixed","_children_quantity","contentspec","ELEMENTDECL_START","elementdecl","NotationType","Enumeration","EnumeratedType","AttType","DefaultDecl","AttDef","ATTLIST_DECL_START","AttlistDecl","ABOUT_LEGACY_COMPAT","ABOUT_LEGACY_COMPAT_SystemLiteral","SYSTEM","PUBLIC","ExternalID","ExternalID_match","NDataDecl","EntityDef","ENTITY_DECL_START","GEDecl","PEDef","PEDecl","EntityDecl","PublicID","NotationDecl","Eq","VersionNum","VersionInfo","EncName","EncodingDecl","SDDecl","XMLDecl","DOCTYPE_DECL_START","CDATA_START","CDATA_END","CDStart","CDEnd","CData","CDSect","grammar","PDC","require$$1","require$$2","checkSymbol","symbol","notEmptyString","input","splitOnASCIIWhitespace","orderedSetReducer","current","toOrderedSet","arrayIncludes","validateQualifiedName","qualifiedName","validateAndExtract","namespace","prefix","localName","splitResult","copy","src","dest","_extends","Class","Super","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","DocumentPosition","commonAncestor","docGUID","doc","NodeList","nodeFilter","buf","serializeToString","me","LiveNodeList","refresh","_updateLiveList","inc","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","attr","lastIndex","namespaceURI","DOMImplementation","feature","version","doctype","contentType","Document","root","publicId","systemId","internalSubset","DocumentType","htmlNode","headNode","titleNode","Node","rootNode","other","parent","otherNode","newChild","refChild","_insertBefore","oldChild","assertPreReplacementValidityInDocument","_removeChild","deep","cloneNode","child","next","map","node1","node2","attr1","attr2","Attr","chain1","ancestor1","chain2","ancestor2","ca","_xmlEncoder","_visitNode","ns","remove","_onUpdateChild","childNodes","parentNode","oldPreviousSibling","oldNextSibling","hasValidParentNodeType","hasInsertableNodeType","isDocTypeNode","isElementNode","isTextNode","isElementInsertionPossible","parentChildNodes","docTypeNode","isElementReplacementPossible","hasElementChildThatIsNotChild","assertPreInsertionValidity1to5","assertPreInsertionValidityInDocument","nodeChildNodes","nodeChildElements","parentElementChild","_inDocumentAssertion","cp","newFirst","newLast","pre","removed","importedNode","importNode","rtv","Element","attrs","DocumentFragment","Text","CDATASection","ProcessingInstruction","EntityReference","validated","old","classNames","classNamesSet","base","nodeClassNames","nodeClassNamesSet","isHTMLDocument","lowerQualifiedName","nodeQualifiedName","matchingQName","CharacterData","offset","count","text","start","end","newText","newNode","Notation","Entity","XMLSerializer","nodeSerializeToString","refNode","uri","visibleNamespaces","needNamespaceDefine","isHTML","addSerializedAttribute","len","nodeName","prefixedNodeName","defaultNS","ai","nsi","canCloseTag","pubid","sysid","attrs2","getTextContent","dom","exports","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","XMLReader","defaultNSMap","entityMap","domBuilder","_copy","parse","ENTITY_REG","defaultNSMapCopy","errorHandler","fixedFromCharCode","surrogate1","surrogate2","entityReplacer","complete","appendText","lineStart","lineEnd","linePattern","parseStack","unclosedTags","tagStart","fromSource","tagNameRaw","tagNameMatch","currentTagName","tagNameLower","config","localNSMap","parseProcessingInstruction","parseDoctypeCommentOrCData","ElementAttributes","currentNSMap","parseElementStartPart","locator2","copyLocator","appendElement","parseHtmlSpecialContent","addAttribute","qname","startIndex","attrName","qName","nsp","nsPrefix","elStartEnd","isEscapableRaw","elEndStart","parseUtils","char","skip","skipBlanks","blanks","substringFromIndex","substringStartsWith","substringStartsWithCaseInsensitive","getMatch","expr","parseDoctypeInternalSubset","parsePI","intSubsetStart","cdata","sax","entities","require$$3","require$$4","normalizeLineEndings","DOMParser","DOMHandler","defaultNamespace","isXml","impl","ins","ch","length","_toString","charNode","comm","level","_locator","handler","onErrorStopParsing","onWarningStopParsing","domParser","lib","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diff_main","text1","text2","cursor_pos","cleanup","_fix_unicode","editdiff","find_cursor_edit_diff","commonlength","diff_commonPrefix","commonprefix","diff_commonSuffix","commonsuffix","diffs","diff_compute_","diff_cleanupMerge","diff_cleanupSemantic","longtext","shorttext","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","diff_bisect_","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","delta","front","k1start","k1end","k2start","k2end","k1","k1_offset","x1","y1","k2_offset","x2","diff_bisectSplit_","k2","y2","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","is_surrogate_pair_start","diff_commonOverlap_","text_length","best","pattern","found","pointerend","is_surrogate_pair_end","diff_halfMatchI_","seed","best_common","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastequality","pointer","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","nonAlphaNumericRegex_","whitespaceRegex_","linebreakRegex_","blanklineEndRegex_","blanklineStartRegex_","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","nonAlphaNumeric2","whitespace1","whitespace2","lineBreak1","lineBreak2","blankLine1","blankLine2","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","fix_unicode","count_delete","count_insert","text_delete","text_insert","previous_equality","ends_with_pair_start","stray","starts_with_pair_end","charCode","str","remove_empty_tuples","tuples","ret","make_edit_splice","before","oldMiddle","newMiddle","after","oldText","oldRange","newRange","oldLength","newLength","oldCursor","oldBefore","oldAfter","maybeNewCursor","editBefore","newCursor","newBefore","newAfter","oldPrefix","newPrefix","editAfter","cursor","oldSuffix","newSuffix","replaceRange","diff","diff_1","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","global","freeSelf","freeExports","freeModule","module","moduleExports","addMapEntry","pair","addSetEntry","set","arrayEach","array","iteratee","arrayPush","values","arrayReduce","accumulator","initAccum","baseTimes","getValue","isHostObject","mapToArray","overArg","func","transform","arg","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","funcToString","hasOwnProperty","objectToString","reIsNative","Buffer","Symbol","Uint8Array","getPrototype","objectCreate","propertyIsEnumerable","splice","nativeGetSymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","cache","pairs","arrayLikeKeys","inherited","isArray","isArguments","skipIndexes","isIndex","assignValue","objValue","eq","baseAssign","copyObject","keys","baseClone","isDeep","isFull","customizer","stack","isObject","isArr","initCloneArray","copyArray","getTag","isFunc","isBuffer","cloneBuffer","initCloneObject","copySymbols","initCloneByTag","stacked","getAllKeys","subValue","baseCreate","proto","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","baseIsNative","isMasked","isFunction","baseKeys","isPrototype","buffer","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","cloneMap","cloneFunc","cloneRegExp","cloneSet","cloneSymbol","cloneTypedArray","typedArray","newValue","getSymbols","isKeyable","stubArray","Ctor","ctorString","cloneDeep","isArrayLikeObject","isArrayLike","isLength","isObjectLike","stubFalse","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","asyncTag","nullTag","proxyTag","undefinedTag","typedArrayTags","freeProcess","nodeUtil","nodeIsTypedArray","arrayFilter","resIndex","arraySome","baseUnary","cacheHas","nativeObjectToString","symToStringTag","SetCache","setCacheAdd","setCacheHas","isArg","isBuff","isType","isTypedArray","getRawTag","baseIsArguments","baseIsEqual","bitmask","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsTypedArray","isPartial","arrLength","othLength","seen","arrValue","othValue","compared","othIndex","convert","objProps","objLength","othProps","skipCtor","objCtor","othCtor","isOwn","unmasked","isEqual","AttributeMap_1","AttributeMap","compose","keepNull","attributes","invert","baseInverted","memo","priority","Op_1","Op","op","OpIterator","Iterator","ops","nextOp","opLength","retOp","rest","OpIterator_1","require$$5","NULL_CHARACTER","getEmbedTypeAndData","embedType","Delta","newOp","lastOp","passed","failed","elem","iter","thisIter","otherIter","firstOther","firstLeft","thisOp","otherOp","action","thisData","otherData","prep","retDelta","diffResult","component","newline","line","inverted","baseIndex","baseOp","slice","opData","baseOpData","transformedData","nextType","getOwnPropertyNames","getOwnPropertySymbols","combineComparators","comparatorA","comparatorB","state","createIsCircular","cachedA","cachedB","getStrictProperties","property","sameValueZeroEqual","PREACT_VNODE","PREACT_OWNER","REACT_OWNER","getOwnPropertyDescriptor","areArraysEqual","areDatesEqual","areErrorsEqual","areFunctionsEqual","areMapsEqual","matchedIndices","aIterable","aResult","bResult","bIterable","hasMatch","matchIndex","aEntry","bEntry","areNumbersEqual","areObjectsEqual","properties","isPropertyEqual","areObjectsEqualStrict","descriptorA","descriptorB","arePrimitiveWrappersEqual","areRegExpsEqual","areSetsEqual","areTypedArraysEqual","areUrlsEqual","ARGUMENTS_TAG","BOOLEAN_TAG","DATE_TAG","ERROR_TAG","MAP_TAG","NUMBER_TAG","OBJECT_TAG","REG_EXP_TAG","SET_TAG","STRING_TAG","URL_TAG","createEqualityComparator","createEqualityComparatorConfig","circular","createCustomConfig","strict","areArraysEqual$1","areMapsEqual$1","areObjectsEqual$1","areSetsEqual$1","createInternalEqualityComparator","compare","_indexOrKeyA","_indexOrKeyB","_parentA","_parentB","createIsEqual","comparator","createState","equals","_b","meta","deepEqual","createCustomEqual","createCustomInternalComparator","g$2","f$1","$","F","min","max","round","floor","createCoords","oppositeSideMap","oppositeAlignmentMap","clamp","evaluate","param","getSide","placement","getAlignment","getOppositeAxis","axis","getAxisLength","yAxisSides","getSideAxis","getAlignmentAxis","getAlignmentSides","rects","rtl","alignment","alignmentAxis","mainAlignmentSide","getOppositePlacement","getExpandedPlacements","oppositePlacement","getOppositeAlignmentPlacement","lrPlacement","rlPlacement","tbPlacement","btPlacement","getSideList","side","isStart","getOppositeAxisPlacements","flipAlignment","expandPaddingObject","padding","getPaddingObject","rectToClientRect","rect","width","height","computeCoordsFromPlacement","_ref","reference","floating","sideAxis","alignLength","isVertical","commonX","commonY","commonAlign","coords","computePosition","strategy","middleware","platform","validMiddleware","statefulPlacement","middlewareData","resetCount","fn","nextX","nextY","reset","detectOverflow","_await$platform$isEle","elements","boundary","rootBoundary","elementContext","altBoundary","paddingObject","clippingClientRect","offsetParent","offsetScale","elementClientRect","flip","_middlewareData$arrow","_middlewareData$flip","initialPlacement","checkMainAxis","checkCrossAxis","specifiedFallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","detectOverflowOptions","initialSideAxis","isBasePlacement","fallbackPlacements","hasFallbackAxisSideDirection","placements","overflow","overflows","overflowsData","sides","_middlewareData$flip2","_overflowsData$filter","nextPlacement","resetPlacement","_overflowsData$filter2","currentSideAxis","acc","shift","limiter","crossAxis","mainAxis","mainAxisCoord","crossAxisCoord","minSide","maxSide","limitedCoords","hasWindow","getNodeName","isNode","getWindow","_node$ownerDocument","getDocumentElement","isElement","isHTMLElement","isShadowRoot","invalidOverflowDisplayValues","isOverflowElement","overflowX","overflowY","display","getComputedStyle","tableElements","isTableElement","topLayerSelectors","isTopLayer","selector","transformProperties","willChangeValues","containValues","isContainingBlock","elementOrCss","webkit","isWebKit","css","getContainingBlock","currentNode","getParentNode","isLastTraversableNode","lastTraversableNodeNames","getNodeScroll","getNearestOverflowAncestor","getOverflowAncestors","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","win","frameElement","getFrameElement","getCssDimensions","getComputedStyle$1","hasOffset","offsetWidth","offsetHeight","shouldFallback","unwrapElement","getScale","domElement","noOffsets","getVisualOffsets","shouldAddVisualOffsets","isFixed","floatingOffsetParent","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scale","visualOffsets","offsetWin","currentWin","currentIFrame","iframeScale","iframeRect","left","top","getWindowScrollBarX","leftScroll","getHTMLOffset","documentElement","scroll","htmlRect","convertOffsetParentRelativeRectToViewportRelativeRect","topLayer","offsets","isOffsetParentAnElement","offsetRect","htmlOffset","getClientRects","getDocumentRect","body","SCROLLBAR_MAX","getViewportRect","visualViewport","visualViewportBased","windowScrollbarX","bodyStyles","bodyMarginInline","clippingStableScrollbarWidth","absoluteOrFixed","getInnerBoundingClientRect","getClientRectFromClippingAncestor","clippingAncestor","hasFixedPositionAncestor","stopNode","getClippingElementAncestors","cachedResult","currentContainingBlockComputedStyle","elementIsFixed","computedStyle","currentNodeIsContaining","ancestor","getClippingRect","clippingAncestors","firstClippingAncestor","clippingRect","accRect","getDimensions","getRectRelativeToOffsetParent","setLeftRTLScrollbarOffset","isStaticPositioned","getTrueOffsetParent","polyfill","rawOffsetParent","getOffsetParent","svgOffsetParent","getElementRects","getOffsetParentFn","getDimensionsFn","floatingDimensions","isRTL","rectsAreEqual","observeMove","onMove","io","timeoutId","_io","threshold","elementRectForRootMargin","insetTop","insetRight","insetBottom","insetLeft","isFirstUpdate","handleObserve","ratio","autoUpdate","update","ancestorScroll","ancestorResize","elementResize","layoutShift","animationFrame","referenceEl","ancestors","cleanupIo","reobserveFrame","resizeObserver","firstEntry","_resizeObserver","frameId","prevRefRect","frameLoop","nextRefRect","_resizeObserver2","shift$1","flip$1","mergedOptions","platformWithCache","computePosition$1","create","setIfUndefined","createT","res","any","last","arr","from","ObservableV2","map.create","map.setIfUndefined","set.create","_f","observers","array.from","abs","isNegativeZero","BIT1","BIT2","BIT3","BIT4","BIT6","BIT7","BIT8","BITS5","BITS6","BITS7","BITS31","isInteger","num","math.floor","toLowerCase","trimLeftRegex","trimLeft","fromCamelCaseRegex","fromCamelCase","separator","_encodeUtf8Polyfill","encodedString","utf8TextEncoder","_encodeUtf8Native","encodeUtf8","utf8TextDecoder","Encoder","createEncoder","encoder","toUint8Array","uint8arr","curPos","verifyLen","bufferLen","math.max","write","writeUint8","writeVarUint","binary.BITS7","binary.BIT8","writeVarInt","isNegative","math.isNegativeZero","binary.BITS6","binary.BIT7","_strBuffer","_maxStrBSize","_writeVarStringNative","written","string.utf8TextEncoder","writeVarUint8Array","string.encodeUtf8","_writeVarStringPolyfill","writeVarString","writeUint8Array","uint8Array","cpos","leftCopyLen","math.min","rightCopyLen","writeOnDataView","dview","writeFloat32","writeFloat64","writeBigInt64","floatTestBed","isFloat32","writeAny","number.isInteger","math.abs","binary.BITS31","array.isArray","RleEncoder","writer","flushUintOptRleEncoder","UintOptRleEncoder","flushIntDiffOptRleEncoder","encodedDiff","IntDiffOptRleEncoder","StringEncoder","string","methodUnimplemented","unexpectedCase","getRandomValues","uint32","uuidv4Template","uuidv4","undefinedToNull","VarStoragePolyfill","_localStorage","usePolyfill","varStorage","forEach","obj","isEmpty","_k","every","hasProperty","equalFlat","val","deepFreeze","callAll","fs","isOneOf","params","computeParams","pargs","currParamName","parg","kv","string.fromCamelCase","hasParam","getVariable","conditions.undefinedToNull","storage.varStorage","hasConf","forceColor","f.isOneOf","supportsColor","Pair","right","mapToStyleString","map.map","BOLD","symbol.create","UNBOLD","BLUE","GREY","GREEN","RED","PURPLE","ORANGE","UNCOLOR","computeNoColorLoggingArgs","strBuilder","logArgs","_browserStyleMap","common.BOLD","pair.create","common.UNBOLD","common.BLUE","common.GREEN","common.GREY","common.RED","common.PURPLE","common.ORANGE","common.UNCOLOR","computeBrowserLoggingArgs","styles","currentStyle","style","dom.mapToStyleString","computeLoggingArgs","env.supportsColor","common.computeNoColorLoggingArgs","print","vconsoles","vc","warn","createIterator","iteratorFilter","iterator","filter","iteratorMap","fmap","done","DeleteItem","clock","DeleteSet","iterateDeletedStructs","transaction","ds","deletes","clientid","structs","lastStruct","clockState","del","iterateStructs","findIndexDS","dis","midindex","mid","midclock","isDeleted","sortAndMergeDeleteSet","dels","addToDeleteSet","client","writeDeleteSet","encoding.writeVarUint","dsitems","generateNewClientId","random.uint32","Doc","guid","random.uuidv4","collectionid","gc","gcFilter","autoLoad","shouldLoad","StructStore","promise.create","resolve","provideSyncedPromise","eventHandler","isSynced","transact","origin","TypeConstructor","AbstractType","Constr","YArray","YText","YMap","YXmlElement","YXmlFragment","subdoc","DSEncoderV1","encoding.createEncoder","encoding.toUint8Array","UpdateEncoderV1","info","encoding.writeUint8","encoding.writeVarString","isYKey","encoding.writeAny","encoding.writeVarUint8Array","embed","DSEncoderV2","error.unexpectedCase","UpdateEncoderV2","encoding.IntDiffOptRleEncoder","encoding.UintOptRleEncoder","encoding.RleEncoder","encoding.StringEncoder","encoding.writeUint8Array","writeStructs","startNewStructs","findIndexSS","firstStruct","writeClientsStructs","store","_sm","sm","getState","getStateVector","_clock","writeStructsFromTransaction","EventHandler","createEventHandler","addEventHandlerListener","removeEventHandlerListener","callEventHandlerListeners","arg0","arg1","f.callAll","ID","compareIDs","createID","findRootTypeKey","snapshot","splitSnapshotAffectedStructs","getItemCleanStart","_item","struct","addStruct","getItem","findIndexCleanStart","Item","splitItem","getItemCleanEnd","GC","replaceStruct","newStruct","clockStart","clockEnd","Transaction","local","writeUpdateMessageFromTransaction","map.any","addChangedTypeToTransaction","parentSub","tryToMergeWithLefts","pos","merged","tryGcDeleteSet","deleteItems","di","deleteItem","endDeleteItemClock","si","tryMergeDeleteSet","mostRightIndexToCheck","cleanupTransactions","transactionCleanups","mergeStructs","subs","itemtype","events","event1","event2","cleanupYTextAfterTransaction","beforeClock","firstChangePos","replacedStructPos","logging.print","logging.ORANGE","logging.BOLD","logging.UNBOLD","logging.RED","subdocsAdded","subdocsLoaded","subdocsRemoved","initialCall","finishCleanup","errorComputeChanges","YEvent","getPathTo","error.create","oldValue","array.last","added","deleted","packOp","path","warnPrematureAccess","logging.warn","maxSearchMarker","globalSearchMarkerTimestamp","ArraySearchMarker","refreshMarkerTimestamp","marker","overwriteMarker","markPosition","searchMarker","pm","findMarker","yarray","pindex","updateMarkerChanges","callTypeObservers","changedType","changedParentTypes","error.methodUnimplemented","_encoder","_parentSubs","typeListSlice","cs","typeListToArray","typeListForEach","typeListMap","typeListCreateIterator","currentContent","currentContentIndex","typeListGet","typeListInsertGenericsAfter","referenceItem","ownClientId","jsonContent","packJsonContent","ContentAny","ContentBinary","ContentDoc","ContentType","lengthExceeded","typeListInsertGenerics","typeListPushGenerics","maxMarker","currMarker","typeListDelete","startLength","typeMapDelete","typeMapSet","typeMapGet","typeMapGetAll","typeMapHas","typeMapGetAllSnapshot","createMapIterator","iterator.iteratorFilter","YArrayEvent","items","parentSubs","YArrayRefID","YMapEvent","ymap","iterator.iteratorMap","_value","YMapRefID","equalAttrs","object.equalFlat","ItemTextListPosition","currentAttributes","ContentFormat","updateCurrentAttributes","findNextPosition","findPosition","useSearchMarker","insertNegatedAttributes","currPos","negatedAttributes","nextFormat","minimizeAttributeChanges","insertAttributes","currentVal","insertText","_val","ContentString","ContentEmbed","formatText","iterationLoop","newlines","cleanupFormattingGap","curr","startAttributes","currAttributes","endFormats","cf","cleanups","reachedCurr","startAttrValue","cleanupContextlessFormattingGap","cleanupYTextFormatting","map.copy","needFullCleanup","afterClock","yText","deleteText","startAttrs","YTextEvent","ytext","sub","oldAttributes","insert","retain","deleteLen","addOp","object.isEmpty","object.assign","curVal","sanitize","prevSnapshot","computeYChange","packStr","addAttributes","computeDelta","cur","attributeName","attributeValue","YTextRefID","YXmlTreeWalker","nxt","first","YXmlEvent","xml","_document","hooks","binding","fragment","xmlType","refItem","pc","YXmlFragmentRefID","object.forEach","stringBuilder","keysLen","attrsString","yxml","YXmlElementRefID","AbstractStruct","encodingRef","structGCRefNumber","ContentDeleted","createDocFromOpts","opts","_offset","_right","_transaction","isDevMode","env.getVariable","object.deepFreeze","firstCharCode","leftItem","rightItem","rightOrigin","binary.BIT2","isMarked","binary.BIT4","binary.BIT1","doKeep","binary.BIT3","doDelete","parentItem","conflictingItems","itemsBeforeOrigin","parentGCd","binary.BITS5","binary.BIT6","ykey","glo","importIdentifier","Se","ki","_i","ae","wi","Ke","ts","Je","gn","hs","ct","da","la","ms","_t","gs","ge","ys","Si","Te","ua","yn","Rn","rn","Ct","bs","Wt","bn","hr","fa","pa","ha","Ln","ks","kn","_n","Cn","ma","zt","_s","xe","Cs","On","ga","xs","Ms","ya","Ts","ka","ba","Me","Oe","Ss","Ca","Es","ve","lt","Ns","xa","Dn","vt","Pt","Ma","As","Re","vn","ke","we","Fn","We","Ta","Sa","ws","Ps","Ea","sn","Un","Na","vs","ee","wa","Aa","Bn","Pa","$s","fe","va","oe","$a","Gt","Is","le","Ae","qs","Hn","Ia","qa","he","Ra","La","Vn","Rs","Oa","Da","Fa","be","Ua","ze","bt","Ba","Pi","Ha","jn","Va","ja","$e","Ls","Os","Ka","Kn","Jn","te","Ei","Ja","Ds","xn","Wn","Wa","za","tt","ln","qe","Ga","Ya","Xa","re","Rt","dr","se","Qa","Fs","Us","Za","mr","Bs","De","to","eo","Yt","no","Xt","Hs","Fe","so","ro","zn","Vs","ao","He","oo","gr","yr","Jt","Kt","Mn","br","Ni","Pe","kr","Gn","lr","_r","Ai","js","ie","Ks","Js","de","lo","co","Yn","ut","uo","fo","po","ho","zs","Ws","Ne","go","er","Cr","At","mo","yo","bo","ko","xr","Gs","_o","Xn","Ys","Qn","Co","xo","Qt","Mo","To","So","Eo","No","Tt","Ao","Ce","Xs","St","ye","Qs","Mr","vo","Po","wo","ft","Tn","Tr","ht","$o","Zn","Sr","Io","qo","Ro","Do","Uo","Bo","Ho","Lo","Oo","Fo","Vo","Zs","_e","Ko","jo","Jo","Wo","zo","Ue","Go","Yo","Xo","Qe","Qo","Gi","Yi","Xi","Qi","Zo","ec","tc","Ci","nc","ce","Ve","ei","Qr","tr","Zr","rc","sc","ti","ic","xi","Mi","Ti","dn","Bt","Er","cc","lc","dc","Et","nn","uc","fc","hc","Ht","mc","Ze","os","Pn","yc","tn","vi","bc","kc","_c","xc","Mc","Sc","Cc","Ge","ne","It","pe","Nr","Ar","Ic","ur","nr","ri","wr","Zt","Tc","ni","Ec","Nc","Ac","wc","Pc","$c","un","qc","Rc","Lc","Oc","Fc","Dc","Uc","kt","Bc","Hc","Vc","Ee","ii","rr","$n","sr","jc","mn","In","qn","Kc","Ft","$i","Jc","Wc","ea","zc","Gc","Zi","ji","Yc","Xc","Ii","Qc","Zc","cl","ol","tl","nl","rl","sl","il","al","rs","ll","dl","ul","fl","pl","qi","Ut","Ri","Li","hl","ml","gl","yl","bl","kl","_l","Pr","Cl","xl","Ml","Tl","vr","Rr","Oi","Nl","$r","Ir","Sl","qr","El","an","ir","or","Al","wl","cr","Pl","vl","Vt","$l","Il","es","ql","oi","Ie","Rl","Ll","Ol","Dl","Fl","Ul","Bl","nt","Hl","Vl","jl","Lr","Kl","ss","pn","Or","ci","Jl","yt","mt","jt","Wl","Yl","Xl","zl","Gl","En","gt","Ql","Zl","Xe","Ye","ed","td","nd","rd","ot","sd","ad","od","Dr","cd","ld","Fr","Ur","dd","Br","ud","Hr","Sn","Nn","Dt","Vr","fd","pd","hd","md","_d","gd","yd","kd","bd","jr","li","Cd","xd","Kr","Md","Td","Sd","Vi","Jr","Ed","Nd","Ad","je","An","wn","wd","Pd","vd","$d","Wr","Id","is","as","zr","qd","Rd","Ld","Od","ui","ue","Be","Di","Q","qt","on","Ji","Ki","us","Ru","fi","en","pi","Gr","Dd","hn","Fd","fr","pr","oa","Ud","Bd","Hd","hi","Vd","jd","Le","Kd","Jd","Yr","Fi","Wd","zd","Bi","mi","sa","ra","ta","na","gi","ia","aa","Gd","bi","Wi","zi","Yd","Hi","yi","Xr","Xd","Qd","ps","Zd","Ui","eu","tu","nu","FootnoteEditor","noteOps","onSave","noteKey","viewOptions","editorRef","editorParentRef","createRef","_event","_noteNodeKey","isCollapsed","getCaller","setCaller","GENERATOR_NOTE_CALLER","HIDDEN_NOTE_CALLER","timeout","EMPTY_USJ","handleSave","newNoteOps","editorInput","Editorial","makeKey","parentMarker","firstString","firstMarker","renderParagraphs","showMarkers","footnoteClosing","markerHierarchy","paragraphs","para","isLast","renderContent","allowUnmarkedText","footnotePart","classes","AlertCircle","renderMarkerObject","markerObj","FootnoteItem","footnote","layout","formatCaller","caller","isCallerFormatted","targetRef","remainingContent","footnoteOpening","baseClasses","FOOTNOTE_LIST_STRING_KEYS","FootnoteList","classNameForItems","footnotes","listId","selectedFootnote","suppressFormatting","onFootnoteSelected","handleFormatCaller","getFormatCallerFunction","handleFootnoteClick","initialFocusedIndex","focusedIndex","setFocusedIndex","handleListKeyDown","rowRefs","OccurrencesTable","occurrenceData","setScriptureReference","referenceHeaderText","occurrenceHeaderText","occurrences","uniqueOccurrences","occurrence","uniqueOccurrence","Checkbox","CheckboxPrimitive","Input","getSortingIcon","sortDirection","ArrowUpIcon","ArrowDownIcon","ArrowUpDownIcon","inventoryItemColumn","itemLabel","inventoryAdditionalItemColumn","additionalItemLabel","additionalItemIndex","inventoryCountColumn","countLabel","statusChangeHandler","changedItems","newStatus","approvedItems","onApprovedItemsChange","unapprovedItems","onUnapprovedItemsChange","newApprovedItems","validItem","newUnapprovedItems","unapprovedItem","inventoryStatusColumn","statusLabel","status","CircleCheckIcon","CircleXIcon","CircleHelpIcon","getLinesFromUSFM","getNumberFromUSFM","regex","getBookIdFromUSFM","getStatusForItem","INVENTORY_STRING_KEYS","filterItemData","itemData","statusFilter","textFilter","filteredItemData","processInventoryItems","inventoryItems","tableData","tableEntry","isString","newItem","Inventory","setVerseRef","additionalItemsLabels","scope","onScopeChange","areInventoryItemsLoading","allItemsText","approvedItemsText","unapprovedItemsText","unknownItemsText","scopeBookText","scopeChapterText","scopeVerseText","filterText","showAdditionalItemsText","noResultsText","showAdditionalItems","setShowAdditionalItems","setStatusFilter","setTextFilter","selectedItem","setSelectedItem","safeInventoryItems","reducedTableData","newTableData","firstItem","existingEntry","newTableEntry","filteredTableData","allColumns","numberOfAdditionalItems","additionalColumns","rowClickHandler","newSelection","handleScopeChange","handleStatusFilterChange","SIDEBAR_WIDTH","SIDEBAR_WIDTH_ICON","SidebarContext","useSidebar","SidebarProvider","defaultOpen","openProp","setOpenProp","_open","_setOpen","openState","toggleSidebar","directionAwareSide","Sidebar","collapsible","SidebarTrigger","PanelLeft","PanelRight","SidebarRail","SidebarInset","SidebarInput","SidebarHeader","SidebarFooter","SidebarSeparator","SidebarContent","SidebarGroup","SidebarGroupLabel","SidebarGroupAction","SidebarGroupContent","SidebarMenu","SidebarMenuItem","sidebarMenuButtonVariants","SidebarMenuButton","isActive","tooltip","button","SidebarMenuAction","showOnHover","SidebarMenuBadge","SidebarMenuSkeleton","showIcon","SidebarMenuSub","SidebarMenuSubItem","SidebarMenuSubButton","SettingsSidebar","extensionLabels","projectInfo","handleSelectSidebarItem","selectedSidebarItem","extensionsSidebarGroupLabel","projectsSidebarGroupLabel","buttonPlaceholderText","handleSelectItem","projectId","getProjectNameFromProjectId","project","getIsActive","selectedProjectName","ScrollText","SearchBar","onSearch","isFullWidth","inputRef","SettingsSidebarContentSearch","searchValue","scrBookColId","scrRefColId","typeColId","detailsColId","defaultScrRefColumnName","defaultScrBookGroupName","defaultTypeColumnName","defaultDetailsColumnName","getColumns","colInfo","showSourceColumn","showSrcCol","compareScrRefs","toRefOrRange","scriptureSelection","offsetStart","offsetEnd","scrRefToBBBCCCVVV","getRowKey","ScriptureResultsViewer","sources","showColumnHeaders","scriptureReferenceColumnName","scriptureBookGroupName","typeColumnName","detailsColumnName","onRowSelected","grouping","setGrouping","scriptureResults","getExpandedRowModel","getGroupedRowModel","selectedRows","selectedRow","scrBookGroupName","typeGroupName","groupingOptions","handleSelectChange","selectedGrouping","handleRowClick","getEvenOrOddBandingStyle","getIndent","groupingState","rowIndex","getBooksForSection","bookIds","isSectionFullySelected","SectionButton","availableBookIds","onToggle","sectionOtShortText","sectionNtShortText","sectionDcShortText","sectionExtraShortText","VISIBLE_BADGES_COUNT","MAX_VISIBLE_BADGES","availableBookInfo","onChangeSelectedBookIds","booksSelectedText","selectBooksText","searchBooksText","noBookFoundText","moreText","isBooksSelectorOpen","setIsBooksSelectorOpen","lastSelectedBookRef","lastKeyEventShiftKey","availableBooksIds","filteredBooksBySection","allBooks","matchingBooks","toggleBook","shiftKey","endIndex","booksInRange","shortname","handleKeyboardSelect","toggleSection","sectionBooks","SCOPE_SELECTOR_STRING_KEYS","ScopeSelector","availableScopes","onSelectedBookIdsChange","selectedTextText","currentVerseText","currentChapterText","scopeText","SCOPE_OPTIONS","displayedScopes","scopeId","DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS","getLocalizeKeyForScrollGroupId","ScrollGroupSelector","availableScrollGroupIds","scrollGroupId","onChangeScrollGroupId","localizedStringsDefaulted","localizedStringKey","localizedStringValue","newScrollGroupString","scrollGroupOptionId","SettingsList","SettingsListItem","primary","secondary","loadingMessage","SettingsListHeader","includeSeparator","getSubMenuGroupKeyForMenuItemId","MenuItemIcon","menuLabel","leading","getGroupContent","columnOrSubMenuKey","onSelectMenuItem","groupKey","TabDropdownMenu","menuData","tabLabel","MenuIcon","columnKey","TabToolbarContainer","TabToolbar","onSelectProjectMenuItem","onSelectViewInfoMenuItem","projectMenuData","tabViewMenuData","startAreaChildren","centerAreaChildren","endAreaChildren","menuButtonIcon","Menu","EllipsisVertical","TabFloatingMenu","VerticalTabs","TabsPrimitive","VerticalTabsList","VerticalTabsTrigger","VerticalTabsContent","TabNavigationContentSearch","tabList","searchPlaceholder","headerTitle","searchClassName","tab","MenubarMenu","MenubarPrimitive","MenubarSub","Menubar","MenubarTrigger","MenubarSubTrigger","MenubarSubContent","MenubarContent","alignOffset","MenubarItem","MenubarCheckboxItem","MenubarRadioItem","MenubarLabel","MenubarSeparator","simulateKeyPress","getMenubarContent","sortedGroupsForColumn","groupItems","itemsWithSeparator","PlatformMenubar","menubarRef","projectMenuRef","windowMenuRef","layoutMenuRef","helpMenuRef","getRefForColumn","useHotkeys","escKey","spaceKey","mutations","mutation","getToolbarOSReservedSpaceClassName","operatingSystem","Toolbar","appMenuAreaChildren","configAreaChildren","shouldUseAsAppDragArea","menubarVariant","containerRef","UiLanguageSelector","knownUiLanguages","primaryLanguage","fallbackLanguages","onLanguagesChange","onPrimaryLanguageChange","onFallbackLanguagesChange","fallbackLanguagesText","handleLanguageChange","lang","getLanguageDisplayName","uiLang","altName","SmartLabel","createLabel","createComplexLabel","Checklist","listItems","selectedListItems","handleSelectListItem","ResultsCard","cardKey","isDenied","isHidden","dropdownContent","additionalSelectedContent","accentColor","MoreHorizontal","Spinner","LoaderCircle","TextField","hasError","helperText","isRequired","defaultValue","onFocus","onBlur","ShadLabel","ShadInput","alertVariants","Alert","AlertTitle","AlertDescription","ContextMenu","ContextMenuPrimitive","ContextMenuTrigger","ContextMenuGroup","ContextMenuPortal","ContextMenuSub","ContextMenuRadioGroup","ContextMenuSubTrigger","ContextMenuSubContent","ContextMenuContent","ContextMenuItem","ContextMenuCheckboxItem","ContextMenuRadioItem","ContextMenuLabel","ContextMenuSeparator","ContextMenuShortcut","DrawerContext","Drawer","shouldScaleBackground","DrawerPrimitive","DrawerTrigger","DrawerPortal","DrawerClose","DrawerOverlay","DrawerContent","hideDrawerHandle","directionStyles","handleStyles","DrawerHeader","DrawerFooter","DrawerTitle","DrawerDescription","Progress","ProgressPrimitive","ResizablePanelGroup","ResizablePrimitive","ResizablePanel","ResizableHandle","withHandle","GripVertical","Sonner","Toaster","Slider","SliderPrimitive","Switch","SwitchPrimitives","Tabs","TabsList","TabsTrigger","TabsContent","Textarea","useEvent","unsubscriber","getUsePromiseOptionsDefaults","usePromise","promiseFactoryCallback","defaultValueRef","optionsDefaultedRef","setValue","setIsLoading","promiseIsCurrent","noopUnsubscriber","useEventAsync","unsubscribe","unsub"],"mappings":"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A,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MAEA,MAEA,MAEA,MAEA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MAEA,MAEA,MAEA,MAEA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,KACF,EAAGC,GAAI,CACL,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACF,EAAGC,GAAI,CACL,UACA,SACA,YACA,UACA,cACA,SACA,SACA,OACA,WACA,WACA,UACA,UACA,eACA,eACA,OACA,WACA,kBACA,MACA,SACA,WACA,eACA,gBACA,SACA,WACA,eACA,UACA,kBACA,QACA,OACA,OACA,UACA,QACA,QACA,QACA,WACA,YACA,SACA,YACA,UACA,UACA,OACA,OACA,OACA,OACA,SACA,gBACA,gBACA,YACA,YACA,cACA,aACA,kBACA,kBACA,YACA,YACA,QACA,WACA,UACA,QACA,UACA,UACA,SACA,SACA,SACA,OACA,aACA,QACA,SACA,eACA,oBACA,0BACA,SACA,qBACA,sBACA,UACA,qBACA,cACA,cACA,cACA,cACA,mBACA,mBACA,qBACA,YACA,OACA,oBAGA,uBACA,uBACA,sBACA,yBACA,wBACA,qBACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,eACA,cACA,eACA,oBACA,qBACA,0BACA,0BACA,eACA,eACA,YACA,gBACA,cACA,eACA,iBACA,wBACA,mBACA,WACA,QACA,aACA,aACA,aACA,2BACA,4BACA,YACF,EAAGC,GAAIC,GAAG,EACV,SAASC,GAAE,EAAG,EAAI,GAAI,CACpB,OAAO,IAAM,EAAI,EAAE,YAAa,GAAG,KAAKF,GAAIA,GAAE,CAAC,EAAI,CACrD,CACA,SAASG,GAAE,EAAG,CACZ,OAAOD,GAAE,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ACP6F,GAAA,SAAG7F,EAAI,SACM6F,GAAA,sBAAG7F,EAAI,sBACxB6F,GAAA,KAAG7F,EAAI,KACE6F,GAAA,cAAG7F,EAAI,cAE5B,IAAI4F,EAAYnB,GAAuB,EACtB,OAAAoB,GAAA,UAAGD,EAAU,UACFC,GAAA,qBAAGD,EAAU,qBACfC,GAAA,mBAAGD,EAAU,mBACXC,GAAA,qBAAGD,EAAU,6BCvCzC,MAAMhmC,GAAI,MAAOhC,GAAI,MAAOiK,GAAI,OAAO,OAAO,CAAE,KAAMjI,GAAG,QAAShC,GAAG,QAAS,CAAE,CAAA,CAAE,EAAGD,GAAI,CACvF,OACA,SACA,UACA,MACA,MACA,SACA,OACA,YACA,YACA,SACA,QACA,UACF,EACA,SAASa,GAAE2D,EAAG,CACZ,OAAO+R,GAAE,SAAS/R,CAAC,CACrB,CACK,MAAC+R,GAAI,CAER,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACF,EA8EM3V,GAAI,IAAKjB,GAAI,YACnB,SAAS6B,GAAEgD,EAAG,CACZ,MAAMiR,EAAIjR,EAAE,MAAM7E,EAAC,EACnB,GAAI8V,EAAE,MAAK,IAAO7U,GAChB,MAAM,IAAI,MAA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AGD,CAAC,CAAC,CACjC,CACA,SAAS+hF,GAAG,EAAG,CACb,GAAI,CAAC,EACH,MAAO,GACT,MAAMpsE,EAAI,EAAE,aAAa,aAAa,GAAK,GAC3C,OAAOmsE,GAAG,cAAcnsE,CAAC,GAAK,EAAE,UAAU,SAASmsE,GAAG,SAAS,CACjE,CACA,SAAS5gF,GAAE,EAAG,CACZ,OAAO,aAAa4gF,EACtB,CACA,MAAMI,GAAK,CAET,MACA,MACA,MACA,IACA,OACA,OACA,OACA,QACA,QACA,QAEA,MACA,OACA,OACA,OACA,OACA,KACA,MACA,MACA,KACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,OACA,OACA,KACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,OACA,QACA,QACA,KAEA,KACA,MACA,MACA,MACA,MACA,MACA,OACA,OACA,KACA,KACA,KACA,MACA,MACA,MACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,IACA,IACA,KACA,KACA,MACA,MACA,MACA,MAEA5D,GACA,IACA,KACA,MACA,KACA,KACA,KACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,KACA,MACA,KAGA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,MACA,KACA,IAEA,KACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,OACA,OACA,OACA,OAEA,IACF,EAAG6D,GAAK,EACR,MAAMC,WAAWpB,EAAAA,aAAG,CAClB,YAAY,EAAI1C,GAAI,EAAGt+E,EAAG,CACxB,MAAMA,CAAC,EACPK,GAAE,KAAM,UAAU,EAClBA,GAAE,KAAM,qBAAqB,EAC7B,KAAK,SAAW,EAAG,KAAK,oBAAsB,CAClD,CACE,OAAO,SAAU,CACf,MAAO,MACX,CACE,OAAO,MAAM,EAAG,CACd,KAAM,CAAE,SAAU,EAAG,oBAAqBL,EAAG,MAAO4B,CAAC,EAAK,EAC1D,OAAO,IAAIwgF,GAAG,EAAGpiF,EAAG4B,CAAC,CACzB,CACE,OAAO,cAAc,EAAG,CACtB,OAAO,IAAM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ACA,KACA,KACA,KACA,KACA,MACA,KACA,MACA,QACA,KACA,IACA,MACA,KACD,EACD,iBAAkB,CAAC,KAAM,KAAM,KAAM,OAAQ,KAAM,KAAM,KAAK,CACpE,CACG,EACD,IAAK,CACH,SAAUG,EAAE,aACZ,KAAMH,EAAE,UACR,YAAa,qFACb,aAAc,GACd,SAAU,MACX,EACD,GAAI,CACF,SAAUG,EAAE,aACZ,KAAMH,EAAE,UACR,YAAa,uCACb,aAAc,GACd,SAAU,CACR,aAAc,CAAC,KAAK,EACpB,UAAW,CAAC,IAAK,KAAM,IAAI,EAC3B,gBAAiB,CAAC,IAAI,EACtB,YAAa,CACX,KACA,KACA,KACA,KACA,KACA,MACA,KACA,MACA,QACA,KACA,IACA,MACA,KACD,EACD,iBAAkB,CAAC,KAAM,KAAM,KAAM,OAAQ,KAAM,KAAM,KAAK,CACpE,CACG,EACD,GAAI,CACF,SAAUG,EAAE,aACZ,KAAMH,EAAE,UACR,YAAa,mFACb,aAAc,GACd,SAAU,CACR,aAAc,CAAC,KAAK,EACpB,gBAAiB,CAAC,IAAI,EACtB,YAAa,CACX,KACA,KACA,KACA,KACA,KACA,MACA,KACA,MACA,QACA,KACA,IACA,MACA,KACD,EACD,iBAAkB,CAAC,KAAM,KAAM,KAAM,OAAQ,KAAM,KAAM,KAAK,CACpE,CACG,EACD,IAAK,CACH,SAAUG,EAAE,aACZ,KAAMH,EAAE,UACR,YAAa,iEACb,aAAc,GACd,SAAU,CACR,aAAc,CAAC,KAAK,EACpB,gBAAiB,CAAC,IAAI,EACtB,YAAa,CACX,KACA,KACA,KACA,KACA,KACA,MACA,KACA,MACA,QACA,KACA,IACA,MACA,KACD,EACD,iBAAkB,CAAC,KAAM,KAAM,KAAM,OAAQ,KAAM,KAAM,KAAK,CACpE,CACG,EACD,IAAK,CACH,SAAUG,EAAE,aACZ,KAAMH,EAAE,UACR,YAAa,yEACb,aAAc,GACd,SAAU,CACR,aAAc,CAAC,KAAK,EACpB,gBAAiB,CAAC,IAAI,EACtB,YAAa,CACX,KACA,KACA,KACA,KACA,KACA,MACA,KACA,MACA,QACA,KACA,IA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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","x_google_ignoreList":[4,25,26,27,31,32,33,34,35,36,37,38,39,40,51,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134]}