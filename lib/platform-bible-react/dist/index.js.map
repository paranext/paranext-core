{"version":3,"file":"index.js","sources":["../src/utils/shadcn-ui.util.ts","../src/components/shadcn-ui/input.tsx","../src/components/advanced/book-chapter-control/book-chapter-input.component.tsx","../src/context/menu.context.ts","../src/utils/dir-helper.util.ts","../src/components/shadcn-ui/dropdown-menu.tsx","../../../node_modules/@sillsdev/scripture/dist/index.es.js","../src/components/advanced/book-chapter-control/book-menu-item.component.tsx","../src/components/advanced/book-chapter-control/chapter-select.component.tsx","../src/components/advanced/book-chapter-control/book-chapter-control.component.tsx","../src/components/shadcn-ui/button.tsx","../src/components/shadcn-ui/label.tsx","../src/components/shadcn-ui/radio-group.tsx","../src/components/shadcn-ui/popover.tsx","../src/components/shadcn-ui/dialog.tsx","../src/components/shadcn-ui/command.tsx","../src/components/basics/combo-box.component.tsx","../src/components/basics/chapter-range-selector.component.tsx","../src/components/advanced/book-selector.component.tsx","../src/components/advanced/data-table/data-table-column-toggle.component.tsx","../src/components/shadcn-ui/select.tsx","../src/components/advanced/data-table/data-table-pagination.component.tsx","../src/components/shadcn-ui/table.tsx","../src/components/advanced/data-table/data-table.component.tsx","../src/components/advanced/extension-marketplace/markdown-renderer.component.tsx","../src/components/advanced/extension-marketplace/filter-dropdown.component.tsx","../src/components/advanced/extension-marketplace/more-info.component.tsx","../src/components/advanced/extension-marketplace/version-history.component.tsx","../src/components/advanced/extension-marketplace/footer.component.tsx","../src/components/shadcn-ui/badge.tsx","../src/components/advanced/multi-select-combo-box.component.tsx","../src/components/advanced/filter.component.tsx","../src/components/advanced/inventory/occurrences-table.component.tsx","../src/components/shadcn-ui/checkbox.tsx","../src/components/shadcn-ui/toggle.tsx","../src/components/shadcn-ui/toggle-group.tsx","../src/components/advanced/inventory/inventory-columns.tsx","../src/components/advanced/inventory/inventory-utils.ts","../src/components/advanced/inventory/inventory.component.tsx","../src/components/shadcn-ui/separator.tsx","../src/components/shadcn-ui/skeleton.tsx","../src/components/shadcn-ui/tooltip.tsx","../src/components/shadcn-ui/sidebar.tsx","../src/components/advanced/settings-components/settings-sidebar.component.tsx","../src/components/basics/search-bar.component.tsx","../src/components/advanced/settings-components/settings-sidebar-content-search.component.tsx","../src/components/advanced/scripture-results-viewer/scripture-results-viewer.component.tsx","../src/components/advanced/scope-selector/scope-selector-utils.ts","../src/components/advanced/scope-selector/book-item.component.tsx","../src/components/advanced/scope-selector/section-button.component.tsx","../src/components/advanced/scope-selector/book-selector.component.tsx","../src/components/advanced/scope-selector/scope-selector.component.tsx","../src/components/advanced/scroll-group-selector.component.tsx","../src/components/advanced/settings-components/settings-list.component.tsx","../src/components/advanced/menus/menu.util.ts","../src/components/advanced/menus/menu-icon.component.tsx","../src/components/advanced/menus/tab-dropdown-menu.component.tsx","../src/components/advanced/tab-toolbar.component.tsx","../src/components/basics/tabs-vertical.tsx","../src/components/advanced/tab-navigation-content-search.component.tsx","../src/components/shadcn-ui/menubar.tsx","../src/components/advanced/menus/platform-menubar.component.tsx","../src/components/advanced/toolbar.component.tsx","../src/components/advanced/ui-language-selector.component.tsx","../src/components/basics/smart-label.component.tsx","../src/components/basics/checklist.component.tsx","../src/components/basics/spinner.component.tsx","../src/components/basics/text-field.component.tsx","../src/components/basics/error-dump.component.tsx","../src/components/shadcn-ui/alert.tsx","../src/components/shadcn-ui/avatar.tsx","../src/components/shadcn-ui/card.tsx","../src/components/shadcn-ui/drawer.tsx","../src/components/shadcn-ui/progress.tsx","../src/components/shadcn-ui/sonner.tsx","../src/components/shadcn-ui/slider.tsx","../src/components/shadcn-ui/switch.tsx","../src/components/shadcn-ui/tabs.tsx","../src/components/shadcn-ui/textarea.tsx","../src/hooks/use-event.hook.ts","../src/hooks/use-promise.hook.ts","../src/hooks/use-event-async.hook.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { extendTailwindMerge } from 'tailwind-merge';\n\nconst twMergeCustom = extendTailwindMerge({ prefix: 'tw-' });\n\n/**\n * Tailwind and CSS class application helper function. Uses\n * [`clsx`](https://www.npmjs.com/package/clsx) to make it easy to apply classes conditionally using\n * object syntax, and uses [`tailwind-merge`](https://www.npmjs.com/package/tailwind-merge) to make\n * it easy to merge/overwrite Tailwind classes in a programmer-logic-friendly way.\n *\n * Note: `tailwind-merge` is configured to use the prefix `tw-`, so you must use the same prefix\n * with any Tailwind classes you use with this function to successfully overwrite other Tailwind\n * classes. `platform-bible-react` is configured to use `tw-` as its Tailwind prefix, so any\n * Tailwind classes you pass into `platform-bible-react` components will be compared using the `tw-`\n * prefix.\n *\n * This function was popularized by\n * [shadcn/ui](https://ui.shadcn.com/docs/installation/manual#add-a-cn-helper). See [ByteGrad's\n * explanation video](https://www.youtube.com/watch?v=re2JFITR7TI) for more information.\n *\n * @example\n *\n * ```typescript\n * const borderShouldBeBlue = true;\n * const textShouldBeRed = true;\n * const heightShouldBe20 = false;\n * const classString = cn(\n *   'tw-bg-primary tw-h-10 tw-text-primary-foreground',\n *   'tw-bg-secondary',\n *   {\n *     'tw-border-blue-500': borderShouldBeBlue,\n *     'tw-text-red-500': textShouldBeRed,\n *     'tw-h-20': heightShouldBe20,\n *   },\n *   'some-class',\n * );\n * ```\n *\n * The resulting `classString` is `'tw-h-10 tw-bg-secondary tw-border-blue-500 tw-text-red-500\n * some-class'`\n *\n * - Notice that `'tw-bg-secondary'`, specified later, overwrote `'tw-bg-primary'`, specified earlier,\n *   because they are Tailwind classes that affect the same css property\n * - Notice that `'tw-text-red-500'`, specified later, overwrote `'tw-text-primary-foreground'`,\n *   specified earlier, because they are Tailwind classes that affect the same css property\n * - Notice that `'tw-h-20'`, specified later, did not overwrite `'tw-h-10'`, specified earlier,\n *   because `'tw-h-20'` is part of a conditional class object and its value evaluated to `false`;\n *   therefore it was not applied\n * - Notice that `'some-class'` was applied. This function is not limited only to Tailwind classes.\n *\n *\n * @param inputs Class strings or `clsx` conditional class objects to merge. Tailwind classes\n *   specified later in the arguments overwrite similar Tailwind classes specified earlier in the\n *   arguments\n * @returns Class string containing all applicable classes from the arguments based on the rules\n *   described above\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMergeCustom(clsx(inputs));\n}\n","import React from 'react';\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Props for Input component\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/input}\n */\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\n/**\n * Input component displays a form input field or a component that looks like an input field. This\n * components is built and styled with Shadcn UI.\n *\n * @param InputProps\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/input}\n */\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'pr-twp tw-flex tw-h-10 tw-rounded-md tw-border tw-border-input tw-bg-background tw-px-3 tw-py-2 tw-text-sm tw-ring-offset-background file:tw-border-0 file:tw-bg-transparent file:tw-text-sm file:tw-font-medium file:tw-text-foreground placeholder:tw-text-muted-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50',\n          className,\n        )}\n        ref={ref}\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = 'Input';\n","import { FocusEventHandler, forwardRef, KeyboardEvent, MouseEventHandler, useState } from 'react';\nimport { Check, CircleSlash } from 'lucide-react';\nimport { Input } from '@/components/shadcn-ui/input';\nimport { cn } from '@/utils/shadcn-ui.util';\n\nexport type BookChapterInputProps = {\n  handleSearch: (searchString: string) => void;\n  handleKeyDown: (event: KeyboardEvent<HTMLInputElement>) => void;\n  handleOnClick: MouseEventHandler<HTMLInputElement>;\n  handleSubmit: () => void;\n  onFocus?: FocusEventHandler<HTMLInputElement>;\n  onBlur?: FocusEventHandler<HTMLInputElement>;\n  value: string;\n  placeholder: string;\n  className?: string;\n  hasTopMatch?: boolean;\n  hasNoMatches?: boolean;\n  hasInputChanged?: boolean;\n};\n\n// Shadcn Input sets type to \"button\"- HAVE to prop spread before setting type\nexport const BookChapterInput = forwardRef<HTMLInputElement, BookChapterInputProps>(\n  (\n    {\n      handleSearch,\n      handleKeyDown,\n      handleOnClick,\n      handleSubmit,\n      className,\n      hasTopMatch,\n      hasNoMatches,\n      hasInputChanged,\n      ...props\n    }: BookChapterInputProps,\n    ref,\n  ) => {\n    const [isFocused, setIsFocused] = useState(false);\n\n    return (\n      <div className=\"tw-relative tw-max-w-48\">\n        <Input\n          {...props}\n          type=\"text\"\n          className={cn(\n            'tw-relative tw-w-full tw-min-w-0 tw-flex-shrink tw-grow tw-basis-32 tw-gap-2.5 tw-text-ellipsis tw-rounded-lg tw-border tw-border-solid tw-bg-background tw-py-2 !tw-pe-10 tw-ps-4 tw-font-medium tw-text-foreground tw-shadow-none tw-outline-none',\n            hasInputChanged &&\n              (hasTopMatch\n                ? 'focus-visible:tw-ring-green-600'\n                : hasNoMatches && 'focus-visible:tw-ring-destructive'),\n            className,\n          )}\n          onChange={(event) => handleSearch(event.target.value)}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter') {\n              handleSubmit();\n              e.preventDefault();\n            } else handleKeyDown(e);\n          }}\n          onClick={handleOnClick}\n          onFocus={(e) => {\n            setIsFocused(true);\n            props.onFocus?.(e);\n          }}\n          onBlur={(e) => {\n            setIsFocused(false);\n            props.onBlur?.(e);\n          }}\n          ref={ref}\n        />\n        {isFocused &&\n          hasInputChanged &&\n          (hasTopMatch ? (\n            <Check className=\"tw-absolute tw-right-2 tw-top-1/2 tw-h-4 tw-w-4 tw--translate-y-1/2 tw-text-green-600\" />\n          ) : (\n            hasNoMatches && (\n              <CircleSlash className=\"tw-absolute tw-right-2 tw-top-1/2 tw-h-4 tw-w-4 tw--translate-y-1/2 tw-text-destructive\" />\n            )\n          ))}\n      </div>\n    );\n  },\n);\n\nexport default BookChapterInput;\n","import { cva } from 'class-variance-authority';\nimport { createContext, useContext } from 'react';\n\nexport type MenuContextProps = {\n  variant?: 'default' | 'muted';\n};\n\nexport const MenuContext = createContext<MenuContextProps | undefined>(undefined);\n\nexport function useMenuContext() {\n  const context = useContext(MenuContext);\n  if (!context) {\n    throw new Error('useMenuContext must be used within a MenuContext.Provider.');\n  }\n\n  return context;\n}\n\nexport const menuVariants = cva('', {\n  variants: {\n    variant: {\n      default: '',\n      muted:\n        'hover:tw-bg-muted hover:tw-text-foreground focus:tw-bg-muted focus:tw-text-foreground data-[state=open]:tw-bg-muted data-[state=open]:tw-text-foreground',\n    },\n  },\n  defaultVariants: {\n    variant: 'default',\n  },\n});\n","/** Text and layout direction */\nexport type Direction = 'rtl' | 'ltr';\n\nconst STORAGE_KEY: string = 'layoutDirection';\n\n/** Read layout direction from localStorage or return 'ltr' */\nexport function readDirection(): Direction {\n  const retrieved = localStorage.getItem(STORAGE_KEY);\n  if (retrieved === 'rtl') {\n    return retrieved;\n  }\n  return 'ltr';\n}\n\n/** Write layout direction to localStorage */\nexport function persistDirection(dir: Direction): void {\n  localStorage.setItem(STORAGE_KEY, dir);\n}\n","import {\n  MenuContext,\n  MenuContextProps,\n  menuVariants,\n  useMenuContext,\n} from '@/context/menu.context';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\nimport React from 'react';\n\n/**\n * Dropdown Menu components providing accessible dropdown menus and submenus. These components are\n * built on Radix UI primitives and styled with Shadcn UI. See Shadcn UI Documentation:\n * https://ui.shadcn.com/docs/components/dropdown-menu See Radix UI Documentation:\n * https://www.radix-ui.com/primitives/docs/components/dropdown-menu\n */\n/* #region CUSTOM Add variant prop to support different styles */\nexport type DropdownMenuProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Root\n> & {\n  variant?: MenuContextProps['variant'];\n};\n/* #endregion CUSTOM */\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuSubTriggerProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.SubTrigger\n> & {\n  className?: string;\n  inset?: boolean;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuSubContentProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.SubContent\n> & {\n  className?: string;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuContentProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Content\n> & {\n  className?: string;\n  sideOffset?: number;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuItemProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Item\n> & {\n  className?: string;\n  inset?: boolean;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuCheckboxItemProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.CheckboxItem\n> & {\n  className?: string;\n  checked?: boolean;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuRadioItemProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.RadioItem\n> & {\n  className?: string;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuLabelProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Label\n> & {\n  className?: string;\n  inset?: boolean;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuSeparatorProps = React.ComponentPropsWithoutRef<\n  typeof DropdownMenuPrimitive.Separator\n> & {\n  className?: string;\n};\n\n/** @inheritdoc DropdownMenuProps */\nexport type DropdownMenuShortcutProps = React.HTMLAttributes<HTMLSpanElement> & {\n  className?: string;\n};\n\n/* #region CUSTOM Provide context to add variants */\n/** @inheritdoc DropdownMenuProps */\nexport function DropdownMenu({ variant = 'default', ...props }: DropdownMenuProps) {\n  const contextValue = React.useMemo<MenuContextProps>(\n    () => ({\n      variant,\n    }),\n    [variant],\n  );\n  return (\n    <MenuContext.Provider value={contextValue}>\n      <DropdownMenuPrimitive.Root {...props} />\n    </MenuContext.Provider>\n  );\n}\n/* #endregion CUSTOM */\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  DropdownMenuSubTriggerProps\n>(({ className, inset, children, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      ref={ref}\n      className={cn(\n        'tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-accent data-[state=open]:tw-bg-accent',\n        inset && 'tw-pl-8',\n        className,\n        menuVariants({ variant: context.variant }), // CUSTOM use context to add variants\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRight className=\"tw-ml-auto tw-h-4 tw-w-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  );\n});\nDropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  DropdownMenuSubContentProps\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      'pr-twp tw-z-50 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-lg data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nDropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;\n\n/* TODO: bug in shadcn component: DropdownMenuContent does not support a dir prop.\nFor the content we can work around this by adding a div with dir, but that would not cause\nthe scrollbar to appear left in an rtl layout (e.g. see book-chapter-control.component) */\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  DropdownMenuContentProps\n>(({ className, sideOffset = 4, children, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        ref={ref}\n        sideOffset={sideOffset}\n        className={cn(\n          /* adding pr-twp because the dropdown content is added to the dom as a sibling to the app root */\n          'pr-twp tw-z-50 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-md data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n          className,\n        )}\n        {...props}\n      >\n        <div dir={dir}>{children}</div>\n      </DropdownMenuPrimitive.Content>\n    </DropdownMenuPrimitive.Portal>\n  );\n});\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  DropdownMenuItemProps\n>(({ className, inset, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <DropdownMenuPrimitive.Item\n      ref={ref}\n      className={cn(\n        // removed: tw-relative focus:tw-text-accent-foreground\n        'tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-accent data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        inset && 'tw-pl-8',\n        className,\n        menuVariants({ variant: context.variant }), // CUSTOM use context to add variants\n      )}\n      {...props}\n      dir={dir}\n    />\n  );\n});\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  DropdownMenuCheckboxItemProps\n>(({ className, children, checked, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pe-2 tw-ps-8 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        className,\n        menuVariants({ variant: context.variant }), // CUSTOM use context to add variants\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"tw-absolute tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center ltr:tw-left-2 rtl:tw-right-2\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <Check className=\"tw-h-4 tw-w-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  );\n});\nDropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  DropdownMenuRadioItemProps\n>(({ className, children, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pe-2 tw-ps-8 tw-text-sm tw-outline-none tw-transition-colors focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        className,\n        menuVariants({ variant: context.variant }), // CUSTOM use context to add variants\n      )}\n      {...props}\n    >\n      <span className=\"tw-absolute tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center ltr:tw-left-2 rtl:tw-right-2\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <Circle className=\"tw-h-2 tw-w-2 tw-fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  );\n});\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  DropdownMenuLabelProps\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn('tw-px-2 tw-py-1.5 tw-text-sm tw-font-semibold', inset && 'tw-pl-8', className)}\n    {...props}\n  />\n));\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport const DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  DropdownMenuSeparatorProps\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-my-1 tw-h-px tw-bg-muted', className)}\n    {...props}\n  />\n));\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;\n\n/** @inheritdoc DropdownMenuProps */\nexport function DropdownMenuShortcut({ className, ...props }: DropdownMenuShortcutProps) {\n  return (\n    <span\n      className={cn('tw-ms-auto tw-text-xs tw-tracking-widest tw-opacity-60', className)}\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...props}\n    />\n  );\n}\nDropdownMenuShortcut.displayName = 'DropdownMenuShortcut';\n","var P = Object.defineProperty;\nvar R = (t, e, s) => e in t ? P(t, e, { enumerable: !0, configurable: !0, writable: !0, value: s }) : t[e] = s;\nvar n = (t, e, s) => R(t, typeof e != \"symbol\" ? e + \"\" : e, s);\nclass _ {\n  constructor() {\n    n(this, \"books\");\n    n(this, \"firstSelectedBookNum\");\n    n(this, \"lastSelectedBookNum\");\n    n(this, \"count\");\n    n(this, \"selectedBookNumbers\");\n    n(this, \"selectedBookIds\");\n  }\n}\nconst N = [\n  \"GEN\",\n  \"EXO\",\n  \"LEV\",\n  \"NUM\",\n  \"DEU\",\n  \"JOS\",\n  \"JDG\",\n  \"RUT\",\n  \"1SA\",\n  \"2SA\",\n  // 10\n  \"1KI\",\n  \"2KI\",\n  \"1CH\",\n  \"2CH\",\n  \"EZR\",\n  \"NEH\",\n  \"EST\",\n  \"JOB\",\n  \"PSA\",\n  \"PRO\",\n  // 20\n  \"ECC\",\n  \"SNG\",\n  \"ISA\",\n  \"JER\",\n  \"LAM\",\n  \"EZK\",\n  \"DAN\",\n  \"HOS\",\n  \"JOL\",\n  \"AMO\",\n  // 30\n  \"OBA\",\n  \"JON\",\n  \"MIC\",\n  \"NAM\",\n  \"HAB\",\n  \"ZEP\",\n  \"HAG\",\n  \"ZEC\",\n  \"MAL\",\n  \"MAT\",\n  // 40\n  \"MRK\",\n  \"LUK\",\n  \"JHN\",\n  \"ACT\",\n  \"ROM\",\n  \"1CO\",\n  \"2CO\",\n  \"GAL\",\n  \"EPH\",\n  \"PHP\",\n  // 50\n  \"COL\",\n  \"1TH\",\n  \"2TH\",\n  \"1TI\",\n  \"2TI\",\n  \"TIT\",\n  \"PHM\",\n  \"HEB\",\n  \"JAS\",\n  \"1PE\",\n  // 60\n  \"2PE\",\n  \"1JN\",\n  \"2JN\",\n  \"3JN\",\n  \"JUD\",\n  \"REV\",\n  \"TOB\",\n  \"JDT\",\n  \"ESG\",\n  \"WIS\",\n  // 70\n  \"SIR\",\n  \"BAR\",\n  \"LJE\",\n  \"S3Y\",\n  \"SUS\",\n  \"BEL\",\n  \"1MA\",\n  \"2MA\",\n  \"3MA\",\n  \"4MA\",\n  // 80\n  \"1ES\",\n  \"2ES\",\n  \"MAN\",\n  \"PS2\",\n  \"ODA\",\n  \"PSS\",\n  \"JSA\",\n  // actual variant text for JOS, now in LXA text\n  \"JDB\",\n  // actual variant text for JDG, now in LXA text\n  \"TBS\",\n  // actual variant text for TOB, now in LXA text\n  \"SST\",\n  // actual variant text for SUS, now in LXA text // 90\n  \"DNT\",\n  // actual variant text for DAN, now in LXA text\n  \"BLT\",\n  // actual variant text for BEL, now in LXA text\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\",\n  \"FRT\",\n  // 100\n  \"BAK\",\n  \"OTH\",\n  \"3ES\",\n  // Used previously but really should be 2ES\n  \"EZA\",\n  // Used to be called 4ES, but not actually in any known project\n  \"5EZ\",\n  // Used to be called 5ES, but not actually in any known project\n  \"6EZ\",\n  // Used to be called 6ES, but not actually in any known project\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  // 110\n  \"NDX\",\n  \"DAG\",\n  \"PS3\",\n  \"2BA\",\n  \"LBA\",\n  \"JUB\",\n  \"ENO\",\n  \"1MQ\",\n  \"2MQ\",\n  \"3MQ\",\n  // 120\n  \"REP\",\n  \"4BA\",\n  \"LAO\"\n], B = [\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\",\n  \"FRT\",\n  \"BAK\",\n  \"OTH\",\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  \"NDX\"\n], O = [\n  \"Genesis\",\n  \"Exodus\",\n  \"Leviticus\",\n  \"Numbers\",\n  \"Deuteronomy\",\n  \"Joshua\",\n  \"Judges\",\n  \"Ruth\",\n  \"1 Samuel\",\n  \"2 Samuel\",\n  \"1 Kings\",\n  \"2 Kings\",\n  \"1 Chronicles\",\n  \"2 Chronicles\",\n  \"Ezra\",\n  \"Nehemiah\",\n  \"Esther (Hebrew)\",\n  \"Job\",\n  \"Psalms\",\n  \"Proverbs\",\n  \"Ecclesiastes\",\n  \"Song of Songs\",\n  \"Isaiah\",\n  \"Jeremiah\",\n  \"Lamentations\",\n  \"Ezekiel\",\n  \"Daniel (Hebrew)\",\n  \"Hosea\",\n  \"Joel\",\n  \"Amos\",\n  \"Obadiah\",\n  \"Jonah\",\n  \"Micah\",\n  \"Nahum\",\n  \"Habakkuk\",\n  \"Zephaniah\",\n  \"Haggai\",\n  \"Zechariah\",\n  \"Malachi\",\n  \"Matthew\",\n  \"Mark\",\n  \"Luke\",\n  \"John\",\n  \"Acts\",\n  \"Romans\",\n  \"1 Corinthians\",\n  \"2 Corinthians\",\n  \"Galatians\",\n  \"Ephesians\",\n  \"Philippians\",\n  \"Colossians\",\n  \"1 Thessalonians\",\n  \"2 Thessalonians\",\n  \"1 Timothy\",\n  \"2 Timothy\",\n  \"Titus\",\n  \"Philemon\",\n  \"Hebrews\",\n  \"James\",\n  \"1 Peter\",\n  \"2 Peter\",\n  \"1 John\",\n  \"2 John\",\n  \"3 John\",\n  \"Jude\",\n  \"Revelation\",\n  \"Tobit\",\n  \"Judith\",\n  \"Esther Greek\",\n  \"Wisdom of Solomon\",\n  \"Sirach (Ecclesiasticus)\",\n  \"Baruch\",\n  \"Letter of Jeremiah\",\n  \"Song of 3 Young Men\",\n  \"Susanna\",\n  \"Bel and the Dragon\",\n  \"1 Maccabees\",\n  \"2 Maccabees\",\n  \"3 Maccabees\",\n  \"4 Maccabees\",\n  \"1 Esdras (Greek)\",\n  \"2 Esdras (Latin)\",\n  \"Prayer of Manasseh\",\n  \"Psalm 151\",\n  \"Odes\",\n  \"Psalms of Solomon\",\n  // WARNING, if you change the spelling of the *obsolete* tag be sure to update\n  // IsObsolete routine\n  \"Joshua A. *obsolete*\",\n  \"Judges B. *obsolete*\",\n  \"Tobit S. *obsolete*\",\n  \"Susanna Th. *obsolete*\",\n  \"Daniel Th. *obsolete*\",\n  \"Bel Th. *obsolete*\",\n  \"Extra A\",\n  \"Extra B\",\n  \"Extra C\",\n  \"Extra D\",\n  \"Extra E\",\n  \"Extra F\",\n  \"Extra G\",\n  \"Front Matter\",\n  \"Back Matter\",\n  \"Other Matter\",\n  \"3 Ezra *obsolete*\",\n  \"Apocalypse of Ezra\",\n  \"5 Ezra (Latin Prologue)\",\n  \"6 Ezra (Latin Epilogue)\",\n  \"Introduction\",\n  \"Concordance \",\n  \"Glossary \",\n  \"Topical Index\",\n  \"Names Index\",\n  \"Daniel Greek\",\n  \"Psalms 152-155\",\n  \"2 Baruch (Apocalypse)\",\n  \"Letter of Baruch\",\n  \"Jubilees\",\n  \"Enoch\",\n  \"1 Meqabyan\",\n  \"2 Meqabyan\",\n  \"3 Meqabyan\",\n  \"Reproof (Proverbs 25-31)\",\n  \"4 Baruch (Rest of Baruch)\",\n  \"Laodiceans\"\n], S = K();\nfunction g(t, e = !0) {\n  return e && (t = t.toUpperCase()), t in S ? S[t] : 0;\n}\nfunction k(t) {\n  return g(t) > 0;\n}\nfunction x(t) {\n  const e = typeof t == \"string\" ? g(t) : t;\n  return e >= 40 && e <= 66;\n}\nfunction T(t) {\n  return (typeof t == \"string\" ? g(t) : t) <= 39;\n}\nfunction X(t) {\n  return t <= 66;\n}\nfunction V(t) {\n  const e = typeof t == \"string\" ? g(t) : t;\n  return w(e) && !X(e);\n}\nfunction* L() {\n  for (let t = 1; t <= N.length; t++) yield t;\n}\nconst G = 1, A = N.length;\nfunction H() {\n  return [\"XXA\", \"XXB\", \"XXC\", \"XXD\", \"XXE\", \"XXF\", \"XXG\"];\n}\nfunction C(t, e = \"***\") {\n  const s = t - 1;\n  return s < 0 || s >= N.length ? e : N[s];\n}\nfunction I(t) {\n  return t <= 0 || t > A ? \"******\" : O[t - 1];\n}\nfunction y(t) {\n  return I(g(t));\n}\nfunction w(t) {\n  const e = typeof t == \"number\" ? C(t) : t;\n  return k(e) && !B.includes(e);\n}\nfunction q(t) {\n  const e = typeof t == \"number\" ? C(t) : t;\n  return k(e) && B.includes(e);\n}\nfunction U(t) {\n  return O[t - 1].includes(\"*obsolete*\");\n}\nfunction K() {\n  const t = {};\n  for (let e = 0; e < N.length; e++)\n    t[N[e]] = e + 1;\n  return t;\n}\nconst m = {\n  allBookIds: N,\n  nonCanonicalIds: B,\n  bookIdToNumber: g,\n  isBookIdValid: k,\n  isBookNT: x,\n  isBookOT: T,\n  isBookOTNT: X,\n  isBookDC: V,\n  allBookNumbers: L,\n  firstBook: G,\n  lastBook: A,\n  extraBooks: H,\n  bookNumberToId: C,\n  bookNumberToEnglishName: I,\n  bookIdToEnglishName: y,\n  isCanonical: w,\n  isExtraMaterial: q,\n  isObsolete: U\n};\nvar l = /* @__PURE__ */ ((t) => (t[t.Unknown = 0] = \"Unknown\", t[t.Original = 1] = \"Original\", t[t.Septuagint = 2] = \"Septuagint\", t[t.Vulgate = 3] = \"Vulgate\", t[t.English = 4] = \"English\", t[t.RussianProtestant = 5] = \"RussianProtestant\", t[t.RussianOrthodox = 6] = \"RussianOrthodox\", t))(l || {});\nconst h = class h {\n  // private versInfo: Versification;\n  constructor(e) {\n    n(this, \"name\");\n    n(this, \"fullPath\");\n    n(this, \"isPresent\");\n    n(this, \"hasVerseSegments\");\n    n(this, \"isCustomized\");\n    n(this, \"baseVersification\");\n    n(this, \"scriptureBooks\");\n    n(this, \"_type\");\n    if (e == null)\n      throw new Error(\"Argument undefined\");\n    typeof e == \"string\" ? (this.name = e, this._type = l[e]) : (this._type = e, this.name = l[e]);\n  }\n  get type() {\n    return this._type;\n  }\n  equals(e) {\n    return !e.type || !this.type ? !1 : e.type === this.type;\n  }\n};\nn(h, \"Original\", new h(l.Original)), n(h, \"Septuagint\", new h(l.Septuagint)), n(h, \"Vulgate\", new h(l.Vulgate)), n(h, \"English\", new h(l.English)), n(h, \"RussianProtestant\", new h(l.RussianProtestant)), n(h, \"RussianOrthodox\", new h(l.RussianOrthodox));\nlet c = h;\nfunction E(t, e) {\n  const s = e[0];\n  for (let r = 1; r < e.length; r++)\n    t = t.split(e[r]).join(s);\n  return t.split(s);\n}\nvar D = /* @__PURE__ */ ((t) => (t[t.Valid = 0] = \"Valid\", t[t.UnknownVersification = 1] = \"UnknownVersification\", t[t.OutOfRange = 2] = \"OutOfRange\", t[t.VerseOutOfOrder = 3] = \"VerseOutOfOrder\", t[t.VerseRepeated = 4] = \"VerseRepeated\", t))(D || {});\nconst i = class i {\n  constructor(e, s, r, a) {\n    /** Not yet implemented. */\n    n(this, \"firstChapter\");\n    /** Not yet implemented. */\n    n(this, \"lastChapter\");\n    /** Not yet implemented. */\n    n(this, \"lastVerse\");\n    /** Not yet implemented. */\n    n(this, \"hasSegmentsDefined\");\n    /** Not yet implemented. */\n    n(this, \"text\");\n    /** Not yet implemented. */\n    n(this, \"BBBCCCVVVS\");\n    /** Not yet implemented. */\n    n(this, \"longHashCode\");\n    /** The versification of the reference. */\n    n(this, \"versification\");\n    n(this, \"rtlMark\", \"‏\");\n    n(this, \"_bookNum\", 0);\n    n(this, \"_chapterNum\", 0);\n    n(this, \"_verseNum\", 0);\n    n(this, \"_verse\");\n    if (r == null && a == null)\n      if (e != null && typeof e == \"string\") {\n        const o = e, u = s != null && s instanceof c ? s : void 0;\n        this.setEmpty(u), this.parse(o);\n      } else if (e != null && typeof e == \"number\") {\n        const o = s != null && s instanceof c ? s : void 0;\n        this.setEmpty(o), this._verseNum = e % i.chapterDigitShifter, this._chapterNum = Math.floor(\n          e % i.bookDigitShifter / i.chapterDigitShifter\n        ), this._bookNum = Math.floor(e / i.bookDigitShifter);\n      } else if (s == null)\n        if (e != null && e instanceof i) {\n          const o = e;\n          this._bookNum = o.bookNum, this._chapterNum = o.chapterNum, this._verseNum = o.verseNum, this._verse = o.verse, this.versification = o.versification;\n        } else {\n          if (e == null) return;\n          const o = e instanceof c ? e : i.defaultVersification;\n          this.setEmpty(o);\n        }\n      else\n        throw new Error(\"VerseRef constructor not supported.\");\n    else if (e != null && s != null && r != null)\n      if (typeof e == \"string\" && typeof s == \"string\" && typeof r == \"string\")\n        this.setEmpty(a), this.updateInternal(e, s, r);\n      else if (typeof e == \"number\" && typeof s == \"number\" && typeof r == \"number\")\n        this._bookNum = e, this._chapterNum = s, this._verseNum = r, this.versification = a ?? i.defaultVersification;\n      else\n        throw new Error(\"VerseRef constructor not supported.\");\n    else\n      throw new Error(\"VerseRef constructor not supported.\");\n  }\n  /**\n   * Determines if the verse string is in a valid format (does not consider versification).\n   */\n  static isVerseParseable(e) {\n    return e.length > 0 && \"0123456789\".includes(e[0]) && !e.endsWith(this.verseRangeSeparator) && !e.endsWith(this.verseSequenceIndicator);\n  }\n  /**\n   * Tries to parse the specified string into a verse reference.\n   * @param str - The string to attempt to parse.\n   * @returns success: `true` if the specified string was successfully parsed, `false` otherwise.\n   * @returns verseRef: The result of the parse if successful, or empty VerseRef if it failed\n   */\n  static tryParse(e) {\n    let s;\n    try {\n      return s = new i(e), { success: !0, verseRef: s };\n    } catch (r) {\n      if (r instanceof v)\n        return s = new i(), { success: !1, verseRef: s };\n      throw r;\n    }\n  }\n  /**\n   * Gets the reference as a comparable integer where the book, chapter, and verse each occupy 3\n   * digits.\n   * @param bookNum - Book number (this is 1-based, not an index).\n   * @param chapterNum - Chapter number.\n   * @param verseNum - Verse number.\n   * @returns The reference as a comparable integer where the book, chapter, and verse each occupy 3\n   * digits.\n   */\n  static getBBBCCCVVV(e, s, r) {\n    return e % i.bcvMaxValue * i.bookDigitShifter + (s >= 0 ? s % i.bcvMaxValue * i.chapterDigitShifter : 0) + (r >= 0 ? r % i.bcvMaxValue : 0);\n  }\n  /**\n   * Deserializes a serialized VerseRef.\n   * @param serializedVerseRef - Serialized VerseRef to create from.\n   * @returns the deserialized VerseRef.\n   */\n  static fromJSON(e) {\n    const { book: s, chapterNum: r, verseNum: a, verse: o, versificationStr: u } = e, f = o || a.toString();\n    let d;\n    return u && (d = new c(u)), s ? new i(s, r.toString(), f, d) : new i();\n  }\n  /**\n   * Parses a verse string and gets the leading numeric portion as a number.\n   * @param verseStr - verse string to parse\n   * @returns true if the entire string could be parsed as a single, simple verse number (1-999);\n   *    false if the verse string represented a verse bridge, contained segment letters, or was invalid\n   */\n  static tryGetVerseNum(e) {\n    let s;\n    if (!e)\n      return s = -1, { success: !0, vNum: s };\n    s = 0;\n    let r;\n    for (let a = 0; a < e.length; a++) {\n      if (r = e[a], r < \"0\" || r > \"9\")\n        return a === 0 && (s = -1), { success: !1, vNum: s };\n      if (s = s * 10 + +r - 0, s > i.bcvMaxValue)\n        return s = -1, { success: !1, vNum: s };\n    }\n    return { success: !0, vNum: s };\n  }\n  /**\n   * Checks to see if a VerseRef hasn't been set - all values are the default.\n   */\n  get isDefault() {\n    return this.bookNum === 0 && this.chapterNum === 0 && this.verseNum === 0 && this.versification == null;\n  }\n  /**\n   * Gets whether the verse contains multiple verses.\n   */\n  get hasMultiple() {\n    return this._verse != null && (this._verse.includes(i.verseRangeSeparator) || this._verse.includes(i.verseSequenceIndicator));\n  }\n  /**\n   * Gets or sets the book of the reference. Book is the 3-letter abbreviation in capital letters,\n   * e.g. `'MAT'`.\n   */\n  get book() {\n    return m.bookNumberToId(this.bookNum, \"\");\n  }\n  set book(e) {\n    this.bookNum = m.bookIdToNumber(e);\n  }\n  /**\n   * Gets or sets the chapter of the reference,. e.g. `'3'`.\n   */\n  get chapter() {\n    return this.isDefault || this._chapterNum < 0 ? \"\" : this._chapterNum.toString();\n  }\n  set chapter(e) {\n    const s = +e;\n    this._chapterNum = Number.isInteger(s) ? s : -1;\n  }\n  /**\n   * Gets or sets the verse of the reference, including range, segments, and sequences, e.g. `'4'`,\n   * or `'4b-5a, 7'`.\n   */\n  get verse() {\n    return this._verse != null ? this._verse : this.isDefault || this._verseNum < 0 ? \"\" : this._verseNum.toString();\n  }\n  set verse(e) {\n    const { success: s, vNum: r } = i.tryGetVerseNum(e);\n    this._verse = s ? void 0 : e.replace(this.rtlMark, \"\"), this._verseNum = r, !(this._verseNum >= 0) && ({ vNum: this._verseNum } = i.tryGetVerseNum(this._verse));\n  }\n  /**\n   * Get or set Book based on book number, e.g. `42`.\n   */\n  get bookNum() {\n    return this._bookNum;\n  }\n  set bookNum(e) {\n    if (e <= 0 || e > m.lastBook)\n      throw new v(\n        \"BookNum must be greater than zero and less than or equal to last book\"\n      );\n    this._bookNum = e;\n  }\n  /**\n   * Gets or sets the chapter number, e.g. `3`. `-1` if not valid.\n   */\n  get chapterNum() {\n    return this._chapterNum;\n  }\n  set chapterNum(e) {\n    this.chapterNum = e;\n  }\n  /**\n   * Gets or sets verse start number, e.g. `4`. `-1` if not valid.\n   */\n  get verseNum() {\n    return this._verseNum;\n  }\n  set verseNum(e) {\n    this._verseNum = e;\n  }\n  /**\n   * String representing the versification (should ONLY be used for serialization/deserialization).\n   *\n   * @remarks This is for backwards compatibility when ScrVers was an enumeration.\n   */\n  get versificationStr() {\n    var e;\n    return (e = this.versification) == null ? void 0 : e.name;\n  }\n  set versificationStr(e) {\n    this.versification = this.versification != null ? new c(e) : void 0;\n  }\n  /**\n   * Determines if the reference is valid.\n   */\n  get valid() {\n    return this.validStatus === 0;\n  }\n  /**\n   * Get the valid status for this reference.\n   */\n  get validStatus() {\n    return this.validateVerse(i.verseRangeSeparators, i.verseSequenceIndicators);\n  }\n  /**\n   * Gets the reference as a comparable integer where the book,\n   * chapter, and verse each occupy three digits and the verse is 0.\n   */\n  get BBBCCC() {\n    return i.getBBBCCCVVV(this._bookNum, this._chapterNum, 0);\n  }\n  /**\n   * Gets the reference as a comparable integer where the book,\n   * chapter, and verse each occupy three digits. If verse is not null\n   * (i.e., this reference represents a complex reference with verse\n   * segments or bridge) this cannot be used for an exact comparison.\n   */\n  get BBBCCCVVV() {\n    return i.getBBBCCCVVV(this._bookNum, this._chapterNum, this._verseNum);\n  }\n  /**\n   * Gets whether the verse is defined as an excluded verse in the versification.\n   * Does not handle verse ranges.\n   */\n  // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n  get isExcluded() {\n    return !1;\n  }\n  /**\n   * Parses the reference in the specified string.\n   * Optionally versification can follow reference as in GEN 3:11/4\n   * Throw an exception if\n   * - invalid book name\n   * - chapter number is missing or not a number\n   * - verse number is missing or does not start with a number\n   * - versification is invalid\n   * @param verseStr - string to parse e.g. 'MAT 3:11'\n   */\n  parse(e) {\n    if (e = e.replace(this.rtlMark, \"\"), e.includes(\"/\")) {\n      const o = e.split(\"/\");\n      if (e = o[0], o.length > 1)\n        try {\n          const u = +o[1].trim();\n          this.versification = new c(l[u]);\n        } catch {\n          throw new v(\"Invalid reference : \" + e);\n        }\n    }\n    const s = e.trim().split(\" \");\n    if (s.length !== 2)\n      throw new v(\"Invalid reference : \" + e);\n    const r = s[1].split(\":\"), a = +r[0];\n    if (r.length !== 2 || m.bookIdToNumber(s[0]) === 0 || !Number.isInteger(a) || a < 0 || !i.isVerseParseable(r[1]))\n      throw new v(\"Invalid reference : \" + e);\n    this.updateInternal(s[0], r[0], r[1]);\n  }\n  /**\n   * Simplifies this verse ref so that it has no bridging of verses or\n   * verse segments like `'1a'`.\n   */\n  simplify() {\n    this._verse = void 0;\n  }\n  /**\n   * Makes a clone of the reference.\n   *\n   * @returns The cloned VerseRef.\n   */\n  clone() {\n    return new i(this);\n  }\n  toString() {\n    const e = this.book;\n    return e === \"\" ? \"\" : `${e} ${this.chapter}:${this.verse}`;\n  }\n  toJSON() {\n    let e = this.verse;\n    (e === \"\" || e === this.verseNum.toString()) && (e = void 0);\n    const s = {\n      book: this.book,\n      chapterNum: this.chapterNum,\n      verseNum: this.verseNum,\n      verse: e,\n      versificationStr: this.versificationStr\n    };\n    return e || delete s.verse, s;\n  }\n  /**\n   * Compares this `VerseRef` with supplied one.\n   * @param verseRef - object to compare this one to.\n   * @returns `true` if this `VerseRef` is equal to the supplied one, `false` otherwise.\n   */\n  equals(e) {\n    return e instanceof i ? e._bookNum === this._bookNum && e._chapterNum === this._chapterNum && e._verseNum === this._verseNum && e.verse === this.verse && (e.versification == null && this.versification == null || e.versification != null && this.versification != null && e.versification.equals(this.versification)) : !1;\n  }\n  /**\n   * Enumerate all individual verses contained in a VerseRef.\n   * Verse ranges are indicated by \"-\" and consecutive verses by \",\"s.\n   * Examples:\n   * GEN 1:2 returns GEN 1:2\n   * GEN 1:1a-3b,5 returns GEN 1:1a, GEN 1:2, GEN 1:3b, GEN 1:5\n   * GEN 1:2a-2c returns //! ??????\n   *\n   * @param specifiedVersesOnly - if set to <c>true</c> return only verses that are\n   * explicitly specified only, not verses within a range. Defaults to `false`.\n   * @param verseRangeSeparators - Verse range separators.\n   * Defaults to `VerseRef.verseRangeSeparators`.\n   * @param verseSequenceSeparators - Verse sequence separators.\n   * Defaults to `VerseRef.verseSequenceIndicators`.\n   * @returns An array of all single verse references in this VerseRef.\n   */\n  allVerses(e = !1, s = i.verseRangeSeparators, r = i.verseSequenceIndicators) {\n    if (this._verse == null || this.chapterNum <= 0)\n      return [this.clone()];\n    const a = [], o = E(this._verse, r);\n    for (const u of o.map((f) => E(f, s))) {\n      const f = this.clone();\n      f.verse = u[0];\n      const d = f.verseNum;\n      if (a.push(f), u.length > 1) {\n        const b = this.clone();\n        if (b.verse = u[1], !e)\n          for (let p = d + 1; p < b.verseNum; p++) {\n            const J = new i(\n              this._bookNum,\n              this._chapterNum,\n              p,\n              this.versification\n            );\n            this.isExcluded || a.push(J);\n          }\n        a.push(b);\n      }\n    }\n    return a;\n  }\n  /**\n   * Validates a verse number using the supplied separators rather than the defaults.\n   */\n  validateVerse(e, s) {\n    if (!this.verse)\n      return this.internalValid;\n    let r = 0;\n    for (const a of this.allVerses(!0, e, s)) {\n      const o = a.internalValid;\n      if (o !== 0)\n        return o;\n      const u = a.BBBCCCVVV;\n      if (r > u)\n        return 3;\n      if (r === u)\n        return 4;\n      r = u;\n    }\n    return 0;\n  }\n  /**\n   * Gets whether a single verse reference is valid.\n   */\n  get internalValid() {\n    return this.versification == null ? 1 : this._bookNum <= 0 || this._bookNum > m.lastBook ? 2 : (m.isCanonical(this._bookNum), 0);\n  }\n  setEmpty(e = i.defaultVersification) {\n    this._bookNum = 0, this._chapterNum = -1, this._verse = void 0, this.versification = e;\n  }\n  updateInternal(e, s, r) {\n    this.bookNum = m.bookIdToNumber(e), this.chapter = s, this.verse = r;\n  }\n};\nn(i, \"defaultVersification\", c.English), n(i, \"verseRangeSeparator\", \"-\"), n(i, \"verseSequenceIndicator\", \",\"), n(i, \"verseRangeSeparators\", [i.verseRangeSeparator]), n(i, \"verseSequenceIndicators\", [i.verseSequenceIndicator]), n(i, \"chapterDigitShifter\", 1e3), n(i, \"bookDigitShifter\", i.chapterDigitShifter * i.chapterDigitShifter), n(i, \"bcvMaxValue\", i.chapterDigitShifter - 1), /**\n * The valid status of the VerseRef.\n */\nn(i, \"ValidStatusType\", D);\nlet M = i;\nclass v extends Error {\n}\nexport {\n  _ as BookSet,\n  m as Canon,\n  c as ScrVers,\n  l as ScrVersType,\n  M as VerseRef,\n  v as VerseRefException\n};\n//# sourceMappingURL=index.es.js.map\n","import { DropdownMenuItem } from '@/components/shadcn-ui/dropdown-menu';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Canon } from '@sillsdev/scripture';\nimport { KeyboardEvent, PropsWithChildren, forwardRef } from 'react';\n\nexport type BookType = 'OT' | 'NT' | 'DC';\n\ntype BookMenuItemProps = PropsWithChildren<{\n  /** String id of book */\n  bookId: string;\n  /** Callback to run when a book menu item is selected */\n  handleSelectBook: () => void;\n  /** Indicates if this menu item should be expanded to show its children */\n  shouldExpandChildren: boolean;\n  /** Function that is called upon highlighting a book in the dropdown menu */\n  handleHighlightBook: () => void;\n  /**\n   * Function that is called on pressing a key\n   *\n   * @param event Event that contains information about the key stroke\n   */\n  handleKeyDown: (event: KeyboardEvent) => void;\n  /**\n   * Type of book associated with this menu item, coordinates color labels ? Mock up has the labels\n   * coordinated to genre\n   */\n  bookType: BookType;\n}>;\n\nexport const BookMenuItem = forwardRef<HTMLDivElement, BookMenuItemProps>(\n  (\n    {\n      bookId,\n      handleSelectBook,\n      shouldExpandChildren,\n      handleHighlightBook,\n      handleKeyDown,\n      bookType,\n      children,\n    }: BookMenuItemProps,\n    ref,\n  ) => {\n    return (\n      <DropdownMenuItem\n        ref={ref}\n        key={bookId}\n        textValue={bookId}\n        className={cn(\n          'tw-mx-1 tw-flex-col tw-items-start tw-px-1 tw-font-normal tw-text-foreground/80',\n          {\n            // Overriding `data-[highlighted]` changes the default gray background that is normally shown on hover\n            'tw-bg-amber-50 tw-text-yellow-900 data-[highlighted]:tw-bg-amber-100':\n              shouldExpandChildren,\n          },\n        )}\n        onSelect={(event: Event) => {\n          // preventDefault() here prevents the entire dropdown menu from closing when selecting this item\n          event.preventDefault();\n          handleSelectBook();\n        }}\n        onKeyDown={(event: KeyboardEvent) => {\n          handleKeyDown(event);\n        }}\n        onFocus={handleHighlightBook}\n        onMouseMove={handleHighlightBook}\n      >\n        <span\n          className={cn(\n            'tw-border-b-0 tw-border-e-0 tw-border-s-2 tw-border-t-0 tw-border-solid tw-px-2',\n            {\n              'tw-font-bold': shouldExpandChildren,\n              'tw-border-s-red-200': bookType.toLowerCase() === 'ot',\n              'tw-border-s-purple-200': bookType.toLowerCase() === 'nt',\n              'tw-border-s-indigo-200': bookType.toLowerCase() === 'dc',\n            },\n          )}\n        >\n          {Canon.bookIdToEnglishName(bookId)}\n        </span>\n        {shouldExpandChildren && <div>{children}</div>}\n      </DropdownMenuItem>\n    );\n  },\n);\n\nexport default BookMenuItem;\n","import { cn } from '@/utils/shadcn-ui.util';\nimport { useCallback } from 'react';\n\nexport type ChapterSelectProps = {\n  /**\n   * Callback to run when a chapter div is selected\n   *\n   * @param chapterNumber Number of the chapter that has been selected\n   */\n  handleSelectChapter: (chapterNumber: number) => void;\n  /** The highest chapter number in the book (of course equal to number of chapters in the book) */\n  endChapter: number;\n  /** The chapter number that is currently selected */\n  selectedChapter: number;\n  /** The chapter number that is currently highlighted using keyboard or mouse navigation */\n  highlightedChapter: number;\n  /**\n   * Callback to run when a chapter is highlighted by the user\n   *\n   * @param chapterNumber The chapter that is highlighted\n   */\n  handleHighlightedChapter: (chapterNumber: number) => void;\n  /** Optional chapter query number used to style non-matching chapter numbers accordingly */\n  matchingChapters?: number[];\n};\n\nexport function ChapterSelect({\n  handleSelectChapter,\n  endChapter,\n  selectedChapter,\n  highlightedChapter,\n  handleHighlightedChapter,\n  matchingChapters,\n}: ChapterSelectProps) {\n  const chapters = Array.from({ length: endChapter }, (_, i) => i + 1);\n\n  const handleMouse = useCallback(\n    (chapterNumber: number) => {\n      handleHighlightedChapter(chapterNumber);\n    },\n    [handleHighlightedChapter],\n  );\n\n  return (\n    <div className={cn('tw-flex tw-flex-wrap tw-items-start tw-justify-start tw-self-stretch')}>\n      {chapters.map((chapter) => (\n        <div\n          key={chapter}\n          className={cn(\n            'tw-box-content tw-flex tw-h-4 tw-w-4 tw-cursor-pointer tw-items-center tw-justify-end tw-rounded-md tw-p-2 tw-text-amber-800',\n            {\n              'tw-font-semibold tw-text-amber-900': chapter === selectedChapter,\n              'tw-bg-amber-200': chapter === highlightedChapter,\n              'tw-pointer-events-none tw-bg-accent tw-opacity-50':\n                matchingChapters && !matchingChapters.includes(chapter),\n            },\n          )}\n          onClick={(event) => {\n            event.preventDefault();\n            event.stopPropagation();\n            handleSelectChapter(chapter);\n          }}\n          role=\"button\"\n          onKeyDown={(event) => {\n            if (event.key === 'Enter') {\n              handleSelectChapter(chapter);\n            }\n          }}\n          tabIndex={0}\n          onMouseMove={() => handleMouse(chapter)}\n        >\n          {chapter}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default ChapterSelect;\n","import { BookChapterInput } from '@/components/advanced/book-chapter-control/book-chapter-input.component';\nimport {\n  BookMenuItem,\n  BookType,\n} from '@/components/advanced/book-chapter-control/book-menu-item.component';\nimport { ChapterSelect } from '@/components/advanced/book-chapter-control/chapter-select.component';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/shadcn-ui/dropdown-menu';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { Canon, SerializedVerseRef } from '@sillsdev/scripture';\nimport { formatScrRef, getChaptersForBook, MODIFIER_KEYS } from 'platform-bible-utils';\nimport {\n  KeyboardEvent as ReactKeyboardEvent,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\ntype BookTypeLabels = {\n  [bookType in BookType]: string;\n};\n\nexport type BookChapterControlProps = {\n  /** The current scripture reference */\n  scrRef: SerializedVerseRef;\n  /** Function to handle the submission of selected references */\n  handleSubmit: (scrRef: SerializedVerseRef) => void;\n  /** Optional additional class name for styling */\n  className?: string;\n  /** Function to retrieve active book IDs */\n  getActiveBookIds?: () => string[];\n};\n\ntype BookWithOptionalChapterAndVerse = Omit<SerializedVerseRef, 'chapterNum' | 'verseNum'> &\n  Partial<Pick<SerializedVerseRef, 'chapterNum' | 'verseNum'>>;\n\n/** How many chapter buttons fit in each row in the chapter select */\nconst CHAPTERS_PER_ROW = 6;\n\nconst ALL_BOOK_IDS = Canon.allBookIds.filter((b) => !Canon.isObsolete(Canon.bookIdToNumber(b)));\n\nconst ALL_ENGLISH_BOOK_NAMES = Object.fromEntries(\n  ALL_BOOK_IDS.map((bookId) => [bookId, Canon.bookIdToEnglishName(bookId)]),\n);\nconst BOOK_TYPE_LABELS: BookTypeLabels = {\n  OT: 'Old Testament',\n  NT: 'New Testament',\n  DC: 'Deuterocanon',\n};\nconst BOOK_TYPE_ARRAY: BookType[] = ['OT', 'NT', 'DC'];\n// This is the height of three menu items to offset scrolling to the selected menu item\n// If you use menuItemRef.clientHeight- includes height of chapter div which is too big\nconst SCROLL_OFFSET = 32 + 32 + 32;\n\nconst SCRIPTURE_REGEX_PATTERNS = {\n  // Matches start of string (`^`), one or more non-colon/space words, optionally followed by space and more words (`([^:\\s]+(?:\\s+[^:\\s]+)*)`), end of string (`$`), case-insensitive (`i`)\n  BOOK_ONLY: /^([^:\\s]+(?:\\s+[^:\\s]+)*)$/i,\n  // Same as above, but followed by space(s) and a chapter number (`\\s+(\\d+)`)\n  BOOK_CHAPTER: /^([^:\\s]+(?:\\s+[^:\\s]+)*)\\s+(\\d+)$/i,\n  // Same as above, but followed by a colon and optionally a verse number (`:(\\d*)`)\n  BOOK_CHAPTER_VERSE: /^([^:\\s]+(?:\\s+[^:\\s]+)*)\\s+(\\d+):(\\d*)$/i,\n\n  // Same as BOOK_CHAPTER_VERSE, but extracts the book name/id from a reference\n  EXTRACT_BOOK_FROM_REFERENCE: /^([^:\\s]+(?:\\s+[^:\\s]+)*)\\s+\\d+:\\d+$/,\n  // Same as BOOK_CHAPTER_VERSE, but extracts the book name/id and chapter number from a reference\n  EXTRACT_BOOK_CHAPTER_FROM_REFERENCE: /^([^:\\s]+(?:\\s+[^:\\s]+)*\\s+\\d+):\\d+$/,\n} as const;\n\nconst SEARCH_QUERY_FORMATS = [\n  SCRIPTURE_REGEX_PATTERNS.BOOK_ONLY, // Matches book name/id\n  SCRIPTURE_REGEX_PATTERNS.BOOK_CHAPTER, // Matches book name/id followed by a chapter number\n  SCRIPTURE_REGEX_PATTERNS.BOOK_CHAPTER_VERSE, // Matches book name/id followed by a chapter and verse number\n];\n\n/** Keys used for navigating around in the content menu */\nconst CONTENT_NAVIGATION_KEYS = new Set([\n  'ArrowUp',\n  'ArrowDown',\n  'ArrowLeft',\n  'ArrowRight',\n  'Enter',\n]);\n\n// Thanks to Mx. at https://stackoverflow.com/a/35173443\n/** Query selector for finding tab indexable elements */\nconst TAB_INDEX_QUERY =\n  'a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex=\"-1\"])';\n\nconst fetchEndChapter = (bookId: string) => {\n  // getChaptersForBook returns -1 if not found in scrBookData\n  // scrBookData only includes OT and NT, so all DC will return -1\n  return getChaptersForBook(Canon.bookIdToNumber(bookId));\n};\n\n/**\n * Gets a bookId from given English name\n *\n * @param bookName Book English name\n * @returns BookId of provided bookName, undefined otherwise\n */\nfunction getBookIdFromEnglishName(bookName: string): string | undefined {\n  const matchingBookId = ALL_BOOK_IDS.find(\n    (bookId) => ALL_ENGLISH_BOOK_NAMES[bookId].toLowerCase() === bookName.toLowerCase(),\n  );\n  if (matchingBookId) {\n    return matchingBookId;\n  }\n\n  return undefined;\n}\n\n/**\n * `BookChapterControl` is a component that provides an interactive UI for selecting book chapters.\n * It allows users to input a search query to find specific books and chapters, navigate through\n * options with keyboard interactions, and submit selections. The component handles various\n * interactions such as opening and closing the dropdown menu, filtering book lists based on search\n * input, and managing highlighted selections. It also integrates with external handlers for\n * submitting selected references and retrieving active book IDs.\n *\n * @param {BookChapterControlProps} props\n * @param {SerializedVerseRef} props.scrRef - The current scripture reference.\n * @param {function} props.handleSubmit - Function to handle the submission of selected references.\n * @param {string} [props.className] - Optional additional class name for styling.\n * @param {function} [props.getActiveBookIds] - Function to retrieve active book IDs.\n */\nexport function BookChapterControl({\n  scrRef,\n  handleSubmit,\n  className,\n  getActiveBookIds,\n}: BookChapterControlProps) {\n  const dir: Direction = readDirection();\n  // Value displayed on the book chapter input\n  const [bookChapterInputValue, setBookChapterInputValue] = useState<string>(() =>\n    formatScrRef(scrRef, 'English'),\n  );\n  // Search query that is used to filter the book list. Set to the book chapter input value if it is modified\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  // The book that is currently expanded in the dropdown to show its chapter selection controls\n  const [selectedBookId, setSelectedBookId] = useState<string>(scrRef.book);\n  // Which chapter is highlighted (as if it were being hovered) in the chapter selection controls\n  const [highlightedChapter, setHighlightedChapter] = useState<number>(scrRef.chapterNum ?? 0);\n  // Which book is highlighted (as if it were being hovered) in the book selection list\n  const [highlightedBookId, setHighlightedBookId] = useState<string>(scrRef.book);\n  // Whether the dropdown content is showing\n  const [isContentOpen, setIsContentOpen] = useState<boolean>(false);\n  // `isContentOpen` but delayed by a `useLayoutEffect` cycle - used to delay the scroll to the\n  // selected book menu item until the refs are defined and available. This is necessary because the\n  // refs are not defined immediately after we set the content to opened, so we need to wait a bit\n  // before scrolling to the selected book menu item\n  const [isContentOpenDelayed, setIsContentOpenDelayed] = useState<boolean>(isContentOpen);\n  // Track whether the user has started typing since the input was focused\n  const [hasStartedTyping, setHasStartedTyping] = useState<boolean>(false);\n  // Store the top match result for display in dropdown\n  const [topMatch, setTopMatch] = useState<BookWithOptionalChapterAndVerse | undefined>();\n\n  // This ref will always be defined\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const inputRef = useRef<HTMLInputElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const contentRef = useRef<HTMLDivElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const menuItemRef = useRef<HTMLDivElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const topMatchMenuItemRef = useRef<HTMLDivElement>(undefined!);\n\n  /**\n   * Calculate the top match based on the current search query. Returns a formatted scripture\n   * reference if a valid match is found, undefined otherwise\n   */\n  const calculateTopMatch = useCallback(\n    (query: string): BookWithOptionalChapterAndVerse | undefined => {\n      if (!query.trim()) return undefined;\n\n      return SEARCH_QUERY_FORMATS.reduce(\n        (result: BookWithOptionalChapterAndVerse | undefined, format) => {\n          if (result) return result;\n\n          const matches = format.exec(query);\n          if (matches) {\n            const [book, chapter = undefined, verse = undefined] = matches.slice(1);\n            const englishName = getBookIdFromEnglishName(book);\n            const validBookId =\n              englishName ?? (Canon.isBookIdValid(book) ? book.toLocaleUpperCase() : undefined);\n\n            if (validBookId) {\n              const chapterNum = chapter ? parseInt(chapter, 10) : undefined;\n              if (chapterNum && chapterNum > fetchEndChapter(validBookId)) return undefined;\n              const verseNum = verse ? parseInt(verse, 10) : undefined;\n\n              return {\n                book: validBookId,\n                chapterNum,\n                verseNum,\n              };\n            }\n          }\n\n          return undefined;\n        },\n        undefined,\n      );\n    },\n    [],\n  );\n\n  const topMatchChapters = useMemo(() => {\n    if (!topMatch || !topMatch.chapterNum) return undefined;\n    if (topMatch.verseNum) return [topMatch.chapterNum];\n    return Array.from({ length: fetchEndChapter(highlightedBookId) }, (_, i) => i + 1).filter(\n      (chapter) =>\n        topMatch?.chapterNum && chapter.toString().includes(topMatch?.chapterNum?.toString()),\n    );\n  }, [highlightedBookId, topMatch]);\n\n  const isSearchDifferentFromScrRef = useMemo(() => {\n    const parsedReference = calculateTopMatch(bookChapterInputValue.trim());\n\n    if (!parsedReference) {\n      // If we can't parse it, consider it different from the current reference\n      return true;\n    }\n\n    // Compare the parsed reference with the current scripture reference\n    return (\n      parsedReference.book !== scrRef.book ||\n      (parsedReference.chapterNum ?? 0) !== scrRef.chapterNum ||\n      (parsedReference.verseNum ?? 0) !== scrRef.verseNum\n    );\n  }, [bookChapterInputValue, scrRef, calculateTopMatch]);\n\n  const isShowingTopMatch = useMemo(\n    () => !!topMatch && isSearchDifferentFromScrRef,\n    [topMatch, isSearchDifferentFromScrRef],\n  );\n\n  const fetchFilteredBooks = useCallback(\n    (bookType: BookType) => {\n      const newBookIds = getActiveBookIds ? getActiveBookIds() : ALL_BOOK_IDS;\n\n      return {\n        OT: newBookIds.filter((bookId) => Canon.isBookOT(bookId)),\n        NT: newBookIds.filter((bookId) => Canon.isBookNT(bookId)),\n        DC: newBookIds.filter((bookId) => Canon.isBookDC(bookId)),\n      }[bookType].filter((bookId: string) => {\n        const englishNameLowerCase = ALL_ENGLISH_BOOK_NAMES[bookId].toLowerCase();\n        const normalizedQuery =\n          searchQuery.length > 0 && /^\\d/.test(searchQuery)\n            ? // consider edge case where the first character is a digit (e.g. \"3JN\")\n              searchQuery.charAt(0) +\n              searchQuery\n                .slice(1)\n                .replace(/[^a-zA-Z]/g, '')\n                .toLowerCase()\n            : searchQuery.replace(/[^a-zA-Z]/g, '').toLowerCase();\n        return !isShowingTopMatch\n          ? englishNameLowerCase.includes(normalizedQuery) || // Match partial book name\n              bookId.toLowerCase().includes(normalizedQuery) // Match partial book ID\n          : englishNameLowerCase === normalizedQuery || // Match full book name\n              bookId.toLowerCase() === normalizedQuery; // Match full book ID\n      });\n    },\n    [getActiveBookIds, isShowingTopMatch, searchQuery], // Only recompute when relevant values change\n  );\n\n  const allFilteredBooksByType = useMemo(\n    () =>\n      BOOK_TYPE_ARRAY.map((bookType) => ({\n        bookType,\n        books: fetchFilteredBooks(bookType),\n      })).filter((section) => section.books.length > 0),\n    [fetchFilteredBooks],\n  );\n\n  const totalFilteredBooks = useMemo(\n    () => allFilteredBooksByType.reduce((total, section) => total + section.books.length, 0),\n    [allFilteredBooksByType],\n  );\n\n  const handleSearchInput = useCallback(\n    (searchString: string) => {\n      setBookChapterInputValue(searchString);\n      setSearchQuery(searchString.trim());\n      setTopMatch(calculateTopMatch(searchString.trim()));\n    },\n    [calculateTopMatch],\n  );\n\n  /**\n   * Whether to prevent radix's logic from closing the dropdown. This is important because radix\n   * tries to close the dropdown when the input first focuses, and we don't want it to do that. But\n   * we don't want to prevent the dropdown from closing when we click away from the input, so we\n   * don't want to just keep it open if the input is focused\n   */\n  const shouldPreventAutoClosing = useRef(false);\n\n  /**\n   * Reset this component's internal state to match the scripture reference. For example, this\n   * resets the current input value to the scripture reference and removes the filter\n   */\n  const resetToScrRef = useCallback(() => {\n    setBookChapterInputValue(formatScrRef(scrRef, 'English'));\n    setSearchQuery('');\n    setSelectedBookId(scrRef.book);\n    setHighlightedBookId(scrRef.book);\n  }, [scrRef]);\n\n  const controlMenuState = useCallback((open: boolean) => {\n    if (shouldPreventAutoClosing.current) {\n      shouldPreventAutoClosing.current = false;\n      return;\n    }\n\n    setIsContentOpen(open);\n  }, []);\n\n  const updateReference = useCallback(\n    (bookId: string, shouldClose: boolean, chapter?: number, verse?: number) => {\n      setHighlightedChapter(scrRef.book !== bookId ? 1 : scrRef.chapterNum);\n\n      if (shouldClose || fetchEndChapter(bookId) === -1) {\n        handleSubmit({\n          book: bookId,\n          chapterNum: chapter ?? 1,\n          verseNum: verse ?? 1,\n        });\n\n        setIsContentOpen(false);\n        setSearchQuery('');\n        return;\n      }\n\n      setSelectedBookId(selectedBookId !== bookId ? bookId : '');\n      setIsContentOpen(!shouldClose);\n    },\n    [handleSubmit, scrRef.book, scrRef.chapterNum, selectedBookId],\n  );\n\n  const handleSelectChapter = (chapterNumber: number) => {\n    if (chapterNumber <= 0 || chapterNumber > fetchEndChapter(selectedBookId)) {\n      return;\n    }\n    updateReference(selectedBookId, true, chapterNumber);\n  };\n\n  const handleInputSubmit = useCallback(() => {\n    SEARCH_QUERY_FORMATS.forEach((format) => {\n      const matches = format.exec(searchQuery);\n      if (matches) {\n        // Book should be a bookId or an english name\n        const [book, chapter = undefined, verse = undefined] = matches.slice(1);\n        const englishName = getBookIdFromEnglishName(book);\n\n        if (Canon.isBookIdValid(book) || englishName) {\n          updateReference(\n            englishName ?? book,\n            true,\n            chapter ? parseInt(chapter, 10) : 1,\n            verse ? parseInt(verse, 10) : 1,\n          );\n        }\n      }\n    });\n  }, [updateReference, searchQuery]);\n\n  const handleKeyDownInput = useCallback(\n    (event: ReactKeyboardEvent) => {\n      // If the dropdown isn't open, open it for looking at what you're typing.\n      // If it's open and the user presses down, go into the dropdown\n      // If it's open and the user presses escape, close it\n      if (!isContentOpen) {\n        // Just let Tab do its thing\n        if (event.key !== 'Tab' && event.key !== 'Escape') setIsContentOpen(true);\n      } else if (event.key === 'ArrowDown') {\n        // If the user presses down or tab, focus the content\n        if (topMatchMenuItemRef?.current) {\n          topMatchMenuItemRef.current.focus();\n        } else if (menuItemRef?.current) {\n          menuItemRef.current.focus();\n        } else if (contentRef.current) {\n          contentRef.current.focus();\n        }\n        event.preventDefault();\n      } else if (event.key === 'Escape' && document.activeElement === inputRef.current) {\n        // If the input isn't focused, the menu dropdown automatically handles the escape key\n        setIsContentOpen(false);\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      // Special handling for smart chapter/verse editing\n      if (document.activeElement === inputRef.current) {\n        // Check if user is typing a letter as the first character - start new search query\n        if (/^[a-zA-Z]$/.test(event.key)) {\n          handleSearchInput(isSearchDifferentFromScrRef ? searchQuery + event.key : event.key);\n          setHasStartedTyping(true);\n          event.preventDefault();\n        }\n\n        if (!hasStartedTyping) {\n          // Only apply smart editing on the first keypress after focusing\n          // Check if user is typing a digit as the first character - start new chapter number\n          if (/^\\d$/.test(event.key)) {\n            const currentValue = bookChapterInputValue;\n            // Match pattern \"Name of Book 0:0\" to extract book name\n            const bookMatch = currentValue.match(\n              SCRIPTURE_REGEX_PATTERNS.EXTRACT_BOOK_FROM_REFERENCE,\n            );\n            if (bookMatch) {\n              const bookName = bookMatch[1];\n              // Replace the input with book name + space + new digit\n              const newValue = `${bookName} ${event.key}`;\n              handleSearchInput(newValue);\n              setHasStartedTyping(true);\n              event.preventDefault();\n            }\n          }\n\n          // Check if user is typing a colon as the first character - start new verse number\n          if (event.key === ':') {\n            const currentValue = bookChapterInputValue;\n            // Match pattern \"Name of Book 0:0\" to extract book name and chapter number\n            const bookAndChapterMatch = currentValue.match(\n              SCRIPTURE_REGEX_PATTERNS.EXTRACT_BOOK_CHAPTER_FROM_REFERENCE,\n            );\n            if (bookAndChapterMatch) {\n              const bookAndChapter = bookAndChapterMatch[1];\n              // Replace the input with book name + chapter + colon, ready for verse input\n              // In some cases an extraneous colon was added here, so the colon is only added if needed\n              const newValue = bookAndChapter.endsWith(':')\n                ? `${bookAndChapter}`\n                : `${bookAndChapter}:`;\n              handleSearchInput(newValue);\n              setHasStartedTyping(true);\n              event.preventDefault();\n            }\n          }\n        } else {\n          handleSearchInput(searchQuery + event.key);\n          event.preventDefault();\n        }\n\n        // Mark that the user has started typing on any non-modifier key\n        if (!MODIFIER_KEYS.has(event.key)) {\n          setHasStartedTyping(true);\n        }\n      }\n    },\n    [\n      isContentOpen,\n      hasStartedTyping,\n      handleSearchInput,\n      isSearchDifferentFromScrRef,\n      searchQuery,\n      bookChapterInputValue,\n    ],\n  );\n\n  /** Send keydown event to the book chapter input component. */\n  const passInputToBookChapterInput = useCallback((event: ReactKeyboardEvent) => {\n    // Wait to do anything if the user presses a modifier key since that doesn't constitute typing\n    if (MODIFIER_KEYS.has(event.key)) return;\n\n    // Tab sends you to next element outside this BC control, while Shift+tab should send you back to the input\n    if (event.key === 'Tab') {\n      if (event.shiftKey) {\n        inputRef.current.focus();\n      } else {\n        // We are checking in the filter that it is HTMLElement. TypeScript is getting thrown off\n        // by the additional checks for some reason\n        // eslint-disable-next-line no-type-assertion/no-type-assertion\n        const focusableElementsOutsideThisComponent = [\n          ...document.querySelectorAll(TAB_INDEX_QUERY),\n        ].filter(\n          (element) =>\n            element instanceof HTMLElement &&\n            (((element.offsetWidth > 0 || element.offsetHeight > 0) &&\n              !contentRef.current?.contains(element) &&\n              !inputRef.current?.contains(element)) ||\n              element === event.target),\n        ) as HTMLElement[];\n        const currentFocusedIndex =\n          event.target instanceof HTMLElement\n            ? focusableElementsOutsideThisComponent.indexOf(event.target)\n            : -1;\n        if (currentFocusedIndex >= 0) {\n          // Focus the next element if there is one\n          const nextElement =\n            focusableElementsOutsideThisComponent[\n              (currentFocusedIndex + 1) % focusableElementsOutsideThisComponent.length\n            ];\n          nextElement.focus();\n        } else {\n          // If we didn't find any focusable elements, just focus the input\n          inputRef.current.focus();\n        }\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    // This is some kind of keyboard input. Send it to the input component\n    event.stopPropagation();\n    inputRef.current.focus();\n    inputRef.current.dispatchEvent(new KeyboardEvent('keydown', { ...event, view: undefined }));\n  }, []);\n\n  /**\n   * Handles keydown events for the content area of the dropdown menu.\n   *\n   * These occur when the user opens the dropdown, mouses over it, then mouses out of the dropdown\n   */\n  const handleKeyDownContent = useCallback(\n    (event: ReactKeyboardEvent) => {\n      const { key } = event;\n\n      if (CONTENT_NAVIGATION_KEYS.has(key)) {\n        // Built-in hover management works well in this case. Don't mess with it\n        return;\n      }\n\n      // User is not navigating in the content. Other key strokes give focus back to the input\n      // component to type in the filter\n      passInputToBookChapterInput(event);\n      // Prevent from scrolling to the book whose name starts with the letter typed\n      // Unfortunately, this also prevents the character from going to the input for some reason\n      event.preventDefault();\n    },\n    [passInputToBookChapterInput],\n  );\n\n  const handleKeyDownTopMatch = useCallback((event: ReactKeyboardEvent) => {\n    const { key } = event;\n    // If we're at the top of the menu and the user presses up, go to the input\n    if (key === 'ArrowUp') {\n      event.preventDefault();\n      inputRef.current.focus();\n    }\n  }, []);\n\n  /**\n   * Handles keydown events for individual book menu items.\n   *\n   * These occur when the user opens the dropdown and is focused on or hovering over a book menu\n   * item\n   *\n   * Navigate around in the book/chapter menu using arrow keys and enter.\n   *\n   * @param event Keydown event\n   * @param index Which book menu item is receiving the keydown event\n   */\n  const handleKeyDownMenuItem = useCallback(\n    (event: ReactKeyboardEvent, index: number) => {\n      const { key } = event;\n\n      if (CONTENT_NAVIGATION_KEYS.has(key)) {\n        // Navigate around in the book/chapter menu using arrow keys and submit with enter\n        // Opening the hovered book with enter is handled elsewhere\n        const isNavigatingChapters =\n          highlightedBookId === selectedBookId || totalFilteredBooks === 1;\n        if (isNavigatingChapters) {\n          const activeBook = totalFilteredBooks === 1 ? highlightedBookId : selectedBookId;\n          if (key === 'Enter') {\n            event.preventDefault();\n            updateReference(activeBook, true, highlightedChapter);\n            return;\n          }\n\n          const upOneChapter =\n            (key === 'ArrowRight' && !dir) ||\n            (key === 'ArrowRight' && dir === 'ltr') ||\n            (key === 'ArrowLeft' && dir === 'rtl');\n          const downOneChapter =\n            (key === 'ArrowLeft' && !dir) ||\n            (key === 'ArrowLeft' && dir === 'ltr') ||\n            (key === 'ArrowRight' && dir === 'rtl');\n\n          const allChaptersForBook = Array.from(\n            { length: fetchEndChapter(highlightedBookId) },\n            (_, i) => i + 1,\n          );\n\n          // Determine available chapters for navigation\n          const availableChapters =\n            selectedBookId !== highlightedBookId || totalFilteredBooks === 1\n              ? (topMatchChapters ?? allChaptersForBook)\n              : allChaptersForBook;\n\n          const currentIndex = availableChapters.indexOf(highlightedChapter);\n\n          let newHighlightedChapter = highlightedChapter;\n\n          if (upOneChapter) {\n            if (currentIndex >= 0 && currentIndex < availableChapters.length - 1) {\n              newHighlightedChapter = availableChapters[currentIndex + 1];\n            } else {\n              event.preventDefault();\n              return;\n            }\n          } else if (downOneChapter) {\n            if (currentIndex > 0) {\n              newHighlightedChapter = availableChapters[currentIndex - 1];\n            } else {\n              event.preventDefault();\n              return;\n            }\n          } else if (key === 'ArrowDown') {\n            // Move down by CHAPTERS_PER_ROW in the available chapters\n            const targetChapter = availableChapters[currentIndex] + CHAPTERS_PER_ROW;\n            // Find the closest available chapter >= targetChapter\n            const foundChapter = availableChapters.find((chapter) => chapter >= targetChapter);\n            if (foundChapter !== undefined) {\n              newHighlightedChapter = foundChapter;\n            }\n          } else if (key === 'ArrowUp') {\n            // Move up by CHAPTERS_PER_ROW in the available chapters\n            const targetChapter = availableChapters[currentIndex] - CHAPTERS_PER_ROW;\n            // Find the closest available chapter <= targetChapter (searching backwards)\n            const foundChapter = availableChapters\n              .slice()\n              .reverse()\n              .find((chapter) => chapter <= targetChapter);\n            if (foundChapter !== undefined) {\n              newHighlightedChapter = foundChapter;\n            }\n          }\n\n          if (newHighlightedChapter !== highlightedChapter) {\n            setHighlightedChapter(newHighlightedChapter);\n            event.preventDefault();\n            return;\n          }\n        }\n\n        // If we're at the top of the menu and the user presses up, go to the input\n        if (index === 0 && key === 'ArrowUp' && !isShowingTopMatch) {\n          event.preventDefault();\n          inputRef.current.focus();\n          return;\n        }\n\n        // Do not pass the key to the input component if the user is navigating in the chapter menu\n\n        return;\n      }\n\n      // User is not navigating in the content. Other key strokes give focus back to the input\n      // component to type in the filter\n      passInputToBookChapterInput(event);\n\n      // Prevent the original event from continuing to propagate\n      event.preventDefault();\n      event.stopPropagation();\n    },\n    [\n      dir,\n      highlightedBookId,\n      highlightedChapter,\n      isShowingTopMatch,\n      passInputToBookChapterInput,\n      selectedBookId,\n      topMatchChapters,\n      totalFilteredBooks,\n      updateReference,\n    ],\n  );\n\n  useEffect(() => {\n    if (totalFilteredBooks === 1) {\n      setHighlightedChapter(1);\n    } else if (selectedBookId === highlightedBookId) {\n      if (selectedBookId === scrRef.book) {\n        setHighlightedChapter(scrRef.chapterNum);\n      } else {\n        setHighlightedChapter(1);\n      }\n    } else {\n      setHighlightedChapter(0);\n    }\n  }, [highlightedBookId, scrRef.book, scrRef.chapterNum, selectedBookId, totalFilteredBooks]);\n\n  useEffect(() => {\n    if (!topMatchChapters || totalFilteredBooks > 1) return;\n    const currentIndex = topMatchChapters.indexOf(highlightedChapter);\n    // If highlighted chapter is not in available chapters, start from the first available chapter\n    if (currentIndex === -1) {\n      setHighlightedChapter(topMatchChapters[0]);\n    }\n  }, [highlightedBookId, highlightedChapter, selectedBookId, topMatchChapters, totalFilteredBooks]);\n\n  // When a new scrRef comes in, set the book chapter input value to the formatted scrRef and focus\n  // the new scrRef\n  useEffect(() => {\n    resetToScrRef();\n  }, [resetToScrRef]);\n\n  useEffect(() => {}, [isContentOpen, resetToScrRef]);\n\n  // The purpose of these useLayoutEffects and timeout is to delay the scroll just\n  // enough so that the refs are defined and available when they are used after the timeout\n  useLayoutEffect(() => {\n    setIsContentOpenDelayed(isContentOpen);\n  }, [isContentOpen]);\n\n  useLayoutEffect(() => {\n    const scrollTimeout = setTimeout(() => {\n      if (isContentOpenDelayed && contentRef.current && menuItemRef.current) {\n        const menuItemOffsetTop = menuItemRef.current.offsetTop;\n        const scrollPosition = menuItemOffsetTop - SCROLL_OFFSET;\n        contentRef.current.scrollTo({ top: scrollPosition, behavior: 'instant' });\n\n        // Sometimes the input was losing focus because the radix dropdown logic would grab the focus.\n        // Work around this to make sure the input stays focused when the user clicks to open the dropdown\n        inputRef.current.focus();\n      }\n\n      // If the user clicks away, reset to the Scripture Reference\n      if (\n        !isContentOpenDelayed &&\n        document.activeElement !== inputRef.current &&\n        !inputRef.current?.contains(document.activeElement) &&\n        document.activeElement !== contentRef.current &&\n        !contentRef.current?.contains(document.activeElement)\n      ) {\n        resetToScrRef();\n      }\n    }, 10);\n    return () => {\n      clearTimeout(scrollTimeout);\n    };\n  }, [isContentOpenDelayed, resetToScrRef]);\n\n  return (\n    <DropdownMenu modal={false} open={isContentOpen} onOpenChange={controlMenuState}>\n      <DropdownMenuTrigger asChild>\n        <BookChapterInput\n          ref={inputRef}\n          value={bookChapterInputValue}\n          handleSearch={handleSearchInput}\n          handleKeyDown={handleKeyDownInput}\n          handleOnClick={() => {\n            setSelectedBookId(scrRef.book);\n            setHighlightedBookId(scrRef.book);\n            setHighlightedChapter(scrRef.chapterNum > 0 ? scrRef.chapterNum : 0);\n            inputRef.current.focus();\n          }}\n          onFocus={() => {\n            // Radix thinks we want to close because the input is being focused. Prevent that\n            shouldPreventAutoClosing.current = true;\n            // Reset typing state when input gains focus\n            setHasStartedTyping(false);\n\n            setTopMatch(calculateTopMatch(bookChapterInputValue));\n          }}\n          onBlur={() => {\n            if (totalFilteredBooks === 0) resetToScrRef();\n          }}\n          handleSubmit={handleInputSubmit}\n          placeholder={formatScrRef(scrRef, 'English')}\n          className={className}\n          hasTopMatch={!!topMatch}\n          hasNoMatches={totalFilteredBooks === 0}\n          hasInputChanged={isSearchDifferentFromScrRef}\n        />\n      </DropdownMenuTrigger>\n      {totalFilteredBooks > 0 && (\n        <DropdownMenuContent\n          className=\"tw-m-1 tw-overflow-y-auto tw-p-0 tw-font-normal tw-text-foreground/80\"\n          // Need to get over the floating window z-index 200\n          style={{ width: '233px', maxHeight: '500px', zIndex: '250' }}\n          align={dir === 'ltr' ? 'start' : 'end'}\n          ref={contentRef}\n          onKeyDown={handleKeyDownContent}\n        >\n          {/* work around until DropdownMenuContent supports a dir prop */}\n          <div className=\"rtl:tw-ps-2\">\n            {!!topMatch && isSearchDifferentFromScrRef && (\n              <>\n                <DropdownMenuItem\n                  className=\"tw-cursor-pointer tw-p-4 tw-font-semibold tw-text-foreground\"\n                  onClick={handleInputSubmit}\n                  onKeyDown={(event) => handleKeyDownTopMatch(event)}\n                  data-top-match=\"true\"\n                  ref={topMatchMenuItemRef}\n                >\n                  {formatScrRef({\n                    book: topMatch.book,\n                    chapterNum: topMatch.chapterNum ?? 1,\n                    verseNum: topMatch.verseNum ?? 1,\n                  })}\n                </DropdownMenuItem>\n                <DropdownMenuSeparator />\n              </>\n            )}\n            {allFilteredBooksByType.map((section, sectionIndex) => (\n              <div key={section.bookType}>\n                <DropdownMenuLabel className=\"tw-font-semibold tw-text-foreground/80\">\n                  {BOOK_TYPE_LABELS[section.bookType]}\n                </DropdownMenuLabel>\n\n                {section.books.map((bookId, bookIndex) => (\n                  <div key={bookId}>\n                    <BookMenuItem\n                      bookId={bookId}\n                      handleSelectBook={() => updateReference(bookId, false)}\n                      shouldExpandChildren={\n                        selectedBookId.toLowerCase() === bookId.toLowerCase() ||\n                        totalFilteredBooks === 1\n                      }\n                      handleHighlightBook={() => setHighlightedBookId(bookId)}\n                      handleKeyDown={(event) => handleKeyDownMenuItem(event, bookIndex)}\n                      bookType={section.bookType}\n                      ref={(element: HTMLDivElement) => {\n                        if (selectedBookId === bookId) menuItemRef.current = element;\n                      }}\n                    >\n                      <ChapterSelect\n                        handleSelectChapter={handleSelectChapter}\n                        endChapter={fetchEndChapter(bookId)}\n                        // Without this condition- will highlight that chapterNum in every book- not just the selected book\n                        selectedChapter={selectedBookId === scrRef.book ? scrRef.chapterNum : 0}\n                        highlightedChapter={\n                          selectedBookId === highlightedBookId || totalFilteredBooks === 1\n                            ? highlightedChapter\n                            : 0\n                        }\n                        handleHighlightedChapter={(chapterNumber: number): void => {\n                          setHighlightedChapter(chapterNumber);\n                        }}\n                        matchingChapters={\n                          isSearchDifferentFromScrRef ? topMatchChapters : undefined\n                        }\n                      />\n                    </BookMenuItem>\n                  </div>\n                ))}\n                {sectionIndex < allFilteredBooksByType.length - 1 && <DropdownMenuSeparator />}\n              </div>\n            ))}\n          </div>\n        </DropdownMenuContent>\n      )}\n    </DropdownMenu>\n  );\n}\n\nexport default BookChapterControl;\n","import React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Style variants for the Button component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/button}\n */\nexport const buttonVariants = cva(\n  'pr-twp tw-inline-flex tw-items-center tw-justify-center tw-gap-2 tw-whitespace-nowrap tw-rounded-md tw-text-sm tw-font-medium tw-ring-offset-background tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50 [&_svg]:tw-pointer-events-none [&_svg]:tw-size-4 [&_svg]:tw-shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'tw-bg-primary tw-text-primary-foreground hover:tw-bg-primary/90',\n        destructive: 'tw-bg-destructive tw-text-destructive-foreground hover:tw-bg-destructive/90',\n        outline:\n          'tw-border tw-border-input tw-bg-background hover:tw-bg-accent hover:tw-text-accent-foreground',\n        secondary: 'tw-bg-secondary tw-text-secondary-foreground hover:tw-bg-secondary/80',\n        ghost: 'hover:tw-bg-accent hover:tw-text-accent-foreground',\n        link: 'tw-text-primary tw-underline-offset-4 hover:tw-underline',\n      },\n      size: {\n        default: 'tw-h-10 tw-px-4 tw-py-2',\n        sm: 'tw-h-9 tw-rounded-md tw-px-3',\n        lg: 'tw-h-11 tw-rounded-md tw-px-8',\n        icon: 'tw-h-10 tw-w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\n/**\n * Props for Button component\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/button}\n */\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\n/**\n * The Button component displays a button or a component that looks like a button. The component is\n * built and styled by Shadcn UI.\n *\n * @param ButtonProps\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/button}\n */\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button';\n    return (\n      <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />\n    );\n  },\n);\nButton.displayName = 'Button';\n","import React from 'react';\nimport * as LabelPrimitive from '@radix-ui/react-label';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Style variants for the Label component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/label}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/label}\n */\nconst labelVariants = cva(\n  'tw-text-sm tw-font-medium tw-leading-none peer-disabled:tw-cursor-not-allowed peer-disabled:tw-opacity-70',\n);\n\n/**\n * The Label component renders an accessible label associated with controls. This components is\n * built on Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/label}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/label}\n */\nexport const Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root ref={ref} className={cn('pr-twp', labelVariants(), className)} {...props} />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n","import React from 'react';\nimport * as RadioGroupPrimitive from '@radix-ui/react-radio-group';\nimport { Circle } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * Radio Group components providing a set of checkable buttons—known as radio buttons—where no more\n * than one of the buttons can be checked at a time. These components are built on Radix UI\n * primitives and styled with Shadcn UI.\n *\n * See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/radio-group See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/radio-group\n */\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn('pr-twp tw-grid tw-gap-2', className)}\n      {...props}\n      ref={ref}\n      dir={dir}\n    />\n  );\n});\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName;\n\n/** @inheritdoc RadioGroup */\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        'pr-twp tw-aspect-square tw-h-4 tw-w-4 tw-rounded-full tw-border tw-border-primary tw-text-primary tw-ring-offset-background focus:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"tw-flex tw-items-center tw-justify-center\">\n        <Circle className=\"tw-h-2.5 tw-w-2.5 tw-fill-current tw-text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  );\n});\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName;\n\nexport { RadioGroup, RadioGroupItem };\n","import React from 'react';\nimport * as PopoverPrimitive from '@radix-ui/react-popover';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * The Popover component displays rich content in a portal, triggered by a button. This popover is\n * built on Radix UI's Popover component and styled by Shadcn UI.\n *\n * See Shadcn UI Documentation https://ui.shadcn.com/docs/components/popover See Radix UI\n * Documentation https://www.radix-ui.com/docs/primitives/components/popover\n */\nconst Popover = PopoverPrimitive.Root;\n\n/** @inheritdoc Popover */\nconst PopoverTrigger = PopoverPrimitive.Trigger;\n\n/** @inheritdoc Popover */\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = 'center', sideOffset = 4, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        ref={ref}\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          'pr-twp tw-z-50 tw-w-72 tw-rounded-md tw-border tw-bg-popover tw-p-4 tw-text-popover-foreground tw-shadow-md tw-outline-none data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n          className,\n        )}\n        {...props}\n        dir={dir}\n      />\n    </PopoverPrimitive.Portal>\n  );\n});\nPopoverContent.displayName = PopoverPrimitive.Content.displayName;\n\nexport { Popover, PopoverTrigger, PopoverContent };\n","import React from 'react';\nimport * as DialogPrimitive from '@radix-ui/react-dialog';\nimport { X } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { readDirection } from '@/utils/dir-helper.util';\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'tw-fixed tw-inset-0 tw-z-50 tw-bg-black/80 data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0',\n      className,\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => {\n  const dir = readDirection();\n  return (\n    <DialogPortal>\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        ref={ref}\n        className={cn(\n          'pr-twp tw-fixed tw-left-[50%] tw-top-[50%] tw-z-50 tw-grid tw-w-full tw-max-w-lg tw-translate-x-[-50%] tw-translate-y-[-50%] tw-gap-4 tw-border tw-bg-background tw-p-6 tw-shadow-lg tw-duration-200 data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[state=closed]:tw-slide-out-to-left-1/2 data-[state=closed]:tw-slide-out-to-top-[48%] data-[state=open]:tw-slide-in-from-left-1/2 data-[state=open]:tw-slide-in-from-top-[48%] sm:tw-rounded-lg',\n          className,\n        )}\n        {...props}\n        dir={dir}\n      >\n        {children}\n        <DialogPrimitive.Close\n          className={cn(\n            'tw-absolute tw-top-4 tw-rounded-sm tw-opacity-70 tw-ring-offset-background tw-transition-opacity hover:tw-opacity-100 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-2 disabled:tw-pointer-events-none data-[state=open]:tw-bg-accent data-[state=open]:tw-text-muted-foreground',\n            { 'tw-right-4': dir === 'ltr' },\n            { 'tw-left-4': dir === 'rtl' },\n          )}\n        >\n          <X className=\"tw-h-4 tw-w-4\" />\n          <span className=\"tw-sr-only\">Close</span>\n        </DialogPrimitive.Close>\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  );\n});\nDialogContent.displayName = DialogPrimitive.Content.displayName;\nfunction DialogHeader({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'tw-flex tw-flex-col tw-space-y-1.5 tw-text-center sm:tw-text-start',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\nDialogHeader.displayName = 'DialogHeader';\n\nfunction DialogFooter({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'tw-flex tw-flex-col-reverse sm:tw-flex-row sm:tw-justify-end sm:tw-space-x-2',\n        className,\n      )}\n      {...props}\n    />\n  );\n}\nDialogFooter.displayName = 'DialogFooter';\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn('tw-text-lg tw-font-semibold tw-leading-none tw-tracking-tight', className)}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('tw-text-sm tw-text-muted-foreground', className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n","import React from 'react';\nimport { type DialogProps } from '@radix-ui/react-dialog';\nimport { Command as CommandPrimitive } from 'cmdk';\nimport { Search } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Dialog, DialogContent } from '@/components/shadcn-ui/dialog';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      'tw-flex tw-h-full tw-w-full tw-flex-col tw-overflow-hidden tw-rounded-md tw-bg-popover tw-text-popover-foreground',\n      className,\n    )}\n    {...props}\n  />\n));\nCommand.displayName = CommandPrimitive.displayName;\n\ninterface CommandDialogProps extends DialogProps {}\n\nfunction CommandDialog({ children, ...props }: CommandDialogProps) {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"tw-overflow-hidden tw-p-0 tw-shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:tw-px-2 [&_[cmdk-group-heading]]:tw-font-medium [&_[cmdk-group-heading]]:tw-text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:tw-pt-0 [&_[cmdk-group]]:tw-px-2 [&_[cmdk-input-wrapper]_svg]:tw-h-5 [&_[cmdk-input-wrapper]_svg]:tw-w-5 [&_[cmdk-input]]:tw-h-12 [&_[cmdk-item]]:tw-px-2 [&_[cmdk-item]]:tw-py-3 [&_[cmdk-item]_svg]:tw-h-5 [&_[cmdk-item]_svg]:tw-w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <div className=\"tw-flex tw-items-center tw-border-b tw-px-3\" dir={dir}>\n      <Search className=\"tw-me-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\" />\n      <CommandPrimitive.Input\n        ref={ref}\n        className={cn(\n          'tw-flex tw-h-11 tw-w-full tw-rounded-md tw-bg-transparent tw-py-3 tw-text-sm tw-outline-none placeholder:tw-text-muted-foreground disabled:tw-cursor-not-allowed disabled:tw-opacity-50',\n          className,\n        )}\n        {...props}\n      />\n    </div>\n  );\n});\n\nCommandInput.displayName = CommandPrimitive.Input.displayName;\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn('tw-max-h-[300px] tw-overflow-y-auto tw-overflow-x-hidden', className)}\n    {...props}\n  />\n));\n\nCommandList.displayName = CommandPrimitive.List.displayName;\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty ref={ref} className=\"tw-py-6 tw-text-center tw-text-sm\" {...props} />\n));\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      'tw-overflow-hidden tw-p-1 tw-text-foreground [&_[cmdk-group-heading]]:tw-px-2 [&_[cmdk-group-heading]]:tw-py-1.5 [&_[cmdk-group-heading]]:tw-text-xs [&_[cmdk-group-heading]]:tw-font-medium [&_[cmdk-group-heading]]:tw-text-muted-foreground',\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-h-px tw-bg-border', className)}\n    {...props}\n  />\n));\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none data-[disabled=true]:tw-pointer-events-none data-[selected=true]:tw-bg-accent data-[selected=true]:tw-text-accent-foreground data-[disabled=true]:tw-opacity-50',\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandItem.displayName = CommandPrimitive.Item.displayName;\n\nfunction CommandShortcut({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) {\n  return (\n    <span\n      className={cn('tw-ms-auto tw-text-xs tw-tracking-widest tw-text-muted-foreground', className)}\n      {...props}\n    />\n  );\n}\nCommandShortcut.displayName = 'CommandShortcut';\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n};\n","import { ReactNode, useState } from 'react';\nimport { Check, ChevronsUpDown } from 'lucide-react';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Button, ButtonProps } from '@/components/shadcn-ui/button';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/shadcn-ui/popover';\nimport {\n  Command,\n  CommandEmpty,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/shadcn-ui/command';\nimport { PopoverProps } from '@radix-ui/react-popover';\n\nexport type ComboBoxLabelOption = { label: string };\nexport type ComboBoxOption = string | number | ComboBoxLabelOption;\n\nexport type ComboBoxProps<T> = {\n  /** Optional unique identifier */\n  id?: string;\n  /** Text label title for combobox */\n  /** List of available options for the dropdown menu */\n  options?: readonly T[];\n  /** @deprecated 3 December 2024. Renamed to `buttonClassName` */\n  className?: string;\n  /** Additional css classes to help with unique styling of the combo box button */\n  buttonClassName?: string;\n  /** Additional css classes to help with unique styling of the combo box popover */\n  popoverContentClassName?: string;\n  /**\n   * The selected value that the combo box currently holds. Must be shallow equal to one of the\n   * options entries.\n   */\n  value?: T;\n  /** Triggers when content of textfield is changed */\n  onChange?: (newValue: T) => void;\n  /** Used to determine the string value for a given option. */\n  getOptionLabel?: (option: ComboBoxOption) => string;\n  /** Icon to be displayed on the trigger */\n  icon?: ReactNode;\n  /** Text displayed on button if `value` is undefined */\n  buttonPlaceholder?: string;\n  /** Placeholder text for text field */\n  textPlaceholder?: string;\n  /** Text to display when no options match input */\n  commandEmptyMessage?: string;\n  /** Variant of button */\n  buttonVariant?: ButtonProps['variant'];\n  /** Control how the popover menu should be aligned. Defaults to start */\n  alignDropDown?: 'start' | 'center' | 'end';\n  /** Optional boolean to set if trigger should be disabled */\n  isDisabled?: boolean;\n} & PopoverProps;\n\nfunction getOptionLabelDefault(option: ComboBoxOption): string {\n  if (typeof option === 'string') {\n    return option;\n  }\n  if (typeof option === 'number') {\n    return option.toString();\n  }\n  return option.label;\n}\n\n/**\n * Autocomplete input and command palette with a list of suggestions.\n *\n * Thanks to Shadcn for heavy inspiration and documentation\n * https://ui.shadcn.com/docs/components/combobox\n */\nexport function ComboBox<T extends ComboBoxOption = ComboBoxOption>({\n  id,\n  options = [],\n  className,\n  buttonClassName,\n  popoverContentClassName,\n  value,\n  onChange = () => {},\n  getOptionLabel = getOptionLabelDefault,\n  icon = undefined,\n  buttonPlaceholder = '',\n  textPlaceholder = '',\n  commandEmptyMessage = 'No option found',\n  buttonVariant = 'outline',\n  alignDropDown = 'start',\n  isDisabled = false,\n  ...props\n}: ComboBoxProps<T>) {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen} {...props}>\n      <PopoverTrigger asChild>\n        <Button\n          variant={buttonVariant}\n          role=\"combobox\"\n          aria-expanded={open}\n          id={id}\n          className={cn(\n            'tw-flex tw-w-[200px] tw-items-center tw-justify-between tw-overflow-hidden',\n            buttonClassName ?? className,\n          )}\n          disabled={isDisabled}\n        >\n          <div className=\"tw-flex tw-flex-1 tw-items-center tw-overflow-hidden\">\n            {icon && <div className=\"tw-pe-2\">{icon}</div>}\n            <span className={cn('tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap')}>\n              {value ? getOptionLabel(value) : buttonPlaceholder}\n            </span>\n          </div>\n\n          <ChevronsUpDown className=\"tw-ms-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent\n        align={alignDropDown}\n        className={cn('tw-w-[200px] tw-p-0', popoverContentClassName)}\n      >\n        <Command>\n          <CommandInput placeholder={textPlaceholder} className=\"tw-text-inherit\" />\n          <CommandEmpty>{commandEmptyMessage}</CommandEmpty>\n          <CommandList>\n            {options.map((option) => (\n              <CommandItem\n                key={getOptionLabel(option)}\n                value={getOptionLabel(option)}\n                onSelect={() => {\n                  onChange(option);\n                  setOpen(false);\n                }}\n              >\n                <Check\n                  className={cn('tw-me-2 tw-h-4 tw-w-4', {\n                    'tw-opacity-0': !value || getOptionLabel(value) !== getOptionLabel(option),\n                  })}\n                />\n                {getOptionLabel(option)}\n              </CommandItem>\n            ))}\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n\nexport default ComboBox;\n","import { ComboBox } from '@/components/basics/combo-box.component';\nimport { Label } from '@/components/shadcn-ui/label';\nimport { useMemo } from 'react';\n\nexport type ChapterRangeSelectorProps = {\n  /** The selected start chapter */\n  startChapter: number;\n  /** The selected end chapter */\n  endChapter: number;\n  /** Callback function to handle the selection of the start chapter */\n  handleSelectStartChapter: (chapter: number) => void;\n  /** Callback function to handle the selection of the end chapter */\n  handleSelectEndChapter: (chapter: number) => void;\n  /** Flag to disable the component */\n  isDisabled?: boolean;\n  /** The total number of chapters available */\n  chapterCount: number;\n};\n\n/**\n * ChapterRangeSelector is a component that provides a UI for selecting a range of chapters. It\n * consists of two combo boxes for selecting the start and end chapters. The component ensures that\n * the selected start chapter is always less than or equal to the end chapter, and vice versa.\n *\n * @param {ChapterRangeSelectorProps} props - The props for the component.\n */\n\nexport function ChapterRangeSelector({\n  startChapter,\n  endChapter,\n  handleSelectStartChapter,\n  handleSelectEndChapter,\n  isDisabled = false,\n  chapterCount,\n}: ChapterRangeSelectorProps) {\n  const chapterOptions = useMemo(\n    () => Array.from({ length: chapterCount }, (_, index) => index + 1),\n    [chapterCount],\n  );\n\n  const onChangeStartChapter = (value: number) => {\n    handleSelectStartChapter(value);\n    if (value > endChapter) {\n      handleSelectEndChapter(value);\n    }\n  };\n\n  const onChangeEndChapter = (value: number) => {\n    handleSelectEndChapter(value);\n    if (value < startChapter) {\n      handleSelectStartChapter(value);\n    }\n  };\n\n  return (\n    <>\n      <Label htmlFor=\"start-chapters-combobox\">Chapters</Label>\n      <ComboBox\n        isDisabled={isDisabled}\n        onChange={onChangeStartChapter}\n        buttonClassName=\"tw-me-2 tw-ms-2 tw-w-20\"\n        key=\"start chapter\"\n        options={chapterOptions}\n        getOptionLabel={(option) => option.toString()}\n        value={startChapter}\n      />\n\n      <Label htmlFor=\"end-chapters-combobox\">to</Label>\n      <ComboBox\n        isDisabled={isDisabled}\n        onChange={onChangeEndChapter}\n        buttonClassName=\"tw-ms-2 tw-w-20\"\n        key=\"end chapter\"\n        options={chapterOptions}\n        getOptionLabel={(option) => option.toString()}\n        value={endChapter}\n      />\n    </>\n  );\n}\n\nexport default ChapterRangeSelector;\n","import { Button } from '@/components/shadcn-ui/button';\nimport { Label } from '@/components/shadcn-ui/label';\nimport { RadioGroup, RadioGroupItem } from '@/components/shadcn-ui/radio-group';\nimport { Canon } from '@sillsdev/scripture';\nimport { LocalizedStringValue } from 'platform-bible-utils';\nimport { useState } from 'react';\nimport {\n  ChapterRangeSelector,\n  ChapterRangeSelectorProps,\n} from '../basics/chapter-range-selector.component';\n\n/** Enumeration of possible book selection modes */\nexport enum BookSelectionMode {\n  CURRENT_BOOK = 'current book',\n  CHOOSE_BOOKS = 'choose books',\n}\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const BOOK_SELECTOR_STRING_KEYS = Object.freeze([\n  '%webView_bookSelector_currentBook%',\n  '%webView_bookSelector_choose%',\n  '%webView_bookSelector_chooseBooks%',\n] as const);\n\nexport type BookSelectorLocalizedStrings = {\n  [localizedBookSelectorKey in (typeof BOOK_SELECTOR_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: BookSelectorLocalizedStrings,\n  key: keyof BookSelectorLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\ntype BookSelectorProps = ChapterRangeSelectorProps & {\n  handleBookSelectionModeChange: (newMode: BookSelectionMode) => void;\n  currentBookName: string;\n  onSelectBooks: () => void;\n  selectedBookIds: string[];\n  localizedStrings: BookSelectorLocalizedStrings;\n};\n\n/**\n * BookSelector is a component that provides an interactive UI for selecting books. It can be set to\n * either allow the user to select a single book or to choose multiple books. In the former case, it\n * will display the range of chapters in the selected book, and in the latter case it will display a\n * list of the selected books.\n *\n * @param {BookSelectorProps} props\n * @param {function} props.handleBookSelectionModeChange - Callback function to handle changes in\n *   book selection mode.\n * @param {string} props.currentBookName - The name of the currently selected book.\n * @param {function} props.onSelectBooks - Callback function to handle book selection.\n * @param {string[]} props.selectedBookIds - An array of book IDs that have been selected.\n * @param {BookSelectorLocalizedStrings} props.localizedStrings - Object containing localized\n *   strings for the component.\n */\nexport function BookSelector({\n  handleBookSelectionModeChange,\n  currentBookName,\n  onSelectBooks,\n  selectedBookIds,\n  chapterCount,\n  endChapter,\n  handleSelectEndChapter,\n  startChapter,\n  handleSelectStartChapter,\n  localizedStrings,\n}: BookSelectorProps) {\n  const currentBookText = localizeString(localizedStrings, '%webView_bookSelector_currentBook%');\n  const chooseText = localizeString(localizedStrings, '%webView_bookSelector_choose%');\n  const chooseBooksText = localizeString(localizedStrings, '%webView_bookSelector_chooseBooks%');\n\n  const [bookSelectionMode, setBookSelectionMode] = useState<BookSelectionMode>(\n    BookSelectionMode.CURRENT_BOOK,\n  );\n\n  const onSelectionModeChange = (newMode: BookSelectionMode) => {\n    setBookSelectionMode(newMode);\n    handleBookSelectionModeChange(newMode);\n  };\n\n  return (\n    <RadioGroup\n      className=\"pr-twp tw-flex\"\n      value={bookSelectionMode}\n      // value is always a string but we need it to be BookSelectionMode\n      // eslint-disable-next-line no-type-assertion/no-type-assertion\n      onValueChange={(value: string) => onSelectionModeChange(value as BookSelectionMode)}\n    >\n      <div className=\"tw-flex tw-w-full tw-flex-col tw-gap-4\">\n        <div className=\"tw-grid tw-grid-cols-[25%,25%,50%]\">\n          <div className=\"tw-flex tw-items-center\">\n            <RadioGroupItem value={BookSelectionMode.CURRENT_BOOK} />\n            <Label className=\"tw-ms-1\">{currentBookText}</Label>\n          </div>\n          <Label className=\"tw-flex tw-items-center\">{currentBookName}</Label>\n          <div className=\"tw-flex tw-items-center tw-justify-end\">\n            <ChapterRangeSelector\n              isDisabled={bookSelectionMode === BookSelectionMode.CHOOSE_BOOKS}\n              handleSelectStartChapter={handleSelectStartChapter}\n              handleSelectEndChapter={handleSelectEndChapter}\n              chapterCount={chapterCount}\n              startChapter={startChapter}\n              endChapter={endChapter}\n            />\n          </div>\n        </div>\n        <div className=\"tw-grid tw-grid-cols-[25%,50%,25%]\">\n          <div className=\"tw-flex tw-items-center\">\n            <RadioGroupItem value={BookSelectionMode.CHOOSE_BOOKS} />\n            <Label className=\"tw-ms-1\">{chooseBooksText}</Label>\n          </div>\n          <Label className=\"tw-flex tw-items-center\">\n            {selectedBookIds.map((bookId: string) => Canon.bookIdToEnglishName(bookId)).join(', ')}\n          </Label>\n          <Button\n            disabled={bookSelectionMode === BookSelectionMode.CURRENT_BOOK}\n            onClick={() => onSelectBooks()}\n          >\n            {chooseText}\n          </Button>\n        </div>\n      </div>\n    </RadioGroup>\n  );\n}\n\nexport default BookSelector;\n","import { DropdownMenuTrigger } from '@radix-ui/react-dropdown-menu';\nimport { FilterIcon } from 'lucide-react';\nimport { Table } from '@tanstack/react-table';\n\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuCheckboxItem,\n  DropdownMenuContent,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n} from '@/components/shadcn-ui/dropdown-menu';\n\ninterface DataTableViewOptionsProps<TData> {\n  table: Table<TData>;\n}\n\nexport function DataTableViewOptions<TData>({ table }: DataTableViewOptionsProps<TData>) {\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\" className=\"tw-ml-auto tw-hidden tw-h-8 lg:tw-flex\">\n          <FilterIcon className=\"tw-mr-2 tw-h-4 tw-w-4\" />\n          View\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"tw-w-[150px]\">\n        <DropdownMenuLabel>Toggle columns</DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        {table\n          .getAllColumns()\n          .filter((column) => column.getCanHide())\n          .map((column) => {\n            return (\n              <DropdownMenuCheckboxItem\n                key={column.id}\n                className=\"tw-capitalize\"\n                checked={column.getIsVisible()}\n                onCheckedChange={(value) => column.toggleVisibility(!!value)}\n              >\n                {column.id}\n              </DropdownMenuCheckboxItem>\n            );\n          })}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n\nexport default DataTableViewOptions;\n","import React from 'react';\nimport * as SelectPrimitive from '@radix-ui/react-select';\nimport { Check, ChevronDown, ChevronUp } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cva, VariantProps } from 'class-variance-authority';\n\n/**\n * Props for Select component\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/select}\n */\nexport interface SelectTriggerProps\n  extends React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>,\n    VariantProps<typeof selectTriggerVariants> {\n  asChild?: boolean;\n}\n\n/**\n * Select components display a list of options for the user to pick from—triggered by a button.\n * These components are built on Radix UI primitives and styled with Shadcn UI.\n *\n * See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/select See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/select\n */\nconst Select = SelectPrimitive.Root;\n\n/** @inheritdoc Select */\nconst SelectGroup = SelectPrimitive.Group;\n\n/** @inheritdoc Select */\nconst SelectValue = SelectPrimitive.Value;\n\n/**\n * Style variants for the Select Trigger component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/button}\n */\nexport const selectTriggerVariants = cva(\n  'tw-flex tw-h-10 tw-w-full tw-items-center tw-justify-between tw-rounded-md tw-border tw-border-input tw-bg-background tw-px-3 tw-py-2 tw-text-sm tw-ring-offset-background placeholder:tw-text-muted-foreground focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50 [&>span]:tw-line-clamp-1',\n  {\n    variants: {\n      size: {\n        default: 'tw-h-10 tw-px-4 tw-py-2',\n        sm: 'tw-h-8 tw-rounded-md tw-px-3',\n        lg: 'tw-h-11 tw-rounded-md tw-px-8',\n        icon: 'tw-h-10 tw-w-10',\n      },\n    },\n    defaultVariants: {\n      size: 'default',\n    },\n  },\n);\n\n/** @inheritdoc Select */\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  SelectTriggerProps\n>(({ className, children, size, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <SelectPrimitive.Trigger\n      className={cn(selectTriggerVariants({ size, className }))}\n      ref={ref}\n      {...props}\n      dir={dir}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDown className=\"tw-h-4 tw-w-4 tw-opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  );\n});\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\n/** @inheritdoc Select */\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn('tw-flex tw-cursor-default tw-items-center tw-justify-center tw-py-1', className)}\n    {...props}\n  >\n    <ChevronUp className=\"tw-h-4 tw-w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\n/** @inheritdoc Select */\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn('tw-flex tw-cursor-default tw-items-center tw-justify-center tw-py-1', className)}\n    {...props}\n  >\n    <ChevronDown className=\"tw-h-4 tw-w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\n\n/** @inheritdoc Select */\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = 'popper', ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        ref={ref}\n        className={cn(\n          'pr-twp tw-relative tw-z-50 tw-max-h-96 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-text-popover-foreground tw-shadow-md data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n          position === 'popper' &&\n            'data-[side=bottom]:tw-translate-y-1 data-[side=left]:tw--translate-x-1 data-[side=right]:tw-translate-x-1 data-[side=top]:tw--translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'tw-p-1',\n            position === 'popper' &&\n              'tw-h-[var(--radix-select-trigger-height)] tw-w-full tw-min-w-[var(--radix-select-trigger-width)]',\n          )}\n        >\n          <div dir={dir}>{children}</div>\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  );\n});\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\n/** @inheritdoc Select */\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn('tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-font-semibold', className)}\n    {...props}\n  />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\n/** @inheritdoc Select */\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      'tw-relative tw-flex tw-w-full tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pe-2 tw-ps-8 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"tw-absolute tw-start-2 tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"tw-h-4 tw-w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\n/** @inheritdoc Select */\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-my-1 tw-h-px tw-bg-muted', className)}\n    {...props}\n  />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n","import { ChevronLeftIcon, ChevronRightIcon, ArrowLeftIcon, ArrowRightIcon } from 'lucide-react';\nimport { Table } from '@tanstack/react-table';\n\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/shadcn-ui/select';\n\ninterface DataTablePaginationProps<TData> {\n  table: Table<TData>;\n}\n\nexport function DataTablePagination<TData>({ table }: DataTablePaginationProps<TData>) {\n  return (\n    <div className=\"tw-flex tw-items-center tw-justify-between tw-px-2 tw-pb-3 tw-pt-3\">\n      <div className=\"tw-flex tw-items-center tw-space-x-6 lg:tw-space-x-8\">\n        <div className=\"tw-flex-1 tw-text-sm tw-text-muted-foreground\">\n          {table.getFilteredSelectedRowModel().rows.length} of{' '}\n          {table.getFilteredRowModel().rows.length} row(s) selected\n        </div>\n        <div className=\"tw-flex tw-items-center tw-space-x-2\">\n          <p className=\"tw-text-nowrap tw-text-sm tw-font-medium\">Rows per page</p>\n          <Select\n            value={`${table.getState().pagination.pageSize}`}\n            onValueChange={(value) => {\n              table.setPageSize(Number(value));\n            }}\n          >\n            <SelectTrigger className=\"tw-h-8 tw-w-[70px]\">\n              <SelectValue placeholder={table.getState().pagination.pageSize} />\n            </SelectTrigger>\n            <SelectContent side=\"top\">\n              {[10, 20, 30, 40, 50].map((pageSize) => (\n                <SelectItem key={pageSize} value={`${pageSize}`}>\n                  {pageSize}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        <div className=\"tw-flex tw-w-[100px] tw-items-center tw-justify-center tw-text-sm tw-font-medium\">\n          Page {table.getState().pagination.pageIndex + 1} of {table.getPageCount()}\n        </div>\n        <div className=\"tw-flex tw-items-center tw-space-x-2\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className=\"tw-hidden tw-h-8 tw-w-8 tw-p-0 lg:tw-flex\"\n            onClick={() => table.setPageIndex(0)}\n            disabled={!table.getCanPreviousPage()}\n          >\n            <span className=\"tw-sr-only\">Go to first page</span>\n            <ArrowLeftIcon className=\"tw-h-4 tw-w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className=\"tw-h-8 tw-w-8 tw-p-0\"\n            onClick={() => table.previousPage()}\n            disabled={!table.getCanPreviousPage()}\n          >\n            <span className=\"tw-sr-only\">Go to previous page</span>\n            <ChevronLeftIcon className=\"tw-h-4 tw-w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className=\"tw-h-8 tw-w-8 tw-p-0\"\n            onClick={() => table.nextPage()}\n            disabled={!table.getCanNextPage()}\n          >\n            <span className=\"tw-sr-only\">Go to next page</span>\n            <ChevronRightIcon className=\"tw-h-4 tw-w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className=\"tw-hidden tw-h-8 tw-w-8 tw-p-0 lg:tw-flex\"\n            onClick={() => table.setPageIndex(table.getPageCount() - 1)}\n            disabled={!table.getCanNextPage()}\n          >\n            <span className=\"tw-sr-only\">Go to last page</span>\n            <ArrowRightIcon className=\"tw-h-4 tw-w-4\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default DataTablePagination;\n","import React from 'react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Table components provide a responsive table. These components are built and styled with Shadcn\n * UI. See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/table\n */\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement> & { stickyHeader?: boolean }\n>(({ className, stickyHeader, ...props }, ref) => (\n  <div className={cn('pr-twp tw-relative tw-w-full', { 'tw-overflow-auto': !stickyHeader })}>\n    <table\n      ref={ref}\n      className={cn('tw-w-full tw-caption-bottom tw-text-sm', className)}\n      {...props}\n    />\n  </div>\n));\nTable.displayName = 'Table';\n\n/** @inheritdoc Table */\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement> & { stickyHeader?: boolean }\n>(({ className, stickyHeader, ...props }, ref) => (\n  <thead\n    ref={ref}\n    className={cn(\n      { 'tw-sticky tw-top-[-1px] tw-bg-background tw-drop-shadow-sm': stickyHeader },\n      '[&_tr]:tw-border-b',\n      className,\n    )}\n    {...props}\n  />\n));\nTableHeader.displayName = 'TableHeader';\n\n/** @inheritdoc Table */\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody ref={ref} className={cn('[&_tr:last-child]:tw-border-0', className)} {...props} />\n));\nTableBody.displayName = 'TableBody';\n\n/** @inheritdoc Table */\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn('tw-border-t tw-bg-muted/50 tw-font-medium [&>tr]:last:tw-border-b-0', className)}\n    {...props}\n  />\n));\nTableFooter.displayName = 'TableFooter';\n\n/** @inheritdoc Table */\nconst TableRow = React.forwardRef<HTMLTableRowElement, React.HTMLAttributes<HTMLTableRowElement>>(\n  ({ className, ...props }, ref) => (\n    <tr\n      ref={ref}\n      className={cn(\n        'tw-border-b tw-transition-colors hover:tw-bg-muted/50 data-[state=selected]:tw-bg-muted',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nTableRow.displayName = 'TableRow';\n\n/** @inheritdoc Table */\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      'tw-h-12 tw-px-4 tw-text-start tw-align-middle tw-font-medium tw-text-muted-foreground [&:has([role=checkbox])]:tw-pe-0',\n      className,\n    )}\n    {...props}\n  />\n));\nTableHead.displayName = 'TableHead';\n\n/** @inheritdoc Table */\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn('tw-p-4 tw-align-middle [&:has([role=checkbox])]:tw-pe-0', className)}\n    {...props}\n  />\n));\nTableCell.displayName = 'TableCell';\n\n/** @inheritdoc Table */\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn('tw-mt-4 tw-text-sm tw-text-muted-foreground', className)}\n    {...props}\n  />\n));\nTableCaption.displayName = 'TableCaption';\n\nexport { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };\n","import { useState } from 'react';\n\nimport {\n  ColumnFiltersState,\n  flexRender,\n  getCoreRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  SortingState,\n  ColumnDef as TSColumnDef,\n  Row as TSRow,\n  RowSelectionState as TSRowSelectionState,\n  SortDirection as TSSortDirection,\n  Table as TSTable,\n  useReactTable,\n  VisibilityState,\n} from '@tanstack/react-table';\n\nimport { DataTableViewOptions } from '@/components/advanced/data-table/data-table-column-toggle.component';\nimport { DataTablePagination } from '@/components/advanced/data-table/data-table-pagination.component';\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/shadcn-ui/table';\n\nexport type ColumnDef<TData, TValue = unknown> = TSColumnDef<TData, TValue>;\nexport type RowContents<TData> = TSRow<TData>;\nexport type TableContents<TData> = TSTable<TData>;\nexport type SortDirection = TSSortDirection;\nexport type RowSelectionState = TSRowSelectionState;\n\ninterface DataTableProps<TData, TValue> {\n  columns: ColumnDef<TData, TValue>[];\n  data: TData[];\n  enablePagination?: boolean;\n  showPaginationControls?: boolean;\n  showColumnVisibilityControls?: boolean;\n  stickyHeader?: boolean;\n  onRowClickHandler?: (row: RowContents<TData>, table: TableContents<TData>) => void;\n}\n\n/**\n * Feature-rich table component that infuses our basic shadcn-based Table component with features\n * from TanStack's React Table library\n */\nexport function DataTable<TData, TValue>({\n  columns,\n  data,\n  enablePagination = false,\n  showPaginationControls = false,\n  showColumnVisibilityControls = false,\n  stickyHeader = false,\n  onRowClickHandler = () => {},\n}: DataTableProps<TData, TValue>) {\n  const [sorting, setSorting] = useState<SortingState>([]);\n  const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);\n  const [columnVisibility, setColumnVisibility] = useState<VisibilityState>({});\n  const [rowSelection, setRowSelection] = useState({});\n\n  const table = useReactTable({\n    data,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    ...(enablePagination && { getPaginationRowModel: getPaginationRowModel() }),\n    onSortingChange: setSorting,\n    getSortedRowModel: getSortedRowModel(),\n    onColumnFiltersChange: setColumnFilters,\n    getFilteredRowModel: getFilteredRowModel(),\n    onColumnVisibilityChange: setColumnVisibility,\n    onRowSelectionChange: setRowSelection,\n    state: {\n      sorting,\n      columnFilters,\n      columnVisibility,\n      rowSelection,\n    },\n  });\n\n  return (\n    <div className=\"pr-twp\">\n      {showColumnVisibilityControls && <DataTableViewOptions table={table} />}\n      <Table stickyHeader={stickyHeader}>\n        <TableHeader stickyHeader={stickyHeader}>\n          {table.getHeaderGroups().map((headerGroup) => (\n            <TableRow key={headerGroup.id}>\n              {headerGroup.headers.map((header) => {\n                return (\n                  <TableHead key={header.id}>\n                    {header.isPlaceholder\n                      ? undefined\n                      : flexRender(header.column.columnDef.header, header.getContext())}\n                  </TableHead>\n                );\n              })}\n            </TableRow>\n          ))}\n        </TableHeader>\n        <TableBody>\n          {table.getRowModel().rows?.length ? (\n            table.getRowModel().rows.map((row) => (\n              <TableRow\n                onClick={() => onRowClickHandler(row, table)}\n                key={row.id}\n                data-state={row.getIsSelected() && 'selected'}\n              >\n                {row.getVisibleCells().map((cell) => (\n                  <TableCell key={cell.id}>\n                    {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))\n          ) : (\n            <TableRow>\n              <TableCell colSpan={columns.length} className=\"tw-h-24 tw-text-center\">\n                No results.\n              </TableCell>\n            </TableRow>\n          )}\n        </TableBody>\n      </Table>\n      {enablePagination && (\n        <div className=\"tw-flex tw-items-center tw-justify-end tw-space-x-2 tw-py-4\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => table.previousPage()}\n            disabled={!table.getCanPreviousPage()}\n          >\n            Previous\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => table.nextPage()}\n            disabled={!table.getCanNextPage()}\n          >\n            Next\n          </Button>\n        </div>\n      )}\n      {enablePagination && showPaginationControls && <DataTablePagination table={table} />}\n    </div>\n  );\n}\n\nexport default DataTable;\n","import { cn } from '@/utils/shadcn-ui.util';\nimport Markdown, { MarkdownToJSX } from 'markdown-to-jsx';\nimport { useMemo } from 'react';\n\ninterface MarkdownRendererProps {\n  /** Optional unique identifier */\n  id?: string;\n  /** The markdown string to render */\n  markdown: string;\n  className?: string;\n  /**\n   * The [`target` attribute for `a` html\n   * tags](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#target). Defaults to not\n   * adding a `target` to `a` tags\n   */\n  anchorTarget?: string;\n}\n\n/**\n * This component renders markdown content given a markdown string. It uses typography styles from\n * the platform.\n *\n * @param MarkdownRendererProps\n * @returns A div containing the rendered markdown content.\n */\nexport function MarkdownRenderer({ id, markdown, className, anchorTarget }: MarkdownRendererProps) {\n  const options: MarkdownToJSX.Options = useMemo(\n    () => ({\n      overrides: {\n        a: {\n          props: {\n            target: anchorTarget,\n          },\n        },\n      },\n    }),\n    [anchorTarget],\n  );\n  return (\n    <div id={id} className={cn('pr-twp tw-prose', className)}>\n      <Markdown options={options}>{markdown}</Markdown>\n    </div>\n  );\n}\n\nexport default MarkdownRenderer;\n","import {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuLabel,\n  DropdownMenuGroup,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n} from '@/components/shadcn-ui/dropdown-menu';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { ChevronDown, Filter } from 'lucide-react';\n\n/** The DropdownMenuItemType enum is used to determine the type of the dropdown item */\nexport enum DropdownMenuItemType {\n  Check,\n  Radio,\n}\n\nexport type DropdownItem = {\n  /** The label is the text that will be displayed on the dropdown item. */\n  label: string;\n  /** The itemType determines the DropdownMenuItemType type as either Check or Radio. */\n  itemType: DropdownMenuItemType;\n  /** The onClick function is called when the item is clicked. */\n  onClick: () => void;\n};\n\nexport type DropdownGroup = {\n  /**\n   * The label is the text that will be displayed on the dropdown group. It is used to categorize\n   * the items in the group.\n   */\n  label: string;\n  /** The items array contains the items that will be displayed in the dropdown group */\n  items: DropdownItem[];\n};\n\nexport type FilterDropdownProps = {\n  /** Object unique identifier */\n  id?: string;\n  /** Label for the trigger button */\n  label: string;\n  /** The groups array contains the groups that will be displayed in the dropdown */\n  groups: DropdownGroup[];\n}; // TODO: extend the props later\n\n/**\n * The FilterDropdown component is a dropdown designed for filtering content. It includes groups of\n * items that can be checkboxes or radio items.\n *\n * @param FilterDropdownProps\n * @returns A filter dropdown.\n */\nexport function FilterDropdown({ id, label, groups }: FilterDropdownProps) {\n  return (\n    <div id={id}>\n      {/* TODO: remove this once the DropDown Menu shadcn has an id prop */}\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"default\">\n            <Filter size={16} className=\"tw-mr-2 tw-h-4 tw-w-4\" />\n            {label}\n            <ChevronDown size={16} className=\"tw-ml-2 tw-h-4 tw-w-4\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent>\n          {groups.map((group) => (\n            <div key={group.label}>\n              <DropdownMenuLabel>{group.label}</DropdownMenuLabel>\n              <DropdownMenuGroup>\n                {group.items.map((item) => (\n                  <div key={item.label}>\n                    {item.itemType === DropdownMenuItemType.Check ? (\n                      <DropdownMenuCheckboxItem onClick={item.onClick}>\n                        {item.label}\n                      </DropdownMenuCheckboxItem>\n                    ) : (\n                      <DropdownMenuRadioItem onClick={item.onClick} value={item.label}>\n                        {item.label}\n                      </DropdownMenuRadioItem>\n                    )}\n                  </div>\n                ))}\n              </DropdownMenuGroup>\n              <DropdownMenuSeparator />\n            </div>\n          ))}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  );\n}\n\nexport default FilterDropdown;\n","import { CircleHelp, Link as LucideLink, User } from 'lucide-react';\nimport { NumberFormat } from 'platform-bible-utils';\n\n/** Interface that stores the parameters passed to the More Info component */\ninterface MoreInfoProps {\n  /** Optional unique identifier */\n  id?: string;\n  /** The category of the extension */\n  category: string;\n  /** The number of downloads for the extension */\n  downloads: Record<string, number>;\n  /** The languages supported by the extension */\n  languages: string[];\n  /** The URL to the more info page of the extension */\n  moreInfoUrl: string;\n}\n/**\n * This component displays the more info section of the extension which includes the category,\n * number of downloads, languages, and links to the website and support\n *\n * @param MoreInfoProps\n * @returns {JSX.Element} - Returns the more info component that displays the category, number of\n *   downloads, languages, and links to the website and support\n */\nexport function MoreInfo({ id, category, downloads, languages, moreInfoUrl }: MoreInfoProps) {\n  /**\n   * This constant formats the number of downloads into a more readable format.\n   *\n   * @example 1000 -> 1K\n   *\n   * @example 1000000 -> 1M\n   *\n   * @returns The formatted number of downloads\n   */\n  const numberFormatted = new NumberFormat('en', {\n    notation: 'compact',\n    compactDisplay: 'short',\n  }).format(Object.values(downloads).reduce((a: number, b: number) => a + b, 0));\n\n  /** This function scrolls the window to the bottom of the page. */\n  const handleScrollToBottom = () => {\n    window.scrollTo(0, document.body.scrollHeight);\n  };\n\n  return (\n    <div\n      id={id}\n      className=\"tw-flex tw-items-center tw-justify-center tw-gap-4 tw-divide-x tw-border-b tw-border-t tw-py-2 tw-text-center\"\n    >\n      <div className=\"tw-flex tw-flex-col tw-items-center tw-gap-1\">\n        <div className=\"tw-flex\">\n          <span className=\"tw-text-xs tw-font-semibold tw-text-foreground\">{category}</span>\n        </div>\n        <span className=\"tw-text-xs tw-text-foreground\">CATEGORY</span>\n      </div>\n      <div className=\"tw-flex tw-flex-col tw-items-center tw-gap-1 tw-ps-4\">\n        <div className=\"tw-flex tw-gap-1\">\n          <User className=\"tw-h-4 tw-w-4\" />\n          <span className=\"tw-text-xs tw-font-semibold tw-text-foreground\">{numberFormatted}</span>\n        </div>\n        <span className=\"tw-text-xs tw-text-foreground\">USERS</span>\n      </div>\n      <div className=\"tw-flex tw-flex-col tw-items-center tw-gap-1 tw-ps-4\">\n        <div className=\"tw-flex tw-gap-2\">\n          {languages.slice(0, 3).map((locale) => (\n            <span key={locale} className=\"tw-text-xs tw-font-semibold tw-text-foreground\">\n              {locale.toUpperCase()}\n            </span>\n          ))}\n        </div>\n        {languages.length > 3 && (\n          <button\n            type=\"button\"\n            onClick={() => handleScrollToBottom()}\n            className=\"tw-text-xs tw-text-foreground tw-underline\"\n          >\n            +{languages.length - 3} more languages\n          </button>\n        )}\n      </div>\n      <div className=\"tw-flex tw-flex-col tw-gap-1 tw-ps-4\">\n        <div className=\"tw-flex tw-gap-1\">\n          <a\n            href={moreInfoUrl}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            className=\"tw-flex tw-text-xs tw-font-semibold tw-text-foreground tw-underline\"\n          >\n            Website\n          </a>\n          <LucideLink className=\"tw-h-4 tw-w-4\" />\n        </div>\n        <div className=\"tw-flex tw-gap-1\">\n          <a\n            href=\"https://example.com\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            className=\"tw-flex tw-text-xs tw-font-semibold tw-text-foreground tw-underline\"\n          >\n            Support\n          </a>\n          <CircleHelp className=\"tw-h-4 tw-w-4\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default MoreInfo;\n","import { useState } from 'react';\n\nexport type VersionInformation = {\n  /** Date the version was published */\n  date: string;\n  /** Description of the changes in the version */\n  description: string;\n};\n\n/** Type to store the version history information */\nexport type VersionHistoryType = Record<string, VersionInformation>;\n\n/** Interface that stores the parameters passed to the Version History component */\ninterface VersionHistoryProps {\n  /** Optional unique identifier */\n  id?: string;\n  /** Object containing the versions mapped with their information */\n  versionHistory: VersionHistoryType;\n}\n\n/**\n * Component to render the version history information shown in the footer component. Lists the 5\n * most recent versions, with the options to show all versions by pressing a button.\n *\n * @param VersionHistoryProps\n * @returns Rendered version history for the Footer component\n */\nexport function VersionHistory({ id, versionHistory }: VersionHistoryProps) {\n  const [showAllVersions, setShowAllVersions] = useState(false);\n  const currentDate = new Date();\n\n  /**\n   * Function to format the time string for the version history in the form of 'X year(s) ago'.\n   *\n   * @param dateString ISO Date string to determine the time string from\n   * @returns Formatted time string\n   */\n  function formatTimeString(dateString: string) {\n    const date = new Date(dateString);\n    const dateDiff = new Date(currentDate.getTime() - date.getTime());\n    const yearDiff = dateDiff.getUTCFullYear() - 1970;\n    const monthDiff = dateDiff.getUTCMonth();\n    const dayDiff = dateDiff.getUTCDate() - 1;\n\n    // Determines how long ago the version was published\n    let timeString = '';\n    if (yearDiff > 0) {\n      timeString = `${yearDiff.toString()} year${yearDiff === 1 ? '' : 's'} ago`;\n    } else if (monthDiff > 0) {\n      timeString = `${monthDiff.toString()} month${monthDiff === 1 ? '' : 's'} ago`;\n    } else if (dayDiff === 0) {\n      timeString = 'today';\n    } else {\n      timeString = `${dayDiff.toString()} day${dayDiff === 1 ? '' : 's'} ago`;\n    }\n\n    return timeString;\n  }\n\n  // Sorts the version history by version number\n  const sortedEntries = Object.entries(versionHistory).sort((a, b) => b[0].localeCompare(a[0]));\n\n  return (\n    <div id={id}>\n      <h3 className=\"tw-text-md tw-font-semibold\">What`s New</h3>\n      <ul className=\"tw-list-disc tw-pl-5 tw-pr-4 tw-text-xs tw-text-foreground\">\n        {(showAllVersions ? sortedEntries : sortedEntries.slice(0, 5)).map((entry) => (\n          <div key={entry[0]} className=\"tw-mt-3 tw-flex tw-justify-between\">\n            <div className=\"tw-text-foreground\">\n              <li className=\"tw-prose tw-text-xs\">\n                <span>{entry[1].description}</span>\n              </li>\n            </div>\n            <div className=\"tw-justify-end tw-text-right\">\n              <div>Version {entry[0]}</div>\n              <div>{formatTimeString(entry[1].date)}</div>\n            </div>\n          </div>\n        ))}\n      </ul>\n      {sortedEntries.length > 5 && (\n        <button\n          type=\"button\"\n          onClick={() => setShowAllVersions(!showAllVersions)}\n          className=\"tw-text-xs tw-text-foreground tw-underline\"\n        >\n          {showAllVersions ? 'Show Less Version History' : 'Show All Version History'}\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default VersionHistory;\n","import { useMemo } from 'react';\nimport { formatBytes } from 'platform-bible-utils';\nimport { VersionHistory, VersionHistoryType } from './version-history.component';\n\n/** Interface to store the parameters passed to the Footer component */\ninterface FooterProps {\n  /** Optional unique identifier */\n  id?: string;\n  /** Name of the publisher */\n  publisherDisplayName: string;\n  /** Size of the extension file in bytes */\n  fileSize: number;\n  /** List of language codes supported by the extension */\n  locales: string[];\n  /** Object containing the version history mapped with their information */\n  versionHistory: VersionHistoryType;\n}\n\n/**\n * Component to render the footer for the extension details which contains information on the\n * publisher, version history, languages, and file size.\n *\n * @param FooterProps\n * @returns The rendered Footer component\n */\nexport function Footer({\n  id,\n  publisherDisplayName,\n  fileSize,\n  locales,\n  versionHistory,\n}: FooterProps) {\n  /** Formats the file size into a human-readable format */\n  const formattedFileSize = useMemo(() => formatBytes(fileSize), [fileSize]);\n\n  /**\n   * This function gets the display names of the languages based on the language codes.\n   *\n   * @param codes The list of language codes\n   * @returns The list of language names\n   */\n  const getLanguageNames = (codes: string[]) => {\n    const displayNames = new Intl.DisplayNames(navigator.language, { type: 'language' });\n    return codes.map((code) => displayNames.of(code));\n  };\n\n  const languageNames = getLanguageNames(locales);\n\n  return (\n    <div id={id} className=\"tw-border-t tw-py-2\">\n      <div className=\"tw-flex tw-flex-col tw-gap-2 tw-divide-y\">\n        <VersionHistory versionHistory={versionHistory} />\n        <div className=\"tw-flex tw-flex-col tw-gap-2 tw-py-2\">\n          <h2 className=\"tw-text-md tw-font-semibold\">Information</h2>\n          <div className=\"tw-flex tw-items-start tw-justify-between tw-text-xs tw-text-foreground\">\n            <p className=\"tw-flex tw-flex-col tw-justify-start tw-gap-1\">\n              <span>Publisher</span>\n              <span className=\"tw-font-semibold\">{publisherDisplayName}</span>\n              <span>Size</span>\n              <span className=\"tw-font-semibold\">{formattedFileSize}</span>\n            </p>\n            <div className=\"tw-flex tw-w-3/4 tw-items-center tw-justify-between tw-text-xs tw-text-foreground\">\n              <p className=\"tw-flex tw-flex-col tw-justify-start tw-gap-1\">\n                <span>Languages</span>\n                <span className=\"tw-font-semibold\">{languageNames.join(', ')}</span>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Style variants for the Badge component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/badge}\n */\nconst badgeVariants = cva(\n  'pr-twp tw-inline-flex tw-items-center tw-rounded-full tw-px-2.5 tw-py-0.5 tw-text-xs tw-font-semibold tw-transition-colors focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-ring focus:tw-ring-offset-2',\n  {\n    variants: {\n      variant: {\n        default:\n          'tw-border tw-border-transparent tw-bg-primary tw-text-primary-foreground hover:tw-bg-primary/80',\n        secondary:\n          'tw-border tw-border-transparent tw-bg-secondary tw-text-secondary-foreground hover:tw-bg-secondary/80',\n        muted:\n          'tw-border tw-border-transparent tw-bg-muted tw-text-muted-foreground hover:tw-bg-muted/80',\n        destructive:\n          'tw-border tw-border-transparent tw-bg-destructive tw-text-destructive-foreground hover:tw-bg-destructive/80',\n        outline: 'tw-border tw-text-foreground',\n        blueIndicator: 'tw-w-[5px] tw-h-[5px] tw-bg-blue-400 tw-px-0',\n        mutedIndicator: 'tw-w-[5px] tw-h-[5px] tw-bg-zinc-400 tw-px-0',\n        ghost: 'hover:tw-bg-accent hover:tw-text-accent-foreground tw-text-mu',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n);\n\n/**\n * Props for the Badge component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/badge}\n */\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\n/**\n * The Badge component displays a badge or a component that looks like a badge. The component is\n * built and styled by Shadcn UI.\n *\n * @param BadgeProps\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/badge}\n */\nconst Badge = React.forwardRef<HTMLDivElement, BadgeProps>(\n  ({ className, variant, ...props }, ref) => {\n    return (\n      <div ref={ref} className={cn('pr-twp', badgeVariants({ variant }), className)} {...props} />\n    );\n  },\n);\n\nBadge.displayName = 'Badge';\n\nexport { Badge, badgeVariants };\n","import { Button } from '@/components/shadcn-ui/button';\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from '@/components/shadcn-ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/shadcn-ui/popover';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Check, ChevronsUpDown, Star } from 'lucide-react';\nimport { ReactNode, useCallback, useMemo, useState } from 'react';\n\nexport type MultiSelectComboBoxEntry = {\n  value: string;\n  label: string;\n  starred?: boolean;\n};\n\nexport interface MultiSelectComboBoxProps {\n  entries: MultiSelectComboBoxEntry[];\n  getEntriesCount?: (option: MultiSelectComboBoxEntry) => number;\n  selected: string[];\n  onChange: (values: string[]) => void;\n  placeholder: string;\n  commandEmptyMessage?: string;\n  customSelectedText?: string;\n  isDisabled?: boolean;\n  sortSelected?: boolean;\n  icon?: ReactNode;\n  className?: string;\n}\n\n/**\n * MultiSelectComboBox is a component that provides a UI for selecting multiple items from a list.\n * It supports displaying a placeholder, custom selected text, and an optional icon. Users can\n * search through options and view starred items prominently.\n *\n * @param {MultiSelectComboBoxProps} props\n * @param {MultiSelectComboBoxEntry[]} props.entries - The list of entries to select from.\n * @param {function} [props.getEntriesCount] - Optional function to get the count of entries.\n * @param {string[]} props.selected - The currently selected values.\n * @param {function} props.onChange - Callback function to handle changes in selection.\n * @param {string} props.placeholder - Placeholder text when no items are selected.\n * @param {string} [props.commandEmptyMessage] - Message displayed when no entries are found.\n * @param {string} [props.customSelectedText] - Custom text to display when items are selected.\n * @param {boolean} [props.isDisabled] - Flag to disable the component.\n * @param {boolean} [props.sortSelected] - Flag to sort selected items.\n * @param {ReactNode} [props.icon] - Optional icon to display in the button.\n * @param {string} [props.className] - Additional class names for styling.\n */\nexport function MultiSelectComboBox({\n  entries,\n  getEntriesCount = undefined,\n  selected,\n  onChange,\n  placeholder,\n  commandEmptyMessage = 'No entries found',\n  customSelectedText,\n  isDisabled = false,\n  sortSelected = false,\n  icon = undefined,\n  className = undefined,\n}: MultiSelectComboBoxProps) {\n  const [open, setOpen] = useState(false);\n\n  const handleSelect = useCallback(\n    (label: string) => {\n      const value = entries.find((entry) => entry.label === label)?.value;\n      if (!value) return;\n      onChange(\n        selected.includes(value) ? selected.filter((item) => item !== value) : [...selected, value],\n      );\n    },\n    [entries, selected, onChange],\n  );\n\n  const getPlaceholderText = () => {\n    if (customSelectedText) return customSelectedText;\n    return placeholder;\n  };\n\n  const sortedOptions = useMemo(() => {\n    if (!sortSelected) return entries;\n\n    const starredItems = entries\n      .filter((opt) => opt.starred)\n      .sort((a, b) => a.label.localeCompare(b.label));\n    const nonStarredItems = entries\n      .filter((opt) => !opt.starred)\n      .sort((a, b) => {\n        const aSelected = selected.includes(a.value);\n        const bSelected = selected.includes(b.value);\n        if (aSelected && !bSelected) return -1;\n        if (!aSelected && bSelected) return 1;\n        return a.label.localeCompare(b.label);\n      });\n\n    return [...starredItems, ...nonStarredItems];\n  }, [entries, selected, sortSelected]);\n\n  return (\n    <div className={className}>\n      <Popover open={open} onOpenChange={setOpen}>\n        <PopoverTrigger asChild>\n          <Button\n            variant=\"ghost\"\n            role=\"combobox\"\n            aria-expanded={open}\n            className={cn(\n              'tw-w-full tw-justify-between',\n              selected.length > 0 && selected.length < entries.length && 'tw-border-primary',\n              'tw-group',\n            )}\n            disabled={isDisabled}\n          >\n            <div className=\"tw-flex tw-items-center tw-gap-2\">\n              <div className=\"tw-ml-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\">\n                <span className=\"tw-flex tw-h-full tw-w-full tw-items-center tw-justify-center\">\n                  {icon}\n                </span>\n              </div>\n              <div\n                className={cn({\n                  'tw-text-muted-foreground group-hover:tw-text-secondary-foreground':\n                    selected.length === 0 || selected.length === entries.length,\n                })}\n              >\n                <div className=\"tw-font-normal\">{getPlaceholderText()}</div>\n              </div>\n            </div>\n            <ChevronsUpDown className=\"tw-ml-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\" />\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent align=\"start\" className=\"tw-w-full tw-p-0\">\n          <Command>\n            <CommandInput placeholder={`Search ${placeholder.toLowerCase()}...`} />\n            <CommandList>\n              <CommandEmpty>{commandEmptyMessage}</CommandEmpty>\n              <CommandGroup>\n                {sortedOptions.map((option) => {\n                  const count: number | undefined = getEntriesCount\n                    ? getEntriesCount(option)\n                    : undefined;\n                  return (\n                    <CommandItem\n                      key={option.label}\n                      value={option.label}\n                      onSelect={handleSelect}\n                      className=\"tw-flex tw-items-center tw-gap-2\"\n                    >\n                      <div className=\"w-4\">\n                        <Check\n                          className={cn(\n                            'tw-h-4 tw-w-4',\n                            selected.includes(option.value) ? 'tw-opacity-100' : 'tw-opacity-0',\n                          )}\n                        />\n                      </div>\n                      <div className=\"tw-w-4\">\n                        {option.starred && <Star className=\"tw-h-4 tw-w-4\" />}\n                      </div>\n                      <div className=\"tw-flex-grow\">{option.label}</div>\n                      {getEntriesCount && (\n                        <div className=\"tw-w-10 tw-text-end tw-text-muted-foreground\">{count}</div>\n                      )}\n                    </CommandItem>\n                  );\n                })}\n              </CommandGroup>\n            </CommandList>\n          </Command>\n        </PopoverContent>\n      </Popover>\n    </div>\n  );\n}\n\nexport default MultiSelectComboBox;\n","import { Badge } from '@/components/shadcn-ui/badge';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { Label } from '@/components/shadcn-ui/label';\nimport { X } from 'lucide-react';\nimport { MultiSelectComboBox, MultiSelectComboBoxProps } from './multi-select-combo-box.component';\n\ninterface FilterProps extends MultiSelectComboBoxProps {\n  /**\n   * Placeholder text that will be displayed when no items are selected. It will appear at the\n   * location where the badges would be if any items were selected.\n   */\n  badgesPlaceholder: string;\n}\n\n/**\n * This is a variant of the {@link MultiSelectComboBox}, that shows a {@link Badge} component for each\n * selected item in the combo box. Clicking the 'X' icon on the badge will clear the item from the\n * selected options. A placeholder text must be provided through 'badgesPlaceholder'. This will be\n * displayed if no items are selected,\n */\nexport function Filter({\n  entries,\n  getEntriesCount,\n  selected,\n  onChange,\n  placeholder,\n  commandEmptyMessage,\n  customSelectedText,\n  isDisabled,\n  sortSelected,\n  icon,\n  className,\n  badgesPlaceholder,\n}: FilterProps) {\n  return (\n    <div className=\"tw-flex tw-items-center tw-gap-2\">\n      <MultiSelectComboBox\n        entries={entries}\n        getEntriesCount={getEntriesCount}\n        selected={selected}\n        onChange={onChange}\n        placeholder={placeholder}\n        commandEmptyMessage={commandEmptyMessage}\n        customSelectedText={customSelectedText}\n        isDisabled={isDisabled}\n        sortSelected={sortSelected}\n        icon={icon}\n        className={className}\n      />\n      {selected.length > 0 ? (\n        <div className=\"tw-flex tw-flex-wrap tw-items-center tw-gap-2\">\n          {selected.map((type) => (\n            <Badge key={type} variant=\"muted\" className=\"tw-flex tw-items-center tw-gap-1\">\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"tw-h-4 tw-w-4 tw-p-0 hover:tw-bg-transparent\"\n                onClick={() => onChange(selected.filter((selectedType) => selectedType !== type))}\n              >\n                <X className=\"tw-h-3 tw-w-3\" />\n              </Button>\n              {entries.find((entry) => entry.value === type)?.label}\n            </Badge>\n          ))}\n        </div>\n      ) : (\n        <Label>{badgesPlaceholder}</Label>\n      )}\n    </div>\n  );\n}\n\nexport default Filter;\n","import {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/shadcn-ui/table';\nimport { Canon, SerializedVerseRef } from '@sillsdev/scripture';\nimport { deepEqual, LanguageStrings } from 'platform-bible-utils';\nimport { useMemo } from 'react';\nimport { InventoryItemOccurrence } from './inventory-utils';\n\n/** Props for the OccurrencesTable component */\ntype OccurrencesTableProps = {\n  /** Data that contains scriptures references and snippets of scripture */\n  occurrenceData: InventoryItemOccurrence[];\n  /** Callback function that is executed when the scripture reference is changed */\n  setScriptureReference: (scriptureReference: SerializedVerseRef) => void;\n  /**\n   * Object with all localized strings that the OccurrencesTable needs to work well across multiple\n   * languages\n   */\n  localizedStrings: LanguageStrings;\n};\n\n/**\n * Table that shows occurrences of specified inventory item(s). The first column shows the related\n * scripture reference. The second column shows the snippet of scripture that contains the specified\n * inventory item\n */\nexport function OccurrencesTable({\n  occurrenceData,\n  setScriptureReference,\n  localizedStrings,\n}: OccurrencesTableProps) {\n  const referenceHeaderText =\n    localizedStrings['%webView_inventory_occurrences_table_header_reference%'];\n  const occurrenceHeaderText =\n    localizedStrings['%webView_inventory_occurrences_table_header_occurrence%'];\n\n  const occurrences: InventoryItemOccurrence[] = useMemo(() => {\n    const uniqueOccurrences: InventoryItemOccurrence[] = [];\n\n    occurrenceData.forEach((occurrence) => {\n      if (!uniqueOccurrences.some((uniqueOccurrence) => deepEqual(uniqueOccurrence, occurrence))) {\n        uniqueOccurrences.push(occurrence);\n      }\n    });\n\n    return uniqueOccurrences;\n  }, [occurrenceData]);\n\n  return (\n    <Table stickyHeader>\n      <TableHeader stickyHeader>\n        <TableRow>\n          <TableHead>{referenceHeaderText}</TableHead>\n          <TableHead>{occurrenceHeaderText}</TableHead>\n        </TableRow>\n      </TableHeader>\n      <TableBody>\n        {occurrences.length > 0 &&\n          occurrences.map((occurrence) => (\n            <TableRow\n              key={`${occurrence.reference.book} ${occurrence.reference.chapterNum}:${\n                occurrence.reference.verseNum\n              }-${occurrence.text}`}\n              onClick={() => {\n                setScriptureReference(occurrence.reference);\n              }}\n            >\n              <TableCell>{`${Canon.bookIdToEnglishName(occurrence.reference.book)} ${occurrence.reference.chapterNum}:${occurrence.reference.verseNum}`}</TableCell>\n              <TableCell>{occurrence.text}</TableCell>\n            </TableRow>\n          ))}\n      </TableBody>\n    </Table>\n  );\n}\n\nexport default OccurrencesTable;\n","import React from 'react';\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox';\nimport { Check } from 'lucide-react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * Checkbox component provides a control that allows the user to toggle between checked and not\n * checked. This components is built on Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/checkbox}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/checkbox}\n */\nexport const Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      'tw-peer pr-twp tw-h-4 tw-w-4 tw-shrink-0 tw-rounded-sm tw-border tw-border-primary tw-ring-offset-background focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50 data-[state=checked]:tw-bg-primary data-[state=checked]:tw-text-primary-foreground',\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn('tw-flex tw-items-center tw-justify-center tw-text-current')}\n    >\n      <Check className=\"tw-h-4 tw-w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n));\nCheckbox.displayName = CheckboxPrimitive.Root.displayName;\n\nexport default Checkbox;\n","import React from 'react';\nimport * as TogglePrimitive from '@radix-ui/react-toggle';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\nconst toggleVariants = cva(\n  'pr-twp tw-inline-flex tw-items-center tw-justify-center tw-rounded-md tw-text-sm tw-font-medium tw-ring-offset-background tw-transition-colors hover:tw-bg-muted hover:tw-text-muted-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50 data-[state=on]:tw-bg-accent data-[state=on]:tw-text-accent-foreground',\n  {\n    variants: {\n      variant: {\n        default: 'tw-bg-transparent',\n        outline:\n          'tw-border tw-border-input tw-bg-transparent hover:tw-bg-accent hover:tw-text-accent-foreground',\n      },\n      size: {\n        default: 'tw-h-10 tw-px-3',\n        sm: 'tw-h-9 tw-px-2.5',\n        lg: 'tw-h-11 tw-px-5',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n));\n\nToggle.displayName = TogglePrimitive.Root.displayName;\n\nexport { Toggle, toggleVariants };\n","import React from 'react';\nimport * as ToggleGroupPrimitive from '@radix-ui/react-toggle-group';\nimport { type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { toggleVariants } from '@/components/shadcn-ui/toggle';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/** @inheritdoc ToggleGroup */\nconst ToggleGroupContext = React.createContext<VariantProps<typeof toggleVariants>>({\n  size: 'default',\n  variant: 'default',\n});\n\n/**\n * ToggleGroup components provide a set of two-state buttons that can be toggled on or off. These\n * components are built on Radix UI primitives and styled with Shadcn UI. See Shadcn UI\n * Documentation: https://ui.shadcn.com/docs/components/toggle-group See Radix UI Documentation:\n * https://www.radix-ui.com/primitives/docs/components/toggle-group\n */\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <ToggleGroupPrimitive.Root\n      ref={ref}\n      className={cn('pr-twp tw-flex tw-items-center tw-justify-center tw-gap-1', className)}\n      {...props}\n      dir={dir}\n    >\n      <ToggleGroupContext.Provider\n        // Suppress warning produced by imported shadcn code\n        // eslint-disable-next-line react/jsx-no-constructed-context-values\n        value={{ variant, size }}\n      >\n        {children}\n      </ToggleGroupContext.Provider>\n    </ToggleGroupPrimitive.Root>\n  );\n});\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName;\n\n/** @inheritdoc ToggleGroup */\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext);\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  );\n});\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName;\n\nexport { ToggleGroup, ToggleGroupItem };\n","import { ColumnDef, SortDirection } from '@/components/advanced/data-table/data-table.component';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { ToggleGroup, ToggleGroupItem } from '@/components/shadcn-ui/toggle-group';\nimport {\n  ArrowDownIcon,\n  ArrowUpDownIcon,\n  ArrowUpIcon,\n  CircleCheckIcon,\n  CircleHelpIcon,\n  CircleXIcon,\n} from 'lucide-react';\nimport { ReactNode } from 'react';\nimport { InventoryTableData, Status } from './inventory-utils';\n\n/**\n * Gets an icon that indicates the current sorting direction based on the provided input\n *\n * @param sortDirection Sorting direction. Can be ascending ('asc'), descending ('desc') or false (\n *   i.e. not sorted)\n * @returns The appropriate sorting icon for the provided sorting direction\n */\nconst getSortingIcon = (sortDirection: false | SortDirection): ReactNode => {\n  if (sortDirection === 'asc') {\n    return <ArrowUpIcon className=\"tw-ms-2 tw-h-4 tw-w-4\" />;\n  }\n  if (sortDirection === 'desc') {\n    return <ArrowDownIcon className=\"tw-ms-2 tw-h-4 tw-w-4\" />;\n  }\n  return <ArrowUpDownIcon className=\"tw-ms-2 tw-h-4 tw-w-4\" />;\n};\n\n/**\n * Function that creates the item column for inventories\n *\n * @param itemLabel Localized label for the item column (e.g. 'Character', 'Repeated Word', etc.)\n * @returns Column that shows the inventory items. Should be used with the DataTable component\n */\nexport const inventoryItemColumn = (itemLabel: string): ColumnDef<InventoryTableData> => {\n  return {\n    accessorKey: 'item',\n    accessorFn: (row: InventoryTableData) => row.items[0],\n    header: ({ column }) => (\n      <Button variant=\"ghost\" onClick={() => column.toggleSorting(undefined)}>\n        {itemLabel}\n        {getSortingIcon(column.getIsSorted())}\n      </Button>\n    ),\n  };\n};\n\n/**\n * Function that creates the additional item columns for inventories\n *\n * @param additionalItemLabel Localized label for the additional item column (e.g. 'Preceding\n *   Marker')\n * @param additionalItemIndex Index that locates the desired item in the items array of the\n *   inventory\n * @returns Column that shows additional inventory items. Should be used with the DataTable\n *   component\n */\nexport const inventoryAdditionalItemColumn = (\n  additionalItemLabel: string,\n  additionalItemIndex: number,\n): ColumnDef<InventoryTableData> => {\n  return {\n    accessorKey: `item${additionalItemIndex}`,\n    accessorFn: (row: InventoryTableData) => row.items[additionalItemIndex],\n    header: ({ column }) => (\n      <Button variant=\"ghost\" onClick={() => column.toggleSorting(undefined)}>\n        {additionalItemLabel}\n        {getSortingIcon(column.getIsSorted())}\n      </Button>\n    ),\n  };\n};\n\n/**\n * Function that creates the count column for inventories. Should be used with the DataTable\n * component.\n *\n * @param countLabel Localized label for the count column\n * @returns Column that shows the number of occurrences of the related inventory items\n */\nexport const inventoryCountColumn = (countLabel: string): ColumnDef<InventoryTableData> => {\n  return {\n    accessorKey: 'count',\n    header: ({ column }) => (\n      <div className=\"tw-flex tw-justify-end tw-tabular-nums\">\n        <Button variant=\"ghost\" onClick={() => column.toggleSorting(undefined)}>\n          {countLabel}\n          {getSortingIcon(column.getIsSorted())}\n        </Button>\n      </div>\n    ),\n    cell: ({ row }) => <div className=\"tw-flex tw-justify-end\">{row.getValue('count')}</div>,\n  };\n};\n\n/**\n * Function that updates project settings when status for item(s) changes\n *\n * @param changedItems Array of items for which the status is being updated\n * @param newStatus The status that the items are being given\n * @param approvedItems Array of currently approved items\n * @param onApprovedItemsChange Callback function that stores the updated list of approved items\n * @param unapprovedItems Array of currently unapproved items\n * @param onUnapprovedItemsChange Callback function that stores the updated list of unapproved items\n */\nconst statusChangeHandler = (\n  changedItems: string[],\n  newStatus: Status,\n  approvedItems: string[],\n  onApprovedItemsChange: (items: string[]) => void,\n  unapprovedItems: string[],\n  onUnapprovedItemsChange: (items: string[]) => void,\n) => {\n  let newApprovedItems: string[] = [...approvedItems];\n  changedItems.forEach((item) => {\n    if (newStatus === 'approved') {\n      if (!newApprovedItems.includes(item)) {\n        newApprovedItems.push(item);\n      }\n    } else {\n      newApprovedItems = newApprovedItems.filter((validItem) => validItem !== item);\n    }\n  });\n  onApprovedItemsChange(newApprovedItems);\n\n  let newUnapprovedItems: string[] = [...unapprovedItems];\n  changedItems.forEach((item) => {\n    if (newStatus === 'unapproved') {\n      if (!newUnapprovedItems.includes(item)) {\n        newUnapprovedItems.push(item);\n      }\n    } else {\n      newUnapprovedItems = newUnapprovedItems.filter((unapprovedItem) => unapprovedItem !== item);\n    }\n  });\n  onUnapprovedItemsChange(newUnapprovedItems);\n};\n\n/**\n * Function that creates the status column for inventories. Should be used with the DataTable\n * component.\n *\n * @param statusLabel Localized label for the status column\n * @param approvedItems Array of approved items, typically as defined in `Settings.xml`\n * @param onApprovedItemsChange Callback function that stores the updated list of approved items\n * @param unapprovedItems Array of unapproved items, typically as defined in `Settings.xml`\n * @param onUnapprovedItemsChange Callback function that stores the updated list of unapproved items\n * @returns Column that shows the status buttons for the related inventory item. The button for the\n *   current status of the item is selected\n */\nexport const inventoryStatusColumn = (\n  statusLabel: string,\n  approvedItems: string[],\n  onApprovedItemsChange: (items: string[]) => void,\n  unapprovedItems: string[],\n  onUnapprovedItemsChange: (items: string[]) => void,\n): ColumnDef<InventoryTableData> => {\n  return {\n    accessorKey: 'status',\n    header: ({ column }) => {\n      return (\n        <div className=\"tw-flex tw-justify-center\">\n          <Button variant=\"ghost\" onClick={() => column.toggleSorting(undefined)}>\n            {statusLabel}\n            {getSortingIcon(column.getIsSorted())}\n          </Button>\n        </div>\n      );\n    },\n    cell: ({ row }) => {\n      const status: Status = row.getValue('status');\n      const item: string = row.getValue('item');\n      return (\n        <ToggleGroup value={status} variant=\"outline\" type=\"single\">\n          <ToggleGroupItem\n            onClick={(event) => {\n              event.stopPropagation();\n              statusChangeHandler(\n                [item],\n                'approved',\n                approvedItems,\n                onApprovedItemsChange,\n                unapprovedItems,\n                onUnapprovedItemsChange,\n              );\n            }}\n            value=\"approved\"\n          >\n            <CircleCheckIcon />\n          </ToggleGroupItem>\n          <ToggleGroupItem\n            onClick={(event) => {\n              event.stopPropagation();\n              statusChangeHandler(\n                [item],\n                'unapproved',\n                approvedItems,\n                onApprovedItemsChange,\n                unapprovedItems,\n                onUnapprovedItemsChange,\n              );\n            }}\n            value=\"unapproved\"\n          >\n            <CircleXIcon />\n          </ToggleGroupItem>\n          <ToggleGroupItem\n            onClick={(event) => {\n              event.stopPropagation();\n              statusChangeHandler(\n                [item],\n                'unknown',\n                approvedItems,\n                onApprovedItemsChange,\n                unapprovedItems,\n                onUnapprovedItemsChange,\n              );\n            }}\n            value=\"unknown\"\n          >\n            <CircleHelpIcon />\n          </ToggleGroupItem>\n        </ToggleGroup>\n      );\n    },\n  };\n};\n","import { SerializedVerseRef } from '@sillsdev/scripture';\n\n/* #region Types */\n\n/**\n * Status of items that appear in inventories. 'approved' and 'unapproved' items are defined in the\n * project's `Settings.xml`. All other items are defined as 'unknown'\n */\nexport type Status = 'approved' | 'unapproved' | 'unknown';\n\n/** Occurrence of item in inventory. Primarily used by table that shows occurrences */\nexport type InventoryItemOccurrence = {\n  /** Reference to scripture where the item appears */\n  reference: SerializedVerseRef;\n  /** Snippet of scripture that contains the occurrence */\n  text: string;\n};\n\n/** Data structure that contains all information on an item that is shown in an inventory */\nexport type InventoryTableData = {\n  /**\n   * The item (e.g. a character in the characters inventory, a marker in the marker inventory) In\n   * most cases the array will only have one element. In case of additional items (e.g. the\n   * preceding marker in the markers check), the primary item should be stored in the first index.\n   * To show additional items in the inventory, make sure to configure the `additionalItemsLabels`\n   * prop for the Inventory component\n   */\n  items: string[];\n  /** The number of times this item occurs in the selected scope */\n  count: number;\n  /** The status of this item (see documentation for `Status` type for more information) */\n  status: Status;\n  /** Occurrences of this item in the scripture text for the selected scope */\n  occurrences: InventoryItemOccurrence[];\n};\n\n/* #endregion */\n\n/* #region Functions */\n\n/**\n * Splits USFM string into shorter line-like segments\n *\n * @param text A single (likely very large) USFM string\n * @returns An array containing the input text, split into shorter segments\n */\nexport const getLinesFromUSFM = (text: string) => {\n  // Splits on (CR)LF, CR, \\v, \\c and \\id\n  return text.split(/(?:\\r?\\n|\\r)|(?=(?:\\\\(?:v|c|id)))/g);\n};\n\n/**\n * Extracts chapter or verse number from USFM strings that start with a \\c or \\v marker\n *\n * @param text USFM string that is expected to start with \\c or \\v marker\n * @returns Chapter or verse number if one is found. Else returns 0.\n */\nexport const getNumberFromUSFM = (text: string): number | undefined => {\n  // Captures all digits that follow \\v or \\c markers followed by whitespace located at the start of a string\n  const regex = /^\\\\[vc]\\s+(\\d+)/;\n  const match = text.match(regex);\n\n  if (match) {\n    return +match[1];\n  }\n  return undefined;\n};\n\n/**\n * Gets book ID from USFM string that starts with the \\id marker, and returns book number for it\n *\n * @param text USFM string that is expected to start with \\id marker\n * @returns Book number corresponding to the \\id marker in the input text. Returns 0 if no marker is\n *   found or the marker is not valid\n */\nexport const getBookIdFromUSFM = (text: string): string => {\n  // Captures all digits that follow an \\id marker followed by whitespace located at the start of a string\n  const match = text.match(/^\\\\id\\s+([A-Za-z]+)/);\n  if (match) {\n    return match[1];\n  }\n  return '';\n};\n\n/**\n * Gets the status for an item, typically used in the Inventory component\n *\n * @param item The item for which the status is being requested\n * @param approvedItems Array of approved items, typically as defined in `Settings.xml`\n * @param unapprovedItems Array of unapproved items, typically as defined in `Settings.xml`\n * @returns The status for the specified item\n */\nexport const getStatusForItem = (\n  item: string,\n  approvedItems: string[],\n  unapprovedItems: string[],\n): Status => {\n  if (unapprovedItems.includes(item)) return 'unapproved';\n  if (approvedItems.includes(item)) return 'approved';\n  return 'unknown';\n};\n\n/* #endregion */\n","import {\n  ColumnDef,\n  DataTable,\n  RowContents,\n  RowSelectionState,\n  TableContents,\n} from '@/components/advanced/data-table/data-table.component';\nimport { OccurrencesTable } from '@/components/advanced/inventory/occurrences-table.component';\nimport { Checkbox } from '@/components/shadcn-ui/checkbox';\nimport { Input } from '@/components/shadcn-ui/input';\nimport { Label } from '@/components/shadcn-ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/shadcn-ui/select';\nimport { Scope } from '@/components/utils/scripture.util';\nimport { SerializedVerseRef } from '@sillsdev/scripture';\nimport { deepEqual, isString, LocalizedStringValue } from 'platform-bible-utils';\nimport { useEffect, useMemo, useState } from 'react';\nimport { inventoryAdditionalItemColumn } from './inventory-columns';\nimport {\n  getStatusForItem,\n  InventoryItemOccurrence,\n  InventoryTableData,\n  Status,\n} from './inventory-utils';\n\n/** Represents an item in the inventory with associated text and verse reference. */\nexport type InventoryItem = {\n  /**\n   * The label by which the item is shown in the inventory (e.g. the word that is repeated in case\n   * of the Repeated Words check). It serves as a unique identifier for the item. It usually is a\n   * string, but can be a string[] when there are multiple defining attributes (e.g. when 'show\n   * preceding marker' is enabled for the Markers Inventory, the preceding marker will be stored as\n   * the second item in the array)\n   */\n  inventoryText: string | string[];\n  /** The snippet of scripture where this occurrence of the `inventoryItem` is found */\n  verse: string;\n  /** The reference to the location where the `verse` can be found in scripture */\n  verseRef: SerializedVerseRef;\n  /**\n   * Offset used to locate the `inventoryText` (or inventoryText[0] in case of an array) in the\n   * `verse` string\n   */\n  offset: number;\n};\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const INVENTORY_STRING_KEYS = Object.freeze([\n  '%webView_inventory_all%',\n  '%webView_inventory_approved%',\n  '%webView_inventory_unapproved%',\n  '%webView_inventory_unknown%',\n  '%webView_inventory_scope_currentBook%',\n  '%webView_inventory_scope_chapter%',\n  '%webView_inventory_scope_verse%',\n  '%webView_inventory_filter_text%',\n  '%webView_inventory_show_additional_items%',\n  '%webView_inventory_occurrences_table_header_reference%',\n  '%webView_inventory_occurrences_table_header_occurrence%',\n] as const);\n\nexport type InventoryLocalizedStrings = {\n  [localizedInventoryKey in (typeof INVENTORY_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/** Status values that the status filter can select from */\ntype StatusFilter = Status | 'all';\n\n/** Text labels for the inventory columns and the control components of additional inventory items */\ntype AdditionalItemsLabels = {\n  checkboxText?: string;\n  tableHeaders?: string[];\n};\n\n/**\n * Filters data that is shown in the DataTable section of the Inventory\n *\n * @param itemData All inventory items and their related information\n * @param statusFilter Allows filtering by status (i.e. show all items, or only items that are\n *   'approved', 'unapproved' or 'unknown')\n * @param textFilter Allows filtering by text. All items that include the filter text will be\n *   selected.\n * @returns Array of items and their related information that are matched by the specified filters\n */\nconst filterItemData = (\n  itemData: InventoryTableData[],\n  statusFilter: StatusFilter,\n  textFilter: string,\n): InventoryTableData[] => {\n  let filteredItemData: InventoryTableData[] = itemData;\n\n  if (statusFilter !== 'all') {\n    filteredItemData = filteredItemData.filter(\n      (item) =>\n        (statusFilter === 'approved' && item.status === 'approved') ||\n        (statusFilter === 'unapproved' && item.status === 'unapproved') ||\n        (statusFilter === 'unknown' && item.status === 'unknown'),\n    );\n  }\n\n  if (textFilter !== '')\n    filteredItemData = filteredItemData.filter((item) => item.items[0].includes(textFilter));\n\n  return filteredItemData;\n};\n\n/**\n * Turns array of strings into array of inventory items, along with their count and status. The\n * approvedItems and unapprovedItems arrays are used to determine the status of each item, by\n * matching them to the `inventoryText` of the InventoryItem.\n *\n * @param inventoryItems Detailed information on the items that are to be shown in the inventory\n * @param approvedItems Array of approved items, typically as defined in `Settings.xml`\n * @param unapprovedItems Array of unapproved items, typically as defined in `Settings.xml`\n * @returns Array of inventory items, along with their count and status\n */\nconst processInventoryItems = (\n  inventoryItems: InventoryItem[],\n  approvedItems: string[],\n  unapprovedItems: string[],\n): InventoryTableData[] => {\n  const tableData: InventoryTableData[] = [];\n\n  inventoryItems.forEach((item) => {\n    const existingItem = tableData.find((tableEntry) =>\n      deepEqual(\n        tableEntry.items,\n        isString(item.inventoryText) ? [item.inventoryText] : item.inventoryText,\n      ),\n    );\n\n    if (existingItem) {\n      existingItem.count += 1;\n      existingItem.occurrences.push({\n        reference: item.verseRef,\n        text: item.verse,\n      });\n    } else {\n      const newItem: InventoryTableData = {\n        items: isString(item.inventoryText) ? [item.inventoryText] : item.inventoryText,\n        count: 1,\n        status: getStatusForItem(\n          isString(item.inventoryText) ? item.inventoryText : item.inventoryText[0],\n          approvedItems,\n          unapprovedItems,\n        ),\n        occurrences: [\n          {\n            reference: item.verseRef,\n            text: item.verse,\n          },\n        ],\n      };\n      tableData.push(newItem);\n    }\n  });\n\n  return tableData;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: InventoryLocalizedStrings,\n  key: keyof InventoryLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\n/** Props for the Inventory component */\ntype InventoryProps = {\n  /** The inventory items that the inventory should be populated with */\n  inventoryItems: InventoryItem[];\n  /** Callback function that is executed when the scripture reference is changed */\n  setVerseRef: (scriptureReference: SerializedVerseRef) => void;\n  /**\n   * Object with all localized strings that the Inventory needs to work well across multiple\n   * languages. When using this component with Platform.Bible, you can import\n   * `INVENTORY_STRING_KEYS` from this library, pass it in to the Platform's localization hook, and\n   * pass the localized keys that are returned by the hook into this prop.\n   */\n  localizedStrings: InventoryLocalizedStrings;\n  /**\n   * Text labels for control elements and additional column headers in case your Inventory has more\n   * than one item to show (e.g. The 'Preceding Marker' in the Markers Inventory)\n   */\n  additionalItemsLabels?: AdditionalItemsLabels;\n  /** Array of approved items, typically as defined in `Settings.xml` */\n  approvedItems: string[];\n  /** Array of unapproved items, typically as defined in `Settings.xml` */\n  unapprovedItems: string[];\n  /** Scope of scripture that the inventory will operate on */\n  scope: Scope;\n  /** Callback function that is executed when the scope is changed from the Inventory */\n  onScopeChange: (scope: Scope) => void;\n  /**\n   * Column definitions for the Inventory data table. The most commonly used column definitions are\n   * pre-configured for your convenience and can be imported (e.g. inventoryItemColumn,\n   * inventoryAdditionalItemColumn inventoryCountColumn, and inventoryStatusColumn). If you need any\n   * other columns you can add these yourself\n   */\n  columns: ColumnDef<InventoryTableData>[];\n};\n\n/** Inventory component that is used to view and control the status of provided project settings */\nexport function Inventory({\n  inventoryItems,\n  setVerseRef,\n  localizedStrings,\n  additionalItemsLabels,\n  approvedItems,\n  unapprovedItems,\n  scope,\n  onScopeChange,\n  columns,\n}: InventoryProps) {\n  const allItemsText = localizeString(localizedStrings, '%webView_inventory_all%');\n  const approvedItemsText = localizeString(localizedStrings, '%webView_inventory_approved%');\n  const unapprovedItemsText = localizeString(localizedStrings, '%webView_inventory_unapproved%');\n  const unknownItemsText = localizeString(localizedStrings, '%webView_inventory_unknown%');\n  const scopeBookText = localizeString(localizedStrings, '%webView_inventory_scope_currentBook%');\n  const scopeChapterText = localizeString(localizedStrings, '%webView_inventory_scope_chapter%');\n  const filterText = localizeString(localizedStrings, '%webView_inventory_filter_text%');\n  const showAdditionalItemsText = localizeString(\n    localizedStrings,\n    '%webView_inventory_show_additional_items%',\n  );\n\n  const [showAdditionalItems, setShowAdditionalItems] = useState<boolean>(false);\n  const [statusFilter, setStatusFilter] = useState<StatusFilter>('all');\n  const [textFilter, setTextFilter] = useState<string>('');\n  const [selectedItem, setSelectedItem] = useState<string[]>([]);\n\n  const tableData: InventoryTableData[] = useMemo(() => {\n    if (inventoryItems.length === 0) return [];\n    return processInventoryItems(inventoryItems, approvedItems, unapprovedItems);\n  }, [inventoryItems, approvedItems, unapprovedItems]);\n\n  const reducedTableData: InventoryTableData[] = useMemo(() => {\n    if (showAdditionalItems) return tableData;\n\n    const newTableData: InventoryTableData[] = [];\n\n    tableData.forEach((tableEntry) => {\n      const firstItem = tableEntry.items[0];\n\n      const existingEntry = newTableData.find(\n        (newTableEntry) => newTableEntry.items[0] === firstItem,\n      );\n\n      if (existingEntry) {\n        existingEntry.count += tableEntry.count;\n        existingEntry.occurrences = existingEntry.occurrences.concat(tableEntry.occurrences);\n      } else {\n        newTableData.push({\n          items: [firstItem],\n          count: tableEntry.count,\n          occurrences: tableEntry.occurrences,\n          status: tableEntry.status,\n        });\n      }\n    });\n\n    return newTableData;\n  }, [showAdditionalItems, tableData]);\n\n  const filteredTableData: InventoryTableData[] = useMemo(() => {\n    return filterItemData(reducedTableData, statusFilter, textFilter);\n  }, [reducedTableData, statusFilter, textFilter]);\n\n  const allColumns: ColumnDef<InventoryTableData>[] = useMemo(() => {\n    if (!showAdditionalItems) return columns;\n\n    const numberOfAdditionalItems = additionalItemsLabels?.tableHeaders?.length;\n    if (!numberOfAdditionalItems) return columns;\n\n    const additionalColumns: ColumnDef<InventoryTableData>[] = [];\n\n    for (let index = 0; index < numberOfAdditionalItems; index++) {\n      additionalColumns.push(\n        inventoryAdditionalItemColumn(\n          additionalItemsLabels?.tableHeaders?.[index] || 'Additional Item',\n          index + 1,\n        ),\n      );\n    }\n\n    return [...additionalColumns, ...columns];\n  }, [additionalItemsLabels?.tableHeaders, columns, showAdditionalItems]);\n\n  useEffect(() => {\n    if (filteredTableData.length === 0) {\n      setSelectedItem([]);\n    } else if (filteredTableData.length === 1) {\n      setSelectedItem(filteredTableData[0].items);\n    }\n  }, [filteredTableData]);\n\n  const rowClickHandler = (\n    row: RowContents<InventoryTableData>,\n    table: TableContents<InventoryTableData>,\n  ) => {\n    table.setRowSelection(() => {\n      const newSelection: RowSelectionState = {};\n      newSelection[row.index] = true;\n      return newSelection;\n    });\n\n    setSelectedItem(row.original.items);\n  };\n\n  const handleScopeChange = (value: string) => {\n    if (value === 'book' || value === 'chapter') {\n      onScopeChange(value);\n    } else {\n      throw new Error(`Invalid scope value: ${value}`);\n    }\n  };\n\n  const handleStatusFilterChange = (value: string) => {\n    if (value === 'all' || value === 'approved' || value === 'unapproved' || value === 'unknown') {\n      setStatusFilter(value);\n    } else {\n      throw new Error(`Invalid status filter value: ${value}`);\n    }\n  };\n\n  const occurrenceData: InventoryItemOccurrence[] = useMemo(() => {\n    if (reducedTableData.length === 0 || selectedItem.length === 0) return [];\n    const occurrence = reducedTableData.filter((tableEntry: InventoryTableData) => {\n      return deepEqual(\n        showAdditionalItems ? tableEntry.items : [tableEntry.items[0]],\n        selectedItem,\n      );\n    });\n    if (occurrence.length > 1) throw new Error('Selected item is not unique');\n    if (occurrence.length === 0) return [];\n    return occurrence[0].occurrences;\n  }, [selectedItem, showAdditionalItems, reducedTableData]);\n\n  return (\n    <div className=\"pr-twp tw-flex tw-h-full tw-flex-col\">\n      <div className=\"tw-flex tw-items-stretch\">\n        <Select\n          onValueChange={(value) => handleStatusFilterChange(value)}\n          defaultValue={statusFilter}\n        >\n          <SelectTrigger className=\"tw-m-1\">\n            <SelectValue placeholder=\"Select filter\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">{allItemsText}</SelectItem>\n            <SelectItem value=\"approved\">{approvedItemsText}</SelectItem>\n            <SelectItem value=\"unapproved\">{unapprovedItemsText}</SelectItem>\n            <SelectItem value=\"unknown\">{unknownItemsText}</SelectItem>\n          </SelectContent>\n        </Select>\n        <Select onValueChange={(value) => handleScopeChange(value)} defaultValue={scope}>\n          <SelectTrigger className=\"tw-m-1\">\n            <SelectValue placeholder=\"Select scope\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"book\">{scopeBookText}</SelectItem>\n            <SelectItem value=\"chapter\">{scopeChapterText}</SelectItem>\n          </SelectContent>\n        </Select>\n        <Input\n          className=\"tw-m-1 tw-rounded-md tw-border\"\n          placeholder={filterText}\n          value={textFilter}\n          onChange={(event) => {\n            setTextFilter(event.target.value);\n          }}\n        />\n        {additionalItemsLabels && (\n          <div className=\"tw-m-1 tw-flex tw-items-center tw-rounded-md tw-border\">\n            <Checkbox\n              className=\"tw-m-1\"\n              checked={showAdditionalItems}\n              onCheckedChange={(checked: boolean) => {\n                setShowAdditionalItems(checked);\n              }}\n            />\n            <Label className=\"tw-m-1 tw-flex-shrink-0 tw-whitespace-nowrap\">\n              {additionalItemsLabels?.checkboxText ?? showAdditionalItemsText}\n            </Label>\n          </div>\n        )}\n      </div>\n      <div className=\"tw-m-1 tw-flex-1 tw-overflow-auto tw-rounded-md tw-border\">\n        <DataTable\n          columns={allColumns}\n          data={filteredTableData}\n          onRowClickHandler={rowClickHandler}\n          stickyHeader\n        />\n      </div>\n      {occurrenceData.length > 0 && (\n        <div className=\"tw-m-1 tw-flex-1 tw-overflow-auto tw-rounded-md tw-border\">\n          <OccurrencesTable\n            occurrenceData={occurrenceData}\n            setScriptureReference={setVerseRef}\n            localizedStrings={localizedStrings}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Inventory;\n","import React from 'react';\nimport * as SeparatorPrimitive from '@radix-ui/react-separator';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * The Separator component visually or semantically separates content. This component is built on\n * Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/separator}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/separator}\n */\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(({ className, orientation = 'horizontal', decorative = true, ...props }, ref) => (\n  <SeparatorPrimitive.Root\n    ref={ref}\n    decorative={decorative}\n    orientation={orientation}\n    className={cn(\n      'pr-twp tw-shrink-0 tw-bg-border',\n      orientation === 'horizontal' ? 'tw-h-[1px] tw-w-full' : 'tw-h-full tw-w-[1px]',\n      className,\n    )}\n    {...props}\n  />\n));\nSeparator.displayName = SeparatorPrimitive.Root.displayName;\n\nexport { Separator };\n","import React from 'react';\nimport { cn } from '@/utils/shadcn-ui.util';\n\nfunction Skeleton({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn('pr-twp tw-animate-pulse tw-rounded-md tw-bg-muted', className)}\n      {...props}\n    />\n  );\n}\n\nexport { Skeleton };\n","import React from 'react';\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/** @inheritdoc Tooltip */\nconst TooltipProvider = TooltipPrimitive.Provider;\n\n/**\n * Tooltip components provide a popover that displays information related to an element when hovered\n * or focused. These components are built on Radix UI primitives and styled with Shadcn UI. See\n * Shadcn UI Documentation: https://ui.shadcn.com/docs/components/tooltip See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/tooltip\n */\nconst Tooltip = TooltipPrimitive.Root;\n\n/** @inheritdoc Tooltip */\nconst TooltipTrigger = TooltipPrimitive.Trigger;\n\n/** @inheritdoc Tooltip */\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      'pr-twp tw-z-50 tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-px-3 tw-py-1.5 tw-text-sm tw-text-popover-foreground tw-shadow-md tw-animate-in tw-fade-in-0 tw-zoom-in-95 data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=closed]:tw-zoom-out-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n      className,\n    )}\n    {...props}\n  />\n));\nTooltipContent.displayName = TooltipPrimitive.Content.displayName;\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };\n","import React from 'react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { VariantProps, cva } from 'class-variance-authority';\nimport { PanelLeft, PanelRight } from 'lucide-react';\n\nimport { Button } from '@/components/shadcn-ui/button';\nimport { Input } from '@/components/shadcn-ui/input';\nimport { Separator } from '@/components/shadcn-ui/separator';\nimport { Skeleton } from '@/components/shadcn-ui/skeleton';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/shadcn-ui/tooltip';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * CUSTOM: Changes from the original code from Shadcn- Removed uses of useIsMobile, Sheet, and\n * SheetContent. Also removed the parts setting COOKIES.\n */\n\nconst SIDEBAR_WIDTH = '16rem';\nconst SIDEBAR_WIDTH_ICON = '3rem';\n// CUSTOM: Commented this out pending a discussion with UX about keyboard shortcuts\n// const SIDEBAR_KEYBOARD_SHORTCUT = 'b';\n\ntype Side = 'primary' | 'secondary';\n\ntype SidebarContextProps = {\n  state: 'expanded' | 'collapsed';\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  toggleSidebar: () => void;\n  // CUSTOM: this was moved from Sidebar to SidebarProvider to also be able to flip the icon based on the side\n  side: Side;\n};\n\nconst SidebarContext = React.createContext<SidebarContextProps | undefined>(undefined);\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error('useSidebar must be used within a SidebarProvider.');\n  }\n\n  return context;\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & {\n    defaultOpen?: boolean;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n    side?: Side;\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      side = 'primary',\n      ...props\n    },\n    ref,\n  ) => {\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const [_open, _setOpen] = React.useState(defaultOpen);\n    const isOpen = openProp ?? _open;\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === 'function' ? value(isOpen) : value;\n        if (setOpenProp) {\n          setOpenProp(openState);\n        } else {\n          _setOpen(openState);\n        }\n      },\n      [setOpenProp, isOpen],\n    );\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return setOpen((open) => !open);\n    }, [setOpen]);\n\n    // CUSTOM: Commented this out pending a discussion with UX about keyboard shortcuts\n    // Adds a keyboard shortcut to toggle the sidebar.\n    // React.useEffect(() => {\n    //   const handleKeyDown = (event: KeyboardEvent) => {\n    //     if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\n    //       event.preventDefault();\n    //       toggleSidebar();\n    //     }\n    //   };\n\n    //   window.addEventListener('keydown', handleKeyDown);\n    //   return () => window.removeEventListener('keydown', handleKeyDown);\n    // }, [toggleSidebar]);\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = isOpen ? 'expanded' : 'collapsed';\n\n    const dir: Direction = readDirection();\n    const oppositeSide: Side = side === 'primary' ? 'secondary' : 'primary';\n    const directionAwareSide = dir === 'ltr' ? side : oppositeSide;\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open: isOpen,\n        setOpen,\n        toggleSidebar,\n        side: directionAwareSide,\n      }),\n      [state, isOpen, setOpen, toggleSidebar, directionAwareSide],\n    );\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              // eslint-disable-next-line no-type-assertion/no-type-assertion\n              {\n                '--sidebar-width': SIDEBAR_WIDTH,\n                '--sidebar-width-icon': SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              // Removed tw-min-h-svh\n              'tw-group/sidebar-wrapper pr-twp tw-flex tw-w-full has-[[data-variant=inset]]:tw-bg-sidebar',\n              className,\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    );\n  },\n);\nSidebarProvider.displayName = 'SidebarProvider';\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & {\n    variant?: 'sidebar' | 'floating' | 'inset';\n    collapsible?: 'offcanvas' | 'icon' | 'none';\n  }\n>(({ variant = 'sidebar', collapsible = 'offcanvas', className, children, ...props }, ref) => {\n  const context = useSidebar();\n\n  if (collapsible === 'none') {\n    return (\n      <div\n        className={cn(\n          'tw-flex tw-h-full tw-w-[--sidebar-width] tw-flex-col tw-bg-sidebar tw-text-sidebar-foreground',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={ref}\n      className=\"tw-group tw-peer tw-hidden tw-text-sidebar-foreground md:tw-block\"\n      data-state={context.state}\n      data-collapsible={context.state === 'collapsed' ? collapsible : ''}\n      data-variant={variant}\n      data-side={context.side}\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        className={cn(\n          'tw-relative tw-h-svh tw-w-[--sidebar-width] tw-bg-transparent tw-transition-[width] tw-duration-200 tw-ease-linear',\n          'group-data-[collapsible=offcanvas]:tw-w-0',\n          'group-data-[side=secondary]:tw-rotate-180',\n          variant === 'floating' || variant === 'inset'\n            ? 'group-data-[collapsible=icon]:tw-w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]'\n            : 'group-data-[collapsible=icon]:tw-w-[--sidebar-width-icon]',\n        )}\n      />\n      <div\n        className={cn(\n          // CUSTOM: Switched tw-fixed to tw-absolute here to scope the sidebar inside of it's container\n          'tw-absolute tw-inset-y-0 tw-z-10 tw-hidden tw-h-svh tw-w-[--sidebar-width] tw-transition-[left,right,width] tw-duration-200 tw-ease-linear md:tw-flex',\n          context.side === 'primary'\n            ? 'tw-left-0 group-data-[collapsible=offcanvas]:tw-left-[calc(var(--sidebar-width)*-1)]'\n            : 'tw-right-0 group-data-[collapsible=offcanvas]:tw-right-[calc(var(--sidebar-width)*-1)]',\n          // Adjust the padding for floating and inset variants.\n          variant === 'floating' || variant === 'inset'\n            ? 'tw-p-2 group-data-[collapsible=icon]:tw-w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]'\n            : 'group-data-[collapsible=icon]:tw-w-[--sidebar-width-icon] group-data-[side=primary]:tw-border-r group-data-[side=secondary]:tw-border-l',\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          className=\"tw-flex tw-h-full tw-w-full tw-flex-col tw-bg-sidebar group-data-[variant=floating]:tw-rounded-lg group-data-[variant=floating]:tw-border group-data-[variant=floating]:tw-border-sidebar-border group-data-[variant=floating]:tw-shadow\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n});\nSidebar.displayName = 'Sidebar';\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const context = useSidebar();\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn('tw-h-7 tw-w-7', className)}\n      onClick={(event) => {\n        onClick?.(event);\n        context.toggleSidebar();\n      }}\n      {...props}\n    >\n      {context.side === 'primary' ? <PanelLeft /> : <PanelRight />}\n      <span className=\"tw-sr-only\">Toggle Sidebar</span>\n    </Button>\n  );\n});\nSidebarTrigger.displayName = 'SidebarTrigger';\n\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<'button'>>(\n  ({ className, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <button\n        type=\"button\"\n        ref={ref}\n        data-sidebar=\"rail\"\n        aria-label=\"Toggle Sidebar\"\n        tabIndex={-1}\n        onClick={toggleSidebar}\n        title=\"Toggle Sidebar\"\n        className={cn(\n          'tw-absolute tw-inset-y-0 tw-z-20 tw-hidden tw-w-4 tw--translate-x-1/2 tw-transition-all tw-ease-linear after:tw-absolute after:tw-inset-y-0 after:tw-left-1/2 after:tw-w-[2px] hover:after:tw-bg-sidebar-border group-data-[side=primary]:tw--right-4 group-data-[side=secondary]:tw-left-0 sm:tw-flex',\n          '[[data-side=secondary]_&]:tw-cursor-e-resize [[data-side=secondary]_&]:tw-cursor-w-resize',\n          '[[data-side=primary][data-state=collapsed]_&]:tw-cursor-e-resize [[data-side=secondary][data-state=collapsed]_&]:tw-cursor-w-resize',\n          'group-data-[collapsible=offcanvas]:tw-translate-x-0 group-data-[collapsible=offcanvas]:after:tw-left-full group-data-[collapsible=offcanvas]:hover:tw-bg-sidebar',\n          '[[data-side=primary][data-collapsible=offcanvas]_&]:tw--right-2',\n          '[[data-side=secondary][data-collapsible=offcanvas]_&]:tw--left-2',\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarRail.displayName = 'SidebarRail';\n\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<'main'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <main\n        ref={ref}\n        className={cn(\n          // CUSTOM: Removed tw-min-h-svh\n          'tw-relative tw-flex tw-flex-1 tw-flex-col tw-bg-background',\n          'peer-data-[variant=inset]:tw-min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:tw-m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:tw-ml-2 md:peer-data-[variant=inset]:tw-ml-0 md:peer-data-[variant=inset]:tw-rounded-xl md:peer-data-[variant=inset]:tw-shadow',\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarInset.displayName = 'SidebarInset';\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        'tw-h-8 tw-w-full tw-bg-background tw-shadow-none focus-visible:tw-ring-2 focus-visible:tw-ring-sidebar-ring',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarInput.displayName = 'SidebarInput';\n\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        data-sidebar=\"header\"\n        className={cn('tw-flex tw-flex-col tw-gap-2 tw-p-2', className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarHeader.displayName = 'SidebarHeader';\n\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        data-sidebar=\"footer\"\n        className={cn('tw-flex tw-flex-col tw-gap-2 tw-p-2', className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarFooter.displayName = 'SidebarFooter';\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn('tw-mx-2 tw-w-auto tw-bg-sidebar-border', className)}\n      {...props}\n    />\n  );\n});\nSidebarSeparator.displayName = 'SidebarSeparator';\n\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        data-sidebar=\"content\"\n        className={cn(\n          'tw-flex tw-min-h-0 tw-flex-1 tw-flex-col tw-gap-2 tw-overflow-auto group-data-[collapsible=icon]:tw-overflow-hidden',\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarContent.displayName = 'SidebarContent';\n\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        data-sidebar=\"group\"\n        className={cn('tw-relative tw-flex tw-w-full tw-min-w-0 tw-flex-col tw-p-2', className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroup.displayName = 'SidebarGroup';\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'div';\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        'tw-flex tw-h-8 tw-shrink-0 tw-items-center tw-rounded-md tw-px-2 tw-text-xs tw-font-medium tw-text-sidebar-foreground/70 tw-outline-none tw-ring-sidebar-ring tw-transition-[margin,opa] tw-duration-200 tw-ease-linear focus-visible:tw-ring-2 [&>svg]:tw-size-4 [&>svg]:tw-shrink-0',\n        'group-data-[collapsible=icon]:tw--mt-8 group-data-[collapsible=icon]:tw-opacity-0',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarGroupLabel.displayName = 'SidebarGroupLabel';\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<'button'> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'button';\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        'tw-absolute tw-right-3 tw-top-3.5 tw-flex tw-aspect-square tw-w-5 tw-items-center tw-justify-center tw-rounded-md tw-p-0 tw-text-sidebar-foreground tw-outline-none tw-ring-sidebar-ring tw-transition-transform hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground focus-visible:tw-ring-2 [&>svg]:tw-size-4 [&>svg]:tw-shrink-0',\n        // Increases the hit area of the button on mobile.\n        'after:tw-absolute after:tw--inset-2 after:md:tw-hidden',\n        'group-data-[collapsible=icon]:tw-hidden',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarGroupAction.displayName = 'SidebarGroupAction';\n\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      data-sidebar=\"group-content\"\n      className={cn('tw-w-full tw-text-sm', className)}\n      {...props}\n    />\n  ),\n);\nSidebarGroupContent.displayName = 'SidebarGroupContent';\n\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<'ul'>>(\n  ({ className, ...props }, ref) => (\n    <ul\n      ref={ref}\n      data-sidebar=\"menu\"\n      className={cn('tw-flex tw-w-full tw-min-w-0 tw-flex-col tw-gap-1', className)}\n      {...props}\n    />\n  ),\n);\nSidebarMenu.displayName = 'SidebarMenu';\n\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<'li'>>(\n  ({ className, ...props }, ref) => (\n    <li\n      ref={ref}\n      data-sidebar=\"menu-item\"\n      className={cn('tw-group/menu-item tw-relative', className)}\n      {...props}\n    />\n  ),\n);\nSidebarMenuItem.displayName = 'SidebarMenuItem';\n\nconst sidebarMenuButtonVariants = cva(\n  'tw-peer/menu-button tw-flex tw-w-full tw-items-center tw-gap-2 tw-overflow-hidden tw-rounded-md tw-p-2 tw-text-left tw-text-sm tw-outline-none tw-ring-sidebar-ring tw-transition-[width,height,padding] hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground focus-visible:tw-ring-2 active:tw-bg-sidebar-accent active:tw-text-sidebar-accent-foreground disabled:tw-pointer-events-none disabled:tw-opacity-50 tw-group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:tw-pointer-events-none aria-disabled:tw-opacity-50 data-[active=true]:tw-font-medium data-[active=true]:tw-text-sidebar-accent-foreground data-[active=true]:tw-bg-sidebar-accent data-[state=open]:hover:tw-bg-sidebar-accent data-[state=open]:hover:tw-text-sidebar-accent-foreground group-data-[collapsible=icon]:tw-!size-8 group-data-[collapsible=icon]:tw-!p-2 [&>span:last-child]:tw-truncate [&>svg]:tw-size-4 [&>svg]:tw-shrink-0',\n  {\n    variants: {\n      variant: {\n        default: 'hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground',\n        outline:\n          'tw-bg-background tw-shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground hover:tw-shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]',\n      },\n      size: {\n        default: 'tw-h-8 tw-text-sm',\n        sm: 'tw-h-7 tw-text-xs',\n        lg: 'tw-h-12 tw-text-sm group-data-[collapsible=icon]:tw-!p-0',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<'button'> & {\n    asChild?: boolean;\n    isActive?: boolean;\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = 'default',\n      size = 'default',\n      tooltip,\n      className,\n      ...props\n    },\n    ref,\n  ) => {\n    const Comp = asChild ? Slot : 'button';\n    const { state } = useSidebar();\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    );\n\n    if (!tooltip) {\n      return button;\n    }\n\n    if (typeof tooltip === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      tooltip = {\n        children: tooltip,\n      };\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent side=\"right\" align=\"center\" hidden={state !== 'collapsed'} {...tooltip} />\n      </Tooltip>\n    );\n  },\n);\nSidebarMenuButton.displayName = 'SidebarMenuButton';\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<'button'> & {\n    asChild?: boolean;\n    showOnHover?: boolean;\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'button';\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        'tw-peer-hover/menu-button:text-sidebar-accent-foreground tw-absolute tw-right-1 tw-top-1.5 tw-flex tw-aspect-square tw-w-5 tw-items-center tw-justify-center tw-rounded-md tw-p-0 tw-text-sidebar-foreground tw-outline-none tw-ring-sidebar-ring tw-transition-transform hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground focus-visible:tw-ring-2 [&>svg]:tw-size-4 [&>svg]:tw-shrink-0',\n        // Increases the hit area of the button on mobile.\n        'after:tw-absolute after:tw--inset-2 after:md:tw-hidden',\n        'tw-peer-data-[size=sm]/menu-button:top-1',\n        'tw-peer-data-[size=default]/menu-button:top-1.5',\n        'tw-peer-data-[size=lg]/menu-button:top-2.5',\n        'group-data-[collapsible=icon]:tw-hidden',\n        showOnHover &&\n          'tw-group-focus-within/menu-item:opacity-100 tw-group-hover/menu-item:opacity-100 tw-peer-data-[active=true]/menu-button:text-sidebar-accent-foreground data-[state=open]:tw-opacity-100 md:tw-opacity-0',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuAction.displayName = 'SidebarMenuAction';\n\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<'div'>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        'tw-pointer-events-none tw-absolute tw-right-1 tw-flex tw-h-5 tw-min-w-5 tw-select-none tw-items-center tw-justify-center tw-rounded-md tw-px-1 tw-text-xs tw-font-medium tw-tabular-nums tw-text-sidebar-foreground',\n        'tw-peer-hover/menu-button:text-sidebar-accent-foreground tw-peer-data-[active=true]/menu-button:text-sidebar-accent-foreground',\n        'tw-peer-data-[size=sm]/menu-button:top-1',\n        'tw-peer-data-[size=default]/menu-button:top-1.5',\n        'tw-peer-data-[size=lg]/menu-button:top-2.5',\n        'group-data-[collapsible=icon]:tw-hidden',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuBadge.displayName = 'SidebarMenuBadge';\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<'div'> & {\n    showIcon?: boolean;\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn('tw-flex tw-h-8 tw-items-center tw-gap-2 tw-rounded-md tw-px-2', className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton className=\"tw-size-4 tw-rounded-md\" data-sidebar=\"menu-skeleton-icon\" />\n      )}\n      <Skeleton\n        className=\"tw-h-4 tw-max-w-[--skeleton-width] tw-flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          // eslint-disable-next-line no-type-assertion/no-type-assertion\n          {\n            '--skeleton-width': width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n});\nSidebarMenuSkeleton.displayName = 'SidebarMenuSkeleton';\n\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<'ul'>>(\n  ({ className, ...props }, ref) => (\n    <ul\n      ref={ref}\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        'tw-mx-3.5 tw-flex tw-min-w-0 tw-translate-x-px tw-flex-col tw-gap-1 tw-border-l tw-border-sidebar-border tw-px-2.5 tw-py-0.5',\n        'group-data-[collapsible=icon]:tw-hidden',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuSub.displayName = 'SidebarMenuSub';\n\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<'li'>>(\n  ({ ...props }, ref) => <li ref={ref} {...props} />,\n);\nSidebarMenuSubItem.displayName = 'SidebarMenuSubItem';\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<'a'> & {\n    asChild?: boolean;\n    size?: 'sm' | 'md';\n    isActive?: boolean;\n  }\n>(({ asChild = false, size = 'md', isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : 'a';\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        'tw-flex tw-h-7 tw-min-w-0 tw--translate-x-px tw-items-center tw-gap-2 tw-overflow-hidden tw-rounded-md tw-px-2 tw-text-sidebar-foreground tw-outline-none tw-ring-sidebar-ring hover:tw-bg-sidebar-accent hover:tw-text-sidebar-accent-foreground focus-visible:tw-ring-2 active:tw-bg-sidebar-accent active:tw-text-sidebar-accent-foreground disabled:tw-pointer-events-none disabled:tw-opacity-50 aria-disabled:tw-pointer-events-none aria-disabled:tw-opacity-50 [&>span:last-child]:tw-truncate [&>svg]:tw-size-4 [&>svg]:tw-shrink-0 [&>svg]:tw-text-sidebar-accent-foreground',\n        'data-[active=true]:tw-bg-sidebar-accent data-[active=true]:tw-text-sidebar-accent-foreground',\n        size === 'sm' && 'tw-text-xs',\n        size === 'md' && 'tw-text-sm',\n        'group-data-[collapsible=icon]:tw-hidden',\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuSubButton.displayName = 'SidebarMenuSubButton';\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","import { ComboBox, ComboBoxOption } from '@/components/basics/combo-box.component';\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupLabel,\n  SidebarGroupContent,\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n} from '@/components/shadcn-ui/sidebar';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { ScrollText } from 'lucide-react';\nimport { useCallback } from 'react';\n\nexport type SelectedSettingsSidebarItem = {\n  label: string;\n  projectId?: string;\n};\n\nexport type ProjectInfo = { projectId: string; projectName: string };\n\nexport type SettingsSidebarProps = {\n  /** Optional id for testing */\n  id?: string;\n\n  /** Extension labels from contribution */\n  extensionLabels: Record<string, string>;\n\n  /** Project names and ids */\n  projectInfo: ProjectInfo[];\n\n  /** Handler for selecting a sidebar item */\n  handleSelectSidebarItem: (key: string, projectId?: string) => void;\n\n  /** The current selected value in the sidebar */\n  selectedSidebarItem: SelectedSettingsSidebarItem;\n\n  /** Label for the group of extensions setting groups */\n  extensionsSidebarGroupLabel: string;\n\n  /** Label for the group of projects settings */\n  projectsSidebarGroupLabel: string;\n\n  /** Placeholder text for the button */\n  buttonPlaceholderText: string;\n\n  /** Additional css classes to help with unique styling of the sidebar */\n  className?: string;\n};\n\n/**\n * The SettingsSidebar component is a sidebar that displays a list of extension settings and project\n * settings. It can be used to navigate to different settings pages.\n *\n * @param props - {@link SettingsSidebarProps} The props for the component.\n */\nexport function SettingsSidebar({\n  id,\n  extensionLabels,\n  projectInfo,\n  handleSelectSidebarItem,\n  selectedSidebarItem,\n  extensionsSidebarGroupLabel,\n  projectsSidebarGroupLabel,\n  buttonPlaceholderText,\n  className,\n}: SettingsSidebarProps) {\n  const handleSelectItem = useCallback(\n    (item: string, projectId?: string) => {\n      handleSelectSidebarItem(item, projectId);\n    },\n    [handleSelectSidebarItem],\n  );\n\n  const getProjectNameFromProjectId = useCallback(\n    (projectId: string) => {\n      const project = projectInfo.find((info) => info.projectId === projectId);\n      return project ? project.projectName : projectId;\n    },\n    [projectInfo],\n  );\n\n  const getIsActive: (label: string) => boolean = useCallback(\n    (label: string) => !selectedSidebarItem.projectId && label === selectedSidebarItem.label,\n    [selectedSidebarItem],\n  );\n\n  return (\n    <Sidebar\n      id={id}\n      collapsible=\"none\"\n      variant=\"inset\"\n      className={cn('tw-w-96 tw-gap-2 tw-overflow-y-auto', className)}\n    >\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"tw-text-sm\">\n            {extensionsSidebarGroupLabel}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {Object.entries(extensionLabels).map(([key, label]) => (\n                <SidebarMenuItem key={key}>\n                  <SidebarMenuButton\n                    onClick={() => handleSelectItem(key)}\n                    isActive={getIsActive(key)}\n                  >\n                    <span className=\"tw-pl-3\">{label}</span>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"tw-text-sm\">{projectsSidebarGroupLabel}</SidebarGroupLabel>\n          <SidebarGroupContent className=\"tw-pl-3\">\n            <ComboBox\n              buttonVariant=\"ghost\"\n              buttonClassName={cn('tw-w-full', {\n                'tw-bg-sidebar-accent tw-text-sidebar-accent-foreground':\n                  selectedSidebarItem?.projectId,\n              })}\n              popoverContentClassName=\"tw-z-[1000]\"\n              options={projectInfo.flatMap((info) => info.projectId)}\n              getOptionLabel={(projectId: ComboBoxOption) => {\n                // This function expects a ComboBoxOption, but we know it is a string\n                // eslint-disable-next-line no-type-assertion/no-type-assertion\n                return getProjectNameFromProjectId(projectId as string);\n              }}\n              buttonPlaceholder={buttonPlaceholderText}\n              onChange={(projectId: string) => {\n                const selectedProjectName = getProjectNameFromProjectId(projectId);\n                handleSelectItem(selectedProjectName, projectId);\n              }}\n              value={selectedSidebarItem?.projectId ?? undefined}\n              icon={<ScrollText />}\n            />\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n    </Sidebar>\n  );\n}\n\nexport default SettingsSidebar;\n","import { Button } from '@/components/shadcn-ui/button';\nimport { Input } from '@/components/shadcn-ui/input';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Search, X } from 'lucide-react';\n\n/** Props for the SearchBar component. */\nexport type SearchBarProps = {\n  /** Search query for the search bar */\n  value: string;\n  /**\n   * Callback fired to handle the search query is updated\n   *\n   * @param searchQuery\n   */\n  onSearch: (searchQuery: string) => void;\n\n  /** Optional string that appears in the search bar without a search string */\n  placeholder?: string;\n\n  /** Optional boolean to set the input base to full width */\n  isFullWidth?: boolean;\n\n  /** Additional css classes to help with unique styling of the search bar */\n  className?: string;\n\n  /** Optional boolean to disable the search bar */\n  isDisabled?: boolean;\n};\n\n/**\n * A search bar component with a search icon and a clear button when the search query is not empty.\n *\n * @param {SearchBarProps} props - The props for the component.\n * @param {string} props.value - The search query for the search bar\n * @param {(searchQuery: string) => void} props.onSearch - Callback fired to handle the search query\n *   is updated\n * @param {string} [props.placeholder] - Optional string that appears in the search bar without a\n *   search string\n * @param {boolean} [props.isFullWidth] - Optional boolean to set the input base to full width\n * @param {string} [props.className] - Additional css classes to help with unique styling of the\n *   search bar\n * @param {boolean} [props.isDisabled] - Optional boolean to disable the search bar\n */\nexport function SearchBar({\n  value,\n  onSearch,\n  placeholder,\n  isFullWidth,\n  className,\n  isDisabled = false,\n}: SearchBarProps) {\n  const dir: Direction = readDirection();\n\n  return (\n    <div className={cn('tw-relative', { 'tw-w-full': isFullWidth }, className)}>\n      <Search\n        className={cn(\n          'tw-absolute tw-top-1/2 tw-h-4 tw-w-4 tw--translate-y-1/2 tw-transform tw-opacity-50',\n          { 'tw-right-3': dir === 'rtl' },\n          { 'tw-left-3': dir === 'ltr' },\n        )}\n      />\n      <Input\n        className=\"tw-w-full tw-text-ellipsis tw-pe-9 tw-ps-9\"\n        placeholder={placeholder}\n        value={value}\n        onChange={(e) => onSearch(e.target.value)}\n        disabled={isDisabled}\n      />\n      {value && (\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className={cn(\n            'tw-absolute tw-top-1/2 tw-h-7 tw--translate-y-1/2 tw-transform hover:tw-bg-transparent',\n            { 'tw-left-0': dir === 'rtl' },\n            { 'tw-right-0': dir === 'ltr' },\n          )}\n          onClick={() => {\n            onSearch('');\n          }}\n        >\n          <X className=\"tw-h-4 tw-w-4\" />\n          <span className=\"tw-sr-only\">Clear</span>\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default SearchBar;\n","import { SidebarInset, SidebarProvider } from '@/components/shadcn-ui/sidebar';\nimport { PropsWithChildren } from 'react';\nimport { SearchBar } from '@/components/basics/search-bar.component';\nimport { SettingsSidebar, SettingsSidebarProps } from './settings-sidebar.component';\n\nexport type SettingsSidebarContentSearchProps = SettingsSidebarProps &\n  PropsWithChildren & {\n    /** The search query in the search bar */\n    searchValue: string;\n\n    /** Handler to run when the value of the search bar changes */\n    onSearch: (searchQuery: string) => void;\n  };\n\n/**\n * A component that wraps a search bar and a settings sidebar, providing a way to search and\n * navigate to different settings pages.\n *\n * @param {SettingsSidebarContentSearchProps} props - The props for the component.\n * @param {string} props.id - The id of the sidebar.\n */\nexport function SettingsSidebarContentSearch({\n  id,\n  extensionLabels,\n  projectInfo,\n  children,\n  handleSelectSidebarItem,\n  selectedSidebarItem,\n  searchValue,\n  onSearch,\n  extensionsSidebarGroupLabel,\n  projectsSidebarGroupLabel,\n  buttonPlaceholderText,\n}: SettingsSidebarContentSearchProps) {\n  return (\n    <div className=\"tw-box-border tw-flex tw-h-full tw-flex-col\">\n      <div className=\"tw-box-border tw-flex tw-items-center tw-justify-center tw-py-4\">\n        <SearchBar\n          className=\"tw-w-9/12\"\n          value={searchValue}\n          onSearch={onSearch}\n          placeholder=\"Search app settings, extension settings, and project settings\"\n        />\n      </div>\n      <SidebarProvider\n        id={id}\n        className=\"tw-h-full tw-flex-1 tw-gap-4 tw-overflow-auto tw-border-t\"\n      >\n        <SettingsSidebar\n          className=\"tw-w-1/2 tw-min-w-[140px] tw-max-w-[220px] tw-border-e\"\n          extensionLabels={extensionLabels}\n          projectInfo={projectInfo}\n          handleSelectSidebarItem={handleSelectSidebarItem}\n          selectedSidebarItem={selectedSidebarItem}\n          extensionsSidebarGroupLabel={extensionsSidebarGroupLabel}\n          projectsSidebarGroupLabel={projectsSidebarGroupLabel}\n          buttonPlaceholderText={buttonPlaceholderText}\n        />\n        <SidebarInset className=\"tw-min-w-[215px]\">{children}</SidebarInset>\n      </SidebarProvider>\n    </div>\n  );\n}\n\nexport default SettingsSidebarContentSearch;\n","import { Button } from '@/components/shadcn-ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/shadcn-ui/select';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/shadcn-ui/table';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Canon } from '@sillsdev/scripture';\nimport {\n  Cell,\n  ColumnDef,\n  flexRender,\n  getCoreRowModel,\n  getExpandedRowModel,\n  getGroupedRowModel,\n  getSortedRowModel,\n  GroupingState,\n  Row,\n  RowSelectionState,\n  SortingState,\n  useReactTable,\n} from '@tanstack/react-table';\nimport '@/components/advanced/scripture-results-viewer/scripture-results-viewer.component.css';\nimport {\n  compareScrRefs,\n  formatScrRef,\n  ScriptureSelection,\n  scrRefToBBBCCCVVV,\n} from 'platform-bible-utils';\nimport { MouseEvent, useEffect, useMemo, useState } from 'react';\nimport { ChevronDown, ChevronLeft, ChevronRight } from 'lucide-react';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * Information (e.g., a checking error or some other type of \"transient\" annotation) about something\n * noteworthy at a specific place in an instance of the Scriptures.\n */\nexport type ScriptureItemDetail = ScriptureSelection & {\n  /**\n   * Text of the error, note, etc. In the future, we might want to support something more than just\n   * text so that a JSX element could be provided with a link or some other controls related to the\n   * issue being reported.\n   */\n  detail: string;\n};\n\n/**\n * A uniquely identifiable source of results that can be displayed in the ScriptureResultsViewer.\n * Generally, the source will be a particular Scripture check, but there may be other types of\n * sources.\n */\nexport type ResultsSource = {\n  /**\n   * Uniquely identifies the source.\n   *\n   * @type {string}\n   */\n  id: string;\n\n  /**\n   * Name (potentially localized) of the source, suitable for display in the UI.\n   *\n   * @type {string}\n   */\n  displayName: string;\n};\n\nexport type ScriptureSrcItemDetail = ScriptureItemDetail & {\n  /** Source/type of detail. Can be used for grouping. */\n  source: ResultsSource;\n};\n\n/**\n * Represents a set of results keyed by Scripture reference. Generally, the source will be a\n * particular Scripture check, but this type also allows for other types of uniquely identifiable\n * sources.\n */\nexport type ResultsSet = {\n  /**\n   * The backing source associated with this set of results.\n   *\n   * @type {ResultsSource}\n   */\n  source: ResultsSource;\n\n  /**\n   * Array of Scripture item details (messages keyed by Scripture reference).\n   *\n   * @type {ScriptureItemDetail[]}\n   */\n  data: ScriptureItemDetail[];\n};\n\nconst scrBookColId = 'scrBook';\nconst scrRefColId = 'scrRef';\nconst typeColId = 'source';\nconst detailsColId = 'details';\n\nconst defaultScrRefColumnName = 'Scripture Reference';\nconst defaultScrBookGroupName = 'Scripture Book';\nconst defaultTypeColumnName = 'Type';\nconst defaultDetailsColumnName = 'Details';\n\nexport type ScriptureResultsViewerColumnInfo = {\n  /** Optional header to display for the Reference column. Default value: 'Scripture Reference'. */\n  scriptureReferenceColumnName?: string;\n\n  /** Optional text to display to refer to the Scripture book group. Default value: 'Scripture Book'. */\n  scriptureBookGroupName?: string;\n\n  /** Optional header to display for the Type column. Default value: 'Type'. */\n  typeColumnName?: string;\n\n  /** Optional header to display for the Details column. Default value: 'Details' */\n  detailsColumnName?: string;\n};\n\nexport type ScriptureResultsViewerProps = ScriptureResultsViewerColumnInfo & {\n  /** Groups of ScriptureItemDetail objects from particular sources (e.g., Scripture checks) */\n  sources: ResultsSet[];\n\n  /** Flag indicating whether to display column headers. Default is false. */\n  showColumnHeaders?: boolean;\n\n  /** Flag indicating whether to display source column. Default is false. */\n  showSourceColumn?: boolean;\n\n  /** Callback function to notify when a row is selected */\n  onRowSelected?: (selectedRow: ScriptureSrcItemDetail | undefined) => void;\n};\n\nfunction getColumns(\n  colInfo?: ScriptureResultsViewerColumnInfo,\n  showSourceColumn?: boolean,\n): ColumnDef<ScriptureSrcItemDetail>[] {\n  const showSrcCol = showSourceColumn ?? false;\n  return [\n    {\n      accessorFn: (row) => `${row.start.book} ${row.start.chapterNum}:${row.start.verseNum}`,\n      id: scrBookColId,\n      header: colInfo?.scriptureReferenceColumnName ?? defaultScrRefColumnName,\n      cell: (info) => {\n        const row = info.row.original;\n        if (info.row.getIsGrouped()) {\n          return Canon.bookIdToEnglishName(row.start.book);\n        }\n        return info.row.groupingColumnId === scrBookColId ? formatScrRef(row.start) : undefined;\n      },\n      getGroupingValue: (row) => Canon.bookIdToNumber(row.start.book),\n      sortingFn: (a, b) => {\n        return compareScrRefs(a.original.start, b.original.start);\n      },\n      enableGrouping: true,\n    },\n    {\n      accessorFn: (row) => formatScrRef(row.start),\n      id: scrRefColId,\n      header: undefined,\n      cell: (info) => {\n        const row = info.row.original;\n        return info.row.getIsGrouped() ? undefined : formatScrRef(row.start);\n      },\n      sortingFn: (a, b) => {\n        return compareScrRefs(a.original.start, b.original.start);\n      },\n      enableGrouping: false,\n    },\n    {\n      accessorFn: (row) => row.source.displayName,\n      id: typeColId,\n      header: showSrcCol ? (colInfo?.typeColumnName ?? defaultTypeColumnName) : undefined,\n      cell: (info) => (showSrcCol || info.row.getIsGrouped() ? info.getValue() : undefined),\n      getGroupingValue: (row) => row.source.id,\n      sortingFn: (a, b) =>\n        a.original.source.displayName.localeCompare(b.original.source.displayName),\n      enableGrouping: true,\n    },\n    {\n      accessorFn: (row) => row.detail,\n      id: detailsColId,\n      header: colInfo?.detailsColumnName ?? defaultDetailsColumnName,\n      cell: (info) => info.getValue(),\n      enableGrouping: false,\n    },\n  ];\n}\n\nconst toRefOrRange = (scriptureSelection: ScriptureSelection) => {\n  if (!('offset' in scriptureSelection.start))\n    throw new Error('No offset available in range start');\n  if (scriptureSelection.end && !('offset' in scriptureSelection.end))\n    throw new Error('No offset available in range end');\n  const { offset: offsetStart } = scriptureSelection.start;\n  let offsetEnd: number = 0;\n  if (scriptureSelection.end) ({ offset: offsetEnd } = scriptureSelection.end);\n  if (\n    !scriptureSelection.end ||\n    compareScrRefs(scriptureSelection.start, scriptureSelection.end) === 0\n  )\n    return `${scrRefToBBBCCCVVV(scriptureSelection.start)}+${offsetStart}`;\n  return `${scrRefToBBBCCCVVV(scriptureSelection.start)}+${offsetStart}-${scrRefToBBBCCCVVV(scriptureSelection.end)}+${offsetEnd}`;\n};\n\nconst getRowKey = (row: ScriptureSrcItemDetail) =>\n  `${toRefOrRange({ start: row.start, end: row.end })} ${row.source.displayName} ${row.detail}`;\n\n/**\n * Component to display a combined list of detailed items from one or more sources, where the items\n * are keyed primarily by Scripture reference. This is particularly useful for displaying a list of\n * results from Scripture checks, but more generally could be used to display any \"results\" from any\n * source(s). The component allows for grouping by Scripture book, source, or both. By default, it\n * displays somewhat \"tree-like\" which allows it to be more horizontally compact and intuitive. But\n * it also has the option of displaying as a traditional table with column headings (with or without\n * the source column showing).\n */\nexport function ScriptureResultsViewer({\n  sources,\n  showColumnHeaders = false,\n  showSourceColumn = false,\n  scriptureReferenceColumnName,\n  scriptureBookGroupName,\n  typeColumnName,\n  detailsColumnName,\n  onRowSelected,\n}: ScriptureResultsViewerProps) {\n  const [grouping, setGrouping] = useState<GroupingState>([]);\n  const [sorting, setSorting] = useState<SortingState>([{ id: scrBookColId, desc: false }]);\n  const [rowSelection, setRowSelection] = useState<RowSelectionState>({});\n\n  const scriptureResults = useMemo(\n    () =>\n      sources.flatMap((source) => {\n        return source.data.map((item) => ({\n          ...item,\n          source: source.source,\n        }));\n      }),\n    [sources],\n  );\n\n  const columns = useMemo(\n    () =>\n      getColumns(\n        {\n          scriptureReferenceColumnName,\n          typeColumnName,\n          detailsColumnName,\n        },\n        showSourceColumn,\n      ),\n    [scriptureReferenceColumnName, typeColumnName, detailsColumnName, showSourceColumn],\n  );\n\n  useEffect(() => {\n    // Ensure sorting is applied correctly when grouped by type\n    if (grouping.includes(typeColId)) {\n      setSorting([\n        { id: typeColId, desc: false },\n        { id: scrBookColId, desc: false },\n      ]);\n    } else {\n      setSorting([{ id: scrBookColId, desc: false }]);\n    }\n  }, [grouping]);\n\n  const table = useReactTable({\n    data: scriptureResults,\n    columns,\n    state: {\n      grouping,\n      sorting,\n      rowSelection,\n    },\n    onGroupingChange: setGrouping,\n    onSortingChange: setSorting,\n    onRowSelectionChange: setRowSelection,\n    getExpandedRowModel: getExpandedRowModel(),\n    getGroupedRowModel: getGroupedRowModel(),\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getRowId: getRowKey,\n    autoResetExpanded: false,\n    enableMultiRowSelection: false,\n    enableSubRowSelection: false,\n  });\n\n  useEffect(() => {\n    if (onRowSelected) {\n      const selectedRows = table.getSelectedRowModel().rowsById;\n      const keys = Object.keys(selectedRows);\n      if (keys.length === 1) {\n        const selectedRow = scriptureResults.find((row) => getRowKey(row) === keys[0]) || undefined;\n        if (selectedRow) onRowSelected(selectedRow);\n      }\n    }\n  }, [rowSelection, scriptureResults, onRowSelected, table]);\n\n  // Define possible grouping options\n  const scrBookGroupName = scriptureBookGroupName ?? defaultScrBookGroupName;\n  const typeGroupName = typeColumnName ?? defaultTypeColumnName;\n\n  const groupingOptions = [\n    { label: 'No Grouping', value: [] },\n    { label: `Group by ${scrBookGroupName}`, value: [scrBookColId] },\n    { label: `Group by ${typeGroupName}`, value: [typeColId] },\n    {\n      label: `Group by ${scrBookGroupName} and ${typeGroupName}`,\n      value: [scrBookColId, typeColId],\n    },\n    {\n      label: `Group by ${typeGroupName} and ${scrBookGroupName}`,\n      value: [typeColId, scrBookColId],\n    },\n  ];\n\n  const handleSelectChange = (selectedGrouping: string) => {\n    setGrouping(JSON.parse(selectedGrouping));\n  };\n\n  const handleRowClick = (row: Row<ScriptureSrcItemDetail>, event: MouseEvent) => {\n    if (!row.getIsGrouped() && !row.getIsSelected()) {\n      row.getToggleSelectedHandler()(event);\n    }\n  };\n\n  const getEvenOrOddBandingStyle = (row: Row<ScriptureSrcItemDetail>, index: number) => {\n    if (row.getIsGrouped()) return '';\n    // UX has now said they don't think they want banding. I'm leaving in the code to\n    // set even and odd styles, but there's nothing in the CSS to style them differently.\n    // The \"even\" style used to also have  tw-bg-neutral-300 (along with even) to create\n    // a visual banding effect. That could be added back in if UX changes the decision.\n    return cn('banded-row', index % 2 === 0 ? 'even' : 'odd');\n  };\n\n  const getIndent = (\n    groupingState: GroupingState,\n    row: Row<ScriptureSrcItemDetail>,\n    cell: Cell<ScriptureSrcItemDetail, unknown>,\n  ) => {\n    if (groupingState?.length === 0 || row.depth < cell.column.getGroupedIndex()) return undefined;\n    if (row.getIsGrouped()) {\n      switch (row.depth) {\n        case 1:\n          return 'tw-ps-4';\n        default:\n          return undefined;\n      }\n    }\n    switch (row.depth) {\n      case 1:\n        return 'tw-ps-8';\n      case 2:\n        return 'tw-ps-12';\n      default:\n        return undefined;\n    }\n  };\n\n  return (\n    <div className=\"pr-twp tw-flex tw-h-full tw-w-full tw-flex-col\">\n      {!showColumnHeaders && (\n        <Select\n          value={JSON.stringify(grouping)}\n          onValueChange={(value) => {\n            handleSelectChange(value);\n          }}\n        >\n          <SelectTrigger className=\"tw-mb-1 tw-mt-2\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent position=\"item-aligned\">\n            <SelectGroup>\n              {groupingOptions.map((option) => (\n                <SelectItem key={option.label} value={JSON.stringify(option.value)}>\n                  {option.label}\n                </SelectItem>\n              ))}\n            </SelectGroup>\n          </SelectContent>\n        </Select>\n      )}\n      <Table className=\"tw-relative tw-flex tw-flex-col tw-overflow-y-auto tw-p-0\">\n        {showColumnHeaders && (\n          <TableHeader>\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers\n                  .filter((h) => h.column.columnDef.header)\n                  .map((header) => (\n                    /* For sticky column headers to work, we probably need to change the default definition of the shadcn Table component. See https://github.com/shadcn-ui/ui/issues/1151 */\n                    <TableHead key={header.id} colSpan={header.colSpan} className=\"top-0 tw-sticky\">\n                      {header.isPlaceholder ? undefined : (\n                        <div>\n                          {header.column.getCanGroup() ? (\n                            <Button\n                              variant=\"ghost\"\n                              title={`Toggle grouping by ${header.column.columnDef.header}`}\n                              onClick={header.column.getToggleGroupingHandler()}\n                              type=\"button\"\n                            >\n                              {header.column.getIsGrouped() ? `🛑` : `👊 `}\n                            </Button>\n                          ) : undefined}{' '}\n                          {flexRender(header.column.columnDef.header, header.getContext())}\n                        </div>\n                      )}\n                    </TableHead>\n                  ))}\n              </TableRow>\n            ))}\n          </TableHeader>\n        )}\n        <TableBody>\n          {table.getRowModel().rows.map((row, rowIndex) => {\n            const dir: Direction = readDirection();\n            return (\n              <TableRow\n                data-state={row.getIsSelected() ? 'selected' : ''}\n                key={row.id}\n                className={cn(getEvenOrOddBandingStyle(row, rowIndex))}\n                onClick={(event) => handleRowClick(row, event)}\n              >\n                {row.getVisibleCells().map((cell) => {\n                  if (\n                    cell.getIsPlaceholder() ||\n                    (cell.column.columnDef.enableGrouping &&\n                      !cell.getIsGrouped() &&\n                      (cell.column.columnDef.id !== typeColId || !showSourceColumn))\n                  )\n                    return undefined;\n                  return (\n                    <TableCell\n                      key={cell.id}\n                      // It seems like a hack to use tw-p-[1px] to override the \"built in\" tw-p-4\n                      // that comes in with the shadcn TableCell class. I could just remove it from\n                      // that class, but it's not clear that that is desirable. I'm not even 100%\n                      // sure I know what padding value to use here, but the problem with 4 (the\n                      // default) is that is prevents the nested indentation when grouping.\n                      className={cn(\n                        cell.column.columnDef.id,\n                        'tw-p-[1px]',\n                        getIndent(grouping, row, cell),\n                      )}\n                    >\n                      {(() => {\n                        if (cell.getIsGrouped()) {\n                          return (\n                            <Button\n                              variant=\"link\"\n                              onClick={row.getToggleExpandedHandler()}\n                              type=\"button\"\n                            >\n                              {row.getIsExpanded() && <ChevronDown />}\n                              {!row.getIsExpanded() &&\n                                (dir === 'ltr' ? <ChevronRight /> : <ChevronLeft />)}{' '}\n                              {flexRender(cell.column.columnDef.cell, cell.getContext())} (\n                              {row.subRows.length})\n                            </Button>\n                          );\n                        }\n\n                        // if (cell.getIsAggregated()) {\n                        //   flexRender(\n                        //     cell.column.columnDef.aggregatedCell ?? cell.column.columnDef.cell,\n                        //     cell.getContext(),\n                        //   );\n                        // }\n\n                        return flexRender(cell.column.columnDef.cell, cell.getContext());\n                      })()}\n                    </TableCell>\n                  );\n                })}\n              </TableRow>\n            );\n          })}\n        </TableBody>\n      </Table>\n    </div>\n  );\n}\n\nexport default ScriptureResultsViewer;\n","import { Canon } from '@sillsdev/scripture';\n\n/**\n * Represents the major sections of the Bible and extra materials. Used for grouping and filtering\n * books in the book selector.\n */\nexport enum Section {\n  /** Old Testament books (Genesis through Malachi) */\n  OT = 'OT',\n  /** New Testament books (Matthew through Revelation) */\n  NT = 'NT',\n  /** Deuterocanonical books (e.g. Tobit, Judith, 1-2 Maccabees) */\n  DC = 'DC',\n  /** Additional materials not part of the biblical canon (e.g. XXA, XXB etc.) */\n  Extra = 'Extra',\n}\n\n/**\n * Gets the localized full name of a Bible section from its enum value\n *\n * @param section - The section enum value to get the name for\n * @param otLongName - Optional localized name for Old Testament section\n * @param ntLongName - Optional localized name for New Testament section\n * @param dcLongName - Optional localized name for Deuterocanonical section\n * @param extraLongName - Optional localized name for Extra Materials section\n * @returns {string} The human-readable localized name of the section. Defaults to English names\n * @throws {Error} When the section enum value is not recognized\n */\nexport const getSectionLongName = (\n  section: Section,\n  otLongName?: string,\n  ntLongName?: string,\n  dcLongName?: string,\n  extraLongName?: string,\n): string => {\n  switch (section) {\n    case Section.OT:\n      return otLongName ?? 'Old Testament';\n    case Section.NT:\n      return ntLongName ?? 'New Testament';\n    case Section.DC:\n      return dcLongName ?? 'Deuterocanon';\n    case Section.Extra:\n      return extraLongName ?? 'Extra Materials';\n    default:\n      throw new Error(`Unknown section: ${section}`);\n  }\n};\n\n/**\n * Gets the short name of a Bible section from its enum value\n *\n * @param section - The section enum value to get the short name for\n * @param otShortName - Optional localized short name for Old Testament section\n * @param ntShortName - Optional localized short name for New Testament section\n * @param dcShortName - Optional localized short name for Deuterocanonical section\n * @param extraShortName - Optional localized short name for Extra Materials section\n * @returns {string} The short name of the section. Defaults to English\n * @throws {Error} When the section enum value is not recognized\n */\nexport const getSectionShortName = (\n  section: Section,\n  otShortName?: string,\n  ntShortName?: string,\n  dcShortName?: string,\n  extraShortName?: string,\n): string => {\n  switch (section) {\n    case Section.OT:\n      return otShortName ?? 'OT';\n    case Section.NT:\n      return ntShortName ?? 'NT';\n    case Section.DC:\n      return dcShortName ?? 'DC';\n    case Section.Extra:\n      return extraShortName ?? 'Extra';\n    default:\n      throw new Error(`Unknown section: ${section}`);\n  }\n};\n\n/**\n * Determines which section a book belongs to based on its ID\n *\n * @param bookId The ID of the book (e.g., 'GEN', 'MAT')\n * @returns The section (OT, NT, DC, or Extra) that the book belongs to\n * @throws Error if the book ID is not recognized or cannot be categorized\n */\nexport const getSectionForBook = (bookId: string): Section => {\n  if (Canon.isBookOT(bookId)) return Section.OT;\n  if (Canon.isBookNT(bookId)) return Section.NT;\n  if (Canon.isBookDC(bookId)) return Section.DC;\n  if (Canon.isExtraMaterial(bookId)) return Section.Extra;\n\n  throw new Error(`Unknown section for book: ${bookId}`);\n};\n\n/**\n * Filters an array of book IDs to only include books from a specific section\n *\n * @param bookIds Array of book IDs to filter\n * @param section The section to filter by\n * @returns Array of book IDs that belong to the specified section\n */\nexport const getBooksForSection = (bookIds: string[], section: Section) => {\n  return bookIds.filter((bookId) => {\n    try {\n      return getSectionForBook(bookId) === section;\n    } catch {\n      return false;\n    }\n  });\n};\n\n/**\n * Checks if all books in a given section are included in the selectedBookIds array\n *\n * @param bookIds Array of all available book IDs\n * @param section The section to check\n * @param selectedBookIds Array of currently selected book IDs\n * @returns True if all books from the specified section are selected, false otherwise\n */\nexport const isSectionFullySelected = (\n  bookIds: string[],\n  section: Section,\n  selectedBookIds: string[],\n) => getBooksForSection(bookIds, section).every((bookId) => selectedBookIds.includes(bookId));\n","import { CommandItem } from '@/components/shadcn-ui/command';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Canon } from '@sillsdev/scripture';\nimport { Check } from 'lucide-react';\nimport { MutableRefObject, useRef } from 'react';\nimport { getSectionForBook, Section } from './scope-selector-utils';\n\ntype BookItemProps = {\n  /** The book ID (e.g., 'GEN', 'EXO') */\n  bookId: string;\n  /** Array of currently selected book IDs */\n  selectedBookIds: string[];\n  /** Callback function to handle book selection/deselection with optional shift-key support */\n  toggleBook: (bookId: string, shiftKey: boolean) => void;\n  /** Reference to track if the last key event included the shift key */\n  lastKeyEventShiftKey: MutableRefObject<boolean>;\n  /**\n   * Optional map of localized book IDs/short names and full names. Key is the (English) book ID,\n   * value contains localized versions of the ID and full book name\n   */\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>;\n};\n\n/**\n * A component that represents a single book item in the book selector. Handles both keyboard and\n * mouse interactions for book selection, including shift-click for range selection. The component\n * shows the book's localized name, its ID, and visually indicates its testament (OT/NT/DC/Extra)\n * through color coding.\n */\nfunction BookItem({\n  bookId,\n  selectedBookIds,\n  toggleBook,\n  lastKeyEventShiftKey,\n  localizedBookNames,\n}: BookItemProps) {\n  const isMouseClick = useRef(false);\n  const mouseClickTimer = useRef<ReturnType<typeof setTimeout>>();\n  return (\n    <CommandItem\n      key={bookId}\n      value={bookId}\n      className=\"tw-flex tw-items-center\"\n      onSelect={() => {\n        // Only process selection if it wasn't triggered by mouse\n        if (!isMouseClick.current) {\n          toggleBook(bookId, lastKeyEventShiftKey.current);\n          lastKeyEventShiftKey.current = false;\n        }\n        if (mouseClickTimer.current) {\n          clearTimeout(mouseClickTimer.current);\n        }\n        mouseClickTimer.current = setTimeout(() => {\n          isMouseClick.current = false;\n        }, 100);\n      }}\n      onMouseDown={(e) => {\n        e.preventDefault();\n        isMouseClick.current = true;\n        toggleBook(bookId, e.shiftKey);\n      }}\n      role=\"option\"\n      aria-selected={selectedBookIds.includes(bookId)}\n      aria-label={`${Canon.bookIdToEnglishName(bookId)} (${bookId.toLocaleUpperCase()})`}\n    >\n      <Check\n        className={cn(\n          'tw-me-2 tw-h-4 tw-w-4',\n          selectedBookIds.includes(bookId) ? 'tw-opacity-100' : 'tw-opacity-0',\n        )}\n      />\n      <span\n        className={cn(\n          'tw-flex-1 tw-border-b-0 tw-border-e-0 tw-border-s-2 tw-border-t-0 tw-border-solid tw-px-2',\n          {\n            'tw-border-s-red-200': getSectionForBook(bookId) === Section.OT,\n            'tw-border-s-purple-200': getSectionForBook(bookId) === Section.NT,\n            'tw-border-s-indigo-200': getSectionForBook(bookId) === Section.DC,\n            'tw-border-s-yellow-200': getSectionForBook(bookId) === Section.Extra,\n          },\n        )}\n      >\n        {(localizedBookNames && localizedBookNames.get(bookId)?.localizedName) ||\n          Canon.bookIdToEnglishName(bookId)}\n      </span>\n\n      <span className=\"tw-ml-2 tw-text-xs tw-text-muted-foreground\">\n        {(localizedBookNames && localizedBookNames.get(bookId)?.localizedId) ||\n          bookId.toLocaleUpperCase()}\n      </span>\n    </CommandItem>\n  );\n}\n\nexport default BookItem;\n","import { Button } from '@/components/shadcn-ui/button';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { LanguageStrings } from 'platform-bible-utils';\nimport {\n  getBooksForSection,\n  getSectionShortName,\n  isSectionFullySelected,\n  Section,\n} from './scope-selector-utils';\n\n/**\n * A button component that represents a scripture section (testament) in the book selector. The\n * button shows a different state when all books in its section are selected and becomes disabled\n * when no books are available in its section.\n */\nfunction SectionButton({\n  section,\n  availableBookIds,\n  selectedBookIds,\n  onToggle,\n  localizedStrings,\n}: {\n  section: Section;\n  availableBookIds: string[];\n  selectedBookIds: string[];\n  onToggle: (section: Section) => void;\n  localizedStrings: LanguageStrings;\n}) {\n  const isDisabled = getBooksForSection(availableBookIds, section).length === 0;\n\n  const sectionOtShortText = localizedStrings['%scripture_section_ot_short%'];\n  const sectionNtShortText = localizedStrings['%scripture_section_nt_short%'];\n  const sectionDcShortText = localizedStrings['%scripture_section_dc_short%'];\n  const sectionExtraShortText = localizedStrings['%scripture_section_extra_short%'];\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"sm\"\n      onClick={() => onToggle(section)}\n      className={cn(\n        isSectionFullySelected(availableBookIds, section, selectedBookIds) &&\n          !isDisabled &&\n          'tw-bg-primary tw-text-primary-foreground hover:tw-bg-primary/70 hover:tw-text-primary-foreground',\n      )}\n      disabled={isDisabled}\n    >\n      {getSectionShortName(\n        section,\n        sectionOtShortText,\n        sectionNtShortText,\n        sectionDcShortText,\n        sectionExtraShortText,\n      )}\n    </Button>\n  );\n}\n\nexport default SectionButton;\n","import { Badge } from '@/components/shadcn-ui/badge';\nimport { Button } from '@/components/shadcn-ui/button';\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandList,\n  CommandSeparator,\n} from '@/components/shadcn-ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/shadcn-ui/popover';\nimport { Canon } from '@sillsdev/scripture';\nimport { ChevronsUpDown } from 'lucide-react';\nimport { LanguageStrings } from 'platform-bible-utils';\nimport { Fragment, useCallback, useMemo, useRef, useState } from 'react';\nimport BookItem from './book-item.component';\nimport {\n  getBooksForSection,\n  getSectionForBook,\n  getSectionLongName,\n  isSectionFullySelected,\n  Section,\n} from './scope-selector-utils';\nimport SectionButton from './section-button.component';\n\n/** Maximum number of badges to show before collapsing into a \"+X more\" badge */\nconst VISIBLE_BADGES_COUNT = 5;\n/** Maximum number of badges that can be shown without triggering the collapse */\nconst MAX_VISIBLE_BADGES = 6;\n\ntype BookSelectorProps = {\n  /**\n   * Information about available books, formatted as a 123 character long string as defined in a\n   * projects BooksPresent setting\n   */\n  availableBookInfo: string;\n  /** Array of currently selected book IDs */\n  selectedBookIds: string[];\n  /** Callback function that is executed when the book selection changes */\n  onChangeSelectedBookIds: (books: string[]) => void;\n  /** Object containing the localized strings for the component */\n  localizedStrings: LanguageStrings;\n  /**\n   * Optional map of localized book IDs/short names and full names. Key is the (English) book ID,\n   * value contains localized versions of the ID and full book name\n   */\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>;\n};\n\n/**\n * A component for selecting multiple books from the Bible canon. It provides:\n *\n * - Quick selection buttons for major sections (OT, NT, DC, Extra)\n * - A searchable dropdown with all available books\n * - Support for shift-click range selection\n * - Visual feedback with badges showing selected books\n */\nexport function BookSelector({\n  availableBookInfo,\n  selectedBookIds,\n  onChangeSelectedBookIds,\n  localizedStrings,\n  localizedBookNames,\n}: BookSelectorProps) {\n  const booksSelectedText = localizedStrings['%webView_book_selector_books_selected%'];\n  const selectBooksText = localizedStrings['%webView_book_selector_select_books%'];\n  const searchBooksText = localizedStrings['%webView_book_selector_search_books%'];\n  const selectAllText = localizedStrings['%webView_book_selector_select_all%'];\n  const clearAllText = localizedStrings['%webView_book_selector_clear_all%'];\n  const noBookFoundText = localizedStrings['%webView_book_selector_no_book_found%'];\n  const moreText = localizedStrings['%webView_book_selector_more%'];\n  const sectionOtLongText = localizedStrings['%scripture_section_ot_long%'];\n  const sectionNtLongText = localizedStrings['%scripture_section_nt_long%'];\n  const sectionDcLongText = localizedStrings['%scripture_section_dc_long%'];\n  const sectionExtraLongText = localizedStrings['%scripture_section_extra_long%'];\n\n  const [isBooksSelectorOpen, setIsBooksSelectorOpen] = useState(false);\n  const lastSelectedBookRef = useRef<string | undefined>(undefined);\n  const lastKeyEventShiftKey = useRef(false);\n\n  if (availableBookInfo.length !== Canon.allBookIds.length) {\n    throw new Error('availableBookInfo length must match Canon.allBookIds length');\n  }\n\n  const availableBooksIds = useMemo(() => {\n    return Canon.allBookIds.filter(\n      (bookId, index) =>\n        availableBookInfo[index] === '1' && !Canon.isObsolete(Canon.bookIdToNumber(bookId)),\n    );\n  }, [availableBookInfo]);\n\n  const toggleBook = useCallback(\n    (bookId: string, shiftKey = false) => {\n      if (!shiftKey || !lastSelectedBookRef.current) {\n        onChangeSelectedBookIds(\n          selectedBookIds.includes(bookId)\n            ? selectedBookIds.filter((id) => id !== bookId)\n            : [...selectedBookIds, bookId],\n        );\n        lastSelectedBookRef.current = bookId;\n        return;\n      }\n\n      const lastIndex = availableBooksIds.findIndex((id) => id === lastSelectedBookRef.current);\n      const currentIndex = availableBooksIds.findIndex((id) => id === bookId);\n\n      if (lastIndex === -1 || currentIndex === -1) return;\n\n      const [startIndex, endIndex] = [\n        Math.min(lastIndex, currentIndex),\n        Math.max(lastIndex, currentIndex),\n      ];\n      const booksInRange = availableBooksIds.slice(startIndex, endIndex + 1).map((id) => id);\n\n      onChangeSelectedBookIds(\n        selectedBookIds.includes(bookId)\n          ? selectedBookIds.filter((shortname) => !booksInRange.includes(shortname))\n          : [...new Set([...selectedBookIds, ...booksInRange])],\n      );\n    },\n    [selectedBookIds, onChangeSelectedBookIds, availableBooksIds],\n  );\n\n  const toggleSection = useCallback(\n    (section: Section) => {\n      const sectionBooks = getBooksForSection(availableBooksIds, section).map((bookId) => bookId);\n      onChangeSelectedBookIds(\n        isSectionFullySelected(availableBooksIds, section, selectedBookIds)\n          ? selectedBookIds.filter((shortname) => !sectionBooks.includes(shortname))\n          : [...new Set([...selectedBookIds, ...sectionBooks])],\n      );\n    },\n    [selectedBookIds, onChangeSelectedBookIds, availableBooksIds],\n  );\n\n  const handleSelectAll = () => {\n    onChangeSelectedBookIds(availableBooksIds.map((bookId) => bookId));\n  };\n\n  const handleClearAll = () => {\n    onChangeSelectedBookIds([]);\n  };\n\n  return (\n    <div className=\"tw-space-y-2\">\n      <div className=\"tw-flex tw-flex-wrap tw-gap-2\">\n        {Object.values(Section).map((section) => {\n          return (\n            <SectionButton\n              key={section}\n              section={section}\n              availableBookIds={availableBooksIds}\n              selectedBookIds={selectedBookIds}\n              onToggle={toggleSection}\n              localizedStrings={localizedStrings}\n            />\n          );\n        })}\n      </div>\n\n      <Popover open={isBooksSelectorOpen} onOpenChange={setIsBooksSelectorOpen}>\n        <PopoverTrigger asChild>\n          <Button\n            variant=\"outline\"\n            role=\"combobox\"\n            aria-expanded={isBooksSelectorOpen}\n            className=\"tw-max-w-64 tw-justify-between\"\n          >\n            {selectedBookIds.length > 0\n              ? `${booksSelectedText}: ${selectedBookIds.length}`\n              : selectBooksText}\n            <ChevronsUpDown className=\"tw-ml-2 tw-h-4 tw-w-4 tw-shrink-0 tw-opacity-50\" />\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"tw-w-full tw-p-0\" align=\"start\">\n          <Command\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') {\n                // Store shift state in a ref that will be used by onSelect\n                lastKeyEventShiftKey.current = e.shiftKey;\n              }\n            }}\n          >\n            <CommandInput placeholder={searchBooksText} />\n            <div className=\"tw-flex tw-justify-between tw-border-b tw-p-2\">\n              <Button variant=\"ghost\" size=\"sm\" onClick={handleSelectAll}>\n                {selectAllText}\n              </Button>\n              <Button variant=\"ghost\" size=\"sm\" onClick={handleClearAll}>\n                {clearAllText}\n              </Button>\n            </div>\n            <CommandList>\n              <CommandEmpty>{noBookFoundText}</CommandEmpty>\n              {Object.values(Section).map((section, index) => {\n                const sectionBooks = availableBooksIds.filter(\n                  (bookId) => getSectionForBook(bookId) === section,\n                );\n\n                if (sectionBooks.length === 0) return undefined;\n\n                return (\n                  <Fragment key={section}>\n                    <CommandGroup\n                      heading={getSectionLongName(\n                        section,\n                        sectionOtLongText,\n                        sectionNtLongText,\n                        sectionDcLongText,\n                        sectionExtraLongText,\n                      )}\n                    >\n                      {sectionBooks.map((bookId) => (\n                        <BookItem\n                          key={bookId}\n                          bookId={bookId}\n                          selectedBookIds={selectedBookIds}\n                          toggleBook={toggleBook}\n                          lastKeyEventShiftKey={lastKeyEventShiftKey}\n                          localizedBookNames={localizedBookNames}\n                        />\n                      ))}\n                    </CommandGroup>\n                    {index < Object.values(Section).length - 1 && <CommandSeparator />}\n                  </Fragment>\n                );\n              })}\n            </CommandList>\n          </Command>\n        </PopoverContent>\n      </Popover>\n\n      {selectedBookIds.length > 0 && (\n        <div className=\"tw-mt-2 tw-flex tw-flex-wrap tw-gap-1\">\n          {selectedBookIds\n            .slice(\n              0,\n              selectedBookIds.length === MAX_VISIBLE_BADGES\n                ? MAX_VISIBLE_BADGES\n                : VISIBLE_BADGES_COUNT,\n            )\n            .map((bookId) => (\n              <Badge className=\"hover:tw-bg-secondary\" key={bookId} variant=\"secondary\">\n                {(localizedBookNames && localizedBookNames.get(bookId)?.localizedName) ||\n                  Canon.bookIdToEnglishName(bookId) ||\n                  bookId}\n              </Badge>\n            ))}\n          {selectedBookIds.length > MAX_VISIBLE_BADGES && (\n            <Badge\n              className=\"hover:tw-bg-secondary\"\n              variant=\"secondary\"\n            >{`+${selectedBookIds.length - VISIBLE_BADGES_COUNT} ${moreText}`}</Badge>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { BookSelector } from '@/components/advanced/scope-selector/book-selector.component';\nimport { Label } from '@/components/shadcn-ui/label';\nimport { RadioGroup, RadioGroupItem } from '@/components/shadcn-ui/radio-group';\nimport { Scope } from '@/components/utils/scripture.util';\nimport { LocalizedStringValue } from 'platform-bible-utils';\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const SCOPE_SELECTOR_STRING_KEYS = Object.freeze([\n  '%webView_scope_selector_selected_text%',\n  '%webView_scope_selector_current_verse%',\n  '%webView_scope_selector_current_chapter%',\n  '%webView_scope_selector_current_book%',\n  '%webView_scope_selector_choose_books%',\n  '%webView_scope_selector_scope%',\n  '%webView_scope_selector_select_books%',\n  '%webView_book_selector_books_selected%',\n  '%webView_book_selector_select_books%',\n  '%webView_book_selector_search_books%',\n  '%webView_book_selector_select_all%',\n  '%webView_book_selector_clear_all%',\n  '%webView_book_selector_no_book_found%',\n  '%webView_book_selector_more%',\n  '%scripture_section_ot_long%',\n  '%scripture_section_ot_short%',\n  '%scripture_section_nt_long%',\n  '%scripture_section_nt_short%',\n  '%scripture_section_dc_long%',\n  '%scripture_section_dc_short%',\n  '%scripture_section_extra_long%',\n  '%scripture_section_extra_short%',\n] as const);\n\n/** Type definition for the localized strings used in this component */\nexport type ScopeSelectorLocalizedStrings = {\n  [localizedInventoryKey in (typeof SCOPE_SELECTOR_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: ScopeSelectorLocalizedStrings,\n  key: keyof ScopeSelectorLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\n/** Props for configuring the ScopeSelector component */\ninterface ScopeSelectorProps {\n  /** The current scope selection */\n  scope: Scope;\n\n  /**\n   * Optional array of scopes that should be available in the selector. If not provided, all scopes\n   * will be shown as defined in the Scope type\n   */\n  availableScopes?: Scope[];\n\n  /** Callback function that is executed when the user changes the scope selection */\n  onScopeChange: (scope: Scope) => void;\n\n  /**\n   * Information about available books, formatted as a 123 character long string as defined in a\n   * projects BooksPresent setting\n   */\n  availableBookInfo: string;\n\n  /** Array of currently selected book IDs */\n  selectedBookIds: string[];\n\n  /** Callback function that is executed when the user changes the book selection */\n  onSelectedBookIdsChange: (books: string[]) => void;\n\n  /**\n   * Object with all localized strings that the component needs to work well across multiple\n   * languages. When using this component with Platform.Bible, you can import\n   * `SCOPE_SELECTOR_STRING_KEYS` from this library, pass it in to the Platform's localization hook,\n   * and pass the localized keys that are returned by the hook into this prop.\n   */\n  localizedStrings: ScopeSelectorLocalizedStrings;\n  /**\n   * Optional map of localized book IDs/short names and full names. Key is the (English) book ID,\n   * value contains localized versions of the ID and full book name\n   */\n  localizedBookNames?: Map<string, { localizedId: string; localizedName: string }>;\n}\n\n/**\n * A component that allows users to select the scope of their search or operation. Available scopes\n * are defined in the Scope type. When 'selectedBooks' is chosen as the scope, a BookSelector\n * component is displayed to allow users to choose specific books.\n */\nexport function ScopeSelector({\n  scope,\n  availableScopes,\n  onScopeChange,\n  availableBookInfo,\n  selectedBookIds,\n  onSelectedBookIdsChange,\n  localizedStrings,\n  localizedBookNames,\n}: ScopeSelectorProps) {\n  const selectedTextText = localizeString(\n    localizedStrings,\n    '%webView_scope_selector_selected_text%',\n  );\n  const currentVerseText = localizeString(\n    localizedStrings,\n    '%webView_scope_selector_current_verse%',\n  );\n  const currentChapterText = localizeString(\n    localizedStrings,\n    '%webView_scope_selector_current_chapter%',\n  );\n  const currentBookText = localizeString(localizedStrings, '%webView_scope_selector_current_book%');\n  const chooseBooksText = localizeString(localizedStrings, '%webView_scope_selector_choose_books%');\n  const scopeText = localizeString(localizedStrings, '%webView_scope_selector_scope%');\n  const selectBooksText = localizeString(localizedStrings, '%webView_scope_selector_select_books%');\n\n  const SCOPE_OPTIONS: Array<{ value: Scope; label: string; id: string }> = [\n    { value: 'selectedText', label: selectedTextText, id: 'scope-selected-text' },\n    { value: 'verse', label: currentVerseText, id: 'scope-verse' },\n    { value: 'chapter', label: currentChapterText, id: 'scope-chapter' },\n    { value: 'book', label: currentBookText, id: 'scope-book' },\n    { value: 'selectedBooks', label: chooseBooksText, id: 'scope-selected' },\n  ];\n\n  const displayedScopes = availableScopes\n    ? SCOPE_OPTIONS.filter((option) => availableScopes.includes(option.value))\n    : SCOPE_OPTIONS;\n\n  return (\n    <div className=\"tw-grid tw-gap-4\">\n      <div className=\"tw-grid tw-gap-2\">\n        <Label>{scopeText}</Label>\n        <RadioGroup\n          value={scope}\n          onValueChange={onScopeChange}\n          className=\"tw-flex tw-flex-col tw-space-y-1\"\n        >\n          {displayedScopes.map(({ value, label, id }) => (\n            <div key={id} className=\"tw-flex tw-items-center\">\n              <RadioGroupItem className=\"tw-me-2\" value={value} id={id} />\n              <Label htmlFor={id}>{label}</Label>\n            </div>\n          ))}\n        </RadioGroup>\n      </div>\n\n      {scope === 'selectedBooks' && (\n        <div className=\"tw-grid tw-gap-2\">\n          <Label>{selectBooksText}</Label>\n          <BookSelector\n            availableBookInfo={availableBookInfo}\n            selectedBookIds={selectedBookIds}\n            onChangeSelectedBookIds={onSelectedBookIdsChange}\n            localizedStrings={localizedStrings}\n            localizedBookNames={localizedBookNames}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default ScopeSelector;\n","import {\n  getLocalizeKeyForScrollGroupId,\n  LanguageStrings,\n  ScrollGroupId,\n} from 'platform-bible-utils';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/shadcn-ui/select';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\n\nconst DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS = {\n  [getLocalizeKeyForScrollGroupId('undefined')]: 'Ø',\n  [getLocalizeKeyForScrollGroupId(0)]: 'A',\n  [getLocalizeKeyForScrollGroupId(1)]: 'B',\n  [getLocalizeKeyForScrollGroupId(2)]: 'C',\n  [getLocalizeKeyForScrollGroupId(3)]: 'D',\n  [getLocalizeKeyForScrollGroupId(4)]: 'E',\n  [getLocalizeKeyForScrollGroupId(5)]: 'F',\n  [getLocalizeKeyForScrollGroupId(6)]: 'G',\n  [getLocalizeKeyForScrollGroupId(7)]: 'H',\n  [getLocalizeKeyForScrollGroupId(8)]: 'I',\n  [getLocalizeKeyForScrollGroupId(9)]: 'J',\n  [getLocalizeKeyForScrollGroupId(10)]: 'K',\n  [getLocalizeKeyForScrollGroupId(11)]: 'L',\n  [getLocalizeKeyForScrollGroupId(12)]: 'M',\n  [getLocalizeKeyForScrollGroupId(13)]: 'N',\n  [getLocalizeKeyForScrollGroupId(14)]: 'O',\n  [getLocalizeKeyForScrollGroupId(15)]: 'P',\n  [getLocalizeKeyForScrollGroupId(16)]: 'Q',\n  [getLocalizeKeyForScrollGroupId(17)]: 'R',\n  [getLocalizeKeyForScrollGroupId(18)]: 'S',\n  [getLocalizeKeyForScrollGroupId(19)]: 'T',\n  [getLocalizeKeyForScrollGroupId(20)]: 'U',\n  [getLocalizeKeyForScrollGroupId(21)]: 'V',\n  [getLocalizeKeyForScrollGroupId(22)]: 'W',\n  [getLocalizeKeyForScrollGroupId(23)]: 'X',\n  [getLocalizeKeyForScrollGroupId(24)]: 'Y',\n  [getLocalizeKeyForScrollGroupId(25)]: 'Z',\n};\n\nexport type ScrollGroupSelectorProps = {\n  /**\n   * List of scroll group ids to show to the user. Either a `ScrollGroupId` or `undefined` for no\n   * scroll group\n   */\n  availableScrollGroupIds: (ScrollGroupId | undefined)[];\n  /** Currently selected scroll group id. `undefined` for no scroll group */\n  scrollGroupId: ScrollGroupId | undefined;\n  /** Callback function run when the user tries to change the scroll group id */\n  onChangeScrollGroupId: (newScrollGroupId: ScrollGroupId | undefined) => void;\n  /**\n   * Localized strings to use for displaying scroll group ids. Must be an object whose keys are\n   * `getLocalizeKeyForScrollGroupId(scrollGroupId)` for all scroll group ids (and `undefined` if\n   * included) in {@link ScrollGroupSelectorProps.availableScrollGroupIds} and whose values are the\n   * localized strings to use for those scroll group ids.\n   *\n   * Defaults to English localizations of English alphabet for scroll groups 0-25 (e.g. 0 is A) and\n   * Ø for `undefined`. Will fill in any that are not provided with these English localizations.\n   * Also, if any values match the keys, the English localization will be used. This is useful in\n   * case you want to pass in a temporary version of the localized strings while your localized\n   * strings load.\n   *\n   * @example\n   *\n   * ```typescript\n   * const myScrollGroupIdLocalizedStrings = {\n   *   [getLocalizeKeyForScrollGroupId('undefined')]: 'Ø',\n   *   [getLocalizeKeyForScrollGroupId(0)]: 'A',\n   *   [getLocalizeKeyForScrollGroupId(1)]: 'B',\n   *   [getLocalizeKeyForScrollGroupId(2)]: 'C',\n   *   [getLocalizeKeyForScrollGroupId(3)]: 'D',\n   *   [getLocalizeKeyForScrollGroupId(4)]: 'E',\n   * };\n   * ```\n   *\n   * @example\n   *\n   * ```tsx\n   * const availableScrollGroupIds = [undefined, 0, 1, 2, 3, 4];\n   *\n   * const localizeKeys = getLocalizeKeysForScrollGroupIds();\n   *\n   * const [localizedStrings] = useLocalizedStrings(localizeKeys);\n   *\n   * ...\n   *\n   * <ScrollGroupSelector localizedStrings={localizedStrings} />\n   * ```\n   */\n  localizedStrings?: LanguageStrings;\n\n  /** Size of the scroll group dropdown button. Defaults to 'default' */\n  size?: 'default' | 'sm' | 'lg' | 'icon';\n\n  /** Additional css classes to help with unique styling */\n  className?: string;\n};\n\n/** Selector component for choosing a scroll group */\nexport function ScrollGroupSelector({\n  availableScrollGroupIds,\n  scrollGroupId,\n  onChangeScrollGroupId,\n  localizedStrings = {},\n  size,\n  className,\n}: ScrollGroupSelectorProps) {\n  const localizedStringsDefaulted = {\n    ...DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS,\n    ...Object.fromEntries(\n      Object.entries(localizedStrings).map(\n        ([localizedStringKey, localizedStringValue]: [string, string]) => [\n          localizedStringKey,\n          localizedStringKey === localizedStringValue &&\n          localizedStringKey in DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS\n            ? DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS[localizedStringKey]\n            : localizedStringValue,\n        ],\n      ),\n    ),\n  };\n\n  const dir: Direction = readDirection();\n\n  return (\n    <Select\n      value={`${scrollGroupId}`}\n      onValueChange={(newScrollGroupString) =>\n        onChangeScrollGroupId(\n          newScrollGroupString === 'undefined' ? undefined : parseInt(newScrollGroupString, 10),\n        )\n      }\n    >\n      <SelectTrigger size={size} className={cn('pr-twp tw-w-auto', className)}>\n        <SelectValue\n          placeholder={\n            localizedStringsDefaulted[getLocalizeKeyForScrollGroupId(scrollGroupId)] ??\n            scrollGroupId\n          }\n        />\n      </SelectTrigger>\n      <SelectContent\n        align={dir === 'rtl' ? 'end' : 'start'}\n        // Need to get over the floating web view z-index 200\n        style={{ zIndex: 250 }}\n      >\n        {availableScrollGroupIds.map((scrollGroupOptionId) => (\n          <SelectItem key={`${scrollGroupOptionId}`} value={`${scrollGroupOptionId}`}>\n            {localizedStringsDefaulted[getLocalizeKeyForScrollGroupId(scrollGroupOptionId)]}\n          </SelectItem>\n        ))}\n      </SelectContent>\n    </Select>\n  );\n}\n\nexport default ScrollGroupSelector;\n","import { PropsWithChildren } from 'react';\nimport { Separator } from '@/components/shadcn-ui/separator';\n\n/** Props for the SettingsList component, currently just children */\ntype SettingsListProps = PropsWithChildren;\n\n/**\n * SettingsList component is a wrapper for list items. Rendered with a formatted div\n *\n * @param children To populate the list with\n * @returns Formatted div encompassing the children\n */\nexport function SettingsList({ children }: SettingsListProps) {\n  return <div className=\"pr-twp tw-grid\">{children}</div>;\n}\n\n/** Props for SettingsListItem component */\ntype SettingsListItemProps = PropsWithChildren & {\n  /** Primary text of the list item */\n  primary: string;\n\n  /** Optional text of the list item */\n  secondary?: string | undefined;\n\n  /** Optional boolean to display a message if the children aren't loaded yet. Defaults to false */\n  isLoading?: boolean;\n\n  /** Optional message to display if isLoading */\n  loadingMessage?: string;\n};\n\n/**\n * SettingsListItem component is a common list item. Rendered with a formatted div\n *\n * @param SettingsListItemProps\n * @returns Formatted div encompassing the list item content\n */\nexport function SettingsListItem({\n  primary,\n  secondary,\n  children,\n  isLoading = false,\n  loadingMessage,\n}: SettingsListItemProps) {\n  return (\n    <div className=\"tw-flex tw-items-center tw-justify-between tw-space-x-4 tw-py-2\">\n      <div>\n        <p className=\"tw-text-sm tw-font-medium tw-leading-none\">{primary}</p>\n        <p className=\"tw-whitespace-normal tw-break-words tw-text-sm tw-text-muted-foreground\">\n          {secondary}\n        </p>\n      </div>\n\n      {isLoading ? (\n        <p className=\"tw-text-sm tw-text-muted-foreground\">{loadingMessage}</p>\n      ) : (\n        <div>{children}</div>\n      )}\n    </div>\n  );\n}\n\n/** Props for SettingsListHeader component */\ntype SettingsListHeaderProps = {\n  /** The primary text of the list header */\n  primary: string;\n\n  /** Optional secondary text of the list header */\n  secondary?: string | undefined;\n\n  /** Optional boolean to include a separator underneath the secondary text. Defaults to false */\n  includeSeparator?: boolean;\n};\n\n/**\n * SettingsListHeader component displays text above the list\n *\n * @param SettingsListHeaderProps\n * @returns Formatted div with list header content\n */\nexport function SettingsListHeader({\n  primary,\n  secondary,\n  includeSeparator = false,\n}: SettingsListHeaderProps) {\n  return (\n    <div className=\"tw-space-y-4 tw-py-2\">\n      <div>\n        <h3 className=\"tw-text-lg tw-font-medium\">{primary}</h3>\n        <p className=\"tw-text-sm tw-text-muted-foreground\">{secondary}</p>\n      </div>\n      {includeSeparator ? <Separator /> : ''}\n    </div>\n  );\n}\n","import { GroupsInMultiColumnMenu, Localized } from 'platform-bible-utils';\n\n/**\n * Function that looks up the key of a sub-menu group using the value of it's `menuItem` property.\n *\n * @example\n *\n * ```ts\n * const groups = {\n *   'platform.subMenu': { menuItem: 'platform.subMenuId', order: 1 },\n *   'platform.subSubMenu': { menuItem: 'platform.subSubMenuId', order: 2 },\n * };\n * const id = 'platform.subMenuId';\n * const groupKey = getSubMenuGroupKeyForMenuItemId(groups, id);\n * console.log(groupKey); // Output: 'platform.subMenu'\n * ```\n *\n * @param groups The JSON Object containing the group definitions\n * @param id The value of the `menuItem` property of the group to look up\n * @returns The key of the group that has the `menuItem` property with the value of `id` or\n *   `undefined` if no such group exists.\n */\nexport function getSubMenuGroupKeyForMenuItemId(\n  groups: Localized<GroupsInMultiColumnMenu>,\n  id: string,\n): string | undefined {\n  return Object.entries(groups).find(\n    ([, value]) => 'menuItem' in value && value.menuItem === id,\n  )?.[0];\n}\n","import { cn } from '@/utils/shadcn-ui.util';\n\ntype MenuItemIconProps = {\n  /** The icon to display */\n  icon: string;\n  /** The label of the menu item */\n  menuLabel: string;\n  /** Whether the icon is leading or trailing */\n  leading?: boolean;\n};\n\nfunction MenuItemIcon({ icon, menuLabel, leading }: MenuItemIconProps) {\n  return icon ? (\n    <img\n      className={cn('tw-max-h-5 tw-max-w-5', leading ? 'tw-me-2' : 'tw-ms-2')}\n      src={icon}\n      alt={`${leading ? 'Leading' : 'Trailing'} icon for ${menuLabel}`}\n    />\n  ) : undefined;\n}\n\nexport default MenuItemIcon;\n","import {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuItem,\n  DropdownMenuPortal,\n  DropdownMenuSeparator,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuTrigger,\n} from '@/components/shadcn-ui/dropdown-menu';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/shadcn-ui/tooltip';\nimport { MenuIcon } from 'lucide-react';\nimport {\n  GroupsInMultiColumnMenu,\n  Localized,\n  MenuItemContainingCommand,\n  MenuItemContainingSubmenu,\n  MultiColumnMenu,\n} from 'platform-bible-utils';\nimport { Fragment, ReactNode } from 'react';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { getSubMenuGroupKeyForMenuItemId } from './menu.util';\nimport { SelectMenuItemHandler } from './platform-menubar.component';\nimport MenuItemIcon from './menu-icon.component';\n\nconst getGroupContent = (\n  groups: Localized<GroupsInMultiColumnMenu>,\n  items: Localized<(MenuItemContainingCommand | MenuItemContainingSubmenu)[]>,\n  columnOrSubMenuKey: string | undefined,\n  onSelectMenuItem: SelectMenuItemHandler,\n) => {\n  if (!columnOrSubMenuKey) return undefined;\n\n  const sortedGroupsForColumn = Object.entries(groups)\n    .filter(\n      ([key, group]) =>\n        ('column' in group && group.column === columnOrSubMenuKey) || key === columnOrSubMenuKey,\n    )\n    .sort(([, a], [, b]) => a.order - b.order);\n\n  return sortedGroupsForColumn.flatMap(([groupKey]) => {\n    const groupItems = items\n      .filter((item) => item.group === groupKey)\n      .sort((a, b) => a.order - b.order)\n      .map((item: Localized<MenuItemContainingCommand | MenuItemContainingSubmenu>) => {\n        return (\n          <Tooltip key={`tooltip-${item.label}-${'command' in item ? item.command : item.id}`}>\n            <TooltipTrigger asChild>\n              {'command' in item ? (\n                <DropdownMenuItem\n                  key={`dropdown-menu-item-${item.label}-${item.command}`}\n                  onClick={() => {\n                    // Since the item has a command, we know it is a MenuItemContainingCommand.\n                    // eslint-disable-next-line no-type-assertion/no-type-assertion\n                    onSelectMenuItem(item as MenuItemContainingCommand);\n                  }}\n                >\n                  {item.iconPathBefore && (\n                    <MenuItemIcon icon={item.iconPathBefore} menuLabel={item.label} leading />\n                  )}\n                  {item.label}\n                  {item.iconPathAfter && (\n                    <MenuItemIcon icon={item.iconPathAfter} menuLabel={item.label} />\n                  )}\n                </DropdownMenuItem>\n              ) : (\n                <DropdownMenuSub key={`dropdown-menu-sub-${item.label}-${item.id}`}>\n                  <DropdownMenuSubTrigger>{item.label}</DropdownMenuSubTrigger>\n\n                  <DropdownMenuPortal>\n                    <DropdownMenuSubContent>\n                      {getGroupContent(\n                        groups,\n                        items,\n                        getSubMenuGroupKeyForMenuItemId(groups, item.id),\n                        onSelectMenuItem,\n                      )}\n                    </DropdownMenuSubContent>\n                  </DropdownMenuPortal>\n                </DropdownMenuSub>\n              )}\n            </TooltipTrigger>\n            {item.tooltip && <TooltipContent>{item.tooltip}</TooltipContent>}\n          </Tooltip>\n        );\n      });\n\n    return groupItems;\n  });\n};\n\nexport type TabDropdownMenuProps = {\n  /** The handler to use for menu commands */\n  onSelectMenuItem: SelectMenuItemHandler;\n\n  /** The menu data to show on the dropdown menu */\n  menuData: Localized<MultiColumnMenu>;\n\n  /** Defines a string value that labels the current element */\n  tabLabel: string;\n\n  /** Optional icon for the dropdown menu trigger. Defaults to hamburger icon. */\n  icon?: ReactNode;\n\n  /** Additional css class(es) to help with unique styling of the tab dropdown menu */\n  className?: string;\n\n  /** Style variant for the app menubar component. */\n  variant?: 'default' | 'muted';\n\n  /** Optional unique identifier */\n  id?: string;\n};\n\n/**\n * Dropdown menu designed to be used with Platform.Bible menu data. Column headers are ignored.\n * Column data is separated by a horizontal divider, so groups are not distinguishable. Tooltips are\n * displayed on hovering over menu items, if a tooltip is defined for them.\n *\n * A child component can be passed in to show as an icon on the menu trigger button.\n */\nexport default function TabDropdownMenu({\n  onSelectMenuItem,\n  menuData,\n  tabLabel,\n  icon,\n  className,\n  variant,\n  id,\n}: TabDropdownMenuProps) {\n  return (\n    <DropdownMenu variant={variant}>\n      <DropdownMenuTrigger aria-label={tabLabel} className={className} asChild id={id}>\n        <Button variant=\"ghost\" size=\"icon\">\n          {icon ?? <MenuIcon />}\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"start\" className=\"tw-z-[250]\">\n        {Object.entries(menuData.columns)\n          .filter(([, column]) => typeof column === 'object')\n          .sort(([, a], [, b]) => {\n            if (typeof a === 'boolean' || typeof b === 'boolean') return 0;\n            return a.order - b.order;\n          })\n          .map(([columnKey], index, array) => (\n            <Fragment key={columnKey}>\n              <DropdownMenuGroup>\n                <TooltipProvider>\n                  {getGroupContent(menuData.groups, menuData.items, columnKey, onSelectMenuItem)}\n                </TooltipProvider>\n              </DropdownMenuGroup>\n\n              {index < array.length - 1 && <DropdownMenuSeparator />}\n            </Fragment>\n          ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","import { PropsWithChildren, ReactNode } from 'react';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Localized, MultiColumnMenu } from 'platform-bible-utils';\nimport { Menu, EllipsisVertical } from 'lucide-react';\nimport { SelectMenuItemHandler } from './menus/platform-menubar.component';\nimport TabDropdownMenu from './menus/tab-dropdown-menu.component';\n\nexport type TabToolbarProps = PropsWithChildren<{\n  /** The handler to use for toolbar item commands */\n  onSelectProjectMenuItem: SelectMenuItemHandler;\n\n  /** The handler to use for toolbar item commands */\n  onSelectViewInfoMenuItem: SelectMenuItemHandler;\n\n  /** Menu data that is used to populate the Menubar component for the project menu. */\n  projectMenuData?: Localized<MultiColumnMenu>;\n\n  /** Menu data that is used to populate the Menubar component for the view info menu */\n  tabViewMenuData?: Localized<MultiColumnMenu>;\n\n  /** Optional unique identifier */\n  id?: string;\n\n  /** Additional css classes to help with unique styling of the extensible toolbar */\n  className?: string;\n\n  /**\n   * Toolbar children to be put at the start of the the toolbar after the project menu icon (left\n   * side in ltr, right side in rtl). Recommended for inner navigation.\n   */\n  startAreaChildren?: ReactNode;\n\n  /** Toolbar children to be put in the center area of the the toolbar. Recommended for tools. */\n  centerAreaChildren?: ReactNode;\n\n  /**\n   * Toolbar children to be put at the end of the the toolbar before the tab view menu icon (right\n   * side in ltr, left side in rtl). Recommended for secondary tools and view options.\n   */\n  endAreaChildren?: ReactNode;\n}>;\n\nexport function TabToolbar({\n  onSelectProjectMenuItem,\n  onSelectViewInfoMenuItem,\n  projectMenuData,\n  tabViewMenuData,\n  id,\n  className,\n  startAreaChildren,\n  centerAreaChildren,\n  endAreaChildren,\n}: TabToolbarProps) {\n  return (\n    <div\n      className={cn(\n        'tw-box-border tw-flex tw-h-12 tw-w-full tw-flex-row tw-items-center tw-justify-between tw-gap-2 tw-overflow-clip tw-border tw-px-4 tw-py-2 tw-text-foreground tw-@container/toolbar',\n        className,\n      )}\n      id={id}\n    >\n      {projectMenuData && (\n        <TabDropdownMenu\n          onSelectMenuItem={onSelectProjectMenuItem}\n          menuData={projectMenuData}\n          tabLabel=\"Project\"\n          icon={<Menu />}\n          className=\"tw-h-full tw-w-8\"\n        />\n      )}\n      <div className=\"tw-flex tw-h-full tw-shrink tw-grow-[2] tw-flex-row tw-flex-wrap tw-items-start tw-gap-2 tw-overflow-clip tw-@container/tab-toolbar-start\">\n        {startAreaChildren}\n      </div>\n      <div className=\"tw-flex tw-h-full tw-shrink tw-basis-0 tw-flex-row tw-flex-wrap tw-items-start tw-justify-center tw-gap-2 tw-overflow-clip tw-@container/tab-toolbar-center @sm:tw-grow @sm:tw-basis-auto\">\n        {centerAreaChildren}\n      </div>\n      <div className=\"tw-flex tw-h-full tw-shrink tw-grow-[2] tw-flex-row-reverse tw-flex-wrap tw-items-start tw-gap-2 tw-overflow-clip tw-@container/tab-toolbar-end\">\n        {tabViewMenuData && (\n          <TabDropdownMenu\n            onSelectMenuItem={onSelectViewInfoMenuItem}\n            menuData={tabViewMenuData}\n            tabLabel=\"View Info\"\n            icon={<EllipsisVertical />}\n            className=\"tw-h-full\"\n          />\n        )}\n        {endAreaChildren}\n      </div>\n    </div>\n  );\n}\n\nexport default TabToolbar;\n","// adapted from: https://github.com/shadcn-ui/ui/discussions/752\n\n'use client';\n\nimport { TabsContentProps, TabsListProps, TabsTriggerProps } from '@/components/shadcn-ui/tabs';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport * as TabsPrimitive from '@radix-ui/react-tabs';\nimport React from 'react';\n\nexport type VerticalTabsProps = React.ComponentPropsWithoutRef<typeof TabsPrimitive.Root> & {\n  className?: string;\n};\n\nexport type LeftTabsTriggerProps = TabsTriggerProps & {\n  value: string;\n  ref?: React.Ref<HTMLButtonElement>;\n};\n\n/**\n * Tabs components provide a set of layered sections of content—known as tab panels–that are\n * displayed one at a time. These components are built on Radix UI primitives and styled with Shadcn\n * UI. See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/tabs See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/tabs\n */\nexport const VerticalTabs = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Root>,\n  VerticalTabsProps\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <TabsPrimitive.Root\n      orientation=\"vertical\"\n      ref={ref}\n      className={cn('tw-flex tw-gap-1 tw-rounded-md tw-text-muted-foreground', className)}\n      {...props}\n      dir={dir}\n    />\n  );\n});\n\nVerticalTabs.displayName = TabsPrimitive.List.displayName;\n\n/** @inheritdoc VerticalTabs */\nexport const VerticalTabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  TabsListProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      'tw-flex-fit tw-mlk-items-center tw-w-[124px] tw-justify-center tw-rounded-md tw-bg-muted tw-p-1 tw-text-muted-foreground',\n      className,\n    )}\n    {...props}\n  />\n));\nVerticalTabsList.displayName = TabsPrimitive.List.displayName;\n\n/** @inheritdoc VerticalTabs */\nexport const VerticalTabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  LeftTabsTriggerProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    {...props}\n    className={cn(\n      'overflow-clip tw-inline-flex tw-w-[116px] tw-cursor-pointer tw-items-center tw-justify-center tw-break-words tw-rounded-sm tw-border-0 tw-bg-muted tw-px-3 tw-py-1.5 tw-text-sm tw-font-medium tw-text-inherit tw-ring-offset-background tw-transition-all hover:tw-text-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50 data-[state=active]:tw-bg-background data-[state=active]:tw-text-foreground data-[state=active]:tw-shadow-sm',\n      className,\n    )}\n  />\n));\n\n/** @inheritdoc VerticalTabs */\nexport const VerticalTabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  TabsContentProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      // Removed tw-mt-2 because Sebastian said so\n      'tw-ms-5 tw-flex-grow tw-text-foreground tw-ring-offset-background focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2',\n      className,\n    )}\n    {...props}\n  />\n));\nVerticalTabsContent.displayName = TabsPrimitive.Content.displayName;\n","import { SearchBar } from '@/components/basics/search-bar.component';\nimport {\n  VerticalTabs,\n  VerticalTabsContent,\n  VerticalTabsList,\n  VerticalTabsTrigger,\n} from '@/components/basics/tabs-vertical';\nimport { ReactNode } from 'react';\n\nexport type TabKeyValueContent = {\n  key: string;\n  value: string;\n  content: ReactNode;\n};\n\nexport type TabNavigationContentSearchProps = {\n  /** List of values and keys for each tab this component should provide */\n  tabList: TabKeyValueContent[];\n\n  /** The search query in the search bar */\n  searchValue: string;\n\n  /** Handler to run when the value of the search bar changes */\n  onSearch: (searchQuery: string) => void;\n\n  /** Optional placeholder for the search bar */\n  searchPlaceholder?: string;\n\n  /** Optional title to include in the header */\n  headerTitle?: string;\n\n  /** Optional className to modify the search input */\n  searchClassName?: string;\n};\n\n/**\n * TabNavigationContentSearch component provides a vertical tab navigation interface with a search\n * bar at the top. This component allows users to filter content within tabs based on a search\n * query.\n *\n * @param {TabNavigationContentSearchProps} props\n * @param {TabKeyValueContent[]} props.tabList - List of objects containing keys, values, and\n *   content for each tab to be displayed.\n * @param {string} props.searchValue - The current value of the search input.\n * @param {function} props.onSearch - Callback function called when the search input changes;\n *   receives the new search query as an argument.\n * @param {string} [props.searchPlaceholder] - Optional placeholder text for the search input.\n * @param {string} [props.headerTitle] - Optional title to display above the search input.\n * @param {string} [props.searchClassName] - Optional CSS class name to apply custom styles to the\n *   search input.\n */\nexport function TabNavigationContentSearch({\n  tabList,\n  searchValue,\n  onSearch,\n  searchPlaceholder,\n  headerTitle,\n  searchClassName,\n}: TabNavigationContentSearchProps) {\n  return (\n    <div className=\"pr-twp\">\n      <div className=\"tw-sticky tw-top-0 tw-space-y-2 tw-pb-2\">\n        {headerTitle ? <h1>{headerTitle}</h1> : ''}\n        <SearchBar\n          className={searchClassName}\n          value={searchValue}\n          onSearch={onSearch}\n          placeholder={searchPlaceholder}\n        />\n      </div>\n      <VerticalTabs>\n        <VerticalTabsList>\n          {tabList.map((tab) => (\n            <VerticalTabsTrigger key={tab.key} value={tab.value}>\n              {tab.value}\n            </VerticalTabsTrigger>\n          ))}\n        </VerticalTabsList>\n        {tabList.map((tab) => (\n          <VerticalTabsContent key={tab.key} value={tab.value}>\n            {tab.content}\n          </VerticalTabsContent>\n        ))}\n      </VerticalTabs>\n    </div>\n  );\n}\n\nexport default TabNavigationContentSearch;\n","import {\n  MenuContext,\n  MenuContextProps,\n  menuVariants,\n  useMenuContext,\n} from '@/context/menu.context';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport * as MenubarPrimitive from '@radix-ui/react-menubar';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\nimport React from 'react';\n\nfunction MenubarMenu({ ...props }: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />;\n}\n\nfunction MenubarGroup({ ...props }: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />;\n}\n\nfunction MenubarPortal({ ...props }: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />;\n}\n\nfunction MenubarRadioGroup({ ...props }: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />;\n}\n\nfunction MenubarSub({ ...props }: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />;\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root> & {\n    variant?: MenuContextProps['variant'];\n  }\n>(({ className, variant = 'default', ...props }, ref) => {\n  /* #region CUSTOM provide context to add variants */\n  const contextValue = React.useMemo<MenuContextProps>(\n    () => ({\n      variant,\n    }),\n    [variant],\n  );\n  return (\n    <MenuContext.Provider value={contextValue}>\n      {/* #endregion CUSTOM */}\n      <MenubarPrimitive.Root\n        ref={ref}\n        className={cn(\n          'tw-flex tw-h-10 tw-items-center tw-space-x-1 tw-rounded-md tw-border tw-bg-background tw-p-1',\n          className,\n        )}\n        {...props}\n      />\n    </MenuContext.Provider>\n  );\n});\nMenubar.displayName = MenubarPrimitive.Root.displayName;\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        'tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-3 tw-py-1.5 tw-text-sm tw-font-medium tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[state=open]:tw-bg-accent data-[state=open]:tw-text-accent-foreground',\n        // CUSTOM\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n      )}\n      {...props}\n    />\n  );\n});\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName;\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean;\n  }\n>(({ className, inset, children, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.SubTrigger\n      ref={ref}\n      className={cn(\n        'tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[state=open]:tw-bg-accent data-[state=open]:tw-text-accent-foreground',\n        inset && 'tw-pl-8',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRight className=\"tw-ml-auto tw-h-4 tw-w-4\" />\n    </MenubarPrimitive.SubTrigger>\n  );\n});\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName;\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.SubContent\n      ref={ref}\n      className={cn(\n        'tw-z-50 tw-min-w-[8rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n        // CUSTOM use context to add variants\n        {\n          'tw-bg-popover': context.variant === 'muted',\n        },\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName;\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(({ className, align = 'start', alignOffset = -4, sideOffset = 8, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          'tw-z-50 tw-min-w-[12rem] tw-overflow-hidden tw-rounded-md tw-border tw-bg-popover tw-p-1 tw-text-popover-foreground tw-shadow-md data-[state=open]:tw-animate-in data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2',\n          // CUSTOM reset styles so that only shadcn styles are applied\n          'pr-twp',\n          // CUSTOM use context to add variants\n          {\n            'tw-bg-popover': context.variant === 'muted',\n          },\n          className,\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  );\n});\nMenubarContent.displayName = MenubarPrimitive.Content.displayName;\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.Item\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-px-2 tw-py-1.5 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        inset && 'tw-pl-8',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nMenubarItem.displayName = MenubarPrimitive.Item.displayName;\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.CheckboxItem\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"tw-absolute tw-left-2 tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center\">\n        <MenubarPrimitive.ItemIndicator>\n          <Check className=\"tw-h-4 tw-w-4\" />\n        </MenubarPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </MenubarPrimitive.CheckboxItem>\n  );\n});\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName;\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => {\n  const context = useMenuContext(); // CUSTOM use context to add variants\n  return (\n    <MenubarPrimitive.RadioItem\n      ref={ref}\n      className={cn(\n        'tw-relative tw-flex tw-cursor-default tw-select-none tw-items-center tw-rounded-sm tw-py-1.5 tw-pl-8 tw-pr-2 tw-text-sm tw-outline-none focus:tw-bg-accent focus:tw-text-accent-foreground data-[disabled]:tw-pointer-events-none data-[disabled]:tw-opacity-50',\n        menuVariants({ variant: context.variant, className }), // CUSTOM use context to add variants\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"tw-absolute tw-left-2 tw-flex tw-h-3.5 tw-w-3.5 tw-items-center tw-justify-center\">\n        <MenubarPrimitive.ItemIndicator>\n          <Circle className=\"tw-h-2 tw-w-2 tw-fill-current\" />\n        </MenubarPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </MenubarPrimitive.RadioItem>\n  );\n});\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName;\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean;\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn('tw-px-2 tw-py-1.5 tw-text-sm tw-font-semibold', inset && 'tw-pl-8', className)}\n    {...props}\n  />\n));\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName;\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn('tw--mx-1 tw-my-1 tw-h-px tw-bg-muted', className)}\n    {...props}\n  />\n));\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName;\n\nfunction MenubarShortcut({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) {\n  return (\n    <span\n      className={cn('tw-ml-auto tw-text-xs tw-tracking-widest tw-text-muted-foreground', className)}\n      {...props}\n    />\n  );\n}\nMenubarShortcut.displayname = 'MenubarShortcut';\n\nexport {\n  Menubar,\n  MenubarCheckboxItem,\n  MenubarContent,\n  MenubarGroup,\n  MenubarItem,\n  MenubarLabel,\n  MenubarMenu,\n  MenubarPortal,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarSeparator,\n  MenubarShortcut,\n  MenubarSub,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarTrigger,\n};\n","import {\n  Menubar,\n  MenubarContent,\n  MenubarItem,\n  MenubarMenu,\n  MenubarSeparator,\n  MenubarSub,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarTrigger,\n} from '@/components/shadcn-ui/menubar';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/shadcn-ui/tooltip';\nimport {\n  GroupsInMultiColumnMenu,\n  Localized,\n  MenuItemContainingCommand,\n  MenuItemContainingSubmenu,\n  MultiColumnMenu,\n} from 'platform-bible-utils';\nimport { RefObject, useEffect, useRef } from 'react';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { getSubMenuGroupKeyForMenuItemId } from './menu.util';\nimport MenuItemIcon from './menu-icon.component';\n\n/**\n * Callback function that is invoked when a user selects a menu item. Receives the full\n * `MenuItemContainingCommand` object as an argument.\n */\nexport interface SelectMenuItemHandler {\n  (selectedMenuItem: MenuItemContainingCommand): void;\n}\n\nconst simulateKeyPress = (ref: RefObject<HTMLButtonElement>, keys: KeyboardEventInit[]) => {\n  setTimeout(() => {\n    keys.forEach((key) => {\n      ref.current?.dispatchEvent(new KeyboardEvent('keydown', key));\n    });\n  }, 0);\n};\n\nconst getMenubarContent = (\n  groups: Localized<GroupsInMultiColumnMenu>,\n  items: Localized<(MenuItemContainingCommand | MenuItemContainingSubmenu)[]>,\n  columnOrSubMenuKey: string | undefined,\n  onSelectMenuItem: SelectMenuItemHandler,\n) => {\n  if (!columnOrSubMenuKey) return undefined;\n\n  const sortedGroupsForColumn = Object.entries(groups)\n    .filter(\n      ([key, group]) =>\n        ('column' in group && group.column === columnOrSubMenuKey) || key === columnOrSubMenuKey,\n    )\n    .sort(([, a], [, b]) => a.order - b.order);\n\n  return sortedGroupsForColumn.flatMap(([groupKey], index) => {\n    const groupItems = items\n      .filter((item) => item.group === groupKey)\n      .sort((a, b) => a.order - b.order)\n      .map((item: Localized<MenuItemContainingCommand | MenuItemContainingSubmenu>) => {\n        return (\n          <Tooltip key={`tooltip-${item.label}-${'command' in item ? item.command : item.id}`}>\n            <TooltipTrigger asChild>\n              {'command' in item ? (\n                <MenubarItem\n                  key={`menubar-item-${item.label}-${item.command}`}\n                  onClick={() => {\n                    // Since the item has a command, we know it is a MenuItemContainingCommand.\n                    // eslint-disable-next-line no-type-assertion/no-type-assertion\n                    onSelectMenuItem(item as MenuItemContainingCommand);\n                  }}\n                >\n                  {item.iconPathBefore && (\n                    <MenuItemIcon icon={item.iconPathBefore} menuLabel={item.label} leading />\n                  )}\n                  {item.label}\n                  {item.iconPathAfter && (\n                    <MenuItemIcon icon={item.iconPathAfter} menuLabel={item.label} />\n                  )}\n                </MenubarItem>\n              ) : (\n                <MenubarSub key={`menubar-sub-${item.label}-${item.id}`}>\n                  <MenubarSubTrigger>{item.label}</MenubarSubTrigger>\n                  <MenubarSubContent>\n                    {getMenubarContent(\n                      groups,\n                      items,\n                      getSubMenuGroupKeyForMenuItemId(groups, item.id),\n                      onSelectMenuItem,\n                    )}\n                  </MenubarSubContent>\n                </MenubarSub>\n              )}\n            </TooltipTrigger>\n            {item.tooltip && <TooltipContent>{item.tooltip}</TooltipContent>}\n          </Tooltip>\n        );\n      });\n\n    const itemsWithSeparator = [...groupItems];\n    if (groupItems.length > 0 && index < sortedGroupsForColumn.length - 1) {\n      itemsWithSeparator.push(<MenubarSeparator key={`separator-${groupKey}`} />);\n    }\n\n    return itemsWithSeparator;\n  });\n};\n\ntype PlatformMenubarProps = {\n  /** Menu data that is used to populate the Menubar component. */\n  menuData: Localized<MultiColumnMenu>;\n\n  /** The handler to use for menu commands. */\n  onSelectMenuItem: SelectMenuItemHandler;\n\n  /**\n   * Optional callback function that is executed whenever a menu on the Menubar is opened or closed.\n   * Helpful for handling updates to the menu, as changing menu data when the menu is opened is not\n   * desirable.\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n\n  /** Style variant for the app menubar component. */\n  variant?: 'default' | 'muted';\n};\n\n/** Menubar component tailored to work with Platform.Bible menu data */\nexport function PlatformMenubar({\n  menuData,\n  onSelectMenuItem,\n  onOpenChange,\n  variant,\n}: PlatformMenubarProps) {\n  // These refs will always be defined\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const menubarRef = useRef<HTMLDivElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const projectMenuRef = useRef<HTMLButtonElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const windowMenuRef = useRef<HTMLButtonElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const layoutMenuRef = useRef<HTMLButtonElement>(undefined!);\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const helpMenuRef = useRef<HTMLButtonElement>(undefined!);\n\n  const getRefForColumn = (columnKey: string) => {\n    switch (columnKey) {\n      case 'platform.app':\n        return projectMenuRef;\n      case 'platform.window':\n        return windowMenuRef;\n      case 'platform.layout':\n        return layoutMenuRef;\n      case 'platform.help':\n        return helpMenuRef;\n      default:\n        return undefined;\n    }\n  };\n\n  // This is a quick and dirty way to implement some shortcuts by simulating key presses\n  useHotkeys(['alt', 'alt+p', 'alt+l', 'alt+n', 'alt+h'], (event, handler) => {\n    event.preventDefault();\n\n    const escKey: KeyboardEventInit = { key: 'Escape', code: 'Escape', keyCode: 27, bubbles: true };\n    const spaceKey: KeyboardEventInit = { key: ' ', code: 'Space', keyCode: 32, bubbles: true };\n\n    switch (handler.hotkey) {\n      case 'alt':\n        simulateKeyPress(projectMenuRef, [escKey]);\n        break;\n      case 'alt+p':\n        projectMenuRef.current?.focus();\n        simulateKeyPress(projectMenuRef, [escKey, spaceKey]);\n        break;\n      case 'alt+l':\n        windowMenuRef.current?.focus();\n        simulateKeyPress(windowMenuRef, [escKey, spaceKey]);\n        break;\n      case 'alt+n':\n        layoutMenuRef.current?.focus();\n        simulateKeyPress(layoutMenuRef, [escKey, spaceKey]);\n        break;\n      case 'alt+h':\n        helpMenuRef.current?.focus();\n        simulateKeyPress(helpMenuRef, [escKey, spaceKey]);\n        break;\n      default:\n        break;\n    }\n  });\n\n  useEffect(() => {\n    if (!onOpenChange || !menubarRef.current) return;\n\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.attributeName === 'data-state' && mutation.target instanceof HTMLElement) {\n          const state = mutation.target.getAttribute('data-state');\n\n          if (state === 'open') {\n            onOpenChange(true);\n          } else {\n            onOpenChange(false);\n          }\n        }\n      });\n    });\n\n    const menubarElement = menubarRef.current;\n    const dataStateAttributes = menubarElement.querySelectorAll('[data-state]');\n\n    dataStateAttributes.forEach((element) => {\n      observer.observe(element, { attributes: true });\n    });\n\n    return () => observer.disconnect();\n  }, [onOpenChange]);\n\n  if (!menuData) return undefined;\n\n  return (\n    <Menubar ref={menubarRef} className=\"pr-twp tw-border-0 tw-bg-transparent\" variant={variant}>\n      {Object.entries(menuData.columns)\n        .filter(([, column]) => typeof column === 'object')\n        .sort(([, a], [, b]) => {\n          if (typeof a === 'boolean' || typeof b === 'boolean') return 0;\n          return a.order - b.order;\n        })\n        .map(([columnKey, column]) => (\n          <MenubarMenu key={columnKey}>\n            <MenubarTrigger ref={getRefForColumn(columnKey)}>\n              {typeof column === 'object' && 'label' in column && column.label}\n            </MenubarTrigger>\n            <MenubarContent\n              className=\"tw-z-[250]\" // Need to get over the floating web view z-index 200\n            >\n              <TooltipProvider>\n                {getMenubarContent(menuData.groups, menuData.items, columnKey, onSelectMenuItem)}\n              </TooltipProvider>\n            </MenubarContent>\n          </MenubarMenu>\n        ))}\n    </Menubar>\n  );\n}\n\nexport default PlatformMenubar;\n","import {\n  SelectMenuItemHandler,\n  PlatformMenubar,\n} from '@/components/advanced/menus/platform-menubar.component';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Localized, MultiColumnMenu } from 'platform-bible-utils';\nimport { PropsWithChildren, ReactNode, useRef } from 'react';\n\nexport type ToolbarProps = PropsWithChildren<{\n  /** The handler to use for menu commands (and eventually toolbar commands). */\n  onSelectMenuItem: SelectMenuItemHandler;\n\n  /**\n   * Menu data that is used to populate the Menubar component. If empty object, no menus will be\n   * shown on the App Menubar\n   */\n  menuData?: Localized<MultiColumnMenu>;\n\n  /**\n   * Optional callback function that is executed whenever a menu on the App Menubar is opened or\n   * closed. Helpful for handling updates to the menu, as changing menu data when the menu is opened\n   * is not desirable.\n   */\n  onOpenChange?: (isOpen: boolean) => void;\n\n  /** Optional unique identifier */\n  id?: string;\n\n  /** Additional css classes to help with unique styling of the toolbar */\n  className?: string;\n\n  /**\n   * Whether the toolbar should be used as a draggable area for moving the application. This will\n   * add an electron specific style `WebkitAppRegion: 'drag'` to the toolbar in order to make it\n   * draggable. See:\n   * https://www.electronjs.org/docs/latest/tutorial/custom-title-bar#create-a-custom-title-bar\n   */\n  shouldUseAsAppDragArea?: boolean;\n\n  /** Toolbar children to be put at the start of the toolbar (left side in ltr, right side in rtl) */\n  appMenuAreaChildren?: ReactNode;\n\n  /** Toolbar children to be put at the end of the toolbar (right side in ltr, left side in rtl) */\n  configAreaChildren?: ReactNode;\n\n  /** Variant of the menubar */\n  menubarVariant?: 'default' | 'muted';\n}>;\n\n/**\n * Get tailwind class for reserved space for the window controls / macos \"traffic lights\". Passing\n * 'darwin' will reserve the necessary space for macos traffic lights at the start, otherwise a\n * different amount of space at the end for the window controls.\n *\n * Apply to the toolbar like: `<Toolbar className={cn('tw-h-8 tw-bg-background',\n * getToolbarOSReservedSpaceClassName('darwin'))}>` or `<Toolbar\n * className={getToolbarOSReservedSpaceClassName('linux')}>`\n *\n * @param operatingSystem The os platform: 'darwin' (macos) | anything else\n * @returns The class name to apply to the toolbar if os specific space should be reserved\n */\nexport function getToolbarOSReservedSpaceClassName(\n  operatingSystem: string | undefined,\n): string | undefined {\n  switch (operatingSystem) {\n    case undefined:\n      return undefined;\n    case 'darwin':\n      return 'tw-ps-[85px]';\n    default:\n      return 'tw-pe-[calc(138px+1rem)]';\n  }\n}\n\n/**\n * A customizable toolbar component with a menubar, content area, and configure area.\n *\n * This component is designed to be used in the window title bar of an electron application.\n *\n * @param {ToolbarProps} props - The props for the component.\n */\nexport function Toolbar({\n  menuData,\n  onOpenChange,\n  onSelectMenuItem,\n  className,\n  id,\n  children,\n  appMenuAreaChildren,\n  configAreaChildren,\n  shouldUseAsAppDragArea,\n  menubarVariant = 'default',\n}: ToolbarProps) {\n  // This ref will always be defined\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  const containerRef = useRef<HTMLDivElement>(undefined!);\n\n  return (\n    <div\n      className={cn('tw-border tw-px-4 tw-text-foreground', className)}\n      ref={containerRef}\n      style={{ position: 'relative' }}\n      id={id}\n    >\n      <div\n        className=\"tw-flex tw-h-full tw-w-full tw-justify-between tw-overflow-hidden\"\n        /* @ts-ignore Electron-only property */\n        style={shouldUseAsAppDragArea ? { WebkitAppRegion: 'drag' } : undefined}\n      >\n        {/* App Menu area */}\n        <div className=\"tw-flex tw-grow tw-basis-0\">\n          <div\n            className=\"tw-flex tw-items-center tw-gap-2\"\n            /* @ts-ignore Electron-only property */\n            style={shouldUseAsAppDragArea ? { WebkitAppRegion: 'no-drag' } : undefined}\n          >\n            {appMenuAreaChildren}\n\n            {menuData && (\n              <PlatformMenubar\n                menuData={menuData}\n                onOpenChange={onOpenChange}\n                onSelectMenuItem={onSelectMenuItem}\n                variant={menubarVariant}\n              />\n            )}\n          </div>\n        </div>\n\n        {/* Content area */}\n        <div\n          className=\"tw-flex tw-items-center tw-gap-2 tw-px-2\"\n          /* @ts-ignore Electron-only property */\n          style={shouldUseAsAppDragArea ? { WebkitAppRegion: 'no-drag' } : undefined}\n        >\n          {children}\n        </div>\n\n        {/* Configure area */}\n        <div className=\"tw-flex tw-min-w-0 tw-grow tw-basis-0 tw-justify-end\">\n          <div\n            className=\"tw-flex tw-min-w-0 tw-items-center tw-gap-2 tw-pe-1\"\n            /* @ts-ignore Electron-only property */\n            style={shouldUseAsAppDragArea ? { WebkitAppRegion: 'no-drag' } : undefined}\n          >\n            {configAreaChildren}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Toolbar;\n","import { useState } from 'react';\nimport { LocalizedStringValue } from 'platform-bible-utils';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../shadcn-ui/select';\nimport { Label } from '../shadcn-ui/label';\n\n/**\n * Immutable array containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const UI_LANGUAGE_SELECTOR_STRING_KEYS = Object.freeze([\n  '%settings_uiLanguageSelector_selectFallbackLanguages%',\n] as const);\n\nexport type UiLanguageSelectorLocalizedStrings = {\n  [localizedUiLanguageSelectorKey in (typeof UI_LANGUAGE_SELECTOR_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: UiLanguageSelectorLocalizedStrings,\n  key: keyof UiLanguageSelectorLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\nexport type LanguageInfo = {\n  /** The name of the language to be displayed (in its native script) */\n  autonym: string;\n  /**\n   * The name of the language in other languages, so that the language can also be displayed in the\n   * current UI language, if known.\n   */\n  uiNames?: Record<string, string>;\n  /**\n   * Other known names of the language (for searching). This can include pejorative names and should\n   * never be displayed unless typed by the user.\n   */\n  otherNames?: string[];\n};\n\nexport type UiLanguageSelectorProps = {\n  /** Full set of known languages to display. The keys are valid BCP-47 tags. */\n  knownUiLanguages: Record<string, LanguageInfo>;\n  /** IETF BCP-47 language tag of the current primary UI language. `undefined` => 'en' */\n  primaryLanguage: string;\n  /**\n   * Ordered list of fallback language tags to use if the localization key can't be found in the\n   * current primary UI language. This list never contains English ('en') because it is the ultimate\n   * fallback.\n   */\n  fallbackLanguages: string[] | undefined;\n  /**\n   * Handler for when either the primary or the fallback languages change (or both). For this\n   * handler, the primary UI language is the first one in the array, followed by the fallback\n   * languages in order of decreasing preference.\n   */\n  onLanguagesChange?: (newUiLanguages: string[]) => void;\n  /** Handler for the primary language changes. */\n  onPrimaryLanguageChange?: (newPrimaryUiLanguage: string) => void;\n  /**\n   * Handler for when the fallback languages change. The array contains the fallback languages in\n   * order of decreasing preference.\n   */\n  onFallbackLanguagesChange?: (newFallbackLanguages: string[]) => void;\n  /**\n   * Map whose keys are localized string keys as contained in UI_LANGUAGE_SELECTOR_STRING_KEYS and\n   * whose values are the localized strings (in the current UI language).\n   */\n  localizedStrings: UiLanguageSelectorLocalizedStrings;\n  /** Additional css classes to help with unique styling of the control */\n  className?: string;\n};\n\n/**\n * A component for selecting the user interface language and managing fallback languages. Allows\n * users to choose a primary UI language and optionally select fallback languages.\n *\n * @param {UiLanguageSelectorProps} props - The props for the component.\n */\nexport function UiLanguageSelector({\n  knownUiLanguages,\n  primaryLanguage = 'en',\n  fallbackLanguages = [],\n  onLanguagesChange,\n  onPrimaryLanguageChange,\n  onFallbackLanguagesChange,\n  localizedStrings,\n  className,\n}: UiLanguageSelectorProps) {\n  const selectFallbackLanguagesText = localizeString(\n    localizedStrings,\n    '%settings_uiLanguageSelector_selectFallbackLanguages%',\n  );\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleLanguageChange = (code: string) => {\n    if (onPrimaryLanguageChange) onPrimaryLanguageChange(code);\n    // REVIEW: Should fallback languages be preserved when primary language changes?\n    if (onLanguagesChange)\n      onLanguagesChange([code, ...fallbackLanguages.filter((lang) => lang !== code)]);\n    if (onFallbackLanguagesChange && fallbackLanguages.find((l) => l === code))\n      onFallbackLanguagesChange([...fallbackLanguages.filter((lang) => lang !== code)]);\n    setIsOpen(false); // Close the dropdown when a selection is made\n  };\n\n  /**\n   * Gets the display name for the given language. This will typically include the autonym (in the\n   * native script), along with the name of the language in the current UI locale if known, with a\n   * fallback to the English name (if known).\n   *\n   * @param {string} lang - The BCP-47 code of the language whose display name is being requested.\n   * @param {string} uiLang - The BCP-47 code of the current user-interface language used used to\n   *   try to look up the name of the language in a form that is likely to be helpful to the user if\n   *   they do not recognize the autonym.\n   * @returns {string} The display name of the language.\n   */\n  const getLanguageDisplayName = (lang: string, uiLang: string) => {\n    const altName =\n      uiLang !== lang\n        ? (knownUiLanguages[lang]?.uiNames?.[uiLang] ?? knownUiLanguages[lang]?.uiNames?.en)\n        : undefined;\n\n    return altName\n      ? `${knownUiLanguages[lang]?.autonym} (${altName})`\n      : knownUiLanguages[lang]?.autonym;\n  };\n\n  return (\n    <div className={cn('pr-twp tw-max-w-sm', className)}>\n      {/* Language Selector */}\n      <Select\n        name=\"uiLanguage\"\n        value={primaryLanguage}\n        onValueChange={handleLanguageChange}\n        open={isOpen}\n        onOpenChange={(open) => setIsOpen(open)}\n      >\n        <SelectTrigger>\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent\n          className=\"tw-z-[250]\" // Need to get over the floating web view z-index 200\n        >\n          {Object.keys(knownUiLanguages).map((key) => {\n            return (\n              <SelectItem key={key} value={key}>\n                {getLanguageDisplayName(key, primaryLanguage)}\n              </SelectItem>\n            );\n          })}\n        </SelectContent>\n      </Select>\n\n      {/* Fallback Language Button */}\n      {primaryLanguage !== 'en' && (\n        <>\n          <Label className=\"tw-ms-3\">{selectFallbackLanguagesText}</Label>\n          <div className=\"tw-ms-3\">\n            {/* Do not localize or \"improve\". This label is temporary. */}\n            <Label>\n              Currently:{'\\u00A0'}\n              {fallbackLanguages?.length > 0\n                ? `${fallbackLanguages\n                    .map((f) => getLanguageDisplayName(f, primaryLanguage))\n                    .join(', ')}`\n                : `default (${knownUiLanguages.en.autonym})`}\n            </Label>\n            {/* <MultiSelector>\n              Something like this will be added once UX decides exactly what they want.\n          </MultiSelector> */}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default UiLanguageSelector;\n","import { Label } from '@/components/shadcn-ui/label';\nimport { ReactNode } from 'react';\n\ntype SmartLabelProps = {\n  item: string;\n  createLabel?: (item: string) => string;\n  createComplexLabel?: (item: string) => ReactNode;\n};\n\n/** Create labels with text, react elements (e.g. links), or text + react elements */\nfunction SmartLabel({ item, createLabel, createComplexLabel }: SmartLabelProps): ReactNode {\n  if (createLabel) {\n    return <Label>{createLabel(item)}</Label>;\n  }\n  if (createComplexLabel) {\n    return <Label>{createComplexLabel(item)}</Label>;\n  }\n  return <Label>{item}</Label>;\n}\n\nexport default SmartLabel;\n","import { Checkbox } from '@/components/shadcn-ui/checkbox';\nimport { ReactNode } from 'react';\nimport SmartLabel from './smart-label.component';\n\nexport type ChecklistProps = {\n  /** Optional string representing the id attribute of the Checklist */\n  id?: string;\n  /** Optional string representing CSS class name(s) for styling */\n  className?: string;\n  /** Array of strings representing the checkable items */\n  listItems: string[];\n  /** Array of strings representing the checked items */\n  selectedListItems: string[];\n  /**\n   * Function that is called when a checkbox item is selected or deselected\n   *\n   * @param item The string description for this item\n   * @param selected True if selected, false if not selected\n   */\n  handleSelectListItem: (item: string, selected: boolean) => void;\n\n  /**\n   * Optional function creates a label for a provided checkable item\n   *\n   * @param item The item for which a label is to be created\n   * @returns A string representing the label text for the checkbox associated with that item\n   */\n  createLabel?: (item: string) => string;\n\n  /**\n   * Optional function creates a label for a provided checkable item\n   *\n   * @param item The item for which a label is to be created, including text and any additional\n   *   elements (e.g. links)\n   * @returns A react node representing the label text and any additional elements (e.g. links) for\n   *   the checkbox associated with that item\n   */\n  createComplexLabel?: (item: string) => ReactNode;\n};\n\n/** Renders a list of checkboxes. Each checkbox corresponds to an item from the `listItems` array. */\nexport function Checklist({\n  id,\n  className,\n  listItems,\n  selectedListItems,\n  handleSelectListItem,\n  createLabel,\n  createComplexLabel,\n}: ChecklistProps) {\n  return (\n    <div id={id} className={className}>\n      {listItems.map((item) => (\n        <div key={item} className=\"tw-m-2 tw-flex tw-items-center\">\n          <Checkbox\n            className=\"tw-me-2 tw-align-middle\"\n            checked={selectedListItems.includes(item)}\n            onCheckedChange={(value: boolean) => handleSelectListItem(item, value)}\n          />\n          <SmartLabel\n            item={item}\n            createLabel={createLabel}\n            createComplexLabel={createComplexLabel}\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default Checklist;\n","import { cn } from '@/utils/shadcn-ui.util';\nimport { LoaderCircle, LucideProps } from 'lucide-react';\nimport { forwardRef } from 'react';\n\nexport type SpinnerProps = LucideProps;\n\n/**\n * A spinner component that uses the LoaderCircle icon from lucide-react to indicate loading states.\n * The spinner rotates to indicate that a process is ongoing.\n */\nexport const Spinner = forwardRef<SVGSVGElement, SpinnerProps>(({ className, ...props }, ref) => {\n  return (\n    <LoaderCircle size={35} className={cn('tw-animate-spin', className)} {...props} ref={ref} />\n  );\n});\n\nSpinner.displayName = 'Spinner';\n\nexport default Spinner;\n","import { Input as ShadInput } from '@/components/shadcn-ui/input';\nimport { Label as ShadLabel } from '@/components/shadcn-ui/label';\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { ChangeEventHandler, FocusEventHandler } from 'react';\n\nexport type TextFieldProps = {\n  /** Optional unique identifier */\n  id?: string;\n  /**\n   * If `true`, the component is disabled.\n   *\n   * @default false\n   */\n  isDisabled?: boolean;\n  /**\n   * If `true`, the label is displayed in an error state.\n   *\n   * @default false\n   */\n  hasError?: boolean;\n  /**\n   * If `true`, the input will take up the full width of its container.\n   *\n   * @default false\n   */\n  isFullWidth?: boolean;\n  /** Text that gives the user instructions on what contents the TextField expects */\n  helperText?: string;\n  /** The title of the TextField */\n  label?: string;\n  /** The short hint displayed in the `input` before the user enters a value. */\n  placeholder?: string;\n  /**\n   * If `true`, the label is displayed as required and the `input` element is required.\n   *\n   * @default false\n   */\n  isRequired?: boolean;\n  /** Additional css classes to help with unique styling of the text field */\n  className?: string;\n  /** Starting value for the text field if it is not controlled */\n  defaultValue?: string | number;\n  /** Value of the text field if controlled */\n  value?: string | number;\n  /** Triggers when content of textfield is changed */\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n  /** Triggers when textfield gets focus */\n  onFocus?: FocusEventHandler<HTMLInputElement>;\n  /** Triggers when textfield loses focus */\n  onBlur?: FocusEventHandler<HTMLInputElement>;\n};\n\n/**\n * Text input field\n *\n * Thanks to Shadcn for heavy inspiration and documentation\n * https://ui.shadcn.com/docs/components/input#with-label\n */\nexport function TextField({\n  id,\n  isDisabled = false,\n  hasError = false,\n  isFullWidth = false,\n  helperText,\n  label,\n  placeholder,\n  isRequired = false,\n  className,\n  defaultValue,\n  value,\n  onChange,\n  onFocus,\n  onBlur,\n}: TextFieldProps) {\n  return (\n    <div className={cn('tw-inline-grid tw-items-center tw-gap-1.5', { 'tw-w-full': isFullWidth })}>\n      <ShadLabel\n        htmlFor={id}\n        className={cn({\n          'tw-text-red-600': hasError,\n          'tw-hidden': !label,\n        })}\n      >{`${label}${isRequired ? '*' : ''}`}</ShadLabel>\n      <ShadInput\n        id={id}\n        disabled={isDisabled}\n        placeholder={placeholder}\n        required={isRequired}\n        className={cn(className, { 'tw-border-red-600': hasError })}\n        defaultValue={defaultValue}\n        value={value}\n        onChange={onChange}\n        onFocus={onFocus}\n        onBlur={onBlur}\n      />\n      <p className={cn({ 'tw-hidden': !helperText })}>{helperText}</p>\n    </div>\n  );\n}\n\nexport default TextField;\n","import { Copy } from 'lucide-react';\nimport { Button } from '@/components/shadcn-ui/button';\nimport { LocalizedStringValue } from 'platform-bible-utils';\n\n/**\n * Object containing all keys used for localization in this component. If you're using this\n * component in an extension, you can pass it into the useLocalizedStrings hook to easily obtain the\n * localized strings and pass them into the localizedStrings prop of this component\n */\nexport const ERROR_DUMP_STRING_KEYS = Object.freeze([\n  '%webView_error_dump_header%',\n  '%webView_error_dump_info_message%',\n] as const);\n\nexport type ErrorDumpLocalizedStrings = {\n  [localizedInventoryKey in (typeof ERROR_DUMP_STRING_KEYS)[number]]?: LocalizedStringValue;\n};\n\n/**\n * Gets the localized value for the provided key\n *\n * @param strings Object containing localized string\n * @param key Key for a localized string\n * @returns The localized value for the provided key, if available. Returns the key if no localized\n *   value is available\n */\nconst localizeString = (\n  strings: ErrorDumpLocalizedStrings,\n  key: keyof ErrorDumpLocalizedStrings,\n) => {\n  return strings[key] ?? key;\n};\n\n// Interface to store the parameters for the ErrorDump component\ninterface ErrorDumpProps {\n  /** String containing the error details to show */\n  errorDetails: string;\n  /** Handler function to notify the frontend when the error is copied */\n  handleCopyNotify?: () => void;\n  /** List of localized strings to localize the strings in this component */\n  localizedStrings: ErrorDumpLocalizedStrings;\n}\n\n/**\n * Component to render an error dump\n *\n * @param errorDetails Error details string\n * @param handleCopyNotify Handler function to add a notification to the UI to alert that the error\n *   was copied\n */\nexport function ErrorDump({ errorDetails, handleCopyNotify, localizedStrings }: ErrorDumpProps) {\n  const headerText = localizeString(localizedStrings, '%webView_error_dump_header%');\n  const infoMessage = localizeString(localizedStrings, '%webView_error_dump_info_message%');\n\n  function handleCopy() {\n    navigator.clipboard.writeText(errorDetails);\n    if (handleCopyNotify) {\n      handleCopyNotify();\n    }\n  }\n\n  return (\n    <div className=\"tw-inline-flex tw-w-full tw-flex-col tw-items-start tw-justify-start tw-gap-4\">\n      <div className=\"tw-inline-flex tw-items-start tw-justify-start tw-gap-4 tw-self-stretch\">\n        <div className=\"tw-inline-flex tw-flex-1 tw-flex-col tw-items-start tw-justify-start\">\n          <div className=\"tw-text-color-text tw-justify-center tw-text-center tw-text-lg tw-font-semibold tw-leading-loose\">\n            {headerText}\n          </div>\n          <div className=\"tw-justify-center tw-self-stretch tw-text-sm tw-font-normal tw-leading-tight tw-text-muted-foreground\">\n            {infoMessage}\n          </div>\n        </div>\n        <Button variant=\"secondary\" size=\"icon\" className=\"size-8\" onClick={() => handleCopy()}>\n          <Copy />\n        </Button>\n      </div>\n      <div className=\"tw-prose tw-w-full\">\n        <pre className=\"tw-text-xs\">{errorDetails}</pre>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\nconst alertVariants = cva(\n  // CUSTOM: Copied all `svg` arbitrary selector variant classes as `img` variants so we can use\n  // images (or svgs from file) as icons\n  // Implemented by TJ Couch\n  // Approved by Alex Mercado\n  // 20 February 2025\n  'tw-relative tw-w-full tw-rounded-lg tw-border tw-p-4 [&>svg~*]:tw-pl-7 [&>svg+div]:tw-translate-y-[-3px] [&>svg]:tw-absolute [&>svg]:tw-left-4 [&>svg]:tw-top-4 [&>svg]:tw-text-foreground [&>img~*]:tw-pl-7 [&>img+div]:tw-translate-y-[-3px] [&>img]:tw-absolute [&>img]:tw-left-4 [&>img]:tw-top-4 [&>img]:tw-text-foreground',\n  {\n    variants: {\n      variant: {\n        default: 'tw-bg-background tw-text-foreground',\n        destructive:\n          // CUSTOM: Copied all `svg` arbitrary selector variant classes as `img` variants so we can\n          // use images (or svgs from file) as icons\n          // Implemented by TJ Couch\n          // Approved by Alex Mercado\n          // 20 February 2025\n          'tw-border-destructive/50 tw-text-destructive dark:tw-border-destructive [&>svg]:tw-text-destructive [&>img]:tw-text-destructive',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n);\n\n/**\n * The Alert displays a callout for user attention. The component is built and styled by Shadcn UI.\n * See Shadcn UI Documentation https://ui.shadcn.com/docs/components/alert\n */\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div ref={ref} role=\"alert\" className={cn(alertVariants({ variant }), className)} {...props} />\n));\nAlert.displayName = 'Alert';\n\n/** @inheritdoc Alert */\nconst AlertTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h5\n      ref={ref}\n      className={cn('tw-mb-1 tw-font-medium tw-leading-none tw-tracking-tight', className)}\n      {...props}\n    >\n      {/* added because of https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/main/docs/rules/heading-has-content.md  */}\n      {props.children}{' '}\n    </h5>\n  ),\n);\nAlertTitle.displayName = 'AlertTitle';\n\n/** @inheritdoc Alert */\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('tw-text-sm [&_p]:tw-leading-relaxed', className)} {...props} />\n));\nAlertDescription.displayName = 'AlertDescription';\n\nexport { Alert, AlertTitle, AlertDescription };\n","import React from 'react';\nimport * as AvatarPrimitive from '@radix-ui/react-avatar';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * The Avatar component displays a user's profile picture or initials. The component is built and\n * styled by Shadcn UI. See Shadcn UI Documentation https://ui.shadcn.com/docs/components/avatar\n */\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      'pr-twp tw-relative tw-flex tw-h-10 tw-w-10 tw-shrink-0 tw-overflow-hidden tw-rounded-full',\n      className,\n    )}\n    {...props}\n  />\n));\nAvatar.displayName = AvatarPrimitive.Root.displayName;\n\n/** @inheritdoc Avatar */\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn('pr-twp tw-aspect-square tw-h-full tw-w-full', className)}\n    {...props}\n  />\n));\nAvatarImage.displayName = AvatarPrimitive.Image.displayName;\n\n/** @inheritdoc Avatar */\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      'pr-twp tw-flex tw-h-full tw-w-full tw-items-center tw-justify-center tw-rounded-full tw-bg-muted',\n      className,\n    )}\n    {...props}\n  />\n));\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName;\n\nexport { Avatar, AvatarImage, AvatarFallback };\n","import React from 'react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n/**\n * The Card component displays a card with header, content, and footer. This component is built and\n * styled with Shadcn UI. See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/card\n */\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        'pr-twp tw-rounded-lg tw-border tw-bg-card tw-text-card-foreground tw-shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nCard.displayName = 'Card';\n\n/** @inheritdoc Card */\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('pr-twp tw-flex tw-flex-col tw-space-y-1.5 tw-p-6', className)}\n      {...props}\n    />\n  ),\n);\nCardHeader.displayName = 'CardHeader';\n\n/** @inheritdoc Card */\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h3\n      ref={ref}\n      className={cn(\n        'pr-twp tw-text-2xl tw-font-semibold tw-leading-none tw-tracking-tight',\n        className,\n      )}\n      {...props}\n    >\n      {/* added because of https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/main/docs/rules/heading-has-content.md  */}\n      {props.children}\n    </h3>\n  ),\n);\nCardTitle.displayName = 'CardTitle';\n\n/** @inheritdoc Card */\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p ref={ref} className={cn('pr-twp tw-text-sm tw-text-muted-foreground', className)} {...props} />\n));\nCardDescription.displayName = 'CardDescription';\n\n/** @inheritdoc Card */\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} className={cn('pr-twp tw-p-6 tw-pt-0', className)} {...props} />\n  ),\n);\nCardContent.displayName = 'CardContent';\n\n/** @inheritdoc Card */\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('pr-twp tw-flex tw-items-center tw-p-6 tw-pt-0', className)}\n      {...props}\n    />\n  ),\n);\nCardFooter.displayName = 'CardFooter';\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","import React from 'react';\nimport { Drawer as DrawerPrimitive } from 'vaul';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\n// CUSTOM: Added context to manage drawer direction\nconst DrawerContext = React.createContext<{\n  direction?: 'top' | 'bottom' | 'left' | 'right';\n}>({\n  direction: 'bottom',\n});\n\nfunction Drawer({\n  shouldScaleBackground = true,\n  direction = 'bottom',\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) {\n  // CUSTOM: Use context to provide direction to child components\n  const contextValue = React.useMemo(() => ({ direction }), [direction]);\n  return (\n    <DrawerContext.Provider value={contextValue}>\n      <DrawerPrimitive.Root\n        shouldScaleBackground={shouldScaleBackground}\n        direction={direction}\n        {...props}\n      />\n    </DrawerContext.Provider>\n  );\n}\nDrawer.displayName = 'Drawer';\n\nconst DrawerTrigger = DrawerPrimitive.Trigger;\n\nconst DrawerPortal = DrawerPrimitive.Portal;\n\nconst DrawerClose = DrawerPrimitive.Close;\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn('tw-fixed tw-inset-0 tw-z-50 tw-bg-black/80', className)}\n    {...props}\n  />\n));\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName;\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => {\n  // CUSTOM: Use context to provide direction to child components\n  const { direction = 'bottom' } = React.useContext(DrawerContext);\n\n  // CUSTOM: Define positioning and styling based on direction\n  const directionStyles = {\n    bottom: 'tw-inset-x-0 tw-bottom-0 tw-mt-24 tw-rounded-t-[10px]',\n    top: 'tw-inset-x-0 tw-top-0 tw-mb-24 tw-rounded-b-[10px]',\n    left: 'tw-inset-y-0 tw-left-0 tw-mr-24 tw-rounded-r-[10px] tw-w-auto tw-max-w-sm',\n    right: 'tw-inset-y-0 tw-right-0 tw-ml-24 tw-rounded-l-[10px] tw-w-auto tw-max-w-sm',\n  };\n\n  // CUSTOM: Define handle styles for each direction\n  const handleStyles = {\n    bottom: 'tw-mx-auto tw-mt-4 tw-h-2 tw-w-[100px] tw-rounded-full tw-bg-muted',\n    top: 'tw-mx-auto tw-mb-4 tw-h-2 tw-w-[100px] tw-rounded-full tw-bg-muted',\n    left: 'tw-my-auto tw-mr-4 tw-w-2 tw-h-[100px] tw-rounded-full tw-bg-muted',\n    right: 'tw-my-auto tw-ml-4 tw-w-2 tw-h-[100px] tw-rounded-full tw-bg-muted',\n  };\n\n  return (\n    <DrawerPortal>\n      <DrawerOverlay />\n      <DrawerPrimitive.Content\n        ref={ref}\n        className={cn(\n          // CUSTOM: Change Tailwind CSS classes for styling\n          // Removed tw-inset-x-0 tw-bottom-0 tw-mt-24 tw-rounded-t-[10px] tw-flex-col\n          'pr-twp tw-fixed tw-z-50 tw-flex tw-h-auto tw-border tw-bg-background',\n          direction === 'bottom' || direction === 'top' ? 'tw-flex-col' : 'tw-flex-row',\n          directionStyles[direction],\n          className,\n        )}\n        {...props}\n      >\n        {/* CUSTOM: Render handles and children based on direction */}\n        {(direction === 'bottom' || direction === 'right') && (\n          <div className={handleStyles[direction]} />\n        )}\n        <div className=\"tw-flex tw-flex-col\">{children}</div>\n        {(direction === 'top' || direction === 'left') && (\n          <div className={handleStyles[direction]} />\n        )}\n      </DrawerPrimitive.Content>\n    </DrawerPortal>\n  );\n});\nDrawerContent.displayName = 'DrawerContent';\n\nfunction DrawerHeader({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn('tw-grid tw-gap-1.5 tw-p-4 tw-text-center sm:tw-text-left', className)}\n      {...props}\n    />\n  );\n}\nDrawerHeader.displayName = 'DrawerHeader';\n\nfunction DrawerFooter({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div className={cn('tw-mt-auto tw-flex tw-flex-col tw-gap-2 tw-p-4', className)} {...props} />\n  );\n}\nDrawerFooter.displayName = 'DrawerFooter';\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn('tw-text-lg tw-font-semibold tw-leading-none tw-tracking-tight', className)}\n    {...props}\n  />\n));\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName;\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn('tw-text-sm tw-text-muted-foreground', className)}\n    {...props}\n  />\n));\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName;\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n};\n","import React from 'react';\nimport * as ProgressPrimitive from '@radix-ui/react-progress';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      'pr-twp tw-relative tw-h-4 tw-w-full tw-overflow-hidden tw-rounded-full tw-bg-secondary',\n      className,\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"tw-h-full tw-w-full tw-flex-1 tw-bg-primary tw-transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n","import { ComponentProps } from 'react';\nimport { toast as sonner, Toaster } from 'sonner';\n\n/**\n * Props for Sonner component.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/sonner}\n * @see Sonner Documentation: {@link https://sonner.emilkowal.ski}\n */\ntype SonnerProps = ComponentProps<typeof Toaster>;\n\n/**\n * The Sonner component is an opinionated toast component for React. It is built on Sonner and\n * styled with Shadcn UI.\n *\n * @param SonnerProps\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/sonner}\n * @see Sonner Documentation: {@link https://sonner.emilkowal.ski}\n */\nfunction Sonner({ ...props }: SonnerProps) {\n  return (\n    <Toaster\n      className=\"tw-toaster tw-group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            'group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg',\n          description: 'group-[.toast]:text-muted-foreground',\n          actionButton: 'group-[.toast]:bg-primary group-[.toast]:text-primary-foreground',\n          cancelButton: 'group-[.toast]:bg-muted group-[.toast]:text-muted-foreground',\n        },\n      }}\n      {...props}\n    />\n  );\n}\n\n// The re-export of the sonner function was added manually\nexport { Sonner, sonner };\n","import React from 'react';\nimport * as SliderPrimitive from '@radix-ui/react-slider';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * The Slider component is an input where the user selects a value from within a given range. This\n * component is built on Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/slider}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/slider}\n */\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <SliderPrimitive.Root\n      ref={ref}\n      className={cn(\n        'pr-twp tw-relative tw-flex tw-w-full tw-touch-none tw-select-none tw-items-center',\n        className,\n      )}\n      {...props}\n      dir={dir}\n    >\n      <SliderPrimitive.Track className=\"tw-relative tw-h-2 tw-w-full tw-grow tw-overflow-hidden tw-rounded-full tw-bg-secondary\">\n        <SliderPrimitive.Range className=\"tw-absolute tw-h-full tw-bg-primary\" />\n      </SliderPrimitive.Track>\n      <SliderPrimitive.Thumb className=\"tw-block tw-h-5 tw-w-5 tw-rounded-full tw-border-2 tw-border-primary tw-bg-background tw-ring-offset-background tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50\" />\n    </SliderPrimitive.Root>\n  );\n});\nSlider.displayName = SliderPrimitive.Root.displayName;\n\nexport { Slider };\n","import * as SwitchPrimitives from '@radix-ui/react-switch';\nimport React from 'react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * The Switch component is a control that allows the user to toggle between checked and not checked.\n * This component is built on Radix UI primitives and styled with Shadcn UI.\n *\n * @see Shadcn UI Documentation: {@link https://ui.shadcn.com/docs/components/switch}\n * @see Radix UI Documentation: {@link https://www.radix-ui.com/primitives/docs/components/switch}\n */\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <SwitchPrimitives.Root\n      className={cn(\n        'tw-peer pr-twp tw-inline-flex tw-h-6 tw-w-11 tw-shrink-0 tw-cursor-pointer tw-items-center tw-rounded-full tw-border-2 tw-border-transparent tw-transition-colors focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 focus-visible:tw-ring-offset-background disabled:tw-cursor-not-allowed disabled:tw-opacity-50 data-[state=checked]:tw-bg-primary data-[state=unchecked]:tw-bg-input',\n        className,\n      )}\n      {...props}\n      ref={ref}\n    >\n      <SwitchPrimitives.Thumb\n        className={cn(\n          'pr-twp tw-pointer-events-none tw-block tw-h-5 tw-w-5 tw-rounded-full tw-bg-background tw-shadow-lg tw-ring-0 tw-transition-transform',\n          {\n            'data-[state=checked]:tw-translate-x-5 data-[state=unchecked]:tw-translate-x-0':\n              dir === 'ltr',\n          },\n          {\n            'data-[state=checked]:tw-translate-x-[-20px] data-[state=unchecked]:tw-translate-x-0':\n              dir === 'rtl',\n          },\n        )}\n      />\n    </SwitchPrimitives.Root>\n  );\n});\nSwitch.displayName = SwitchPrimitives.Root.displayName;\n\nexport { Switch };\n","import React from 'react';\nimport * as TabsPrimitive from '@radix-ui/react-tabs';\n\nimport { cn } from '@/utils/shadcn-ui.util';\nimport { Direction, readDirection } from '@/utils/dir-helper.util';\n\n/**\n * Tabs components provide a set of layered sections of content—known as tab panels–that are\n * displayed one at a time. These components are built on Radix UI primitives and styled with Shadcn\n * UI. See Shadcn UI Documentation: https://ui.shadcn.com/docs/components/tabs See Radix UI\n * Documentation: https://www.radix-ui.com/primitives/docs/components/tabs\n */\nexport const Tabs = TabsPrimitive.Root;\n\n/** @inheritdoc Tabs */\nexport type TabsListProps = React.ComponentPropsWithoutRef<typeof TabsPrimitive.List> & {\n  className?: string;\n};\n\n/** @inheritdoc Tabs */\nexport type TabsTriggerProps = React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger> & {\n  className?: string;\n};\n\n/** @inheritdoc Tabs */\nexport type TabsContentProps = React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content> & {\n  className?: string;\n};\n\n/** @inheritdoc Tabs */\nexport const TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  TabsListProps\n>(({ className, ...props }, ref) => {\n  const dir: Direction = readDirection();\n  return (\n    <TabsPrimitive.List\n      ref={ref}\n      className={cn(\n        'pr-twp tw-inline-flex tw-h-10 tw-items-center tw-justify-center tw-rounded-md tw-bg-muted tw-p-1 tw-text-muted-foreground',\n        className,\n      )}\n      {...props}\n      dir={dir}\n    />\n  );\n});\nTabsList.displayName = TabsPrimitive.List.displayName;\n\n/** @inheritdoc Tabs */\nexport const TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  TabsTriggerProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      'pr-twp tw-inline-flex tw-items-center tw-justify-center tw-whitespace-nowrap tw-rounded-sm tw-px-3 tw-py-1.5 tw-text-sm tw-font-medium tw-ring-offset-background tw-transition-all hover:tw-text-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-pointer-events-none disabled:tw-opacity-50 data-[state=active]:tw-bg-background data-[state=active]:tw-text-foreground data-[state=active]:tw-shadow-sm',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\n\n/** @inheritdoc Tabs */\nexport const TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  TabsContentProps\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      'pr-twp tw-mt-2 tw-ring-offset-background focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2',\n      className,\n    )}\n    {...props}\n  />\n));\nTabsContent.displayName = TabsPrimitive.Content.displayName;\n","import React from 'react';\n\nimport { cn } from '@/utils/shadcn-ui.util';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'pr-twp tw-flex tw-min-h-[80px] tw-w-full tw-rounded-md tw-border tw-border-input tw-bg-background tw-px-3 tw-py-2 tw-text-base tw-ring-offset-background placeholder:tw-text-muted-foreground focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-ring focus-visible:tw-ring-offset-2 disabled:tw-cursor-not-allowed disabled:tw-opacity-50 md:tw-text-sm',\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nTextarea.displayName = 'Textarea';\n\nexport { Textarea };\n","import { PlatformEvent, PlatformEventHandler } from 'platform-bible-utils';\nimport { useEffect } from 'react';\n\n/**\n * Adds an event handler to an event so the event handler runs when the event is emitted. Use\n * `papi.network.getNetworkEvent` to use a networked event with this hook.\n *\n * @param event The event to subscribe to.\n *\n *   - If event is a `PlatformEvent`, that event will be used\n *   - If event is undefined, the callback will not be subscribed. Useful if the event is not yet\n *       available for example\n *\n * @param eventHandler The callback to run when the event is emitted\n *\n *   WARNING: MUST BE STABLE - const or wrapped in useCallback. The reference must not be updated\n *   every render\n */\nexport const useEvent = <T>(\n  event: PlatformEvent<T> | undefined,\n  eventHandler: PlatformEventHandler<T>,\n) => {\n  useEffect(() => {\n    // Do nothing if the event is not provided (in case the event is not yet available, for example)\n    if (!event) return () => {};\n\n    const unsubscriber = event(eventHandler);\n    return () => {\n      unsubscriber();\n    };\n  }, [event, eventHandler]);\n};\nexport default useEvent;\n","import { useEffect, useRef, useState } from 'react';\n\nexport type UsePromiseOptions = {\n  /**\n   * Whether to leave the value as the most recent resolved promise value or set it back to\n   * defaultValue while running the promise again. Defaults to true\n   */\n  preserveValue?: boolean;\n};\n\n/** Set up defaults for options for usePromise hook */\nfunction getUsePromiseOptionsDefaults(options: UsePromiseOptions): UsePromiseOptions {\n  return {\n    preserveValue: true,\n    ...options,\n  };\n}\n\n/**\n * Awaits a promise and returns a loading value while the promise is unresolved\n *\n * @param promiseFactoryCallback A function that returns the promise to await. If this callback is\n *   undefined, the current value will be returned (defaultValue unless it was previously changed\n *   and `options.preserveValue` is true), and there will be no loading.\n *\n *   WARNING: MUST BE STABLE - const or wrapped in useCallback. The reference must not be updated\n *   every render\n * @param defaultValue The initial value to return while first awaiting the promise. If\n *   `options.preserveValue` is false, this value is also shown while awaiting the promise on\n *   subsequent calls.\n *\n *   Note: this parameter is internally assigned to a `ref`, so changing it will not cause any hooks\n *   to re-run with its new value. This means that, if the `promiseFactoryCallback` changes and\n *   `options.preserveValue` is `false`, the returned value will be set to the current\n *   `defaultValue`. However, the returned value will not be updated if`defaultValue` changes.\n * @param options Various options for adjusting how this hook runs the `promiseFactoryCallback`\n *\n *   Note: this parameter is internally assigned to a `ref`, so changing it will not cause any hooks\n *   to re-run with its new value. However, the latest `options.preserveValue` will always be used\n *   appropriately to determine whether to preserve the returned value when changing the\n *   `promiseFactoryCallback`\n * @returns `[value, isLoading]`\n *\n *   - `value`: the current value for the promise, either the defaultValue or the resolved promise value\n *   - `isLoading`: whether the promise is waiting to be resolved\n */\nexport const usePromise = <T>(\n  promiseFactoryCallback: (() => Promise<T>) | undefined,\n  defaultValue: T,\n  options: UsePromiseOptions = {},\n): [value: T, isLoading: boolean] => {\n  // Use defaultValue as a ref so it doesn't update dependency arrays\n  const defaultValueRef = useRef(defaultValue);\n  defaultValueRef.current = defaultValue;\n  // Use options as a ref so it doesn't update dependency arrays\n  const optionsDefaultedRef = useRef(options);\n  optionsDefaultedRef.current = getUsePromiseOptionsDefaults(optionsDefaultedRef.current);\n\n  const [value, setValue] = useState<T>(() => defaultValueRef.current);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  useEffect(() => {\n    let promiseIsCurrent = true;\n    // If a promiseFactoryCallback was provided, we are loading. Otherwise, there is no loading to do\n    setIsLoading(!!promiseFactoryCallback);\n    (async () => {\n      // If there is a callback to run, run it\n      if (promiseFactoryCallback) {\n        const result = await promiseFactoryCallback();\n        // If the promise was not already replaced, update the value\n        if (promiseIsCurrent) {\n          setValue(() => result);\n          setIsLoading(false);\n        }\n      }\n    })();\n\n    return () => {\n      // Mark this promise as old and not to be used\n      promiseIsCurrent = false;\n      if (!optionsDefaultedRef.current.preserveValue) setValue(() => defaultValueRef.current);\n    };\n  }, [promiseFactoryCallback]);\n\n  return [value, isLoading];\n};\nexport default usePromise;\n","import { useCallback, useEffect } from 'react';\nimport { PlatformEvent, PlatformEventAsync, PlatformEventHandler } from 'platform-bible-utils';\nimport { usePromise } from './use-promise.hook';\n\nconst noopUnsubscriber = () => false;\n\n/**\n * Adds an event handler to an asynchronously subscribing/unsubscribing event so the event handler\n * runs when the event is emitted. Use `papi.network.getNetworkEvent` to use a networked event with\n * this hook.\n *\n * @param event The asynchronously (un)subscribing event to subscribe to.\n *\n *   - If event is a `PlatformEvent` or `PlatformEventAsync`, that event will be used\n *   - If event is undefined, the callback will not be subscribed. Useful if the event is not yet\n *       available for example\n *\n * @param eventHandler The callback to run when the event is emitted\n *\n *   WARNING: MUST BE STABLE - const or wrapped in useCallback. The reference must not be updated\n *   every render\n */\nexport const useEventAsync = <T>(\n  event: PlatformEvent<T> | PlatformEventAsync<T> | undefined,\n  eventHandler: PlatformEventHandler<T>,\n) => {\n  // Subscribe to the event asynchronously\n  const [unsubscribe] = usePromise(\n    useCallback(async () => {\n      // Do nothing if the event is not provided (in case the event is not yet available, for example)\n      if (!event) return noopUnsubscriber;\n\n      // Wrap subscribe and unsubscribe in promises to allow normal events to be used as well\n      const unsub = await Promise.resolve(event(eventHandler));\n      return async () => unsub();\n    }, [eventHandler, event]),\n    noopUnsubscriber,\n    // We want the unsubscriber to return to default value immediately upon changing subscription\n    // So the useEffect below will unsubscribe asap\n    { preserveValue: false },\n  );\n\n  // Unsubscribe from the event asynchronously (but we aren't awaiting the unsub)\n  useEffect(() => {\n    return () => {\n      if (unsubscribe !== noopUnsubscriber) {\n        unsubscribe();\n      }\n    };\n  }, [unsubscribe]);\n};\n\nexport default useEventAsync;\n"],"names":["twMergeCustom","extendTailwindMerge","cn","inputs","clsx","Input","React","className","type","props","ref","jsx","BookChapterInput","forwardRef","handleSearch","handleKeyDown","handleOnClick","handleSubmit","hasTopMatch","hasNoMatches","hasInputChanged","isFocused","setIsFocused","useState","jsxs","event","e","_a","Check","CircleSlash","MenuContext","createContext","useMenuContext","context","useContext","menuVariants","cva","STORAGE_KEY","readDirection","retrieved","DropdownMenuTrigger","DropdownMenuPrimitive","DropdownMenuGroup","DropdownMenuPortal","DropdownMenuSub","DropdownMenuRadioGroup","DropdownMenu","variant","contextValue","DropdownMenuSubTrigger","inset","children","ChevronRight","DropdownMenuSubContent","DropdownMenuContent","sideOffset","dir","DropdownMenuItem","DropdownMenuCheckboxItem","checked","DropdownMenuRadioItem","Circle","DropdownMenuLabel","DropdownMenuSeparator","DropdownMenuShortcut","P","R","s","n","N","B","O","S","K","g","k","x","T","X","V","w","L","G","A","H","C","I","y","q","U","m","l","h","c","E","r","D","i","a","o","u","v","f","d","b","p","J","BookMenuItem","bookId","handleSelectBook","shouldExpandChildren","handleHighlightBook","bookType","Canon","ChapterSelect","handleSelectChapter","endChapter","selectedChapter","highlightedChapter","handleHighlightedChapter","matchingChapters","chapters","_","handleMouse","useCallback","chapterNumber","chapter","CHAPTERS_PER_ROW","ALL_BOOK_IDS","ALL_ENGLISH_BOOK_NAMES","BOOK_TYPE_LABELS","BOOK_TYPE_ARRAY","SCROLL_OFFSET","SCRIPTURE_REGEX_PATTERNS","SEARCH_QUERY_FORMATS","CONTENT_NAVIGATION_KEYS","TAB_INDEX_QUERY","fetchEndChapter","getChaptersForBook","getBookIdFromEnglishName","bookName","matchingBookId","BookChapterControl","scrRef","getActiveBookIds","bookChapterInputValue","setBookChapterInputValue","formatScrRef","searchQuery","setSearchQuery","selectedBookId","setSelectedBookId","setHighlightedChapter","highlightedBookId","setHighlightedBookId","isContentOpen","setIsContentOpen","isContentOpenDelayed","setIsContentOpenDelayed","hasStartedTyping","setHasStartedTyping","topMatch","setTopMatch","inputRef","useRef","contentRef","menuItemRef","topMatchMenuItemRef","calculateTopMatch","query","result","format","matches","book","verse","validBookId","chapterNum","verseNum","topMatchChapters","useMemo","isSearchDifferentFromScrRef","parsedReference","isShowingTopMatch","fetchFilteredBooks","newBookIds","englishNameLowerCase","normalizedQuery","allFilteredBooksByType","section","totalFilteredBooks","total","handleSearchInput","searchString","shouldPreventAutoClosing","resetToScrRef","controlMenuState","open","updateReference","shouldClose","handleInputSubmit","englishName","handleKeyDownInput","bookMatch","newValue","bookAndChapterMatch","bookAndChapter","MODIFIER_KEYS","passInputToBookChapterInput","focusableElementsOutsideThisComponent","element","_b","currentFocusedIndex","handleKeyDownContent","key","handleKeyDownTopMatch","handleKeyDownMenuItem","index","activeBook","upOneChapter","downOneChapter","allChaptersForBook","availableChapters","currentIndex","newHighlightedChapter","targetChapter","foundChapter","useEffect","useLayoutEffect","scrollTimeout","scrollPosition","Fragment","sectionIndex","bookIndex","buttonVariants","Button","size","asChild","Slot","labelVariants","Label","LabelPrimitive","RadioGroup","RadioGroupPrimitive","RadioGroupItem","Popover","PopoverPrimitive","PopoverTrigger","PopoverContent","align","DialogPortal","DialogPrimitive","DialogOverlay","DialogContent","DialogTitle","DialogDescription","Command","CommandPrimitive","CommandInput","Search","CommandList","CommandEmpty","CommandGroup","CommandSeparator","CommandItem","getOptionLabelDefault","option","ComboBox","id","options","buttonClassName","popoverContentClassName","value","onChange","getOptionLabel","icon","buttonPlaceholder","textPlaceholder","commandEmptyMessage","buttonVariant","alignDropDown","isDisabled","setOpen","ChevronsUpDown","ChapterRangeSelector","startChapter","handleSelectStartChapter","handleSelectEndChapter","chapterCount","chapterOptions","BookSelectionMode","BOOK_SELECTOR_STRING_KEYS","localizeString","strings","BookSelector","handleBookSelectionModeChange","currentBookName","onSelectBooks","selectedBookIds","localizedStrings","currentBookText","chooseText","chooseBooksText","bookSelectionMode","setBookSelectionMode","onSelectionModeChange","newMode","DataTableViewOptions","table","FilterIcon","column","Select","SelectPrimitive","SelectGroup","SelectValue","selectTriggerVariants","SelectTrigger","ChevronDown","SelectScrollUpButton","ChevronUp","SelectScrollDownButton","SelectContent","position","SelectLabel","SelectItem","SelectSeparator","DataTablePagination","pageSize","ArrowLeftIcon","ChevronLeftIcon","ChevronRightIcon","ArrowRightIcon","Table","stickyHeader","TableHeader","TableBody","TableFooter","TableRow","TableHead","TableCell","TableCaption","DataTable","columns","data","enablePagination","showPaginationControls","showColumnVisibilityControls","onRowClickHandler","sorting","setSorting","columnFilters","setColumnFilters","columnVisibility","setColumnVisibility","rowSelection","setRowSelection","useReactTable","getCoreRowModel","getPaginationRowModel","getSortedRowModel","getFilteredRowModel","headerGroup","header","flexRender","row","cell","MarkdownRenderer","markdown","anchorTarget","Markdown","DropdownMenuItemType","DropdownMenuItemType2","FilterDropdown","label","groups","Filter","group","item","MoreInfo","category","downloads","languages","moreInfoUrl","numberFormatted","NumberFormat","handleScrollToBottom","User","locale","LucideLink","CircleHelp","VersionHistory","versionHistory","showAllVersions","setShowAllVersions","currentDate","formatTimeString","dateString","date","dateDiff","yearDiff","monthDiff","dayDiff","timeString","sortedEntries","entry","Footer","publisherDisplayName","fileSize","locales","formattedFileSize","formatBytes","languageNames","codes","displayNames","code","badgeVariants","Badge","MultiSelectComboBox","entries","getEntriesCount","selected","placeholder","customSelectedText","sortSelected","handleSelect","getPlaceholderText","sortedOptions","starredItems","opt","nonStarredItems","aSelected","bSelected","count","Star","badgesPlaceholder","selectedType","OccurrencesTable","occurrenceData","setScriptureReference","referenceHeaderText","occurrenceHeaderText","occurrences","uniqueOccurrences","occurrence","uniqueOccurrence","deepEqual","Checkbox","CheckboxPrimitive","toggleVariants","Toggle","TogglePrimitive","ToggleGroupContext","ToggleGroup","ToggleGroupPrimitive","ToggleGroupItem","getSortingIcon","sortDirection","ArrowUpIcon","ArrowDownIcon","ArrowUpDownIcon","inventoryItemColumn","itemLabel","inventoryAdditionalItemColumn","additionalItemLabel","additionalItemIndex","inventoryCountColumn","countLabel","statusChangeHandler","changedItems","newStatus","approvedItems","onApprovedItemsChange","unapprovedItems","onUnapprovedItemsChange","newApprovedItems","validItem","newUnapprovedItems","unapprovedItem","inventoryStatusColumn","statusLabel","status","CircleCheckIcon","CircleXIcon","CircleHelpIcon","getLinesFromUSFM","text","getNumberFromUSFM","regex","match","getBookIdFromUSFM","getStatusForItem","INVENTORY_STRING_KEYS","filterItemData","itemData","statusFilter","textFilter","filteredItemData","processInventoryItems","inventoryItems","tableData","existingItem","tableEntry","isString","newItem","Inventory","setVerseRef","additionalItemsLabels","scope","onScopeChange","allItemsText","approvedItemsText","unapprovedItemsText","unknownItemsText","scopeBookText","scopeChapterText","filterText","showAdditionalItemsText","showAdditionalItems","setShowAdditionalItems","setStatusFilter","setTextFilter","selectedItem","setSelectedItem","reducedTableData","newTableData","firstItem","existingEntry","newTableEntry","filteredTableData","allColumns","numberOfAdditionalItems","additionalColumns","rowClickHandler","newSelection","handleScopeChange","handleStatusFilterChange","Separator","orientation","decorative","SeparatorPrimitive","Skeleton","TooltipProvider","TooltipPrimitive","Tooltip","TooltipTrigger","TooltipContent","SIDEBAR_WIDTH","SIDEBAR_WIDTH_ICON","SidebarContext","useSidebar","SidebarProvider","defaultOpen","openProp","setOpenProp","style","side","_open","_setOpen","isOpen","openState","toggleSidebar","state","directionAwareSide","Sidebar","collapsible","SidebarTrigger","onClick","PanelLeft","PanelRight","SidebarRail","SidebarInset","SidebarInput","SidebarHeader","SidebarFooter","SidebarSeparator","SidebarContent","SidebarGroup","SidebarGroupLabel","SidebarGroupAction","SidebarGroupContent","SidebarMenu","SidebarMenuItem","sidebarMenuButtonVariants","SidebarMenuButton","isActive","tooltip","Comp","button","SidebarMenuAction","showOnHover","SidebarMenuBadge","SidebarMenuSkeleton","showIcon","width","SidebarMenuSub","SidebarMenuSubItem","SidebarMenuSubButton","SettingsSidebar","extensionLabels","projectInfo","handleSelectSidebarItem","selectedSidebarItem","extensionsSidebarGroupLabel","projectsSidebarGroupLabel","buttonPlaceholderText","handleSelectItem","projectId","getProjectNameFromProjectId","project","info","getIsActive","selectedProjectName","ScrollText","SearchBar","onSearch","isFullWidth","SettingsSidebarContentSearch","searchValue","scrBookColId","scrRefColId","typeColId","detailsColId","defaultScrRefColumnName","defaultScrBookGroupName","defaultTypeColumnName","defaultDetailsColumnName","getColumns","colInfo","showSourceColumn","showSrcCol","compareScrRefs","toRefOrRange","scriptureSelection","offsetStart","offsetEnd","scrRefToBBBCCCVVV","getRowKey","ScriptureResultsViewer","sources","showColumnHeaders","scriptureReferenceColumnName","scriptureBookGroupName","typeColumnName","detailsColumnName","onRowSelected","grouping","setGrouping","scriptureResults","source","getExpandedRowModel","getGroupedRowModel","selectedRows","keys","selectedRow","scrBookGroupName","typeGroupName","groupingOptions","handleSelectChange","selectedGrouping","handleRowClick","getEvenOrOddBandingStyle","getIndent","groupingState","rowIndex","ChevronLeft","Section","getSectionLongName","otLongName","ntLongName","dcLongName","extraLongName","getSectionShortName","otShortName","ntShortName","dcShortName","extraShortName","getSectionForBook","getBooksForSection","bookIds","isSectionFullySelected","BookItem","toggleBook","lastKeyEventShiftKey","localizedBookNames","isMouseClick","mouseClickTimer","SectionButton","availableBookIds","onToggle","sectionOtShortText","sectionNtShortText","sectionDcShortText","sectionExtraShortText","VISIBLE_BADGES_COUNT","MAX_VISIBLE_BADGES","availableBookInfo","onChangeSelectedBookIds","booksSelectedText","selectBooksText","searchBooksText","selectAllText","clearAllText","noBookFoundText","moreText","sectionOtLongText","sectionNtLongText","sectionDcLongText","sectionExtraLongText","isBooksSelectorOpen","setIsBooksSelectorOpen","lastSelectedBookRef","availableBooksIds","shiftKey","lastIndex","startIndex","endIndex","booksInRange","shortname","toggleSection","sectionBooks","handleSelectAll","handleClearAll","SCOPE_SELECTOR_STRING_KEYS","ScopeSelector","availableScopes","onSelectedBookIdsChange","selectedTextText","currentVerseText","currentChapterText","scopeText","SCOPE_OPTIONS","displayedScopes","DEFAULT_SCROLL_GROUP_LOCALIZED_STRINGS","getLocalizeKeyForScrollGroupId","ScrollGroupSelector","availableScrollGroupIds","scrollGroupId","onChangeScrollGroupId","localizedStringsDefaulted","localizedStringKey","localizedStringValue","newScrollGroupString","scrollGroupOptionId","SettingsList","SettingsListItem","primary","secondary","isLoading","loadingMessage","SettingsListHeader","includeSeparator","getSubMenuGroupKeyForMenuItemId","MenuItemIcon","menuLabel","leading","getGroupContent","items","columnOrSubMenuKey","onSelectMenuItem","groupKey","TabDropdownMenu","menuData","tabLabel","MenuIcon","columnKey","array","TabToolbar","onSelectProjectMenuItem","onSelectViewInfoMenuItem","projectMenuData","tabViewMenuData","startAreaChildren","centerAreaChildren","endAreaChildren","Menu","EllipsisVertical","VerticalTabs","TabsPrimitive","VerticalTabsList","VerticalTabsTrigger","VerticalTabsContent","TabNavigationContentSearch","tabList","searchPlaceholder","headerTitle","searchClassName","tab","MenubarMenu","MenubarPrimitive","MenubarSub","Menubar","MenubarTrigger","MenubarSubTrigger","MenubarSubContent","MenubarContent","alignOffset","MenubarItem","MenubarCheckboxItem","MenubarRadioItem","MenubarLabel","MenubarSeparator","simulateKeyPress","getMenubarContent","sortedGroupsForColumn","groupItems","itemsWithSeparator","PlatformMenubar","onOpenChange","menubarRef","projectMenuRef","windowMenuRef","layoutMenuRef","helpMenuRef","getRefForColumn","useHotkeys","handler","escKey","spaceKey","_c","_d","observer","mutations","mutation","getToolbarOSReservedSpaceClassName","operatingSystem","Toolbar","appMenuAreaChildren","configAreaChildren","shouldUseAsAppDragArea","menubarVariant","containerRef","UiLanguageSelector","knownUiLanguages","primaryLanguage","fallbackLanguages","onLanguagesChange","onPrimaryLanguageChange","onFallbackLanguagesChange","selectFallbackLanguagesText","setIsOpen","handleLanguageChange","lang","getLanguageDisplayName","uiLang","altName","_e","_f","SmartLabel","createLabel","createComplexLabel","Checklist","listItems","selectedListItems","handleSelectListItem","Spinner","LoaderCircle","TextField","hasError","helperText","isRequired","defaultValue","onFocus","onBlur","ShadLabel","ShadInput","ERROR_DUMP_STRING_KEYS","ErrorDump","errorDetails","handleCopyNotify","headerText","infoMessage","handleCopy","Copy","alertVariants","Alert","AlertTitle","AlertDescription","Avatar","AvatarPrimitive","AvatarImage","AvatarFallback","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","DrawerContext","Drawer","shouldScaleBackground","direction","DrawerPrimitive","DrawerTrigger","DrawerPortal","DrawerClose","DrawerOverlay","DrawerContent","directionStyles","handleStyles","DrawerHeader","DrawerFooter","DrawerTitle","DrawerDescription","Progress","ProgressPrimitive","Sonner","Toaster","Slider","SliderPrimitive","Switch","SwitchPrimitives","Tabs","TabsList","TabsTrigger","TabsContent","Textarea","useEvent","eventHandler","unsubscriber","getUsePromiseOptionsDefaults","usePromise","promiseFactoryCallback","defaultValueRef","optionsDefaultedRef","setValue","setIsLoading","promiseIsCurrent","noopUnsubscriber","useEventAsync","unsubscribe","unsub"],"mappings":"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AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AACF,GAAGC,KAAI;AAAA,EACL;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAGC,KAAI;AAAA,EACL;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA;AAAA,EAGA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAA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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","x_google_ignoreList":[6]}