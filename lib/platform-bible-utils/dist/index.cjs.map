{"version":3,"file":"index.cjs","sources":["../src/async-variable.ts","../src/intl-collator.ts","../src/intl-date-time-format.ts","../src/platform-event-emitter.model.ts","../src/util.ts","../src/document-combiner.ts","../src/mutex.ts","../src/mutex-map.ts","../src/non-validating-document-combiner.ts","../src/intl-number-format.ts","../src/promise-chaining-map.ts","../src/unsubscriber-async-list.ts","../src/platform-error.ts","../../../node_modules/@sillsdev/scripture/dist/index.es.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/conventions.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/errors.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/grammar.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/dom.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/entities.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/sax.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/dom-parser.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/node_modules/@xmldom/xmldom/lib/index.js","../../../node_modules/@biblionexus-foundation/scripture-utilities/dist/index.js","../../../node_modules/char-regex/index.js","../../../node_modules/stringz/dist/index.js","../src/array-util.ts","../src/string-util.ts","../src/scripture-util.ts","../src/unsubscriber.ts","../src/usj-reader-writer.model.ts","../../../node_modules/fast-equals/dist/esm/index.mjs","../src/equality-checking.ts","../src/subset-checking.ts","../src/serialization.ts","../src/intl-util.ts","../src/number-utils.ts","../src/date-time-format-util.ts","../src/settings.model.ts","../src/localized-strings.model.ts","../src/menus.model.ts","../src/usj-reader-writer.ts"],"sourcesContent":["/** This class provides a convenient way for one task to wait on a variable that another task sets. */\nexport default class AsyncVariable<T> {\n  private readonly variableName: string;\n  private readonly promiseToValue: Promise<T>;\n  private resolver: ((value: T) => void) | undefined;\n  private rejecter: ((reason: string | undefined) => void) | undefined;\n\n  /**\n   * Creates an instance of the class\n   *\n   * @param variableName Name to use when logging about this variable\n   * @param rejectIfNotSettledWithinMS Milliseconds to wait before verifying if the promise was\n   *   settled (resolved or rejected); will reject if it has not settled by that time. Use -1 if you\n   *   do not want a timeout at all. Defaults to 10000 ms\n   */\n  constructor(variableName: string, rejectIfNotSettledWithinMS: number = 10000) {\n    this.variableName = variableName;\n    this.promiseToValue = new Promise<T>((resolve, reject) => {\n      this.resolver = resolve;\n      this.rejecter = reject;\n    });\n    if (rejectIfNotSettledWithinMS > 0) {\n      setTimeout(() => {\n        if (this.rejecter) {\n          this.rejecter(`Timeout reached when waiting for ${this.variableName} to settle`);\n          this.complete();\n        }\n      }, rejectIfNotSettledWithinMS);\n    }\n    Object.seal(this);\n  }\n\n  /**\n   * Get this variable's promise to a value. This always returns the same promise even after the\n   * value has been resolved or rejected.\n   *\n   * @returns The promise for the value to be set\n   */\n  get promise(): Promise<T> {\n    return this.promiseToValue;\n  }\n\n  /**\n   * A simple way to see if this variable's promise was resolved or rejected already\n   *\n   * @returns Whether the variable was already resolved or rejected\n   */\n  get hasSettled(): boolean {\n    return Object.isFrozen(this);\n  }\n\n  /**\n   * Resolve this variable's promise to the given value\n   *\n   * @param value This variable's promise will resolve to this value\n   * @param throwIfAlreadySettled Determines whether to throw if the variable was already resolved\n   *   or rejected. Defaults to `false`\n   */\n  resolveToValue(value: T, throwIfAlreadySettled: boolean = false): void {\n    if (this.resolver) {\n      console.debug(`${this.variableName} is being resolved now`);\n      this.resolver(value);\n      this.complete();\n    } else {\n      if (throwIfAlreadySettled) throw Error(`${this.variableName} was already settled`);\n      console.debug(`Ignoring subsequent resolution of ${this.variableName}`);\n    }\n  }\n\n  /**\n   * Reject this variable's promise for the value with the given reason\n   *\n   * @param reason This variable's promise will be rejected with this reason\n   * @param throwIfAlreadySettled Determines whether to throw if the variable was already resolved\n   *   or rejected. Defaults to `false`\n   */\n  rejectWithReason(reason: string, throwIfAlreadySettled: boolean = false): void {\n    if (this.rejecter) {\n      console.debug(`${this.variableName} is being rejected now`);\n      this.rejecter(reason);\n      this.complete();\n    } else {\n      if (throwIfAlreadySettled) throw Error(`${this.variableName} was already settled`);\n      console.debug(`Ignoring subsequent rejection of ${this.variableName}`);\n    }\n  }\n\n  /** Prevent any further updates to this variable */\n  private complete(): void {\n    this.resolver = undefined;\n    this.rejecter = undefined;\n    Object.freeze(this);\n  }\n}\n","/** Enables language-sensitive string comparison. Wraps Intl.Collator */\nexport default class Collator {\n  private collator: Intl.Collator;\n\n  constructor(locales?: string | string[], options?: Intl.CollatorOptions) {\n    this.collator = new Intl.Collator(locales, options);\n  }\n\n  /**\n   * Compares two strings according to the sort order of this Collator object\n   *\n   * @param string1 String to compare\n   * @param string2 String to compare\n   * @returns A number indicating how string1 and string2 compare to each other according to the\n   *   sort order of this Collator object. Negative value if string1 comes before string2. Positive\n   *   value if string1 comes after string2. 0 if they are considered equal.\n   */\n  compare(string1: string, string2: string): number {\n    return this.collator.compare(string1, string2);\n  }\n\n  /**\n   * Returns a new object with properties reflecting the locale and collation options computed\n   * during initialization of this collator object.\n   *\n   * @returns ResolvedCollatorOptions object\n   */\n  resolvedOptions(): Intl.ResolvedCollatorOptions {\n    return this.collator.resolvedOptions();\n  }\n}\n","/** Enables language-sensitive data and time formatting. Wraps Intl.DateTimeFormat */\nexport default class DateTimeFormat {\n  private dateTimeFormatter: Intl.DateTimeFormat;\n\n  constructor(locales?: string | string[], options?: Intl.DateTimeFormatOptions) {\n    this.dateTimeFormatter = new Intl.DateTimeFormat(locales, options);\n  }\n\n  /**\n   * Formats a date according to the locale and formatting option for this DateTimeFormat object\n   *\n   * @param date The date to format\n   * @returns String representing the given date formatted according to the locale and formatting\n   *   options of this DateTimeFormat object\n   */\n  format(date: Date): string {\n    return this.dateTimeFormatter.format(date);\n  }\n\n  /**\n   * Formats a date range in the most concise way based on the locales and options provided when\n   * instantiating this DateTimeFormat object\n   *\n   * @param startDate Date object representing start of the date range\n   * @param endDate Date object representing the end of the date range\n   * @returns String representing the given date range formatted according to the locale and\n   *   formatting options of this DateTimeFormat object\n   */\n  formatRange(startDate: Date, endDate: Date): string {\n    return this.dateTimeFormatter.formatRange(startDate, endDate);\n  }\n\n  /**\n   * Returns an array of locale-specific tokens representing each part of the formatted date range\n   * produced by this DateTimeFormat object\n   *\n   * @param startDate Date object representing start of the date range\n   * @param endDate Date object representing the end of the date range\n   * @returns Array of DateTimeRangeFormatPart objects\n   */\n  formatRangeToParts(startDate: Date, endDate: Date): Intl.DateTimeRangeFormatPart[] {\n    return this.dateTimeFormatter.formatRangeToParts(startDate, endDate);\n  }\n\n  /**\n   * Allows locale-aware formatting of strings produced by this DateTimeFormat object\n   *\n   * @param date The date to format\n   * @returns Array of DateTimeFormatPart objects\n   */\n  formatToParts(date: Date): Intl.DateTimeFormatPart[] {\n    return this.dateTimeFormatter.formatToParts(date);\n  }\n\n  /**\n   * Returns a new object with properties reflecting the locale and date and time formatting options\n   * computed during initialization of this DateTimeFormat object\n   *\n   * @returns ResolvedDateTimeFormatOptions object\n   */\n  resolvedOptions(): Intl.ResolvedDateTimeFormatOptions {\n    return this.dateTimeFormatter.resolvedOptions();\n  }\n}\n","/** Interfaces, classes, and functions related to events and event emitters */\n\nimport { Dispose } from './disposal.model';\nimport { PlatformEvent, PlatformEventHandler } from './platform-event';\n\n/**\n * Event manager - accepts subscriptions to an event and runs the subscription callbacks when the\n * event is emitted Use eventEmitter.event(callback) to subscribe to the event. Use\n * eventEmitter.emit(event) to run the subscriptions. Generally, this EventEmitter should be\n * private, and its event should be public. That way, the emitter is not publicized, but anyone can\n * subscribe to the event.\n */\nexport default class PlatformEventEmitter<T> implements Dispose {\n  /**\n   * Subscribes a function to run when this event is emitted.\n   *\n   * @param callback Function to run with the event when it is emitted\n   * @returns Unsubscriber function to run to stop calling the passed-in function when the event is\n   *   emitted\n   * @alias event\n   */\n  subscribe = this.event;\n\n  /** All callback functions that will run when this event is emitted. Lazy loaded */\n  private subscriptions?: PlatformEventHandler<T>[];\n  /** Event for listeners to subscribe to. Lazy loaded */\n  private lazyEvent?: PlatformEvent<T>;\n  /** Whether this emitter has been disposed */\n  private isDisposed = false;\n\n  /**\n   * Event for listeners to subscribe to. Subscribes a function to run when this event is emitted.\n   * Use like `const unsubscriber = event(callback)`\n   *\n   * @param callback Function to run with the event when it is emitted\n   * @returns Unsubscriber function to run to stop calling the passed-in function when the event is\n   *   emitted\n   */\n  get event(): PlatformEvent<T> {\n    this.assertNotDisposed();\n\n    if (!this.lazyEvent) {\n      this.lazyEvent = (callback) => {\n        if (!callback || typeof callback !== 'function')\n          throw new Error(`Event handler callback must be a function!`);\n\n        // Initialize this.subscriptions if it does not exist\n        if (!this.subscriptions) this.subscriptions = [];\n\n        this.subscriptions.push(callback);\n\n        return () => {\n          if (!this.subscriptions) return false; // Did not find any subscribed callbacks\n\n          const callbackIndex = this.subscriptions.indexOf(callback);\n\n          if (callbackIndex < 0) return false; // Did not find this callback in the subscriptions\n\n          // Remove the callback\n          this.subscriptions.splice(callbackIndex, 1);\n\n          return true;\n        };\n      };\n    }\n    return this.lazyEvent;\n  }\n\n  /** Disposes of this event, preparing it to release from memory */\n  dispose = () => {\n    return this.disposeFn();\n  };\n\n  /**\n   * Runs the subscriptions for the event\n   *\n   * @param event Event data to provide to subscribed callbacks\n   */\n  emit = (event: T) => {\n    // Do not do anything other than emitFn here. This emit is just binding `this` to emitFn\n    this.emitFn(event);\n  };\n\n  /**\n   * Function that runs the subscriptions for the event. Added here so children can override emit\n   * and still call the base functionality. See NetworkEventEmitter.emit for example\n   */\n  protected emitFn(event: T) {\n    this.assertNotDisposed();\n\n    // Clone the subscriptions array before iterating over the callbacks so the callback index\n    // doesn't get messed up if someone subscribes or unsubscribes inside one of the callbacks\n    const emitCallbacks = [...(this.subscriptions ?? [])];\n    emitCallbacks.forEach((callback) => callback(event));\n  }\n\n  /** Check to make sure this emitter is not disposed. Throw if it is */\n  protected assertNotDisposed() {\n    if (this.isDisposed) throw new Error('Emitter is disposed');\n  }\n\n  /**\n   * Disposes of this event, preparing it to release from memory. Added here so children can\n   * override emit and still call the base functionality.\n   */\n  protected disposeFn() {\n    this.assertNotDisposed();\n\n    this.isDisposed = true;\n    this.subscriptions = undefined;\n    this.lazyEvent = undefined;\n    return Promise.resolve(true);\n  }\n}\n","/** Collection of functions, objects, and types that are used as helpers in other services. */\n\n// Thanks to blubberdiblub at https://stackoverflow.com/a/68141099/217579\nexport function newGuid(): string {\n  return '00-0-4-1-000'.replace(/[^-]/g, (s) =>\n    // @ts-expect-error ts(2363) this works fine\n    // eslint-disable-next-line no-bitwise\n    (((Math.random() + ~~s) * 0x10000) >> s).toString(16).padStart(4, '0'),\n  );\n}\n\n// thanks to DRAX at https://stackoverflow.com/a/9436948\n/**\n * Determine whether the object is a string\n *\n * @param o Object to determine if it is a string\n * @returns True if the object is a string; false otherwise\n */\nexport function isString(o: unknown): o is string {\n  return typeof o === 'string' || o instanceof String;\n}\n\n/**\n * If deepClone isn't used when copying properties between objects, you may be left with dangling\n * references between the source and target of property copying operations.\n *\n * @param obj Object to clone\n * @returns Duplicate copy of `obj` without any references back to the original one\n */\nexport function deepClone<T>(obj: T): T {\n  // Assert the return type matches what is expected\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  return JSON.parse(JSON.stringify(obj)) as T;\n}\n\n/**\n * Get a function that reduces calls to the function passed in\n *\n * @param fn The function to debounce\n * @param delay How much delay in milliseconds after the most recent call to the debounced function\n *   to call the function\n * @returns Function that, when called, only calls the function passed in at maximum every delay ms\n */\n// We don't know the parameter types since this function can be anything\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function debounce<T extends (...args: any[]) => void>(fn: T, delay = 300): T {\n  if (isString(fn)) throw new Error('Tried to debounce a string! Could be XSS');\n  let timeout: ReturnType<typeof setTimeout>;\n  // Ensure the right return type.\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  return ((...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => fn(...args), delay);\n  }) as T;\n}\n\n/**\n * Groups each item in the array of items into a map according to the keySelector\n *\n * @param items Array of items to group by\n * @param keySelector Function to run on each item to get the key for the group to which it belongs\n * @param valueSelector Function to run on each item to get the value it should have in the group\n *   (like map function). If not provided, uses the item itself\n * @returns Map of keys to groups of values corresponding to each item\n */\nexport function groupBy<T, K>(items: T[], keySelector: (item: T) => K): Map<K, Array<T>>;\nexport function groupBy<T, K, V>(\n  items: T[],\n  keySelector: (item: T) => K,\n  valueSelector: (item: T, key: K) => V,\n): Map<K, Array<V>>;\nexport function groupBy<T, K, V = T>(\n  items: T[],\n  keySelector: (item: T) => K,\n  valueSelector?: (item: T, key: K) => V,\n): Map<K, Array<V | T>> {\n  const map = new Map<K, Array<V | T>>();\n  items.forEach((item) => {\n    const key = keySelector(item);\n    const group = map.get(key);\n    const value = valueSelector ? valueSelector(item, key) : item;\n    if (group) group.push(value);\n    else map.set(key, [value]);\n  });\n  return map;\n}\n\n// From https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\ntype ErrorWithMessage = {\n  message: string;\n};\n\n// From https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\nfunction isErrorWithMessage(error: unknown): error is ErrorWithMessage {\n  return (\n    typeof error === 'object' &&\n    // We're potentially dealing with objects we didn't create, so they might contain `null`\n    // eslint-disable-next-line no-null/no-null\n    error !== null &&\n    'message' in error &&\n    // Type assert `error` to check it's `message`.\n    // eslint-disable-next-line no-type-assertion/no-type-assertion\n    typeof (error as Record<string, unknown>).message === 'string'\n  );\n}\n\n// From https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\n/**\n * Function to get an error from the object (useful for getting an error in a catch block)\n *\n * @param error Error object whose message to get\n * @returns Message of the error - if object has message, returns message. Otherwise tries to\n *   stringify\n */\nfunction toErrorWithMessage(maybeError: unknown): ErrorWithMessage {\n  if (isErrorWithMessage(maybeError)) return maybeError;\n\n  try {\n    return new Error(JSON.stringify(maybeError));\n  } catch {\n    // fallback in case there's an error stringifying the maybeError\n    // like with circular references for example.\n    return new Error(String(maybeError));\n  }\n}\n\n// From https://kentcdodds.com/blog/get-a-catch-block-error-message-with-typescript\n/**\n * Function to get an error message from the object (useful for getting error message in a catch\n * block)\n *\n * @example `try {...} catch (e) { logger.info(getErrorMessage(e)) }`\n *\n * @param error Error object whose message to get\n * @returns Message of the error - if object has message, returns message. Otherwise tries to\n *   stringify\n */\nexport function getErrorMessage(error: unknown) {\n  return toErrorWithMessage(error).message;\n}\n\n/** Asynchronously waits for the specified number of milliseconds. (wraps setTimeout in a promise) */\nexport function wait(ms: number) {\n  // eslint-disable-next-line no-promise-executor-return\n  return new Promise<void>((resolve) => setTimeout(resolve, ms));\n}\n\n/**\n * Runs the specified function and will timeout if it takes longer than the specified wait time\n *\n * @param fn The function to run\n * @param maxWaitTimeInMS The maximum amount of time to wait for the function to resolve\n * @returns Promise that resolves to the resolved value of the function or undefined if it ran\n *   longer than the specified wait time\n */\nexport function waitForDuration<TResult>(fn: () => Promise<TResult>, maxWaitTimeInMS: number) {\n  const timeout = wait(maxWaitTimeInMS).then(() => undefined);\n  return Promise.any([timeout, fn()]);\n}\n\n/**\n * Get all functions on an object and its prototype chain (so we don't miss any class methods or any\n * object methods). Note that the functions on the final item in the prototype chain (i.e., Object)\n * are skipped to avoid including functions like `__defineGetter__`, `__defineSetter__`, `toString`,\n * etc.\n *\n * @param obj Object whose functions to get\n * @param _objId Optional ID of the object to use for debug logging\n * @returns Array of all function names on an object\n */\n// Note: lodash has something that MIGHT do the same thing as this. Investigate for https://github.com/paranext/paranext-core/issues/134\nexport function getAllObjectFunctionNames(\n  obj: { [property: string]: unknown },\n  // Leaving it here for debugging\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _objId: string = 'obj',\n): Set<string> {\n  const objectFunctionNames = new Set<string>();\n\n  // Get all function properties directly defined on the object\n  Object.getOwnPropertyNames(obj).forEach((property) => {\n    try {\n      if (typeof obj[property] === 'function') objectFunctionNames.add(property);\n    } catch (error) {\n      // Too noisy - only reenable if you need more details\n      // console.trace(`Skipping ${property} on ${objId} due to error: ${error}`);\n    }\n  });\n\n  // Walk up the prototype chain and get additional function properties, skipping the functions\n  // provided by the final (Object) prototype\n  let objectPrototype = Object.getPrototypeOf(obj);\n  while (objectPrototype && Object.getPrototypeOf(objectPrototype)) {\n    Object.getOwnPropertyNames(objectPrototype).forEach((property) => {\n      try {\n        if (typeof obj[property] === 'function') objectFunctionNames.add(property);\n      } catch (error) {\n        // Too noisy - only reenable if you need more details\n        // console.trace(`Skipping ${property} on ${objId}'s prototype due to error: ${error}`);\n      }\n    });\n    objectPrototype = Object.getPrototypeOf(objectPrototype);\n  }\n\n  return objectFunctionNames;\n}\n\n/**\n * Creates a synchronous proxy for an asynchronous object. The proxy allows calling methods on an\n * object that is asynchronously fetched using a provided asynchronous function.\n *\n * @param getObject - A function that returns a promise resolving to the object whose asynchronous\n *   methods to call.\n * @param objectToProxy - An optional object that is the object that is proxied. If a property is\n *   accessed that does exist on this object, it will be returned. If a property is accessed that\n *   does not exist on this object, it will be considered to be an asynchronous method called on the\n *   object returned from getObject.\n * @returns A synchronous proxy for the asynchronous object.\n */\nexport function createSyncProxyForAsyncObject<T extends object>(\n  getObject: (args?: unknown[]) => Promise<T>,\n  objectToProxy: Partial<T> = {},\n): T {\n  // objectToProxy will have only the synchronously accessed properties of T on it, and this proxy\n  // makes the async methods that do not exist yet available synchronously so we have all of T\n  // eslint-disable-next-line no-type-assertion/no-type-assertion\n  return new Proxy(objectToProxy as T, {\n    get(target, prop) {\n      // We don't have any type information for T, so we assume methodName exists on it and will let JavaScript throw if it doesn't exist\n      // @ts-expect-error 7053\n      if (prop in target) return target[prop];\n      return async (...args: unknown[]) => {\n        // 7053: We don't have any type information for T, so we assume methodName exists on it and will let JavaScript throw if it doesn't exist\n        // 2556: The args here are the parameters for the method specified\n        // @ts-expect-error 7053 2556\n        return (await getObject())[prop](...args);\n      };\n    },\n  });\n}\n\n/**\n * Indicates if the exception or error message provided appears to be from ParatextData.dll\n * indicating that Paratext is blocking internet access.\n *\n * @param errorMessage Error message or exception to check\n * @returns `true` if the message indicates Paratext is blocking internet access, `false` otherwise\n */\nexport function isErrorMessageAboutParatextBlockingInternetAccess(errorMessage: unknown): boolean {\n  // Copied from ParatextData/InternetAccess.cs, not a localized string\n  const paratextExceptionMessage =\n    'Bug in Paratext caused attempted access to Internet. Request has been blocked.';\n\n  if (isString(errorMessage)) return errorMessage.includes(paratextExceptionMessage);\n  return getErrorMessage(errorMessage).includes(paratextExceptionMessage);\n}\n\n/**\n * Indicates if the exception or error message provided appears to be from ParatextData.dll\n * indicating that an authorization failure occurred regarding registry credentials.\n *\n * @param errorMessage Error message or exception to check\n * @returns `true` if the message indicates an auth failure, `false` otherwise\n */\nexport function isErrorMessageAboutRegistryAuthFailure(errorMessage: unknown): boolean {\n  // Copied from ParatextProjectSendReceiveService.cs, not a localized string\n  const paratextExceptionMessage1 = '401 Unauthorized error while getting shared projects.';\n  // Copied from DblDownloadableDataProvider.cs, not a localized string\n  const paratextExceptionMessage2 =\n    'User registration is not valid. Cannot retrieve resources from DBL.';\n\n  const errorString = isString(errorMessage) ? errorMessage : getErrorMessage(errorMessage);\n  return (\n    errorString.includes(paratextExceptionMessage1) ||\n    errorString.includes(paratextExceptionMessage2)\n  );\n}\n\n/** Within type T, recursively change all properties to be optional */\nexport type DeepPartial<T> = T extends object ? { [P in keyof T]?: DeepPartial<T[P]> } : T;\n\n/** Within type T, recursively change properties that were of type A to be of type B */\nexport type ReplaceType<T, A, B> = T extends A\n  ? B\n  : T extends object\n    ? { [K in keyof T]: ReplaceType<T[K], A, B> }\n    : T;\n\n// Thanks to jcalz at https://stackoverflow.com/a/50375286\n/**\n * Converts a union type to an intersection type (`|` to `&`).\n *\n * Note: this utility type is for use on object types. It may fail on other types.\n *\n * @example\n *\n * ```typescript\n * type TypeOne = { one: string };\n * type TypeTwo = { two: number };\n * type TypeThree = { three: string };\n *\n * type TypeNums = { one: TypeOne; two: TypeTwo; three: TypeThree };\n * const numNames = ['one', 'two'] as const;\n * type TypeNumNames = typeof numNames;\n *\n * // Same as `TypeOne | TypeTwo`\n * // `{ one: string } | { two: number }`\n * type TypeOneTwoUnion = TypeNums[TypeNumNames[number]];\n *\n * // Same as `TypeOne & TypeTwo`\n * // `{ one: string; two: number }`\n * type TypeOneTwoIntersection = UnionToIntersection<TypeOneTwoUnion>;\n * ```\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type UnionToIntersection<U> = (U extends any ? (x: U) => void : never) extends (\n  x: infer I,\n) => void\n  ? I\n  : never;\n","import PlatformEventEmitter from './platform-event-emitter.model';\nimport { deepClone } from './util';\n\ntype JsonObjectLike = { [key: string]: unknown };\ntype JsonArrayLike = unknown[];\n\nexport type JsonDocumentLike = JsonObjectLike | JsonArrayLike;\n\n/**\n * Options for DocumentCombiner objects\n *\n * - `copyDocuments`: If true, this instance will perform a deep copy of all provided documents before\n *   composing the output. If false, then changes made to provided documents after they are\n *   contributed will be reflected in the next time output is composed.\n * - `ignoreDuplicateProperties`: If true, then duplicate properties are skipped if they are seen in\n *   contributed documents. If false, then throw when duplicate properties are seen in contributed\n *   documents.\n */\nexport type DocumentCombinerOptions = {\n  copyDocuments: boolean;\n  ignoreDuplicateProperties: boolean;\n};\n\n/**\n * Base class for any code that wants to compose JSON documents (primarily in the form of JS objects\n * or arrays) together into a single output document.\n */\nexport default class DocumentCombiner {\n  protected baseDocument: JsonDocumentLike;\n  protected readonly contributions = new Map<string, JsonDocumentLike>();\n  protected latestOutput: JsonDocumentLike | undefined;\n  protected readonly options: DocumentCombinerOptions;\n  private readonly onDidRebuildEmitter = new PlatformEventEmitter<undefined>();\n  /** Event that emits to announce that the document has been rebuilt and the output has been updated */\n  // Need `onDidRebuildEmitter` to be instantiated before this line\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  readonly onDidRebuild = this.onDidRebuildEmitter.subscribe;\n\n  /**\n   * Create a DocumentCombiner instance\n   *\n   * @param baseDocument This is the first document that will be used when composing the output\n   * @param options Options used by this object when combining documents\n   */\n  protected constructor(baseDocument: JsonDocumentLike, options: DocumentCombinerOptions) {\n    // Setting baseDocument redundantly because TS doesn't understand that updateBaseDocument does it\n    this.baseDocument = baseDocument;\n    this.options = options;\n    this.updateBaseDocument(baseDocument);\n  }\n\n  /**\n   * Update the starting document for composition process\n   *\n   * @param baseDocument Base JSON document/JS object that all other documents are added to\n   * @returns Recalculated output document given the new starting state and existing other documents\n   */\n  updateBaseDocument(baseDocument: JsonDocumentLike): JsonDocumentLike | undefined {\n    this.validateBaseDocument(baseDocument);\n    this.baseDocument = this.options.copyDocuments ? deepClone(baseDocument) : baseDocument;\n    this.baseDocument = this.transformBaseDocumentAfterValidation(this.baseDocument);\n    return this.rebuild();\n  }\n\n  /**\n   * Add or update one of the contribution documents for the composition process\n   *\n   * Note: the order in which contribution documents are added can be considered indeterminate as it\n   * depends on the order in which `Map.forEach` iterates over the contributions. However, the order\n   * matters when merging two arrays into one. Also, when `options.ignoreDuplicateProperties` is is\n   * `true`, the order also matters when adding the same property to an object that is already\n   * provided previously. Please let us know if you have trouble because of indeterminate\n   * contribution ordering.\n   *\n   * @param documentName Name of the contributed document to combine\n   * @param document Content of the contributed document to combine\n   * @returns Recalculated output document given the new or updated contribution and existing other\n   *   documents\n   */\n  addOrUpdateContribution(\n    documentName: string,\n    document: JsonDocumentLike,\n  ): JsonDocumentLike | undefined {\n    this.validateContribution(documentName, document);\n    const previousDocumentVersion = this.contributions.get(documentName);\n    let documentToSet = this.options.copyDocuments && !!document ? deepClone(document) : document;\n    documentToSet = this.transformContributionAfterValidation(documentName, documentToSet);\n    this.contributions.set(documentName, documentToSet);\n    try {\n      return this.rebuild();\n    } catch (error) {\n      // If the output isn't valid after adding/updating the contribution, put it back how it was\n      if (previousDocumentVersion) this.contributions.set(documentName, previousDocumentVersion);\n      else this.contributions.delete(documentName);\n      throw new Error(`Error when setting the document named ${documentName}: ${error}`);\n    }\n  }\n\n  /**\n   * Delete one of the contribution documents for the composition process\n   *\n   * @param documentName Name of the contributed document to delete\n   * @returns Recalculated output document given the remaining other documents\n   */\n  deleteContribution(documentName: string): JsonDocumentLike | undefined {\n    const document = this.contributions.get(documentName);\n    if (!document) throw new Error(`${documentName} does not exist`);\n    this.contributions.delete(documentName);\n    try {\n      return this.rebuild();\n    } catch (error) {\n      // If the output isn't valid after deleting the contribution, put it back and rethrow\n      this.contributions.set(documentName, document);\n      throw new Error(`Error when deleting the document named ${documentName}: ${error}`);\n    }\n  }\n\n  /**\n   * Delete all present contribution documents for the composition process and return to the base\n   * document\n   *\n   * @returns Recalculated output document consisting only of the base document\n   */\n  deleteAllContributions(): JsonDocumentLike | undefined {\n    if (this.contributions.size <= 0) return this.latestOutput;\n\n    // Save out all contributions\n    const contributions = [...this.contributions.entries()];\n\n    // Delete all contributions\n    contributions.forEach(([contributionName]) => this.contributions.delete(contributionName));\n\n    // Rebuild with no contributions\n    try {\n      return this.rebuild();\n    } catch (error) {\n      // If the output isn't valid after deleting all contributions, put them back and rethrow\n      contributions.forEach(([contributionName, document]) =>\n        this.contributions.set(contributionName, document),\n      );\n      throw new Error(`Error when deleting all contributions: ${error}`);\n    }\n  }\n\n  /**\n   * Run the document composition process given the starting document and all contributions. Throws\n   * if the output document fails to validate properly.\n   *\n   * @returns Recalculated output document given the starting and contributed documents\n   */\n  rebuild(): JsonDocumentLike | undefined {\n    // The starting document is the output if there are no other contributions\n    if (this.contributions.size === 0) {\n      let potentialOutput = deepClone(this.baseDocument);\n      potentialOutput = this.transformFinalOutputBeforeValidation(potentialOutput);\n      this.validateOutput(potentialOutput);\n      this.latestOutput = potentialOutput;\n      this.onDidRebuildEmitter.emit(undefined);\n      return this.latestOutput;\n    }\n\n    // Compose the output by validating each document one at a time to pinpoint errors better\n    let outputIteration = this.baseDocument;\n    this.contributions.forEach((contribution: JsonDocumentLike) => {\n      outputIteration = mergeObjects(\n        outputIteration,\n        contribution,\n        this.options.ignoreDuplicateProperties,\n      );\n      this.validateOutput(outputIteration);\n    });\n    outputIteration = this.transformFinalOutputBeforeValidation(outputIteration);\n    this.validateOutput(outputIteration);\n    this.latestOutput = outputIteration;\n    this.onDidRebuildEmitter.emit(undefined);\n    return this.latestOutput;\n  }\n\n  /**\n   * Transform the starting document that is given to the combiner. This transformation occurs after\n   * validating the base document and before combining any contributions.\n   *\n   * WARNING: If you do not create the combiner with option `copyDocuments: true` or clone inside\n   * this method, this method will directly modify the `baseDocument` passed in.\n   *\n   * @param baseDocument Initial input document. Already validated via `validateBaseDocument`\n   * @returns Transformed base document\n   */\n  // We just don't need `this` here. This is basically a no-op function that is available to child\n  // classes to override\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this\n  protected transformBaseDocumentAfterValidation(baseDocument: JsonDocumentLike): JsonDocumentLike {\n    return baseDocument;\n  }\n\n  /**\n   * Transform the contributed document associated with `documentName`. This transformation occurs\n   * after validating the contributed document and before combining with other documents.\n   *\n   * WARNING: If you do not create the combiner with option `copyDocuments: true` or clone inside\n   * this method, this method will directly modify the contributed `document` passed in.\n   *\n   * @param documentName Name of the contributed document to combine\n   * @param document Content of the contributed document to combine. Already validated via\n   *   `validateContribution`\n   * @returns Transformed contributed document\n   */\n  // We just don't need `this` here. This is basically a no-op function that is available to child\n  // classes to override\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this\n  protected transformContributionAfterValidation(\n    // @ts-expect-error this parameter is unused but may be used in child classes\n    documentName: string,\n    document: JsonDocumentLike,\n  ): JsonDocumentLike {\n    return document;\n  }\n\n  /**\n   * Throw an error if the provided document is not a valid starting document.\n   *\n   * @param baseDocument Base JSON document/JS object that all other documents are added to\n   */\n  // no-op intended to be overridden by child classes. Can't be static\n  // @ts-expect-error ts(6133) parameter doesn't need to be used but still needs the right name\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this, @typescript-eslint/no-unused-vars\n  protected validateBaseDocument(baseDocument: JsonDocumentLike): void {}\n\n  /**\n   * Throw an error if the provided document is not a valid contribution document.\n   *\n   * @param documentName Name of the contributed document to combine\n   * @param document Content of the contributed document to combine\n   */\n  // no-op intended to be overridden by child classes. Can't be static\n  // @ts-expect-error ts(6133) parameter doesn't need to be used but still needs the right name\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this, @typescript-eslint/no-unused-vars\n  protected validateContribution(documentName: string, document: JsonDocumentLike): void {}\n\n  /**\n   * Throw an error if the provided output is not valid.\n   *\n   * @param output Output document that could potentially be returned to callers\n   */\n  // no-op intended to be overridden by child classes. Can't be static\n  // @ts-expect-error ts(6133) parameter doesn't need to be used but still needs the right name\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this, @typescript-eslint/no-unused-vars\n  protected validateOutput(output: JsonDocumentLike): void {}\n\n  /**\n   * Transform the document that is the composition of the base document and all contribution\n   * documents. This is the last step that will be run prior to validation via `validateOutput`\n   * before `this.latestOutput` is updated to the new output.\n   *\n   * @param finalOutput Final output document that could potentially be returned to callers. \"Final\"\n   *   means no further contribution documents will be merged.\n   */\n  // no-op intended to be overridden by child classes. Can't be static\n  // eslint-disable-next-line @typescript-eslint/class-methods-use-this\n  protected transformFinalOutputBeforeValidation(finalOutput: JsonDocumentLike): JsonDocumentLike {\n    return finalOutput;\n  }\n}\n\n// #region Helper functions\n\n/**\n * Determines if the input values are objects but not arrays\n *\n * @param values Objects to check\n * @returns True if all the values are objects but not arrays\n */\nfunction areNonArrayObjects(...values: unknown[]): boolean {\n  let allMatch = true;\n  values.forEach((value: unknown) => {\n    if (!value || typeof value !== 'object' || Array.isArray(value)) allMatch = false;\n  });\n  return allMatch;\n}\n\n/**\n * Determines if the input values are arrays\n *\n * @param value Objects to check\n * @returns True if the values are arrays\n */\nfunction areArrayObjects(...values: unknown[]): boolean {\n  let allMatch = true;\n  values.forEach((value: unknown) => {\n    if (!value || typeof value !== 'object' || !Array.isArray(value)) allMatch = false;\n  });\n  return allMatch;\n}\n\n/**\n * Deep clone and recursively merge the properties of one object (copyFrom) into another\n * (startingPoint). Throws if copyFrom would overwrite values already existing in startingPoint.\n *\n * Does not modify the objects passed in.\n *\n * @param startingPoint Object that is the starting point for the return value\n * @param copyFrom Object whose values are copied into the return value\n * @param ignoreDuplicateProperties Whether to ignore object properties that are present in\n *   `copyFrom` that are already present in `startingPoint`. If `false`, throws when an object\n *   property in `copyFrom` is already present in `startingPoint`\n * @returns Object that is the combination of the two documents\n */\nfunction mergeObjects(\n  startingPoint: JsonDocumentLike,\n  copyFrom: JsonDocumentLike,\n  ignoreDuplicateProperties: boolean,\n): JsonDocumentLike {\n  const retVal = deepClone(startingPoint);\n\n  if (!copyFrom) return retVal;\n\n  return mergeObjectsInternal(retVal, deepClone(copyFrom), ignoreDuplicateProperties);\n}\n\n/**\n * Recursively merge the properties of one object (copyFrom) into another (startingPoint). Throws if\n * copyFrom would overwrite values already existing in startingPoint.\n *\n * WARNING: Modifies the argument objects in some way. Recommended to use `mergeObjects`\n *\n * @param startingPoint Object that is the starting point for the return value\n * @param copyFrom Object whose values are copied into the return value\n * @param ignoreDuplicateProperties Whether to ignore object properties that are present in\n *   `copyFrom` that are already present in `startingPoint`. If `false`, throws when an object\n *   property in `copyFrom` is already present in `startingPoint`\n * @returns Object that is the combination of the two documents\n */\nfunction mergeObjectsInternal(\n  startingPoint: JsonDocumentLike,\n  copyFrom: JsonDocumentLike,\n  ignoreDuplicateProperties: boolean,\n): JsonDocumentLike {\n  if (!copyFrom) return startingPoint;\n\n  if (areNonArrayObjects(startingPoint, copyFrom)) {\n    // Merge properties since they are both objects\n\n    // We know these are objects from the `if` check\n    /* eslint-disable no-type-assertion/no-type-assertion */\n    const startingPointObj = startingPoint as JsonObjectLike;\n    const copyFromObj = copyFrom as JsonObjectLike;\n    /* eslint-enable no-type-assertion/no-type-assertion */\n    Object.keys(copyFromObj).forEach((key: string | number) => {\n      if (Object.hasOwn(startingPointObj, key)) {\n        if (areNonArrayObjects(startingPointObj[key], copyFromObj[key])) {\n          startingPointObj[key] = mergeObjectsInternal(\n            // We know these are objects from the `if` check\n            /* eslint-disable no-type-assertion/no-type-assertion */\n            startingPointObj[key] as JsonObjectLike,\n            copyFromObj[key] as JsonObjectLike,\n            ignoreDuplicateProperties,\n            /* eslint-enable no-type-assertion/no-type-assertion */\n          );\n        } else if (areArrayObjects(startingPointObj[key], copyFromObj[key])) {\n          // Concat the arrays since they are both arrays\n\n          // We know these are arrays from the `else if` check\n          /* eslint-disable no-type-assertion/no-type-assertion */\n          startingPointObj[key] = (startingPointObj[key] as JsonArrayLike).concat(\n            copyFromObj[key] as JsonArrayLike,\n          );\n          /* eslint-enable no-type-assertion/no-type-assertion */\n        } else if (!ignoreDuplicateProperties)\n          throw new Error(`Cannot merge objects: key \"${key}\" already exists in the target object`);\n        // Note that the first non-object non-array value that gets placed in a property stays.\n        // New values do not override existing ones\n      } else {\n        startingPointObj[key] = copyFromObj[key];\n      }\n    });\n  } else if (areArrayObjects(startingPoint, copyFrom)) {\n    // Concat the arrays since they are both arrays\n\n    // Push the contents of copyFrom into startingPoint since it is a const and was already deep cloned\n    // We know these are objects from the `else if` check\n    /* eslint-disable no-type-assertion/no-type-assertion */\n    (startingPoint as JsonArrayLike).push(...(copyFrom as JsonArrayLike));\n    /* eslint-enable no-type-assertion/no-type-assertion */\n  }\n\n  // Note that nothing happens if `startingPoint` is not an object or an array or if `startingPoint`\n  // and `copyFrom` are not both object or both arrays. Should we throw? Should we push `copyFrom`'s\n  // values into the array? Other? Maybe one day we can add some options to decide what to do in\n  // this situation, but YAGNI for now\n\n  return startingPoint;\n}\n\n// #endregion\n","import { Mutex as AsyncMutex } from 'async-mutex';\n\n// Extending Mutex from async-mutex so we can add JSDoc\n\n/**\n * Class that allows calling asynchronous functions multiple times at once while only running one at\n * a time.\n *\n * @example\n *\n * ```typescript\n * const mutex = new Mutex();\n *\n * mutex.runExclusive(async () => {\n *   // Do some asynchronous stuff\n *   console.log('These run one-at-a-time');\n * });\n *\n * mutex.runExclusive(async () => {\n *   // Do some asynchronous stuff\n *   console.log('These run one-at-a-time');\n * });\n * ```\n *\n * See [`async-mutex`](https://www.npmjs.com/package/async-mutex) for more information.\n */\nclass Mutex extends AsyncMutex {}\n\nexport default Mutex;\n","import Mutex from './mutex';\n\n/** Map of {@link Mutex}es that automatically (lazily) generates a new {@link Mutex} for any new key */\nclass MutexMap {\n  private mutexesByID = new Map<string, Mutex>();\n\n  get(mutexID: string): Mutex {\n    let retVal = this.mutexesByID.get(mutexID);\n    if (retVal) return retVal;\n\n    retVal = new Mutex();\n    this.mutexesByID.set(mutexID, retVal);\n    return retVal;\n  }\n}\n\nexport default MutexMap;\n","import DocumentCombiner, { DocumentCombinerOptions, JsonDocumentLike } from './document-combiner';\n\nexport default class NonValidatingDocumentCombiner extends DocumentCombiner {\n  // Making the protected base constructor public\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(baseDocument: JsonDocumentLike, options: DocumentCombinerOptions) {\n    super(baseDocument, options);\n  }\n\n  get output(): JsonDocumentLike | undefined {\n    return this.latestOutput;\n  }\n}\n","/** Enables language-sensitive number formatting. Wraps Intl.NumberFormat */\nexport default class NumberFormat {\n  private numberFormatter: Intl.NumberFormat;\n\n  constructor(locales?: string | string[], options?: Intl.NumberFormatOptions) {\n    this.numberFormatter = new Intl.NumberFormat(locales, options);\n  }\n\n  /**\n   * Formats a number according to the locale and formatting options of this NumberFormat object\n   *\n   * @param value Number or BigInt to format\n   * @returns String representing the given number formatted according to the locale and formatting\n   *   options of this NumberFormat object\n   */\n  format(value: number | bigint): string {\n    return this.numberFormatter.format(value);\n  }\n\n  /**\n   * Formats a range of numbers according to the locale and formatting options of this NumberFormat\n   * object\n   *\n   * @param startRange Number or bigint representing the start of the range\n   * @param endRange Number or bigint representing the end of the range\n   * @returns String representing the given range of numbers formatted according to the locale and\n   *   formatting options of this NumberFormat object\n   */\n  formatRange(startRange: number | bigint, endRange: number | bigint): string {\n    return this.numberFormatter.formatRange(startRange, endRange);\n  }\n\n  /**\n   * Returns an array of objects containing the locale-specific tokens from which it is possible to\n   * build custom strings while preserving the locale-specific parts.\n   *\n   * @param startRange Number or bigint representing start of the range\n   * @param endRange Number or bigint representing end of the range\n   * @returns Array of NumberRangeFormatPart objects containing the formatted range of numbers in\n   *   parts\n   */\n  formatRangeToParts(\n    startRange: number | bigint,\n    endRange: number | bigint,\n  ): Intl.NumberRangeFormatPart[] {\n    return this.numberFormatter.formatRangeToParts(startRange, endRange);\n  }\n\n  /**\n   * Allows locale-aware formatting of strings produced by this NumberFormat object\n   *\n   * @param value Number or bigint to format\n   * @returns Array of NumberFormatPart objects containing the formatted number in parts\n   */\n  formatToParts(value: number | bigint): Intl.NumberFormatPart[] {\n    return this.numberFormatter.formatToParts(value);\n  }\n\n  /**\n   * Returns a new object with properties reflecting the locale and number formatting options\n   * computed during initialization of this NumberFormat object\n   *\n   * @returns ResolvedNumberFormatOptions object\n   */\n  resolvedOptions(): Intl.ResolvedNumberFormatOptions {\n    return this.numberFormatter.resolvedOptions();\n  }\n}\n","const defaultPromise = Promise.resolve();\n\n/**\n * Class that allows you to chain promises for a given key. This is useful when:\n *\n * 1. You need to run promises from synchronous code and don't need to look at the results.\n * 2. The promises to run, or at least precisely when to run them, are not known in advance.\n * 3. The promises need to be run sequentially, waiting for the previous one to finish.\n *\n * An example of when this can be helpful is inside of React components. Component code is mostly\n * synchronous, but you may need to run some asynchronous code. You can't use `await` inside of\n * React component code in many situations, so you can use this class to chain promises together.\n *\n * When promises are added to the map with a key, they will run in the order they were added to the\n * map for that key. If a promise rejects, a warning will be logged and the chain will continue. If\n * a promise is added while another promise in the map for that key is running, the new promise will\n * be chained to the existing one.\n */\nexport default class PromiseChainingMap<TKey = string> {\n  private readonly map = new Map<TKey, Promise<unknown>>();\n  private readonly logger: { warn: (message: string) => void };\n\n  /**\n   * Creates a new PromiseChainingMap\n   *\n   * @param logger Object with a `warn` method that will be called when a promise rejects. This\n   *   defaults to `console`.\n   */\n  constructor(logger: { warn: (message: string) => void } = console) {\n    this.logger = logger;\n  }\n\n  /**\n   * Adds a promise function to the map for a given key. If a promise is already running for the\n   * key, the new promise will be chained to the existing one. Once all promises for a key have\n   * settled, the map will be cleared for that key.\n   *\n   * @param key Unique key to identify a distinct promise chain\n   * @param promiseFunction Function that returns a promise to add to the chain\n   */\n  addPromiseFunction(key: TKey, promiseFunction: () => Promise<unknown>): void {\n    const currentPromise = this.map.get(key);\n    this.map.set(key, currentPromise ? currentPromise.then(promiseFunction) : promiseFunction());\n    this.cleanupPromiseChain(key);\n  }\n\n  /**\n   * Gets the current promise chain for the given key. This is mostly useful for testing. Normally\n   * you should just call {@link addPromiseFunction} and let the map handle the rest.\n   *\n   * @param key Unique key to identify a distinct promise chain\n   * @returns The current promise chain for the key\n   */\n  get(key: TKey): Promise<unknown> | undefined {\n    return this.map.get(key);\n  }\n\n  /**\n   * Configures a promise chain to be removed from the map for the given key after all the promises\n   * have settled\n   *\n   * @param key Unique key to identify a distinct promise chain\n   */\n  private cleanupPromiseChain(key: TKey): void {\n    const currentPromise = this.map.get(key);\n    if (!currentPromise) return;\n\n    const promiseHolder: { promise: Promise<unknown> } = { promise: defaultPromise };\n    const newPromise = currentPromise\n      .catch((e) => this.logger.warn(`Error in promise for ${key}: ${e.message}`))\n      .finally(() => {\n        if (this.map.get(key) === promiseHolder.promise) this.map.delete(key);\n      });\n    promiseHolder.promise = newPromise;\n    this.map.set(key, newPromise);\n  }\n}\n","import { Dispose } from './disposal.model';\nimport { Unsubscriber, UnsubscriberAsync } from './unsubscriber';\n\n/** Simple collection for UnsubscriberAsync objects that also provides an easy way to run them. */\nexport default class UnsubscriberAsyncList {\n  readonly unsubscribers = new Set<UnsubscriberAsync | Unsubscriber>();\n\n  constructor(private name = 'Anonymous') {}\n\n  /**\n   * Add unsubscribers to the list. Note that duplicates are not added twice.\n   *\n   * @param unsubscribers - Objects that were returned from a registration process.\n   */\n  add(...unsubscribers: (UnsubscriberAsync | Unsubscriber | Dispose)[]) {\n    unsubscribers.forEach((unsubscriber) => {\n      if ('dispose' in unsubscriber)\n        this.unsubscribers.add(unsubscriber.dispose.bind(unsubscriber));\n      else this.unsubscribers.add(unsubscriber);\n    });\n  }\n\n  /**\n   * Run all unsubscribers added to this list and then clear the list.\n   *\n   * @returns `true` if all unsubscribers succeeded, `false` otherwise.\n   */\n  async runAllUnsubscribers(): Promise<boolean> {\n    const unsubs = [...this.unsubscribers].map((unsubscriber) => unsubscriber());\n    const results = await Promise.all(unsubs);\n    this.unsubscribers.clear();\n    return results.every((unsubscriberSucceeded, index) => {\n      if (!unsubscriberSucceeded)\n        console.error(`UnsubscriberAsyncList ${this.name}: Unsubscriber at index ${index} failed!`);\n\n      return unsubscriberSucceeded;\n    });\n  }\n}\n","import { isString } from './util';\n\nexport const PLATFORM_ERROR_VERSION = 1;\n\n/**\n * PlatformError is an error type with stronger typing of properties than {@link Error}. It is used\n * to represent errors that are returned by the platform.\n *\n * You can create a new PlatformError object using {@link newPlatformError}. You can check if a value\n * is a PlatformError object using {@link isPlatformError}.\n */\nexport type PlatformError = {\n  /**\n   * The underlying cause of the error, if any. Normally this will be copied from an {@link Error}\n   * object passed to {@link newPlatformError}. If a non-Error object is passed to\n   * {@link newPlatformError}, it will be stored here.\n   */\n  cause?: unknown;\n  /**\n   * A descriptive message explaining the error. Normally this will be copied from an {@link Error}\n   * object passed to {@link newPlatformError}. If a string is passed to {@link newPlatformError}, it\n   * will be stored here.\n   */\n  message: string;\n  /** The version of the PlatformError type. */\n  platformErrorVersion: number;\n  /**\n   * The stack trace of the error, if available. Normally this will be copied from an {@link Error}\n   * object passed to {@link newPlatformError}.\n   */\n  stack?: string;\n};\n\n/**\n * Creates a new PlatformError object. If no argument is provided, a PlatformError object with an\n * empty `message` is returned.\n *\n * @param error The error message as a string, an Error object, or a value to assign to the `cause`\n *   property of the returned PlatformError object\n * @returns A new PlatformError object\n */\nexport function newPlatformError(error?: unknown): PlatformError {\n  if (!error) return { message: '', platformErrorVersion: PLATFORM_ERROR_VERSION };\n  if (isString(error)) return { message: error, platformErrorVersion: PLATFORM_ERROR_VERSION };\n  if (typeof error === 'object' && 'message' in error && typeof error.message === 'string') {\n    const platformError: PlatformError = {\n      message: error.message,\n      platformErrorVersion: PLATFORM_ERROR_VERSION,\n    };\n    return Object.defineProperties(platformError, Object.getOwnPropertyDescriptors(error));\n  }\n  return { cause: error, message: '', platformErrorVersion: PLATFORM_ERROR_VERSION };\n}\n\n/**\n * Checks if the provided value is a PlatformError object.\n *\n * @param error The value to check\n * @returns `true` if the value is a PlatformError object, otherwise `false`\n */\nexport function isPlatformError(error: unknown): error is PlatformError {\n  return !!error && typeof error === 'object' && 'platformErrorVersion' in error;\n}\n","var P = Object.defineProperty;\nvar R = (t, e, s) => e in t ? P(t, e, { enumerable: !0, configurable: !0, writable: !0, value: s }) : t[e] = s;\nvar n = (t, e, s) => R(t, typeof e != \"symbol\" ? e + \"\" : e, s);\nclass _ {\n  constructor() {\n    n(this, \"books\");\n    n(this, \"firstSelectedBookNum\");\n    n(this, \"lastSelectedBookNum\");\n    n(this, \"count\");\n    n(this, \"selectedBookNumbers\");\n    n(this, \"selectedBookIds\");\n  }\n}\nconst N = [\n  \"GEN\",\n  \"EXO\",\n  \"LEV\",\n  \"NUM\",\n  \"DEU\",\n  \"JOS\",\n  \"JDG\",\n  \"RUT\",\n  \"1SA\",\n  \"2SA\",\n  // 10\n  \"1KI\",\n  \"2KI\",\n  \"1CH\",\n  \"2CH\",\n  \"EZR\",\n  \"NEH\",\n  \"EST\",\n  \"JOB\",\n  \"PSA\",\n  \"PRO\",\n  // 20\n  \"ECC\",\n  \"SNG\",\n  \"ISA\",\n  \"JER\",\n  \"LAM\",\n  \"EZK\",\n  \"DAN\",\n  \"HOS\",\n  \"JOL\",\n  \"AMO\",\n  // 30\n  \"OBA\",\n  \"JON\",\n  \"MIC\",\n  \"NAM\",\n  \"HAB\",\n  \"ZEP\",\n  \"HAG\",\n  \"ZEC\",\n  \"MAL\",\n  \"MAT\",\n  // 40\n  \"MRK\",\n  \"LUK\",\n  \"JHN\",\n  \"ACT\",\n  \"ROM\",\n  \"1CO\",\n  \"2CO\",\n  \"GAL\",\n  \"EPH\",\n  \"PHP\",\n  // 50\n  \"COL\",\n  \"1TH\",\n  \"2TH\",\n  \"1TI\",\n  \"2TI\",\n  \"TIT\",\n  \"PHM\",\n  \"HEB\",\n  \"JAS\",\n  \"1PE\",\n  // 60\n  \"2PE\",\n  \"1JN\",\n  \"2JN\",\n  \"3JN\",\n  \"JUD\",\n  \"REV\",\n  \"TOB\",\n  \"JDT\",\n  \"ESG\",\n  \"WIS\",\n  // 70\n  \"SIR\",\n  \"BAR\",\n  \"LJE\",\n  \"S3Y\",\n  \"SUS\",\n  \"BEL\",\n  \"1MA\",\n  \"2MA\",\n  \"3MA\",\n  \"4MA\",\n  // 80\n  \"1ES\",\n  \"2ES\",\n  \"MAN\",\n  \"PS2\",\n  \"ODA\",\n  \"PSS\",\n  \"JSA\",\n  // actual variant text for JOS, now in LXA text\n  \"JDB\",\n  // actual variant text for JDG, now in LXA text\n  \"TBS\",\n  // actual variant text for TOB, now in LXA text\n  \"SST\",\n  // actual variant text for SUS, now in LXA text // 90\n  \"DNT\",\n  // actual variant text for DAN, now in LXA text\n  \"BLT\",\n  // actual variant text for BEL, now in LXA text\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\",\n  \"FRT\",\n  // 100\n  \"BAK\",\n  \"OTH\",\n  \"3ES\",\n  // Used previously but really should be 2ES\n  \"EZA\",\n  // Used to be called 4ES, but not actually in any known project\n  \"5EZ\",\n  // Used to be called 5ES, but not actually in any known project\n  \"6EZ\",\n  // Used to be called 6ES, but not actually in any known project\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  // 110\n  \"NDX\",\n  \"DAG\",\n  \"PS3\",\n  \"2BA\",\n  \"LBA\",\n  \"JUB\",\n  \"ENO\",\n  \"1MQ\",\n  \"2MQ\",\n  \"3MQ\",\n  // 120\n  \"REP\",\n  \"4BA\",\n  \"LAO\"\n], B = [\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\",\n  \"FRT\",\n  \"BAK\",\n  \"OTH\",\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  \"NDX\"\n], O = [\n  \"Genesis\",\n  \"Exodus\",\n  \"Leviticus\",\n  \"Numbers\",\n  \"Deuteronomy\",\n  \"Joshua\",\n  \"Judges\",\n  \"Ruth\",\n  \"1 Samuel\",\n  \"2 Samuel\",\n  \"1 Kings\",\n  \"2 Kings\",\n  \"1 Chronicles\",\n  \"2 Chronicles\",\n  \"Ezra\",\n  \"Nehemiah\",\n  \"Esther (Hebrew)\",\n  \"Job\",\n  \"Psalms\",\n  \"Proverbs\",\n  \"Ecclesiastes\",\n  \"Song of Songs\",\n  \"Isaiah\",\n  \"Jeremiah\",\n  \"Lamentations\",\n  \"Ezekiel\",\n  \"Daniel (Hebrew)\",\n  \"Hosea\",\n  \"Joel\",\n  \"Amos\",\n  \"Obadiah\",\n  \"Jonah\",\n  \"Micah\",\n  \"Nahum\",\n  \"Habakkuk\",\n  \"Zephaniah\",\n  \"Haggai\",\n  \"Zechariah\",\n  \"Malachi\",\n  \"Matthew\",\n  \"Mark\",\n  \"Luke\",\n  \"John\",\n  \"Acts\",\n  \"Romans\",\n  \"1 Corinthians\",\n  \"2 Corinthians\",\n  \"Galatians\",\n  \"Ephesians\",\n  \"Philippians\",\n  \"Colossians\",\n  \"1 Thessalonians\",\n  \"2 Thessalonians\",\n  \"1 Timothy\",\n  \"2 Timothy\",\n  \"Titus\",\n  \"Philemon\",\n  \"Hebrews\",\n  \"James\",\n  \"1 Peter\",\n  \"2 Peter\",\n  \"1 John\",\n  \"2 John\",\n  \"3 John\",\n  \"Jude\",\n  \"Revelation\",\n  \"Tobit\",\n  \"Judith\",\n  \"Esther Greek\",\n  \"Wisdom of Solomon\",\n  \"Sirach (Ecclesiasticus)\",\n  \"Baruch\",\n  \"Letter of Jeremiah\",\n  \"Song of 3 Young Men\",\n  \"Susanna\",\n  \"Bel and the Dragon\",\n  \"1 Maccabees\",\n  \"2 Maccabees\",\n  \"3 Maccabees\",\n  \"4 Maccabees\",\n  \"1 Esdras (Greek)\",\n  \"2 Esdras (Latin)\",\n  \"Prayer of Manasseh\",\n  \"Psalm 151\",\n  \"Odes\",\n  \"Psalms of Solomon\",\n  // WARNING, if you change the spelling of the *obsolete* tag be sure to update\n  // IsObsolete routine\n  \"Joshua A. *obsolete*\",\n  \"Judges B. *obsolete*\",\n  \"Tobit S. *obsolete*\",\n  \"Susanna Th. *obsolete*\",\n  \"Daniel Th. *obsolete*\",\n  \"Bel Th. *obsolete*\",\n  \"Extra A\",\n  \"Extra B\",\n  \"Extra C\",\n  \"Extra D\",\n  \"Extra E\",\n  \"Extra F\",\n  \"Extra G\",\n  \"Front Matter\",\n  \"Back Matter\",\n  \"Other Matter\",\n  \"3 Ezra *obsolete*\",\n  \"Apocalypse of Ezra\",\n  \"5 Ezra (Latin Prologue)\",\n  \"6 Ezra (Latin Epilogue)\",\n  \"Introduction\",\n  \"Concordance \",\n  \"Glossary \",\n  \"Topical Index\",\n  \"Names Index\",\n  \"Daniel Greek\",\n  \"Psalms 152-155\",\n  \"2 Baruch (Apocalypse)\",\n  \"Letter of Baruch\",\n  \"Jubilees\",\n  \"Enoch\",\n  \"1 Meqabyan\",\n  \"2 Meqabyan\",\n  \"3 Meqabyan\",\n  \"Reproof (Proverbs 25-31)\",\n  \"4 Baruch (Rest of Baruch)\",\n  \"Laodiceans\"\n], S = K();\nfunction g(t, e = !0) {\n  return e && (t = t.toUpperCase()), t in S ? S[t] : 0;\n}\nfunction k(t) {\n  return g(t) > 0;\n}\nfunction x(t) {\n  const e = typeof t == \"string\" ? g(t) : t;\n  return e >= 40 && e <= 66;\n}\nfunction T(t) {\n  return (typeof t == \"string\" ? g(t) : t) <= 39;\n}\nfunction X(t) {\n  return t <= 66;\n}\nfunction V(t) {\n  const e = typeof t == \"string\" ? g(t) : t;\n  return w(e) && !X(e);\n}\nfunction* L() {\n  for (let t = 1; t <= N.length; t++) yield t;\n}\nconst G = 1, A = N.length;\nfunction H() {\n  return [\"XXA\", \"XXB\", \"XXC\", \"XXD\", \"XXE\", \"XXF\", \"XXG\"];\n}\nfunction C(t, e = \"***\") {\n  const s = t - 1;\n  return s < 0 || s >= N.length ? e : N[s];\n}\nfunction I(t) {\n  return t <= 0 || t > A ? \"******\" : O[t - 1];\n}\nfunction y(t) {\n  return I(g(t));\n}\nfunction w(t) {\n  const e = typeof t == \"number\" ? C(t) : t;\n  return k(e) && !B.includes(e);\n}\nfunction q(t) {\n  const e = typeof t == \"number\" ? C(t) : t;\n  return k(e) && B.includes(e);\n}\nfunction U(t) {\n  return O[t - 1].includes(\"*obsolete*\");\n}\nfunction K() {\n  const t = {};\n  for (let e = 0; e < N.length; e++)\n    t[N[e]] = e + 1;\n  return t;\n}\nconst m = {\n  allBookIds: N,\n  nonCanonicalIds: B,\n  bookIdToNumber: g,\n  isBookIdValid: k,\n  isBookNT: x,\n  isBookOT: T,\n  isBookOTNT: X,\n  isBookDC: V,\n  allBookNumbers: L,\n  firstBook: G,\n  lastBook: A,\n  extraBooks: H,\n  bookNumberToId: C,\n  bookNumberToEnglishName: I,\n  bookIdToEnglishName: y,\n  isCanonical: w,\n  isExtraMaterial: q,\n  isObsolete: U\n};\nvar l = /* @__PURE__ */ ((t) => (t[t.Unknown = 0] = \"Unknown\", t[t.Original = 1] = \"Original\", t[t.Septuagint = 2] = \"Septuagint\", t[t.Vulgate = 3] = \"Vulgate\", t[t.English = 4] = \"English\", t[t.RussianProtestant = 5] = \"RussianProtestant\", t[t.RussianOrthodox = 6] = \"RussianOrthodox\", t))(l || {});\nconst h = class h {\n  // private versInfo: Versification;\n  constructor(e) {\n    n(this, \"name\");\n    n(this, \"fullPath\");\n    n(this, \"isPresent\");\n    n(this, \"hasVerseSegments\");\n    n(this, \"isCustomized\");\n    n(this, \"baseVersification\");\n    n(this, \"scriptureBooks\");\n    n(this, \"_type\");\n    if (e == null)\n      throw new Error(\"Argument undefined\");\n    typeof e == \"string\" ? (this.name = e, this._type = l[e]) : (this._type = e, this.name = l[e]);\n  }\n  get type() {\n    return this._type;\n  }\n  equals(e) {\n    return !e.type || !this.type ? !1 : e.type === this.type;\n  }\n};\nn(h, \"Original\", new h(l.Original)), n(h, \"Septuagint\", new h(l.Septuagint)), n(h, \"Vulgate\", new h(l.Vulgate)), n(h, \"English\", new h(l.English)), n(h, \"RussianProtestant\", new h(l.RussianProtestant)), n(h, \"RussianOrthodox\", new h(l.RussianOrthodox));\nlet c = h;\nfunction E(t, e) {\n  const s = e[0];\n  for (let r = 1; r < e.length; r++)\n    t = t.split(e[r]).join(s);\n  return t.split(s);\n}\nvar D = /* @__PURE__ */ ((t) => (t[t.Valid = 0] = \"Valid\", t[t.UnknownVersification = 1] = \"UnknownVersification\", t[t.OutOfRange = 2] = \"OutOfRange\", t[t.VerseOutOfOrder = 3] = \"VerseOutOfOrder\", t[t.VerseRepeated = 4] = \"VerseRepeated\", t))(D || {});\nconst i = class i {\n  constructor(e, s, r, a) {\n    /** Not yet implemented. */\n    n(this, \"firstChapter\");\n    /** Not yet implemented. */\n    n(this, \"lastChapter\");\n    /** Not yet implemented. */\n    n(this, \"lastVerse\");\n    /** Not yet implemented. */\n    n(this, \"hasSegmentsDefined\");\n    /** Not yet implemented. */\n    n(this, \"text\");\n    /** Not yet implemented. */\n    n(this, \"BBBCCCVVVS\");\n    /** Not yet implemented. */\n    n(this, \"longHashCode\");\n    /** The versification of the reference. */\n    n(this, \"versification\");\n    n(this, \"rtlMark\", \"\");\n    n(this, \"_bookNum\", 0);\n    n(this, \"_chapterNum\", 0);\n    n(this, \"_verseNum\", 0);\n    n(this, \"_verse\");\n    if (r == null && a == null)\n      if (e != null && typeof e == \"string\") {\n        const o = e, u = s != null && s instanceof c ? s : void 0;\n        this.setEmpty(u), this.parse(o);\n      } else if (e != null && typeof e == \"number\") {\n        const o = s != null && s instanceof c ? s : void 0;\n        this.setEmpty(o), this._verseNum = e % i.chapterDigitShifter, this._chapterNum = Math.floor(\n          e % i.bookDigitShifter / i.chapterDigitShifter\n        ), this._bookNum = Math.floor(e / i.bookDigitShifter);\n      } else if (s == null)\n        if (e != null && e instanceof i) {\n          const o = e;\n          this._bookNum = o.bookNum, this._chapterNum = o.chapterNum, this._verseNum = o.verseNum, this._verse = o.verse, this.versification = o.versification;\n        } else {\n          if (e == null) return;\n          const o = e instanceof c ? e : i.defaultVersification;\n          this.setEmpty(o);\n        }\n      else\n        throw new Error(\"VerseRef constructor not supported.\");\n    else if (e != null && s != null && r != null)\n      if (typeof e == \"string\" && typeof s == \"string\" && typeof r == \"string\")\n        this.setEmpty(a), this.updateInternal(e, s, r);\n      else if (typeof e == \"number\" && typeof s == \"number\" && typeof r == \"number\")\n        this._bookNum = e, this._chapterNum = s, this._verseNum = r, this.versification = a ?? i.defaultVersification;\n      else\n        throw new Error(\"VerseRef constructor not supported.\");\n    else\n      throw new Error(\"VerseRef constructor not supported.\");\n  }\n  /**\n   * Determines if the verse string is in a valid format (does not consider versification).\n   */\n  static isVerseParseable(e) {\n    return e.length > 0 && \"0123456789\".includes(e[0]) && !e.endsWith(this.verseRangeSeparator) && !e.endsWith(this.verseSequenceIndicator);\n  }\n  /**\n   * Tries to parse the specified string into a verse reference.\n   * @param str - The string to attempt to parse.\n   * @returns success: `true` if the specified string was successfully parsed, `false` otherwise.\n   * @returns verseRef: The result of the parse if successful, or empty VerseRef if it failed\n   */\n  static tryParse(e) {\n    let s;\n    try {\n      return s = new i(e), { success: !0, verseRef: s };\n    } catch (r) {\n      if (r instanceof v)\n        return s = new i(), { success: !1, verseRef: s };\n      throw r;\n    }\n  }\n  /**\n   * Gets the reference as a comparable integer where the book, chapter, and verse each occupy 3\n   * digits.\n   * @param bookNum - Book number (this is 1-based, not an index).\n   * @param chapterNum - Chapter number.\n   * @param verseNum - Verse number.\n   * @returns The reference as a comparable integer where the book, chapter, and verse each occupy 3\n   * digits.\n   */\n  static getBBBCCCVVV(e, s, r) {\n    return e % i.bcvMaxValue * i.bookDigitShifter + (s >= 0 ? s % i.bcvMaxValue * i.chapterDigitShifter : 0) + (r >= 0 ? r % i.bcvMaxValue : 0);\n  }\n  /**\n   * Deserializes a serialized VerseRef.\n   * @param serializedVerseRef - Serialized VerseRef to create from.\n   * @returns the deserialized VerseRef.\n   */\n  static fromJSON(e) {\n    const { book: s, chapterNum: r, verseNum: a, verse: o, versificationStr: u } = e, f = o || a.toString();\n    let d;\n    return u && (d = new c(u)), s ? new i(s, r.toString(), f, d) : new i();\n  }\n  /**\n   * Parses a verse string and gets the leading numeric portion as a number.\n   * @param verseStr - verse string to parse\n   * @returns true if the entire string could be parsed as a single, simple verse number (1-999);\n   *    false if the verse string represented a verse bridge, contained segment letters, or was invalid\n   */\n  static tryGetVerseNum(e) {\n    let s;\n    if (!e)\n      return s = -1, { success: !0, vNum: s };\n    s = 0;\n    let r;\n    for (let a = 0; a < e.length; a++) {\n      if (r = e[a], r < \"0\" || r > \"9\")\n        return a === 0 && (s = -1), { success: !1, vNum: s };\n      if (s = s * 10 + +r - 0, s > i.bcvMaxValue)\n        return s = -1, { success: !1, vNum: s };\n    }\n    return { success: !0, vNum: s };\n  }\n  /**\n   * Checks to see if a VerseRef hasn't been set - all values are the default.\n   */\n  get isDefault() {\n    return this.bookNum === 0 && this.chapterNum === 0 && this.verseNum === 0 && this.versification == null;\n  }\n  /**\n   * Gets whether the verse contains multiple verses.\n   */\n  get hasMultiple() {\n    return this._verse != null && (this._verse.includes(i.verseRangeSeparator) || this._verse.includes(i.verseSequenceIndicator));\n  }\n  /**\n   * Gets or sets the book of the reference. Book is the 3-letter abbreviation in capital letters,\n   * e.g. `'MAT'`.\n   */\n  get book() {\n    return m.bookNumberToId(this.bookNum, \"\");\n  }\n  set book(e) {\n    this.bookNum = m.bookIdToNumber(e);\n  }\n  /**\n   * Gets or sets the chapter of the reference,. e.g. `'3'`.\n   */\n  get chapter() {\n    return this.isDefault || this._chapterNum < 0 ? \"\" : this._chapterNum.toString();\n  }\n  set chapter(e) {\n    const s = +e;\n    this._chapterNum = Number.isInteger(s) ? s : -1;\n  }\n  /**\n   * Gets or sets the verse of the reference, including range, segments, and sequences, e.g. `'4'`,\n   * or `'4b-5a, 7'`.\n   */\n  get verse() {\n    return this._verse != null ? this._verse : this.isDefault || this._verseNum < 0 ? \"\" : this._verseNum.toString();\n  }\n  set verse(e) {\n    const { success: s, vNum: r } = i.tryGetVerseNum(e);\n    this._verse = s ? void 0 : e.replace(this.rtlMark, \"\"), this._verseNum = r, !(this._verseNum >= 0) && ({ vNum: this._verseNum } = i.tryGetVerseNum(this._verse));\n  }\n  /**\n   * Get or set Book based on book number, e.g. `42`.\n   */\n  get bookNum() {\n    return this._bookNum;\n  }\n  set bookNum(e) {\n    if (e <= 0 || e > m.lastBook)\n      throw new v(\n        \"BookNum must be greater than zero and less than or equal to last book\"\n      );\n    this._bookNum = e;\n  }\n  /**\n   * Gets or sets the chapter number, e.g. `3`. `-1` if not valid.\n   */\n  get chapterNum() {\n    return this._chapterNum;\n  }\n  set chapterNum(e) {\n    this.chapterNum = e;\n  }\n  /**\n   * Gets or sets verse start number, e.g. `4`. `-1` if not valid.\n   */\n  get verseNum() {\n    return this._verseNum;\n  }\n  set verseNum(e) {\n    this._verseNum = e;\n  }\n  /**\n   * String representing the versification (should ONLY be used for serialization/deserialization).\n   *\n   * @remarks This is for backwards compatibility when ScrVers was an enumeration.\n   */\n  get versificationStr() {\n    var e;\n    return (e = this.versification) == null ? void 0 : e.name;\n  }\n  set versificationStr(e) {\n    this.versification = this.versification != null ? new c(e) : void 0;\n  }\n  /**\n   * Determines if the reference is valid.\n   */\n  get valid() {\n    return this.validStatus === 0;\n  }\n  /**\n   * Get the valid status for this reference.\n   */\n  get validStatus() {\n    return this.validateVerse(i.verseRangeSeparators, i.verseSequenceIndicators);\n  }\n  /**\n   * Gets the reference as a comparable integer where the book,\n   * chapter, and verse each occupy three digits and the verse is 0.\n   */\n  get BBBCCC() {\n    return i.getBBBCCCVVV(this._bookNum, this._chapterNum, 0);\n  }\n  /**\n   * Gets the reference as a comparable integer where the book,\n   * chapter, and verse each occupy three digits. If verse is not null\n   * (i.e., this reference represents a complex reference with verse\n   * segments or bridge) this cannot be used for an exact comparison.\n   */\n  get BBBCCCVVV() {\n    return i.getBBBCCCVVV(this._bookNum, this._chapterNum, this._verseNum);\n  }\n  /**\n   * Gets whether the verse is defined as an excluded verse in the versification.\n   * Does not handle verse ranges.\n   */\n  // eslint-disable-next-line @typescript-eslint/class-literal-property-style\n  get isExcluded() {\n    return !1;\n  }\n  /**\n   * Parses the reference in the specified string.\n   * Optionally versification can follow reference as in GEN 3:11/4\n   * Throw an exception if\n   * - invalid book name\n   * - chapter number is missing or not a number\n   * - verse number is missing or does not start with a number\n   * - versification is invalid\n   * @param verseStr - string to parse e.g. 'MAT 3:11'\n   */\n  parse(e) {\n    if (e = e.replace(this.rtlMark, \"\"), e.includes(\"/\")) {\n      const o = e.split(\"/\");\n      if (e = o[0], o.length > 1)\n        try {\n          const u = +o[1].trim();\n          this.versification = new c(l[u]);\n        } catch {\n          throw new v(\"Invalid reference : \" + e);\n        }\n    }\n    const s = e.trim().split(\" \");\n    if (s.length !== 2)\n      throw new v(\"Invalid reference : \" + e);\n    const r = s[1].split(\":\"), a = +r[0];\n    if (r.length !== 2 || m.bookIdToNumber(s[0]) === 0 || !Number.isInteger(a) || a < 0 || !i.isVerseParseable(r[1]))\n      throw new v(\"Invalid reference : \" + e);\n    this.updateInternal(s[0], r[0], r[1]);\n  }\n  /**\n   * Simplifies this verse ref so that it has no bridging of verses or\n   * verse segments like `'1a'`.\n   */\n  simplify() {\n    this._verse = void 0;\n  }\n  /**\n   * Makes a clone of the reference.\n   *\n   * @returns The cloned VerseRef.\n   */\n  clone() {\n    return new i(this);\n  }\n  toString() {\n    const e = this.book;\n    return e === \"\" ? \"\" : `${e} ${this.chapter}:${this.verse}`;\n  }\n  toJSON() {\n    let e = this.verse;\n    (e === \"\" || e === this.verseNum.toString()) && (e = void 0);\n    const s = {\n      book: this.book,\n      chapterNum: this.chapterNum,\n      verseNum: this.verseNum,\n      verse: e,\n      versificationStr: this.versificationStr\n    };\n    return e || delete s.verse, s;\n  }\n  /**\n   * Compares this `VerseRef` with supplied one.\n   * @param verseRef - object to compare this one to.\n   * @returns `true` if this `VerseRef` is equal to the supplied one, `false` otherwise.\n   */\n  equals(e) {\n    return e instanceof i ? e._bookNum === this._bookNum && e._chapterNum === this._chapterNum && e._verseNum === this._verseNum && e.verse === this.verse && (e.versification == null && this.versification == null || e.versification != null && this.versification != null && e.versification.equals(this.versification)) : !1;\n  }\n  /**\n   * Enumerate all individual verses contained in a VerseRef.\n   * Verse ranges are indicated by \"-\" and consecutive verses by \",\"s.\n   * Examples:\n   * GEN 1:2 returns GEN 1:2\n   * GEN 1:1a-3b,5 returns GEN 1:1a, GEN 1:2, GEN 1:3b, GEN 1:5\n   * GEN 1:2a-2c returns //! ??????\n   *\n   * @param specifiedVersesOnly - if set to <c>true</c> return only verses that are\n   * explicitly specified only, not verses within a range. Defaults to `false`.\n   * @param verseRangeSeparators - Verse range separators.\n   * Defaults to `VerseRef.verseRangeSeparators`.\n   * @param verseSequenceSeparators - Verse sequence separators.\n   * Defaults to `VerseRef.verseSequenceIndicators`.\n   * @returns An array of all single verse references in this VerseRef.\n   */\n  allVerses(e = !1, s = i.verseRangeSeparators, r = i.verseSequenceIndicators) {\n    if (this._verse == null || this.chapterNum <= 0)\n      return [this.clone()];\n    const a = [], o = E(this._verse, r);\n    for (const u of o.map((f) => E(f, s))) {\n      const f = this.clone();\n      f.verse = u[0];\n      const d = f.verseNum;\n      if (a.push(f), u.length > 1) {\n        const b = this.clone();\n        if (b.verse = u[1], !e)\n          for (let p = d + 1; p < b.verseNum; p++) {\n            const J = new i(\n              this._bookNum,\n              this._chapterNum,\n              p,\n              this.versification\n            );\n            this.isExcluded || a.push(J);\n          }\n        a.push(b);\n      }\n    }\n    return a;\n  }\n  /**\n   * Validates a verse number using the supplied separators rather than the defaults.\n   */\n  validateVerse(e, s) {\n    if (!this.verse)\n      return this.internalValid;\n    let r = 0;\n    for (const a of this.allVerses(!0, e, s)) {\n      const o = a.internalValid;\n      if (o !== 0)\n        return o;\n      const u = a.BBBCCCVVV;\n      if (r > u)\n        return 3;\n      if (r === u)\n        return 4;\n      r = u;\n    }\n    return 0;\n  }\n  /**\n   * Gets whether a single verse reference is valid.\n   */\n  get internalValid() {\n    return this.versification == null ? 1 : this._bookNum <= 0 || this._bookNum > m.lastBook ? 2 : (m.isCanonical(this._bookNum), 0);\n  }\n  setEmpty(e = i.defaultVersification) {\n    this._bookNum = 0, this._chapterNum = -1, this._verse = void 0, this.versification = e;\n  }\n  updateInternal(e, s, r) {\n    this.bookNum = m.bookIdToNumber(e), this.chapter = s, this.verse = r;\n  }\n};\nn(i, \"defaultVersification\", c.English), n(i, \"verseRangeSeparator\", \"-\"), n(i, \"verseSequenceIndicator\", \",\"), n(i, \"verseRangeSeparators\", [i.verseRangeSeparator]), n(i, \"verseSequenceIndicators\", [i.verseSequenceIndicator]), n(i, \"chapterDigitShifter\", 1e3), n(i, \"bookDigitShifter\", i.chapterDigitShifter * i.chapterDigitShifter), n(i, \"bcvMaxValue\", i.chapterDigitShifter - 1), /**\n * The valid status of the VerseRef.\n */\nn(i, \"ValidStatusType\", D);\nlet M = i;\nclass v extends Error {\n}\nexport {\n  _ as BookSet,\n  m as Canon,\n  c as ScrVers,\n  l as ScrVersType,\n  M as VerseRef,\n  v as VerseRefException\n};\n//# sourceMappingURL=index.es.js.map\n","'use strict';\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties,\n * including NodeList.\n *\n * @param {T[] | { length: number; [number]: T }} list\n * @param {function (item: T, index: number, list:T[]):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac\n * Allows injecting a custom implementation in tests (`Array.prototype` by default).\n * @returns {T | undefined}\n * @template {unknown} T\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (hasOwn(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * If `Object.getOwnPropertyDescriptors` is available,\n * a new object with all properties of object but without any prototype is created and returned\n * after freezing it.\n *\n * @param {T} object\n * The object to freeze.\n * @param {Pick<ObjectConstructor, 'create' | 'freeze' | 'getOwnPropertyDescriptors'>} [oc=Object]\n * `Object` by default,\n * allows to inject custom object constructor for tests.\n * @returns {Readonly<T>}\n * @template {Object} T\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n * @prettierignore\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object;\n\t}\n\tif (oc && typeof oc.getOwnPropertyDescriptors === 'function') {\n\t\tobject = oc.create(null, oc.getOwnPropertyDescriptors(object));\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object;\n}\n\n/**\n * Implementation for `Object.hasOwn` but ES5 compatible.\n *\n * @param {any} object\n * @param {string | number} key\n * @returns {boolean}\n */\nfunction hasOwn(object, key) {\n\treturn Object.prototype.hasOwnProperty.call(object, key);\n}\n\n/**\n * Since xmldom can not rely on `Object.assign`,\n * it uses/provides a simplified version that is sufficient for its needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n * @returns {Object}\n * The target with the merged/overridden properties.\n * @throws {TypeError}\n * If target is not an object.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object');\n\t}\n\tfor (var key in source) {\n\t\tif (hasOwn(source, key)) {\n\t\t\ttarget[key] = source[key];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * A number of attributes are boolean attributes.\n * The presence of a boolean attribute on an element represents the `true` value,\n * and the absence of the attribute represents the `false` value.\n *\n * If the attribute is present, its value must either be the empty string, or a value that is\n * an ASCII case-insensitive match for the attribute's canonical name,\n * with no leading or trailing whitespace.\n *\n * Note: The values `\"true\"` and `\"false\"` are not allowed on boolean attributes.\n * To represent a `false` value, the attribute has to be omitted altogether.\n *\n * @see https://html.spec.whatwg.org/#boolean-attributes\n * @see https://html.spec.whatwg.org/#attributes-3\n */\nvar HTML_BOOLEAN_ATTRIBUTES = freeze({\n\tallowfullscreen: true,\n\tasync: true,\n\tautofocus: true,\n\tautoplay: true,\n\tchecked: true,\n\tcontrols: true,\n\tdefault: true,\n\tdefer: true,\n\tdisabled: true,\n\tformnovalidate: true,\n\thidden: true,\n\tismap: true,\n\titemscope: true,\n\tloop: true,\n\tmultiple: true,\n\tmuted: true,\n\tnomodule: true,\n\tnovalidate: true,\n\topen: true,\n\tplaysinline: true,\n\treadonly: true,\n\trequired: true,\n\treversed: true,\n\tselected: true,\n});\n\n/**\n * Check if `name` is matching one of the HTML boolean attribute names.\n * This method doesn't check if such attributes are allowed in the context of the current\n * document/parsing.\n *\n * @param {string} name\n * @returns {boolean}\n * @see {@link HTML_BOOLEAN_ATTRIBUTES}\n * @see https://html.spec.whatwg.org/#boolean-attributes\n * @see https://html.spec.whatwg.org/#attributes-3\n */\nfunction isHTMLBooleanAttribute(name) {\n\treturn hasOwn(HTML_BOOLEAN_ATTRIBUTES, name.toLowerCase());\n}\n\n/**\n * Void elements only have a start tag; end tags must not be specified for void elements.\n * These elements should be written as self-closing like this: `<area />`.\n * This should not be confused with optional tags that HTML allows to omit the end tag for\n * (like `li`, `tr` and others), which can have content after them,\n * so they can not be written as self-closing.\n * xmldom does not have any logic for optional end tags cases,\n * and will report them as a warning.\n * Content that would go into the unopened element,\n * will instead be added as a sibling text node.\n *\n * @type {Readonly<{\n * \tarea: boolean;\n * \tcol: boolean;\n * \timg: boolean;\n * \twbr: boolean;\n * \tlink: boolean;\n * \thr: boolean;\n * \tsource: boolean;\n * \tbr: boolean;\n * \tinput: boolean;\n * \tparam: boolean;\n * \tmeta: boolean;\n * \tembed: boolean;\n * \ttrack: boolean;\n * \tbase: boolean;\n * }>}\n * @see https://html.spec.whatwg.org/#void-elements\n * @see https://html.spec.whatwg.org/#optional-tags\n */\nvar HTML_VOID_ELEMENTS = freeze({\n\tarea: true,\n\tbase: true,\n\tbr: true,\n\tcol: true,\n\tembed: true,\n\thr: true,\n\timg: true,\n\tinput: true,\n\tlink: true,\n\tmeta: true,\n\tparam: true,\n\tsource: true,\n\ttrack: true,\n\twbr: true,\n});\n\n/**\n * Check if `tagName` is matching one of the HTML void element names.\n * This method doesn't check if such tags are allowed in the context of the current\n * document/parsing.\n *\n * @param {string} tagName\n * @returns {boolean}\n * @see {@link HTML_VOID_ELEMENTS}\n * @see https://html.spec.whatwg.org/#void-elements\n */\nfunction isHTMLVoidElement(tagName) {\n\treturn hasOwn(HTML_VOID_ELEMENTS, tagName.toLowerCase());\n}\n\n/**\n * Tag names that are raw text elements according to HTML spec.\n * The value denotes whether they are escapable or not.\n *\n * @see {@link isHTMLEscapableRawTextElement}\n * @see {@link isHTMLRawTextElement}\n * @see https://html.spec.whatwg.org/#raw-text-elements\n * @see https://html.spec.whatwg.org/#escapable-raw-text-elements\n */\nvar HTML_RAW_TEXT_ELEMENTS = freeze({\n\tscript: false,\n\tstyle: false,\n\ttextarea: true,\n\ttitle: true,\n});\n\n/**\n * Check if `tagName` is matching one of the HTML raw text element names.\n * This method doesn't check if such tags are allowed in the context of the current\n * document/parsing.\n *\n * @param {string} tagName\n * @returns {boolean}\n * @see {@link isHTMLEscapableRawTextElement}\n * @see {@link HTML_RAW_TEXT_ELEMENTS}\n * @see https://html.spec.whatwg.org/#raw-text-elements\n * @see https://html.spec.whatwg.org/#escapable-raw-text-elements\n */\nfunction isHTMLRawTextElement(tagName) {\n\tvar key = tagName.toLowerCase();\n\treturn hasOwn(HTML_RAW_TEXT_ELEMENTS, key) && !HTML_RAW_TEXT_ELEMENTS[key];\n}\n/**\n * Check if `tagName` is matching one of the HTML escapable raw text element names.\n * This method doesn't check if such tags are allowed in the context of the current\n * document/parsing.\n *\n * @param {string} tagName\n * @returns {boolean}\n * @see {@link isHTMLRawTextElement}\n * @see {@link HTML_RAW_TEXT_ELEMENTS}\n * @see https://html.spec.whatwg.org/#raw-text-elements\n * @see https://html.spec.whatwg.org/#escapable-raw-text-elements\n */\nfunction isHTMLEscapableRawTextElement(tagName) {\n\tvar key = tagName.toLowerCase();\n\treturn hasOwn(HTML_RAW_TEXT_ELEMENTS, key) && HTML_RAW_TEXT_ELEMENTS[key];\n}\n/**\n * Only returns true if `value` matches MIME_TYPE.HTML, which indicates an HTML document.\n *\n * @param {string} mimeType\n * @returns {mimeType is 'text/html'}\n * @see https://www.iana.org/assignments/media-types/text/html\n * @see https://en.wikipedia.org/wiki/HTML\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring\n */\nfunction isHTMLMimeType(mimeType) {\n\treturn mimeType === MIME_TYPE.HTML;\n}\n/**\n * For both the `text/html` and the `application/xhtml+xml` namespace the spec defines that the\n * HTML namespace is provided as the default.\n *\n * @param {string} mimeType\n * @returns {boolean}\n * @see https://dom.spec.whatwg.org/#dom-document-createelement\n * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument\n * @see https://dom.spec.whatwg.org/#dom-domimplementation-createhtmldocument\n */\nfunction hasDefaultHTMLNamespace(mimeType) {\n\treturn isHTMLMimeType(mimeType) || mimeType === MIME_TYPE.XML_XHTML_APPLICATION;\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02\n *      MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype\n *      WHATWG HTML Spec\n * @see {@link DOMParser.prototype.parseFromString}\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring\n\t *      WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType\n\t *      registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType\n\t *      registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n});\n/**\n * @typedef {'application/xhtml+xml' | 'application/xml' | 'image/svg+xml' | 'text/html' | 'text/xml'}\n * MimeType\n */\n/**\n * @type {MimeType[]}\n * @private\n * Basically `Object.values`, which is not available in ES5.\n */\nvar _MIME_TYPES = Object.keys(MIME_TYPE).map(function (key) {\n\treturn MIME_TYPE[key];\n});\n\n/**\n * Only returns true if `mimeType` is one of the allowed values for\n * `DOMParser.parseFromString`.\n *\n * @param {string} mimeType\n * @returns {mimeType is 'application/xhtml+xml' | 'application/xml' | 'image/svg+xml' |  'text/html' | 'text/xml'}\n *\n */\nfunction isValidMimeType(mimeType) {\n\treturn _MIME_TYPES.indexOf(mimeType) > -1;\n}\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace.\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n});\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.HTML_BOOLEAN_ATTRIBUTES = HTML_BOOLEAN_ATTRIBUTES;\nexports.HTML_RAW_TEXT_ELEMENTS = HTML_RAW_TEXT_ELEMENTS;\nexports.HTML_VOID_ELEMENTS = HTML_VOID_ELEMENTS;\nexports.hasDefaultHTMLNamespace = hasDefaultHTMLNamespace;\nexports.hasOwn = hasOwn;\nexports.isHTMLBooleanAttribute = isHTMLBooleanAttribute;\nexports.isHTMLRawTextElement = isHTMLRawTextElement;\nexports.isHTMLEscapableRawTextElement = isHTMLEscapableRawTextElement;\nexports.isHTMLMimeType = isHTMLMimeType;\nexports.isHTMLVoidElement = isHTMLVoidElement;\nexports.isValidMimeType = isValidMimeType;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n","'use strict';\n\nvar conventions = require('./conventions');\n\nfunction extendError(constructor, writableName) {\n\tconstructor.prototype = Object.create(Error.prototype, {\n\t\tconstructor: { value: constructor },\n\t\tname: { value: constructor.name, enumerable: true, writable: writableName },\n\t});\n}\n\nvar DOMExceptionName = conventions.freeze({\n\t/**\n\t * the default value as defined by the spec\n\t */\n\tError: 'Error',\n\t/**\n\t * @deprecated\n\t * Use RangeError instead.\n\t */\n\tIndexSizeError: 'IndexSizeError',\n\t/**\n\t * @deprecated\n\t * Just to match the related static code, not part of the spec.\n\t */\n\tDomstringSizeError: 'DomstringSizeError',\n\tHierarchyRequestError: 'HierarchyRequestError',\n\tWrongDocumentError: 'WrongDocumentError',\n\tInvalidCharacterError: 'InvalidCharacterError',\n\t/**\n\t * @deprecated\n\t * Just to match the related static code, not part of the spec.\n\t */\n\tNoDataAllowedError: 'NoDataAllowedError',\n\tNoModificationAllowedError: 'NoModificationAllowedError',\n\tNotFoundError: 'NotFoundError',\n\tNotSupportedError: 'NotSupportedError',\n\tInUseAttributeError: 'InUseAttributeError',\n\tInvalidStateError: 'InvalidStateError',\n\tSyntaxError: 'SyntaxError',\n\tInvalidModificationError: 'InvalidModificationError',\n\tNamespaceError: 'NamespaceError',\n\t/**\n\t * @deprecated\n\t * Use TypeError for invalid arguments,\n\t * \"NotSupportedError\" DOMException for unsupported operations,\n\t * and \"NotAllowedError\" DOMException for denied requests instead.\n\t */\n\tInvalidAccessError: 'InvalidAccessError',\n\t/**\n\t * @deprecated\n\t * Just to match the related static code, not part of the spec.\n\t */\n\tValidationError: 'ValidationError',\n\t/**\n\t * @deprecated\n\t * Use TypeError instead.\n\t */\n\tTypeMismatchError: 'TypeMismatchError',\n\tSecurityError: 'SecurityError',\n\tNetworkError: 'NetworkError',\n\tAbortError: 'AbortError',\n\t/**\n\t * @deprecated\n\t * Just to match the related static code, not part of the spec.\n\t */\n\tURLMismatchError: 'URLMismatchError',\n\tQuotaExceededError: 'QuotaExceededError',\n\tTimeoutError: 'TimeoutError',\n\tInvalidNodeTypeError: 'InvalidNodeTypeError',\n\tDataCloneError: 'DataCloneError',\n\tEncodingError: 'EncodingError',\n\tNotReadableError: 'NotReadableError',\n\tUnknownError: 'UnknownError',\n\tConstraintError: 'ConstraintError',\n\tDataError: 'DataError',\n\tTransactionInactiveError: 'TransactionInactiveError',\n\tReadOnlyError: 'ReadOnlyError',\n\tVersionError: 'VersionError',\n\tOperationError: 'OperationError',\n\tNotAllowedError: 'NotAllowedError',\n\tOptOutError: 'OptOutError',\n});\nvar DOMExceptionNames = Object.keys(DOMExceptionName);\n\nfunction isValidDomExceptionCode(value) {\n\treturn typeof value === 'number' && value >= 1 && value <= 25;\n}\nfunction endsWithError(value) {\n\treturn typeof value === 'string' && value.substring(value.length - DOMExceptionName.Error.length) === DOMExceptionName.Error;\n}\n/**\n * DOM operations only raise exceptions in \"exceptional\" circumstances, i.e., when an operation\n * is impossible to perform (either for logical reasons, because data is lost, or because the\n * implementation has become unstable). In general, DOM methods return specific error values in\n * ordinary processing situations, such as out-of-bound errors when using NodeList.\n *\n * Implementations should raise other exceptions under other circumstances. For example,\n * implementations should raise an implementation-dependent exception if a null argument is\n * passed when null was not expected.\n *\n * This implementation supports the following usages:\n * 1. according to the living standard (both arguments are optional):\n * ```\n * new DOMException(\"message (can be empty)\", DOMExceptionNames.HierarchyRequestError)\n * ```\n * 2. according to previous xmldom implementation (only the first argument is required):\n * ```\n * new DOMException(DOMException.HIERARCHY_REQUEST_ERR, \"optional message\")\n * ```\n * both result in the proper name being set.\n *\n * @class DOMException\n * @param {number | string} messageOrCode\n * The reason why an operation is not acceptable.\n * If it is a number, it is used to determine the `name`, see\n * {@link https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-258A00AF ExceptionCode}\n * @param {string | keyof typeof DOMExceptionName | Error} [nameOrMessage]\n * The `name` to use for the error.\n * If `messageOrCode` is a number, this arguments is used as the `message` instead.\n * @augments Error\n * @see https://webidl.spec.whatwg.org/#idl-DOMException\n * @see https://webidl.spec.whatwg.org/#dfn-error-names-table\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-17189187\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(messageOrCode, nameOrMessage) {\n\t// support old way of passing arguments: first argument is a valid number\n\tif (isValidDomExceptionCode(messageOrCode)) {\n\t\tthis.name = DOMExceptionNames[messageOrCode];\n\t\tthis.message = nameOrMessage || '';\n\t} else {\n\t\tthis.message = messageOrCode;\n\t\tthis.name = endsWithError(nameOrMessage) ? nameOrMessage : DOMExceptionName.Error;\n\t}\n\tif (Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n}\nextendError(DOMException, true);\nObject.defineProperties(DOMException.prototype, {\n\tcode: {\n\t\tenumerable: true,\n\t\tget: function () {\n\t\t\tvar code = DOMExceptionNames.indexOf(this.name);\n\t\t\tif (isValidDomExceptionCode(code)) return code;\n\t\t\treturn 0;\n\t\t},\n\t},\n});\n\nvar ExceptionCode = {\n\tINDEX_SIZE_ERR: 1,\n\tDOMSTRING_SIZE_ERR: 2,\n\tHIERARCHY_REQUEST_ERR: 3,\n\tWRONG_DOCUMENT_ERR: 4,\n\tINVALID_CHARACTER_ERR: 5,\n\tNO_DATA_ALLOWED_ERR: 6,\n\tNO_MODIFICATION_ALLOWED_ERR: 7,\n\tNOT_FOUND_ERR: 8,\n\tNOT_SUPPORTED_ERR: 9,\n\tINUSE_ATTRIBUTE_ERR: 10,\n\tINVALID_STATE_ERR: 11,\n\tSYNTAX_ERR: 12,\n\tINVALID_MODIFICATION_ERR: 13,\n\tNAMESPACE_ERR: 14,\n\tINVALID_ACCESS_ERR: 15,\n\tVALIDATION_ERR: 16,\n\tTYPE_MISMATCH_ERR: 17,\n\tSECURITY_ERR: 18,\n\tNETWORK_ERR: 19,\n\tABORT_ERR: 20,\n\tURL_MISMATCH_ERR: 21,\n\tQUOTA_EXCEEDED_ERR: 22,\n\tTIMEOUT_ERR: 23,\n\tINVALID_NODE_TYPE_ERR: 24,\n\tDATA_CLONE_ERR: 25,\n};\n\nvar entries = Object.entries(ExceptionCode);\nfor (var i = 0; i < entries.length; i++) {\n\tvar key = entries[i][0];\n\tDOMException[key] = entries[i][1];\n}\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @class\n * @param {string} message\n * @param {any} [locator]\n */\nfunction ParseError(message, locator) {\n\tthis.message = message;\n\tthis.locator = locator;\n\tif (Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nextendError(ParseError);\n\nexports.DOMException = DOMException;\nexports.DOMExceptionName = DOMExceptionName;\nexports.ExceptionCode = ExceptionCode;\nexports.ParseError = ParseError;\n","'use strict';\n\n/**\n * Detects relevant unicode support for regular expressions in the runtime.\n * Should the runtime not accepts the flag `u` or unicode ranges,\n * character classes without unicode handling will be used.\n *\n * @param {typeof RegExp} [RegExpImpl=RegExp]\n * For testing: the RegExp class.\n * @returns {boolean}\n * @see https://node.green/#ES2015-syntax-RegExp--y--and--u--flags\n */\nfunction detectUnicodeSupport(RegExpImpl) {\n\ttry {\n\t\tif (typeof RegExpImpl !== 'function') {\n\t\t\tRegExpImpl = RegExp;\n\t\t}\n\t\t// eslint-disable-next-line es5/no-unicode-regex,es5/no-unicode-code-point-escape\n\t\tvar match = new RegExpImpl('\\u{1d306}', 'u').exec('');\n\t\treturn !!match && match[0].length === 2;\n\t} catch (error) {}\n\treturn false;\n}\nvar UNICODE_SUPPORT = detectUnicodeSupport();\n\n/**\n * Removes `[`, `]` and any trailing quantifiers from the source of a RegExp.\n *\n * @param {RegExp} regexp\n */\nfunction chars(regexp) {\n\tif (regexp.source[0] !== '[') {\n\t\tthrow new Error(regexp + ' can not be used with chars');\n\t}\n\treturn regexp.source.slice(1, regexp.source.lastIndexOf(']'));\n}\n\n/**\n * Creates a new character list regular expression,\n * by removing `search` from the source of `regexp`.\n *\n * @param {RegExp} regexp\n * @param {string} search\n * The character(s) to remove.\n * @returns {RegExp}\n */\nfunction chars_without(regexp, search) {\n\tif (regexp.source[0] !== '[') {\n\t\tthrow new Error('/' + regexp.source + '/ can not be used with chars_without');\n\t}\n\tif (!search || typeof search !== 'string') {\n\t\tthrow new Error(JSON.stringify(search) + ' is not a valid search');\n\t}\n\tif (regexp.source.indexOf(search) === -1) {\n\t\tthrow new Error('\"' + search + '\" is not is /' + regexp.source + '/');\n\t}\n\tif (search === '-' && regexp.source.indexOf(search) !== 1) {\n\t\tthrow new Error('\"' + search + '\" is not at the first postion of /' + regexp.source + '/');\n\t}\n\treturn new RegExp(regexp.source.replace(search, ''), UNICODE_SUPPORT ? 'u' : '');\n}\n\n/**\n * Combines and Regular expressions correctly by using `RegExp.source`.\n *\n * @param {...(RegExp | string)[]} args\n * @returns {RegExp}\n */\nfunction reg(args) {\n\tvar self = this;\n\treturn new RegExp(\n\t\tArray.prototype.slice\n\t\t\t.call(arguments)\n\t\t\t.map(function (part) {\n\t\t\t\tvar isStr = typeof part === 'string';\n\t\t\t\tif (isStr && self === undefined && part === '|') {\n\t\t\t\t\tthrow new Error('use regg instead of reg to wrap expressions with `|`!');\n\t\t\t\t}\n\t\t\t\treturn isStr ? part : part.source;\n\t\t\t})\n\t\t\t.join(''),\n\t\tUNICODE_SUPPORT ? 'mu' : 'm'\n\t);\n}\n\n/**\n * Like `reg` but wraps the expression in `(?:`,`)` to create a non tracking group.\n *\n * @param {...(RegExp | string)[]} args\n * @returns {RegExp}\n */\nfunction regg(args) {\n\tif (arguments.length === 0) {\n\t\tthrow new Error('no parameters provided');\n\t}\n\treturn reg.apply(regg, ['(?:'].concat(Array.prototype.slice.call(arguments), [')']));\n}\n\n// /**\n//  * Append ^ to the beginning of the expression.\n//  * @param {...(RegExp | string)[]} args\n//  * @returns {RegExp}\n//  */\n// function reg_start(args) {\n// \tif (arguments.length === 0) {\n// \t\tthrow new Error('no parameters provided');\n// \t}\n// \treturn reg.apply(reg_start, ['^'].concat(Array.prototype.slice.call(arguments)));\n// }\n\n// https://www.w3.org/TR/xml/#document\n// `[1] document ::= prolog element Misc*`\n// https://www.w3.org/TR/xml11/#NT-document\n// `[1] document ::= ( prolog element Misc* ) - ( Char* RestrictedChar Char* )`\n\n/**\n * A character usually appearing in wrongly converted strings.\n *\n * @type {string}\n * @see https://en.wikipedia.org/wiki/Specials_(Unicode_block)#Replacement_character\n * @see https://nodejs.dev/en/api/v18/buffer/#buffers-and-character-encodings\n * @see https://www.unicode.org/faq/utf_bom.html#BOM\n * @readonly\n */\nvar UNICODE_REPLACEMENT_CHARACTER = '\\uFFFD';\n// https://www.w3.org/TR/xml/#NT-Char\n// any Unicode character, excluding the surrogate blocks, FFFE, and FFFF.\n// `[2] Char ::= #x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]`\n// https://www.w3.org/TR/xml11/#NT-Char\n// `[2] Char ::= [#x1-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]`\n// https://www.w3.org/TR/xml11/#NT-RestrictedChar\n// `[2a] RestrictedChar ::= [#x1-#x8] | [#xB-#xC] | [#xE-#x1F] | [#x7F-#x84] | [#x86-#x9F]`\n// https://www.w3.org/TR/xml11/#charsets\nvar Char = /[-\\x09\\x0A\\x0D\\x20-\\x2C\\x2E-\\uD7FF\\uE000-\\uFFFD]/; // without \\u10000-\\uEFFFF\nif (UNICODE_SUPPORT) {\n\t// eslint-disable-next-line es5/no-unicode-code-point-escape\n\tChar = reg('[', chars(Char), '\\\\u{10000}-\\\\u{10FFFF}', ']');\n}\n\nvar _SChar = /[\\x20\\x09\\x0D\\x0A]/;\nvar SChar_s = chars(_SChar);\n// https://www.w3.org/TR/xml11/#NT-S\n// `[3] S ::= (#x20 | #x9 | #xD | #xA)+`\nvar S = reg(_SChar, '+');\n// optional whitespace described as `S?` in the grammar,\n// simplified to 0-n occurrences of the character class\n// instead of 0-1 occurrences of a non-capturing group around S\nvar S_OPT = reg(_SChar, '*');\n\n// https://www.w3.org/TR/xml11/#NT-NameStartChar\n// `[4] NameStartChar ::= \":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]`\nvar NameStartChar =\n\t/[:_a-zA-Z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/; // without \\u10000-\\uEFFFF\nif (UNICODE_SUPPORT) {\n\t// eslint-disable-next-line es5/no-unicode-code-point-escape\n\tNameStartChar = reg('[', chars(NameStartChar), '\\\\u{10000}-\\\\u{10FFFF}', ']');\n}\nvar NameStartChar_s = chars(NameStartChar);\n\n// https://www.w3.org/TR/xml11/#NT-NameChar\n// `[4a] NameChar ::= NameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]`\nvar NameChar = reg('[', NameStartChar_s, chars(/[-.0-9\\xB7]/), chars(/[\\u0300-\\u036F\\u203F-\\u2040]/), ']');\n// https://www.w3.org/TR/xml11/#NT-Name\n// `[5] Name ::= NameStartChar (NameChar)*`\nvar Name = reg(NameStartChar, NameChar, '*');\n/*\nhttps://www.w3.org/TR/xml11/#NT-Names\n`[6] Names ::= Name (#x20 Name)*`\n*/\n\n// https://www.w3.org/TR/xml11/#NT-Nmtoken\n// `[7] Nmtoken ::= (NameChar)+`\nvar Nmtoken = reg(NameChar, '+');\n/*\nhttps://www.w3.org/TR/xml11/#NT-Nmtokens\n`[8] Nmtokens ::= Nmtoken (#x20 Nmtoken)*`\nvar Nmtokens = reg(Nmtoken, regg(/\\x20/, Nmtoken), '*');\n*/\n\n// https://www.w3.org/TR/xml11/#NT-EntityRef\n// `[68] EntityRef ::= '&' Name ';'` [WFC: Entity Declared] [VC: Entity Declared] [WFC: Parsed Entity] [WFC: No Recursion]\nvar EntityRef = reg('&', Name, ';');\n// https://www.w3.org/TR/xml11/#NT-CharRef\n// `[66] CharRef ::= '&#' [0-9]+ ';' | '&#x' [0-9a-fA-F]+ ';'` [WFC: Legal Character]\nvar CharRef = regg(/&#[0-9]+;|&#x[0-9a-fA-F]+;/);\n\n/*\nhttps://www.w3.org/TR/xml11/#NT-Reference\n- `[67] Reference ::= EntityRef | CharRef`\n- `[66] CharRef ::= '&#' [0-9]+ ';' | '&#x' [0-9a-fA-F]+ ';'` [WFC: Legal Character]\n- `[68] EntityRef ::= '&' Name ';'` [WFC: Entity Declared] [VC: Entity Declared] [WFC: Parsed Entity] [WFC: No Recursion]\n*/\nvar Reference = regg(EntityRef, '|', CharRef);\n\n// https://www.w3.org/TR/xml11/#NT-PEReference\n// `[69] PEReference ::= '%' Name ';'`\n// [VC: Entity Declared] [WFC: No Recursion] [WFC: In DTD]\nvar PEReference = reg('%', Name, ';');\n\n// https://www.w3.org/TR/xml11/#NT-EntityValue\n// `[9] EntityValue ::= '\"' ([^%&\"] | PEReference | Reference)* '\"' | \"'\" ([^%&'] | PEReference | Reference)* \"'\"`\nvar EntityValue = regg(\n\treg('\"', regg(/[^%&\"]/, '|', PEReference, '|', Reference), '*', '\"'),\n\t'|',\n\treg(\"'\", regg(/[^%&']/, '|', PEReference, '|', Reference), '*', \"'\")\n);\n\n// https://www.w3.org/TR/xml11/#NT-AttValue\n// `[10] AttValue ::= '\"' ([^<&\"] | Reference)* '\"' | \"'\" ([^<&'] | Reference)* \"'\"`\nvar AttValue = regg('\"', regg(/[^<&\"]/, '|', Reference), '*', '\"', '|', \"'\", regg(/[^<&']/, '|', Reference), '*', \"'\");\n\n// https://www.w3.org/TR/xml-names/#ns-decl\n// https://www.w3.org/TR/xml-names/#ns-qualnames\n// NameStartChar without \":\"\nvar NCNameStartChar = chars_without(NameStartChar, ':');\n// https://www.w3.org/TR/xml-names/#orphans\n// `[5] NCNameChar ::= NameChar - ':'`\n// An XML NameChar, minus the \":\"\nvar NCNameChar = chars_without(NameChar, ':');\n// https://www.w3.org/TR/xml-names/#NT-NCName\n// `[4] NCName ::= Name - (Char* ':' Char*)`\n// An XML Name, minus the \":\"\nvar NCName = reg(NCNameStartChar, NCNameChar, '*');\n\n/**\nhttps://www.w3.org/TR/xml-names/#ns-qualnames\n\n```\n[7] QName ::= PrefixedName | UnprefixedName\n\t\t\t\t  === (NCName ':' NCName) | NCName\n\t\t\t\t  === NCName (':' NCName)?\n[8] PrefixedName ::= Prefix ':' LocalPart\n\t\t\t\t\t\t\t\t === NCName ':' NCName\n[9] UnprefixedName ::= LocalPart\n\t\t\t\t\t\t\t\t\t === NCName\n[10] Prefix ::= NCName\n[11] LocalPart ::= NCName\n```\n*/\nvar QName = reg(NCName, regg(':', NCName), '?');\nvar QName_exact = reg('^', QName, '$');\nvar QName_group = reg('(', QName, ')');\n\n// https://www.w3.org/TR/xml11/#NT-SystemLiteral\n// `[11] SystemLiteral ::= ('\"' [^\"]* '\"') | (\"'\" [^']* \"'\")`\nvar SystemLiteral = regg(/\"[^\"]*\"|'[^']*'/);\n\n/*\n https://www.w3.org/TR/xml11/#NT-PI\n ```\n [17] PITarget    ::= Name - (('X' | 'x') ('M' | 'm') ('L' | 'l'))\n [16] PI    ::= '<?' PITarget (S (Char* - (Char* '?>' Char*)))? '?>'\n ```\n target /xml/i is not excluded!\n*/\nvar PI = reg(/^<\\?/, '(', Name, ')', regg(S, '(', Char, '*?)'), '?', /\\?>/);\n\n// https://www.w3.org/TR/xml11/#NT-PubidChar\n// `[13] PubidChar ::= #x20 | #xD | #xA | [a-zA-Z0-9] | [-'()+,./:=?;!*#@$_%]`\nvar PubidChar = /[\\x20\\x0D\\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/;\n\n// https://www.w3.org/TR/xml11/#NT-PubidLiteral\n// `[12] PubidLiteral ::= '\"' PubidChar* '\"' | \"'\" (PubidChar - \"'\")* \"'\"`\nvar PubidLiteral = regg('\"', PubidChar, '*\"', '|', \"'\", chars_without(PubidChar, \"'\"), \"*'\");\n\n// https://www.w3.org/TR/xml11/#NT-CharData\n// `[14] CharData    ::= [^<&]* - ([^<&]* ']]>' [^<&]*)`\n\nvar COMMENT_START = '<!--';\nvar COMMENT_END = '-->';\n// https://www.w3.org/TR/xml11/#NT-Comment\n// `[15] Comment ::= '<!--' ((Char - '-') | ('-' (Char - '-')))* '-->'`\nvar Comment = reg(COMMENT_START, regg(chars_without(Char, '-'), '|', reg('-', chars_without(Char, '-'))), '*', COMMENT_END);\n\nvar PCDATA = '#PCDATA';\n// https://www.w3.org/TR/xml11/#NT-Mixed\n// `[51] Mixed ::= '(' S? '#PCDATA' (S? '|' S? Name)* S? ')*' | '(' S? '#PCDATA' S? ')'`\n// https://www.w3.org/TR/xml-names/#NT-Mixed\n// `[51] Mixed ::= '(' S? '#PCDATA' (S? '|' S? QName)* S? ')*' | '(' S? '#PCDATA' S? ')'`\n// [VC: Proper Group/PE Nesting] [VC: No Duplicate Types]\nvar Mixed = regg(\n\treg(/\\(/, S_OPT, PCDATA, regg(S_OPT, /\\|/, S_OPT, QName), '*', S_OPT, /\\)\\*/),\n\t'|',\n\treg(/\\(/, S_OPT, PCDATA, S_OPT, /\\)/)\n);\n\nvar _children_quantity = /[?*+]?/;\n/*\n `[49] choice ::= '(' S? cp ( S? '|' S? cp )+ S? ')'` [VC: Proper Group/PE Nesting]\n `[50] seq ::= '(' S? cp ( S? ',' S? cp )* S? ')'` [VC: Proper Group/PE Nesting]\n simplification to solve circular referencing, but doesn't check validity constraint \"Proper Group/PE Nesting\"\n var _choice_or_seq = reg('[', NameChar_s, SChar_s, chars(_children_quantity), '()|,]*');\n ```\n [48] cp ::= (Name | choice | seq) ('?' | '*' | '+')?\n         === (Name | '(' S? cp ( S? '|' S? cp )+ S? ')' | '(' S? cp ( S? ',' S? cp )* S? ')') ('?' | '*' | '+')?\n         !== (Name | [_choice_or_seq]*) ('?' | '*' | '+')?\n ```\n simplification to solve circular referencing, but doesn't check validity constraint \"Proper Group/PE Nesting\"\n var cp = reg(regg(Name, '|', _choice_or_seq), _children_quantity);\n*/\n/*\nInefficient regular expression (High)\nThis part of the regular expression may cause exponential backtracking on strings starting with '(|' and containing many repetitions of '|'.\nhttps://github.com/xmldom/xmldom/security/code-scanning/91\nvar choice = regg(/\\(/, S_OPT, cp, regg(S_OPT, /\\|/, S_OPT, cp), '+', S_OPT, /\\)/);\n*/\n/*\nInefficient regular expression (High)\nThis part of the regular expression may cause exponential backtracking on strings starting with '(,' and containing many repetitions of ','.\nhttps://github.com/xmldom/xmldom/security/code-scanning/92\nvar seq = regg(/\\(/, S_OPT, cp, regg(S_OPT, /,/, S_OPT, cp), '*', S_OPT, /\\)/);\n*/\n\n// `[47] children ::= (choice | seq) ('?' | '*' | '+')?`\n// simplification to solve circular referencing, but doesn't check validity constraint \"Proper Group/PE Nesting\"\nvar children = reg(/\\([^>]+\\)/, _children_quantity /*regg(choice, '|', seq), _children_quantity*/);\n\n// https://www.w3.org/TR/xml11/#NT-contentspec\n// `[46] contentspec ::= 'EMPTY' | 'ANY' | Mixed | children`\nvar contentspec = regg('EMPTY', '|', 'ANY', '|', Mixed, '|', children);\n\nvar ELEMENTDECL_START = '<!ELEMENT';\n// https://www.w3.org/TR/xml11/#NT-elementdecl\n// `[45] elementdecl ::= '<!ELEMENT' S Name S contentspec S? '>'`\n// https://www.w3.org/TR/xml-names/#NT-elementdecl\n// `[17] elementdecl ::= '<!ELEMENT' S QName S contentspec S? '>'`\n// because of https://www.w3.org/TR/xml11/#NT-PEReference\n// since xmldom is not supporting replacements of PEReferences in the DTD\n// this also supports PEReference in the possible places\nvar elementdecl = reg(ELEMENTDECL_START, S, regg(QName, '|', PEReference), S, regg(contentspec, '|', PEReference), S_OPT, '>');\n\n// https://www.w3.org/TR/xml11/#NT-NotationType\n// `[58] NotationType ::= 'NOTATION' S '(' S? Name (S? '|' S? Name)* S? ')'`\n// [VC: Notation Attributes] [VC: One Notation Per Element Type] [VC: No Notation on Empty Element] [VC: No Duplicate Tokens]\nvar NotationType = reg('NOTATION', S, /\\(/, S_OPT, Name, regg(S_OPT, /\\|/, S_OPT, Name), '*', S_OPT, /\\)/);\n// https://www.w3.org/TR/xml11/#NT-Enumeration\n// `[59] Enumeration ::= '(' S? Nmtoken (S? '|' S? Nmtoken)* S? ')'`\n// [VC: Enumeration] [VC: No Duplicate Tokens]\nvar Enumeration = reg(/\\(/, S_OPT, Nmtoken, regg(S_OPT, /\\|/, S_OPT, Nmtoken), '*', S_OPT, /\\)/);\n\n// https://www.w3.org/TR/xml11/#NT-EnumeratedType\n// `[57] EnumeratedType ::= NotationType | Enumeration`\nvar EnumeratedType = regg(NotationType, '|', Enumeration);\n\n/*\n```\n[55] StringType ::= 'CDATA'\n[56] TokenizedType ::= 'ID' [VC: ID] [VC: One ID per Element Type] [VC: ID Attribute Default]\n   | 'IDREF' [VC: IDREF]\n   | 'IDREFS' [VC: IDREF]\n\t | 'ENTITY' [VC: Entity Name]\n\t | 'ENTITIES' [VC: Entity Name]\n\t | 'NMTOKEN' [VC: Name Token]\n\t | 'NMTOKENS' [VC: Name Token]\n [54] AttType ::= StringType | TokenizedType | EnumeratedType\n```*/\nvar AttType = regg(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/, '|', EnumeratedType);\n\n// `[60] DefaultDecl ::= '#REQUIRED' | '#IMPLIED' | (('#FIXED' S)? AttValue)`\n// [WFC: No < in Attribute Values] [WFC: No External Entity References]\n// [VC: Fixed Attribute Default] [VC: Required Attribute] [VC: Attribute Default Value Syntactically Correct]\nvar DefaultDecl = regg(/#REQUIRED|#IMPLIED/, '|', regg(regg('#FIXED', S), '?', AttValue));\n\n// https://www.w3.org/TR/xml11/#NT-AttDef\n// [53] AttDef ::= S Name S AttType S DefaultDecl\n// https://www.w3.org/TR/xml-names/#NT-AttDef\n// [1] NSAttName ::= PrefixedAttName | DefaultAttName\n// [2] PrefixedAttName ::= 'xmlns:' NCName [NSC: Reserved Prefixes and Namespace Names]\n// [3] DefaultAttName ::= 'xmlns'\n// [21] AttDef ::= S (QName | NSAttName) S AttType S DefaultDecl\n// \t\t\t\t\t\t === S Name S AttType S DefaultDecl\n// xmldom is not distinguishing between QName and NSAttName on this level\n// to support XML without namespaces in DTD we can not restrict it to QName\nvar AttDef = regg(S, Name, S, AttType, S, DefaultDecl);\n\nvar ATTLIST_DECL_START = '<!ATTLIST';\n// https://www.w3.org/TR/xml11/#NT-AttlistDecl\n// `[52] AttlistDecl ::= '<!ATTLIST' S Name AttDef* S? '>'`\n// https://www.w3.org/TR/xml-names/#NT-AttlistDecl\n// `[20] AttlistDecl ::= '<!ATTLIST' S QName AttDef* S? '>'`\n// to support XML without namespaces in DTD we can not restrict it to QName\nvar AttlistDecl = reg(ATTLIST_DECL_START, S, Name, AttDef, '*', S_OPT, '>');\n\nvar SYSTEM = 'SYSTEM';\nvar PUBLIC = 'PUBLIC';\n// https://www.w3.org/TR/xml11/#NT-ExternalID\n// `[75] ExternalID ::= 'SYSTEM' S SystemLiteral | 'PUBLIC' S PubidLiteral S SystemLiteral`\nvar ExternalID = regg(regg(SYSTEM, S, SystemLiteral), '|', regg(PUBLIC, S, PubidLiteral, S, SystemLiteral));\nvar ExternalID_match = reg(\n\t'^',\n\tregg(\n\t\tregg(SYSTEM, S, '(?<SystemLiteralOnly>', SystemLiteral, ')'),\n\t\t'|',\n\t\tregg(PUBLIC, S, '(?<PubidLiteral>', PubidLiteral, ')', S, '(?<SystemLiteral>', SystemLiteral, ')')\n\t)\n);\n\n// https://www.w3.org/TR/xml11/#NT-NDataDecl\n// `[76] NDataDecl ::= S 'NDATA' S Name` [VC: Notation Declared]\nvar NDataDecl = regg(S, 'NDATA', S, Name);\n\n// https://www.w3.org/TR/xml11/#NT-EntityDef\n// `[73] EntityDef ::= EntityValue | (ExternalID NDataDecl?)`\nvar EntityDef = regg(EntityValue, '|', regg(ExternalID, NDataDecl, '?'));\n\nvar ENTITY_DECL_START = '<!ENTITY';\n// https://www.w3.org/TR/xml11/#NT-GEDecl\n// `[71] GEDecl ::= '<!ENTITY' S Name S EntityDef S? '>'`\nvar GEDecl = reg(ENTITY_DECL_START, S, Name, S, EntityDef, S_OPT, '>');\n// https://www.w3.org/TR/xml11/#NT-PEDef\n// `[74] PEDef ::= EntityValue | ExternalID`\nvar PEDef = regg(EntityValue, '|', ExternalID);\n// https://www.w3.org/TR/xml11/#NT-PEDecl\n// `[72] PEDecl ::= '<!ENTITY' S '%' S Name S PEDef S? '>'`\nvar PEDecl = reg(ENTITY_DECL_START, S, '%', S, Name, S, PEDef, S_OPT, '>');\n// https://www.w3.org/TR/xml11/#NT-EntityDecl\n// `[70] EntityDecl ::= GEDecl | PEDecl`\nvar EntityDecl = regg(GEDecl, '|', PEDecl);\n\n// https://www.w3.org/TR/xml11/#NT-PublicID\n// `[83] PublicID    ::= 'PUBLIC' S PubidLiteral`\nvar PublicID = reg(PUBLIC, S, PubidLiteral);\n// https://www.w3.org/TR/xml11/#NT-NotationDecl\n// `[82] NotationDecl    ::= '<!NOTATION' S Name S (ExternalID | PublicID) S? '>'` [VC: Unique Notation Name]\nvar NotationDecl = reg('<!NOTATION', S, Name, S, regg(ExternalID, '|', PublicID), S_OPT, '>');\n\n// https://www.w3.org/TR/xml11/#NT-Eq\n// `[25] Eq ::= S? '=' S?`\nvar Eq = reg(S_OPT, '=', S_OPT);\n// https://www.w3.org/TR/xml/#NT-VersionNum\n// `[26] VersionNum ::= '1.' [0-9]+`\n// https://www.w3.org/TR/xml11/#NT-VersionNum\n// `[26] VersionNum ::= '1.1'`\nvar VersionNum = /1[.]\\d+/;\n// https://www.w3.org/TR/xml11/#NT-VersionInfo\n// `[24] VersionInfo ::= S 'version' Eq (\"'\" VersionNum \"'\" | '\"' VersionNum '\"')`\nvar VersionInfo = reg(S, 'version', Eq, regg(\"'\", VersionNum, \"'\", '|', '\"', VersionNum, '\"'));\n// https://www.w3.org/TR/xml11/#NT-EncName\n// `[81] EncName ::= [A-Za-z] ([A-Za-z0-9._] | '-')*`\nvar EncName = /[A-Za-z][-A-Za-z0-9._]*/;\n// https://www.w3.org/TR/xml11/#NT-EncDecl\n// `[80] EncodingDecl ::= S 'encoding' Eq ('\"' EncName '\"' | \"'\" EncName \"'\" )`\nvar EncodingDecl = regg(S, 'encoding', Eq, regg('\"', EncName, '\"', '|', \"'\", EncName, \"'\"));\n// https://www.w3.org/TR/xml11/#NT-SDDecl\n// `[32] SDDecl ::= S 'standalone' Eq ((\"'\" ('yes' | 'no') \"'\") | ('\"' ('yes' | 'no') '\"'))`\nvar SDDecl = regg(S, 'standalone', Eq, regg(\"'\", regg('yes', '|', 'no'), \"'\", '|', '\"', regg('yes', '|', 'no'), '\"'));\n// https://www.w3.org/TR/xml11/#NT-XMLDecl\n// [23] XMLDecl ::= '<?xml' VersionInfo EncodingDecl? SDDecl? S? '?>'\nvar XMLDecl = reg(/^<\\?xml/, VersionInfo, EncodingDecl, '?', SDDecl, '?', S_OPT, /\\?>/);\n\n/*\n https://www.w3.org/TR/xml/#NT-markupdecl\n https://www.w3.org/TR/xml11/#NT-markupdecl\n `[29] markupdecl ::= elementdecl | AttlistDecl | EntityDecl | NotationDecl | PI | Comment`\n var markupdecl = regg(elementdecl, '|', AttlistDecl, '|', EntityDecl, '|', NotationDecl, '|', PI_unsafe, '|', Comment);\n*/\n/*\n https://www.w3.org/TR/xml-names/#NT-doctypedecl\n`[28a] DeclSep   ::= PEReference | S`\n https://www.w3.org/TR/xml11/#NT-intSubset\n```\n [28b] intSubset ::= (markupdecl | DeclSep)*\n                 === (markupdecl | PEReference | S)*\n```\n [WFC: PE Between Declarations]\n var intSubset = reg(regg(markupdecl, '|', PEReference, '|', S), '*');\n*/\nvar DOCTYPE_DECL_START = '<!DOCTYPE';\n/*\n https://www.w3.org/TR/xml11/#NT-doctypedecl\n `[28] doctypedecl ::= '<!DOCTYPE' S Name (S ExternalID)? S? ('[' intSubset ']' S?)? '>'`\n https://www.afterwardsw3.org/TR/xml-names/#NT-doctypedecl\n `[16] doctypedecl ::= '<!DOCTYPE' S QName (S ExternalID)? S? ('[' (markupdecl | PEReference | S)* ']' S?)? '>'`\n var doctypedecl = reg('<!DOCTYPE', S, Name, regg(S, ExternalID), '?', S_OPT, regg(/\\[/, intSubset, /]/, S_OPT), '?', '>');\n*/\n\nvar CDATA_START = '<![CDATA[';\nvar CDATA_END = ']]>';\nvar CDStart = /<!\\[CDATA\\[/;\nvar CDEnd = /\\]\\]>/;\nvar CData = reg(Char, '*?', CDEnd);\n/*\n https://www.w3.org/TR/xml/#dt-cdsection\n `[18]   \tCDSect\t   ::=   \tCDStart CData CDEnd`\n `[19]   \tCDStart\t   ::=   \t'<![CDATA['`\n `[20]   \tCData\t   ::=   \t(Char* - (Char* ']]>' Char*))`\n `[21]   \tCDEnd\t   ::=   \t']]>'`\n*/\nvar CDSect = reg(CDStart, CData);\n\n// unit tested\nexports.chars = chars;\nexports.chars_without = chars_without;\nexports.detectUnicodeSupport = detectUnicodeSupport;\nexports.reg = reg;\nexports.regg = regg;\nexports.AttlistDecl = AttlistDecl;\nexports.CDATA_START = CDATA_START;\nexports.CDATA_END = CDATA_END;\nexports.CDSect = CDSect;\nexports.Char = Char;\nexports.Comment = Comment;\nexports.COMMENT_START = COMMENT_START;\nexports.COMMENT_END = COMMENT_END;\nexports.DOCTYPE_DECL_START = DOCTYPE_DECL_START;\nexports.elementdecl = elementdecl;\nexports.EntityDecl = EntityDecl;\nexports.EntityValue = EntityValue;\nexports.ExternalID = ExternalID;\nexports.ExternalID_match = ExternalID_match;\nexports.Name = Name;\nexports.NotationDecl = NotationDecl;\nexports.Reference = Reference;\nexports.PEReference = PEReference;\nexports.PI = PI;\nexports.PUBLIC = PUBLIC;\nexports.PubidLiteral = PubidLiteral;\nexports.QName = QName;\nexports.QName_exact = QName_exact;\nexports.QName_group = QName_group;\nexports.S = S;\nexports.SChar_s = SChar_s;\nexports.S_OPT = S_OPT;\nexports.SYSTEM = SYSTEM;\nexports.SystemLiteral = SystemLiteral;\nexports.UNICODE_REPLACEMENT_CHARACTER = UNICODE_REPLACEMENT_CHARACTER;\nexports.UNICODE_SUPPORT = UNICODE_SUPPORT;\nexports.XMLDecl = XMLDecl;\n","'use strict';\n\nvar conventions = require('./conventions');\nvar find = conventions.find;\nvar hasDefaultHTMLNamespace = conventions.hasDefaultHTMLNamespace;\nvar hasOwn = conventions.hasOwn;\nvar isHTMLMimeType = conventions.isHTMLMimeType;\nvar isHTMLRawTextElement = conventions.isHTMLRawTextElement;\nvar isHTMLVoidElement = conventions.isHTMLVoidElement;\nvar MIME_TYPE = conventions.MIME_TYPE;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * Private DOM Constructor symbol\n *\n * Internal symbol used for construction of all classes whose constructors should be private.\n * Currently used for checks in `Node`, `Document`, `Element`, `Attr`, `CharacterData`, `Text`, `Comment`,\n * `CDATASection`, `DocumentType`, `Notation`, `Entity`, `EntityReference`, `DocumentFragment`, `ProcessingInstruction`\n * so the constructor can't be used from outside the module.\n */\nvar PDC = Symbol();\n\nvar errors = require('./errors');\nvar DOMException = errors.DOMException;\nvar DOMExceptionName = errors.DOMExceptionName;\n\nvar g = require('./grammar');\n\n/**\n * Checks if the given symbol equals the Private DOM Constructor symbol (PDC)\n * and throws an Illegal constructor exception when the symbols don't match.\n * This ensures that the constructor remains private and can't be used outside this module.\n */\nfunction checkSymbol(symbol) {\n\tif (symbol !== PDC) {\n\t\tthrow new TypeError('Illegal constructor');\n\t}\n}\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty.\n *\n * @param {string} input\n * The string to be checked.\n * @returns {boolean}\n * Returns `true` if the input string is not empty, `false` otherwise.\n */\nfunction notEmptyString(input) {\n\treturn input !== '';\n}\n/**\n * Splits a string on ASCII whitespace characters (U+0009 TAB, U+000A LF, U+000C FF, U+000D CR,\n * U+0020 SPACE).\n * It follows the definition from the infra specification from WHATWG.\n *\n * @param {string} input\n * The string to be split.\n * @returns {string[]}\n * An array of the split strings. The array can be empty if the input string is empty or only\n * contains whitespace characters.\n * @see {@link https://infra.spec.whatwg.org/#split-on-ascii-whitespace}\n * @see {@link https://infra.spec.whatwg.org/#ascii-whitespace}\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : [];\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * The current record object to which the element will be added as a key.\n * The object's keys are string types and values are either boolean or undefined.\n * @param {string} element\n * The string to be added as a key to the current record.\n * @returns {Record<string, boolean | undefined>}\n * The updated record object after the addition of the new element.\n */\nfunction orderedSetReducer(current, element) {\n\tif (!hasOwn(current, element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * Converts a string into an ordered set by splitting the input on ASCII whitespace and\n * ensuring uniqueness of elements.\n * This follows the definition of an ordered set from the infra specification by WHATWG.\n *\n * @param {string} input\n * The input string to be transformed into an ordered set.\n * @returns {string[]}\n * An array of unique strings obtained from the input, preserving the original order.\n * The array can be empty if the input string is empty or only contains whitespace characters.\n * @see {@link https://infra.spec.whatwg.org/#ordered-set}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}));\n}\n\n/**\n * Uses `list.indexOf` to implement a function that behaves like `Array.prototype.includes`.\n * This function is used in environments where `Array.prototype.includes` may not be available.\n *\n * @param {any[]} list\n * The array in which to search for the element.\n * @returns {function(any): boolean}\n * A function that accepts an element and returns a boolean indicating whether the element is\n * included in the provided list.\n */\nfunction arrayIncludes(list) {\n\treturn function (element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t};\n}\n\n/**\n * Validates a qualified name based on the criteria provided in the DOM specification by\n * WHATWG.\n *\n * @param {string} qualifiedName\n * The qualified name to be validated.\n * @throws {DOMException}\n * With code {@link DOMException.INVALID_CHARACTER_ERR} if the qualified name contains an\n * invalid character.\n * @see {@link https://dom.spec.whatwg.org/#validate}\n */\nfunction validateQualifiedName(qualifiedName) {\n\tif (!g.QName_exact.test(qualifiedName)) {\n\t\tthrow new DOMException(DOMException.INVALID_CHARACTER_ERR, 'invalid character in qualified name \"' + qualifiedName + '\"');\n\t}\n}\n\n/**\n * Validates a qualified name and the namespace associated with it,\n * based on the criteria provided in the DOM specification by WHATWG.\n *\n * @param {string | null} namespace\n * The namespace to be validated. It can be a string or null.\n * @param {string} qualifiedName\n * The qualified name to be validated.\n * @returns {[namespace: string | null, prefix: string | null, localName: string]}\n * Returns a tuple with the namespace,\n * prefix and local name of the qualified name.\n * @throws {DOMException}\n * Throws a DOMException if the qualified name or the namespace is not valid.\n * @see {@link https://dom.spec.whatwg.org/#validate-and-extract}\n */\nfunction validateAndExtract(namespace, qualifiedName) {\n\tvalidateQualifiedName(qualifiedName);\n\tnamespace = namespace || null;\n\t/**\n\t * @type {string | null}\n\t */\n\tvar prefix = null;\n\tvar localName = qualifiedName;\n\tif (qualifiedName.indexOf(':') >= 0) {\n\t\tvar splitResult = qualifiedName.split(':');\n\t\tprefix = splitResult[0];\n\t\tlocalName = splitResult[1];\n\t}\n\tif (prefix !== null && namespace === null) {\n\t\tthrow new DOMException(DOMException.NAMESPACE_ERR, 'prefix is non-null and namespace is null');\n\t}\n\tif (prefix === 'xml' && namespace !== conventions.NAMESPACE.XML) {\n\t\tthrow new DOMException(DOMException.NAMESPACE_ERR, 'prefix is \"xml\" and namespace is not the XML namespace');\n\t}\n\tif ((prefix === 'xmlns' || qualifiedName === 'xmlns') && namespace !== conventions.NAMESPACE.XMLNS) {\n\t\tthrow new DOMException(\n\t\t\tDOMException.NAMESPACE_ERR,\n\t\t\t'either qualifiedName or prefix is \"xmlns\" and namespace is not the XMLNS namespace'\n\t\t);\n\t}\n\tif (namespace === conventions.NAMESPACE.XMLNS && prefix !== 'xmlns' && qualifiedName !== 'xmlns') {\n\t\tthrow new DOMException(\n\t\t\tDOMException.NAMESPACE_ERR,\n\t\t\t'namespace is the XMLNS namespace and neither qualifiedName nor prefix is \"xmlns\"'\n\t\t);\n\t}\n\treturn [namespace, prefix, localName];\n}\n\n/**\n * Copies properties from one object to another.\n * It only copies the object's own (not inherited) properties.\n *\n * @param {Object} src\n * The source object from which properties are copied.\n * @param {Object} dest\n * The destination object to which properties are copied.\n */\nfunction copy(src, dest) {\n\tfor (var p in src) {\n\t\tif (hasOwn(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n * Extends a class with the properties and methods of a super class.\n * It uses a form of prototypal inheritance, and establishes the `constructor` property\n * correctly(?).\n *\n * It is not clear to the current maintainers if this implementation is making sense,\n * since it creates an intermediate prototype function,\n * which all properties of `Super` are copied onto using `_copy`.\n *\n * @param {Object} Class\n * The class that is to be extended.\n * @param {Object} Super\n * The super class from which properties and methods are inherited.\n * @private\n */\nfunction _extends(Class, Super) {\n\tvar pt = Class.prototype;\n\tif (!(pt instanceof Super)) {\n\t\tfunction t() {}\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt, t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif (pt.constructor != Class) {\n\t\tif (typeof Class != 'function') {\n\t\t\tconsole.error('unknown Class:' + Class);\n\t\t}\n\t\tpt.constructor = Class;\n\t}\n}\n\nvar NodeType = {};\nvar ELEMENT_NODE = (NodeType.ELEMENT_NODE = 1);\nvar ATTRIBUTE_NODE = (NodeType.ATTRIBUTE_NODE = 2);\nvar TEXT_NODE = (NodeType.TEXT_NODE = 3);\nvar CDATA_SECTION_NODE = (NodeType.CDATA_SECTION_NODE = 4);\nvar ENTITY_REFERENCE_NODE = (NodeType.ENTITY_REFERENCE_NODE = 5);\nvar ENTITY_NODE = (NodeType.ENTITY_NODE = 6);\nvar PROCESSING_INSTRUCTION_NODE = (NodeType.PROCESSING_INSTRUCTION_NODE = 7);\nvar COMMENT_NODE = (NodeType.COMMENT_NODE = 8);\nvar DOCUMENT_NODE = (NodeType.DOCUMENT_NODE = 9);\nvar DOCUMENT_TYPE_NODE = (NodeType.DOCUMENT_TYPE_NODE = 10);\nvar DOCUMENT_FRAGMENT_NODE = (NodeType.DOCUMENT_FRAGMENT_NODE = 11);\nvar NOTATION_NODE = (NodeType.NOTATION_NODE = 12);\n\nvar DocumentPosition = conventions.freeze({\n\tDOCUMENT_POSITION_DISCONNECTED: 1,\n\tDOCUMENT_POSITION_PRECEDING: 2,\n\tDOCUMENT_POSITION_FOLLOWING: 4,\n\tDOCUMENT_POSITION_CONTAINS: 8,\n\tDOCUMENT_POSITION_CONTAINED_BY: 16,\n\tDOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC: 32,\n});\n\n//helper functions for compareDocumentPosition\n/**\n * Constructs a parent chain for a node.\n *\n * @param {Node} node\n * The start node from which the parent chain will be constructed.\n * @returns {Node[]}\n * The array of nodes representing the parent chain from the root to the specified node.\n */\nfunction parentChain(node) {\n\tvar chain = [];\n\twhile (node.parentNode || node.ownerElement) {\n\t\tnode = node.parentNode || node.ownerElement;\n\t\tchain.unshift(node);\n\t}\n\treturn chain;\n}\n\n/**\n * Finds the common ancestor in two parent chains.\n *\n * @param {Node[]} a\n * The first parent chain.\n * @param {Node[]} b\n * The second parent chain.\n * @returns {Node}\n * The common ancestor node if it exists. If there is no common ancestor, the function will\n * return `null`.\n */\nfunction commonAncestor(a, b) {\n\tif (b.length < a.length) return commonAncestor(b, a);\n\tvar c = null;\n\tfor (var n in a) {\n\t\tif (a[n] !== b[n]) return c;\n\t\tc = a[n];\n\t}\n\treturn c;\n}\n\n/**\n * Assigns a unique identifier to a document to ensure consistency while comparing unrelated\n * nodes.\n *\n * @param {Document} doc\n * The document to which a unique identifier is to be assigned.\n * @returns {string}\n * The unique identifier of the document. If the document already had a unique identifier, the\n * function will return the existing one.\n */\nfunction docGUID(doc) {\n\tif (!doc.guid) doc.guid = Math.random();\n\treturn doc.guid;\n}\n//-- end of helper functions\n\n/**\n * The NodeList interface provides the abstraction of an ordered collection of nodes,\n * without defining or constraining how this collection is implemented.\n * NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n * You can also access the items of the NodeList with a `for...of` loop.\n *\n * @class NodeList\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * @constructs NodeList\n */\nfunction NodeList() {}\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1\n\t * inclusive.\n\t *\n\t * @type {number}\n\t */\n\tlength: 0,\n\t/**\n\t * Returns the item at `index`. If index is greater than or equal to the number of nodes in\n\t * the list, this returns null.\n\t *\n\t * @param index\n\t * Unsigned long Index into the collection.\n\t * @returns {Node | null}\n\t * The node at position `index` in the NodeList,\n\t * or null if that is not a valid index.\n\t */\n\titem: function (index) {\n\t\treturn index >= 0 && index < this.length ? this[index] : null;\n\t},\n\t/**\n\t * Returns a string representation of the NodeList.\n\t *\n\t * @param {unknown} nodeFilter\n\t * __A filter function? Not implemented according to the spec?__.\n\t * @returns {string}\n\t * A string representation of the NodeList.\n\t */\n\ttoString: function (nodeFilter) {\n\t\tfor (var buf = [], i = 0; i < this.length; i++) {\n\t\t\tserializeToString(this[i], buf, nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * Filters the NodeList based on a predicate.\n\t *\n\t * @param {function(Node): boolean} predicate\n\t * - A predicate function to filter the NodeList.\n\t * @returns {Node[]}\n\t * An array of nodes that satisfy the predicate.\n\t * @private\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * Returns the first index at which a given node can be found in the NodeList, or -1 if it is\n\t * not present.\n\t *\n\t * @param {Node} item\n\t * - The Node item to locate in the NodeList.\n\t * @returns {number}\n\t * The first index of the node in the NodeList; -1 if not found.\n\t * @private\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\nNodeList.prototype[Symbol.iterator] = function () {\n\tvar me = this;\n\tvar index = 0;\n\n\treturn {\n\t\tnext: function () {\n\t\t\tif (index < me.length) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: me[index++],\n\t\t\t\t\tdone: false,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tdone: true,\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\treturn: function () {\n\t\t\treturn {\n\t\t\t\tdone: true,\n\t\t\t};\n\t\t},\n\t};\n};\n\n/**\n * Represents a live collection of nodes that is automatically updated when its associated\n * document changes.\n *\n * @class LiveNodeList\n * @param {Node} node\n * The associated node.\n * @param {function} refresh\n * The function to refresh the live node list.\n * @augments NodeList\n * @constructs LiveNodeList\n */\nfunction LiveNodeList(node, refresh) {\n\tthis._node = node;\n\tthis._refresh = refresh;\n\t_updateLiveList(this);\n}\n/**\n * Updates the live node list.\n *\n * @param {LiveNodeList} list\n * The live node list to update.\n * @private\n */\nfunction _updateLiveList(list) {\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif (list._inc !== inc) {\n\t\tvar ls = list._refresh(list._node);\n\t\t__set__(list, 'length', ls.length);\n\t\tif (!list.$$length || ls.length < list.$$length) {\n\t\t\tfor (var i = ls.length; i in list; i++) {\n\t\t\t\tif (hasOwn(list, i)) {\n\t\t\t\t\tdelete list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcopy(ls, list);\n\t\tlist._inc = inc;\n\t}\n}\n/**\n * Returns the node at position `index` in the LiveNodeList, or null if that is not a valid\n * index.\n *\n * @param {number} i\n * Index into the collection.\n * @returns {Node | null}\n * The node at position `index` in the LiveNodeList, or null if that is not a valid index.\n */\nLiveNodeList.prototype.item = function (i) {\n\t_updateLiveList(this);\n\treturn this[i] || null;\n};\n\n_extends(LiveNodeList, NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes\n * that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal\n * index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n *\n * This implementation only supports property indices, but does not support named properties,\n * as specified in the living standard.\n *\n * @class NamedNodeMap\n * @see https://dom.spec.whatwg.org/#interface-namednodemap\n * @see https://webidl.spec.whatwg.org/#dfn-supported-property-names\n * @constructs NamedNodeMap\n */\nfunction NamedNodeMap() {}\n/**\n * Returns the index of a node within the list.\n *\n * @param {Array} list\n * The list of nodes.\n * @param {Node} node\n * The node to find.\n * @returns {number}\n * The index of the node within the list, or -1 if not found.\n * @private\n */\nfunction _findNodeIndex(list, node) {\n\tvar i = 0;\n\twhile (i < list.length) {\n\t\tif (list[i] === node) {\n\t\t\treturn i;\n\t\t}\n\t\ti++;\n\t}\n}\n/**\n * Adds a new attribute to the list and updates the owner element of the attribute.\n *\n * @param {Element} el\n * The element which will become the owner of the new attribute.\n * @param {NamedNodeMap} list\n * The list to which the new attribute will be added.\n * @param {Attr} newAttr\n * The new attribute to be added.\n * @param {Attr} oldAttr\n * The old attribute to be replaced, or null if no attribute is to be replaced.\n * @returns {void}\n * @private\n */\nfunction _addNamedNode(el, list, newAttr, oldAttr) {\n\tif (oldAttr) {\n\t\tlist[_findNodeIndex(list, oldAttr)] = newAttr;\n\t} else {\n\t\tlist[list.length] = newAttr;\n\t\tlist.length++;\n\t}\n\tif (el) {\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif (doc) {\n\t\t\toldAttr && _onRemoveAttribute(doc, el, oldAttr);\n\t\t\t_onAddAttribute(doc, el, newAttr);\n\t\t}\n\t}\n}\n/**\n * Removes an attribute from the list and updates the owner element of the attribute.\n *\n * @param {Element} el\n * The element which is the current owner of the attribute.\n * @param {NamedNodeMap} list\n * The list from which the attribute will be removed.\n * @param {Attr} attr\n * The attribute to be removed.\n * @returns {void}\n * @private\n */\nfunction _removeNamedNode(el, list, attr) {\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list, attr);\n\tif (i >= 0) {\n\t\tvar lastIndex = list.length - 1;\n\t\twhile (i <= lastIndex) {\n\t\t\tlist[i] = list[++i];\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif (el) {\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif (doc) {\n\t\t\t\t_onRemoveAttribute(doc, el, attr);\n\t\t\t}\n\t\t\tattr.ownerElement = null;\n\t\t}\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength: 0,\n\titem: NodeList.prototype.item,\n\n\t/**\n\t * Get an attribute by name. Note: Name is in lower case in case of HTML namespace and\n\t * document.\n\t *\n\t * @param {string} localName\n\t * The local name of the attribute.\n\t * @returns {Attr | null}\n\t * The attribute with the given local name, or null if no such attribute exists.\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-get-by-name\n\t */\n\tgetNamedItem: function (localName) {\n\t\tif (this._ownerElement && this._ownerElement._isInHTMLDocumentAndNamespace()) {\n\t\t\tlocalName = localName.toLowerCase();\n\t\t}\n\t\tvar i = 0;\n\t\twhile (i < this.length) {\n\t\t\tvar attr = this[i];\n\t\t\tif (attr.nodeName === localName) {\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t},\n\n\t/**\n\t * Set an attribute.\n\t *\n\t * @param {Attr} attr\n\t * The attribute to set.\n\t * @returns {Attr | null}\n\t * The old attribute with the same local name and namespace URI as the new one, or null if no\n\t * such attribute exists.\n\t * @throws {DOMException}\n\t * With code:\n\t * - {@link INUSE_ATTRIBUTE_ERR} - If the attribute is already an attribute of another\n\t * element.\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-set\n\t */\n\tsetNamedItem: function (attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif (el && el !== this._ownerElement) {\n\t\t\tthrow new DOMException(DOMException.INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItemNS(attr.namespaceURI, attr.localName);\n\t\tif (oldAttr === attr) {\n\t\t\treturn attr;\n\t\t}\n\t\t_addNamedNode(this._ownerElement, this, attr, oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/**\n\t * Set an attribute, replacing an existing attribute with the same local name and namespace\n\t * URI if one exists.\n\t *\n\t * @param {Attr} attr\n\t * The attribute to set.\n\t * @returns {Attr | null}\n\t * The old attribute with the same local name and namespace URI as the new one, or null if no\n\t * such attribute exists.\n\t * @throws {DOMException}\n\t * Throws a DOMException with the name \"InUseAttributeError\" if the attribute is already an\n\t * attribute of another element.\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-set\n\t */\n\tsetNamedItemNS: function (attr) {\n\t\treturn this.setNamedItem(attr);\n\t},\n\n\t/**\n\t * Removes an attribute specified by the local name.\n\t *\n\t * @param {string} localName\n\t * The local name of the attribute to be removed.\n\t * @returns {Attr}\n\t * The attribute node that was removed.\n\t * @throws {DOMException}\n\t * With code:\n\t * - {@link DOMException.NOT_FOUND_ERR} if no attribute with the given name is found.\n\t * @see https://dom.spec.whatwg.org/#dom-namednodemap-removenameditem\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-remove-by-name\n\t */\n\tremoveNamedItem: function (localName) {\n\t\tvar attr = this.getNamedItem(localName);\n\t\tif (!attr) {\n\t\t\tthrow new DOMException(DOMException.NOT_FOUND_ERR, localName);\n\t\t}\n\t\t_removeNamedNode(this._ownerElement, this, attr);\n\t\treturn attr;\n\t},\n\n\t/**\n\t * Removes an attribute specified by the namespace and local name.\n\t *\n\t * @param {string | null} namespaceURI\n\t * The namespace URI of the attribute to be removed.\n\t * @param {string} localName\n\t * The local name of the attribute to be removed.\n\t * @returns {Attr}\n\t * The attribute node that was removed.\n\t * @throws {DOMException}\n\t * With code:\n\t * - {@link DOMException.NOT_FOUND_ERR} if no attribute with the given namespace URI and local\n\t * name is found.\n\t * @see https://dom.spec.whatwg.org/#dom-namednodemap-removenameditemns\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-remove-by-namespace\n\t */\n\tremoveNamedItemNS: function (namespaceURI, localName) {\n\t\tvar attr = this.getNamedItemNS(namespaceURI, localName);\n\t\tif (!attr) {\n\t\t\tthrow new DOMException(DOMException.NOT_FOUND_ERR, namespaceURI ? namespaceURI + ' : ' + localName : localName);\n\t\t}\n\t\t_removeNamedNode(this._ownerElement, this, attr);\n\t\treturn attr;\n\t},\n\n\t/**\n\t * Get an attribute by namespace and local name.\n\t *\n\t * @param {string | null} namespaceURI\n\t * The namespace URI of the attribute.\n\t * @param {string} localName\n\t * The local name of the attribute.\n\t * @returns {Attr | null}\n\t * The attribute with the given namespace URI and local name, or null if no such attribute\n\t * exists.\n\t * @see https://dom.spec.whatwg.org/#concept-element-attributes-get-by-namespace\n\t */\n\tgetNamedItemNS: function (namespaceURI, localName) {\n\t\tif (!namespaceURI) {\n\t\t\tnamespaceURI = null;\n\t\t}\n\t\tvar i = 0;\n\t\twhile (i < this.length) {\n\t\t\tvar node = this[i];\n\t\t\tif (node.localName === localName && node.namespaceURI === namespaceURI) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\treturn null;\n\t},\n};\nNamedNodeMap.prototype[Symbol.iterator] = function () {\n\tvar me = this;\n\tvar index = 0;\n\n\treturn {\n\t\tnext: function () {\n\t\t\tif (index < me.length) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: me[index++],\n\t\t\t\t\tdone: false,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tdone: true,\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\treturn: function () {\n\t\t\treturn {\n\t\t\t\tdone: true,\n\t\t\t};\n\t\t},\n\t};\n};\n\n/**\n * The DOMImplementation interface provides a number of methods for performing operations that\n * are independent of any particular instance of the document object model.\n *\n * The DOMImplementation interface represents an object providing methods which are not\n * dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * **The individual methods describe the differences compared to the specs**.\n *\n * @class DOMImplementation\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core\n *      (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n * @constructs DOMImplementation\n */\nfunction DOMImplementation() {}\n\nDOMImplementation.prototype = {\n\t/**\n\t * Test if the DOM implementation implements a specific feature and version, as specified in\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures DOM Features}.\n\t *\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given\n\t * feature is supported. The different implementations fairly diverged in what kind of\n\t * features were reported. The latest version of the spec settled to force this method to\n\t * always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated\n\t * It is deprecated and modern browsers return true in all cases.\n\t * @function DOMImplementation#hasFeature\n\t * @param {string} feature\n\t * The name of the feature to test.\n\t * @param {string} [version]\n\t * This is the version number of the feature to test.\n\t * @returns {boolean}\n\t * Always returns true.\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-5CED94D7 DOM Level 3 Core\n\t */\n\thasFeature: function (feature, version) {\n\t\treturn true;\n\t},\n\t/**\n\t * Creates a DOM Document object of the specified type with its document element. Note that\n\t * based on the {@link DocumentType}\n\t * given to create the document, the implementation may instantiate specialized\n\t * {@link Document} objects that support additional features than the \"Core\", such as \"HTML\"\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#DOM2HTML DOM Level 2 HTML}.\n\t * On the other hand, setting the {@link DocumentType} after the document was created makes\n\t * this very unlikely to happen. Alternatively, specialized {@link Document} creation methods,\n\t * such as createHTMLDocument\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#DOM2HTML DOM Level 2 HTML},\n\t * can be used to obtain specific types of {@link Document} objects.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document`\n\t * instance (with it's `type` set to `'xml'`).\n\t * - `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t *\n\t * @function DOMImplementation.createDocument\n\t * @param {string | null} namespaceURI\n\t * The\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-namespaceURI namespace URI}\n\t * of the document element to create or null.\n\t * @param {string | null} qualifiedName\n\t * The\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-qualifiedname qualified name}\n\t * of the document element to be created or null.\n\t * @param {DocumentType | null} [doctype=null]\n\t * The type of document to be created or null. When doctype is not null, its\n\t * {@link Node#ownerDocument} attribute is set to the document being created. Default is\n\t * `null`\n\t * @returns {Document}\n\t * A new {@link Document} object with its document element. If the NamespaceURI,\n\t * qualifiedName, and doctype are null, the returned {@link Document} is empty with no\n\t * document element.\n\t * @throws {DOMException}\n\t * With code:\n\t *\n\t * - `INVALID_CHARACTER_ERR`: Raised if the specified qualified name is not an XML name\n\t * according to {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#XML XML 1.0}.\n\t * - `NAMESPACE_ERR`: Raised if the qualifiedName is malformed, if the qualifiedName has a\n\t * prefix and the namespaceURI is null, or if the qualifiedName is null and the namespaceURI\n\t * is different from null, or if the qualifiedName has a prefix that is \"xml\" and the\n\t * namespaceURI is different from \"{@link http://www.w3.org/XML/1998/namespace}\"\n\t * {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#Namespaces XML Namespaces},\n\t * or if the DOM implementation does not support the \"XML\" feature but a non-null namespace\n\t * URI was provided, since namespaces were defined by XML.\n\t * - `WRONG_DOCUMENT_ERR`: Raised if doctype has already been used with a different document\n\t * or was created from a different implementation.\n\t * - `NOT_SUPPORTED_ERR`: May be raised if the implementation does not support the feature\n\t * \"XML\" and the language exposed through the Document does not support XML Namespaces (such\n\t * as {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#HTML40 HTML 4.01}).\n\t * @since DOM Level 2.\n\t * @see {@link #createHTMLDocument}\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument DOM Living Standard\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Level-2-Core-DOM-createDocument DOM\n\t *      Level 3 Core\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM\n\t *      Level 2 Core (initial)\n\t */\n\tcreateDocument: function (namespaceURI, qualifiedName, doctype) {\n\t\tvar contentType = MIME_TYPE.XML_APPLICATION;\n\t\tif (namespaceURI === NAMESPACE.HTML) {\n\t\t\tcontentType = MIME_TYPE.XML_XHTML_APPLICATION;\n\t\t} else if (namespaceURI === NAMESPACE.SVG) {\n\t\t\tcontentType = MIME_TYPE.XML_SVG_IMAGE;\n\t\t}\n\t\tvar doc = new Document(PDC, { contentType: contentType });\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype) {\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName) {\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Creates an empty DocumentType node. Entity declarations and notations are not made\n\t * available. Entity reference expansions and default attribute additions do not occur.\n\t *\n\t * **This behavior is slightly different from the one in the specs**:\n\t * - `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - `publicId` and `systemId` contain the raw data including any possible quotes,\n\t *   so they can always be serialized back to the original value\n\t * - `internalSubset` contains the raw string between `[` and `]` if present,\n\t *   but is not parsed or validated in any form.\n\t *\n\t * @function DOMImplementation#createDocumentType\n\t * @param {string} qualifiedName\n\t * The {@link https://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-qualifiedname qualified\n\t * name} of the document type to be created.\n\t * @param {string} [publicId]\n\t * The external subset public identifier.\n\t * @param {string} [systemId]\n\t * The external subset system identifier.\n\t * @param {string} [internalSubset]\n\t * the internal subset or an empty string if it is not present\n\t * @returns {DocumentType}\n\t * A new {@link DocumentType} node with {@link Node#ownerDocument} set to null.\n\t * @throws {DOMException}\n\t * With code:\n\t *\n\t * - `INVALID_CHARACTER_ERR`: Raised if the specified qualified name is not an XML name\n\t * according to {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#XML XML 1.0}.\n\t * - `NAMESPACE_ERR`: Raised if the qualifiedName is malformed.\n\t * - `NOT_SUPPORTED_ERR`: May be raised if the implementation does not support the feature\n\t * \"XML\" and the language exposed through the Document does not support XML Namespaces (such\n\t * as {@link https://www.w3.org/TR/DOM-Level-3-Core/references.html#HTML40 HTML 4.01}).\n\t * @since DOM Level 2.\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType\n\t *      MDN\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living\n\t *      Standard\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Level-3-Core-DOM-createDocType DOM\n\t *      Level 3 Core\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM\n\t *      Level 2 Core\n\t * @see https://github.com/xmldom/xmldom/blob/master/CHANGELOG.md#050\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/#core-ID-Core-DocType-internalSubset\n\t * @prettierignore\n\t */\n\tcreateDocumentType: function (qualifiedName, publicId, systemId, internalSubset) {\n\t\tvalidateQualifiedName(qualifiedName);\n\t\tvar node = new DocumentType(PDC);\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\t\tnode.internalSubset = internalSubset || '';\n\t\tnode.childNodes = new NodeList();\n\n\t\treturn node;\n\t},\n\t/**\n\t * Returns an HTML document, that might already have a basic DOM structure.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - If the first argument is `false` no initial nodes are added (steps 3-7 in the specs are\n\t * omitted)\n\t * - `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t *\n\t * @param {string | false} [title]\n\t * A string containing the title to give the new HTML document.\n\t * @returns {Document}\n\t * The HTML document.\n\t * @since WHATWG Living Standard.\n\t * @see {@link #createDocument}\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createhtmldocument\n\t * @see https://dom.spec.whatwg.org/#html-document\n\t */\n\tcreateHTMLDocument: function (title) {\n\t\tvar doc = new Document(PDC, { contentType: MIME_TYPE.HTML });\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tif (title !== false) {\n\t\t\tdoc.doctype = this.createDocumentType('html');\n\t\t\tdoc.doctype.ownerDocument = doc;\n\t\t\tdoc.appendChild(doc.doctype);\n\t\t\tvar htmlNode = doc.createElement('html');\n\t\t\tdoc.appendChild(htmlNode);\n\t\t\tvar headNode = doc.createElement('head');\n\t\t\thtmlNode.appendChild(headNode);\n\t\t\tif (typeof title === 'string') {\n\t\t\t\tvar titleNode = doc.createElement('title');\n\t\t\t\ttitleNode.appendChild(doc.createTextNode(title));\n\t\t\t\theadNode.appendChild(titleNode);\n\t\t\t}\n\t\t\thtmlNode.appendChild(doc.createElement('body'));\n\t\t}\n\t\treturn doc;\n\t},\n};\n\n/**\n * The DOM Node interface is an abstract base class upon which many other DOM API objects are\n * based, thus letting those object types to be used similarly and often interchangeably. As an\n * abstract class, there is no such thing as a plain Node object. All objects that implement\n * Node functionality are based on one of its subclasses. Most notable are Document, Element,\n * and DocumentFragment.\n *\n * In addition, every kind of DOM node is represented by an interface based on Node. These\n * include Attr, CharacterData (which Text, Comment, CDATASection and ProcessingInstruction are\n * all based on), and DocumentType.\n *\n * In some cases, a particular feature of the base Node interface may not apply to one of its\n * child interfaces; in that case, the inheriting node may return null or throw an exception,\n * depending on circumstances. For example, attempting to add children to a node type that\n * cannot have children will throw an exception.\n *\n * **This behavior is slightly different from the in the specs**:\n * - unimplemented interfaces: `EventTarget`\n *\n * @class\n * @abstract\n * @param {Symbol} symbol\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n * @see https://dom.spec.whatwg.org/#node\n * @prettierignore\n */\nfunction Node(symbol) {\n\tcheckSymbol(symbol);\n}\n\nNode.prototype = {\n\t/**\n\t * The first child of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tfirstChild: null,\n\t/**\n\t * The last child of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tlastChild: null,\n\t/**\n\t * The previous sibling of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tpreviousSibling: null,\n\t/**\n\t * The next sibling of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tnextSibling: null,\n\t/**\n\t * The parent node of this node.\n\t *\n\t * @type {Node | null}\n\t */\n\tparentNode: null,\n\t/**\n\t * The parent element of this node.\n\t *\n\t * @type {Element | null}\n\t */\n\tget parentElement() {\n\t\treturn this.parentNode && this.parentNode.nodeType === this.ELEMENT_NODE ? this.parentNode : null;\n\t},\n\t/**\n\t * The child nodes of this node.\n\t *\n\t * @type {NodeList}\n\t */\n\tchildNodes: null,\n\t/**\n\t * The document object associated with this node.\n\t *\n\t * @type {Document | null}\n\t */\n\townerDocument: null,\n\t/**\n\t * The value of this node.\n\t *\n\t * @type {string | null}\n\t */\n\tnodeValue: null,\n\t/**\n\t * The namespace URI of this node.\n\t *\n\t * @type {string | null}\n\t */\n\tnamespaceURI: null,\n\t/**\n\t * The prefix of the namespace for this node.\n\t *\n\t * @type {string | null}\n\t */\n\tprefix: null,\n\t/**\n\t * The local part of the qualified name of this node.\n\t *\n\t * @type {string | null}\n\t */\n\tlocalName: null,\n\t/**\n\t * The baseURI is currently always `about:blank`,\n\t * since that's what happens when you create a document from scratch.\n\t *\n\t * @type {'about:blank'}\n\t */\n\tbaseURI: 'about:blank',\n\t/**\n\t * Is true if this node is part of a document.\n\t *\n\t * @type {boolean}\n\t */\n\tget isConnected() {\n\t\tvar rootNode = this.getRootNode();\n\t\treturn rootNode && rootNode.nodeType === rootNode.DOCUMENT_NODE;\n\t},\n\t/**\n\t * Checks whether `other` is an inclusive descendant of this node.\n\t *\n\t * @param {Node | null | undefined} other\n\t * The node to check.\n\t * @returns {boolean}\n\t * True if `other` is an inclusive descendant of this node; false otherwise.\n\t * @see https://dom.spec.whatwg.org/#dom-node-contains\n\t */\n\tcontains: function (other) {\n\t\tif (!other) return false;\n\t\tvar parent = other;\n\t\tdo {\n\t\t\tif (this === parent) return true;\n\t\t\tparent = other.parentNode;\n\t\t} while (parent);\n\t\treturn false;\n\t},\n\t/**\n\t * @typedef GetRootNodeOptions\n\t * @property {boolean} [composed=false]\n\t */\n\t/**\n\t * Searches for the root node of this node.\n\t *\n\t * **This behavior is slightly different from the in the specs**:\n\t * - ignores `options.composed`, since `ShadowRoot`s are unsupported, always returns root.\n\t *\n\t * @param {GetRootNodeOptions} [options]\n\t * @returns {Node}\n\t * Root node.\n\t * @see https://dom.spec.whatwg.org/#dom-node-getrootnode\n\t * @see https://dom.spec.whatwg.org/#concept-shadow-including-root\n\t */\n\tgetRootNode: function (options) {\n\t\tvar parent = this;\n\t\tdo {\n\t\t\tif (!parent.parentNode) {\n\t\t\t\treturn parent;\n\t\t\t}\n\t\t\tparent = parent.parentNode;\n\t\t} while (parent);\n\t},\n\t/**\n\t * Checks whether the given node is equal to this node.\n\t *\n\t * @param {Node} [otherNode]\n\t * @see https://dom.spec.whatwg.org/#concept-node-equals\n\t */\n\tisEqualNode: function (otherNode) {\n\t\tif (!otherNode) return false;\n\n\t\tif (this.nodeType !== otherNode.nodeType) return false;\n\n\t\tswitch (this.nodeType) {\n\t\t\tcase this.DOCUMENT_TYPE_NODE:\n\t\t\t\tif (this.name !== otherNode.name) return false;\n\t\t\t\tif (this.publicId !== otherNode.publicId) return false;\n\t\t\t\tif (this.systemId !== otherNode.systemId) return false;\n\t\t\t\tbreak;\n\t\t\tcase this.ELEMENT_NODE:\n\t\t\t\tif (this.namespaceURI !== otherNode.namespaceURI) return false;\n\t\t\t\tif (this.prefix !== otherNode.prefix) return false;\n\t\t\t\tif (this.localName !== otherNode.localName) return false;\n\t\t\t\tif (this.attributes.length !== otherNode.attributes.length) return false;\n\t\t\t\tfor (var i = 0; i < this.attributes.length; i++) {\n\t\t\t\t\tvar attr = this.attributes.item(i);\n\t\t\t\t\tif (!attr.isEqualNode(otherNode.getAttributeNodeNS(attr.namespaceURI, attr.localName))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase this.ATTRIBUTE_NODE:\n\t\t\t\tif (this.namespaceURI !== otherNode.namespaceURI) return false;\n\t\t\t\tif (this.localName !== otherNode.localName) return false;\n\t\t\t\tif (this.value !== otherNode.value) return false;\n\n\t\t\t\tbreak;\n\t\t\tcase this.PROCESSING_INSTRUCTION_NODE:\n\t\t\t\tif (this.target !== otherNode.target || this.data !== otherNode.data) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase this.TEXT_NODE:\n\t\t\tcase this.COMMENT_NODE:\n\t\t\t\tif (this.data !== otherNode.data) return false;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (this.childNodes.length !== otherNode.childNodes.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (var i = 0; i < this.childNodes.length; i++) {\n\t\t\tif (!this.childNodes[i].isEqualNode(otherNode.childNodes[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\t/**\n\t * Checks whether or not the given node is this node.\n\t *\n\t * @param {Node} [otherNode]\n\t */\n\tisSameNode: function (otherNode) {\n\t\treturn this === otherNode;\n\t},\n\t/**\n\t * Inserts a node before a reference node as a child of this node.\n\t *\n\t * @param {Node} newChild\n\t * The new child node to be inserted.\n\t * @param {Node | null} refChild\n\t * The reference node before which newChild will be inserted.\n\t * @returns {Node}\n\t * The new child node successfully inserted.\n\t * @throws {DOMException}\n\t * Throws a DOMException if inserting the node would result in a DOM tree that is not\n\t * well-formed, or if `child` is provided but is not a child of `parent`.\n\t * See {@link _insertBefore} for more details.\n\t * @since Modified in DOM L2\n\t */\n\tinsertBefore: function (newChild, refChild) {\n\t\treturn _insertBefore(this, newChild, refChild);\n\t},\n\t/**\n\t * Replaces an old child node with a new child node within this node.\n\t *\n\t * @param {Node} newChild\n\t * The new node that is to replace the old node.\n\t * If it already exists in the DOM, it is removed from its original position.\n\t * @param {Node} oldChild\n\t * The existing child node to be replaced.\n\t * @returns {Node}\n\t * Returns the replaced child node.\n\t * @throws {DOMException}\n\t * Throws a DOMException if replacing the node would result in a DOM tree that is not\n\t * well-formed, or if `oldChild` is not a child of `this`.\n\t * This can also occur if the pre-replacement validity assertion fails.\n\t * See {@link _insertBefore}, {@link Node.removeChild}, and\n\t * {@link assertPreReplacementValidityInDocument} for more details.\n\t * @see https://dom.spec.whatwg.org/#concept-node-replace\n\t */\n\treplaceChild: function (newChild, oldChild) {\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\t/**\n\t * Removes an existing child node from this node.\n\t *\n\t * @param {Node} oldChild\n\t * The child node to be removed.\n\t * @returns {Node}\n\t * Returns the removed child node.\n\t * @throws {DOMException}\n\t * Throws a DOMException if `oldChild` is not a child of `this`.\n\t * See {@link _removeChild} for more details.\n\t */\n\tremoveChild: function (oldChild) {\n\t\treturn _removeChild(this, oldChild);\n\t},\n\t/**\n\t * Appends a child node to this node.\n\t *\n\t * @param {Node} newChild\n\t * The child node to be appended to this node.\n\t * If it already exists in the DOM, it is removed from its original position.\n\t * @returns {Node}\n\t * Returns the appended child node.\n\t * @throws {DOMException}\n\t * Throws a DOMException if appending the node would result in a DOM tree that is not\n\t * well-formed, or if `newChild` is not a valid Node.\n\t * See {@link insertBefore} for more details.\n\t */\n\tappendChild: function (newChild) {\n\t\treturn this.insertBefore(newChild, null);\n\t},\n\t/**\n\t * Determines whether this node has any child nodes.\n\t *\n\t * @returns {boolean}\n\t * Returns true if this node has any child nodes, and false otherwise.\n\t */\n\thasChildNodes: function () {\n\t\treturn this.firstChild != null;\n\t},\n\t/**\n\t * Creates a copy of the calling node.\n\t *\n\t * @param {boolean} deep\n\t * If true, the contents of the node are recursively copied.\n\t * If false, only the node itself (and its attributes, if it is an element) are copied.\n\t * @returns {Node}\n\t * Returns the newly created copy of the node.\n\t * @throws {DOMException}\n\t * May throw a DOMException if operations within {@link Element#setAttributeNode} or\n\t * {@link Node#appendChild} (which are potentially invoked in this method) do not meet their\n\t * specific constraints.\n\t * @see {@link cloneNode}\n\t */\n\tcloneNode: function (deep) {\n\t\treturn cloneNode(this.ownerDocument || this, this, deep);\n\t},\n\t/**\n\t * Puts the specified node and all of its subtree into a \"normalized\" form. In a normalized\n\t * subtree, no text nodes in the subtree are empty and there are no adjacent text nodes.\n\t *\n\t * Specifically, this method merges any adjacent text nodes (i.e., nodes for which `nodeType`\n\t * is `TEXT_NODE`) into a single node with the combined data. It also removes any empty text\n\t * nodes.\n\t *\n\t * This method operates recursively, so it also normalizes any and all descendent nodes within\n\t * the subtree.\n\t *\n\t * @throws {DOMException}\n\t * May throw a DOMException if operations within removeChild or appendData (which are\n\t * potentially invoked in this method) do not meet their specific constraints.\n\t * @since Modified in DOM Level 2\n\t * @see {@link Node.removeChild}\n\t * @see {@link CharacterData.appendData}\n\t */\n\tnormalize: function () {\n\t\tvar child = this.firstChild;\n\t\twhile (child) {\n\t\t\tvar next = child.nextSibling;\n\t\t\tif (next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE) {\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t} else {\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Checks whether the DOM implementation implements a specific feature and its version.\n\t *\n\t * @deprecated\n\t * Since `DOMImplementation.hasFeature` is deprecated and always returns true.\n\t * @param {string} feature\n\t * The package name of the feature to test. This is the same name that can be passed to the\n\t * method `hasFeature` on `DOMImplementation`.\n\t * @param {string} version\n\t * This is the version number of the package name to test.\n\t * @returns {boolean}\n\t * Returns true in all cases in the current implementation.\n\t * @since Introduced in DOM Level 2\n\t * @see {@link DOMImplementation.hasFeature}\n\t */\n\tisSupported: function (feature, version) {\n\t\treturn this.ownerDocument.implementation.hasFeature(feature, version);\n\t},\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * **This behavior is different from the in the specs**:\n\t * - no node type specific handling\n\t * - uses the internal attribute _nsMap for resolving namespaces that is updated when changing attributes\n\t *\n\t * @param {string | null} namespaceURI\n\t * The namespace URI for which to find the associated prefix.\n\t * @returns {string | null}\n\t * The associated prefix, if found; otherwise, null.\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t * @prettierignore\n\t */\n\tlookupPrefix: function (namespaceURI) {\n\t\tvar el = this;\n\t\twhile (el) {\n\t\t\tvar map = el._nsMap;\n\t\t\t//console.dir(map)\n\t\t\tif (map) {\n\t\t\t\tfor (var n in map) {\n\t\t\t\t\tif (hasOwn(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\treturn n;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tel = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n\t\t}\n\t\treturn null;\n\t},\n\t/**\n\t * This function is used to look up the namespace URI associated with the given prefix,\n\t * starting from this node.\n\t *\n\t * **This behavior is different from the in the specs**:\n\t * - no node type specific handling\n\t * - uses the internal attribute _nsMap for resolving namespaces that is updated when changing attributes\n\t *\n\t * @param {string | null} prefix\n\t * The prefix for which to find the associated namespace URI.\n\t * @returns {string | null}\n\t * The associated namespace URI, if found; otherwise, null.\n\t * @since DOM Level 3\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupnamespaceuri\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespaceURI\n\t * @prettierignore\n\t */\n\tlookupNamespaceURI: function (prefix) {\n\t\tvar el = this;\n\t\twhile (el) {\n\t\t\tvar map = el._nsMap;\n\t\t\t//console.dir(map)\n\t\t\tif (map) {\n\t\t\t\tif (hasOwn(map, prefix)) {\n\t\t\t\t\treturn map[prefix];\n\t\t\t\t}\n\t\t\t}\n\t\t\tel = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n\t\t}\n\t\treturn null;\n\t},\n\t/**\n\t * Determines whether the given namespace URI is the default namespace.\n\t *\n\t * The function works by looking up the prefix associated with the given namespace URI. If no\n\t * prefix is found (i.e., the namespace URI is not registered in the namespace map of this\n\t * node or any of its ancestors), it returns `true`, implying the namespace URI is considered\n\t * the default.\n\t *\n\t * **This behavior is different from the in the specs**:\n\t * - no node type specific handling\n\t * - uses the internal attribute _nsMap for resolving namespaces that is updated when changing attributes\n\t *\n\t * @param {string | null} namespaceURI\n\t * The namespace URI to be checked.\n\t * @returns {boolean}\n\t * Returns true if the given namespace URI is the default namespace, false otherwise.\n\t * @since DOM Level 3\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isDefaultNamespace\n\t * @see https://dom.spec.whatwg.org/#dom-node-isdefaultnamespace\n\t * @prettierignore\n\t */\n\tisDefaultNamespace: function (namespaceURI) {\n\t\tvar prefix = this.lookupPrefix(namespaceURI);\n\t\treturn prefix == null;\n\t},\n\t/**\n\t * Compares the reference node with a node with regard to their position in the document and\n\t * according to the document order.\n\t *\n\t * @param {Node} other\n\t * The node to compare the reference node to.\n\t * @returns {number}\n\t * Returns how the node is positioned relatively to the reference node according to the\n\t * bitmask. 0 if reference node and given node are the same.\n\t * @since DOM Level 3\n\t * @see https://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#Node3-compare\n\t * @see https://dom.spec.whatwg.org/#dom-node-comparedocumentposition\n\t */\n\tcompareDocumentPosition: function (other) {\n\t\tif (this === other) return 0;\n\t\tvar node1 = other;\n\t\tvar node2 = this;\n\t\tvar attr1 = null;\n\t\tvar attr2 = null;\n\t\tif (node1 instanceof Attr) {\n\t\t\tattr1 = node1;\n\t\t\tnode1 = attr1.ownerElement;\n\t\t}\n\t\tif (node2 instanceof Attr) {\n\t\t\tattr2 = node2;\n\t\t\tnode2 = attr2.ownerElement;\n\t\t\tif (attr1 && node1 && node2 === node1) {\n\t\t\t\tfor (var i = 0, attr; (attr = node2.attributes[i]); i++) {\n\t\t\t\t\tif (attr === attr1)\n\t\t\t\t\t\treturn DocumentPosition.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t\t\t\tif (attr === attr2)\n\t\t\t\t\t\treturn DocumentPosition.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC + DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!node1 || !node2 || node2.ownerDocument !== node1.ownerDocument) {\n\t\t\treturn (\n\t\t\t\tDocumentPosition.DOCUMENT_POSITION_DISCONNECTED +\n\t\t\t\tDocumentPosition.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC +\n\t\t\t\t(docGUID(node2.ownerDocument) > docGUID(node1.ownerDocument)\n\t\t\t\t\t? DocumentPosition.DOCUMENT_POSITION_FOLLOWING\n\t\t\t\t\t: DocumentPosition.DOCUMENT_POSITION_PRECEDING)\n\t\t\t);\n\t\t}\n\t\tvar chain1 = parentChain(node1);\n\t\tvar chain2 = parentChain(node2);\n\t\tif ((!attr1 && chain2.indexOf(node1) >= 0) || (attr2 && node1 === node2)) {\n\t\t\treturn DocumentPosition.DOCUMENT_POSITION_CONTAINS + DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t}\n\t\tif ((!attr2 && chain1.indexOf(node2) >= 0) || (attr1 && node1 === node2)) {\n\t\t\treturn DocumentPosition.DOCUMENT_POSITION_CONTAINED_BY + DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t}\n\t\tvar ca = commonAncestor(chain2, chain1);\n\t\tfor (var n in ca.childNodes) {\n\t\t\tvar child = ca.childNodes[n];\n\t\t\tif (child === node2) return DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t\tif (child === node1) return DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t\tif (chain2.indexOf(child) >= 0) return DocumentPosition.DOCUMENT_POSITION_FOLLOWING;\n\t\t\tif (chain1.indexOf(child) >= 0) return DocumentPosition.DOCUMENT_POSITION_PRECEDING;\n\t\t}\n\t\treturn 0;\n\t},\n};\n\n/**\n * Encodes special XML characters to their corresponding entities.\n *\n * @param {string} c\n * The character to be encoded.\n * @returns {string}\n * The encoded character.\n * @private\n */\nfunction _xmlEncoder(c) {\n\treturn (\n\t\t(c == '<' && '&lt;') || (c == '>' && '&gt;') || (c == '&' && '&amp;') || (c == '\"' && '&quot;') || '&#' + c.charCodeAt() + ';'\n\t);\n}\n\ncopy(NodeType, Node);\ncopy(NodeType, Node.prototype);\ncopy(DocumentPosition, Node);\ncopy(DocumentPosition, Node.prototype);\n\n/**\n * @param callback\n * Return true for continue,false for break.\n * @returns\n * boolean true: break visit;\n */\nfunction _visitNode(node, callback) {\n\tif (callback(node)) {\n\t\treturn true;\n\t}\n\tif ((node = node.firstChild)) {\n\t\tdo {\n\t\t\tif (_visitNode(node, callback)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} while ((node = node.nextSibling));\n\t}\n}\n\n/**\n * @typedef DocumentOptions\n * @property {string} [contentType=MIME_TYPE.XML_APPLICATION]\n */\n/**\n * The Document interface describes the common properties and methods for any kind of document.\n *\n * It should usually be created using `new DOMImplementation().createDocument(...)`\n * or `new DOMImplementation().createHTMLDocument(...)`.\n *\n * The constructor is considered a private API and offers to initially set the `contentType`\n * property via it's options parameter.\n *\n * @class\n * @param {Symbol} symbol\n * @param {DocumentOptions} [options]\n * @augments Node\n * @private\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document\n * @see https://dom.spec.whatwg.org/#interface-document\n */\nfunction Document(symbol, options) {\n\tcheckSymbol(symbol);\n\n\tvar opt = options || {};\n\tthis.ownerDocument = this;\n\t/**\n\t * The mime type of the document is determined at creation time and can not be modified.\n\t *\n\t * @type {string}\n\t * @see https://dom.spec.whatwg.org/#concept-document-content-type\n\t * @see {@link DOMImplementation}\n\t * @see {@link MIME_TYPE}\n\t * @readonly\n\t */\n\tthis.contentType = opt.contentType || MIME_TYPE.XML_APPLICATION;\n\t/**\n\t * @type {'html' | 'xml'}\n\t * @see https://dom.spec.whatwg.org/#concept-document-type\n\t * @see {@link DOMImplementation}\n\t * @readonly\n\t */\n\tthis.type = isHTMLMimeType(this.contentType) ? 'html' : 'xml';\n}\n\n/**\n * Updates the namespace mapping of an element when a new attribute is added.\n *\n * @param {Document} doc\n * The document that the element belongs to.\n * @param {Element} el\n * The element to which the attribute is being added.\n * @param {Attr} newAttr\n * The new attribute being added.\n * @private\n */\nfunction _onAddAttribute(doc, el, newAttr) {\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI;\n\tif (ns === NAMESPACE.XMLNS) {\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix ? newAttr.localName : ''] = newAttr.value;\n\t}\n}\n\n/**\n * Updates the namespace mapping of an element when an attribute is removed.\n *\n * @param {Document} doc\n * The document that the element belongs to.\n * @param {Element} el\n * The element from which the attribute is being removed.\n * @param {Attr} newAttr\n * The attribute being removed.\n * @param {boolean} remove\n * Indicates whether the attribute is to be removed.\n * @private\n */\nfunction _onRemoveAttribute(doc, el, newAttr, remove) {\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI;\n\tif (ns === NAMESPACE.XMLNS) {\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix ? newAttr.localName : ''];\n\t}\n}\n\n/**\n * Updates `parent.childNodes`, adjusting the indexed items and its `length`.\n * If `newChild` is provided and has no nextSibling, it will be appended.\n * Otherwise, it's assumed that an item has been removed or inserted,\n * and `parent.firstNode` and its `.nextSibling` to re-indexing all child nodes of `parent`.\n *\n * @param {Document} doc\n * The parent document of `el`.\n * @param {Node} parent\n * The parent node whose childNodes list needs to be updated.\n * @param {Node} [newChild]\n * The new child node to be appended. If not provided, the function assumes a node has been\n * removed.\n * @private\n */\nfunction _onUpdateChild(doc, parent, newChild) {\n\tif (doc && doc._inc) {\n\t\tdoc._inc++;\n\t\tvar childNodes = parent.childNodes;\n\t\t// assumes nextSibling and previousSibling were already configured upfront\n\t\tif (newChild && !newChild.nextSibling) {\n\t\t\t// if an item has been appended, we only need to update the last index and the length\n\t\t\tchildNodes[childNodes.length++] = newChild;\n\t\t} else {\n\t\t\t// otherwise we need to reindex all items,\n\t\t\t// which can take a while when processing nodes with a lot of children\n\t\t\tvar child = parent.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tchildNodes[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tchildNodes.length = i;\n\t\t\tdelete childNodes[childNodes.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @param {Node} parentNode\n * The parent node from which the child node is to be removed.\n * @param {Node} child\n * The child node to be removed from the parentNode.\n * @returns {Node}\n * Returns the child node that was removed.\n * @throws {DOMException}\n * With code:\n * - {@link DOMException.NOT_FOUND_ERR} If the parentNode is not the parent of the child node.\n * @private\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n */\nfunction _removeChild(parentNode, child) {\n\tif (parentNode !== child.parentNode) {\n\t\tthrow new DOMException(DOMException.NOT_FOUND_ERR, \"child's parent is not parent\");\n\t}\n\tvar oldPreviousSibling = child.previousSibling;\n\tvar oldNextSibling = child.nextSibling;\n\tif (oldPreviousSibling) {\n\t\toldPreviousSibling.nextSibling = oldNextSibling;\n\t} else {\n\t\tparentNode.firstChild = oldNextSibling;\n\t}\n\tif (oldNextSibling) {\n\t\toldNextSibling.previousSibling = oldPreviousSibling;\n\t} else {\n\t\tparentNode.lastChild = oldPreviousSibling;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.CDATA_SECTION_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.DOCUMENT_TYPE_NODE ||\n\t\t\tnode.nodeType === Node.ELEMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE ||\n\t\t\tnode.nodeType === Node.TEXT_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc\n * The document node.\n * @param {Node} child\n * The node that would become the nextSibling if the element would be inserted.\n * @returns {boolean}\n * `true` if an element can be inserted before child.\n * @private\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc\n * The document node.\n * @param {Node} child\n * The node that would become the nextSibling if the element would be inserted.\n * @returns {boolean}\n * `true` if an element can be inserted before child.\n * @private\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Asserts pre-insertion validity of a node into a parent before a child.\n * Throws errors for invalid node combinations that would result in an ill-formed DOM.\n *\n * @param {Node} parent\n * The parent node to insert `node` into.\n * @param {Node} node\n * The node to insert.\n * @param {Node | null} child\n * The node that should become the `nextSibling` of `node`. If null, no sibling is considered.\n * @throws {DOMException}\n * With code:\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `parent` is not a Document,\n * DocumentFragment, or Element node.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is a host-including inclusive\n * ancestor of `parent`. (Currently not implemented)\n * - {@link DOMException.NOT_FOUND_ERR} If `child` is non-null and its `parent` is not\n * `parent`.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is not a DocumentFragment,\n * DocumentType, Element, or CharacterData node.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If either `node` is a Text node and `parent` is\n * a document, or if `node` is a doctype and `parent` is not a document.\n * @private\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(DOMException.NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tDOMException.HIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * Asserts pre-insertion validity of a node into a document before a child.\n * Throws errors for invalid node combinations that would result in an ill-formed DOM.\n *\n * @param {Document} parent\n * The parent node to insert `node` into.\n * @param {Node} node\n * The node to insert.\n * @param {Node | undefined} child\n * The node that should become the `nextSibling` of `node`. If undefined, no sibling is\n * considered.\n * @returns {Node}\n * @throws {DOMException}\n * With code:\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is a DocumentFragment with more than\n * one element child or has a Text node child.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is a DocumentFragment with one\n * element child and either `parent` has an element child, `child` is a doctype, or `child` is\n * non-null and a doctype is following `child`.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is an Element and `parent` has an\n * element child, `child` is a doctype, or `child` is non-null and a doctype is following\n * `child`.\n * - {@link DOMException.HIERARCHY_REQUEST_ERR} If `node` is a DocumentType and `parent` has a\n * doctype child, `child` is non-null and an element is preceding `child`, or `child` is null\n * and `parent` has an element child.\n * @private\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @param {Document} parent\n * The parent node to insert `node` into.\n * @param {Node} node\n * The node to insert.\n * @param {Node | undefined} child\n * the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws {DOMException}\n * For several node combinations that would create a DOM that is not well-formed.\n * @throws {DOMException}\n * If `child` is provided but is not a child of `parent`.\n * @private\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(DOMException.HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * Inserts a node into a parent node before a child node.\n *\n * @param {Node} parent\n * The parent node to insert the node into.\n * @param {Node} node\n * The node to insert into the parent.\n * @param {Node | null} child\n * The node that should become the next sibling of the node.\n * If null, the function inserts the node at the end of the children of the parent node.\n * @param {Function} [_inDocumentAssertion]\n * An optional function to check pre-insertion validity if parent is a document node.\n * Defaults to {@link assertPreInsertionValidityInDocument}\n * @returns {Node}\n * Returns the inserted node.\n * @throws {DOMException}\n * Throws a DOMException if inserting the node would result in a DOM tree that is not\n * well-formed. See {@link assertPreInsertionValidity1to5},\n * {@link assertPreInsertionValidityInDocument}.\n * @throws {DOMException}\n * Throws a DOMException if child is provided but is not a child of the parent. See\n * {@link Node.removeChild}\n * @private\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif (cp) {\n\t\tcp.removeChild(node); //remove and update\n\t}\n\tif (node.nodeType === DOCUMENT_FRAGMENT_NODE) {\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t} else {\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\tif (pre) {\n\t\tpre.nextSibling = newFirst;\n\t} else {\n\t\tparent.firstChild = newFirst;\n\t}\n\tif (child == null) {\n\t\tparent.lastChild = newLast;\n\t} else {\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo {\n\t\tnewFirst.parentNode = parent;\n\t} while (newFirst !== newLast && (newFirst = newFirst.nextSibling));\n\t_onUpdateChild(parent.ownerDocument || parent, parent, node);\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\n\treturn node;\n}\n\nDocument.prototype = {\n\t/**\n\t * The implementation that created this document.\n\t *\n\t * @type DOMImplementation\n\t * @readonly\n\t */\n\timplementation: null,\n\tnodeName: '#document',\n\tnodeType: DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @type DocumentType\n\t * @readonly\n\t */\n\tdoctype: null,\n\tdocumentElement: null,\n\t_inc: 1,\n\n\tinsertBefore: function (newChild, refChild) {\n\t\t//raises\n\t\tif (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile (child) {\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child, refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild: function (oldChild) {\n\t\tvar removed = _removeChild(this, oldChild);\n\t\tif (removed === this.documentElement) {\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn removed;\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode: function (importedNode, deep) {\n\t\treturn importNode(this, importedNode, deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById: function (id) {\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement, function (node) {\n\t\t\tif (node.nodeType == ELEMENT_NODE) {\n\t\t\t\tif (node.getAttribute('id') == id) {\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * Creates a new `Element` that is owned by this `Document`.\n\t * In HTML Documents `localName` is the lower cased `tagName`,\n\t * otherwise no transformation is being applied.\n\t * When `contentType` implies the HTML namespace, it will be set as `namespaceURI`.\n\t *\n\t * __This implementation differs from the specification:__ - The provided name is not checked\n\t * against the `Name` production,\n\t * so no related error will be thrown.\n\t * - There is no interface `HTMLElement`, it is always an `Element`.\n\t * - There is no support for a second argument to indicate using custom elements.\n\t *\n\t * @param {string} tagName\n\t * @returns {Element}\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement\n\t * @see https://dom.spec.whatwg.org/#dom-document-createelement\n\t * @see https://dom.spec.whatwg.org/#concept-create-element\n\t */\n\tcreateElement: function (tagName) {\n\t\tvar node = new Element(PDC);\n\t\tnode.ownerDocument = this;\n\t\tif (this.type === 'html') {\n\t\t\ttagName = tagName.toLowerCase();\n\t\t}\n\t\tif (hasDefaultHTMLNamespace(this.contentType)) {\n\t\t\tnode.namespaceURI = NAMESPACE.HTML;\n\t\t}\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs = (node.attributes = new NamedNodeMap());\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t/**\n\t * @returns {DocumentFragment}\n\t */\n\tcreateDocumentFragment: function () {\n\t\tvar node = new DocumentFragment(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\t/**\n\t * @param {string} data\n\t * @returns {Text}\n\t */\n\tcreateTextNode: function (data) {\n\t\tvar node = new Text(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\t/**\n\t * @param {string} data\n\t * @returns {Comment}\n\t */\n\tcreateComment: function (data) {\n\t\tvar node = new Comment(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\t/**\n\t * @param {string} data\n\t * @returns {CDATASection}\n\t */\n\tcreateCDATASection: function (data) {\n\t\tvar node = new CDATASection(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.appendData(data);\n\t\treturn node;\n\t},\n\t/**\n\t * @param {string} target\n\t * @param {string} data\n\t * @returns {ProcessingInstruction}\n\t */\n\tcreateProcessingInstruction: function (target, data) {\n\t\tvar node = new ProcessingInstruction(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.nodeName = node.target = target;\n\t\tnode.nodeValue = node.data = data;\n\t\treturn node;\n\t},\n\t/**\n\t * Creates an `Attr` node that is owned by this document.\n\t * In HTML Documents `localName` is the lower cased `name`,\n\t * otherwise no transformation is being applied.\n\t *\n\t * __This implementation differs from the specification:__ - The provided name is not checked\n\t * against the `Name` production,\n\t * so no related error will be thrown.\n\t *\n\t * @param {string} name\n\t * @returns {Attr}\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/createAttribute\n\t * @see https://dom.spec.whatwg.org/#dom-document-createattribute\n\t */\n\tcreateAttribute: function (name) {\n\t\tif (!g.QName_exact.test(name)) {\n\t\t\tthrow new DOMException(DOMException.INVALID_CHARACTER_ERR, 'invalid character in name \"' + name + '\"');\n\t\t}\n\t\tif (this.type === 'html') {\n\t\t\tname = name.toLowerCase();\n\t\t}\n\t\treturn this._createAttribute(name);\n\t},\n\t_createAttribute: function (name) {\n\t\tvar node = new Attr(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.name = name;\n\t\tnode.nodeName = name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\t/**\n\t * Creates an EntityReference object.\n\t * The current implementation does not fill the `childNodes` with those of the corresponding\n\t * `Entity`\n\t *\n\t * @deprecated\n\t * In DOM Level 4.\n\t * @param {string} name\n\t * The name of the entity to reference. No namespace well-formedness checks are performed.\n\t * @returns {EntityReference}\n\t * @throws {DOMException}\n\t * With code `INVALID_CHARACTER_ERR` when `name` is not valid.\n\t * @throws {DOMException}\n\t * with code `NOT_SUPPORTED_ERR` when the document is of type `html`\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-392B75AE\n\t */\n\tcreateEntityReference: function (name) {\n\t\tif (!g.Name.test(name)) {\n\t\t\tthrow new DOMException(DOMException.INVALID_CHARACTER_ERR, 'not a valid xml name \"' + name + '\"');\n\t\t}\n\t\tif (this.type === 'html') {\n\t\t\tthrow new DOMException('document is an html document', DOMExceptionName.NotSupportedError);\n\t\t}\n\n\t\tvar node = new EntityReference(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.nodeName = name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\t/**\n\t * @param {string} namespaceURI\n\t * @param {string} qualifiedName\n\t * @returns {Element}\n\t */\n\tcreateElementNS: function (namespaceURI, qualifiedName) {\n\t\tvar validated = validateAndExtract(namespaceURI, qualifiedName);\n\t\tvar node = new Element(PDC);\n\t\tvar attrs = (node.attributes = new NamedNodeMap());\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = validated[0];\n\t\tnode.prefix = validated[1];\n\t\tnode.localName = validated[2];\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\t/**\n\t * @param {string} namespaceURI\n\t * @param {string} qualifiedName\n\t * @returns {Attr}\n\t */\n\tcreateAttributeNS: function (namespaceURI, qualifiedName) {\n\t\tvar validated = validateAndExtract(namespaceURI, qualifiedName);\n\t\tvar node = new Attr(PDC);\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.specified = true;\n\t\tnode.namespaceURI = validated[0];\n\t\tnode.prefix = validated[1];\n\t\tnode.localName = validated[2];\n\t\treturn node;\n\t},\n};\n_extends(Document, Node);\n\nfunction Element(symbol) {\n\tcheckSymbol(symbol);\n\n\tthis._nsMap = Object.create(null);\n}\nElement.prototype = {\n\tnodeType: ELEMENT_NODE,\n\t/**\n\t * The attributes of this element.\n\t *\n\t * @type {NamedNodeMap | null}\n\t */\n\tattributes: null,\n\tgetQualifiedName: function () {\n\t\treturn this.prefix ? this.prefix + ':' + this.localName : this.localName;\n\t},\n\t_isInHTMLDocumentAndNamespace: function () {\n\t\treturn this.ownerDocument.type === 'html' && this.namespaceURI === NAMESPACE.HTML;\n\t},\n\thasAttribute: function (name) {\n\t\treturn !!this.getAttributeNode(name);\n\t},\n\t/**\n\t * Returns elements first attribute whose qualified name is `name`, and `null`\n\t * if there is no such attribute.\n\t *\n\t * @param {string} name\n\t * @returns {string | null}\n\t */\n\tgetAttribute: function (name) {\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr ? attr.value : null;\n\t},\n\tgetAttributeNode: function (name) {\n\t\tif (this._isInHTMLDocumentAndNamespace()) {\n\t\t\tname = name.toLowerCase();\n\t\t}\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\t/**\n\t * Sets the value of elements first attribute whose qualified name is qualifiedName to value.\n\t *\n\t * @param {string} name\n\t * @param {string} value\n\t */\n\tsetAttribute: function (name, value) {\n\t\tif (this._isInHTMLDocumentAndNamespace()) {\n\t\t\tname = name.toLowerCase();\n\t\t}\n\t\tvar attr = this.getAttributeNode(name);\n\t\tif (attr) {\n\t\t\tattr.value = attr.nodeValue = '' + value;\n\t\t} else {\n\t\t\tattr = this.ownerDocument._createAttribute(name);\n\t\t\tattr.value = attr.nodeValue = '' + value;\n\t\t\tthis.setAttributeNode(attr);\n\t\t}\n\t},\n\tremoveAttribute: function (name) {\n\t\tvar attr = this.getAttributeNode(name);\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\tsetAttributeNode: function (newAttr) {\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS: function (newAttr) {\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode: function (oldAttr) {\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS: function (namespaceURI, localName) {\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS: function (namespaceURI, localName) {\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName) != null;\n\t},\n\t/**\n\t * Returns elements attribute whose namespace is `namespaceURI` and local name is\n\t * `localName`,\n\t * or `null` if there is no such attribute.\n\t *\n\t * @param {string} namespaceURI\n\t * @param {string} localName\n\t * @returns {string | null}\n\t */\n\tgetAttributeNS: function (namespaceURI, localName) {\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr ? attr.value : null;\n\t},\n\t/**\n\t * Sets the value of elements attribute whose namespace is `namespaceURI` and local name is\n\t * `localName` to value.\n\t *\n\t * @param {string} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {string} value\n\t * @see https://dom.spec.whatwg.org/#dom-element-setattributens\n\t */\n\tsetAttributeNS: function (namespaceURI, qualifiedName, value) {\n\t\tvar validated = validateAndExtract(namespaceURI, qualifiedName);\n\t\tvar localName = validated[2];\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\tif (attr) {\n\t\t\tattr.value = attr.nodeValue = '' + value;\n\t\t} else {\n\t\t\tattr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\t\tattr.value = attr.nodeValue = '' + value;\n\t\t\tthis.setAttributeNode(attr);\n\t\t}\n\t},\n\tgetAttributeNodeNS: function (namespaceURI, localName) {\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\t/**\n\t * Returns a LiveNodeList of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classNames` is an empty string or only contains HTML white space\n\t * characters.\n\t *\n\t * Warning: This returns a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames\n\t * Is a string representing the class name(s) to match; multiple class names are separated by\n\t * (ASCII-)whitespace.\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function (classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames);\n\t\treturn new LiveNodeList(this, function (base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base, function (node) {\n\t\t\t\t\tif (node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class');\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames);\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t/**\n\t * Returns a LiveNodeList of elements with the given qualifiedName.\n\t * Searching for all descendants can be done by passing `*` as `qualifiedName`.\n\t *\n\t * All descendants of the specified element are searched, but not the element itself.\n\t * The returned list is live, which means it updates itself with the DOM tree automatically.\n\t * Therefore, there is no need to call `Element.getElementsByTagName()`\n\t * with the same element and arguments repeatedly if the DOM changes in between calls.\n\t *\n\t * When called on an HTML element in an HTML document,\n\t * `getElementsByTagName` lower-cases the argument before searching for it.\n\t * This is undesirable when trying to match camel-cased SVG elements (such as\n\t * `<linearGradient>`) in an HTML document.\n\t * Instead, use `Element.getElementsByTagNameNS()`,\n\t * which preserves the capitalization of the tag name.\n\t *\n\t * `Element.getElementsByTagName` is similar to `Document.getElementsByTagName()`,\n\t * except that it only searches for elements that are descendants of the specified element.\n\t *\n\t * @param {string} qualifiedName\n\t * @returns {LiveNodeList}\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbytagname\n\t */\n\tgetElementsByTagName: function (qualifiedName) {\n\t\tvar isHTMLDocument = (this.nodeType === DOCUMENT_NODE ? this : this.ownerDocument).type === 'html';\n\t\tvar lowerQualifiedName = qualifiedName.toLowerCase();\n\t\treturn new LiveNodeList(this, function (base) {\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base, function (node) {\n\t\t\t\tif (node === base || node.nodeType !== ELEMENT_NODE) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (qualifiedName === '*') {\n\t\t\t\t\tls.push(node);\n\t\t\t\t} else {\n\t\t\t\t\tvar nodeQualifiedName = node.getQualifiedName();\n\t\t\t\t\tvar matchingQName = isHTMLDocument && node.namespaceURI === NAMESPACE.HTML ? lowerQualifiedName : qualifiedName;\n\t\t\t\t\tif (nodeQualifiedName === matchingQName) {\n\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS: function (namespaceURI, localName) {\n\t\treturn new LiveNodeList(this, function (base) {\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base, function (node) {\n\t\t\t\tif (\n\t\t\t\t\tnode !== base &&\n\t\t\t\t\tnode.nodeType === ELEMENT_NODE &&\n\t\t\t\t\t(namespaceURI === '*' || node.namespaceURI === namespaceURI) &&\n\t\t\t\t\t(localName === '*' || node.localName == localName)\n\t\t\t\t) {\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n};\nDocument.prototype.getElementsByClassName = Element.prototype.getElementsByClassName;\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n_extends(Element, Node);\nfunction Attr(symbol) {\n\tcheckSymbol(symbol);\n\n\tthis.namespaceURI = null;\n\tthis.prefix = null;\n\tthis.ownerElement = null;\n}\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr, Node);\n\nfunction CharacterData(symbol) {\n\tcheckSymbol(symbol);\n}\nCharacterData.prototype = {\n\tdata: '',\n\tsubstringData: function (offset, count) {\n\t\treturn this.data.substring(offset, offset + count);\n\t},\n\tappendData: function (text) {\n\t\ttext = this.data + text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function (offset, text) {\n\t\tthis.replaceData(offset, 0, text);\n\t},\n\tdeleteData: function (offset, count) {\n\t\tthis.replaceData(offset, count, '');\n\t},\n\treplaceData: function (offset, count, text) {\n\t\tvar start = this.data.substring(0, offset);\n\t\tvar end = this.data.substring(offset + count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n};\n_extends(CharacterData, Node);\nfunction Text(symbol) {\n\tcheckSymbol(symbol);\n}\nText.prototype = {\n\tnodeName: '#text',\n\tnodeType: TEXT_NODE,\n\tsplitText: function (offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif (this.parentNode) {\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t},\n};\n_extends(Text, CharacterData);\nfunction Comment(symbol) {\n\tcheckSymbol(symbol);\n}\nComment.prototype = {\n\tnodeName: '#comment',\n\tnodeType: COMMENT_NODE,\n};\n_extends(Comment, CharacterData);\n\nfunction CDATASection(symbol) {\n\tcheckSymbol(symbol);\n}\nCDATASection.prototype = {\n\tnodeName: '#cdata-section',\n\tnodeType: CDATA_SECTION_NODE,\n};\n_extends(CDATASection, Text);\n\nfunction DocumentType(symbol) {\n\tcheckSymbol(symbol);\n}\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType, Node);\n\nfunction Notation(symbol) {\n\tcheckSymbol(symbol);\n}\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation, Node);\n\nfunction Entity(symbol) {\n\tcheckSymbol(symbol);\n}\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity, Node);\n\nfunction EntityReference(symbol) {\n\tcheckSymbol(symbol);\n}\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference, Node);\n\nfunction DocumentFragment(symbol) {\n\tcheckSymbol(symbol);\n}\nDocumentFragment.prototype.nodeName = '#document-fragment';\nDocumentFragment.prototype.nodeType = DOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment, Node);\n\nfunction ProcessingInstruction(symbol) {\n\tcheckSymbol(symbol);\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction, CharacterData);\nfunction XMLSerializer() {}\nXMLSerializer.prototype.serializeToString = function (node, nodeFilter) {\n\treturn nodeSerializeToString.call(node, nodeFilter);\n};\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(nodeFilter) {\n\tvar buf = [];\n\tvar refNode = (this.nodeType === DOCUMENT_NODE && this.documentElement) || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif (uri && prefix == null) {\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif (prefix == null) {\n\t\t\tvar visibleNamespaces = [\n\t\t\t\t{ namespace: uri, prefix: null },\n\t\t\t\t//{namespace:uri,prefix:''}\n\t\t\t];\n\t\t}\n\t}\n\tserializeToString(this, buf, nodeFilter, visibleNamespaces);\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif ((prefix === 'xml' && uri === NAMESPACE.XML) || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length;\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Literal whitespace other than space that appear in attribute values are serialized as\n * their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces).\n *\n * Well-formed constraint: No < in Attribute Values:\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n *\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n * @prettierignore\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"');\n}\n\nfunction serializeToString(node, buf, nodeFilter, visibleNamespaces) {\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\tvar doc = node.nodeType === DOCUMENT_NODE ? node : node.ownerDocument;\n\tvar isHTML = doc.type === 'html';\n\n\tif (nodeFilter) {\n\t\tnode = nodeFilter(node);\n\t\tif (node) {\n\t\t\tif (typeof node == 'string') {\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch (node.nodeType) {\n\t\tcase ELEMENT_NODE:\n\t\t\tvar attrs = node.attributes;\n\t\t\tvar len = attrs.length;\n\t\t\tvar child = node.firstChild;\n\t\t\tvar nodeName = node.tagName;\n\n\t\t\tvar prefixedNodeName = nodeName;\n\t\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\t\tvar defaultNS;\n\t\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\t\tdefaultNS = attrs.item(ai).value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!defaultNS) {\n\t\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\t\tvar namespace = visibleNamespaces[nsi];\n\t\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\t\tdefaultNS = namespace.namespace;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\t\tvar namespace = visibleNamespaces[nsi];\n\t\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbuf.push('<', prefixedNodeName);\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t// add namespaces for attributes\n\t\t\t\tvar attr = attrs.item(i);\n\t\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\t\tvisibleNamespaces.push({\n\t\t\t\t\t\tprefix: attr.localName,\n\t\t\t\t\t\tnamespace: attr.value,\n\t\t\t\t\t});\n\t\t\t\t} else if (attr.nodeName == 'xmlns') {\n\t\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar attr = attrs.item(i);\n\t\t\t\tif (needNamespaceDefine(attr, isHTML, visibleNamespaces)) {\n\t\t\t\t\tvar prefix = attr.prefix || '';\n\t\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : 'xmlns', uri);\n\t\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace: uri });\n\t\t\t\t}\n\t\t\t\tserializeToString(attr, buf, nodeFilter, visibleNamespaces);\n\t\t\t}\n\n\t\t\t// add namespace for current node\n\t\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = node.prefix || '';\n\t\t\t\tvar uri = node.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : 'xmlns', uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace: uri });\n\t\t\t}\n\t\t\t// in XML elements can be closed when they have no children\n\t\t\tvar canCloseTag = !child;\n\t\t\tif (canCloseTag && (isHTML || node.namespaceURI === NAMESPACE.HTML)) {\n\t\t\t\t// in HTML (doc or ns) only void elements can be closed right away\n\t\t\t\tcanCloseTag = isHTMLVoidElement(nodeName);\n\t\t\t}\n\t\t\tif (canCloseTag) {\n\t\t\t\tbuf.push('/>');\n\t\t\t} else {\n\t\t\t\tbuf.push('>');\n\t\t\t\t//if is cdata child node\n\t\t\t\tif (isHTML && isHTMLRawTextElement(nodeName)) {\n\t\t\t\t\twhile (child) {\n\t\t\t\t\t\tif (child.data) {\n\t\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tserializeToString(child, buf, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twhile (child) {\n\t\t\t\t\t\tserializeToString(child, buf, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbuf.push('</', prefixedNodeName, '>');\n\t\t\t}\n\t\t\t// remove added visible namespaces\n\t\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\t\treturn;\n\t\tcase DOCUMENT_NODE:\n\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\tvar child = node.firstChild;\n\t\t\twhile (child) {\n\t\t\t\tserializeToString(child, buf, nodeFilter, visibleNamespaces.slice());\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\treturn;\n\t\tcase ATTRIBUTE_NODE:\n\t\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\t\tcase TEXT_NODE:\n\t\t\t/*\n\t\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t\t * except when used as markup delimiters, or within a comment, a processing instruction,\n\t\t\t * or a CDATA section.\n\t\t\t * If they are needed elsewhere, they must be escaped using either numeric character\n\t\t\t * references or the strings `&amp;` and `&lt;` respectively.\n\t\t\t * The right angle bracket (>) may be represented using the string \" &gt; \",\n\t\t\t * and must, for compatibility, be escaped using either `&gt;`,\n\t\t\t * or a character reference when it appears in the string `]]>` in content,\n\t\t\t * when that string is not marking the end of a CDATA section.\n\t\t\t *\n\t\t\t * In the content of elements, character data is any string of characters which does not\n\t\t\t * contain the start-delimiter of any markup and does not include the CDATA-section-close\n\t\t\t * delimiter, `]]>`.\n\t\t\t *\n\t\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t\t */\n\t\t\treturn buf.push(node.data.replace(/[<&>]/g, _xmlEncoder));\n\t\tcase CDATA_SECTION_NODE:\n\t\t\treturn buf.push(g.CDATA_START, node.data, g.CDATA_END);\n\t\tcase COMMENT_NODE:\n\t\t\treturn buf.push(g.COMMENT_START, node.data, g.COMMENT_END);\n\t\tcase DOCUMENT_TYPE_NODE:\n\t\t\tvar pubid = node.publicId;\n\t\t\tvar sysid = node.systemId;\n\t\t\tbuf.push(g.DOCTYPE_DECL_START, ' ', node.name);\n\t\t\tif (pubid) {\n\t\t\t\tbuf.push(' ', g.PUBLIC, ' ', pubid);\n\t\t\t\tif (sysid && sysid !== '.') {\n\t\t\t\t\tbuf.push(' ', sysid);\n\t\t\t\t}\n\t\t\t} else if (sysid && sysid !== '.') {\n\t\t\t\tbuf.push(' ', g.SYSTEM, ' ', sysid);\n\t\t\t}\n\t\t\tif (node.internalSubset) {\n\t\t\t\tbuf.push(' [', node.internalSubset, ']');\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t\treturn;\n\t\tcase PROCESSING_INSTRUCTION_NODE:\n\t\t\treturn buf.push('<?', node.target, ' ', node.data, '?>');\n\t\tcase ENTITY_REFERENCE_NODE:\n\t\t\treturn buf.push('&', node.nodeName, ';');\n\t\t//case ENTITY_NODE:\n\t\t//case NOTATION_NODE:\n\t\tdefault:\n\t\t\tbuf.push('??', node.nodeName);\n\t}\n}\nfunction importNode(doc, node, deep) {\n\tvar node2;\n\tswitch (node.nodeType) {\n\t\tcase ELEMENT_NODE:\n\t\t\tnode2 = node.cloneNode(false);\n\t\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\tbreak;\n\t\tcase ATTRIBUTE_NODE:\n\t\t\tdeep = true;\n\t\t\tbreak;\n\t\t//case ENTITY_REFERENCE_NODE:\n\t\t//case PROCESSING_INSTRUCTION_NODE:\n\t\t////case TEXT_NODE:\n\t\t//case CDATA_SECTION_NODE:\n\t\t//case COMMENT_NODE:\n\t\t//\tdeep = false;\n\t\t//\tbreak;\n\t\t//case DOCUMENT_NODE:\n\t\t//case DOCUMENT_TYPE_NODE:\n\t\t//cannot be imported.\n\t\t//case ENTITY_NODE:\n\t\t//case NOTATION_NODE\n\t\t//can not hit in level3\n\t\t//default:throw e;\n\t}\n\tif (!node2) {\n\t\tnode2 = node.cloneNode(false); //false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif (deep) {\n\t\tvar child = node.firstChild;\n\t\twhile (child) {\n\t\t\tnode2.appendChild(importNode(doc, child, deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\n/**\n * Creates a copy of a node from an existing one.\n *\n * @param {Document} doc\n * The Document object representing the document that the new node will belong to.\n * @param {Node} node\n * The node to clone.\n * @param {boolean} deep\n * If true, the contents of the node are recursively copied.\n * If false, only the node itself (and its attributes, if it is an element) are copied.\n * @returns {Node}\n * Returns the newly created copy of the node.\n * @throws {DOMException}\n * May throw a DOMException if operations within setAttributeNode or appendChild (which are\n * potentially invoked in this function) do not meet their specific constraints.\n */\nfunction cloneNode(doc, node, deep) {\n\tvar node2 = new node.constructor(PDC);\n\tfor (var n in node) {\n\t\tif (hasOwn(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != 'object') {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (node.childNodes) {\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\t\tcase ELEMENT_NODE:\n\t\t\tvar attrs = node.attributes;\n\t\t\tvar attrs2 = (node2.attributes = new NamedNodeMap());\n\t\t\tvar len = attrs.length;\n\t\t\tattrs2._ownerElement = node2;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tnode2.setAttributeNode(cloneNode(doc, attrs.item(i), true));\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ATTRIBUTE_NODE:\n\t\t\tdeep = true;\n\t}\n\tif (deep) {\n\t\tvar child = node.firstChild;\n\t\twhile (child) {\n\t\t\tnode2.appendChild(cloneNode(doc, child, deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object, key, value) {\n\tobject[key] = value;\n}\n//do dynamic\ntry {\n\tif (Object.defineProperty) {\n\t\tObject.defineProperty(LiveNodeList.prototype, 'length', {\n\t\t\tget: function () {\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t},\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype, 'textContent', {\n\t\t\tget: function () {\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset: function (data) {\n\t\t\t\tswitch (this.nodeType) {\n\t\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\t\twhile (this.firstChild) {\n\t\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data || String(data)) {\n\t\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.data = data;\n\t\t\t\t\t\tthis.value = data;\n\t\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tfunction getTextContent(node) {\n\t\t\tswitch (node.nodeType) {\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\tvar buf = [];\n\t\t\t\t\tnode = node.firstChild;\n\t\t\t\t\twhile (node) {\n\t\t\t\t\t\tif (node.nodeType !== 7 && node.nodeType !== 8) {\n\t\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t\treturn buf.join('');\n\t\t\t\tdefault:\n\t\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function (object, key, value) {\n\t\t\t//console.log(value)\n\t\t\tobject['$$' + key] = value;\n\t\t};\n\t}\n} catch (e) {\n\t//ie8\n}\n\nexports._updateLiveList = _updateLiveList;\nexports.Attr = Attr;\nexports.CDATASection = CDATASection;\nexports.CharacterData = CharacterData;\nexports.Comment = Comment;\nexports.Document = Document;\nexports.DocumentFragment = DocumentFragment;\nexports.DocumentType = DocumentType;\nexports.DOMImplementation = DOMImplementation;\nexports.Element = Element;\nexports.Entity = Entity;\nexports.EntityReference = EntityReference;\nexports.LiveNodeList = LiveNodeList;\nexports.NamedNodeMap = NamedNodeMap;\nexports.Node = Node;\nexports.NodeList = NodeList;\nexports.Notation = Notation;\nexports.Text = Text;\nexports.ProcessingInstruction = ProcessingInstruction;\nexports.XMLSerializer = XMLSerializer;\n","'use strict';\n\nvar freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML\n *      Wikipedia\n */\nexports.XML_ENTITIES = freeze({\n\tamp: '&',\n\tapos: \"'\",\n\tgt: '>',\n\tlt: '<',\n\tquot: '\"',\n});\n\n/**\n * A map of all entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see {@link XML_ENTITIES}\n * @see {@link DOMParser.parseFromString}\n * @see {@link DOMImplementation.prototype.createHTMLDocument}\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5)\n *      Spec\n * @see https://html.spec.whatwg.org/entities.json JSON\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML\n *      Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML\n *      Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n\tAacute: '\\u00C1',\n\taacute: '\\u00E1',\n\tAbreve: '\\u0102',\n\tabreve: '\\u0103',\n\tac: '\\u223E',\n\tacd: '\\u223F',\n\tacE: '\\u223E\\u0333',\n\tAcirc: '\\u00C2',\n\tacirc: '\\u00E2',\n\tacute: '\\u00B4',\n\tAcy: '\\u0410',\n\tacy: '\\u0430',\n\tAElig: '\\u00C6',\n\taelig: '\\u00E6',\n\taf: '\\u2061',\n\tAfr: '\\uD835\\uDD04',\n\tafr: '\\uD835\\uDD1E',\n\tAgrave: '\\u00C0',\n\tagrave: '\\u00E0',\n\talefsym: '\\u2135',\n\taleph: '\\u2135',\n\tAlpha: '\\u0391',\n\talpha: '\\u03B1',\n\tAmacr: '\\u0100',\n\tamacr: '\\u0101',\n\tamalg: '\\u2A3F',\n\tAMP: '\\u0026',\n\tamp: '\\u0026',\n\tAnd: '\\u2A53',\n\tand: '\\u2227',\n\tandand: '\\u2A55',\n\tandd: '\\u2A5C',\n\tandslope: '\\u2A58',\n\tandv: '\\u2A5A',\n\tang: '\\u2220',\n\tange: '\\u29A4',\n\tangle: '\\u2220',\n\tangmsd: '\\u2221',\n\tangmsdaa: '\\u29A8',\n\tangmsdab: '\\u29A9',\n\tangmsdac: '\\u29AA',\n\tangmsdad: '\\u29AB',\n\tangmsdae: '\\u29AC',\n\tangmsdaf: '\\u29AD',\n\tangmsdag: '\\u29AE',\n\tangmsdah: '\\u29AF',\n\tangrt: '\\u221F',\n\tangrtvb: '\\u22BE',\n\tangrtvbd: '\\u299D',\n\tangsph: '\\u2222',\n\tangst: '\\u00C5',\n\tangzarr: '\\u237C',\n\tAogon: '\\u0104',\n\taogon: '\\u0105',\n\tAopf: '\\uD835\\uDD38',\n\taopf: '\\uD835\\uDD52',\n\tap: '\\u2248',\n\tapacir: '\\u2A6F',\n\tapE: '\\u2A70',\n\tape: '\\u224A',\n\tapid: '\\u224B',\n\tapos: '\\u0027',\n\tApplyFunction: '\\u2061',\n\tapprox: '\\u2248',\n\tapproxeq: '\\u224A',\n\tAring: '\\u00C5',\n\taring: '\\u00E5',\n\tAscr: '\\uD835\\uDC9C',\n\tascr: '\\uD835\\uDCB6',\n\tAssign: '\\u2254',\n\tast: '\\u002A',\n\tasymp: '\\u2248',\n\tasympeq: '\\u224D',\n\tAtilde: '\\u00C3',\n\tatilde: '\\u00E3',\n\tAuml: '\\u00C4',\n\tauml: '\\u00E4',\n\tawconint: '\\u2233',\n\tawint: '\\u2A11',\n\tbackcong: '\\u224C',\n\tbackepsilon: '\\u03F6',\n\tbackprime: '\\u2035',\n\tbacksim: '\\u223D',\n\tbacksimeq: '\\u22CD',\n\tBackslash: '\\u2216',\n\tBarv: '\\u2AE7',\n\tbarvee: '\\u22BD',\n\tBarwed: '\\u2306',\n\tbarwed: '\\u2305',\n\tbarwedge: '\\u2305',\n\tbbrk: '\\u23B5',\n\tbbrktbrk: '\\u23B6',\n\tbcong: '\\u224C',\n\tBcy: '\\u0411',\n\tbcy: '\\u0431',\n\tbdquo: '\\u201E',\n\tbecaus: '\\u2235',\n\tBecause: '\\u2235',\n\tbecause: '\\u2235',\n\tbemptyv: '\\u29B0',\n\tbepsi: '\\u03F6',\n\tbernou: '\\u212C',\n\tBernoullis: '\\u212C',\n\tBeta: '\\u0392',\n\tbeta: '\\u03B2',\n\tbeth: '\\u2136',\n\tbetween: '\\u226C',\n\tBfr: '\\uD835\\uDD05',\n\tbfr: '\\uD835\\uDD1F',\n\tbigcap: '\\u22C2',\n\tbigcirc: '\\u25EF',\n\tbigcup: '\\u22C3',\n\tbigodot: '\\u2A00',\n\tbigoplus: '\\u2A01',\n\tbigotimes: '\\u2A02',\n\tbigsqcup: '\\u2A06',\n\tbigstar: '\\u2605',\n\tbigtriangledown: '\\u25BD',\n\tbigtriangleup: '\\u25B3',\n\tbiguplus: '\\u2A04',\n\tbigvee: '\\u22C1',\n\tbigwedge: '\\u22C0',\n\tbkarow: '\\u290D',\n\tblacklozenge: '\\u29EB',\n\tblacksquare: '\\u25AA',\n\tblacktriangle: '\\u25B4',\n\tblacktriangledown: '\\u25BE',\n\tblacktriangleleft: '\\u25C2',\n\tblacktriangleright: '\\u25B8',\n\tblank: '\\u2423',\n\tblk12: '\\u2592',\n\tblk14: '\\u2591',\n\tblk34: '\\u2593',\n\tblock: '\\u2588',\n\tbne: '\\u003D\\u20E5',\n\tbnequiv: '\\u2261\\u20E5',\n\tbNot: '\\u2AED',\n\tbnot: '\\u2310',\n\tBopf: '\\uD835\\uDD39',\n\tbopf: '\\uD835\\uDD53',\n\tbot: '\\u22A5',\n\tbottom: '\\u22A5',\n\tbowtie: '\\u22C8',\n\tboxbox: '\\u29C9',\n\tboxDL: '\\u2557',\n\tboxDl: '\\u2556',\n\tboxdL: '\\u2555',\n\tboxdl: '\\u2510',\n\tboxDR: '\\u2554',\n\tboxDr: '\\u2553',\n\tboxdR: '\\u2552',\n\tboxdr: '\\u250C',\n\tboxH: '\\u2550',\n\tboxh: '\\u2500',\n\tboxHD: '\\u2566',\n\tboxHd: '\\u2564',\n\tboxhD: '\\u2565',\n\tboxhd: '\\u252C',\n\tboxHU: '\\u2569',\n\tboxHu: '\\u2567',\n\tboxhU: '\\u2568',\n\tboxhu: '\\u2534',\n\tboxminus: '\\u229F',\n\tboxplus: '\\u229E',\n\tboxtimes: '\\u22A0',\n\tboxUL: '\\u255D',\n\tboxUl: '\\u255C',\n\tboxuL: '\\u255B',\n\tboxul: '\\u2518',\n\tboxUR: '\\u255A',\n\tboxUr: '\\u2559',\n\tboxuR: '\\u2558',\n\tboxur: '\\u2514',\n\tboxV: '\\u2551',\n\tboxv: '\\u2502',\n\tboxVH: '\\u256C',\n\tboxVh: '\\u256B',\n\tboxvH: '\\u256A',\n\tboxvh: '\\u253C',\n\tboxVL: '\\u2563',\n\tboxVl: '\\u2562',\n\tboxvL: '\\u2561',\n\tboxvl: '\\u2524',\n\tboxVR: '\\u2560',\n\tboxVr: '\\u255F',\n\tboxvR: '\\u255E',\n\tboxvr: '\\u251C',\n\tbprime: '\\u2035',\n\tBreve: '\\u02D8',\n\tbreve: '\\u02D8',\n\tbrvbar: '\\u00A6',\n\tBscr: '\\u212C',\n\tbscr: '\\uD835\\uDCB7',\n\tbsemi: '\\u204F',\n\tbsim: '\\u223D',\n\tbsime: '\\u22CD',\n\tbsol: '\\u005C',\n\tbsolb: '\\u29C5',\n\tbsolhsub: '\\u27C8',\n\tbull: '\\u2022',\n\tbullet: '\\u2022',\n\tbump: '\\u224E',\n\tbumpE: '\\u2AAE',\n\tbumpe: '\\u224F',\n\tBumpeq: '\\u224E',\n\tbumpeq: '\\u224F',\n\tCacute: '\\u0106',\n\tcacute: '\\u0107',\n\tCap: '\\u22D2',\n\tcap: '\\u2229',\n\tcapand: '\\u2A44',\n\tcapbrcup: '\\u2A49',\n\tcapcap: '\\u2A4B',\n\tcapcup: '\\u2A47',\n\tcapdot: '\\u2A40',\n\tCapitalDifferentialD: '\\u2145',\n\tcaps: '\\u2229\\uFE00',\n\tcaret: '\\u2041',\n\tcaron: '\\u02C7',\n\tCayleys: '\\u212D',\n\tccaps: '\\u2A4D',\n\tCcaron: '\\u010C',\n\tccaron: '\\u010D',\n\tCcedil: '\\u00C7',\n\tccedil: '\\u00E7',\n\tCcirc: '\\u0108',\n\tccirc: '\\u0109',\n\tCconint: '\\u2230',\n\tccups: '\\u2A4C',\n\tccupssm: '\\u2A50',\n\tCdot: '\\u010A',\n\tcdot: '\\u010B',\n\tcedil: '\\u00B8',\n\tCedilla: '\\u00B8',\n\tcemptyv: '\\u29B2',\n\tcent: '\\u00A2',\n\tCenterDot: '\\u00B7',\n\tcenterdot: '\\u00B7',\n\tCfr: '\\u212D',\n\tcfr: '\\uD835\\uDD20',\n\tCHcy: '\\u0427',\n\tchcy: '\\u0447',\n\tcheck: '\\u2713',\n\tcheckmark: '\\u2713',\n\tChi: '\\u03A7',\n\tchi: '\\u03C7',\n\tcir: '\\u25CB',\n\tcirc: '\\u02C6',\n\tcirceq: '\\u2257',\n\tcirclearrowleft: '\\u21BA',\n\tcirclearrowright: '\\u21BB',\n\tcircledast: '\\u229B',\n\tcircledcirc: '\\u229A',\n\tcircleddash: '\\u229D',\n\tCircleDot: '\\u2299',\n\tcircledR: '\\u00AE',\n\tcircledS: '\\u24C8',\n\tCircleMinus: '\\u2296',\n\tCirclePlus: '\\u2295',\n\tCircleTimes: '\\u2297',\n\tcirE: '\\u29C3',\n\tcire: '\\u2257',\n\tcirfnint: '\\u2A10',\n\tcirmid: '\\u2AEF',\n\tcirscir: '\\u29C2',\n\tClockwiseContourIntegral: '\\u2232',\n\tCloseCurlyDoubleQuote: '\\u201D',\n\tCloseCurlyQuote: '\\u2019',\n\tclubs: '\\u2663',\n\tclubsuit: '\\u2663',\n\tColon: '\\u2237',\n\tcolon: '\\u003A',\n\tColone: '\\u2A74',\n\tcolone: '\\u2254',\n\tcoloneq: '\\u2254',\n\tcomma: '\\u002C',\n\tcommat: '\\u0040',\n\tcomp: '\\u2201',\n\tcompfn: '\\u2218',\n\tcomplement: '\\u2201',\n\tcomplexes: '\\u2102',\n\tcong: '\\u2245',\n\tcongdot: '\\u2A6D',\n\tCongruent: '\\u2261',\n\tConint: '\\u222F',\n\tconint: '\\u222E',\n\tContourIntegral: '\\u222E',\n\tCopf: '\\u2102',\n\tcopf: '\\uD835\\uDD54',\n\tcoprod: '\\u2210',\n\tCoproduct: '\\u2210',\n\tCOPY: '\\u00A9',\n\tcopy: '\\u00A9',\n\tcopysr: '\\u2117',\n\tCounterClockwiseContourIntegral: '\\u2233',\n\tcrarr: '\\u21B5',\n\tCross: '\\u2A2F',\n\tcross: '\\u2717',\n\tCscr: '\\uD835\\uDC9E',\n\tcscr: '\\uD835\\uDCB8',\n\tcsub: '\\u2ACF',\n\tcsube: '\\u2AD1',\n\tcsup: '\\u2AD0',\n\tcsupe: '\\u2AD2',\n\tctdot: '\\u22EF',\n\tcudarrl: '\\u2938',\n\tcudarrr: '\\u2935',\n\tcuepr: '\\u22DE',\n\tcuesc: '\\u22DF',\n\tcularr: '\\u21B6',\n\tcularrp: '\\u293D',\n\tCup: '\\u22D3',\n\tcup: '\\u222A',\n\tcupbrcap: '\\u2A48',\n\tCupCap: '\\u224D',\n\tcupcap: '\\u2A46',\n\tcupcup: '\\u2A4A',\n\tcupdot: '\\u228D',\n\tcupor: '\\u2A45',\n\tcups: '\\u222A\\uFE00',\n\tcurarr: '\\u21B7',\n\tcurarrm: '\\u293C',\n\tcurlyeqprec: '\\u22DE',\n\tcurlyeqsucc: '\\u22DF',\n\tcurlyvee: '\\u22CE',\n\tcurlywedge: '\\u22CF',\n\tcurren: '\\u00A4',\n\tcurvearrowleft: '\\u21B6',\n\tcurvearrowright: '\\u21B7',\n\tcuvee: '\\u22CE',\n\tcuwed: '\\u22CF',\n\tcwconint: '\\u2232',\n\tcwint: '\\u2231',\n\tcylcty: '\\u232D',\n\tDagger: '\\u2021',\n\tdagger: '\\u2020',\n\tdaleth: '\\u2138',\n\tDarr: '\\u21A1',\n\tdArr: '\\u21D3',\n\tdarr: '\\u2193',\n\tdash: '\\u2010',\n\tDashv: '\\u2AE4',\n\tdashv: '\\u22A3',\n\tdbkarow: '\\u290F',\n\tdblac: '\\u02DD',\n\tDcaron: '\\u010E',\n\tdcaron: '\\u010F',\n\tDcy: '\\u0414',\n\tdcy: '\\u0434',\n\tDD: '\\u2145',\n\tdd: '\\u2146',\n\tddagger: '\\u2021',\n\tddarr: '\\u21CA',\n\tDDotrahd: '\\u2911',\n\tddotseq: '\\u2A77',\n\tdeg: '\\u00B0',\n\tDel: '\\u2207',\n\tDelta: '\\u0394',\n\tdelta: '\\u03B4',\n\tdemptyv: '\\u29B1',\n\tdfisht: '\\u297F',\n\tDfr: '\\uD835\\uDD07',\n\tdfr: '\\uD835\\uDD21',\n\tdHar: '\\u2965',\n\tdharl: '\\u21C3',\n\tdharr: '\\u21C2',\n\tDiacriticalAcute: '\\u00B4',\n\tDiacriticalDot: '\\u02D9',\n\tDiacriticalDoubleAcute: '\\u02DD',\n\tDiacriticalGrave: '\\u0060',\n\tDiacriticalTilde: '\\u02DC',\n\tdiam: '\\u22C4',\n\tDiamond: '\\u22C4',\n\tdiamond: '\\u22C4',\n\tdiamondsuit: '\\u2666',\n\tdiams: '\\u2666',\n\tdie: '\\u00A8',\n\tDifferentialD: '\\u2146',\n\tdigamma: '\\u03DD',\n\tdisin: '\\u22F2',\n\tdiv: '\\u00F7',\n\tdivide: '\\u00F7',\n\tdivideontimes: '\\u22C7',\n\tdivonx: '\\u22C7',\n\tDJcy: '\\u0402',\n\tdjcy: '\\u0452',\n\tdlcorn: '\\u231E',\n\tdlcrop: '\\u230D',\n\tdollar: '\\u0024',\n\tDopf: '\\uD835\\uDD3B',\n\tdopf: '\\uD835\\uDD55',\n\tDot: '\\u00A8',\n\tdot: '\\u02D9',\n\tDotDot: '\\u20DC',\n\tdoteq: '\\u2250',\n\tdoteqdot: '\\u2251',\n\tDotEqual: '\\u2250',\n\tdotminus: '\\u2238',\n\tdotplus: '\\u2214',\n\tdotsquare: '\\u22A1',\n\tdoublebarwedge: '\\u2306',\n\tDoubleContourIntegral: '\\u222F',\n\tDoubleDot: '\\u00A8',\n\tDoubleDownArrow: '\\u21D3',\n\tDoubleLeftArrow: '\\u21D0',\n\tDoubleLeftRightArrow: '\\u21D4',\n\tDoubleLeftTee: '\\u2AE4',\n\tDoubleLongLeftArrow: '\\u27F8',\n\tDoubleLongLeftRightArrow: '\\u27FA',\n\tDoubleLongRightArrow: '\\u27F9',\n\tDoubleRightArrow: '\\u21D2',\n\tDoubleRightTee: '\\u22A8',\n\tDoubleUpArrow: '\\u21D1',\n\tDoubleUpDownArrow: '\\u21D5',\n\tDoubleVerticalBar: '\\u2225',\n\tDownArrow: '\\u2193',\n\tDownarrow: '\\u21D3',\n\tdownarrow: '\\u2193',\n\tDownArrowBar: '\\u2913',\n\tDownArrowUpArrow: '\\u21F5',\n\tDownBreve: '\\u0311',\n\tdowndownarrows: '\\u21CA',\n\tdownharpoonleft: '\\u21C3',\n\tdownharpoonright: '\\u21C2',\n\tDownLeftRightVector: '\\u2950',\n\tDownLeftTeeVector: '\\u295E',\n\tDownLeftVector: '\\u21BD',\n\tDownLeftVectorBar: '\\u2956',\n\tDownRightTeeVector: '\\u295F',\n\tDownRightVector: '\\u21C1',\n\tDownRightVectorBar: '\\u2957',\n\tDownTee: '\\u22A4',\n\tDownTeeArrow: '\\u21A7',\n\tdrbkarow: '\\u2910',\n\tdrcorn: '\\u231F',\n\tdrcrop: '\\u230C',\n\tDscr: '\\uD835\\uDC9F',\n\tdscr: '\\uD835\\uDCB9',\n\tDScy: '\\u0405',\n\tdscy: '\\u0455',\n\tdsol: '\\u29F6',\n\tDstrok: '\\u0110',\n\tdstrok: '\\u0111',\n\tdtdot: '\\u22F1',\n\tdtri: '\\u25BF',\n\tdtrif: '\\u25BE',\n\tduarr: '\\u21F5',\n\tduhar: '\\u296F',\n\tdwangle: '\\u29A6',\n\tDZcy: '\\u040F',\n\tdzcy: '\\u045F',\n\tdzigrarr: '\\u27FF',\n\tEacute: '\\u00C9',\n\teacute: '\\u00E9',\n\teaster: '\\u2A6E',\n\tEcaron: '\\u011A',\n\tecaron: '\\u011B',\n\tecir: '\\u2256',\n\tEcirc: '\\u00CA',\n\tecirc: '\\u00EA',\n\tecolon: '\\u2255',\n\tEcy: '\\u042D',\n\tecy: '\\u044D',\n\teDDot: '\\u2A77',\n\tEdot: '\\u0116',\n\teDot: '\\u2251',\n\tedot: '\\u0117',\n\tee: '\\u2147',\n\tefDot: '\\u2252',\n\tEfr: '\\uD835\\uDD08',\n\tefr: '\\uD835\\uDD22',\n\teg: '\\u2A9A',\n\tEgrave: '\\u00C8',\n\tegrave: '\\u00E8',\n\tegs: '\\u2A96',\n\tegsdot: '\\u2A98',\n\tel: '\\u2A99',\n\tElement: '\\u2208',\n\telinters: '\\u23E7',\n\tell: '\\u2113',\n\tels: '\\u2A95',\n\telsdot: '\\u2A97',\n\tEmacr: '\\u0112',\n\temacr: '\\u0113',\n\tempty: '\\u2205',\n\temptyset: '\\u2205',\n\tEmptySmallSquare: '\\u25FB',\n\temptyv: '\\u2205',\n\tEmptyVerySmallSquare: '\\u25AB',\n\temsp: '\\u2003',\n\temsp13: '\\u2004',\n\temsp14: '\\u2005',\n\tENG: '\\u014A',\n\teng: '\\u014B',\n\tensp: '\\u2002',\n\tEogon: '\\u0118',\n\teogon: '\\u0119',\n\tEopf: '\\uD835\\uDD3C',\n\teopf: '\\uD835\\uDD56',\n\tepar: '\\u22D5',\n\teparsl: '\\u29E3',\n\teplus: '\\u2A71',\n\tepsi: '\\u03B5',\n\tEpsilon: '\\u0395',\n\tepsilon: '\\u03B5',\n\tepsiv: '\\u03F5',\n\teqcirc: '\\u2256',\n\teqcolon: '\\u2255',\n\teqsim: '\\u2242',\n\teqslantgtr: '\\u2A96',\n\teqslantless: '\\u2A95',\n\tEqual: '\\u2A75',\n\tequals: '\\u003D',\n\tEqualTilde: '\\u2242',\n\tequest: '\\u225F',\n\tEquilibrium: '\\u21CC',\n\tequiv: '\\u2261',\n\tequivDD: '\\u2A78',\n\teqvparsl: '\\u29E5',\n\terarr: '\\u2971',\n\terDot: '\\u2253',\n\tEscr: '\\u2130',\n\tescr: '\\u212F',\n\tesdot: '\\u2250',\n\tEsim: '\\u2A73',\n\tesim: '\\u2242',\n\tEta: '\\u0397',\n\teta: '\\u03B7',\n\tETH: '\\u00D0',\n\teth: '\\u00F0',\n\tEuml: '\\u00CB',\n\teuml: '\\u00EB',\n\teuro: '\\u20AC',\n\texcl: '\\u0021',\n\texist: '\\u2203',\n\tExists: '\\u2203',\n\texpectation: '\\u2130',\n\tExponentialE: '\\u2147',\n\texponentiale: '\\u2147',\n\tfallingdotseq: '\\u2252',\n\tFcy: '\\u0424',\n\tfcy: '\\u0444',\n\tfemale: '\\u2640',\n\tffilig: '\\uFB03',\n\tfflig: '\\uFB00',\n\tffllig: '\\uFB04',\n\tFfr: '\\uD835\\uDD09',\n\tffr: '\\uD835\\uDD23',\n\tfilig: '\\uFB01',\n\tFilledSmallSquare: '\\u25FC',\n\tFilledVerySmallSquare: '\\u25AA',\n\tfjlig: '\\u0066\\u006A',\n\tflat: '\\u266D',\n\tfllig: '\\uFB02',\n\tfltns: '\\u25B1',\n\tfnof: '\\u0192',\n\tFopf: '\\uD835\\uDD3D',\n\tfopf: '\\uD835\\uDD57',\n\tForAll: '\\u2200',\n\tforall: '\\u2200',\n\tfork: '\\u22D4',\n\tforkv: '\\u2AD9',\n\tFouriertrf: '\\u2131',\n\tfpartint: '\\u2A0D',\n\tfrac12: '\\u00BD',\n\tfrac13: '\\u2153',\n\tfrac14: '\\u00BC',\n\tfrac15: '\\u2155',\n\tfrac16: '\\u2159',\n\tfrac18: '\\u215B',\n\tfrac23: '\\u2154',\n\tfrac25: '\\u2156',\n\tfrac34: '\\u00BE',\n\tfrac35: '\\u2157',\n\tfrac38: '\\u215C',\n\tfrac45: '\\u2158',\n\tfrac56: '\\u215A',\n\tfrac58: '\\u215D',\n\tfrac78: '\\u215E',\n\tfrasl: '\\u2044',\n\tfrown: '\\u2322',\n\tFscr: '\\u2131',\n\tfscr: '\\uD835\\uDCBB',\n\tgacute: '\\u01F5',\n\tGamma: '\\u0393',\n\tgamma: '\\u03B3',\n\tGammad: '\\u03DC',\n\tgammad: '\\u03DD',\n\tgap: '\\u2A86',\n\tGbreve: '\\u011E',\n\tgbreve: '\\u011F',\n\tGcedil: '\\u0122',\n\tGcirc: '\\u011C',\n\tgcirc: '\\u011D',\n\tGcy: '\\u0413',\n\tgcy: '\\u0433',\n\tGdot: '\\u0120',\n\tgdot: '\\u0121',\n\tgE: '\\u2267',\n\tge: '\\u2265',\n\tgEl: '\\u2A8C',\n\tgel: '\\u22DB',\n\tgeq: '\\u2265',\n\tgeqq: '\\u2267',\n\tgeqslant: '\\u2A7E',\n\tges: '\\u2A7E',\n\tgescc: '\\u2AA9',\n\tgesdot: '\\u2A80',\n\tgesdoto: '\\u2A82',\n\tgesdotol: '\\u2A84',\n\tgesl: '\\u22DB\\uFE00',\n\tgesles: '\\u2A94',\n\tGfr: '\\uD835\\uDD0A',\n\tgfr: '\\uD835\\uDD24',\n\tGg: '\\u22D9',\n\tgg: '\\u226B',\n\tggg: '\\u22D9',\n\tgimel: '\\u2137',\n\tGJcy: '\\u0403',\n\tgjcy: '\\u0453',\n\tgl: '\\u2277',\n\tgla: '\\u2AA5',\n\tglE: '\\u2A92',\n\tglj: '\\u2AA4',\n\tgnap: '\\u2A8A',\n\tgnapprox: '\\u2A8A',\n\tgnE: '\\u2269',\n\tgne: '\\u2A88',\n\tgneq: '\\u2A88',\n\tgneqq: '\\u2269',\n\tgnsim: '\\u22E7',\n\tGopf: '\\uD835\\uDD3E',\n\tgopf: '\\uD835\\uDD58',\n\tgrave: '\\u0060',\n\tGreaterEqual: '\\u2265',\n\tGreaterEqualLess: '\\u22DB',\n\tGreaterFullEqual: '\\u2267',\n\tGreaterGreater: '\\u2AA2',\n\tGreaterLess: '\\u2277',\n\tGreaterSlantEqual: '\\u2A7E',\n\tGreaterTilde: '\\u2273',\n\tGscr: '\\uD835\\uDCA2',\n\tgscr: '\\u210A',\n\tgsim: '\\u2273',\n\tgsime: '\\u2A8E',\n\tgsiml: '\\u2A90',\n\tGt: '\\u226B',\n\tGT: '\\u003E',\n\tgt: '\\u003E',\n\tgtcc: '\\u2AA7',\n\tgtcir: '\\u2A7A',\n\tgtdot: '\\u22D7',\n\tgtlPar: '\\u2995',\n\tgtquest: '\\u2A7C',\n\tgtrapprox: '\\u2A86',\n\tgtrarr: '\\u2978',\n\tgtrdot: '\\u22D7',\n\tgtreqless: '\\u22DB',\n\tgtreqqless: '\\u2A8C',\n\tgtrless: '\\u2277',\n\tgtrsim: '\\u2273',\n\tgvertneqq: '\\u2269\\uFE00',\n\tgvnE: '\\u2269\\uFE00',\n\tHacek: '\\u02C7',\n\thairsp: '\\u200A',\n\thalf: '\\u00BD',\n\thamilt: '\\u210B',\n\tHARDcy: '\\u042A',\n\thardcy: '\\u044A',\n\thArr: '\\u21D4',\n\tharr: '\\u2194',\n\tharrcir: '\\u2948',\n\tharrw: '\\u21AD',\n\tHat: '\\u005E',\n\thbar: '\\u210F',\n\tHcirc: '\\u0124',\n\thcirc: '\\u0125',\n\thearts: '\\u2665',\n\theartsuit: '\\u2665',\n\thellip: '\\u2026',\n\thercon: '\\u22B9',\n\tHfr: '\\u210C',\n\thfr: '\\uD835\\uDD25',\n\tHilbertSpace: '\\u210B',\n\thksearow: '\\u2925',\n\thkswarow: '\\u2926',\n\thoarr: '\\u21FF',\n\thomtht: '\\u223B',\n\thookleftarrow: '\\u21A9',\n\thookrightarrow: '\\u21AA',\n\tHopf: '\\u210D',\n\thopf: '\\uD835\\uDD59',\n\thorbar: '\\u2015',\n\tHorizontalLine: '\\u2500',\n\tHscr: '\\u210B',\n\thscr: '\\uD835\\uDCBD',\n\thslash: '\\u210F',\n\tHstrok: '\\u0126',\n\thstrok: '\\u0127',\n\tHumpDownHump: '\\u224E',\n\tHumpEqual: '\\u224F',\n\thybull: '\\u2043',\n\thyphen: '\\u2010',\n\tIacute: '\\u00CD',\n\tiacute: '\\u00ED',\n\tic: '\\u2063',\n\tIcirc: '\\u00CE',\n\ticirc: '\\u00EE',\n\tIcy: '\\u0418',\n\ticy: '\\u0438',\n\tIdot: '\\u0130',\n\tIEcy: '\\u0415',\n\tiecy: '\\u0435',\n\tiexcl: '\\u00A1',\n\tiff: '\\u21D4',\n\tIfr: '\\u2111',\n\tifr: '\\uD835\\uDD26',\n\tIgrave: '\\u00CC',\n\tigrave: '\\u00EC',\n\tii: '\\u2148',\n\tiiiint: '\\u2A0C',\n\tiiint: '\\u222D',\n\tiinfin: '\\u29DC',\n\tiiota: '\\u2129',\n\tIJlig: '\\u0132',\n\tijlig: '\\u0133',\n\tIm: '\\u2111',\n\tImacr: '\\u012A',\n\timacr: '\\u012B',\n\timage: '\\u2111',\n\tImaginaryI: '\\u2148',\n\timagline: '\\u2110',\n\timagpart: '\\u2111',\n\timath: '\\u0131',\n\timof: '\\u22B7',\n\timped: '\\u01B5',\n\tImplies: '\\u21D2',\n\tin: '\\u2208',\n\tincare: '\\u2105',\n\tinfin: '\\u221E',\n\tinfintie: '\\u29DD',\n\tinodot: '\\u0131',\n\tInt: '\\u222C',\n\tint: '\\u222B',\n\tintcal: '\\u22BA',\n\tintegers: '\\u2124',\n\tIntegral: '\\u222B',\n\tintercal: '\\u22BA',\n\tIntersection: '\\u22C2',\n\tintlarhk: '\\u2A17',\n\tintprod: '\\u2A3C',\n\tInvisibleComma: '\\u2063',\n\tInvisibleTimes: '\\u2062',\n\tIOcy: '\\u0401',\n\tiocy: '\\u0451',\n\tIogon: '\\u012E',\n\tiogon: '\\u012F',\n\tIopf: '\\uD835\\uDD40',\n\tiopf: '\\uD835\\uDD5A',\n\tIota: '\\u0399',\n\tiota: '\\u03B9',\n\tiprod: '\\u2A3C',\n\tiquest: '\\u00BF',\n\tIscr: '\\u2110',\n\tiscr: '\\uD835\\uDCBE',\n\tisin: '\\u2208',\n\tisindot: '\\u22F5',\n\tisinE: '\\u22F9',\n\tisins: '\\u22F4',\n\tisinsv: '\\u22F3',\n\tisinv: '\\u2208',\n\tit: '\\u2062',\n\tItilde: '\\u0128',\n\titilde: '\\u0129',\n\tIukcy: '\\u0406',\n\tiukcy: '\\u0456',\n\tIuml: '\\u00CF',\n\tiuml: '\\u00EF',\n\tJcirc: '\\u0134',\n\tjcirc: '\\u0135',\n\tJcy: '\\u0419',\n\tjcy: '\\u0439',\n\tJfr: '\\uD835\\uDD0D',\n\tjfr: '\\uD835\\uDD27',\n\tjmath: '\\u0237',\n\tJopf: '\\uD835\\uDD41',\n\tjopf: '\\uD835\\uDD5B',\n\tJscr: '\\uD835\\uDCA5',\n\tjscr: '\\uD835\\uDCBF',\n\tJsercy: '\\u0408',\n\tjsercy: '\\u0458',\n\tJukcy: '\\u0404',\n\tjukcy: '\\u0454',\n\tKappa: '\\u039A',\n\tkappa: '\\u03BA',\n\tkappav: '\\u03F0',\n\tKcedil: '\\u0136',\n\tkcedil: '\\u0137',\n\tKcy: '\\u041A',\n\tkcy: '\\u043A',\n\tKfr: '\\uD835\\uDD0E',\n\tkfr: '\\uD835\\uDD28',\n\tkgreen: '\\u0138',\n\tKHcy: '\\u0425',\n\tkhcy: '\\u0445',\n\tKJcy: '\\u040C',\n\tkjcy: '\\u045C',\n\tKopf: '\\uD835\\uDD42',\n\tkopf: '\\uD835\\uDD5C',\n\tKscr: '\\uD835\\uDCA6',\n\tkscr: '\\uD835\\uDCC0',\n\tlAarr: '\\u21DA',\n\tLacute: '\\u0139',\n\tlacute: '\\u013A',\n\tlaemptyv: '\\u29B4',\n\tlagran: '\\u2112',\n\tLambda: '\\u039B',\n\tlambda: '\\u03BB',\n\tLang: '\\u27EA',\n\tlang: '\\u27E8',\n\tlangd: '\\u2991',\n\tlangle: '\\u27E8',\n\tlap: '\\u2A85',\n\tLaplacetrf: '\\u2112',\n\tlaquo: '\\u00AB',\n\tLarr: '\\u219E',\n\tlArr: '\\u21D0',\n\tlarr: '\\u2190',\n\tlarrb: '\\u21E4',\n\tlarrbfs: '\\u291F',\n\tlarrfs: '\\u291D',\n\tlarrhk: '\\u21A9',\n\tlarrlp: '\\u21AB',\n\tlarrpl: '\\u2939',\n\tlarrsim: '\\u2973',\n\tlarrtl: '\\u21A2',\n\tlat: '\\u2AAB',\n\tlAtail: '\\u291B',\n\tlatail: '\\u2919',\n\tlate: '\\u2AAD',\n\tlates: '\\u2AAD\\uFE00',\n\tlBarr: '\\u290E',\n\tlbarr: '\\u290C',\n\tlbbrk: '\\u2772',\n\tlbrace: '\\u007B',\n\tlbrack: '\\u005B',\n\tlbrke: '\\u298B',\n\tlbrksld: '\\u298F',\n\tlbrkslu: '\\u298D',\n\tLcaron: '\\u013D',\n\tlcaron: '\\u013E',\n\tLcedil: '\\u013B',\n\tlcedil: '\\u013C',\n\tlceil: '\\u2308',\n\tlcub: '\\u007B',\n\tLcy: '\\u041B',\n\tlcy: '\\u043B',\n\tldca: '\\u2936',\n\tldquo: '\\u201C',\n\tldquor: '\\u201E',\n\tldrdhar: '\\u2967',\n\tldrushar: '\\u294B',\n\tldsh: '\\u21B2',\n\tlE: '\\u2266',\n\tle: '\\u2264',\n\tLeftAngleBracket: '\\u27E8',\n\tLeftArrow: '\\u2190',\n\tLeftarrow: '\\u21D0',\n\tleftarrow: '\\u2190',\n\tLeftArrowBar: '\\u21E4',\n\tLeftArrowRightArrow: '\\u21C6',\n\tleftarrowtail: '\\u21A2',\n\tLeftCeiling: '\\u2308',\n\tLeftDoubleBracket: '\\u27E6',\n\tLeftDownTeeVector: '\\u2961',\n\tLeftDownVector: '\\u21C3',\n\tLeftDownVectorBar: '\\u2959',\n\tLeftFloor: '\\u230A',\n\tleftharpoondown: '\\u21BD',\n\tleftharpoonup: '\\u21BC',\n\tleftleftarrows: '\\u21C7',\n\tLeftRightArrow: '\\u2194',\n\tLeftrightarrow: '\\u21D4',\n\tleftrightarrow: '\\u2194',\n\tleftrightarrows: '\\u21C6',\n\tleftrightharpoons: '\\u21CB',\n\tleftrightsquigarrow: '\\u21AD',\n\tLeftRightVector: '\\u294E',\n\tLeftTee: '\\u22A3',\n\tLeftTeeArrow: '\\u21A4',\n\tLeftTeeVector: '\\u295A',\n\tleftthreetimes: '\\u22CB',\n\tLeftTriangle: '\\u22B2',\n\tLeftTriangleBar: '\\u29CF',\n\tLeftTriangleEqual: '\\u22B4',\n\tLeftUpDownVector: '\\u2951',\n\tLeftUpTeeVector: '\\u2960',\n\tLeftUpVector: '\\u21BF',\n\tLeftUpVectorBar: '\\u2958',\n\tLeftVector: '\\u21BC',\n\tLeftVectorBar: '\\u2952',\n\tlEg: '\\u2A8B',\n\tleg: '\\u22DA',\n\tleq: '\\u2264',\n\tleqq: '\\u2266',\n\tleqslant: '\\u2A7D',\n\tles: '\\u2A7D',\n\tlescc: '\\u2AA8',\n\tlesdot: '\\u2A7F',\n\tlesdoto: '\\u2A81',\n\tlesdotor: '\\u2A83',\n\tlesg: '\\u22DA\\uFE00',\n\tlesges: '\\u2A93',\n\tlessapprox: '\\u2A85',\n\tlessdot: '\\u22D6',\n\tlesseqgtr: '\\u22DA',\n\tlesseqqgtr: '\\u2A8B',\n\tLessEqualGreater: '\\u22DA',\n\tLessFullEqual: '\\u2266',\n\tLessGreater: '\\u2276',\n\tlessgtr: '\\u2276',\n\tLessLess: '\\u2AA1',\n\tlesssim: '\\u2272',\n\tLessSlantEqual: '\\u2A7D',\n\tLessTilde: '\\u2272',\n\tlfisht: '\\u297C',\n\tlfloor: '\\u230A',\n\tLfr: '\\uD835\\uDD0F',\n\tlfr: '\\uD835\\uDD29',\n\tlg: '\\u2276',\n\tlgE: '\\u2A91',\n\tlHar: '\\u2962',\n\tlhard: '\\u21BD',\n\tlharu: '\\u21BC',\n\tlharul: '\\u296A',\n\tlhblk: '\\u2584',\n\tLJcy: '\\u0409',\n\tljcy: '\\u0459',\n\tLl: '\\u22D8',\n\tll: '\\u226A',\n\tllarr: '\\u21C7',\n\tllcorner: '\\u231E',\n\tLleftarrow: '\\u21DA',\n\tllhard: '\\u296B',\n\tlltri: '\\u25FA',\n\tLmidot: '\\u013F',\n\tlmidot: '\\u0140',\n\tlmoust: '\\u23B0',\n\tlmoustache: '\\u23B0',\n\tlnap: '\\u2A89',\n\tlnapprox: '\\u2A89',\n\tlnE: '\\u2268',\n\tlne: '\\u2A87',\n\tlneq: '\\u2A87',\n\tlneqq: '\\u2268',\n\tlnsim: '\\u22E6',\n\tloang: '\\u27EC',\n\tloarr: '\\u21FD',\n\tlobrk: '\\u27E6',\n\tLongLeftArrow: '\\u27F5',\n\tLongleftarrow: '\\u27F8',\n\tlongleftarrow: '\\u27F5',\n\tLongLeftRightArrow: '\\u27F7',\n\tLongleftrightarrow: '\\u27FA',\n\tlongleftrightarrow: '\\u27F7',\n\tlongmapsto: '\\u27FC',\n\tLongRightArrow: '\\u27F6',\n\tLongrightarrow: '\\u27F9',\n\tlongrightarrow: '\\u27F6',\n\tlooparrowleft: '\\u21AB',\n\tlooparrowright: '\\u21AC',\n\tlopar: '\\u2985',\n\tLopf: '\\uD835\\uDD43',\n\tlopf: '\\uD835\\uDD5D',\n\tloplus: '\\u2A2D',\n\tlotimes: '\\u2A34',\n\tlowast: '\\u2217',\n\tlowbar: '\\u005F',\n\tLowerLeftArrow: '\\u2199',\n\tLowerRightArrow: '\\u2198',\n\tloz: '\\u25CA',\n\tlozenge: '\\u25CA',\n\tlozf: '\\u29EB',\n\tlpar: '\\u0028',\n\tlparlt: '\\u2993',\n\tlrarr: '\\u21C6',\n\tlrcorner: '\\u231F',\n\tlrhar: '\\u21CB',\n\tlrhard: '\\u296D',\n\tlrm: '\\u200E',\n\tlrtri: '\\u22BF',\n\tlsaquo: '\\u2039',\n\tLscr: '\\u2112',\n\tlscr: '\\uD835\\uDCC1',\n\tLsh: '\\u21B0',\n\tlsh: '\\u21B0',\n\tlsim: '\\u2272',\n\tlsime: '\\u2A8D',\n\tlsimg: '\\u2A8F',\n\tlsqb: '\\u005B',\n\tlsquo: '\\u2018',\n\tlsquor: '\\u201A',\n\tLstrok: '\\u0141',\n\tlstrok: '\\u0142',\n\tLt: '\\u226A',\n\tLT: '\\u003C',\n\tlt: '\\u003C',\n\tltcc: '\\u2AA6',\n\tltcir: '\\u2A79',\n\tltdot: '\\u22D6',\n\tlthree: '\\u22CB',\n\tltimes: '\\u22C9',\n\tltlarr: '\\u2976',\n\tltquest: '\\u2A7B',\n\tltri: '\\u25C3',\n\tltrie: '\\u22B4',\n\tltrif: '\\u25C2',\n\tltrPar: '\\u2996',\n\tlurdshar: '\\u294A',\n\tluruhar: '\\u2966',\n\tlvertneqq: '\\u2268\\uFE00',\n\tlvnE: '\\u2268\\uFE00',\n\tmacr: '\\u00AF',\n\tmale: '\\u2642',\n\tmalt: '\\u2720',\n\tmaltese: '\\u2720',\n\tMap: '\\u2905',\n\tmap: '\\u21A6',\n\tmapsto: '\\u21A6',\n\tmapstodown: '\\u21A7',\n\tmapstoleft: '\\u21A4',\n\tmapstoup: '\\u21A5',\n\tmarker: '\\u25AE',\n\tmcomma: '\\u2A29',\n\tMcy: '\\u041C',\n\tmcy: '\\u043C',\n\tmdash: '\\u2014',\n\tmDDot: '\\u223A',\n\tmeasuredangle: '\\u2221',\n\tMediumSpace: '\\u205F',\n\tMellintrf: '\\u2133',\n\tMfr: '\\uD835\\uDD10',\n\tmfr: '\\uD835\\uDD2A',\n\tmho: '\\u2127',\n\tmicro: '\\u00B5',\n\tmid: '\\u2223',\n\tmidast: '\\u002A',\n\tmidcir: '\\u2AF0',\n\tmiddot: '\\u00B7',\n\tminus: '\\u2212',\n\tminusb: '\\u229F',\n\tminusd: '\\u2238',\n\tminusdu: '\\u2A2A',\n\tMinusPlus: '\\u2213',\n\tmlcp: '\\u2ADB',\n\tmldr: '\\u2026',\n\tmnplus: '\\u2213',\n\tmodels: '\\u22A7',\n\tMopf: '\\uD835\\uDD44',\n\tmopf: '\\uD835\\uDD5E',\n\tmp: '\\u2213',\n\tMscr: '\\u2133',\n\tmscr: '\\uD835\\uDCC2',\n\tmstpos: '\\u223E',\n\tMu: '\\u039C',\n\tmu: '\\u03BC',\n\tmultimap: '\\u22B8',\n\tmumap: '\\u22B8',\n\tnabla: '\\u2207',\n\tNacute: '\\u0143',\n\tnacute: '\\u0144',\n\tnang: '\\u2220\\u20D2',\n\tnap: '\\u2249',\n\tnapE: '\\u2A70\\u0338',\n\tnapid: '\\u224B\\u0338',\n\tnapos: '\\u0149',\n\tnapprox: '\\u2249',\n\tnatur: '\\u266E',\n\tnatural: '\\u266E',\n\tnaturals: '\\u2115',\n\tnbsp: '\\u00A0',\n\tnbump: '\\u224E\\u0338',\n\tnbumpe: '\\u224F\\u0338',\n\tncap: '\\u2A43',\n\tNcaron: '\\u0147',\n\tncaron: '\\u0148',\n\tNcedil: '\\u0145',\n\tncedil: '\\u0146',\n\tncong: '\\u2247',\n\tncongdot: '\\u2A6D\\u0338',\n\tncup: '\\u2A42',\n\tNcy: '\\u041D',\n\tncy: '\\u043D',\n\tndash: '\\u2013',\n\tne: '\\u2260',\n\tnearhk: '\\u2924',\n\tneArr: '\\u21D7',\n\tnearr: '\\u2197',\n\tnearrow: '\\u2197',\n\tnedot: '\\u2250\\u0338',\n\tNegativeMediumSpace: '\\u200B',\n\tNegativeThickSpace: '\\u200B',\n\tNegativeThinSpace: '\\u200B',\n\tNegativeVeryThinSpace: '\\u200B',\n\tnequiv: '\\u2262',\n\tnesear: '\\u2928',\n\tnesim: '\\u2242\\u0338',\n\tNestedGreaterGreater: '\\u226B',\n\tNestedLessLess: '\\u226A',\n\tNewLine: '\\u000A',\n\tnexist: '\\u2204',\n\tnexists: '\\u2204',\n\tNfr: '\\uD835\\uDD11',\n\tnfr: '\\uD835\\uDD2B',\n\tngE: '\\u2267\\u0338',\n\tnge: '\\u2271',\n\tngeq: '\\u2271',\n\tngeqq: '\\u2267\\u0338',\n\tngeqslant: '\\u2A7E\\u0338',\n\tnges: '\\u2A7E\\u0338',\n\tnGg: '\\u22D9\\u0338',\n\tngsim: '\\u2275',\n\tnGt: '\\u226B\\u20D2',\n\tngt: '\\u226F',\n\tngtr: '\\u226F',\n\tnGtv: '\\u226B\\u0338',\n\tnhArr: '\\u21CE',\n\tnharr: '\\u21AE',\n\tnhpar: '\\u2AF2',\n\tni: '\\u220B',\n\tnis: '\\u22FC',\n\tnisd: '\\u22FA',\n\tniv: '\\u220B',\n\tNJcy: '\\u040A',\n\tnjcy: '\\u045A',\n\tnlArr: '\\u21CD',\n\tnlarr: '\\u219A',\n\tnldr: '\\u2025',\n\tnlE: '\\u2266\\u0338',\n\tnle: '\\u2270',\n\tnLeftarrow: '\\u21CD',\n\tnleftarrow: '\\u219A',\n\tnLeftrightarrow: '\\u21CE',\n\tnleftrightarrow: '\\u21AE',\n\tnleq: '\\u2270',\n\tnleqq: '\\u2266\\u0338',\n\tnleqslant: '\\u2A7D\\u0338',\n\tnles: '\\u2A7D\\u0338',\n\tnless: '\\u226E',\n\tnLl: '\\u22D8\\u0338',\n\tnlsim: '\\u2274',\n\tnLt: '\\u226A\\u20D2',\n\tnlt: '\\u226E',\n\tnltri: '\\u22EA',\n\tnltrie: '\\u22EC',\n\tnLtv: '\\u226A\\u0338',\n\tnmid: '\\u2224',\n\tNoBreak: '\\u2060',\n\tNonBreakingSpace: '\\u00A0',\n\tNopf: '\\u2115',\n\tnopf: '\\uD835\\uDD5F',\n\tNot: '\\u2AEC',\n\tnot: '\\u00AC',\n\tNotCongruent: '\\u2262',\n\tNotCupCap: '\\u226D',\n\tNotDoubleVerticalBar: '\\u2226',\n\tNotElement: '\\u2209',\n\tNotEqual: '\\u2260',\n\tNotEqualTilde: '\\u2242\\u0338',\n\tNotExists: '\\u2204',\n\tNotGreater: '\\u226F',\n\tNotGreaterEqual: '\\u2271',\n\tNotGreaterFullEqual: '\\u2267\\u0338',\n\tNotGreaterGreater: '\\u226B\\u0338',\n\tNotGreaterLess: '\\u2279',\n\tNotGreaterSlantEqual: '\\u2A7E\\u0338',\n\tNotGreaterTilde: '\\u2275',\n\tNotHumpDownHump: '\\u224E\\u0338',\n\tNotHumpEqual: '\\u224F\\u0338',\n\tnotin: '\\u2209',\n\tnotindot: '\\u22F5\\u0338',\n\tnotinE: '\\u22F9\\u0338',\n\tnotinva: '\\u2209',\n\tnotinvb: '\\u22F7',\n\tnotinvc: '\\u22F6',\n\tNotLeftTriangle: '\\u22EA',\n\tNotLeftTriangleBar: '\\u29CF\\u0338',\n\tNotLeftTriangleEqual: '\\u22EC',\n\tNotLess: '\\u226E',\n\tNotLessEqual: '\\u2270',\n\tNotLessGreater: '\\u2278',\n\tNotLessLess: '\\u226A\\u0338',\n\tNotLessSlantEqual: '\\u2A7D\\u0338',\n\tNotLessTilde: '\\u2274',\n\tNotNestedGreaterGreater: '\\u2AA2\\u0338',\n\tNotNestedLessLess: '\\u2AA1\\u0338',\n\tnotni: '\\u220C',\n\tnotniva: '\\u220C',\n\tnotnivb: '\\u22FE',\n\tnotnivc: '\\u22FD',\n\tNotPrecedes: '\\u2280',\n\tNotPrecedesEqual: '\\u2AAF\\u0338',\n\tNotPrecedesSlantEqual: '\\u22E0',\n\tNotReverseElement: '\\u220C',\n\tNotRightTriangle: '\\u22EB',\n\tNotRightTriangleBar: '\\u29D0\\u0338',\n\tNotRightTriangleEqual: '\\u22ED',\n\tNotSquareSubset: '\\u228F\\u0338',\n\tNotSquareSubsetEqual: '\\u22E2',\n\tNotSquareSuperset: '\\u2290\\u0338',\n\tNotSquareSupersetEqual: '\\u22E3',\n\tNotSubset: '\\u2282\\u20D2',\n\tNotSubsetEqual: '\\u2288',\n\tNotSucceeds: '\\u2281',\n\tNotSucceedsEqual: '\\u2AB0\\u0338',\n\tNotSucceedsSlantEqual: '\\u22E1',\n\tNotSucceedsTilde: '\\u227F\\u0338',\n\tNotSuperset: '\\u2283\\u20D2',\n\tNotSupersetEqual: '\\u2289',\n\tNotTilde: '\\u2241',\n\tNotTildeEqual: '\\u2244',\n\tNotTildeFullEqual: '\\u2247',\n\tNotTildeTilde: '\\u2249',\n\tNotVerticalBar: '\\u2224',\n\tnpar: '\\u2226',\n\tnparallel: '\\u2226',\n\tnparsl: '\\u2AFD\\u20E5',\n\tnpart: '\\u2202\\u0338',\n\tnpolint: '\\u2A14',\n\tnpr: '\\u2280',\n\tnprcue: '\\u22E0',\n\tnpre: '\\u2AAF\\u0338',\n\tnprec: '\\u2280',\n\tnpreceq: '\\u2AAF\\u0338',\n\tnrArr: '\\u21CF',\n\tnrarr: '\\u219B',\n\tnrarrc: '\\u2933\\u0338',\n\tnrarrw: '\\u219D\\u0338',\n\tnRightarrow: '\\u21CF',\n\tnrightarrow: '\\u219B',\n\tnrtri: '\\u22EB',\n\tnrtrie: '\\u22ED',\n\tnsc: '\\u2281',\n\tnsccue: '\\u22E1',\n\tnsce: '\\u2AB0\\u0338',\n\tNscr: '\\uD835\\uDCA9',\n\tnscr: '\\uD835\\uDCC3',\n\tnshortmid: '\\u2224',\n\tnshortparallel: '\\u2226',\n\tnsim: '\\u2241',\n\tnsime: '\\u2244',\n\tnsimeq: '\\u2244',\n\tnsmid: '\\u2224',\n\tnspar: '\\u2226',\n\tnsqsube: '\\u22E2',\n\tnsqsupe: '\\u22E3',\n\tnsub: '\\u2284',\n\tnsubE: '\\u2AC5\\u0338',\n\tnsube: '\\u2288',\n\tnsubset: '\\u2282\\u20D2',\n\tnsubseteq: '\\u2288',\n\tnsubseteqq: '\\u2AC5\\u0338',\n\tnsucc: '\\u2281',\n\tnsucceq: '\\u2AB0\\u0338',\n\tnsup: '\\u2285',\n\tnsupE: '\\u2AC6\\u0338',\n\tnsupe: '\\u2289',\n\tnsupset: '\\u2283\\u20D2',\n\tnsupseteq: '\\u2289',\n\tnsupseteqq: '\\u2AC6\\u0338',\n\tntgl: '\\u2279',\n\tNtilde: '\\u00D1',\n\tntilde: '\\u00F1',\n\tntlg: '\\u2278',\n\tntriangleleft: '\\u22EA',\n\tntrianglelefteq: '\\u22EC',\n\tntriangleright: '\\u22EB',\n\tntrianglerighteq: '\\u22ED',\n\tNu: '\\u039D',\n\tnu: '\\u03BD',\n\tnum: '\\u0023',\n\tnumero: '\\u2116',\n\tnumsp: '\\u2007',\n\tnvap: '\\u224D\\u20D2',\n\tnVDash: '\\u22AF',\n\tnVdash: '\\u22AE',\n\tnvDash: '\\u22AD',\n\tnvdash: '\\u22AC',\n\tnvge: '\\u2265\\u20D2',\n\tnvgt: '\\u003E\\u20D2',\n\tnvHarr: '\\u2904',\n\tnvinfin: '\\u29DE',\n\tnvlArr: '\\u2902',\n\tnvle: '\\u2264\\u20D2',\n\tnvlt: '\\u003C\\u20D2',\n\tnvltrie: '\\u22B4\\u20D2',\n\tnvrArr: '\\u2903',\n\tnvrtrie: '\\u22B5\\u20D2',\n\tnvsim: '\\u223C\\u20D2',\n\tnwarhk: '\\u2923',\n\tnwArr: '\\u21D6',\n\tnwarr: '\\u2196',\n\tnwarrow: '\\u2196',\n\tnwnear: '\\u2927',\n\tOacute: '\\u00D3',\n\toacute: '\\u00F3',\n\toast: '\\u229B',\n\tocir: '\\u229A',\n\tOcirc: '\\u00D4',\n\tocirc: '\\u00F4',\n\tOcy: '\\u041E',\n\tocy: '\\u043E',\n\todash: '\\u229D',\n\tOdblac: '\\u0150',\n\todblac: '\\u0151',\n\todiv: '\\u2A38',\n\todot: '\\u2299',\n\todsold: '\\u29BC',\n\tOElig: '\\u0152',\n\toelig: '\\u0153',\n\tofcir: '\\u29BF',\n\tOfr: '\\uD835\\uDD12',\n\tofr: '\\uD835\\uDD2C',\n\togon: '\\u02DB',\n\tOgrave: '\\u00D2',\n\tograve: '\\u00F2',\n\togt: '\\u29C1',\n\tohbar: '\\u29B5',\n\tohm: '\\u03A9',\n\toint: '\\u222E',\n\tolarr: '\\u21BA',\n\tolcir: '\\u29BE',\n\tolcross: '\\u29BB',\n\toline: '\\u203E',\n\tolt: '\\u29C0',\n\tOmacr: '\\u014C',\n\tomacr: '\\u014D',\n\tOmega: '\\u03A9',\n\tomega: '\\u03C9',\n\tOmicron: '\\u039F',\n\tomicron: '\\u03BF',\n\tomid: '\\u29B6',\n\tominus: '\\u2296',\n\tOopf: '\\uD835\\uDD46',\n\toopf: '\\uD835\\uDD60',\n\topar: '\\u29B7',\n\tOpenCurlyDoubleQuote: '\\u201C',\n\tOpenCurlyQuote: '\\u2018',\n\toperp: '\\u29B9',\n\toplus: '\\u2295',\n\tOr: '\\u2A54',\n\tor: '\\u2228',\n\torarr: '\\u21BB',\n\tord: '\\u2A5D',\n\torder: '\\u2134',\n\torderof: '\\u2134',\n\tordf: '\\u00AA',\n\tordm: '\\u00BA',\n\torigof: '\\u22B6',\n\toror: '\\u2A56',\n\torslope: '\\u2A57',\n\torv: '\\u2A5B',\n\toS: '\\u24C8',\n\tOscr: '\\uD835\\uDCAA',\n\toscr: '\\u2134',\n\tOslash: '\\u00D8',\n\toslash: '\\u00F8',\n\tosol: '\\u2298',\n\tOtilde: '\\u00D5',\n\totilde: '\\u00F5',\n\tOtimes: '\\u2A37',\n\totimes: '\\u2297',\n\totimesas: '\\u2A36',\n\tOuml: '\\u00D6',\n\touml: '\\u00F6',\n\tovbar: '\\u233D',\n\tOverBar: '\\u203E',\n\tOverBrace: '\\u23DE',\n\tOverBracket: '\\u23B4',\n\tOverParenthesis: '\\u23DC',\n\tpar: '\\u2225',\n\tpara: '\\u00B6',\n\tparallel: '\\u2225',\n\tparsim: '\\u2AF3',\n\tparsl: '\\u2AFD',\n\tpart: '\\u2202',\n\tPartialD: '\\u2202',\n\tPcy: '\\u041F',\n\tpcy: '\\u043F',\n\tpercnt: '\\u0025',\n\tperiod: '\\u002E',\n\tpermil: '\\u2030',\n\tperp: '\\u22A5',\n\tpertenk: '\\u2031',\n\tPfr: '\\uD835\\uDD13',\n\tpfr: '\\uD835\\uDD2D',\n\tPhi: '\\u03A6',\n\tphi: '\\u03C6',\n\tphiv: '\\u03D5',\n\tphmmat: '\\u2133',\n\tphone: '\\u260E',\n\tPi: '\\u03A0',\n\tpi: '\\u03C0',\n\tpitchfork: '\\u22D4',\n\tpiv: '\\u03D6',\n\tplanck: '\\u210F',\n\tplanckh: '\\u210E',\n\tplankv: '\\u210F',\n\tplus: '\\u002B',\n\tplusacir: '\\u2A23',\n\tplusb: '\\u229E',\n\tpluscir: '\\u2A22',\n\tplusdo: '\\u2214',\n\tplusdu: '\\u2A25',\n\tpluse: '\\u2A72',\n\tPlusMinus: '\\u00B1',\n\tplusmn: '\\u00B1',\n\tplussim: '\\u2A26',\n\tplustwo: '\\u2A27',\n\tpm: '\\u00B1',\n\tPoincareplane: '\\u210C',\n\tpointint: '\\u2A15',\n\tPopf: '\\u2119',\n\tpopf: '\\uD835\\uDD61',\n\tpound: '\\u00A3',\n\tPr: '\\u2ABB',\n\tpr: '\\u227A',\n\tprap: '\\u2AB7',\n\tprcue: '\\u227C',\n\tprE: '\\u2AB3',\n\tpre: '\\u2AAF',\n\tprec: '\\u227A',\n\tprecapprox: '\\u2AB7',\n\tpreccurlyeq: '\\u227C',\n\tPrecedes: '\\u227A',\n\tPrecedesEqual: '\\u2AAF',\n\tPrecedesSlantEqual: '\\u227C',\n\tPrecedesTilde: '\\u227E',\n\tpreceq: '\\u2AAF',\n\tprecnapprox: '\\u2AB9',\n\tprecneqq: '\\u2AB5',\n\tprecnsim: '\\u22E8',\n\tprecsim: '\\u227E',\n\tPrime: '\\u2033',\n\tprime: '\\u2032',\n\tprimes: '\\u2119',\n\tprnap: '\\u2AB9',\n\tprnE: '\\u2AB5',\n\tprnsim: '\\u22E8',\n\tprod: '\\u220F',\n\tProduct: '\\u220F',\n\tprofalar: '\\u232E',\n\tprofline: '\\u2312',\n\tprofsurf: '\\u2313',\n\tprop: '\\u221D',\n\tProportion: '\\u2237',\n\tProportional: '\\u221D',\n\tpropto: '\\u221D',\n\tprsim: '\\u227E',\n\tprurel: '\\u22B0',\n\tPscr: '\\uD835\\uDCAB',\n\tpscr: '\\uD835\\uDCC5',\n\tPsi: '\\u03A8',\n\tpsi: '\\u03C8',\n\tpuncsp: '\\u2008',\n\tQfr: '\\uD835\\uDD14',\n\tqfr: '\\uD835\\uDD2E',\n\tqint: '\\u2A0C',\n\tQopf: '\\u211A',\n\tqopf: '\\uD835\\uDD62',\n\tqprime: '\\u2057',\n\tQscr: '\\uD835\\uDCAC',\n\tqscr: '\\uD835\\uDCC6',\n\tquaternions: '\\u210D',\n\tquatint: '\\u2A16',\n\tquest: '\\u003F',\n\tquesteq: '\\u225F',\n\tQUOT: '\\u0022',\n\tquot: '\\u0022',\n\trAarr: '\\u21DB',\n\trace: '\\u223D\\u0331',\n\tRacute: '\\u0154',\n\tracute: '\\u0155',\n\tradic: '\\u221A',\n\traemptyv: '\\u29B3',\n\tRang: '\\u27EB',\n\trang: '\\u27E9',\n\trangd: '\\u2992',\n\trange: '\\u29A5',\n\trangle: '\\u27E9',\n\traquo: '\\u00BB',\n\tRarr: '\\u21A0',\n\trArr: '\\u21D2',\n\trarr: '\\u2192',\n\trarrap: '\\u2975',\n\trarrb: '\\u21E5',\n\trarrbfs: '\\u2920',\n\trarrc: '\\u2933',\n\trarrfs: '\\u291E',\n\trarrhk: '\\u21AA',\n\trarrlp: '\\u21AC',\n\trarrpl: '\\u2945',\n\trarrsim: '\\u2974',\n\tRarrtl: '\\u2916',\n\trarrtl: '\\u21A3',\n\trarrw: '\\u219D',\n\trAtail: '\\u291C',\n\tratail: '\\u291A',\n\tratio: '\\u2236',\n\trationals: '\\u211A',\n\tRBarr: '\\u2910',\n\trBarr: '\\u290F',\n\trbarr: '\\u290D',\n\trbbrk: '\\u2773',\n\trbrace: '\\u007D',\n\trbrack: '\\u005D',\n\trbrke: '\\u298C',\n\trbrksld: '\\u298E',\n\trbrkslu: '\\u2990',\n\tRcaron: '\\u0158',\n\trcaron: '\\u0159',\n\tRcedil: '\\u0156',\n\trcedil: '\\u0157',\n\trceil: '\\u2309',\n\trcub: '\\u007D',\n\tRcy: '\\u0420',\n\trcy: '\\u0440',\n\trdca: '\\u2937',\n\trdldhar: '\\u2969',\n\trdquo: '\\u201D',\n\trdquor: '\\u201D',\n\trdsh: '\\u21B3',\n\tRe: '\\u211C',\n\treal: '\\u211C',\n\trealine: '\\u211B',\n\trealpart: '\\u211C',\n\treals: '\\u211D',\n\trect: '\\u25AD',\n\tREG: '\\u00AE',\n\treg: '\\u00AE',\n\tReverseElement: '\\u220B',\n\tReverseEquilibrium: '\\u21CB',\n\tReverseUpEquilibrium: '\\u296F',\n\trfisht: '\\u297D',\n\trfloor: '\\u230B',\n\tRfr: '\\u211C',\n\trfr: '\\uD835\\uDD2F',\n\trHar: '\\u2964',\n\trhard: '\\u21C1',\n\trharu: '\\u21C0',\n\trharul: '\\u296C',\n\tRho: '\\u03A1',\n\trho: '\\u03C1',\n\trhov: '\\u03F1',\n\tRightAngleBracket: '\\u27E9',\n\tRightArrow: '\\u2192',\n\tRightarrow: '\\u21D2',\n\trightarrow: '\\u2192',\n\tRightArrowBar: '\\u21E5',\n\tRightArrowLeftArrow: '\\u21C4',\n\trightarrowtail: '\\u21A3',\n\tRightCeiling: '\\u2309',\n\tRightDoubleBracket: '\\u27E7',\n\tRightDownTeeVector: '\\u295D',\n\tRightDownVector: '\\u21C2',\n\tRightDownVectorBar: '\\u2955',\n\tRightFloor: '\\u230B',\n\trightharpoondown: '\\u21C1',\n\trightharpoonup: '\\u21C0',\n\trightleftarrows: '\\u21C4',\n\trightleftharpoons: '\\u21CC',\n\trightrightarrows: '\\u21C9',\n\trightsquigarrow: '\\u219D',\n\tRightTee: '\\u22A2',\n\tRightTeeArrow: '\\u21A6',\n\tRightTeeVector: '\\u295B',\n\trightthreetimes: '\\u22CC',\n\tRightTriangle: '\\u22B3',\n\tRightTriangleBar: '\\u29D0',\n\tRightTriangleEqual: '\\u22B5',\n\tRightUpDownVector: '\\u294F',\n\tRightUpTeeVector: '\\u295C',\n\tRightUpVector: '\\u21BE',\n\tRightUpVectorBar: '\\u2954',\n\tRightVector: '\\u21C0',\n\tRightVectorBar: '\\u2953',\n\tring: '\\u02DA',\n\trisingdotseq: '\\u2253',\n\trlarr: '\\u21C4',\n\trlhar: '\\u21CC',\n\trlm: '\\u200F',\n\trmoust: '\\u23B1',\n\trmoustache: '\\u23B1',\n\trnmid: '\\u2AEE',\n\troang: '\\u27ED',\n\troarr: '\\u21FE',\n\trobrk: '\\u27E7',\n\tropar: '\\u2986',\n\tRopf: '\\u211D',\n\tropf: '\\uD835\\uDD63',\n\troplus: '\\u2A2E',\n\trotimes: '\\u2A35',\n\tRoundImplies: '\\u2970',\n\trpar: '\\u0029',\n\trpargt: '\\u2994',\n\trppolint: '\\u2A12',\n\trrarr: '\\u21C9',\n\tRrightarrow: '\\u21DB',\n\trsaquo: '\\u203A',\n\tRscr: '\\u211B',\n\trscr: '\\uD835\\uDCC7',\n\tRsh: '\\u21B1',\n\trsh: '\\u21B1',\n\trsqb: '\\u005D',\n\trsquo: '\\u2019',\n\trsquor: '\\u2019',\n\trthree: '\\u22CC',\n\trtimes: '\\u22CA',\n\trtri: '\\u25B9',\n\trtrie: '\\u22B5',\n\trtrif: '\\u25B8',\n\trtriltri: '\\u29CE',\n\tRuleDelayed: '\\u29F4',\n\truluhar: '\\u2968',\n\trx: '\\u211E',\n\tSacute: '\\u015A',\n\tsacute: '\\u015B',\n\tsbquo: '\\u201A',\n\tSc: '\\u2ABC',\n\tsc: '\\u227B',\n\tscap: '\\u2AB8',\n\tScaron: '\\u0160',\n\tscaron: '\\u0161',\n\tsccue: '\\u227D',\n\tscE: '\\u2AB4',\n\tsce: '\\u2AB0',\n\tScedil: '\\u015E',\n\tscedil: '\\u015F',\n\tScirc: '\\u015C',\n\tscirc: '\\u015D',\n\tscnap: '\\u2ABA',\n\tscnE: '\\u2AB6',\n\tscnsim: '\\u22E9',\n\tscpolint: '\\u2A13',\n\tscsim: '\\u227F',\n\tScy: '\\u0421',\n\tscy: '\\u0441',\n\tsdot: '\\u22C5',\n\tsdotb: '\\u22A1',\n\tsdote: '\\u2A66',\n\tsearhk: '\\u2925',\n\tseArr: '\\u21D8',\n\tsearr: '\\u2198',\n\tsearrow: '\\u2198',\n\tsect: '\\u00A7',\n\tsemi: '\\u003B',\n\tseswar: '\\u2929',\n\tsetminus: '\\u2216',\n\tsetmn: '\\u2216',\n\tsext: '\\u2736',\n\tSfr: '\\uD835\\uDD16',\n\tsfr: '\\uD835\\uDD30',\n\tsfrown: '\\u2322',\n\tsharp: '\\u266F',\n\tSHCHcy: '\\u0429',\n\tshchcy: '\\u0449',\n\tSHcy: '\\u0428',\n\tshcy: '\\u0448',\n\tShortDownArrow: '\\u2193',\n\tShortLeftArrow: '\\u2190',\n\tshortmid: '\\u2223',\n\tshortparallel: '\\u2225',\n\tShortRightArrow: '\\u2192',\n\tShortUpArrow: '\\u2191',\n\tshy: '\\u00AD',\n\tSigma: '\\u03A3',\n\tsigma: '\\u03C3',\n\tsigmaf: '\\u03C2',\n\tsigmav: '\\u03C2',\n\tsim: '\\u223C',\n\tsimdot: '\\u2A6A',\n\tsime: '\\u2243',\n\tsimeq: '\\u2243',\n\tsimg: '\\u2A9E',\n\tsimgE: '\\u2AA0',\n\tsiml: '\\u2A9D',\n\tsimlE: '\\u2A9F',\n\tsimne: '\\u2246',\n\tsimplus: '\\u2A24',\n\tsimrarr: '\\u2972',\n\tslarr: '\\u2190',\n\tSmallCircle: '\\u2218',\n\tsmallsetminus: '\\u2216',\n\tsmashp: '\\u2A33',\n\tsmeparsl: '\\u29E4',\n\tsmid: '\\u2223',\n\tsmile: '\\u2323',\n\tsmt: '\\u2AAA',\n\tsmte: '\\u2AAC',\n\tsmtes: '\\u2AAC\\uFE00',\n\tSOFTcy: '\\u042C',\n\tsoftcy: '\\u044C',\n\tsol: '\\u002F',\n\tsolb: '\\u29C4',\n\tsolbar: '\\u233F',\n\tSopf: '\\uD835\\uDD4A',\n\tsopf: '\\uD835\\uDD64',\n\tspades: '\\u2660',\n\tspadesuit: '\\u2660',\n\tspar: '\\u2225',\n\tsqcap: '\\u2293',\n\tsqcaps: '\\u2293\\uFE00',\n\tsqcup: '\\u2294',\n\tsqcups: '\\u2294\\uFE00',\n\tSqrt: '\\u221A',\n\tsqsub: '\\u228F',\n\tsqsube: '\\u2291',\n\tsqsubset: '\\u228F',\n\tsqsubseteq: '\\u2291',\n\tsqsup: '\\u2290',\n\tsqsupe: '\\u2292',\n\tsqsupset: '\\u2290',\n\tsqsupseteq: '\\u2292',\n\tsqu: '\\u25A1',\n\tSquare: '\\u25A1',\n\tsquare: '\\u25A1',\n\tSquareIntersection: '\\u2293',\n\tSquareSubset: '\\u228F',\n\tSquareSubsetEqual: '\\u2291',\n\tSquareSuperset: '\\u2290',\n\tSquareSupersetEqual: '\\u2292',\n\tSquareUnion: '\\u2294',\n\tsquarf: '\\u25AA',\n\tsquf: '\\u25AA',\n\tsrarr: '\\u2192',\n\tSscr: '\\uD835\\uDCAE',\n\tsscr: '\\uD835\\uDCC8',\n\tssetmn: '\\u2216',\n\tssmile: '\\u2323',\n\tsstarf: '\\u22C6',\n\tStar: '\\u22C6',\n\tstar: '\\u2606',\n\tstarf: '\\u2605',\n\tstraightepsilon: '\\u03F5',\n\tstraightphi: '\\u03D5',\n\tstrns: '\\u00AF',\n\tSub: '\\u22D0',\n\tsub: '\\u2282',\n\tsubdot: '\\u2ABD',\n\tsubE: '\\u2AC5',\n\tsube: '\\u2286',\n\tsubedot: '\\u2AC3',\n\tsubmult: '\\u2AC1',\n\tsubnE: '\\u2ACB',\n\tsubne: '\\u228A',\n\tsubplus: '\\u2ABF',\n\tsubrarr: '\\u2979',\n\tSubset: '\\u22D0',\n\tsubset: '\\u2282',\n\tsubseteq: '\\u2286',\n\tsubseteqq: '\\u2AC5',\n\tSubsetEqual: '\\u2286',\n\tsubsetneq: '\\u228A',\n\tsubsetneqq: '\\u2ACB',\n\tsubsim: '\\u2AC7',\n\tsubsub: '\\u2AD5',\n\tsubsup: '\\u2AD3',\n\tsucc: '\\u227B',\n\tsuccapprox: '\\u2AB8',\n\tsucccurlyeq: '\\u227D',\n\tSucceeds: '\\u227B',\n\tSucceedsEqual: '\\u2AB0',\n\tSucceedsSlantEqual: '\\u227D',\n\tSucceedsTilde: '\\u227F',\n\tsucceq: '\\u2AB0',\n\tsuccnapprox: '\\u2ABA',\n\tsuccneqq: '\\u2AB6',\n\tsuccnsim: '\\u22E9',\n\tsuccsim: '\\u227F',\n\tSuchThat: '\\u220B',\n\tSum: '\\u2211',\n\tsum: '\\u2211',\n\tsung: '\\u266A',\n\tSup: '\\u22D1',\n\tsup: '\\u2283',\n\tsup1: '\\u00B9',\n\tsup2: '\\u00B2',\n\tsup3: '\\u00B3',\n\tsupdot: '\\u2ABE',\n\tsupdsub: '\\u2AD8',\n\tsupE: '\\u2AC6',\n\tsupe: '\\u2287',\n\tsupedot: '\\u2AC4',\n\tSuperset: '\\u2283',\n\tSupersetEqual: '\\u2287',\n\tsuphsol: '\\u27C9',\n\tsuphsub: '\\u2AD7',\n\tsuplarr: '\\u297B',\n\tsupmult: '\\u2AC2',\n\tsupnE: '\\u2ACC',\n\tsupne: '\\u228B',\n\tsupplus: '\\u2AC0',\n\tSupset: '\\u22D1',\n\tsupset: '\\u2283',\n\tsupseteq: '\\u2287',\n\tsupseteqq: '\\u2AC6',\n\tsupsetneq: '\\u228B',\n\tsupsetneqq: '\\u2ACC',\n\tsupsim: '\\u2AC8',\n\tsupsub: '\\u2AD4',\n\tsupsup: '\\u2AD6',\n\tswarhk: '\\u2926',\n\tswArr: '\\u21D9',\n\tswarr: '\\u2199',\n\tswarrow: '\\u2199',\n\tswnwar: '\\u292A',\n\tszlig: '\\u00DF',\n\tTab: '\\u0009',\n\ttarget: '\\u2316',\n\tTau: '\\u03A4',\n\ttau: '\\u03C4',\n\ttbrk: '\\u23B4',\n\tTcaron: '\\u0164',\n\ttcaron: '\\u0165',\n\tTcedil: '\\u0162',\n\ttcedil: '\\u0163',\n\tTcy: '\\u0422',\n\ttcy: '\\u0442',\n\ttdot: '\\u20DB',\n\ttelrec: '\\u2315',\n\tTfr: '\\uD835\\uDD17',\n\ttfr: '\\uD835\\uDD31',\n\tthere4: '\\u2234',\n\tTherefore: '\\u2234',\n\ttherefore: '\\u2234',\n\tTheta: '\\u0398',\n\ttheta: '\\u03B8',\n\tthetasym: '\\u03D1',\n\tthetav: '\\u03D1',\n\tthickapprox: '\\u2248',\n\tthicksim: '\\u223C',\n\tThickSpace: '\\u205F\\u200A',\n\tthinsp: '\\u2009',\n\tThinSpace: '\\u2009',\n\tthkap: '\\u2248',\n\tthksim: '\\u223C',\n\tTHORN: '\\u00DE',\n\tthorn: '\\u00FE',\n\tTilde: '\\u223C',\n\ttilde: '\\u02DC',\n\tTildeEqual: '\\u2243',\n\tTildeFullEqual: '\\u2245',\n\tTildeTilde: '\\u2248',\n\ttimes: '\\u00D7',\n\ttimesb: '\\u22A0',\n\ttimesbar: '\\u2A31',\n\ttimesd: '\\u2A30',\n\ttint: '\\u222D',\n\ttoea: '\\u2928',\n\ttop: '\\u22A4',\n\ttopbot: '\\u2336',\n\ttopcir: '\\u2AF1',\n\tTopf: '\\uD835\\uDD4B',\n\ttopf: '\\uD835\\uDD65',\n\ttopfork: '\\u2ADA',\n\ttosa: '\\u2929',\n\ttprime: '\\u2034',\n\tTRADE: '\\u2122',\n\ttrade: '\\u2122',\n\ttriangle: '\\u25B5',\n\ttriangledown: '\\u25BF',\n\ttriangleleft: '\\u25C3',\n\ttrianglelefteq: '\\u22B4',\n\ttriangleq: '\\u225C',\n\ttriangleright: '\\u25B9',\n\ttrianglerighteq: '\\u22B5',\n\ttridot: '\\u25EC',\n\ttrie: '\\u225C',\n\ttriminus: '\\u2A3A',\n\tTripleDot: '\\u20DB',\n\ttriplus: '\\u2A39',\n\ttrisb: '\\u29CD',\n\ttritime: '\\u2A3B',\n\ttrpezium: '\\u23E2',\n\tTscr: '\\uD835\\uDCAF',\n\ttscr: '\\uD835\\uDCC9',\n\tTScy: '\\u0426',\n\ttscy: '\\u0446',\n\tTSHcy: '\\u040B',\n\ttshcy: '\\u045B',\n\tTstrok: '\\u0166',\n\ttstrok: '\\u0167',\n\ttwixt: '\\u226C',\n\ttwoheadleftarrow: '\\u219E',\n\ttwoheadrightarrow: '\\u21A0',\n\tUacute: '\\u00DA',\n\tuacute: '\\u00FA',\n\tUarr: '\\u219F',\n\tuArr: '\\u21D1',\n\tuarr: '\\u2191',\n\tUarrocir: '\\u2949',\n\tUbrcy: '\\u040E',\n\tubrcy: '\\u045E',\n\tUbreve: '\\u016C',\n\tubreve: '\\u016D',\n\tUcirc: '\\u00DB',\n\tucirc: '\\u00FB',\n\tUcy: '\\u0423',\n\tucy: '\\u0443',\n\tudarr: '\\u21C5',\n\tUdblac: '\\u0170',\n\tudblac: '\\u0171',\n\tudhar: '\\u296E',\n\tufisht: '\\u297E',\n\tUfr: '\\uD835\\uDD18',\n\tufr: '\\uD835\\uDD32',\n\tUgrave: '\\u00D9',\n\tugrave: '\\u00F9',\n\tuHar: '\\u2963',\n\tuharl: '\\u21BF',\n\tuharr: '\\u21BE',\n\tuhblk: '\\u2580',\n\tulcorn: '\\u231C',\n\tulcorner: '\\u231C',\n\tulcrop: '\\u230F',\n\tultri: '\\u25F8',\n\tUmacr: '\\u016A',\n\tumacr: '\\u016B',\n\tuml: '\\u00A8',\n\tUnderBar: '\\u005F',\n\tUnderBrace: '\\u23DF',\n\tUnderBracket: '\\u23B5',\n\tUnderParenthesis: '\\u23DD',\n\tUnion: '\\u22C3',\n\tUnionPlus: '\\u228E',\n\tUogon: '\\u0172',\n\tuogon: '\\u0173',\n\tUopf: '\\uD835\\uDD4C',\n\tuopf: '\\uD835\\uDD66',\n\tUpArrow: '\\u2191',\n\tUparrow: '\\u21D1',\n\tuparrow: '\\u2191',\n\tUpArrowBar: '\\u2912',\n\tUpArrowDownArrow: '\\u21C5',\n\tUpDownArrow: '\\u2195',\n\tUpdownarrow: '\\u21D5',\n\tupdownarrow: '\\u2195',\n\tUpEquilibrium: '\\u296E',\n\tupharpoonleft: '\\u21BF',\n\tupharpoonright: '\\u21BE',\n\tuplus: '\\u228E',\n\tUpperLeftArrow: '\\u2196',\n\tUpperRightArrow: '\\u2197',\n\tUpsi: '\\u03D2',\n\tupsi: '\\u03C5',\n\tupsih: '\\u03D2',\n\tUpsilon: '\\u03A5',\n\tupsilon: '\\u03C5',\n\tUpTee: '\\u22A5',\n\tUpTeeArrow: '\\u21A5',\n\tupuparrows: '\\u21C8',\n\turcorn: '\\u231D',\n\turcorner: '\\u231D',\n\turcrop: '\\u230E',\n\tUring: '\\u016E',\n\turing: '\\u016F',\n\turtri: '\\u25F9',\n\tUscr: '\\uD835\\uDCB0',\n\tuscr: '\\uD835\\uDCCA',\n\tutdot: '\\u22F0',\n\tUtilde: '\\u0168',\n\tutilde: '\\u0169',\n\tutri: '\\u25B5',\n\tutrif: '\\u25B4',\n\tuuarr: '\\u21C8',\n\tUuml: '\\u00DC',\n\tuuml: '\\u00FC',\n\tuwangle: '\\u29A7',\n\tvangrt: '\\u299C',\n\tvarepsilon: '\\u03F5',\n\tvarkappa: '\\u03F0',\n\tvarnothing: '\\u2205',\n\tvarphi: '\\u03D5',\n\tvarpi: '\\u03D6',\n\tvarpropto: '\\u221D',\n\tvArr: '\\u21D5',\n\tvarr: '\\u2195',\n\tvarrho: '\\u03F1',\n\tvarsigma: '\\u03C2',\n\tvarsubsetneq: '\\u228A\\uFE00',\n\tvarsubsetneqq: '\\u2ACB\\uFE00',\n\tvarsupsetneq: '\\u228B\\uFE00',\n\tvarsupsetneqq: '\\u2ACC\\uFE00',\n\tvartheta: '\\u03D1',\n\tvartriangleleft: '\\u22B2',\n\tvartriangleright: '\\u22B3',\n\tVbar: '\\u2AEB',\n\tvBar: '\\u2AE8',\n\tvBarv: '\\u2AE9',\n\tVcy: '\\u0412',\n\tvcy: '\\u0432',\n\tVDash: '\\u22AB',\n\tVdash: '\\u22A9',\n\tvDash: '\\u22A8',\n\tvdash: '\\u22A2',\n\tVdashl: '\\u2AE6',\n\tVee: '\\u22C1',\n\tvee: '\\u2228',\n\tveebar: '\\u22BB',\n\tveeeq: '\\u225A',\n\tvellip: '\\u22EE',\n\tVerbar: '\\u2016',\n\tverbar: '\\u007C',\n\tVert: '\\u2016',\n\tvert: '\\u007C',\n\tVerticalBar: '\\u2223',\n\tVerticalLine: '\\u007C',\n\tVerticalSeparator: '\\u2758',\n\tVerticalTilde: '\\u2240',\n\tVeryThinSpace: '\\u200A',\n\tVfr: '\\uD835\\uDD19',\n\tvfr: '\\uD835\\uDD33',\n\tvltri: '\\u22B2',\n\tvnsub: '\\u2282\\u20D2',\n\tvnsup: '\\u2283\\u20D2',\n\tVopf: '\\uD835\\uDD4D',\n\tvopf: '\\uD835\\uDD67',\n\tvprop: '\\u221D',\n\tvrtri: '\\u22B3',\n\tVscr: '\\uD835\\uDCB1',\n\tvscr: '\\uD835\\uDCCB',\n\tvsubnE: '\\u2ACB\\uFE00',\n\tvsubne: '\\u228A\\uFE00',\n\tvsupnE: '\\u2ACC\\uFE00',\n\tvsupne: '\\u228B\\uFE00',\n\tVvdash: '\\u22AA',\n\tvzigzag: '\\u299A',\n\tWcirc: '\\u0174',\n\twcirc: '\\u0175',\n\twedbar: '\\u2A5F',\n\tWedge: '\\u22C0',\n\twedge: '\\u2227',\n\twedgeq: '\\u2259',\n\tweierp: '\\u2118',\n\tWfr: '\\uD835\\uDD1A',\n\twfr: '\\uD835\\uDD34',\n\tWopf: '\\uD835\\uDD4E',\n\twopf: '\\uD835\\uDD68',\n\twp: '\\u2118',\n\twr: '\\u2240',\n\twreath: '\\u2240',\n\tWscr: '\\uD835\\uDCB2',\n\twscr: '\\uD835\\uDCCC',\n\txcap: '\\u22C2',\n\txcirc: '\\u25EF',\n\txcup: '\\u22C3',\n\txdtri: '\\u25BD',\n\tXfr: '\\uD835\\uDD1B',\n\txfr: '\\uD835\\uDD35',\n\txhArr: '\\u27FA',\n\txharr: '\\u27F7',\n\tXi: '\\u039E',\n\txi: '\\u03BE',\n\txlArr: '\\u27F8',\n\txlarr: '\\u27F5',\n\txmap: '\\u27FC',\n\txnis: '\\u22FB',\n\txodot: '\\u2A00',\n\tXopf: '\\uD835\\uDD4F',\n\txopf: '\\uD835\\uDD69',\n\txoplus: '\\u2A01',\n\txotime: '\\u2A02',\n\txrArr: '\\u27F9',\n\txrarr: '\\u27F6',\n\tXscr: '\\uD835\\uDCB3',\n\txscr: '\\uD835\\uDCCD',\n\txsqcup: '\\u2A06',\n\txuplus: '\\u2A04',\n\txutri: '\\u25B3',\n\txvee: '\\u22C1',\n\txwedge: '\\u22C0',\n\tYacute: '\\u00DD',\n\tyacute: '\\u00FD',\n\tYAcy: '\\u042F',\n\tyacy: '\\u044F',\n\tYcirc: '\\u0176',\n\tycirc: '\\u0177',\n\tYcy: '\\u042B',\n\tycy: '\\u044B',\n\tyen: '\\u00A5',\n\tYfr: '\\uD835\\uDD1C',\n\tyfr: '\\uD835\\uDD36',\n\tYIcy: '\\u0407',\n\tyicy: '\\u0457',\n\tYopf: '\\uD835\\uDD50',\n\tyopf: '\\uD835\\uDD6A',\n\tYscr: '\\uD835\\uDCB4',\n\tyscr: '\\uD835\\uDCCE',\n\tYUcy: '\\u042E',\n\tyucy: '\\u044E',\n\tYuml: '\\u0178',\n\tyuml: '\\u00FF',\n\tZacute: '\\u0179',\n\tzacute: '\\u017A',\n\tZcaron: '\\u017D',\n\tzcaron: '\\u017E',\n\tZcy: '\\u0417',\n\tzcy: '\\u0437',\n\tZdot: '\\u017B',\n\tzdot: '\\u017C',\n\tzeetrf: '\\u2128',\n\tZeroWidthSpace: '\\u200B',\n\tZeta: '\\u0396',\n\tzeta: '\\u03B6',\n\tZfr: '\\u2128',\n\tzfr: '\\uD835\\uDD37',\n\tZHcy: '\\u0416',\n\tzhcy: '\\u0436',\n\tzigrarr: '\\u21DD',\n\tZopf: '\\u2124',\n\tzopf: '\\uD835\\uDD6B',\n\tZscr: '\\uD835\\uDCB5',\n\tzscr: '\\uD835\\uDCCF',\n\tzwj: '\\u200D',\n\tzwnj: '\\u200C',\n});\n\n/**\n * @deprecated\n * Use `HTML_ENTITIES` instead.\n * @see {@link HTML_ENTITIES}\n */\nexports.entityMap = exports.HTML_ENTITIES;\n","'use strict';\n\nvar conventions = require('./conventions');\nvar g = require('./grammar');\nvar errors = require('./errors');\n\nvar isHTMLEscapableRawTextElement = conventions.isHTMLEscapableRawTextElement;\nvar isHTMLMimeType = conventions.isHTMLMimeType;\nvar isHTMLRawTextElement = conventions.isHTMLRawTextElement;\nvar hasOwn = conventions.hasOwn;\nvar NAMESPACE = conventions.NAMESPACE;\nvar ParseError = errors.ParseError;\nvar DOMException = errors.DOMException;\n\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0; //tag name offerring\nvar S_ATTR = 1; //attr name offerring\nvar S_ATTR_SPACE = 2; //attr name end and space offer\nvar S_EQ = 3; //=space?\nvar S_ATTR_NOQUOT_VALUE = 4; //attr value(no quot value only)\nvar S_ATTR_END = 5; //attr value end and no space(quot end)\nvar S_TAG_SPACE = 6; //(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7; //closed el<el />\n\nfunction XMLReader() {}\n\nXMLReader.prototype = {\n\tparse: function (source, defaultNSMap, entityMap) {\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap, (defaultNSMap = Object.create(null)));\n\t\tparse(source, defaultNSMap, entityMap, domBuilder, this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t},\n};\n\n/**\n * Detecting everything that might be a reference,\n * including those without ending `;`, since those are allowed in HTML.\n * The entityReplacer takes care of verifying and transforming each occurrence,\n * and reports to the errorHandler on those that are not OK,\n * depending on the context.\n */\nvar ENTITY_REG = /&#?\\w+;?/g;\n\nfunction parse(source, defaultNSMapCopy, entityMap, domBuilder, errorHandler) {\n\tvar isHTML = isHTMLMimeType(domBuilder.mimeType);\n\tif (source.indexOf(g.UNICODE_REPLACEMENT_CHARACTER) >= 0) {\n\t\terrorHandler.warning('Unicode replacement character detected, source encoding issues?');\n\t}\n\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10),\n\t\t\t\tsurrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\n\tfunction entityReplacer(a) {\n\t\tvar complete = a[a.length - 1] === ';' ? a : a + ';';\n\t\tif (!isHTML && complete !== a) {\n\t\t\terrorHandler.error('EntityRef: expecting ;');\n\t\t\treturn a;\n\t\t}\n\t\tvar match = g.Reference.exec(complete);\n\t\tif (!match || match[0].length !== complete.length) {\n\t\t\terrorHandler.error('entity not matching Reference production: ' + a);\n\t\t\treturn a;\n\t\t}\n\t\tvar k = complete.slice(1, -1);\n\t\tif (hasOwn(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t} else if (k.charAt(0) === '#') {\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x', '0x')));\n\t\t} else {\n\t\t\terrorHandler.error('entity not found:' + a);\n\t\t\treturn a;\n\t\t}\n\t}\n\n\tfunction appendText(end) {\n\t\t//has some bugs\n\t\tif (end > start) {\n\t\t\tvar xt = source.substring(start, end).replace(ENTITY_REG, entityReplacer);\n\t\t\tlocator && position(start);\n\t\t\tdomBuilder.characters(xt, 0, end - start);\n\t\t\tstart = end;\n\t\t}\n\t}\n\n\tfunction position(p, m) {\n\t\twhile (p >= lineEnd && (m = linePattern.exec(source))) {\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t}\n\t\tlocator.columnNumber = p - lineStart + 1;\n\t}\n\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g;\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{ currentNSMap: defaultNSMapCopy }];\n\tvar unclosedTags = [];\n\tvar start = 0;\n\twhile (true) {\n\t\ttry {\n\t\t\tvar tagStart = source.indexOf('<', start);\n\t\t\tif (tagStart < 0) {\n\t\t\t\tif (!isHTML && unclosedTags.length > 0) {\n\t\t\t\t\treturn errorHandler.fatalError('unclosed xml tag(s): ' + unclosedTags.join(', '));\n\t\t\t\t}\n\t\t\t\tif (!source.substring(start).match(/^\\s*$/)) {\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t\t\t\t\tvar text = doc.createTextNode(source.substr(start));\n\t\t\t\t\tif (doc.documentElement) {\n\t\t\t\t\t\treturn errorHandler.error('Extra content at the end of the document');\n\t\t\t\t\t}\n\t\t\t\t\tdoc.appendChild(text);\n\t\t\t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (tagStart > start) {\n\t\t\t\tvar fromSource = source.substring(start, tagStart);\n\t\t\t\tif (!isHTML && unclosedTags.length === 0) {\n\t\t\t\t\tfromSource = fromSource.replace(new RegExp(g.S_OPT.source, 'g'), '');\n\t\t\t\t\tfromSource && errorHandler.error(\"Unexpected content outside root element: '\" + fromSource + \"'\");\n\t\t\t\t}\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch (source.charAt(tagStart + 1)) {\n\t\t\t\tcase '/':\n\t\t\t\t\tvar end = source.indexOf('>', tagStart + 2);\n\t\t\t\t\tvar tagNameRaw = source.substring(tagStart + 2, end > 0 ? end : undefined);\n\t\t\t\t\tif (!tagNameRaw) {\n\t\t\t\t\t\treturn errorHandler.fatalError('end tag name missing');\n\t\t\t\t\t}\n\t\t\t\t\tvar tagNameMatch = end > 0 && g.reg('^', g.QName_group, g.S_OPT, '$').exec(tagNameRaw);\n\t\t\t\t\tif (!tagNameMatch) {\n\t\t\t\t\t\treturn errorHandler.fatalError('end tag name contains invalid characters: \"' + tagNameRaw + '\"');\n\t\t\t\t\t}\n\t\t\t\t\tif (!domBuilder.currentElement && !domBuilder.doc.documentElement) {\n\t\t\t\t\t\t// not enough information to provide a helpful error message,\n\t\t\t\t\t\t// but parsing will throw since there is no root element\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar currentTagName =\n\t\t\t\t\t\tunclosedTags[unclosedTags.length - 1] ||\n\t\t\t\t\t\tdomBuilder.currentElement.tagName ||\n\t\t\t\t\t\tdomBuilder.doc.documentElement.tagName ||\n\t\t\t\t\t\t'';\n\t\t\t\t\tif (currentTagName !== tagNameMatch[1]) {\n\t\t\t\t\t\tvar tagNameLower = tagNameMatch[1].toLowerCase();\n\t\t\t\t\t\tif (!isHTML || currentTagName.toLowerCase() !== tagNameLower) {\n\t\t\t\t\t\t\treturn errorHandler.fatalError('Opening and ending tag mismatch: \"' + currentTagName + '\" != \"' + tagNameRaw + '\"');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar config = parseStack.pop();\n\t\t\t\t\tunclosedTags.pop();\n\t\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\t\tdomBuilder.endElement(config.uri, config.localName, currentTagName);\n\t\t\t\t\tif (localNSMap) {\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (hasOwn(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tend++;\n\t\t\t\t\tbreak;\n\t\t\t\t// end element\n\t\t\t\tcase '?': // <?...?>\n\t\t\t\t\tlocator && position(tagStart);\n\t\t\t\t\tend = parseProcessingInstruction(source, tagStart, domBuilder, errorHandler);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '!': // <!doctype,<![CDATA,<!--\n\t\t\t\t\tlocator && position(tagStart);\n\t\t\t\t\tend = parseDoctypeCommentOrCData(source, tagStart, domBuilder, errorHandler, isHTML);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlocator && position(tagStart);\n\t\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\t\tvar currentNSMap = parseStack[parseStack.length - 1].currentNSMap;\n\t\t\t\t\t//elStartEnd\n\t\t\t\t\tvar end = parseElementStartPart(source, tagStart, el, currentNSMap, entityReplacer, errorHandler, isHTML);\n\t\t\t\t\tvar len = el.length;\n\n\t\t\t\t\tif (!el.closed) {\n\t\t\t\t\t\tif (isHTML && conventions.isHTMLVoidElement(el.tagName)) {\n\t\t\t\t\t\t\tel.closed = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tunclosedTags.push(el.tagName);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (locator && len) {\n\t\t\t\t\t\tvar locator2 = copyLocator(locator, {});\n\t\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\t\ta.locator = copyLocator(locator, {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdomBuilder.locator = locator2;\n\t\t\t\t\t\tif (appendElement(el, domBuilder, currentNSMap)) {\n\t\t\t\t\t\t\tparseStack.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (appendElement(el, domBuilder, currentNSMap)) {\n\t\t\t\t\t\t\tparseStack.push(el);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isHTML && !el.closed) {\n\t\t\t\t\t\tend = parseHtmlSpecialContent(source, end, el.tagName, entityReplacer, domBuilder);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend++;\n\t\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t} else if (e instanceof DOMException) {\n\t\t\t\tthrow new ParseError(e.name + ': ' + e.message, domBuilder.locator, e);\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: ' + e);\n\t\t\tend = -1;\n\t\t}\n\t\tif (end > start) {\n\t\t\tstart = end;\n\t\t} else {\n\t\t\t//Possible sax fallback here, risk of positional error\n\t\t\tappendText(Math.max(tagStart, start) + 1);\n\t\t}\n\t}\n}\n\nfunction copyLocator(f, t) {\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @returns\n * end of the elementStartPart(end of elementEndPart for selfClosed el)\n * @see {@link #appendElement}\n */\nfunction parseElementStartPart(source, start, el, currentNSMap, entityReplacer, errorHandler, isHTML) {\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (hasOwn(el.attributeNames, qname)) {\n\t\t\treturn errorHandler.fatalError('Attribute ' + qname + ' redefined');\n\t\t}\n\t\tif (!isHTML && value.indexOf('<') >= 0) {\n\t\t\treturn errorHandler.fatalError(\"Unescaped '<' not allowed in attributes values\");\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(ENTITY_REG, entityReplacer),\n\t\t\tstartIndex\n\t\t);\n\t}\n\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG; //status\n\twhile (true) {\n\t\tvar c = source.charAt(p);\n\t\tswitch (c) {\n\t\t\tcase '=':\n\t\t\t\tif (s === S_ATTR) {\n\t\t\t\t\t//attrName\n\t\t\t\t\tattrName = source.slice(start, p);\n\t\t\t\t\ts = S_EQ;\n\t\t\t\t} else if (s === S_ATTR_SPACE) {\n\t\t\t\t\ts = S_EQ;\n\t\t\t\t} else {\n\t\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"'\":\n\t\t\tcase '\"':\n\t\t\t\tif (\n\t\t\t\t\ts === S_EQ ||\n\t\t\t\t\ts === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t) {\n\t\t\t\t\t//equal\n\t\t\t\t\tif (s === S_ATTR) {\n\t\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"');\n\t\t\t\t\t\tattrName = source.slice(start, p);\n\t\t\t\t\t}\n\t\t\t\t\tstart = p + 1;\n\t\t\t\t\tp = source.indexOf(c, start);\n\t\t\t\t\tif (p > 0) {\n\t\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\t\taddAttribute(attrName, value, start - 1);\n\t\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\t\tthrow new Error(\"attribute value no end '\" + c + \"' match\");\n\t\t\t\t\t}\n\t\t\t\t} else if (s == S_ATTR_NOQUOT_VALUE) {\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t\terrorHandler.warning('attribute \"' + attrName + '\" missed start quot(' + c + ')!!');\n\t\t\t\t\tstart = p + 1;\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t} else {\n\t\t\t\t\t//fatalError: no equal before\n\t\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase '/':\n\t\t\t\tswitch (s) {\n\t\t\t\t\tcase S_TAG:\n\t\t\t\t\t\tel.setTagName(source.slice(start, p));\n\t\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\t\ts = S_TAG_CLOSE;\n\t\t\t\t\t\tel.closed = true;\n\t\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tcase S_ATTR:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\t\tel.closed = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t//case S_EQ:\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error(\"attribute invalid close char('/')\"); // No known test case\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase '': //end document\n\t\t\t\terrorHandler.error('unexpected end of input');\n\t\t\t\tif (s == S_TAG) {\n\t\t\t\t\tel.setTagName(source.slice(start, p));\n\t\t\t\t}\n\t\t\t\treturn p;\n\t\t\tcase '>':\n\t\t\t\tswitch (s) {\n\t\t\t\t\tcase S_TAG:\n\t\t\t\t\t\tel.setTagName(source.slice(start, p));\n\t\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\t\tbreak; //normal\n\t\t\t\t\tcase S_ATTR_NOQUOT_VALUE: //Compatible state\n\t\t\t\t\tcase S_ATTR:\n\t\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\t\tif (value.slice(-1) === '/') {\n\t\t\t\t\t\t\tel.closed = true;\n\t\t\t\t\t\t\tvalue = value.slice(0, -1);\n\t\t\t\t\t\t}\n\t\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\t\tif (s === S_ATTR_SPACE) {\n\t\t\t\t\t\t\tvalue = attrName;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (s == S_ATTR_NOQUOT_VALUE) {\n\t\t\t\t\t\t\terrorHandler.warning('attribute \"' + value + '\" missed quot(\")!');\n\t\t\t\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (!isHTML) {\n\t\t\t\t\t\t\t\terrorHandler.warning('attribute \"' + value + '\" missed value!! \"' + value + '\" instead!!');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taddAttribute(value, value, start);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase S_EQ:\n\t\t\t\t\t\tif (!isHTML) {\n\t\t\t\t\t\t\treturn errorHandler.fatalError('AttValue: \\' or \" expected');\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn p;\n\t\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\t\tcase '\\u0080':\n\t\t\t\tc = ' ';\n\t\t\tdefault:\n\t\t\t\tif (c <= ' ') {\n\t\t\t\t\t//space\n\t\t\t\t\tswitch (s) {\n\t\t\t\t\t\tcase S_TAG:\n\t\t\t\t\t\t\tel.setTagName(source.slice(start, p)); //tagName\n\t\t\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_ATTR:\n\t\t\t\t\t\t\tattrName = source.slice(start, p);\n\t\t\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\t\t\terrorHandler.warning('attribute \"' + value + '\" missed quot(\")!!');\n\t\t\t\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t\t\t//case S_EQ:\n\t\t\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t\t\t//\tvoid();break;\n\t\t\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t\t//ignore warning\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//not space\n\t\t\t\t\t//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n\t\t\t\t\t//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\t\tswitch (s) {\n\t\t\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\t\t\tif (!isHTML) {\n\t\t\t\t\t\t\t\terrorHandler.warning('attribute \"' + attrName + '\" missed value!! \"' + attrName + '\" instead2!!');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\t\t\tstart = p;\n\t\t\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\t\t\terrorHandler.warning('attribute space is required\"' + attrName + '\"!!');\n\t\t\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\t\t\tstart = p;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_EQ:\n\t\t\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\t\t\tstart = p;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t} //end outer switch\n\t\tp++;\n\t}\n}\n\n/**\n * @returns\n * `true` if a new namespace has been defined.\n */\nfunction appendElement(el, domBuilder, currentNSMap) {\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\tvar i = el.length;\n\twhile (i--) {\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif (nsp > 0) {\n\t\t\tvar prefix = (a.prefix = qName.slice(0, nsp));\n\t\t\tvar localName = qName.slice(nsp + 1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName;\n\t\t} else {\n\t\t\tlocalName = qName;\n\t\t\tprefix = null;\n\t\t\tnsPrefix = qName === 'xmlns' && '';\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif (nsPrefix !== false) {\n\t\t\t//hack!!\n\t\t\tif (localNSMap == null) {\n\t\t\t\tlocalNSMap = Object.create(null);\n\t\t\t\t_copy(currentNSMap, (currentNSMap = Object.create(null)));\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS;\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value);\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile (i--) {\n\t\ta = el[i];\n\t\tif (a.prefix) {\n\t\t\t//no prefix attribute has no namespace\n\t\t\tif (a.prefix === 'xml') {\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}\n\t\t\tif (a.prefix !== 'xmlns') {\n\t\t\t\ta.uri = currentNSMap[a.prefix];\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif (nsp > 0) {\n\t\tprefix = el.prefix = tagName.slice(0, nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp + 1);\n\t} else {\n\t\tprefix = null; //important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = (el.uri = currentNSMap[prefix || '']);\n\tdomBuilder.startElement(ns, localName, tagName, el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif (el.closed) {\n\t\tdomBuilder.endElement(ns, localName, tagName);\n\t\tif (localNSMap) {\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (hasOwn(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\n\nfunction parseHtmlSpecialContent(source, elStartEnd, tagName, entityReplacer, domBuilder) {\n\t// https://html.spec.whatwg.org/#raw-text-elements\n\t// https://html.spec.whatwg.org/#escapable-raw-text-elements\n\t// https://html.spec.whatwg.org/#cdata-rcdata-restrictions:raw-text-elements\n\t// TODO: https://html.spec.whatwg.org/#cdata-rcdata-restrictions\n\tvar isEscapableRaw = isHTMLEscapableRawTextElement(tagName);\n\tif (isEscapableRaw || isHTMLRawTextElement(tagName)) {\n\t\tvar elEndStart = source.indexOf('</' + tagName + '>', elStartEnd);\n\t\tvar text = source.substring(elStartEnd + 1, elEndStart);\n\n\t\tif (isEscapableRaw) {\n\t\t\ttext = text.replace(ENTITY_REG, entityReplacer);\n\t\t}\n\t\tdomBuilder.characters(text, 0, text.length);\n\t\treturn elEndStart;\n\t}\n\treturn elStartEnd + 1;\n}\n\nfunction _copy(source, target) {\n\tfor (var n in source) {\n\t\tif (hasOwn(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\n/**\n * @typedef ParseUtils\n * @property {function(relativeIndex: number?): string | undefined} char\n * Provides look ahead access to a singe character relative to the current index.\n * @property {function(): number} getIndex\n * Provides read-only access to the current index.\n * @property {function(reg: RegExp): string | null} getMatch\n * Applies the provided regular expression enforcing that it starts at the current index and\n * returns the complete matching string,\n * and moves the current index by the length of the matching string.\n * @property {function(): string} getSource\n * Provides read-only access to the complete source.\n * @property {function(places: number?): void} skip\n * moves the current index by places (defaults to 1)\n * @property {function(): number} skipBlanks\n * Moves the current index by the amount of white space that directly follows the current index\n * and returns the amount of whitespace chars skipped (0..n),\n * or -1 if the end of the source was reached.\n * @property {function(): string} substringFromIndex\n * creates a substring from the current index to the end of `source`\n * @property {function(compareWith: string): boolean} substringStartsWith\n * Checks if source contains `compareWith`,\n * starting from the current index.\n * @see {@link parseUtils}\n */\n\n/**\n * A temporary scope for parsing and look ahead operations in `source`,\n * starting from index `start`.\n *\n * Some operations move the current index by a number of positions,\n * after which `getIndex` returns the new index.\n *\n * @param {string} source\n * @param {number} start\n * @returns {ParseUtils}\n */\nfunction parseUtils(source, start) {\n\tvar index = start;\n\n\tfunction char(n) {\n\t\tn = n || 0;\n\t\treturn source.charAt(index + n);\n\t}\n\n\tfunction skip(n) {\n\t\tn = n || 1;\n\t\tindex += n;\n\t}\n\n\tfunction skipBlanks() {\n\t\tvar blanks = 0;\n\t\twhile (index < source.length) {\n\t\t\tvar c = char();\n\t\t\tif (c !== ' ' && c !== '\\n' && c !== '\\t' && c !== '\\r') {\n\t\t\t\treturn blanks;\n\t\t\t}\n\t\t\tblanks++;\n\t\t\tskip();\n\t\t}\n\t\treturn -1;\n\t}\n\tfunction substringFromIndex() {\n\t\treturn source.substring(index);\n\t}\n\tfunction substringStartsWith(text) {\n\t\treturn source.substring(index, index + text.length) === text;\n\t}\n\n\tfunction getMatch(args) {\n\t\tvar expr = g.reg('^', args);\n\t\tvar match = expr.exec(substringFromIndex());\n\t\tif (match) {\n\t\t\tskip(match[0].length);\n\t\t\treturn match[0];\n\t\t}\n\t\treturn null;\n\t}\n\treturn {\n\t\tchar: char,\n\t\tgetIndex: function () {\n\t\t\treturn index;\n\t\t},\n\t\tgetMatch: getMatch,\n\t\tgetSource: function () {\n\t\t\treturn source;\n\t\t},\n\t\tskip: skip,\n\t\tskipBlanks: skipBlanks,\n\t\tsubstringFromIndex: substringFromIndex,\n\t\tsubstringStartsWith: substringStartsWith,\n\t};\n}\n\n/**\n * @param {ParseUtils} p\n * @param {DOMHandler} errorHandler\n * @returns {string}\n */\nfunction parseDoctypeInternalSubset(p, errorHandler) {\n\t/**\n\t * @param {ParseUtils} p\n\t * @param {DOMHandler} errorHandler\n\t * @returns {string}\n\t */\n\tfunction parsePI(p, errorHandler) {\n\t\tvar match = g.PI.exec(p.substringFromIndex());\n\t\tif (!match) {\n\t\t\treturn errorHandler.fatalError('processing instruction is not well-formed at position ' + p.getIndex());\n\t\t}\n\t\tif (match[1].toLowerCase() === 'xml') {\n\t\t\treturn errorHandler.fatalError(\n\t\t\t\t'xml declaration is only allowed at the start of the document, but found at position ' + p.getIndex()\n\t\t\t);\n\t\t}\n\t\tp.skip(match[0].length);\n\t\treturn match[0];\n\t}\n\t// Parse internal subset\n\tvar source = p.getSource();\n\tif (p.char() === '[') {\n\t\tp.skip(1);\n\t\tvar intSubsetStart = p.getIndex();\n\t\twhile (p.getIndex() < source.length) {\n\t\t\tp.skipBlanks();\n\t\t\tif (p.char() === ']') {\n\t\t\t\tvar internalSubset = source.substring(intSubsetStart, p.getIndex());\n\t\t\t\tp.skip(1);\n\t\t\t\treturn internalSubset;\n\t\t\t}\n\t\t\tvar current = null;\n\t\t\t// Only in external subset\n\t\t\t// if (char() === '<' && char(1) === '!' && char(2) === '[') {\n\t\t\t// \tparseConditionalSections(p, errorHandler);\n\t\t\t// } else\n\t\t\tif (p.char() === '<' && p.char(1) === '!') {\n\t\t\t\tswitch (p.char(2)) {\n\t\t\t\t\tcase 'E': // ELEMENT | ENTITY\n\t\t\t\t\t\tif (p.char(3) === 'L') {\n\t\t\t\t\t\t\tcurrent = p.getMatch(g.elementdecl);\n\t\t\t\t\t\t} else if (p.char(3) === 'N') {\n\t\t\t\t\t\t\tcurrent = p.getMatch(g.EntityDecl);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'A': // ATTRIBUTE\n\t\t\t\t\t\tcurrent = p.getMatch(g.AttlistDecl);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'N': // NOTATION\n\t\t\t\t\t\tcurrent = p.getMatch(g.NotationDecl);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '-': // COMMENT\n\t\t\t\t\t\tcurrent = p.getMatch(g.Comment);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (p.char() === '<' && p.char(1) === '?') {\n\t\t\t\tcurrent = parsePI(p, errorHandler);\n\t\t\t} else if (p.char() === '%') {\n\t\t\t\tcurrent = p.getMatch(g.PEReference);\n\t\t\t} else {\n\t\t\t\treturn errorHandler.fatalError('Error detected in Markup declaration');\n\t\t\t}\n\t\t\tif (!current) {\n\t\t\t\treturn errorHandler.fatalError('Error in internal subset at position ' + p.getIndex());\n\t\t\t}\n\t\t}\n\t\treturn errorHandler.fatalError('doctype internal subset is not well-formed, missing ]');\n\t}\n}\n\n/**\n * Called when the parser encounters an element starting with '<!'.\n *\n * @param {string} source\n * The xml.\n * @param {number} start\n * the start index of the '<!'\n * @param {DOMHandler} domBuilder\n * @param {DOMHandler} errorHandler\n * @param {boolean} isHTML\n * @returns {number | never}\n * The end index of the element.\n * @throws {ParseError}\n * In case the element is not well-formed.\n */\nfunction parseDoctypeCommentOrCData(source, start, domBuilder, errorHandler, isHTML) {\n\tvar p = parseUtils(source, start);\n\n\tswitch (p.char(2)) {\n\t\tcase '-':\n\t\t\t// should be a comment\n\t\t\tvar comment = p.getMatch(g.Comment);\n\t\t\tif (comment) {\n\t\t\t\tdomBuilder.comment(comment, g.COMMENT_START.length, comment.length - g.COMMENT_START.length - g.COMMENT_END.length);\n\t\t\t\treturn p.getIndex();\n\t\t\t} else {\n\t\t\t\treturn errorHandler.fatalError('comment is not well-formed at position ' + p.getIndex());\n\t\t\t}\n\t\tcase '[':\n\t\t\t// should be CDATA\n\t\t\tvar cdata = p.getMatch(g.CDSect);\n\t\t\tif (cdata) {\n\t\t\t\tif (!isHTML && !domBuilder.currentElement) {\n\t\t\t\t\treturn errorHandler.fatalError('CDATA outside of element');\n\t\t\t\t}\n\t\t\t\tdomBuilder.startCDATA();\n\t\t\t\tdomBuilder.characters(cdata, g.CDATA_START.length, cdata.length - g.CDATA_START.length - g.CDATA_END.length);\n\t\t\t\tdomBuilder.endCDATA();\n\t\t\t\treturn p.getIndex();\n\t\t\t} else {\n\t\t\t\treturn errorHandler.fatalError('Invalid CDATA starting at position ' + start);\n\t\t\t}\n\t\tcase 'D': {\n\t\t\t// should be DOCTYPE\n\t\t\tif (domBuilder.doc && domBuilder.doc.documentElement) {\n\t\t\t\treturn errorHandler.fatalError('Doctype not allowed inside or after documentElement at position ' + p.getIndex());\n\t\t\t}\n\t\t\tif (!p.substringStartsWith(g.DOCTYPE_DECL_START)) {\n\t\t\t\treturn errorHandler.fatalError('Expected ' + g.DOCTYPE_DECL_START + ' at position ' + p.getIndex());\n\t\t\t}\n\t\t\tp.skip(g.DOCTYPE_DECL_START.length);\n\t\t\tif (p.skipBlanks() < 1) {\n\t\t\t\treturn errorHandler.fatalError('Expected whitespace after ' + g.DOCTYPE_DECL_START + ' at position ' + p.getIndex());\n\t\t\t}\n\n\t\t\tvar doctype = {\n\t\t\t\tname: undefined,\n\t\t\t\tpublicId: undefined,\n\t\t\t\tsystemId: undefined,\n\t\t\t\tinternalSubset: undefined,\n\t\t\t};\n\t\t\t// Parse the DOCTYPE name\n\t\t\tdoctype.name = p.getMatch(g.Name);\n\t\t\tif (!doctype.name)\n\t\t\t\treturn errorHandler.fatalError('doctype name missing or contains unexpected characters at position ' + p.getIndex());\n\t\t\tp.skipBlanks();\n\n\t\t\t// Check for ExternalID\n\t\t\tif (p.substringStartsWith(g.PUBLIC) || p.substringStartsWith(g.SYSTEM)) {\n\t\t\t\tvar match = g.ExternalID_match.exec(p.substringFromIndex());\n\t\t\t\tif (!match) {\n\t\t\t\t\treturn errorHandler.fatalError('doctype external id is not well-formed at position ' + p.getIndex());\n\t\t\t\t}\n\t\t\t\tif (match.groups.SystemLiteralOnly !== undefined) {\n\t\t\t\t\tdoctype.systemId = match.groups.SystemLiteralOnly;\n\t\t\t\t} else {\n\t\t\t\t\tdoctype.systemId = match.groups.SystemLiteral;\n\t\t\t\t\tdoctype.publicId = match.groups.PubidLiteral;\n\t\t\t\t}\n\t\t\t\tp.skip(match[0].length);\n\t\t\t}\n\n\t\t\tp.skipBlanks();\n\t\t\tdoctype.internalSubset = parseDoctypeInternalSubset(p, errorHandler);\n\t\t\tp.skipBlanks();\n\t\t\tif (p.char() !== '>') {\n\t\t\t\treturn errorHandler.fatalError('doctype not terminated with > at position ' + p.getIndex());\n\t\t\t}\n\t\t\tp.skip(1);\n\t\t\tdomBuilder.startDTD(doctype.name, doctype.publicId, doctype.systemId, doctype.internalSubset);\n\t\t\tdomBuilder.endDTD();\n\t\t\treturn p.getIndex();\n\t\t}\n\t\tdefault:\n\t\t\treturn errorHandler.fatalError('Not well-formed XML starting with \"<!\" at position ' + start);\n\t}\n}\n\nfunction parseProcessingInstruction(source, start, domBuilder, errorHandler) {\n\tvar match = source.substring(start).match(g.PI);\n\tif (!match) {\n\t\treturn errorHandler.fatalError('Invalid processing instruction starting at position ' + start);\n\t}\n\tif (match[1].toLowerCase() === 'xml') {\n\t\tif (start > 0) {\n\t\t\treturn errorHandler.fatalError(\n\t\t\t\t'processing instruction at position ' + start + ' is an xml declaration which is only at the start of the document'\n\t\t\t);\n\t\t}\n\t\tif (!g.XMLDecl.test(source.substring(start))) {\n\t\t\treturn errorHandler.fatalError('xml declaration is not well-formed');\n\t\t}\n\t}\n\tdomBuilder.processingInstruction(match[1], match[2]);\n\treturn start + match[0].length;\n}\n\nfunction ElementAttributes() {\n\tthis.attributeNames = Object.create(null);\n}\n\nElementAttributes.prototype = {\n\tsetTagName: function (tagName) {\n\t\tif (!g.QName_exact.test(tagName)) {\n\t\t\tthrow new Error('invalid tagName:' + tagName);\n\t\t}\n\t\tthis.tagName = tagName;\n\t},\n\taddValue: function (qName, value, offset) {\n\t\tif (!g.QName_exact.test(qName)) {\n\t\t\tthrow new Error('invalid attribute:' + qName);\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = { qName: qName, value: value, offset: offset };\n\t},\n\tlength: 0,\n\tgetLocalName: function (i) {\n\t\treturn this[i].localName;\n\t},\n\tgetLocator: function (i) {\n\t\treturn this[i].locator;\n\t},\n\tgetQName: function (i) {\n\t\treturn this[i].qName;\n\t},\n\tgetURI: function (i) {\n\t\treturn this[i].uri;\n\t},\n\tgetValue: function (i) {\n\t\treturn this[i].value;\n\t},\n\t//\t,getIndex:function(uri, localName)){\n\t//\t\tif(localName){\n\t//\n\t//\t\t}else{\n\t//\t\t\tvar qName = uri\n\t//\t\t}\n\t//\t},\n\t//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n\t//\tgetType:function(uri,localName){}\n\t//\tgetType:function(i){},\n};\n\nexports.XMLReader = XMLReader;\nexports.parseUtils = parseUtils;\nexports.parseDoctypeCommentOrCData = parseDoctypeCommentOrCData;\n","'use strict';\n\nvar conventions = require('./conventions');\nvar dom = require('./dom');\nvar errors = require('./errors');\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar hasDefaultHTMLNamespace = conventions.hasDefaultHTMLNamespace;\nvar isHTMLMimeType = conventions.isHTMLMimeType;\nvar isValidMimeType = conventions.isValidMimeType;\nvar MIME_TYPE = conventions.MIME_TYPE;\nvar NAMESPACE = conventions.NAMESPACE;\nvar ParseError = errors.ParseError;\n\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to <https://www.w3.org/TR/xml11/#sec-line-ends>:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA,\n * > 2. the two-character sequence #xD #x85,\n * > 3. the single character #x85,\n * > 4. the single character #x2028,\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n * @prettierignore\n */\nfunction normalizeLineEndings(input) {\n\treturn input.replace(/\\r[\\n\\u0085]/g, '\\n').replace(/[\\r\\u0085\\u2028]/g, '\\n');\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {typeof assign} [assign]\n * The method to use instead of `conventions.assign`, which is used to copy values from\n * `options` before they are used for parsing.\n * @property {typeof DOMHandler} [domHandler]\n * For internal testing: The class for creating an instance for handling events from the SAX\n * parser.\n * *****Warning: By configuring a faulty implementation, the specified behavior can completely\n * be broken.*****.\n * @property {Function} [errorHandler]\n * DEPRECATED! use `onError` instead.\n * @property {function(level:ErrorLevel, message:string, context: DOMHandler):void}\n * [onError]\n * A function that is invoked for every error that occurs during parsing.\n *\n * If it is not provided, all errors are reported to `console.error`\n * and only `fatalError`s are thrown as a `ParseError`,\n * which prevents any further processing.\n * If the provided method throws, a `ParserError` is thrown,\n * which prevents any further processing.\n *\n * Be aware that many `warning`s are considered an error that prevents further processing in\n * most implementations.\n * @property {boolean} [locator=true]\n * Configures if the nodes created during parsing will have a `lineNumber` and a `columnNumber`\n * attribute describing their location in the XML string.\n * Default is true.\n * @property {(string) => string} [normalizeLineEndings]\n * used to replace line endings before parsing, defaults to `normalizeLineEndings`\n * @property {Object} [xmlns]\n * The XML namespaces that should be assumed when parsing.\n * The default namespace can be provided by the key that is the empty string.\n * When the `mimeType` for HTML, XHTML or SVG are passed to `parseFromString`,\n * the default namespace that will be used,\n * will be overridden according to the specification.\n * @see {@link normalizeLineEndings}\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code from a string\n * into a DOM `Document`.\n *\n * ***xmldom is different from the spec in that it allows an `options` parameter,\n * to control the behavior***.\n *\n * @class\n * @param {DOMParserOptions} [options]\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options) {\n\toptions = options || { locator: true };\n\n\t/**\n\t * The method to use instead of `conventions.assign`, which is used to copy values from\n\t * `options`\n\t * before they are used for parsing.\n\t *\n\t * @type {conventions.assign}\n\t * @private\n\t * @see {@link conventions.assign}\n\t * @readonly\n\t */\n\tthis.assign = options.assign || conventions.assign;\n\n\t/**\n\t * For internal testing: The class for creating an instance for handling events from the SAX\n\t * parser.\n\t * *****Warning: By configuring a faulty implementation, the specified behavior can completely\n\t * be broken*****.\n\t *\n\t * @type {typeof DOMHandler}\n\t * @private\n\t * @readonly\n\t */\n\tthis.domHandler = options.domHandler || DOMHandler;\n\n\t/**\n\t * A function that is invoked for every error that occurs during parsing.\n\t *\n\t * If it is not provided, all errors are reported to `console.error`\n\t * and only `fatalError`s are thrown as a `ParseError`,\n\t * which prevents any further processing.\n\t * If the provided method throws, a `ParserError` is thrown,\n\t * which prevents any further processing.\n\t *\n\t * Be aware that many `warning`s are considered an error that prevents further processing in\n\t * most implementations.\n\t *\n\t * @type {function(level:ErrorLevel, message:string, context: DOMHandler):void}\n\t * @see {@link onErrorStopParsing}\n\t * @see {@link onWarningStopParsing}\n\t */\n\tthis.onError = options.onError || options.errorHandler;\n\tif (options.errorHandler && typeof options.errorHandler !== 'function') {\n\t\tthrow new TypeError('errorHandler object is no longer supported, switch to onError!');\n\t} else if (options.errorHandler) {\n\t\toptions.errorHandler('warning', 'The `errorHandler` option has been deprecated, use `onError` instead!', this);\n\t}\n\n\t/**\n\t * used to replace line endings before parsing, defaults to `normalizeLineEndings`\n\t *\n\t * @type {(string) => string}\n\t * @readonly\n\t */\n\tthis.normalizeLineEndings = options.normalizeLineEndings || normalizeLineEndings;\n\n\t/**\n\t * Configures if the nodes created during parsing will have a `lineNumber` and a\n\t * `columnNumber`\n\t * attribute describing their location in the XML string.\n\t * Default is true.\n\t *\n\t * @type {boolean}\n\t * @readonly\n\t */\n\tthis.locator = !!options.locator;\n\n\t/**\n\t * The default namespace can be provided by the key that is the empty string.\n\t * When the `mimeType` for HTML, XHTML or SVG are passed to `parseFromString`,\n\t * the default namespace that will be used,\n\t * will be overridden according to the specification.\n\t *\n\t * @type {Readonly<Object>}\n\t * @readonly\n\t */\n\tthis.xmlns = this.assign(Object.create(null), options.xmlns);\n}\n\n/**\n * Parses `source` using the options in the way configured by the `DOMParserOptions` of `this`\n * `DOMParser`. If `mimeType` is `text/html` an HTML `Document` is created,\n * otherwise an XML `Document` is created.\n *\n * __It behaves different from the description in the living standard__:\n * - Uses the `options` passed to the `DOMParser` constructor to modify the behavior.\n * - Any unexpected input is reported to `onError` with either a `warning`,\n * `error` or `fatalError` level.\n * - Any `fatalError` throws a `ParseError` which prevents further processing.\n * - Any error thrown by `onError` is converted to a `ParseError` which prevents further\n * processing - If no `Document` was created during parsing it is reported as a `fatalError`.\n * *****Warning: By configuring a faulty DOMHandler implementation,\n * the specified behavior can completely be broken*****.\n *\n * @param {string} source\n * The XML mime type only allows string input!\n * @param {string} [mimeType='application/xml']\n * the mimeType or contentType of the document to be created determines the `type` of document\n * created (XML or HTML)\n * @returns {Document}\n * The `Document` node.\n * @throws {ParseError}\n * for any `fatalError` or anything that is thrown by `onError`\n * @throws {TypeError}\n * for any invalid `mimeType`\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString\n * @see https://html.spec.whatwg.org/#dom-domparser-parsefromstring-dev\n */\nDOMParser.prototype.parseFromString = function (source, mimeType) {\n\tif (!isValidMimeType(mimeType)) {\n\t\tthrow new TypeError('DOMParser.parseFromString: the provided mimeType \"' + mimeType + '\" is not valid.');\n\t}\n\tvar defaultNSMap = this.assign(Object.create(null), this.xmlns);\n\tvar entityMap = entities.XML_ENTITIES;\n\tvar defaultNamespace = defaultNSMap[''] || null;\n\tif (hasDefaultHTMLNamespace(mimeType)) {\n\t\tentityMap = entities.HTML_ENTITIES;\n\t\tdefaultNamespace = NAMESPACE.HTML;\n\t} else if (mimeType === MIME_TYPE.XML_SVG_IMAGE) {\n\t\tdefaultNamespace = NAMESPACE.SVG;\n\t}\n\tdefaultNSMap[''] = defaultNamespace;\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\n\tvar domBuilder = new this.domHandler({\n\t\tmimeType: mimeType,\n\t\tdefaultNamespace: defaultNamespace,\n\t\tonError: this.onError,\n\t});\n\tvar locator = this.locator ? {} : undefined;\n\tif (this.locator) {\n\t\tdomBuilder.setDocumentLocator(locator);\n\t}\n\n\tvar sax = new XMLReader();\n\tsax.errorHandler = domBuilder;\n\tsax.domBuilder = domBuilder;\n\tvar isXml = !conventions.isHTMLMimeType(mimeType);\n\tif (isXml && typeof source !== 'string') {\n\t\tsax.errorHandler.fatalError('source is not a string');\n\t}\n\tsax.parse(this.normalizeLineEndings(String(source)), defaultNSMap, entityMap);\n\tif (!domBuilder.doc.documentElement) {\n\t\tsax.errorHandler.fatalError('missing root element');\n\t}\n\treturn domBuilder.doc;\n};\n\n/**\n * @typedef DOMHandlerOptions\n * @property {string} [mimeType=MIME_TYPE.XML_APPLICATION]\n * @property {string | null} [defaultNamespace=null]\n */\n/**\n * The class that is used to handle events from the SAX parser to create the related DOM\n * elements.\n *\n * Some methods are only implemented as an empty function,\n * since they are (at least currently) not relevant for xmldom.\n *\n * @class\n * @param {DOMHandlerOptions} [options]\n * @see http://www.saxproject.org/apidoc/org/xml/sax/ext/DefaultHandler2.html\n */\nfunction DOMHandler(options) {\n\tvar opt = options || {};\n\t/**\n\t * The mime type is used to determine if the DOM handler will create an XML or HTML document.\n\t * Only if it is set to `text/html` it will create an HTML document.\n\t * It defaults to MIME_TYPE.XML_APPLICATION.\n\t *\n\t * @type {string}\n\t * @see {@link MIME_TYPE}\n\t * @readonly\n\t */\n\tthis.mimeType = opt.mimeType || MIME_TYPE.XML_APPLICATION;\n\n\t/**\n\t * The namespace to use to create an XML document.\n\t * For the following reasons this is required:\n\t * - The SAX API for `startDocument` doesn't offer any way to pass a namespace,\n\t * since at that point there is no way for the parser to know what the default namespace from\n\t * the document will be.\n\t * - When creating using `DOMImplementation.createDocument` it is required to pass a\n\t * namespace,\n\t * to determine the correct `Document.contentType`, which should match `this.mimeType`.\n\t * - When parsing an XML document with the `application/xhtml+xml` mimeType,\n\t * the HTML namespace needs to be the default namespace.\n\t *\n\t * @type {string | null}\n\t * @private\n\t * @readonly\n\t */\n\tthis.defaultNamespace = opt.defaultNamespace || null;\n\n\t/**\n\t * @type {boolean}\n\t * @private\n\t */\n\tthis.cdata = false;\n\n\t/**\n\t * The last `Element` that was created by `startElement`.\n\t * `endElement` sets it to the `currentElement.parentNode`.\n\t *\n\t * Note: The sax parser currently sets it to white space text nodes between tags.\n\t *\n\t * @type {Element | Node | undefined}\n\t * @private\n\t */\n\tthis.currentElement = undefined;\n\n\t/**\n\t * The Document that is created as part of `startDocument`,\n\t * and returned by `DOMParser.parseFromString`.\n\t *\n\t * @type {Document | undefined}\n\t * @readonly\n\t */\n\tthis.doc = undefined;\n\n\t/**\n\t * The locator is stored as part of setDocumentLocator.\n\t * It is controlled and mutated by the SAX parser to store the current parsing position.\n\t * It is used by DOMHandler to set `columnNumber` and `lineNumber`\n\t * on the DOM nodes.\n\t *\n\t * @type {Readonly<Locator> | undefined}\n\t * @private\n\t * @readonly (the\n\t * sax parser currently sometimes set's it)\n\t */\n\tthis.locator = undefined;\n\t/**\n\t * @type {function (level:ErrorLevel ,message:string, context:DOMHandler):void}\n\t * @readonly\n\t */\n\tthis.onError = opt.onError;\n}\n\nfunction position(locator, node) {\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n\nDOMHandler.prototype = {\n\t/**\n\t * Either creates an XML or an HTML document and stores it under `this.doc`.\n\t * If it is an XML document, `this.defaultNamespace` is used to create it,\n\t * and it will not contain any `childNodes`.\n\t * If it is an HTML document, it will be created without any `childNodes`.\n\t *\n\t * @see http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n\t */\n\tstartDocument: function () {\n\t\tvar impl = new DOMImplementation();\n\t\tthis.doc = isHTMLMimeType(this.mimeType) ? impl.createHTMLDocument(false) : impl.createDocument(this.defaultNamespace, '');\n\t},\n\tstartElement: function (namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t\tvar el = doc.createElementNS(namespaceURI, qName || localName);\n\t\tvar len = attrs.length;\n\t\tappendElement(this, el);\n\t\tthis.currentElement = el;\n\n\t\tthis.locator && position(this.locator, el);\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar namespaceURI = attrs.getURI(i);\n\t\t\tvar value = attrs.getValue(i);\n\t\t\tvar qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator && position(attrs.getLocator(i), attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr);\n\t\t}\n\t},\n\tendElement: function (namespaceURI, localName, qName) {\n\t\tthis.currentElement = this.currentElement.parentNode;\n\t},\n\tstartPrefixMapping: function (prefix, uri) {},\n\tendPrefixMapping: function (prefix) {},\n\tprocessingInstruction: function (target, data) {\n\t\tvar ins = this.doc.createProcessingInstruction(target, data);\n\t\tthis.locator && position(this.locator, ins);\n\t\tappendElement(this, ins);\n\t},\n\tignorableWhitespace: function (ch, start, length) {},\n\tcharacters: function (chars, start, length) {\n\t\tchars = _toString.apply(this, arguments);\n\t\t//console.log(chars)\n\t\tif (chars) {\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif (this.currentElement) {\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t} else if (/^\\s*$/.test(chars)) {\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator, charNode);\n\t\t}\n\t},\n\tskippedEntity: function (name) {},\n\tendDocument: function () {\n\t\tthis.doc.normalize();\n\t},\n\t/**\n\t * Stores the locator to be able to set the `columnNumber` and `lineNumber`\n\t * on the created DOM nodes.\n\t *\n\t * @param {Locator} locator\n\t */\n\tsetDocumentLocator: function (locator) {\n\t\tif (locator) {\n\t\t\tlocator.lineNumber = 0;\n\t\t}\n\t\tthis.locator = locator;\n\t},\n\t//LexicalHandler\n\tcomment: function (chars, start, length) {\n\t\tchars = _toString.apply(this, arguments);\n\t\tvar comm = this.doc.createComment(chars);\n\t\tthis.locator && position(this.locator, comm);\n\t\tappendElement(this, comm);\n\t},\n\n\tstartCDATA: function () {\n\t\t//used in characters() methods\n\t\tthis.cdata = true;\n\t},\n\tendCDATA: function () {\n\t\tthis.cdata = false;\n\t},\n\n\tstartDTD: function (name, publicId, systemId, internalSubset) {\n\t\tvar impl = this.doc.implementation;\n\t\tif (impl && impl.createDocumentType) {\n\t\t\tvar dt = impl.createDocumentType(name, publicId, systemId, internalSubset);\n\t\t\tthis.locator && position(this.locator, dt);\n\t\t\tappendElement(this, dt);\n\t\t\tthis.doc.doctype = dt;\n\t\t}\n\t},\n\treportError: function (level, message) {\n\t\tif (typeof this.onError === 'function') {\n\t\t\ttry {\n\t\t\t\tthis.onError(level, message, this);\n\t\t\t} catch (e) {\n\t\t\t\tthrow new ParseError('Reporting ' + level + ' \"' + message + '\" caused ' + e, this.locator);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error('[xmldom ' + level + ']\\t' + message, _locator(this.locator));\n\t\t}\n\t},\n\t/**\n\t * @see http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning: function (message) {\n\t\tthis.reportError('warning', message);\n\t},\n\terror: function (message) {\n\t\tthis.reportError('error', message);\n\t},\n\t/**\n\t * This function reports a fatal error and throws a ParseError.\n\t *\n\t * @param {string} message\n\t * - The message to be used for reporting and throwing the error.\n\t * @returns {never}\n\t * This function always throws an error and never returns a value.\n\t * @throws {ParseError}\n\t * Always throws a ParseError with the provided message.\n\t */\n\tfatalError: function (message) {\n\t\tthis.reportError('fatalError', message);\n\t\tthrow new ParseError(message, this.locator);\n\t},\n};\n\nfunction _locator(l) {\n\tif (l) {\n\t\treturn '\\n@#[line:' + l.lineNumber + ',col:' + l.columnNumber + ']';\n\t}\n}\n\nfunction _toString(chars, start, length) {\n\tif (typeof chars == 'string') {\n\t\treturn chars.substr(start, length);\n\t} else {\n\t\t//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif (chars.length >= start + length || start) {\n\t\t\treturn new java.lang.String(chars, start, length) + '';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n'endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl'.replace(\n\t/\\w+/g,\n\tfunction (key) {\n\t\tDOMHandler.prototype[key] = function () {\n\t\t\treturn null;\n\t\t};\n\t}\n);\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement(handler, node) {\n\tif (!handler.currentElement) {\n\t\thandler.doc.appendChild(node);\n\t} else {\n\t\thandler.currentElement.appendChild(node);\n\t}\n}\n\n/**\n * A method that prevents any further parsing when an `error`\n * with level `error` is reported during parsing.\n *\n * @see {@link DOMParserOptions.onError}\n * @see {@link onWarningStopParsing}\n */\nfunction onErrorStopParsing(level) {\n\tif (level === 'error') throw 'onErrorStopParsing';\n}\n\n/**\n * A method that prevents any further parsing when any `error` is reported during parsing.\n *\n * @see {@link DOMParserOptions.onError}\n * @see {@link onErrorStopParsing}\n */\nfunction onWarningStopParsing() {\n\tthrow 'onWarningStopParsing';\n}\n\nexports.__DOMHandler = DOMHandler;\nexports.DOMParser = DOMParser;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.onErrorStopParsing = onErrorStopParsing;\nexports.onWarningStopParsing = onWarningStopParsing;\n","'use strict';\nvar conventions = require('./conventions');\nexports.assign = conventions.assign;\nexports.hasDefaultHTMLNamespace = conventions.hasDefaultHTMLNamespace;\nexports.isHTMLMimeType = conventions.isHTMLMimeType;\nexports.isValidMimeType = conventions.isValidMimeType;\nexports.MIME_TYPE = conventions.MIME_TYPE;\nexports.NAMESPACE = conventions.NAMESPACE;\n\nvar errors = require('./errors');\nexports.DOMException = errors.DOMException;\nexports.DOMExceptionName = errors.DOMExceptionName;\nexports.ExceptionCode = errors.ExceptionCode;\nexports.ParseError = errors.ParseError;\n\nvar dom = require('./dom');\nexports.Attr = dom.Attr;\nexports.CDATASection = dom.CDATASection;\nexports.CharacterData = dom.CharacterData;\nexports.Comment = dom.Comment;\nexports.Document = dom.Document;\nexports.DocumentFragment = dom.DocumentFragment;\nexports.DocumentType = dom.DocumentType;\nexports.DOMImplementation = dom.DOMImplementation;\nexports.Element = dom.Element;\nexports.Entity = dom.Entity;\nexports.EntityReference = dom.EntityReference;\nexports.LiveNodeList = dom.LiveNodeList;\nexports.NamedNodeMap = dom.NamedNodeMap;\nexports.Node = dom.Node;\nexports.NodeList = dom.NodeList;\nexports.Notation = dom.Notation;\nexports.ProcessingInstruction = dom.ProcessingInstruction;\nexports.Text = dom.Text;\nexports.XMLSerializer = dom.XMLSerializer;\n\nvar domParser = require('./dom-parser');\nexports.DOMParser = domParser.DOMParser;\nexports.onErrorStopParsing = domParser.onErrorStopParsing;\nexports.onWarningStopParsing = domParser.onWarningStopParsing;\n","import { DOMParser as h, DOMImplementation as p } from \"@xmldom/xmldom\";\nconst b = \"USJ\", N = \"3.1\", m = [\n  \"type\",\n  \"marker\",\n  \"content\",\n  \"sid\",\n  \"eid\",\n  \"number\",\n  \"code\",\n  \"altnumber\",\n  \"pubnumber\",\n  \"caller\",\n  \"align\",\n  \"category\"\n];\nfunction P(e) {\n  return g.includes(e);\n}\nconst g = [\n  // Old Testament\n  \"GEN\",\n  \"EXO\",\n  \"LEV\",\n  \"NUM\",\n  \"DEU\",\n  \"JOS\",\n  \"JDG\",\n  \"RUT\",\n  \"1SA\",\n  \"2SA\",\n  \"1KI\",\n  \"2KI\",\n  \"1CH\",\n  \"2CH\",\n  \"EZR\",\n  \"NEH\",\n  \"EST\",\n  \"JOB\",\n  \"PSA\",\n  \"PRO\",\n  \"ECC\",\n  \"SNG\",\n  \"ISA\",\n  \"JER\",\n  \"LAM\",\n  \"EZK\",\n  \"DAN\",\n  \"HOS\",\n  \"JOL\",\n  \"AMO\",\n  \"OBA\",\n  \"JON\",\n  \"MIC\",\n  \"NAM\",\n  \"HAB\",\n  \"ZEP\",\n  \"HAG\",\n  \"ZEC\",\n  \"MAL\",\n  // New Testament\n  \"MAT\",\n  \"MRK\",\n  \"LUK\",\n  \"JHN\",\n  \"ACT\",\n  \"ROM\",\n  \"1CO\",\n  \"2CO\",\n  \"GAL\",\n  \"EPH\",\n  \"PHP\",\n  \"COL\",\n  \"1TH\",\n  \"2TH\",\n  \"1TI\",\n  \"2TI\",\n  \"TIT\",\n  \"PHM\",\n  \"HEB\",\n  \"JAS\",\n  \"1PE\",\n  \"2PE\",\n  \"1JN\",\n  \"2JN\",\n  \"3JN\",\n  \"JUD\",\n  \"REV\",\n  // Deuterocanon\n  \"TOB\",\n  \"JDT\",\n  \"ESG\",\n  \"WIS\",\n  \"SIR\",\n  \"BAR\",\n  \"LJE\",\n  \"S3Y\",\n  \"SUS\",\n  \"BEL\",\n  \"1MA\",\n  \"2MA\",\n  \"3MA\",\n  \"4MA\",\n  \"1ES\",\n  \"2ES\",\n  \"MAN\",\n  \"PS2\",\n  \"ODA\",\n  \"PSS\",\n  \"EZA\",\n  \"5EZ\",\n  \"6EZ\",\n  \"DAG\",\n  \"PS3\",\n  \"2BA\",\n  \"LBA\",\n  \"JUB\",\n  \"ENO\",\n  \"1MQ\",\n  \"2MQ\",\n  \"3MQ\",\n  \"REP\",\n  \"4BA\",\n  \"LAO\",\n  // Non scripture\n  \"FRT\",\n  \"BAK\",\n  \"OTH\",\n  \"INT\",\n  \"CNC\",\n  \"GLO\",\n  \"TDX\",\n  \"NDX\",\n  \"XXA\",\n  \"XXB\",\n  \"XXC\",\n  \"XXD\",\n  \"XXE\",\n  \"XXF\",\n  \"XXG\"\n], u = \"usx\", v = \"3.1\";\nfunction S(e) {\n  const t = {};\n  let i = e.tagName, c, r, d = \"append\";\n  if ([\"row\", \"cell\"].includes(i) && (i = \"table:\" + i), e.attributes)\n    for (let o = 0; o < e.attributes.length; o++) {\n      const s = e.attributes[o];\n      t[s.name] = s.value;\n    }\n  t.style && (c = t.style, delete t.style), t.vid && delete t.vid, t.status && delete t.status;\n  let n = { type: i };\n  c && (n.marker = c), n = { ...n, ...t }, e.firstChild && e.firstChild.nodeType === e.firstChild.TEXT_NODE && e.firstChild.nodeValue && e.firstChild.nodeValue.trim() !== \"\" && (r = e.firstChild.nodeValue);\n  const a = Array.from(e.childNodes);\n  n.content = [], r && n.content.push(r);\n  for (const o of a) {\n    if (o.tagName === void 0)\n      continue;\n    const [s, T] = S(o);\n    switch (T) {\n      case \"append\":\n        n.content.push(s);\n        break;\n      case \"merge\":\n        n.content = n.content.concat(s);\n        break;\n    }\n    o.nextSibling && o.nextSibling.nodeType === o.nextSibling.TEXT_NODE && o.nextSibling.nodeValue && (o.nextSibling.nodeValue.trim() !== \"\" || o.nextSibling.nodeValue === \" \") && n.content.push(o.nextSibling.nodeValue);\n  }\n  return n.content.length === 0 && n.type !== u && delete n.content, \"eid\" in n && [\"verse\", \"chapter\"].includes(i) && (d = \"ignore\"), [n, d];\n}\nfunction M(e) {\n  const [t] = e ? S(e) : [{ content: [] }];\n  return t.type = b, t.version = N, t;\n}\nfunction R(e) {\n  const i = new h().parseFromString(e, \"text/xml\");\n  return M(i.documentElement);\n}\nlet l, f;\nfunction A(e, t) {\n  const i = e.createElement(\"verse\");\n  return i.setAttribute(\"eid\", t), i;\n}\nfunction E(e, t) {\n  const i = e.createElement(\"chapter\");\n  return i.setAttribute(\"eid\", t), i;\n}\nfunction X(e, t) {\n  t.type === \"unmatched\" ? e.setAttribute(\"marker\", t.marker) : e.setAttribute(\"style\", t.marker);\n  for (const [i, c] of Object.entries(t))\n    c && ![\"type\", \"marker\", \"content\"].includes(i) && e.setAttribute(i, c);\n}\nfunction O(e, t, i, c) {\n  let r, d, n;\n  if (typeof e == \"string\") r = i.createTextNode(e);\n  else if (d = e.type.replace(\"table:\", \"\"), r = i.createElement(d), X(r, e), e.content)\n    for (const [a, o] of e.content.entries()) {\n      const s = a === e.content.length - 1;\n      O(o, r, i, s);\n    }\n  f && (d === \"verse\" || t.tagName === \"para\" && c) && (n = A(i, f), f = void 0), d === \"verse\" && typeof e != \"string\" && e.sid !== void 0 && (f = e.sid), l && (d === \"chapter\" || d === \"para\" && c) && (n = E(i, l), l = void 0), d === \"chapter\" && typeof e != \"string\" && e.sid !== void 0 && (l = e.sid), n && !c && t.appendChild(n), t.appendChild(r), n && c && t.appendChild(n), c && t.nodeName === u && (f && t.appendChild(A(i, f)), l && t.appendChild(E(i, l)), f = void 0, l = void 0);\n}\nfunction y(e, t) {\n  if (t.documentElement) {\n    for (const [i, c] of e.content.entries()) {\n      const r = i === e.content.length - 1;\n      O(c, t.documentElement, t, r);\n    }\n    return t.documentElement ?? void 0;\n  }\n}\nfunction B(e) {\n  const t = new p().createDocument(\"\", u);\n  return t.documentElement && (t.documentElement.setAttribute(\"version\", v), y(e, t)), t.toString();\n}\nexport {\n  m as MARKER_OBJECT_PROPS,\n  b as USJ_TYPE,\n  N as USJ_VERSION,\n  P as isValidBookCode,\n  B as usjToUsxString,\n  R as usxStringToUsj\n};\n//# sourceMappingURL=index.js.map\n","\"use strict\"\r\n\r\n// Based on: https://github.com/lodash/lodash/blob/6018350ac10d5ce6a5b7db625140b82aeab804df/.internal/unicodeSize.js\r\n\r\nmodule.exports = () => {\r\n\t// Used to compose unicode character classes.\r\n\tconst astralRange = \"\\\\ud800-\\\\udfff\"\r\n\tconst comboMarksRange = \"\\\\u0300-\\\\u036f\"\r\n\tconst comboHalfMarksRange = \"\\\\ufe20-\\\\ufe2f\"\r\n\tconst comboSymbolsRange = \"\\\\u20d0-\\\\u20ff\"\r\n\tconst comboMarksExtendedRange = \"\\\\u1ab0-\\\\u1aff\"\r\n\tconst comboMarksSupplementRange = \"\\\\u1dc0-\\\\u1dff\"\r\n\tconst comboRange = comboMarksRange + comboHalfMarksRange + comboSymbolsRange + comboMarksExtendedRange + comboMarksSupplementRange\r\n\tconst varRange = \"\\\\ufe0e\\\\ufe0f\"\r\n\tconst familyRange = \"\\\\uD83D\\\\uDC69\\\\uD83C\\\\uDFFB\\\\u200D\\\\uD83C\\\\uDF93\"\r\n\r\n\t// Used to compose unicode capture groups.\r\n\tconst astral = `[${astralRange}]`\r\n\tconst combo = `[${comboRange}]`\r\n\tconst fitz = \"\\\\ud83c[\\\\udffb-\\\\udfff]\"\r\n\tconst modifier = `(?:${combo}|${fitz})`\r\n\tconst nonAstral = `[^${astralRange}]`\r\n\tconst regional = \"(?:\\\\uD83C[\\\\uDDE6-\\\\uDDFF]){2}\"\r\n\tconst surrogatePair = \"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\"\r\n\tconst zwj = \"\\\\u200d\"\r\n\tconst blackFlag = \"(?:\\\\ud83c\\\\udff4\\\\udb40\\\\udc67\\\\udb40\\\\udc62\\\\udb40(?:\\\\udc65|\\\\udc73|\\\\udc77)\\\\udb40(?:\\\\udc6e|\\\\udc63|\\\\udc6c)\\\\udb40(?:\\\\udc67|\\\\udc74|\\\\udc73)\\\\udb40\\\\udc7f)\"\r\n\tconst family = `[${familyRange}]`\r\n\r\n\t// Used to compose unicode regexes.\r\n\tconst optModifier = `${modifier}?`\r\n\tconst optVar = `[${varRange}]?`\r\n\tconst optJoin = `(?:${zwj}(?:${[nonAstral, regional, surrogatePair].join(\"|\")})${optVar + optModifier})*`\r\n\tconst seq = optVar + optModifier + optJoin\r\n\tconst nonAstralCombo = `${nonAstral}${combo}?`\r\n\tconst symbol = `(?:${[nonAstralCombo, combo, regional, surrogatePair, astral, family].join(\"|\")})`\r\n\r\n\t// Used to match [String symbols](https://mathiasbynens.be/notes/javascript-unicode).\r\n\treturn new RegExp(`${blackFlag}|${fitz}(?=${fitz})|${symbol + seq}`, \"g\")\r\n}\r\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// @ts-ignore\nvar char_regex_1 = __importDefault(require(\"char-regex\"));\n/**\n * Converts a string to an array of string chars\n * @param {string} str The string to turn into array\n * @returns {string[]}\n */\nfunction toArray(str) {\n    if (typeof str !== 'string') {\n        throw new Error('A string is expected as input');\n    }\n    return str.match(char_regex_1.default()) || [];\n}\nexports.toArray = toArray;\n/**\n * Returns the length of a string\n *\n * @export\n * @param {string} str\n * @returns {number}\n */\nfunction length(str) {\n    // Check for input\n    if (typeof str !== 'string') {\n        throw new Error('Input must be a string');\n    }\n    var match = str.match(char_regex_1.default());\n    return match === null ? 0 : match.length;\n}\nexports.length = length;\n/**\n * Returns a substring by providing start and end position\n *\n * @export\n * @param {string} str\n * @param {number} [begin=0] Starting position\n * @param {number} end End position\n * @returns {string}\n */\nfunction substring(str, begin, end) {\n    if (begin === void 0) { begin = 0; }\n    // Check for input\n    if (typeof str !== 'string') {\n        throw new Error('Input must be a string');\n    }\n    // Even though negative numbers work here, theyre not in the spec\n    if (typeof begin !== 'number' || begin < 0) {\n        begin = 0;\n    }\n    if (typeof end === 'number' && end < 0) {\n        end = 0;\n    }\n    var match = str.match(char_regex_1.default());\n    if (!match)\n        return '';\n    return match.slice(begin, end).join('');\n}\nexports.substring = substring;\n/**\n * Returns a substring by providing start position and length\n *\n * @export\n * @param {string} str\n * @param {number} [begin=0] Starting position\n * @param {number} len Desired length\n * @returns {string}\n */\nfunction substr(str, begin, len) {\n    if (begin === void 0) { begin = 0; }\n    // Check for input\n    if (typeof str !== 'string') {\n        throw new Error('Input must be a string');\n    }\n    var strLength = length(str);\n    // Fix type\n    if (typeof begin !== 'number') {\n        begin = parseInt(begin, 10);\n    }\n    // Return zero-length string if got oversize number.\n    if (begin >= strLength) {\n        return '';\n    }\n    // Calculating postive version of negative value.\n    if (begin < 0) {\n        begin += strLength;\n    }\n    var end;\n    if (typeof len === 'undefined') {\n        end = strLength;\n    }\n    else {\n        // Fix type\n        if (typeof len !== 'number') {\n            len = parseInt(len, 10);\n        }\n        end = len >= 0 ? len + begin : begin;\n    }\n    var match = str.match(char_regex_1.default());\n    if (!match)\n        return '';\n    return match.slice(begin, end).join('');\n}\nexports.substr = substr;\n/**\n * Enforces a string to be a certain length by\n * adding or removing characters\n *\n * @export\n * @param {string} str\n * @param {number} [limit=16] Limit\n * @param {string} [padString='#'] The Pad String\n * @param {string} [padPosition='right'] The Pad Position\n * @returns {string}\n */\nfunction limit(str, limit, padString, padPosition) {\n    if (limit === void 0) { limit = 16; }\n    if (padString === void 0) { padString = '#'; }\n    if (padPosition === void 0) { padPosition = 'right'; }\n    // Input should be a string, limit should be a number\n    if (typeof str !== 'string' || typeof limit !== 'number') {\n        throw new Error('Invalid arguments specified');\n    }\n    // Pad position should be either left or right\n    if (['left', 'right'].indexOf(padPosition) === -1) {\n        throw new Error('Pad position should be either left or right');\n    }\n    // Pad string can be anything, we convert it to string\n    if (typeof padString !== 'string') {\n        padString = String(padString);\n    }\n    // Calculate string length considering astral code points\n    var strLength = length(str);\n    if (strLength > limit) {\n        return substring(str, 0, limit);\n    }\n    else if (strLength < limit) {\n        var padRepeats = padString.repeat(limit - strLength);\n        return padPosition === 'left' ? padRepeats + str : str + padRepeats;\n    }\n    return str;\n}\nexports.limit = limit;\n/**\n * Returns the index of the first occurrence of a given string\n *\n * @export\n * @param {string} str\n * @param {string} [searchStr] the string to search\n * @param {number} [pos] starting position\n * @returns {number}\n */\nfunction indexOf(str, searchStr, pos) {\n    if (pos === void 0) { pos = 0; }\n    if (typeof str !== 'string') {\n        throw new Error('Input must be a string');\n    }\n    if (str === '') {\n        if (searchStr === '') {\n            return 0;\n        }\n        return -1;\n    }\n    // fix type\n    pos = Number(pos);\n    pos = isNaN(pos) ? 0 : pos;\n    searchStr = String(searchStr);\n    var strArr = toArray(str);\n    if (pos >= strArr.length) {\n        if (searchStr === '') {\n            return strArr.length;\n        }\n        return -1;\n    }\n    if (searchStr === '') {\n        return pos;\n    }\n    var searchArr = toArray(searchStr);\n    var finded = false;\n    var index;\n    for (index = pos; index < strArr.length; index += 1) {\n        var searchIndex = 0;\n        while (searchIndex < searchArr.length &&\n            searchArr[searchIndex] === strArr[index + searchIndex]) {\n            searchIndex += 1;\n        }\n        if (searchIndex === searchArr.length &&\n            searchArr[searchIndex - 1] === strArr[index + searchIndex - 1]) {\n            finded = true;\n            break;\n        }\n    }\n    return finded ? index : -1;\n}\nexports.indexOf = indexOf;\n","/**\n * Ensures that the given input is returned as an array.\n *\n * This function takes a value that might be a single item, an array, or `undefined` and returns it\n * as an array:\n *\n * - If the input is `undefined`, an empty array is returned.\n * - If the input is already an array, it is returned as-is.\n * - If the input is a single item, it is wrapped in an array.\n *\n * @typeParam T - The type of the elements in the array.\n * @param maybeArray - The value that may be a single item, an array, or `undefined`.\n * @returns An array containing the input value(s). If the input is `undefined`, an empty array is\n *   returned.\n */\nexport default function ensureArray<T>(maybeArray: T | T[] | undefined): T[] {\n  if (!maybeArray) return [];\n\n  return Array.isArray(maybeArray) ? maybeArray : [maybeArray];\n}\n","import { LocalizeKey } from 'menus.model';\nimport {\n  indexOf as stringzIndexOf,\n  substring as stringzSubstring,\n  length as stringzLength,\n  toArray as stringzToArray,\n  limit as stringzLimit,\n  substr as stringzSubstr,\n} from 'stringz';\nimport ensureArray from './array-util';\nimport { isString } from './util';\n\n/**\n * This function mirrors the `at` function from the JavaScript Standard String object. It handles\n * Unicode code points instead of UTF-16 character codes.\n *\n * Finds the Unicode code point at the given index.\n *\n * @param string String to index\n * @param index Position of the character to be returned in range of -length(string) to\n *   length(string)\n * @returns New string consisting of the Unicode code point located at the specified offset,\n *   undefined if index is out of bounds\n */\nexport function at(string: string, index: number): string | undefined {\n  if (index > stringLength(string) || index < -stringLength(string)) return undefined;\n  return substr(string, index, 1);\n}\n\n/**\n * This function mirrors the `charAt` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Returns a new string consisting of the single unicode code point at the given index.\n *\n * @param string String to index\n * @param index Position of the string character to be returned, in the range of 0 to\n *   length(string)-1\n * @returns New string consisting of the Unicode code point located at the specified offset, empty\n *   string if index is out of bounds\n */\nexport function charAt(string: string, index: number): string {\n  if (index < 0 || index > stringLength(string) - 1) return '';\n  return substr(string, index, 1);\n}\n\n/**\n * This function mirrors the `codePointAt` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Returns a non-negative integer that is the Unicode code point value of the character starting at\n * the given index.\n *\n * @param string String to index\n * @param index Position of the string character to be returned, in the range of 0 to\n *   length(string)-1\n * @returns Non-negative integer representing the code point value of the character at the given\n *   index, or undefined if there is no element at that position\n */\nexport function codePointAt(string: string, index: number): number | undefined {\n  if (index < 0 || index > stringLength(string) - 1) return undefined;\n  return substr(string, index, 1).codePointAt(0);\n}\n\n/**\n * This function mirrors the `endsWith` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Determines whether a string ends with the characters of this string.\n *\n * @param string String to search through\n * @param searchString Characters to search for at the end of the string\n * @param endPosition End position where searchString is expected to be found. Default is\n *   `length(string)`\n * @returns True if it ends with searchString, false if it does not\n */\nexport function endsWith(\n  string: string,\n  searchString: string,\n  endPosition: number = stringLength(string),\n): boolean {\n  const lastIndexOfSearchString = lastIndexOf(string, searchString);\n  if (lastIndexOfSearchString === -1) return false;\n  if (lastIndexOfSearchString + stringLength(searchString) !== endPosition) return false;\n  return true;\n}\n\n/**\n * Get the index of the closest closing curly brace in a string.\n *\n * Note: when escaped, gets the index of the curly brace, not the backslash before it.\n *\n * @param str String to search\n * @param index Index at which to start searching. Inclusive of this index\n * @param escaped Whether to search for an escaped or an unescaped closing curly brace\n * @returns Index of closest closing curly brace or -1 if not found\n */\nfunction indexOfClosestClosingCurlyBrace(str: string, index: number, escaped: boolean) {\n  if (index < 0) return -1;\n  if (escaped) {\n    if (charAt(str, index) === '}' && charAt(str, index - 1) === '\\\\') return index;\n    const closeCurlyBraceIndex = indexOf(str, '\\\\}', index);\n    return closeCurlyBraceIndex >= 0 ? closeCurlyBraceIndex + 1 : closeCurlyBraceIndex;\n  }\n\n  let i = index;\n  const strLength = stringLength(str);\n  while (i < strLength) {\n    i = indexOf(str, '}', i);\n\n    if (i === -1 || charAt(str, i - 1) !== '\\\\') break;\n\n    // Didn't find an un-escaped close brace, so keep looking\n    i += 1;\n  }\n\n  return i >= strLength ? -1 : i;\n}\n\n/**\n * Formats a string into an array of objects (adjacent strings are concatenated in one array entry),\n * replacing `{replacer key}` with the value in the `replacers` at that replacer key (or multiple\n * replacer values if there are multiple in the string). Will also remove \\ before curly braces if\n * curly braces are escaped with a backslash in order to preserve the curly braces. E.g. 'Hi, this\n * is {name}! I like `\\{curly braces\\}`! would become Hi, this is Jim! I like {curly braces}!\n *\n * If the key in unescaped braces is not found, returns the key without the braces. Empty unescaped\n * curly braces will just return a string without the braces e.g. ('I am {Nemo}', { 'name': 'Jim'})\n * would return 'I am Nemo'.\n *\n * Note: React elements can be used as replacer values.\n *\n * @example\n *\n * ```tsx\n * <p>\n *   {formatReplacementStringToArray('Hi {other}! I am {name}.', {\n *     other: 'Billy',\n *     name: <span className=\"tw-text-red-500\">Jim</span>,\n *   })}\n * </p>\n * ```\n *\n * @example\n *\n * ```typescript\n * formatReplacementStringToArray(\n *   'Hi, this is {name}! I like \\{curly braces\\}! I have a {carInfo} car. My favorite food is {food}.',\n *   { name: ['Bill'], carInfo: { year: 2015, color: 'blue' } }\n * );\n *\n * =>\n *\n * ['Hi, this is ', ['Bill'], '! I like {curly braces}! I have a ', { year: 2015, color: 'blue' }, ' car. My favorite food is food.']\n * ```\n *\n * @param str String to format and break out into an array of objects\n * @param replacers Object whose keys are replacer keys and whose values are the values with which\n *   to replace `{replacer key}`s found in the string to format. If the replacer value is a string,\n *   it will be concatenated into existing strings in the array. Otherwise, the replacer value will\n *   be added as a new entry in the array\n * @returns Array of formatted strings and replaced objects\n */\nexport function formatReplacementStringToArray<T = unknown>(\n  str: string,\n  replacers: { [key: string | number]: T } | object,\n): (string | T)[] {\n  /** The compiled list of contents with replacers replaced appropriately */\n  const contents: (string | T)[] = [];\n\n  // current index in the string as we go through it\n  let i = 0;\n  // first index of characters to include in the next plain string added to the content\n  let nextIntermediateStartIndex = 0;\n\n  /**\n   * Adds some content to the array of contents that is being built and also add the intermediate\n   * string between the last added content and this added content\n   *\n   * @param newContent Content to add\n   * @param newContentIndex Position in string where newContent starts\n   * @param newContentLength Length in the string of the representation of this newContent\n   */\n  function addToContents(\n    newContent: string | T,\n    newContentIndex: number,\n    newContentLength: number,\n  ) {\n    // Get the string content between the last new content and this new content\n    const intermediateContent = substring(str, nextIntermediateStartIndex, newContentIndex);\n\n    // If the last item in contents is a string, pull it out and add intermediateContent to\n    // it. Otherwise stick with just intermediateContent\n    const baseSubstring =\n      contents.length > 0 && isString(contents[contents.length - 1])\n        ? `${contents.pop()}${intermediateContent}`\n        : intermediateContent;\n\n    if (isString(newContent)) {\n      // If the new content is a string, add it all together\n      contents.push(`${baseSubstring}${newContent}`);\n    } else {\n      // New content is not a string. Add the base string if it exists (don't add an\n      // empty string between added contents), then add the new content separately\n      if (baseSubstring) contents.push(baseSubstring);\n      contents.push(newContent);\n    }\n\n    // Set the intermediate start index to right after the new content so whatever\n    // string content is between replacers gets added\n    nextIntermediateStartIndex = newContentIndex + newContentLength;\n  }\n\n  const strLength = stringLength(str);\n  while (i < strLength) {\n    switch (charAt(str, i)) {\n      case '{':\n        if (charAt(str, i - 1) !== '\\\\') {\n          // This character is an un-escaped open curly brace. Try to match and replace\n          const closeCurlyBraceIndex = indexOfClosestClosingCurlyBrace(str, i, false);\n          if (closeCurlyBraceIndex >= 0) {\n            // We have matching open and close indices. Try to replace the contents\n            const replacerKey = substring(str, i + 1, closeCurlyBraceIndex);\n\n            // Replace with the replacer or just remove the curly braces\n            const replacerContent =\n              replacerKey in replacers\n                ? // Just checked that the key is in the object\n                  // eslint-disable-next-line no-type-assertion/no-type-assertion\n                  replacers[replacerKey as keyof typeof replacers]\n                : replacerKey;\n\n            addToContents(replacerContent, i, closeCurlyBraceIndex + 1 - i);\n\n            // Put our index at the closing brace to keep processing the string after it\n            i = closeCurlyBraceIndex;\n            // Set the intermediate start index to right after our closing curly brace so whatever\n            // string content is between replacers gets added\n            nextIntermediateStartIndex = closeCurlyBraceIndex + 1;\n          } else {\n            // This is an unexpected un-escaped open curly brace with no matching closing curly\n            // brace. Just ignore, I guess\n          }\n        } else {\n          // This character is an escaped open curly brace. Add the curly brace but skip over the\n          // escape backslash\n          addToContents('{', i - 1, 2);\n        }\n        break;\n      case '}':\n        if (charAt(str, i - 1) !== '\\\\') {\n          // This character is an un-escaped closing curly brace with no matching open curly\n          // brace. Just ignore, I guess\n        } else {\n          // This character is an escaped closing curly brace. Add the curly brace but skip over\n          // the escape backslash\n          addToContents('}', i - 1, 2);\n        }\n        break;\n      default:\n        // No need to do anything with other characters at this point\n        break;\n    }\n\n    i += 1;\n  }\n\n  // Now we are through the whole string and need to add the string content after all replacers if\n  // there is anything left\n  if (nextIntermediateStartIndex < strLength) {\n    // Get the string content between the last new content and this new content\n    const endContent = substring(str, nextIntermediateStartIndex);\n\n    // If the last item in contents is a string, pull it out and add endContent to\n    // it. Then put it in the contents array\n    contents.push(\n      contents.length > 0 && isString(contents[contents.length - 1])\n        ? `${contents.pop()}${endContent}`\n        : endContent,\n    );\n  }\n\n  return contents;\n}\n\n/**\n * Formats a string, replacing `{replacer key}` with the value in the `replacers` at that replacer\n * key (or multiple replacer values if there are multiple in the string). Will also remove \\ before\n * curly braces if curly braces are escaped with a backslash in order to preserve the curly braces.\n * E.g. 'Hi, this is {name}! I like `\\{curly braces\\}`! would become Hi, this is Jim! I like {curly\n * braces}!\n *\n * If the key in unescaped braces is not found, returns the key without the braces. Empty unescaped\n * curly braces will just return a string without the braces e.g. ('I am {Nemo}', { 'name': 'Jim'})\n * would return 'I am Nemo'.\n *\n * @example\n *\n * ```typescript\n * formatReplacementString(\n *   'Hi, this is {name}! I like \\{curly braces\\}! I have a {carColor} car. My favorite food is {food}.',\n *   { name: 'Bill', carColor: 'blue' }\n * );\n *\n * =>\n *\n * 'Hi, this is Bill! I like {curly braces}! I have a blue car. My favorite food is food.'\n * ```\n *\n * @param str String to format\n * @param replacers Object whose keys are replacer keys and whose values are the values with which\n *   to replace `{replacer key}`s found in the string to format. Will be coerced to strings using\n *   `${replacerValue}`\n * @returns Formatted string\n */\nexport function formatReplacementString(\n  str: string,\n  replacers: { [key: string | number]: string | unknown } | object,\n): string {\n  return formatReplacementStringToArray(str, replacers)\n    .map((content) => `${content}`)\n    .join('');\n}\n\n/**\n * This function mirrors the `includes` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Performs a case-sensitive search to determine if searchString is found in string.\n *\n * @param string String to search through\n * @param searchString String to search for\n * @param position Position within the string to start searching for searchString. Default is `0`\n * @returns True if search string is found, false if it is not\n */\nexport function includes(string: string, searchString: string, position: number = 0): boolean {\n  const partialString = substring(string, position);\n  const indexOfSearchString = indexOf(partialString, searchString);\n  if (indexOfSearchString === -1) return false;\n  return true;\n}\n\n/**\n * This function mirrors the `indexOf` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Returns the index of the first occurrence of a given string.\n *\n * @param string String to search through\n * @param searchString The string to search for\n * @param position Start of searching. Default is `0`\n * @returns Index of the first occurrence of a given string\n */\nexport function indexOf(\n  string: string,\n  searchString: string,\n  position: number | undefined = 0,\n): number {\n  return stringzIndexOf(string, searchString, position);\n}\n\n/**\n * This function mirrors the `lastIndexOf` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Searches this string and returns the index of the last occurrence of the specified substring.\n *\n * @param string String to search through\n * @param searchString Substring to search for\n * @param position The index at which to begin searching. If omitted, the search begins at the end\n *   of the string. Default is `undefined`\n * @returns Index of the last occurrence of searchString found, or -1 if not found.\n */\nexport function lastIndexOf(string: string, searchString: string, position?: number): number {\n  let validatedPosition = position === undefined ? stringLength(string) : position;\n\n  if (validatedPosition < 0) {\n    validatedPosition = 0;\n  } else if (validatedPosition >= stringLength(string)) {\n    validatedPosition = stringLength(string) - 1;\n  }\n\n  for (let index = validatedPosition; index >= 0; index--) {\n    if (substr(string, index, stringLength(searchString)) === searchString) {\n      return index;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * This function mirrors the `length` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes. Since `length` appears to be a\n * reserved keyword, the function was renamed to `stringLength`\n *\n * Returns the length of a string.\n *\n * @param string String to return the length for\n * @returns Number that is length of the starting string\n */\nexport function stringLength(string: string): number {\n  return stringzLength(string);\n}\n\n/**\n * This function mirrors the `normalize` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Returns the Unicode Normalization Form of this string.\n *\n * @param string The starting string\n * @param form Form specifying the Unicode Normalization Form. Default is `'NFC'`\n * @returns A string containing the Unicode Normalization Form of the given string.\n */\nexport function normalize(string: string, form: 'NFC' | 'NFD' | 'NFKC' | 'NFKD' | 'none'): string {\n  const upperCaseForm = form.toUpperCase();\n  if (upperCaseForm === 'NONE') {\n    return string;\n  }\n  return string.normalize(upperCaseForm);\n}\n\n/**\n * Compares two strings using an ordinal comparison approach based on the specified collation\n * options. This function uses the built-in `localeCompare` method with the 'en' locale and the\n * provided collation options to compare the strings.\n *\n * @param string1 The first string to compare.\n * @param string2 The second string to compare.\n * @param options Optional. The collation options used for comparison.\n * @returns A number indicating the result of the comparison: - Negative value if string1 precedes\n *   string2 in sorting order. - Zero if string1 and string2 are equivalent in sorting order. -\n *   Positive value if string1 follows string2 in sorting order.\n */\nexport function ordinalCompare(\n  string1: string,\n  string2: string,\n  options?: Intl.CollatorOptions,\n): number {\n  return string1.localeCompare(string2, 'en', options);\n}\n\n/**\n * This function mirrors the `padEnd` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Pads this string with another string (multiple times, if needed) until the resulting string\n * reaches the given length. The padding is applied from the end of this string.\n *\n * @param string String to add padding too\n * @param targetLength The length of the resulting string once the starting string has been padded.\n *   If value is less than or equal to length(string), then string is returned as is.\n * @param padString The string to pad the current string with. If padString is too long to stay\n *   within targetLength, it will be truncated. Default is `\" \"`\n * @returns String with appropriate padding at the end\n */\n// Note: Limit with padString only works when length(padString) = 1, will be fixed with https://github.com/sallar/stringz/pull/59\nexport function padEnd(string: string, targetLength: number, padString: string = ' '): string {\n  if (targetLength <= stringLength(string)) return string;\n  return stringzLimit(string, targetLength, padString, 'right');\n}\n\n/**\n * This function mirrors the `padStart` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Pads this string with another string (multiple times, if needed) until the resulting string\n * reaches the given length. The padding is applied from the start of this string.\n *\n * @param string String to add padding too\n * @param targetLength The length of the resulting string once the starting string has been padded.\n *   If value is less than or equal to length(string), then string is returned as is.\n * @param padString The string to pad the current string with. If padString is too long to stay\n *   within the targetLength, it will be truncated from the end. Default is `\" \"`\n * @returns String with of specified targetLength with padString applied from the start\n */\n// Note: Limit with padString only works when length(padString) = 1, will be fixed with https://github.com/sallar/stringz/pull/59\nexport function padStart(string: string, targetLength: number, padString: string = ' '): string {\n  if (targetLength <= stringLength(string)) return string;\n  return stringzLimit(string, targetLength, padString, 'left');\n}\n\n// This is a helper function that performs a correction on the slice index to make sure it\n// cannot go out of bounds\nfunction correctSliceIndex(length: number, index: number) {\n  if (index > length) return length;\n  if (index < -length) return 0;\n  if (index < 0) return index + length;\n  return index;\n}\n\n/**\n * This function mirrors the `slice` function from the JavaScript Standard String object. It handles\n * Unicode code points instead of UTF-16 character codes.\n *\n * Extracts a section of this string and returns it as a new string, without modifying the original\n * string.\n *\n * @param string The starting string\n * @param indexStart The index of the first character to include in the returned substring.\n * @param indexEnd The index of the first character to exclude from the returned substring.\n * @returns A new string containing the extracted section of the string.\n */\nexport function slice(string: string, indexStart: number, indexEnd?: number): string {\n  const length: number = stringLength(string);\n  if (\n    indexStart > length ||\n    (indexEnd &&\n      ((indexStart > indexEnd &&\n        !(indexStart >= 0 && indexStart < length && indexEnd < 0 && indexEnd > -length)) ||\n        indexEnd < -length))\n  )\n    return '';\n\n  const newStart = correctSliceIndex(length, indexStart);\n  const newEnd = indexEnd ? correctSliceIndex(length, indexEnd) : undefined;\n\n  return substring(string, newStart, newEnd);\n}\n\n/**\n * This function mirrors the `split` function from the JavaScript Standard String object. It handles\n * Unicode code points instead of UTF-16 character codes.\n *\n * Takes a pattern and divides the string into an ordered list of substrings by searching for the\n * pattern, puts these substrings into an array, and returns the array.\n *\n * @param string The string to split\n * @param separator The pattern describing where each split should occur\n * @param splitLimit Limit on the number of substrings to be included in the array. Splits the\n *   string at each occurrence of specified separator, but stops when limit entries have been placed\n *   in the array.\n * @returns An array of strings, split at each point where separator occurs in the starting string.\n *   Returns undefined if separator is not found in string.\n */\nexport function split(string: string, separator: string | RegExp, splitLimit?: number): string[] {\n  const result: string[] = [];\n\n  if (splitLimit !== undefined && splitLimit <= 0) {\n    return [string];\n  }\n\n  if (separator === '') return toArray(string).slice(0, splitLimit);\n\n  let regexSeparator = separator;\n  if (\n    typeof separator === 'string' ||\n    (separator instanceof RegExp && !includes(separator.flags, 'g'))\n  ) {\n    regexSeparator = new RegExp(separator, 'g');\n  }\n\n  const matches: RegExpMatchArray | null = string.match(regexSeparator);\n\n  let currentIndex = 0;\n\n  if (!matches) return [string];\n\n  for (let index = 0; index < (splitLimit ? splitLimit - 1 : matches.length); index++) {\n    const matchIndex = indexOf(string, matches[index], currentIndex);\n    const matchLength = stringLength(matches[index]);\n\n    result.push(substring(string, currentIndex, matchIndex));\n    currentIndex = matchIndex + matchLength;\n\n    if (splitLimit !== undefined && result.length === splitLimit) {\n      break;\n    }\n  }\n\n  result.push(substring(string, currentIndex));\n\n  return result;\n}\n\n/**\n * This function mirrors the `startsWith` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Determines whether the string begins with the characters of a specified string, returning true or\n * false as appropriate.\n *\n * @param string String to search through\n * @param searchString The characters to be searched for at the start of this string.\n * @param position The start position at which searchString is expected to be found (the index of\n *   searchString's first character). Default is `0`\n * @returns True if the given characters are found at the beginning of the string, including when\n *   searchString is an empty string; otherwise, false.\n */\nexport function startsWith(string: string, searchString: string, position: number = 0): boolean {\n  const indexOfSearchString = indexOf(string, searchString, position);\n  if (indexOfSearchString !== position) return false;\n  return true;\n}\n\n/**\n * This function mirrors the `substr` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Returns a substring by providing start and length. This function is not exported because it is\n * considered deprecated, however it is still useful as a local helper function.\n *\n * @param string String to be divided\n * @param begin Start position. Default is `Start of string`\n * @param len Length of result. Default is `String length minus start parameter`. Default is `String\n *   length minus start parameter`\n * @returns Substring from starting string\n */\nfunction substr(\n  string: string,\n  begin: number = 0,\n  len: number = stringLength(string) - begin,\n): string {\n  return stringzSubstr(string, begin, len);\n}\n\n/**\n * This function mirrors the `substring` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Returns a substring by providing start and end position.\n *\n * @param string String to be divided\n * @param begin Start position\n * @param end End position. Default is `End of string`\n * @returns Substring from starting string\n */\nexport function substring(\n  string: string,\n  begin: number,\n  end: number = stringLength(string),\n): string {\n  return stringzSubstring(string, begin, end);\n}\n\n/**\n * This function mirrors the `toArray` function from the JavaScript Standard String object. It\n * handles Unicode code points instead of UTF-16 character codes.\n *\n * Converts a string to an array of string characters.\n *\n * @param string String to convert to array\n * @returns An array of characters from the starting string\n */\nexport function toArray(string: string): string[] {\n  return stringzToArray(string);\n}\n\n/** Determine whether the string is a `LocalizeKey` meant to be localized in Platform.Bible. */\nexport function isLocalizeKey(str: string): str is LocalizeKey {\n  return startsWith(str, '%') && endsWith(str, '%');\n}\n\n/**\n * Escape RegExp special characters.\n *\n * You can also use this to escape a string that is inserted into the middle of a regex, for\n * example, into a character class.\n *\n * All credit to [`escape-string-regexp`](https://www.npmjs.com/package/escape-string-regexp) - this\n * function is simply copied directly from there to allow a common js export\n *\n * @example\n *\n *     import escapeStringRegexp from 'platform-bible-utils';\n *\n *     const escapedString = escapeStringRegexp('How much $ for a ?');\n *     //=> 'How much \\\\$ for a \\\\?'\n *\n *     new RegExp(escapedString);\n */\nexport function escapeStringRegexp(string: string): string {\n  if (typeof string !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  // Escape characters with special meaning either inside or outside character sets.\n  // Use a simple backslash escape when its always valid, and a `\\xnn` escape when the simpler form would be disallowed by Unicode patterns stricter grammar.\n  return string.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&').replace(/-/g, '\\\\x2d');\n}\n\n/**\n * Transforms a string or an array of strings into an array of regular expressions, ensuring that\n * the result is always an array.\n *\n * This function accepts a value that may be a single string, an array of strings, or `undefined`.\n * It then:\n *\n * - Converts each string into a `RegExp` object.\n * - If the input is an array containing nested arrays, it converts each string in the nested arrays\n *   into `RegExp` objects.\n * - Ensures that the result is always an array of `RegExp` objects or arrays of `RegExp` objects.\n *\n * @param stringStringMaybeArray - The value to be transformed, which can be a single string, an\n *   array of strings or arrays of strings, or `undefined`.\n * @returns An array of `RegExp` objects or arrays of `RegExp` objects. If the input is `undefined`,\n *   an empty array is returned.\n */\nexport function transformAndEnsureRegExpRegExpArray(\n  stringStringMaybeArray: string | (string | string[])[] | undefined,\n): (RegExp | RegExp[])[] {\n  if (!stringStringMaybeArray) return [];\n\n  const stringStringArray = ensureArray(stringStringMaybeArray);\n\n  const regExpRegExpArray = stringStringArray.map((stringMaybeStringArray: string | string[]) =>\n    Array.isArray(stringMaybeStringArray)\n      ? stringMaybeStringArray.map((str) => new RegExp(str))\n      : new RegExp(stringMaybeStringArray),\n  );\n\n  return regExpRegExpArray;\n}\n\n/**\n * Transforms a string or an array of strings into an array of regular expressions.\n *\n * This function accepts a value that may be a single string, an array of strings, or `undefined`.\n * It then:\n *\n * - Converts each string into a `RegExp` object.\n * - Ensures that the result is always an array of `RegExp` objects.\n *\n * @param stringMaybeArray - The value to be transformed, which can be a single string, an array of\n *   strings, or `undefined`.\n * @returns An array of `RegExp` objects. If the input is `undefined`, an empty array is returned.\n */\nexport function transformAndEnsureRegExpArray(\n  stringMaybeArray: string | string[] | undefined,\n): RegExp[] {\n  if (!stringMaybeArray) return [];\n\n  const stringArray = ensureArray(stringMaybeArray);\n\n  const regExpArray = stringArray.map((str: string) => new RegExp(str));\n\n  return regExpArray;\n}\n\nconst whiteSpaceRegex =\n  // Using unicode control characters to be very explicit about which characters we are using.\n  // The first 6 characters are the control characters \\f\\n\\r\\t\\v.\n  // eslint-disable-next-line no-control-regex\n  /^[\\u000C\\u000A\\u000D\\u0009\\u000B\\u0020\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\u0085]+$/;\n/**\n * Determines whether a string contains one or more white space characters and no other characters.\n *\n * This implementation uses [dotnet's `Char.IsWhiteSpace` definition of white\n * space](https://learn.microsoft.com/en-us/dotnet/api/system.char.iswhitespace?view=net-9.0):\n *\n * ```ts\n * /^[\\u000C\\u000A\\u000D\\u0009\\u000B\\u0020\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\u0085]+$/.test(\n *   ch,\n * );\n * ```\n *\n * Note: This differs from\n * [`/\\s/.test(ch)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions/Character_classes#:~:text=Matches%20a%20single%20white%20space%20character%2C%20including%20space)\n * (usually considered the determiner of what is white space in JavaScript) in that it does not\n * include ZWNBSP (U+FEFF) but rather includes NEXT LINE (U+0085)\n *\n * @param ch Single character or a string of characters\n * @returns `true` if the string consists of one or more white space characters and no other\n *   characters, `false` otherwise\n */\nexport function isWhiteSpace(ch: string) {\n  return whiteSpaceRegex.test(ch);\n}\n\n/**\n * Converts PascalCase or camelCase string to kebab-case. To detect upper- and lower-case\n * characters, uses `.toUpperCase` and `.toLowerCase` to be locale-independent.\n *\n * Current implementation supports only UTF-16.\n *\n * Thanks to ChatGPT https://chatgpt.com/share/67c8aa44-e054-800c-8068-e1e6630081f7\n */\nexport function toKebabCase(input: string): string {\n  let result = '';\n\n  for (let i = 0; i < input.length; i++) {\n    const char = input[i];\n    const isUpper = char === char.toUpperCase() && char !== char.toLowerCase();\n\n    if (isUpper) {\n      if (i > 0) {\n        const prevChar = input[i - 1];\n        const isPrevUpper =\n          prevChar === prevChar.toUpperCase() && prevChar !== prevChar.toLowerCase();\n\n        // If previous is not uppercase, always insert dash.\n        if (!isPrevUpper) {\n          result += '-';\n        } else if (i + 1 < input.length) {\n          // Deal with initialisms and acronyms as if they are whole words (\"APIFinder\" -> \"api-finder\")\n          // Previous was uppercase; insert dash only if the next character exists and is lowercase.\n          const nextChar = input[i + 1];\n          const isNextLower =\n            nextChar === nextChar.toLowerCase() && nextChar !== nextChar.toUpperCase();\n          if (isNextLower) {\n            result += '-';\n          }\n        }\n      }\n      result += char.toLowerCase();\n    } else {\n      result += char;\n    }\n  }\n\n  return result;\n}\n\n/** This is an internal-only export for testing purposes and should not be used in development */\nexport const testingStringUtils = {\n  indexOfClosestClosingCurlyBrace,\n};\n","import { Canon, VerseRef } from '@sillsdev/scripture';\nimport {\n  MarkerContent,\n  MarkerObject,\n  Usj,\n  USJ_TYPE,\n} from '@biblionexus-foundation/scripture-utilities';\nimport { BookInfo, ScriptureReference, ScrollGroupId } from './scripture.model';\nimport { at, isWhiteSpace, slice, split, startsWith } from './string-util';\nimport { LocalizeKey } from './menus.model';\nimport { isString } from './util';\n\n/**\n * All marker types that seem to be block-level according to `UsxFragmenter.AppendStartUsfm`. And\n * the `type` for USJ documents' top-level object because that is effectively a block\n *\n * Note: This \"block-level\" means the marker is in its own paragraph (a [CSS\n * Block](https://developer.mozilla.org/en-US/docs/Glossary/Block/CSS)) as opposed to being\n * in-line.\n */\nconst BLOCK_MARKER_TYPES = ['chapter', 'book', 'para', 'row', 'sidebar', USJ_TYPE];\n\nconst ZWSP = '\\u200B';\n\nconst scrBookData: BookInfo[] = [\n  { shortName: 'ERR', fullNames: ['ERROR'], chapters: -1 },\n  { shortName: 'GEN', fullNames: ['Genesis'], chapters: 50 },\n  { shortName: 'EXO', fullNames: ['Exodus'], chapters: 40 },\n  { shortName: 'LEV', fullNames: ['Leviticus'], chapters: 27 },\n  { shortName: 'NUM', fullNames: ['Numbers'], chapters: 36 },\n  { shortName: 'DEU', fullNames: ['Deuteronomy'], chapters: 34 },\n  { shortName: 'JOS', fullNames: ['Joshua'], chapters: 24 },\n  { shortName: 'JDG', fullNames: ['Judges'], chapters: 21 },\n  { shortName: 'RUT', fullNames: ['Ruth'], chapters: 4 },\n  { shortName: '1SA', fullNames: ['1 Samuel'], chapters: 31 },\n  { shortName: '2SA', fullNames: ['2 Samuel'], chapters: 24 },\n  { shortName: '1KI', fullNames: ['1 Kings'], chapters: 22 },\n  { shortName: '2KI', fullNames: ['2 Kings'], chapters: 25 },\n  { shortName: '1CH', fullNames: ['1 Chronicles'], chapters: 29 },\n  { shortName: '2CH', fullNames: ['2 Chronicles'], chapters: 36 },\n  { shortName: 'EZR', fullNames: ['Ezra'], chapters: 10 },\n  { shortName: 'NEH', fullNames: ['Nehemiah'], chapters: 13 },\n  { shortName: 'EST', fullNames: ['Esther'], chapters: 10 },\n  { shortName: 'JOB', fullNames: ['Job'], chapters: 42 },\n  { shortName: 'PSA', fullNames: ['Psalm', 'Psalms'], chapters: 150 },\n  { shortName: 'PRO', fullNames: ['Proverbs'], chapters: 31 },\n  { shortName: 'ECC', fullNames: ['Ecclesiastes'], chapters: 12 },\n  { shortName: 'SNG', fullNames: ['Song of Solomon', 'Song of Songs'], chapters: 8 },\n  { shortName: 'ISA', fullNames: ['Isaiah'], chapters: 66 },\n  { shortName: 'JER', fullNames: ['Jeremiah'], chapters: 52 },\n  { shortName: 'LAM', fullNames: ['Lamentations'], chapters: 5 },\n  { shortName: 'EZK', fullNames: ['Ezekiel'], chapters: 48 },\n  { shortName: 'DAN', fullNames: ['Daniel'], chapters: 12 },\n  { shortName: 'HOS', fullNames: ['Hosea'], chapters: 14 },\n  { shortName: 'JOL', fullNames: ['Joel'], chapters: 3 },\n  { shortName: 'AMO', fullNames: ['Amos'], chapters: 9 },\n  { shortName: 'OBA', fullNames: ['Obadiah'], chapters: 1 },\n  { shortName: 'JON', fullNames: ['Jonah'], chapters: 4 },\n  { shortName: 'MIC', fullNames: ['Micah'], chapters: 7 },\n  { shortName: 'NAM', fullNames: ['Nahum'], chapters: 3 },\n  { shortName: 'HAB', fullNames: ['Habakkuk'], chapters: 3 },\n  { shortName: 'ZEP', fullNames: ['Zephaniah'], chapters: 3 },\n  { shortName: 'HAG', fullNames: ['Haggai'], chapters: 2 },\n  { shortName: 'ZEC', fullNames: ['Zechariah'], chapters: 14 },\n  { shortName: 'MAL', fullNames: ['Malachi'], chapters: 4 },\n  { shortName: 'MAT', fullNames: ['Matthew'], chapters: 28 },\n  { shortName: 'MRK', fullNames: ['Mark'], chapters: 16 },\n  { shortName: 'LUK', fullNames: ['Luke'], chapters: 24 },\n  { shortName: 'JHN', fullNames: ['John'], chapters: 21 },\n  { shortName: 'ACT', fullNames: ['Acts'], chapters: 28 },\n  { shortName: 'ROM', fullNames: ['Romans'], chapters: 16 },\n  { shortName: '1CO', fullNames: ['1 Corinthians'], chapters: 16 },\n  { shortName: '2CO', fullNames: ['2 Corinthians'], chapters: 13 },\n  { shortName: 'GAL', fullNames: ['Galatians'], chapters: 6 },\n  { shortName: 'EPH', fullNames: ['Ephesians'], chapters: 6 },\n  { shortName: 'PHP', fullNames: ['Philippians'], chapters: 4 },\n  { shortName: 'COL', fullNames: ['Colossians'], chapters: 4 },\n  { shortName: '1TH', fullNames: ['1 Thessalonians'], chapters: 5 },\n  { shortName: '2TH', fullNames: ['2 Thessalonians'], chapters: 3 },\n  { shortName: '1TI', fullNames: ['1 Timothy'], chapters: 6 },\n  { shortName: '2TI', fullNames: ['2 Timothy'], chapters: 4 },\n  { shortName: 'TIT', fullNames: ['Titus'], chapters: 3 },\n  { shortName: 'PHM', fullNames: ['Philemon'], chapters: 1 },\n  { shortName: 'HEB', fullNames: ['Hebrews'], chapters: 13 },\n  { shortName: 'JAS', fullNames: ['James'], chapters: 5 },\n  { shortName: '1PE', fullNames: ['1 Peter'], chapters: 5 },\n  { shortName: '2PE', fullNames: ['2 Peter'], chapters: 3 },\n  { shortName: '1JN', fullNames: ['1 John'], chapters: 5 },\n  { shortName: '2JN', fullNames: ['2 John'], chapters: 1 },\n  { shortName: '3JN', fullNames: ['3 John'], chapters: 1 },\n  { shortName: 'JUD', fullNames: ['Jude'], chapters: 1 },\n  { shortName: 'REV', fullNames: ['Revelation'], chapters: 22 },\n];\n\nexport const FIRST_SCR_BOOK_NUM = 1;\nexport const LAST_SCR_BOOK_NUM = scrBookData.length - 1;\nexport const FIRST_SCR_CHAPTER_NUM = 1;\nexport const FIRST_SCR_VERSE_NUM = 1;\n\nexport const defaultScrRef: ScriptureReference = {\n  bookNum: 1,\n  chapterNum: 1,\n  verseNum: 1,\n};\n\nexport const getChaptersForBook = (bookNum: number): number => {\n  return scrBookData[bookNum]?.chapters ?? -1;\n};\n\nexport const offsetBook = (scrRef: ScriptureReference, offset: number): ScriptureReference => ({\n  bookNum: Math.max(FIRST_SCR_BOOK_NUM, Math.min(scrRef.bookNum + offset, LAST_SCR_BOOK_NUM)),\n  chapterNum: 1,\n  verseNum: 1,\n});\n\nexport const offsetChapter = (scrRef: ScriptureReference, offset: number): ScriptureReference => ({\n  ...scrRef,\n  chapterNum: Math.min(\n    Math.max(FIRST_SCR_CHAPTER_NUM, scrRef.chapterNum + offset),\n    getChaptersForBook(scrRef.bookNum),\n  ),\n  verseNum: 1,\n});\n\nexport const offsetVerse = (scrRef: ScriptureReference, offset: number): ScriptureReference => ({\n  ...scrRef,\n  verseNum: Math.max(FIRST_SCR_VERSE_NUM, scrRef.verseNum + offset),\n});\n\n/**\n * https://github.com/ubsicap/Paratext/blob/master/ParatextData/SILScriptureExtensions.cs#L72\n *\n * Convert book number to a localized Id (a short description of the book). This should be used\n * whenever a book ID (short code) is shown to the user. It is primarily needed for people who do\n * not read Roman script well and need to have books identified in a alternate script (e.g. Chinese\n * or Russian)\n *\n * @param bookNumber\n * @param localizationLanguage In BCP 47 format\n * @param getLocalizedString Function that provides the localized versions of the book ids and names\n *   asynchronously.\n * @returns\n */\nexport async function getLocalizedIdFromBookNumber(\n  bookNumber: number,\n  localizationLanguage: string,\n  getLocalizedString: (item: {\n    localizeKey: string;\n    languagesToSearch?: string[];\n  }) => Promise<string>,\n) {\n  const id = Canon.bookNumberToId(bookNumber);\n\n  if (!startsWith(Intl.getCanonicalLocales(localizationLanguage)[0], 'zh'))\n    return getLocalizedString({\n      localizeKey: `LocalizedId.${id}`,\n      languagesToSearch: [localizationLanguage],\n    });\n\n  // For Chinese the normal book name is already fairly short.\n  const bookName = await getLocalizedString({\n    localizeKey: `Book.${id}`,\n    languagesToSearch: [localizationLanguage],\n  });\n  const parts = split(bookName, '-');\n  // some entries had a second name inside ideographic parenthesis\n  const parts2 = split(parts[0], '\\xff08');\n  const retVal = parts2[0].trim();\n  return retVal;\n}\n\n/**\n * Get the Scripture reference as an easily comparable/sortable integer.\n *\n * @param scrRef The Scripture reference.\n * @returns An integer where the first three digits represent the book, the next three represent the\n *   chapter and the last three represent the verse.\n */\nexport function scrRefToBBBCCCVVV(scrRef: ScriptureReference): number {\n  return new VerseRef(scrRef.bookNum, scrRef.chapterNum, scrRef.verseNum).BBBCCCVVV;\n}\n\n/**\n * Compares two Scripture references canonically.\n *\n * @param scrRef1 The first Scripture reference to compare.\n * @param scrRef2 The second Scripture reference to compare.\n * @returns A number indicating the result of the comparison: - Negative value if scrRef1 precedes\n *   scrRef2 in sorting order. - Zero if scrRef1 and scrRef2 are equivalent in sorting order. -\n *   Positive value if scrRef1 follows scrRef2 in sorting order.\n */\nexport function compareScrRefs(scrRef1: ScriptureReference, scrRef2: ScriptureReference): number {\n  // TODO: consider edge cases for invalid references (current implementation should suffice for\n  // all but the most extreme cases)\n  return scrRefToBBBCCCVVV(scrRef1) - scrRefToBBBCCCVVV(scrRef2);\n}\n\n/** Get the localized string key for a given scroll group Id (or no scroll group if `undefined`) */\nexport function getLocalizeKeyForScrollGroupId(\n  scrollGroupId: ScrollGroupId | undefined | 'undefined',\n): LocalizeKey {\n  return `%scrollGroup_${scrollGroupId}%`;\n}\n\n/**\n * Gets a list of localized string keys for provided scroll group Ids. Uses\n * {@link getLocalizeKeyForScrollGroupId} internally\n *\n * @example\n *\n * ```typescript\n * getLocalizeKeysForScrollGroupIds([undefined, 0, 1, 2, 3, 4]);\n * // Gives localized string keys for the provided scroll group ids in an array\n * ```\n *\n * @param scrollGroupIds Scroll group ids to include\n * @returns List of localized string keys for scroll group Ids\n */\nexport function getLocalizeKeysForScrollGroupIds(scrollGroupIds: (ScrollGroupId | undefined)[]) {\n  return scrollGroupIds.map((scrollGroupId) => getLocalizeKeyForScrollGroupId(scrollGroupId));\n}\n\n/**\n * Formats a Scripture reference.\n *\n * @param scrRef The Scripture reference to format.\n * @param optionOrLocalizedBookName Either 'id' (the default) to format using the \"standard\" (as\n *   defined by SIL/UBS) 3-letter book ID, 'English' to format using the English book name spelled\n *   out, or some other string (e.g., a localized book name, vernacular abbreviation, FCBH book id,\n *   etc.) to use.\n * @param chapterVerseSeparator The character used to separate the chapter number from the verse\n *   number. Default is a colon (:). Note: More than one character is allowed.\n * @param bookChapterSeparator The character used to separate the book from the chapter number.\n *   Default is a single space. Note: More than one character is allowed.\n * @returns The formatted reference.\n */\nexport function formatScrRef(\n  scrRef: ScriptureReference,\n  optionOrLocalizedBookName?: 'id' | 'English' | string,\n  chapterVerseSeparator?: string,\n  bookChapterSeparator?: string,\n): string {\n  let book: string;\n  switch (optionOrLocalizedBookName ?? 'id') {\n    case 'English':\n      book = Canon.bookNumberToEnglishName(scrRef.bookNum);\n      break;\n    case 'id':\n      book = Canon.bookNumberToId(scrRef.bookNum);\n      break;\n    default:\n      // We already dealt with undefined about in the switch, but TS is getting confused.\n      book = optionOrLocalizedBookName ?? '';\n      break;\n  }\n  return `${book}${bookChapterSeparator ?? ' '}${scrRef.chapterNum}${chapterVerseSeparator ?? ':'}${scrRef.verseNum}`;\n}\n\n// #region white space functions\n\nconst nonSemanticWhiteSpaceRegex =\n  // Using unicode control characters to be very explicit about which characters we are using.\n  // The first 6 characters are the control characters \\f\\n\\r\\t\\v.\n  // eslint-disable-next-line no-control-regex\n  /^[\\u000C\\u000A\\u000D\\u0009\\u000B\\u0020\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u200B\\u0085]+$/;\n/**\n * Determines whether a string contains one or more \"non-meaningful\" white space characters\n * according to `ParatextData.dll` and no other characters.\n *\n * \"Non-meaningful\" white space according to `ParatextData.dll` is white space (according to\n * {@link isWhiteSpace}) other than IDEOGRAPHIC SPACE (U+3000) and also includes ZWSP (U+200B)\n *\n * This function is a direct translation of `UsfmToken.IsNonSemanticWhiteSpace` from\n * `ParatextData.dll`\n *\n * @param ch Single character or a string of characters\n * @returns `true` if the string consists of one or more \"non-meaningful\" white space characters and\n *   no other characters, `false` otherwise\n */\nfunction isNonSemanticWhiteSpace(ch: string) {\n  return nonSemanticWhiteSpaceRegex.test(ch);\n}\n\n// Note Zero-width joiner is at the start because eslint thinks we're trying to test for joined\n// characters if it's in the middle. https://eslint.org/docs/latest/rules/no-misleading-character-class\nconst invisibleCharOrWhiteSpaceRegex =\n  /^[\\u200d\\u2003\\u2002\\u0020\\u00a0\\u202f\\u2009\\u200a\\u3000\\u200b\\u200c\\u2060\\u200e\\u200f]+$/;\n/**\n * Determines whether a string contains one or more Paratext-9-selectable invisible characters or\n * white space characters and no other characters.\n *\n * Paratext-9-selectable invisible characters or white space characters are characters listed in\n * [Paratext 9's \"Whitespace and invisible characters\n * drop-down\"](https://paratext.myjetbrains.com/youtrack/issue/PTX-23623) that the user can insert\n * into the text:\n *\n * ```ts\n * // Zero-width joiner, em space, en space, space, no-break space, narrow no-break space,\n * // thin space, hair space, ideographic space, zero-width space, zero-width non-joiner,\n * // word joiner, left-to-right mark, right-to-left mark\n * /^[\\u200d\\u2003\\u2002\\u0020\\u00a0\\u202f\\u2009\\u200a\\u3000\\u200b\\u200c\\u2060\\u200e\\u200f]+$/.test(\n *   ch,\n * );\n * ```\n *\n * Note: more white space characters are supported in Paratext 9 but are not listed in this\n * dropdown. See {@link isWhiteSpace} for more information.\n *\n * This function is a direct translation of `CharExtensions.IsInvisibleCharOrWhitespace` from\n * `ParatextData.dll`\n *\n * @param ch Single character or a string of characters\n * @returns `true` if the string consists of one or more Paratext-9-selectable invisible characters\n *   or white space characters and no other characters, `false` otherwise\n */\nfunction isParatextSelectableInvisibleCharOrWhiteSpace(ch: string) {\n  return invisibleCharOrWhiteSpaceRegex.test(ch);\n}\n\n/**\n * Converts all control characters, carriage returns, and tabs into spaces and then strips duplicate\n * spaces.\n *\n * This is mainly intended for use with individual Scripture strings in USFM, USX, USJ, etc. format.\n * It is not intended to implement the [USFM white space definition or reduction\n * rules](https://docs.usfm.bible/usfm/3.1/whitespace.html) but strictly follows Paratext 9's white\n * space rules. It is generally best suited to normalizing spaces within a Scripture marker as it\n * removes all newlines.\n *\n * This function is a direct translation of `UsfmToken.RegularizeSpaces` from `ParatextData.dll`\n */\nexport function normalizeScriptureSpaces(str: string): string {\n  let result = '';\n  let lastCharWasSpace = false;\n  // Initialized to placeholder previous character\n  let prevCh = '\\0';\n  for (let i = 0; i < str.length; i += 1) {\n    const ch = str[i];\n    // Control characters, CR/LF, and TAB become spaces\n    if (ch.charCodeAt(0) < 32) {\n      if (!lastCharWasSpace) result += ' ';\n      lastCharWasSpace = true;\n    } else if (\n      !lastCharWasSpace &&\n      ch === ZWSP &&\n      i + 1 < str.length &&\n      isNonSemanticWhiteSpace(str[i + 1])\n    ) {\n      // ZWSP is redundant if followed by a space\n    } else if (isNonSemanticWhiteSpace(ch)) {\n      // Keep other kinds of spaces\n      if (!lastCharWasSpace) result += ch;\n      lastCharWasSpace = true;\n    } else if (isParatextSelectableInvisibleCharOrWhiteSpace(ch) && prevCh === ch) {\n      // If the char is a whitespace or invisible char that has not already been handled and is a\n      // duplicate, remove the duplicate\n    } else {\n      result += ch;\n      lastCharWasSpace = false;\n    }\n\n    prevCh = ch;\n  }\n\n  return result;\n}\n\n/**\n * Determines whether the array of marker contents is \"empty\" meaning it is undefined, is an empty\n * array, or has just `undefined` or `''` in it\n *\n * Paratext passed up \"\\va \\va*\" which had no content array coming in translated to USJ, but the\n * editor put a content array with an empty string. So this will help them be considered equal.\n */\nfunction isUsjContentEmpty(content: MarkerContent[] | undefined) {\n  if (!content) return true;\n  if (content.length === 0) return true;\n  return content.length === 1 && (content[0] === undefined || content[0] === '');\n}\n\n/**\n * Determines if the content object is the final child of a parent that is a block-level marker.\n *\n * We do not need to walk up the ancestors to the _closest_ block marker because spaces are\n * preserved at the end of in-line markers even at the end of a paragraph. We just need to know if\n * the parent is a block marker because space at the end of a block marker is not preserved.\n *\n * @param contentObject USJ document or marker to check\n * @param parent Parent object of `contentObject`. If `contentObject` is a USJ document, this should\n *   be `undefined`.\n * @returns `true` if `contentObject` is the final child of the closest block-level marker; `false`\n *   otherwise\n */\nfunction isAtEndOfBlockMarker(\n  contentObject: MarkerContent | Usj,\n  parent: MarkerObject | Usj | undefined,\n) {\n  if (!parent) return false;\n  // If the parent is not a block-level marker, the content object is not at the end of a block-level marker\n  if (!BLOCK_MARKER_TYPES.includes(parent.type)) return false;\n\n  if (!parent.content)\n    throw new Error(\n      `Parent ${JSON.stringify(parent)} of ${JSON.stringify(contentObject)} does not have a content array! This should not happen!`,\n    );\n  // If the content object is not the last in its parent, it is not at the end of a block-level marker\n  if (contentObject !== parent.content[parent.content.length - 1]) return false;\n\n  return true;\n}\n\n/**\n * Determines if the USJ documents or markers (and all contents) are equivalent after regularizing\n * spaces according to the way `ParatextData.dll` does.\n *\n * Note that this will not work properly if there ever exist any properties of USJ document or USJ\n * markers other than `content` that are complex objects like arrays or objects as the properties\n * are shallow equaled.\n *\n * @param a First USJ document or marker to compare\n * @param aParent Parent object of `a`. If `a` is a USJ document, this should be `undefined`.\n * @param b Second USJ document or marker to compare\n * @param bParent Parent object of `b`. If `b` is a USJ document, this should be `undefined`.\n */\nfunction areUsjContentsEqualExceptWhitespaceInternal(\n  a: MarkerContent | Usj | undefined,\n  aParent: MarkerObject | Usj | undefined,\n  b: MarkerContent | Usj | undefined,\n  bParent: MarkerObject | Usj | undefined,\n) {\n  if (!a && !b) return true;\n  if (!a || !b) return false;\n\n  const aIsString = isString(a);\n  const bIsString = isString(b);\n  if (aIsString && bIsString) {\n    const aNormalized = normalizeScriptureSpaces(a);\n    const bNormalized = normalizeScriptureSpaces(b);\n    // Check to see if their regularized forms are equal. If so, they're equal. If not, they may still\n    // be equal if they are at the end of a block-level marker and the only difference is space at the end.\n    // If at the end of a block-level marker with space at the end, take off the final space and compare again\n    if (aNormalized !== bNormalized) {\n      // If neither ends in whitespace, they are not equal\n      if (!isWhiteSpace(at(aNormalized, -1) ?? '') && !isWhiteSpace(at(bNormalized, -1) ?? ''))\n        return false;\n\n      // If either is not at the end of a block-level marker, they are not equal\n      if (!isAtEndOfBlockMarker(a, aParent)) return false;\n      if (!isAtEndOfBlockMarker(b, bParent)) return false;\n\n      // Trim the end of each string\n      let aTrimmed = aNormalized;\n      while (isWhiteSpace(at(aTrimmed, -1) ?? '')) aTrimmed = slice(aTrimmed, 0, -1);\n      let bTrimmed = bNormalized;\n      while (isWhiteSpace(at(bTrimmed, -1) ?? '')) bTrimmed = slice(bTrimmed, 0, -1);\n      // If they are not equal after trimming, they are not equal\n      if (aTrimmed !== bTrimmed) return false;\n    }\n  } else if (!aIsString && !bIsString) {\n    // We have determined they are not strings, so they must be objects with various simple properties and possibly a `content` array\n    const aObject: MarkerObject | Usj = a;\n    const bObject: MarkerObject | Usj = b;\n    // Check if all properties are present and equal. We will check `content` separately\n    // Seems Object.keys doesn't support proper key typing? Asserting to the key types\n    // eslint-disable-next-line no-type-assertion/no-type-assertion\n    const aKeys = Object.keys(aObject).filter(\n      (key) => key !== 'content',\n    ) as (keyof typeof aObject)[];\n    if (aKeys.length !== Object.keys(bObject).filter((key) => key !== 'content').length)\n      return false;\n    if (aKeys.some((key) => !(key in bObject) || aObject[key] !== bObject[key])) return false;\n\n    // Check that both `content`s are equal\n    const isAContentEmpty = isUsjContentEmpty(aObject.content);\n    const isBContentEmpty = isUsjContentEmpty(bObject.content);\n    // If one is empty and the other is not, they are not equal\n    if (isAContentEmpty !== isBContentEmpty) return false;\n    // If both are empty, they are equal. If neither is empty, do more testing\n    if (!isAContentEmpty && !isBContentEmpty) {\n      // Although TypeScript doesn't realize `!isUsjContentEmpty(a)` means a is an array, we know\n      // they are both arrays, so we can access the content with a bang.\n      /* eslint-disable no-type-assertion/no-type-assertion */\n      let aContent: MarkerContent[] = aObject.content!;\n      let bContent: MarkerContent[] = bObject.content!;\n      /* eslint-enable no-type-assertion/no-type-assertion */\n\n      // If either of the two contents is block-level and has an extra whitespace string at the end, remove it\n      const aLast = aContent[aContent.length - 1];\n      if (BLOCK_MARKER_TYPES.includes(aObject.type) && isString(aLast) && isWhiteSpace(aLast))\n        aContent = aContent.slice(0, -1);\n\n      // If either of the two contents is block-level and has an extra whitespace string at the end, remove it\n      const bLast = bContent[bContent.length - 1];\n      if (BLOCK_MARKER_TYPES.includes(bObject.type) && isString(bLast) && isWhiteSpace(bLast))\n        bContent = bContent.slice(0, -1);\n\n      if (aContent.length !== bContent.length) return false;\n      for (let i = 0; i < aContent.length; i += 1) {\n        if (\n          !areUsjContentsEqualExceptWhitespaceInternal(aContent[i], aObject, bContent[i], bObject)\n        )\n          return false;\n      }\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Determines if the USJ documents or markers (and all contents) are equivalent after regularizing\n * spaces according to the way `ParatextData.dll` does.\n *\n * Note that this will not work properly if there ever exist any properties of USJ document or USJ\n * markers other than `content` that are complex objects like arrays or objects as the properties\n * are shallow equaled.\n */\nexport function areUsjContentsEqualExceptWhitespace(a: Usj | undefined, b: Usj | undefined) {\n  return areUsjContentsEqualExceptWhitespaceInternal(a, undefined, b, undefined);\n}\n\n// #endregion\n","/** Function to run to dispose of something. Returns true if successfully unsubscribed */\nexport type Unsubscriber = () => boolean;\n\n/**\n * Returns an Unsubscriber function that combines all the unsubscribers passed in.\n *\n * @param unsubscribers All unsubscribers to aggregate into one unsubscriber\n * @returns Function that unsubscribes from all passed in unsubscribers when run\n */\nexport const aggregateUnsubscribers = (unsubscribers: Unsubscriber[]): Unsubscriber => {\n  return (...args) => {\n    // Run the unsubscriber for each handler\n    const unsubs = unsubscribers.map((unsubscriber) => unsubscriber(...args));\n\n    // If all the unsubscribers resolve to truthiness, we succeed\n    return unsubs.every((success) => success);\n  };\n};\n\n/**\n * Function to run to dispose of something that runs asynchronously. The promise resolves to true if\n * successfully unsubscribed\n */\nexport type UnsubscriberAsync = () => Promise<boolean>;\n\n/**\n * Returns an UnsubscriberAsync function that combines all the unsubscribers passed in.\n *\n * @param unsubscribers - All unsubscribers to aggregate into one unsubscriber.\n * @returns Function that unsubscribes from all passed in unsubscribers when run\n */\nexport const aggregateUnsubscriberAsyncs = (\n  unsubscribers: (UnsubscriberAsync | Unsubscriber)[],\n): UnsubscriberAsync => {\n  return async (...args) => {\n    // Run the unsubscriber for each handler\n    const unsubPromises = unsubscribers.map(async (unsubscriber) => unsubscriber(...args));\n\n    // If all the unsubscribers resolve to truthiness, we succeed\n    return (await Promise.all(unsubPromises)).every((success) => success);\n  };\n};\n","import { type MarkerContent, type MarkerObject } from '@biblionexus-foundation/scripture-utilities';\nimport { VerseRef } from '@sillsdev/scripture';\n\n/** USJ content node type for a chapter */\nexport const CHAPTER_TYPE = 'chapter';\n\n/** USJ content node type for a verse */\nexport const VERSE_TYPE = 'verse';\n\n/** Represents a book, chapter, verse, and offset */\nexport type VerseRefOffset = {\n  verseRef: VerseRef;\n  offset: number;\n};\n\n/** This could actually have more content clauses at the end, but TS types are limited */\nexport type ContentJsonPath =\n  | ''\n  | `$`\n  | `$.content[${number}]`\n  | `$.content[${number}].content[${number}]`\n  | `$.content[${number}].content[${number}].content[${number}]`\n  | `$.content[${number}].content[${number}].content[${number}].content[${number}]`;\n\n/** Node within a USJ object, an offset within that node, and a JSONPath query to the node */\nexport type UsjContentLocation = {\n  node: MarkerContent;\n  offset: number;\n  jsonPath: ContentJsonPath;\n};\n\n/** Utilities for reading from and writing to `Usj` objects */\nexport interface IUsjReaderWriter {\n  /**\n   * Return a copy of text following a given starting point\n   *\n   * @param start Point where text extraction will start\n   * @param desiredLength Length of text to extract from this USJ data\n   */\n  extractText(start: UsjContentLocation, desiredLength: number): string;\n  /**\n   * Return a copy of text between two points\n   *\n   * @param start Point where text extraction will start\n   * @param end Point where text extraction will end\n   * @param maxLength Maximum length of string to return (defaults to 100)\n   * @returns Text between the two points, capped at length `maxLength`\n   */\n  extractTextBetweenPoints(\n    start: UsjContentLocation,\n    end: UsjContentLocation,\n    maxLength: number,\n  ): string;\n  /**\n   * Given a starting point, find the next location in this USJ data that matches the given text\n   *\n   * @param start Point where the search for `text` will start\n   * @param text Text to find\n   * @param maxTextLengthToSearch Maximum length of text to search before stopping (default is 1000)\n   * @returns Object containing the USJ node where `text` begins (it might be split across nodes),\n   *   offset within that node that indicates where `text` begins, and a JSONPath string that\n   *   indicates the location of the of USJ node within `usj`. Note that if the USJ node returned is\n   *   an object, it is the same object that is within this USJ data. So if you change it, you are\n   *   changing this USJ data.\n   */\n  findNextLocationOfMatchingText(\n    start: UsjContentLocation,\n    text: string,\n    maxTextLengthToSearch: number,\n  ): UsjContentLocation | undefined;\n  /** Find the first value matching the given JSONPath query within this USJ data */\n  findSingleValue<T>(jsonPathQuery: string): T | undefined;\n  /** Find the parent of the first value matching the given JSONPath query within this USJ data */\n  findParent<T>(jsonPathQuery: string): T | undefined;\n  /**\n   * Convert a JSONPath query into a VerseRef and offset\n   *\n   * @param jsonPathQuery JSONPath search expression that indicates a node within this USJ data. If\n   *   the expression matches more than one node, then only the first node found is considered.\n   * @param bookId 3 letter ID of the book being searched (must be defined in this USJ data if not\n   *   provided here)\n   * @returns VerseRef and offset that represents the location within this USJ data indicated by\n   *   `jsonPathQuery`\n   */\n  jsonPathToVerseRefAndOffset(jsonPathQuery: string, bookId?: string): VerseRefOffset;\n  /** Build a JSONPath query that uniquely identifies the given node with this USJ data. */\n  nodeToJsonPath(node: MarkerObject): ContentJsonPath;\n  /**\n   * Determine the VerseRef and offset that correspond to the location of a node somewhere within\n   * this USJ data\n   *\n   * @param bookId ID of the book represented by this USJ data\n   * @param node JSON object representing the location of the VerseRef and offset\n   * @param nodeParent JSON object that owns the `content` array that includes `node`. If\n   *   'undefined' is provided then the `UsjReaderWriter` will attempt to lookup the parent of\n   *   `node`. The lookup will always fail and throw an error if `node` is a string.\n   * @returns VerseRef and offset representing the location of `node`, if one could be found\n   */\n  nodeToVerseRefAndOffset(\n    bookId: string,\n    node: MarkerContent,\n    nodeParent: MarkerObject | MarkerContent[] | undefined,\n  ): { verseRef: VerseRef; offset: number } | undefined;\n  /**\n   * Remove all nodes from this USJ data that match a given search function.\n   *\n   * @param searchFunction Function that returns `true` if the given node should be removed\n   * @returns Number of nodes removed\n   */\n  removeContentNodes(searchFunction: (potentiallyMatchingNode: MarkerContent) => boolean): number;\n  /**\n   * Inform this UsjReaderWriter that the underlying USJ object changed. This is needed to clear\n   * caches used when querying.\n   */\n  usjChanged(): void;\n  /**\n   * Convert a verse ref + offset into a node + offset within this USJ data and a JSONPath query\n   *\n   * @param verseRef Indicates the book, chapter, and verse of interest to find\n   * @param verseRefOffset Specific location within verse text (defaults to 0)\n   * @returns Object containing the USJ node indicated by `verseRef` and `verseRefOffset`, offset\n   *   within that node that matches the `verseRefOffset`, and a JSONPath string that indicates the\n   *   location of the of USJ node within this USJ data. Note that if the USJ node returned is an\n   *   object, it is the same object that is within this USJ data. So if you change it, you are\n   *   changing this USJ data.\n   */\n  verseRefToUsjContentLocation(verseRef: VerseRef, verseRefOffset: number): UsjContentLocation;\n}\n","var getOwnPropertyNames = Object.getOwnPropertyNames, getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Combine two comparators into a single comparators.\n */\nfunction combineComparators(comparatorA, comparatorB) {\n    return function isEqual(a, b, state) {\n        return comparatorA(a, b, state) && comparatorB(a, b, state);\n    };\n}\n/**\n * Wrap the provided `areItemsEqual` method to manage the circular state, allowing\n * for circular references to be safely included in the comparison without creating\n * stack overflows.\n */\nfunction createIsCircular(areItemsEqual) {\n    return function isCircular(a, b, state) {\n        if (!a || !b || typeof a !== 'object' || typeof b !== 'object') {\n            return areItemsEqual(a, b, state);\n        }\n        var cache = state.cache;\n        var cachedA = cache.get(a);\n        var cachedB = cache.get(b);\n        if (cachedA && cachedB) {\n            return cachedA === b && cachedB === a;\n        }\n        cache.set(a, b);\n        cache.set(b, a);\n        var result = areItemsEqual(a, b, state);\n        cache.delete(a);\n        cache.delete(b);\n        return result;\n    };\n}\n/**\n * Get the properties to strictly examine, which include both own properties that are\n * not enumerable and symbol properties.\n */\nfunction getStrictProperties(object) {\n    return getOwnPropertyNames(object).concat(getOwnPropertySymbols(object));\n}\n/**\n * Whether the object contains the property passed as an own property.\n */\nvar hasOwn = Object.hasOwn ||\n    (function (object, property) {\n        return hasOwnProperty.call(object, property);\n    });\n/**\n * Whether the values passed are strictly equal or both NaN.\n */\nfunction sameValueZeroEqual(a, b) {\n    return a === b || (!a && !b && a !== a && b !== b);\n}\n\nvar PREACT_VNODE = '__v';\nvar PREACT_OWNER = '__o';\nvar REACT_OWNER = '_owner';\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor, keys = Object.keys;\n/**\n * Whether the arrays are equal in value.\n */\nfunction areArraysEqual(a, b, state) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (!state.equals(a[index], b[index], index, index, a, b, state)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the dates passed are equal in value.\n */\nfunction areDatesEqual(a, b) {\n    return sameValueZeroEqual(a.getTime(), b.getTime());\n}\n/**\n * Whether the errors passed are equal in value.\n */\nfunction areErrorsEqual(a, b) {\n    return (a.name === b.name &&\n        a.message === b.message &&\n        a.cause === b.cause &&\n        a.stack === b.stack);\n}\n/**\n * Whether the functions passed are equal in value.\n */\nfunction areFunctionsEqual(a, b) {\n    return a === b;\n}\n/**\n * Whether the `Map`s are equal in value.\n */\nfunction areMapsEqual(a, b, state) {\n    var size = a.size;\n    if (size !== b.size) {\n        return false;\n    }\n    if (!size) {\n        return true;\n    }\n    var matchedIndices = new Array(size);\n    var aIterable = a.entries();\n    var aResult;\n    var bResult;\n    var index = 0;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.entries();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            if (matchedIndices[matchIndex]) {\n                matchIndex++;\n                continue;\n            }\n            var aEntry = aResult.value;\n            var bEntry = bResult.value;\n            if (state.equals(aEntry[0], bEntry[0], index, matchIndex, a, b, state) &&\n                state.equals(aEntry[1], bEntry[1], aEntry[0], bEntry[0], a, b, state)) {\n                hasMatch = matchedIndices[matchIndex] = true;\n                break;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n        index++;\n    }\n    return true;\n}\n/**\n * Whether the numbers are equal in value.\n */\nvar areNumbersEqual = sameValueZeroEqual;\n/**\n * Whether the objects are equal in value.\n */\nfunction areObjectsEqual(a, b, state) {\n    var properties = keys(a);\n    var index = properties.length;\n    if (keys(b).length !== index) {\n        return false;\n    }\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        if (!isPropertyEqual(a, b, state, properties[index])) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the objects are equal in value with strict property checking.\n */\nfunction areObjectsEqualStrict(a, b, state) {\n    var properties = getStrictProperties(a);\n    var index = properties.length;\n    if (getStrictProperties(b).length !== index) {\n        return false;\n    }\n    var property;\n    var descriptorA;\n    var descriptorB;\n    // Decrementing `while` showed faster results than either incrementing or\n    // decrementing `for` loop and than an incrementing `while` loop. Declarative\n    // methods like `some` / `every` were not used to avoid incurring the garbage\n    // cost of anonymous callbacks.\n    while (index-- > 0) {\n        property = properties[index];\n        if (!isPropertyEqual(a, b, state, property)) {\n            return false;\n        }\n        descriptorA = getOwnPropertyDescriptor(a, property);\n        descriptorB = getOwnPropertyDescriptor(b, property);\n        if ((descriptorA || descriptorB) &&\n            (!descriptorA ||\n                !descriptorB ||\n                descriptorA.configurable !== descriptorB.configurable ||\n                descriptorA.enumerable !== descriptorB.enumerable ||\n                descriptorA.writable !== descriptorB.writable)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the primitive wrappers passed are equal in value.\n */\nfunction arePrimitiveWrappersEqual(a, b) {\n    return sameValueZeroEqual(a.valueOf(), b.valueOf());\n}\n/**\n * Whether the regexps passed are equal in value.\n */\nfunction areRegExpsEqual(a, b) {\n    return a.source === b.source && a.flags === b.flags;\n}\n/**\n * Whether the `Set`s are equal in value.\n */\nfunction areSetsEqual(a, b, state) {\n    var size = a.size;\n    if (size !== b.size) {\n        return false;\n    }\n    if (!size) {\n        return true;\n    }\n    var matchedIndices = new Array(size);\n    var aIterable = a.values();\n    var aResult;\n    var bResult;\n    while ((aResult = aIterable.next())) {\n        if (aResult.done) {\n            break;\n        }\n        var bIterable = b.values();\n        var hasMatch = false;\n        var matchIndex = 0;\n        while ((bResult = bIterable.next())) {\n            if (bResult.done) {\n                break;\n            }\n            if (!matchedIndices[matchIndex] &&\n                state.equals(aResult.value, bResult.value, aResult.value, bResult.value, a, b, state)) {\n                hasMatch = matchedIndices[matchIndex] = true;\n                break;\n            }\n            matchIndex++;\n        }\n        if (!hasMatch) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the TypedArray instances are equal in value.\n */\nfunction areTypedArraysEqual(a, b) {\n    var index = a.length;\n    if (b.length !== index) {\n        return false;\n    }\n    while (index-- > 0) {\n        if (a[index] !== b[index]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Whether the URL instances are equal in value.\n */\nfunction areUrlsEqual(a, b) {\n    return (a.hostname === b.hostname &&\n        a.pathname === b.pathname &&\n        a.protocol === b.protocol &&\n        a.port === b.port &&\n        a.hash === b.hash &&\n        a.username === b.username &&\n        a.password === b.password);\n}\nfunction isPropertyEqual(a, b, state, property) {\n    if ((property === REACT_OWNER ||\n        property === PREACT_OWNER ||\n        property === PREACT_VNODE) &&\n        (a.$$typeof || b.$$typeof)) {\n        return true;\n    }\n    return (hasOwn(b, property) &&\n        state.equals(a[property], b[property], property, property, a, b, state));\n}\n\nvar ARGUMENTS_TAG = '[object Arguments]';\nvar BOOLEAN_TAG = '[object Boolean]';\nvar DATE_TAG = '[object Date]';\nvar ERROR_TAG = '[object Error]';\nvar MAP_TAG = '[object Map]';\nvar NUMBER_TAG = '[object Number]';\nvar OBJECT_TAG = '[object Object]';\nvar REG_EXP_TAG = '[object RegExp]';\nvar SET_TAG = '[object Set]';\nvar STRING_TAG = '[object String]';\nvar URL_TAG = '[object URL]';\nvar isArray = Array.isArray;\nvar isTypedArray = typeof ArrayBuffer === 'function' && ArrayBuffer.isView\n    ? ArrayBuffer.isView\n    : null;\nvar assign = Object.assign;\nvar getTag = Object.prototype.toString.call.bind(Object.prototype.toString);\n/**\n * Create a comparator method based on the type-specific equality comparators passed.\n */\nfunction createEqualityComparator(_a) {\n    var areArraysEqual = _a.areArraysEqual, areDatesEqual = _a.areDatesEqual, areErrorsEqual = _a.areErrorsEqual, areFunctionsEqual = _a.areFunctionsEqual, areMapsEqual = _a.areMapsEqual, areNumbersEqual = _a.areNumbersEqual, areObjectsEqual = _a.areObjectsEqual, arePrimitiveWrappersEqual = _a.arePrimitiveWrappersEqual, areRegExpsEqual = _a.areRegExpsEqual, areSetsEqual = _a.areSetsEqual, areTypedArraysEqual = _a.areTypedArraysEqual, areUrlsEqual = _a.areUrlsEqual;\n    /**\n     * compare the value of the two objects and return true if they are equivalent in values\n     */\n    return function comparator(a, b, state) {\n        // If the items are strictly equal, no need to do a value comparison.\n        if (a === b) {\n            return true;\n        }\n        // If either of the items are nullish and fail the strictly equal check\n        // above, then they must be unequal.\n        if (a == null || b == null) {\n            return false;\n        }\n        var type = typeof a;\n        if (type !== typeof b) {\n            return false;\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                return areNumbersEqual(a, b, state);\n            }\n            if (type === 'function') {\n                return areFunctionsEqual(a, b, state);\n            }\n            // If a primitive value that is not strictly equal, it must be unequal.\n            return false;\n        }\n        var constructor = a.constructor;\n        // Checks are listed in order of commonality of use-case:\n        //   1. Common complex object types (plain object, array)\n        //   2. Common data values (date, regexp)\n        //   3. Less-common complex object types (map, set)\n        //   4. Less-common data values (promise, primitive wrappers)\n        // Inherently this is both subjective and assumptive, however\n        // when reviewing comparable libraries in the wild this order\n        // appears to be generally consistent.\n        // Constructors should match, otherwise there is potential for false positives\n        // between class and subclass or custom object and POJO.\n        if (constructor !== b.constructor) {\n            return false;\n        }\n        // `isPlainObject` only checks against the object's own realm. Cross-realm\n        // comparisons are rare, and will be handled in the ultimate fallback, so\n        // we can avoid capturing the string tag.\n        if (constructor === Object) {\n            return areObjectsEqual(a, b, state);\n        }\n        // `isArray()` works on subclasses and is cross-realm, so we can avoid capturing\n        // the string tag or doing an `instanceof` check.\n        if (isArray(a)) {\n            return areArraysEqual(a, b, state);\n        }\n        // `isTypedArray()` works on all possible TypedArray classes, so we can avoid\n        // capturing the string tag or comparing against all possible constructors.\n        if (isTypedArray != null && isTypedArray(a)) {\n            return areTypedArraysEqual(a, b, state);\n        }\n        // Try to fast-path equality checks for other complex object types in the\n        // same realm to avoid capturing the string tag. Strict equality is used\n        // instead of `instanceof` because it is more performant for the common\n        // use-case. If someone is subclassing a native class, it will be handled\n        // with the string tag comparison.\n        if (constructor === Date) {\n            return areDatesEqual(a, b, state);\n        }\n        if (constructor === RegExp) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (constructor === Map) {\n            return areMapsEqual(a, b, state);\n        }\n        if (constructor === Set) {\n            return areSetsEqual(a, b, state);\n        }\n        // Since this is a custom object, capture the string tag to determing its type.\n        // This is reasonably performant in modern environments like v8 and SpiderMonkey.\n        var tag = getTag(a);\n        if (tag === DATE_TAG) {\n            return areDatesEqual(a, b, state);\n        }\n        // For RegExp, the properties are not enumerable, and therefore will give false positives if\n        // tested like a standard object.\n        if (tag === REG_EXP_TAG) {\n            return areRegExpsEqual(a, b, state);\n        }\n        if (tag === MAP_TAG) {\n            return areMapsEqual(a, b, state);\n        }\n        if (tag === SET_TAG) {\n            return areSetsEqual(a, b, state);\n        }\n        if (tag === OBJECT_TAG) {\n            // The exception for value comparison is custom `Promise`-like class instances. These should\n            // be treated the same as standard `Promise` objects, which means strict equality, and if\n            // it reaches this point then that strict equality comparison has already failed.\n            return (typeof a.then !== 'function' &&\n                typeof b.then !== 'function' &&\n                areObjectsEqual(a, b, state));\n        }\n        // If a URL tag, it should be tested explicitly. Like RegExp, the properties are not\n        // enumerable, and therefore will give false positives if tested like a standard object.\n        if (tag === URL_TAG) {\n            return areUrlsEqual(a, b, state);\n        }\n        // If an error tag, it should be tested explicitly. Like RegExp, the properties are not\n        // enumerable, and therefore will give false positives if tested like a standard object.\n        if (tag === ERROR_TAG) {\n            return areErrorsEqual(a, b, state);\n        }\n        // If an arguments tag, it should be treated as a standard object.\n        if (tag === ARGUMENTS_TAG) {\n            return areObjectsEqual(a, b, state);\n        }\n        // As the penultimate fallback, check if the values passed are primitive wrappers. This\n        // is very rare in modern JS, which is why it is deprioritized compared to all other object\n        // types.\n        if (tag === BOOLEAN_TAG || tag === NUMBER_TAG || tag === STRING_TAG) {\n            return arePrimitiveWrappersEqual(a, b, state);\n        }\n        // If not matching any tags that require a specific type of comparison, then we hard-code false because\n        // the only thing remaining is strict equality, which has already been compared. This is for a few reasons:\n        //   - Certain types that cannot be introspected (e.g., `WeakMap`). For these types, this is the only\n        //     comparison that can be made.\n        //   - For types that can be introspected, but rarely have requirements to be compared\n        //     (`ArrayBuffer`, `DataView`, etc.), the cost is avoided to prioritize the common\n        //     use-cases (may be included in a future release, if requested enough).\n        //   - For types that can be introspected but do not have an objective definition of what\n        //     equality is (`Error`, etc.), the subjective decision is to be conservative and strictly compare.\n        // In all cases, these decisions should be reevaluated based on changes to the language and\n        // common development practices.\n        return false;\n    };\n}\n/**\n * Create the configuration object used for building comparators.\n */\nfunction createEqualityComparatorConfig(_a) {\n    var circular = _a.circular, createCustomConfig = _a.createCustomConfig, strict = _a.strict;\n    var config = {\n        areArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areArraysEqual,\n        areDatesEqual: areDatesEqual,\n        areErrorsEqual: areErrorsEqual,\n        areFunctionsEqual: areFunctionsEqual,\n        areMapsEqual: strict\n            ? combineComparators(areMapsEqual, areObjectsEqualStrict)\n            : areMapsEqual,\n        areNumbersEqual: areNumbersEqual,\n        areObjectsEqual: strict\n            ? areObjectsEqualStrict\n            : areObjectsEqual,\n        arePrimitiveWrappersEqual: arePrimitiveWrappersEqual,\n        areRegExpsEqual: areRegExpsEqual,\n        areSetsEqual: strict\n            ? combineComparators(areSetsEqual, areObjectsEqualStrict)\n            : areSetsEqual,\n        areTypedArraysEqual: strict\n            ? areObjectsEqualStrict\n            : areTypedArraysEqual,\n        areUrlsEqual: areUrlsEqual,\n    };\n    if (createCustomConfig) {\n        config = assign({}, config, createCustomConfig(config));\n    }\n    if (circular) {\n        var areArraysEqual$1 = createIsCircular(config.areArraysEqual);\n        var areMapsEqual$1 = createIsCircular(config.areMapsEqual);\n        var areObjectsEqual$1 = createIsCircular(config.areObjectsEqual);\n        var areSetsEqual$1 = createIsCircular(config.areSetsEqual);\n        config = assign({}, config, {\n            areArraysEqual: areArraysEqual$1,\n            areMapsEqual: areMapsEqual$1,\n            areObjectsEqual: areObjectsEqual$1,\n            areSetsEqual: areSetsEqual$1,\n        });\n    }\n    return config;\n}\n/**\n * Default equality comparator pass-through, used as the standard `isEqual` creator for\n * use inside the built comparator.\n */\nfunction createInternalEqualityComparator(compare) {\n    return function (a, b, _indexOrKeyA, _indexOrKeyB, _parentA, _parentB, state) {\n        return compare(a, b, state);\n    };\n}\n/**\n * Create the `isEqual` function used by the consuming application.\n */\nfunction createIsEqual(_a) {\n    var circular = _a.circular, comparator = _a.comparator, createState = _a.createState, equals = _a.equals, strict = _a.strict;\n    if (createState) {\n        return function isEqual(a, b) {\n            var _a = createState(), _b = _a.cache, cache = _b === void 0 ? circular ? new WeakMap() : undefined : _b, meta = _a.meta;\n            return comparator(a, b, {\n                cache: cache,\n                equals: equals,\n                meta: meta,\n                strict: strict,\n            });\n        };\n    }\n    if (circular) {\n        return function isEqual(a, b) {\n            return comparator(a, b, {\n                cache: new WeakMap(),\n                equals: equals,\n                meta: undefined,\n                strict: strict,\n            });\n        };\n    }\n    var state = {\n        cache: undefined,\n        equals: equals,\n        meta: undefined,\n        strict: strict,\n    };\n    return function isEqual(a, b) {\n        return comparator(a, b, state);\n    };\n}\n\n/**\n * Whether the items passed are deeply-equal in value.\n */\nvar deepEqual = createCustomEqual();\n/**\n * Whether the items passed are deeply-equal in value based on strict comparison.\n */\nvar strictDeepEqual = createCustomEqual({ strict: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references.\n */\nvar circularDeepEqual = createCustomEqual({ circular: true });\n/**\n * Whether the items passed are deeply-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularDeepEqual = createCustomEqual({\n    circular: true,\n    strict: true,\n});\n/**\n * Whether the items passed are shallowly-equal in value.\n */\nvar shallowEqual = createCustomEqual({\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value based on strict comparison\n */\nvar strictShallowEqual = createCustomEqual({\n    strict: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references.\n */\nvar circularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n});\n/**\n * Whether the items passed are shallowly-equal in value, including circular references,\n * based on strict comparison.\n */\nvar strictCircularShallowEqual = createCustomEqual({\n    circular: true,\n    createInternalComparator: function () { return sameValueZeroEqual; },\n    strict: true,\n});\n/**\n * Create a custom equality comparison method.\n *\n * This can be done to create very targeted comparisons in extreme hot-path scenarios\n * where the standard methods are not performant enough, but can also be used to provide\n * support for legacy environments that do not support expected features like\n * `RegExp.prototype.flags` out of the box.\n */\nfunction createCustomEqual(options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.circular, circular = _a === void 0 ? false : _a, createCustomInternalComparator = options.createInternalComparator, createState = options.createState, _b = options.strict, strict = _b === void 0 ? false : _b;\n    var config = createEqualityComparatorConfig(options);\n    var comparator = createEqualityComparator(config);\n    var equals = createCustomInternalComparator\n        ? createCustomInternalComparator(comparator)\n        : createInternalEqualityComparator(comparator);\n    return createIsEqual({ circular: circular, comparator: comparator, createState: createState, equals: equals, strict: strict });\n}\n\nexport { circularDeepEqual, circularShallowEqual, createCustomEqual, deepEqual, sameValueZeroEqual, shallowEqual, strictCircularDeepEqual, strictCircularShallowEqual, strictDeepEqual, strictShallowEqual };\n//# sourceMappingURL=index.mjs.map\n","// There is a circular version https://www.npmjs.com/package/fast-equals#circulardeepequal that I\n// think allows comparing React refs (which have circular references in particular places that this\n// library would ignore). Maybe we can change to that version sometime if needed.\nimport { deepEqual as isEqualDeep } from 'fast-equals';\n\n/**\n * Check that two objects are deeply equal, comparing members of each object and such\n *\n * @param a The first object to compare\n * @param b The second object to compare\n *\n *   WARNING: Objects like arrays from different iframes have different constructor function\n *   references even if they do the same thing, so this deep equality comparison fails objects that\n *   look the same but have different constructors because different constructors could produce\n *   false positives in [a few specific\n *   situations](https://github.com/planttheidea/fast-equals/blob/a41afc0a240ad5a472e47b53791e9be017f52281/src/comparator.ts#L96).\n *   This means that two objects like arrays from different iframes that look the same will fail\n *   this check. Please use some other means to check deep equality in those situations.\n *\n *   Note: This deep equality check considers `undefined` values on keys of objects NOT to be equal to\n *   not specifying the key at all. For example, `{ stuff: 3, things: undefined }` and `{ stuff: 3\n *   }` are not considered equal in this case\n *\n *   - For more information and examples, see [this\n *       CodeSandbox](https://codesandbox.io/s/deepequallibrarycomparison-4g4kk4?file=/src/index.mjs).\n *\n * @returns True if a and b are deeply equal; false otherwise\n */\nexport default function deepEqual(a: unknown, b: unknown) {\n  return isEqualDeep(a, b);\n}\n","import deepEqual from './equality-checking';\n\n/**\n * Check if one object is a subset of the other object. \"Subset\" means that all properties of one\n * object are present in the other object, and if they are present that all values of those\n * properties are deeply equal. Sub-objects are also checked to be subsets of the corresponding\n * sub-object in the other object.\n *\n * @example ObjB is a subset of objA given these objects:\n *\n * ```ts\n * objA = { name: 'Alice', age: 30, address: { city: 'Seattle', state: 'Washington' } };\n * objB = { name: 'Alice', address: { city: 'Seattle' } };\n * ```\n *\n * It is important to note that only arrays of primitives (i.e., booleans, numbers, strings) are\n * supported. In particular, objects in arrays will not be checked for deep equality. Also, presence\n * in an array is all this checks, not the number of times that an item appears in an array. `[1,\n * 1]` is a subset of `[1]`.\n *\n * @param objectWithAllProperties Object to be checked if it is a superset of\n *   `objectWithPartialProperties`\n * @param objectWithPartialProperties Object to be checked if it is a subset of\n *   `objectWithAllProperties`\n * @returns True if `objectWithAllProperties` contains all the properties of\n *   `objectWithPartialProperties` and all values of those properties are deeply equal\n */\nexport default function isSubset(\n  objectWithAllProperties: unknown,\n  objectWithPartialProperties: unknown,\n): boolean {\n  if (typeof objectWithAllProperties !== typeof objectWithPartialProperties) return false;\n\n  // For this function we're saying that all falsy things of the same type are equal to each other\n  if (!objectWithAllProperties && !objectWithPartialProperties) return true;\n\n  if (Array.isArray(objectWithAllProperties)) {\n    // We know these are arrays from the line above\n    /* eslint-disable no-type-assertion/no-type-assertion */\n    const partialArray = objectWithPartialProperties as Array<unknown>;\n    const allArray = objectWithAllProperties as Array<unknown>;\n    /* eslint-enable no-type-assertion/no-type-assertion */\n\n    if (partialArray.length === 0) return true;\n\n    // This only works with arrays of primitives.\n    // If someone cares about checking arrays of objects this needs updating.\n    return partialArray.every((item) => allArray.includes(item));\n  }\n\n  if (typeof objectWithAllProperties !== 'object')\n    return deepEqual(objectWithAllProperties, objectWithPartialProperties);\n\n  // We know these are objects that potentially have properties because of the earlier checks\n  /* eslint-disable no-type-assertion/no-type-assertion */\n  const partialObj = objectWithPartialProperties as Record<string, unknown>;\n  const allObj = objectWithAllProperties as Record<string, unknown>;\n  /* eslint-enable no-type-assertion/no-type-assertion */\n\n  let retVal = true;\n  Object.keys(partialObj).forEach((key) => {\n    if (!retVal) return;\n    if (!Object.hasOwn(allObj, key)) retVal = false;\n    else if (!isSubset(allObj[key], partialObj[key])) retVal = false;\n  });\n  return retVal;\n}\n","import { ScrVers, VerseRef } from '@sillsdev/scripture';\n\n/**\n * Converts a JavaScript value to a JSON string, changing `undefined` properties in the JavaScript\n * object to `null` properties in the JSON string.\n *\n * WARNING: `null` values will become `undefined` values after passing through {@link serialize} then\n * {@link deserialize}. For example, `{ a: 1, b: undefined, c: null }` will become `{ a: 1, b:\n * undefined, c: undefined }`. If you are passing around user data that needs to retain `null`\n * values, you should wrap them yourself in a string before using this function. Alternatively, you\n * can write your own replacer that will preserve `null` in a way that you can recover later.\n *\n * @param value A JavaScript value, usually an object or array, to be converted.\n * @param replacer A function that transforms the results. Note that all `undefined` values returned\n *   by the replacer will be further transformed into `null` in the JSON string.\n * @param space Adds indentation, white space, and line break characters to the return-value JSON\n *   text to make it easier to read. See the `space` parameter of `JSON.stringify` for more\n *   details.\n */\nexport function serialize(\n  value: unknown,\n  replacer?: (this: unknown, key: string, value: unknown) => unknown,\n  space?: string | number,\n): string {\n  const undefinedReplacer = (replacerKey: string, replacerValue: unknown) => {\n    let newValue = replacerValue;\n    if (replacer) newValue = replacer(replacerKey, newValue);\n    // All `undefined` values become `null` on the way from JS objects into JSON strings\n    // eslint-disable-next-line no-null/no-null\n    if (newValue === undefined) newValue = null;\n    return newValue;\n  };\n  return JSON.stringify(value, undefinedReplacer, space);\n}\n\n/**\n * Converts a JSON string into a value, converting all `null` properties from JSON into `undefined`\n * in the returned JavaScript value/object.\n *\n * WARNING: `null` values will become `undefined` values after passing through {@link serialize} then\n * {@link deserialize}. For example, `{ a: 1, b: undefined, c: null }` will become `{ a: 1, b:\n * undefined, c: undefined }`. If you are passing around user data that needs to retain `null`\n * values, you should wrap them yourself in a string before using this function. Alternatively, you\n * can write your own replacer that will preserve `null` in a way that you can recover later.\n *\n * @param value A valid JSON string.\n * @param reviver A function that transforms the results. This function is called for each member of\n *   the object. If a member contains nested objects, the nested objects are transformed before the\n *   parent object is. Note that `null` values are converted into `undefined` values after the\n *   reviver has run.\n */\nexport function deserialize(\n  value: string,\n  reviver?: (this: unknown, key: string, value: unknown) => unknown,\n  // Need to use `any` instead of `unknown` here to match the signature of JSON.parse\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n): any {\n  // Helper function to replace `null` with `undefined` on a per property basis. This can't be done\n  // with our own reviver because `JSON.parse` removes `undefined` properties from the return value.\n  function replaceNull(obj: Record<string | number, unknown>): Record<string | number, unknown> {\n    Object.keys(obj).forEach((key: string | number) => {\n      // We only want to replace `null`, not other falsy values\n      // eslint-disable-next-line no-null/no-null\n      if (obj[key] === null) obj[key] = undefined;\n      // If the property is an object, recursively call the helper function on it\n      else if (typeof obj[key] === 'object')\n        // Since the object came from a string, we know the keys will not be symbols\n        // eslint-disable-next-line no-type-assertion/no-type-assertion\n        obj[key] = replaceNull(obj[key] as Record<string | number, unknown>);\n    });\n    return obj;\n  }\n\n  // Helper function to create a VerseRef from a SerializedVerseRef object\n  function verseRefReviver(_vrefKey: string, vrefValue: unknown): unknown {\n    if (\n      vrefValue &&\n      typeof vrefValue === 'object' &&\n      'book' in vrefValue &&\n      typeof vrefValue.book === 'string' &&\n      'chapterNum' in vrefValue &&\n      typeof vrefValue.chapterNum === 'number' &&\n      'verseNum' in vrefValue &&\n      typeof vrefValue.verseNum === 'number' &&\n      Object.keys(vrefValue).every((key) =>\n        ['book', 'chapterNum', 'verseNum', 'verse', 'versificationStr'].includes(key),\n      )\n    ) {\n      const chapter = vrefValue.chapterNum.toString(10);\n      const verse =\n        'verse' in vrefValue && typeof vrefValue.verse === 'string'\n          ? vrefValue.verse\n          : vrefValue.verseNum.toString(10);\n      const versification =\n        'versificationStr' in vrefValue && typeof vrefValue.versificationStr === 'string'\n          ? new ScrVers(vrefValue.versificationStr)\n          : undefined;\n      return new VerseRef(vrefValue.book, chapter, verse, versification);\n    }\n    return vrefValue;\n  }\n\n  // Helper function to call the provided reviver and the VerseRef reviver\n  function combinedReviver(this: unknown, reviverKey: string, reviverVal: unknown) {\n    return verseRefReviver(\n      reviverKey,\n      reviver ? reviver.call(this, reviverKey, reviverVal) : reviverVal,\n    );\n  }\n\n  const parsedObject = JSON.parse(value, combinedReviver);\n  // Explicitly convert the value 'null' that isn't stored as a property on an object to 'undefined'\n  // eslint-disable-next-line no-null/no-null\n  if (parsedObject === null) return undefined;\n  if (typeof parsedObject === 'object') return replaceNull(parsedObject);\n  return parsedObject;\n}\n\n/**\n * Check to see if the value is serializable without losing information\n *\n * @param value Value to test\n * @returns True if serializable; false otherwise\n *\n *   Note: the values `undefined` and `null` are serializable (on their own or in an array), but\n *   `null` values get transformed into `undefined` when serializing/deserializing.\n *\n *   WARNING: This is inefficient right now as it stringifies, parses, stringifies, and === the value.\n *   Please only use this if you need to\n *\n *   DISCLAIMER: this does not successfully detect that values are not serializable in some cases:\n *\n *   - Losses of removed properties like functions and `Map`s\n *   - Class instances (not deserializable into class instances without special code)\n *\n *   We intend to improve this in the future if it becomes important to do so. See [`JSON.stringify`\n *   documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#description)\n *   for more information.\n */\nexport function isSerializable(value: unknown): boolean {\n  try {\n    const serializedValue = serialize(value);\n    return serializedValue === serialize(deserialize(serializedValue));\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * HTML Encodes the provided string. Thanks to ChatGPT\n *\n * @param str String to HTML encode\n * @returns HTML-encoded string\n */\nexport const htmlEncode = (str: string): string =>\n  str\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;')\n    .replace(/\\//g, '&#x2F;');\n","import DateTimeFormat from './intl-date-time-format';\n\n/**\n * Retrieves the current locale of the user's environment.\n *\n * @returns A string representing the current locale. If the locale cannot be determined, the\n *   function returns an empty string.\n */\nexport default function getCurrentLocale(): string {\n  // Use navigator when available\n  if (typeof navigator !== 'undefined' && navigator.languages) {\n    return navigator.languages[0];\n  }\n  // For Node.js\n  return new DateTimeFormat().resolvedOptions().locale;\n}\n","import NumberFormat from './intl-number-format';\n\n/**\n * Formats a number according to the locale and formatting options of this NumberFormat object\n *\n * @example FormatBytes(1024) => \"1 KB\"\n *\n * @example FormatBytes(1024, 0) => \"1 KB\"\n *\n * @param fileSize Number to format\n * @param decimals Number of decimal places to round to\n * @returns String representing the given number formatted according to the locale and formatting\n *   options of this NumberFormat object\n */\nexport default function formatBytes(fileSize: number, decimals: number = 2): string {\n  if (fileSize === 0) return '0 Bytes';\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  const i = Math.floor(Math.log(fileSize) / Math.log(1024));\n  const sizeToUse = sizes[i];\n  const formattingFileSize = new NumberFormat('en', {\n    style: 'decimal',\n    maximumFractionDigits: decimals,\n    minimumFractionDigits: 0,\n  }).format(fileSize / 1024 ** i);\n  return `${formattingFileSize} ${sizeToUse}`;\n}\n","const MILLISECONDS_PER_SECOND = 1000;\nconst SECONDS_PER_MINUTE = 60;\nconst SECONDS_PER_HOUR = SECONDS_PER_MINUTE * 60;\nconst SECONDS_PER_DAY = SECONDS_PER_HOUR * 24;\n\n/**\n * Get a localized string representation of the time between two dates\n *\n * @example\n *\n * `since` = 3 Aug 2024 8:00 AM\n *\n * `to` = 5 Aug 2024 8:000 AM\n *\n * Returns: \"two days ago\"\n *\n * @param since \"Destination\" time. time against which to get the time span.\n * @param to \"Starting\" time. Time span will be formatted relative to `to`. Defaults to `new Date()`\n * @returns Time span in words from `to` to `since`\n */\nfunction formatTimeSpan(\n  relativeTimeFormatter: Intl.RelativeTimeFormat,\n  since: Date,\n  to = new Date(),\n) {\n  const spanSeconds = Math.floor((since.getTime() - to.getTime()) / MILLISECONDS_PER_SECOND);\n\n  const totalDays = Math.round(spanSeconds / SECONDS_PER_DAY);\n  if (Math.abs(totalDays) >= 1) return relativeTimeFormatter.format(totalDays, 'day');\n\n  const totalHours = Math.round(spanSeconds / SECONDS_PER_HOUR);\n  if (Math.abs(totalHours) >= 1) return relativeTimeFormatter.format(totalHours, 'hour');\n\n  const totalMinutes = Math.round(spanSeconds / SECONDS_PER_MINUTE);\n  if (Math.abs(totalMinutes) >= 1) return relativeTimeFormatter.format(totalMinutes, 'minute');\n\n  return relativeTimeFormatter.format(spanSeconds, 'second');\n}\n\nexport default formatTimeSpan;\n","//----------------------------------------------------------------------------------------------\n// NOTE: If you change any of the types, make sure the JSON schema at the end of this file gets\n// changed so they align.\n//----------------------------------------------------------------------------------------------\n\nimport { LocalizeKey, ReferencedItem } from 'menus.model';\n\n/** The data an extension provides to inform Platform.Bible of the settings it provides */\nexport type SettingsContribution = SettingsGroup | SettingsGroup[];\n/** A description of an extension's setting entry */\nexport type Setting = ExtensionControlledSetting;\n/** Setting definition that is validated by the extension. */\nexport type ExtensionControlledSetting = SettingBase & ModifierExtensionControlled;\n/** Base information needed to describe a setting entry */\nexport type SettingBase = StateBase & {\n  [k: string]: unknown;\n  /** LocalizeKey that displays in the settings dialog as the setting name */\n  label: LocalizeKey;\n  /** LocalizeKey that displays in the settings dialog to describe the setting */\n  description?: LocalizeKey;\n};\n/** The data an extension provides to inform Platform.Bible of the project settings it provides */\nexport type ProjectSettingsContribution = ProjectSettingsGroup | ProjectSettingsGroup[];\n/** A description of an extension's setting entry */\nexport type ProjectSetting = ExtensionControlledProjectSetting;\n/** Setting definition that is validated by the extension. */\nexport type ExtensionControlledProjectSetting = ProjectSettingBase & ModifierExtensionControlled;\n/** Base information needed to describe a project setting entry */\nexport type ProjectSettingBase = SettingBase & ModifierProject;\n/** A description of an extension's user state entry */\nexport type UserState = ExtensionControlledState;\n/** State definition that is validated by the extension. */\nexport type ExtensionControlledState = StateBase & ModifierExtensionControlled;\n/** Group of related settings definitions */\nexport interface SettingsGroup {\n  [k: string]: unknown;\n  /** LocalizeKey that displays in the settings dialog as the group name */\n  label: LocalizeKey;\n  /** LocalizeKey that displays in the settings dialog to describe the group */\n  description?: LocalizeKey;\n  properties: SettingProperties;\n}\n/** Object whose keys are setting IDs and whose values are settings objects */\nexport interface SettingProperties {\n  [k: ReferencedItem]: Setting;\n}\n/** Base information needed to describe a state entry */\nexport interface StateBase {\n  [k: string]: unknown;\n  /** Default value for the state/setting */\n  default: unknown;\n  /**\n   * A state/setting ID whose value to set to this state/setting's starting value the first time\n   * this state/setting is loaded\n   */\n  derivesFrom?: ReferencedItem;\n}\n/**\n * Modifies state/setting type to be extension-controlled. \"Extension-controlled\" means the\n * extension provides the component and the validator for the state/setting, so the state/setting is\n * controlled by the extension.\n */\nexport interface ModifierExtensionControlled {\n  [k: string]: unknown;\n  platformType?: undefined;\n  type?: undefined;\n}\n/** Group of related settings definitions */\nexport interface ProjectSettingsGroup {\n  [k: string]: unknown;\n  /** LocalizeKey that displays in the project settings dialog as the group name */\n  label: LocalizeKey;\n  /** LocalizeKey that displays in the project settings dialog to describe the group */\n  description?: LocalizeKey;\n  properties: ProjectSettingProperties;\n}\n/** Object whose keys are setting IDs and whose values are settings objects */\nexport interface ProjectSettingProperties {\n  [k: ReferencedItem]: ProjectSetting;\n}\n\n// Note: we removed the index signature on ModifierProject to avoid having it on\n// `ProjectMetadataFilterOptions`. Unfortunately adding \"additionalProperties\": false on the json\n// schema messes up validation. Please remove the index signature again in the future if you\n// regenerate types\nexport interface ModifierProject {\n  /**\n   * String representation of `RegExp` pattern(s) to match against projects' `projectInterface`s\n   * (using the\n   * [`test`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)\n   * function) to determine if they should be included.\n   *\n   * If this is one string, it will be matched against `projectInterface`s. If this is an array,\n   * each entry is handled based on its type (at least one entry must match for this filter\n   * condition to pass):\n   *\n   * - If the entry is a string, it will be matched against each `projectInterface`. If any match, the\n   *   project will pass this filter condition\n   * - If the entry is an array of strings, each will be matched against each `projectInterface`. If\n   *   every string matches against at least one `projectInterface`, the project will pass this\n   *   filter condition\n   *\n   * In other words, each entry in the first-level array is `OR`'ed together. Each entry in\n   * second-level arrays (arrays within the first-level array) are `AND`'ed together.\n   *\n   * Defaults to all {@link ProjectInterfaces}, so all projects that do not match\n   * `excludeProjectInterfaces` will be included\n   *\n   * @example\n   *\n   * ```typescript\n   * includeProjectInterfaces: ['one', ['two', 'three']];\n   * ```\n   *\n   * This filter condition will succeed on projects whose `projectInterface`s fulfill at least one\n   * of the following conditions (At least one entry in the array must match):\n   *\n   * - Include `one`\n   * - Include both `two` and `three`.\n   */\n  includeProjectInterfaces?: undefined | string | (string | string[])[];\n  /**\n   * String representation of `RegExp` pattern(s) to match against projects' `projectInterface`s\n   * (using the\n   * [`test`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)\n   * function) to determine if they should absolutely not be included even if they match with\n   * `includeProjectInterfaces`.\n   *\n   * If this is one string, it will be matched against `projectInterface`s. If this is an array,\n   * each entry is handled based on its type (at least one entry must match for this filter\n   * condition to exclude the project):\n   *\n   * - If the entry is a string, it will be matched against each `projectInterface`. If any match, the\n   *   project will pass this filter condition and exclude the project\n   * - If the entry is an array of strings, each will be matched against each `projectInterface`. If\n   *   every string matches against at least one `projectInterface`, the project will pass this\n   *   filter condition and exclude the project\n   *\n   * In other words, each entry in the first-level array is `OR`'ed together. Each entry in\n   * second-level arrays (arrays within the first-level array) are `AND`'ed together.\n   *\n   * Defaults to no {@link ProjectInterfaces}, so all projects that match `includeProjectInterfaces`\n   * will be included\n   *\n   * @example\n   *\n   * ```typescript\n   * excludeProjectInterfaces: ['one', ['two', 'three']];\n   * ```\n   *\n   * This filter condition will succeed and exclude projects whose `projectInterface`s fulfill at\n   * least one of the following conditions (At least one entry in the array must match):\n   *\n   * - Include `one`\n   * - Include both `two` and `three`.\n   */\n  excludeProjectInterfaces?: undefined | string | (string | string[])[];\n  /**\n   * String representation of `RegExp` pattern(s) to match against the Project Data Provider Factory\n   * Ids that provided each project's metadata (using the\n   * [`test`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)\n   * function) to determine if the projects should be included.\n   *\n   * Defaults to all Project Data Provider Factory Ids, so all projects that do not match\n   * `excludePdpFactoryIds` will be included\n   */\n  includePdpFactoryIds?: undefined | string | string[];\n  /**\n   * String representation of `RegExp` pattern(s) to match against the Project Data Provider Factory\n   * Ids that provided each project's metadata (using the\n   * [`test`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)\n   * function) to determine if the projects should absolutely not be included even if they match\n   * with `includeProjectInterfaces`.\n   *\n   * Defaults to none, so all projects that match `includePdpFactoryIds` will be included\n   */\n  excludePdpFactoryIds?: undefined | string | string[];\n}\n\n/** The data an extension provides to inform Platform.Bible of the user state it provides */\nexport interface UserStateContribution {\n  [k: ReferencedItem]: UserState;\n}\n/** The data an extension provides to inform Platform.Bible of the project state it provides */\nexport interface ProjectStateContribution {\n  [k: ReferencedItem]: UserState;\n}\n\n//----------------------------------------------------------------------------------------------\n// NOTE: If you change the schema below, make sure the TS types above get changed so they align.\n//----------------------------------------------------------------------------------------------\nconst settingsDefs = {\n  projectSettingsContribution: {\n    description:\n      'The data an extension provides to inform Platform.Bible of the project settings it provides',\n    anyOf: [\n      {\n        $ref: '#/$defs/projectSettingsGroup',\n      },\n      {\n        type: 'array',\n        items: {\n          $ref: '#/$defs/projectSettingsGroup',\n        },\n      },\n    ],\n  },\n  projectSettingsGroup: {\n    description: 'Group of related settings definitions',\n    type: 'object',\n    properties: {\n      label: {\n        description: 'localizeKey that displays in the project settings dialog as the group name',\n        $ref: '#/$defs/localizeKey',\n      },\n      description: {\n        description:\n          'localizeKey that displays in the project settings dialog to describe the group',\n        $ref: '#/$defs/localizeKey',\n      },\n      properties: {\n        $ref: '#/$defs/projectSettingProperties',\n      },\n    },\n    required: ['label', 'properties'],\n  },\n  projectSettingProperties: {\n    description: 'Object whose keys are setting IDs and whose values are settings objects',\n    type: 'object',\n    patternProperties: {\n      '^[\\\\w\\\\-]+\\\\.[\\\\w\\\\-]+$': {\n        $ref: '#/$defs/projectSetting',\n      },\n    },\n    additionalProperties: false,\n  },\n  projectSetting: {\n    description: \"A description of an extension's setting entry\",\n    anyOf: [\n      {\n        $ref: '#/$defs/extensionControlledProjectSetting',\n      },\n    ],\n  },\n  extensionControlledProjectSetting: {\n    description: 'Setting definition that is validated by the extension.',\n    allOf: [\n      {\n        $ref: '#/$defs/projectSettingBase',\n      },\n      {\n        $ref: '#/$defs/modifierExtensionControlled',\n      },\n    ],\n  },\n  projectSettingBase: {\n    description: 'Base information needed to describe a project setting entry',\n    allOf: [\n      {\n        $ref: '#/$defs/settingBase',\n      },\n      {\n        $ref: '#/$defs/modifierProject',\n      },\n    ],\n  },\n  modifierProject: {\n    description: 'Modifies setting type to be project setting',\n    type: 'object',\n    properties: {\n      includeProjectInterfaces: {\n        description:\n          \"String representation of `RegExp` pattern(s) to match against projects' `projectInterface`s (using the [`test`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test) function) to determine if they should be included.\\n\\nIf this is one string, it will be matched against `projectInterface`s. If this is an array, each entry is handled based on its type (at least one entry must match for this filter condition to pass):\\n\\n- If the entry is a string, it will be matched against each `projectInterface`. If any match, the project will pass this filter condition\\n- If the entry is an array of strings, each will be matched against each `projectInterface`. If every string matches against at least one `projectInterface`, the project will pass this filter condition\\n\\nIn other words, each entry in the first-level array is `OR`'ed together. Each entry in second-level arrays (arrays within the first-level array) are `AND`'ed together.\\n\\nDefaults to all {@link ProjectInterfaces}, so all projects that do not match `excludeProjectInterfaces` will be included\\n\\n@example\\n\\n```typescript\\nincludeProjectInterfaces: ['one', ['two', 'three']];\\n```\\n\\nThis filter condition will succeed on projects whose `projectInterface`s fulfill at least one of the following conditions (At least one entry in the array must match):\\n\\n- Include `one`\\n- Include both `two` and `three`.\",\n        anyOf: [\n          {\n            type: 'null',\n          },\n          {\n            type: 'string',\n          },\n          {\n            type: 'array',\n            items: {\n              anyOf: [\n                {\n                  type: 'string',\n                },\n                {\n                  type: 'array',\n                  items: { type: 'string' },\n                },\n              ],\n            },\n          },\n        ],\n      },\n      excludeProjectInterfaces: {\n        description:\n          \"String representation of `RegExp` pattern(s) to match against projects' `projectInterface`s (using the [`test`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test) function) to determine if they should absolutely not be included even if they match with `includeProjectInterfaces`.\\n\\nIf this is one string, it will be matched against `projectInterface`s. If this is an array, each entry is handled based on its type (at least one entry must match for this filter condition to exclude the project):\\n\\n- If the entry is a string, it will be matched against each `projectInterface`. If any match, the project will pass this filter condition and exclude the project\\n- If the entry is an array of strings, each will be matched against each `projectInterface`. If every string matches against at least one `projectInterface`, the project will pass this filter condition and exclude the project\\n\\nIn other words, each entry in the first-level array is `OR`'ed together. Each entry in second-level arrays (arrays within the first-level array) are `AND`'ed together.\\n\\nDefaults to no {@link ProjectInterfaces}, so all projects that match `includeProjectInterfaces` will be included\\n\\n@example\\n\\n```typescript\\nexcludeProjectInterfaces: ['one', ['two', 'three']];\\n```\\n\\nThis filter condition will succeed and exclude projects whose `projectInterface`s fulfill at least one of the following conditions (At least one entry in the array must match):\\n\\n- Include `one`\\n- Include both `two` and `three`.\",\n        anyOf: [\n          {\n            type: 'null',\n          },\n          {\n            type: 'string',\n          },\n          {\n            type: 'array',\n            items: {\n              anyOf: [\n                {\n                  type: 'string',\n                },\n                {\n                  type: 'array',\n                  items: { type: 'string' },\n                },\n              ],\n            },\n          },\n        ],\n      },\n      includePdpFactoryIds: {\n        description:\n          \"String representation of `RegExp` pattern(s) to match against the Project Data Provider Factory Ids that provided each project's metadata (using the [`test`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test) function) to determine if the projects should be included.\\n\\nDefaults to all Project Data Provider Factory Ids, so all projects that do not match `excludePdpFactoryIds` will be included\",\n        anyOf: [\n          {\n            type: 'null',\n          },\n          {\n            type: 'string',\n          },\n          {\n            type: 'array',\n            items: { type: 'string' },\n          },\n        ],\n      },\n      excludePdpFactoryIds: {\n        description:\n          \"String representation of `RegExp` pattern(s) to match against the Project Data Provider Factory Ids that provided each project's metadata (using the [`test`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test) function) to determine if the projects should absolutely not be included even if they match with `includeProjectInterfaces`.\\n\\nDefaults to none, so all projects that match `includePdpFactoryIds` will be included\",\n        anyOf: [\n          {\n            type: 'null',\n          },\n          {\n            type: 'string',\n          },\n          {\n            type: 'array',\n            items: { type: 'string' },\n          },\n        ],\n      },\n    },\n  },\n  settingsContribution: {\n    description:\n      'The data an extension provides to inform Platform.Bible of the settings it provides',\n    anyOf: [\n      {\n        $ref: '#/$defs/settingsGroup',\n      },\n      {\n        type: 'array',\n        items: {\n          $ref: '#/$defs/settingsGroup',\n        },\n      },\n    ],\n  },\n  settingsGroup: {\n    description: 'Group of related settings definitions',\n    type: 'object',\n    properties: {\n      label: {\n        description: 'localizeKey that displays in the settings dialog as the group name',\n        $ref: '#/$defs/localizeKey',\n      },\n      description: {\n        description: 'localizeKey that displays in the settings dialog to describe the group',\n        $ref: '#/$defs/localizeKey',\n      },\n      properties: {\n        $ref: '#/$defs/settingProperties',\n      },\n    },\n    required: ['label', 'properties'],\n  },\n  settingProperties: {\n    description: 'Object whose keys are setting IDs and whose values are settings objects',\n    type: 'object',\n    patternProperties: {\n      '^[\\\\w-]+\\\\.[\\\\w-]+$': {\n        $ref: '#/$defs/setting',\n      },\n    },\n    additionalProperties: false,\n  },\n  setting: {\n    description: \"A description of an extension's setting entry\",\n    anyOf: [\n      {\n        $ref: '#/$defs/extensionControlledSetting',\n      },\n    ],\n  },\n  extensionControlledSetting: {\n    description: 'Setting definition that is validated by the extension.',\n    allOf: [\n      {\n        $ref: '#/$defs/settingBase',\n      },\n      {\n        $ref: '#/$defs/modifierExtensionControlled',\n      },\n    ],\n  },\n  settingBase: {\n    description: 'Base information needed to describe a setting entry',\n    allOf: [\n      {\n        $ref: '#/$defs/stateBase',\n      },\n      {\n        type: 'object',\n        properties: {\n          label: {\n            description: 'localizeKey that displays in the settings dialog as the setting name',\n            $ref: '#/$defs/localizeKey',\n          },\n          description: {\n            description: 'localizeKey that displays in the settings dialog to describe the setting',\n            $ref: '#/$defs/localizeKey',\n          },\n        },\n        required: ['label'],\n      },\n    ],\n  },\n  projectStateContribution: {\n    description:\n      'The data an extension provides to inform Platform.Bible of the project state it provides',\n    $ref: '#/$defs/userStateProperties',\n  },\n  userStateContribution: {\n    description:\n      'The data an extension provides to inform Platform.Bible of the user state it provides',\n    $ref: '#/$defs/userStateProperties',\n  },\n  userStateProperties: {\n    description: 'Object whose keys are state IDs and whose values are state objects',\n    type: 'object',\n    patternProperties: {\n      '^[\\\\w\\\\-]+\\\\.[\\\\w\\\\-]+$': {\n        $ref: '#/$defs/userState',\n      },\n    },\n    additionalProperties: false,\n  },\n  userState: {\n    description: \"A description of an extension's user state entry\",\n    anyOf: [\n      {\n        $ref: '#/$defs/extensionControlledState',\n      },\n    ],\n  },\n  extensionControlledState: {\n    description: 'State definition that is validated by the extension.',\n    allOf: [\n      {\n        $ref: '#/$defs/stateBase',\n      },\n      {\n        $ref: '#/$defs/modifierExtensionControlled',\n      },\n    ],\n  },\n  modifierExtensionControlled: {\n    description:\n      'Modifies state/setting type to be extension-controlled. \"Extension-controlled\" means the extension provides the component and the validator for the state/setting, so the state/setting is controlled by the extension.',\n    not: {\n      anyOf: [\n        {\n          type: 'object',\n          required: ['platformType'],\n        },\n        {\n          type: 'object',\n          required: ['type'],\n        },\n      ],\n    },\n  },\n  stateBase: {\n    description: 'Base information needed to describe a state entry',\n    type: 'object',\n    properties: {\n      default: {\n        description: 'default value for the state/setting',\n        type: 'any',\n      },\n      derivesFrom: {\n        description:\n          \"a state/setting ID whose value to set to this state/setting's starting value the first time this state/setting is loaded\",\n        $ref: '#/$defs/id',\n      },\n    },\n    required: ['default'],\n  },\n  localizeKey: {\n    description: \"Identifier for a string that will be localized based on the user's UI language\",\n    type: 'string',\n    pattern: '^%[\\\\w\\\\-\\\\.]+%$',\n    tsType: 'LocalizeKey',\n  },\n  id: {\n    description: '',\n    type: 'string',\n    pattern: '^[\\\\w\\\\-]+\\\\.[\\\\w\\\\-]+$',\n    tsType: 'Id',\n  },\n};\n\n/**\n * Json-schema-to-typescript has some added stuff that isn't actually compatible with JSON schema,\n * so we remove them here\n *\n * @param defs The `$defs` property of a JSON schema (will be modified in place)\n */\n// JSON schema types are weird, so we'll just be careful\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function removeJsonToTypeScriptTypesStuff(defs: any) {\n  if (!defs) return;\n\n  // JSON schema types are weird, so we'll just be careful\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Object.values(defs).forEach((def: any) => {\n    if (!def.type) return;\n\n    if ('tsType' in def) delete def.tsType;\n\n    if (def.type === 'any') {\n      delete def.type;\n      return;\n    }\n\n    if (def.type === 'object') {\n      removeJsonToTypeScriptTypesStuff(def.properties);\n    }\n  });\n}\n\nremoveJsonToTypeScriptTypesStuff(settingsDefs);\n\n/** JSON schema object that aligns with the ProjectSettingsContribution type */\nexport const projectSettingsDocumentSchema = {\n  $schema: 'https://json-schema.org/draft/2020-12/schema',\n  title: 'Project Settings Contribution',\n  description:\n    'The data an extension provides to inform Platform.Bible of the project settings it provides',\n  anyOf: [\n    {\n      $ref: '#/$defs/projectSettingsGroup',\n    },\n    {\n      type: 'array',\n      items: {\n        $ref: '#/$defs/projectSettingsGroup',\n      },\n    },\n  ],\n\n  $defs: settingsDefs,\n};\n\nObject.freeze(projectSettingsDocumentSchema);\n\n/** JSON schema object that aligns with the {@link SettingsContribution} type */\nexport const settingsDocumentSchema = {\n  $schema: 'https://json-schema.org/draft/2020-12/schema',\n  title: 'Settings Contribution',\n  description:\n    'The data an extension provides to inform Platform.Bible of the settings it provides',\n  anyOf: [\n    {\n      $ref: '#/$defs/settingsGroup',\n    },\n    {\n      type: 'array',\n      items: {\n        $ref: '#/$defs/settingsGroup',\n      },\n    },\n  ],\n\n  $defs: settingsDefs,\n};\n\nObject.freeze(settingsDocumentSchema);\n","//----------------------------------------------------------------------------------------------\n// NOTE: If you change any of the types, make sure the JSON schema at the end of this file gets\n// changed so they align.\n//----------------------------------------------------------------------------------------------\n\nimport { LocalizeKey } from 'menus.model';\nimport { removeJsonToTypeScriptTypesStuff } from './settings.model';\n\n/** Localized string value associated with this key */\nexport type LocalizedStringValue = string;\n\n/** The data an extension provides to inform Platform.Bible of the localized strings it provides. */\nexport interface LocalizedStringDataContribution {\n  [k: string]: unknown;\n  metadata?: StringsMetadata;\n  localizedStrings?: {\n    [k: string]: LanguageStrings;\n  };\n}\n/**\n * Map whose keys are localized string keys and whose values provide additional non-locale-specific\n * information about the localized string key\n */\nexport interface StringsMetadata {\n  [k: LocalizeKey]: StringMetadata;\n}\n/** Additional non-locale-specific information about a localized string key */\nexport interface StringMetadata {\n  [k: string]: unknown;\n  /**\n   * Localized string key from which to get this value if one does not exist in the specified\n   * language. If a new key/value pair needs to be made to replace an existing one, this could help\n   * smooth over the transition if the meanings are close enough\n   *\n   * You can use Paratext 9 Localized String Keys here. Be sure to escape any % signs with a\n   * backslash `\\`.\n   */\n  fallbackKey?: LocalizeKey;\n  /**\n   * Additional information provided by developers in English to help the translator to know how to\n   * translate this localized string accurately\n   */\n  notes?: string;\n}\n/**\n * Map whose keys are localized string keys and whose values provide information about how to\n * localize strings for the localized string key\n */\nexport interface LanguageStrings {\n  [k: LocalizeKey]: LocalizedStringValue;\n}\n\n//----------------------------------------------------------------------------------------------\n// NOTE: If you change the schema below, make sure the TS types above get changed so they align.\n//----------------------------------------------------------------------------------------------\n\nconst localizedStringsDefs = {\n  languageStrings: {\n    description:\n      'Map whose keys are localized string keys and whose values provide information about how to localize strings for the localized string key',\n    type: 'object',\n    patternProperties: {\n      '^%[\\\\w\\\\-\\\\.]+%$': {\n        $ref: '#/$defs/localizedStringValue',\n      },\n    },\n    additionalProperties: false,\n  },\n  localizedStringValue: {\n    description: 'Localized string value associated with this key',\n    type: 'string',\n  },\n  stringsMetadata: {\n    description:\n      'Map whose keys are localized string keys and whose values provide additional non-locale-specific information about the localized string key',\n    type: 'object',\n    patternProperties: {\n      '^%[\\\\w\\\\-\\\\.]+%$': {\n        $ref: '#/$defs/stringMetadata',\n      },\n    },\n    additionalProperties: false,\n  },\n  stringMetadata: {\n    description: 'Additional non-locale-specific information about a localized string key',\n    type: 'object',\n    properties: {\n      fallbackKey: {\n        description:\n          'Localized string key from which to get this value if one does not exist in the specified language. If a new key/value pair needs to be made to replace an existing one, this could help smooth over the transition if the meanings are close enough.\\nYou can use Paratext 9 Localized String Keys here. Be sure to escape any % signs with a backslash `\\\\`.',\n        type: 'string',\n        pattern: \"^%[\\\\w\\\\-\\\\.;&,' (){}#:/\\\\\\\\?%|[\\\\]!~*\\u00A0+=`\\u200B]+%$\",\n        tsType: 'LocalizeKey',\n      },\n      notes: {\n        description:\n          'Additional information provided by developers in English to help the translator to know how to translate this localized string accurately',\n        type: 'string',\n      },\n    },\n  },\n  localizeKey: {\n    description: \"Identifier for a string that will be localized based on the user's UI language\",\n    type: 'string',\n    pattern: '^%[\\\\w\\\\-\\\\.]+%$',\n    tsType: 'LocalizeKey',\n  },\n};\n\nremoveJsonToTypeScriptTypesStuff(localizedStringsDefs);\n\n/** JSON schema object that aligns with the LocalizedStringDataContribution type */\nexport const localizedStringsDocumentSchema = {\n  $schema: 'https://json-schema.org/draft/2020-12/schema',\n  title: 'Localized String Data Contribution',\n  description:\n    'The data an extension provides to inform Platform.Bible of the localized strings it provides.',\n  type: 'object',\n  properties: {\n    metadata: {\n      $ref: '#/$defs/stringsMetadata',\n    },\n    localizedStrings: {\n      type: 'object',\n      additionalProperties: {\n        $ref: '#/$defs/languageStrings',\n      },\n    },\n  },\n  $defs: localizedStringsDefs,\n};\n\nObject.freeze(localizedStringsDocumentSchema);\n","//----------------------------------------------------------------------------------------------\n// NOTE: If you change any of the types, make sure the JSON schema at the end of this file gets\n// changed so they align.\n//----------------------------------------------------------------------------------------------\n\nimport { ReplaceType } from './util';\n\n/** Identifier for a string that will be localized in a menu based on the user's UI language */\nexport type LocalizeKey = `%${string}%`;\n\n/** Name of some UI element (i.e., tab, column, group, menu item) or some PAPI object (i.e., command) */\nexport type ReferencedItem = `${string}.${string}`;\n\n/**\n * A group of ReferencedItems specific to the predefined menus in the MacOS menu bar. If they set\n * their macosMenuKey to 'macosMenubar.ignore', the item will not be added to the MacOS menubar.\n */\nexport type MacosMenuKey =\n  | 'macosMenubar.appMenu'\n  | 'macosMenubar.fileMenu'\n  | 'macosMenubar.editMenu'\n  | 'macosMenubar.viewMenu'\n  | 'macosMenubar.tabMenu'\n  | 'macosMenubar.textMenu'\n  | 'macosMenubar.layoutMenu'\n  | 'macosMenubar.windowMenu'\n  | 'macosMenubar.helpMenu'\n  | 'macosMenubar.ignore';\n\nexport type OrderedItem = {\n  /** Relative order of this item compared to other items in the same parent/scope (sorted ascending) */\n  order: number;\n};\n\nexport type OrderedExtensibleContainer = OrderedItem & {\n  /** Determines whether other items can be added to this after it has been defined */\n  isExtensible?: boolean;\n};\n\n/** Group of menu items that belongs in a column */\nexport type MenuGroupDetailsInColumn = OrderedExtensibleContainer & {\n  /** ID of column in which this group resides */\n  column: ReferencedItem;\n};\n\n/** Group of menu items that belongs in a submenu */\nexport type MenuGroupDetailsInSubMenu = OrderedExtensibleContainer & {\n  /** ID of menu item hosting the submenu in which this group resides */\n  menuItem: ReferencedItem;\n};\n\n/** Column that includes header text in a menu */\nexport type MenuColumnWithHeader = OrderedExtensibleContainer & {\n  /** Key that represents the text of the header text of the column */\n  label: LocalizeKey;\n};\n\nexport type MenuItemBase = OrderedItem & {\n  /** Menu group to which this menu item belongs */\n  group: ReferencedItem;\n  /** Key that represents the text of this menu item to display */\n  label: LocalizeKey;\n  /** Key that represents words the platform should reference when users are searching for menu items */\n  searchTerms?: LocalizeKey;\n  /** Key that represents the text to display if a mouse pointer hovers over the menu item */\n  tooltip?: LocalizeKey;\n  /** Additional information provided by developers to help people who perform localization */\n  localizeNotes: string;\n  /** Key of the menu in the MacOS menu bar to add this item to */\n  macosMenuKey?: MacosMenuKey;\n};\n\n/** Menu item that hosts a submenu */\nexport type MenuItemContainingSubmenu = MenuItemBase & {\n  /** ID for this menu item that holds a submenu */\n  id: ReferencedItem;\n};\n\n/** Menu item that runs a command */\nexport type MenuItemContainingCommand = MenuItemBase & {\n  /** Name of the PAPI command to run when this menu item is selected. */\n  command: ReferencedItem;\n  /**\n   * Uri path to the icon to display after the menu text. Ex:\n   * `papi-extension://helloWorld/assets/icon.png`\n   */\n  iconPathAfter?: string;\n  /**\n   * Uri path to the icon to display before the menu text. Ex:\n   * `papi-extension://helloWorld/assets/icon.png`\n   */\n  iconPathBefore?: string;\n};\n\n/**\n * Group of menu items that can be combined with other groups to form a single context menu/submenu.\n * Groups are separated using a line within the menu/submenu.\n */\nexport type GroupsInSingleColumnMenu = {\n  /** Named menu group */\n  [property: ReferencedItem]: OrderedExtensibleContainer | MenuGroupDetailsInSubMenu;\n};\n\n/**\n * Group of menu items that can be combined with other groups to form a single menu/submenu within a\n * multi-column menu. Groups are separated using a line within the menu/submenu.\n */\nexport type GroupsInMultiColumnMenu = {\n  /** Named menu group */\n  [property: ReferencedItem]: MenuGroupDetailsInColumn | MenuGroupDetailsInSubMenu;\n};\n\n/** Group of columns that can be combined with other columns to form a multi-column menu */\nexport type ColumnsWithHeaders = {\n  /** Named column of a menu */\n  [property: ReferencedItem]: MenuColumnWithHeader;\n  /** Defines whether columns can be added to this multi-column menu */\n  isExtensible?: boolean;\n};\n\n/** Menu that contains a column without a header */\nexport type SingleColumnMenu = {\n  /** Groups that belong in this menu */\n  groups: GroupsInSingleColumnMenu;\n  /** List of menu items that belong in this menu */\n  items: (MenuItemContainingCommand | MenuItemContainingSubmenu)[];\n};\n\n/** Menu that contains multiple columns with headers */\nexport type MultiColumnMenu = {\n  /** Columns that belong in this menu */\n  columns: ColumnsWithHeaders;\n  /** Groups that belong in this menu */\n  groups: GroupsInMultiColumnMenu;\n  /** List of menu items that belong in this menu */\n  items: (MenuItemContainingCommand | MenuItemContainingSubmenu)[];\n};\n\n/** Menus for one single web view */\nexport type WebViewMenu = {\n  /** Indicates whether the platform default menus should be included for this webview */\n  includeDefaults: boolean | undefined;\n  /** Menu that opens when you click on the top left corner of a tab */\n  topMenu: MultiColumnMenu | undefined;\n  /** Menu that opens when you right click on the main body/area of a tab */\n  contextMenu: SingleColumnMenu | undefined;\n};\n\n/** Menus for all web views */\nexport type WebViewMenus = {\n  /** Named web view */\n  [property: ReferencedItem]: WebViewMenu;\n};\n\n/** Platform.Bible menus before they are localized */\nexport type PlatformMenus = {\n  /** Top level menu for the application */\n  mainMenu: MultiColumnMenu;\n  /** Menus that apply per web view in the application */\n  webViewMenus: WebViewMenus;\n  /** Default context menu for web views that don't specify their own */\n  defaultWebViewContextMenu: SingleColumnMenu;\n  /** Default top menu for web views that don't specify their own */\n  defaultWebViewTopMenu: MultiColumnMenu;\n};\n\n/**\n * Type that converts any menu type before it is localized to what it is after it is localized. This\n * can be applied to any menu type as needed.\n */\nexport type Localized<T> = ReplaceType<ReplaceType<T, LocalizeKey, string>, ReferencedItem, string>;\n\n//----------------------------------------------------------------------------------------------\n// NOTE: If you change the schema below, make sure the TS types above get changed so they align.\n//----------------------------------------------------------------------------------------------\n/** JSON schema object that aligns with the PlatformMenus type */\nexport const menuDocumentSchema = {\n  title: 'Platform.Bible menus',\n  type: 'object',\n  properties: {\n    mainMenu: {\n      description: 'Top level menu for the application',\n      $ref: '#/$defs/multiColumnMenu',\n    },\n    defaultWebViewTopMenu: {\n      description: \"Default top menu for web views that don't specify their own\",\n      $ref: '#/$defs/multiColumnMenu',\n    },\n    defaultWebViewContextMenu: {\n      description: \"Default context menu for web views that don't specify their own\",\n      $ref: '#/$defs/singleColumnMenu',\n    },\n    webViewMenus: {\n      description: 'Menus that apply per web view in the application',\n      type: 'object',\n      patternProperties: {\n        '^[\\\\w\\\\-]+\\\\.[\\\\w\\\\-]+$': {\n          $ref: '#/$defs/menusForOneWebView',\n        },\n      },\n      additionalProperties: false,\n    },\n  },\n  required: ['mainMenu', 'defaultWebViewTopMenu', 'defaultWebViewContextMenu', 'webViewMenus'],\n  additionalProperties: false,\n  $defs: {\n    localizeKey: {\n      description:\n        \"Identifier for a string that will be localized in a menu based on the user's UI language\",\n      type: 'string',\n      pattern: '^%[\\\\w\\\\-\\\\.]+%$',\n    },\n    referencedItem: {\n      description:\n        'Name of some UI element (i.e., tab, column, group, menu item) or some PAPI object (i.e., command)',\n      type: 'string',\n      pattern: '^[\\\\w\\\\-]+\\\\.[\\\\w\\\\-]+$',\n    },\n    macosMenuKey: {\n      description: 'A group of ReferencedItems specific to the predefined menus in the MacOS menu bar.',\n      type: 'string',\n      pattern: '^(macosMenubar)\\\\.(appMenu|fileMenu|editMenu|viewMenu|tabMenu|textMenu|layoutMenu|windowMenu|helpMenu|ignore)$',\n    },\n    columnsWithHeaders: {\n      description:\n        'Group of columns that can be combined with other columns to form a multi-column menu',\n      type: 'object',\n      patternProperties: {\n        '^[\\\\w\\\\-]+\\\\.[\\\\w\\\\-]+$': {\n          description: 'Single column with a header string',\n          type: 'object',\n          properties: {\n            label: {\n              description: 'Header text for this this column in the UI',\n              $ref: '#/$defs/localizeKey',\n            },\n            localizeNotes: {\n              description:\n                'Additional information provided by developers to help people who perform localization',\n              type: 'string',\n            },\n            order: {\n              description:\n                'Relative order of this column compared to other columns (sorted ascending)',\n              type: 'number',\n            },\n            isExtensible: {\n              description:\n                'Defines whether contributions are allowed to add menu groups to this column',\n              type: 'boolean',\n            },\n          },\n          required: ['label', 'order'],\n          additionalProperties: false,\n        },\n      },\n      properties: {\n        isExtensible: {\n          description:\n            'Defines whether contributions are allowed to add columns to this multi-column menu',\n          type: 'boolean',\n        },\n      },\n    },\n    menuGroups: {\n      description:\n        'Group of menu items that can be combined with other groups to form a single menu/submenu. Groups are separated using a line within the menu/submenu.',\n      type: 'object',\n      patternProperties: {\n        '^[\\\\w\\\\-]+\\\\.[\\\\w\\\\-]+$': {\n          description: 'Single group that contains menu items',\n          type: 'object',\n          oneOf: [\n            {\n              properties: {\n                column: {\n                  description:\n                    'Column where this group belongs, not required for single column menus',\n                  $ref: '#/$defs/referencedItem',\n                },\n                order: {\n                  description:\n                    'Relative order of this group compared to other groups in the same column or submenu (sorted ascending)',\n                  type: 'number',\n                },\n                isExtensible: {\n                  description:\n                    'Defines whether contributions are allowed to add menu items to this menu group',\n                  type: 'boolean',\n                },\n              },\n              required: ['order'],\n              additionalProperties: false,\n            },\n            {\n              properties: {\n                menuItem: {\n                  description: 'Menu item that anchors the submenu where this group belongs',\n                  $ref: '#/$defs/referencedItem',\n                },\n                order: {\n                  description:\n                    'Relative order of this group compared to other groups in the same column or submenu (sorted ascending)',\n                  type: 'number',\n                },\n                isExtensible: {\n                  description:\n                    'Defines whether contributions are allowed to add menu items to this menu group',\n                  type: 'boolean',\n                },\n              },\n              required: ['menuItem', 'order'],\n              additionalProperties: false,\n            },\n          ],\n        },\n      },\n      additionalProperties: false,\n    },\n    menuItem: {\n      description:\n        'Single item in a menu that can be clicked on to take an action or can be the parent of a submenu',\n      type: 'object',\n      oneOf: [\n        {\n          properties: {\n            id: {\n              description: 'ID for this menu item that holds a submenu',\n              $ref: '#/$defs/referencedItem',\n            },\n          },\n          required: ['id'],\n        },\n        {\n          properties: {\n            command: {\n              description: 'Name of the PAPI command to run when this menu item is selected.',\n              $ref: '#/$defs/referencedItem',\n            },\n            iconPathBefore: {\n              description:\n                'Uri path to the icon to display before the menu text. Ex: `papi-extension://helloWorld/assets/icon.png`',\n              type: 'string',\n            },\n            iconPathAfter: {\n              description:\n                'Uri path to the icon to display after the menu text. Ex: `papi-extension://helloWorld/assets/icon.png`',\n              type: 'string',\n            },\n          },\n          required: ['command'],\n        },\n      ],\n      properties: {\n        label: {\n          description: 'Key that represents the text of this menu item to display',\n          $ref: '#/$defs/localizeKey',\n        },\n        tooltip: {\n          description:\n            'Key that represents the text to display if a mouse pointer hovers over the menu item',\n          $ref: '#/$defs/localizeKey',\n        },\n        searchTerms: {\n          description:\n            'Key that represents additional words the platform should reference when users are searching for menu items',\n          $ref: '#/$defs/localizeKey',\n        },\n        localizeNotes: {\n          description:\n            'Additional information provided by developers to help people who perform localization',\n          type: 'string',\n        },\n        group: {\n          description: 'Group to which this menu item belongs',\n          $ref: '#/$defs/referencedItem',\n        },\n        order: {\n          description:\n            'Relative order of this menu item compared to other menu items in the same group (sorted ascending)',\n          type: 'number',\n        },\n        macosMenuKey: {\n          description: 'Key of the menu in the MacOS menu bar to add this item to',\n          $ref: '#/$defs/macosMenuKey',\n        },\n      },\n      required: ['label', 'group', 'order'],\n      unevaluatedProperties: false,\n    },\n    groupsAndItems: {\n      description: 'Core schema for a column',\n      type: 'object',\n      properties: {\n        groups: {\n          description: 'Groups that belong in this menu',\n          $ref: '#/$defs/menuGroups',\n        },\n        items: {\n          description: 'List of menu items that belong in this menu',\n          type: 'array',\n          items: { $ref: '#/$defs/menuItem' },\n          uniqueItems: true,\n        },\n      },\n      required: ['groups', 'items'],\n    },\n    singleColumnMenu: {\n      description: 'Menu that contains a column without a header',\n      type: 'object',\n      allOf: [{ $ref: '#/$defs/groupsAndItems' }],\n      unevaluatedProperties: false,\n    },\n    multiColumnMenu: {\n      description: 'Menu that can contain multiple columns with headers',\n      type: 'object',\n      allOf: [\n        { $ref: '#/$defs/groupsAndItems' },\n        {\n          properties: {\n            columns: {\n              description: 'Columns that belong in this menu',\n              $ref: '#/$defs/columnsWithHeaders',\n            },\n          },\n          required: ['columns'],\n        },\n      ],\n      unevaluatedProperties: false,\n    },\n    menusForOneWebView: {\n      description: 'Set of menus that are associated with a single tab',\n      type: 'object',\n      properties: {\n        includeDefaults: {\n          description:\n            'Indicates whether the platform default menus should be included for this webview',\n          type: 'boolean',\n        },\n        topMenu: {\n          description: 'Menu that opens when you click on the top left corner of a tab',\n          $ref: '#/$defs/multiColumnMenu',\n        },\n        contextMenu: {\n          description: 'Menu that opens when you right click on the main body/area of a tab',\n          $ref: '#/$defs/singleColumnMenu',\n        },\n      },\n      additionalProperties: false,\n    },\n  },\n};\n\nObject.freeze(menuDocumentSchema);\n","// This was disabled so class functions that are similar in purpose can be grouped together\n/* eslint-disable @typescript-eslint/member-ordering */\nimport {\n  USJ_TYPE,\n  type MarkerContent,\n  type MarkerObject,\n  type Usj,\n} from '@biblionexus-foundation/scripture-utilities';\nimport { VerseRef } from '@sillsdev/scripture';\nimport { JSONPath } from 'jsonpath-plus';\nimport {\n  CHAPTER_TYPE,\n  ContentJsonPath,\n  IUsjReaderWriter,\n  UsjContentLocation,\n  VERSE_TYPE,\n  VerseRefOffset,\n} from './usj-reader-writer.model';\n\nconst NODE_TYPES_NOT_CONTAINING_VERSE_TEXT = ['figure', 'note', 'sidebar', 'table'];\nObject.freeze(NODE_TYPES_NOT_CONTAINING_VERSE_TEXT);\n\n/** Map of USJ content arrays and objects inside content arrays to the content array owner */\ntype UsjParentMap = Map<MarkerObject | MarkerContent[], MarkerObject | Usj>;\n\n/**\n * Represents information about where a USJ node resides in the `content` array of its parent.\n * `parent` is a reference to the node's parent, and `index` represents the numeric index inside of\n * `parent`'s content array.\n */\ntype StackItem = { parent: MarkerObject | Usj; index: number };\n\n/**\n * Stack of levels inside a USJ tree relative to a specific node. The top of the stack should always\n * be the root Usj object.\n */\ntype WorkingStack = StackItem[];\n\n/**\n * Chapter and verse numbers along with the node within a USJ object that represents the start of\n * that chapter + verse\n */\ntype ChapterVerseNode = {\n  chapterNum: number | undefined;\n  verseNum: number | undefined;\n  /**\n   * All text following this node belongs to the given chapter and verse until another chapter or\n   * verse node is found\n   */\n  startingContentNode: MarkerObject | undefined;\n};\n\n/** Represents USJ formatted scripture with helpful utilities for working with it */\nexport default class UsjReaderWriter implements IUsjReaderWriter {\n  private readonly usj: Usj;\n  private parentMapInternal: UsjParentMap | undefined;\n\n  constructor(usj: Usj) {\n    this.usj = usj;\n  }\n\n  // If new variables are created to speed up queries, they should be reset here\n  usjChanged(): void {\n    this.parentMapInternal = undefined;\n  }\n\n  // #region Directly using the JSONPath package to perform JSONPath query -> USJ node\n\n  findSingleValue<T>(jsonPathQuery: string): T | undefined {\n    const wrappedResults = JSONPath({ path: jsonPathQuery, json: this.usj, wrap: true });\n    if (wrappedResults === undefined || wrappedResults.length === 0) return undefined;\n    if (!Array.isArray(wrappedResults[0])) return wrappedResults[0];\n\n    // There is no way to tell the difference between a query that returns a single result that is an\n    // array and a query that returns multiple results wrapped in an array when `wrap` is false.\n    // However, if `wrap` is true then a single result that is an array will be a different array\n    // object than the array object within `usj`. So we need to run with `wrap` as true and false to\n    // get the original array object back for a query that returns a single array.\n    const unwrappedResults = JSONPath({ path: jsonPathQuery, json: this.usj, wrap: false });\n    if (unwrappedResults.length === 1 && Array.isArray(unwrappedResults[0]))\n      // I have no idea why eslint is mad about casting from `any` to `T`, but it doesn't like it\n      // eslint-disable-next-line no-type-assertion/no-type-assertion\n      return unwrappedResults[0] as T;\n    return unwrappedResults;\n  }\n\n  findParent<T>(jsonPathQuery: string): T | undefined {\n    // Note that \"resultType: 'parent'\" does not work for queries\n    // The \"jsonpath-plus\" package allows putting a carat at the end of a query to get a parent\n    return this.findSingleValue(`${jsonPathQuery}^`);\n  }\n\n  private findBookId(): string | undefined {\n    return this.findSingleValue('$.content[?(@.type==\"book\" && @.marker==\"id\")].code');\n  }\n\n  private findChapterNode(chapterNumber: number): MarkerObject | undefined {\n    const chapterQuery = `$..content[?(@.type==\"chapter\" && @.number==\"${chapterNumber}\")]`;\n    return this.findSingleValue(chapterQuery);\n  }\n\n  // #endregion\n\n  // #region Parent Maps\n\n  private static createParentMapInternal(\n    obj: MarkerObject,\n    parent: MarkerObject | Usj,\n    parentMap: UsjParentMap,\n  ): void {\n    parentMap.set(obj, parent);\n    // USJ queries may return pointers to content arrays, not just objects\n    if (obj.content) parentMap.set(obj.content, obj);\n    obj.content?.forEach((child) => {\n      if (typeof child === 'object') UsjReaderWriter.createParentMapInternal(child, obj, parentMap);\n    });\n  }\n\n  /** Viewing a Usj object as a tree, build a map to walk up the tree */\n  private createUsjParentMap(): UsjParentMap {\n    const parentMap = new Map<MarkerObject | MarkerContent[], MarkerObject | Usj>();\n    if (this.usj.content) parentMap.set(this.usj.content, this.usj);\n    this.usj.content.forEach((content) => {\n      if (typeof content === 'object')\n        UsjReaderWriter.createParentMapInternal(content, this.usj, parentMap);\n    });\n    return parentMap;\n  }\n\n  /** Create the parent map if it doesn't already exist and return it */\n  private get parentMap(): UsjParentMap {\n    if (this.parentMapInternal) return this.parentMapInternal;\n    this.parentMapInternal = this.createUsjParentMap();\n    return this.parentMapInternal;\n  }\n\n  // #endregion\n\n  // #region Working Stacks\n\n  /** Return the working stack applicable to the given node */\n  private createWorkingStack(node: MarkerObject): WorkingStack {\n    // Represents levels in the USJ node tree that are above the current node (i.e., ancestors)\n    // Levels in the tree are represented as a stack, so the last item in the stack is node's parent\n    const workingStack: WorkingStack = [];\n\n    // Grab a reference so we don't keep checking if it exists\n    const { parentMap } = this;\n\n    // `node` might be in the middle of the USJ tree, so build up the stack before walking the tree\n    let tempNode: MarkerObject | Usj = node;\n    let tempParent = parentMap.get(tempNode);\n    while (tempParent !== undefined) {\n      if (!tempParent.content)\n        throw new Error('Invalid parentMap: all parents should have content');\n\n      if (\n        // Referencing tempNode and tempParent is OK in the loop since 'let' is used instead of 'var'\n        // eslint-disable-next-line no-loop-func\n        !tempParent.content.find((tempChild, index) => {\n          if (tempChild !== tempNode) return false;\n          if (!tempParent) throw new Error('undefined \"tempParent\" should not be possible');\n          workingStack.unshift({ parent: tempParent, index });\n          return true;\n        })\n      )\n        throw new Error(`Unable to find correct parent node of ${JSON.stringify(tempNode)}`);\n\n      if (tempParent.type === USJ_TYPE) break;\n      tempNode = tempParent;\n      // TS doesn't understand that only Usj objects have type == USJ_TYPE\n      // eslint-disable-next-line no-type-assertion/no-type-assertion\n      tempParent = parentMap.get(tempParent as MarkerObject);\n    }\n\n    return workingStack;\n  }\n\n  private static convertWorkingStackToJsonPath(stack: WorkingStack): ContentJsonPath {\n    let jsonPath = '$';\n    stack.forEach((stackLevel) => {\n      jsonPath = `${jsonPath}.content[${stackLevel.index}]`;\n    });\n    // The JSONPath string construction above conforms to the ContentJsonPath type\n    // eslint-disable-next-line no-type-assertion/no-type-assertion\n    return jsonPath as ContentJsonPath;\n  }\n\n  private convertJsonPathToWorkingStack(jsonPath: ContentJsonPath): WorkingStack {\n    const retVal: WorkingStack = [];\n\n    const levels = jsonPath.match(/content\\[(\\d+)\\]/g);\n    if (!levels) throw new Error(`Malformed or unexpected jsonPath: ${jsonPath}`);\n\n    let onNode: Usj | MarkerObject = this.usj;\n\n    levels.forEach((level, onLevel) => {\n      const indexString = /(\\d+)/.exec(level);\n      if (!indexString) throw new Error(`Malformed or unexpected jsonPath: ${jsonPath}`);\n      const index = parseInt(indexString[0], 10);\n      retVal.push({ parent: onNode, index });\n      if (onLevel + 1 < levels.length) {\n        if (typeof onNode === 'string' || !onNode.content)\n          throw new Error(`jsonPath points to node without children: ${JSON.stringify(onNode)}`);\n        const nextNode = onNode.content[index];\n        if (typeof nextNode === 'string')\n          throw new Error(`jsonPath points to node without children: ${JSON.stringify(nextNode)}`);\n        onNode = nextNode;\n      }\n    });\n\n    return retVal;\n  }\n\n  // #endregion\n\n  // #region Walk the node tree\n\n  /**\n   * Given the starting point of a tree to consider (`node`), find the rightmost MarkerObject from\n   * the array of `content`. In the following example, this would be \"J\".\n   *\n   *         A        <- Consider \"A\" to be `node`\n   *     / / | \\ \\\n   *     B C D E F    <- Consider these to be MarkerObjects inside the `content` array owned by \"A\"\n   *     |  / \\  |\n   *     G H   I J    <- Consider these to be MarkerObjects inside their parents `content` arrays\n   *\n   * If \"F\" did not exist in this example, then \"E\" would be returned. If \"E\" and \"F\" didn't exist,\n   * then \"I\" would be returned.\n   *\n   * The general idea here is that we are looking for the MarkerObject in Usj that is immediately\n   * adjacent to whatever `node`'s next sibling is in `parent`'s `content` array.\n   */\n  private static findRightMostDescendantMarkerObject(\n    node: MarkerObject,\n    parent: MarkerObject | Usj,\n    skipTypes: string[] = [],\n  ): { node: MarkerObject; parent: MarkerObject | Usj } {\n    // There are no descendants, so this is as deep as it goes\n    if (!node.content) return { node, parent };\n\n    for (let index = node.content.length - 1; index >= 0; index--) {\n      const candidate = node.content[index];\n      if (typeof candidate === 'object' && !skipTypes.includes(candidate.type)) {\n        if (candidate.content)\n          return this.findRightMostDescendantMarkerObject(candidate, node, skipTypes);\n        return { node: candidate, parent: node };\n      }\n    }\n\n    // All descendants were strings which aren't MarkerObjects\n    return { node, parent };\n  }\n\n  private static findNextMatchingNodeUsingWorkingStack(\n    node: MarkerContent,\n    workingStack: WorkingStack,\n    skipTypes: string[],\n    searchFunction: (potentiallyMatchingNode: MarkerContent, workingStack: WorkingStack) => boolean,\n  ): MarkerContent | undefined {\n    // Walk the nodes in a depth-first, left-to-right manner until the search function returns true\n    let nextNode: MarkerContent | undefined = node;\n    while (nextNode !== undefined) {\n      const skipNextNode = typeof nextNode === 'object' && skipTypes.includes(nextNode.type);\n\n      // If we found the node we're looking for, we're done\n      if (!skipNextNode && searchFunction(nextNode, workingStack)) return nextNode;\n\n      // Look at the node's children\n      if (!skipNextNode && typeof nextNode === 'object' && (nextNode.content?.length ?? 0) > 0) {\n        workingStack.push({ parent: nextNode, index: 0 });\n        // Same as `nextNode = nextNode.content[0];` without triggering 2 different eslint errors\n        [nextNode] = nextNode.content;\n      }\n      // The node has no children, so look at the next sibling, or the parent's next sibling, etc. up the stack\n      else {\n        nextNode = undefined;\n        while (workingStack.length > 0) {\n          const nextLevel = workingStack.pop();\n          // We know that `content` exists due to its presence in this data structure\n          // eslint-disable-next-line no-type-assertion/no-type-assertion\n          if (nextLevel && nextLevel.index + 1 < nextLevel.parent.content!.length) {\n            nextLevel.index += 1;\n            workingStack.push(nextLevel);\n            // We know that `content` exists due to its presence in this data structure\n            // eslint-disable-next-line no-type-assertion/no-type-assertion\n            nextNode = nextLevel.parent.content![nextLevel.index];\n            break;\n          }\n        }\n      }\n    }\n\n    // We've looked everywhere, so there must not be an appropriate node anywhere\n    return undefined;\n  }\n\n  /**\n   * Walk through a USJ node tree depth-first, left-to-right to find the first node that matches\n   * criteria specified by `searchFunction` (i.e., the first node where `searchFunction` returns\n   * `true`)\n   */\n  private findNextMatchingNode(\n    node: MarkerObject,\n    skipTypes: string[],\n    searchFunction: (potentiallyMatchingNode: MarkerContent, workingStack: WorkingStack) => boolean,\n  ): MarkerContent | undefined {\n    // Represents levels in the USJ node tree that are above the current node (i.e., ancestors)\n    // Levels in the tree are represented as a stack, so the last item is the current node's parent\n    const workingStack = this.createWorkingStack(node);\n\n    return UsjReaderWriter.findNextMatchingNodeUsingWorkingStack(\n      node,\n      workingStack,\n      skipTypes,\n      searchFunction,\n    );\n  }\n\n  // #endregion\n\n  // #region Node -> JSONPath\n\n  nodeToJsonPath(node: MarkerObject): ContentJsonPath {\n    return UsjReaderWriter.convertWorkingStackToJsonPath(this.createWorkingStack(node));\n  }\n\n  // #endregion\n\n  // #region USJ + node -> VerseRef + offset\n\n  /** Find the chapter and verse that apply to a given USJ node */\n  private findVerseRefForNode(\n    node: MarkerContent,\n    nodeParent: MarkerObject | Usj,\n    retVal: ChapterVerseNode = {\n      chapterNum: undefined,\n      verseNum: undefined,\n      startingContentNode: undefined,\n    },\n  ): ChapterVerseNode {\n    // If we already have the data, we're done\n    if (retVal.verseNum !== undefined && retVal.chapterNum !== undefined) return retVal;\n\n    // See if this node gives us the data\n    if (typeof node === 'object' && node.number !== undefined) {\n      const nodeNumber = Number.parseInt(node.number, 10);\n      if (node.type === CHAPTER_TYPE) {\n        retVal.chapterNum = nodeNumber;\n        retVal.verseNum = retVal.verseNum ?? 0;\n        retVal.startingContentNode = retVal.startingContentNode ?? node;\n        return retVal;\n      }\n      if (node.type === VERSE_TYPE && !retVal.verseNum) {\n        retVal.verseNum = nodeNumber;\n        retVal.startingContentNode = node;\n      }\n    }\n\n    // Prepare to look for siblings of this node in the parent\n    if (!nodeParent.content)\n      throw new Error(`\"content\" array not found: ${JSON.stringify(nodeParent)}`);\n\n    // Find the position of this node in the parent's content\n    let nodeIndex = 0;\n    for (let index = 0; index < nodeParent.content.length; index++) {\n      if (nodeParent.content[index] === node) {\n        nodeIndex = index;\n        break;\n      }\n    }\n\n    // Find the first, previous sibling of this node that is an object\n    let previousNodeIndex = nodeIndex - 1;\n    while (previousNodeIndex >= 0 && typeof nodeParent.content[previousNodeIndex] !== 'object')\n      previousNodeIndex -= 1;\n\n    // There are no more siblings to inspect from this parent, so walk up a level\n    if (previousNodeIndex < 0) {\n      // We can't walk up a level if we're at the top level Usj node, so we're done\n      if (nodeParent.type === USJ_TYPE) {\n        if (retVal.chapterNum === undefined) {\n          retVal.chapterNum = 1;\n          retVal.verseNum = 0;\n          retVal.startingContentNode = undefined;\n        }\n        return retVal;\n      }\n\n      // TS doesn't understand that only Usj objects have type == USJ_TYPE\n      // eslint-disable-next-line no-type-assertion/no-type-assertion\n      const nodeParentMarkerObject = nodeParent as MarkerObject;\n\n      const grandparent = this.parentMap.get(nodeParentMarkerObject);\n      if (!grandparent) throw new Error(`No parent found for ${JSON.stringify(nodeParent)}`);\n      return this.findVerseRefForNode(nodeParentMarkerObject, grandparent, retVal);\n    }\n\n    // Walk down the sibling's children as far as we can\n    // This is a MarkerObject based on the while loop a few lines above\n    // eslint-disable-next-line no-type-assertion/no-type-assertion\n    const previousNode = nodeParent.content[previousNodeIndex] as MarkerObject;\n    const descendant = UsjReaderWriter.findRightMostDescendantMarkerObject(\n      previousNode,\n      nodeParent,\n      NODE_TYPES_NOT_CONTAINING_VERSE_TEXT,\n    );\n    return this.findVerseRefForNode(descendant.node, descendant.parent, retVal);\n  }\n\n  nodeToVerseRefAndOffset(\n    bookId: string,\n    node: MarkerContent,\n    nodeParent: MarkerObject | MarkerContent[] | undefined,\n  ): { verseRef: VerseRef; offset: number } | undefined {\n    if (typeof node === 'string' && nodeParent === undefined)\n      throw new Error(`If \"node\" is a string, then \"nodeParent\" cannot be undefined`);\n\n    let realParent: MarkerObject | Usj | undefined;\n    // \"node\" cannot be a string if \"nodeParent\" is undefined\n    // eslint-disable-next-line no-type-assertion/no-type-assertion\n    if (nodeParent === undefined) realParent = this.parentMap.get(node as MarkerObject);\n    else realParent = Array.isArray(nodeParent) ? this.parentMap.get(nodeParent) : nodeParent;\n    if (realParent === undefined)\n      throw new Error(`Cannot find parent for ${JSON.stringify(nodeParent)}`);\n\n    const chapterVerseContent = this.findVerseRefForNode(node, realParent);\n    if (!chapterVerseContent) return undefined;\n\n    if (!chapterVerseContent.chapterNum)\n      throw new Error(`Could not determine chapter number for ${JSON.stringify(node)}`);\n\n    const verseRef = new VerseRef(\n      bookId,\n      chapterVerseContent.chapterNum.toString(),\n      chapterVerseContent.verseNum ? chapterVerseContent.verseNum.toString() : '0',\n    );\n\n    let offset = 0;\n    // Walk forward through the USJ nodes until `node` is found, incrementing `offset` along the way\n    if (chapterVerseContent.startingContentNode !== undefined) {\n      this.findNextMatchingNode(chapterVerseContent.startingContentNode, [], (n, stack) => {\n        if (n === node) return true;\n        if (stack.find((level) => NODE_TYPES_NOT_CONTAINING_VERSE_TEXT.includes(level.parent.type)))\n          return false;\n        if (typeof n === 'string') {\n          offset += n.length;\n          return false;\n        }\n        if (\n          (n.type === CHAPTER_TYPE && n.number !== chapterVerseContent.chapterNum?.toString()) ||\n          (n.type === VERSE_TYPE && n.number !== chapterVerseContent.verseNum?.toString())\n        ) {\n          offset = 0;\n          return true;\n        }\n        return false;\n      });\n    }\n\n    return { verseRef, offset };\n  }\n\n  // #endregion\n\n  // #region JSONPath -> VerseRef + offset\n\n  jsonPathToVerseRefAndOffset(jsonPathQuery: string, bookId?: string): VerseRefOffset {\n    const effectiveBookId = bookId ?? this.findBookId();\n    if (!effectiveBookId) throw new Error('Not able to determine the book ID');\n\n    const target: MarkerContent | undefined = this.findSingleValue(jsonPathQuery);\n    if (!target) throw new Error(`No result found for JSONPath query: ${jsonPathQuery}`);\n\n    const parent: MarkerObject | MarkerContent[] | undefined = this.findParent(jsonPathQuery);\n    if (!parent) throw new Error(`Could not determine parent for ${jsonPathQuery}`);\n\n    const verseRefAndOffset = this.nodeToVerseRefAndOffset(effectiveBookId, target, parent);\n    if (!verseRefAndOffset)\n      throw new Error(`Could not determine VerseRef that corresponds to ${jsonPathQuery}`);\n\n    return verseRefAndOffset;\n  }\n\n  // #endregion\n\n  // #region VerseRef + offset -> Node + JSONPath + offset\n\n  verseRefToUsjContentLocation(verseRef: VerseRef, verseRefOffset: number = 0): UsjContentLocation {\n    if (verseRefOffset < 0) throw new Error('offset must be >= 0');\n\n    // Prefer getting the book ID from the USJ itself, but it might not be available\n    const bookId = this.findBookId() ?? verseRef.book;\n    if (!bookId) throw new Error('Not able to determine the book ID');\n    if (bookId !== verseRef.book)\n      throw new Error(`Book IDs don't match: USJ=${bookId}, VerseRef=${verseRef.book}`);\n\n    const chapterNode = this.findChapterNode(verseRef.chapterNum);\n    if (chapterNode === undefined)\n      throw new Error(`Could not find ${bookId} chapter ${verseRef.chapterNum}`);\n\n    let foundAnotherChapter = false;\n    let jsonPath: ContentJsonPath = '';\n    const expectedVerse = verseRef.verse;\n    const verseNode: MarkerContent | undefined = this.findNextMatchingNode(\n      chapterNode,\n      NODE_TYPES_NOT_CONTAINING_VERSE_TEXT,\n      (node, workingStack) => {\n        if (node === chapterNode) {\n          if (verseRef.verseNum === 0) {\n            jsonPath = UsjReaderWriter.convertWorkingStackToJsonPath(workingStack);\n            return true;\n          }\n          return false;\n        }\n        if (typeof node !== 'object') return false;\n        if (node.type === CHAPTER_TYPE) {\n          foundAnotherChapter = true;\n          return true;\n        }\n        if (\n          node.type === VERSE_TYPE &&\n          node.number !== undefined &&\n          node.number === expectedVerse\n        ) {\n          jsonPath = UsjReaderWriter.convertWorkingStackToJsonPath(workingStack);\n          return true;\n        }\n        return false;\n      },\n    );\n\n    if (foundAnotherChapter || verseNode === undefined || typeof verseNode === 'string')\n      throw new Error(`Verse ${expectedVerse} not found in ${bookId} ${verseRef.chapterNum}`);\n\n    if (verseRefOffset === 0) return { node: verseNode, offset: 0, jsonPath };\n\n    let cumulativeVerseLengthSeen = 0;\n    let usjNodeOffset = 0;\n    let foundNode: MarkerContent | undefined;\n    this.findNextMatchingNode(\n      verseNode,\n      NODE_TYPES_NOT_CONTAINING_VERSE_TEXT,\n      (node, workingStack) => {\n        if (node === verseNode) return false;\n        if (typeof node === 'string') {\n          cumulativeVerseLengthSeen += node.length;\n          if (cumulativeVerseLengthSeen > verseRefOffset) {\n            jsonPath = UsjReaderWriter.convertWorkingStackToJsonPath(workingStack);\n            usjNodeOffset = verseRefOffset - cumulativeVerseLengthSeen + node.length;\n            foundNode = node;\n            return true;\n          }\n        }\n        // If we found another verse or chapter, then the offset was larger than the verse length\n        // Just return the original verse node in that case\n        else if (node.type === CHAPTER_TYPE || node.type === VERSE_TYPE) return true;\n        return false;\n      },\n    );\n\n    return { node: foundNode ?? verseNode, offset: usjNodeOffset, jsonPath };\n  }\n\n  // #endregion\n\n  // #region Search for text from a node + JSONPath + offset\n\n  findNextLocationOfMatchingText(\n    startingPoint: UsjContentLocation,\n    text: string,\n    maxTextLengthToSearch: number = 1000,\n  ): UsjContentLocation | undefined {\n    let textScanned = '';\n    let lengthScanned = 0;\n    let lengthTrimmed = 0;\n    let foundStartingAtOffset = 0;\n    UsjReaderWriter.findNextMatchingNodeUsingWorkingStack(\n      startingPoint.node,\n      this.convertJsonPathToWorkingStack(startingPoint.jsonPath),\n      NODE_TYPES_NOT_CONTAINING_VERSE_TEXT,\n      (node) => {\n        if (typeof node !== 'string') return false;\n\n        lengthScanned += node.length;\n        textScanned = `${textScanned}${node}`;\n        const textIndex = textScanned.indexOf(text);\n        if (textIndex < 0) {\n          // Keep the string we're keeping around from going too large\n          lengthTrimmed += textScanned.length;\n          if (textScanned.length > text.length)\n            textScanned = textScanned.substring(textScanned.length - text.length);\n          lengthTrimmed -= textScanned.length;\n\n          // Stop looking if we haven't found it after scanning a lot of text\n          return lengthScanned > maxTextLengthToSearch;\n        }\n\n        // We found it!\n        foundStartingAtOffset = lengthTrimmed + textIndex;\n        return true;\n      },\n    );\n\n    // We never found what we wanted\n    if (foundStartingAtOffset <= 0) return undefined;\n\n    // The text might have been split between nodes, so we have to go through it one more time\n    lengthScanned = 0;\n    let finalOffset = 0;\n    let finalStack: WorkingStack = [];\n    const finalNode = UsjReaderWriter.findNextMatchingNodeUsingWorkingStack(\n      startingPoint.node,\n      this.convertJsonPathToWorkingStack(startingPoint.jsonPath),\n      NODE_TYPES_NOT_CONTAINING_VERSE_TEXT,\n      (node, stack) => {\n        if (typeof node !== 'string') return false;\n\n        lengthScanned += node.length;\n        if (lengthScanned < foundStartingAtOffset + 1) return false;\n\n        finalOffset = foundStartingAtOffset - lengthScanned + node.length;\n        finalStack = stack;\n        return true;\n      },\n    );\n    if (!finalNode) throw new Error('Internal error: inconsistent search results');\n\n    return {\n      node: finalNode,\n      offset: finalOffset,\n      jsonPath: UsjReaderWriter.convertWorkingStackToJsonPath(finalStack),\n    };\n  }\n\n  // #endregion\n\n  // #region Extract text from a node + JSONPath + offset\n\n  extractText(start: UsjContentLocation, desiredLength: number): string {\n    let retVal = '';\n    let offsetRemaining = start.offset;\n    let lengthRecorded = 0;\n    UsjReaderWriter.findNextMatchingNodeUsingWorkingStack(\n      start.node,\n      this.convertJsonPathToWorkingStack(start.jsonPath),\n      NODE_TYPES_NOT_CONTAINING_VERSE_TEXT,\n      (node) => {\n        if (typeof node !== 'string') return false;\n        if (offsetRemaining >= node.length) {\n          offsetRemaining -= node.length;\n          return false;\n        }\n        let remainingNode = node;\n        if (offsetRemaining > 0) {\n          remainingNode = remainingNode.substring(offsetRemaining);\n          offsetRemaining = 0;\n        }\n        if (lengthRecorded + remainingNode.length < desiredLength) {\n          lengthRecorded += remainingNode.length;\n          retVal = `${retVal}${remainingNode}`;\n          return false;\n        }\n        const lengthToCopy = desiredLength - lengthRecorded;\n        retVal = `${retVal}${remainingNode.substring(0, lengthToCopy - 1)}`;\n        return true;\n      },\n    );\n    return retVal;\n  }\n\n  extractTextBetweenPoints(\n    start: UsjContentLocation,\n    end: UsjContentLocation,\n    maxLength: number = 100,\n  ): string {\n    let retVal = '';\n    UsjReaderWriter.findNextMatchingNodeUsingWorkingStack(\n      start.node,\n      this.convertJsonPathToWorkingStack(start.jsonPath),\n      NODE_TYPES_NOT_CONTAINING_VERSE_TEXT,\n      (node, currentStack) => {\n        // `node` and `end.node` are both `MarkerContent` which might be strings or objects\n        if (node === end.node) {\n          // If both objects are the same, then we definitely found `end`\n          if (typeof node === 'object') return true;\n\n          // If both strings are the same, we need to verify that we're at the same place in `usj`\n          if (end.jsonPath === UsjReaderWriter.convertWorkingStackToJsonPath(currentStack))\n            return true;\n        }\n        if (typeof node !== 'string') return false;\n        retVal = `${retVal}${node}`;\n        if (retVal.length > maxLength) retVal = retVal.substring(0, maxLength);\n        return retVal.length >= maxLength;\n      },\n    );\n    return retVal;\n  }\n\n  // #endregion\n\n  // #region Edit this USJ data\n\n  private static removeContentNodesFromArray(\n    contentArray: MarkerContent[],\n    searchFunction: (potentiallyMatchingNode: MarkerContent) => boolean,\n  ) {\n    let removedCount = 0;\n    for (let i = contentArray.length - 1; i >= 0; i--) {\n      const node = contentArray[i];\n      if (searchFunction(node)) {\n        contentArray.splice(i, 1);\n        removedCount += 1;\n      } else if (typeof node !== 'string' && node.content)\n        removedCount += this.removeContentNodesFromArray(node.content, searchFunction);\n    }\n    return removedCount;\n  }\n\n  removeContentNodes(searchFunction: (potentiallyMatchingNode: MarkerContent) => boolean): number {\n    const retVal = UsjReaderWriter.removeContentNodesFromArray(this.usj.content, searchFunction);\n    this.usjChanged();\n    return retVal;\n  }\n\n  // #endregion\n}\n"],"names":["AsyncVariable","variableName","rejectIfNotSettledWithinMS","__publicField","resolve","reject","value","throwIfAlreadySettled","reason","Collator","locales","options","string1","string2","DateTimeFormat","date","startDate","endDate","PlatformEventEmitter","event","callback","callbackIndex","newGuid","s","isString","o","deepClone","obj","debounce","fn","delay","timeout","args","groupBy","items","keySelector","valueSelector","map","item","key","group","isErrorWithMessage","error","toErrorWithMessage","maybeError","getErrorMessage","wait","ms","waitForDuration","maxWaitTimeInMS","getAllObjectFunctionNames","_objId","objectFunctionNames","property","objectPrototype","createSyncProxyForAsyncObject","getObject","objectToProxy","target","prop","isErrorMessageAboutParatextBlockingInternetAccess","errorMessage","paratextExceptionMessage","isErrorMessageAboutRegistryAuthFailure","paratextExceptionMessage1","paratextExceptionMessage2","errorString","DocumentCombiner","baseDocument","documentName","document","previousDocumentVersion","documentToSet","contributions","contributionName","potentialOutput","outputIteration","contribution","mergeObjects","output","finalOutput","areNonArrayObjects","values","allMatch","areArrayObjects","startingPoint","copyFrom","ignoreDuplicateProperties","retVal","mergeObjectsInternal","startingPointObj","copyFromObj","Mutex","AsyncMutex","MutexMap","mutexID","NonValidatingDocumentCombiner","NumberFormat","startRange","endRange","defaultPromise","PromiseChainingMap","logger","promiseFunction","currentPromise","promiseHolder","newPromise","e","UnsubscriberAsyncList","name","unsubscribers","unsubscriber","unsubs","results","unsubscriberSucceeded","index","PLATFORM_ERROR_VERSION","newPlatformError","platformError","isPlatformError","P","R","n","N","B","O","S","K","g","k","x","T","X","V","w","L","G","A","H","C","I","y","q","U","m","l","h","c","E","r","D","i","u","v","f","d","b","p","J","M","find","list","predicate","ac","hasOwn","freeze","object","oc","assign","source","HTML_BOOLEAN_ATTRIBUTES","isHTMLBooleanAttribute","HTML_VOID_ELEMENTS","isHTMLVoidElement","tagName","HTML_RAW_TEXT_ELEMENTS","isHTMLRawTextElement","isHTMLEscapableRawTextElement","isHTMLMimeType","mimeType","MIME_TYPE","hasDefaultHTMLNamespace","_MIME_TYPES","isValidMimeType","NAMESPACE","conventions","require$$0","extendError","constructor","writableName","DOMExceptionName","DOMExceptionNames","isValidDomExceptionCode","endsWithError","DOMException","messageOrCode","nameOrMessage","code","ExceptionCode","entries","ParseError","message","locator","errors","detectUnicodeSupport","RegExpImpl","match","UNICODE_SUPPORT","chars","regexp","chars_without","search","reg","self","part","isStr","regg","UNICODE_REPLACEMENT_CHARACTER","Char","_SChar","SChar_s","S_OPT","NameStartChar","NameStartChar_s","NameChar","Name","Nmtoken","EntityRef","CharRef","Reference","PEReference","EntityValue","AttValue","NCNameStartChar","NCNameChar","NCName","QName","QName_exact","QName_group","SystemLiteral","PI","PubidChar","PubidLiteral","COMMENT_START","COMMENT_END","Comment","PCDATA","Mixed","_children_quantity","children","contentspec","ELEMENTDECL_START","elementdecl","NotationType","Enumeration","EnumeratedType","AttType","DefaultDecl","AttDef","ATTLIST_DECL_START","AttlistDecl","SYSTEM","PUBLIC","ExternalID","ExternalID_match","NDataDecl","EntityDef","ENTITY_DECL_START","GEDecl","PEDef","PEDecl","EntityDecl","PublicID","NotationDecl","Eq","VersionNum","VersionInfo","EncName","EncodingDecl","SDDecl","XMLDecl","DOCTYPE_DECL_START","CDATA_START","CDATA_END","CDStart","CDEnd","CData","CDSect","grammar","PDC","require$$1","require$$2","checkSymbol","symbol","notEmptyString","input","splitOnASCIIWhitespace","orderedSetReducer","current","element","toOrderedSet","arrayIncludes","validateQualifiedName","qualifiedName","validateAndExtract","namespace","prefix","localName","splitResult","copy","src","dest","_extends","Class","Super","pt","t","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","DocumentPosition","parentChain","node","chain","commonAncestor","a","docGUID","doc","NodeList","nodeFilter","buf","serializeToString","me","LiveNodeList","refresh","_updateLiveList","inc","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","el","newAttr","oldAttr","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","attr","lastIndex","namespaceURI","DOMImplementation","feature","version","doctype","contentType","Document","root","publicId","systemId","internalSubset","DocumentType","title","htmlNode","headNode","titleNode","Node","rootNode","other","parent","otherNode","newChild","refChild","_insertBefore","oldChild","assertPreReplacementValidityInDocument","_removeChild","deep","cloneNode","child","next","node1","node2","attr1","attr2","Attr","chain1","chain2","ca","_xmlEncoder","_visitNode","opt","ns","remove","_onUpdateChild","childNodes","parentNode","oldPreviousSibling","oldNextSibling","hasValidParentNodeType","hasInsertableNodeType","isDocTypeNode","isElementNode","isTextNode","isElementInsertionPossible","parentChildNodes","docTypeNode","isElementReplacementPossible","hasElementChildThatIsNotChild","assertPreInsertionValidity1to5","assertPreInsertionValidityInDocument","nodeChildNodes","nodeChildElements","parentElementChild","_inDocumentAssertion","cp","newFirst","newLast","pre","removed","importedNode","importNode","id","rtv","Element","attrs","DocumentFragment","data","Text","CDATASection","ProcessingInstruction","EntityReference","validated","old","classNames","classNamesSet","base","nodeClassNames","matches","nodeClassNamesSet","isHTMLDocument","lowerQualifiedName","nodeQualifiedName","matchingQName","CharacterData","offset","count","text","start","end","newText","newNode","Notation","Entity","XMLSerializer","nodeSerializeToString","refNode","uri","visibleNamespaces","needNamespaceDefine","isHTML","addSerializedAttribute","len","nodeName","prefixedNodeName","defaultNS","ai","nsi","canCloseTag","pubid","sysid","attrs2","getTextContent","dom","exports","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","XMLReader","defaultNSMap","entityMap","domBuilder","_copy","parse","ENTITY_REG","defaultNSMapCopy","errorHandler","fixedFromCharCode","surrogate1","surrogate2","entityReplacer","complete","appendText","xt","position","lineEnd","linePattern","lineStart","parseStack","unclosedTags","tagStart","fromSource","tagNameRaw","tagNameMatch","currentTagName","tagNameLower","config","localNSMap","parseProcessingInstruction","parseDoctypeCommentOrCData","ElementAttributes","currentNSMap","parseElementStartPart","locator2","copyLocator","appendElement","parseHtmlSpecialContent","addAttribute","qname","startIndex","attrName","qName","nsp","nsPrefix","elStartEnd","isEscapableRaw","elEndStart","parseUtils","char","skip","skipBlanks","blanks","substringFromIndex","substringStartsWith","getMatch","expr","parseDoctypeInternalSubset","parsePI","intSubsetStart","comment","cdata","sax","entities","require$$3","require$$4","normalizeLineEndings","DOMParser","DOMHandler","defaultNamespace","isXml","impl","ins","ch","length","_toString","charNode","comm","dt","level","_locator","handler","onErrorStopParsing","onWarningStopParsing","domParser","lib","charRegex","astralRange","comboRange","varRange","familyRange","astral","combo","fitz","modifier","nonAstral","regional","surrogatePair","zwj","blackFlag","family","optModifier","optVar","optJoin","seq","__importDefault","this","mod","dist","char_regex_1","toArray","str","substring","begin","substr","strLength","limit","padString","padPosition","padRepeats","indexOf","searchStr","pos","strArr","searchArr","finded","searchIndex","ensureArray","maybeArray","at","string","stringLength","charAt","codePointAt","endsWith","searchString","endPosition","lastIndexOfSearchString","lastIndexOf","indexOfClosestClosingCurlyBrace","escaped","closeCurlyBraceIndex","formatReplacementStringToArray","replacers","contents","nextIntermediateStartIndex","addToContents","newContent","newContentIndex","newContentLength","intermediateContent","baseSubstring","replacerKey","replacerContent","endContent","formatReplacementString","content","includes","partialString","stringzIndexOf","validatedPosition","stringzLength","normalize","form","upperCaseForm","ordinalCompare","padEnd","targetLength","stringzLimit","padStart","correctSliceIndex","slice","indexStart","indexEnd","newStart","newEnd","split","separator","splitLimit","result","regexSeparator","currentIndex","matchIndex","matchLength","startsWith","stringzSubstr","stringzSubstring","stringzToArray","isLocalizeKey","escapeStringRegexp","transformAndEnsureRegExpRegExpArray","stringStringMaybeArray","stringMaybeStringArray","transformAndEnsureRegExpArray","stringMaybeArray","whiteSpaceRegex","isWhiteSpace","toKebabCase","prevChar","nextChar","BLOCK_MARKER_TYPES","USJ_TYPE","ZWSP","scrBookData","FIRST_SCR_BOOK_NUM","LAST_SCR_BOOK_NUM","FIRST_SCR_CHAPTER_NUM","FIRST_SCR_VERSE_NUM","defaultScrRef","getChaptersForBook","bookNum","_a","offsetBook","scrRef","offsetChapter","offsetVerse","getLocalizedIdFromBookNumber","bookNumber","localizationLanguage","getLocalizedString","Canon","bookName","parts","scrRefToBBBCCCVVV","VerseRef","compareScrRefs","scrRef1","scrRef2","getLocalizeKeyForScrollGroupId","scrollGroupId","getLocalizeKeysForScrollGroupIds","scrollGroupIds","formatScrRef","optionOrLocalizedBookName","chapterVerseSeparator","bookChapterSeparator","book","nonSemanticWhiteSpaceRegex","isNonSemanticWhiteSpace","invisibleCharOrWhiteSpaceRegex","isParatextSelectableInvisibleCharOrWhiteSpace","normalizeScriptureSpaces","lastCharWasSpace","prevCh","isUsjContentEmpty","isAtEndOfBlockMarker","contentObject","areUsjContentsEqualExceptWhitespaceInternal","aParent","bParent","aIsString","bIsString","aNormalized","bNormalized","aTrimmed","bTrimmed","aObject","bObject","aKeys","isAContentEmpty","isBContentEmpty","aContent","bContent","aLast","bLast","areUsjContentsEqualExceptWhitespace","aggregateUnsubscribers","success","aggregateUnsubscriberAsyncs","unsubPromises","CHAPTER_TYPE","VERSE_TYPE","getOwnPropertyNames","getOwnPropertySymbols","hasOwnProperty","combineComparators","comparatorA","comparatorB","state","createIsCircular","areItemsEqual","cache","cachedA","cachedB","getStrictProperties","sameValueZeroEqual","PREACT_VNODE","PREACT_OWNER","REACT_OWNER","getOwnPropertyDescriptor","keys","areArraysEqual","areDatesEqual","areErrorsEqual","areFunctionsEqual","areMapsEqual","size","matchedIndices","aIterable","aResult","bResult","bIterable","hasMatch","aEntry","bEntry","areNumbersEqual","areObjectsEqual","properties","isPropertyEqual","areObjectsEqualStrict","descriptorA","descriptorB","arePrimitiveWrappersEqual","areRegExpsEqual","areSetsEqual","areTypedArraysEqual","areUrlsEqual","ARGUMENTS_TAG","BOOLEAN_TAG","DATE_TAG","ERROR_TAG","MAP_TAG","NUMBER_TAG","OBJECT_TAG","REG_EXP_TAG","SET_TAG","STRING_TAG","URL_TAG","isArray","isTypedArray","getTag","createEqualityComparator","type","tag","createEqualityComparatorConfig","circular","createCustomConfig","strict","areArraysEqual$1","areMapsEqual$1","areObjectsEqual$1","areSetsEqual$1","createInternalEqualityComparator","compare","_indexOrKeyA","_indexOrKeyB","_parentA","_parentB","createIsEqual","comparator","createState","equals","_b","meta","deepEqual","createCustomEqual","createCustomInternalComparator","isEqualDeep","isSubset","objectWithAllProperties","objectWithPartialProperties","partialArray","allArray","partialObj","allObj","serialize","replacer","space","replacerValue","newValue","deserialize","reviver","replaceNull","verseRefReviver","_vrefKey","vrefValue","chapter","verse","versification","ScrVers","combinedReviver","reviverKey","reviverVal","parsedObject","isSerializable","serializedValue","htmlEncode","getCurrentLocale","formatBytes","fileSize","decimals","sizes","sizeToUse","MILLISECONDS_PER_SECOND","SECONDS_PER_MINUTE","SECONDS_PER_HOUR","SECONDS_PER_DAY","formatTimeSpan","relativeTimeFormatter","since","to","spanSeconds","totalDays","totalHours","totalMinutes","settingsDefs","removeJsonToTypeScriptTypesStuff","defs","def","projectSettingsDocumentSchema","settingsDocumentSchema","localizedStringsDefs","localizedStringsDocumentSchema","menuDocumentSchema","NODE_TYPES_NOT_CONTAINING_VERSE_TEXT","UsjReaderWriter","usj","jsonPathQuery","wrappedResults","JSONPath","unwrappedResults","chapterNumber","chapterQuery","parentMap","workingStack","tempNode","tempParent","tempChild","stack","jsonPath","stackLevel","levels","onNode","onLevel","indexString","nextNode","skipTypes","candidate","searchFunction","skipNextNode","nextLevel","nodeParent","nodeNumber","nodeIndex","previousNodeIndex","nodeParentMarkerObject","grandparent","previousNode","descendant","bookId","realParent","chapterVerseContent","verseRef","effectiveBookId","verseRefAndOffset","verseRefOffset","chapterNode","foundAnotherChapter","expectedVerse","verseNode","cumulativeVerseLengthSeen","usjNodeOffset","foundNode","maxTextLengthToSearch","textScanned","lengthScanned","lengthTrimmed","foundStartingAtOffset","textIndex","finalOffset","finalStack","finalNode","desiredLength","offsetRemaining","lengthRecorded","remainingNode","lengthToCopy","maxLength","currentStack","contentArray","removedCount"],"mappings":"oTACA,MAAqBA,EAAiB,CAcpC,YAAYC,EAAsBC,EAAqC,IAAO,CAb7DC,EAAA,qBACAA,EAAA,uBACTA,EAAA,iBACAA,EAAA,iBAWN,KAAK,aAAeF,EACpB,KAAK,eAAiB,IAAI,QAAW,CAACG,EAASC,IAAW,CACxD,KAAK,SAAWD,EAChB,KAAK,SAAWC,CAAA,CACjB,EACGH,EAA6B,GAC/B,WAAW,IAAM,CACX,KAAK,WACP,KAAK,SAAS,oCAAoC,KAAK,YAAY,YAAY,EAC/E,KAAK,SAAS,IAEfA,CAA0B,EAE/B,OAAO,KAAK,IAAI,CAAA,CASlB,IAAI,SAAsB,CACxB,OAAO,KAAK,cAAA,CAQd,IAAI,YAAsB,CACjB,OAAA,OAAO,SAAS,IAAI,CAAA,CAU7B,eAAeI,EAAUC,EAAiC,GAAa,CACrE,GAAI,KAAK,SACP,QAAQ,MAAM,GAAG,KAAK,YAAY,wBAAwB,EAC1D,KAAK,SAASD,CAAK,EACnB,KAAK,SAAS,MACT,CACL,GAAIC,EAA6B,MAAA,MAAM,GAAG,KAAK,YAAY,sBAAsB,EACjF,QAAQ,MAAM,qCAAqC,KAAK,YAAY,EAAE,CAAA,CACxE,CAUF,iBAAiBC,EAAgBD,EAAiC,GAAa,CAC7E,GAAI,KAAK,SACP,QAAQ,MAAM,GAAG,KAAK,YAAY,wBAAwB,EAC1D,KAAK,SAASC,CAAM,EACpB,KAAK,SAAS,MACT,CACL,GAAID,EAA6B,MAAA,MAAM,GAAG,KAAK,YAAY,sBAAsB,EACjF,QAAQ,MAAM,oCAAoC,KAAK,YAAY,EAAE,CAAA,CACvE,CAIM,UAAiB,CACvB,KAAK,SAAW,OAChB,KAAK,SAAW,OAChB,OAAO,OAAO,IAAI,CAAA,CAEtB,CC5FA,MAAqBE,EAAS,CAG5B,YAAYC,EAA6BC,EAAgC,CAFjER,EAAA,iBAGN,KAAK,SAAW,IAAI,KAAK,SAASO,EAASC,CAAO,CAAA,CAYpD,QAAQC,EAAiBC,EAAyB,CAChD,OAAO,KAAK,SAAS,QAAQD,EAASC,CAAO,CAAA,CAS/C,iBAAgD,CACvC,OAAA,KAAK,SAAS,gBAAgB,CAAA,CAEzC,CC7BA,MAAqBC,EAAe,CAGlC,YAAYJ,EAA6BC,EAAsC,CAFvER,EAAA,0BAGN,KAAK,kBAAoB,IAAI,KAAK,eAAeO,EAASC,CAAO,CAAA,CAUnE,OAAOI,EAAoB,CAClB,OAAA,KAAK,kBAAkB,OAAOA,CAAI,CAAA,CAY3C,YAAYC,EAAiBC,EAAuB,CAClD,OAAO,KAAK,kBAAkB,YAAYD,EAAWC,CAAO,CAAA,CAW9D,mBAAmBD,EAAiBC,EAA+C,CACjF,OAAO,KAAK,kBAAkB,mBAAmBD,EAAWC,CAAO,CAAA,CASrE,cAAcF,EAAuC,CAC5C,OAAA,KAAK,kBAAkB,cAAcA,CAAI,CAAA,CASlD,iBAAsD,CAC7C,OAAA,KAAK,kBAAkB,gBAAgB,CAAA,CAElD,CCnDA,MAAqBG,EAA2C,CAAhE,cASEf,EAAA,iBAAY,KAAK,OAGTA,EAAA,sBAEAA,EAAA,kBAEAA,EAAA,kBAAa,IAyCrBA,EAAA,eAAU,IACD,KAAK,UAAU,GAQxBA,EAAA,YAAQgB,GAAa,CAEnB,KAAK,OAAOA,CAAK,CACnB,GA3CA,IAAI,OAA0B,CAC5B,YAAK,kBAAkB,EAElB,KAAK,YACH,KAAA,UAAaC,GAAa,CACzB,GAAA,CAACA,GAAY,OAAOA,GAAa,WAC7B,MAAA,IAAI,MAAM,4CAA4C,EAG9D,OAAK,KAAK,gBAAe,KAAK,cAAgB,CAAC,GAE1C,KAAA,cAAc,KAAKA,CAAQ,EAEzB,IAAM,CACP,GAAA,CAAC,KAAK,cAAsB,MAAA,GAEhC,MAAMC,EAAgB,KAAK,cAAc,QAAQD,CAAQ,EAErD,OAAAC,EAAgB,EAAU,IAGzB,KAAA,cAAc,OAAOA,EAAe,CAAC,EAEnC,GACT,CACF,GAEK,KAAK,SAAA,CAsBJ,OAAOF,EAAU,CACzB,KAAK,kBAAkB,EAID,CAAC,GAAI,KAAK,eAAiB,CAAA,CAAG,EACtC,QAASC,GAAaA,EAASD,CAAK,CAAC,CAAA,CAI3C,mBAAoB,CAC5B,GAAI,KAAK,WAAkB,MAAA,IAAI,MAAM,qBAAqB,CAAA,CAOlD,WAAY,CACpB,YAAK,kBAAkB,EAEvB,KAAK,WAAa,GAClB,KAAK,cAAgB,OACrB,KAAK,UAAY,OACV,QAAQ,QAAQ,EAAI,CAAA,CAE/B,CC9GO,SAASG,IAAkB,CAChC,MAAO,eAAe,QAAQ,QAAUC,KAGnC,KAAK,SAAW,CAAC,CAACA,GAAK,OAAYA,GAAG,SAAS,EAAE,EAAE,SAAS,EAAG,GAAG,CACvE,CACF,CASO,SAASC,GAASC,EAAyB,CACzC,OAAA,OAAOA,GAAM,UAAYA,aAAa,MAC/C,CASO,SAASC,GAAaC,EAAW,CAGtC,OAAO,KAAK,MAAM,KAAK,UAAUA,CAAG,CAAC,CACvC,CAYgB,SAAAC,GAA6CC,EAAOC,EAAQ,IAAQ,CAClF,GAAIN,GAASK,CAAE,EAAS,MAAA,IAAI,MAAM,0CAA0C,EACxE,IAAAE,EAGJ,MAAQ,IAAIC,IAAS,CACnB,aAAaD,CAAO,EACpBA,EAAU,WAAW,IAAMF,EAAG,GAAGG,CAAI,EAAGF,CAAK,CAC/C,CACF,CAiBgB,SAAAG,GACdC,EACAC,EACAC,EACsB,CAChB,MAAAC,MAAU,IACV,OAAAH,EAAA,QAASI,GAAS,CAChB,MAAAC,EAAMJ,EAAYG,CAAI,EACtBE,EAAQH,EAAI,IAAIE,CAAG,EACnBjC,EAAQ8B,EAAgBA,EAAcE,EAAMC,CAAG,EAAID,EACrDE,EAAaA,EAAA,KAAKlC,CAAK,EAClB+B,EAAA,IAAIE,EAAK,CAACjC,CAAK,CAAC,CAAA,CAC1B,EACM+B,CACT,CAQA,SAASI,GAAmBC,EAA2C,CACrE,OACE,OAAOA,GAAU,UAGjBA,IAAU,MACV,YAAaA,GAGb,OAAQA,EAAkC,SAAY,QAE1D,CAUA,SAASC,GAAmBC,EAAuC,CAC7D,GAAAH,GAAmBG,CAAU,EAAU,OAAAA,EAEvC,GAAA,CACF,OAAO,IAAI,MAAM,KAAK,UAAUA,CAAU,CAAC,CAAA,MACrC,CAGN,OAAO,IAAI,MAAM,OAAOA,CAAU,CAAC,CAAA,CAEvC,CAaO,SAASC,GAAgBH,EAAgB,CACvC,OAAAC,GAAmBD,CAAK,EAAE,OACnC,CAGO,SAASI,GAAKC,EAAY,CAE/B,OAAO,IAAI,QAAe3C,GAAY,WAAWA,EAAS2C,CAAE,CAAC,CAC/D,CAUgB,SAAAC,GAAyBnB,EAA4BoB,EAAyB,CAC5F,MAAMlB,EAAUe,GAAKG,CAAe,EAAE,KAAK,IAAM,EAAS,EAC1D,OAAO,QAAQ,IAAI,CAAClB,EAASF,EAAI,CAAA,CAAC,CACpC,CAagB,SAAAqB,GACdvB,EAGAwB,EAAiB,MACJ,CACP,MAAAC,MAA0B,IAGhC,OAAO,oBAAoBzB,CAAG,EAAE,QAAS0B,GAAa,CAChD,GAAA,CACE,OAAO1B,EAAI0B,CAAQ,GAAM,YAAYD,EAAoB,IAAIC,CAAQ,OAC3D,CAAA,CAGhB,CACD,EAIG,IAAAC,EAAkB,OAAO,eAAe3B,CAAG,EAC/C,KAAO2B,GAAmB,OAAO,eAAeA,CAAe,GAC7D,OAAO,oBAAoBA,CAAe,EAAE,QAASD,GAAa,CAC5D,GAAA,CACE,OAAO1B,EAAI0B,CAAQ,GAAM,YAAYD,EAAoB,IAAIC,CAAQ,OAC3D,CAAA,CAGhB,CACD,EACiBC,EAAA,OAAO,eAAeA,CAAe,EAGlD,OAAAF,CACT,CAcO,SAASG,GACdC,EACAC,EAA4B,GACzB,CAII,OAAA,IAAI,MAAMA,EAAoB,CACnC,IAAIC,EAAQC,EAAM,CAGhB,OAAIA,KAAQD,EAAeA,EAAOC,CAAI,EAC/B,SAAU3B,KAIP,MAAMwB,EAAU,GAAGG,CAAI,EAAE,GAAG3B,CAAI,CAC1C,CACF,CACD,CACH,CASO,SAAS4B,GAAkDC,EAAgC,CAEhG,MAAMC,EACJ,iFAEF,OAAItC,GAASqC,CAAY,EAAUA,EAAa,SAASC,CAAwB,EAC1EjB,GAAgBgB,CAAY,EAAE,SAASC,CAAwB,CACxE,CASO,SAASC,GAAuCF,EAAgC,CAErF,MAAMG,EAA4B,wDAE5BC,EACJ,sEAEIC,EAAc1C,GAASqC,CAAY,EAAIA,EAAehB,GAAgBgB,CAAY,EACxF,OACEK,EAAY,SAASF,CAAyB,GAC9CE,EAAY,SAASD,CAAyB,CAElD,CCzPA,MAAqBE,EAAiB,CAiB1B,YAAYC,EAAgCzD,EAAkC,CAhB9ER,EAAA,qBACSA,EAAA,yBAAoB,KAC7BA,EAAA,qBACSA,EAAA,gBACFA,EAAA,2BAAsB,IAAIe,IAIlCf,EAAA,oBAAe,KAAK,oBAAoB,WAU/C,KAAK,aAAeiE,EACpB,KAAK,QAAUzD,EACf,KAAK,mBAAmByD,CAAY,CAAA,CAStC,mBAAmBA,EAA8D,CAC/E,YAAK,qBAAqBA,CAAY,EACtC,KAAK,aAAe,KAAK,QAAQ,cAAgB1C,GAAU0C,CAAY,EAAIA,EAC3E,KAAK,aAAe,KAAK,qCAAqC,KAAK,YAAY,EACxE,KAAK,QAAQ,CAAA,CAkBtB,wBACEC,EACAC,EAC8B,CACzB,KAAA,qBAAqBD,EAAcC,CAAQ,EAChD,MAAMC,EAA0B,KAAK,cAAc,IAAIF,CAAY,EAC/D,IAAAG,EAAgB,KAAK,QAAQ,eAAmBF,EAAW5C,GAAU4C,CAAQ,EAAIA,EACrEE,EAAA,KAAK,qCAAqCH,EAAcG,CAAa,EAChF,KAAA,cAAc,IAAIH,EAAcG,CAAa,EAC9C,GAAA,CACF,OAAO,KAAK,QAAQ,QACb9B,EAAO,CAEd,MAAI6B,EAAyB,KAAK,cAAc,IAAIF,EAAcE,CAAuB,EACpF,KAAK,cAAc,OAAOF,CAAY,EACrC,IAAI,MAAM,yCAAyCA,CAAY,KAAK3B,CAAK,EAAE,CAAA,CACnF,CASF,mBAAmB2B,EAAoD,CACrE,MAAMC,EAAW,KAAK,cAAc,IAAID,CAAY,EACpD,GAAI,CAACC,EAAU,MAAM,IAAI,MAAM,GAAGD,CAAY,iBAAiB,EAC1D,KAAA,cAAc,OAAOA,CAAY,EAClC,GAAA,CACF,OAAO,KAAK,QAAQ,QACb3B,EAAO,CAET,WAAA,cAAc,IAAI2B,EAAcC,CAAQ,EACvC,IAAI,MAAM,0CAA0CD,CAAY,KAAK3B,CAAK,EAAE,CAAA,CACpF,CASF,wBAAuD,CACrD,GAAI,KAAK,cAAc,MAAQ,SAAU,KAAK,aAG9C,MAAM+B,EAAgB,CAAC,GAAG,KAAK,cAAc,SAAS,EAGxCA,EAAA,QAAQ,CAAC,CAACC,CAAgB,IAAM,KAAK,cAAc,OAAOA,CAAgB,CAAC,EAGrF,GAAA,CACF,OAAO,KAAK,QAAQ,QACbhC,EAAO,CAEA,MAAA+B,EAAA,QAAQ,CAAC,CAACC,EAAkBJ,CAAQ,IAChD,KAAK,cAAc,IAAII,EAAkBJ,CAAQ,CACnD,EACM,IAAI,MAAM,0CAA0C5B,CAAK,EAAE,CAAA,CACnE,CASF,SAAwC,CAElC,GAAA,KAAK,cAAc,OAAS,EAAG,CAC7B,IAAAiC,EAAkBjD,GAAU,KAAK,YAAY,EAC/B,OAAAiD,EAAA,KAAK,qCAAqCA,CAAe,EAC3E,KAAK,eAAeA,CAAe,EACnC,KAAK,aAAeA,EACf,KAAA,oBAAoB,KAAK,MAAS,EAChC,KAAK,YAAA,CAId,IAAIC,EAAkB,KAAK,aACtB,YAAA,cAAc,QAASC,GAAmC,CAC3CD,EAAAE,GAChBF,EACAC,EACA,KAAK,QAAQ,yBACf,EACA,KAAK,eAAeD,CAAe,CAAA,CACpC,EACiBA,EAAA,KAAK,qCAAqCA,CAAe,EAC3E,KAAK,eAAeA,CAAe,EACnC,KAAK,aAAeA,EACf,KAAA,oBAAoB,KAAK,MAAS,EAChC,KAAK,YAAA,CAgBJ,qCAAqCR,EAAkD,CACxF,OAAAA,CAAA,CAkBC,qCAERC,EACAC,EACkB,CACX,OAAAA,CAAA,CAWC,qBAAqBF,EAAsC,CAAA,CAW3D,qBAAqBC,EAAsBC,EAAkC,CAAA,CAU7E,eAAeS,EAAgC,CAAA,CAY/C,qCAAqCC,EAAiD,CACvF,OAAAA,CAAA,CAEX,CAUA,SAASC,MAAsBC,EAA4B,CACzD,IAAIC,EAAW,GACR,OAAAD,EAAA,QAAS5E,GAAmB,EAC7B,CAACA,GAAS,OAAOA,GAAU,UAAY,MAAM,QAAQA,CAAK,KAAc6E,EAAA,GAAA,CAC7E,EACMA,CACT,CAQA,SAASC,MAAmBF,EAA4B,CACtD,IAAIC,EAAW,GACR,OAAAD,EAAA,QAAS5E,GAAmB,EAC7B,CAACA,GAAS,OAAOA,GAAU,UAAY,CAAC,MAAM,QAAQA,CAAK,KAAc6E,EAAA,GAAA,CAC9E,EACMA,CACT,CAeA,SAASL,GACPO,EACAC,EACAC,EACkB,CACZ,MAAAC,EAAS9D,GAAU2D,CAAa,EAElC,OAACC,EAEEG,GAAqBD,EAAQ9D,GAAU4D,CAAQ,EAAGC,CAAyB,EAF5DC,CAGxB,CAeA,SAASC,GACPJ,EACAC,EACAC,EACkB,CACd,GAAA,CAACD,EAAiB,OAAAD,EAElB,GAAAJ,GAAmBI,EAAeC,CAAQ,EAAG,CAK/C,MAAMI,EAAmBL,EACnBM,EAAcL,EAEpB,OAAO,KAAKK,CAAW,EAAE,QAASpD,GAAyB,CACzD,GAAI,OAAO,OAAOmD,EAAkBnD,CAAG,GACrC,GAAI0C,GAAmBS,EAAiBnD,CAAG,EAAGoD,EAAYpD,CAAG,CAAC,EAC5DmD,EAAiBnD,CAAG,EAAIkD,GAGtBC,EAAiBnD,CAAG,EACpBoD,EAAYpD,CAAG,EACfgD,CAEF,UACSH,GAAgBM,EAAiBnD,CAAG,EAAGoD,EAAYpD,CAAG,CAAC,EAKhEmD,EAAiBnD,CAAG,EAAKmD,EAAiBnD,CAAG,EAAoB,OAC/DoD,EAAYpD,CAAG,CACjB,UAES,CAACgD,EACV,MAAM,IAAI,MAAM,8BAA8BhD,CAAG,uCAAuC,OAIzEmD,EAAAnD,CAAG,EAAIoD,EAAYpD,CAAG,CACzC,CACD,CACQ,MAAA6C,GAAgBC,EAAeC,CAAQ,GAM/CD,EAAgC,KAAK,GAAIC,CAA0B,EAS/D,OAAAD,CACT,CC7WA,MAAMO,WAAcC,GAAAA,KAAW,CAAC,CCvBhC,MAAMC,EAAS,CAAf,cACU3F,EAAA,uBAAkB,KAE1B,IAAI4F,EAAwB,CAC1B,IAAIP,EAAS,KAAK,YAAY,IAAIO,CAAO,EACzC,OAAIP,IAEJA,EAAS,IAAII,GACR,KAAA,YAAY,IAAIG,EAASP,CAAM,EAC7BA,EAAA,CAEX,CCZA,MAAqBQ,WAAsC7B,EAAiB,CAG1E,YAAYC,EAAgCzD,EAAkC,CAC5E,MAAMyD,EAAczD,CAAO,CAAA,CAG7B,IAAI,QAAuC,CACzC,OAAO,KAAK,YAAA,CAEhB,CCXA,MAAqBsF,EAAa,CAGhC,YAAYvF,EAA6BC,EAAoC,CAFrER,EAAA,wBAGN,KAAK,gBAAkB,IAAI,KAAK,aAAaO,EAASC,CAAO,CAAA,CAU/D,OAAOL,EAAgC,CAC9B,OAAA,KAAK,gBAAgB,OAAOA,CAAK,CAAA,CAY1C,YAAY4F,EAA6BC,EAAmC,CAC1E,OAAO,KAAK,gBAAgB,YAAYD,EAAYC,CAAQ,CAAA,CAY9D,mBACED,EACAC,EAC8B,CAC9B,OAAO,KAAK,gBAAgB,mBAAmBD,EAAYC,CAAQ,CAAA,CASrE,cAAc7F,EAAiD,CACtD,OAAA,KAAK,gBAAgB,cAAcA,CAAK,CAAA,CASjD,iBAAoD,CAC3C,OAAA,KAAK,gBAAgB,gBAAgB,CAAA,CAEhD,CCnEA,MAAM8F,GAAiB,QAAQ,QAAQ,EAkBvC,MAAqBC,EAAkC,CAUrD,YAAYC,EAA8C,QAAS,CATlDnG,EAAA,eAAU,KACVA,EAAA,eASf,KAAK,OAASmG,CAAA,CAWhB,mBAAmB/D,EAAWgE,EAA+C,CAC3E,MAAMC,EAAiB,KAAK,IAAI,IAAIjE,CAAG,EAClC,KAAA,IAAI,IAAIA,EAAKiE,EAAiBA,EAAe,KAAKD,CAAe,EAAIA,GAAiB,EAC3F,KAAK,oBAAoBhE,CAAG,CAAA,CAU9B,IAAIA,EAAyC,CACpC,OAAA,KAAK,IAAI,IAAIA,CAAG,CAAA,CASjB,oBAAoBA,EAAiB,CAC3C,MAAMiE,EAAiB,KAAK,IAAI,IAAIjE,CAAG,EACvC,GAAI,CAACiE,EAAgB,OAEf,MAAAC,EAA+C,CAAE,QAASL,EAAe,EACzEM,EAAaF,EAChB,MAAOG,GAAM,KAAK,OAAO,KAAK,wBAAwBpE,CAAG,KAAKoE,EAAE,OAAO,EAAE,CAAC,EAC1E,QAAQ,IAAM,CACT,KAAK,IAAI,IAAIpE,CAAG,IAAMkE,EAAc,SAAS,KAAK,IAAI,OAAOlE,CAAG,CAAA,CACrE,EACHkE,EAAc,QAAUC,EACnB,KAAA,IAAI,IAAInE,EAAKmE,CAAU,CAAA,CAEhC,CCxEA,MAAqBE,EAAsB,CAGzC,YAAoBC,EAAO,YAAa,CAF/B1G,EAAA,yBAAoB,KAET,KAAA,KAAA0G,CAAA,CAOpB,OAAOC,EAA+D,CACtDA,EAAA,QAASC,GAAiB,CAClC,YAAaA,EACf,KAAK,cAAc,IAAIA,EAAa,QAAQ,KAAKA,CAAY,CAAC,EAC3D,KAAK,cAAc,IAAIA,CAAY,CAAA,CACzC,CAAA,CAQH,MAAM,qBAAwC,CACtC,MAAAC,EAAS,CAAC,GAAG,KAAK,aAAa,EAAE,IAAKD,GAAiBA,GAAc,EACrEE,EAAU,MAAM,QAAQ,IAAID,CAAM,EACxC,YAAK,cAAc,MAAM,EAClBC,EAAQ,MAAM,CAACC,EAAuBC,KACtCD,GACH,QAAQ,MAAM,yBAAyB,KAAK,IAAI,2BAA2BC,CAAK,UAAU,EAErFD,EACR,CAAA,CAEL,CCpCO,MAAME,GAAyB,EAuC/B,SAASC,GAAiB3E,EAAgC,CAC/D,GAAI,CAACA,EAAO,MAAO,CAAE,QAAS,GAAI,qBAAsB0E,EAAuB,EAC3E,GAAA5F,GAASkB,CAAK,EAAG,MAAO,CAAE,QAASA,EAAO,qBAAsB0E,EAAuB,EACvF,GAAA,OAAO1E,GAAU,UAAY,YAAaA,GAAS,OAAOA,EAAM,SAAY,SAAU,CACxF,MAAM4E,EAA+B,CACnC,QAAS5E,EAAM,QACf,qBAAsB0E,EACxB,EACA,OAAO,OAAO,iBAAiBE,EAAe,OAAO,0BAA0B5E,CAAK,CAAC,CAAA,CAEvF,MAAO,CAAE,MAAOA,EAAO,QAAS,GAAI,qBAAsB0E,EAAuB,CACnF,CAQO,SAASG,GAAgB7E,EAAwC,CACtE,MAAO,CAAC,CAACA,GAAS,OAAOA,GAAU,UAAY,yBAA0BA,CAC3E,CC9DA,IAAI8E,GAAI,OAAO,eACXC,GAAI,CAAC,EAAG,EAAGlG,IAAM,KAAK,EAAIiG,GAAE,EAAG,EAAG,CAAE,WAAY,GAAI,aAAc,GAAI,SAAU,GAAI,MAAOjG,CAAC,CAAE,EAAI,EAAE,CAAC,EAAIA,EACzGmG,EAAI,CAAC,EAAG,EAAGnG,IAAMkG,GAAE,EAAG,OAAO,GAAK,SAAW,EAAI,GAAK,EAAGlG,CAAC,EAW9D,MAAMoG,GAAI,CACR,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MAEA,MAEA,MAEA,MAEA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,MAEA,MAEA,MAEA,MAEA,MACA,MACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,MACA,MACA,KACF,EAAGC,GAAI,CACL,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACF,EAAGC,GAAI,CACL,UACA,SACA,YACA,UACA,cACA,SACA,SACA,OACA,WACA,WACA,UACA,UACA,eACA,eACA,OACA,WACA,kBACA,MACA,SACA,WACA,eACA,gBACA,SACA,WACA,eACA,UACA,kBACA,QACA,OACA,OACA,UACA,QACA,QACA,QACA,WACA,YACA,SACA,YACA,UACA,UACA,OACA,OACA,OACA,OACA,SACA,gBACA,gBACA,YACA,YACA,cACA,aACA,kBACA,kBACA,YACA,YACA,QACA,WACA,UACA,QACA,UACA,UACA,SACA,SACA,SACA,OACA,aACA,QACA,SACA,eACA,oBACA,0BACA,SACA,qBACA,sBACA,UACA,qBACA,cACA,cACA,cACA,cACA,mBACA,mBACA,qBACA,YACA,OACA,oBAGA,uBACA,uBACA,sBACA,yBACA,wBACA,qBACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,eACA,cACA,eACA,oBACA,qBACA,0BACA,0BACA,eACA,eACA,YACA,gBACA,cACA,eACA,iBACA,wBACA,mBACA,WACA,QACA,aACA,aACA,aACA,2BACA,4BACA,YACF,EAAGC,GAAIC,GAAG,EACV,SAASC,GAAE,EAAG,EAAI,GAAI,CACpB,OAAO,IAAM,EAAI,EAAE,YAAa,GAAG,KAAKF,GAAIA,GAAE,CAAC,EAAI,CACrD,CACA,SAASG,GAAE,EAAG,CACZ,OAAOD,GAAE,CAAC,EAAI,CAChB,CACA,SAASE,GAAE,EAAG,CACZ,MAAM,EAAI,OAAO,GAAK,SAAWF,GAAE,CAAC,EAAI,EACxC,OAAO,GAAK,IAAM,GAAK,EA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,MAAO,CAAE,KAAM,QAAS,CAAA,CAC1B,CACF,CACF,CACF,CAEJ,EACA,yBAA0B,CACxB,YACE,ugDACF,MAAO,CACL,CACE,KAAM,MACR,EACA,CACE,KAAM,QACR,EACA,CACE,KAAM,QACN,MAAO,CACL,MAAO,CACL,CACE,KAAM,QACR,EACA,CACE,KAAM,QACN,MAAO,CAAE,KAAM,QAAS,CAAA,CAC1B,CACF,CACF,CACF,CAEJ,EACA,qBAAsB,CACpB,YACE,ybACF,MAAO,CACL,CACE,KAAM,MACR,EACA,CACE,KAAM,QACR,EACA,CACE,KAAM,QACN,MAAO,CAAE,KAAM,QAAS,CAAA,CAC1B,CAEJ,EACA,qBAAsB,CACpB,YACE,mdACF,MAAO,CACL,CACE,KAAM,MACR,EACA,CACE,KAAM,QACR,EACA,CACE,KAAM,QACN,MAAO,CAAE,KAAM,QAAS,CAAA,CAC1B,CACF,CACF,CAEJ,EACA,qBAAsB,CACpB,YACE,sFACF,MAAO,CACL,CACE,KAAM,uBACR,EACA,CACE,KAAM,QACN,MAAO,CACL,KAAM,uBAAA,CACR,CACF,CAEJ,EACA,cAAe,CACb,YAAa,wCACb,KAAM,SACN,WAAY,CACV,MAAO,CACL,YAAa,qEACb,KAAM,qBACR,EACA,YAAa,CACX,YAAa,yEACb,KAAM,qBACR,EACA,WAAY,CACV,KAAM,2BAAA,CAEV,EACA,SAAU,CAAC,QAAS,YAAY,CAClC,EACA,kBAAmB,CACjB,YAAa,0EACb,KAAM,SACN,kBAAmB,CACjB,sBAAuB,CACrB,KAAM,iBAAA,CAEV,EACA,qBAAsB,EACxB,EACA,QAAS,CACP,YAAa,gDACb,MAAO,CACL,CACE,KAAM,oCAAA,CACR,CAEJ,EACA,2BAA4B,CAC1B,YAAa,yDACb,MAAO,CACL,CACE,KAAM,qBACR,EACA,CACE,KAAM,qCAAA,CACR,CAEJ,EACA,YAAa,CACX,YAAa,sDACb,MAAO,CACL,CACE,KAAM,mBACR,EACA,CACE,KAAM,SACN,WAAY,CACV,MAAO,CACL,YAAa,uEACb,KAAM,qBACR,EACA,YAAa,CACX,YAAa,2EACb,KA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KAAM,SACN,QAAS,kBACX,EACA,eAAgB,CACd,YACE,oGACF,KAAM,SACN,QAAS,yBACX,EACA,aAAc,CACZ,YAAa,qFACb,KAAM,SACN,QAAS,gHACX,EACA,mBAAoB,CAClB,YACE,uFACF,KAAM,SACN,kBAAmB,CACjB,0BAA2B,CACzB,YAAa,qCACb,KAAM,SACN,WAAY,CACV,MAAO,CACL,YAAa,6CACb,KAAM,qBACR,EACA,cAAe,CACb,YACE,wFACF,KAAM,QACR,EACA,MAAO,CACL,YACE,6EACF,KAAM,QACR,EACA,aAAc,CACZ,YACE,8EACF,KAAM,SAAA,CAEV,EACA,SAAU,CAAC,QAAS,OAAO,EAC3B,qBAAsB,EAAA,CAE1B,EACA,WAAY,CACV,aAAc,CACZ,YACE,qFACF,KAAM,SAAA,CACR,CAEJ,EACA,WAAY,CACV,YACE,uJACF,KAAM,SACN,kBAAmB,CACjB,0BAA2B,CACzB,YAAa,wCACb,KAAM,SACN,MAAO,CACL,CACE,WAAY,CACV,OAAQ,CACN,YACE,wEACF,KAAM,wBACR,EACA,MAAO,CACL,YACE,yGACF,KAAM,QACR,EACA,aAAc,CACZ,YACE,iFACF,KAAM,SAAA,CAEV,EACA,SAAU,CAAC,OAAO,EAClB,qBAAsB,EACxB,EACA,CACE,WAAY,CACV,SAAU,CACR,YAAa,8DACb,KAAM,wBACR,EACA,MAAO,CACL,YACE,yGACF,KAAM,QACR,EACA,aAAc,CACZ,YACE,iFACF,KAAM,SAAA,CAEV,EACA,SAAU,CAAC,WAAY,OAAO,EAC9B,qBAAsB,EAAA,CACxB,CACF,CAEJ,EACA,qBAAsB,EACxB,EACA,SAAU,CACR,YACE,mGACF,KAAM,SACN,MAAO,CACL,CACE,WAAY,CACV,GAAI,CACF,YAAa,6CACb,KAAM,wBAAA,CAEV,EACA,SAAU,CAAC,IAAI,CACjB,EACA,CACE,WAAY,CACV,QAAS,CACP,YAAa,mEACb,KAAM,wBACR,EACA,eAAgB,CACd,YACE,0GACF,KAAM,QACR,EACA,cAAe,CACb,YACE,yGACF,KAAM,QAAA,CAEV,EACA,SAAU,CAAC,SAAS,CA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","x_google_ignoreList":[13,14,15,16,17,18,19,20,21,22,23,24,30]}